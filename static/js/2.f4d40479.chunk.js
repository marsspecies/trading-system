/*! For license information please see 2.f4d40479.chunk.js.LICENSE.txt */
(this["webpackJsonptrading-system"]=this["webpackJsonptrading-system"]||[]).push([[2],[function(e,t,r){"use strict";e.exports=r(188)},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t){function r(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}e.exports=function(e,t,i){return t&&r(e.prototype,t),i&&r(e,i),e}},function(e,t){function r(t){return e.exports=r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},r(t)}e.exports=r},function(e,t,r){var i=r(125);e.exports=function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}},function(e,t,r){var i=r(3),n=r(159),a=r(268);e.exports=function(e){var t=n();return function(){var r,n=i(e);if(t){var s=i(this).constructor;r=Reflect.construct(n,arguments,s)}else r=n.apply(this,arguments);return a(this,r)}}},function(e,t,r){var i=r(277);function n(t,r,a){return"undefined"!==typeof Reflect&&Reflect.get?e.exports=n=Reflect.get:e.exports=n=function(e,t,r){var n=i(e,t);if(n){var a=Object.getOwnPropertyDescriptor(n,t);return a.get?a.get.call(r):a.value}},n(t,r,a||t)}e.exports=n},function(e,t,r){e.exports=r(117)},function(e,t){function r(e,t,r,i,n,a,s){try{var o=e[a](s),u=o.value}catch(c){return void r(c)}o.done?t(u):Promise.resolve(u).then(i,n)}e.exports=function(e){return function(){var t=this,i=arguments;return new Promise((function(n,a){var s=e.apply(t,i);function o(e){r(s,n,a,o,u,"next",e)}function u(e){r(s,n,a,o,u,"throw",e)}o(void 0)}))}}},function(e,t,r){"use strict";function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,"a",(function(){return i}))},function(e,t,r){"use strict";var i=r(138),n=r(1),a=r(158),s=r(4),o=r(5),u=r(21),c=r(270);e.exports=function e(t,r){for(var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},d=function(){var r=u(l[h],2),d=r[0],f=r[1],p=Object.assign(c,i({},d,function(e){s(r,e);var t=o(r);function r(e){var i;return n(this,r),(i=t.call(this,e)).constructor=p,i.__proto__=p.prototype,i.name=d,i.message=e,Object.setPrototypeOf(a(i),p.prototype),i}return r}(t)))[d];e(p,f,c)},h=0,l=Object.entries(r);h<l.length;h++)d();return c}(Error,c)},function(e,t,r){"use strict";var i=r(7),n=r(8),a=r(21),s=r(1),o=r(2),u=r(135),c=u.isNode,d=(u.keys,u.values,u.deepExtend),h=u.extend,l=u.clone,f=u.flatten,p=u.unique,v=u.indexBy,m=u.sortBy,g=u.groupBy,y=u.aggregate,b=(u.uuid,u.unCamelCase),x=(u.precisionFromString,u.throttle),k=u.capitalize,w=(u.now,u.timeout),_=u.TimedOut,S=u.buildOHLCVC,O=u.decimalToPrecision,T=u.defaultFetch,C=r(10),I=C.ExchangeError,M=C.BadSymbol,A=C.InvalidAddress,E=C.NotSupported,N=C.AuthenticationError,P=C.DDoSProtection,D=C.RequestTimeout,L=C.ExchangeNotAvailable,B=C.RateLimitExceeded,R=u.precisionConstants,V=R.TRUNCATE,G=R.ROUND,F=R.DECIMAL_PLACES,q=R.NO_PADDING,j=r(36),z=r(12);e.exports=function(){function e(){var t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};s(this,e),Object.assign(this,u),this.options={},this.fetchOptions={},this.userAgents={chrome:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/62.0.3202.94 Safari/537.36",chrome39:"Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/39.0.2171.71 Safari/537.36"},this.headers={},this.proxy="",this.origin="*",this.minFundingAddressLength=1,this.substituteCommonCurrencyCodes=!0,this.quoteJsonNumbers=!0,this.number=Number,this.reduceFees=!0,this.fetchImplementation=T,this.timeout=1e4,this.verbose=!1,this.debug=!1,this.userAgent=void 0,this.twofa=void 0,this.apiKey=void 0,this.secret=void 0,this.uid=void 0,this.login=void 0,this.password=void 0,this.privateKey=void 0,this.walletAddress=void 0,this.token=void 0,this.balance={},this.orderbooks={},this.tickers={},this.orders=void 0,this.trades={},this.transactions={},this.ohlcvs={},this.myTrades=void 0,this.requiresWeb3=!1,this.requiresEddsa=!1,this.precision={},this.enableLastJsonResponse=!0,this.enableLastHttpResponse=!0,this.enableLastResponseHeaders=!0,this.last_http_response=void 0,this.last_json_response=void 0,this.last_response_headers=void 0;var i=function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t;if(null!==r){for(var i=Object.getOwnPropertyNames(r),n=0;n<i.length;n++){var a=i[n];t[b(a)]=t[a]}e(Object.getPrototypeOf(r))}};i();for(var n=Object.entries(this.describe()).concat(Object.entries(r)),o=0;o<n.length;o++){var h=a(n[o],2),l=h[0],f=h[1];f&&Object.getPrototypeOf(f)===Object.prototype?this[l]=d(this[l],f):this[l]=f}var p={keepAlive:!0};!this.httpAgent&&T.http&&c&&(this.httpAgent=new T.http.Agent(p)),!this.httpsAgent&&T.https&&c&&(this.httpsAgent=new T.https.Agent(p));for(var v=Object.keys(this.has),m=0;m<v.length;m++){var g=v[m];this["has"+k(g)]=!!this.has[g]}this.api&&this.defineRestApi(this.api,"request"),this.initRestRateLimiter(),this.markets&&this.setMarkets(this.markets)}return o(e,[{key:"describe",value:function(){return{id:void 0,name:void 0,countries:void 0,enableRateLimit:!1,rateLimit:2e3,certified:!1,pro:!1,has:{loadMarkets:!0,cancelAllOrders:!1,cancelOrder:!0,cancelOrders:!1,CORS:!1,createDepositAddress:!1,createLimitOrder:!0,createMarketOrder:!0,createOrder:!0,deposit:!1,editOrder:"emulated",fetchBalance:!0,fetchBidsAsks:!1,fetchClosedOrders:!1,fetchCurrencies:!1,fetchDepositAddress:!1,fetchDeposits:!1,fetchFundingFees:!1,fetchL2OrderBook:!0,fetchLedger:!1,fetchMarkets:!0,fetchMyTrades:!1,fetchOHLCV:"emulated",fetchOpenOrders:!1,fetchOrder:!1,fetchOrderBook:!0,fetchOrderBooks:!1,fetchOrders:!1,fetchOrderTrades:!1,fetchStatus:"emulated",fetchTicker:!0,fetchTickers:!1,fetchTime:!1,fetchTrades:!0,fetchTradingFee:!1,fetchTradingFees:!1,fetchTradingLimits:!1,fetchTransactions:!1,fetchWithdrawals:!1,privateAPI:!0,publicAPI:!0,signIn:!1,withdraw:!1},urls:{logo:void 0,api:void 0,www:void 0,doc:void 0,fees:void 0},api:void 0,requiredCredentials:{apiKey:!0,secret:!0,uid:!1,login:!1,password:!1,twofa:!1,privateKey:!1,walletAddress:!1,token:!1},markets:void 0,currencies:{},timeframes:void 0,fees:{trading:{tierBased:void 0,percentage:void 0,taker:void 0,maker:void 0},funding:{tierBased:void 0,percentage:void 0,withdraw:{},deposit:{}}},status:{status:"ok",updated:void 0,eta:void 0,url:void 0},exceptions:void 0,httpExceptions:{422:I,418:P,429:B,404:L,409:L,410:L,500:L,501:L,502:L,520:L,521:L,522:L,525:L,526:L,400:L,403:L,405:L,503:L,530:L,408:D,504:D,401:N,511:N},dontGetUsedBalanceFromStaleCache:!1,commonCurrencies:{XBT:"BTC",BCC:"BCH",DRK:"DASH",BCHABC:"BCH",BCHSV:"BSV"},precisionMode:F,paddingMode:q,limits:{amount:{min:void 0,max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0}}}}},{key:"defaults",value:function(){return{}}},{key:"nonce",value:function(){return this.seconds()}},{key:"encodeURIComponent",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return encodeURIComponent.apply(void 0,arguments)}))},{key:"checkRequiredCredentials",value:function(){for(var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=Object.keys(this.requiredCredentials),r=0;r<t.length;r++){var i=t[r];if(this.requiredCredentials[i]&&!this[i]){if(e)throw new N(this.id+" requires `"+i+"` credential");return e}}return!0}},{key:"checkAddress",value:function(e){if(void 0===e)throw new A(this.id+" address is undefined");if(1===p(e).length||e.length<this.minFundingAddressLength||e.includes(" "))throw new A(this.id+" address is invalid or has less than "+this.minFundingAddressLength.toString()+' characters: "'+this.json(e)+'"');return e}},{key:"initRestRateLimiter",value:function(){var e=this;if(void 0===this.rateLimit)throw new Error(this.id+".rateLimit property is not configured");this.tokenBucket=this.extend({delay:1,capacity:1,defaultCost:1,maxCapacity:1e3},this.tokenBucket),this.throttle=x(this.tokenBucket),this.executeRestRequest=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,a=e.fetchImplementation,s={method:r,headers:i,body:n,timeout:e.timeout};e.agent?s.agent=e.agent:e.httpAgent&&0===t.indexOf("http://")?s.agent=e.httpAgent:e.httpsAgent&&0===t.indexOf("https://")&&(s.agent=e.httpsAgent);var o=a(t,e.extend(s,e.fetchOptions)).catch((function(i){if(c)throw new L([e.id,r,t,i.type,i.message].join(" "));throw i})).then((function(a){return e.handleRestResponse(a,t,r,i,n)}));return w(e.timeout,o).catch((function(i){if(i instanceof _)throw new D(e.id+" "+r+" "+t+" request timed out ("+e.timeout+" ms)");throw i}))}}},{key:"setSandboxMode",value:function(e){if(e){if(!("test"in this.urls))throw new E(this.id+" does not have a sandbox URL");"string"===typeof this.urls.api?(this.urls.apiBackup=this.urls.api,this.urls.api=this.urls.test):(this.urls.apiBackup=l(this.urls.api),this.urls.api=l(this.urls.test))}else"apiBackup"in this.urls&&("string"===typeof this.urls.api?this.urls.api=this.urls.apiBackup:this.urls.api=l(this.urls.apiBackup))}},{key:"defineRestApi",value:function(e,t){for(var r=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],s=Object.keys(e),o=0;o<s.length;o++){var u=s[o],c=e[u];Array.isArray(c)?function(){for(var e=u.toUpperCase(),s=u.toLowerCase(),o=r.capitalize(s),d=function(u){var d=c[u].trim(),h=d.split(/[^a-zA-Z0-9]/),l=h.map(r.capitalize).join(""),f=h.map((function(e){return e.trim().toLowerCase()})).filter((function(e){return e.length>0})).join("_"),p=[a[0]].concat(a.slice(1).map(r.capitalize)).join(""),v=[a[0]].concat(a.slice(1).map((function(e){return e.trim()})).filter((function(e){return e.length>0}))).join("_"),m=p+o+r.capitalize(l),g=v+"_"+s+"_"+f,y=a.length>1?a:a[0],b=function(){var a=n(i.mark((function n(a){return i.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",r[t](d,y,e,a||{}));case 1:case"end":return i.stop()}}),n)})));return function(e){return a.apply(this,arguments)}}();r[m]=b,r[g]=b},h=0;h<c.length;h++)d(h)}():this.defineRestApi(c,t,a.concat([u]))}}},{key:"print",value:function(){var e;(e=console).log.apply(e,arguments)}},{key:"setHeaders",value:function(e){return e}},{key:"fetch",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;return c&&this.userAgent&&("string"===typeof this.userAgent?r=h({"User-Agent":this.userAgent},r):"object"===typeof this.userAgent&&"User-Agent"in this.userAgent&&(r=h(this.userAgent,r))),"function"===typeof this.proxy?(e=this.proxy(e),c&&(r=h({Origin:this.origin},r))):"string"===typeof this.proxy&&(this.proxy.length&&c&&(r=h({Origin:this.origin},r)),e=this.proxy+e),r=h(this.headers,r),r=this.setHeaders(r),this.verbose&&this.print("fetch:\n",this.id,t,e,"\nRequest:\n",r,"\n",i,"\n"),this.executeRestRequest(e,t,r,i)}},{key:"fetch2",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=c.length>1&&void 0!==c[1]?c[1]:"public",n=c.length>2&&void 0!==c[2]?c[2]:"GET",a=c.length>3&&void 0!==c[3]?c[3]:{},s=c.length>4&&void 0!==c[4]?c[4]:void 0,o=c.length>5&&void 0!==c[5]?c[5]:void 0,!this.enableRateLimit){e.next=8;break}return e.next=8,this.throttle(this.rateLimit);case 8:return u=this.sign(t,r,n,a,s,o),e.abrupt("return",this.fetch(u.url,u.method,u.headers,u.body));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"request",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0;return this.fetch2(e,t,r,i,n,a)}},{key:"parseJson",value:function(e){try{if(this.isJsonEncodedObject(e))return JSON.parse(this.onJsonResponse(e))}catch(t){return}}},{key:"throwExactlyMatchedException",value:function(e,t,r){if(t in e)throw new e[t](r)}},{key:"throwBroadlyMatchedException",value:function(e,t,r){var i=this.findBroadlyMatchedKey(e,t);if(void 0!==i)throw new e[i](r)}},{key:"findBroadlyMatchedKey",value:function(e,t){for(var r=Object.keys(e),i=0;i<r.length;i++){var n=r[i];if(t.indexOf(n)>=0)return n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,u){}},{key:"handleHttpStatusCode",value:function(e,t,r,i,n){var a=e.toString();if(a in this.httpExceptions)throw new(0,this.httpExceptions[a])([this.id,i,r,e,t,n].join(" "))}},{key:"getResponseHeaders",value:function(e){var t={};return e.headers.forEach((function(e,r){r=r.split("-").map((function(e){return k(e)})).join("-"),t[r]=e})),t}},{key:"handleRestResponse",value:function(e,t){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0;return e.text().then((function(s){var o=r.getResponseHeaders(e),u=r.onRestResponse(e.status,e.statusText,t,i,o,s,n,a),c=r.parseJson(u);return r.enableLastResponseHeaders&&(r.last_response_headers=o),r.enableLastHttpResponse&&(r.last_http_response=s),r.enableLastJsonResponse&&(r.last_json_response=c),r.verbose&&r.print("handleRestResponse:\n",r.id,i,t,e.status,e.statusText,"\nResponse:\n",o,"\n",s,"\n"),r.handleErrors(e.status,e.statusText,t,i,o,s,c,n,a),r.handleHttpStatusCode(e.status,e.statusText,t,i,s),c||s}))}},{key:"onRestResponse",value:function(e,t,r,i,n,a,s,o){return a.trim()}},{key:"onJsonResponse",value:function(e){return this.quoteJsonNumbers?e.replace(/":([+.0-9eE-]+),/g,'":"$1",'):e}},{key:"setMarkets",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,i=Object.values(e).map((function(e){return d({limits:t.limits,precision:t.precision},t.fees.trading,e)}));if(this.markets=v(i,"symbol"),this.marketsById=v(e,"id"),this.markets_by_id=this.marketsById,this.symbols=Object.keys(this.markets).sort(),this.ids=Object.keys(this.markets_by_id).sort(),r)this.currencies=d(r,this.currencies);else{var n=i.filter((function(e){return"base"in e})).map((function(e){return{id:e.baseId||e.base,numericId:void 0!==e.baseNumericId?e.baseNumericId:void 0,code:e.base,precision:e.precision?e.precision.base||e.precision.amount:8}})),a=i.filter((function(e){return"quote"in e})).map((function(e){return{id:e.quoteId||e.quote,numericId:void 0!==e.quoteNumericId?e.quoteNumericId:void 0,code:e.quote,precision:e.precision?e.precision.quote||e.precision.price:8}}));n=m(n,"code"),a=m(a,"code"),this.baseCurrencies=v(n,"code"),this.quoteCurrencies=v(a,"code");var s=n.concat(a),o=g(s,"code"),u=Object.keys(o).map((function(e){return o[e].reduce((function(e,t){return e.precision>t.precision?e:t}),o[e][0])})),c=m(f(u),"code");this.currencies=d(v(c,"code"),this.currencies)}return this.currencies_by_id=v(this.currencies,"id"),this.markets}},{key:"loadMarketsHelper",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=s.length>0&&void 0!==s[0]&&s[0],r=s.length>1&&void 0!==s[1]?s[1]:{},t||!this.markets){e.next=6;break}if(this.markets_by_id){e.next=5;break}return e.abrupt("return",this.setMarkets(this.markets));case 5:return e.abrupt("return",this.markets);case 6:if(n=void 0,!this.has.fetchCurrencies){e.next=11;break}return e.next=10,this.fetchCurrencies();case 10:n=e.sent;case 11:return e.next=13,this.fetchMarkets(r);case 13:return a=e.sent,e.abrupt("return",this.setMarkets(a,n));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadMarkets",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(t&&!this.reloadingMarkets||!this.marketsLoading)&&(this.reloadingMarkets=!0,this.marketsLoading=this.loadMarketsHelper(t,r).then((function(t){return e.reloadingMarkets=!1,t}),(function(t){throw e.reloadingMarkets=!1,t}))),this.marketsLoading}},{key:"loadAccounts",value:function(){var e=n(i.mark((function e(){var t,r,n=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.length>0&&void 0!==n[0]&&n[0],r=n.length>1&&void 0!==n[1]?n[1]:{},!t){e.next=8;break}return e.next=5,this.fetchAccounts(r);case 5:this.accounts=e.sent,e.next=15;break;case 8:if(!this.accounts){e.next=12;break}return e.abrupt("return",this.accounts);case 12:return e.next=14,this.fetchAccounts(r);case 14:this.accounts=e.sent;case 15:return this.accountsById=this.indexBy(this.accounts,"id"),e.abrupt("return",this.accounts);case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBidsAsks",value:function(){throw new E(this.id+" fetchBidsAsks not supported yet")}},{key:"fetchOHLCVC",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=c.length>1&&void 0!==c[1]?c[1]:"1m",n=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:void 0,s=c.length>4&&void 0!==c[4]?c[4]:{},this.has.fetchTrades){e.next=6;break}throw new E(this.id+" fetchOHLCV() not supported yet");case 6:return e.next=8,this.loadMarkets();case 8:return e.next=10,this.fetchTrades(t,n,a,s);case 10:return o=e.sent,u=S(o,r,n,a),e.abrupt("return",u);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=c.length>1&&void 0!==c[1]?c[1]:"1m",n=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:void 0,s=c.length>4&&void 0!==c[4]?c[4]:{},this.has.fetchTrades){e.next=6;break}throw new E(this.id+" fetchOHLCV() not supported yet");case 6:return e.next=8,this.loadMarkets();case 8:return e.next=10,this.fetchTrades(t,n,a,s);case 10:return o=e.sent,u=S(o,r,n,a),e.abrupt("return",u.map((function(e){return e.slice(0,-1)})));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTradingViewOHLCV",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"1m",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=this.convertTradingViewToOHLCV(e);return this.parseOHLCVs(a,t,r,i,n)}},{key:"convertTradingViewToOHLCV",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"t",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"o",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"h",n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"l",a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"c",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"v",o=arguments.length>7&&void 0!==arguments[7]&&arguments[7],u=[],c=0;c<e[t].length;c++)u.push([o?e[t][c]:1e3*e[t][c],e[r][c],e[i][c],e[n][c],e[a][c],e[s][c]]);return u}},{key:"convertOHLCVToTradingView",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"t",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"o",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"h",n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"l",a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"c",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"v",o=arguments.length>7&&void 0!==arguments[7]&&arguments[7],u={};u[t]=[],u[r]=[],u[i]=[],u[n]=[],u[a]=[],u[s]=[];for(var c=0;c<e.length;c++)u[t].push(o?e[c][0]:parseInt(e[c][0]/1e3)),u[r].push(e[c][1]),u[i].push(e[c][2]),u[n].push(e[c][3]),u[a].push(e[c][4]),u[s].push(e[c][5]);return u}},{key:"fetchTicker",value:function(e){throw new E(this.id+" fetchTicker not supported yet")}},{key:"fetchTickers",value:function(){throw new E(this.id+" fetchTickers not supported yet")}},{key:"fetchOrder",value:function(e){throw new E(this.id+" fetchOrder not supported yet")}},{key:"fetchUnifiedOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.fetchOrder(this.safeValue(e,"id"),this.safeValue(e,"symbol"),t)}},{key:"createOrder",value:function(e,t,r,i){throw new E(this.id+" createOrder not supported yet")}},{key:"cancelOrder",value:function(e){throw new E(this.id+" cancelOrder not supported yet")}},{key:"cancelUnifiedOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.cancelOrder(this.safeValue(e,"id"),this.safeValue(e,"symbol"),t)}},{key:"fetchOrders",value:function(){throw new E(this.id+" fetchOrders not supported yet")}},{key:"fetchOpenOrders",value:function(){throw new E(this.id+" fetchOpenOrders not supported yet")}},{key:"fetchClosedOrders",value:function(){throw new E(this.id+" fetchClosedOrders not supported yet")}},{key:"fetchMyTrades",value:function(){throw new E(this.id+" fetchMyTrades not supported yet")}},{key:"fetchTransactions",value:function(){throw new E(this.id+" fetchTransactions not supported yet")}},{key:"fetchDeposits",value:function(){throw new E(this.id+" fetchDeposits not supported yet")}},{key:"fetchWithdrawals",value:function(){throw new E(this.id+" fetchWithdrawals not supported yet")}},{key:"fetchCurrencies",value:function(){var e=this;return new Promise((function(t,r){return t(e.currencies)}))}},{key:"fetchMarkets",value:function(){var e=this;return new Promise((function(t,r){return t(Object.values(e.markets))}))}},{key:"fetchOrderStatus",value:function(){var e=n(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>1&&void 0!==s[1]?s[1]:void 0,n=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.fetchOrder(t,r,n);case 4:return a=e.sent,e.abrupt("return",a.status);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"account",value:function(){return{free:void 0,used:void 0,total:void 0}}},{key:"commonCurrencyCode",value:function(e){return this.substituteCommonCurrencyCodes?this.safeString(this.commonCurrencies,e,e):e}},{key:"currencyId",value:function(e){if(void 0===this.currencies)throw new I(this.id+" currencies not loaded");if(e in this.currencies)return this.currencies[e].id;for(var t={},r=Object.keys(this.commonCurrencies),i=0;i<r.length;i++){var n=r[i];t[this.commonCurrencies[n]]=n}return this.safeString(t,e,e)}},{key:"currency",value:function(e){if(void 0===this.currencies)throw new I(this.id+" currencies not loaded");if("string"===typeof e&&e in this.currencies)return this.currencies[e];throw new I(this.id+" does not have currency code "+e)}},{key:"market",value:function(e){if(void 0===this.markets)throw new I(this.id+" markets not loaded");if("string"===typeof e&&e in this.markets)return this.markets[e];throw new M(this.id+" does not have market symbol "+e)}},{key:"marketId",value:function(e){var t=this.market(e);return void 0!==t?t.id:e}},{key:"marketIds",value:function(e){var t=this;return e.map((function(e){return t.marketId(e)}))}},{key:"currencyIds",value:function(e){var t=this;return e.map((function(e){return t.currencyId(e)}))}},{key:"symbol",value:function(e){return this.market(e).symbol||e}},{key:"url",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.implodeParams(e,t),i=this.omit(t,this.extractParams(e));return Object.keys(i).length&&(r+="?"+this.urlencode(i)),r}},{key:"parseBidAsk",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=this.safeNumber(e,t),n=this.safeNumber(e,r);return[i,n]}},{key:"parseBidsAsks",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Object.values(e||[]).map((function(e){return t.parseBidAsk(e,r,i)}))}},{key:"fetchL2OrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>1&&void 0!==s[1]?s[1]:void 0,n=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.fetchOrderBook(t,r,n);case 4:return a=e.sent,e.abrupt("return",h(a,{bids:m(y(a.bids),0,!0),asks:m(y(a.asks),0)}));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrderBook",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"bids",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"asks",n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;return{bids:m(r in e?this.parseBidsAsks(e[r],n,a):[],0,!0),asks:m(i in e?this.parseBidsAsks(e[i],n,a):[],0),timestamp:t,datetime:this.iso8601(t),nonce:void 0}}},{key:"parseBalance",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=Object.keys(this.omit(e,["info","free","used","total"]));e.free={},e.used={},e.total={};for(var i=0;i<r.length;i++){var n=r[i];void 0===e[n].total&&void 0!==e[n].free&&void 0!==e[n].used&&(e[n].total=t?this.sum(e[n].free,e[n].used):z.stringAdd(e[n].free,e[n].used)),void 0===e[n].free&&void 0!==e[n].total&&void 0!==e[n].used&&(e[n].free=t?this.sum(e[n].total,-e[n].used):z.stringSub(e[n].total,e[n].used)),void 0===e[n].used&&void 0!==e[n].total&&void 0!==e[n].free&&(e[n].used=t?this.sum(e[n].total,-e[n].free):z.stringSub(e[n].total,e[n].free)),e[n].free=this.parseNumber(e[n].free),e[n].used=this.parseNumber(e[n].used),e[n].total=this.parseNumber(e[n].total),e.free[n]=e[n].free,e.used[n]=e[n].used,e.total[n]=e[n].total}return e}},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw t.length>0&&void 0!==t[0]?t[0]:{},new E(this.id+" fetchBalance not supported yet");case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchPartialBalance",value:function(){var e=n(i.mark((function e(t){var r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:{},e.next=3,this.fetchBalance(r);case 3:return n=e.sent,e.abrupt("return",n[t]);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchFreeBalance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.fetchPartialBalance("free",e)}},{key:"fetchUsedBalance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.fetchPartialBalance("used",e)}},{key:"fetchTotalBalance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.fetchPartialBalance("total",e)}},{key:"fetchStatus",value:function(){var e=n(i.mark((function e(){var t,r,n=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.length>0&&void 0!==n[0]?n[0]:{},!this.has.fetchTime){e.next=6;break}return e.next=4,this.fetchTime(t);case 4:r=e.sent,this.status=this.extend(this.status,{updated:r});case 6:return e.abrupt("return",this.status);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTradingFees",value:function(){var e=n(i.mark((function e(){var t=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw t.length>0&&void 0!==t[0]?t[0]:{},new E(this.id+" fetchTradingFees not supported yet");case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTradingFee",value:function(){var e=n(i.mark((function e(t){var r,n=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.length>1&&void 0!==n[1]?n[1]:{},this.has.fetchTradingFees){e.next=3;break}throw new E(this.id+" fetchTradingFee not supported yet");case 3:return e.next=5,this.fetchTradingFees(r);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"loadTradingLimits",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]&&o[1],o.length>2&&void 0!==o[2]?o[2]:{},!this.has.fetchTradingLimits){e.next=10;break}if(!r&&"limitsLoaded"in this.options){e.next=10;break}return e.next=7,this.fetchTradingLimits(t);case 7:for(n=e.sent,a=0;a<t.length;a++)s=t[a],this.markets[s]=this.deepExtend(this.markets[s],n[s]);this.options.limitsLoaded=this.milliseconds();case 10:return e.abrupt("return",this.markets);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"filterBySinceLimit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"timestamp",n=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=void 0!==t&&null!==t;return a&&(e=e.filter((function(e){return e[i]>=t}))),void 0!==r&&null!==r&&(e=n?e.slice(-r):e.slice(0,r)),e}},{key:"filterByValueSinceLimit",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"timestamp",s=arguments.length>6&&void 0!==arguments[6]&&arguments[6],o=void 0!==r&&null!==r,u=void 0!==i&&null!==i;return(o||u)&&(e=e.filter((function(e){return(!o||e[t]===r)&&(!u||e[a]>=i)}))),void 0!==n&&null!==n&&(e=s?e.slice(-n):e.slice(0,n)),e}},{key:"filterBySymbolSinceLimit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,n=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return this.filterByValueSinceLimit(e,"symbol",t,r,i,"timestamp",n)}},{key:"filterByCurrencySinceLimit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,n=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return this.filterByValueSinceLimit(e,"currency",t,r,i,"timestamp",n)}},{key:"filterByArray",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(e=Object.values(e),void 0===r||null===r)return i?v(e,t):e;for(var n=[],a=0;a<e.length;a++)r.includes(e[a][t])&&n.push(e[a]);return i?v(n,t):n}},{key:"safeTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeValue(e,"symbol");void 0===r&&(e.symbol=this.safeSymbol(void 0,t));var i=this.safeInteger(e,"timestamp");void 0!==i&&(e.timestamp=i,e.datetime=this.iso8601(i));var n=this.safeValue(e,"baseVolume"),a=this.safeValue(e,"quoteVolume"),s=this.safeValue(e,"vwap");void 0===s&&(e.vwap=this.vwap(n,a));var o=this.safeValue(e,"close"),u=this.safeValue(e,"last");return void 0===o&&void 0!==u?e.close=u:void 0===u&&void 0!==o&&(e.last=o),e}},{key:"parseTickers",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=[],i=0;i<e.length;i++)r.push(this.parseTicker(e[i]));return this.filterByArray(r,"symbol",t)}},{key:"parseDepositAddresses",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=[],i=0;i<e.length;i++){var n=this.parseDepositAddress(e[i]);r.push(n)}return t&&(r=this.filterByArray(r,"currency",t)),this.indexBy(r,"currency")}},{key:"parseTrades",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},s=Object.values(e||[]).map((function(e){return t.extend(t.parseTrade(e,r),a)}));s=m(s,"timestamp");var o=void 0!==r?r.symbol:void 0,u=void 0===i;return this.filterBySymbolSinceLimit(s,o,i,n,u)}},{key:"parseTransactions",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},s=Object.values(e||[]).map((function(e){return t.extend(t.parseTransaction(e,r),a)}));s=this.sortBy(s,"timestamp");var o=void 0!==r?r.code:void 0,u=void 0===i;return this.filterByCurrencySinceLimit(s,o,i,n,u)}},{key:"parseTransfers",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},s=Object.values(e||[]).map((function(e){return t.extend(t.parseTransfer(e,r),a)}));s=this.sortBy(s,"timestamp");var o=void 0!==r?r.code:void 0,u=void 0===i;return this.filterByCurrencySinceLimit(s,o,i,n,u)}},{key:"parseLedger",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},a=[],s=Object.values(e||[]),o=0;o<s.length;o++){var u=this.parseLedgerEntry(s[o],t);if(Array.isArray(u))for(var c=0;c<u.length;c++)a.push(this.extend(u[c],n));else a.push(this.extend(u,n))}a=this.sortBy(a,"timestamp");var d=void 0!==t?t.code:void 0,h=void 0===r;return this.filterByCurrencySinceLimit(a,d,r,i,h)}},{key:"parseOrders",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},o=Array.isArray(e)?Object.values(e).map((function(e){return t.extend(t.parseOrder(e,r),s)})):Object.entries(e).map((function(e){var i=a(e,2),n=i[0],o=i[1];return t.extend(t.parseOrder(t.extend({id:n},o),r),s)}));o=m(o,"timestamp");var u=void 0!==r?r.symbol:void 0,c=void 0===i;return this.filterBySymbolSinceLimit(o,u,i,n,c)}},{key:"safeCurrency",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return void 0===e&&void 0!==t?t:void 0!==this.currencies_by_id&&e in this.currencies_by_id?this.currencies_by_id[e]:{id:e,code:void 0===e?e:this.commonCurrencyCode(e.toUpperCase())}}},{key:"safeCurrencyCode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return(t=this.safeCurrency(e,t)).code}},{key:"safeMarket",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;if(void 0!==e)if(void 0!==this.markets_by_id&&e in this.markets_by_id)t=this.markets_by_id[e];else if(void 0!==r){var i=e.split(r),n=a(i,2),s=n[0],o=n[1],u=this.safeCurrencyCode(s),c=this.safeCurrencyCode(o),d=u+"/"+c;return{id:e,symbol:d,base:u,quote:c,baseId:s,quoteId:o}}return void 0!==t?t:{id:e,symbol:e,base:void 0,quote:void 0,baseId:void 0,quoteId:void 0}}},{key:"safeSymbol",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return(t=this.safeMarket(e,t,r)).symbol}},{key:"filterBySymbol",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return void 0!==t?e.filter((function(e){return e.symbol===t})):e}},{key:"parseOHLCV",value:function(e){return Array.isArray(e)?e.slice(0,6):e}},{key:"parseOHLCVs",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=e.map((function(e){return t.parseOHLCV(e,r)})),s=this.sortBy(a,0),o=void 0===i;return this.filterBySinceLimit(s,i,n,0,o)}},{key:"editLimitBuyOrder",value:function(e,t){for(var r=arguments.length,i=new Array(r>2?r-2:0),n=2;n<r;n++)i[n-2]=arguments[n];return this.editLimitOrder.apply(this,[e,t,"buy"].concat(i))}},{key:"editLimitSellOrder",value:function(e,t){for(var r=arguments.length,i=new Array(r>2?r-2:0),n=2;n<r;n++)i[n-2]=arguments[n];return this.editLimitOrder.apply(this,[e,t,"sell"].concat(i))}},{key:"editLimitOrder",value:function(e,t){for(var r=arguments.length,i=new Array(r>2?r-2:0),n=2;n<r;n++)i[n-2]=arguments[n];return this.editOrder.apply(this,[e,t,"limit"].concat(i))}},{key:"editOrder",value:function(){var e=n(i.mark((function e(t,r){var n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.enableRateLimit){e.next=2;break}throw new I(this.id+" editOrder() requires enableRateLimit = true");case 2:return e.next=4,this.cancelOrder(t,r);case 4:for(n=o.length,a=new Array(n>2?n-2:0),s=2;s<n;s++)a[s-2]=o[s];return e.abrupt("return",this.createOrder.apply(this,[r].concat(a)));case 6:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"createLimitOrder",value:function(e,t,r,i){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return this.createOrder(e,"limit",t,r,i,n)}},{key:"createMarketOrder",value:function(e,t,r,i){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return this.createOrder(e,"market",t,r,i,n)}},{key:"createLimitBuyOrder",value:function(e,t,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.createOrder(e,"limit","buy",t,r,i)}},{key:"createLimitSellOrder",value:function(e,t,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.createOrder(e,"limit","sell",t,r,i)}},{key:"createMarketBuyOrder",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.createOrder(e,"market","buy",t,void 0,r)}},{key:"createMarketSellOrder",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.createOrder(e,"market","sell",t,void 0,r)}},{key:"costToPrecision",value:function(e,t){return O(t,V,this.markets[e].precision.price,this.precisionMode,this.paddingMode)}},{key:"priceToPrecision",value:function(e,t){return O(t,G,this.markets[e].precision.price,this.precisionMode,this.paddingMode)}},{key:"amountToPrecision",value:function(e,t){return O(t,V,this.markets[e].precision.amount,this.precisionMode,this.paddingMode)}},{key:"feeToPrecision",value:function(e,t){return O(t,G,this.markets[e].precision.price,this.precisionMode,this.paddingMode)}},{key:"currencyToPrecision",value:function(e,t){return O(t,G,this.currencies[e].precision,this.precisionMode,this.paddingMode)}},{key:"calculateFee",value:function(e,t,r,i,n){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"taker",s=this.markets[e],o=this.safeString(s,"feeSide","quote"),u="quote",c=void 0;"quote"===o?c=i*n:"base"===o?c=i:"get"===o?(c=i,"sell"===r?c*=n:u="base"):"give"===o&&(c=i,"buy"===r?c*=n:u="base");var d=s[a];return void 0!==c&&(c*=d),{type:a,currency:s[u],rate:d,cost:c}}},{key:"checkRequiredDependencies",value:function(){}},{key:"soliditySha3",value:function(e){for(var t=[],r=0;r<e.length;r++){var i=e[r];if(Number.isInteger(i)||i.match(/^[0-9]+$/))t.push(this.numberToBE(this.numberToString(i),32));else{var n=this.remove0xPrefix(i);40===n.length&&n.toLowerCase().match(/^[0-9a-f]+$/)?t.push(this.base16ToBinary(n)):t.push(this.stringToBinary(n))}}var a=this.binaryConcatArray(t);return"0x"+this.hash(a,"keccak","hex")}},{key:"remove0xPrefix",value:function(e){return"0x"===e.slice(0,2)?e.slice(2):e}},{key:"hashMessage",value:function(e){var t=this.base16ToBinary(this.remove0xPrefix(e)),r=this.stringToBinary("\x19Ethereum Signed Message:\n"+t.sigBytes);return"0x"+this.hash(this.binaryConcat(r,t),"keccak","hex")}},{key:"signHash",value:function(e,t){var r=this.ecdsa(e.slice(-64),t.slice(-64),"secp256k1",void 0);return{r:"0x"+r.r,s:"0x"+r.s,v:27+r.v}}},{key:"signMessage",value:function(e,t){return this.signHash(this.hashMessage(e),t.slice(-64))}},{key:"signMessageString",value:function(e,t){var r=this.signMessage(e,t);return r.r+this.remove0xPrefix(r.s)+this.binaryToBase16(this.numberToBE(r.v))}},{key:"oath",value:function(){if("undefined"!==typeof this.twofa)return this.totp(this.twofa);throw new I(this.id+" this.twofa has not been set")}},{key:"integerDivide",value:function(e,t){return new j(e).div(new j(t))}},{key:"integerModulo",value:function(e,t){return new j(e).mod(new j(t))}},{key:"integerPow",value:function(e,t){return new j(e).pow(new j(t))}},{key:"reduceFeesByCurrency",value:function(e){for(var t={},r=0;r<e.length;r++){var i=e[r],n=this.safeValue(i,"currency");void 0!==n&&(n in t?t[n].cost=this.sum(t[n].cost,i.cost):t[n]={cost:i.cost,currency:n})}return Object.values(t)}},{key:"safeOrder",value:function(e){var t=this.safeValue(e,"amount"),r=this.safeValue(e,"remaining"),i=this.safeValue(e,"filled"),n=this.safeValue(e,"cost"),a=this.safeValue(e,"average"),s=this.safeValue(e,"price"),o=this.safeInteger(e,"lastTradeTimestamp"),u=void 0===i,c=void 0===n,d=void 0===o,h=void 0===this.safeValue(e,"fee"),l=void 0===this.safeValue(e,"fees"),f=h||l,p=this.safeValue(e,"fees",[]);if(u||c||f){var v=this.safeValue(e,"trades");if(Array.isArray(v)){u&&(i=0),c&&(n=0);for(var m=0;m<v.length;m++){var g=v[m],y=this.safeValue(g,"amount");u&&void 0!==y&&(i=this.sum(i,y));var b=this.safeValue(g,"cost");c&&void 0!==b&&(n=this.sum(n,b));var x=this.safeValue(g,"timestamp");if(d&&void 0!==x&&(o=void 0===o?x:Math.max(o,x)),f){var k=this.safeValue(g,"fees");if(void 0!==k)for(var w=0;w<k.length;w++){var _=k[w];p.push(this.extend({},_))}else{var S=this.safeValue(g,"fee");void 0!==S&&p.push(this.extend({},S))}}}}}if(f){var O=this.reduceFees?this.reduceFeesByCurrency(p):p,T=O.length;h||0!==T||O.push(e.fee),l&&(e.fees=O),h&&1===T&&(e.fee=O[0])}void 0===t&&(void 0!==i&&void 0!==r?t=this.sum(i,r):"closed"===this.safeString(e,"status")&&(t=i)),void 0===i&&void 0!==t&&void 0!==r&&(i=Math.max(this.sum(t,-r),0)),void 0===r&&void 0!==t&&void 0!==i&&(r=Math.max(this.sum(t,-i),0)),void 0===a&&void 0!==i&&void 0!==n&&i>0&&(a=n/i),c&&void 0!==i&&(void 0!==a||void 0!==s)&&(n=void 0===a?s*i:a*i);var C=this.safeValue(e,"type");return(void 0===s||0===s)&&"market"===C&&(s=a),this.extend(e,{lastTradeTimestamp:o,price:s,amount:t,cost:n,average:a,filled:i,remaining:r})}},{key:"parseNumber",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;if(void 0===e)return t;try{return this.number(e)}catch(r){return t}}},{key:"safeNumber",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,i=this.safeString(e,t);return this.parseNumber(i,r)}},{key:"safeNumber2",value:function(e,t,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,n=this.safeString2(e,t,r);return this.parseNumber(n,i)}}]),e}()},function(e,t,r){"use strict";var i=r(21),n=r(1),a=r(2),s=r(36),o=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;n(this,e);var a=t instanceof s,o="string"===typeof t;if(!a&&!o)throw new Error("Precise initiated with something other than a string or BN");if(a)this.integer=t,this.decimals=r;else{if(r)throw new Error("Cannot set decimals when initializing with a string");var u=0;if((t=t.toLowerCase()).indexOf("e")>-1){var c=t.split("e"),d=i(c,2);t=d[0],u=d[1],u=parseInt(u)}var h=t.indexOf(".");this.decimals=h>-1?t.length-h-1:0;var l=t.replace(".","");this.integer=new s(l),this.decimals=this.decimals-u}this.base=10,this.reduce()}return a(e,[{key:"mul",value:function(t){return new e(this.integer.mul(t.integer),this.decimals+t.decimals)}},{key:"div",value:function(t){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:18,n=i-this.decimals+t.decimals;if(0===n)r=this.integer;else if(n<0){var a=new s(this.base).pow(new s(-n));r=this.integer.div(a)}else{var o=new s(this.base).pow(new s(n));r=this.integer.mul(o)}var u=r.div(t.integer);return new e(u,i)}},{key:"add",value:function(t){if(this.decimals===t.decimals)return new e(this.integer.add(t.integer),this.decimals);var r=this.decimals>t.decimals?[t,this]:[this,t],n=i(r,2),a=n[0],o=n[1],u=new s(o.decimals-a.decimals);return new e(a.integer.mul(new s(this.base).pow(u)).add(o.integer),o.decimals)}},{key:"sub",value:function(t){var r=new e(t.integer.neg(),t.decimals);return this.add(r)}},{key:"abs",value:function(){return new e(this.integer.abs(),this.decimals)}},{key:"neg",value:function(){return new e(this.integer.neg(),this.decimals)}},{key:"reduce",value:function(){var e=new s(0);if(this.integer.eq(e))return this.decimals=0,this;for(var t=new s(this.base),r=this.integer.divmod(t);r.mod.eq(e);)this.integer=r.div,this.decimals--,r=this.integer.divmod(t);return this}},{key:"toString",value:function(){var e,t=this.integer.negative?"-":"",r=Array.from(this.integer.abs().toString(this.base).padStart(this.decimals,"0")),i=r.length-this.decimals;return e=0===i?"0.":this.decimals<0?"0".repeat(-this.decimals):0===this.decimals?"":".",r.splice(i,0,e),t+r.join("")}}],[{key:"stringMul",value:function(t,r){if(void 0!==t&&void 0!==r)return new e(t).mul(new e(r)).toString()}},{key:"stringDiv",value:function(t,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:18;if(void 0!==t&&void 0!==r)return new e(t).div(new e(r),i).toString()}},{key:"stringAdd",value:function(t,r){if(void 0!==t||void 0!==r)return void 0===t?r:void 0===r?t:new e(t).add(new e(r)).toString()}},{key:"stringSub",value:function(t,r){if(void 0!==t&&void 0!==r)return new e(t).sub(new e(r)).toString()}},{key:"stringAbs",value:function(t){if(void 0!==t)return new e(t).abs().toString()}},{key:"stringNeg",value:function(t){if(void 0!==t)return new e(t).neg().toString()}}]),e}();e.exports=o},function(e,t,r){"use strict";function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}r.d(t,"a",(function(){return i}))},function(e,t,r){var i;!function(){"use strict";var r={}.hasOwnProperty;function n(){for(var e=[],t=0;t<arguments.length;t++){var i=arguments[t];if(i){var a=typeof i;if("string"===a||"number"===a)e.push(i);else if(Array.isArray(i)){if(i.length){var s=n.apply(null,i);s&&e.push(s)}}else if("object"===a)if(i.toString===Object.prototype.toString)for(var o in i)r.call(i,o)&&i[o]&&e.push(o);else e.push(i.toString())}}return e.join(" ")}e.exports?(n.default=n,e.exports=n):void 0===(i=function(){return n}.apply(t,[]))||(e.exports=i)}()},function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var i=r(17);function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){Object(i.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}},function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var i=r(97);var n=r(70),a=r(98);function s(e,t){return Object(i.a)(e)||function(e,t){var r=e&&("undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=r){var i,n,a=[],s=!0,o=!1;try{for(r=r.call(e);!(s=(i=r.next()).done)&&(a.push(i.value),!t||a.length!==t);s=!0);}catch(u){o=!0,n=u}finally{try{s||null==r.return||r.return()}finally{if(o)throw n}}return a}}(e,t)||Object(n.a)(e,t)||Object(a.a)()}},function(e,t,r){"use strict";function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,"a",(function(){return i}))},function(e,t,r){"use strict";var i=r(238),n=r(21),a={ROUND:0,TRUNCATE:1,ROUND_UP:2,ROUND_DOWN:3,DECIMAL_PLACES:0,SIGNIFICANT_DIGITS:1,TICK_SIZE:2,NO_PADDING:0,PAD_WITH_ZERO:1};function s(e){if("string"===typeof e)return e;var t=e.toString();if(Math.abs(e)<1){var r=t.split("e-"),i=r[0].replace(".",""),n=parseInt(r[1]),a="-"===t[0];if(n)return e=(a?"-":"")+"0."+new Array(n).join("0")+i.substring(a)}else{var s=t.split("e");if(s[1]){var o=parseInt(s[1]),u=s[0].split(".");return u[1]&&(o-=u[1].length),u[0]+u[1]+new Array(o+1).join("0")}}return t}var o=[],u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(e=s(e),t>0){var r=o[t]||(o[t]=new RegExp("([-]*\\d+\\.\\d{"+t+"})(\\d)")),i=e.toString().match(r)||[null,e],a=n(i,2),u=a[1];return u.toString()}return parseInt(e).toString()};function c(e){var t=e.replace(/0+$/g,"").split(".");return t.length>1?t[1].length:0}e.exports={toWei:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:18;if(void 0===e)return e;var r=parseFloat(e).toExponential(),i=r.split("e"),a=n(i,2),o=a[0],u=a[1],c=parseInt(u)+t;return s(Math.floor(parseFloat(o+"e"+c)))},fromWei:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:18;if(void 0===e)return e;var r=Math.floor(e).toExponential(),i=r.split("e"),a=n(i,2),s=a[0],o=a[1],u=parseInt(o)-t;return parseFloat(s+"e"+u)},numberToString:s,precisionFromString:c,decimalToPrecision:function e(t,r,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(2===a&&n<=0)throw new Error("TICK_SIZE cant be used with negative or zero numPrecisionDigits");if(n<0){var u=Math.pow(10,-n);if(0===r)return(u*e(t/u,r,0,a,o)).toString();if(1===r)return(t-t%u).toString()}if(2===a){var d=e(n,0,22,0,0),h=c(d),l=t%n;l=Number(e(l,0,8,0,0));var f=e(l/n,0,Math.max(h,8),0,0);return 0!==c(f)&&(0===r?t>0?l>=n/2?t=t-l+n:t-=l:t=l>=n/2?Number(t)-l:Number(t)-l-n:1===r&&(t-=l)),e(t,0,h,0,o)}for(var p=s(t),v="-"===p[0],m=v?1:0,g=p.length,y=0;y<g&&"."!==p[y];y++);var b=y<p.length,x=45,k=46,w=48,_=w+1,S=w+5,O=w+9,T=new Uint8Array(g-m+(b?0:1));T[0]=w;for(var C=T.length,I=-1,M=-1,A=1,E=m;E<g;E++,A++){var N=p.charCodeAt(E);if(N===k)C=A--;else{if(N<w||N>O)throw new Error("".concat(p,": invalid number (contains an illegal character '").concat(p[A-1],"')"));T[A]=N,N!==w&&I<0&&(I=A)}}I<0&&(I=1);var P=0===a?C:I,D=P+n;M=-1;for(var L=!0,B=v,R=T.length-1,V=0;R>=0;R--){var G=T[R];if(0!==R){if(G+=V,R>=P+n){var F=0===r&&G>=S&&!(G===S&&V);G=F?O+1:w}G>O?(G=w,V=1):V=0}else V&&(G=_);T[R]=G,G!==w&&(L=!1,I=R,M=M<0?R+1:M)}1===a&&(D=(P=I)+n),L&&(B=!1);var q=I>=C||L?C-1:I,j=M<C?C:M,z=B?1:0,H=z+(C-q),U=Math.max(j-C,0),W=j-q,K=0===o?W:D-q,X=Math.max(K-W,0),Y=H+1+U,Z=Y+X,Q=U+X===0,$=new Uint8Array(H+(Q?0:1)+U+X);for(B&&($[0]=x),A=z,E=q;A<H;A++,E++)$[A]=T[E];for(Q||($[H]=k),A=H+1,E=C;A<Y;A++,E++)$[A]=T[E];for(A=Y;A<Z;A++)$[A]=w;return String.fromCharCode.apply(String,i($))},truncate_to_string:u,truncate:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return parseFloat(u(e,t))},precisionConstants:a,ROUND:0,TRUNCATE:1,ROUND_UP:2,ROUND_DOWN:3,DECIMAL_PLACES:0,SIGNIFICANT_DIGITS:1,TICK_SIZE:2,NO_PADDING:0,PAD_WITH_ZERO:1}},function(e,t,r){"use strict";r.d(t,"b",(function(){return o}));var i={};function n(e,t){0}function a(e,t){0}function s(e,t,r){t||i[r]||(e(!1,r),i[r]=!0)}function o(e,t){s(a,e,t)}t.a=function(e,t){s(n,e,t)}},function(e,t,r){"use strict";e.exports=r(389)},function(e,t,r){var i=r(195),n=r(196),a=r(118),s=r(197);e.exports=function(e,t){return i(e)||n(e,t)||a(e,t)||s()}},function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var i=r(109);function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var r=[],i=!0,n=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(i=(s=o.next()).done)&&(r.push(s.value),!t||r.length!==t);i=!0);}catch(u){n=!0,a=u}finally{try{i||null==o.return||o.return()}finally{if(n)throw a}}return r}}(e,t)||Object(i.a)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},function(e,t,r){"use strict";r.d(t,"a",(function(){return u}));var i=function(e){return+setTimeout(e,16)},n=function(e){return clearTimeout(e)};"undefined"!==typeof window&&"requestAnimationFrame"in window&&(i=function(e){return window.requestAnimationFrame(e)},n=function(e){return window.cancelAnimationFrame(e)});var a=0,s=new Map;function o(e){s.delete(e)}function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=a+=1;function n(t){if(0===t)o(r),e();else{var a=i((function(){n(t-1)}));s.set(r,a)}}return n(t),r}u.cancel=function(e){var t=s.get(e);return o(t),n(t)}},function(e,t,r){"use strict";function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}r.d(t,"a",(function(){return i}))},function(e,t,r){"use strict";function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var r=[],i=!0,n=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(i=(s=o.next()).done)&&(r.push(s.value),!t||r.length!==t);i=!0);}catch(u){n=!0,a=u}finally{try{i||null==o.return||o.return()}finally{if(n)throw a}}return r}}(e,t)||function(e,t){if(e){if("string"===typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e,t){if(null==e)return{};var r,i,n=function(e,t){if(null==e)return{};var r,i,n={},a=Object.keys(e);for(i=0;i<a.length;i++)r=a[i],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var o=r(0),u=r.n(o),c=r(14),d=r.n(c),h=Object(o.createContext)({});function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function p(e){return(p="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t){(function(e){return"string"===typeof e&&-1!==e.indexOf(".")&&1===parseFloat(e)})(e)&&(e="100%");var r=function(e){return"string"===typeof e&&-1!==e.indexOf("%")}(e);return e=360===t?e:Math.min(t,Math.max(0,parseFloat(e))),r&&(e=parseInt(String(e*t),10)/100),Math.abs(e-t)<1e-6?1:e=360===t?(e<0?e%t+t:e%t)/parseFloat(String(t)):e%t/parseFloat(String(t))}function m(e){return e<=1?100*Number(e)+"%":e}function g(e){return 1===e.length?"0"+e:String(e)}function y(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+6*r*(t-e):r<.5?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function b(e){return x(e)/255}function x(e){return parseInt(e,16)}var k={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function w(e){var t,r,i,n={r:0,g:0,b:0},a=1,s=null,o=null,u=null,c=!1,d=!1;return"string"===typeof e&&(e=function(e){if(0===(e=e.trim().toLowerCase()).length)return!1;var t=!1;if(k[e])e=k[e],t=!0;else if("transparent"===e)return{r:0,g:0,b:0,a:0,format:"name"};var r=T.rgb.exec(e);if(r)return{r:r[1],g:r[2],b:r[3]};if(r=T.rgba.exec(e))return{r:r[1],g:r[2],b:r[3],a:r[4]};if(r=T.hsl.exec(e))return{h:r[1],s:r[2],l:r[3]};if(r=T.hsla.exec(e))return{h:r[1],s:r[2],l:r[3],a:r[4]};if(r=T.hsv.exec(e))return{h:r[1],s:r[2],v:r[3]};if(r=T.hsva.exec(e))return{h:r[1],s:r[2],v:r[3],a:r[4]};if(r=T.hex8.exec(e))return{r:x(r[1]),g:x(r[2]),b:x(r[3]),a:b(r[4]),format:t?"name":"hex8"};if(r=T.hex6.exec(e))return{r:x(r[1]),g:x(r[2]),b:x(r[3]),format:t?"name":"hex"};if(r=T.hex4.exec(e))return{r:x(r[1]+r[1]),g:x(r[2]+r[2]),b:x(r[3]+r[3]),a:b(r[4]+r[4]),format:t?"name":"hex8"};if(r=T.hex3.exec(e))return{r:x(r[1]+r[1]),g:x(r[2]+r[2]),b:x(r[3]+r[3]),format:t?"name":"hex"};return!1}(e)),"object"===typeof e&&(C(e.r)&&C(e.g)&&C(e.b)?(t=e.r,r=e.g,i=e.b,n={r:255*v(t,255),g:255*v(r,255),b:255*v(i,255)},c=!0,d="%"===String(e.r).substr(-1)?"prgb":"rgb"):C(e.h)&&C(e.s)&&C(e.v)?(s=m(e.s),o=m(e.v),n=function(e,t,r){e=6*v(e,360),t=v(t,100),r=v(r,100);var i=Math.floor(e),n=e-i,a=r*(1-t),s=r*(1-n*t),o=r*(1-(1-n)*t),u=i%6;return{r:255*[r,s,a,a,o,r][u],g:255*[o,r,r,s,a,a][u],b:255*[a,a,o,r,r,s][u]}}(e.h,s,o),c=!0,d="hsv"):C(e.h)&&C(e.s)&&C(e.l)&&(s=m(e.s),u=m(e.l),n=function(e,t,r){var i,n,a;if(e=v(e,360),t=v(t,100),r=v(r,100),0===t)n=r,a=r,i=r;else{var s=r<.5?r*(1+t):r+t-r*t,o=2*r-s;i=y(o,s,e+1/3),n=y(o,s,e),a=y(o,s,e-1/3)}return{r:255*i,g:255*n,b:255*a}}(e.h,s,u),c=!0,d="hsl"),Object.prototype.hasOwnProperty.call(e,"a")&&(a=e.a)),a=function(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}(a),{ok:c,format:e.format||d,r:Math.min(255,Math.max(n.r,0)),g:Math.min(255,Math.max(n.g,0)),b:Math.min(255,Math.max(n.b,0)),a:a}}var _="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)",S="[\\s|\\(]+("+_+")[,|\\s]+("+_+")[,|\\s]+("+_+")\\s*\\)?",O="[\\s|\\(]+("+_+")[,|\\s]+("+_+")[,|\\s]+("+_+")[,|\\s]+("+_+")\\s*\\)?",T={CSS_UNIT:new RegExp(_),rgb:new RegExp("rgb"+S),rgba:new RegExp("rgba"+O),hsl:new RegExp("hsl"+S),hsla:new RegExp("hsla"+O),hsv:new RegExp("hsv"+S),hsva:new RegExp("hsva"+O),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function C(e){return Boolean(T.CSS_UNIT.exec(String(e)))}var I=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function M(e){var t=function(e,t,r){e=v(e,255),t=v(t,255),r=v(r,255);var i=Math.max(e,t,r),n=Math.min(e,t,r),a=0,s=i,o=i-n,u=0===i?0:o/i;if(i===n)a=0;else{switch(i){case e:a=(t-r)/o+(t<r?6:0);break;case t:a=(r-e)/o+2;break;case r:a=(e-t)/o+4}a/=6}return{h:a,s:u,v:s}}(e.r,e.g,e.b);return{h:360*t.h,s:t.s,v:t.v}}function A(e){var t=e.r,r=e.g,i=e.b;return"#".concat(function(e,t,r,i){var n=[g(Math.round(e).toString(16)),g(Math.round(t).toString(16)),g(Math.round(r).toString(16))];return i&&n[0].startsWith(n[0].charAt(1))&&n[1].startsWith(n[1].charAt(1))&&n[2].startsWith(n[2].charAt(1))?n[0].charAt(0)+n[1].charAt(0)+n[2].charAt(0):n.join("")}(t,r,i,!1))}function E(e,t,r){var i=r/100;return{r:(t.r-e.r)*i+e.r,g:(t.g-e.g)*i+e.g,b:(t.b-e.b)*i+e.b}}function N(e,t,r){var i;return(i=Math.round(e.h)>=60&&Math.round(e.h)<=240?r?Math.round(e.h)-2*t:Math.round(e.h)+2*t:r?Math.round(e.h)+2*t:Math.round(e.h)-2*t)<0?i+=360:i>=360&&(i-=360),i}function P(e,t,r){return 0===e.h&&0===e.s?e.s:((i=r?e.s-.16*t:4===t?e.s+.16:e.s+.05*t)>1&&(i=1),r&&5===t&&i>.1&&(i=.1),i<.06&&(i=.06),Number(i.toFixed(2)));var i}function D(e,t,r){var i;return(i=r?e.v+.05*t:e.v-.15*t)>1&&(i=1),Number(i.toFixed(2))}function L(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=[],i=w(e),n=5;n>0;n-=1){var a=M(i),s=A(w({h:N(a,n,!0),s:P(a,n,!0),v:D(a,n,!0)}));r.push(s)}r.push(A(i));for(var o=1;o<=4;o+=1){var u=M(i),c=A(w({h:N(u,o),s:P(u,o),v:D(u,o)}));r.push(c)}return"dark"===t.theme?I.map((function(e){var i=e.index,n=e.opacity;return A(E(w(t.backgroundColor||"#141414"),w(r[i]),100*n))})):r}var B={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1890FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},R={},V={};Object.keys(B).forEach((function(e){R[e]=L(B[e]),R[e].primary=R[e][5],V[e]=L(B[e],{theme:"dark",backgroundColor:"#141414"}),V[e].primary=V[e][5]}));R.red,R.volcano,R.gold,R.orange,R.yellow,R.lime,R.green,R.cyan,R.blue,R.geekblue,R.purple,R.magenta,R.grey;var G=r(19),F=r(107);function q(e){return"object"===p(e)&&"string"===typeof e.name&&"string"===typeof e.theme&&("object"===p(e.icon)||"function"===typeof e.icon)}function j(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).reduce((function(t,r){var i=e[r];switch(r){case"class":t.className=i,delete t.class;break;default:t[r]=i}return t}),{})}function z(e,t,r){return r?u.a.createElement(e.tag,f(f({key:t},j(e.attrs)),r),(e.children||[]).map((function(r,i){return z(r,"".concat(t,"-").concat(e.tag,"-").concat(i))}))):u.a.createElement(e.tag,f({key:t},j(e.attrs)),(e.children||[]).map((function(r,i){return z(r,"".concat(t,"-").concat(e.tag,"-").concat(i))})))}function H(e){return L(e)[0]}function U(e){return e?Array.isArray(e)?e:[e]:[]}var W="\n.anticon {\n  display: inline-block;\n  color: inherit;\n  font-style: normal;\n  line-height: 0;\n  text-align: center;\n  text-transform: none;\n  vertical-align: -0.125em;\n  text-rendering: optimizeLegibility;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n.anticon > * {\n  line-height: 1;\n}\n\n.anticon svg {\n  display: inline-block;\n}\n\n.anticon::before {\n  display: none;\n}\n\n.anticon .anticon-icon {\n  display: block;\n}\n\n.anticon[tabindex] {\n  cursor: pointer;\n}\n\n.anticon-spin::before,\n.anticon-spin {\n  display: inline-block;\n  -webkit-animation: loadingCircle 1s infinite linear;\n  animation: loadingCircle 1s infinite linear;\n}\n\n@-webkit-keyframes loadingCircle {\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n\n@keyframes loadingCircle {\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n",K={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1};var X=function(e){var t,r,i=e.icon,n=e.className,a=e.onClick,u=e.style,c=e.primaryColor,d=e.secondaryColor,l=s(e,["icon","className","onClick","style","primaryColor","secondaryColor"]),p=K;if(c&&(p={primaryColor:c,secondaryColor:d||H(c)}),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,t=Object(o.useContext)(h).csp;Object(o.useEffect)((function(){Object(F.a)(e,"@ant-design-icons",{prepend:!0,csp:t})}),[])}(),t=q(i),r="icon should be icon definiton, but got ".concat(i),Object(G.a)(t,"[@ant-design/icons] ".concat(r)),!q(i))return null;var v=i;return v&&"function"===typeof v.icon&&(v=f(f({},v),{},{icon:v.icon(p.primaryColor,p.secondaryColor)})),z(v.icon,"svg-".concat(v.name),f({className:n,onClick:a,style:u,"data-icon":v.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},l))};X.displayName="IconReact",X.getTwoToneColors=function(){return f({},K)},X.setTwoToneColors=function(e){var t=e.primaryColor,r=e.secondaryColor;K.primaryColor=t,K.secondaryColor=r||H(t),K.calculated=!!r};var Y=X;function Z(e){var t=n(U(e),2),r=t[0],i=t[1];return Y.setTwoToneColors({primaryColor:r,secondaryColor:i})}Z("#1890ff");var Q=o.forwardRef((function(e,t){var r,i=e.className,u=e.icon,c=e.spin,l=e.rotate,f=e.tabIndex,p=e.onClick,v=e.twoToneColor,m=s(e,["className","icon","spin","rotate","tabIndex","onClick","twoToneColor"]),g=o.useContext(h).prefixCls,y=void 0===g?"anticon":g,b=d()(y,(a(r={},"".concat(y,"-").concat(u.name),!!u.name),a(r,"".concat(y,"-spin"),!!c||"loading"===u.name),r),i),x=f;void 0===x&&p&&(x=-1);var k=l?{msTransform:"rotate(".concat(l,"deg)"),transform:"rotate(".concat(l,"deg)")}:void 0,w=n(U(v),2),_=w[0],S=w[1];return o.createElement("span",Object.assign({role:"img","aria-label":u.name},m,{ref:t,tabIndex:x,onClick:p,className:b}),o.createElement(Y,{icon:u,primaryColor:_,secondaryColor:S,style:k}))}));Q.displayName="AntdIcon",Q.getTwoToneColor=function(){var e=Y.getTwoToneColors();return e.calculated?[e.primaryColor,e.secondaryColor]:e.primaryColor},Q.setTwoToneColor=Z;t.a=Q},function(e,t,r){"use strict";function i(e){return(i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}r.d(t,"b",(function(){return a})),r.d(t,"a",(function(){return s})),r.d(t,"c",(function(){return o}));var n=r(100);function a(e,t){"function"===typeof e?e(t):"object"===i(e)&&e&&"current"in e&&(e.current=t)}function s(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){t.forEach((function(t){a(t,e)}))}}function o(e){var t,r,i=Object(n.isMemo)(e)?e.type.type:e.type;return!("function"===typeof i&&!(null===(t=i.prototype)||void 0===t?void 0:t.render))&&!("function"===typeof e&&!(null===(r=e.prototype)||void 0===r?void 0:r.render))}},function(e,t,r){"use strict";function i(e){return(i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}r.d(t,"a",(function(){return i}))},function(e,t,r){"use strict";r.d(t,"b",(function(){return n})),r.d(t,"a",(function(){return a}));var i=r(0),n=i.isValidElement;function a(e,t){return function(e,t,r){return n(e)?i.cloneElement(e,"function"===typeof r?r(e.props||{}):r):t}(e,e,t)}},,function(e,t,r){"use strict";var i=r(19);t.a=function(e,t,r){Object(i.a)(e,"[antd: ".concat(t,"] ").concat(r))}},function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var i=r(96);function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var r=[],i=!0,n=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(i=(s=o.next()).done)&&(r.push(s.value),!t||r.length!==t);i=!0);}catch(u){n=!0,a=u}finally{try{i||null==o.return||o.return()}finally{if(n)throw a}}return r}}(e,t)||Object(i.a)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},function(e,t,r){"use strict";(function(e){var i=r(201),n=r(202),a=r(136);function s(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function o(e,t){if(s()<t)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=u.prototype:(null===e&&(e=new u(t)),e.length=t),e}function u(e,t,r){if(!u.TYPED_ARRAY_SUPPORT&&!(this instanceof u))return new u(e,t,r);if("number"===typeof e){if("string"===typeof t)throw new Error("If encoding is specified then the first argument must be a string");return h(this,e)}return c(this,e,t,r)}function c(e,t,r,i){if("number"===typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!==typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,r,i){if(t.byteLength,r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(i||0))throw new RangeError("'length' is out of bounds");t=void 0===r&&void 0===i?new Uint8Array(t):void 0===i?new Uint8Array(t,r):new Uint8Array(t,r,i);u.TYPED_ARRAY_SUPPORT?(e=t).__proto__=u.prototype:e=l(e,t);return e}(e,t,r,i):"string"===typeof t?function(e,t,r){"string"===typeof r&&""!==r||(r="utf8");if(!u.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var i=0|p(t,r),n=(e=o(e,i)).write(t,r);n!==i&&(e=e.slice(0,n));return e}(e,t,r):function(e,t){if(u.isBuffer(t)){var r=0|f(t.length);return 0===(e=o(e,r)).length||t.copy(e,0,0,r),e}if(t){if("undefined"!==typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!==typeof t.length||(i=t.length)!==i?o(e,0):l(e,t);if("Buffer"===t.type&&a(t.data))return l(e,t.data)}var i;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function d(e){if("number"!==typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function h(e,t){if(d(t),e=o(e,t<0?0:0|f(t)),!u.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}function l(e,t){var r=t.length<0?0:0|f(t.length);e=o(e,r);for(var i=0;i<r;i+=1)e[i]=255&t[i];return e}function f(e){if(e>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|e}function p(e,t){if(u.isBuffer(e))return e.length;if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!==typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return q(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return j(e).length;default:if(i)return q(e).length;t=(""+t).toLowerCase(),i=!0}}function v(e,t,r){var i=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return A(this,t,r);case"utf8":case"utf-8":return T(this,t,r);case"ascii":return I(this,t,r);case"latin1":case"binary":return M(this,t,r);case"base64":return O(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,t,r);default:if(i)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}function m(e,t,r){var i=e[t];e[t]=e[r],e[r]=i}function g(e,t,r,i,n){if(0===e.length)return-1;if("string"===typeof r?(i=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=n?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(n)return-1;r=e.length-1}else if(r<0){if(!n)return-1;r=0}if("string"===typeof t&&(t=u.from(t,i)),u.isBuffer(t))return 0===t.length?-1:y(e,t,r,i,n);if("number"===typeof t)return t&=255,u.TYPED_ARRAY_SUPPORT&&"function"===typeof Uint8Array.prototype.indexOf?n?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):y(e,[t],r,i,n);throw new TypeError("val must be string, number or Buffer")}function y(e,t,r,i,n){var a,s=1,o=e.length,u=t.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(e.length<2||t.length<2)return-1;s=2,o/=2,u/=2,r/=2}function c(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(n){var d=-1;for(a=r;a<o;a++)if(c(e,a)===c(t,-1===d?0:a-d)){if(-1===d&&(d=a),a-d+1===u)return d*s}else-1!==d&&(a-=a-d),d=-1}else for(r+u>o&&(r=o-u),a=r;a>=0;a--){for(var h=!0,l=0;l<u;l++)if(c(e,a+l)!==c(t,l)){h=!1;break}if(h)return a}return-1}function b(e,t,r,i){r=Number(r)||0;var n=e.length-r;i?(i=Number(i))>n&&(i=n):i=n;var a=t.length;if(a%2!==0)throw new TypeError("Invalid hex string");i>a/2&&(i=a/2);for(var s=0;s<i;++s){var o=parseInt(t.substr(2*s,2),16);if(isNaN(o))return s;e[r+s]=o}return s}function x(e,t,r,i){return z(q(t,e.length-r),e,r,i)}function k(e,t,r,i){return z(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,i)}function w(e,t,r,i){return k(e,t,r,i)}function _(e,t,r,i){return z(j(t),e,r,i)}function S(e,t,r,i){return z(function(e,t){for(var r,i,n,a=[],s=0;s<e.length&&!((t-=2)<0);++s)i=(r=e.charCodeAt(s))>>8,n=r%256,a.push(n),a.push(i);return a}(t,e.length-r),e,r,i)}function O(e,t,r){return 0===t&&r===e.length?i.fromByteArray(e):i.fromByteArray(e.slice(t,r))}function T(e,t,r){r=Math.min(e.length,r);for(var i=[],n=t;n<r;){var a,s,o,u,c=e[n],d=null,h=c>239?4:c>223?3:c>191?2:1;if(n+h<=r)switch(h){case 1:c<128&&(d=c);break;case 2:128===(192&(a=e[n+1]))&&(u=(31&c)<<6|63&a)>127&&(d=u);break;case 3:a=e[n+1],s=e[n+2],128===(192&a)&&128===(192&s)&&(u=(15&c)<<12|(63&a)<<6|63&s)>2047&&(u<55296||u>57343)&&(d=u);break;case 4:a=e[n+1],s=e[n+2],o=e[n+3],128===(192&a)&&128===(192&s)&&128===(192&o)&&(u=(15&c)<<18|(63&a)<<12|(63&s)<<6|63&o)>65535&&u<1114112&&(d=u)}null===d?(d=65533,h=1):d>65535&&(d-=65536,i.push(d>>>10&1023|55296),d=56320|1023&d),i.push(d),n+=h}return function(e){var t=e.length;if(t<=C)return String.fromCharCode.apply(String,e);var r="",i=0;for(;i<t;)r+=String.fromCharCode.apply(String,e.slice(i,i+=C));return r}(i)}t.Buffer=u,t.SlowBuffer=function(e){+e!=e&&(e=0);return u.alloc(+e)},t.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"===typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(t){return!1}}(),t.kMaxLength=s(),u.poolSize=8192,u._augment=function(e){return e.__proto__=u.prototype,e},u.from=function(e,t,r){return c(null,e,t,r)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!==typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(e,t,r){return function(e,t,r,i){return d(t),t<=0?o(e,t):void 0!==r?"string"===typeof i?o(e,t).fill(r,i):o(e,t).fill(r):o(e,t)}(null,e,t,r)},u.allocUnsafe=function(e){return h(null,e)},u.allocUnsafeSlow=function(e){return h(null,e)},u.isBuffer=function(e){return!(null==e||!e._isBuffer)},u.compare=function(e,t){if(!u.isBuffer(e)||!u.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,i=t.length,n=0,a=Math.min(r,i);n<a;++n)if(e[n]!==t[n]){r=e[n],i=t[n];break}return r<i?-1:i<r?1:0},u.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(e,t){if(!a(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return u.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var i=u.allocUnsafe(t),n=0;for(r=0;r<e.length;++r){var s=e[r];if(!u.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(i,n),n+=s.length}return i},u.byteLength=p,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)m(this,t,t+1);return this},u.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)m(this,t,t+3),m(this,t+1,t+2);return this},u.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)m(this,t,t+7),m(this,t+1,t+6),m(this,t+2,t+5),m(this,t+3,t+4);return this},u.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?T(this,0,e):v.apply(this,arguments)},u.prototype.equals=function(e){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===u.compare(this,e)},u.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(e+=" ... ")),"<Buffer "+e+">"},u.prototype.compare=function(e,t,r,i,n){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===i&&(i=0),void 0===n&&(n=this.length),t<0||r>e.length||i<0||n>this.length)throw new RangeError("out of range index");if(i>=n&&t>=r)return 0;if(i>=n)return-1;if(t>=r)return 1;if(this===e)return 0;for(var a=(n>>>=0)-(i>>>=0),s=(r>>>=0)-(t>>>=0),o=Math.min(a,s),c=this.slice(i,n),d=e.slice(t,r),h=0;h<o;++h)if(c[h]!==d[h]){a=c[h],s=d[h];break}return a<s?-1:s<a?1:0},u.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},u.prototype.indexOf=function(e,t,r){return g(this,e,t,r,!0)},u.prototype.lastIndexOf=function(e,t,r){return g(this,e,t,r,!1)},u.prototype.write=function(e,t,r,i){if(void 0===t)i="utf8",r=this.length,t=0;else if(void 0===r&&"string"===typeof t)i=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(r)?(r|=0,void 0===i&&(i="utf8")):(i=r,r=void 0)}var n=this.length-t;if((void 0===r||r>n)&&(r=n),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var a=!1;;)switch(i){case"hex":return b(this,e,t,r);case"utf8":case"utf-8":return x(this,e,t,r);case"ascii":return k(this,e,t,r);case"latin1":case"binary":return w(this,e,t,r);case"base64":return _(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,e,t,r);default:if(a)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),a=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var C=4096;function I(e,t,r){var i="";r=Math.min(e.length,r);for(var n=t;n<r;++n)i+=String.fromCharCode(127&e[n]);return i}function M(e,t,r){var i="";r=Math.min(e.length,r);for(var n=t;n<r;++n)i+=String.fromCharCode(e[n]);return i}function A(e,t,r){var i=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>i)&&(r=i);for(var n="",a=t;a<r;++a)n+=F(e[a]);return n}function E(e,t,r){for(var i=e.slice(t,r),n="",a=0;a<i.length;a+=2)n+=String.fromCharCode(i[a]+256*i[a+1]);return n}function N(e,t,r){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function P(e,t,r,i,n,a){if(!u.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>n||t<a)throw new RangeError('"value" argument is out of bounds');if(r+i>e.length)throw new RangeError("Index out of range")}function D(e,t,r,i){t<0&&(t=65535+t+1);for(var n=0,a=Math.min(e.length-r,2);n<a;++n)e[r+n]=(t&255<<8*(i?n:1-n))>>>8*(i?n:1-n)}function L(e,t,r,i){t<0&&(t=4294967295+t+1);for(var n=0,a=Math.min(e.length-r,4);n<a;++n)e[r+n]=t>>>8*(i?n:3-n)&255}function B(e,t,r,i,n,a){if(r+i>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function R(e,t,r,i,a){return a||B(e,0,r,4),n.write(e,t,r,i,23,4),r+4}function V(e,t,r,i,a){return a||B(e,0,r,8),n.write(e,t,r,i,52,8),r+8}u.prototype.slice=function(e,t){var r,i=this.length;if((e=~~e)<0?(e+=i)<0&&(e=0):e>i&&(e=i),(t=void 0===t?i:~~t)<0?(t+=i)<0&&(t=0):t>i&&(t=i),t<e&&(t=e),u.TYPED_ARRAY_SUPPORT)(r=this.subarray(e,t)).__proto__=u.prototype;else{var n=t-e;r=new u(n,void 0);for(var a=0;a<n;++a)r[a]=this[a+e]}return r},u.prototype.readUIntLE=function(e,t,r){e|=0,t|=0,r||N(e,t,this.length);for(var i=this[e],n=1,a=0;++a<t&&(n*=256);)i+=this[e+a]*n;return i},u.prototype.readUIntBE=function(e,t,r){e|=0,t|=0,r||N(e,t,this.length);for(var i=this[e+--t],n=1;t>0&&(n*=256);)i+=this[e+--t]*n;return i},u.prototype.readUInt8=function(e,t){return t||N(e,1,this.length),this[e]},u.prototype.readUInt16LE=function(e,t){return t||N(e,2,this.length),this[e]|this[e+1]<<8},u.prototype.readUInt16BE=function(e,t){return t||N(e,2,this.length),this[e]<<8|this[e+1]},u.prototype.readUInt32LE=function(e,t){return t||N(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},u.prototype.readUInt32BE=function(e,t){return t||N(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},u.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||N(e,t,this.length);for(var i=this[e],n=1,a=0;++a<t&&(n*=256);)i+=this[e+a]*n;return i>=(n*=128)&&(i-=Math.pow(2,8*t)),i},u.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||N(e,t,this.length);for(var i=t,n=1,a=this[e+--i];i>0&&(n*=256);)a+=this[e+--i]*n;return a>=(n*=128)&&(a-=Math.pow(2,8*t)),a},u.prototype.readInt8=function(e,t){return t||N(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},u.prototype.readInt16LE=function(e,t){t||N(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt16BE=function(e,t){t||N(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt32LE=function(e,t){return t||N(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},u.prototype.readInt32BE=function(e,t){return t||N(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},u.prototype.readFloatLE=function(e,t){return t||N(e,4,this.length),n.read(this,e,!0,23,4)},u.prototype.readFloatBE=function(e,t){return t||N(e,4,this.length),n.read(this,e,!1,23,4)},u.prototype.readDoubleLE=function(e,t){return t||N(e,8,this.length),n.read(this,e,!0,52,8)},u.prototype.readDoubleBE=function(e,t){return t||N(e,8,this.length),n.read(this,e,!1,52,8)},u.prototype.writeUIntLE=function(e,t,r,i){(e=+e,t|=0,r|=0,i)||P(this,e,t,r,Math.pow(2,8*r)-1,0);var n=1,a=0;for(this[t]=255&e;++a<r&&(n*=256);)this[t+a]=e/n&255;return t+r},u.prototype.writeUIntBE=function(e,t,r,i){(e=+e,t|=0,r|=0,i)||P(this,e,t,r,Math.pow(2,8*r)-1,0);var n=r-1,a=1;for(this[t+n]=255&e;--n>=0&&(a*=256);)this[t+n]=e/a&255;return t+r},u.prototype.writeUInt8=function(e,t,r){return e=+e,t|=0,r||P(this,e,t,1,255,0),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},u.prototype.writeUInt16LE=function(e,t,r){return e=+e,t|=0,r||P(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):D(this,e,t,!0),t+2},u.prototype.writeUInt16BE=function(e,t,r){return e=+e,t|=0,r||P(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):D(this,e,t,!1),t+2},u.prototype.writeUInt32LE=function(e,t,r){return e=+e,t|=0,r||P(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):L(this,e,t,!0),t+4},u.prototype.writeUInt32BE=function(e,t,r){return e=+e,t|=0,r||P(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):L(this,e,t,!1),t+4},u.prototype.writeIntLE=function(e,t,r,i){if(e=+e,t|=0,!i){var n=Math.pow(2,8*r-1);P(this,e,t,r,n-1,-n)}var a=0,s=1,o=0;for(this[t]=255&e;++a<r&&(s*=256);)e<0&&0===o&&0!==this[t+a-1]&&(o=1),this[t+a]=(e/s>>0)-o&255;return t+r},u.prototype.writeIntBE=function(e,t,r,i){if(e=+e,t|=0,!i){var n=Math.pow(2,8*r-1);P(this,e,t,r,n-1,-n)}var a=r-1,s=1,o=0;for(this[t+a]=255&e;--a>=0&&(s*=256);)e<0&&0===o&&0!==this[t+a+1]&&(o=1),this[t+a]=(e/s>>0)-o&255;return t+r},u.prototype.writeInt8=function(e,t,r){return e=+e,t|=0,r||P(this,e,t,1,127,-128),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},u.prototype.writeInt16LE=function(e,t,r){return e=+e,t|=0,r||P(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):D(this,e,t,!0),t+2},u.prototype.writeInt16BE=function(e,t,r){return e=+e,t|=0,r||P(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):D(this,e,t,!1),t+2},u.prototype.writeInt32LE=function(e,t,r){return e=+e,t|=0,r||P(this,e,t,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):L(this,e,t,!0),t+4},u.prototype.writeInt32BE=function(e,t,r){return e=+e,t|=0,r||P(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):L(this,e,t,!1),t+4},u.prototype.writeFloatLE=function(e,t,r){return R(this,e,t,!0,r)},u.prototype.writeFloatBE=function(e,t,r){return R(this,e,t,!1,r)},u.prototype.writeDoubleLE=function(e,t,r){return V(this,e,t,!0,r)},u.prototype.writeDoubleBE=function(e,t,r){return V(this,e,t,!1,r)},u.prototype.copy=function(e,t,r,i){if(r||(r=0),i||0===i||(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<r&&(i=r),i===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-r&&(i=e.length-t+r);var n,a=i-r;if(this===e&&r<t&&t<i)for(n=a-1;n>=0;--n)e[n+t]=this[n+r];else if(a<1e3||!u.TYPED_ARRAY_SUPPORT)for(n=0;n<a;++n)e[n+t]=this[n+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+a),t);return a},u.prototype.fill=function(e,t,r,i){if("string"===typeof e){if("string"===typeof t?(i=t,t=0,r=this.length):"string"===typeof r&&(i=r,r=this.length),1===e.length){var n=e.charCodeAt(0);n<256&&(e=n)}if(void 0!==i&&"string"!==typeof i)throw new TypeError("encoding must be a string");if("string"===typeof i&&!u.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else"number"===typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var a;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"===typeof e)for(a=t;a<r;++a)this[a]=e;else{var s=u.isBuffer(e)?e:q(new u(e,i).toString()),o=s.length;for(a=0;a<r-t;++a)this[a+t]=s[a%o]}return this};var G=/[^+\/0-9A-Za-z-_]/g;function F(e){return e<16?"0"+e.toString(16):e.toString(16)}function q(e,t){var r;t=t||1/0;for(var i=e.length,n=null,a=[],s=0;s<i;++s){if((r=e.charCodeAt(s))>55295&&r<57344){if(!n){if(r>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(s+1===i){(t-=3)>-1&&a.push(239,191,189);continue}n=r;continue}if(r<56320){(t-=3)>-1&&a.push(239,191,189),n=r;continue}r=65536+(n-55296<<10|r-56320)}else n&&(t-=3)>-1&&a.push(239,191,189);if(n=null,r<128){if((t-=1)<0)break;a.push(r)}else if(r<2048){if((t-=2)<0)break;a.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;a.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return a}function j(e){return i.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(G,"")).length<2)return"";for(;e.length%4!==0;)e+="=";return e}(e))}function z(e,t,r,i){for(var n=0;n<i&&!(n+r>=t.length||n>=e.length);++n)t[n+r]=e[n];return n}}).call(this,r(35))},function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var i=r(69);function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function a(e,t){var r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){Object(i.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e);return Array.isArray(t)&&t.forEach((function(e){delete r[e]})),r}},function(e,t,r){"use strict";function i(e,t){if(null==e)return{};var r,i,n=function(e,t){if(null==e)return{};var r,i,n={},a=Object.keys(e);for(i=0;i<a.length;i++)r=a[i],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}r.d(t,"a",(function(){return i}))},function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(i){"object"===typeof window&&(r=window)}e.exports=r},function(e,t,r){(function(e){!function(e,t){"use strict";function i(e,t){if(!e)throw new Error(t||"Assertion failed")}function n(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}function a(e,t,r){if(a.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(r=t,t=10),this._init(e||0,t||10,r||"be"))}var s;"object"===typeof e?e.exports=a:t.BN=a,a.BN=a,a.wordSize=26;try{s=r(32).Buffer}catch(T){}function o(e,t,r){for(var n=0,a=Math.min(e.length,r),s=0,o=t;o<a;o++){var u,c=e.charCodeAt(o)-48;n<<=4,n|=u=c>=49&&c<=54?c-49+10:c>=17&&c<=22?c-17+10:c,s|=u}return i(!(240&s),"Invalid character in "+e),n}function u(e,t,r,n){for(var a=0,s=0,o=Math.min(e.length,r),u=t;u<o;u++){var c=e.charCodeAt(u)-48;a*=n,s=c>=49?c-49+10:c>=17?c-17+10:c,i(c>=0&&s<n,"Invalid character"),a+=s}return a}function c(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}a.isBN=function(e){return e instanceof a||null!==e&&"object"===typeof e&&e.constructor.wordSize===a.wordSize&&Array.isArray(e.words)},a.max=function(e,t){return e.cmp(t)>0?e:t},a.min=function(e,t){return e.cmp(t)<0?e:t},a.prototype._init=function(e,t,r){if("number"===typeof e)return this._initNumber(e,t,r);if("object"===typeof e)return this._initArray(e,t,r);"hex"===t&&(t=16),i(t===(0|t)&&t>=2&&t<=36);var n=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&n++,16===t?this._parseHex(e,n):this._parseBase(e,t,n),"-"===e[0]&&(this.negative=1),this._strip(),"le"===r&&this._initArray(this.toArray(),t,r)},a.prototype._initNumber=function(e,t,r){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(i(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),t,r)},a.prototype._initArray=function(e,t,r){if(i("number"===typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var a,s,o=0;if("be"===r)for(n=e.length-1,a=0;n>=0;n-=3)s=e[n]|e[n-1]<<8|e[n-2]<<16,this.words[a]|=s<<o&67108863,this.words[a+1]=s>>>26-o&67108863,(o+=24)>=26&&(o-=26,a++);else if("le"===r)for(n=0,a=0;n<e.length;n+=3)s=e[n]|e[n+1]<<8|e[n+2]<<16,this.words[a]|=s<<o&67108863,this.words[a+1]=s>>>26-o&67108863,(o+=24)>=26&&(o-=26,a++);return this._strip()},a.prototype._parseHex=function(e,t){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var i,n,a=0;for(r=e.length-6,i=0;r>=t;r-=6)n=o(e,r,r+6),this.words[i]|=n<<a&67108863,this.words[i+1]|=n>>>26-a&4194303,(a+=24)>=26&&(a-=26,i++);r+6!==t&&(n=o(e,t,r+6),this.words[i]|=n<<a&67108863,this.words[i+1]|=n>>>26-a&4194303),this._strip()},a.prototype._parseBase=function(e,t,r){this.words=[0],this.length=1;for(var i=0,n=1;n<=67108863;n*=t)i++;i--,n=n/t|0;for(var a=e.length-r,s=a%i,o=Math.min(a,a-s)+r,c=0,d=r;d<o;d+=i)c=u(e,d,d+i,t),this.imuln(n),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(0!==s){var h=1;for(c=u(e,d,e.length,t),d=0;d<s;d++)h*=t;this.imuln(h),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}},a.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},a.prototype._move=function(e){e.words=this.words,e.length=this.length,e.negative=this.negative,e.red=this.red},a.prototype.clone=function(){var e=new a(null);return this.copy(e),e},a.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},a.prototype._strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},a.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!==typeof Symbol&&"function"===typeof Symbol.for?a.prototype[Symbol.for("nodejs.util.inspect.custom")]=c:a.prototype.inspect=c;var d=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],h=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],l=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];a.prototype.toString=function(e,t){var r;if(t=0|t||1,16===(e=e||10)||"hex"===e){r="";for(var n=0,a=0,s=0;s<this.length;s++){var o=this.words[s],u=(16777215&(o<<n|a)).toString(16);r=0!==(a=o>>>24-n&16777215)||s!==this.length-1?d[6-u.length]+u+r:u+r,(n+=2)>=26&&(n-=26,s--)}for(0!==a&&(r=a.toString(16)+r);r.length%t!==0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(e===(0|e)&&e>=2&&e<=36){var c=h[e],f=l[e];r="";var p=this.clone();for(p.negative=0;!p.isZero();){var v=p.modrn(f).toString(e);r=(p=p.idivn(f)).isZero()?v+r:d[c-v.length]+v+r}for(this.isZero()&&(r="0"+r);r.length%t!==0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}i(!1,"Base should be between 2 and 36")},a.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&i(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},a.prototype.toJSON=function(){return this.toString(16,2)},s&&(a.prototype.toBuffer=function(e,t){return this.toArrayLike(s,e,t)}),a.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)};function f(e,t,r){r.negative=t.negative^e.negative;var i=e.length+t.length|0;r.length=i,i=i-1|0;var n=0|e.words[0],a=0|t.words[0],s=n*a,o=67108863&s,u=s/67108864|0;r.words[0]=o;for(var c=1;c<i;c++){for(var d=u>>>26,h=67108863&u,l=Math.min(c,t.length-1),f=Math.max(0,c-e.length+1);f<=l;f++){var p=c-f|0;d+=(s=(n=0|e.words[p])*(a=0|t.words[f])+h)/67108864|0,h=67108863&s}r.words[c]=0|h,u=0|d}return 0!==u?r.words[c]=0|u:r.length--,r._strip()}a.prototype.toArrayLike=function(e,t,r){this._strip();var n=this.byteLength(),a=r||Math.max(1,n);i(n<=a,"byte array longer than desired length"),i(a>0,"Requested array length <= 0");var s=function(e,t){return e.allocUnsafe?e.allocUnsafe(t):new e(t)}(e,a);return this["_toArrayLike"+("le"===t?"LE":"BE")](s,n),s},a.prototype._toArrayLikeLE=function(e,t){for(var r=0,i=0,n=0,a=0;n<this.length;n++){var s=this.words[n]<<a|i;e[r++]=255&s,r<e.length&&(e[r++]=s>>8&255),r<e.length&&(e[r++]=s>>16&255),6===a?(r<e.length&&(e[r++]=s>>24&255),i=0,a=0):(i=s>>>24,a+=2)}if(r<e.length)for(e[r++]=i;r<e.length;)e[r++]=0},a.prototype._toArrayLikeBE=function(e,t){for(var r=e.length-1,i=0,n=0,a=0;n<this.length;n++){var s=this.words[n]<<a|i;e[r--]=255&s,r>=0&&(e[r--]=s>>8&255),r>=0&&(e[r--]=s>>16&255),6===a?(r>=0&&(e[r--]=s>>24&255),i=0,a=0):(i=s>>>24,a+=2)}if(r>=0)for(e[r--]=i;r>=0;)e[r--]=0},Math.clz32?a.prototype._countBits=function(e){return 32-Math.clz32(e)}:a.prototype._countBits=function(e){var t=e,r=0;return t>=4096&&(r+=13,t>>>=13),t>=64&&(r+=7,t>>>=7),t>=8&&(r+=4,t>>>=4),t>=2&&(r+=2,t>>>=2),r+t},a.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,r=0;return 0===(8191&t)&&(r+=13,t>>>=13),0===(127&t)&&(r+=7,t>>>=7),0===(15&t)&&(r+=4,t>>>=4),0===(3&t)&&(r+=2,t>>>=2),0===(1&t)&&r++,r},a.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},a.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var r=this._zeroBits(this.words[t]);if(e+=r,26!==r)break}return e},a.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},a.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},a.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},a.prototype.isNeg=function(){return 0!==this.negative},a.prototype.neg=function(){return this.clone().ineg()},a.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},a.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this._strip()},a.prototype.ior=function(e){return i(0===(this.negative|e.negative)),this.iuor(e)},a.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},a.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},a.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var r=0;r<t.length;r++)this.words[r]=this.words[r]&e.words[r];return this.length=t.length,this._strip()},a.prototype.iand=function(e){return i(0===(this.negative|e.negative)),this.iuand(e)},a.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},a.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},a.prototype.iuxor=function(e){var t,r;this.length>e.length?(t=this,r=e):(t=e,r=this);for(var i=0;i<r.length;i++)this.words[i]=t.words[i]^r.words[i];if(this!==t)for(;i<t.length;i++)this.words[i]=t.words[i];return this.length=t.length,this._strip()},a.prototype.ixor=function(e){return i(0===(this.negative|e.negative)),this.iuxor(e)},a.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},a.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},a.prototype.inotn=function(e){i("number"===typeof e&&e>=0);var t=0|Math.ceil(e/26),r=e%26;this._expand(t),r>0&&t--;for(var n=0;n<t;n++)this.words[n]=67108863&~this.words[n];return r>0&&(this.words[n]=~this.words[n]&67108863>>26-r),this._strip()},a.prototype.notn=function(e){return this.clone().inotn(e)},a.prototype.setn=function(e,t){i("number"===typeof e&&e>=0);var r=e/26|0,n=e%26;return this._expand(r+1),this.words[r]=t?this.words[r]|1<<n:this.words[r]&~(1<<n),this._strip()},a.prototype.iadd=function(e){var t,r,i;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(r=this,i=e):(r=e,i=this);for(var n=0,a=0;a<i.length;a++)t=(0|r.words[a])+(0|i.words[a])+n,this.words[a]=67108863&t,n=t>>>26;for(;0!==n&&a<r.length;a++)t=(0|r.words[a])+n,this.words[a]=67108863&t,n=t>>>26;if(this.length=r.length,0!==n)this.words[this.length]=n,this.length++;else if(r!==this)for(;a<r.length;a++)this.words[a]=r.words[a];return this},a.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},a.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var r,i,n=this.cmp(e);if(0===n)return this.negative=0,this.length=1,this.words[0]=0,this;n>0?(r=this,i=e):(r=e,i=this);for(var a=0,s=0;s<i.length;s++)a=(t=(0|r.words[s])-(0|i.words[s])+a)>>26,this.words[s]=67108863&t;for(;0!==a&&s<r.length;s++)a=(t=(0|r.words[s])+a)>>26,this.words[s]=67108863&t;if(0===a&&s<r.length&&r!==this)for(;s<r.length;s++)this.words[s]=r.words[s];return this.length=Math.max(this.length,s),r!==this&&(this.negative=1),this._strip()},a.prototype.sub=function(e){return this.clone().isub(e)};var p=function(e,t,r){var i,n,a,s=e.words,o=t.words,u=r.words,c=0,d=0|s[0],h=8191&d,l=d>>>13,f=0|s[1],p=8191&f,v=f>>>13,m=0|s[2],g=8191&m,y=m>>>13,b=0|s[3],x=8191&b,k=b>>>13,w=0|s[4],_=8191&w,S=w>>>13,O=0|s[5],T=8191&O,C=O>>>13,I=0|s[6],M=8191&I,A=I>>>13,E=0|s[7],N=8191&E,P=E>>>13,D=0|s[8],L=8191&D,B=D>>>13,R=0|s[9],V=8191&R,G=R>>>13,F=0|o[0],q=8191&F,j=F>>>13,z=0|o[1],H=8191&z,U=z>>>13,W=0|o[2],K=8191&W,X=W>>>13,Y=0|o[3],Z=8191&Y,Q=Y>>>13,$=0|o[4],J=8191&$,ee=$>>>13,te=0|o[5],re=8191&te,ie=te>>>13,ne=0|o[6],ae=8191&ne,se=ne>>>13,oe=0|o[7],ue=8191&oe,ce=oe>>>13,de=0|o[8],he=8191&de,le=de>>>13,fe=0|o[9],pe=8191&fe,ve=fe>>>13;r.negative=e.negative^t.negative,r.length=19;var me=(c+(i=Math.imul(h,q))|0)+((8191&(n=(n=Math.imul(h,j))+Math.imul(l,q)|0))<<13)|0;c=((a=Math.imul(l,j))+(n>>>13)|0)+(me>>>26)|0,me&=67108863,i=Math.imul(p,q),n=(n=Math.imul(p,j))+Math.imul(v,q)|0,a=Math.imul(v,j);var ge=(c+(i=i+Math.imul(h,H)|0)|0)+((8191&(n=(n=n+Math.imul(h,U)|0)+Math.imul(l,H)|0))<<13)|0;c=((a=a+Math.imul(l,U)|0)+(n>>>13)|0)+(ge>>>26)|0,ge&=67108863,i=Math.imul(g,q),n=(n=Math.imul(g,j))+Math.imul(y,q)|0,a=Math.imul(y,j),i=i+Math.imul(p,H)|0,n=(n=n+Math.imul(p,U)|0)+Math.imul(v,H)|0,a=a+Math.imul(v,U)|0;var ye=(c+(i=i+Math.imul(h,K)|0)|0)+((8191&(n=(n=n+Math.imul(h,X)|0)+Math.imul(l,K)|0))<<13)|0;c=((a=a+Math.imul(l,X)|0)+(n>>>13)|0)+(ye>>>26)|0,ye&=67108863,i=Math.imul(x,q),n=(n=Math.imul(x,j))+Math.imul(k,q)|0,a=Math.imul(k,j),i=i+Math.imul(g,H)|0,n=(n=n+Math.imul(g,U)|0)+Math.imul(y,H)|0,a=a+Math.imul(y,U)|0,i=i+Math.imul(p,K)|0,n=(n=n+Math.imul(p,X)|0)+Math.imul(v,K)|0,a=a+Math.imul(v,X)|0;var be=(c+(i=i+Math.imul(h,Z)|0)|0)+((8191&(n=(n=n+Math.imul(h,Q)|0)+Math.imul(l,Z)|0))<<13)|0;c=((a=a+Math.imul(l,Q)|0)+(n>>>13)|0)+(be>>>26)|0,be&=67108863,i=Math.imul(_,q),n=(n=Math.imul(_,j))+Math.imul(S,q)|0,a=Math.imul(S,j),i=i+Math.imul(x,H)|0,n=(n=n+Math.imul(x,U)|0)+Math.imul(k,H)|0,a=a+Math.imul(k,U)|0,i=i+Math.imul(g,K)|0,n=(n=n+Math.imul(g,X)|0)+Math.imul(y,K)|0,a=a+Math.imul(y,X)|0,i=i+Math.imul(p,Z)|0,n=(n=n+Math.imul(p,Q)|0)+Math.imul(v,Z)|0,a=a+Math.imul(v,Q)|0;var xe=(c+(i=i+Math.imul(h,J)|0)|0)+((8191&(n=(n=n+Math.imul(h,ee)|0)+Math.imul(l,J)|0))<<13)|0;c=((a=a+Math.imul(l,ee)|0)+(n>>>13)|0)+(xe>>>26)|0,xe&=67108863,i=Math.imul(T,q),n=(n=Math.imul(T,j))+Math.imul(C,q)|0,a=Math.imul(C,j),i=i+Math.imul(_,H)|0,n=(n=n+Math.imul(_,U)|0)+Math.imul(S,H)|0,a=a+Math.imul(S,U)|0,i=i+Math.imul(x,K)|0,n=(n=n+Math.imul(x,X)|0)+Math.imul(k,K)|0,a=a+Math.imul(k,X)|0,i=i+Math.imul(g,Z)|0,n=(n=n+Math.imul(g,Q)|0)+Math.imul(y,Z)|0,a=a+Math.imul(y,Q)|0,i=i+Math.imul(p,J)|0,n=(n=n+Math.imul(p,ee)|0)+Math.imul(v,J)|0,a=a+Math.imul(v,ee)|0;var ke=(c+(i=i+Math.imul(h,re)|0)|0)+((8191&(n=(n=n+Math.imul(h,ie)|0)+Math.imul(l,re)|0))<<13)|0;c=((a=a+Math.imul(l,ie)|0)+(n>>>13)|0)+(ke>>>26)|0,ke&=67108863,i=Math.imul(M,q),n=(n=Math.imul(M,j))+Math.imul(A,q)|0,a=Math.imul(A,j),i=i+Math.imul(T,H)|0,n=(n=n+Math.imul(T,U)|0)+Math.imul(C,H)|0,a=a+Math.imul(C,U)|0,i=i+Math.imul(_,K)|0,n=(n=n+Math.imul(_,X)|0)+Math.imul(S,K)|0,a=a+Math.imul(S,X)|0,i=i+Math.imul(x,Z)|0,n=(n=n+Math.imul(x,Q)|0)+Math.imul(k,Z)|0,a=a+Math.imul(k,Q)|0,i=i+Math.imul(g,J)|0,n=(n=n+Math.imul(g,ee)|0)+Math.imul(y,J)|0,a=a+Math.imul(y,ee)|0,i=i+Math.imul(p,re)|0,n=(n=n+Math.imul(p,ie)|0)+Math.imul(v,re)|0,a=a+Math.imul(v,ie)|0;var we=(c+(i=i+Math.imul(h,ae)|0)|0)+((8191&(n=(n=n+Math.imul(h,se)|0)+Math.imul(l,ae)|0))<<13)|0;c=((a=a+Math.imul(l,se)|0)+(n>>>13)|0)+(we>>>26)|0,we&=67108863,i=Math.imul(N,q),n=(n=Math.imul(N,j))+Math.imul(P,q)|0,a=Math.imul(P,j),i=i+Math.imul(M,H)|0,n=(n=n+Math.imul(M,U)|0)+Math.imul(A,H)|0,a=a+Math.imul(A,U)|0,i=i+Math.imul(T,K)|0,n=(n=n+Math.imul(T,X)|0)+Math.imul(C,K)|0,a=a+Math.imul(C,X)|0,i=i+Math.imul(_,Z)|0,n=(n=n+Math.imul(_,Q)|0)+Math.imul(S,Z)|0,a=a+Math.imul(S,Q)|0,i=i+Math.imul(x,J)|0,n=(n=n+Math.imul(x,ee)|0)+Math.imul(k,J)|0,a=a+Math.imul(k,ee)|0,i=i+Math.imul(g,re)|0,n=(n=n+Math.imul(g,ie)|0)+Math.imul(y,re)|0,a=a+Math.imul(y,ie)|0,i=i+Math.imul(p,ae)|0,n=(n=n+Math.imul(p,se)|0)+Math.imul(v,ae)|0,a=a+Math.imul(v,se)|0;var _e=(c+(i=i+Math.imul(h,ue)|0)|0)+((8191&(n=(n=n+Math.imul(h,ce)|0)+Math.imul(l,ue)|0))<<13)|0;c=((a=a+Math.imul(l,ce)|0)+(n>>>13)|0)+(_e>>>26)|0,_e&=67108863,i=Math.imul(L,q),n=(n=Math.imul(L,j))+Math.imul(B,q)|0,a=Math.imul(B,j),i=i+Math.imul(N,H)|0,n=(n=n+Math.imul(N,U)|0)+Math.imul(P,H)|0,a=a+Math.imul(P,U)|0,i=i+Math.imul(M,K)|0,n=(n=n+Math.imul(M,X)|0)+Math.imul(A,K)|0,a=a+Math.imul(A,X)|0,i=i+Math.imul(T,Z)|0,n=(n=n+Math.imul(T,Q)|0)+Math.imul(C,Z)|0,a=a+Math.imul(C,Q)|0,i=i+Math.imul(_,J)|0,n=(n=n+Math.imul(_,ee)|0)+Math.imul(S,J)|0,a=a+Math.imul(S,ee)|0,i=i+Math.imul(x,re)|0,n=(n=n+Math.imul(x,ie)|0)+Math.imul(k,re)|0,a=a+Math.imul(k,ie)|0,i=i+Math.imul(g,ae)|0,n=(n=n+Math.imul(g,se)|0)+Math.imul(y,ae)|0,a=a+Math.imul(y,se)|0,i=i+Math.imul(p,ue)|0,n=(n=n+Math.imul(p,ce)|0)+Math.imul(v,ue)|0,a=a+Math.imul(v,ce)|0;var Se=(c+(i=i+Math.imul(h,he)|0)|0)+((8191&(n=(n=n+Math.imul(h,le)|0)+Math.imul(l,he)|0))<<13)|0;c=((a=a+Math.imul(l,le)|0)+(n>>>13)|0)+(Se>>>26)|0,Se&=67108863,i=Math.imul(V,q),n=(n=Math.imul(V,j))+Math.imul(G,q)|0,a=Math.imul(G,j),i=i+Math.imul(L,H)|0,n=(n=n+Math.imul(L,U)|0)+Math.imul(B,H)|0,a=a+Math.imul(B,U)|0,i=i+Math.imul(N,K)|0,n=(n=n+Math.imul(N,X)|0)+Math.imul(P,K)|0,a=a+Math.imul(P,X)|0,i=i+Math.imul(M,Z)|0,n=(n=n+Math.imul(M,Q)|0)+Math.imul(A,Z)|0,a=a+Math.imul(A,Q)|0,i=i+Math.imul(T,J)|0,n=(n=n+Math.imul(T,ee)|0)+Math.imul(C,J)|0,a=a+Math.imul(C,ee)|0,i=i+Math.imul(_,re)|0,n=(n=n+Math.imul(_,ie)|0)+Math.imul(S,re)|0,a=a+Math.imul(S,ie)|0,i=i+Math.imul(x,ae)|0,n=(n=n+Math.imul(x,se)|0)+Math.imul(k,ae)|0,a=a+Math.imul(k,se)|0,i=i+Math.imul(g,ue)|0,n=(n=n+Math.imul(g,ce)|0)+Math.imul(y,ue)|0,a=a+Math.imul(y,ce)|0,i=i+Math.imul(p,he)|0,n=(n=n+Math.imul(p,le)|0)+Math.imul(v,he)|0,a=a+Math.imul(v,le)|0;var Oe=(c+(i=i+Math.imul(h,pe)|0)|0)+((8191&(n=(n=n+Math.imul(h,ve)|0)+Math.imul(l,pe)|0))<<13)|0;c=((a=a+Math.imul(l,ve)|0)+(n>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,i=Math.imul(V,H),n=(n=Math.imul(V,U))+Math.imul(G,H)|0,a=Math.imul(G,U),i=i+Math.imul(L,K)|0,n=(n=n+Math.imul(L,X)|0)+Math.imul(B,K)|0,a=a+Math.imul(B,X)|0,i=i+Math.imul(N,Z)|0,n=(n=n+Math.imul(N,Q)|0)+Math.imul(P,Z)|0,a=a+Math.imul(P,Q)|0,i=i+Math.imul(M,J)|0,n=(n=n+Math.imul(M,ee)|0)+Math.imul(A,J)|0,a=a+Math.imul(A,ee)|0,i=i+Math.imul(T,re)|0,n=(n=n+Math.imul(T,ie)|0)+Math.imul(C,re)|0,a=a+Math.imul(C,ie)|0,i=i+Math.imul(_,ae)|0,n=(n=n+Math.imul(_,se)|0)+Math.imul(S,ae)|0,a=a+Math.imul(S,se)|0,i=i+Math.imul(x,ue)|0,n=(n=n+Math.imul(x,ce)|0)+Math.imul(k,ue)|0,a=a+Math.imul(k,ce)|0,i=i+Math.imul(g,he)|0,n=(n=n+Math.imul(g,le)|0)+Math.imul(y,he)|0,a=a+Math.imul(y,le)|0;var Te=(c+(i=i+Math.imul(p,pe)|0)|0)+((8191&(n=(n=n+Math.imul(p,ve)|0)+Math.imul(v,pe)|0))<<13)|0;c=((a=a+Math.imul(v,ve)|0)+(n>>>13)|0)+(Te>>>26)|0,Te&=67108863,i=Math.imul(V,K),n=(n=Math.imul(V,X))+Math.imul(G,K)|0,a=Math.imul(G,X),i=i+Math.imul(L,Z)|0,n=(n=n+Math.imul(L,Q)|0)+Math.imul(B,Z)|0,a=a+Math.imul(B,Q)|0,i=i+Math.imul(N,J)|0,n=(n=n+Math.imul(N,ee)|0)+Math.imul(P,J)|0,a=a+Math.imul(P,ee)|0,i=i+Math.imul(M,re)|0,n=(n=n+Math.imul(M,ie)|0)+Math.imul(A,re)|0,a=a+Math.imul(A,ie)|0,i=i+Math.imul(T,ae)|0,n=(n=n+Math.imul(T,se)|0)+Math.imul(C,ae)|0,a=a+Math.imul(C,se)|0,i=i+Math.imul(_,ue)|0,n=(n=n+Math.imul(_,ce)|0)+Math.imul(S,ue)|0,a=a+Math.imul(S,ce)|0,i=i+Math.imul(x,he)|0,n=(n=n+Math.imul(x,le)|0)+Math.imul(k,he)|0,a=a+Math.imul(k,le)|0;var Ce=(c+(i=i+Math.imul(g,pe)|0)|0)+((8191&(n=(n=n+Math.imul(g,ve)|0)+Math.imul(y,pe)|0))<<13)|0;c=((a=a+Math.imul(y,ve)|0)+(n>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,i=Math.imul(V,Z),n=(n=Math.imul(V,Q))+Math.imul(G,Z)|0,a=Math.imul(G,Q),i=i+Math.imul(L,J)|0,n=(n=n+Math.imul(L,ee)|0)+Math.imul(B,J)|0,a=a+Math.imul(B,ee)|0,i=i+Math.imul(N,re)|0,n=(n=n+Math.imul(N,ie)|0)+Math.imul(P,re)|0,a=a+Math.imul(P,ie)|0,i=i+Math.imul(M,ae)|0,n=(n=n+Math.imul(M,se)|0)+Math.imul(A,ae)|0,a=a+Math.imul(A,se)|0,i=i+Math.imul(T,ue)|0,n=(n=n+Math.imul(T,ce)|0)+Math.imul(C,ue)|0,a=a+Math.imul(C,ce)|0,i=i+Math.imul(_,he)|0,n=(n=n+Math.imul(_,le)|0)+Math.imul(S,he)|0,a=a+Math.imul(S,le)|0;var Ie=(c+(i=i+Math.imul(x,pe)|0)|0)+((8191&(n=(n=n+Math.imul(x,ve)|0)+Math.imul(k,pe)|0))<<13)|0;c=((a=a+Math.imul(k,ve)|0)+(n>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,i=Math.imul(V,J),n=(n=Math.imul(V,ee))+Math.imul(G,J)|0,a=Math.imul(G,ee),i=i+Math.imul(L,re)|0,n=(n=n+Math.imul(L,ie)|0)+Math.imul(B,re)|0,a=a+Math.imul(B,ie)|0,i=i+Math.imul(N,ae)|0,n=(n=n+Math.imul(N,se)|0)+Math.imul(P,ae)|0,a=a+Math.imul(P,se)|0,i=i+Math.imul(M,ue)|0,n=(n=n+Math.imul(M,ce)|0)+Math.imul(A,ue)|0,a=a+Math.imul(A,ce)|0,i=i+Math.imul(T,he)|0,n=(n=n+Math.imul(T,le)|0)+Math.imul(C,he)|0,a=a+Math.imul(C,le)|0;var Me=(c+(i=i+Math.imul(_,pe)|0)|0)+((8191&(n=(n=n+Math.imul(_,ve)|0)+Math.imul(S,pe)|0))<<13)|0;c=((a=a+Math.imul(S,ve)|0)+(n>>>13)|0)+(Me>>>26)|0,Me&=67108863,i=Math.imul(V,re),n=(n=Math.imul(V,ie))+Math.imul(G,re)|0,a=Math.imul(G,ie),i=i+Math.imul(L,ae)|0,n=(n=n+Math.imul(L,se)|0)+Math.imul(B,ae)|0,a=a+Math.imul(B,se)|0,i=i+Math.imul(N,ue)|0,n=(n=n+Math.imul(N,ce)|0)+Math.imul(P,ue)|0,a=a+Math.imul(P,ce)|0,i=i+Math.imul(M,he)|0,n=(n=n+Math.imul(M,le)|0)+Math.imul(A,he)|0,a=a+Math.imul(A,le)|0;var Ae=(c+(i=i+Math.imul(T,pe)|0)|0)+((8191&(n=(n=n+Math.imul(T,ve)|0)+Math.imul(C,pe)|0))<<13)|0;c=((a=a+Math.imul(C,ve)|0)+(n>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,i=Math.imul(V,ae),n=(n=Math.imul(V,se))+Math.imul(G,ae)|0,a=Math.imul(G,se),i=i+Math.imul(L,ue)|0,n=(n=n+Math.imul(L,ce)|0)+Math.imul(B,ue)|0,a=a+Math.imul(B,ce)|0,i=i+Math.imul(N,he)|0,n=(n=n+Math.imul(N,le)|0)+Math.imul(P,he)|0,a=a+Math.imul(P,le)|0;var Ee=(c+(i=i+Math.imul(M,pe)|0)|0)+((8191&(n=(n=n+Math.imul(M,ve)|0)+Math.imul(A,pe)|0))<<13)|0;c=((a=a+Math.imul(A,ve)|0)+(n>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,i=Math.imul(V,ue),n=(n=Math.imul(V,ce))+Math.imul(G,ue)|0,a=Math.imul(G,ce),i=i+Math.imul(L,he)|0,n=(n=n+Math.imul(L,le)|0)+Math.imul(B,he)|0,a=a+Math.imul(B,le)|0;var Ne=(c+(i=i+Math.imul(N,pe)|0)|0)+((8191&(n=(n=n+Math.imul(N,ve)|0)+Math.imul(P,pe)|0))<<13)|0;c=((a=a+Math.imul(P,ve)|0)+(n>>>13)|0)+(Ne>>>26)|0,Ne&=67108863,i=Math.imul(V,he),n=(n=Math.imul(V,le))+Math.imul(G,he)|0,a=Math.imul(G,le);var Pe=(c+(i=i+Math.imul(L,pe)|0)|0)+((8191&(n=(n=n+Math.imul(L,ve)|0)+Math.imul(B,pe)|0))<<13)|0;c=((a=a+Math.imul(B,ve)|0)+(n>>>13)|0)+(Pe>>>26)|0,Pe&=67108863;var De=(c+(i=Math.imul(V,pe))|0)+((8191&(n=(n=Math.imul(V,ve))+Math.imul(G,pe)|0))<<13)|0;return c=((a=Math.imul(G,ve))+(n>>>13)|0)+(De>>>26)|0,De&=67108863,u[0]=me,u[1]=ge,u[2]=ye,u[3]=be,u[4]=xe,u[5]=ke,u[6]=we,u[7]=_e,u[8]=Se,u[9]=Oe,u[10]=Te,u[11]=Ce,u[12]=Ie,u[13]=Me,u[14]=Ae,u[15]=Ee,u[16]=Ne,u[17]=Pe,u[18]=De,0!==c&&(u[19]=c,r.length++),r};function v(e,t,r){r.negative=t.negative^e.negative,r.length=e.length+t.length;for(var i=0,n=0,a=0;a<r.length-1;a++){var s=n;n=0;for(var o=67108863&i,u=Math.min(a,t.length-1),c=Math.max(0,a-e.length+1);c<=u;c++){var d=a-c,h=(0|e.words[d])*(0|t.words[c]),l=67108863&h;o=67108863&(l=l+o|0),n+=(s=(s=s+(h/67108864|0)|0)+(l>>>26)|0)>>>26,s&=67108863}r.words[a]=o,i=s,s=n}return 0!==i?r.words[a]=i:r.length--,r._strip()}function m(e,t,r){return v(e,t,r)}function g(e,t){this.x=e,this.y=t}Math.imul||(p=f),a.prototype.mulTo=function(e,t){var r=this.length+e.length;return 10===this.length&&10===e.length?p(this,e,t):r<63?f(this,e,t):r<1024?v(this,e,t):m(this,e,t)},g.prototype.makeRBT=function(e){for(var t=new Array(e),r=a.prototype._countBits(e)-1,i=0;i<e;i++)t[i]=this.revBin(i,r,e);return t},g.prototype.revBin=function(e,t,r){if(0===e||e===r-1)return e;for(var i=0,n=0;n<t;n++)i|=(1&e)<<t-n-1,e>>=1;return i},g.prototype.permute=function(e,t,r,i,n,a){for(var s=0;s<a;s++)i[s]=t[e[s]],n[s]=r[e[s]]},g.prototype.transform=function(e,t,r,i,n,a){this.permute(a,e,t,r,i,n);for(var s=1;s<n;s<<=1)for(var o=s<<1,u=Math.cos(2*Math.PI/o),c=Math.sin(2*Math.PI/o),d=0;d<n;d+=o)for(var h=u,l=c,f=0;f<s;f++){var p=r[d+f],v=i[d+f],m=r[d+f+s],g=i[d+f+s],y=h*m-l*g;g=h*g+l*m,m=y,r[d+f]=p+m,i[d+f]=v+g,r[d+f+s]=p-m,i[d+f+s]=v-g,f!==o&&(y=u*h-c*l,l=u*l+c*h,h=y)}},g.prototype.guessLen13b=function(e,t){var r=1|Math.max(t,e),i=1&r,n=0;for(r=r/2|0;r;r>>>=1)n++;return 1<<n+1+i},g.prototype.conjugate=function(e,t,r){if(!(r<=1))for(var i=0;i<r/2;i++){var n=e[i];e[i]=e[r-i-1],e[r-i-1]=n,n=t[i],t[i]=-t[r-i-1],t[r-i-1]=-n}},g.prototype.normalize13b=function(e,t){for(var r=0,i=0;i<t/2;i++){var n=8192*Math.round(e[2*i+1]/t)+Math.round(e[2*i]/t)+r;e[i]=67108863&n,r=n<67108864?0:n/67108864|0}return e},g.prototype.convert13b=function(e,t,r,n){for(var a=0,s=0;s<t;s++)a+=0|e[s],r[2*s]=8191&a,a>>>=13,r[2*s+1]=8191&a,a>>>=13;for(s=2*t;s<n;++s)r[s]=0;i(0===a),i(0===(-8192&a))},g.prototype.stub=function(e){for(var t=new Array(e),r=0;r<e;r++)t[r]=0;return t},g.prototype.mulp=function(e,t,r){var i=2*this.guessLen13b(e.length,t.length),n=this.makeRBT(i),a=this.stub(i),s=new Array(i),o=new Array(i),u=new Array(i),c=new Array(i),d=new Array(i),h=new Array(i),l=r.words;l.length=i,this.convert13b(e.words,e.length,s,i),this.convert13b(t.words,t.length,c,i),this.transform(s,a,o,u,i,n),this.transform(c,a,d,h,i,n);for(var f=0;f<i;f++){var p=o[f]*d[f]-u[f]*h[f];u[f]=o[f]*h[f]+u[f]*d[f],o[f]=p}return this.conjugate(o,u,i),this.transform(o,u,l,a,i,n),this.conjugate(l,a,i),this.normalize13b(l,i),r.negative=e.negative^t.negative,r.length=e.length+t.length,r._strip()},a.prototype.mul=function(e){var t=new a(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},a.prototype.mulf=function(e){var t=new a(null);return t.words=new Array(this.length+e.length),m(this,e,t)},a.prototype.imul=function(e){return this.clone().mulTo(e,this)},a.prototype.imuln=function(e){var t=e<0;t&&(e=-e),i("number"===typeof e),i(e<67108864);for(var r=0,n=0;n<this.length;n++){var a=(0|this.words[n])*e,s=(67108863&a)+(67108863&r);r>>=26,r+=a/67108864|0,r+=s>>>26,this.words[n]=67108863&s}return 0!==r&&(this.words[n]=r,this.length++),t?this.ineg():this},a.prototype.muln=function(e){return this.clone().imuln(e)},a.prototype.sqr=function(){return this.mul(this)},a.prototype.isqr=function(){return this.imul(this.clone())},a.prototype.pow=function(e){var t=function(e){for(var t=new Array(e.bitLength()),r=0;r<t.length;r++){var i=r/26|0,n=r%26;t[r]=e.words[i]>>>n&1}return t}(e);if(0===t.length)return new a(1);for(var r=this,i=0;i<t.length&&0===t[i];i++,r=r.sqr());if(++i<t.length)for(var n=r.sqr();i<t.length;i++,n=n.sqr())0!==t[i]&&(r=r.mul(n));return r},a.prototype.iushln=function(e){i("number"===typeof e&&e>=0);var t,r=e%26,n=(e-r)/26,a=67108863>>>26-r<<26-r;if(0!==r){var s=0;for(t=0;t<this.length;t++){var o=this.words[t]&a,u=(0|this.words[t])-o<<r;this.words[t]=u|s,s=o>>>26-r}s&&(this.words[t]=s,this.length++)}if(0!==n){for(t=this.length-1;t>=0;t--)this.words[t+n]=this.words[t];for(t=0;t<n;t++)this.words[t]=0;this.length+=n}return this._strip()},a.prototype.ishln=function(e){return i(0===this.negative),this.iushln(e)},a.prototype.iushrn=function(e,t,r){var n;i("number"===typeof e&&e>=0),n=t?(t-t%26)/26:0;var a=e%26,s=Math.min((e-a)/26,this.length),o=67108863^67108863>>>a<<a,u=r;if(n-=s,n=Math.max(0,n),u){for(var c=0;c<s;c++)u.words[c]=this.words[c];u.length=s}if(0===s);else if(this.length>s)for(this.length-=s,c=0;c<this.length;c++)this.words[c]=this.words[c+s];else this.words[0]=0,this.length=1;var d=0;for(c=this.length-1;c>=0&&(0!==d||c>=n);c--){var h=0|this.words[c];this.words[c]=d<<26-a|h>>>a,d=h&o}return u&&0!==d&&(u.words[u.length++]=d),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},a.prototype.ishrn=function(e,t,r){return i(0===this.negative),this.iushrn(e,t,r)},a.prototype.shln=function(e){return this.clone().ishln(e)},a.prototype.ushln=function(e){return this.clone().iushln(e)},a.prototype.shrn=function(e){return this.clone().ishrn(e)},a.prototype.ushrn=function(e){return this.clone().iushrn(e)},a.prototype.testn=function(e){i("number"===typeof e&&e>=0);var t=e%26,r=(e-t)/26,n=1<<t;return!(this.length<=r)&&!!(this.words[r]&n)},a.prototype.imaskn=function(e){i("number"===typeof e&&e>=0);var t=e%26,r=(e-t)/26;if(i(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==t&&r++,this.length=Math.min(r,this.length),0!==t){var n=67108863^67108863>>>t<<t;this.words[this.length-1]&=n}return this._strip()},a.prototype.maskn=function(e){return this.clone().imaskn(e)},a.prototype.iaddn=function(e){return i("number"===typeof e),i(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<=e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},a.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},a.prototype.isubn=function(e){if(i("number"===typeof e),i(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this._strip()},a.prototype.addn=function(e){return this.clone().iaddn(e)},a.prototype.subn=function(e){return this.clone().isubn(e)},a.prototype.iabs=function(){return this.negative=0,this},a.prototype.abs=function(){return this.clone().iabs()},a.prototype._ishlnsubmul=function(e,t,r){var n,a,s=e.length+r;this._expand(s);var o=0;for(n=0;n<e.length;n++){a=(0|this.words[n+r])+o;var u=(0|e.words[n])*t;o=((a-=67108863&u)>>26)-(u/67108864|0),this.words[n+r]=67108863&a}for(;n<this.length-r;n++)o=(a=(0|this.words[n+r])+o)>>26,this.words[n+r]=67108863&a;if(0===o)return this._strip();for(i(-1===o),o=0,n=0;n<this.length;n++)o=(a=-(0|this.words[n])+o)>>26,this.words[n]=67108863&a;return this.negative=1,this._strip()},a.prototype._wordDiv=function(e,t){var r=(this.length,e.length),i=this.clone(),n=e,s=0|n.words[n.length-1];0!==(r=26-this._countBits(s))&&(n=n.ushln(r),i.iushln(r),s=0|n.words[n.length-1]);var o,u=i.length-n.length;if("mod"!==t){(o=new a(null)).length=u+1,o.words=new Array(o.length);for(var c=0;c<o.length;c++)o.words[c]=0}var d=i.clone()._ishlnsubmul(n,1,u);0===d.negative&&(i=d,o&&(o.words[u]=1));for(var h=u-1;h>=0;h--){var l=67108864*(0|i.words[n.length+h])+(0|i.words[n.length+h-1]);for(l=Math.min(l/s|0,67108863),i._ishlnsubmul(n,l,h);0!==i.negative;)l--,i.negative=0,i._ishlnsubmul(n,1,h),i.isZero()||(i.negative^=1);o&&(o.words[h]=l)}return o&&o._strip(),i._strip(),"div"!==t&&0!==r&&i.iushrn(r),{div:o||null,mod:i}},a.prototype.divmod=function(e,t,r){return i(!e.isZero()),this.isZero()?{div:new a(0),mod:new a(0)}:0!==this.negative&&0===e.negative?(o=this.neg().divmod(e,t),"mod"!==t&&(n=o.div.neg()),"div"!==t&&(s=o.mod.neg(),r&&0!==s.negative&&s.iadd(e)),{div:n,mod:s}):0===this.negative&&0!==e.negative?(o=this.divmod(e.neg(),t),"mod"!==t&&(n=o.div.neg()),{div:n,mod:o.mod}):0!==(this.negative&e.negative)?(o=this.neg().divmod(e.neg(),t),"div"!==t&&(s=o.mod.neg(),r&&0!==s.negative&&s.isub(e)),{div:o.div,mod:s}):e.length>this.length||this.cmp(e)<0?{div:new a(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new a(this.modrn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new a(this.modrn(e.words[0]))}:this._wordDiv(e,t);var n,s,o},a.prototype.div=function(e){return this.divmod(e,"div",!1).div},a.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},a.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},a.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var r=0!==t.div.negative?t.mod.isub(e):t.mod,i=e.ushrn(1),n=e.andln(1),a=r.cmp(i);return a<0||1===n&&0===a?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},a.prototype.modrn=function(e){var t=e<0;t&&(e=-e),i(e<=67108863);for(var r=(1<<26)%e,n=0,a=this.length-1;a>=0;a--)n=(r*n+(0|this.words[a]))%e;return t?-n:n},a.prototype.modn=function(e){return this.modrn(e)},a.prototype.idivn=function(e){var t=e<0;t&&(e=-e),i(e<=67108863);for(var r=0,n=this.length-1;n>=0;n--){var a=(0|this.words[n])+67108864*r;this.words[n]=a/e|0,r=a%e}return this._strip(),t?this.ineg():this},a.prototype.divn=function(e){return this.clone().idivn(e)},a.prototype.egcd=function(e){i(0===e.negative),i(!e.isZero());var t=this,r=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var n=new a(1),s=new a(0),o=new a(0),u=new a(1),c=0;t.isEven()&&r.isEven();)t.iushrn(1),r.iushrn(1),++c;for(var d=r.clone(),h=t.clone();!t.isZero();){for(var l=0,f=1;0===(t.words[0]&f)&&l<26;++l,f<<=1);if(l>0)for(t.iushrn(l);l-- >0;)(n.isOdd()||s.isOdd())&&(n.iadd(d),s.isub(h)),n.iushrn(1),s.iushrn(1);for(var p=0,v=1;0===(r.words[0]&v)&&p<26;++p,v<<=1);if(p>0)for(r.iushrn(p);p-- >0;)(o.isOdd()||u.isOdd())&&(o.iadd(d),u.isub(h)),o.iushrn(1),u.iushrn(1);t.cmp(r)>=0?(t.isub(r),n.isub(o),s.isub(u)):(r.isub(t),o.isub(n),u.isub(s))}return{a:o,b:u,gcd:r.iushln(c)}},a.prototype._invmp=function(e){i(0===e.negative),i(!e.isZero());var t=this,r=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var n,s=new a(1),o=new a(0),u=r.clone();t.cmpn(1)>0&&r.cmpn(1)>0;){for(var c=0,d=1;0===(t.words[0]&d)&&c<26;++c,d<<=1);if(c>0)for(t.iushrn(c);c-- >0;)s.isOdd()&&s.iadd(u),s.iushrn(1);for(var h=0,l=1;0===(r.words[0]&l)&&h<26;++h,l<<=1);if(h>0)for(r.iushrn(h);h-- >0;)o.isOdd()&&o.iadd(u),o.iushrn(1);t.cmp(r)>=0?(t.isub(r),s.isub(o)):(r.isub(t),o.isub(s))}return(n=0===t.cmpn(1)?s:o).cmpn(0)<0&&n.iadd(e),n},a.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),r=e.clone();t.negative=0,r.negative=0;for(var i=0;t.isEven()&&r.isEven();i++)t.iushrn(1),r.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;r.isEven();)r.iushrn(1);var n=t.cmp(r);if(n<0){var a=t;t=r,r=a}else if(0===n||0===r.cmpn(1))break;t.isub(r)}return r.iushln(i)},a.prototype.invm=function(e){return this.egcd(e).a.umod(e)},a.prototype.isEven=function(){return 0===(1&this.words[0])},a.prototype.isOdd=function(){return 1===(1&this.words[0])},a.prototype.andln=function(e){return this.words[0]&e},a.prototype.bincn=function(e){i("number"===typeof e);var t=e%26,r=(e-t)/26,n=1<<t;if(this.length<=r)return this._expand(r+1),this.words[r]|=n,this;for(var a=n,s=r;0!==a&&s<this.length;s++){var o=0|this.words[s];a=(o+=a)>>>26,o&=67108863,this.words[s]=o}return 0!==a&&(this.words[s]=a,this.length++),this},a.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},a.prototype.cmpn=function(e){var t,r=e<0;if(0!==this.negative&&!r)return-1;if(0===this.negative&&r)return 1;if(this._strip(),this.length>1)t=1;else{r&&(e=-e),i(e<=67108863,"Number is too big");var n=0|this.words[0];t=n===e?0:n<e?-1:1}return 0!==this.negative?0|-t:t},a.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},a.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,r=this.length-1;r>=0;r--){var i=0|this.words[r],n=0|e.words[r];if(i!==n){i<n?t=-1:i>n&&(t=1);break}}return t},a.prototype.gtn=function(e){return 1===this.cmpn(e)},a.prototype.gt=function(e){return 1===this.cmp(e)},a.prototype.gten=function(e){return this.cmpn(e)>=0},a.prototype.gte=function(e){return this.cmp(e)>=0},a.prototype.ltn=function(e){return-1===this.cmpn(e)},a.prototype.lt=function(e){return-1===this.cmp(e)},a.prototype.lten=function(e){return this.cmpn(e)<=0},a.prototype.lte=function(e){return this.cmp(e)<=0},a.prototype.eqn=function(e){return 0===this.cmpn(e)},a.prototype.eq=function(e){return 0===this.cmp(e)},a.red=function(e){return new S(e)},a.prototype.toRed=function(e){return i(!this.red,"Already a number in reduction context"),i(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},a.prototype.fromRed=function(){return i(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},a.prototype._forceRed=function(e){return this.red=e,this},a.prototype.forceRed=function(e){return i(!this.red,"Already a number in reduction context"),this._forceRed(e)},a.prototype.redAdd=function(e){return i(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},a.prototype.redIAdd=function(e){return i(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},a.prototype.redSub=function(e){return i(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},a.prototype.redISub=function(e){return i(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},a.prototype.redShl=function(e){return i(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},a.prototype.redMul=function(e){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},a.prototype.redIMul=function(e){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},a.prototype.redSqr=function(){return i(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},a.prototype.redISqr=function(){return i(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},a.prototype.redSqrt=function(){return i(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},a.prototype.redInvm=function(){return i(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},a.prototype.redNeg=function(){return i(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},a.prototype.redPow=function(e){return i(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var y={k256:null,p224:null,p192:null,p25519:null};function b(e,t){this.name=e,this.p=new a(t,16),this.n=this.p.bitLength(),this.k=new a(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function x(){b.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function k(){b.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function w(){b.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function _(){b.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function S(e){if("string"===typeof e){var t=a._prime(e);this.m=t.p,this.prime=t}else i(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function O(e){S.call(this,e),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new a(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}b.prototype._tmp=function(){var e=new a(null);return e.words=new Array(Math.ceil(this.n/13)),e},b.prototype.ireduce=function(e){var t,r=e;do{this.split(r,this.tmp),t=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(t>this.n);var i=t<this.n?-1:r.ucmp(this.p);return 0===i?(r.words[0]=0,r.length=1):i>0?r.isub(this.p):r._strip(),r},b.prototype.split=function(e,t){e.iushrn(this.n,0,t)},b.prototype.imulK=function(e){return e.imul(this.k)},n(x,b),x.prototype.split=function(e,t){for(var r=4194303,i=Math.min(e.length,9),n=0;n<i;n++)t.words[n]=e.words[n];if(t.length=i,e.length<=9)return e.words[0]=0,void(e.length=1);var a=e.words[9];for(t.words[t.length++]=a&r,n=10;n<e.length;n++){var s=0|e.words[n];e.words[n-10]=(s&r)<<4|a>>>22,a=s}a>>>=22,e.words[n-10]=a,0===a&&e.length>10?e.length-=10:e.length-=9},x.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,r=0;r<e.length;r++){var i=0|e.words[r];t+=977*i,e.words[r]=67108863&t,t=64*i+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},n(k,b),n(w,b),n(_,b),_.prototype.imulK=function(e){for(var t=0,r=0;r<e.length;r++){var i=19*(0|e.words[r])+t,n=67108863&i;i>>>=26,e.words[r]=n,t=i}return 0!==t&&(e.words[e.length++]=t),e},a._prime=function(e){if(y[e])return y[e];var t;if("k256"===e)t=new x;else if("p224"===e)t=new k;else if("p192"===e)t=new w;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new _}return y[e]=t,t},S.prototype._verify1=function(e){i(0===e.negative,"red works only with positives"),i(e.red,"red works only with red numbers")},S.prototype._verify2=function(e,t){i(0===(e.negative|t.negative),"red works only with positives"),i(e.red&&e.red===t.red,"red works only with red numbers")},S.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):(e.umod(this.m)._forceRed(this)._move(e),e)},S.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},S.prototype.add=function(e,t){this._verify2(e,t);var r=e.add(t);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},S.prototype.iadd=function(e,t){this._verify2(e,t);var r=e.iadd(t);return r.cmp(this.m)>=0&&r.isub(this.m),r},S.prototype.sub=function(e,t){this._verify2(e,t);var r=e.sub(t);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},S.prototype.isub=function(e,t){this._verify2(e,t);var r=e.isub(t);return r.cmpn(0)<0&&r.iadd(this.m),r},S.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},S.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},S.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},S.prototype.isqr=function(e){return this.imul(e,e.clone())},S.prototype.sqr=function(e){return this.mul(e,e)},S.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(i(t%2===1),3===t){var r=this.m.add(new a(1)).iushrn(2);return this.pow(e,r)}for(var n=this.m.subn(1),s=0;!n.isZero()&&0===n.andln(1);)s++,n.iushrn(1);i(!n.isZero());var o=new a(1).toRed(this),u=o.redNeg(),c=this.m.subn(1).iushrn(1),d=this.m.bitLength();for(d=new a(2*d*d).toRed(this);0!==this.pow(d,c).cmp(u);)d.redIAdd(u);for(var h=this.pow(d,n),l=this.pow(e,n.addn(1).iushrn(1)),f=this.pow(e,n),p=s;0!==f.cmp(o);){for(var v=f,m=0;0!==v.cmp(o);m++)v=v.redSqr();i(m<p);var g=this.pow(h,new a(1).iushln(p-m-1));l=l.redMul(g),h=g.redSqr(),f=f.redMul(h),p=m}return l},S.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},S.prototype.pow=function(e,t){if(t.isZero())return new a(1).toRed(this);if(0===t.cmpn(1))return e.clone();var r=new Array(16);r[0]=new a(1).toRed(this),r[1]=e;for(var i=2;i<r.length;i++)r[i]=this.mul(r[i-1],e);var n=r[0],s=0,o=0,u=t.bitLength()%26;for(0===u&&(u=26),i=t.length-1;i>=0;i--){for(var c=t.words[i],d=u-1;d>=0;d--){var h=c>>d&1;n!==r[0]&&(n=this.sqr(n)),0!==h||0!==s?(s<<=1,s|=h,(4===++o||0===i&&0===d)&&(n=this.mul(n,r[s]),o=0,s=0)):o=0}u=26}return n},S.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},S.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},a.mont=function(e){return new O(e)},n(O,S),O.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},O.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},O.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var r=e.imul(t),i=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=r.isub(i).iushrn(this.shift),a=n;return n.cmp(this.m)>=0?a=n.isub(this.m):n.cmpn(0)<0&&(a=n.iadd(this.m)),a._forceRed(this)},O.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new a(0)._forceRed(this);var r=e.mul(t),i=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=r.isub(i).iushrn(this.shift),s=n;return n.cmp(this.m)>=0?s=n.isub(this.m):n.cmpn(0)<0&&(s=n.iadd(this.m)),s._forceRed(this)},O.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(e,this)}).call(this,r(87)(e))},function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var i=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t}},function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var i=r(79);var n=r(102),a=r(70);function s(e){return function(e){if(Array.isArray(e))return Object(i.a)(e)}(e)||Object(n.a)(e)||Object(a.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var i=r(0),n=i.createContext(void 0),a=function(e){var t=e.children,r=e.size;return i.createElement(n.Consumer,null,(function(e){return i.createElement(n.Provider,{value:r||e},t)}))};t.b=n},function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var i=r(81);var n=r(109);function a(e){return function(e){if(Array.isArray(e))return Object(i.a)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Object(n.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},function(e,t,r){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}r.d(t,"a",(function(){return i}))},function(e,t,r){"use strict";function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function n(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}r.d(t,"a",(function(){return n}))},function(e,t,r){"use strict";function i(e){return(i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}r.d(t,"a",(function(){return i}))},function(e,t,r){"use strict";function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}r.d(t,"a",(function(){return o}));var n=r(180),a=r.n(n);function s(e,t){return!t||"object"!==a()(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function o(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=i(e);if(t){var a=i(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return s(this,r)}}},function(e,t,r){"use strict";function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function n(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}r.d(t,"a",(function(){return n}))},function(e,t){var r,i,n=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function o(e){if(r===setTimeout)return setTimeout(e,0);if((r===a||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"===typeof setTimeout?setTimeout:a}catch(e){r=a}try{i="function"===typeof clearTimeout?clearTimeout:s}catch(e){i=s}}();var u,c=[],d=!1,h=-1;function l(){d&&u&&(d=!1,u.length?c=u.concat(c):h=-1,c.length&&f())}function f(){if(!d){var e=o(l);d=!0;for(var t=c.length;t;){for(u=c,c=[];++h<t;)u&&u[h].run();h=-1,t=c.length}u=null,d=!1,function(e){if(i===clearTimeout)return clearTimeout(e);if((i===s||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function v(){}n.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];c.push(new p(e,t)),1!==c.length||d||o(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=v,n.addListener=v,n.once=v,n.off=v,n.removeListener=v,n.removeAllListeners=v,n.emit=v,n.prependListener=v,n.prependOnceListener=v,n.listeners=function(e){return[]},n.binding=function(e){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},function(e,t){e.exports.linebrk=function(e,t){for(var r="",i=0;i+t<e.length;)r+=e.substring(i,i+t)+"\n",i+=t;return r+e.substring(i,e.length)},e.exports.get32IntFromBuffer=function(e,t){t=t||0;var r;if((r=e.length-t)>0){if(r>=4)return e.readUInt32BE(t);for(var i=0,n=t+r,a=0;n>t;n--,a+=2)i+=e[n-1]*Math.pow(16,a);return i}return NaN},e.exports._={isObject:function(e){var t=typeof e;return!!e&&("object"==t||"function"==t)},isString:function(e){return"string"==typeof e||e instanceof String},isNumber:function(e){return"number"==typeof e||!isNaN(parseFloat(e))&&isFinite(e)},omit:function(e,t){var r={};for(var i in e)e.hasOwnProperty(i)&&i!==t&&(r[i]=e[i]);return r}},e.exports.trimSurroundingText=function(e,t,r){var i=0,n=e.length,a=e.indexOf(t);a>=0&&(i=a+t.length);var s=e.indexOf(r,a);return s>=0&&(n=s),e.substring(i,n)}},function(e,t,r){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=r(189)},function(e,t,r){"use strict";function i(){return!("undefined"===typeof window||!window.document||!window.document.createElement)}r.d(t,"a",(function(){return i}))},function(e,t,r){"use strict";var i=t;i.inherits=function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e},i.version="6.5.0",i.utils=r(67),i.curve=r(89),i.curves=r(157),i.ec=r(261),i.eddsa=r(265)},function(e,t,r){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}r.d(t,"a",(function(){return i}))},function(e,t,r){"use strict";var i=r(17),n=r(15),a=r(16),s=r(43),o=r(0),u=r(58),c=r(26),d=r(14),h=r.n(d),l=r(49);function f(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit".concat(e)]="webkit".concat(t),r["Moz".concat(e)]="moz".concat(t),r["ms".concat(e)]="MS".concat(t),r["O".concat(e)]="o".concat(t.toLowerCase()),r}var p=function(e,t){var r={animationend:f("Animation","AnimationEnd"),transitionend:f("Transition","TransitionEnd")};return e&&("AnimationEvent"in t||delete r.animationend.animation,"TransitionEvent"in t||delete r.transitionend.transition),r}(Object(l.a)(),"undefined"!==typeof window?window:{}),v={};if(Object(l.a)()){var m=document.createElement("div");v=m.style}var g={};function y(e){if(g[e])return g[e];var t=p[e];if(t)for(var r=Object.keys(t),i=r.length,n=0;n<i;n+=1){var a=r[n];if(Object.prototype.hasOwnProperty.call(t,a)&&a in v)return g[e]=t[a],g[e]}return""}var b=y("animationend"),x=y("transitionend"),k=!(!b||!x),w=b||"animationend",_=x||"transitionend";function S(e,t){return e?"object"===Object(s.a)(e)?e[t.replace(/-\w/g,(function(e){return e[1].toUpperCase()}))]:"".concat(e,"-").concat(t):null}var O="none",T="appear",C="enter",I="leave",M="none",A="prepare",E="start",N="active",P="end";function D(e){var t=Object(o.useRef)(!1),r=Object(o.useState)(e),i=Object(a.a)(r,2),n=i[0],s=i[1];return Object(o.useEffect)((function(){return function(){t.current=!0}}),[]),[n,function(e){t.current||s(e)}]}var L=Object(l.a)()?o.useLayoutEffect:o.useEffect,B=r(23),R=[A,E,N,P];function V(e){return e===N||e===P}var G=function(e,t){var r=o.useState(M),i=Object(a.a)(r,2),n=i[0],s=i[1],u=function(){var e=o.useRef(null);function t(){B.a.cancel(e.current)}return o.useEffect((function(){return function(){t()}}),[]),[function r(i){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;t();var a=Object(B.a)((function(){n<=1?i({isCanceled:function(){return a!==e.current}}):r(i,n-1)}));e.current=a},t]}(),c=Object(a.a)(u,2),d=c[0],h=c[1];return L((function(){if(n!==M&&n!==P){var e=R.indexOf(n),r=R[e+1],i=t(n);false===i?s(r):d((function(e){function t(){e.isCanceled()||s(r)}!0===i?t():Promise.resolve(i).then(t)}))}}),[e,n]),o.useEffect((function(){return function(){h()}}),[]),[function(){s(A)},n]};function F(e,t,r,s){var u=s.motionEnter,c=void 0===u||u,d=s.motionAppear,h=void 0===d||d,l=s.motionLeave,f=void 0===l||l,p=s.motionDeadline,v=s.motionLeaveImmediately,m=s.onAppearPrepare,g=s.onEnterPrepare,y=s.onLeavePrepare,b=s.onAppearStart,x=s.onEnterStart,k=s.onLeaveStart,S=s.onAppearActive,M=s.onEnterActive,P=s.onLeaveActive,B=s.onAppearEnd,R=s.onEnterEnd,F=s.onLeaveEnd,q=s.onVisibleChanged,j=D(),z=Object(a.a)(j,2),H=z[0],U=z[1],W=D(O),K=Object(a.a)(W,2),X=K[0],Y=K[1],Z=D(null),Q=Object(a.a)(Z,2),$=Q[0],J=Q[1],ee=Object(o.useRef)(!1),te=Object(o.useRef)(null),re=Object(o.useRef)(!1),ie=Object(o.useRef)(null);function ne(){return r()||ie.current}var ae=Object(o.useRef)(!1);function se(e){var t,r=ne();e&&!e.deadline&&e.target!==r||(X===T&&ae.current?t=null===B||void 0===B?void 0:B(r,e):X===C&&ae.current?t=null===R||void 0===R?void 0:R(r,e):X===I&&ae.current&&(t=null===F||void 0===F?void 0:F(r,e)),!1===t||re.current||(Y(O),J(null)))}var oe=function(e){var t=Object(o.useRef)(),r=Object(o.useRef)(e);r.current=e;var i=o.useCallback((function(e){r.current(e)}),[]);function n(e){e&&(e.removeEventListener(_,i),e.removeEventListener(w,i))}return o.useEffect((function(){return function(){n(t.current)}}),[]),[function(e){t.current&&t.current!==e&&n(t.current),e&&e!==t.current&&(e.addEventListener(_,i),e.addEventListener(w,i),t.current=e)},n]}(se),ue=Object(a.a)(oe,1)[0],ce=o.useMemo((function(){var e,t,r;switch(X){case"appear":return e={},Object(i.a)(e,A,m),Object(i.a)(e,E,b),Object(i.a)(e,N,S),e;case"enter":return t={},Object(i.a)(t,A,g),Object(i.a)(t,E,x),Object(i.a)(t,N,M),t;case"leave":return r={},Object(i.a)(r,A,y),Object(i.a)(r,E,k),Object(i.a)(r,N,P),r;default:return{}}}),[X]),de=G(X,(function(e){if(e===A){var t=ce.prepare;return!!t&&t(ne())}var r;fe in ce&&J((null===(r=ce[fe])||void 0===r?void 0:r.call(ce,ne(),null))||null);return fe===N&&(ue(ne()),p>0&&(clearTimeout(te.current),te.current=setTimeout((function(){se({deadline:!0})}),p))),true})),he=Object(a.a)(de,2),le=he[0],fe=he[1],pe=V(fe);ae.current=pe,L((function(){U(t);var r,i=ee.current;(ee.current=!0,e)&&(!i&&t&&h&&(r=T),i&&t&&c&&(r=C),(i&&!t&&f||!i&&v&&!t&&f)&&(r=I),r&&(Y(r),le()))}),[t]),Object(o.useEffect)((function(){(X===T&&!h||X===C&&!c||X===I&&!f)&&Y(O)}),[h,c,f]),Object(o.useEffect)((function(){return function(){clearTimeout(te.current),re.current=!0}}),[]),Object(o.useEffect)((function(){void 0!==H&&X===O&&(null===q||void 0===q||q(H))}),[H,X]);var ve=$;return ce.prepare&&fe===E&&(ve=Object(n.a)({transition:"none"},ve)),[X,fe,ve,null!==H&&void 0!==H?H:t]}var q=r(41),j=r(42),z=r(45),H=r(44),U=function(e){Object(z.a)(r,e);var t=Object(H.a)(r);function r(){return Object(q.a)(this,r),t.apply(this,arguments)}return Object(j.a)(r,[{key:"render",value:function(){return this.props.children}}]),r}(o.Component);var W=function(e){var t=e;function r(e){return!(!e.motionName||!t)}"object"===Object(s.a)(e)&&(t=e.transitionSupport);var d=o.forwardRef((function(e,t){var s=e.visible,d=void 0===s||s,l=e.removeOnLeave,f=void 0===l||l,p=e.forceRender,v=e.children,m=e.motionName,g=e.leavedClassName,y=e.eventProps,b=r(e),x=Object(o.useRef)(),k=Object(o.useRef)();var w=F(b,d,(function(){try{return Object(u.a)(x.current||k.current)}catch(e){return null}}),e),_=Object(a.a)(w,4),T=_[0],C=_[1],I=_[2],M=_[3],N=o.useRef(M);M&&(N.current=!0);var P=Object(o.useRef)(t);P.current=t;var D,L=o.useCallback((function(e){x.current=e,Object(c.b)(P.current,e)}),[]),B=Object(n.a)(Object(n.a)({},y),{},{visible:d});if(v)if(T!==O&&r(e)){var R,G;C===A?G="prepare":V(C)?G="active":C===E&&(G="start"),D=v(Object(n.a)(Object(n.a)({},B),{},{className:h()(S(m,T),(R={},Object(i.a)(R,S(m,"".concat(T,"-").concat(G)),G),Object(i.a)(R,m,"string"===typeof m),R)),style:I}),L)}else D=M?v(Object(n.a)({},B),L):!f&&N.current?v(Object(n.a)(Object(n.a)({},B),{},{className:g}),L):p?v(Object(n.a)(Object(n.a)({},B),{},{style:{display:"none"}}),L):null;else D=null;return o.createElement(U,{ref:k},D)}));return d.displayName="CSSMotion",d}(k),K=r(24),X=r(34),Y="add",Z="keep",Q="remove",$="removed";function J(e){var t;return t=e&&"object"===Object(s.a)(e)&&"key"in e?e:{key:e},Object(n.a)(Object(n.a)({},t),{},{key:String(t.key)})}function ee(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map(J)}function te(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=[],i=0,a=t.length,s=ee(e),o=ee(t);s.forEach((function(e){for(var t=!1,s=i;s<a;s+=1){var u=o[s];if(u.key===e.key){i<s&&(r=r.concat(o.slice(i,s).map((function(e){return Object(n.a)(Object(n.a)({},e),{},{status:Y})}))),i=s),r.push(Object(n.a)(Object(n.a)({},u),{},{status:Z})),i+=1,t=!0;break}}t||r.push(Object(n.a)(Object(n.a)({},e),{},{status:Q}))})),i<a&&(r=r.concat(o.slice(i).map((function(e){return Object(n.a)(Object(n.a)({},e),{},{status:Y})}))));var u={};r.forEach((function(e){var t=e.key;u[t]=(u[t]||0)+1}));var c=Object.keys(u).filter((function(e){return u[e]>1}));return c.forEach((function(e){(r=r.filter((function(t){var r=t.key,i=t.status;return r!==e||i!==Q}))).forEach((function(t){t.key===e&&(t.status=Z)}))})),r}var re=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:W,r=function(e){Object(z.a)(i,e);var r=Object(H.a)(i);function i(){var e;return Object(q.a)(this,i),(e=r.apply(this,arguments)).state={keyEntities:[]},e.removeKey=function(t){e.setState((function(e){return{keyEntities:e.keyEntities.map((function(e){return e.key!==t?e:Object(n.a)(Object(n.a)({},e),{},{status:$})}))}}))},e}return Object(j.a)(i,[{key:"render",value:function(){var e=this,r=this.state.keyEntities,i=this.props,n=i.component,a=i.children,s=i.onVisibleChanged,u=Object(X.a)(i,["component","children","onVisibleChanged"]),c=n||o.Fragment,d={};return re.forEach((function(e){d[e]=u[e],delete u[e]})),delete u.keys,o.createElement(c,u,r.map((function(r){var i=r.status,n=Object(X.a)(r,["status"]),u=i===Y||i===Z;return o.createElement(t,Object(K.a)({},d,{key:n.key,visible:u,eventProps:n,onVisibleChanged:function(t){null===s||void 0===s||s(t,{key:n.key}),t||e.removeKey(n.key)}}),a)})))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var r=e.keys,i=t.keyEntities,n=ee(r);return{keyEntities:te(i,n).filter((function(e){var t=i.find((function(t){var r=t.key;return e.key===r}));return!t||t.status!==$||e.status!==Q}))}}}]),i}(o.Component);r.defaultProps={component:"div"}})(k),t.a=W},function(e,t,r){var i=r(169),n="object"==typeof self&&self&&self.Object===Object&&self,a=i||n||Function("return this")();e.exports=a},function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var i=r(0),n=r.n(i),a=r(100);function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=[];return n.a.Children.forEach(e,(function(e){(void 0!==e&&null!==e||t.keepEmpty)&&(Array.isArray(e)?r=r.concat(s(e)):Object(a.isFragment)(e)&&e.props?r=r.concat(s(e.props.children,t)):r.push(e))})),r}},function(e,t,r){e.exports=r(117)},function(e,t){"function"===typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}},function(e,t,r){"use strict";var i=r(15),n=r(41),a=r(42),s=r(45),o=r(44),u=r(0),c=r(58),d=r(54),h=r(19),l=r(26),f=r(101),p=function(e){Object(s.a)(r,e);var t=Object(o.a)(r);function r(){var e;return Object(n.a)(this,r),(e=t.apply(this,arguments)).resizeObserver=null,e.childNode=null,e.currentElement=null,e.state={width:0,height:0,offsetHeight:0,offsetWidth:0},e.onResize=function(t){var r=e.props.onResize,n=t[0].target,a=n.getBoundingClientRect(),s=a.width,o=a.height,u=n.offsetWidth,c=n.offsetHeight,d=Math.floor(s),h=Math.floor(o);if(e.state.width!==d||e.state.height!==h||e.state.offsetWidth!==u||e.state.offsetHeight!==c){var l={width:d,height:h,offsetWidth:u,offsetHeight:c};e.setState(l),r&&Promise.resolve().then((function(){r(Object(i.a)(Object(i.a)({},l),{},{offsetWidth:u,offsetHeight:c}),n)}))}},e.setChildNode=function(t){e.childNode=t},e}return Object(a.a)(r,[{key:"componentDidMount",value:function(){this.onComponentUpdated()}},{key:"componentDidUpdate",value:function(){this.onComponentUpdated()}},{key:"componentWillUnmount",value:function(){this.destroyObserver()}},{key:"onComponentUpdated",value:function(){if(this.props.disabled)this.destroyObserver();else{var e=Object(c.a)(this.childNode||this);e!==this.currentElement&&(this.destroyObserver(),this.currentElement=e),!this.resizeObserver&&e&&(this.resizeObserver=new f.a(this.onResize),this.resizeObserver.observe(e))}}},{key:"destroyObserver",value:function(){this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=null)}},{key:"render",value:function(){var e=this.props.children,t=Object(d.a)(e);if(t.length>1)Object(h.a)(!1,"Find more than one child node with `children` in ResizeObserver. Will only observe first one.");else if(0===t.length)return Object(h.a)(!1,"`children` of ResizeObserver is empty. Nothing is in observe."),null;var r=t[0];if(u.isValidElement(r)&&Object(l.c)(r)){var i=r.ref;t[0]=u.cloneElement(r,{ref:Object(l.a)(i,this.setChildNode)})}return 1===t.length?t[0]:t.map((function(e,t){return!u.isValidElement(e)||"key"in e&&null!==e.key?e:u.cloneElement(e,{key:"".concat("rc-observer-key","-").concat(t)})}))}}]),r}(u.Component);p.displayName="ResizeObserver",t.a=p},function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var i=r(48),n=r.n(i);function a(e){return e instanceof HTMLElement?e:n.a.findDOMNode(e)}},function(e,t,r){"use strict";function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function n(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}r.d(t,"a",(function(){return n}))},function(e,t,r){"use strict";function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}r.d(t,"a",(function(){return u}));var n=r(181),a=r.n(n),s=r(106);function o(e,t){return!t||"object"!==a()(t)&&"function"!==typeof t?Object(s.a)(e):t}function u(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=i(e);if(t){var a=i(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return o(this,r)}}},function(e,t,r){"use strict";function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function n(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}r.d(t,"a",(function(){return n}))},function(e,t,r){"use strict";function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}r.d(t,"a",(function(){return a}))},function(e,t,r){"use strict";var i=r(85),n=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};e.exports=h;var a=Object.create(r(75));a.inherits=r(56);var s=r(139),o=r(122);a.inherits(h,s);for(var u=n(o.prototype),c=0;c<u.length;c++){var d=u[c];h.prototype[d]||(h.prototype[d]=o.prototype[d])}function h(e){if(!(this instanceof h))return new h(e);s.call(this,e),o.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",l)}function l(){this.allowHalfOpen||this._writableState.ended||i.nextTick(f,this)}function f(e){e.end()}Object.defineProperty(h.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(h.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),h.prototype._destroy=function(e,t){this.push(null),this.end(),i.nextTick(t,e)}},function(e,t,r){"use strict";r.p},function(e,t,r){"use strict";r.d(t,"a",(function(){return u}));var i=r(104);var n=r(71),a=r(105);function s(e,t){return Object(i.a)(e)||function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var r=[],i=!0,n=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(i=(s=o.next()).done)&&(r.push(s.value),!t||r.length!==t);i=!0);}catch(u){n=!0,a=u}finally{try{i||null==o.return||o.return()}finally{if(n)throw a}}return r}}(e,t)||Object(n.a)(e,t)||Object(a.a)()}var o=r(0);function u(e,t){var r=t||{},i=r.defaultValue,n=r.value,a=r.onChange,u=r.postState,c=s(o.useState((function(){return void 0!==n?n:void 0!==i?"function"===typeof i?i():i:"function"===typeof e?e():e})),2),d=c[0],h=c[1],l=void 0!==n?n:d;u&&(l=u(l));var f=o.useRef(!0);return o.useEffect((function(){f.current?f.current=!1:void 0===n&&h(n)}),[n]),[l,function(e){h(e),l!==e&&a&&a(e,l)}]}},function(e,t,r){"use strict";var i=r(0),n={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"}}]},name:"loading",theme:"outlined"},a=r(25),s=function(e,t){return i.createElement(a.a,Object.assign({},e,{ref:t,icon:n}))};s.displayName="LoadingOutlined";t.a=i.forwardRef(s)},function(e,t,r){"use strict";var i=t,n=r(36);function a(e,t){var r=[];return t>0&&r.push(e>>>24),t>1&&r.push(e>>>16&255),t>2&&r.push(e>>>8&255),t>3&&r.push(255&e),r}function s(e){return 1===e.length?"0"+e:e}function o(e){for(var t="",r=0;r<e.length;r++)t+=s(e[r].toString(16));return t}i.assert=function(e,t){if(!e)throw new Error(t)},i.getNAF=function(e,t){for(var r=[],i=1<<t+1,n=e.clone();n.cmpn(1)>=0;){var a;if(n.isOdd()){var s=n.andln(i-1);a=s>(i>>1)-1?(i>>1)-s:s,n.isubn(a)}else a=0;r.push(a);for(var o=0!==n.cmpn(0)&&0===n.andln(i-1)?t+1:1,u=1;u<o;u++)r.push(0);n.iushrn(o)}return r},i.getJSF=function(e,t){var r=[[],[]];e=e.clone(),t=t.clone();for(var i=0,n=0;e.cmpn(-i)>0||t.cmpn(-n)>0;){var a,s,o,u=e.andln(3)+i&3,c=t.andln(3)+n&3;if(3===u&&(u=-1),3===c&&(c=-1),0===(1&u))a=0;else a=3!==(o=e.andln(7)+i&7)&&5!==o||2!==c?u:-u;if(r[0].push(a),0===(1&c))s=0;else s=3!==(o=t.andln(7)+n&7)&&5!==o||2!==u?c:-c;r[1].push(s),2*i===a+1&&(i=1-i),2*n===s+1&&(n=1-n),e.iushrn(1),t.iushrn(1)}return r},i.cachedProperty=function(e,t,r){var i="_"+t;e.prototype[t]=function(){return void 0!==this[i]?this[i]:this[i]=r.call(this)}},i.parseBytes=function(e){return"string"===typeof e?i.toArray(e,"hex"):e},i.intFromLE=function(e){return new n(e,"hex","le")},i.wordArrayToBuffer=function(e){var t=void 0;if(!e.hasOwnProperty("sigBytes")||!e.hasOwnProperty("words"))throw Error("Argument not a wordArray");t=e.sigBytes,e=e.words;for(var r=[],i=[],n=0;t>0;)t-=(i=a(e[n],Math.min(4,t))).length,r.push(i),n++;return[].concat.apply([],r)},i.toArray=function(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var r=[];if("string"!==typeof e){for(var i=0;i<e.length;i++)r[i]=0|e[i];return r}if("hex"===t){(e=e.replace(/[^a-z0-9]+/gi,"")).length%2!==0&&(e="0"+e);for(i=0;i<e.length;i+=2)r.push(parseInt(e[i]+e[i+1],16))}else for(i=0;i<e.length;i++){var n=e.charCodeAt(i),a=n>>8,s=255&n;a?r.push(a,s):r.push(s)}return r},i.zero2=s,i.toHex=o,i.encode=function(e,t){return"hex"===t?o(e):e}},function(e,t,r){var i=r(404),n=r(409);e.exports=function(e,t){var r=n(e,t);return i(r)?r:void 0}},function(e,t,r){"use strict";function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,"a",(function(){return i}))},function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var i=r(79);function n(e,t){if(e){if("string"===typeof e)return Object(i.a)(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Object(i.a)(e,t):void 0}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var i=r(80);function n(e,t){if(e){if("string"===typeof e)return Object(i.a)(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Object(i.a)(e,t):void 0}}},function(e,t,r){"use strict";var i=r(0),n={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm165.4 618.2l-66-.3L512 563.4l-99.3 118.4-66.1.3c-4.4 0-8-3.5-8-8 0-1.9.7-3.7 1.9-5.2l130.1-155L340.5 359a8.32 8.32 0 01-1.9-5.2c0-4.4 3.6-8 8-8l66.1.3L512 464.6l99.3-118.4 66-.3c4.4 0 8 3.5 8 8 0 1.9-.7 3.7-1.9 5.2L553.5 514l130 155c1.2 1.5 1.9 3.3 1.9 5.2 0 4.4-3.6 8-8 8z"}}]},name:"close-circle",theme:"filled"},a=r(25),s=function(e,t){return i.createElement(a.a,Object.assign({},e,{ref:t,icon:n}))};s.displayName="CloseCircleFilled";t.a=i.forwardRef(s)},function(e,t,r){"use strict";var i=r(13),n=r(27),a=r(22),s=r(9),o=r(0),u=r(14),c=r.n(u);function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}function h(e,t){if(null==e)return{};var r,i,n=function(e,t){if(null==e)return{};var r,i,n={},a=Object.keys(e);for(i=0;i<a.length;i++)r=a[i],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function m(e,t){if(e){if("string"===typeof e)return v(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?v(e,t):void 0}}function g(e){return function(e){if(Array.isArray(e))return v(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||m(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function x(e,t,r){return t&&b(e.prototype,t),r&&b(e,r),e}function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e){return(S="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e,t){return!t||"object"!==S(t)&&"function"!==typeof t?k(e):t}function T(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(Re){return!1}}();return function(){var r,i=_(e);if(t){var n=_(this).constructor;r=Reflect.construct(i,arguments,n)}else r=i.apply(this,arguments);return O(this,r)}}var C=r(54),I=r(19),M="RC_FORM_INTERNAL_HOOKS",A=function(){Object(I.a)(!1,"Can not find FormContext. Please make sure you wrap Field under Form.")},E=o.createContext({getFieldValue:A,getFieldsValue:A,getFieldError:A,getFieldsError:A,isFieldsTouched:A,isFieldTouched:A,isFieldValidating:A,isFieldsValidating:A,resetFields:A,setFields:A,setFieldsValue:A,validateFields:A,submit:A,getInternalHooks:function(){return A(),{dispatch:A,initEntityValue:A,registerField:A,useSubscribe:A,setInitialValues:A,setCallbacks:A,getFields:A,setValidateMessages:A,setPreserve:A}}});function N(e){return void 0===e||null===e?[]:Array.isArray(e)?e:[e]}var P=r(55),D=r.n(P);function L(e,t,r,i,n,a,s){try{var o=e[a](s),u=o.value}catch(c){return void r(c)}o.done?t(u):Promise.resolve(u).then(i,n)}function B(e){return function(){var t=this,r=arguments;return new Promise((function(i,n){var a=e.apply(t,r);function s(e){L(a,i,n,s,o,"next",e)}function o(e){L(a,i,n,s,o,"throw",e)}s(void 0)}))}}var R=r(182);function V(e,t){for(var r=e,i=0;i<t.length;i+=1){if(null===r||void 0===r)return;r=r[t[i]]}return r}var G=r(69),F=r(80);function q(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}var j=r(71);function z(e){return function(e){if(Array.isArray(e))return Object(F.a)(e)}(e)||q(e)||Object(j.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var H=r(104),U=r(105);function W(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function K(e,t,r,i){if(!t.length)return r;var n,a,s=(n=t,Object(H.a)(n)||q(n)||Object(j.a)(n)||Object(U.a)()),o=s[0],u=s.slice(1);return a=e||"number"!==typeof o?Array.isArray(e)?z(e):function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?W(Object(r),!0).forEach((function(t){Object(G.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):W(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e):[],i&&void 0===r&&1===u.length?delete a[o][u[0]]:a[o]=K(a[o],u,r,i),a}function X(e,t,r){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return t.length&&i&&void 0===r&&!V(e,t.slice(0,-1))?e:K(e,t,r,i)}function Y(e){return N(e)}function Z(e,t){return V(e,t)}function Q(e,t,r){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],n=X(e,t,r,i);return n}function $(e,t){var r={};return t.forEach((function(t){var i=Z(e,t);r=Q(r,t,i)})),r}function J(e,t){return e&&e.some((function(e){return ie(e,t)}))}function ee(e){return"object"===S(e)&&null!==e&&Object.getPrototypeOf(e)===Object.prototype}function te(e,t){var r=Array.isArray(e)?g(e):p({},e);return t?(Object.keys(t).forEach((function(e){var i=r[e],n=t[e],a=ee(i)&&ee(n);r[e]=a?te(i,n||{}):n})),r):r}function re(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return r.reduce((function(e,t){return te(e,t)}),e)}function ie(e,t){return!(!e||!t||e.length!==t.length)&&e.every((function(e,r){return t[r]===e}))}function ne(e){var t=arguments.length<=1?void 0:arguments[1];return t&&t.target&&e in t.target?t.target[e]:t}function ae(e,t,r){var i=e.length;if(t<0||t>=i||r<0||r>=i)return e;var n=e[t],a=t-r;return a>0?[].concat(g(e.slice(0,r)),[n],g(e.slice(r,t)),g(e.slice(t+1,i))):a<0?[].concat(g(e.slice(0,t)),g(e.slice(t+1,r+1)),[n],g(e.slice(r+1,i))):e}var se="'${name}' is not a valid ${type}",oe={default:"Validation error on field '${name}'",required:"'${name}' is required",enum:"'${name}' must be one of [${enum}]",whitespace:"'${name}' cannot be empty",date:{format:"'${name}' is invalid for format date",parse:"'${name}' could not be parsed as date",invalid:"'${name}' is invalid date"},types:{string:se,method:se,array:se,object:se,number:se,date:se,boolean:se,integer:se,float:se,regexp:se,email:se,url:se,hex:se},string:{len:"'${name}' must be exactly ${len} characters",min:"'${name}' must be at least ${min} characters",max:"'${name}' cannot be longer than ${max} characters",range:"'${name}' must be between ${min} and ${max} characters"},number:{len:"'${name}' must equal ${len}",min:"'${name}' cannot be less than ${min}",max:"'${name}' cannot be greater than ${max}",range:"'${name}' must be between ${min} and ${max}"},array:{len:"'${name}' must be exactly ${len} in length",min:"'${name}' cannot be less than ${min} in length",max:"'${name}' cannot be greater than ${max} in length",range:"'${name}' must be between ${min} and ${max} in length"},pattern:{mismatch:"'${name}' does not match pattern ${pattern}"}},ue=R.a;function ce(e,t,r,i){var n=p(p({},r),{},{name:t,enum:(r.enum||[]).join(", ")}),a=function(e,t){return function(){return function(e,t){return e.replace(/\$\{\w+\}/g,(function(e){var r=e.slice(2,-1);return t[r]}))}(e,p(p({},n),t))}};return function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(t).forEach((function(n){var s=t[n];"string"===typeof s?r[n]=a(s,i):s&&"object"===S(s)?(r[n]={},e(s,r[n])):r[n]=s})),r}(re({},oe,e))}function de(e,t,r,i,n){return he.apply(this,arguments)}function he(){return(he=B(D.a.mark((function e(t,r,i,n,a){var s,u,c,d,h,f;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=p({},i),u=null,s&&"array"===s.type&&s.defaultField&&(u=s.defaultField,delete s.defaultField),c=new ue(l({},t,[s])),d=ce(n.validateMessages,t,s,a),c.messages(d),h=[],e.prev=7,e.next=10,Promise.resolve(c.validate(l({},t,r),p({},n)));case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(7),e.t0.errors?h=e.t0.errors.map((function(e,t){var r=e.message;return o.isValidElement(r)?o.cloneElement(r,{key:"error_".concat(t)}):r})):(console.error(e.t0),h=[d.default()]);case 15:if(h.length||!u){e.next=20;break}return e.next=18,Promise.all(r.map((function(e,r){return de("".concat(t,".").concat(r),e,u,n,a)})));case 18:return f=e.sent,e.abrupt("return",f.reduce((function(e,t){return[].concat(g(e),g(t))}),[]));case 20:return e.abrupt("return",h);case 21:case"end":return e.stop()}}),e,null,[[7,12]])})))).apply(this,arguments)}function le(e,t,r,i,n,a){var s,o=e.join("."),u=r.map((function(e){var t=e.validator;return t?p(p({},e),{},{validator:function(e,r,i){var n=!1,a=t(e,r,(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];Promise.resolve().then((function(){Object(I.a)(!n,"Your validator function has already return a promise. `callback` will be ignored."),n||i.apply(void 0,t)}))}));n=a&&"function"===typeof a.then&&"function"===typeof a.catch,Object(I.a)(n,"`callback` is deprecated. Please return a promise instead."),n&&a.then((function(){i()})).catch((function(e){i(e||" ")}))}}):e}));if(!0===n)s=new Promise(function(){var e=B(D.a.mark((function e(r,n){var s,c;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=0;case 1:if(!(s<u.length)){e.next=11;break}return e.next=4,de(o,t,u[s],i,a);case 4:if(!(c=e.sent).length){e.next=8;break}return n(c),e.abrupt("return");case 8:s+=1,e.next=1;break;case 11:r([]);case 12:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}());else{var c=u.map((function(e){return de(o,t,e,i,a)}));s=(n?function(e){return pe.apply(this,arguments)}(c):function(e){return fe.apply(this,arguments)}(c)).then((function(e){return e.length?Promise.reject(e):[]}))}return s.catch((function(e){return e})),s}function fe(){return(fe=B(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all(t).then((function(e){var t;return(t=[]).concat.apply(t,g(e))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pe(){return(pe=B(D.a.mark((function e(t){var r;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=0,e.abrupt("return",new Promise((function(e){t.forEach((function(i){i.then((function(i){i.length&&e(i),(r+=1)===t.length&&e([])}))}))})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ve(e,t,r,i,n,a){return"function"===typeof e?e(t,r,"source"in a?{source:a.source}:{}):i!==n}var me=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(r,e);var t=T(r);function r(e){var i;(y(this,r),(i=t.call(this,e)).state={resetCount:0},i.cancelRegisterFunc=null,i.mounted=!1,i.touched=!1,i.dirty=!1,i.validatePromise=null,i.errors=[],i.cancelRegister=function(){var e=i.props,t=e.preserve,r=e.isListField,n=e.name;i.cancelRegisterFunc&&i.cancelRegisterFunc(r,t,Y(n)),i.cancelRegisterFunc=null},i.getNamePath=function(){var e=i.props,t=e.name,r=e.fieldContext.prefixName;return void 0!==t?[].concat(g(void 0===r?[]:r),g(t)):[]},i.getRules=function(){var e=i.props,t=e.rules,r=void 0===t?[]:t,n=e.fieldContext;return r.map((function(e){return"function"===typeof e?e(n):e}))},i.refresh=function(){i.mounted&&i.setState((function(e){return{resetCount:e.resetCount+1}}))},i.onStoreChange=function(e,t,r){var n=i.props,a=n.shouldUpdate,s=n.dependencies,o=void 0===s?[]:s,u=n.onReset,c=r.store,d=i.getNamePath(),h=i.getValue(e),l=i.getValue(c),f=t&&J(t,d);switch("valueUpdate"===r.type&&"external"===r.source&&h!==l&&(i.touched=!0,i.dirty=!0,i.validatePromise=null,i.errors=[]),r.type){case"reset":if(!t||f)return i.touched=!1,i.dirty=!1,i.validatePromise=null,i.errors=[],u&&u(),void i.refresh();break;case"setField":if(f){var p=r.data;return"touched"in p&&(i.touched=p.touched),"validating"in p&&!("originRCField"in p)&&(i.validatePromise=p.validating?Promise.resolve([]):null),"errors"in p&&(i.errors=p.errors||[]),i.dirty=!0,void i.reRender()}if(a&&!d.length&&ve(a,e,c,h,l,r))return void i.reRender();break;case"dependenciesUpdate":if(o.map(Y).some((function(e){return J(r.relatedFields,e)})))return void i.reRender();break;default:if(f||(!o.length||d.length||a)&&ve(a,e,c,h,l,r))return void i.reRender()}!0===a&&i.reRender()},i.validateRules=function(e){var t=i.getNamePath(),r=i.getValue(),n=Promise.resolve().then((function(){if(!i.mounted)return[];var a=i.props,s=a.validateFirst,o=void 0!==s&&s,u=a.messageVariables,c=(e||{}).triggerName,d=i.getRules();c&&(d=d.filter((function(e){var t=e.validateTrigger;return!t||N(t).includes(c)})));var h=le(t,r,d,e,o,u);return h.catch((function(e){return e})).then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];i.validatePromise===n&&(i.validatePromise=null,i.errors=e,i.reRender())})),h}));return i.validatePromise=n,i.dirty=!0,i.errors=[],i.reRender(),n},i.isFieldValidating=function(){return!!i.validatePromise},i.isFieldTouched=function(){return i.touched},i.isFieldDirty=function(){return i.dirty},i.getErrors=function(){return i.errors},i.isListField=function(){return i.props.isListField},i.isList=function(){return i.props.isList},i.isPreserve=function(){return i.props.preserve},i.getMeta=function(){return i.prevValidating=i.isFieldValidating(),{touched:i.isFieldTouched(),validating:i.prevValidating,errors:i.errors,name:i.getNamePath()}},i.getOnlyChild=function(e){if("function"===typeof e){var t=i.getMeta();return p(p({},i.getOnlyChild(e(i.getControlled(),t,i.props.fieldContext))),{},{isFunction:!0})}var r=Object(C.a)(e);return 1===r.length&&o.isValidElement(r[0])?{child:r[0],isFunction:!1}:{child:r,isFunction:!1}},i.getValue=function(e){var t=i.props.fieldContext.getFieldsValue,r=i.getNamePath();return Z(e||t(!0),r)},i.getControlled=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=i.props,r=t.trigger,n=t.validateTrigger,a=t.getValueFromEvent,s=t.normalize,o=t.valuePropName,u=t.getValueProps,c=t.fieldContext,d=void 0!==n?n:c.validateTrigger,h=i.getNamePath(),f=c.getInternalHooks,v=c.getFieldsValue,m=f(M),g=m.dispatch,y=i.getValue(),b=u||function(e){return l({},o,e)},x=e[r],k=p(p({},e),b(y));k[r]=function(){var e;i.touched=!0,i.dirty=!0;for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];e=a?a.apply(void 0,r):ne.apply(void 0,[o].concat(r)),s&&(e=s(e,y,v(!0))),g({type:"updateValue",namePath:h,value:e}),x&&x.apply(void 0,r)};var w=N(d||[]);return w.forEach((function(e){var t=k[e];k[e]=function(){t&&t.apply(void 0,arguments);var r=i.props.rules;r&&r.length&&g({type:"validateField",namePath:h,triggerName:e})}})),k},e.fieldContext)&&(0,(0,e.fieldContext.getInternalHooks)(M).initEntityValue)(k(i));return i}return x(r,[{key:"componentDidMount",value:function(){var e=this.props,t=e.shouldUpdate,r=e.fieldContext;if(this.mounted=!0,r){var i=(0,r.getInternalHooks)(M).registerField;this.cancelRegisterFunc=i(this)}!0===t&&this.reRender()}},{key:"componentWillUnmount",value:function(){this.cancelRegister(),this.mounted=!1}},{key:"reRender",value:function(){this.mounted&&this.forceUpdate()}},{key:"render",value:function(){var e,t=this.state.resetCount,r=this.props.children,i=this.getOnlyChild(r),n=i.child;return i.isFunction?e=n:o.isValidElement(n)?e=o.cloneElement(n,this.getControlled(n.props)):(Object(I.a)(!n,"`children` of Field is not validate ReactElement."),e=n),o.createElement(o.Fragment,{key:t},e)}}]),r}(o.Component);me.contextType=E,me.defaultProps={trigger:"onChange",valuePropName:"value"};var ge=function(e){var t=e.name,r=h(e,["name"]),i=o.useContext(E),n=void 0!==t?Y(t):void 0,a="keep";return r.isListField||(a="_".concat((n||[]).join("_"))),o.createElement(me,d({key:a,name:n},r,{fieldContext:i}))},ye=function(e){var t=e.name,r=e.initialValue,i=e.children,n=e.rules,a=e.validateTrigger,s=o.useContext(E),u=o.useRef({keys:[],id:0}).current;if("function"!==typeof i)return Object(I.a)(!1,"Form.List only accepts function as children."),null;var c=Y(s.prefixName)||[],d=[].concat(g(c),g(Y(t)));return o.createElement(E.Provider,{value:p(p({},s),{},{prefixName:d})},o.createElement(ge,{name:[],shouldUpdate:function(e,t,r){return"internal"!==r.source&&e!==t},rules:n,validateTrigger:a,initialValue:r,isList:!0},(function(e,t){var r=e.value,n=void 0===r?[]:r,a=e.onChange,o=s.getFieldValue,c=function(){return o(d||[])||[]},h={add:function(e,t){var r=c();t>=0&&t<=r.length?(u.keys=[].concat(g(u.keys.slice(0,t)),[u.id],g(u.keys.slice(t))),a([].concat(g(r.slice(0,t)),[e],g(r.slice(t))))):(u.keys=[].concat(g(u.keys),[u.id]),a([].concat(g(r),[e]))),u.id+=1},remove:function(e){var t=c(),r=new Set(Array.isArray(e)?e:[e]);r.size<=0||(u.keys=u.keys.filter((function(e,t){return!r.has(t)})),a(t.filter((function(e,t){return!r.has(t)}))))},move:function(e,t){if(e!==t){var r=c();e<0||e>=r.length||t<0||t>=r.length||(u.keys=ae(u.keys,e,t),a(ae(r,e,t)))}}},l=n||[];return Array.isArray(l)||(l=[]),i(l.map((function(e,t){var r=u.keys[t];return void 0===r&&(u.keys[t]=u.id,r=u.keys[t],u.id+=1),{name:t,key:r,isListField:!0}})),h,t)})))};function be(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var r=[],i=!0,n=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(i=(s=o.next()).done)&&(r.push(s.value),!t||r.length!==t);i=!0);}catch(u){n=!0,a=u}finally{try{i||null==o.return||o.return()}finally{if(n)throw a}}return r}}(e,t)||m(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var xe="__@field_split__";function ke(e){return e.map((function(e){return"".concat(S(e),":").concat(e)})).join(xe)}var we=function(){function e(){y(this,e),this.kvs=new Map}return x(e,[{key:"set",value:function(e,t){this.kvs.set(ke(e),t)}},{key:"get",value:function(e){return this.kvs.get(ke(e))}},{key:"update",value:function(e,t){var r=t(this.get(e));r?this.set(e,r):this.delete(e)}},{key:"delete",value:function(e){this.kvs.delete(ke(e))}},{key:"map",value:function(e){return g(this.kvs.entries()).map((function(t){var r=be(t,2),i=r[0],n=r[1],a=i.split(xe);return e({key:a.map((function(e){var t=be(e.match(/^([^:]*):(.*)$/),3),r=t[1],i=t[2];return"number"===r?Number(i):i})),value:n})}))}},{key:"toJSON",value:function(){var e={};return this.map((function(t){var r=t.key,i=t.value;return e[r.join(".")]=i,null})),e}}]),e}(),_e=function e(t){var r=this;y(this,e),this.formHooked=!1,this.subscribable=!0,this.store={},this.fieldEntities=[],this.initialValues={},this.callbacks={},this.validateMessages=null,this.preserve=null,this.lastValidatePromise=null,this.getForm=function(){return{getFieldValue:r.getFieldValue,getFieldsValue:r.getFieldsValue,getFieldError:r.getFieldError,getFieldsError:r.getFieldsError,isFieldsTouched:r.isFieldsTouched,isFieldTouched:r.isFieldTouched,isFieldValidating:r.isFieldValidating,isFieldsValidating:r.isFieldsValidating,resetFields:r.resetFields,setFields:r.setFields,setFieldsValue:r.setFieldsValue,validateFields:r.validateFields,submit:r.submit,getInternalHooks:r.getInternalHooks}},this.getInternalHooks=function(e){return e===M?(r.formHooked=!0,{dispatch:r.dispatch,initEntityValue:r.initEntityValue,registerField:r.registerField,useSubscribe:r.useSubscribe,setInitialValues:r.setInitialValues,setCallbacks:r.setCallbacks,setValidateMessages:r.setValidateMessages,getFields:r.getFields,setPreserve:r.setPreserve}):(Object(I.a)(!1,"`getInternalHooks` is internal usage. Should not call directly."),null)},this.useSubscribe=function(e){r.subscribable=e},this.setInitialValues=function(e,t){r.initialValues=e||{},t&&(r.store=re({},e,r.store))},this.getInitialValue=function(e){return Z(r.initialValues,e)},this.setCallbacks=function(e){r.callbacks=e},this.setValidateMessages=function(e){r.validateMessages=e},this.setPreserve=function(e){r.preserve=e},this.timeoutId=null,this.warningUnhooked=function(){0},this.getFieldEntities=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e?r.fieldEntities.filter((function(e){return e.getNamePath().length})):r.fieldEntities},this.getFieldsMap=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new we;return r.getFieldEntities(e).forEach((function(e){var r=e.getNamePath();t.set(r,e)})),t},this.getFieldEntitiesForNamePathList=function(e){if(!e)return r.getFieldEntities(!0);var t=r.getFieldsMap(!0);return e.map((function(e){var r=Y(e);return t.get(r)||{INVALIDATE_NAME_PATH:Y(e)}}))},this.getFieldsValue=function(e,t){if(r.warningUnhooked(),!0===e&&!t)return r.store;var i=r.getFieldEntitiesForNamePathList(Array.isArray(e)?e:null),n=[];return i.forEach((function(r){var i,a="INVALIDATE_NAME_PATH"in r?r.INVALIDATE_NAME_PATH:r.getNamePath();if(e||!(null===(i=r.isListField)||void 0===i?void 0:i.call(r)))if(t){var s="getMeta"in r?r.getMeta():null;t(s)&&n.push(a)}else n.push(a)})),$(r.store,n.map(Y))},this.getFieldValue=function(e){r.warningUnhooked();var t=Y(e);return Z(r.store,t)},this.getFieldsError=function(e){return r.warningUnhooked(),r.getFieldEntitiesForNamePathList(e).map((function(t,r){return t&&!("INVALIDATE_NAME_PATH"in t)?{name:t.getNamePath(),errors:t.getErrors()}:{name:Y(e[r]),errors:[]}}))},this.getFieldError=function(e){r.warningUnhooked();var t=Y(e);return r.getFieldsError([t])[0].errors},this.isFieldsTouched=function(){r.warningUnhooked();for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];var n,a=t[0],s=t[1],o=!1;0===t.length?n=null:1===t.length?Array.isArray(a)?(n=a.map(Y),o=!1):(n=null,o=a):(n=a.map(Y),o=s);var u=r.getFieldEntities(!0),c=function(e){return e.isFieldTouched()};if(!n)return o?u.every(c):u.some(c);var d=new we;n.forEach((function(e){d.set(e,[])})),u.forEach((function(e){var t=e.getNamePath();n.forEach((function(r){r.every((function(e,r){return t[r]===e}))&&d.update(r,(function(t){return[].concat(g(t),[e])}))}))}));var h=function(e){return e.some(c)},l=d.map((function(e){return e.value}));return o?l.every(h):l.some(h)},this.isFieldTouched=function(e){return r.warningUnhooked(),r.isFieldsTouched([e])},this.isFieldsValidating=function(e){r.warningUnhooked();var t=r.getFieldEntities();if(!e)return t.some((function(e){return e.isFieldValidating()}));var i=e.map(Y);return t.some((function(e){var t=e.getNamePath();return J(i,t)&&e.isFieldValidating()}))},this.isFieldValidating=function(e){return r.warningUnhooked(),r.isFieldsValidating([e])},this.resetWithFieldInitialValue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new we,i=r.getFieldEntities(!0);i.forEach((function(e){var r=e.props.initialValue,i=e.getNamePath();if(void 0!==r){var n=t.get(i)||new Set;n.add({entity:e,value:r}),t.set(i,n)}}));var n,a=function(i){i.forEach((function(i){if(void 0!==i.props.initialValue){var n=i.getNamePath();if(void 0!==r.getInitialValue(n))Object(I.a)(!1,"Form already set 'initialValues' with path '".concat(n.join("."),"'. Field can not overwrite it."));else{var a=t.get(n);if(a&&a.size>1)Object(I.a)(!1,"Multiple Field with path '".concat(n.join("."),"' set 'initialValue'. Can not decide which one to pick."));else if(a){var s=r.getFieldValue(n);e.skipExist&&void 0!==s||(r.store=Q(r.store,n,g(a)[0].value))}}}}))};e.entities?n=e.entities:e.namePathList?(n=[],e.namePathList.forEach((function(e){var r,i=t.get(e);i&&(r=n).push.apply(r,g(g(i).map((function(e){return e.entity}))))}))):n=i,a(n)},this.resetFields=function(e){r.warningUnhooked();var t=r.store;if(!e)return r.store=re({},r.initialValues),r.resetWithFieldInitialValue(),void r.notifyObservers(t,null,{type:"reset"});var i=e.map(Y);i.forEach((function(e){var t=r.getInitialValue(e);r.store=Q(r.store,e,t)})),r.resetWithFieldInitialValue({namePathList:i}),r.notifyObservers(t,i,{type:"reset"})},this.setFields=function(e){r.warningUnhooked();var t=r.store;e.forEach((function(e){var i=e.name,n=(e.errors,h(e,["name","errors"])),a=Y(i);"value"in n&&(r.store=Q(r.store,a,n.value)),r.notifyObservers(t,[a],{type:"setField",data:e})}))},this.getFields=function(){return r.getFieldEntities(!0).map((function(e){var t=e.getNamePath(),i=p(p({},e.getMeta()),{},{name:t,value:r.getFieldValue(t)});return Object.defineProperty(i,"originRCField",{value:!0}),i}))},this.initEntityValue=function(e){var t=e.props.initialValue;if(void 0!==t){var i=e.getNamePath();void 0===Z(r.store,i)&&(r.store=Q(r.store,i,t))}},this.registerField=function(e){if(r.fieldEntities.push(e),void 0!==e.props.initialValue){var t=r.store;r.resetWithFieldInitialValue({entities:[e],skipExist:!0}),r.notifyObservers(t,[e.getNamePath()],{type:"valueUpdate",source:"internal"})}return function(t,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];r.fieldEntities=r.fieldEntities.filter((function(t){return t!==e}));var a=void 0!==i?i:r.preserve;if(!1===a&&(!t||n.length>1)){var s=e.getNamePath(),o=t?void 0:Z(r.initialValues,s);s.length&&r.getFieldValue(s)!==o&&r.fieldEntities.every((function(e){return!ie(e.getNamePath(),s)}))&&(r.store=Q(r.store,s,o,!0))}}},this.dispatch=function(e){switch(e.type){case"updateValue":var t=e.namePath,i=e.value;r.updateValue(t,i);break;case"validateField":var n=e.namePath,a=e.triggerName;r.validateFields([n],{triggerName:a})}},this.notifyObservers=function(e,t,i){if(r.subscribable){var n=p(p({},i),{},{store:r.getFieldsValue(!0)});r.getFieldEntities().forEach((function(r){(0,r.onStoreChange)(e,t,n)}))}else r.forceRootUpdate()},this.updateValue=function(e,t){var i=Y(e),n=r.store;r.store=Q(r.store,i,t),r.notifyObservers(n,[i],{type:"valueUpdate",source:"internal"});var a=r.getDependencyChildrenFields(i);a.length&&r.validateFields(a),r.notifyObservers(n,a,{type:"dependenciesUpdate",relatedFields:[i].concat(g(a))});var s=r.callbacks.onValuesChange;s&&s($(r.store,[i]),r.getFieldsValue());r.triggerOnFieldsChange([i].concat(g(a)))},this.setFieldsValue=function(e){r.warningUnhooked();var t=r.store;e&&(r.store=re(r.store,e)),r.notifyObservers(t,null,{type:"valueUpdate",source:"external"})},this.getDependencyChildrenFields=function(e){var t=new Set,i=[],n=new we;r.getFieldEntities().forEach((function(e){(e.props.dependencies||[]).forEach((function(t){var r=Y(t);n.update(r,(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Set;return t.add(e),t}))}))}));return function e(r){(n.get(r)||new Set).forEach((function(r){if(!t.has(r)){t.add(r);var n=r.getNamePath();r.isFieldDirty()&&n.length&&(i.push(n),e(n))}}))}(e),i},this.triggerOnFieldsChange=function(e,t){var i=r.callbacks.onFieldsChange;if(i){var n=r.getFields();if(t){var a=new we;t.forEach((function(e){var t=e.name,r=e.errors;a.set(t,r)})),n.forEach((function(e){e.errors=a.get(e.name)||e.errors}))}i(n.filter((function(t){var r=t.name;return J(e,r)})),n)}},this.validateFields=function(e,t){r.warningUnhooked();var i=!!e,n=i?e.map(Y):[],a=[];r.getFieldEntities(!0).forEach((function(s){if(i||n.push(s.getNamePath()),(null===t||void 0===t?void 0:t.recursive)&&i){var o=s.getNamePath();o.every((function(t,r){return e[r]===t||void 0===e[r]}))&&n.push(o)}if(s.props.rules&&s.props.rules.length){var u=s.getNamePath();if(!i||J(n,u)){var c=s.validateRules(p({validateMessages:p(p({},oe),r.validateMessages)},t));a.push(c.then((function(){return{name:u,errors:[]}})).catch((function(e){return Promise.reject({name:u,errors:e})})))}}}));var s=function(e){var t=!1,r=e.length,i=[];return e.length?new Promise((function(n,a){e.forEach((function(e,s){e.catch((function(e){return t=!0,e})).then((function(e){r-=1,i[s]=e,r>0||(t&&a(i),n(i))}))}))})):Promise.resolve([])}(a);r.lastValidatePromise=s,s.catch((function(e){return e})).then((function(e){var t=e.map((function(e){return e.name}));r.notifyObservers(r.store,t,{type:"validateFinish"}),r.triggerOnFieldsChange(t,e)}));var o=s.then((function(){return r.lastValidatePromise===s?Promise.resolve(r.getFieldsValue(n)):Promise.reject([])})).catch((function(e){var t=e.filter((function(e){return e&&e.errors.length}));return Promise.reject({values:r.getFieldsValue(n),errorFields:t,outOfDate:r.lastValidatePromise!==s})}));return o.catch((function(e){return e})),o},this.submit=function(){r.warningUnhooked(),r.validateFields().then((function(e){var t=r.callbacks.onFinish;if(t)try{t(e)}catch(i){console.error(i)}})).catch((function(e){var t=r.callbacks.onFinishFailed;t&&t(e)}))},this.forceRootUpdate=t};var Se=function(e){var t=o.useRef(),r=be(o.useState({}),2)[1];if(!t.current)if(e)t.current=e;else{var i=new _e((function(){r({})}));t.current=i.getForm()}return[t.current]},Oe=o.createContext({triggerFormChange:function(){},triggerFormFinish:function(){},registerForm:function(){},unregisterForm:function(){}}),Te=function(e){var t=e.validateMessages,r=e.onFormChange,i=e.onFormFinish,n=e.children,a=o.useContext(Oe),s=o.useRef({});return o.createElement(Oe.Provider,{value:p(p({},a),{},{validateMessages:p(p({},a.validateMessages),t),triggerFormChange:function(e,t){r&&r(e,{changedFields:t,forms:s.current}),a.triggerFormChange(e,t)},triggerFormFinish:function(e,t){i&&i(e,{values:t,forms:s.current}),a.triggerFormFinish(e,t)},registerForm:function(e,t){e&&(s.current=p(p({},s.current),{},l({},e,t))),a.registerForm(e,t)},unregisterForm:function(e){var t=p({},s.current);delete t[e],s.current=t,a.unregisterForm(e)}})},n)},Ce=Oe,Ie=function(e,t){var r=e.name,i=e.initialValues,n=e.fields,a=e.form,s=e.preserve,u=e.children,c=e.component,l=void 0===c?"form":c,f=e.validateMessages,v=e.validateTrigger,m=void 0===v?"onChange":v,y=e.onValuesChange,b=e.onFieldsChange,x=e.onFinish,k=e.onFinishFailed,w=h(e,["name","initialValues","fields","form","preserve","children","component","validateMessages","validateTrigger","onValuesChange","onFieldsChange","onFinish","onFinishFailed"]),_=o.useContext(Ce),O=be(Se(a),1)[0],T=O.getInternalHooks(M),C=T.useSubscribe,I=T.setInitialValues,A=T.setCallbacks,N=T.setValidateMessages,P=T.setPreserve;o.useImperativeHandle(t,(function(){return O})),o.useEffect((function(){return _.registerForm(r,O),function(){_.unregisterForm(r)}}),[_,O,r]),N(p(p({},_.validateMessages),f)),A({onValuesChange:y,onFieldsChange:function(e){if(_.triggerFormChange(r,e),b){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];b.apply(void 0,[e].concat(i))}},onFinish:function(e){_.triggerFormFinish(r,e),x&&x(e)},onFinishFailed:k}),P(s);var D=o.useRef(null);I(i,!D.current),D.current||(D.current=!0);var L=u,B="function"===typeof u;B&&(L=u(O.getFieldsValue(!0),O));C(!B);var R=o.useRef();o.useEffect((function(){(function(e,t){if(e===t)return!0;if(!e&&t||e&&!t)return!1;if(!e||!t||"object"!==S(e)||"object"!==S(t))return!1;var r=Object.keys(e),i=Object.keys(t),n=new Set([].concat(g(r),g(i)));return g(n).every((function(r){var i=e[r],n=t[r];return"function"===typeof i&&"function"===typeof n||i===n}))})(R.current||[],n||[])||O.setFields(n||[]),R.current=n}),[n,O]);var V=o.useMemo((function(){return p(p({},O),{},{validateTrigger:m})}),[O,m]),G=o.createElement(E.Provider,{value:V},L);return!1===l?G:o.createElement(l,d({},w,{onSubmit:function(e){e.preventDefault(),e.stopPropagation(),O.submit()},onReset:function(e){var t;e.preventDefault(),O.resetFields(),null===(t=w.onReset)||void 0===t||t.call(w,e)}}),G)},Me=o.forwardRef(Ie);Me.FormProvider=Te,Me.Field=ge,Me.List=ye,Me.useForm=Se;var Ae=Me,Ee=r(466),Ne=r(33),Pe=o.createContext({labelAlign:"right",vertical:!1,itemRef:function(){}}),De=o.createContext({updateItemErrors:function(){}}),Le=o.createContext({prefixCls:""});function Be(e){return"object"==typeof e&&null!=e&&1===e.nodeType}function Re(e,t){return(!t||"hidden"!==e)&&"visible"!==e&&"clip"!==e}function Ve(e,t){if(e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth){var r=getComputedStyle(e,null);return Re(r.overflowY,t)||Re(r.overflowX,t)||function(e){var t=function(e){if(!e.ownerDocument||!e.ownerDocument.defaultView)return null;try{return e.ownerDocument.defaultView.frameElement}catch(e){return null}}(e);return!!t&&(t.clientHeight<e.scrollHeight||t.clientWidth<e.scrollWidth)}(e)}return!1}function Ge(e,t,r,i,n,a,s,o){return a<e&&s>t||a>e&&s<t?0:a<=e&&o<=r||s>=t&&o>=r?a-e-i:s>t&&o<r||a<e&&o>r?s-t+n:0}var Fe=function(e,t){var r=window,i=t.scrollMode,n=t.block,a=t.inline,s=t.boundary,o=t.skipOverflowHiddenElements,u="function"==typeof s?s:function(e){return e!==s};if(!Be(e))throw new TypeError("Invalid target");for(var c=document.scrollingElement||document.documentElement,d=[],h=e;Be(h)&&u(h);){if((h=h.parentElement)===c){d.push(h);break}null!=h&&h===document.body&&Ve(h)&&!Ve(document.documentElement)||null!=h&&Ve(h,o)&&d.push(h)}for(var l=r.visualViewport?r.visualViewport.width:innerWidth,f=r.visualViewport?r.visualViewport.height:innerHeight,p=window.scrollX||pageXOffset,v=window.scrollY||pageYOffset,m=e.getBoundingClientRect(),g=m.height,y=m.width,b=m.top,x=m.right,k=m.bottom,w=m.left,_="start"===n||"nearest"===n?b:"end"===n?k:b+g/2,S="center"===a?w+y/2:"end"===a?x:w,O=[],T=0;T<d.length;T++){var C=d[T],I=C.getBoundingClientRect(),M=I.height,A=I.width,E=I.top,N=I.right,P=I.bottom,D=I.left;if("if-needed"===i&&b>=0&&w>=0&&k<=f&&x<=l&&b>=E&&k<=P&&w>=D&&x<=N)return O;var L=getComputedStyle(C),B=parseInt(L.borderLeftWidth,10),R=parseInt(L.borderTopWidth,10),V=parseInt(L.borderRightWidth,10),G=parseInt(L.borderBottomWidth,10),F=0,q=0,j="offsetWidth"in C?C.offsetWidth-C.clientWidth-B-V:0,z="offsetHeight"in C?C.offsetHeight-C.clientHeight-R-G:0;if(c===C)F="start"===n?_:"end"===n?_-f:"nearest"===n?Ge(v,v+f,f,R,G,v+_,v+_+g,g):_-f/2,q="start"===a?S:"center"===a?S-l/2:"end"===a?S-l:Ge(p,p+l,l,B,V,p+S,p+S+y,y),F=Math.max(0,F+v),q=Math.max(0,q+p);else{F="start"===n?_-E-R:"end"===n?_-P+G+z:"nearest"===n?Ge(E,P,M,R,G+z,_,_+g,g):_-(E+M/2)+z/2,q="start"===a?S-D-B:"center"===a?S-(D+A/2)+j/2:"end"===a?S-N+V+j:Ge(D,N,A,B,V+j,S,S+y,y);var H=C.scrollLeft,U=C.scrollTop;_+=U-(F=Math.max(0,Math.min(U+F,C.scrollHeight-M+z))),S+=H-(q=Math.max(0,Math.min(H+q,C.scrollWidth-A+j)))}O.push({el:C,top:F,left:q})}return O};function qe(e){return e===Object(e)&&0!==Object.keys(e).length}var je=function(e,t){var r=!e.ownerDocument.documentElement.contains(e);if(qe(t)&&"function"===typeof t.behavior)return t.behavior(r?[]:Fe(e,t));if(!r){var i=function(e){return!1===e?{block:"end",inline:"nearest"}:qe(e)?e:{block:"start",inline:"nearest"}}(t);return function(e,t){void 0===t&&(t="auto");var r="scrollBehavior"in document.body.style;e.forEach((function(e){var i=e.el,n=e.top,a=e.left;i.scroll&&r?i.scroll({top:n,left:a,behavior:t}):(i.scrollTop=n,i.scrollLeft=a)}))}(Fe(e,i),i.behavior)}};function ze(e){return void 0===e||!1===e?[]:Array.isArray(e)?e:[e]}function He(e,t){if(e.length){var r=e.join("_");return t?"".concat(t,"_").concat(r):r}}function Ue(e){return ze(e).join("_")}function We(e){var t=Se(),r=Object(a.a)(t,1)[0],n=o.useRef({}),s=o.useMemo((function(){return e||Object(i.a)(Object(i.a)({},r),{__INTERNAL__:{itemRef:function(e){return function(t){var r=Ue(e);t?n.current[r]=t:delete n.current[r]}}},scrollToField:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=ze(e),n=He(r,s.__INTERNAL__.name),a=n?document.getElementById(n):null;a&&je(a,Object(i.a)({scrollMode:"if-needed",block:"nearest"},t))},getFieldInstance:function(e){var t=Ue(e);return n.current[t]}})}),[e,r]);return[s]}var Ke,Xe=r(39),Ye=function(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var n=0;for(i=Object.getOwnPropertySymbols(e);n<i.length;n++)t.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(e,i[n])&&(r[i[n]]=e[i[n]])}return r},Ze=function(e,t){var r,u=o.useContext(Xe.b),d=o.useContext(Ee.b),h=d.getPrefixCls,l=d.direction,f=d.form,p=e.prefixCls,v=e.className,m=void 0===v?"":v,g=e.size,y=void 0===g?u:g,b=e.form,x=e.colon,k=e.labelAlign,w=e.labelCol,_=e.wrapperCol,S=e.hideRequiredMark,O=e.layout,T=void 0===O?"horizontal":O,C=e.scrollToFirstError,I=e.requiredMark,M=e.onFinishFailed,A=e.name,E=Ye(e,["prefixCls","className","size","form","colon","labelAlign","labelCol","wrapperCol","hideRequiredMark","layout","scrollToFirstError","requiredMark","onFinishFailed","name"]),N=Object(o.useMemo)((function(){return void 0!==I?I:f&&void 0!==f.requiredMark?f.requiredMark:!S}),[S,I,f]),P=h("form",p),D=c()(P,(r={},Object(s.a)(r,"".concat(P,"-").concat(T),!0),Object(s.a)(r,"".concat(P,"-hide-required-mark"),!1===N),Object(s.a)(r,"".concat(P,"-rtl"),"rtl"===l),Object(s.a)(r,"".concat(P,"-").concat(y),y),r),m),L=We(b),B=Object(a.a)(L,1)[0],R=B.__INTERNAL__;R.name=A;var V=Object(o.useMemo)((function(){return{name:A,labelAlign:k,labelCol:w,wrapperCol:_,vertical:"vertical"===T,colon:x,requiredMark:N,itemRef:R.itemRef}}),[A,k,w,_,T,x,N]);o.useImperativeHandle(t,(function(){return B}));return o.createElement(Xe.a,{size:y},o.createElement(Pe.Provider,{value:V},o.createElement(Ae,Object(i.a)({id:A},E,{name:A,onFinishFailed:function(e){null===M||void 0===M||M(e);var t={block:"nearest"};C&&e.errorFields.length&&("object"===Object(n.a)(C)&&(t=C),B.scrollToField(e.errorFields[0].name,t))},form:B,className:D}))))},Qe=o.forwardRef(Ze),$e=r(40),Je=r(183),et=r.n(Je),tt=r(26),rt=Object(o.createContext)({}),it=r(37),nt=["xxl","xl","lg","md","sm","xs"],at={xs:"(max-width: 575px)",sm:"(min-width: 576px)",md:"(min-width: 768px)",lg:"(min-width: 992px)",xl:"(min-width: 1200px)",xxl:"(min-width: 1600px)"},st=new Map,ot=-1,ut={},ct={matchHandlers:{},dispatch:function(e){return ut=e,st.forEach((function(e){return e(ut)})),st.size>=1},subscribe:function(e){return st.size||this.register(),ot+=1,st.set(ot,e),e(ut),ot},unsubscribe:function(e){st.delete(e),st.size||this.unregister()},unregister:function(){var e=this;Object.keys(at).forEach((function(t){var r=at[t],i=e.matchHandlers[r];null===i||void 0===i||i.mql.removeListener(null===i||void 0===i?void 0:i.listener)})),st.clear()},register:function(){var e=this;Object.keys(at).forEach((function(t){var r=at[t],n=function(r){var n=r.matches;e.dispatch(Object(i.a)(Object(i.a)({},ut),Object(s.a)({},t,n)))},a=window.matchMedia(r);a.addListener(n),e.matchHandlers[r]={mql:a,listener:n},n(a)}))}},dt=r(49),ht=function(){return Object(dt.a)()&&window.document.documentElement},lt=function(){var e=o.useState(!1),t=Object(a.a)(e,2),r=t[0],i=t[1];return o.useEffect((function(){i(function(){if(!ht())return!1;if(void 0!==Ke)return Ke;var e=document.createElement("div");return e.style.display="flex",e.style.flexDirection="column",e.style.rowGap="1px",e.appendChild(document.createElement("div")),e.appendChild(document.createElement("div")),document.body.appendChild(e),Ke=1===e.scrollHeight,document.body.removeChild(e),Ke}())}),[]),r},ft=function(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var n=0;for(i=Object.getOwnPropertySymbols(e);n<i.length;n++)t.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(e,i[n])&&(r[i[n]]=e[i[n]])}return r},pt=(Object(it.a)("top","middle","bottom","stretch"),Object(it.a)("start","end","center","space-around","space-between"),o.forwardRef((function(e,t){var r,u=e.prefixCls,d=e.justify,h=e.align,l=e.className,f=e.style,p=e.children,v=e.gutter,m=void 0===v?0:v,g=e.wrap,y=ft(e,["prefixCls","justify","align","className","style","children","gutter","wrap"]),b=o.useContext(Ee.b),x=b.getPrefixCls,k=b.direction,w=o.useState({xs:!0,sm:!0,md:!0,lg:!0,xl:!0,xxl:!0}),_=Object(a.a)(w,2),S=_[0],O=_[1],T=lt(),C=o.useRef(m);o.useEffect((function(){var e=ct.subscribe((function(e){var t=C.current||0;(!Array.isArray(t)&&"object"===Object(n.a)(t)||Array.isArray(t)&&("object"===Object(n.a)(t[0])||"object"===Object(n.a)(t[1])))&&O(e)}));return function(){return ct.unsubscribe(e)}}),[]);var I=x("row",u),M=function(){var e=[0,0];return(Array.isArray(m)?m:[m,0]).forEach((function(t,r){if("object"===Object(n.a)(t))for(var i=0;i<nt.length;i++){var a=nt[i];if(S[a]&&void 0!==t[a]){e[r]=t[a];break}}else e[r]=t||0})),e}(),A=c()(I,(r={},Object(s.a)(r,"".concat(I,"-no-wrap"),!1===g),Object(s.a)(r,"".concat(I,"-").concat(d),d),Object(s.a)(r,"".concat(I,"-").concat(h),h),Object(s.a)(r,"".concat(I,"-rtl"),"rtl"===k),r),l),E={},N=M[0]>0?M[0]/-2:void 0,P=M[1]>0?M[1]/-2:void 0;if(N&&(E.marginLeft=N,E.marginRight=N),T){var D=Object(a.a)(M,2);E.rowGap=D[1]}else P&&(E.marginTop=P,E.marginBottom=P);var L=o.useMemo((function(){return{gutter:M,wrap:g,supportFlexGap:T}}),[M,g,T]);return o.createElement(rt.Provider,{value:L},o.createElement("div",Object(i.a)({},y,{className:A,style:Object(i.a)(Object(i.a)({},E),f),ref:t}),p))})));pt.displayName="Row";var vt=pt,mt=r(30),gt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M623.6 316.7C593.6 290.4 554 276 512 276s-81.6 14.5-111.6 40.7C369.2 344 352 380.7 352 420v7.6c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V420c0-44.1 43.1-80 96-80s96 35.9 96 80c0 31.1-22 59.6-56.1 72.7-21.2 8.1-39.2 22.3-52.1 40.9-13.1 19-19.9 41.8-19.9 64.9V620c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-22.7a48.3 48.3 0 0130.9-44.8c59-22.7 97.1-74.7 97.1-132.5.1-39.3-17.1-76-48.3-103.3zM472 732a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"question-circle",theme:"outlined"},yt=r(25),bt=function(e,t){return o.createElement(yt.a,Object.assign({},e,{ref:t,icon:gt}))};bt.displayName="QuestionCircleOutlined";var xt=o.forwardRef(bt),kt=function(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var n=0;for(i=Object.getOwnPropertySymbols(e);n<i.length;n++)t.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(e,i[n])&&(r[i[n]]=e[i[n]])}return r};var wt=["xs","sm","md","lg","xl","xxl"],_t=o.forwardRef((function(e,t){var r,a=o.useContext(Ee.b),u=a.getPrefixCls,d=a.direction,h=o.useContext(rt),l=h.gutter,f=h.wrap,p=h.supportFlexGap,v=e.prefixCls,m=e.span,g=e.order,y=e.offset,b=e.push,x=e.pull,k=e.className,w=e.children,_=e.flex,S=e.style,O=kt(e,["prefixCls","span","order","offset","push","pull","className","children","flex","style"]),T=u("col",v),C={};wt.forEach((function(t){var r,a={},o=e[t];"number"===typeof o?a.span=o:"object"===Object(n.a)(o)&&(a=o||{}),delete O[t],C=Object(i.a)(Object(i.a)({},C),(r={},Object(s.a)(r,"".concat(T,"-").concat(t,"-").concat(a.span),void 0!==a.span),Object(s.a)(r,"".concat(T,"-").concat(t,"-order-").concat(a.order),a.order||0===a.order),Object(s.a)(r,"".concat(T,"-").concat(t,"-offset-").concat(a.offset),a.offset||0===a.offset),Object(s.a)(r,"".concat(T,"-").concat(t,"-push-").concat(a.push),a.push||0===a.push),Object(s.a)(r,"".concat(T,"-").concat(t,"-pull-").concat(a.pull),a.pull||0===a.pull),Object(s.a)(r,"".concat(T,"-rtl"),"rtl"===d),r))}));var I=c()(T,(r={},Object(s.a)(r,"".concat(T,"-").concat(m),void 0!==m),Object(s.a)(r,"".concat(T,"-order-").concat(g),g),Object(s.a)(r,"".concat(T,"-offset-").concat(y),y),Object(s.a)(r,"".concat(T,"-push-").concat(b),b),Object(s.a)(r,"".concat(T,"-pull-").concat(x),x),r),k,C),M={};if(l&&l[0]>0){var A=l[0]/2;M.paddingLeft=A,M.paddingRight=A}if(l&&l[1]>0&&!p){var E=l[1]/2;M.paddingTop=E,M.paddingBottom=E}return _&&(M.flex=function(e){return"number"===typeof e?"".concat(e," ").concat(e," auto"):/^\d+(\.\d+)?(px|em|rem|%)$/.test(e)?"0 0 ".concat(e):e}(_),"auto"!==_||!1!==f||M.minWidth||(M.minWidth=0)),o.createElement("div",Object(i.a)({},O,{style:Object(i.a)(Object(i.a)({},M),S),className:I,ref:t}),w)}));_t.displayName="Col";var St=_t,Ot=r(113),Tt=r(112);function Ct(){return(Ct=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}function It(e){return(It="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Mt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function At(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function Et(e,t){if(null==e)return{};var r,i,n=function(e,t){if(null==e)return{};var r,i,n={},a=Object.keys(e);for(i=0;i<a.length;i++)r=a[i],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var Nt=r(110),Pt={adjustX:1,adjustY:1},Dt=[0,0],Lt={left:{points:["cr","cl"],overflow:Pt,offset:[-4,0],targetOffset:Dt},right:{points:["cl","cr"],overflow:Pt,offset:[4,0],targetOffset:Dt},top:{points:["bc","tc"],overflow:Pt,offset:[0,-4],targetOffset:Dt},bottom:{points:["tc","bc"],overflow:Pt,offset:[0,4],targetOffset:Dt},topLeft:{points:["bl","tl"],overflow:Pt,offset:[0,-4],targetOffset:Dt},leftTop:{points:["tr","tl"],overflow:Pt,offset:[-4,0],targetOffset:Dt},topRight:{points:["br","tr"],overflow:Pt,offset:[0,-4],targetOffset:Dt},rightTop:{points:["tl","tr"],overflow:Pt,offset:[4,0],targetOffset:Dt},bottomRight:{points:["tr","br"],overflow:Pt,offset:[0,4],targetOffset:Dt},rightBottom:{points:["bl","br"],overflow:Pt,offset:[4,0],targetOffset:Dt},bottomLeft:{points:["tl","bl"],overflow:Pt,offset:[0,4],targetOffset:Dt},leftBottom:{points:["br","bl"],overflow:Pt,offset:[-4,0],targetOffset:Dt}},Bt=function(e){var t=e.overlay,r=e.prefixCls,i=e.id,n=e.overlayInnerStyle;return o.createElement("div",{className:"".concat(r,"-inner"),id:i,role:"tooltip",style:n},"function"===typeof t?t():t)},Rt=function(e,t){var r=e.overlayClassName,i=e.trigger,n=void 0===i?["hover"]:i,a=e.mouseEnterDelay,s=void 0===a?0:a,u=e.mouseLeaveDelay,c=void 0===u?.1:u,d=e.overlayStyle,h=e.prefixCls,l=void 0===h?"rc-tooltip":h,f=e.children,p=e.onVisibleChange,v=e.afterVisibleChange,m=e.transitionName,g=e.animation,y=e.motion,b=e.placement,x=void 0===b?"right":b,k=e.align,w=void 0===k?{}:k,_=e.destroyTooltipOnHide,S=void 0!==_&&_,O=e.defaultVisible,T=e.getTooltipContainer,C=e.overlayInnerStyle,I=Et(e,["overlayClassName","trigger","mouseEnterDelay","mouseLeaveDelay","overlayStyle","prefixCls","children","onVisibleChange","afterVisibleChange","transitionName","animation","motion","placement","align","destroyTooltipOnHide","defaultVisible","getTooltipContainer","overlayInnerStyle"]),M=Object(o.useRef)(null);Object(o.useImperativeHandle)(t,(function(){return M.current}));var A=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?At(Object(r),!0).forEach((function(t){Mt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):At(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},I);"visible"in e&&(A.popupVisible=e.visible);var E=!1,N=!1;if("boolean"===typeof S)E=S;else if(S&&"object"===It(S)){var P=S.keepParent;E=!0===P,N=!1===P}return o.createElement(Nt.a,Ct({popupClassName:r,prefixCls:l,popup:function(){var t=e.arrowContent,r=void 0===t?null:t,i=e.overlay,n=e.id;return[o.createElement("div",{className:"".concat(l,"-arrow"),key:"arrow"},r),o.createElement(Bt,{key:"content",prefixCls:l,id:n,overlay:i,overlayInnerStyle:C})]},action:n,builtinPlacements:Lt,popupPlacement:x,ref:M,popupAlign:w,getPopupContainer:T,onPopupVisibleChange:p,afterPopupVisibleChange:v,popupTransitionName:m,popupAnimation:g,popupMotion:y,defaultPopupVisible:O,destroyPopupOnHide:E,autoDestroy:N,mouseLeaveDelay:c,popupStyle:d,mouseEnterDelay:s},A),f)},Vt=Object(o.forwardRef)(Rt),Gt=r(65),Ft={adjustX:1,adjustY:1},qt={adjustX:0,adjustY:0},jt=[0,0];function zt(e){return"boolean"===typeof e?e?Ft:qt:Object(i.a)(Object(i.a)({},qt),e)}var Ht=r(28),Ut=(Object(it.a)("success","processing","error","default","warning"),Object(it.a)("pink","red","yellow","orange","cyan","green","blue","purple","geekblue","magenta","volcano","gold","lime")),Wt=r(108),Kt=new RegExp("^(".concat(Ut.join("|"),")(-inverse)?$"));function Xt(e,t){var r=e.type;if((!0===r.__ANT_BUTTON||!0===r.__ANT_SWITCH||!0===r.__ANT_CHECKBOX||"button"===e.type)&&e.props.disabled){var n=function(e,t){var r={},n=Object(i.a)({},e);return t.forEach((function(t){e&&t in e&&(r[t]=e[t],delete n[t])})),{picked:r,omitted:n}}(e.props.style,["position","left","right","top","bottom","float","display","zIndex"]),a=n.picked,s=n.omitted,u=Object(i.a)(Object(i.a)({display:"inline-block"},a),{cursor:"not-allowed",width:e.props.block?"100%":null}),d=Object(i.a)(Object(i.a)({},s),{pointerEvents:"none"}),h=Object(Ht.a)(e,{style:d,className:null});return o.createElement("span",{style:u,className:c()(e.props.className,"".concat(t,"-disabled-compatible-wrapper"))},h)}return e}var Yt=o.forwardRef((function(e,t){var r,n=o.useContext(Ee.b),u=n.getPopupContainer,d=n.getPrefixCls,h=n.direction,l=Object(Gt.a)(!1,{value:e.visible,defaultValue:e.defaultVisible}),f=Object(a.a)(l,2),p=f[0],v=f[1],m=function(){var t=e.title,r=e.overlay;return!t&&!r&&0!==t},g=function(){var t=e.builtinPlacements,r=e.arrowPointAtCenter,n=e.autoAdjustOverflow;return t||function(e){var t=e.arrowWidth,r=void 0===t?5:t,n=e.horizontalArrowShift,a=void 0===n?16:n,s=e.verticalArrowShift,o=void 0===s?8:s,u=e.autoAdjustOverflow,c={left:{points:["cr","cl"],offset:[-4,0]},right:{points:["cl","cr"],offset:[4,0]},top:{points:["bc","tc"],offset:[0,-4]},bottom:{points:["tc","bc"],offset:[0,4]},topLeft:{points:["bl","tc"],offset:[-(a+r),-4]},leftTop:{points:["tr","cl"],offset:[-4,-(o+r)]},topRight:{points:["br","tc"],offset:[a+r,-4]},rightTop:{points:["tl","cr"],offset:[4,-(o+r)]},bottomRight:{points:["tr","bc"],offset:[a+r,4]},rightBottom:{points:["bl","cr"],offset:[4,o+r]},bottomLeft:{points:["tl","bc"],offset:[-(a+r),4]},leftBottom:{points:["br","cl"],offset:[-4,o+r]}};return Object.keys(c).forEach((function(t){c[t]=e.arrowPointAtCenter?Object(i.a)(Object(i.a)({},c[t]),{overflow:zt(u),targetOffset:jt}):Object(i.a)(Object(i.a)({},Lt[t]),{overflow:zt(u)}),c[t].ignoreShake=!0})),c}({arrowPointAtCenter:r,autoAdjustOverflow:n})},y=e.prefixCls,b=e.openClassName,x=e.getPopupContainer,k=e.getTooltipContainer,w=e.overlayClassName,_=e.color,S=e.overlayInnerStyle,O=e.children,T=d("tooltip",y),C=d(),I=p;!("visible"in e)&&m()&&(I=!1);var M,A=Xt(Object(Ht.b)(O)?O:o.createElement("span",null,O),T),E=A.props,N=c()(E.className,Object(s.a)({},b||"".concat(T,"-open"),!0)),P=c()(w,(r={},Object(s.a)(r,"".concat(T,"-rtl"),"rtl"===h),Object(s.a)(r,"".concat(T,"-").concat(_),_&&Kt.test(_)),r)),D=S;return _&&!Kt.test(_)&&(D=Object(i.a)(Object(i.a)({},S),{background:_}),M={background:_}),o.createElement(Vt,Object(i.a)({},e,{prefixCls:T,overlayClassName:P,getTooltipContainer:x||k||u,ref:t,builtinPlacements:g(),overlay:function(){var t=e.title,r=e.overlay;return 0===t?t:r||t||""}(),visible:I,onVisibleChange:function(t){var r;v(!m()&&t),m()||null===(r=e.onVisibleChange)||void 0===r||r.call(e,t)},onPopupAlign:function(e,t){var r=g(),i=Object.keys(r).filter((function(e){return r[e].points[0]===t.points[0]&&r[e].points[1]===t.points[1]}))[0];if(i){var n=e.getBoundingClientRect(),a={top:"50%",left:"50%"};i.indexOf("top")>=0||i.indexOf("Bottom")>=0?a.top="".concat(n.height-t.offset[1],"px"):(i.indexOf("Top")>=0||i.indexOf("bottom")>=0)&&(a.top="".concat(-t.offset[1],"px")),i.indexOf("left")>=0||i.indexOf("Right")>=0?a.left="".concat(n.width-t.offset[0],"px"):(i.indexOf("right")>=0||i.indexOf("Left")>=0)&&(a.left="".concat(-t.offset[0],"px")),e.style.transformOrigin="".concat(a.left," ").concat(a.top)}},overlayInnerStyle:D,arrowContent:o.createElement("span",{className:"".concat(T,"-arrow-content"),style:M}),motion:{motionName:Object(Wt.a)(C,"zoom-big-fast",e.transitionName),motionDeadline:1e3}}),I?Object(Ht.a)(A,{className:N}):A)}));Yt.displayName="Tooltip",Yt.defaultProps={placement:"top",mouseEnterDelay:.1,mouseLeaveDelay:.1,arrowPointAtCenter:!1,autoAdjustOverflow:!0};var Zt=Yt,Qt=function(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var n=0;for(i=Object.getOwnPropertySymbols(e);n<i.length;n++)t.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(e,i[n])&&(r[i[n]]=e[i[n]])}return r};var $t=function(e){var t=e.prefixCls,r=e.label,u=e.htmlFor,d=e.labelCol,h=e.labelAlign,l=e.colon,f=e.required,p=e.requiredMark,v=e.tooltip,m=Object(Ot.b)("Form"),g=Object(a.a)(m,1)[0];return r?o.createElement(Pe.Consumer,{key:"label"},(function(e){var a,m,y=e.vertical,b=e.labelAlign,x=e.labelCol,k=e.colon,w=d||x||{},_=h||b,S="".concat(t,"-item-label"),O=c()(S,"left"===_&&"".concat(S,"-left"),w.className),T=r,C=!0===l||!1!==k&&!1!==l;C&&!y&&"string"===typeof r&&""!==r.trim()&&(T=r.replace(/[:|\uff1a]\s*$/,""));var I=function(e){return e?"object"!==Object(n.a)(e)||o.isValidElement(e)?{title:e}:e:null}(v);if(I){var M=I.icon,A=void 0===M?o.createElement(xt,null):M,E=Qt(I,["icon"]),N=o.createElement(Zt,E,o.cloneElement(A,{className:"".concat(t,"-item-tooltip")}));T=o.createElement(o.Fragment,null,T,N)}"optional"!==p||f||(T=o.createElement(o.Fragment,null,T,o.createElement("span",{className:"".concat(t,"-item-optional")},(null===g||void 0===g?void 0:g.optional)||(null===(m=Tt.a.Form)||void 0===m?void 0:m.optional))));var P=c()((a={},Object(s.a)(a,"".concat(t,"-item-required"),f),Object(s.a)(a,"".concat(t,"-item-required-mark-optional"),"optional"===p),Object(s.a)(a,"".concat(t,"-item-no-colon"),!C),a));return o.createElement(St,Object(i.a)({},w,{className:O}),o.createElement("label",{htmlFor:u,className:P,title:"string"===typeof r?r:""},T))})):null},Jt=r(66),er=r(72),tr={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm193.5 301.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.2 0 19.9 4.9 25.9 13.3l71.2 98.8 157.2-218c6-8.3 15.6-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.5 12.7z"}}]},name:"check-circle",theme:"filled"},rr=function(e,t){return o.createElement(yt.a,Object.assign({},e,{ref:t,icon:tr}))};rr.displayName="CheckCircleFilled";var ir=o.forwardRef(rr),nr={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm-32 232c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V296zm32 440a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"exclamation-circle",theme:"filled"},ar=function(e,t){return o.createElement(yt.a,Object.assign({},e,{ref:t,icon:nr}))};ar.displayName="ExclamationCircleFilled";var sr=o.forwardRef(ar),or=r(52),ur=r(99);function cr(){var e=o.useReducer((function(e){return e+1}),0);return Object(a.a)(e,2)[1]}var dr=[];function hr(e){var t=e.errors,r=void 0===t?dr:t,i=e.help,n=e.onDomErrorVisibleChange,u=cr(),d=o.useContext(Le),h=d.prefixCls,l=d.status,f=o.useContext(Ee.b).getPrefixCls,p=function(e,t,r){var i=o.useRef({errors:e,visible:!!e.length}),n=cr(),a=function(){var r=i.current.visible,a=!!e.length,s=i.current.errors;i.current.errors=e,i.current.visible=a,r!==a?t(a):(s.length!==e.length||s.some((function(t,r){return t!==e[r]})))&&n()};return o.useEffect((function(){if(!r){var e=setTimeout(a,10);return function(){return clearTimeout(e)}}}),[e]),r&&a(),[i.current.visible,i.current.errors]}(r,(function(e){e&&Promise.resolve().then((function(){null===n||void 0===n||n(!0)})),u()}),!!i),v=Object(a.a)(p,2),m=v[0],g=v[1],y=Object(ur.a)((function(){return g}),m,(function(e,t){return t})),b=o.useState(l),x=Object(a.a)(b,2),k=x[0],w=x[1];o.useEffect((function(){m&&l&&w(l)}),[m,l]);var _="".concat(h,"-item-explain"),S=f();return o.createElement(or.a,{motionDeadline:500,visible:m,motionName:"".concat(S,"-show-help"),onLeaveEnd:function(){null===n||void 0===n||n(!1)},motionAppear:!0,removeOnLeave:!0},(function(e){var t=e.className;return o.createElement("div",{className:c()(_,Object(s.a)({},"".concat(_,"-").concat(k),k),t),key:"help"},y.map((function(e,t){return o.createElement("div",{key:t,role:"alert"},e)})))}))}var lr={success:ir,warning:sr,error:er.a,validating:Jt.a},fr=function(e){var t=e.prefixCls,r=e.status,n=e.wrapperCol,a=e.children,s=e.help,u=e.errors,d=e.onDomErrorVisibleChange,h=e.hasFeedback,l=e._internalItemRender,f=e.validateStatus,p=e.extra,v="".concat(t,"-item"),m=o.useContext(Pe),g=n||m.wrapperCol||{},y=c()("".concat(v,"-control"),g.className);o.useEffect((function(){return function(){d(!1)}}),[]);var b=f&&lr[f],x=h&&b?o.createElement("span",{className:"".concat(v,"-children-icon")},o.createElement(b,null)):null,k=Object(i.a)({},m);delete k.labelCol,delete k.wrapperCol;var w=o.createElement("div",{className:"".concat(v,"-control-input")},o.createElement("div",{className:"".concat(v,"-control-input-content")},a),x),_=o.createElement(Le.Provider,{value:{prefixCls:t,status:r}},o.createElement(hr,{errors:u,help:s,onDomErrorVisibleChange:d})),S=p?o.createElement("div",{className:"".concat(v,"-extra")},p):null,O=l&&"pro_table_render"===l.mark&&l.render?l.render(e,{input:w,errorList:_,extra:S}):o.createElement(o.Fragment,null,w,_,S);return o.createElement(Pe.Provider,{value:k},o.createElement(St,Object(i.a)({},g,{className:y}),O))},pr=r(23);var vr=function(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var n=0;for(i=Object.getOwnPropertySymbols(e);n<i.length;n++)t.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(e,i[n])&&(r[i[n]]=e[i[n]])}return r},mr="__SPLIT__",gr=(Object(it.a)("success","warning","error","validating",""),o.memo((function(e){return e.children}),(function(e,t){return e.value===t.value&&e.update===t.update})));var yr=function(e){var t=e.name,r=e.fieldKey,u=e.noStyle,d=e.dependencies,h=e.prefixCls,l=e.style,f=e.className,p=e.shouldUpdate,v=e.hasFeedback,m=e.help,g=e.rules,y=e.validateStatus,b=e.children,x=e.required,k=e.label,w=e.messageVariables,_=e.trigger,S=void 0===_?"onChange":_,O=e.validateTrigger,T=e.hidden,C=vr(e,["name","fieldKey","noStyle","dependencies","prefixCls","style","className","shouldUpdate","hasFeedback","help","rules","validateStatus","children","required","label","messageVariables","trigger","validateTrigger","hidden"]),I=Object(o.useRef)(!1),M=Object(o.useContext)(Ee.b).getPrefixCls,A=Object(o.useContext)(Pe),N=A.name,P=A.requiredMark,D=Object(o.useContext)(De).updateItemErrors,L=o.useState(!!m),B=Object(a.a)(L,2),R=B[0],V=B[1],G=function(e){var t=o.useState(e),r=Object(a.a)(t,2),i=r[0],n=r[1],s=Object(o.useRef)(null),u=Object(o.useRef)([]),c=Object(o.useRef)(!1);return o.useEffect((function(){return function(){c.current=!0,pr.a.cancel(s.current)}}),[]),[i,function(e){c.current||(null===s.current&&(u.current=[],s.current=Object(pr.a)((function(){s.current=null,n((function(e){var t=e;return u.current.forEach((function(e){t=e(t)})),t}))}))),u.current.push(e))}]}({}),F=Object(a.a)(G,2),q=F[0],j=F[1],z=Object(o.useContext)(E).validateTrigger,H=void 0!==O?O:z;function U(e){I.current||V(e)}var W=function(e){return null===e&&Object(mt.a)(!1,"Form.Item","`null` is passed as `name` property"),!(void 0===e||null===e)}(t),K=Object(o.useRef)([]);o.useEffect((function(){return function(){I.current=!0,D(K.current.join(mr),[])}}),[]);var X=M("form",h),Y=u?D:function(e,t,r){j((function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r!==e&&delete n[r],et()(n[e],t)?n:Object(i.a)(Object(i.a)({},n),Object(s.a)({},e,t))}))},Z=function(){var e=o.useContext(Pe).itemRef,t=o.useRef({});return function(r,i){var a=i&&"object"===Object(n.a)(i)&&i.ref,s=r.join("_");return t.current.name===s&&t.current.originRef===a||(t.current.name=s,t.current.originRef=a,t.current.ref=Object(tt.a)(e(r),a)),t.current.ref}}();function Q(t,r,n,a){var d,h;if(u&&!T)return t;var p,g=[];Object.keys(q).forEach((function(e){g=[].concat(Object($e.a)(g),Object($e.a)(q[e]||[]))})),void 0!==m&&null!==m?p=ze(m):(p=n?n.errors:[],p=[].concat(Object($e.a)(p),Object($e.a)(g)));var b="";void 0!==y?b=y:(null===n||void 0===n?void 0:n.validating)?b="validating":(null===(h=null===n||void 0===n?void 0:n.errors)||void 0===h?void 0:h.length)||g.length?b="error":(null===n||void 0===n?void 0:n.touched)&&(b="success");var x=(d={},Object(s.a)(d,"".concat(X,"-item"),!0),Object(s.a)(d,"".concat(X,"-item-with-help"),R||!!m),Object(s.a)(d,"".concat(f),!!f),Object(s.a)(d,"".concat(X,"-item-has-feedback"),b&&v),Object(s.a)(d,"".concat(X,"-item-has-success"),"success"===b),Object(s.a)(d,"".concat(X,"-item-has-warning"),"warning"===b),Object(s.a)(d,"".concat(X,"-item-has-error"),"error"===b),Object(s.a)(d,"".concat(X,"-item-is-validating"),"validating"===b),Object(s.a)(d,"".concat(X,"-item-hidden"),T),d);return o.createElement(vt,Object(i.a)({className:c()(x),style:l,key:"row"},Object(Ne.a)(C,["colon","extra","getValueFromEvent","getValueProps","htmlFor","id","initialValue","isListField","labelAlign","labelCol","normalize","preserve","tooltip","validateFirst","valuePropName","wrapperCol","_internalItemRender"])),o.createElement($t,Object(i.a)({htmlFor:r,required:a,requiredMark:P},e,{prefixCls:X})),o.createElement(fr,Object(i.a)({},e,n,{errors:p,prefixCls:X,status:b,onDomErrorVisibleChange:U,validateStatus:b}),o.createElement(De.Provider,{value:{updateItemErrors:Y}},t)))}var $="function"===typeof b,J=Object(o.useRef)(0);if(J.current+=1,!W&&!$&&!d)return Q(b);var ee={};return"string"===typeof k&&(ee.label=k),w&&(ee=Object(i.a)(Object(i.a)({},ee),w)),o.createElement(ge,Object(i.a)({},e,{messageVariables:ee,trigger:S,validateTrigger:H,onReset:function(){U(!1)}}),(function(a,s,c){var h=s.errors,l=ze(t).length&&s?s.name:[],f=He(l,N);if(u){var v=K.current.join(mr);if(K.current=Object($e.a)(l),r){var m=Array.isArray(r)?r:[r];K.current=[].concat(Object($e.a)(l.slice(0,-1)),Object($e.a)(m))}D(K.current.join(mr),h,v)}var y=void 0!==x?x:!(!g||!g.some((function(e){if(e&&"object"===Object(n.a)(e)&&e.required)return!0;if("function"===typeof e){var t=e(c);return t&&t.required}return!1}))),k=Object(i.a)({},a),w=null;if(Object(mt.a)(!(p&&d),"Form.Item","`shouldUpdate` and `dependencies` shouldn't be used together. See https://ant.design/components/form/#dependencies."),Array.isArray(b)&&W)Object(mt.a)(!1,"Form.Item","`children` is array of render props cannot have `name`."),w=b;else if($&&(!p&&!d||W))Object(mt.a)(!(!p&&!d),"Form.Item","`children` of render props only work with `shouldUpdate` or `dependencies`."),Object(mt.a)(!W,"Form.Item","Do not use `name` with `children` of render props since it's not a field.");else if(!d||$||W)if(Object(Ht.b)(b)){Object(mt.a)(void 0===b.props.defaultValue,"Form.Item","`defaultValue` will not work on controlled Field. You should use `initialValues` of Form instead.");var _=Object(i.a)(Object(i.a)({},b.props),k);_.id||(_.id=f),Object(tt.c)(b)&&(_.ref=Z(l,b)),new Set([].concat(Object($e.a)(ze(S)),Object($e.a)(ze(H)))).forEach((function(e){_[e]=function(){for(var t,r,i,n,a,s=arguments.length,o=new Array(s),u=0;u<s;u++)o[u]=arguments[u];null===(i=k[e])||void 0===i||(t=i).call.apply(t,[k].concat(o)),null===(a=(n=b.props)[e])||void 0===a||(r=a).call.apply(r,[n].concat(o))}})),w=o.createElement(gr,{value:k[e.valuePropName||"value"],update:J.current},Object(Ht.a)(b,_))}else $&&(p||d)&&!W?w=b(c):(Object(mt.a)(!l.length,"Form.Item","`name` is only used for validate React element. If you are using Form.Item as layout display, please remove `name` instead."),w=b);else Object(mt.a)(!1,"Form.Item","Must set `name` or use render props when `dependencies` is set.");return Q(w,f,s,y)}))},br=function(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var n=0;for(i=Object.getOwnPropertySymbols(e);n<i.length;n++)t.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(e,i[n])&&(r[i[n]]=e[i[n]])}return r},xr=function(e){var t=e.prefixCls,r=e.children,n=br(e,["prefixCls","children"]);Object(mt.a)(!!n.name,"Form.List","Miss `name` prop.");var a=(0,o.useContext(Ee.b).getPrefixCls)("form",t);return o.createElement(ye,n,(function(e,t,n){return o.createElement(Le.Provider,{value:{prefixCls:a,status:"error"}},r(e.map((function(e){return Object(i.a)(Object(i.a)({},e),{fieldKey:e.key})})),t,{errors:n.errors}))}))},kr=Qe;kr.Item=yr,kr.List=xr,kr.ErrorList=hr,kr.useForm=We,kr.Provider=function(e){var t=Object(Ne.a)(e,["prefixCls"]);return o.createElement(Te,t)},kr.create=function(){Object(mt.a)(!1,"Form","antd v4 removed `Form.create`. Please remove or use `@ant-design/compatible` instead.")};t.a=kr},function(e,t,r){(t=e.exports=r(139)).Stream=t,t.Readable=t,t.Writable=r(122),t.Duplex=r(63),t.Transform=r(143),t.PassThrough=r(210)},function(e,t,r){(function(e){function r(e){return Object.prototype.toString.call(e)}t.isArray=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===r(e)},t.isBoolean=function(e){return"boolean"===typeof e},t.isNull=function(e){return null===e},t.isNullOrUndefined=function(e){return null==e},t.isNumber=function(e){return"number"===typeof e},t.isString=function(e){return"string"===typeof e},t.isSymbol=function(e){return"symbol"===typeof e},t.isUndefined=function(e){return void 0===e},t.isRegExp=function(e){return"[object RegExp]"===r(e)},t.isObject=function(e){return"object"===typeof e&&null!==e},t.isDate=function(e){return"[object Date]"===r(e)},t.isError=function(e){return"[object Error]"===r(e)||e instanceof Error},t.isFunction=function(e){return"function"===typeof e},t.isPrimitive=function(e){return null===e||"boolean"===typeof e||"number"===typeof e||"string"===typeof e||"symbol"===typeof e||"undefined"===typeof e},t.isBuffer=e.isBuffer}).call(this,r(32).Buffer)},function(e,t,r){"use strict";var i=r(77),n=r(242),a=r(36),s="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",o=null,u=null;function c(e){for(var t=[],r=0;r<e.length;r++)t[r/4|0]|=e[r]<<24-8*r;return i.lib.WordArray.create(t,e.length)}e.exports={json:function(e){return JSON.stringify(e)},isJsonEncodedObject:function(e){return"string"===typeof e&&e.length>=2&&("{"===e[0]||"["===e[0])},stringToBinary:function(e){return i.enc.Latin1.parse(e)},stringToBase64:function(e){return i.enc.Latin1.parse(e).toString(i.enc.Base64)},base64ToBinary:function(e){return i.enc.Base64.parse(e)},base64ToString:function(e){return i.enc.Base64.parse(e).toString(i.enc.Utf8)},binaryToBase64:function(e){return e.toString(i.enc.Base64)},base16ToBinary:function(e){return i.enc.Hex.parse(e)},binaryToBase16:function(e){return e.toString(i.enc.Hex)},binaryConcat:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.reduce((function(e,t){return e.concat(t)}))},binaryConcatArray:function(e){return e.reduce((function(e,t){return e.concat(t)}))},urlencode:function(e){return n.stringify(e)},urlencodeWithArrayRepeat:function(e){return n.stringify(e,{arrayFormat:"repeat"})},rawencode:function(e){return n.stringify(e,{encode:!1})},encode:function(e){return e},decode:function(e){return e},urlencodeBase64:function(e){return e.replace(/[=]+$/,"").replace(/\+/g,"-").replace(/\//g,"_")},numberToLE:function(e,t){return c(new a(e).toArray("le",t))},numberToBE:function(e,t){return c(new a(e).toArray("be",t))},base58ToBinary:function(e){if(!o){o={},u={};for(var t=0;t<58;t++){var r=s[t],i=new a(t);o[r]=i,u[i]=r}}for(var n=new a(0),d=new a(58),h=0;h<e.length;h++){var l=e[h];n.imul(d),n.iadd(o[l])}return c(n.toArray("be"))},binaryToBase58:function(e){if(!u){o={},u={};for(var t=0;t<58;t++){var r=s[t],n=new a(t);o[r]=n,u[n]=r}}for(var c=new a(58),d=e.toString(i.enc.Hex),h=new a(d,16),l=[];!h.isZero();){var f=h.divmod(c),p=f.div,v=f.mod;h=p,l.push(u[v])}return l.reverse().join("")}},e.exports.byteArrayToWordArray=c},function(e,t,r){e.exports=function(){var e=e||function(e,t){var r=Object.create||function(){function e(){}return function(t){var r;return e.prototype=t,r=new e,e.prototype=null,r}}(),i={},n=i.lib={},a=n.Base={extend:function(e){var t=r(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},s=n.WordArray=a.extend({init:function(e,r){e=this.words=e||[],this.sigBytes=r!=t?r:4*e.length},toString:function(e){return(e||u).stringify(this)},concat:function(e){var t=this.words,r=e.words,i=this.sigBytes,n=e.sigBytes;if(this.clamp(),i%4)for(var a=0;a<n;a++){var s=r[a>>>2]>>>24-a%4*8&255;t[i+a>>>2]|=s<<24-(i+a)%4*8}else for(a=0;a<n;a+=4)t[i+a>>>2]=r[a>>>2];return this.sigBytes+=n,this},clamp:function(){var t=this.words,r=this.sigBytes;t[r>>>2]&=4294967295<<32-r%4*8,t.length=e.ceil(r/4)},clone:function(){var e=a.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var r,i=[],n=function(t){t=t;var r=987654321,i=4294967295;return function(){var n=((r=36969*(65535&r)+(r>>16)&i)<<16)+(t=18e3*(65535&t)+(t>>16)&i)&i;return n/=4294967296,(n+=.5)*(e.random()>.5?1:-1)}},a=0;a<t;a+=4){var o=n(4294967296*(r||e.random()));r=987654071*o(),i.push(4294967296*o()|0)}return new s.init(i,t)}}),o=i.enc={},u=o.Hex={stringify:function(e){for(var t=e.words,r=e.sigBytes,i=[],n=0;n<r;n++){var a=t[n>>>2]>>>24-n%4*8&255;i.push((a>>>4).toString(16)),i.push((15&a).toString(16))}return i.join("")},parse:function(e){for(var t=e.length,r=[],i=0;i<t;i+=2)r[i>>>3]|=parseInt(e.substr(i,2),16)<<24-i%8*4;return new s.init(r,t/2)}},c=o.Latin1={stringify:function(e){for(var t=e.words,r=e.sigBytes,i=[],n=0;n<r;n++){var a=t[n>>>2]>>>24-n%4*8&255;i.push(String.fromCharCode(a))}return i.join("")},parse:function(e){for(var t=e.length,r=[],i=0;i<t;i++)r[i>>>2]|=(255&e.charCodeAt(i))<<24-i%4*8;return new s.init(r,t)}},d=o.Utf8={stringify:function(e){try{return decodeURIComponent(escape(c.stringify(e)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(e){return c.parse(unescape(encodeURIComponent(e)))}},h=n.BufferedBlockAlgorithm=a.extend({reset:function(){this._data=new s.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=d.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var r=this._data,i=r.words,n=r.sigBytes,a=this.blockSize,o=n/(4*a),u=(o=t?e.ceil(o):e.max((0|o)-this._minBufferSize,0))*a,c=e.min(4*u,n);if(u){for(var d=0;d<u;d+=a)this._doProcessBlock(i,d);var h=i.splice(0,u);r.sigBytes-=c}return new s.init(h,c)},clone:function(){var e=a.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),l=(n.Hasher=h.extend({cfg:a.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){h.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,r){return new e.init(r).finalize(t)}},_createHmacHelper:function(e){return function(t,r){return new l.HMAC.init(e,r).finalize(t)}}}),i.algo={});return i}(Math);return function(){var t=e,r=t.lib.WordArray;function i(e,t,i){for(var n=[],a=0,s=0;s<t;s++)if(s%4){var o=i[e.charCodeAt(s-1)]<<s%4*2,u=i[e.charCodeAt(s)]>>>6-s%4*2;n[a>>>2]|=(o|u)<<24-a%4*8,a++}return r.create(n,a)}t.enc.Base64={stringify:function(e){var t=e.words,r=e.sigBytes,i=this._map;e.clamp();for(var n=[],a=0;a<r;a+=3)for(var s=(t[a>>>2]>>>24-a%4*8&255)<<16|(t[a+1>>>2]>>>24-(a+1)%4*8&255)<<8|t[a+2>>>2]>>>24-(a+2)%4*8&255,o=0;o<4&&a+.75*o<r;o++)n.push(i.charAt(s>>>6*(3-o)&63));var u=i.charAt(64);if(u)for(;n.length%4;)n.push(u);return n.join("")},parse:function(e){var t=e.length,r=this._map,n=this._reverseMap;if(!n){n=this._reverseMap=[];for(var a=0;a<r.length;a++)n[r.charCodeAt(a)]=a}var s=r.charAt(64);if(s){var o=e.indexOf(s);-1!==o&&(t=o)}return i(e,t,n)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(t){var r=e,i=r.lib,n=i.WordArray,a=i.Hasher,s=r.algo,o=[];!function(){for(var e=0;e<64;e++)o[e]=4294967296*t.abs(t.sin(e+1))|0}();var u=s.MD5=a.extend({_doReset:function(){this._hash=new n.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var r=0;r<16;r++){var i=t+r,n=e[i];e[i]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8)}var a=this._hash.words,s=e[t+0],u=e[t+1],f=e[t+2],p=e[t+3],v=e[t+4],m=e[t+5],g=e[t+6],y=e[t+7],b=e[t+8],x=e[t+9],k=e[t+10],w=e[t+11],_=e[t+12],S=e[t+13],O=e[t+14],T=e[t+15],C=a[0],I=a[1],M=a[2],A=a[3];C=c(C,I,M,A,s,7,o[0]),A=c(A,C,I,M,u,12,o[1]),M=c(M,A,C,I,f,17,o[2]),I=c(I,M,A,C,p,22,o[3]),C=c(C,I,M,A,v,7,o[4]),A=c(A,C,I,M,m,12,o[5]),M=c(M,A,C,I,g,17,o[6]),I=c(I,M,A,C,y,22,o[7]),C=c(C,I,M,A,b,7,o[8]),A=c(A,C,I,M,x,12,o[9]),M=c(M,A,C,I,k,17,o[10]),I=c(I,M,A,C,w,22,o[11]),C=c(C,I,M,A,_,7,o[12]),A=c(A,C,I,M,S,12,o[13]),M=c(M,A,C,I,O,17,o[14]),C=d(C,I=c(I,M,A,C,T,22,o[15]),M,A,u,5,o[16]),A=d(A,C,I,M,g,9,o[17]),M=d(M,A,C,I,w,14,o[18]),I=d(I,M,A,C,s,20,o[19]),C=d(C,I,M,A,m,5,o[20]),A=d(A,C,I,M,k,9,o[21]),M=d(M,A,C,I,T,14,o[22]),I=d(I,M,A,C,v,20,o[23]),C=d(C,I,M,A,x,5,o[24]),A=d(A,C,I,M,O,9,o[25]),M=d(M,A,C,I,p,14,o[26]),I=d(I,M,A,C,b,20,o[27]),C=d(C,I,M,A,S,5,o[28]),A=d(A,C,I,M,f,9,o[29]),M=d(M,A,C,I,y,14,o[30]),C=h(C,I=d(I,M,A,C,_,20,o[31]),M,A,m,4,o[32]),A=h(A,C,I,M,b,11,o[33]),M=h(M,A,C,I,w,16,o[34]),I=h(I,M,A,C,O,23,o[35]),C=h(C,I,M,A,u,4,o[36]),A=h(A,C,I,M,v,11,o[37]),M=h(M,A,C,I,y,16,o[38]),I=h(I,M,A,C,k,23,o[39]),C=h(C,I,M,A,S,4,o[40]),A=h(A,C,I,M,s,11,o[41]),M=h(M,A,C,I,p,16,o[42]),I=h(I,M,A,C,g,23,o[43]),C=h(C,I,M,A,x,4,o[44]),A=h(A,C,I,M,_,11,o[45]),M=h(M,A,C,I,T,16,o[46]),C=l(C,I=h(I,M,A,C,f,23,o[47]),M,A,s,6,o[48]),A=l(A,C,I,M,y,10,o[49]),M=l(M,A,C,I,O,15,o[50]),I=l(I,M,A,C,m,21,o[51]),C=l(C,I,M,A,_,6,o[52]),A=l(A,C,I,M,p,10,o[53]),M=l(M,A,C,I,k,15,o[54]),I=l(I,M,A,C,u,21,o[55]),C=l(C,I,M,A,b,6,o[56]),A=l(A,C,I,M,T,10,o[57]),M=l(M,A,C,I,g,15,o[58]),I=l(I,M,A,C,S,21,o[59]),C=l(C,I,M,A,v,6,o[60]),A=l(A,C,I,M,w,10,o[61]),M=l(M,A,C,I,f,15,o[62]),I=l(I,M,A,C,x,21,o[63]),a[0]=a[0]+C|0,a[1]=a[1]+I|0,a[2]=a[2]+M|0,a[3]=a[3]+A|0},_doFinalize:function(){var e=this._data,r=e.words,i=8*this._nDataBytes,n=8*e.sigBytes;r[n>>>5]|=128<<24-n%32;var a=t.floor(i/4294967296),s=i;r[15+(n+64>>>9<<4)]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),r[14+(n+64>>>9<<4)]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),e.sigBytes=4*(r.length+1),this._process();for(var o=this._hash,u=o.words,c=0;c<4;c++){var d=u[c];u[c]=16711935&(d<<8|d>>>24)|4278255360&(d<<24|d>>>8)}return o},clone:function(){var e=a.clone.call(this);return e._hash=this._hash.clone(),e}});function c(e,t,r,i,n,a,s){var o=e+(t&r|~t&i)+n+s;return(o<<a|o>>>32-a)+t}function d(e,t,r,i,n,a,s){var o=e+(t&i|r&~i)+n+s;return(o<<a|o>>>32-a)+t}function h(e,t,r,i,n,a,s){var o=e+(t^r^i)+n+s;return(o<<a|o>>>32-a)+t}function l(e,t,r,i,n,a,s){var o=e+(r^(t|~i))+n+s;return(o<<a|o>>>32-a)+t}r.MD5=a._createHelper(u),r.HmacMD5=a._createHmacHelper(u)}(Math),function(){var t=e,r=t.lib,i=r.WordArray,n=r.Hasher,a=t.algo,s=[],o=a.SHA1=n.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var r=this._hash.words,i=r[0],n=r[1],a=r[2],o=r[3],u=r[4],c=0;c<80;c++){if(c<16)s[c]=0|e[t+c];else{var d=s[c-3]^s[c-8]^s[c-14]^s[c-16];s[c]=d<<1|d>>>31}var h=(i<<5|i>>>27)+u+s[c];h+=c<20?1518500249+(n&a|~n&o):c<40?1859775393+(n^a^o):c<60?(n&a|n&o|a&o)-1894007588:(n^a^o)-899497514,u=o,o=a,a=n<<30|n>>>2,n=i,i=h}r[0]=r[0]+i|0,r[1]=r[1]+n|0,r[2]=r[2]+a|0,r[3]=r[3]+o|0,r[4]=r[4]+u|0},_doFinalize:function(){var e=this._data,t=e.words,r=8*this._nDataBytes,i=8*e.sigBytes;return t[i>>>5]|=128<<24-i%32,t[14+(i+64>>>9<<4)]=Math.floor(r/4294967296),t[15+(i+64>>>9<<4)]=r,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=n.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA1=n._createHelper(o),t.HmacSHA1=n._createHmacHelper(o)}(),function(t){var r=e,i=r.lib,n=i.WordArray,a=i.Hasher,s=r.algo,o=[],u=[];!function(){function e(e){for(var r=t.sqrt(e),i=2;i<=r;i++)if(!(e%i))return!1;return!0}function r(e){return 4294967296*(e-(0|e))|0}for(var i=2,n=0;n<64;)e(i)&&(n<8&&(o[n]=r(t.pow(i,.5))),u[n]=r(t.pow(i,1/3)),n++),i++}();var c=[],d=s.SHA256=a.extend({_doReset:function(){this._hash=new n.init(o.slice(0))},_doProcessBlock:function(e,t){for(var r=this._hash.words,i=r[0],n=r[1],a=r[2],s=r[3],o=r[4],d=r[5],h=r[6],l=r[7],f=0;f<64;f++){if(f<16)c[f]=0|e[t+f];else{var p=c[f-15],v=(p<<25|p>>>7)^(p<<14|p>>>18)^p>>>3,m=c[f-2],g=(m<<15|m>>>17)^(m<<13|m>>>19)^m>>>10;c[f]=v+c[f-7]+g+c[f-16]}var y=i&n^i&a^n&a,b=(i<<30|i>>>2)^(i<<19|i>>>13)^(i<<10|i>>>22),x=l+((o<<26|o>>>6)^(o<<21|o>>>11)^(o<<7|o>>>25))+(o&d^~o&h)+u[f]+c[f];l=h,h=d,d=o,o=s+x|0,s=a,a=n,n=i,i=x+(b+y)|0}r[0]=r[0]+i|0,r[1]=r[1]+n|0,r[2]=r[2]+a|0,r[3]=r[3]+s|0,r[4]=r[4]+o|0,r[5]=r[5]+d|0,r[6]=r[6]+h|0,r[7]=r[7]+l|0},_doFinalize:function(){var e=this._data,r=e.words,i=8*this._nDataBytes,n=8*e.sigBytes;return r[n>>>5]|=128<<24-n%32,r[14+(n+64>>>9<<4)]=t.floor(i/4294967296),r[15+(n+64>>>9<<4)]=i,e.sigBytes=4*r.length,this._process(),this._hash},clone:function(){var e=a.clone.call(this);return e._hash=this._hash.clone(),e}});r.SHA256=a._createHelper(d),r.HmacSHA256=a._createHmacHelper(d)}(Math),function(){var t=e,r=t.lib.WordArray,i=t.enc;function n(e){return e<<8&4278255360|e>>>8&16711935}i.Utf16=i.Utf16BE={stringify:function(e){for(var t=e.words,r=e.sigBytes,i=[],n=0;n<r;n+=2){var a=t[n>>>2]>>>16-n%4*8&65535;i.push(String.fromCharCode(a))}return i.join("")},parse:function(e){for(var t=e.length,i=[],n=0;n<t;n++)i[n>>>1]|=e.charCodeAt(n)<<16-n%2*16;return r.create(i,2*t)}},i.Utf16LE={stringify:function(e){for(var t=e.words,r=e.sigBytes,i=[],a=0;a<r;a+=2){var s=n(t[a>>>2]>>>16-a%4*8&65535);i.push(String.fromCharCode(s))}return i.join("")},parse:function(e){for(var t=e.length,i=[],a=0;a<t;a++)i[a>>>1]|=n(e.charCodeAt(a)<<16-a%2*16);return r.create(i,2*t)}}}(),function(){if("function"==typeof ArrayBuffer){var t=e.lib.WordArray,r=t.init;(t.init=function(e){if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),(e instanceof Int8Array||"undefined"!==typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)&&(e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),e instanceof Uint8Array){for(var t=e.byteLength,i=[],n=0;n<t;n++)i[n>>>2]|=e[n]<<24-n%4*8;r.call(this,i,t)}else r.apply(this,arguments)}).prototype=t}}(),function(t){var r=e,i=r.lib,n=i.WordArray,a=i.Hasher,s=r.algo,o=n.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),u=n.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),c=n.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),d=n.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),h=n.create([0,1518500249,1859775393,2400959708,2840853838]),l=n.create([1352829926,1548603684,1836072691,2053994217,0]),f=s.RIPEMD160=a.extend({_doReset:function(){this._hash=n.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var r=0;r<16;r++){var i=t+r,n=e[i];e[i]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8)}var a,s,f,x,k,w,_,S,O,T,C,I=this._hash.words,M=h.words,A=l.words,E=o.words,N=u.words,P=c.words,D=d.words;for(w=a=I[0],_=s=I[1],S=f=I[2],O=x=I[3],T=k=I[4],r=0;r<80;r+=1)C=a+e[t+E[r]]|0,C+=r<16?p(s,f,x)+M[0]:r<32?v(s,f,x)+M[1]:r<48?m(s,f,x)+M[2]:r<64?g(s,f,x)+M[3]:y(s,f,x)+M[4],C=(C=b(C|=0,P[r]))+k|0,a=k,k=x,x=b(f,10),f=s,s=C,C=w+e[t+N[r]]|0,C+=r<16?y(_,S,O)+A[0]:r<32?g(_,S,O)+A[1]:r<48?m(_,S,O)+A[2]:r<64?v(_,S,O)+A[3]:p(_,S,O)+A[4],C=(C=b(C|=0,D[r]))+T|0,w=T,T=O,O=b(S,10),S=_,_=C;C=I[1]+f+O|0,I[1]=I[2]+x+T|0,I[2]=I[3]+k+w|0,I[3]=I[4]+a+_|0,I[4]=I[0]+s+S|0,I[0]=C},_doFinalize:function(){var e=this._data,t=e.words,r=8*this._nDataBytes,i=8*e.sigBytes;t[i>>>5]|=128<<24-i%32,t[14+(i+64>>>9<<4)]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),e.sigBytes=4*(t.length+1),this._process();for(var n=this._hash,a=n.words,s=0;s<5;s++){var o=a[s];a[s]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8)}return n},clone:function(){var e=a.clone.call(this);return e._hash=this._hash.clone(),e}});function p(e,t,r){return e^t^r}function v(e,t,r){return e&t|~e&r}function m(e,t,r){return(e|~t)^r}function g(e,t,r){return e&r|t&~r}function y(e,t,r){return e^(t|~r)}function b(e,t){return e<<t|e>>>32-t}r.RIPEMD160=a._createHelper(f),r.HmacRIPEMD160=a._createHmacHelper(f)}(Math),function(){var t=e,r=t.lib.Base,i=t.enc.Utf8;t.algo.HMAC=r.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=i.parse(t));var r=e.blockSize,n=4*r;t.sigBytes>n&&(t=e.finalize(t)),t.clamp();for(var a=this._oKey=t.clone(),s=this._iKey=t.clone(),o=a.words,u=s.words,c=0;c<r;c++)o[c]^=1549556828,u[c]^=909522486;a.sigBytes=s.sigBytes=n,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,r=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(r))}})}(),function(){var t=e,r=t.lib,i=r.Base,n=r.WordArray,a=t.algo,s=a.SHA1,o=a.HMAC,u=a.PBKDF2=i.extend({cfg:i.extend({keySize:4,hasher:s,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var r=this.cfg,i=o.create(r.hasher,e),a=n.create(),s=n.create([1]),u=a.words,c=s.words,d=r.keySize,h=r.iterations;u.length<d;){var l=i.update(t).finalize(s);i.reset();for(var f=l.words,p=f.length,v=l,m=1;m<h;m++){v=i.finalize(v),i.reset();for(var g=v.words,y=0;y<p;y++)f[y]^=g[y]}a.concat(l),c[0]++}return a.sigBytes=4*d,a}});t.PBKDF2=function(e,t,r){return u.create(r).compute(e,t)}}(),function(){var t=e,r=t.lib,i=r.Base,n=r.WordArray,a=t.algo,s=a.MD5,o=a.EvpKDF=i.extend({cfg:i.extend({keySize:4,hasher:s,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var r=this.cfg,i=r.hasher.create(),a=n.create(),s=a.words,o=r.keySize,u=r.iterations;s.length<o;){c&&i.update(c);var c=i.update(e).finalize(t);i.reset();for(var d=1;d<u;d++)c=i.finalize(c),i.reset();a.concat(c)}return a.sigBytes=4*o,a}});t.EvpKDF=function(e,t,r){return o.create(r).compute(e,t)}}(),function(){var t=e,r=t.lib.WordArray,i=t.algo,n=i.SHA256,a=i.SHA224=n.extend({_doReset:function(){this._hash=new r.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var e=n._doFinalize.call(this);return e.sigBytes-=4,e}});t.SHA224=n._createHelper(a),t.HmacSHA224=n._createHmacHelper(a)}(),function(t){var r=e,i=r.lib,n=i.Base,a=i.WordArray,s=r.x64={};s.Word=n.extend({init:function(e,t){this.high=e,this.low=t}}),s.WordArray=n.extend({init:function(e,r){e=this.words=e||[],this.sigBytes=r!=t?r:8*e.length},toX32:function(){for(var e=this.words,t=e.length,r=[],i=0;i<t;i++){var n=e[i];r.push(n.high),r.push(n.low)}return a.create(r,this.sigBytes)},clone:function(){for(var e=n.clone.call(this),t=e.words=this.words.slice(0),r=t.length,i=0;i<r;i++)t[i]=t[i].clone();return e}})}(),function(t){var r=e,i=r.lib,n=i.WordArray,a=i.Hasher,s=r.x64.Word,o=r.algo,u=[],c=[],d=[];!function(){for(var e=1,t=0,r=0;r<24;r++){u[e+5*t]=(r+1)*(r+2)/2%64;var i=(2*e+3*t)%5;e=t%5,t=i}for(e=0;e<5;e++)for(t=0;t<5;t++)c[e+5*t]=t+(2*e+3*t)%5*5;for(var n=1,a=0;a<24;a++){for(var o=0,h=0,l=0;l<7;l++){if(1&n){var f=(1<<l)-1;f<32?h^=1<<f:o^=1<<f-32}128&n?n=n<<1^113:n<<=1}d[a]=s.create(o,h)}}();var h=[];!function(){for(var e=0;e<25;e++)h[e]=s.create()}();var l=o.SHA3=a.extend({cfg:a.cfg.extend({outputLength:512}),_doReset:function(){for(var e=this._state=[],t=0;t<25;t++)e[t]=new s.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(e,t){for(var r=this._state,i=this.blockSize/2,n=0;n<i;n++){var a=e[t+2*n],s=e[t+2*n+1];a=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),s=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),(I=r[n]).high^=s,I.low^=a}for(var o=0;o<24;o++){for(var l=0;l<5;l++){for(var f=0,p=0,v=0;v<5;v++)f^=(I=r[l+5*v]).high,p^=I.low;var m=h[l];m.high=f,m.low=p}for(l=0;l<5;l++){var g=h[(l+4)%5],y=h[(l+1)%5],b=y.high,x=y.low;for(f=g.high^(b<<1|x>>>31),p=g.low^(x<<1|b>>>31),v=0;v<5;v++)(I=r[l+5*v]).high^=f,I.low^=p}for(var k=1;k<25;k++){var w=(I=r[k]).high,_=I.low,S=u[k];S<32?(f=w<<S|_>>>32-S,p=_<<S|w>>>32-S):(f=_<<S-32|w>>>64-S,p=w<<S-32|_>>>64-S);var O=h[c[k]];O.high=f,O.low=p}var T=h[0],C=r[0];for(T.high=C.high,T.low=C.low,l=0;l<5;l++)for(v=0;v<5;v++){var I=r[k=l+5*v],M=h[k],A=h[(l+1)%5+5*v],E=h[(l+2)%5+5*v];I.high=M.high^~A.high&E.high,I.low=M.low^~A.low&E.low}I=r[0];var N=d[o];I.high^=N.high,I.low^=N.low}},_doFinalize:function(){var e=this._data,r=e.words,i=(this._nDataBytes,8*e.sigBytes),a=32*this.blockSize;r[i>>>5]|=1<<24-i%32,r[(t.ceil((i+1)/a)*a>>>5)-1]|=128,e.sigBytes=4*r.length,this._process();for(var s=this._state,o=this.cfg.outputLength/8,u=o/8,c=[],d=0;d<u;d++){var h=s[d],l=h.high,f=h.low;l=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8),f=16711935&(f<<8|f>>>24)|4278255360&(f<<24|f>>>8),c.push(f),c.push(l)}return new n.init(c,o)},clone:function(){for(var e=a.clone.call(this),t=e._state=this._state.slice(0),r=0;r<25;r++)t[r]=t[r].clone();return e}});r.SHA3=a._createHelper(l),r.HmacSHA3=a._createHmacHelper(l)}(Math),function(){var t=e,r=t.lib.Hasher,i=t.x64,n=i.Word,a=i.WordArray,s=t.algo;function o(){return n.create.apply(n,arguments)}var u=[o(1116352408,3609767458),o(1899447441,602891725),o(3049323471,3964484399),o(3921009573,2173295548),o(961987163,4081628472),o(1508970993,3053834265),o(2453635748,2937671579),o(2870763221,3664609560),o(3624381080,2734883394),o(310598401,1164996542),o(607225278,1323610764),o(1426881987,3590304994),o(1925078388,4068182383),o(2162078206,991336113),o(2614888103,633803317),o(3248222580,3479774868),o(3835390401,2666613458),o(4022224774,944711139),o(264347078,2341262773),o(604807628,2007800933),o(770255983,1495990901),o(1249150122,1856431235),o(1555081692,3175218132),o(1996064986,2198950837),o(2554220882,3999719339),o(2821834349,766784016),o(2952996808,2566594879),o(3210313671,3203337956),o(3336571891,1034457026),o(3584528711,2466948901),o(113926993,3758326383),o(338241895,168717936),o(666307205,1188179964),o(773529912,1546045734),o(1294757372,1522805485),o(1396182291,2643833823),o(1695183700,2343527390),o(1986661051,1014477480),o(2177026350,1206759142),o(2456956037,344077627),o(2730485921,1290863460),o(2820302411,3158454273),o(3259730800,3505952657),o(3345764771,106217008),o(3516065817,3606008344),o(3600352804,1432725776),o(4094571909,1467031594),o(275423344,851169720),o(430227734,3100823752),o(506948616,1363258195),o(659060556,3750685593),o(883997877,3785050280),o(958139571,3318307427),o(1322822218,3812723403),o(1537002063,2003034995),o(1747873779,3602036899),o(1955562222,1575990012),o(2024104815,1125592928),o(2227730452,2716904306),o(2361852424,442776044),o(2428436474,593698344),o(2756734187,3733110249),o(3204031479,2999351573),o(3329325298,3815920427),o(3391569614,3928383900),o(3515267271,566280711),o(3940187606,3454069534),o(4118630271,4000239992),o(116418474,1914138554),o(174292421,2731055270),o(289380356,3203993006),o(460393269,320620315),o(685471733,587496836),o(852142971,1086792851),o(1017036298,365543100),o(1126000580,2618297676),o(1288033470,3409855158),o(1501505948,4234509866),o(1607167915,987167468),o(1816402316,1246189591)],c=[];!function(){for(var e=0;e<80;e++)c[e]=o()}();var d=s.SHA512=r.extend({_doReset:function(){this._hash=new a.init([new n.init(1779033703,4089235720),new n.init(3144134277,2227873595),new n.init(1013904242,4271175723),new n.init(2773480762,1595750129),new n.init(1359893119,2917565137),new n.init(2600822924,725511199),new n.init(528734635,4215389547),new n.init(1541459225,327033209)])},_doProcessBlock:function(e,t){for(var r=this._hash.words,i=r[0],n=r[1],a=r[2],s=r[3],o=r[4],d=r[5],h=r[6],l=r[7],f=i.high,p=i.low,v=n.high,m=n.low,g=a.high,y=a.low,b=s.high,x=s.low,k=o.high,w=o.low,_=d.high,S=d.low,O=h.high,T=h.low,C=l.high,I=l.low,M=f,A=p,E=v,N=m,P=g,D=y,L=b,B=x,R=k,V=w,G=_,F=S,q=O,j=T,z=C,H=I,U=0;U<80;U++){var W=c[U];if(U<16)var K=W.high=0|e[t+2*U],X=W.low=0|e[t+2*U+1];else{var Y=c[U-15],Z=Y.high,Q=Y.low,$=(Z>>>1|Q<<31)^(Z>>>8|Q<<24)^Z>>>7,J=(Q>>>1|Z<<31)^(Q>>>8|Z<<24)^(Q>>>7|Z<<25),ee=c[U-2],te=ee.high,re=ee.low,ie=(te>>>19|re<<13)^(te<<3|re>>>29)^te>>>6,ne=(re>>>19|te<<13)^(re<<3|te>>>29)^(re>>>6|te<<26),ae=c[U-7],se=ae.high,oe=ae.low,ue=c[U-16],ce=ue.high,de=ue.low;K=(K=(K=$+se+((X=J+oe)>>>0<J>>>0?1:0))+ie+((X+=ne)>>>0<ne>>>0?1:0))+ce+((X+=de)>>>0<de>>>0?1:0),W.high=K,W.low=X}var he,le=R&G^~R&q,fe=V&F^~V&j,pe=M&E^M&P^E&P,ve=A&N^A&D^N&D,me=(M>>>28|A<<4)^(M<<30|A>>>2)^(M<<25|A>>>7),ge=(A>>>28|M<<4)^(A<<30|M>>>2)^(A<<25|M>>>7),ye=(R>>>14|V<<18)^(R>>>18|V<<14)^(R<<23|V>>>9),be=(V>>>14|R<<18)^(V>>>18|R<<14)^(V<<23|R>>>9),xe=u[U],ke=xe.high,we=xe.low,_e=z+ye+((he=H+be)>>>0<H>>>0?1:0),Se=ge+ve;z=q,H=j,q=G,j=F,G=R,F=V,R=L+(_e=(_e=(_e=_e+le+((he+=fe)>>>0<fe>>>0?1:0))+ke+((he+=we)>>>0<we>>>0?1:0))+K+((he+=X)>>>0<X>>>0?1:0))+((V=B+he|0)>>>0<B>>>0?1:0)|0,L=P,B=D,P=E,D=N,E=M,N=A,M=_e+(me+pe+(Se>>>0<ge>>>0?1:0))+((A=he+Se|0)>>>0<he>>>0?1:0)|0}p=i.low=p+A,i.high=f+M+(p>>>0<A>>>0?1:0),m=n.low=m+N,n.high=v+E+(m>>>0<N>>>0?1:0),y=a.low=y+D,a.high=g+P+(y>>>0<D>>>0?1:0),x=s.low=x+B,s.high=b+L+(x>>>0<B>>>0?1:0),w=o.low=w+V,o.high=k+R+(w>>>0<V>>>0?1:0),S=d.low=S+F,d.high=_+G+(S>>>0<F>>>0?1:0),T=h.low=T+j,h.high=O+q+(T>>>0<j>>>0?1:0),I=l.low=I+H,l.high=C+z+(I>>>0<H>>>0?1:0)},_doFinalize:function(){var e=this._data,t=e.words,r=8*this._nDataBytes,i=8*e.sigBytes;return t[i>>>5]|=128<<24-i%32,t[30+(i+128>>>10<<5)]=Math.floor(r/4294967296),t[31+(i+128>>>10<<5)]=r,e.sigBytes=4*t.length,this._process(),this._hash.toX32()},clone:function(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:32});t.SHA512=r._createHelper(d),t.HmacSHA512=r._createHmacHelper(d)}(),function(){var t=e,r=t.x64,i=r.Word,n=r.WordArray,a=t.algo,s=a.SHA512,o=a.SHA384=s.extend({_doReset:function(){this._hash=new n.init([new i.init(3418070365,3238371032),new i.init(1654270250,914150663),new i.init(2438529370,812702999),new i.init(355462360,4144912697),new i.init(1731405415,4290775857),new i.init(2394180231,1750603025),new i.init(3675008525,1694076839),new i.init(1203062813,3204075428)])},_doFinalize:function(){var e=s._doFinalize.call(this);return e.sigBytes-=16,e}});t.SHA384=s._createHelper(o),t.HmacSHA384=s._createHmacHelper(o)}(),e.lib.Cipher||function(t){var r=e,i=r.lib,n=i.Base,a=i.WordArray,s=i.BufferedBlockAlgorithm,o=r.enc,u=(o.Utf8,o.Base64),c=r.algo.EvpKDF,d=i.Cipher=s.extend({cfg:n.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,r){this.cfg=this.cfg.extend(r),this._xformMode=e,this._key=t,this.reset()},reset:function(){s.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function e(e){return"string"==typeof e?b:g}return function(t){return{encrypt:function(r,i,n){return e(i).encrypt(t,r,i,n)},decrypt:function(r,i,n){return e(i).decrypt(t,r,i,n)}}}}()}),h=(i.StreamCipher=d.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),r.mode={}),l=i.BlockCipherMode=n.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}}),f=h.CBC=function(){var e=l.extend();function r(e,r,i){var n=this._iv;if(n){var a=n;this._iv=t}else a=this._prevBlock;for(var s=0;s<i;s++)e[r+s]^=a[s]}return e.Encryptor=e.extend({processBlock:function(e,t){var i=this._cipher,n=i.blockSize;r.call(this,e,t,n),i.encryptBlock(e,t),this._prevBlock=e.slice(t,t+n)}}),e.Decryptor=e.extend({processBlock:function(e,t){var i=this._cipher,n=i.blockSize,a=e.slice(t,t+n);i.decryptBlock(e,t),r.call(this,e,t,n),this._prevBlock=a}}),e}(),p=(r.pad={}).Pkcs7={pad:function(e,t){for(var r=4*t,i=r-e.sigBytes%r,n=i<<24|i<<16|i<<8|i,s=[],o=0;o<i;o+=4)s.push(n);var u=a.create(s,i);e.concat(u)},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},v=(i.BlockCipher=d.extend({cfg:d.cfg.extend({mode:f,padding:p}),reset:function(){d.reset.call(this);var e=this.cfg,t=e.iv,r=e.mode;if(this._xformMode==this._ENC_XFORM_MODE)var i=r.createEncryptor;else i=r.createDecryptor,this._minBufferSize=1;this._mode&&this._mode.__creator==i?this._mode.init(this,t&&t.words):(this._mode=i.call(r,this,t&&t.words),this._mode.__creator=i)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){e.pad(this._data,this.blockSize);var t=this._process(!0)}else t=this._process(!0),e.unpad(t);return t},blockSize:4}),i.CipherParams=n.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}})),m=(r.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext,r=e.salt;if(r)var i=a.create([1398893684,1701076831]).concat(r).concat(t);else i=t;return i.toString(u)},parse:function(e){var t=u.parse(e),r=t.words;if(1398893684==r[0]&&1701076831==r[1]){var i=a.create(r.slice(2,4));r.splice(0,4),t.sigBytes-=16}return v.create({ciphertext:t,salt:i})}},g=i.SerializableCipher=n.extend({cfg:n.extend({format:m}),encrypt:function(e,t,r,i){i=this.cfg.extend(i);var n=e.createEncryptor(r,i),a=n.finalize(t),s=n.cfg;return v.create({ciphertext:a,key:r,iv:s.iv,algorithm:e,mode:s.mode,padding:s.padding,blockSize:e.blockSize,formatter:i.format})},decrypt:function(e,t,r,i){return i=this.cfg.extend(i),t=this._parse(t,i.format),e.createDecryptor(r,i).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),y=(r.kdf={}).OpenSSL={execute:function(e,t,r,i){i||(i=a.random(8));var n=c.create({keySize:t+r}).compute(e,i),s=a.create(n.words.slice(t),4*r);return n.sigBytes=4*t,v.create({key:n,iv:s,salt:i})}},b=i.PasswordBasedCipher=g.extend({cfg:g.cfg.extend({kdf:y}),encrypt:function(e,t,r,i){var n=(i=this.cfg.extend(i)).kdf.execute(r,e.keySize,e.ivSize);i.iv=n.iv;var a=g.encrypt.call(this,e,t,n.key,i);return a.mixIn(n),a},decrypt:function(e,t,r,i){i=this.cfg.extend(i),t=this._parse(t,i.format);var n=i.kdf.execute(r,e.keySize,e.ivSize,t.salt);return i.iv=n.iv,g.decrypt.call(this,e,t,n.key,i)}})}(),e.mode.CFB=function(){var t=e.lib.BlockCipherMode.extend();function r(e,t,r,i){var n=this._iv;if(n){var a=n.slice(0);this._iv=void 0}else a=this._prevBlock;i.encryptBlock(a,0);for(var s=0;s<r;s++)e[t+s]^=a[s]}return t.Encryptor=t.extend({processBlock:function(e,t){var i=this._cipher,n=i.blockSize;r.call(this,e,t,n,i),this._prevBlock=e.slice(t,t+n)}}),t.Decryptor=t.extend({processBlock:function(e,t){var i=this._cipher,n=i.blockSize,a=e.slice(t,t+n);r.call(this,e,t,n,i),this._prevBlock=a}}),t}(),e.mode.ECB=function(){var t=e.lib.BlockCipherMode.extend();return t.Encryptor=t.extend({processBlock:function(e,t){this._cipher.encryptBlock(e,t)}}),t.Decryptor=t.extend({processBlock:function(e,t){this._cipher.decryptBlock(e,t)}}),t}(),e.pad.AnsiX923={pad:function(e,t){var r=e.sigBytes,i=4*t,n=i-r%i,a=r+n-1;e.clamp(),e.words[a>>>2]|=n<<24-a%4*8,e.sigBytes+=n},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},e.pad.Iso10126={pad:function(t,r){var i=4*r,n=i-t.sigBytes%i;t.concat(e.lib.WordArray.random(n-1)).concat(e.lib.WordArray.create([n<<24],1))},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},e.pad.Iso97971={pad:function(t,r){t.concat(e.lib.WordArray.create([2147483648],1)),e.pad.ZeroPadding.pad(t,r)},unpad:function(t){e.pad.ZeroPadding.unpad(t),t.sigBytes--}},e.mode.OFB=function(){var t=e.lib.BlockCipherMode.extend(),r=t.Encryptor=t.extend({processBlock:function(e,t){var r=this._cipher,i=r.blockSize,n=this._iv,a=this._keystream;n&&(a=this._keystream=n.slice(0),this._iv=void 0),r.encryptBlock(a,0);for(var s=0;s<i;s++)e[t+s]^=a[s]}});return t.Decryptor=r,t}(),e.pad.NoPadding={pad:function(){},unpad:function(){}},function(t){var r=e,i=r.lib.CipherParams,n=r.enc.Hex;r.format.Hex={stringify:function(e){return e.ciphertext.toString(n)},parse:function(e){var t=n.parse(e);return i.create({ciphertext:t})}}}(),function(){var t=e,r=t.lib.BlockCipher,i=t.algo,n=[],a=[],s=[],o=[],u=[],c=[],d=[],h=[],l=[],f=[];!function(){for(var e=[],t=0;t<256;t++)e[t]=t<128?t<<1:t<<1^283;var r=0,i=0;for(t=0;t<256;t++){var p=i^i<<1^i<<2^i<<3^i<<4;p=p>>>8^255&p^99,n[r]=p,a[p]=r;var v=e[r],m=e[v],g=e[m],y=257*e[p]^16843008*p;s[r]=y<<24|y>>>8,o[r]=y<<16|y>>>16,u[r]=y<<8|y>>>24,c[r]=y,y=16843009*g^65537*m^257*v^16843008*r,d[p]=y<<24|y>>>8,h[p]=y<<16|y>>>16,l[p]=y<<8|y>>>24,f[p]=y,r?(r=v^e[e[e[g^v]]],i^=e[e[i]]):r=i=1}}();var p=[0,1,2,4,8,16,32,64,128,27,54],v=i.AES=r.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var e=this._keyPriorReset=this._key,t=e.words,r=e.sigBytes/4,i=4*((this._nRounds=r+6)+1),a=this._keySchedule=[],s=0;s<i;s++)if(s<r)a[s]=t[s];else{var o=a[s-1];s%r?r>6&&s%r==4&&(o=n[o>>>24]<<24|n[o>>>16&255]<<16|n[o>>>8&255]<<8|n[255&o]):(o=n[(o=o<<8|o>>>24)>>>24]<<24|n[o>>>16&255]<<16|n[o>>>8&255]<<8|n[255&o],o^=p[s/r|0]<<24),a[s]=a[s-r]^o}for(var u=this._invKeySchedule=[],c=0;c<i;c++)s=i-c,o=c%4?a[s]:a[s-4],u[c]=c<4||s<=4?o:d[n[o>>>24]]^h[n[o>>>16&255]]^l[n[o>>>8&255]]^f[n[255&o]]}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,s,o,u,c,n)},decryptBlock:function(e,t){var r=e[t+1];e[t+1]=e[t+3],e[t+3]=r,this._doCryptBlock(e,t,this._invKeySchedule,d,h,l,f,a),r=e[t+1],e[t+1]=e[t+3],e[t+3]=r},_doCryptBlock:function(e,t,r,i,n,a,s,o){for(var u=this._nRounds,c=e[t]^r[0],d=e[t+1]^r[1],h=e[t+2]^r[2],l=e[t+3]^r[3],f=4,p=1;p<u;p++){var v=i[c>>>24]^n[d>>>16&255]^a[h>>>8&255]^s[255&l]^r[f++],m=i[d>>>24]^n[h>>>16&255]^a[l>>>8&255]^s[255&c]^r[f++],g=i[h>>>24]^n[l>>>16&255]^a[c>>>8&255]^s[255&d]^r[f++],y=i[l>>>24]^n[c>>>16&255]^a[d>>>8&255]^s[255&h]^r[f++];c=v,d=m,h=g,l=y}v=(o[c>>>24]<<24|o[d>>>16&255]<<16|o[h>>>8&255]<<8|o[255&l])^r[f++],m=(o[d>>>24]<<24|o[h>>>16&255]<<16|o[l>>>8&255]<<8|o[255&c])^r[f++],g=(o[h>>>24]<<24|o[l>>>16&255]<<16|o[c>>>8&255]<<8|o[255&d])^r[f++],y=(o[l>>>24]<<24|o[c>>>16&255]<<16|o[d>>>8&255]<<8|o[255&h])^r[f++],e[t]=v,e[t+1]=m,e[t+2]=g,e[t+3]=y},keySize:8});t.AES=r._createHelper(v)}(),function(){var t=e,r=t.lib,i=r.WordArray,n=r.BlockCipher,a=t.algo,s=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],o=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],u=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],c=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],d=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],h=a.DES=n.extend({_doReset:function(){for(var e=this._key.words,t=[],r=0;r<56;r++){var i=s[r]-1;t[r]=e[i>>>5]>>>31-i%32&1}for(var n=this._subKeys=[],a=0;a<16;a++){var c=n[a]=[],d=u[a];for(r=0;r<24;r++)c[r/6|0]|=t[(o[r]-1+d)%28]<<31-r%6,c[4+(r/6|0)]|=t[28+(o[r+24]-1+d)%28]<<31-r%6;for(c[0]=c[0]<<1|c[0]>>>31,r=1;r<7;r++)c[r]=c[r]>>>4*(r-1)+3;c[7]=c[7]<<5|c[7]>>>27}var h=this._invSubKeys=[];for(r=0;r<16;r++)h[r]=n[15-r]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._subKeys)},decryptBlock:function(e,t){this._doCryptBlock(e,t,this._invSubKeys)},_doCryptBlock:function(e,t,r){this._lBlock=e[t],this._rBlock=e[t+1],l.call(this,4,252645135),l.call(this,16,65535),f.call(this,2,858993459),f.call(this,8,16711935),l.call(this,1,1431655765);for(var i=0;i<16;i++){for(var n=r[i],a=this._lBlock,s=this._rBlock,o=0,u=0;u<8;u++)o|=c[u][((s^n[u])&d[u])>>>0];this._lBlock=s,this._rBlock=a^o}var h=this._lBlock;this._lBlock=this._rBlock,this._rBlock=h,l.call(this,1,1431655765),f.call(this,8,16711935),f.call(this,2,858993459),l.call(this,16,65535),l.call(this,4,252645135),e[t]=this._lBlock,e[t+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});function l(e,t){var r=(this._lBlock>>>e^this._rBlock)&t;this._rBlock^=r,this._lBlock^=r<<e}function f(e,t){var r=(this._rBlock>>>e^this._lBlock)&t;this._lBlock^=r,this._rBlock^=r<<e}t.DES=n._createHelper(h);var p=a.TripleDES=n.extend({_doReset:function(){var e=this._key.words;this._des1=h.createEncryptor(i.create(e.slice(0,2))),this._des2=h.createEncryptor(i.create(e.slice(2,4))),this._des3=h.createEncryptor(i.create(e.slice(4,6)))},encryptBlock:function(e,t){this._des1.encryptBlock(e,t),this._des2.decryptBlock(e,t),this._des3.encryptBlock(e,t)},decryptBlock:function(e,t){this._des3.decryptBlock(e,t),this._des2.encryptBlock(e,t),this._des1.decryptBlock(e,t)},keySize:6,ivSize:2,blockSize:2});t.TripleDES=n._createHelper(p)}(),function(){var t=e,r=t.lib.StreamCipher,i=t.algo,n=i.RC4=r.extend({_doReset:function(){for(var e=this._key,t=e.words,r=e.sigBytes,i=this._S=[],n=0;n<256;n++)i[n]=n;n=0;for(var a=0;n<256;n++){var s=n%r,o=t[s>>>2]>>>24-s%4*8&255;a=(a+i[n]+o)%256;var u=i[n];i[n]=i[a],i[a]=u}this._i=this._j=0},_doProcessBlock:function(e,t){e[t]^=a.call(this)},keySize:8,ivSize:0});function a(){for(var e=this._S,t=this._i,r=this._j,i=0,n=0;n<4;n++){r=(r+e[t=(t+1)%256])%256;var a=e[t];e[t]=e[r],e[r]=a,i|=e[(e[t]+e[r])%256]<<24-8*n}return this._i=t,this._j=r,i}t.RC4=r._createHelper(n);var s=i.RC4Drop=n.extend({cfg:n.cfg.extend({drop:192}),_doReset:function(){n._doReset.call(this);for(var e=this.cfg.drop;e>0;e--)a.call(this)}});t.RC4Drop=r._createHelper(s)}(),e.mode.CTRGladman=function(){var t=e.lib.BlockCipherMode.extend();function r(e){if(255===(e>>24&255)){var t=e>>16&255,r=e>>8&255,i=255&e;255===t?(t=0,255===r?(r=0,255===i?i=0:++i):++r):++t,e=0,e+=t<<16,e+=r<<8,e+=i}else e+=1<<24;return e}function i(e){return 0===(e[0]=r(e[0]))&&(e[1]=r(e[1])),e}var n=t.Encryptor=t.extend({processBlock:function(e,t){var r=this._cipher,n=r.blockSize,a=this._iv,s=this._counter;a&&(s=this._counter=a.slice(0),this._iv=void 0),i(s);var o=s.slice(0);r.encryptBlock(o,0);for(var u=0;u<n;u++)e[t+u]^=o[u]}});return t.Decryptor=n,t}(),function(){var t=e,r=t.lib.StreamCipher,i=t.algo,n=[],a=[],s=[],o=i.Rabbit=r.extend({_doReset:function(){for(var e=this._key.words,t=this.cfg.iv,r=0;r<4;r++)e[r]=16711935&(e[r]<<8|e[r]>>>24)|4278255360&(e[r]<<24|e[r]>>>8);var i=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],n=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];for(this._b=0,r=0;r<4;r++)u.call(this);for(r=0;r<8;r++)n[r]^=i[r+4&7];if(t){var a=t.words,s=a[0],o=a[1],c=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),d=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),h=c>>>16|4294901760&d,l=d<<16|65535&c;for(n[0]^=c,n[1]^=h,n[2]^=d,n[3]^=l,n[4]^=c,n[5]^=h,n[6]^=d,n[7]^=l,r=0;r<4;r++)u.call(this)}},_doProcessBlock:function(e,t){var r=this._X;u.call(this),n[0]=r[0]^r[5]>>>16^r[3]<<16,n[1]=r[2]^r[7]>>>16^r[5]<<16,n[2]=r[4]^r[1]>>>16^r[7]<<16,n[3]=r[6]^r[3]>>>16^r[1]<<16;for(var i=0;i<4;i++)n[i]=16711935&(n[i]<<8|n[i]>>>24)|4278255360&(n[i]<<24|n[i]>>>8),e[t+i]^=n[i]},blockSize:4,ivSize:2});function u(){for(var e=this._X,t=this._C,r=0;r<8;r++)a[r]=t[r];for(t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<a[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<a[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<a[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<a[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<a[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<a[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<a[6]>>>0?1:0)|0,this._b=t[7]>>>0<a[7]>>>0?1:0,r=0;r<8;r++){var i=e[r]+t[r],n=65535&i,o=i>>>16,u=((n*n>>>17)+n*o>>>15)+o*o,c=((4294901760&i)*i|0)+((65535&i)*i|0);s[r]=u^c}e[0]=s[0]+(s[7]<<16|s[7]>>>16)+(s[6]<<16|s[6]>>>16)|0,e[1]=s[1]+(s[0]<<8|s[0]>>>24)+s[7]|0,e[2]=s[2]+(s[1]<<16|s[1]>>>16)+(s[0]<<16|s[0]>>>16)|0,e[3]=s[3]+(s[2]<<8|s[2]>>>24)+s[1]|0,e[4]=s[4]+(s[3]<<16|s[3]>>>16)+(s[2]<<16|s[2]>>>16)|0,e[5]=s[5]+(s[4]<<8|s[4]>>>24)+s[3]|0,e[6]=s[6]+(s[5]<<16|s[5]>>>16)+(s[4]<<16|s[4]>>>16)|0,e[7]=s[7]+(s[6]<<8|s[6]>>>24)+s[5]|0}t.Rabbit=r._createHelper(o)}(),e.mode.CTR=function(){var t=e.lib.BlockCipherMode.extend(),r=t.Encryptor=t.extend({processBlock:function(e,t){var r=this._cipher,i=r.blockSize,n=this._iv,a=this._counter;n&&(a=this._counter=n.slice(0),this._iv=void 0);var s=a.slice(0);r.encryptBlock(s,0),a[i-1]=a[i-1]+1|0;for(var o=0;o<i;o++)e[t+o]^=s[o]}});return t.Decryptor=r,t}(),function(){var t=e,r=t.lib.StreamCipher,i=t.algo,n=[],a=[],s=[],o=i.RabbitLegacy=r.extend({_doReset:function(){var e=this._key.words,t=this.cfg.iv,r=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],i=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];this._b=0;for(var n=0;n<4;n++)u.call(this);for(n=0;n<8;n++)i[n]^=r[n+4&7];if(t){var a=t.words,s=a[0],o=a[1],c=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),d=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),h=c>>>16|4294901760&d,l=d<<16|65535&c;for(i[0]^=c,i[1]^=h,i[2]^=d,i[3]^=l,i[4]^=c,i[5]^=h,i[6]^=d,i[7]^=l,n=0;n<4;n++)u.call(this)}},_doProcessBlock:function(e,t){var r=this._X;u.call(this),n[0]=r[0]^r[5]>>>16^r[3]<<16,n[1]=r[2]^r[7]>>>16^r[5]<<16,n[2]=r[4]^r[1]>>>16^r[7]<<16,n[3]=r[6]^r[3]>>>16^r[1]<<16;for(var i=0;i<4;i++)n[i]=16711935&(n[i]<<8|n[i]>>>24)|4278255360&(n[i]<<24|n[i]>>>8),e[t+i]^=n[i]},blockSize:4,ivSize:2});function u(){for(var e=this._X,t=this._C,r=0;r<8;r++)a[r]=t[r];for(t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<a[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<a[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<a[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<a[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<a[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<a[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<a[6]>>>0?1:0)|0,this._b=t[7]>>>0<a[7]>>>0?1:0,r=0;r<8;r++){var i=e[r]+t[r],n=65535&i,o=i>>>16,u=((n*n>>>17)+n*o>>>15)+o*o,c=((4294901760&i)*i|0)+((65535&i)*i|0);s[r]=u^c}e[0]=s[0]+(s[7]<<16|s[7]>>>16)+(s[6]<<16|s[6]>>>16)|0,e[1]=s[1]+(s[0]<<8|s[0]>>>24)+s[7]|0,e[2]=s[2]+(s[1]<<16|s[1]>>>16)+(s[0]<<16|s[0]>>>16)|0,e[3]=s[3]+(s[2]<<8|s[2]>>>24)+s[1]|0,e[4]=s[4]+(s[3]<<16|s[3]>>>16)+(s[2]<<16|s[2]>>>16)|0,e[5]=s[5]+(s[4]<<8|s[4]>>>24)+s[3]|0,e[6]=s[6]+(s[5]<<16|s[5]>>>16)+(s[4]<<16|s[4]>>>16)|0,e[7]=s[7]+(s[6]<<8|s[6]>>>24)+s[5]|0}t.RabbitLegacy=r._createHelper(o)}(),e.pad.ZeroPadding={pad:function(e,t){var r=4*t;e.clamp(),e.sigBytes+=r-(e.sigBytes%r||r)},unpad:function(e){for(var t=e.words,r=e.sigBytes-1;!(t[r>>>2]>>>24-r%4*8&255);)r--;e.sigBytes=r+1}},e}()},function(e,t,r){"use strict";function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}r.d(t,"a",(function(){return i}))},function(e,t,r){"use strict";function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}r.d(t,"a",(function(){return i}))},function(e,t,r){"use strict";function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}r.d(t,"a",(function(){return i}))},function(e,t,r){"use strict";function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}r.d(t,"a",(function(){return i}))},function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var i=r(78);var n=r(96);function a(e){return function(e){if(Array.isArray(e))return Object(i.a)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Object(n.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},function(e,t,r){"use strict";var i=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;function s(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach((function(e){i[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(n){return!1}}()?Object.assign:function(e,t){for(var r,o,u=s(e),c=1;c<arguments.length;c++){for(var d in r=Object(arguments[c]))n.call(r,d)&&(u[d]=r[d]);if(i){o=i(r);for(var h=0;h<o.length;h++)a.call(r,o[h])&&(u[o[h]]=r[o[h]])}}return u}},function(e,t,r){e.exports=n;var i=r(120).EventEmitter;function n(){i.call(this)}r(56)(n,i),n.Readable=r(74),n.Writable=r(211),n.Duplex=r(212),n.Transform=r(213),n.PassThrough=r(214),n.Stream=n,n.prototype.pipe=function(e,t){var r=this;function n(t){e.writable&&!1===e.write(t)&&r.pause&&r.pause()}function a(){r.readable&&r.resume&&r.resume()}r.on("data",n),e.on("drain",a),e._isStdio||t&&!1===t.end||(r.on("end",o),r.on("close",u));var s=!1;function o(){s||(s=!0,e.end())}function u(){s||(s=!0,"function"===typeof e.destroy&&e.destroy())}function c(e){if(d(),0===i.listenerCount(this,"error"))throw e}function d(){r.removeListener("data",n),e.removeListener("drain",a),r.removeListener("end",o),r.removeListener("close",u),r.removeListener("error",c),e.removeListener("error",c),r.removeListener("end",d),r.removeListener("close",d),e.removeListener("close",d)}return r.on("error",c),e.on("error",c),r.on("end",d),r.on("close",d),e.on("close",d),e.emit("pipe",r),e}},function(e,t,r){"use strict";(function(t){"undefined"===typeof t||!t.version||0===t.version.indexOf("v0.")||0===t.version.indexOf("v1.")&&0!==t.version.indexOf("v1.8.")?e.exports={nextTick:function(e,r,i,n){if("function"!==typeof e)throw new TypeError('"callback" argument must be a function');var a,s,o=arguments.length;switch(o){case 0:case 1:return t.nextTick(e);case 2:return t.nextTick((function(){e.call(null,r)}));case 3:return t.nextTick((function(){e.call(null,r,i)}));case 4:return t.nextTick((function(){e.call(null,r,i,n)}));default:for(a=new Array(o-1),s=0;s<a.length;)a[s++]=arguments[s];return t.nextTick((function(){e.apply(null,a)}))}}}:e.exports=t}).call(this,r(46))},function(e,t,r){"use strict";var i=r(219),n=r(220);function a(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}t.parse=b,t.resolve=function(e,t){return b(e,!1,!0).resolve(t)},t.resolveObject=function(e,t){return e?b(e,!1,!0).resolveObject(t):t},t.format=function(e){n.isString(e)&&(e=b(e));return e instanceof a?e.format():a.prototype.format.call(e)},t.Url=a;var s=/^([a-z0-9.+-]+:)/i,o=/:[0-9]*$/,u=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,c=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),d=["'"].concat(c),h=["%","/","?",";","#"].concat(d),l=["/","?","#"],f=/^[+a-z0-9A-Z_-]{0,63}$/,p=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,v={javascript:!0,"javascript:":!0},m={javascript:!0,"javascript:":!0},g={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},y=r(221);function b(e,t,r){if(e&&n.isObject(e)&&e instanceof a)return e;var i=new a;return i.parse(e,t,r),i}a.prototype.parse=function(e,t,r){if(!n.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var a=e.indexOf("?"),o=-1!==a&&a<e.indexOf("#")?"?":"#",c=e.split(o);c[0]=c[0].replace(/\\/g,"/");var b=e=c.join(o);if(b=b.trim(),!r&&1===e.split("#").length){var x=u.exec(b);if(x)return this.path=b,this.href=b,this.pathname=x[1],x[2]?(this.search=x[2],this.query=t?y.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var k=s.exec(b);if(k){var w=(k=k[0]).toLowerCase();this.protocol=w,b=b.substr(k.length)}if(r||k||b.match(/^\/\/[^@\/]+@[^@\/]+/)){var _="//"===b.substr(0,2);!_||k&&m[k]||(b=b.substr(2),this.slashes=!0)}if(!m[k]&&(_||k&&!g[k])){for(var S,O,T=-1,C=0;C<l.length;C++){-1!==(I=b.indexOf(l[C]))&&(-1===T||I<T)&&(T=I)}-1!==(O=-1===T?b.lastIndexOf("@"):b.lastIndexOf("@",T))&&(S=b.slice(0,O),b=b.slice(O+1),this.auth=decodeURIComponent(S)),T=-1;for(C=0;C<h.length;C++){var I;-1!==(I=b.indexOf(h[C]))&&(-1===T||I<T)&&(T=I)}-1===T&&(T=b.length),this.host=b.slice(0,T),b=b.slice(T),this.parseHost(),this.hostname=this.hostname||"";var M="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!M)for(var A=this.hostname.split(/\./),E=(C=0,A.length);C<E;C++){var N=A[C];if(N&&!N.match(f)){for(var P="",D=0,L=N.length;D<L;D++)N.charCodeAt(D)>127?P+="x":P+=N[D];if(!P.match(f)){var B=A.slice(0,C),R=A.slice(C+1),V=N.match(p);V&&(B.push(V[1]),R.unshift(V[2])),R.length&&(b="/"+R.join(".")+b),this.hostname=B.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),M||(this.hostname=i.toASCII(this.hostname));var G=this.port?":"+this.port:"",F=this.hostname||"";this.host=F+G,this.href+=this.host,M&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==b[0]&&(b="/"+b))}if(!v[w])for(C=0,E=d.length;C<E;C++){var q=d[C];if(-1!==b.indexOf(q)){var j=encodeURIComponent(q);j===q&&(j=escape(q)),b=b.split(q).join(j)}}var z=b.indexOf("#");-1!==z&&(this.hash=b.substr(z),b=b.slice(0,z));var H=b.indexOf("?");if(-1!==H?(this.search=b.substr(H),this.query=b.substr(H+1),t&&(this.query=y.parse(this.query)),b=b.slice(0,H)):t&&(this.search="",this.query={}),b&&(this.pathname=b),g[w]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){G=this.pathname||"";var U=this.search||"";this.path=G+U}return this.href=this.format(),this},a.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",r=this.pathname||"",i=this.hash||"",a=!1,s="";this.host?a=e+this.host:this.hostname&&(a=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(a+=":"+this.port)),this.query&&n.isObject(this.query)&&Object.keys(this.query).length&&(s=y.stringify(this.query));var o=this.search||s&&"?"+s||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||g[t])&&!1!==a?(a="//"+(a||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):a||(a=""),i&&"#"!==i.charAt(0)&&(i="#"+i),o&&"?"!==o.charAt(0)&&(o="?"+o),t+a+(r=r.replace(/[?#]/g,(function(e){return encodeURIComponent(e)})))+(o=o.replace("#","%23"))+i},a.prototype.resolve=function(e){return this.resolveObject(b(e,!1,!0)).format()},a.prototype.resolveObject=function(e){if(n.isString(e)){var t=new a;t.parse(e,!1,!0),e=t}for(var r=new a,i=Object.keys(this),s=0;s<i.length;s++){var o=i[s];r[o]=this[o]}if(r.hash=e.hash,""===e.href)return r.href=r.format(),r;if(e.slashes&&!e.protocol){for(var u=Object.keys(e),c=0;c<u.length;c++){var d=u[c];"protocol"!==d&&(r[d]=e[d])}return g[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(e.protocol&&e.protocol!==r.protocol){if(!g[e.protocol]){for(var h=Object.keys(e),l=0;l<h.length;l++){var f=h[l];r[f]=e[f]}return r.href=r.format(),r}if(r.protocol=e.protocol,e.host||m[e.protocol])r.pathname=e.pathname;else{for(var p=(e.pathname||"").split("/");p.length&&!(e.host=p.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==p[0]&&p.unshift(""),p.length<2&&p.unshift(""),r.pathname=p.join("/")}if(r.search=e.search,r.query=e.query,r.host=e.host||"",r.auth=e.auth,r.hostname=e.hostname||e.host,r.port=e.port,r.pathname||r.search){var v=r.pathname||"",y=r.search||"";r.path=v+y}return r.slashes=r.slashes||e.slashes,r.href=r.format(),r}var b=r.pathname&&"/"===r.pathname.charAt(0),x=e.host||e.pathname&&"/"===e.pathname.charAt(0),k=x||b||r.host&&e.pathname,w=k,_=r.pathname&&r.pathname.split("/")||[],S=(p=e.pathname&&e.pathname.split("/")||[],r.protocol&&!g[r.protocol]);if(S&&(r.hostname="",r.port=null,r.host&&(""===_[0]?_[0]=r.host:_.unshift(r.host)),r.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===p[0]?p[0]=e.host:p.unshift(e.host)),e.host=null),k=k&&(""===p[0]||""===_[0])),x)r.host=e.host||""===e.host?e.host:r.host,r.hostname=e.hostname||""===e.hostname?e.hostname:r.hostname,r.search=e.search,r.query=e.query,_=p;else if(p.length)_||(_=[]),_.pop(),_=_.concat(p),r.search=e.search,r.query=e.query;else if(!n.isNullOrUndefined(e.search)){if(S)r.hostname=r.host=_.shift(),(M=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=M.shift(),r.host=r.hostname=M.shift());return r.search=e.search,r.query=e.query,n.isNull(r.pathname)&&n.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!_.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var O=_.slice(-1)[0],T=(r.host||e.host||_.length>1)&&("."===O||".."===O)||""===O,C=0,I=_.length;I>=0;I--)"."===(O=_[I])?_.splice(I,1):".."===O?(_.splice(I,1),C++):C&&(_.splice(I,1),C--);if(!k&&!w)for(;C--;C)_.unshift("..");!k||""===_[0]||_[0]&&"/"===_[0].charAt(0)||_.unshift(""),T&&"/"!==_.join("/").substr(-1)&&_.push("");var M,A=""===_[0]||_[0]&&"/"===_[0].charAt(0);S&&(r.hostname=r.host=A?"":_.length?_.shift():"",(M=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=M.shift(),r.host=r.hostname=M.shift()));return(k=k||r.host&&_.length)&&!A&&_.unshift(""),_.length?r.pathname=_.join("/"):(r.pathname=null,r.path=null),n.isNull(r.pathname)&&n.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=e.auth||r.auth,r.slashes=r.slashes||e.slashes,r.href=r.format(),r},a.prototype.parseHost=function(){var e=this.host,t=o.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,r){"use strict";var i="undefined"!==typeof Uint8Array&&"undefined"!==typeof Uint16Array&&"undefined"!==typeof Int32Array;function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var r=t.shift();if(r){if("object"!==typeof r)throw new TypeError(r+"must be non-object");for(var i in r)n(r,i)&&(e[i]=r[i])}}return e},t.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var a={arraySet:function(e,t,r,i,n){if(t.subarray&&e.subarray)e.set(t.subarray(r,r+i),n);else for(var a=0;a<i;a++)e[n+a]=t[r+a]},flattenChunks:function(e){var t,r,i,n,a,s;for(i=0,t=0,r=e.length;t<r;t++)i+=e[t].length;for(s=new Uint8Array(i),n=0,t=0,r=e.length;t<r;t++)a=e[t],s.set(a,n),n+=a.length;return s}},s={arraySet:function(e,t,r,i,n){for(var a=0;a<i;a++)e[n+a]=t[r+a]},flattenChunks:function(e){return[].concat.apply([],e)}};t.setTyped=function(e){e?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,a)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,s))},t.setTyped(i)},function(e,t,r){"use strict";var i=t;i.base=r(256),i.short=r(257),i.mont=r(258),i.edwards=r(259)},function(e,t,r){var i=r(394),n=r(395),a=r(396),s=r(397),o=r(398);function u(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}u.prototype.clear=i,u.prototype.delete=n,u.prototype.get=a,u.prototype.has=s,u.prototype.set=o,e.exports=u},function(e,t,r){var i=r(167);e.exports=function(e,t){for(var r=e.length;r--;)if(i(e[r][0],t))return r;return-1}},function(e,t,r){var i=r(130),n=r(405),a=r(406),s=i?i.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":s&&s in Object(e)?n(e):a(e)}},function(e,t,r){var i=r(68)(Object,"create");e.exports=i},function(e,t,r){var i=r(418);e.exports=function(e,t){var r=e.__data__;return i(t)?r["string"==typeof t?"string":"hash"]:r.map}},function(e,t){e.exports=function(e){return null!=e&&"object"==typeof e}},function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var i=r(78);function n(e,t){if(e){if("string"===typeof e)return Object(i.a)(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Object(i.a)(e,t):void 0}}},function(e,t,r){"use strict";function i(e){if(Array.isArray(e))return e}r.d(t,"a",(function(){return i}))},function(e,t,r){"use strict";function i(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}r.d(t,"a",(function(){return i}))},function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var i=r(0);function n(e,t,r){var n=i.useRef({});return"value"in n.current&&!r(n.current.condition,t)||(n.current.value=e(),n.current.condition=t),n.current.value}},function(e,t,r){"use strict";e.exports=r(390)},function(e,t,r){"use strict";(function(e){var r=function(){if("undefined"!==typeof Map)return Map;function e(e,t){var r=-1;return e.some((function(e,i){return e[0]===t&&(r=i,!0)})),r}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var r=e(this.__entries__,t),i=this.__entries__[r];return i&&i[1]},t.prototype.set=function(t,r){var i=e(this.__entries__,t);~i?this.__entries__[i][1]=r:this.__entries__.push([t,r])},t.prototype.delete=function(t){var r=this.__entries__,i=e(r,t);~i&&r.splice(i,1)},t.prototype.has=function(t){return!!~e(this.__entries__,t)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(e,t){void 0===t&&(t=null);for(var r=0,i=this.__entries__;r<i.length;r++){var n=i[r];e.call(t,n[1],n[0])}},t}()}(),i="undefined"!==typeof window&&"undefined"!==typeof document&&window.document===document,n="undefined"!==typeof e&&e.Math===Math?e:"undefined"!==typeof self&&self.Math===Math?self:"undefined"!==typeof window&&window.Math===Math?window:Function("return this")(),a="function"===typeof requestAnimationFrame?requestAnimationFrame.bind(n):function(e){return setTimeout((function(){return e(Date.now())}),1e3/60)};var s=["top","right","bottom","left","width","height","size","weight"],o="undefined"!==typeof MutationObserver,u=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(e,t){var r=!1,i=!1,n=0;function s(){r&&(r=!1,e()),i&&u()}function o(){a(s)}function u(){var e=Date.now();if(r){if(e-n<2)return;i=!0}else r=!0,i=!1,setTimeout(o,t);n=e}return u}(this.refresh.bind(this),20)}return e.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},e.prototype.removeObserver=function(e){var t=this.observers_,r=t.indexOf(e);~r&&t.splice(r,1),!t.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},e.prototype.updateObservers_=function(){var e=this.observers_.filter((function(e){return e.gatherActive(),e.hasActive()}));return e.forEach((function(e){return e.broadcastActive()})),e.length>0},e.prototype.connect_=function(){i&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),o?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){i&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(e){var t=e.propertyName,r=void 0===t?"":t;s.some((function(e){return!!~r.indexOf(e)}))&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),c=function(e,t){for(var r=0,i=Object.keys(t);r<i.length;r++){var n=i[r];Object.defineProperty(e,n,{value:t[n],enumerable:!1,writable:!1,configurable:!0})}return e},d=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||n},h=g(0,0,0,0);function l(e){return parseFloat(e)||0}function f(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return t.reduce((function(t,r){return t+l(e["border-"+r+"-width"])}),0)}function p(e){var t=e.clientWidth,r=e.clientHeight;if(!t&&!r)return h;var i=d(e).getComputedStyle(e),n=function(e){for(var t={},r=0,i=["top","right","bottom","left"];r<i.length;r++){var n=i[r],a=e["padding-"+n];t[n]=l(a)}return t}(i),a=n.left+n.right,s=n.top+n.bottom,o=l(i.width),u=l(i.height);if("border-box"===i.boxSizing&&(Math.round(o+a)!==t&&(o-=f(i,"left","right")+a),Math.round(u+s)!==r&&(u-=f(i,"top","bottom")+s)),!function(e){return e===d(e).document.documentElement}(e)){var c=Math.round(o+a)-t,p=Math.round(u+s)-r;1!==Math.abs(c)&&(o-=c),1!==Math.abs(p)&&(u-=p)}return g(n.left,n.top,o,u)}var v="undefined"!==typeof SVGGraphicsElement?function(e){return e instanceof d(e).SVGGraphicsElement}:function(e){return e instanceof d(e).SVGElement&&"function"===typeof e.getBBox};function m(e){return i?v(e)?function(e){var t=e.getBBox();return g(0,0,t.width,t.height)}(e):p(e):h}function g(e,t,r,i){return{x:e,y:t,width:r,height:i}}var y=function(){function e(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=g(0,0,0,0),this.target=e}return e.prototype.isActive=function(){var e=m(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},e}(),b=function(e,t){var r=function(e){var t=e.x,r=e.y,i=e.width,n=e.height,a="undefined"!==typeof DOMRectReadOnly?DOMRectReadOnly:Object,s=Object.create(a.prototype);return c(s,{x:t,y:r,width:i,height:n,top:r,right:t+i,bottom:n+r,left:t}),s}(t);c(this,{target:e,contentRect:r})},x=function(){function e(e,t,i){if(this.activeObservations_=[],this.observations_=new r,"function"!==typeof e)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=i}return e.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!==typeof Element&&Element instanceof Object){if(!(e instanceof d(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new y(e)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!==typeof Element&&Element instanceof Object){if(!(e instanceof d(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach((function(t){t.isActive()&&e.activeObservations_.push(t)}))},e.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map((function(e){return new b(e.target,e.broadcastRect())}));this.callback_.call(e,t,e),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),k="undefined"!==typeof WeakMap?new WeakMap:new r,w=function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var r=u.getInstance(),i=new x(t,r,this);k.set(this,i)};["observe","unobserve","disconnect"].forEach((function(e){w.prototype[e]=function(){var t;return(t=k.get(this))[e].apply(t,arguments)}}));var _="undefined"!==typeof n.ResizeObserver?n.ResizeObserver:w;t.a=_}).call(this,r(35))},function(e,t,r){"use strict";function i(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}r.d(t,"a",(function(){return i}))},function(e,t,r){"use strict";t.a=function(){if("undefined"===typeof navigator||"undefined"===typeof window)return!1;var e=navigator.userAgent||navigator.vendor||window.opera;return!(!/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)&&!/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(null===e||void 0===e?void 0:e.substr(0,4)))}},function(e,t,r){"use strict";function i(e){if(Array.isArray(e))return e}r.d(t,"a",(function(){return i}))},function(e,t,r){"use strict";function i(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}r.d(t,"a",(function(){return i}))},function(e,t,r){"use strict";function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}r.d(t,"a",(function(){return i}))},function(e,t,r){"use strict";r.d(t,"a",(function(){return u}));var i=r(49),n="rc-util-key";function a(e){return e.attachTo?e.attachTo:document.querySelector("head")||document.body}function s(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!Object(i.a)())return null;var n,s=document.createElement("style");(null===(t=r.csp)||void 0===t?void 0:t.nonce)&&(s.nonce=null===(n=r.csp)||void 0===n?void 0:n.nonce);s.innerHTML=e;var o=a(r),u=o.firstChild;return r.prepend&&u?o.insertBefore(s,u):o.appendChild(s),s}var o=new Map;function u(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=a(r);if(!o.has(i)){var u=s("",r),c=u.parentNode;o.set(i,c),c.removeChild(u)}var d=Array.from(o.get(i).children).find((function(e){return"STYLE"===e.tagName&&e[n]===t}));if(d){var h,l,f;if((null===(h=r.csp)||void 0===h?void 0:h.nonce)&&d.nonce!==(null===(l=r.csp)||void 0===l?void 0:l.nonce))d.nonce=null===(f=r.csp)||void 0===f?void 0:f.nonce;return d.innerHTML!==e&&(d.innerHTML=e),d}var p=s(e,r);return p[n]=t,p}},function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var i=function(e,t,r){return void 0!==r?r:"".concat(e,"-").concat(t)}},function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var i=r(81);function n(e,t){if(e){if("string"===typeof e)return Object(i.a)(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Object(i.a)(e,t):void 0}}},function(e,t,r){"use strict";function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}function o(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e){return(h="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){return!t||"object"!==h(t)&&"function"!==typeof t?u(e):t}function f(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,i=d(e);if(t){var n=d(this).constructor;r=Reflect.construct(i,arguments,n)}else r=i.apply(this,arguments);return l(this,r)}}var p=r(0),v=r.n(p),m=r(48),g=r.n(m),y=r(23);function b(e,t){return!!e&&e.contains(t)}var x=r(58),k=r(26);function w(e,t,r,i){var n=g.a.unstable_batchedUpdates?function(e){g.a.unstable_batchedUpdates(r,e)}:r;return e.addEventListener&&e.addEventListener(t,n,i),{remove:function(){e.removeEventListener&&e.removeEventListener(t,n)}}}var _=r(49),S=Object(p.forwardRef)((function(e,t){var r=e.didUpdate,i=e.getContainer,n=e.children,a=Object(p.useRef)();Object(p.useImperativeHandle)(t,(function(){return{}}));var s=Object(p.useRef)(!1);return!s.current&&Object(_.a)()&&(a.current=i(),s.current=!0),Object(p.useEffect)((function(){null===r||void 0===r||r(e)})),Object(p.useEffect)((function(){return function(){var e,t;null===(e=a.current)||void 0===e||null===(t=e.parentNode)||void 0===t||t.removeChild(a.current)}}),[]),a.current?g.a.createPortal(n,a.current):null})),O=r(14),T=r.n(O);function C(e,t,r){return r?e[0]===t[0]:e[0]===t[0]&&e[1]===t[1]}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function M(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var r=[],i=!0,n=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(i=(s=o.next()).done)&&(r.push(s.value),!t||r.length!==t);i=!0);}catch(u){n=!0,a=u}finally{try{i||null==o.return||o.return()}finally{if(n)throw a}}return r}}(e,t)||function(e,t){if(e){if("string"===typeof e)return I(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?I(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e,t){if(null==e)return{};var r,i,n=function(e,t){if(null==e)return{};var r,i,n={},a=Object.keys(e);for(i=0;i<a.length;i++)r=a[i],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var E=r(103),N=r(52);function P(e){var t=e.prefixCls,r=e.motion,i=e.animation,n=e.transitionName;return r||(i?{motionName:"".concat(t,"-").concat(i)}:n?{motionName:n}:null)}function D(e){var t=e.prefixCls,r=e.visible,i=e.zIndex,n=e.mask,o=e.maskMotion,u=e.maskAnimation,c=e.maskTransitionName;if(!n)return null;var d={};return(o||c||u)&&(d=a({motionAppear:!0},P({motion:o,prefixCls:t,transitionName:c,animation:u}))),p.createElement(N.a,s({},d,{visible:r,removeOnLeave:!0}),(function(e){var r=e.className;return p.createElement("div",{style:{zIndex:i},className:T()("".concat(t,"-mask"),r)})}))}var L,B=r(16),R=r(43);function V(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function G(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?V(Object(r),!0).forEach((function(t){q(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):V(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function F(e){return(F="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function q(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var j={Webkit:"-webkit-",Moz:"-moz-",ms:"-ms-",O:"-o-"};function z(){if(void 0!==L)return L;L="";var e=document.createElement("p").style;for(var t in j)t+"Transform"in e&&(L=t);return L}function H(){return z()?"".concat(z(),"TransitionProperty"):"transitionProperty"}function U(){return z()?"".concat(z(),"Transform"):"transform"}function W(e,t){var r=H();r&&(e.style[r]=t,"transitionProperty"!==r&&(e.style.transitionProperty=t))}function K(e,t){var r=U();r&&(e.style[r]=t,"transform"!==r&&(e.style.transform=t))}var X,Y=/matrix\((.*)\)/,Z=/matrix3d\((.*)\)/;function Q(e){var t=e.style.display;e.style.display="none",e.offsetHeight,e.style.display=t}function $(e,t,r){var i=r;if("object"!==F(t))return"undefined"!==typeof i?("number"===typeof i&&(i="".concat(i,"px")),void(e.style[t]=i)):X(e,t);for(var n in t)t.hasOwnProperty(n)&&$(e,n,t[n])}function J(e,t){var r=e["page".concat(t?"Y":"X","Offset")],i="scroll".concat(t?"Top":"Left");if("number"!==typeof r){var n=e.document;"number"!==typeof(r=n.documentElement[i])&&(r=n.body[i])}return r}function ee(e){return J(e)}function te(e){return J(e,!0)}function re(e){var t=function(e){var t,r,i,n=e.ownerDocument,a=n.body,s=n&&n.documentElement;return r=(t=e.getBoundingClientRect()).left,i=t.top,{left:r-=s.clientLeft||a.clientLeft||0,top:i-=s.clientTop||a.clientTop||0}}(e),r=e.ownerDocument,i=r.defaultView||r.parentWindow;return t.left+=ee(i),t.top+=te(i),t}function ie(e){return null!==e&&void 0!==e&&e==e.window}function ne(e){return ie(e)?e.document:9===e.nodeType?e:e.ownerDocument}var ae=new RegExp("^(".concat(/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,")(?!px)[a-z%]+$"),"i"),se=/^(top|right|bottom|left)$/;function oe(e,t){return"left"===e?t.useCssRight?"right":e:t.useCssBottom?"bottom":e}function ue(e){return"left"===e?"right":"right"===e?"left":"top"===e?"bottom":"bottom"===e?"top":void 0}function ce(e,t,r){"static"===$(e,"position")&&(e.style.position="relative");var i=-999,n=-999,a=oe("left",r),s=oe("top",r),o=ue(a),u=ue(s);"left"!==a&&(i=999),"top"!==s&&(n=999);var c,d="",h=re(e);("left"in t||"top"in t)&&(d=(c=e).style.transitionProperty||c.style[H()]||"",W(e,"none")),"left"in t&&(e.style[o]="",e.style[a]="".concat(i,"px")),"top"in t&&(e.style[u]="",e.style[s]="".concat(n,"px")),Q(e);var l=re(e),f={};for(var p in t)if(t.hasOwnProperty(p)){var v=oe(p,r),m="left"===p?i:n,g=h[p]-l[p];f[v]=v===p?m+g:m-g}$(e,f),Q(e),("left"in t||"top"in t)&&W(e,d);var y={};for(var b in t)if(t.hasOwnProperty(b)){var x=oe(b,r),k=t[b]-h[b];y[x]=b===x?f[x]+k:f[x]-k}$(e,y)}function de(e,t){var r=re(e),i=function(e){var t=window.getComputedStyle(e,null),r=t.getPropertyValue("transform")||t.getPropertyValue(U());if(r&&"none"!==r){var i=r.replace(/[^0-9\-.,]/g,"").split(",");return{x:parseFloat(i[12]||i[4],0),y:parseFloat(i[13]||i[5],0)}}return{x:0,y:0}}(e),n={x:i.x,y:i.y};"left"in t&&(n.x=i.x+t.left-r.left),"top"in t&&(n.y=i.y+t.top-r.top),function(e,t){var r=window.getComputedStyle(e,null),i=r.getPropertyValue("transform")||r.getPropertyValue(U());if(i&&"none"!==i){var n,a=i.match(Y);a?((n=(a=a[1]).split(",").map((function(e){return parseFloat(e,10)})))[4]=t.x,n[5]=t.y,K(e,"matrix(".concat(n.join(","),")"))):((n=i.match(Z)[1].split(",").map((function(e){return parseFloat(e,10)})))[12]=t.x,n[13]=t.y,K(e,"matrix3d(".concat(n.join(","),")")))}else K(e,"translateX(".concat(t.x,"px) translateY(").concat(t.y,"px) translateZ(0)"))}(e,n)}function he(e,t){for(var r=0;r<e.length;r++)t(e[r])}function le(e){return"border-box"===X(e,"boxSizing")}"undefined"!==typeof window&&(X=window.getComputedStyle?function(e,t,r){var i=r,n="",a=ne(e);return(i=i||a.defaultView.getComputedStyle(e,null))&&(n=i.getPropertyValue(t)||i[t]),n}:function(e,t){var r=e.currentStyle&&e.currentStyle[t];if(ae.test(r)&&!se.test(t)){var i=e.style,n=i.left,a=e.runtimeStyle.left;e.runtimeStyle.left=e.currentStyle.left,i.left="fontSize"===t?"1em":r||0,r=i.pixelLeft+"px",i.left=n,e.runtimeStyle.left=a}return""===r?"auto":r});var fe=["margin","border","padding"];function pe(e,t,r){var i,n={},a=e.style;for(i in t)t.hasOwnProperty(i)&&(n[i]=a[i],a[i]=t[i]);for(i in r.call(e),t)t.hasOwnProperty(i)&&(a[i]=n[i])}function ve(e,t,r){var i,n,a,s=0;for(n=0;n<t.length;n++)if(i=t[n])for(a=0;a<r.length;a++){var o=void 0;o="border"===i?"".concat(i).concat(r[a],"Width"):i+r[a],s+=parseFloat(X(e,o))||0}return s}var me={getParent:function(e){var t=e;do{t=11===t.nodeType&&t.host?t.host:t.parentNode}while(t&&1!==t.nodeType&&9!==t.nodeType);return t}};function ge(e,t,r){var i=r;if(ie(e))return"width"===t?me.viewportWidth(e):me.viewportHeight(e);if(9===e.nodeType)return"width"===t?me.docWidth(e):me.docHeight(e);var n="width"===t?["Left","Right"]:["Top","Bottom"],a="width"===t?e.getBoundingClientRect().width:e.getBoundingClientRect().height,s=le(e),o=0;(null===a||void 0===a||a<=0)&&(a=void 0,(null===(o=X(e,t))||void 0===o||Number(o)<0)&&(o=e.style[t]||0),o=parseFloat(o)||0),void 0===i&&(i=s?1:-1);var u=void 0!==a||s,c=a||o;return-1===i?u?c-ve(e,["border","padding"],n):o:u?1===i?c:c+(2===i?-ve(e,["border"],n):ve(e,["margin"],n)):o+ve(e,fe.slice(i),n)}he(["Width","Height"],(function(e){me["doc".concat(e)]=function(t){var r=t.document;return Math.max(r.documentElement["scroll".concat(e)],r.body["scroll".concat(e)],me["viewport".concat(e)](r))},me["viewport".concat(e)]=function(t){var r="client".concat(e),i=t.document,n=i.body,a=i.documentElement[r];return"CSS1Compat"===i.compatMode&&a||n&&n[r]||a}}));var ye={position:"absolute",visibility:"hidden",display:"block"};function be(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i,n=t[0];return 0!==n.offsetWidth?i=ge.apply(void 0,t):pe(n,ye,(function(){i=ge.apply(void 0,t)})),i}function xe(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e}he(["width","height"],(function(e){var t=e.charAt(0).toUpperCase()+e.slice(1);me["outer".concat(t)]=function(t,r){return t&&be(t,e,r?0:1)};var r="width"===e?["Left","Right"]:["Top","Bottom"];me[e]=function(t,i){var n=i;return void 0!==n?t?(le(t)&&(n+=ve(t,["padding","border"],r)),$(t,e,n)):void 0:t&&be(t,e,-1)}}));var ke={getWindow:function(e){if(e&&e.document&&e.setTimeout)return e;var t=e.ownerDocument||e;return t.defaultView||t.parentWindow},getDocument:ne,offset:function(e,t,r){if("undefined"===typeof t)return re(e);!function(e,t,r){if(r.ignoreShake){var i=re(e),n=i.left.toFixed(0),a=i.top.toFixed(0),s=t.left.toFixed(0),o=t.top.toFixed(0);if(n===s&&a===o)return}r.useCssRight||r.useCssBottom?ce(e,t,r):r.useCssTransform&&U()in document.body.style?de(e,t):ce(e,t,r)}(e,t,r||{})},isWindow:ie,each:he,css:$,clone:function(e){var t,r={};for(t in e)e.hasOwnProperty(t)&&(r[t]=e[t]);if(e.overflow)for(t in e)e.hasOwnProperty(t)&&(r.overflow[t]=e.overflow[t]);return r},mix:xe,getWindowScrollLeft:function(e){return ee(e)},getWindowScrollTop:function(e){return te(e)},merge:function(){for(var e={},t=0;t<arguments.length;t++)ke.mix(e,t<0||arguments.length<=t?void 0:arguments[t]);return e},viewportWidth:0,viewportHeight:0};xe(ke,me);var we=ke.getParent;function _e(e){if(ke.isWindow(e)||9===e.nodeType)return null;var t,r=ke.getDocument(e).body,i=ke.css(e,"position");if(!("fixed"===i||"absolute"===i))return"html"===e.nodeName.toLowerCase()?null:we(e);for(t=we(e);t&&t!==r&&9!==t.nodeType;t=we(t))if("static"!==(i=ke.css(t,"position")))return t;return null}var Se=ke.getParent;function Oe(e,t){for(var r={left:0,right:1/0,top:0,bottom:1/0},i=_e(e),n=ke.getDocument(e),a=n.defaultView||n.parentWindow,s=n.body,o=n.documentElement;i;){if(-1!==navigator.userAgent.indexOf("MSIE")&&0===i.clientWidth||i===s||i===o||"visible"===ke.css(i,"overflow")){if(i===s||i===o)break}else{var u=ke.offset(i);u.left+=i.clientLeft,u.top+=i.clientTop,r.top=Math.max(r.top,u.top),r.right=Math.min(r.right,u.left+i.clientWidth),r.bottom=Math.min(r.bottom,u.top+i.clientHeight),r.left=Math.max(r.left,u.left)}i=_e(i)}var c=null;ke.isWindow(e)||9===e.nodeType||(c=e.style.position,"absolute"===ke.css(e,"position")&&(e.style.position="fixed"));var d=ke.getWindowScrollLeft(a),h=ke.getWindowScrollTop(a),l=ke.viewportWidth(a),f=ke.viewportHeight(a),p=o.scrollWidth,v=o.scrollHeight,m=window.getComputedStyle(s);if("hidden"===m.overflowX&&(p=a.innerWidth),"hidden"===m.overflowY&&(v=a.innerHeight),e.style&&(e.style.position=c),t||function(e){if(ke.isWindow(e)||9===e.nodeType)return!1;var t=ke.getDocument(e).body,r=null;for(r=Se(e);r&&r!==t;r=Se(r))if("fixed"===ke.css(r,"position"))return!0;return!1}(e))r.left=Math.max(r.left,d),r.top=Math.max(r.top,h),r.right=Math.min(r.right,d+l),r.bottom=Math.min(r.bottom,h+f);else{var g=Math.max(p,d+l);r.right=Math.min(r.right,g);var y=Math.max(v,h+f);r.bottom=Math.min(r.bottom,y)}return r.top>=0&&r.left>=0&&r.bottom>r.top&&r.right>r.left?r:null}function Te(e){var t,r,i;if(ke.isWindow(e)||9===e.nodeType){var n=ke.getWindow(e);t={left:ke.getWindowScrollLeft(n),top:ke.getWindowScrollTop(n)},r=ke.viewportWidth(n),i=ke.viewportHeight(n)}else t=ke.offset(e),r=ke.outerWidth(e),i=ke.outerHeight(e);return t.width=r,t.height=i,t}function Ce(e,t){var r=t.charAt(0),i=t.charAt(1),n=e.width,a=e.height,s=e.left,o=e.top;return"c"===r?o+=a/2:"b"===r&&(o+=a),"c"===i?s+=n/2:"r"===i&&(s+=n),{left:s,top:o}}function Ie(e,t,r,i,n){var a=Ce(t,r[1]),s=Ce(e,r[0]),o=[s.left-a.left,s.top-a.top];return{left:Math.round(e.left-o[0]+i[0]-n[0]),top:Math.round(e.top-o[1]+i[1]-n[1])}}function Me(e,t,r){return e.left<r.left||e.left+t.width>r.right}function Ae(e,t,r){return e.top<r.top||e.top+t.height>r.bottom}function Ee(e,t,r){var i=[];return ke.each(e,(function(e){i.push(e.replace(t,(function(e){return r[e]})))})),i}function Ne(e,t){return e[t]=-e[t],e}function Pe(e,t){return(/%$/.test(e)?parseInt(e.substring(0,e.length-1),10)/100*t:parseInt(e,10))||0}function De(e,t){e[0]=Pe(e[0],t.width),e[1]=Pe(e[1],t.height)}function Le(e,t,r,i){var n=r.points,a=r.offset||[0,0],s=r.targetOffset||[0,0],o=r.overflow,u=r.source||e;a=[].concat(a),s=[].concat(s);var c={},d=0,h=Oe(u,!(!(o=o||{})||!o.alwaysByViewport)),l=Te(u);De(a,l),De(s,t);var f=Ie(l,t,n,a,s),p=ke.merge(l,f);if(h&&(o.adjustX||o.adjustY)&&i){if(o.adjustX&&Me(f,l,h)){var v=Ee(n,/[lr]/gi,{l:"r",r:"l"}),m=Ne(a,0),g=Ne(s,0);(function(e,t,r){return e.left>r.right||e.left+t.width<r.left})(Ie(l,t,v,m,g),l,h)||(d=1,n=v,a=m,s=g)}if(o.adjustY&&Ae(f,l,h)){var y=Ee(n,/[tb]/gi,{t:"b",b:"t"}),b=Ne(a,1),x=Ne(s,1);(function(e,t,r){return e.top>r.bottom||e.top+t.height<r.top})(Ie(l,t,y,b,x),l,h)||(d=1,n=y,a=b,s=x)}d&&(f=Ie(l,t,n,a,s),ke.mix(p,f));var k=Me(f,l,h),w=Ae(f,l,h);if(k||w){var _=n;k&&(_=Ee(n,/[lr]/gi,{l:"r",r:"l"})),w&&(_=Ee(n,/[tb]/gi,{t:"b",b:"t"})),n=_,a=r.offset||[0,0],s=r.targetOffset||[0,0]}c.adjustX=o.adjustX&&k,c.adjustY=o.adjustY&&w,(c.adjustX||c.adjustY)&&(p=function(e,t,r,i){var n=ke.clone(e),a={width:t.width,height:t.height};return i.adjustX&&n.left<r.left&&(n.left=r.left),i.resizeWidth&&n.left>=r.left&&n.left+a.width>r.right&&(a.width-=n.left+a.width-r.right),i.adjustX&&n.left+a.width>r.right&&(n.left=Math.max(r.right-a.width,r.left)),i.adjustY&&n.top<r.top&&(n.top=r.top),i.resizeHeight&&n.top>=r.top&&n.top+a.height>r.bottom&&(a.height-=n.top+a.height-r.bottom),i.adjustY&&n.top+a.height>r.bottom&&(n.top=Math.max(r.bottom-a.height,r.top)),ke.mix(n,a)}(f,l,h,c))}return p.width!==l.width&&ke.css(u,"width",ke.width(u)+p.width-l.width),p.height!==l.height&&ke.css(u,"height",ke.height(u)+p.height-l.height),ke.offset(u,{left:p.left,top:p.top},{useCssRight:r.useCssRight,useCssBottom:r.useCssBottom,useCssTransform:r.useCssTransform,ignoreShake:r.ignoreShake}),{points:n,offset:a,targetOffset:s,overflow:c}}function Be(e,t,r){var i=r.target||t;return Le(e,Te(i),r,!function(e,t){var r=Oe(e,t),i=Te(e);return!r||i.left+i.width<=r.left||i.top+i.height<=r.top||i.left>=r.right||i.top>=r.bottom}(i,r.overflow&&r.overflow.alwaysByViewport))}Be.__getOffsetParent=_e,Be.__getVisibleRectForElement=Oe;var Re=r(101);function Ve(e,t){var r=null,i=null;var n=new Re.a((function(e){var n=Object(B.a)(e,1)[0].target;if(document.documentElement.contains(n)){var a=n.getBoundingClientRect(),s=a.width,o=a.height,u=Math.floor(s),c=Math.floor(o);r===u&&i===c||Promise.resolve().then((function(){t({width:u,height:c})})),r=u,i=c}}));return e&&n.observe(e),function(){n.disconnect()}}function Ge(e){return"function"!==typeof e?null:e()}function Fe(e){return"object"===Object(R.a)(e)&&e?e:null}var qe=v.a.forwardRef((function(e,t){var r=e.children,i=e.disabled,n=e.target,a=e.align,s=e.onAlign,o=e.monitorWindowResize,u=e.monitorBufferTime,c=void 0===u?0:u,d=v.a.useRef({}),h=v.a.useRef(),l=v.a.Children.only(r),f=v.a.useRef({});f.current.disabled=i,f.current.target=n,f.current.onAlign=s;var p=function(e,t){var r=v.a.useRef(!1),i=v.a.useRef(null);function n(){window.clearTimeout(i.current)}return[function a(s){if(r.current&&!0!==s)n(),i.current=window.setTimeout((function(){r.current=!1,a()}),t);else{if(!1===e())return;r.current=!0,n(),i.current=window.setTimeout((function(){r.current=!1}),t)}},function(){r.current=!1,n()}]}((function(){var e=f.current,t=e.disabled,r=e.target,i=e.onAlign;if(!t&&r){var n,s=h.current,o=Ge(r),u=Fe(r);d.current.element=o,d.current.point=u;var c=document.activeElement;return o&&function(e){if(!e)return!1;if(e.offsetParent)return!0;if(e.getBBox){var t=e.getBBox();if(t.width||t.height)return!0}if(e.getBoundingClientRect){var r=e.getBoundingClientRect();if(r.width||r.height)return!0}return!1}(o)?n=Be(s,o,a):u&&(n=function(e,t,r){var i,n,a=ke.getDocument(e),s=a.defaultView||a.parentWindow,o=ke.getWindowScrollLeft(s),u=ke.getWindowScrollTop(s),c=ke.viewportWidth(s),d=ke.viewportHeight(s),h={left:i="pageX"in t?t.pageX:o+t.clientX,top:n="pageY"in t?t.pageY:u+t.clientY,width:0,height:0},l=i>=0&&i<=o+c&&n>=0&&n<=u+d,f=[r.points[0],"cc"];return Le(e,h,G(G({},r),{},{points:f}),l)}(s,u,a)),function(e,t){e!==document.activeElement&&b(t,e)&&"function"===typeof e.focus&&e.focus()}(c,s),i&&n&&i(s,n),!0}return!1}),c),m=Object(B.a)(p,2),g=m[0],y=m[1],x=v.a.useRef({cancel:function(){}}),_=v.a.useRef({cancel:function(){}});v.a.useEffect((function(){var e,t,r=Ge(n),i=Fe(n);h.current!==_.current.element&&(_.current.cancel(),_.current.element=h.current,_.current.cancel=Ve(h.current,g)),d.current.element===r&&((e=d.current.point)===(t=i)||e&&t&&("pageX"in t&&"pageY"in t?e.pageX===t.pageX&&e.pageY===t.pageY:"clientX"in t&&"clientY"in t&&e.clientX===t.clientX&&e.clientY===t.clientY))||(g(),x.current.element!==r&&(x.current.cancel(),x.current.element=r,x.current.cancel=Ve(r,g)))})),v.a.useEffect((function(){i?y():g()}),[i]);var S=v.a.useRef(null);return v.a.useEffect((function(){o?S.current||(S.current=w(window,"resize",g)):S.current&&(S.current.remove(),S.current=null)}),[o]),v.a.useEffect((function(){return function(){x.current.cancel(),_.current.cancel(),S.current&&S.current.remove(),y()}}),[]),v.a.useImperativeHandle(t,(function(){return{forceAlign:function(){return g(!0)}}})),v.a.isValidElement(l)&&(l=v.a.cloneElement(l,{ref:Object(k.a)(l.ref,h)})),l}));qe.displayName="Align";var je=qe,ze=r(133),He=r.n(ze);function Ue(e,t,r,i,n,a,s){try{var o=e[a](s),u=o.value}catch(c){return void r(c)}o.done?t(u):Promise.resolve(u).then(i,n)}function We(e){return function(){var t=this,r=arguments;return new Promise((function(i,n){var a=e.apply(t,r);function s(e){Ue(a,i,n,s,o,"next",e)}function o(e){Ue(a,i,n,s,o,"throw",e)}s(void 0)}))}}var Ke=["measure","align",null,"motion"],Xe=p.forwardRef((function(e,t){var r=e.visible,i=e.prefixCls,n=e.className,o=e.style,u=e.children,c=e.zIndex,d=e.stretch,h=e.destroyPopupOnHide,l=e.forceRender,f=e.align,v=e.point,m=e.getRootDomNode,g=e.getClassNameFromAlign,b=e.onAlign,x=e.onMouseEnter,k=e.onMouseLeave,w=e.onMouseDown,_=e.onTouchStart,S=Object(p.useRef)(),O=Object(p.useRef)(),C=M(Object(p.useState)(),2),I=C[0],A=C[1],E=function(e){var t=M(p.useState({width:0,height:0}),2),r=t[0],i=t[1];return[p.useMemo((function(){var t={};if(e){var i=r.width,n=r.height;-1!==e.indexOf("height")&&n?t.height=n:-1!==e.indexOf("minHeight")&&n&&(t.minHeight=n),-1!==e.indexOf("width")&&i?t.width=i:-1!==e.indexOf("minWidth")&&i&&(t.minWidth=i)}return t}),[e,r]),function(e){i({width:e.offsetWidth,height:e.offsetHeight})}]}(d),D=M(E,2),L=D[0],B=D[1];var R=function(e,t){var r=M(Object(p.useState)(null),2),i=r[0],n=r[1],a=Object(p.useRef)(),s=Object(p.useRef)(!1);function o(e){s.current||n(e)}function u(){y.a.cancel(a.current)}return Object(p.useEffect)((function(){o("measure")}),[e]),Object(p.useEffect)((function(){switch(i){case"measure":t()}i&&(a.current=Object(y.a)(We(He.a.mark((function e(){var t,r;return He.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Ke.indexOf(i),(r=Ke[t+1])&&-1!==t&&o(r);case 3:case"end":return e.stop()}}),e)})))))}),[i]),Object(p.useEffect)((function(){return function(){s.current=!0,u()}}),[]),[i,function(e){u(),a.current=Object(y.a)((function(){o((function(e){switch(i){case"align":return"motion";case"motion":return"stable"}return e})),null===e||void 0===e||e()}))}]}(r,(function(){d&&B(m())})),V=M(R,2),G=V[0],F=V[1],q=Object(p.useRef)();function j(){var e;null===(e=S.current)||void 0===e||e.forceAlign()}function z(e,t){if("align"===G){var r=g(t);A(r),I!==r?Promise.resolve().then((function(){j()})):F((function(){var e;null===(e=q.current)||void 0===e||e.call(q)})),null===b||void 0===b||b(e,t)}}var H=a({},P(e));function U(){return new Promise((function(e){q.current=e}))}["onAppearEnd","onEnterEnd","onLeaveEnd"].forEach((function(e){var t=H[e];H[e]=function(e,r){return F(),null===t||void 0===t?void 0:t(e,r)}})),p.useEffect((function(){H.motionName||"motion"!==G||F()}),[H.motionName,G]),p.useImperativeHandle(t,(function(){return{forceAlign:j,getElement:function(){return O.current}}}));var W=a(a(a({},L),{},{zIndex:c},o),{},{opacity:"motion"!==G&&"stable"!==G&&r?0:void 0,pointerEvents:"stable"===G?void 0:"none"}),K=!0;!(null===f||void 0===f?void 0:f.points)||"align"!==G&&"stable"!==G||(K=!1);var X=u;return p.Children.count(u)>1&&(X=p.createElement("div",{className:"".concat(i,"-content")},u)),p.createElement(N.a,s({visible:r,ref:O,leavedClassName:"".concat(i,"-hidden")},H,{onAppearPrepare:U,onEnterPrepare:U,removeOnLeave:h,forceRender:l}),(function(e,t){var r=e.className,s=e.style,o=T()(i,n,I,r);return p.createElement(je,{target:v||m,key:"popup",ref:S,monitorWindowResize:!0,disabled:K,align:f,onAlign:z},p.createElement("div",{ref:t,className:o,onMouseEnter:x,onMouseLeave:k,onMouseDownCapture:w,onTouchStartCapture:_,style:a(a({},s),W)},X))}))}));Xe.displayName="PopupInner";var Ye=Xe,Ze=p.forwardRef((function(e,t){var r=e.prefixCls,i=e.visible,n=e.zIndex,o=e.children,u=e.mobile,c=(u=void 0===u?{}:u).popupClassName,d=u.popupStyle,h=u.popupMotion,l=void 0===h?{}:h,f=u.popupRender,v=p.useRef();p.useImperativeHandle(t,(function(){return{forceAlign:function(){},getElement:function(){return v.current}}}));var m=a({zIndex:n},d),g=o;return p.Children.count(o)>1&&(g=p.createElement("div",{className:"".concat(r,"-content")},o)),f&&(g=f(g)),p.createElement(N.a,s({visible:i,ref:v,removeOnLeave:!0},l),(function(e,t){var i=e.className,n=e.style,s=T()(r,c,i);return p.createElement("div",{ref:t,className:s,style:a(a({},n),m)},g)}))}));Ze.displayName="MobilePopupInner";var Qe=Ze,$e=p.forwardRef((function(e,t){var r=e.visible,i=e.mobile,n=A(e,["visible","mobile"]),o=M(Object(p.useState)(r),2),u=o[0],c=o[1],d=M(Object(p.useState)(!1),2),h=d[0],l=d[1],f=a(a({},n),{},{visible:u});Object(p.useEffect)((function(){c(r),r&&i&&l(Object(E.a)())}),[r,i]);var v=h?p.createElement(Qe,s({},f,{mobile:i,ref:t})):p.createElement(Ye,s({},f,{ref:t}));return p.createElement("div",null,p.createElement(D,f),v)}));$e.displayName="Popup";var Je=$e,et=p.createContext(null);function tt(){}function rt(){return""}function it(e){return e?e.ownerDocument:window.document}var nt=["onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur","onContextMenu"];t.a=function(e){var t=function(t){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(h,t);var r,i,n,d=f(h);function h(e){var t,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h),(t=d.call(this,e)).popupRef=p.createRef(),t.triggerRef=p.createRef(),t.onMouseEnter=function(e){var r=t.props.mouseEnterDelay;t.fireEvents("onMouseEnter",e),t.delaySetPopupVisible(!0,r,r?null:e)},t.onMouseMove=function(e){t.fireEvents("onMouseMove",e),t.setPoint(e)},t.onMouseLeave=function(e){t.fireEvents("onMouseLeave",e),t.delaySetPopupVisible(!1,t.props.mouseLeaveDelay)},t.onPopupMouseEnter=function(){t.clearDelayTimer()},t.onPopupMouseLeave=function(e){var r;e.relatedTarget&&!e.relatedTarget.setTimeout&&b(null===(r=t.popupRef.current)||void 0===r?void 0:r.getElement(),e.relatedTarget)||t.delaySetPopupVisible(!1,t.props.mouseLeaveDelay)},t.onFocus=function(e){t.fireEvents("onFocus",e),t.clearDelayTimer(),t.isFocusToShow()&&(t.focusTime=Date.now(),t.delaySetPopupVisible(!0,t.props.focusDelay))},t.onMouseDown=function(e){t.fireEvents("onMouseDown",e),t.preClickTime=Date.now()},t.onTouchStart=function(e){t.fireEvents("onTouchStart",e),t.preTouchTime=Date.now()},t.onBlur=function(e){t.fireEvents("onBlur",e),t.clearDelayTimer(),t.isBlurToHide()&&t.delaySetPopupVisible(!1,t.props.blurDelay)},t.onContextMenu=function(e){e.preventDefault(),t.fireEvents("onContextMenu",e),t.setPopupVisible(!0,e)},t.onContextMenuClose=function(){t.isContextMenuToShow()&&t.close()},t.onClick=function(e){if(t.fireEvents("onClick",e),t.focusTime){var r;if(t.preClickTime&&t.preTouchTime?r=Math.min(t.preClickTime,t.preTouchTime):t.preClickTime?r=t.preClickTime:t.preTouchTime&&(r=t.preTouchTime),Math.abs(r-t.focusTime)<20)return;t.focusTime=0}t.preClickTime=0,t.preTouchTime=0,t.isClickToShow()&&(t.isClickToHide()||t.isBlurToHide())&&e&&e.preventDefault&&e.preventDefault();var i=!t.state.popupVisible;(t.isClickToHide()&&!i||i&&t.isClickToShow())&&t.setPopupVisible(!t.state.popupVisible,e)},t.onPopupMouseDown=function(){var e;(t.hasPopupMouseDown=!0,clearTimeout(t.mouseDownTimeout),t.mouseDownTimeout=window.setTimeout((function(){t.hasPopupMouseDown=!1}),0),t.context)&&(e=t.context).onPopupMouseDown.apply(e,arguments)},t.onDocumentClick=function(e){if(!t.props.mask||t.props.maskClosable){var r=e.target,i=t.getRootDomNode(),n=t.getPopupDomNode();b(i,r)||b(n,r)||t.hasPopupMouseDown||t.close()}},t.getRootDomNode=function(){var e=t.props.getTriggerDOMNode;if(e)return e(t.triggerRef.current);try{var r=Object(x.a)(t.triggerRef.current);if(r)return r}catch(i){}return g.a.findDOMNode(u(t))},t.getPopupClassNameFromAlign=function(e){var r=[],i=t.props,n=i.popupPlacement,a=i.builtinPlacements,s=i.prefixCls,o=i.alignPoint,u=i.getPopupClassNameFromAlign;return n&&a&&r.push(function(e,t,r,i){for(var n=r.points,a=Object.keys(e),s=0;s<a.length;s+=1){var o=a[s];if(C(e[o].points,n,i))return"".concat(t,"-placement-").concat(o)}return""}(a,s,e,o)),u&&r.push(u(e)),r.join(" ")},t.getComponent=function(){var e=t.props,r=e.prefixCls,i=e.destroyPopupOnHide,n=e.popupClassName,a=e.onPopupAlign,o=e.popupMotion,u=e.popupAnimation,c=e.popupTransitionName,d=e.popupStyle,h=e.mask,l=e.maskAnimation,f=e.maskTransitionName,v=e.maskMotion,m=e.zIndex,g=e.popup,y=e.stretch,b=e.alignPoint,x=e.mobile,k=e.forceRender,w=t.state,_=w.popupVisible,S=w.point,O=t.getPopupAlign(),T={};return t.isMouseEnterToShow()&&(T.onMouseEnter=t.onPopupMouseEnter),t.isMouseLeaveToHide()&&(T.onMouseLeave=t.onPopupMouseLeave),T.onMouseDown=t.onPopupMouseDown,T.onTouchStart=t.onPopupMouseDown,p.createElement(Je,s({prefixCls:r,destroyPopupOnHide:i,visible:_,point:b&&S,className:n,align:O,onAlign:a,animation:u,getClassNameFromAlign:t.getPopupClassNameFromAlign},T,{stretch:y,getRootDomNode:t.getRootDomNode,style:d,mask:h,zIndex:m,transitionName:c,maskAnimation:l,maskTransitionName:f,maskMotion:v,ref:t.popupRef,motion:o,mobile:x,forceRender:k}),"function"===typeof g?g():g)},t.attachParent=function(e){y.a.cancel(t.attachId);var r,i=t.props,n=i.getPopupContainer,a=i.getDocument,s=t.getRootDomNode();n?(s||0===n.length)&&(r=n(s)):r=a(t.getRootDomNode()).body,r?r.appendChild(e):t.attachId=Object(y.a)((function(){t.attachParent(e)}))},t.getContainer=function(){var e=(0,t.props.getDocument)(t.getRootDomNode()).createElement("div");return e.style.position="absolute",e.style.top="0",e.style.left="0",e.style.width="100%",t.attachParent(e),e},t.setPoint=function(e){t.props.alignPoint&&e&&t.setState({point:{pageX:e.pageX,pageY:e.pageY}})},t.handlePortalUpdate=function(){t.state.prevPopupVisible!==t.state.popupVisible&&t.props.afterPopupVisibleChange(t.state.popupVisible)},r="popupVisible"in e?!!e.popupVisible:!!e.defaultPopupVisible,t.state={prevPopupVisible:r,popupVisible:r},nt.forEach((function(e){t["fire".concat(e)]=function(r){t.fireEvents(e,r)}})),t}return r=h,n=[{key:"getDerivedStateFromProps",value:function(e,t){var r=e.popupVisible,i={};return void 0!==r&&t.popupVisible!==r&&(i.popupVisible=r,i.prevPopupVisible=t.popupVisible),i}}],(i=[{key:"componentDidMount",value:function(){this.componentDidUpdate()}},{key:"componentDidUpdate",value:function(){var e,t=this.props;if(this.state.popupVisible)return this.clickOutsideHandler||!this.isClickToHide()&&!this.isContextMenuToShow()||(e=t.getDocument(this.getRootDomNode()),this.clickOutsideHandler=w(e,"mousedown",this.onDocumentClick)),this.touchOutsideHandler||(e=e||t.getDocument(this.getRootDomNode()),this.touchOutsideHandler=w(e,"touchstart",this.onDocumentClick)),!this.contextMenuOutsideHandler1&&this.isContextMenuToShow()&&(e=e||t.getDocument(this.getRootDomNode()),this.contextMenuOutsideHandler1=w(e,"scroll",this.onContextMenuClose)),void(!this.contextMenuOutsideHandler2&&this.isContextMenuToShow()&&(this.contextMenuOutsideHandler2=w(window,"blur",this.onContextMenuClose)));this.clearOutsideHandler()}},{key:"componentWillUnmount",value:function(){this.clearDelayTimer(),this.clearOutsideHandler(),clearTimeout(this.mouseDownTimeout),y.a.cancel(this.attachId)}},{key:"getPopupDomNode",value:function(){var e;return(null===(e=this.popupRef.current)||void 0===e?void 0:e.getElement())||null}},{key:"getPopupAlign",value:function(){var e=this.props,t=e.popupPlacement,r=e.popupAlign,i=e.builtinPlacements;return t&&i?function(e,t,r){return a(a({},e[t]||{}),r)}(i,t,r):r}},{key:"setPopupVisible",value:function(e,t){var r=this.props.alignPoint,i=this.state.popupVisible;this.clearDelayTimer(),i!==e&&("popupVisible"in this.props||this.setState({popupVisible:e,prevPopupVisible:i}),this.props.onPopupVisibleChange(e)),r&&t&&e&&this.setPoint(t)}},{key:"delaySetPopupVisible",value:function(e,t,r){var i=this,n=1e3*t;if(this.clearDelayTimer(),n){var a=r?{pageX:r.pageX,pageY:r.pageY}:null;this.delayTimer=window.setTimeout((function(){i.setPopupVisible(e,a),i.clearDelayTimer()}),n)}else this.setPopupVisible(e,r)}},{key:"clearDelayTimer",value:function(){this.delayTimer&&(clearTimeout(this.delayTimer),this.delayTimer=null)}},{key:"clearOutsideHandler",value:function(){this.clickOutsideHandler&&(this.clickOutsideHandler.remove(),this.clickOutsideHandler=null),this.contextMenuOutsideHandler1&&(this.contextMenuOutsideHandler1.remove(),this.contextMenuOutsideHandler1=null),this.contextMenuOutsideHandler2&&(this.contextMenuOutsideHandler2.remove(),this.contextMenuOutsideHandler2=null),this.touchOutsideHandler&&(this.touchOutsideHandler.remove(),this.touchOutsideHandler=null)}},{key:"createTwoChains",value:function(e){var t=this.props.children.props,r=this.props;return t[e]&&r[e]?this["fire".concat(e)]:t[e]||r[e]}},{key:"isClickToShow",value:function(){var e=this.props,t=e.action,r=e.showAction;return-1!==t.indexOf("click")||-1!==r.indexOf("click")}},{key:"isContextMenuToShow",value:function(){var e=this.props,t=e.action,r=e.showAction;return-1!==t.indexOf("contextMenu")||-1!==r.indexOf("contextMenu")}},{key:"isClickToHide",value:function(){var e=this.props,t=e.action,r=e.hideAction;return-1!==t.indexOf("click")||-1!==r.indexOf("click")}},{key:"isMouseEnterToShow",value:function(){var e=this.props,t=e.action,r=e.showAction;return-1!==t.indexOf("hover")||-1!==r.indexOf("mouseEnter")}},{key:"isMouseLeaveToHide",value:function(){var e=this.props,t=e.action,r=e.hideAction;return-1!==t.indexOf("hover")||-1!==r.indexOf("mouseLeave")}},{key:"isFocusToShow",value:function(){var e=this.props,t=e.action,r=e.showAction;return-1!==t.indexOf("focus")||-1!==r.indexOf("focus")}},{key:"isBlurToHide",value:function(){var e=this.props,t=e.action,r=e.hideAction;return-1!==t.indexOf("focus")||-1!==r.indexOf("blur")}},{key:"forcePopupAlign",value:function(){var e;this.state.popupVisible&&(null===(e=this.popupRef.current)||void 0===e||e.forceAlign())}},{key:"fireEvents",value:function(e,t){var r=this.props.children.props[e];r&&r(t);var i=this.props[e];i&&i(t)}},{key:"close",value:function(){this.setPopupVisible(!1)}},{key:"render",value:function(){var t=this.state.popupVisible,r=this.props,i=r.children,n=r.forceRender,s=r.alignPoint,o=r.className,u=r.autoDestroy,c=p.Children.only(i),d={key:"trigger"};this.isContextMenuToShow()?d.onContextMenu=this.onContextMenu:d.onContextMenu=this.createTwoChains("onContextMenu"),this.isClickToHide()||this.isClickToShow()?(d.onClick=this.onClick,d.onMouseDown=this.onMouseDown,d.onTouchStart=this.onTouchStart):(d.onClick=this.createTwoChains("onClick"),d.onMouseDown=this.createTwoChains("onMouseDown"),d.onTouchStart=this.createTwoChains("onTouchStart")),this.isMouseEnterToShow()?(d.onMouseEnter=this.onMouseEnter,s&&(d.onMouseMove=this.onMouseMove)):d.onMouseEnter=this.createTwoChains("onMouseEnter"),this.isMouseLeaveToHide()?d.onMouseLeave=this.onMouseLeave:d.onMouseLeave=this.createTwoChains("onMouseLeave"),this.isFocusToShow()||this.isBlurToHide()?(d.onFocus=this.onFocus,d.onBlur=this.onBlur):(d.onFocus=this.createTwoChains("onFocus"),d.onBlur=this.createTwoChains("onBlur"));var h=T()(c&&c.props&&c.props.className,o);h&&(d.className=h);var l=a({},d);Object(k.c)(c)&&(l.ref=Object(k.a)(this.triggerRef,c.ref));var f,v=p.cloneElement(c,l);return(t||this.popupRef.current||n)&&(f=p.createElement(e,{key:"portal",getContainer:this.getContainer,didUpdate:this.handlePortalUpdate},this.getComponent())),!t&&u&&(f=null),p.createElement(et.Provider,{value:{onPopupMouseDown:this.onPopupMouseDown}},v,f)}}])&&o(r.prototype,i),n&&o(r,n),h}(p.Component);return t.contextType=et,t.defaultProps={prefixCls:"rc-trigger-popup",getPopupClassNameFromAlign:rt,getDocument:it,onPopupVisibleChange:tt,afterPopupVisibleChange:tt,onPopupAlign:tt,popupClassName:"",mouseEnterDelay:0,mouseLeaveDelay:.1,focusDelay:0,blurDelay:.15,popupStyle:{},destroyPopupOnHide:!1,popupAlign:{},defaultPopupVisible:!1,mask:!1,maskClosable:!0,action:[],showAction:[],hideAction:[],autoDestroy:!1},t}(S)},function(e,t,r){"use strict";var i=r(13),n=r(9),a=r(22),s=r(27),o=r(0),u=r.n(o),c=r(14),d=r.n(c),h=r(33),l=r(466),f=r(51),p=function e(t){return Object(f.a)(this,e),new Error("unreachable case: ".concat(JSON.stringify(t)))},v=function(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var n=0;for(i=Object.getOwnPropertySymbols(e);n<i.length;n++)t.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(e,i[n])&&(r[i[n]]=e[i[n]])}return r},m=function(e){return o.createElement(l.a,null,(function(t){var r,a=t.getPrefixCls,s=t.direction,u=e.prefixCls,c=e.size,h=e.className,l=v(e,["prefixCls","size","className"]),f=a("btn-group",u),m="";switch(c){case"large":m="lg";break;case"small":m="sm";break;case"middle":case void 0:break;default:console.warn(new p(c))}var g=d()(f,(r={},Object(n.a)(r,"".concat(f,"-").concat(m),m),Object(n.a)(r,"".concat(f,"-rtl"),"rtl"===s),r),h);return o.createElement("div",Object(i.a)({},l,{className:g}))}))},g=r(59),y=r(106),b=r(61),x=r(60),k=r(107),w=r(26),_=r(23),S=0,O={};function T(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=S++,i=t;function n(){(i-=1)<=0?(e(),delete O[r]):O[r]=Object(_.a)(n)}return O[r]=Object(_.a)(n),r}T.cancel=function(e){void 0!==e&&(_.a.cancel(O[e]),delete O[e])},T.ids=O;var C,I=r(28);function M(e){return!e||null===e.offsetParent||e.hidden}function A(e){var t=(e||"").match(/rgba?\((\d*), (\d*), (\d*)(, [\d.]*)?\)/);return!(t&&t[1]&&t[2]&&t[3])||!(t[1]===t[2]&&t[2]===t[3])}var E=function(e){Object(b.a)(r,e);var t=Object(x.a)(r);function r(){var e;return Object(f.a)(this,r),(e=t.apply(this,arguments)).containerRef=o.createRef(),e.animationStart=!1,e.destroyed=!1,e.onClick=function(t,r){var i,n;if(!(!t||M(t)||t.className.indexOf("-leave")>=0)){var a=e.props.insertExtraNode;e.extraNode=document.createElement("div");var s=Object(y.a)(e).extraNode,o=e.context.getPrefixCls;s.className="".concat(o(""),"-click-animating-node");var u=e.getAttributeName();if(t.setAttribute(u,"true"),r&&"#ffffff"!==r&&"rgb(255, 255, 255)"!==r&&A(r)&&!/rgba\((?:\d*, ){3}0\)/.test(r)&&"transparent"!==r){s.style.borderColor=r;var c=(null===(i=t.getRootNode)||void 0===i?void 0:i.call(t))||t.ownerDocument,d=c instanceof Document?c.body:null!==(n=c.firstChild)&&void 0!==n?n:c;C=Object(k.a)("\n      [".concat(o(""),"-click-animating-without-extra-node='true']::after, .").concat(o(""),"-click-animating-node {\n        --antd-wave-shadow-color: ").concat(r,";\n      }"),"antd-wave",{csp:e.csp,attachTo:d})}a&&t.appendChild(s),["transition","animation"].forEach((function(r){t.addEventListener("".concat(r,"start"),e.onTransitionStart),t.addEventListener("".concat(r,"end"),e.onTransitionEnd)}))}},e.onTransitionStart=function(t){if(!e.destroyed){var r=e.containerRef.current;t&&t.target===r&&!e.animationStart&&e.resetEffect(r)}},e.onTransitionEnd=function(t){t&&"fadeEffect"===t.animationName&&e.resetEffect(t.target)},e.bindAnimationEvent=function(t){if(t&&t.getAttribute&&!t.getAttribute("disabled")&&!(t.className.indexOf("disabled")>=0)){var r=function(r){if("INPUT"!==r.target.tagName&&!M(r.target)){e.resetEffect(t);var i=getComputedStyle(t).getPropertyValue("border-top-color")||getComputedStyle(t).getPropertyValue("border-color")||getComputedStyle(t).getPropertyValue("background-color");e.clickWaveTimeoutId=window.setTimeout((function(){return e.onClick(t,i)}),0),T.cancel(e.animationStartId),e.animationStart=!0,e.animationStartId=T((function(){e.animationStart=!1}),10)}};return t.addEventListener("click",r,!0),{cancel:function(){t.removeEventListener("click",r,!0)}}}},e.renderWave=function(t){var r=t.csp,i=e.props.children;if(e.csp=r,!o.isValidElement(i))return i;var n=e.containerRef;return Object(w.c)(i)&&(n=Object(w.a)(i.ref,e.containerRef)),Object(I.a)(i,{ref:n})},e}return Object(g.a)(r,[{key:"componentDidMount",value:function(){var e=this.containerRef.current;e&&1===e.nodeType&&(this.instance=this.bindAnimationEvent(e))}},{key:"componentWillUnmount",value:function(){this.instance&&this.instance.cancel(),this.clickWaveTimeoutId&&clearTimeout(this.clickWaveTimeoutId),this.destroyed=!0}},{key:"getAttributeName",value:function(){var e=this.context.getPrefixCls,t=this.props.insertExtraNode;return"".concat(e(""),t?"-click-animating":"-click-animating-without-extra-node")}},{key:"resetEffect",value:function(e){var t=this;if(e&&e!==this.extraNode&&e instanceof Element){var r=this.props.insertExtraNode,i=this.getAttributeName();e.setAttribute(i,"false"),C&&(C.innerHTML=""),r&&this.extraNode&&e.contains(this.extraNode)&&e.removeChild(this.extraNode),["transition","animation"].forEach((function(r){e.removeEventListener("".concat(r,"start"),t.onTransitionStart),e.removeEventListener("".concat(r,"end"),t.onTransitionEnd)}))}}},{key:"render",value:function(){return o.createElement(l.a,null,this.renderWave)}}]),r}(o.Component);E.contextType=l.b;var N=r(37),P=r(30),D=r(39),L=r(52),B=r(66),R=function(){return{width:0,opacity:0,transform:"scale(0)"}},V=function(e){return{width:e.scrollWidth,opacity:1,transform:"scale(1)"}},G=function(e){var t=e.prefixCls,r=!!e.loading;return e.existIcon?u.a.createElement("span",{className:"".concat(t,"-loading-icon")},u.a.createElement(B.a,null)):u.a.createElement(L.a,{visible:r,motionName:"".concat(t,"-loading-icon-motion"),removeOnLeave:!0,onAppearStart:R,onAppearActive:V,onEnterStart:R,onEnterActive:V,onLeaveStart:V,onLeaveActive:R},(function(e,r){var i=e.className,n=e.style;return u.a.createElement("span",{className:"".concat(t,"-loading-icon"),style:n,ref:r},u.a.createElement(B.a,{className:i}))}))},F=function(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var n=0;for(i=Object.getOwnPropertySymbols(e);n<i.length;n++)t.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(e,i[n])&&(r[i[n]]=e[i[n]])}return r},q=/^[\u4e00-\u9fa5]{2}$/,j=q.test.bind(q);function z(e){return"text"===e||"link"===e}function H(e,t){var r=!1,i=[];return o.Children.forEach(e,(function(e){var t=Object(s.a)(e),n="string"===t||"number"===t;if(r&&n){var a=i.length-1,o=i[a];i[a]="".concat(o).concat(e)}else i.push(e);r=n})),o.Children.map(i,(function(e){return function(e,t){if(null!=e){var r=t?" ":"";return"string"!==typeof e&&"number"!==typeof e&&"string"===typeof e.type&&j(e.props.children)?Object(I.a)(e,{children:e.props.children.split("").join(r)}):"string"===typeof e?(j(e)&&(e=e.split("").join(r)),o.createElement("span",null,e)):e}}(e,t)}))}Object(N.a)("default","primary","ghost","dashed","link","text"),Object(N.a)("circle","round"),Object(N.a)("submit","button","reset");var U=function(e,t){var r,u,c=e.loading,f=void 0!==c&&c,p=e.prefixCls,v=e.type,m=e.danger,g=e.shape,y=e.size,b=e.className,x=e.children,k=e.icon,w=e.ghost,_=void 0!==w&&w,S=e.block,O=void 0!==S&&S,T=e.htmlType,C=void 0===T?"button":T,I=F(e,["loading","prefixCls","type","danger","shape","size","className","children","icon","ghost","block","htmlType"]),M=o.useContext(D.b),A=o.useState(!!f),N=Object(a.a)(A,2),L=N[0],B=N[1],R=o.useState(!1),V=Object(a.a)(R,2),q=V[0],U=V[1],W=o.useContext(l.b),K=W.getPrefixCls,X=W.autoInsertSpaceInButton,Y=W.direction,Z=t||o.createRef(),Q=o.useRef(),$=function(){return 1===o.Children.count(x)&&!k&&!z(v)};u="object"===Object(s.a)(f)&&f.delay?f.delay||!0:!!f,o.useEffect((function(){clearTimeout(Q.current),"number"===typeof u?Q.current=window.setTimeout((function(){B(u)}),u):B(u)}),[u]),o.useEffect((function(){if(Z&&Z.current&&!1!==X){var e=Z.current.textContent;$()&&j(e)?q||U(!0):q&&U(!1)}}),[Z]);var J=function(t){var r,i=e.onClick,n=e.disabled;L||n?t.preventDefault():null===(r=i)||void 0===r||r(t)};Object(P.a)(!("string"===typeof k&&k.length>2),"Button","`icon` is using ReactNode instead of string naming in v4. Please check `".concat(k,"` at https://ant.design/components/icon")),Object(P.a)(!(_&&z(v)),"Button","`link` or `text` button can't be a `ghost` button.");var ee=K("btn",p),te=!1!==X,re="";switch(y||M){case"large":re="lg";break;case"small":re="sm"}var ie=L?"loading":k,ne=d()(ee,(r={},Object(n.a)(r,"".concat(ee,"-").concat(v),v),Object(n.a)(r,"".concat(ee,"-").concat(g),g),Object(n.a)(r,"".concat(ee,"-").concat(re),re),Object(n.a)(r,"".concat(ee,"-icon-only"),!x&&0!==x&&!!ie),Object(n.a)(r,"".concat(ee,"-background-ghost"),_&&!z(v)),Object(n.a)(r,"".concat(ee,"-loading"),L),Object(n.a)(r,"".concat(ee,"-two-chinese-chars"),q&&te),Object(n.a)(r,"".concat(ee,"-block"),O),Object(n.a)(r,"".concat(ee,"-dangerous"),!!m),Object(n.a)(r,"".concat(ee,"-rtl"),"rtl"===Y),r),b),ae=k&&!L?k:o.createElement(G,{existIcon:!!k,prefixCls:ee,loading:!!L}),se=x||0===x?H(x,$()&&te):null,oe=Object(h.a)(I,["navigate"]);if(void 0!==oe.href)return o.createElement("a",Object(i.a)({},oe,{className:ne,onClick:J,ref:Z}),ae,se);var ue=o.createElement("button",Object(i.a)({},I,{type:C,className:ne,onClick:J,ref:Z}),ae,se);return z(v)?ue:o.createElement(E,null,ue)},W=o.forwardRef(U);W.displayName="Button",W.Group=m,W.__ANT_BUTTON=!0;var K=W;t.a=K},function(e,t,r){"use strict";var i=r(13),n={locale:"en_US",today:"Today",now:"Now",backToToday:"Back to today",ok:"Ok",clear:"Clear",month:"Month",year:"Year",timeSelect:"select time",dateSelect:"select date",weekSelect:"Choose a week",monthSelect:"Choose a month",yearSelect:"Choose a year",decadeSelect:"Choose a decade",yearFormat:"YYYY",dateFormat:"M/D/YYYY",dayFormat:"D",dateTimeFormat:"M/D/YYYY HH:mm:ss",monthBeforeYear:!0,previousMonth:"Previous month (PageUp)",nextMonth:"Next month (PageDown)",previousYear:"Last year (Control + left)",nextYear:"Next year (Control + right)",previousDecade:"Last decade",nextDecade:"Next decade",previousCentury:"Last century",nextCentury:"Next century"},a={placeholder:"Select time",rangePlaceholder:["Start time","End time"]},s={lang:Object(i.a)({placeholder:"Select date",yearPlaceholder:"Select year",quarterPlaceholder:"Select quarter",monthPlaceholder:"Select month",weekPlaceholder:"Select week",rangePlaceholder:["Start date","End date"],rangeYearPlaceholder:["Start year","End year"],rangeMonthPlaceholder:["Start month","End month"],rangeWeekPlaceholder:["Start week","End week"]},n),timePickerLocale:Object(i.a)({},a)},o="${label} is not a valid ${type}",u={locale:"en",Pagination:{items_per_page:"/ page",jump_to:"Go to",jump_to_confirm:"confirm",page:"",prev_page:"Previous Page",next_page:"Next Page",prev_5:"Previous 5 Pages",next_5:"Next 5 Pages",prev_3:"Previous 3 Pages",next_3:"Next 3 Pages"},DatePicker:s,TimePicker:a,Calendar:s,global:{placeholder:"Please select"},Table:{filterTitle:"Filter menu",filterConfirm:"OK",filterReset:"Reset",filterEmptyText:"No filters",emptyText:"No data",selectAll:"Select current page",selectInvert:"Invert current page",selectNone:"Clear all data",selectionAll:"Select all data",sortTitle:"Sort",expand:"Expand row",collapse:"Collapse row",triggerDesc:"Click to sort descending",triggerAsc:"Click to sort ascending",cancelSort:"Click to cancel sorting"},Modal:{okText:"OK",cancelText:"Cancel",justOkText:"OK"},Popconfirm:{okText:"OK",cancelText:"Cancel"},Transfer:{titles:["",""],searchPlaceholder:"Search here",itemUnit:"item",itemsUnit:"items",remove:"Remove",selectCurrent:"Select current page",removeCurrent:"Remove current page",selectAll:"Select all data",removeAll:"Remove all data",selectInvert:"Invert current page"},Upload:{uploading:"Uploading...",removeFile:"Remove file",uploadError:"Upload error",previewFile:"Preview file",downloadFile:"Download file"},Empty:{description:"No Data"},Icon:{icon:"icon"},Text:{edit:"Edit",copy:"Copy",copied:"Copied",expand:"Expand"},PageHeader:{back:"Back"},Form:{optional:"(optional)",defaultValidateMessages:{default:"Field validation error for ${label}",required:"Please enter ${label}",enum:"${label} must be one of [${enum}]",whitespace:"${label} cannot be a blank character",date:{format:"${label} date format is invalid",parse:"${label} cannot be converted to a date",invalid:"${label} is an invalid date"},types:{string:o,method:o,array:o,object:o,number:o,date:o,boolean:o,integer:o,float:o,regexp:o,email:o,url:o,hex:o},string:{len:"${label} must be ${len} characters",min:"${label} must be at least ${min} characters",max:"${label} must be up to ${max} characters",range:"${label} must be between ${min}-${max} characters"},number:{len:"${label} must be equal to ${len}",min:"${label} must be minimum ${min}",max:"${label} must be maximum ${max}",range:"${label} must be between ${min}-${max}"},array:{len:"Must be ${len} ${label}",min:"At least ${min} ${label}",max:"At most ${max} ${label}",range:"The amount of ${label} must be between ${min}-${max}"},pattern:{mismatch:"${label} does not match the pattern ${pattern}"}}},Image:{preview:"Preview"}};t.a=u},function(e,t,r){"use strict";r.d(t,"a",(function(){return h})),r.d(t,"b",(function(){return l}));var i=r(13),n=r(51),a=r(59),s=r(61),o=r(60),u=r(0),c=r(112).a,d=Object(u.createContext)(void 0),h=function(e){Object(s.a)(r,e);var t=Object(o.a)(r);function r(){return Object(n.a)(this,r),t.apply(this,arguments)}return Object(a.a)(r,[{key:"getLocale",value:function(){var e=this.props,t=e.componentName,r=e.defaultLocale||c[t||"global"],n=this.context,a=t&&n?n[t]:{};return Object(i.a)(Object(i.a)({},"function"===typeof r?r():r),a||{})}},{key:"getLocaleCode",value:function(){var e=this.context,t=e&&e.locale;return e&&e.exist&&!t?c.locale:t}},{key:"render",value:function(){return this.props.children(this.getLocale(),this.getLocaleCode(),this.context)}}]),r}(u.Component);function l(e,t){var r=u.useContext(d);return[u.useMemo((function(){var n=t||c[e||"global"],a=e&&r?r[e]:{};return Object(i.a)(Object(i.a)({},"function"===typeof n?n():n),a||{})}),[e,t,r])]}h.defaultProps={componentName:"global"},h.contextType=d},function(e,t,r){"use strict";var i=r(0),n={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.6 854.5L649.9 594.8C690.2 542.7 712 479 712 412c0-80.2-31.3-155.4-87.9-212.1-56.6-56.7-132-87.9-212.1-87.9s-155.5 31.3-212.1 87.9C143.2 256.5 112 331.8 112 412c0 80.1 31.3 155.5 87.9 212.1C256.5 680.8 331.8 712 412 712c67 0 130.6-21.8 182.7-62l259.7 259.6a8.2 8.2 0 0011.6 0l43.6-43.5a8.2 8.2 0 000-11.6zM570.4 570.4C528 612.7 471.8 636 412 636s-116-23.3-158.4-65.6C211.3 528 188 471.8 188 412s23.3-116.1 65.6-158.4C296 211.3 352.2 188 412 188s116.1 23.2 158.4 65.6S636 352.2 636 412s-23.3 116.1-65.6 158.4z"}}]},name:"search",theme:"outlined"},a=r(25),s=function(e,t){return i.createElement(a.a,Object.assign({},e,{ref:t,icon:n}))};s.displayName="SearchOutlined";t.a=i.forwardRef(s)},function(e,t,r){"use strict";var i=r(11),n=r(135),a=r(10),s="1.48.9";i.ccxtVersion=s;var o={aax:r(276),aofex:r(278),ascendex:r(279),bequant:r(280),bibox:r(281),bigone:r(282),binance:r(161),binanceus:r(283),bit2c:r(284),bitbank:r(285),bitbay:r(286),bitcoincom:r(287),bitfinex:r(162),bitfinex2:r(288),bitflyer:r(289),bitforex:r(290),bitget:r(291),bithumb:r(292),bitkk:r(293),bitmart:r(294),bitmex:r(295),bitpanda:r(296),bitso:r(297),bitstamp:r(298),bitstamp1:r(299),bittrex:r(300),bitvavo:r(301),bitz:r(302),bl3p:r(303),bleutrade:r(304),braziliex:r(305),btcalpha:r(306),btcbox:r(307),btcmarkets:r(308),btctradeua:r(309),btcturk:r(310),buda:r(311),bw:r(312),bybit:r(313),bytetrade:r(314),cdax:r(315),cex:r(316),coinbase:r(317),coinbaseprime:r(318),coinbasepro:r(164),coincheck:r(319),coinegg:r(320),coinex:r(321),coinfalcon:r(322),coinfloor:r(323),coingi:r(324),coinmarketcap:r(325),coinmate:r(326),coinone:r(327),coinspot:r(328),crex24:r(329),currencycom:r(330),delta:r(331),deribit:r(332),digifinex:r(333),equos:r(334),eterbase:r(335),exmo:r(336),exx:r(337),fcoin:r(165),fcoinjp:r(338),flowbtc:r(339),foxbit:r(128),ftx:r(340),gateio:r(341),gemini:r(342),gopax:r(343),hbtc:r(344),hitbtc:r(126),hollaex:r(345),huobijp:r(346),huobipro:r(127),idex:r(347),independentreserve:r(348),indodax:r(349),itbit:r(350),kraken:r(351),kucoin:r(352),kuna:r(353),lakebtc:r(354),latoken:r(355),lbank:r(356),liquid:r(357),luno:r(358),lykke:r(359),mercado:r(360),mixcoins:r(361),ndax:r(362),novadax:r(363),oceanex:r(364),okcoin:r(365),okex:r(166),paymium:r(366),phemex:r(367),poloniex:r(368),probit:r(369),qtrade:r(370),rightbtc:r(371),ripio:r(372),southxchange:r(373),stex:r(374),surbitcoin:r(375),therock:r(376),tidebit:r(377),tidex:r(378),timex:r(379),upbit:r(380),vbtc:r(381),vcc:r(382),wavesexchange:r(383),whitebit:r(384),xbtce:r(385),xena:r(386),yobit:r(387),zaif:r(388),zb:r(163)};e.exports=Object.assign({version:s,Exchange:i,exchanges:Object.keys(o)},o,n,a)},function(e,t,r){"use strict";var i=r(9),n=r(13),a=r(0),s=r(33),o=r(14),u=r.n(o),c=r(24),d=r(41),h=r(42),l=r(45),f=r(44),p=r(17),v=r(34),m=r(16),g={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(e){var t=e.keyCode;if(e.altKey&&!e.ctrlKey||e.metaKey||t>=g.F1&&t<=g.F12)return!1;switch(t){case g.ALT:case g.CAPS_LOCK:case g.CONTEXT_MENU:case g.CTRL:case g.DOWN:case g.END:case g.ESC:case g.HOME:case g.INSERT:case g.LEFT:case g.MAC_FF_META:case g.META:case g.NUMLOCK:case g.NUM_CENTER:case g.PAGE_DOWN:case g.PAGE_UP:case g.PAUSE:case g.PRINT_SCREEN:case g.RIGHT:case g.SHIFT:case g.UP:case g.WIN_KEY:case g.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(e){if(e>=g.ZERO&&e<=g.NINE)return!0;if(e>=g.NUM_ZERO&&e<=g.NUM_MULTIPLY)return!0;if(e>=g.A&&e<=g.Z)return!0;if(-1!==window.navigator.userAgent.indexOf("WebKit")&&0===e)return!0;switch(e){case g.SPACE:case g.QUESTION_MARK:case g.NUM_PLUS:case g.NUM_MINUS:case g.NUM_PERIOD:case g.NUM_DIVISION:case g.SEMICOLON:case g.DASH:case g.EQUALS:case g.COMMA:case g.PERIOD:case g.SLASH:case g.APOSTROPHE:case g.SINGLE_QUOTE:case g.OPEN_SQUARE_BRACKET:case g.BACKSLASH:case g.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}},y=g,b=r(69);function x(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function k(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?x(Object(r),!0).forEach((function(t){Object(b.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var w="".concat("accept acceptCharset accessKey action allowFullScreen allowTransparency\n    alt async autoComplete autoFocus autoPlay capture cellPadding cellSpacing challenge\n    charSet checked classID className colSpan cols content contentEditable contextMenu\n    controls coords crossOrigin data dateTime default defer dir disabled download draggable\n    encType form formAction formEncType formMethod formNoValidate formTarget frameBorder\n    headers height hidden high href hrefLang htmlFor httpEquiv icon id inputMode integrity\n    is keyParams keyType kind label lang list loop low manifest marginHeight marginWidth max maxLength media\n    mediaGroup method min minLength multiple muted name noValidate nonce open\n    optimum pattern placeholder poster preload radioGroup readOnly rel required\n    reversed role rowSpan rows sandbox scope scoped scrolling seamless selected\n    shape size sizes span spellCheck src srcDoc srcLang srcSet start step style\n    summary tabIndex target title type useMap value width wmode wrap"," ").concat("onCopy onCut onPaste onCompositionEnd onCompositionStart onCompositionUpdate onKeyDown\n    onKeyPress onKeyUp onFocus onBlur onChange onInput onSubmit onClick onContextMenu onDoubleClick\n    onDrag onDragEnd onDragEnter onDragExit onDragLeave onDragOver onDragStart onDrop onMouseDown\n    onMouseEnter onMouseLeave onMouseMove onMouseOut onMouseOver onMouseUp onSelect onTouchCancel\n    onTouchEnd onTouchMove onTouchStart onScroll onWheel onAbort onCanPlay onCanPlayThrough\n    onDurationChange onEmptied onEncrypted onEnded onError onLoadedData onLoadedMetadata\n    onLoadStart onPause onPlay onPlaying onProgress onRateChange onSeeked onSeeking onStalled onSuspend onTimeUpdate onVolumeChange onWaiting onLoad onError").split(/[\s\n]+/),_="aria-",S="data-";function O(e,t){return 0===e.indexOf(t)}function T(e){var t,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t=!1===r?{aria:!0,data:!0,attr:!0}:!0===r?{aria:!0}:k({},r);var i={};return Object.keys(e).forEach((function(r){(t.aria&&("role"===r||O(r,_))||t.data&&O(r,S)||t.attr&&w.includes(r))&&(i[r]=e[r])})),i}var C=r(99),I=r(57);function M(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function A(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?M(Object(r),!0).forEach((function(t){E(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):M(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function E(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var N=a.forwardRef((function(e,t){var r=e.height,i=e.offset,n=e.children,s=e.prefixCls,o=e.onInnerResize,c={},d={display:"flex",flexDirection:"column"};return void 0!==i&&(c={height:r,position:"relative",overflow:"hidden"},d=A(A({},d),{},{transform:"translateY(".concat(i,"px)"),position:"absolute",left:0,right:0,top:0})),a.createElement("div",{style:c},a.createElement(I.a,{onResize:function(e){e.offsetHeight&&o&&o()}},a.createElement("div",{style:d,className:u()(E({},"".concat(s,"-holder-inner"),s)),ref:t},n)))}));N.displayName="Filler";var P=N,D=r(23);function L(e){return(L="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function B(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function R(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function V(e,t){return(V=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function G(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,i=q(e);if(t){var n=q(this).constructor;r=Reflect.construct(i,arguments,n)}else r=i.apply(this,arguments);return F(this,r)}}function F(e,t){return!t||"object"!==L(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function q(e){return(q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j(e){return"touches"in e?e.touches[0].pageY:e.pageY}var z=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&V(e,t)}(s,e);var t,r,i,n=G(s);function s(){var e;return B(this,s),(e=n.apply(this,arguments)).moveRaf=null,e.scrollbarRef=a.createRef(),e.thumbRef=a.createRef(),e.visibleTimeout=null,e.state={dragging:!1,pageY:null,startTop:null,visible:!1},e.delayHidden=function(){clearTimeout(e.visibleTimeout),e.setState({visible:!0}),e.visibleTimeout=setTimeout((function(){e.setState({visible:!1})}),2e3)},e.onScrollbarTouchStart=function(e){e.preventDefault()},e.onContainerMouseDown=function(e){e.stopPropagation(),e.preventDefault()},e.patchEvents=function(){window.addEventListener("mousemove",e.onMouseMove),window.addEventListener("mouseup",e.onMouseUp),e.thumbRef.current.addEventListener("touchmove",e.onMouseMove),e.thumbRef.current.addEventListener("touchend",e.onMouseUp)},e.removeEvents=function(){window.removeEventListener("mousemove",e.onMouseMove),window.removeEventListener("mouseup",e.onMouseUp),e.scrollbarRef.current.removeEventListener("touchstart",e.onScrollbarTouchStart),e.thumbRef.current.removeEventListener("touchstart",e.onMouseDown),e.thumbRef.current.removeEventListener("touchmove",e.onMouseMove),e.thumbRef.current.removeEventListener("touchend",e.onMouseUp),D.a.cancel(e.moveRaf)},e.onMouseDown=function(t){var r=e.props.onStartMove;e.setState({dragging:!0,pageY:j(t),startTop:e.getTop()}),r(),e.patchEvents(),t.stopPropagation(),t.preventDefault()},e.onMouseMove=function(t){var r=e.state,i=r.dragging,n=r.pageY,a=r.startTop,s=e.props.onScroll;if(D.a.cancel(e.moveRaf),i){var o=a+(j(t)-n),u=e.getEnableScrollRange(),c=e.getEnableHeightRange(),d=c?o/c:0,h=Math.ceil(d*u);e.moveRaf=Object(D.a)((function(){s(h)}))}},e.onMouseUp=function(){var t=e.props.onStopMove;e.setState({dragging:!1}),t(),e.removeEvents()},e.getSpinHeight=function(){var t=e.props,r=t.height,i=r/t.count*10;return i=Math.max(i,20),i=Math.min(i,r/2),Math.floor(i)},e.getEnableScrollRange=function(){var t=e.props;return t.scrollHeight-t.height||0},e.getEnableHeightRange=function(){return e.props.height-e.getSpinHeight()||0},e.getTop=function(){var t=e.props.scrollTop,r=e.getEnableScrollRange(),i=e.getEnableHeightRange();return 0===t||0===r?0:t/r*i},e.getVisible=function(){var t=e.state.visible,r=e.props;return!(r.height>=r.scrollHeight)&&t},e}return t=s,(r=[{key:"componentDidMount",value:function(){this.scrollbarRef.current.addEventListener("touchstart",this.onScrollbarTouchStart),this.thumbRef.current.addEventListener("touchstart",this.onMouseDown)}},{key:"componentDidUpdate",value:function(e){e.scrollTop!==this.props.scrollTop&&this.delayHidden()}},{key:"componentWillUnmount",value:function(){this.removeEvents(),clearTimeout(this.visibleTimeout)}},{key:"render",value:function(){var e,t,r,i=this.state.dragging,n=this.props.prefixCls,s=this.getSpinHeight(),o=this.getTop(),c=this.getVisible();return a.createElement("div",{ref:this.scrollbarRef,className:"".concat(n,"-scrollbar"),style:{width:8,top:0,bottom:0,right:0,position:"absolute",display:c?null:"none"},onMouseDown:this.onContainerMouseDown,onMouseMove:this.delayHidden},a.createElement("div",{ref:this.thumbRef,className:u()("".concat(n,"-scrollbar-thumb"),(e={},t="".concat(n,"-scrollbar-thumb-moving"),r=i,t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e)),style:{width:"100%",height:s,top:o,left:0,position:"absolute",background:"rgba(0, 0, 0, 0.5)",borderRadius:99,cursor:"pointer",userSelect:"none"},onMouseDown:this.onMouseDown}))}}])&&R(t.prototype,r),i&&R(t,i),s}(a.Component);function H(e){var t=e.children,r=e.setRef,i=a.useCallback((function(e){r(e)}),[]);return a.cloneElement(t,{ref:i})}var U=r(58);function W(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var K=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.maps={},this.maps.prototype=null}var t,r,i;return t=e,(r=[{key:"set",value:function(e,t){this.maps[e]=t}},{key:"get",value:function(e){return this.maps[e]}}])&&W(t.prototype,r),i&&W(t,i),e}();function X(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],i=!0,n=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(i=(s=o.next()).done)&&(r.push(s.value),!t||r.length!==t);i=!0);}catch(u){n=!0,a=u}finally{try{i||null==o.return||o.return()}finally{if(n)throw a}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Y(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Y(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function Z(e){return(Z="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],i=!0,n=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(i=(s=o.next()).done)&&(r.push(s.value),!t||r.length!==t);i=!0);}catch(u){n=!0,a=u}finally{try{i||null==o.return||o.return()}finally{if(n)throw a}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return $(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return $(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function J(e,t,r){var i=Q(a.useState(e),2),n=i[0],s=i[1],o=Q(a.useState(null),2),u=o[0],c=o[1];return a.useEffect((function(){var i=function(e,t,r){var i,n,a=e.length,s=t.length;if(0===a&&0===s)return null;a<s?(i=e,n=t):(i=t,n=e);var o={__EMPTY_ITEM__:!0};function u(e){return void 0!==e?r(e):o}for(var c=null,d=1!==Math.abs(a-s),h=0;h<n.length;h+=1){var l=u(i[h]);if(l!==u(n[h])){c=h,d=d||l!==u(n[h+1]);break}}return null===c?null:{index:c,multiple:d}}(n||[],e||[],t);void 0!==(null===i||void 0===i?void 0:i.index)&&(null===r||void 0===r||r(i.index),c(e[i.index])),s(e)}),[e]),[u]}function ee(e){return(ee="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var te="object"===("undefined"===typeof navigator?"undefined":ee(navigator))&&/Firefox/i.test(navigator.userAgent),re=function(e,t){var r=Object(a.useRef)(!1),i=Object(a.useRef)(null);function n(){clearTimeout(i.current),r.current=!0,i.current=setTimeout((function(){r.current=!1}),50)}var s=Object(a.useRef)({top:e,bottom:t});return s.current.top=e,s.current.bottom=t,function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=e<0&&s.current.top||e>0&&s.current.bottom;return t&&a?(clearTimeout(i.current),r.current=!1):a&&!r.current||n(),!r.current&&a}};function ie(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function ne(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ie(Object(r),!0).forEach((function(t){ae(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ie(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ae(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function se(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],i=!0,n=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(i=(s=o.next()).done)&&(r.push(s.value),!t||r.length!==t);i=!0);}catch(u){n=!0,a=u}finally{try{i||null==o.return||o.return()}finally{if(n)throw a}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return oe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return oe(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function ue(e,t){if(null==e)return{};var r,i,n=function(e,t){if(null==e)return{};var r,i,n={},a=Object.keys(e);for(i=0;i<a.length;i++)r=a[i],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var ce=[],de={overflowY:"auto",overflowAnchor:"none"};function he(e,t){var r=e.prefixCls,i=void 0===r?"rc-virtual-list":r,n=e.className,s=e.height,o=e.itemHeight,c=e.fullHeight,d=void 0===c||c,h=e.style,l=e.data,f=e.children,p=e.itemKey,v=e.virtual,m=e.component,g=void 0===m?"div":m,y=e.onScroll,b=ue(e,["prefixCls","className","height","itemHeight","fullHeight","style","data","children","itemKey","virtual","component","onScroll"]),x=!(!1===v||!s||!o),k=x&&l&&o*l.length>s,w=se(Object(a.useState)(0),2),_=w[0],S=w[1],O=se(Object(a.useState)(!1),2),T=O[0],C=O[1],I=u()(i,n),M=l||ce,A=Object(a.useRef)(),E=Object(a.useRef)(),N=Object(a.useRef)(),L=a.useCallback((function(e){return"function"===typeof p?p(e):null===e||void 0===e?void 0:e[p]}),[p]),B={getKey:L};function R(e){S((function(t){var r=function(e){var t=e;Number.isNaN(fe.current)||(t=Math.min(t,fe.current));return t=Math.max(t,0)}("function"===typeof e?e(t):e);return A.current.scrollTop=r,r}))}var V=Object(a.useRef)({start:0,end:M.length}),G=Object(a.useRef)(),F=se(J(M,L),1)[0];G.current=F;var q=se(function(e,t,r){var i=X(a.useState(0),2),n=i[0],s=i[1],o=Object(a.useRef)(new Map),u=Object(a.useRef)(new K),c=Object(a.useRef)(0);function d(){c.current+=1;var e=c.current;Promise.resolve().then((function(){e===c.current&&(o.current.forEach((function(e,t){if(e&&e.offsetParent){var r=Object(U.a)(e),i=r.offsetHeight;u.current.get(t)!==i&&u.current.set(t,r.offsetHeight)}})),s((function(e){return e+1})))}))}return[function(i,n){var a=e(i),s=o.current.get(a);n?(o.current.set(a,n),d()):o.current.delete(a),!s!==!n&&(n?null===t||void 0===t||t(i):null===r||void 0===r||r(i))},d,u.current,n]}(L,null,null),4),j=q[0],W=q[1],Y=q[2],Q=q[3],$=a.useMemo((function(){if(!x)return{scrollHeight:void 0,start:0,end:M.length-1,offset:void 0};var e;if(!k)return{scrollHeight:(null===(e=E.current)||void 0===e?void 0:e.offsetHeight)||0,start:0,end:M.length-1,offset:void 0};for(var t,r,i,n=0,a=M.length,u=0;u<a;u+=1){var c=M[u],d=L(c),h=Y.get(d),l=n+(void 0===h?o:h);l>=_&&void 0===t&&(t=u,r=n),l>_+s&&void 0===i&&(i=u),n=l}return void 0===t&&(t=0,r=0),void 0===i&&(i=M.length-1),{scrollHeight:n,start:t,end:i=Math.min(i+1,M.length),offset:r}}),[k,x,_,M,Q,s]),ee=$.scrollHeight,ie=$.start,oe=$.end,he=$.offset;V.current.start=ie,V.current.end=oe;var le=ee-s,fe=Object(a.useRef)(le);fe.current=le;var pe=_<=0,ve=_>=le,me=re(pe,ve);var ge=se(function(e,t,r,i){var n=Object(a.useRef)(0),s=Object(a.useRef)(null),o=Object(a.useRef)(null),u=Object(a.useRef)(!1),c=re(t,r);return[function(t){if(e){D.a.cancel(s.current);var r=t.deltaY;n.current+=r,o.current=r,c(r)||(te||t.preventDefault(),s.current=Object(D.a)((function(){var e=u.current?10:1;i(n.current*e),n.current=0})))}},function(t){e&&(u.current=t.detail===o.current)}]}(x,pe,ve,(function(e){R((function(t){return t+e}))})),2),ye=ge[0],be=ge[1];!function(e,t,r){var i,n=Object(a.useRef)(!1),s=Object(a.useRef)(0),o=Object(a.useRef)(null),u=Object(a.useRef)(null),c=function(e){if(n.current){var t=Math.ceil(e.touches[0].pageY),i=s.current-t;s.current=t,r(i)&&e.preventDefault(),clearInterval(u.current),u.current=setInterval((function(){(!r(i*=.9333333333333333,!0)||Math.abs(i)<=.1)&&clearInterval(u.current)}),16)}},d=function(){n.current=!1,i()},h=function(e){i(),1!==e.touches.length||n.current||(n.current=!0,s.current=Math.ceil(e.touches[0].pageY),o.current=e.target,o.current.addEventListener("touchmove",c),o.current.addEventListener("touchend",d))};i=function(){o.current&&(o.current.removeEventListener("touchmove",c),o.current.removeEventListener("touchend",d))},a.useLayoutEffect((function(){return e&&t.current.addEventListener("touchstart",h),function(){t.current.removeEventListener("touchstart",h),i(),clearInterval(u.current)}}),[e])}(x,A,(function(e,t){return!me(e,t)&&(ye({preventDefault:function(){},deltaY:e}),!0)})),a.useLayoutEffect((function(){function e(e){x&&e.preventDefault()}return A.current.addEventListener("wheel",ye),A.current.addEventListener("DOMMouseScroll",be),A.current.addEventListener("MozMousePixelScroll",e),function(){A.current.removeEventListener("wheel",ye),A.current.removeEventListener("DOMMouseScroll",be),A.current.removeEventListener("MozMousePixelScroll",e)}}),[x]);var xe=function(e,t,r,i,n,s,o,u){var c=a.useRef();return function(a){if(null!==a&&void 0!==a){if(D.a.cancel(c.current),"number"===typeof a)o(a);else if(a&&"object"===Z(a)){var d,h=a.align;d="index"in a?a.index:t.findIndex((function(e){return n(e)===a.key}));var l=a.offset,f=void 0===l?0:l;!function a(u,l){if(!(u<0)&&e.current){var p=e.current.clientHeight,v=!1,m=l;if(p){for(var g=l||h,y=0,b=0,x=0,k=Math.min(t.length,d),w=0;w<=k;w+=1){var _=n(t[w]);b=y;var S=r.get(_);y=x=b+(void 0===S?i:S),w===d&&void 0===S&&(v=!0)}var O=null;switch(g){case"top":O=b-f;break;case"bottom":O=x-p+f;break;default:var T=e.current.scrollTop;b<T?m="top":x>T+p&&(m="bottom")}null!==O&&O!==e.current.scrollTop&&o(O)}c.current=Object(D.a)((function(){v&&s(),a(u-1,m)}))}}(3)}}else u()}}(A,M,Y,o,L,W,R,(function(){var e;null===(e=N.current)||void 0===e||e.delayHidden()}));a.useImperativeHandle(t,(function(){return{scrollTo:xe}}));var ke=function(e,t,r,i,n,s){var o=s.getKey;return e.slice(t,r+1).map((function(e,r){var s=n(e,t+r,{}),u=o(e);return a.createElement(H,{key:u,setRef:function(t){return i(e,t)}},s)}))}(M,ie,oe,j,f,B),we=null;return s&&(we=ne(ae({},d?"height":"maxHeight",s),de),x&&(we.overflowY="hidden",T&&(we.pointerEvents="none"))),a.createElement("div",Object.assign({style:ne(ne({},h),{},{position:"relative"}),className:I},b),a.createElement(g,{className:"".concat(i,"-holder"),style:we,ref:A,onScroll:function(e){var t=e.currentTarget.scrollTop;t!==_&&R(t),null===y||void 0===y||y(e)}},a.createElement(P,{prefixCls:i,height:ee,offset:he,onInnerResize:W,ref:E},ke)),x&&a.createElement(z,{ref:N,prefixCls:i,scrollTop:_,height:s,scrollHeight:ee,count:M.length,onScroll:function(e){R(e)},onStartMove:function(){C(!0)},onStopMove:function(){C(!1)}}))}var le=a.forwardRef(he);le.displayName="List";var fe=le,pe=function(e){var t,r=e.className,i=e.customizeIcon,n=e.customizeIconProps,s=e.onMouseDown,o=e.onClick,c=e.children;return t="function"===typeof i?i(n):i,a.createElement("span",{className:r,onMouseDown:function(e){e.preventDefault(),s&&s(e)},style:{userSelect:"none",WebkitUserSelect:"none"},unselectable:"on",onClick:o,"aria-hidden":!0},void 0!==t?t:a.createElement("span",{className:u()(r.split(/\s+/).map((function(e){return"".concat(e,"-icon")})))},c))},ve=function(e,t){var r=e.prefixCls,i=e.id,n=e.flattenOptions,s=e.childrenAsData,o=e.values,d=e.searchValue,h=e.multiple,l=e.defaultActiveFirstOption,f=e.height,g=e.itemHeight,b=e.notFoundContent,x=e.open,k=e.menuItemSelectedIcon,w=e.virtual,_=e.onSelect,S=e.onToggleOpen,O=e.onActiveValue,I=e.onScroll,M=e.onMouseEnter,A="".concat(r,"-item"),E=Object(C.a)((function(){return n}),[x,n],(function(e,t){return t[0]&&e[1]!==t[1]})),N=a.useRef(null),P=function(e){e.preventDefault()},D=function(e){N.current&&N.current.scrollTo({index:e})},L=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=E.length,i=0;i<r;i+=1){var n=(e+i*t+r)%r,a=E[n],s=a.group,o=a.data;if(!s&&!o.disabled)return n}return-1},B=a.useState((function(){return L(0)})),R=Object(m.a)(B,2),V=R[0],G=R[1],F=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];G(e);var r={source:t?"keyboard":"mouse"},i=E[e];i?O(i.data.value,e,r):O(null,-1,r)};a.useEffect((function(){F(!1!==l?L(0):-1)}),[E.length,d]),a.useEffect((function(){var e,t=setTimeout((function(){if(!h&&x&&1===o.size){var e=Array.from(o)[0],t=E.findIndex((function(t){return t.data.value===e}));F(t),D(t)}}));x&&(null===(e=N.current)||void 0===e||e.scrollTo(void 0));return function(){return clearTimeout(t)}}),[x]);var q=function(e){void 0!==e&&_(e,{selected:!o.has(e)}),h||S(!1)};if(a.useImperativeHandle(t,(function(){return{onKeyDown:function(e){var t=e.which;switch(t){case y.UP:case y.DOWN:var r=0;if(t===y.UP?r=-1:t===y.DOWN&&(r=1),0!==r){var i=L(V+r,r);D(i),F(i,!0)}break;case y.ENTER:var n=E[V];n&&!n.data.disabled?q(n.data.value):q(void 0),x&&e.preventDefault();break;case y.ESC:S(!1),x&&e.stopPropagation()}},onKeyUp:function(){},scrollTo:function(e){D(e)}}})),0===E.length)return a.createElement("div",{role:"listbox",id:"".concat(i,"_list"),className:"".concat(A,"-empty"),onMouseDown:P},b);function j(e){var t=E[e];if(!t)return null;var r=t.data||{},n=r.value,u=r.label,d=r.children,h=T(r,!0),l=s?d:u;return t?a.createElement("div",Object(c.a)({"aria-label":"string"===typeof l?l:null},h,{key:e,role:"option",id:"".concat(i,"_list_").concat(e),"aria-selected":o.has(n)}),n):null}return a.createElement(a.Fragment,null,a.createElement("div",{role:"listbox",id:"".concat(i,"_list"),style:{height:0,width:0,overflow:"hidden"}},j(V-1),j(V),j(V+1)),a.createElement(fe,{itemKey:"key",ref:N,data:E,height:f,itemHeight:g,fullHeight:!1,onMouseDown:P,onScroll:I,virtual:w,onMouseEnter:M},(function(e,t){var r,i=e.group,n=e.groupOption,d=e.data,h=d.label,l=d.key;if(i)return a.createElement("div",{className:u()(A,"".concat(A,"-group"))},void 0!==h?h:l);var f=d.disabled,m=d.value,g=d.title,y=d.children,b=d.style,x=d.className,w=Object(v.a)(d,["disabled","value","title","children","style","className"]),_=o.has(m),S="".concat(A,"-option"),O=u()(A,S,x,(r={},Object(p.a)(r,"".concat(S,"-grouped"),n),Object(p.a)(r,"".concat(S,"-active"),V===t&&!f),Object(p.a)(r,"".concat(S,"-disabled"),f),Object(p.a)(r,"".concat(S,"-selected"),_),r)),T=!k||"function"===typeof k||_,C=(s?y:h)||m,I="string"===typeof C||"number"===typeof C?C.toString():void 0;return void 0!==g&&(I=g),a.createElement("div",Object(c.a)({},w,{"aria-selected":_,className:O,title:I,onMouseMove:function(){V===t||f||F(t)},onClick:function(){f||q(m)},style:b}),a.createElement("div",{className:"".concat(S,"-content")},C),a.isValidElement(k)||_,T&&a.createElement(pe,{className:"".concat(A,"-option-state"),customizeIcon:k,customizeIconProps:{isSelected:_}},_?"\u2713":null))})))},me=a.forwardRef(ve);me.displayName="OptionList";var ge=me,ye=function(){return null};ye.isSelectOption=!0;var be=ye,xe=function(){return null};xe.isSelectOptGroup=!0;var ke=xe,we=r(15),_e=r(54);function Se(e){var t=e.key,r=e.props,i=r.children,n=r.value,a=Object(v.a)(r,["children","value"]);return Object(we.a)({key:t,value:void 0!==n?n:t,children:i},a)}function Oe(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Object(_e.a)(e).map((function(e,r){if(!a.isValidElement(e)||!e.type)return null;var i=e.type.isSelectOptGroup,n=e.key,s=e.props,o=s.children,u=Object(v.a)(s,["children"]);return t||!i?Se(e):Object(we.a)(Object(we.a)({key:"__RC_SELECT_GRP__".concat(null===n?r:n,"__"),label:n},u),{},{options:Oe(o)})})).filter((function(e){return e}))}var Te=r(97),Ce=r(102),Ie=r(70),Me=r(98);var Ae=r(38),Ee=r(43),Ne=r(19);function Pe(e){return Array.isArray(e)?e:void 0!==e?[e]:[]}function De(e,t){var r,i=Object(Ae.a)(t);for(r=e.length-1;r>=0&&e[r].disabled;r-=1);var n=null;return-1!==r&&(n=i[r],i.splice(r,1)),{values:i,removedValue:n}}var Le="undefined"!==typeof window&&window.document&&window.document.documentElement,Be=0;function Re(e,t){var r,i=e.key;return"value"in e&&(r=e.value),null!==i&&void 0!==i?i:void 0!==r?r:"rc-index-key-".concat(t)}function Ve(e){var t=Object(we.a)({},e);return"props"in t||Object.defineProperty(t,"props",{get:function(){return Object(Ne.a)(!1,"Return type is option instead of Option instance. Please read value directly instead of reading from `props`."),t}}),t}function Ge(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=r.prevValueOptions,n=void 0===i?[]:i,a=new Map;return t.forEach((function(e){if(!e.group){var t=e.data;a.set(t.value,t)}})),e.map((function(e){var t=a.get(e);return t||(t=Object(we.a)({},n.find((function(t){return t._INTERNAL_OPTION_VALUE_===e})))),Ve(t)}))}function Fe(e){return Pe(e).join("")}function qe(e,t){if(!t||!t.length)return null;var r=!1;var i=function e(t,i){var n,a=(n=i,Object(Te.a)(n)||Object(Ce.a)(n)||Object(Ie.a)(n)||Object(Me.a)()),s=a[0],o=a.slice(1);if(!s)return[t];var u=t.split(s);return r=r||u.length>1,u.reduce((function(t,r){return[].concat(Object(Ae.a)(t),Object(Ae.a)(e(r,o)))}),[]).filter((function(e){return e}))}(e,t);return r?i:null}var je=r(103),ze=r(65);function He(e){var t=e.prefixCls,r=e.item,i=e.renderItem,n=e.responsive,s=e.registerSize,o=e.itemKey,d=e.className,h=e.style,l=e.children,f=e.display,p=e.order,m=e.component,g=Object(v.a)(e,["prefixCls","item","renderItem","responsive","registerSize","itemKey","className","style","children","display","order","component"]),y=n&&!f;function b(e){s(o,e)}a.useEffect((function(){return function(){b(null)}}),[]);var x=void 0!==r?i(r):l,k=a.createElement(m,Object(c.a)({className:u()(t,d),style:Object(we.a)({opacity:y?.2:1,height:y?0:void 0,overflowY:y?"hidden":void 0,order:n?p:void 0,pointerEvents:y?"none":void 0},h)},g),x);return n&&(k=a.createElement(I.a,{onResize:function(e){b(e.offsetWidth)}},k)),k}function Ue(e){return"+ ".concat(e.length," ...")}function We(e,t){var r=e.prefixCls,i=void 0===r?"rc-overflow":r,n=e.data,s=void 0===n?[]:n,o=e.renderItem,d=e.itemKey,h=e.itemWidth,l=void 0===h?10:h,f=e.style,p=e.className,g=e.maxCount,y=e.renderRest,b=void 0===y?Ue:y,x=e.renderItemProps,k=e.suffix,w=e.component,_=void 0===w?"div":w,S=e.itemComponent,O=void 0===S?"div":S,T=Object(v.a)(e,["prefixCls","data","renderItem","itemKey","itemWidth","style","className","maxCount","renderRest","renderItemProps","suffix","component","itemComponent"]),C=function(){var e=Object(a.useState)({}),t=Object(m.a)(e,2)[1],r=Object(a.useRef)([]),i=Object(a.useRef)(!1),n=0,s=0;return Object(a.useEffect)((function(){return function(){i.current=!0}}),[]),function(e){var a=n;return n+=1,r.current.length<a+1&&(r.current[a]=e),[r.current[a],function(e){r.current[a]="function"===typeof e?e(r.current[a]):e,D.a.cancel(s),s=Object(D.a)((function(){i.current||t({})}))}]}}(),M=C(0),A=Object(m.a)(M,2),E=A[0],N=A[1],P=C(new Map),L=Object(m.a)(P,2),B=L[0],R=L[1],V=C(0),G=Object(m.a)(V,2),F=G[0],q=G[1],j=C(0),z=Object(m.a)(j,2),H=z[0],U=z[1],W=C(0),K=Object(m.a)(W,2),X=K[0],Y=K[1],Z=Object(a.useState)(null),Q=Object(m.a)(Z,2),$=Q[0],J=Q[1],ee=Object(a.useState)(0),te=Object(m.a)(ee,2),re=te[0],ie=te[1],ne=Object(a.useState)(!1),ae=Object(m.a)(ne,2),se=ae[0],oe=ae[1],ue="".concat(i,"-item"),ce=Math.max(F,H),de=s.length&&"responsive"===g,he=de||"number"===typeof g&&s.length>g,le=Object(a.useMemo)((function(){var e=s;return de?e=s.slice(0,Math.min(s.length,E/l)):"number"===typeof g&&(e=s.slice(0,g)),e}),[s,l,E,g,de]),fe=Object(a.useMemo)((function(){return de?s.slice(re+1):s.slice(le.length)}),[s,le,de,re]),pe=Object(a.useCallback)((function(e,t){var r;return"function"===typeof d?d(e):null!==(r=d&&(null===e||void 0===e?void 0:e[d]))&&void 0!==r?r:t}),[d]),ve=Object(a.useCallback)(o||function(e){return e},[o]);function me(e,t){ie(e),t||oe(e<s.length-1)}function ge(e,t){R((function(r){var i=new Map(r);return null===t?i.delete(e):i.set(e,t),i}))}function ye(e){return B.get(pe(le[e],e))}a.useLayoutEffect((function(){if(E&&ce&&le){var e=X,t=le.length,r=t-1;if(!t)return me(0),void J(null);for(var i=0;i<t;i+=1){var n=ye(i);if(void 0===n){me(i-1,!0);break}if(e+=n,i===r-1&&e+ye(r)<=E){me(r),J(null);break}if(e+ce>E){me(i-1),J(e-n-X+H);break}if(i===r){me(r),J(e-X);break}}k&&ye(0)+X>E&&J(null)}}),[E,B,H,X,pe,le]);var be=se&&!!fe.length,xe={};null!==$&&de&&(xe={position:"absolute",left:$,top:0});var ke={prefixCls:ue,responsive:de,component:O},we=a.createElement(_,Object(c.a)({className:u()(i,p),style:f,ref:t},T),le.map((function(e,t){var r=pe(e,t);return a.createElement(He,Object(c.a)({},ke,{order:t,key:r,item:e,renderItem:ve,itemKey:r,registerSize:ge,display:t<=re},null===x||void 0===x?void 0:x(e)))})),he?a.createElement(He,Object(c.a)({},ke,{order:be?re:Number.MAX_SAFE_INTEGER,className:"".concat(ue,"-rest"),registerSize:function(e,t){U(t),q(H)},display:be}),"function"===typeof b?b(fe):b):null,k&&a.createElement(He,Object(c.a)({},ke,{order:re,className:"".concat(ue,"-suffix"),registerSize:function(e,t){Y(t)},display:!0,style:xe}),k));return de&&(we=a.createElement(I.a,{onResize:function(e,t){N(t.clientWidth)}},we)),we}var Ke=a.forwardRef(We);Ke.displayName="Overflow";var Xe=Ke,Ye=r(26),Ze=function(e,t){var r,i,n=e.prefixCls,s=e.id,o=e.inputElement,c=e.disabled,d=e.tabIndex,h=e.autoFocus,l=e.autoComplete,f=e.editable,p=e.accessibilityIndex,v=e.value,m=e.maxLength,g=e.onKeyDown,y=e.onMouseDown,b=e.onChange,x=e.onPaste,k=e.onCompositionStart,w=e.onCompositionEnd,_=e.open,S=e.attrs,O=o||a.createElement("input",null),T=O,C=T.ref,I=T.props,M=I.onKeyDown,A=I.onChange,E=I.onMouseDown,N=I.onCompositionStart,P=I.onCompositionEnd,D=I.style;return O=a.cloneElement(O,Object(we.a)(Object(we.a)({id:s,ref:Object(Ye.a)(t,C),disabled:c,tabIndex:d,autoComplete:l||"off",type:"search",autoFocus:h,className:u()("".concat(n,"-selection-search-input"),null===(r=O)||void 0===r||null===(i=r.props)||void 0===i?void 0:i.className),style:Object(we.a)(Object(we.a)({},D),{},{opacity:f?null:0}),role:"combobox","aria-expanded":_,"aria-haspopup":"listbox","aria-owns":"".concat(s,"_list"),"aria-autocomplete":"list","aria-controls":"".concat(s,"_list"),"aria-activedescendant":"".concat(s,"_list_").concat(p)},S),{},{value:f?v:"",maxLength:m,readOnly:!f,unselectable:f?null:"on",onKeyDown:function(e){g(e),M&&M(e)},onMouseDown:function(e){y(e),E&&E(e)},onChange:function(e){b(e),A&&A(e)},onCompositionStart:function(e){k(e),N&&N(e)},onCompositionEnd:function(e){w(e),P&&P(e)},onPaste:x}))},Qe=a.forwardRef(Ze);Qe.displayName="Input";var $e=Qe;function Je(e,t){Le?a.useLayoutEffect(e,t):a.useEffect(e,t)}var et=function(e){e.preventDefault(),e.stopPropagation()},tt=function(e){var t=e.id,r=e.prefixCls,i=e.values,n=e.open,s=e.searchValue,o=e.inputRef,c=e.placeholder,d=e.disabled,h=e.mode,l=e.showSearch,f=e.autoFocus,v=e.autoComplete,g=e.accessibilityIndex,y=e.tabIndex,b=e.removeIcon,x=e.maxTagCount,k=e.maxTagTextLength,w=e.maxTagPlaceholder,_=void 0===w?function(e){return"+ ".concat(e.length," ...")}:w,S=e.tagRender,O=e.onToggleOpen,C=e.onSelect,I=e.onInputChange,M=e.onInputPaste,A=e.onInputKeyDown,E=e.onInputMouseDown,N=e.onInputCompositionStart,P=e.onInputCompositionEnd,D=a.useRef(null),L=Object(a.useState)(0),B=Object(m.a)(L,2),R=B[0],V=B[1],G=Object(a.useState)(!1),F=Object(m.a)(G,2),q=F[0],j=F[1],z="".concat(r,"-selection"),H=n||"tags"===h?s:"",U="tags"===h||l&&(n||q);function W(e,t,r,i){return a.createElement("span",{className:u()("".concat(z,"-item"),Object(p.a)({},"".concat(z,"-item-disabled"),t))},a.createElement("span",{className:"".concat(z,"-item-content")},e),r&&a.createElement(pe,{className:"".concat(z,"-item-remove"),onMouseDown:et,onClick:i,customizeIcon:b},"\xd7"))}Je((function(){V(D.current.scrollWidth)}),[H]);var K=a.createElement("div",{className:"".concat(z,"-search"),style:{width:R},onFocus:function(){j(!0)},onBlur:function(){j(!1)}},a.createElement($e,{ref:o,open:n,prefixCls:r,id:t,inputElement:null,disabled:d,autoFocus:f,autoComplete:v,editable:U,accessibilityIndex:g,value:H,onKeyDown:A,onMouseDown:E,onChange:I,onPaste:M,onCompositionStart:N,onCompositionEnd:P,tabIndex:y,attrs:T(e,!0)}),a.createElement("span",{ref:D,className:"".concat(z,"-search-mirror"),"aria-hidden":!0},H,"\xa0")),X=a.createElement(Xe,{prefixCls:"".concat(z,"-overflow"),data:i,renderItem:function(e){var t=e.disabled,r=e.label,i=e.value,s=!d&&!t,o=r;if("number"===typeof k&&("string"===typeof r||"number"===typeof r)){var u=String(o);u.length>k&&(o="".concat(u.slice(0,k),"..."))}var c=function(e){e&&e.stopPropagation(),C(i,{selected:!1})};return"function"===typeof S?function(e,t,r,i,s){return a.createElement("span",{onMouseDown:function(e){et(e),O(!n)}},S({label:t,value:e,disabled:r,closable:i,onClose:s}))}(i,o,t,s,c):W(o,t,s,c)},renderRest:function(e){return W("function"===typeof _?_(e):_,!1)},suffix:K,itemKey:"key",maxCount:x});return a.createElement(a.Fragment,null,X,!i.length&&!H&&a.createElement("span",{className:"".concat(z,"-placeholder")},c))},rt=function(e){var t=e.inputElement,r=e.prefixCls,i=e.id,n=e.inputRef,s=e.disabled,o=e.autoFocus,u=e.autoComplete,c=e.accessibilityIndex,d=e.mode,h=e.open,l=e.values,f=e.placeholder,p=e.tabIndex,v=e.showSearch,g=e.searchValue,y=e.activeValue,b=e.maxLength,x=e.onInputKeyDown,k=e.onInputMouseDown,w=e.onInputChange,_=e.onInputPaste,S=e.onInputCompositionStart,O=e.onInputCompositionEnd,C=a.useState(!1),I=Object(m.a)(C,2),M=I[0],A=I[1],E="combobox"===d,N=E||v,P=l[0],D=g||"";E&&y&&!M&&(D=y),a.useEffect((function(){E&&A(!1)}),[E,y]);var L=!("combobox"!==d&&!h)&&!!D,B=!P||"string"!==typeof P.label&&"number"!==typeof P.label?void 0:P.label.toString();return a.createElement(a.Fragment,null,a.createElement("span",{className:"".concat(r,"-selection-search")},a.createElement($e,{ref:n,prefixCls:r,id:i,open:h,inputElement:t,disabled:s,autoFocus:o,autoComplete:u,editable:N,accessibilityIndex:c,value:D,onKeyDown:x,onMouseDown:k,onChange:function(e){A(!0),w(e)},onPaste:_,onCompositionStart:S,onCompositionEnd:O,tabIndex:p,attrs:T(e,!0),maxLength:E?b:void 0})),!E&&P&&!L&&a.createElement("span",{className:"".concat(r,"-selection-item"),title:B},P.label),!P&&!L&&a.createElement("span",{className:"".concat(r,"-selection-placeholder")},f))};function it(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:250,t=a.useRef(null),r=a.useRef(null);function i(i){(i||null===t.current)&&(t.current=i),window.clearTimeout(r.current),r.current=window.setTimeout((function(){t.current=null}),e)}return a.useEffect((function(){return function(){window.clearTimeout(r.current)}}),[]),[function(){return t.current},i]}var nt=function(e,t){var r=Object(a.useRef)(null),i=Object(a.useRef)(!1),n=e.prefixCls,s=e.multiple,o=e.open,u=e.mode,d=e.showSearch,h=e.tokenWithEnter,l=e.onSearch,f=e.onSearchSubmit,p=e.onToggleOpen,v=e.onInputKeyDown,g=e.domRef;a.useImperativeHandle(t,(function(){return{focus:function(){r.current.focus()},blur:function(){r.current.blur()}}}));var b=it(0),x=Object(m.a)(b,2),k=x[0],w=x[1],_=Object(a.useRef)(null),S=function(e){!1!==l(e,!0,i.current)&&p(!0)},O={inputRef:r,onInputKeyDown:function(e){var t=e.which;t!==y.UP&&t!==y.DOWN||e.preventDefault(),v&&v(e),t!==y.ENTER||"tags"!==u||i.current||o||f(e.target.value),[y.SHIFT,y.TAB,y.BACKSPACE,y.ESC].includes(t)||p(!0)},onInputMouseDown:function(){w(!0)},onInputChange:function(e){var t=e.target.value;if(h&&_.current&&/[\r\n]/.test(_.current)){var r=_.current.replace(/[\r\n]+$/,"").replace(/\r\n/g," ").replace(/[\r\n]/g," ");t=t.replace(r,_.current)}_.current=null,S(t)},onInputPaste:function(e){var t=e.clipboardData.getData("text");_.current=t},onInputCompositionStart:function(){i.current=!0},onInputCompositionEnd:function(e){i.current=!1,"combobox"!==u&&S(e.target.value)}},T=s?a.createElement(tt,Object(c.a)({},e,O)):a.createElement(rt,Object(c.a)({},e,O));return a.createElement("div",{ref:g,className:"".concat(n,"-selector"),onClick:function(e){e.target!==r.current&&(void 0!==document.body.style.msTouchAction?setTimeout((function(){r.current.focus()})):r.current.focus())},onMouseDown:function(e){var t=k();e.target===r.current||t||e.preventDefault(),("combobox"===u||d&&t)&&o||(o&&l("",!0,!1),p())}},T)},at=a.forwardRef(nt);at.displayName="Selector";var st=at,ot=r(110),ut=function(e,t){var r=e.prefixCls,i=(e.disabled,e.visible),n=e.children,s=e.popupElement,o=e.containerWidth,d=e.animation,h=e.transitionName,l=e.dropdownStyle,f=e.dropdownClassName,m=e.direction,g=void 0===m?"ltr":m,y=e.dropdownMatchSelectWidth,b=void 0===y||y,x=e.dropdownRender,k=e.dropdownAlign,w=e.getPopupContainer,_=e.empty,S=e.getTriggerDOMNode,O=Object(v.a)(e,["prefixCls","disabled","visible","children","popupElement","containerWidth","animation","transitionName","dropdownStyle","dropdownClassName","direction","dropdownMatchSelectWidth","dropdownRender","dropdownAlign","getPopupContainer","empty","getTriggerDOMNode"]),T="".concat(r,"-dropdown"),C=s;x&&(C=x(s));var I=a.useMemo((function(){return function(e){var t="number"!==typeof e?0:1;return{bottomLeft:{points:["tl","bl"],offset:[0,4],overflow:{adjustX:t,adjustY:1}},bottomRight:{points:["tr","br"],offset:[0,4],overflow:{adjustX:t,adjustY:1}},topLeft:{points:["bl","tl"],offset:[0,-4],overflow:{adjustX:t,adjustY:1}},topRight:{points:["br","tr"],offset:[0,-4],overflow:{adjustX:t,adjustY:1}}}}(b)}),[b]),M=d?"".concat(T,"-").concat(d):h,A=a.useRef(null);a.useImperativeHandle(t,(function(){return{getPopupElement:function(){return A.current}}}));var E=Object(we.a)({minWidth:o},l);return"number"===typeof b?E.width=b:b&&(E.width=o),a.createElement(ot.a,Object(c.a)({},O,{showAction:[],hideAction:[],popupPlacement:"rtl"===g?"bottomRight":"bottomLeft",builtinPlacements:I,prefixCls:T,popupTransitionName:M,popup:a.createElement("div",{ref:A},C),popupAlign:k,popupVisible:i,getPopupContainer:w,popupClassName:u()(f,Object(p.a)({},"".concat(T,"-empty"),_)),popupStyle:E,getTriggerDOMNode:S}),n)},ct=a.forwardRef(ut);ct.displayName="SelectTrigger";var dt=ct;var ht=["removeIcon","placeholder","autoFocus","maxTagCount","maxTagTextLength","maxTagPlaceholder","choiceTransitionName","onInputKeyDown","tabIndex"];var lt=function(e){var t=e.mode,r=e.options,i=e.children,n=e.backfill,s=e.allowClear,o=e.placeholder,u=e.getInputElement,c=e.showSearch,d=e.onSearch,h=e.defaultOpen,l=e.autoFocus,f=e.labelInValue,p=e.value,v=e.inputValue,m=e.optionLabelProp,g="multiple"===t||"tags"===t,y=void 0!==c?c:g||"combobox"===t,b=r||Oe(i);if(Object(Ne.a)("tags"!==t||b.every((function(e){return!e.disabled})),"Please avoid setting option to disabled in tags mode since user can always type text as tag."),"tags"===t||"combobox"===t){var x=b.some((function(e){return e.options?e.options.some((function(e){return"number"===typeof("value"in e?e.value:e.key)})):"number"===typeof("value"in e?e.value:e.key)}));Object(Ne.a)(!x,"`value` of Option should not use number type when `mode` is `tags` or `combobox`.")}if(Object(Ne.a)("combobox"!==t||!m,"`combobox` mode not support `optionLabelProp`. Please set `value` on Option directly."),Object(Ne.a)("combobox"===t||!n,"`backfill` only works with `combobox` mode."),Object(Ne.a)("combobox"===t||!u,"`getInputElement` only work with `combobox` mode."),Object(Ne.b)("combobox"!==t||!u||!s||!o,"Customize `getInputElement` should customize clear and placeholder logic instead of configuring `allowClear` and `placeholder`."),d&&!y&&"combobox"!==t&&"tags"!==t&&Object(Ne.a)(!1,"`onSearch` should work with `showSearch` instead of use alone."),Object(Ne.b)(!h||l,"`defaultOpen` makes Select open without focus which means it will not close by click outside. You can set `autoFocus` if needed."),void 0!==p&&null!==p){var k=Pe(p);Object(Ne.a)(!f||k.every((function(e){return"object"===Object(Ee.a)(e)&&("key"in e||"value"in e)})),"`value` should in shape of `{ value: string | number, label?: ReactNode }` when you set `labelInValue` to `true`"),Object(Ne.a)(!g||Array.isArray(p),"`value` should be array when `mode` is `multiple` or `tags`")}if(i){var w=null;Object(_e.a)(i).some((function(e){if(!a.isValidElement(e)||!e.type)return!1;var t=e.type;return!t.isSelectOption&&(t.isSelectOptGroup?!Object(_e.a)(e.props.children).every((function(t){return!(a.isValidElement(t)&&e.type&&!t.type.isSelectOption)||(w=t.type,!1)})):(w=t,!0))})),w&&Object(Ne.a)(!1,"`children` should be `Select.Option` or `Select.OptGroup` instead of `".concat(w.displayName||w.name||w,"`.")),Object(Ne.a)(void 0===v,"`inputValue` is deprecated, please use `searchValue` instead.")}},ft=function(e){var t=e.prefixCls,r=e.components.optionList,i=e.convertChildrenToData,n=e.flattenOptions,s=e.getLabeledValue,o=e.filterOptions,d=e.isValueDisabled,h=e.findValueOption,l=(e.warningProps,e.fillOptionsWithMissingValue),f=e.omitDOMProps;function g(e,g){var b,x=e.prefixCls,k=void 0===x?t:x,w=e.className,_=e.id,S=e.open,O=e.defaultOpen,T=e.options,C=e.children,I=e.mode,M=e.value,A=e.defaultValue,E=e.labelInValue,N=e.showSearch,P=e.inputValue,D=e.searchValue,L=e.filterOption,B=e.filterSort,R=e.optionFilterProp,V=void 0===R?"value":R,G=e.autoClearSearchValue,F=void 0===G||G,q=e.onSearch,j=e.allowClear,z=e.clearIcon,H=e.showArrow,U=e.inputIcon,W=e.menuItemSelectedIcon,K=e.disabled,X=e.loading,Y=e.defaultActiveFirstOption,Z=e.notFoundContent,Q=void 0===Z?"Not Found":Z,$=e.optionLabelProp,J=e.backfill,ee=(e.tabIndex,e.getInputElement),te=e.getPopupContainer,re=e.listHeight,ie=void 0===re?200:re,ne=e.listItemHeight,ae=void 0===ne?20:ne,se=e.animation,oe=e.transitionName,ue=e.virtual,ce=e.dropdownStyle,de=e.dropdownClassName,he=e.dropdownMatchSelectWidth,le=e.dropdownRender,fe=e.dropdownAlign,ve=e.showAction,me=void 0===ve?[]:ve,ge=e.direction,ye=e.tokenSeparators,be=e.tagRender,xe=e.onPopupScroll,ke=e.onDropdownVisibleChange,_e=e.onFocus,Se=e.onBlur,Oe=e.onKeyUp,Te=e.onKeyDown,Ce=e.onMouseDown,Ie=e.onChange,Me=e.onSelect,Ee=e.onDeselect,Ne=e.onClear,Pe=e.internalProps,Re=void 0===Pe?{}:Pe,Ve=Object(v.a)(e,["prefixCls","className","id","open","defaultOpen","options","children","mode","value","defaultValue","labelInValue","showSearch","inputValue","searchValue","filterOption","filterSort","optionFilterProp","autoClearSearchValue","onSearch","allowClear","clearIcon","showArrow","inputIcon","menuItemSelectedIcon","disabled","loading","defaultActiveFirstOption","notFoundContent","optionLabelProp","backfill","tabIndex","getInputElement","getPopupContainer","listHeight","listItemHeight","animation","transitionName","virtual","dropdownStyle","dropdownClassName","dropdownMatchSelectWidth","dropdownRender","dropdownAlign","showAction","direction","tokenSeparators","tagRender","onPopupScroll","onDropdownVisibleChange","onFocus","onBlur","onKeyUp","onKeyDown","onMouseDown","onChange","onSelect","onDeselect","onClear","internalProps"]),Ge="RC_SELECT_INTERNAL_PROPS_MARK"===Re.mark,Fe=f?f(Ve):Ve;ht.forEach((function(e){delete Fe[e]}));var He=Object(a.useRef)(null),Ue=Object(a.useRef)(null),We=Object(a.useRef)(null),Ke=Object(a.useRef)(null),Xe=Object(a.useMemo)((function(){return(ye||[]).some((function(e){return["\n","\r\n"].includes(e)}))}),[ye]),Ye=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=a.useState(!1),r=Object(m.a)(t,2),i=r[0],n=r[1],s=a.useRef(null),o=function(){window.clearTimeout(s.current)};return a.useEffect((function(){return o}),[]),[i,function(t,r){o(),s.current=window.setTimeout((function(){n(t),r&&r()}),e)},o]}(),Ze=Object(m.a)(Ye,3),Qe=Ze[0],$e=Ze[1],et=Ze[2],tt=Object(a.useState)(),rt=Object(m.a)(tt,2),nt=rt[0],at=rt[1];Object(a.useEffect)((function(){at("rc_select_".concat(function(){var e;return Le?(e=Be,Be+=1):e="TEST_OR_SSR",e}()))}),[]);var ot=_||nt,ut=$;void 0===ut&&(ut=T?"label":"children");var ct="combobox"!==I&&E,lt="tags"===I||"multiple"===I,ft=void 0!==N?N:lt||"combobox"===I,pt=Object(a.useState)(!1),vt=Object(m.a)(pt,2),mt=vt[0],gt=vt[1];Object(a.useEffect)((function(){gt(Object(je.a)())}),[]);var yt=Object(a.useRef)(null);a.useImperativeHandle(g,(function(){var e,t,r;return{focus:null===(e=We.current)||void 0===e?void 0:e.focus,blur:null===(t=We.current)||void 0===t?void 0:t.blur,scrollTo:null===(r=Ke.current)||void 0===r?void 0:r.scrollTo}}));var bt=Object(ze.a)(A,{value:M}),xt=Object(m.a)(bt,2),kt=xt[0],wt=xt[1],_t=Object(a.useMemo)((function(){return function(e,t){var r=t.labelInValue,i=t.combobox,n=new Map;if(void 0===e||""===e&&i)return[[],n];var a=Array.isArray(e)?e:[e],s=a;return r&&(s=a.filter((function(e){return null!==e})).map((function(e){var t=e.key,r=e.value,i=void 0!==r?r:t;return n.set(i,e),i}))),[s,n]}(kt,{labelInValue:ct,combobox:"combobox"===I})}),[kt,ct]),St=Object(m.a)(_t,2),Ot=St[0],Tt=St[1],Ct=Object(a.useMemo)((function(){return new Set(Ot)}),[Ot]),It=Object(a.useState)(null),Mt=Object(m.a)(It,2),At=Mt[0],Et=Mt[1],Nt=Object(a.useState)(""),Pt=Object(m.a)(Nt,2),Dt=Pt[0],Lt=Pt[1],Bt=Dt;"combobox"===I&&void 0!==kt?Bt=kt:void 0!==D?Bt=D:P&&(Bt=P);var Rt=Object(a.useMemo)((function(){var e=T;return void 0===e&&(e=i(C)),"tags"===I&&l&&(e=l(e,kt,ut,E)),e||[]}),[T,C,I,kt]),Vt=Object(a.useMemo)((function(){return n(Rt,e)}),[Rt]),Gt=function(e){var t=a.useRef(null),r=a.useMemo((function(){var t=new Map;return e.forEach((function(e){var r=e.data.value;t.set(r,e)})),t}),[e]);return t.current=r,function(e){return e.map((function(e){return t.current.get(e)})).filter(Boolean)}}(Vt),Ft=Object(a.useMemo)((function(){if(!Bt||!ft)return Object(Ae.a)(Rt);var e=o(Bt,Rt,{optionFilterProp:V,filterOption:"combobox"===I&&void 0===L?function(){return!0}:L});return"tags"===I&&e.every((function(e){return e[V]!==Bt}))&&e.unshift({value:Bt,label:Bt,key:"__RC_SELECT_TAG_PLACEHOLDER__"}),B&&Array.isArray(e)?Object(Ae.a)(e).sort(B):e}),[Rt,Bt,I,ft,B]),qt=Object(a.useMemo)((function(){return n(Ft,e)}),[Ft]);Object(a.useEffect)((function(){Ke.current&&Ke.current.scrollTo&&Ke.current.scrollTo(0)}),[Bt]);var jt=Object(a.useMemo)((function(){var e=Ot.map((function(e){var t=Gt([e]),r=s(e,{options:t,prevValueMap:Tt,labelInValue:ct,optionLabelProp:ut});return Object(we.a)(Object(we.a)({},r),{},{disabled:d(e,t)})}));return I||1!==e.length||null!==e[0].value||null!==e[0].label?e:[]}),[kt,Rt,I]);jt=function(e){var t=a.useRef(e);return a.useMemo((function(){var r=new Map;t.current.forEach((function(e){var t=e.value,i=e.label;t!==i&&r.set(t,i)}));var i=e.map((function(e){var t=r.get(e.value);return e.isCacheable&&t?Object(we.a)(Object(we.a)({},e),{},{label:t}):e}));return t.current=i,i}),[e])}(jt);var zt=function(e,t,r){var i=Gt([e]),n=h([e],i)[0];if(!Re.skipTriggerSelect){var a=ct?s(e,{options:i,prevValueMap:Tt,labelInValue:ct,optionLabelProp:ut}):e;t&&Me?Me(a,n):!t&&Ee&&Ee(a,n)}Ge&&(t&&Re.onRawSelect?Re.onRawSelect(e,n,r):!t&&Re.onRawDeselect&&Re.onRawDeselect(e,n,r))},Ht=Object(a.useState)([]),Ut=Object(m.a)(Ht,2),Wt=Ut[0],Kt=Ut[1],Xt=function(e){if(!Ge||!Re.skipTriggerChange){var t=Gt(e),r=function(e,t){var r=t.optionLabelProp,i=t.labelInValue,n=t.prevValueMap,a=t.options,s=t.getLabeledValue,o=e;return i&&(o=o.map((function(e){return s(e,{options:a,prevValueMap:n,labelInValue:i,optionLabelProp:r})}))),o}(Array.from(e),{labelInValue:ct,options:t,getLabeledValue:s,prevValueMap:Tt,optionLabelProp:ut}),i=lt?r:r[0];if(Ie&&(0!==Ot.length||0!==r.length)){var n=h(e,t,{prevValueOptions:Wt});Kt(n.map((function(t,r){var i=Object(we.a)({},t);return Object.defineProperty(i,"_INTERNAL_OPTION_VALUE_",{get:function(){return e[r]}}),i}))),Ie(i,lt?n:n[0])}wt(i)}},Yt=function(e,t){var r,i=t.selected,n=t.source;K||(lt?(r=new Set(Ot),i?r.add(e):r.delete(e)):(r=new Set).add(e),(lt||!lt&&Array.from(Ot)[0]!==e)&&Xt(Array.from(r)),zt(e,!lt||i,n),"combobox"===I?(Lt(String(e)),Et("")):lt&&!F||(Lt(""),Et("")))},Zt="combobox"===I&&ee&&ee()||null,Qt=Object(ze.a)(void 0,{defaultValue:O,value:S}),$t=Object(m.a)(Qt,2),Jt=$t[0],er=$t[1],tr=Jt,rr=!Q&&!Ft.length;(K||rr&&tr&&"combobox"===I)&&(tr=!1);var ir=!rr&&tr,nr=function(e){var t=void 0!==e?e:!tr;Jt===t||K||(er(t),ke&&ke(t))};!function(e,t,r){var i=a.useRef(null);i.current={elements:e.filter((function(e){return e})),open:t,triggerOpen:r},a.useEffect((function(){function e(e){var t=e.target;t.shadowRoot&&e.composed&&(t=e.composedPath()[0]||t),i.current.open&&i.current.elements.every((function(e){return!e.contains(t)&&e!==t}))&&i.current.triggerOpen(!1)}return window.addEventListener("mousedown",e),function(){return window.removeEventListener("mousedown",e)}}),[])}([He.current,Ue.current&&Ue.current.getPopupElement()],ir,nr);var ar=function(e,t,r){var i=!0,n=e;Et(null);var a=r?null:qe(e,ye),s=a;if("combobox"===I)t&&Xt([n]);else if(a){n="","tags"!==I&&(s=a.map((function(e){var t=Vt.find((function(t){return t.data[ut]===e}));return t?t.data.value:null})).filter((function(e){return null!==e})));var o=Array.from(new Set([].concat(Object(Ae.a)(Ot),Object(Ae.a)(s))));Xt(o),o.forEach((function(e){zt(e,!0,"input")})),nr(!1),i=!1}return Lt(n),q&&Bt!==n&&q(n),i};Object(a.useEffect)((function(){Jt&&K&&er(!1)}),[K]),Object(a.useEffect)((function(){tr||lt||"combobox"===I||ar("",!1,!1)}),[tr]);var sr=it(),or=Object(m.a)(sr,2),ur=or[0],cr=or[1],dr=Object(a.useRef)(!1),hr=[];Object(a.useEffect)((function(){return function(){hr.forEach((function(e){return clearTimeout(e)})),hr.splice(0,hr.length)}}),[]);var lr=Object(a.useState)(0),fr=Object(m.a)(lr,2),pr=fr[0],vr=fr[1],mr=void 0!==Y?Y:"combobox"!==I,gr=Object(a.useState)(null),yr=Object(m.a)(gr,2),br=yr[0],xr=yr[1],kr=Object(a.useState)({}),wr=Object(m.a)(kr,2)[1];Je((function(){if(ir){var e=Math.ceil(He.current.offsetWidth);br!==e&&xr(e)}}),[ir]);var _r,Sr=a.createElement(r,{ref:Ke,prefixCls:k,id:ot,open:tr,childrenAsData:!T,options:Ft,flattenOptions:qt,multiple:lt,values:Ct,height:ie,itemHeight:ae,onSelect:function(e,t){Yt(e,Object(we.a)(Object(we.a)({},t),{},{source:"option"}))},onToggleOpen:nr,onActiveValue:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=r.source,n=void 0===i?"keyboard":i;vr(t),J&&"combobox"===I&&null!==e&&"keyboard"===n&&Et(String(e))},defaultActiveFirstOption:mr,notFoundContent:Q,onScroll:xe,searchValue:Bt,menuItemSelectedIcon:W,virtual:!1!==ue&&!1!==he,onMouseEnter:function(){wr({})}});!K&&j&&(Ot.length||Bt)&&(_r=a.createElement(pe,{className:"".concat(k,"-clear"),onMouseDown:function(){Ge&&Re.onClear&&Re.onClear(),Ne&&Ne(),Xt([]),ar("",!1,!1)},customizeIcon:z},"\xd7"));var Or,Tr=void 0!==H?H:X||!lt&&"combobox"!==I;Tr&&(Or=a.createElement(pe,{className:u()("".concat(k,"-arrow"),Object(p.a)({},"".concat(k,"-arrow-loading"),X)),customizeIcon:U,customizeIconProps:{loading:X,searchValue:Bt,open:tr,focused:Qe,showSearch:ft}}));var Cr=u()(k,w,(b={},Object(p.a)(b,"".concat(k,"-focused"),Qe),Object(p.a)(b,"".concat(k,"-multiple"),lt),Object(p.a)(b,"".concat(k,"-single"),!lt),Object(p.a)(b,"".concat(k,"-allow-clear"),j),Object(p.a)(b,"".concat(k,"-show-arrow"),Tr),Object(p.a)(b,"".concat(k,"-disabled"),K),Object(p.a)(b,"".concat(k,"-loading"),X),Object(p.a)(b,"".concat(k,"-open"),tr),Object(p.a)(b,"".concat(k,"-customize-input"),Zt),Object(p.a)(b,"".concat(k,"-show-search"),ft),b));return a.createElement("div",Object(c.a)({className:Cr},Fe,{ref:He,onMouseDown:function(e){var t=e.target,r=Ue.current&&Ue.current.getPopupElement();if(r&&r.contains(t)){var i=setTimeout((function(){var e,t=hr.indexOf(i);(-1!==t&&hr.splice(t,1),et(),mt||r.contains(document.activeElement))||(null===(e=We.current)||void 0===e||e.focus())}));hr.push(i)}if(Ce){for(var n=arguments.length,a=new Array(n>1?n-1:0),s=1;s<n;s++)a[s-1]=arguments[s];Ce.apply(void 0,[e].concat(a))}},onKeyDown:function(e){var t,r=ur(),i=e.which;if(i===y.ENTER&&("combobox"!==I&&e.preventDefault(),tr||nr(!0)),cr(!!Bt),i===y.BACKSPACE&&!r&&lt&&!Bt&&Ot.length){var n=De(jt,Ot);null!==n.removedValue&&(Xt(n.values),zt(n.removedValue,!1,"input"))}for(var a=arguments.length,s=new Array(a>1?a-1:0),o=1;o<a;o++)s[o-1]=arguments[o];tr&&Ke.current&&(t=Ke.current).onKeyDown.apply(t,[e].concat(s));Te&&Te.apply(void 0,[e].concat(s))},onKeyUp:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];var n;tr&&Ke.current&&(n=Ke.current).onKeyUp.apply(n,[e].concat(r));Oe&&Oe.apply(void 0,[e].concat(r))},onFocus:function(){$e(!0),K||(_e&&!dr.current&&_e.apply(void 0,arguments),me.includes("focus")&&nr(!0)),dr.current=!0},onBlur:function(){$e(!1,(function(){dr.current=!1,nr(!1)})),K||(Bt&&("tags"===I?(ar("",!1,!1),Xt(Array.from(new Set([].concat(Object(Ae.a)(Ot),[Bt]))))):"multiple"===I&&Lt("")),Se&&Se.apply(void 0,arguments))}}),Qe&&!tr&&a.createElement("span",{style:{width:0,height:0,display:"flex",overflow:"hidden",opacity:0},"aria-live":"polite"},"".concat(Ot.join(", "))),a.createElement(dt,{ref:Ue,disabled:K,prefixCls:k,visible:ir,popupElement:Sr,containerWidth:br,animation:se,transitionName:oe,dropdownStyle:ce,dropdownClassName:de,direction:ge,dropdownMatchSelectWidth:he,dropdownRender:le,dropdownAlign:fe,getPopupContainer:te,empty:!Rt.length,getTriggerDOMNode:function(){return yt.current}},a.createElement(st,Object(c.a)({},e,{domRef:yt,prefixCls:k,inputElement:Zt,ref:We,id:ot,showSearch:ft,mode:I,accessibilityIndex:pr,multiple:lt,tagRender:be,values:jt,open:tr,onToggleOpen:nr,searchValue:Bt,activeValue:At,onSearch:ar,onSearchSubmit:function(e){if(e&&e.trim()){var t=Array.from(new Set([].concat(Object(Ae.a)(Ot),[e])));Xt(t),t.forEach((function(e){zt(e,!0,"input")})),Lt("")}},onSelect:function(e,t){Yt(e,Object(we.a)(Object(we.a)({},t),{},{source:"selection"}))},tokenWithEnter:Xe}))),Or,_r)}return a.forwardRef(g)}({prefixCls:"rc-select",components:{optionList:ge},convertChildrenToData:Oe,flattenOptions:function(e){var t=[];return function e(r,i){r.forEach((function(r){i||!("options"in r)?t.push({key:Re(r,t.length),groupOption:i,data:r}):(t.push({key:Re(r,t.length),group:!0,data:r}),e(r.options,!0))}))}(e,!1),t},getLabeledValue:function(e,t){var r=t.options,i=t.prevValueMap,n=t.labelInValue,a=t.optionLabelProp,s=Ge([e],r)[0],o={value:e},u=n?i.get(e):void 0;return u&&"object"===Object(Ee.a)(u)&&"label"in u?(o.label=u.label,s&&"string"===typeof u.label&&"string"===typeof s[a]&&u.label.trim()!==s[a].trim()&&Object(Ne.a)(!1,"`label` of `value` is not same as `label` in Select options.")):s&&a in s?o.label=s[a]:(o.label=e,o.isCacheable=!0),o.key=o.value,o},filterOptions:function(e,t,r){var i,n=r.optionFilterProp,a=r.filterOption,s=[];return!1===a?Object(Ae.a)(t):(i="function"===typeof a?a:function(e){return function(t,r){var i=t.toLowerCase();return"options"in r?Fe(r.label).toLowerCase().includes(i):Fe(r[e]).toLowerCase().includes(i)}}(n),t.forEach((function(t){if("options"in t)if(i(e,t))s.push(t);else{var r=t.options.filter((function(t){return i(e,t)}));r.length&&s.push(Object(we.a)(Object(we.a)({},t),{},{options:r}))}else i(e,Ve(t))&&s.push(t)})),s)},isValueDisabled:function(e,t){return Ge([e],t)[0].disabled},findValueOption:Ge,warningProps:lt,fillOptionsWithMissingValue:function(e,t,r,i){var n=Pe(t).slice().sort(),a=Object(Ae.a)(e),s=new Set;return e.forEach((function(e){e.options?e.options.forEach((function(e){s.add(e.value)})):s.add(e.value)})),n.forEach((function(e){var t,n=i?e.value:e;s.has(n)||a.push(i?(t={},Object(p.a)(t,r,e.label),Object(p.a)(t,"value",n),t):{value:n})})),a}}),pt=function(e){Object(l.a)(r,e);var t=Object(f.a)(r);function r(){var e;return Object(d.a)(this,r),(e=t.apply(this,arguments)).selectRef=a.createRef(),e.focus=function(){e.selectRef.current.focus()},e.blur=function(){e.selectRef.current.blur()},e}return Object(h.a)(r,[{key:"render",value:function(){return a.createElement(ft,Object(c.a)({ref:this.selectRef},this.props))}}]),r}(a.Component);pt.Option=be,pt.OptGroup=ke;var vt=pt,mt=r(466),gt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3.1-12.7-6.4-12.7z"}}]},name:"down",theme:"outlined"},yt=r(25),bt=function(e,t){return a.createElement(yt.a,Object.assign({},e,{ref:t,icon:gt}))};bt.displayName="DownOutlined";var xt=a.forwardRef(bt),kt=r(66),wt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 190h-69.9c-9.8 0-19.1 4.5-25.1 12.2L404.7 724.5 207 474a32 32 0 00-25.1-12.2H112c-6.7 0-10.4 7.7-6.3 12.9l273.9 347c12.8 16.2 37.4 16.2 50.3 0l488.4-618.9c4.1-5.1.4-12.8-6.3-12.8z"}}]},name:"check",theme:"outlined"},_t=function(e,t){return a.createElement(yt.a,Object.assign({},e,{ref:t,icon:wt}))};_t.displayName="CheckOutlined";var St=a.forwardRef(_t),Ot={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M563.8 512l262.5-312.9c4.4-5.2.7-13.1-6.1-13.1h-79.8c-4.7 0-9.2 2.1-12.3 5.7L511.6 449.8 295.1 191.7c-3-3.6-7.5-5.7-12.3-5.7H203c-6.8 0-10.5 7.9-6.1 13.1L459.4 512 196.9 824.9A7.95 7.95 0 00203 838h79.8c4.7 0 9.2-2.1 12.3-5.7l216.5-258.1 216.5 258.1c3 3.6 7.5 5.7 12.3 5.7h79.8c6.8 0 10.5-7.9 6.1-13.1L563.8 512z"}}]},name:"close",theme:"outlined"},Tt=function(e,t){return a.createElement(yt.a,Object.assign({},e,{ref:t,icon:Ot}))};Tt.displayName="CloseOutlined";var Ct=a.forwardRef(Tt),It=r(72),Mt=r(114);var At=r(39),Et=r(108),Nt=function(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var n=0;for(i=Object.getOwnPropertySymbols(e);n<i.length;n++)t.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(e,i[n])&&(r[i[n]]=e[i[n]])}return r},Pt="SECRET_COMBOBOX_MODE_DO_NOT_USE",Dt=function(e,t){var r,o,c=e.prefixCls,d=e.bordered,h=void 0===d||d,l=e.className,f=e.getPopupContainer,p=e.dropdownClassName,v=e.listHeight,m=void 0===v?256:v,g=e.listItemHeight,y=void 0===g?24:g,b=e.size,x=e.notFoundContent,k=Nt(e,["prefixCls","bordered","className","getPopupContainer","dropdownClassName","listHeight","listItemHeight","size","notFoundContent"]),w=a.useContext(mt.b),_=w.getPopupContainer,S=w.getPrefixCls,O=w.renderEmpty,T=w.direction,C=w.virtual,I=w.dropdownMatchSelectWidth,M=a.useContext(At.b),A=S("select",c),E=S(),N=a.useMemo((function(){var e=k.mode;if("combobox"!==e)return e===Pt?"combobox":e}),[k.mode]),P="multiple"===N||"tags"===N;o=void 0!==x?x:"combobox"===N?null:O("Select");var D=function(e){var t=e.suffixIcon,r=e.clearIcon,i=e.menuItemSelectedIcon,n=e.removeIcon,s=e.loading,o=e.multiple,u=e.prefixCls,c=r;r||(c=a.createElement(It.a,null));var d=null;if(void 0!==t)d=t;else if(s)d=a.createElement(kt.a,{spin:!0});else{var h="".concat(u,"-suffix");d=function(e){var t=e.open,r=e.showSearch;return t&&r?a.createElement(Mt.a,{className:h}):a.createElement(xt,{className:h})}}return{clearIcon:c,suffixIcon:d,itemIcon:void 0!==i?i:o?a.createElement(St,null):null,removeIcon:void 0!==n?n:a.createElement(Ct,null)}}(Object(n.a)(Object(n.a)({},k),{multiple:P,prefixCls:A})),L=D.suffixIcon,B=D.itemIcon,R=D.removeIcon,V=D.clearIcon,G=Object(s.a)(k,["suffixIcon","itemIcon"]),F=u()(p,Object(i.a)({},"".concat(A,"-dropdown-").concat(T),"rtl"===T)),q=b||M,j=u()((r={},Object(i.a)(r,"".concat(A,"-lg"),"large"===q),Object(i.a)(r,"".concat(A,"-sm"),"small"===q),Object(i.a)(r,"".concat(A,"-rtl"),"rtl"===T),Object(i.a)(r,"".concat(A,"-borderless"),!h),r),l);return a.createElement(vt,Object(n.a)({ref:t,virtual:C,dropdownMatchSelectWidth:I},G,{transitionName:Object(Et.a)(E,"slide-up",k.transitionName),listHeight:m,listItemHeight:y,mode:N,prefixCls:A,direction:T,inputIcon:L,menuItemSelectedIcon:B,removeIcon:R,clearIcon:V,notFoundContent:o,className:j,getPopupContainer:f||_,dropdownClassName:F}))},Lt=a.forwardRef(Dt);Lt.SECRET_COMBOBOX_MODE_DO_NOT_USE=Pt,Lt.Option=be,Lt.OptGroup=ke;t.a=Lt},function(e,t,r){var i=function(e){"use strict";var t,r=Object.prototype,i=r.hasOwnProperty,n="function"===typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",s=n.asyncIterator||"@@asyncIterator",o=n.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(E){u=function(e,t,r){return e[t]=r}}function c(e,t,r,i){var n=t&&t.prototype instanceof m?t:m,a=Object.create(n.prototype),s=new I(i||[]);return a._invoke=function(e,t,r){var i=h;return function(n,a){if(i===f)throw new Error("Generator is already running");if(i===p){if("throw"===n)throw a;return A()}for(r.method=n,r.arg=a;;){var s=r.delegate;if(s){var o=O(s,r);if(o){if(o===v)continue;return o}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===h)throw i=p,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=f;var u=d(e,t,r);if("normal"===u.type){if(i=r.done?p:l,u.arg===v)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(i=p,r.method="throw",r.arg=u.arg)}}}(e,r,s),a}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(E){return{type:"throw",arg:E}}}e.wrap=c;var h="suspendedStart",l="suspendedYield",f="executing",p="completed",v={};function m(){}function g(){}function y(){}var b={};b[a]=function(){return this};var x=Object.getPrototypeOf,k=x&&x(x(M([])));k&&k!==r&&i.call(k,a)&&(b=k);var w=y.prototype=m.prototype=Object.create(b);function _(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function r(n,a,s,o){var u=d(e[n],e,a);if("throw"!==u.type){var c=u.arg,h=c.value;return h&&"object"===typeof h&&i.call(h,"__await")?t.resolve(h.__await).then((function(e){r("next",e,s,o)}),(function(e){r("throw",e,s,o)})):t.resolve(h).then((function(e){c.value=e,s(c)}),(function(e){return r("throw",e,s,o)}))}o(u.arg)}var n;this._invoke=function(e,i){function a(){return new t((function(t,n){r(e,i,t,n)}))}return n=n?n.then(a,a):a()}}function O(e,r){var i=e.iterator[r.method];if(i===t){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=t,O(e,r),"throw"===r.method))return v;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var n=d(i,e.iterator,r.arg);if("throw"===n.type)return r.method="throw",r.arg=n.arg,r.delegate=null,v;var a=n.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function M(e){if(e){var r=e[a];if(r)return r.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var n=-1,s=function r(){for(;++n<e.length;)if(i.call(e,n))return r.value=e[n],r.done=!1,r;return r.value=t,r.done=!0,r};return s.next=s}}return{next:A}}function A(){return{value:t,done:!0}}return g.prototype=w.constructor=y,y.constructor=g,g.displayName=u(y,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,u(e,o,"GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},_(S.prototype),S.prototype[s]=function(){return this},e.AsyncIterator=S,e.async=function(t,r,i,n,a){void 0===a&&(a=Promise);var s=new S(c(t,r,i,n),a);return e.isGeneratorFunction(r)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},_(w),u(w,o,"Generator"),w[a]=function(){return this},w.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var i=t.pop();if(i in e)return r.value=i,r.done=!1,r}return r.done=!0,r}},e.values=M,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(C),!e)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(i,n){return o.type="throw",o.arg=e,r.next=i,n&&(r.method="next",r.arg=t),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var s=this.tryEntries[a],o=s.completion;if("root"===s.tryLoc)return n("end");if(s.tryLoc<=this.prev){var u=i.call(s,"catchLoc"),c=i.call(s,"finallyLoc");if(u&&c){if(this.prev<s.catchLoc)return n(s.catchLoc,!0);if(this.prev<s.finallyLoc)return n(s.finallyLoc)}else if(u){if(this.prev<s.catchLoc)return n(s.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return n(s.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var s=a?a.completion:{};return s.type=e,s.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),C(r),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var i=r.completion;if("throw"===i.type){var n=i.arg;C(r)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,i){return this.delegate={iterator:M(e),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=t),v}},e}(e.exports);try{regeneratorRuntime=i}catch(n){Function("r","regeneratorRuntime = r")(i)}},function(e,t,r){var i=r(134);e.exports=function(e,t){if(e){if("string"===typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}}},function(e,t,r){"use strict";e.exports={uuid:function e(t){return t?(t^16*Math.random()>>t/4).toString(16):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,e)},uuid22:function e(t){return t?(t^16*Math.random()>>t/4).toString(16):([1e7]+1e3+4e3+8e5).replace(/[018]/g,e)},unCamelCase:function(e){return e.match(/^[A-Z0-9_]+$/)?e:e.replace(/[a-z0-9][A-Z]/g,(function(e){return e[0]+"_"+e[1]})).replace(/[A-Z0-9][A-Z0-9][a-z]/g,(function(e){return e[0]+"_"+e[1]+e[2]})).toLowerCase()},capitalize:function(e){return e.length?e.charAt(0).toUpperCase()+e.slice(1):e},strip:function(e){return e.replace(/^\s+|\s+$/g,"")}}},function(e,t,r){"use strict";var i,n="object"===typeof Reflect?Reflect:null,a=n&&"function"===typeof n.apply?n.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};i=n&&"function"===typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var s=Number.isNaN||function(e){return e!==e};function o(){o.init.call(this)}e.exports=o,e.exports.once=function(e,t){return new Promise((function(r,i){function n(){void 0!==a&&e.removeListener("error",a),r([].slice.call(arguments))}var a;"error"!==t&&(a=function(r){e.removeListener(t,n),i(r)},e.once("error",a)),e.once(t,n)}))},o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var u=10;function c(e){if("function"!==typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function d(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function h(e,t,r,i){var n,a,s,o;if(c(r),void 0===(a=e._events)?(a=e._events=Object.create(null),e._eventsCount=0):(void 0!==a.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),a=e._events),s=a[t]),void 0===s)s=a[t]=r,++e._eventsCount;else if("function"===typeof s?s=a[t]=i?[r,s]:[s,r]:i?s.unshift(r):s.push(r),(n=d(e))>0&&s.length>n&&!s.warned){s.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=s.length,o=u,console&&console.warn&&console.warn(o)}return e}function l(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function f(e,t,r){var i={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},n=l.bind(i);return n.listener=r,i.wrapFn=n,n}function p(e,t,r){var i=e._events;if(void 0===i)return[];var n=i[t];return void 0===n?[]:"function"===typeof n?r?[n.listener||n]:[n]:r?function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(n):m(n,n.length)}function v(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"===typeof r)return 1;if(void 0!==r)return r.length}return 0}function m(e,t){for(var r=new Array(t),i=0;i<t;++i)r[i]=e[i];return r}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(e){if("number"!==typeof e||e<0||s(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");u=e}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!==typeof e||e<0||s(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return d(this)},o.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var i="error"===e,n=this._events;if(void 0!==n)i=i&&void 0===n.error;else if(!i)return!1;if(i){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var o=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw o.context=s,o}var u=n[e];if(void 0===u)return!1;if("function"===typeof u)a(u,this,t);else{var c=u.length,d=m(u,c);for(r=0;r<c;++r)a(d[r],this,t)}return!0},o.prototype.addListener=function(e,t){return h(this,e,t,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(e,t){return h(this,e,t,!0)},o.prototype.once=function(e,t){return c(t),this.on(e,f(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){return c(t),this.prependListener(e,f(this,e,t)),this},o.prototype.removeListener=function(e,t){var r,i,n,a,s;if(c(t),void 0===(i=this._events))return this;if(void 0===(r=i[e]))return this;if(r===t||r.listener===t)0===--this._eventsCount?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!==typeof r){for(n=-1,a=r.length-1;a>=0;a--)if(r[a]===t||r[a].listener===t){s=r[a].listener,n=a;break}if(n<0)return this;0===n?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,n),1===r.length&&(i[e]=r[0]),void 0!==i.removeListener&&this.emit("removeListener",e,s||t)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(e){var t,r,i;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0===--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var n,a=Object.keys(r);for(i=0;i<a.length;++i)"removeListener"!==(n=a[i])&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"===typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this},o.prototype.listeners=function(e){return p(this,e,!0)},o.prototype.rawListeners=function(e){return p(this,e,!1)},o.listenerCount=function(e,t){return"function"===typeof e.listenerCount?e.listenerCount(t):v.call(e,t)},o.prototype.listenerCount=v,o.prototype.eventNames=function(){return this._eventsCount>0?i(this._events):[]}},function(e,t,r){var i=r(32),n=i.Buffer;function a(e,t){for(var r in e)t[r]=e[r]}function s(e,t,r){return n(e,t,r)}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?e.exports=i:(a(i,t),t.Buffer=s),a(n,s),s.from=function(e,t,r){if("number"===typeof e)throw new TypeError("Argument must not be a number");return n(e,t,r)},s.alloc=function(e,t,r){if("number"!==typeof e)throw new TypeError("Argument must be a number");var i=n(e);return void 0!==t?"string"===typeof r?i.fill(t,r):i.fill(t):i.fill(0),i},s.allocUnsafe=function(e){if("number"!==typeof e)throw new TypeError("Argument must be a number");return n(e)},s.allocUnsafeSlow=function(e){if("number"!==typeof e)throw new TypeError("Argument must be a number");return i.SlowBuffer(e)}},function(e,t,r){"use strict";(function(t,i,n){var a=r(85);function s(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,r){var i=e.entry;e.entry=null;for(;i;){var n=i.callback;t.pendingcb--,n(r),i=i.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}(t,e)}}e.exports=y;var o,u=!t.browser&&["v0.10","v0.9."].indexOf(t.version.slice(0,5))>-1?i:a.nextTick;y.WritableState=g;var c=Object.create(r(75));c.inherits=r(56);var d={deprecate:r(208)},h=r(140),l=r(121).Buffer,f=n.Uint8Array||function(){};var p,v=r(141);function m(){}function g(e,t){o=o||r(63),e=e||{};var i=t instanceof o;this.objectMode=!!e.objectMode,i&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var n=e.highWaterMark,c=e.writableHighWaterMark,d=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:i&&(c||0===c)?c:d,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var h=!1===e.decodeStrings;this.decodeStrings=!h,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var r=e._writableState,i=r.sync,n=r.writecb;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(r),t)!function(e,t,r,i,n){--t.pendingcb,r?(a.nextTick(n,i),a.nextTick(S,e,t),e._writableState.errorEmitted=!0,e.emit("error",i)):(n(i),e._writableState.errorEmitted=!0,e.emit("error",i),S(e,t))}(e,r,i,t,n);else{var s=w(r);s||r.corked||r.bufferProcessing||!r.bufferedRequest||k(e,r),i?u(x,e,r,s,n):x(e,r,s,n)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new s(this)}function y(e){if(o=o||r(63),!p.call(y,this)&&!(this instanceof o))return new y(e);this._writableState=new g(e,this),this.writable=!0,e&&("function"===typeof e.write&&(this._write=e.write),"function"===typeof e.writev&&(this._writev=e.writev),"function"===typeof e.destroy&&(this._destroy=e.destroy),"function"===typeof e.final&&(this._final=e.final)),h.call(this)}function b(e,t,r,i,n,a,s){t.writelen=i,t.writecb=s,t.writing=!0,t.sync=!0,r?e._writev(n,t.onwrite):e._write(n,a,t.onwrite),t.sync=!1}function x(e,t,r,i){r||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,i(),S(e,t)}function k(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var i=t.bufferedRequestCount,n=new Array(i),a=t.corkedRequestsFree;a.entry=r;for(var o=0,u=!0;r;)n[o]=r,r.isBuf||(u=!1),r=r.next,o+=1;n.allBuffers=u,b(e,t,!0,t.length,n,"",a.finish),t.pendingcb++,t.lastBufferedRequest=null,a.next?(t.corkedRequestsFree=a.next,a.next=null):t.corkedRequestsFree=new s(t),t.bufferedRequestCount=0}else{for(;r;){var c=r.chunk,d=r.encoding,h=r.callback;if(b(e,t,!1,t.objectMode?1:c.length,c,d,h),r=r.next,t.bufferedRequestCount--,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}function w(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function _(e,t){e._final((function(r){t.pendingcb--,r&&e.emit("error",r),t.prefinished=!0,e.emit("prefinish"),S(e,t)}))}function S(e,t){var r=w(t);return r&&(!function(e,t){t.prefinished||t.finalCalled||("function"===typeof e._final?(t.pendingcb++,t.finalCalled=!0,a.nextTick(_,e,t)):(t.prefinished=!0,e.emit("prefinish")))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),r}c.inherits(y,h),g.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(g.prototype,"buffer",{get:d.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"===typeof Symbol&&Symbol.hasInstance&&"function"===typeof Function.prototype[Symbol.hasInstance]?(p=Function.prototype[Symbol.hasInstance],Object.defineProperty(y,Symbol.hasInstance,{value:function(e){return!!p.call(this,e)||this===y&&(e&&e._writableState instanceof g)}})):p=function(e){return e instanceof this},y.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},y.prototype.write=function(e,t,r){var i,n=this._writableState,s=!1,o=!n.objectMode&&(i=e,l.isBuffer(i)||i instanceof f);return o&&!l.isBuffer(e)&&(e=function(e){return l.from(e)}(e)),"function"===typeof t&&(r=t,t=null),o?t="buffer":t||(t=n.defaultEncoding),"function"!==typeof r&&(r=m),n.ended?function(e,t){var r=new Error("write after end");e.emit("error",r),a.nextTick(t,r)}(this,r):(o||function(e,t,r,i){var n=!0,s=!1;return null===r?s=new TypeError("May not write null values to stream"):"string"===typeof r||void 0===r||t.objectMode||(s=new TypeError("Invalid non-string/buffer chunk")),s&&(e.emit("error",s),a.nextTick(i,s),n=!1),n}(this,n,e,r))&&(n.pendingcb++,s=function(e,t,r,i,n,a){if(!r){var s=function(e,t,r){e.objectMode||!1===e.decodeStrings||"string"!==typeof t||(t=l.from(t,r));return t}(t,i,n);i!==s&&(r=!0,n="buffer",i=s)}var o=t.objectMode?1:i.length;t.length+=o;var u=t.length<t.highWaterMark;u||(t.needDrain=!0);if(t.writing||t.corked){var c=t.lastBufferedRequest;t.lastBufferedRequest={chunk:i,encoding:n,isBuf:r,callback:a,next:null},c?c.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else b(e,t,!1,o,i,n,a);return u}(this,n,o,e,t,r)),s},y.prototype.cork=function(){this._writableState.corked++},y.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||k(this,e))},y.prototype.setDefaultEncoding=function(e){if("string"===typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(y.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),y.prototype._write=function(e,t,r){r(new Error("_write() is not implemented"))},y.prototype._writev=null,y.prototype.end=function(e,t,r){var i=this._writableState;"function"===typeof e?(r=e,e=null,t=null):"function"===typeof t&&(r=t,t=null),null!==e&&void 0!==e&&this.write(e,t),i.corked&&(i.corked=1,this.uncork()),i.ending||i.finished||function(e,t,r){t.ending=!0,S(e,t),r&&(t.finished?a.nextTick(r):e.once("finish",r));t.ended=!0,e.writable=!1}(this,i,r)},Object.defineProperty(y.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),y.prototype.destroy=v.destroy,y.prototype._undestroy=v.undestroy,y.prototype._destroy=function(e,t){this.end(),t(e)}}).call(this,r(46),r(206).setImmediate,r(35))},function(e,t,r){(function(e){var i=r(215),n=r(145),a=r(217),s=r(218),o=r(86),u=t;u.request=function(t,r){t="string"===typeof t?o.parse(t):a(t);var n=-1===e.location.protocol.search(/^https?:$/)?"http:":"",s=t.protocol||n,u=t.hostname||t.host,c=t.port,d=t.path||"/";u&&-1!==u.indexOf(":")&&(u="["+u+"]"),t.url=(u?s+"//"+u:"")+(c?":"+c:"")+d,t.method=(t.method||"GET").toUpperCase(),t.headers=t.headers||{};var h=new i(t);return r&&h.on("response",r),h},u.get=function(e,t){var r=u.request(e,t);return r.end(),r},u.ClientRequest=i,u.IncomingMessage=n.IncomingMessage,u.Agent=function(){},u.Agent.defaultMaxSockets=4,u.globalAgent=new u.Agent,u.STATUS_CODES=s,u.METHODS=["CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REPORT","SEARCH","SUBSCRIBE","TRACE","UNLOCK","UNSUBSCRIBE"]}).call(this,r(35))},function(e,t,r){"use strict";(function(t){var i=r(83);function n(e,t){if(e===t)return 0;for(var r=e.length,i=t.length,n=0,a=Math.min(r,i);n<a;++n)if(e[n]!==t[n]){r=e[n],i=t[n];break}return r<i?-1:i<r?1:0}function a(e){return t.Buffer&&"function"===typeof t.Buffer.isBuffer?t.Buffer.isBuffer(e):!(null==e||!e._isBuffer)}var s=r(146),o=Object.prototype.hasOwnProperty,u=Array.prototype.slice,c="foo"===function(){}.name;function d(e){return Object.prototype.toString.call(e)}function h(e){return!a(e)&&("function"===typeof t.ArrayBuffer&&("function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(e):!!e&&(e instanceof DataView||!!(e.buffer&&e.buffer instanceof ArrayBuffer))))}var l=e.exports=y,f=/\s*function\s+([^\(\s]*)\s*/;function p(e){if(s.isFunction(e)){if(c)return e.name;var t=e.toString().match(f);return t&&t[1]}}function v(e,t){return"string"===typeof e?e.length<t?e:e.slice(0,t):e}function m(e){if(c||!s.isFunction(e))return s.inspect(e);var t=p(e);return"[Function"+(t?": "+t:"")+"]"}function g(e,t,r,i,n){throw new l.AssertionError({message:r,actual:e,expected:t,operator:i,stackStartFunction:n})}function y(e,t){e||g(e,!0,t,"==",l.ok)}function b(e,t,r,i){if(e===t)return!0;if(a(e)&&a(t))return 0===n(e,t);if(s.isDate(e)&&s.isDate(t))return e.getTime()===t.getTime();if(s.isRegExp(e)&&s.isRegExp(t))return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase;if(null!==e&&"object"===typeof e||null!==t&&"object"===typeof t){if(h(e)&&h(t)&&d(e)===d(t)&&!(e instanceof Float32Array||e instanceof Float64Array))return 0===n(new Uint8Array(e.buffer),new Uint8Array(t.buffer));if(a(e)!==a(t))return!1;var o=(i=i||{actual:[],expected:[]}).actual.indexOf(e);return-1!==o&&o===i.expected.indexOf(t)||(i.actual.push(e),i.expected.push(t),function(e,t,r,i){if(null===e||void 0===e||null===t||void 0===t)return!1;if(s.isPrimitive(e)||s.isPrimitive(t))return e===t;if(r&&Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;var n=x(e),a=x(t);if(n&&!a||!n&&a)return!1;if(n)return b(e=u.call(e),t=u.call(t),r);var o,c,d=_(e),h=_(t);if(d.length!==h.length)return!1;for(d.sort(),h.sort(),c=d.length-1;c>=0;c--)if(d[c]!==h[c])return!1;for(c=d.length-1;c>=0;c--)if(!b(e[o=d[c]],t[o],r,i))return!1;return!0}(e,t,r,i))}return r?e===t:e==t}function x(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function k(e,t){if(!e||!t)return!1;if("[object RegExp]"==Object.prototype.toString.call(t))return t.test(e);try{if(e instanceof t)return!0}catch(r){}return!Error.isPrototypeOf(t)&&!0===t.call({},e)}function w(e,t,r,i){var n;if("function"!==typeof t)throw new TypeError('"block" argument must be a function');"string"===typeof r&&(i=r,r=null),n=function(e){var t;try{e()}catch(r){t=r}return t}(t),i=(r&&r.name?" ("+r.name+").":".")+(i?" "+i:"."),e&&!n&&g(n,r,"Missing expected exception"+i);var a="string"===typeof i,o=!e&&n&&!r;if((!e&&s.isError(n)&&a&&k(n,r)||o)&&g(n,r,"Got unwanted exception"+i),e&&n&&r&&!k(n,r)||!e&&n)throw n}l.AssertionError=function(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=function(e){return v(m(e.actual),128)+" "+e.operator+" "+v(m(e.expected),128)}(this),this.generatedMessage=!0);var t=e.stackStartFunction||g;if(Error.captureStackTrace)Error.captureStackTrace(this,t);else{var r=new Error;if(r.stack){var i=r.stack,n=p(t),a=i.indexOf("\n"+n);if(a>=0){var s=i.indexOf("\n",a+1);i=i.substring(s+1)}this.stack=i}}},s.inherits(l.AssertionError,Error),l.fail=g,l.ok=y,l.equal=function(e,t,r){e!=t&&g(e,t,r,"==",l.equal)},l.notEqual=function(e,t,r){e==t&&g(e,t,r,"!=",l.notEqual)},l.deepEqual=function(e,t,r){b(e,t,!1)||g(e,t,r,"deepEqual",l.deepEqual)},l.deepStrictEqual=function(e,t,r){b(e,t,!0)||g(e,t,r,"deepStrictEqual",l.deepStrictEqual)},l.notDeepEqual=function(e,t,r){b(e,t,!1)&&g(e,t,r,"notDeepEqual",l.notDeepEqual)},l.notDeepStrictEqual=function e(t,r,i){b(t,r,!0)&&g(t,r,i,"notDeepStrictEqual",e)},l.strictEqual=function(e,t,r){e!==t&&g(e,t,r,"===",l.strictEqual)},l.notStrictEqual=function(e,t,r){e===t&&g(e,t,r,"!==",l.notStrictEqual)},l.throws=function(e,t,r){w(!0,e,t,r)},l.doesNotThrow=function(e,t,r){w(!1,e,t,r)},l.ifError=function(e){if(e)throw e},l.strict=i((function e(t,r){t||g(t,!0,r,"==",e)}),l,{equal:l.strictEqual,deepEqual:l.deepStrictEqual,notEqual:l.notStrictEqual,notDeepEqual:l.notDeepStrictEqual}),l.strict.strict=l.strict;var _=Object.keys||function(e){var t=[];for(var r in e)o.call(e,r)&&t.push(r);return t}}).call(this,r(35))},function(e,t){function r(t,i){return e.exports=r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},r(t,i)}e.exports=r},function(e,t,r){"use strict";var i=r(7),n=r(8),a=r(1),s=r(2),o=r(6),u=r(3),c=r(4),d=r(5),h=r(11),l=r(10),f=l.BadSymbol,p=l.PermissionDenied,v=l.ExchangeError,m=l.ExchangeNotAvailable,g=l.OrderNotFound,y=l.InsufficientFunds,b=l.InvalidOrder,x=l.RequestTimeout,k=l.AuthenticationError,w=r(18),_=w.TRUNCATE,S=w.DECIMAL_PLACES,O=w.TICK_SIZE,T=r(12);e.exports=function(e){c(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(u(r.prototype),"describe",this).call(this),{id:"hitbtc",name:"HitBTC",countries:["HK"],rateLimit:1500,version:"2",pro:!0,has:{cancelOrder:!0,CORS:!1,createDepositAddress:!0,createOrder:!0,editOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchCurrencies:!0,fetchDepositAddress:!0,fetchDeposits:!1,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrder:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!1,fetchOrderTrades:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,fetchTradingFee:!0,fetchTransactions:!0,fetchWithdrawals:!1,withdraw:!0,transfer:!0},timeframes:{"1m":"M1","3m":"M3","5m":"M5","15m":"M15","30m":"M30","1h":"H1","4h":"H4","1d":"D1","1w":"D7","1M":"1M"},urls:{logo:"https://user-images.githubusercontent.com/1294454/27766555-8eaec20e-5edc-11e7-9c5b-6dc69fc42f5e.jpg",test:{public:"https://api.demo.hitbtc.com",private:"https://api.demo.hitbtc.com"},api:{public:"https://api.hitbtc.com",private:"https://api.hitbtc.com"},www:"https://hitbtc.com",referral:"https://hitbtc.com/?ref_id=5a5d39a65d466",doc:["https://api.hitbtc.com","https://github.com/hitbtc-com/hitbtc-api/blob/master/APIv2.md"],fees:["https://hitbtc.com/fees-and-limits","https://support.hitbtc.com/hc/en-us/articles/115005148605-Fees-and-limits"]},api:{public:{get:["currency","currency/{currency}","symbol","symbol/{symbol}","ticker","ticker/{symbol}","trades","trades/{symbol}","orderbook","orderbook/{symbol}","candles","candles/{symbol}"]},private:{get:["trading/balance","order","order/{clientOrderId}","trading/fee/all","trading/fee/{symbol}","margin/account","margin/account/{symbol}","margin/position","margin/position/{symbol}","margin/order","margin/order/{clientOrderId}","history/order","history/trades","history/order/{orderId}/trades","account/balance","account/crypto/address/{currency}","account/crypto/addresses/{currency}","account/crypto/used-addresses/{currency}","account/crypto/estimate-withdraw","account/crypto/is-mine/{address}","account/transactions","account/transactions/{id}","sub-acc","sub-acc/acl","sub-acc/balance/{subAccountUserID}","sub-acc/deposit-address/{subAccountUserId}/{currency}"],post:["order","margin/order","account/crypto/address/{currency}","account/crypto/withdraw","account/crypto/transfer-convert","account/transfer","account/transfer/internal","sub-acc/freeze","sub-acc/activate","sub-acc/transfer"],put:["order/{clientOrderId}","margin/account/{symbol}","margin/order/{clientOrderId}","account/crypto/withdraw/{id}","sub-acc/acl/{subAccountUserId}"],delete:["order","order/{clientOrderId}","margin/account","margin/account/{symbol}","margin/position","margin/position/{symbol}","margin/order","margin/order/{clientOrderId}","account/crypto/withdraw/{id}"],patch:["order/{clientOrderId}"]}},precisionMode:O,fees:{trading:{tierBased:!1,percentage:!0,maker:.001,taker:.002}},options:{defaultTimeInForce:"FOK",accountsByType:{bank:"bank",exchange:"exchange",main:"bank",trading:"exchange"},fetchBalanceMethod:{account:"account",main:"account",trading:"trading"}},commonCurrencies:{AUTO:"Cube",BCC:"BCC",BET:"DAO.Casino",BOX:"BOX Token",CPT:"Cryptaur",GET:"Themis",HSR:"HC",IQ:"IQ.Cash",LNC:"LinkerCoin",PLA:"PlayChip",PNT:"Penta",SBTC:"Super Bitcoin",TV:"Tokenville",USD:"USDT",XPNT:"PNT"},exceptions:{504:x,1002:k,1003:p,2010:b,2001:f,2011:b,2020:b,20002:g,20001:y}})}},{key:"feeToPrecision",value:function(e,t){return this.decimalToPrecision(t,_,8,S)}},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p,v,m,g,y,b,x,k,w=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=w.length>0&&void 0!==w[0]?w[0]:{},e.next=3,this.publicGetSymbol(t);case 3:for(r=e.sent,n=[],a=0;a<r.length;a++)s=r[a],o=this.safeString(s,"id"),u=this.safeString(s,"baseCurrency"),c=this.safeString(s,"quoteCurrency"),d=this.safeCurrencyCode(u),h=this.safeCurrencyCode(c),l=d+"/"+h,o.indexOf("_")>=0&&(l=o),f=this.safeString(s,"quantityIncrement"),p=this.safeString(s,"tickSize"),v=this.parseNumber(f),m=this.parseNumber(p),g={price:m,amount:v},y=this.safeNumber(s,"takeLiquidityRate"),b=this.safeNumber(s,"provideLiquidityRate"),x=this.safeString(s,"feeCurrency"),k=this.safeCurrencyCode(x),n.push(this.extend(this.fees.trading,{info:s,id:o,symbol:l,base:d,quote:h,baseId:u,quoteId:c,active:!0,taker:y,maker:b,precision:g,feeCurrency:k,limits:{amount:{min:v,max:void 0},price:{min:m,max:void 0},cost:{min:this.parseNumber(T.stringMul(f,p)),max:void 0}}}));return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"transfer",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,u,c,d,h,l,f,p,m,g,y=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=y.length>4&&void 0!==y[4]?y[4]:{},e.next=3,this.loadMarkets();case 3:if(o=this.currency(t),u=this.currencyToPrecision(t,r),c={currency:o.id,amount:u},void 0!==(d=this.safeString(s,"type"))){e.next=19;break}if(h=this.safeValue(this.options,"accountsByType",{}),l=this.safeString(h,n),f=this.safeString(h,a),p=Object.keys(h),void 0!==l){e.next=14;break}throw new v(this.id+" fromAccount must be one of "+p.join(", ")+" instead of "+l);case 14:if(void 0!==f){e.next=16;break}throw new v(this.id+" toAccount must be one of "+p.join(", ")+" instead of "+f);case 16:if(l!==f){e.next=18;break}throw new v(this.id+" from and to cannot be the same account");case 18:d=l+"To"+this.capitalize(f);case 19:return c.type=d,e.next=22,this.privatePostAccountTransfer(this.extend(c,s));case 22:return m=e.sent,g=this.safeString(m,"id"),e.abrupt("return",{info:m,id:g,timestamp:void 0,datetime:void 0,amount:u,currency:t,fromAccount:n,toAccount:a,status:void 0});case 25:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"fetchCurrencies",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p,v,m,g=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=g.length>0&&void 0!==g[0]?g[0]:{},e.next=3,this.publicGetCurrency(t);case 3:for(r=e.sent,n={},a=0;a<r.length;a++)s=r[a],o=this.safeString(s,"id"),u=this.safeInteger(s,"precisionTransfer",8),c=1/Math.pow(10,u),d=this.safeCurrencyCode(o),h=this.safeValue(s,"payinEnabled"),l=this.safeValue(s,"payoutEnabled"),f=this.safeValue(s,"transferEnabled"),p=h&&l&&f,"disabled"in s&&s.disabled&&(p=!1),v="fiat","crypto"in s&&s.crypto&&(v="crypto"),m=this.safeString(s,"fullName"),n[d]={id:o,code:d,type:v,payin:h,payout:l,transfer:f,info:s,name:m,active:p,fee:this.safeNumber(s,"payoutFee"),precision:c,limits:{amount:{min:1/Math.pow(10,u),max:Math.pow(10,u)},withdraw:{min:void 0,max:Math.pow(10,c)}}};return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTradingFee",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a=this.extend({symbol:n.id},this.omit(r,"symbol")),e.next=7,this.privateGetTradingFeeSymbol(a);case 7:return s=e.sent,e.abrupt("return",{info:s,maker:this.safeNumber(s,"provideLiquidityRate"),taker:this.safeNumber(s,"takeLiquidityRate")});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p,m=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=m.length>0&&void 0!==m[0]?m[0]:{},e.next=3,this.loadMarkets();case 3:if(r=this.safeString(t,"type","trading"),n=this.safeValue(this.options,"fetchBalanceMethod",{}),void 0!==(a=this.safeString(n,r))){e.next=8;break}throw new v(this.id+" fetchBalance account type must be either main or trading");case 8:return s="privateGet"+this.capitalize(a)+"Balance",o=this.omit(t,"type"),e.next=12,this[s](o);case 12:for(u=e.sent,c={info:u},d=0;d<u.length;d++)h=u[d],l=this.safeString(h,"currency"),f=this.safeCurrencyCode(l),(p=this.account()).free=this.safeString(h,"available"),p.used=this.safeString(h,"reserved"),c[f]=p;return e.abrupt("return",this.parseBalance(c,!1));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){return[this.parse8601(this.safeString(e,"timestamp")),this.safeNumber(e,"open"),this.safeNumber(e,"max"),this.safeNumber(e,"min"),this.safeNumber(e,"close"),this.safeNumber(e,"volume")]}},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:"1m",n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:void 0,s=d.length>4&&void 0!==d[4]?d[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),u={symbol:o.id,period:this.timeframes[r]},void 0!==n&&(u.from=this.iso8601(n)),void 0!==a&&(u.limit=a),e.next=12,this.publicGetCandlesSymbol(this.extend(u,s));case 12:return c=e.sent,e.abrupt("return",this.parseOHLCVs(c,o,r,n,a));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return a={symbol:this.marketId(t)},void 0!==r&&(a.limit=r),e.next=8,this.publicGetOrderbookSymbol(this.extend(a,n));case 8:return s=e.sent,e.abrupt("return",this.parseOrderBook(s,void 0,"bid","ask","price","size"));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.parse8601(e.timestamp),i=void 0;void 0!==t&&(i=t.symbol);var n=this.safeNumber(e,"volume"),a=this.safeNumber(e,"volumeQuote"),s=this.safeNumber(e,"open"),o=this.safeNumber(e,"last"),u=void 0,c=void 0,d=void 0;void 0!==o&&void 0!==s&&(u=o-s,d=this.sum(o,s)/2,s>0&&(c=u/s*100));var h=this.vwap(n,a);return{symbol:i,timestamp:r,datetime:this.iso8601(r),high:this.safeNumber(e,"high"),low:this.safeNumber(e,"low"),bid:this.safeNumber(e,"bid"),bidVolume:void 0,ask:this.safeNumber(e,"ask"),askVolume:void 0,vwap:h,open:s,close:o,last:o,previousClose:void 0,change:u,percentage:c,average:d,baseVolume:n,quoteVolume:a,info:e}}},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetTicker(r);case 6:for(n=e.sent,a={},s=0;s<n.length;s++)o=n[s],u=this.safeString(o,"symbol"),c=this.safeMarket(u),d=c.symbol,a[d]=this.parseTicker(o,c);return e.abrupt("return",this.filterByArray(a,"symbol",t));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={symbol:n.id},e.next=7,this.publicGetTickerSymbol(this.extend(a,r));case 7:if(!("message"in(s=e.sent))){e.next=10;break}throw new v(this.id+" "+s.message);case 10:return e.abrupt("return",this.parseTicker(s,n));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.parse8601(e.timestamp),i=this.safeString(e,"symbol"),n=(t=this.safeMarket(i,t)).symbol,a=void 0,s=this.safeNumber(e,"fee");if(void 0!==s){var o=t?t.feeCurrency:void 0;a={cost:s,currency:o}}var u=this.safeString(e,"clientOrderId"),c=this.safeString(e,"price"),d=this.safeString(e,"quantity"),h=this.parseNumber(c),l=this.parseNumber(d),f=this.parseNumber(T.stringMul(c,d)),p=this.safeString(e,"side"),v=this.safeString(e,"id");return{info:e,id:v,order:u,timestamp:r,datetime:this.iso8601(r),symbol:n,type:void 0,side:p,takerOrMaker:void 0,price:h,amount:l,cost:f,fee:a}}},{key:"fetchTransactions",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:void 0,r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},e.next=6,this.loadMarkets();case 6:return s=void 0,o={},void 0!==t&&(s=this.currency(t),o.asset=s.id),void 0!==r&&(o.startTime=r),e.next=12,this.privateGetAccountTransactions(this.extend(o,a));case 12:return u=e.sent,e.abrupt("return",this.parseTransactions(u,s,r,n));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),i=this.parse8601(this.safeString(e,"createdAt")),n=this.parse8601(this.safeString(e,"updatedAt")),a=this.safeString(e,"currency"),s=this.safeCurrencyCode(a,t),o=this.parseTransactionStatus(this.safeString(e,"status")),u=this.safeNumber(e,"amount"),c=this.safeString(e,"address"),d=this.safeString(e,"hash"),h=void 0,l=this.safeNumber(e,"fee");void 0!==l&&(h={cost:l,currency:s});var f=this.parseTransactionType(this.safeString(e,"type"));return{info:e,id:r,txid:d,timestamp:i,datetime:this.iso8601(i),address:c,tag:void 0,type:f,amount:u,currency:s,status:o,updated:n,fee:h}}},{key:"parseTransactionStatus",value:function(e){return this.safeString({pending:"pending",failed:"failed",success:"ok"},e,e)}},{key:"parseTransactionType",value:function(e){return this.safeString({payin:"deposit",payout:"withdrawal",withdraw:"withdrawal"},e,e)}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={symbol:s.id},void 0!==n&&(o.limit=n),void 0!==r&&(o.sort="ASC",o.from=this.iso8601(r)),e.next=11,this.publicGetTradesSymbol(this.extend(o,a));case 11:return u=e.sent,e.abrupt("return",this.parseTrades(u,s,r,n));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,u,c,d,h,l,f,p,v=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=v.length>4&&void 0!==v[4]?v[4]:void 0,o=v.length>5&&void 0!==v[5]?v[5]:{},e.next=4,this.loadMarkets();case 4:return u=this.market(t),c=this.uuid(),d=c.split("-"),h=(h=d.join("")).slice(0,32),a=parseFloat(a),l={clientOrderId:h,symbol:u.id,side:n,quantity:this.amountToPrecision(t,a),type:r},"limit"===r?l.price=this.priceToPrecision(t,s):l.timeInForce=this.options.defaultTimeInForce,e.next=14,this.privatePostOrder(this.extend(l,o));case 14:if(f=e.sent,"rejected"!==(p=this.parseOrder(f)).status){e.next=18;break}throw new b(this.id+" order was rejected by the exchange "+this.json(p));case 18:return e.abrupt("return",p);case 19:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"editOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,u,c,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=p.length>4&&void 0!==p[4]?p[4]:void 0,o=p.length>5&&void 0!==p[5]?p[5]:void 0,u=p.length>6&&void 0!==p[6]?p[6]:{},e.next=5,this.loadMarkets();case 5:return c=this.uuid(),d=c.split("-"),h=(h=d.join("")).slice(0,32),l={clientOrderId:t,requestClientId:h},void 0!==s&&(l.quantity=this.amountToPrecision(r,s)),void 0!==o&&(l.price=this.priceToPrecision(r,o)),e.next=14,this.privatePatchOrderClientOrderId(this.extend(l,u));case 14:return f=e.sent,e.abrupt("return",this.parseOrder(f));case 16:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.loadMarkets();case 4:return n={clientOrderId:t},e.next=7,this.privateDeleteOrderClientOrderId(this.extend(n,r));case 7:return a=e.sent,e.abrupt("return",this.parseOrder(a));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({new:"open",suspended:"open",partiallyFilled:"open",filled:"closed",canceled:"canceled",expired:"failed"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.parse8601(this.safeString(e,"createdAt")),i=this.parse8601(this.safeString(e,"updatedAt")),n=this.safeString(e,"symbol"),a=(t=this.safeMarket(n,t)).symbol,s=this.safeNumber(e,"quantity"),o=this.safeNumber(e,"cumQuantity"),u=this.parseOrderStatus(this.safeString(e,"status")),c=this.safeString(e,"clientOrderId"),d=c,h=this.safeNumber(e,"price"),l=this.safeString(e,"type"),f=this.safeString(e,"side"),p=this.safeValue(e,"tradesReport"),v=void 0,m=this.safeNumber(e,"avgPrice");void 0!==p&&(p=this.parseTrades(p,t));var g=this.safeString(e,"timeInForce");return this.safeOrder({id:c,clientOrderId:d,timestamp:r,datetime:this.iso8601(r),lastTradeTimestamp:i,status:u,symbol:a,type:l,timeInForce:g,side:f,price:h,stopPrice:void 0,average:m,amount:s,cost:void 0,filled:o,remaining:void 0,fee:v,trades:p,info:e})}},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.loadMarkets();case 4:return n={clientOrderId:t},e.next=7,this.privateGetHistoryOrder(this.extend(n,r));case 7:if(a=e.sent,!(a.length>0)){e.next=11;break}return e.abrupt("return",this.parseOrder(a[0]));case 11:throw new g(this.id+" order "+t+" not found");case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.loadMarkets();case 4:return n={clientOrderId:t},e.next=7,this.privateGetOrderClientOrderId(this.extend(n,r));case 7:return a=e.sent,e.abrupt("return",this.parseOrder(a));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:void 0,r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},e.next=6,this.loadMarkets();case 6:return s=void 0,o={},void 0!==t&&(s=this.market(t),o.symbol=s.id),e.next=11,this.privateGetOrder(this.extend(o,a));case 11:return u=e.sent,e.abrupt("return",this.parseOrders(u,s,r,n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.length>0&&void 0!==p[0]?p[0]:void 0,r=p.length>1&&void 0!==p[1]?p[1]:void 0,n=p.length>2&&void 0!==p[2]?p[2]:void 0,a=p.length>3&&void 0!==p[3]?p[3]:{},e.next=6,this.loadMarkets();case 6:return s=void 0,o={},void 0!==t&&(s=this.market(t),o.symbol=s.id),void 0!==n&&(o.limit=n),void 0!==r&&(o.from=this.iso8601(r)),e.next=13,this.privateGetHistoryOrder(this.extend(o,a));case 13:for(u=e.sent,c=this.parseOrders(u,s),d=[],h=0;h<c.length;h++)l=c[h],"closed"!==(f=l.status)&&"canceled"!==f||d.push(l);return e.abrupt("return",this.filterBySinceLimit(d,r,n));case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:void 0,r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},e.next=6,this.loadMarkets();case 6:return s={},o=void 0,void 0!==t&&(o=this.market(t),s.symbol=o.id),void 0!==r&&(s.from=this.iso8601(r)),void 0!==n&&(s.limit=n),e.next=13,this.privateGetHistoryTrades(this.extend(s,a));case 13:return u=e.sent,e.abrupt("return",this.parseTrades(u,o,r,n));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:void 0,s=d.length>4&&void 0!==d[4]?d[4]:{},e.next=6,this.loadMarkets();case 6:return o=void 0,void 0!==r&&(o=this.market(r)),u={orderId:t},e.next=11,this.privateGetHistoryOrderOrderIdTrades(this.extend(u,s));case 11:if(c=e.sent,!(c.length>0)){e.next=15;break}return e.abrupt("return",this.parseTrades(c,o,n,a));case 15:throw new g(this.id+" order "+t+" not found, "+this.id+'.fetchOrderTrades() requires an exchange-specific order id, you need to grab it from order["info"]["id"]');case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createDepositAddress",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.currency(t),a={currency:n.id},e.next=7,this.privatePostAccountCryptoAddressCurrency(this.extend(a,r));case 7:return s=e.sent,o=this.safeString(s,"address"),this.checkAddress(o),u=this.safeString(s,"paymentId"),e.abrupt("return",{currency:n,address:o,tag:u,info:s});case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchDepositAddress",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.currency(t),a={currency:n.id},e.next=7,this.privateGetAccountCryptoAddressCurrency(this.extend(a,r));case 7:return s=e.sent,o=this.safeString(s,"address"),this.checkAddress(o),u=this.safeString(s,"paymentId"),e.abrupt("return",{currency:n.code,address:o,tag:u,info:s});case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"withdraw",value:function(){var e=n(i.mark((function e(t,r,n){var a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=d.length>3&&void 0!==d[3]?d[3]:void 0,s=d.length>4&&void 0!==d[4]?d[4]:{},e.next=4,this.loadMarkets();case 4:return this.checkAddress(n),o=this.currency(t),u={currency:o.id,amount:parseFloat(r),address:n},a&&(u.paymentId=a),e.next=10,this.privatePostAccountCryptoWithdraw(this.extend(u,s));case 10:return c=e.sent,e.abrupt("return",{info:c,id:c.id});case 12:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"nonce",value:function(){return this.milliseconds()}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s="/api/"+this.version+"/",o=this.omit(i,this.extractParams(e));if("public"===t)s+=t+"/"+this.implodeParams(e,i),Object.keys(o).length&&(s+="?"+this.urlencode(o));else{this.checkRequiredCredentials(),s+=this.implodeParams(e,i),"GET"===r?Object.keys(o).length&&(s+="?"+this.urlencode(o)):Object.keys(o).length&&(a=this.json(o));var u=this.encode(this.apiKey+":"+this.secret),c=this.stringToBase64(u);n={Authorization:"Basic "+this.decode(c),"Content-Type":"application/json"}}return{url:s=this.urls.api[t]+s,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,u){if(void 0!==s&&e>=400){var c=this.id+" "+a;if(503===e||504===e)throw new m(c);if(429===e)return;if("{"===a[0]&&"error"in s){var d=this.safeString(s.error,"code");if(this.throwExactlyMatchedException(this.exceptions,d,c),"Duplicate clientOrderId"===this.safeString(s.error,"message"))throw new b(c)}throw new v(c)}}}]),r}(h)},function(e,t,r){"use strict";var i=r(7),n=r(8),a=r(1),s=r(2),o=r(6),u=r(3),c=r(4),d=r(5),h=r(11),l=r(10),f=l.AuthenticationError,p=l.ExchangeError,v=l.PermissionDenied,m=l.ExchangeNotAvailable,g=l.OnMaintenance,y=l.InvalidOrder,b=l.OrderNotFound,x=l.InsufficientFunds,k=l.ArgumentsRequired,w=l.BadSymbol,_=l.BadRequest,S=l.RequestTimeout,O=l.NetworkError,T=r(18).TRUNCATE,C=r(12);e.exports=function(e){c(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(u(r.prototype),"describe",this).call(this),{id:"huobipro",name:"Huobi Pro",countries:["CN"],rateLimit:2e3,userAgent:this.userAgents.chrome39,version:"v1",accounts:void 0,accountsById:void 0,hostname:"api.huobi.pro",pro:!0,has:{cancelAllOrders:!0,cancelOrder:!0,cancelOrders:!0,CORS:!1,createOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchCurrencies:!0,fetchDepositAddress:!0,fetchDeposits:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,fetchTradingLimits:!0,fetchWithdrawals:!0,withdraw:!0},timeframes:{"1m":"1min","5m":"5min","15m":"15min","30m":"30min","1h":"60min","4h":"4hour","1d":"1day","1w":"1week","1M":"1mon","1y":"1year"},urls:{test:{market:"https://api.testnet.huobi.pro",public:"https://api.testnet.huobi.pro",private:"https://api.testnet.huobi.pro"},logo:"https://user-images.githubusercontent.com/1294454/76137448-22748a80-604e-11ea-8069-6e389271911d.jpg",api:{market:"https://{hostname}",public:"https://{hostname}",private:"https://{hostname}",v2Public:"https://{hostname}",v2Private:"https://{hostname}"},www:"https://www.huobi.com",referral:"https://www.huobi.com/en-us/topic/invited/?invite_code=rwrd3",doc:"https://huobiapi.github.io/docs/spot/v1/cn/",fees:"https://www.huobi.com/about/fee/"},api:{v2Public:{get:["reference/currencies"]},v2Private:{get:["account/ledger","account/withdraw/quota","account/withdraw/address","account/deposit/address","reference/transact-fee-rate","account/asset-valuation","point/account","sub-user/user-list","sub-user/user-state","sub-user/account-list","sub-user/deposit-address","sub-user/query-deposit","user/api-key"],post:["account/transfer","point/transfer","sub-user/management","sub-user/creation","sub-user/tradable-market","sub-user/transferability","sub-user/api-key-generation","sub-user/api-key-modification","sub-user/api-key-deletion"]},market:{get:["history/kline","detail/merged","depth","trade","history/trade","detail","tickers"]},public:{get:["common/symbols","common/currencys","common/timestamp","common/exchange","settings/currencys"]},private:{get:["account/accounts","account/accounts/{id}/balance","account/accounts/{sub-uid}","account/history","cross-margin/loan-info","margin/loan-info","fee/fee-rate/get","order/openOrders","order/orders","order/orders/{id}","order/orders/{id}/matchresults","order/orders/getClientOrder","order/history","order/matchresults","dw/withdraw-virtual/addresses","query/deposit-withdraw","margin/loan-info","margin/loan-orders","margin/accounts/balance","cross-margin/loan-orders","cross-margin/accounts/balance","points/actions","points/orders","subuser/aggregate-balance","stable-coin/exchange_rate","stable-coin/quote"],post:["account/transfer","futures/transfer","order/batch-orders","order/orders/place","order/orders/submitCancelClientOrder","order/orders/batchCancelOpenOrders","order/orders","order/orders/{id}/place","order/orders/{id}/submitcancel","order/orders/batchcancel","dw/balance/transfer","dw/withdraw/api/create","dw/withdraw-virtual/create","dw/withdraw-virtual/{id}/place","dw/withdraw-virtual/{id}/cancel","dw/transfer-in/margin","dw/transfer-out/margin","margin/orders","margin/orders/{id}/repay","cross-margin/transfer-in","cross-margin/transfer-out","cross-margin/orders","cross-margin/orders/{id}/repay","stable-coin/exchange","subuser/transfer"]}},fees:{trading:{feeSide:"get",tierBased:!1,percentage:!0,maker:.002,taker:.002}},exceptions:{broad:{"contract is restricted of closing positions on API.  Please contact customer service":g,maintain:g},exact:{"bad-request":_,"base-date-limit-error":_,"api-not-support-temp-addr":v,timeout:S,"gateway-internal-error":m,"account-frozen-balance-insufficient-error":x,"invalid-amount":y,"order-limitorder-amount-min-error":y,"order-limitorder-amount-max-error":y,"order-marketorder-amount-min-error":y,"order-limitorder-price-min-error":y,"order-limitorder-price-max-error":y,"order-holding-limit-failed":y,"order-orderprice-precision-error":y,"order-orderstate-error":b,"order-queryorder-invalid":b,"order-update-error":m,"api-signature-check-failed":f,"api-signature-not-valid":f,"base-record-invalid":b,"base-symbol-trade-disabled":w,"base-symbol-error":w,"system-maintenance":g,"invalid symbol":w,"symbol trade not open now":w}},options:{fetchOrdersByStatesMethod:"private_get_order_orders",fetchOpenOrdersMethod:"fetch_open_orders_v1",createMarketBuyOrderRequiresPrice:!0,fetchMarketsMethod:"publicGetCommonSymbols",fetchBalanceMethod:"privateGetAccountAccountsIdBalance",createOrderMethod:"privatePostOrderOrdersPlace",language:"en-US"},commonCurrencies:{GET:"Themis",HOT:"Hydro Protocol",PNT:"Penta",SBTC:"Super Bitcoin",BIFI:"Bitcoin File"}})}},{key:"fetchTradingLimits",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=4,this.loadMarkets();case 4:void 0===t&&(t=this.symbols),n={},a=0;case 7:if(!(a<t.length)){e.next=15;break}return s=t[a],e.next=11,this.fetchTradingLimitsById(this.marketId(s),r);case 11:n[s]=e.sent;case 12:a++,e.next=7;break;case 15:return e.abrupt("return",n);case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTradingLimitsById",value:function(){var e=n(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>1&&void 0!==s[1]?s[1]:{},n={symbol:t},e.next=4,this.publicGetCommonExchange(this.extend(n,r));case 4:return a=e.sent,e.abrupt("return",this.parseTradingLimits(this.safeValue(a,"data",{})));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTradingLimits",value:function(e){return{info:e,limits:{amount:{min:this.safeNumber(e,"limit-order-must-greater-than"),max:this.safeNumber(e,"limit-order-must-less-than")}}}}},{key:"costToPrecision",value:function(e,t){return this.decimalToPrecision(t,T,this.markets[e].precision.cost,this.precisionMode)}},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p,v,m,g,y,b,x,k,w,_=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=_.length>0&&void 0!==_[0]?_[0]:{},r=this.options.fetchMarketsMethod,e.next=4,this[r](t);case 4:if(n=e.sent,a=this.safeValue(n,"data"),!(a.length<1)){e.next=9;break}throw new O(this.id+" publicGetCommonSymbols returned empty response: "+this.json(a));case 9:for(s=[],o=0;o<a.length;o++)u=a[o],c=this.safeString(u,"base-currency"),d=this.safeString(u,"quote-currency"),h=c+d,l=this.safeCurrencyCode(c),f=this.safeCurrencyCode(d),p=l+"/"+f,v={amount:this.safeInteger(u,"amount-precision"),price:this.safeInteger(u,"price-precision"),cost:this.safeInteger(u,"value-precision")},m="OMG"===l?0:.002,g="OMG"===l?0:.002,y=this.safeNumber(u,"min-order-amt",Math.pow(10,-v.amount)),b=this.safeNumber(u,"max-order-amt"),x=this.safeNumber(u,"min-order-value",0),k=this.safeString(u,"state"),w="online"===k,s.push({id:h,symbol:p,base:l,quote:f,baseId:c,quoteId:d,active:w,precision:v,taker:g,maker:m,limits:{amount:{min:y,max:b},price:{min:Math.pow(10,-v.price),max:void 0},cost:{min:x,max:void 0}},info:u});return e.abrupt("return",s);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0;void 0!==t&&(r=t.symbol);var i=this.safeInteger(e,"ts"),n=void 0,a=void 0,s=void 0,o=void 0;"bid"in e&&(Array.isArray(e.bid)?(n=this.safeNumber(e.bid,0),a=this.safeNumber(e.bid,1)):(n=this.safeNumber(e,"bid"),a=this.safeValue(e,"bidSize"))),"ask"in e&&(Array.isArray(e.ask)?(s=this.safeNumber(e.ask,0),o=this.safeNumber(e.ask,1)):(s=this.safeNumber(e,"ask"),o=this.safeValue(e,"askSize")));var u=this.safeNumber(e,"open"),c=this.safeNumber(e,"close"),d=void 0,h=void 0,l=void 0;void 0!==u&&void 0!==c&&(d=c-u,l=this.sum(u,c)/2,void 0!==c&&c>0&&(h=d/u*100));var f=this.safeNumber(e,"amount"),p=this.safeNumber(e,"vol"),v=this.vwap(f,p);return{symbol:r,timestamp:i,datetime:this.iso8601(i),high:this.safeNumber(e,"high"),low:this.safeNumber(e,"low"),bid:n,bidVolume:a,ask:s,askVolume:o,vwap:v,open:u,close:c,last:c,previousClose:void 0,change:d,percentage:h,average:l,baseVolume:f,quoteVolume:p,info:e}}},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d.length>1&&void 0!==d[1]?d[1]:void 0,r=d.length>2&&void 0!==d[2]?d[2]:{},e.next=4,this.loadMarkets();case 4:return n=this.market(t),a={symbol:n.id,type:"step0"},e.next=8,this.marketGetDepth(this.extend(a,r));case 8:if(!("tick"in(s=e.sent))){e.next=17;break}if(s.tick){e.next=12;break}throw new w(this.id+" fetchOrderBook() returned empty response: "+this.json(s));case 12:return o=this.safeValue(s,"tick"),u=this.safeInteger(o,"ts",this.safeInteger(s,"ts")),(c=this.parseOrderBook(o,u)).nonce=this.safeInteger(o,"version"),e.abrupt("return",c);case 17:throw new p(this.id+" fetchOrderBook() returned unrecognized response: "+this.json(s));case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={symbol:n.id},e.next=7,this.marketGetDetailMerged(this.extend(a,r));case 7:return s=e.sent,o=this.parseTicker(s.tick,n),u=this.safeInteger(s,"ts"),o.timestamp=u,o.datetime=this.iso8601(u),e.abrupt("return",o);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:void 0,r=f.length>1&&void 0!==f[1]?f[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.marketGetTickers(r);case 6:for(n=e.sent,a=this.safeValue(n,"data"),s=this.safeInteger(n,"ts"),o={},u=0;u<a.length;u++)c=this.safeString(a[u],"symbol"),d=this.safeMarket(c),h=d.symbol,(l=this.parseTicker(a[u],d)).timestamp=s,l.datetime=this.iso8601(s),o[h]=l;return e.abrupt("return",this.filterByArray(o,"symbol",t));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"symbol"),i=this.safeSymbol(r,t),n=this.safeInteger2(e,"ts","created-at"),a=this.safeString(e,"order-id"),s=this.safeString(e,"direction"),o=this.safeString(e,"type");if(void 0!==o){var u=o.split("-");s=u[0],o=u[1]}var c=this.safeString(e,"role"),d=this.safeString(e,"price"),h=this.safeString2(e,"filled-amount","amount"),l=this.parseNumber(d),f=this.parseNumber(h),p=this.parseNumber(C.stringMul(d,h)),v=void 0,m=this.safeNumber(e,"filled-fees"),g=void 0;void 0!==t&&(g=this.safeCurrencyCode(this.safeString(e,"fee-currency")));var y=this.safeNumber(e,"filled-points");void 0!==y&&(void 0!==m&&0!==m||(m=y,g=this.safeCurrencyCode(this.safeString(e,"fee-deduct-currency")))),void 0!==m&&(v={cost:m,currency:g});var b=this.safeString2(e,"trade-id","tradeId"),x=this.safeString(e,"id",b);return{id:x,info:e,order:a,timestamp:n,datetime:this.iso8601(n),symbol:i,type:o,side:s,takerOrMaker:c,price:l,amount:f,cost:p,fee:v}}},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return s=void 0,o={},void 0!==t&&(s=this.market(t),o.symbol=s.id),void 0!==n&&(o.size=n),void 0!==r&&(o["start-date"]=this.ymd(r),o["end-date"]=this.ymd(this.sum(r,864e5))),e.next=13,this.privateGetOrderMatchresults(this.extend(o,a));case 13:return u=e.sent,c=this.parseTrades(u.data,s,r,n),e.abrupt("return",c);case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d,h,l,f,p,v=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=v.length>1&&void 0!==v[1]?v[1]:void 0,n=v.length>2&&void 0!==v[2]?v[2]:1e3,a=v.length>3&&void 0!==v[3]?v[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={symbol:s.id},void 0!==n&&(o.size=n),e.next=10,this.marketGetHistoryTrade(this.extend(o,a));case 10:for(u=e.sent,c=this.safeValue(u,"data"),d=[],h=0;h<c.length;h++)for(l=this.safeValue(c[h],"data",[]),f=0;f<l.length;f++)p=this.parseTrade(l[f],s),d.push(p);return d=this.sortBy(d,"timestamp"),e.abrupt("return",this.filterBySymbolSinceLimit(d,t,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){return[this.safeTimestamp(e,"id"),this.safeNumber(e,"open"),this.safeNumber(e,"high"),this.safeNumber(e,"low"),this.safeNumber(e,"close"),this.safeNumber(e,"amount")]}},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:"1m",n=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:1e3,s=h.length>4&&void 0!==h[4]?h[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),u={symbol:o.id,period:this.timeframes[r]},void 0!==a&&(u.size=a),e.next=11,this.marketGetHistoryKline(this.extend(u,s));case 11:return c=e.sent,d=this.safeValue(c,"data",[]),e.abrupt("return",this.parseOHLCVs(d,o,r,n,a));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchAccounts",value:function(){var e=n(i.mark((function e(){var t,r,n=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetAccountAccounts(t);case 5:return r=e.sent,e.abrupt("return",r.data);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchCurrencies",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.length>0&&void 0!==p[0]?p[0]:{},r={language:this.options.language},e.next=4,this.publicGetSettingsCurrencys(this.extend(r,t));case 4:for(n=e.sent,a=this.safeValue(n,"data"),s={},o=0;o<a.length;o++)u=a[o],c=this.safeValue(u,"name"),d=this.safeInteger(u,"withdraw-precision"),h=this.safeCurrencyCode(c),l=u.visible&&u["deposit-enabled"]&&u["withdraw-enabled"],f=this.safeString(u,"display-name"),s[h]={id:c,code:h,type:"crypto",name:f,active:l,fee:void 0,precision:d,limits:{amount:{min:Math.pow(10,-d),max:Math.pow(10,d)},deposit:{min:this.safeNumber(u,"deposit-min-amount"),max:Math.pow(10,d)},withdraw:{min:this.safeNumber(u,"withdraw-min-amount"),max:Math.pow(10,d)}},info:u};return e.abrupt("return",s);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.loadAccounts();case 5:return r=this.options.fetchBalanceMethod,n={id:this.accounts[0].id},e.next=9,this[r](this.extend(n,t));case 9:for(a=e.sent,s=this.safeValue(a.data,"list",[]),o={info:a},u=0;u<s.length;u++)c=s[u],d=this.safeString(c,"currency"),h=this.safeCurrencyCode(d),l=void 0,l=h in o?o[h]:this.account(),"trade"===c.type&&(l.free=this.safeString(c,"balance")),"frozen"===c.type&&(l.used=this.safeString(c,"balance")),o[h]=l;return e.abrupt("return",this.parseBalance(o,!1));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrdersByStates",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:void 0,s=h.length>4&&void 0!==h[4]?h[4]:{},e.next=6,this.loadMarkets();case 6:return o={states:t},u=void 0,void 0!==r&&(u=this.market(r),o.symbol=u.id),c=this.safeString(this.options,"fetchOrdersByStatesMethod","private_get_order_orders"),e.next=12,this[c](this.extend(o,s));case 12:return d=e.sent,e.abrupt("return",this.parseOrders(d.data,u,n,a));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.length>1&&void 0!==o[1]?o[1]:void 0,r=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return n={id:t},e.next=7,this.privateGetOrderOrdersId(this.extend(n,r));case 7:return a=e.sent,s=this.safeValue(a,"data"),e.abrupt("return",this.parseOrder(s));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:void 0,n=s.length>2&&void 0!==s[2]?s[2]:void 0,a=s.length>3&&void 0!==s[3]?s[3]:{},e.next=6,this.fetchOrdersByStates("pre-submitted,submitted,partial-filled,filled,partial-canceled,canceled",t,r,n,a);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:void 0,a=o.length>3&&void 0!==o[3]?o[3]:{},s=this.safeString(this.options,"fetchOpenOrdersMethod","fetch_open_orders_v1"),e.next=7,this[s](t,r,n,a);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOpenOrdersV1",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:void 0,n=s.length>2&&void 0!==s[2]?s[2]:void 0,a=s.length>3&&void 0!==s[3]?s[3]:{},void 0!==t){e.next=6;break}throw new k(this.id+" fetchOpenOrdersV1() requires a symbol argument");case 6:return e.next=8,this.fetchOrdersByStates("pre-submitted,submitted,partial-filled",t,r,n,a);case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:void 0,n=s.length>2&&void 0!==s[2]?s[2]:void 0,a=s.length>3&&void 0!==s[3]?s[3]:{},e.next=6,this.fetchOrdersByStates("filled,partial-canceled,canceled",t,r,n,a);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOpenOrdersV2",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.length>0&&void 0!==p[0]?p[0]:void 0,r=p.length>1&&void 0!==p[1]?p[1]:void 0,n=p.length>2&&void 0!==p[2]?p[2]:void 0,a=p.length>3&&void 0!==p[3]?p[3]:{},e.next=6,this.loadMarkets();case 6:if(void 0!==t){e.next=8;break}throw new k(this.id+" fetchOpenOrders() requires a symbol argument");case 8:if(s=this.market(t),void 0!==(o=this.safeString(a,"account-id"))){e.next=23;break}return e.next=13,this.loadAccounts();case 13:u=0;case 14:if(!(u<this.accounts.length)){e.next=23;break}if("spot"!==(c=this.accounts[u]).type){e.next=20;break}if(void 0===(o=this.safeString(c,"id"))){e.next=20;break}return e.abrupt("break",23);case 20:u++,e.next=14;break;case 23:return d={symbol:s.id,"account-id":o},void 0!==n&&(d.size=n),h=this.omit(a,"account-id"),e.next=28,this.privateGetOrderOpenOrders(this.extend(d,h));case 28:return l=e.sent,f=this.safeValue(l,"data",[]),e.abrupt("return",this.parseOrders(f,s,r,n));case 31:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({"partial-filled":"open","partial-canceled":"canceled",filled:"closed",canceled:"canceled",submitted:"open"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),i=void 0,n=void 0,a=void 0;if("type"in e){var s=e.type.split("-");i=s[0],n=s[1],a=this.parseOrderStatus(this.safeString(e,"state"))}var o=this.safeString(e,"symbol"),u=this.safeSymbol(o,t),c=this.safeInteger(e,"created-at"),d=this.safeNumber(e,"amount"),h=this.safeNumber2(e,"filled-amount","field-amount"),l=this.safeNumber(e,"price");0===l&&(l=void 0);var f=this.safeNumber2(e,"filled-cash-amount","field-cash-amount"),p=this.safeNumber2(e,"filled-fees","field-fees"),v=void 0;if(void 0!==p){var m=void 0;void 0!==t&&(m="sell"===i?t.quote:t.base),v={cost:p,currency:m}}return this.safeOrder({info:e,id:r,clientOrderId:void 0,timestamp:c,datetime:this.iso8601(c),lastTradeTimestamp:void 0,symbol:u,type:n,timeInForce:void 0,postOnly:void 0,side:i,price:l,stopPrice:void 0,average:void 0,cost:f,amount:d,filled:h,remaining:void 0,status:a,fee:v,trades:void 0})}},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,u,c,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=p.length>4&&void 0!==p[4]?p[4]:void 0,o=p.length>5&&void 0!==p[5]?p[5]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.loadAccounts();case 6:if(u=this.market(t),c={"account-id":this.accounts[0].id,symbol:u.id,type:n+"-"+r},"market"!==r||"buy"!==n){e.next=20;break}if(!this.options.createMarketBuyOrderRequiresPrice){e.next=17;break}if(void 0!==s){e.next=14;break}throw new y(this.id+" market buy order requires price argument to calculate cost (total amount of quote currency to spend for buying, amount * price). To switch off this warning exception and specify cost in the amount argument, set .options['createMarketBuyOrderRequiresPrice'] = false. Make sure you know what you're doing.");case 14:c.amount=this.costToPrecision(t,parseFloat(a)*parseFloat(s));case 15:e.next=18;break;case 17:c.amount=this.costToPrecision(t,a);case 18:e.next=21;break;case 20:c.amount=this.amountToPrecision(t,a);case 21:return"limit"!==r&&"ioc"!==r&&"limit-maker"!==r||(c.price=this.priceToPrecision(t,s)),d=this.options.createOrderMethod,e.next=25,this[d](this.extend(c,o));case 25:return h=e.sent,l=this.milliseconds(),f=this.safeString(h,"data"),e.abrupt("return",{info:h,id:f,timestamp:l,datetime:this.iso8601(l),lastTradeTimestamp:void 0,status:void 0,symbol:t,type:r,side:n,price:s,amount:a,filled:void 0,remaining:void 0,cost:void 0,trades:void 0,fee:void 0,clientOrderId:void 0,average:void 0});case 29:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.length>1&&void 0!==n[1]?n[1]:void 0,n.length>2&&void 0!==n[2]?n[2]:{},e.next=4,this.privatePostOrderOrdersIdSubmitcancel({id:t});case 4:return r=e.sent,e.abrupt("return",this.extend(this.parseOrder(r),{id:t,status:"canceled"}));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cancelOrders",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.length>1&&void 0!==o[1]?o[1]:void 0,r=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return n=this.safeValue2(r,"clientOrderIds","client-order-ids"),r=this.omit(r,["clientOrderIds","client-order-ids"]),a={},void 0===n?a["order-ids"]=t:a["client-order-ids"]=n,e.next=10,this.privatePostOrderOrdersBatchcancel(this.extend(a,r));case 10:return s=e.sent,e.abrupt("return",s);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cancelAllOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=4,this.loadMarkets();case 4:return n={},a=void 0,void 0!==t&&(a=this.market(t),n.symbol=a.id),e.next=9,this.privatePostOrderOrdersBatchCancelOpenOrders(this.extend(n,r));case 9:return s=e.sent,e.abrupt("return",s);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"currencyToPrecision",value:function(e,t){return this.decimalToPrecision(t,0,this.currencies[e].precision)}},{key:"parseDepositAddress",value:function(e){var t=this.safeString(e,"address"),r=this.safeString(e,"addressTag"),i=this.safeString(e,"currency"),n=this.safeCurrencyCode(i);return this.checkAddress(t),{currency:n,address:t,tag:r,info:e}}},{key:"fetchDepositAddress",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.currency(t),a={currency:n.id},e.next=7,this.v2PrivateGetAccountDepositAddress(this.extend(a,r));case 7:return s=e.sent,o=this.safeValue(s,"data",[]),e.abrupt("return",this.parseDepositAddress(this.safeValue(o,0,{}),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchDeposits",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:void 0,r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},(void 0===n||n>100)&&(n=100),e.next=7,this.loadMarkets();case 7:return s=void 0,void 0!==t&&(s=this.currency(t)),o={type:"deposit",from:0},void 0!==s&&(o.currency=s.id),void 0!==n&&(o.size=n),e.next=14,this.privateGetQueryDepositWithdraw(this.extend(o,a));case 14:return u=e.sent,e.abrupt("return",this.parseTransactions(u.data,s,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchWithdrawals",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:void 0,r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},(void 0===n||n>100)&&(n=100),e.next=7,this.loadMarkets();case 7:return s=void 0,void 0!==t&&(s=this.currency(t)),o={type:"withdraw",from:0},void 0!==s&&(o.currency=s.id),void 0!==n&&(o.size=n),e.next=14,this.privateGetQueryDepositWithdraw(this.extend(o,a));case 14:return u=e.sent,e.abrupt("return",this.parseTransactions(u.data,s,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTransaction",value:function(e){var t=this.safeInteger(e,"created-at"),r=this.safeInteger(e,"updated-at"),i=this.safeCurrencyCode(this.safeString(e,"currency")),n=this.safeString(e,"type");"withdraw"===n&&(n="withdrawal");var a=this.parseTransactionStatus(this.safeString(e,"state")),s=this.safeString(e,"address-tag"),o=this.safeNumber(e,"fee");return void 0!==o&&(o=Math.abs(o)),{info:e,id:this.safeString(e,"id"),txid:this.safeString(e,"tx-hash"),timestamp:t,datetime:this.iso8601(t),address:this.safeString(e,"address"),tag:s,type:n,amount:this.safeNumber(e,"amount"),currency:i,status:a,updated:r,fee:{currency:i,cost:o,rate:void 0}}}},{key:"parseTransactionStatus",value:function(e){return this.safeString({unknown:"failed",confirming:"pending",confirmed:"ok",safe:"ok",orphan:"failed",submitted:"pending",canceled:"canceled",reexamine:"pending",reject:"failed",pass:"pending","wallet-reject":"failed","confirm-error":"failed",repealed:"failed","wallet-transfer":"pending","pre-transfer":"pending"},e,e)}},{key:"withdraw",value:function(){var e=n(i.mark((function e(t,r,n){var a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.length>3&&void 0!==h[3]?h[3]:void 0,s=h.length>4&&void 0!==h[4]?h[4]:{},e.next=4,this.loadMarkets();case 4:return this.checkAddress(n),o=this.currency(t),u={address:n,amount:r,currency:o.id.toLowerCase()},void 0!==a&&(u["addr-tag"]=a),e.next=10,this.privatePostDwWithdrawApiCreate(this.extend(u,s));case 10:return c=e.sent,d=this.safeString(c,"data"),e.abrupt("return",{info:c,id:d});case 13:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s="/";"market"===t?s+=t:"public"===t||"private"===t?s+=this.version:"v2Public"!==t&&"v2Private"!==t||(s+="v2"),s+="/"+this.implodeParams(e,i);var o=this.omit(i,this.extractParams(e));if("private"===t||"v2Private"===t){this.checkRequiredCredentials();var u=this.ymdhms(this.milliseconds(),"T"),c={SignatureMethod:"HmacSHA256",SignatureVersion:"2",AccessKeyId:this.apiKey,Timestamp:u};"POST"!==r&&(c=this.extend(c,o)),c=this.keysort(c);var d=this.urlencode(c),h=[r,this.hostname,s,d].join("\n"),l=this.hmac(this.encode(h),this.encode(this.secret),"sha256","base64");s+="?"+(d+="&"+this.urlencode({Signature:l})),"POST"===r?(a=this.json(o),n={"Content-Type":"application/json"}):n={"Content-Type":"application/x-www-form-urlencoded"}}else Object.keys(i).length&&(s+="?"+this.urlencode(i));return{url:s=this.implodeParams(this.urls.api[t],{hostname:this.hostname})+s,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,u){if(void 0!==s&&("status"in s&&"error"===this.safeString(s,"status"))){var c=this.safeString(s,"err-code"),d=this.id+" "+a;this.throwBroadlyMatchedException(this.exceptions.broad,a,d),this.throwExactlyMatchedException(this.exceptions.exact,c,d);var h=this.safeString(s,"err-msg");throw this.throwExactlyMatchedException(this.exceptions.exact,h,d),new p(d)}}}]),r}(h)},function(e,t,r){"use strict";var i=r(7),n=r(8),a=r(1),s=r(2),o=r(6),u=r(3),c=r(4),d=r(5),h=r(11),l=r(10).ExchangeError,f=r(12);e.exports=function(e){c(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(u(r.prototype),"describe",this).call(this),{id:"foxbit",name:"FoxBit",countries:["BR"],has:{cancelOrder:!0,CORS:!1,createMarketOrder:!1,createOrder:!0,fetchBalance:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTrades:!0},rateLimit:1e3,version:"v1",urls:{logo:"https://user-images.githubusercontent.com/51840849/87443320-01c0d080-c5fe-11ea-92e2-4ef56d32b026.jpg",api:{public:"https://api.blinktrade.com/api",private:"https://api.blinktrade.com/tapi"},www:"https://foxbit.com.br/exchange",doc:"https://foxbit.com.br/api/"},comment:"Blinktrade API",api:{public:{get:["{currency}/ticker","{currency}/orderbook","{currency}/trades"]},private:{post:["D","F","U2","U4","U6","U18","U24","U26","U30","U34","U70"]}},markets:{"BTC/VEF":{id:"BTCVEF",symbol:"BTC/VEF",base:"BTC",quote:"VEF",brokerId:1,broker:"SurBitcoin"},"BTC/VND":{id:"BTCVND",symbol:"BTC/VND",base:"BTC",quote:"VND",brokerId:3,broker:"VBTC"},"BTC/BRL":{id:"BTCBRL",symbol:"BTC/BRL",base:"BTC",quote:"BRL",brokerId:4,broker:"FoxBit"},"BTC/PKR":{id:"BTCPKR",symbol:"BTC/PKR",base:"BTC",quote:"PKR",brokerId:8,broker:"UrduBit"},"BTC/CLP":{id:"BTCCLP",symbol:"BTC/CLP",base:"BTC",quote:"CLP",brokerId:9,broker:"ChileBit"}},options:{brokerId:"4"}})}},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.length>0&&void 0!==p[0]?p[0]:{},e.next=3,this.loadMarkets();case 3:return r={BalanceReqID:this.nonce()},e.next=6,this.privatePostU2(this.extend(r,t));case 6:if(n=e.sent,a=this.safeValue(n.Responses,this.options.brokerId),s={info:n},void 0!==a)for(o=Object.keys(this.currencies_by_id),u=0;u<o.length;u++)c=o[u],d=this.safeCurrencyCode(c),c in a&&(h=this.account(),void 0!==(l=this.safeNumber(a,c+"_locked"))&&(l*=1e-8),void 0!==(f=this.safeNumber(a,c))&&(f*=1e-8),h.used=l,h.total=f,s[d]=h);return e.abrupt("return",this.parseBalance(s));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.length>1&&void 0!==o[1]?o[1]:void 0,r=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return n=this.market(t),a={currency:n.quote,crypto_currency:n.base},e.next=8,this.publicGetCurrencyOrderbook(this.extend(a,r));case 8:return s=e.sent,e.abrupt("return",this.parseOrderBook(s));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={currency:n.quote,crypto_currency:n.base},e.next=7,this.publicGetCurrencyTicker(this.extend(a,r));case 7:return s=e.sent,o=this.milliseconds(),u=n.quote.toLowerCase(),c="vol_"+u,d=this.safeNumber(s,"last"),e.abrupt("return",{symbol:t,timestamp:o,datetime:this.iso8601(o),high:this.safeNumber(s,"high"),low:this.safeNumber(s,"low"),bid:this.safeNumber(s,"buy"),bidVolume:void 0,ask:this.safeNumber(s,"sell"),askVolume:void 0,vwap:void 0,open:void 0,close:d,last:d,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeNumber(s,"vol"),quoteVolume:this.safeNumber(s,c),info:s});case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeTimestamp(e,"date"),i=this.safeString(e,"tid"),n=void 0;void 0!==t&&(n=t.symbol);var a=this.safeString(e,"side"),s=this.safeString(e,"price"),o=this.safeString(e,"amount"),u=this.parseNumber(s),c=this.parseNumber(o),d=this.parseNumber(f.stringMul(s,o));return{id:i,info:e,timestamp:r,datetime:this.iso8601(r),symbol:n,type:void 0,side:a,order:void 0,takerOrMaker:void 0,price:u,amount:c,cost:d,fee:void 0}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={currency:s.quote,crypto_currency:s.base},e.next=9,this.publicGetCurrencyTrades(this.extend(o,a));case 9:return u=e.sent,e.abrupt("return",this.parseTrades(u,s,r,n));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,u,c,d,h,f,p,v=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=v.length>4&&void 0!==v[4]?v[4]:void 0,o=v.length>5&&void 0!==v[5]?v[5]:{},e.next=4,this.loadMarkets();case 4:if("market"!==r){e.next=6;break}throw new l(this.id+" allows limit orders only");case 6:return u=this.market(t),c="buy"===n?"1":"2",d={ClOrdID:this.nonce(),Symbol:u.id,Side:c,OrdType:"2",Price:s,OrderQty:a,BrokerID:u.brokerId},e.next=11,this.privatePostD(this.extend(d,o));case 11:return h=e.sent,f=this.indexBy(h.Responses,"MsgType"),p=f[8],e.abrupt("return",{info:h,id:p.OrderID});case 15:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.length>1&&void 0!==n[1]?n[1]:void 0,r=n.length>2&&void 0!==n[2]?n[2]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.privatePostF(this.extend({ClOrdID:t},r));case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.urls.api[t]+"/"+this.version+"/"+this.implodeParams(e,i),o=this.omit(i,this.extractParams(e));if("public"===t)Object.keys(o).length&&(s+="?"+this.urlencode(o));else{this.checkRequiredCredentials();var u=this.nonce().toString(),c=this.extend({MsgType:e},o);a=this.json(c),n={APIKey:this.apiKey,Nonce:u,Signature:this.hmac(this.encode(u),this.encode(this.secret)),"Content-Type":"application/json"}}return{url:s,method:r,body:a,headers:n}}},{key:"request",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:"public",n=c.length>2&&void 0!==c[2]?c[2]:"GET",a=c.length>3&&void 0!==c[3]?c[3]:{},s=c.length>4&&void 0!==c[4]?c[4]:void 0,o=c.length>5&&void 0!==c[5]?c[5]:void 0,e.next=7,this.fetch2(t,r,n,a,s,o);case 7:if(!("Status"in(u=e.sent))){e.next=11;break}if(200===u.Status){e.next=11;break}throw new l(this.id+" "+this.json(u));case 11:return e.abrupt("return",u);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(h)},function(e,t,r){var i=r(68)(r(53),"Map");e.exports=i},function(e,t,r){var i=r(53).Symbol;e.exports=i},function(e,t){var r=Array.isArray;e.exports=r},function(e,t,r){"use strict";function i(e,t,r,i,n,a,s){try{var o=e[a](s),u=o.value}catch(c){return void r(c)}o.done?t(u):Promise.resolve(u).then(i,n)}function n(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var s=e.apply(t,r);function o(e){i(s,n,a,o,u,"next",e)}function u(e){i(s,n,a,o,u,"throw",e)}o(void 0)}))}}r.d(t,"a",(function(){return n}))},function(e,t,r){e.exports=r(117)},function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}},function(e,t,r){"use strict";var i=r(119).unCamelCase;e.exports=function(e){for(var t in e)e[i(t)]=e[t];return e}(Object.assign({},r(198),r(237),r(119),r(149),r(18),r(76),r(245),r(160),r(274),r(275)))},function(e,t){var r={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},function(e,t,r){var i=r(118);e.exports=function(e,t){var r;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=i(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,u=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return o=e.done,e},e:function(e){u=!0,s=e},f:function(){try{o||null==r.return||r.return()}finally{if(u)throw s}}}}},function(e,t){e.exports=function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},function(e,t,r){"use strict";(function(t,i){var n=r(85);e.exports=b;var a,s=r(136);b.ReadableState=y;r(120).EventEmitter;var o=function(e,t){return e.listeners(t).length},u=r(140),c=r(121).Buffer,d=t.Uint8Array||function(){};var h=Object.create(r(75));h.inherits=r(56);var l=r(203),f=void 0;f=l&&l.debuglog?l.debuglog("stream"):function(){};var p,v=r(204),m=r(141);h.inherits(b,u);var g=["error","close","destroy","pause","resume"];function y(e,t){e=e||{};var i=t instanceof(a=a||r(63));this.objectMode=!!e.objectMode,i&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var n=e.highWaterMark,s=e.readableHighWaterMark,o=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:i&&(s||0===s)?s:o,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new v,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(p||(p=r(142).StringDecoder),this.decoder=new p(e.encoding),this.encoding=e.encoding)}function b(e){if(a=a||r(63),!(this instanceof b))return new b(e);this._readableState=new y(e,this),this.readable=!0,e&&("function"===typeof e.read&&(this._read=e.read),"function"===typeof e.destroy&&(this._destroy=e.destroy)),u.call(this)}function x(e,t,r,i,n){var a,s=e._readableState;null===t?(s.reading=!1,function(e,t){if(t.ended)return;if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,S(e)}(e,s)):(n||(a=function(e,t){var r;i=t,c.isBuffer(i)||i instanceof d||"string"===typeof t||void 0===t||e.objectMode||(r=new TypeError("Invalid non-string/buffer chunk"));var i;return r}(s,t)),a?e.emit("error",a):s.objectMode||t&&t.length>0?("string"===typeof t||s.objectMode||Object.getPrototypeOf(t)===c.prototype||(t=function(e){return c.from(e)}(t)),i?s.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):k(e,s,t,!0):s.ended?e.emit("error",new Error("stream.push() after EOF")):(s.reading=!1,s.decoder&&!r?(t=s.decoder.write(t),s.objectMode||0!==t.length?k(e,s,t,!1):T(e,s)):k(e,s,t,!1))):i||(s.reading=!1));return function(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}(s)}function k(e,t,r,i){t.flowing&&0===t.length&&!t.sync?(e.emit("data",r),e.read(0)):(t.length+=t.objectMode?1:r.length,i?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&S(e)),T(e,t)}Object.defineProperty(b.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),b.prototype.destroy=m.destroy,b.prototype._undestroy=m.undestroy,b.prototype._destroy=function(e,t){this.push(null),t(e)},b.prototype.push=function(e,t){var r,i=this._readableState;return i.objectMode?r=!0:"string"===typeof e&&((t=t||i.defaultEncoding)!==i.encoding&&(e=c.from(e,t),t=""),r=!0),x(this,e,t,!1,r)},b.prototype.unshift=function(e){return x(this,e,null,!0,!1)},b.prototype.isPaused=function(){return!1===this._readableState.flowing},b.prototype.setEncoding=function(e){return p||(p=r(142).StringDecoder),this._readableState.decoder=new p(e),this._readableState.encoding=e,this};var w=8388608;function _(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!==e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=w?e=w:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function S(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(f("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?n.nextTick(O,e):O(e))}function O(e){f("emit readable"),e.emit("readable"),A(e)}function T(e,t){t.readingMore||(t.readingMore=!0,n.nextTick(C,e,t))}function C(e,t){for(var r=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(f("maybeReadMore read 0"),e.read(0),r!==t.length);)r=t.length;t.readingMore=!1}function I(e){f("readable nexttick read 0"),e.read(0)}function M(e,t){t.reading||(f("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),A(e),t.flowing&&!t.reading&&e.read(0)}function A(e){var t=e._readableState;for(f("flow",t.flowing);t.flowing&&null!==e.read(););}function E(e,t){return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):r=function(e,t,r){var i;e<t.head.data.length?(i=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):i=e===t.head.data.length?t.shift():r?function(e,t){var r=t.head,i=1,n=r.data;e-=n.length;for(;r=r.next;){var a=r.data,s=e>a.length?a.length:e;if(s===a.length?n+=a:n+=a.slice(0,e),0===(e-=s)){s===a.length?(++i,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=a.slice(s));break}++i}return t.length-=i,n}(e,t):function(e,t){var r=c.allocUnsafe(e),i=t.head,n=1;i.data.copy(r),e-=i.data.length;for(;i=i.next;){var a=i.data,s=e>a.length?a.length:e;if(a.copy(r,r.length-e,0,s),0===(e-=s)){s===a.length?(++n,i.next?t.head=i.next:t.head=t.tail=null):(t.head=i,i.data=a.slice(s));break}++n}return t.length-=n,r}(e,t);return i}(e,t.buffer,t.decoder),r);var r}function N(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,n.nextTick(P,t,e))}function P(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function D(e,t){for(var r=0,i=e.length;r<i;r++)if(e[r]===t)return r;return-1}b.prototype.read=function(e){f("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return f("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?N(this):S(this),null;if(0===(e=_(e,t))&&t.ended)return 0===t.length&&N(this),null;var i,n=t.needReadable;return f("need readable",n),(0===t.length||t.length-e<t.highWaterMark)&&f("length less than watermark",n=!0),t.ended||t.reading?f("reading or ended",n=!1):n&&(f("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=_(r,t))),null===(i=e>0?E(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&N(this)),null!==i&&this.emit("data",i),i},b.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},b.prototype.pipe=function(e,t){var r=this,a=this._readableState;switch(a.pipesCount){case 0:a.pipes=e;break;case 1:a.pipes=[a.pipes,e];break;default:a.pipes.push(e)}a.pipesCount+=1,f("pipe count=%d opts=%j",a.pipesCount,t);var u=(!t||!1!==t.end)&&e!==i.stdout&&e!==i.stderr?d:b;function c(t,i){f("onunpipe"),t===r&&i&&!1===i.hasUnpiped&&(i.hasUnpiped=!0,f("cleanup"),e.removeListener("close",g),e.removeListener("finish",y),e.removeListener("drain",h),e.removeListener("error",m),e.removeListener("unpipe",c),r.removeListener("end",d),r.removeListener("end",b),r.removeListener("data",v),l=!0,!a.awaitDrain||e._writableState&&!e._writableState.needDrain||h())}function d(){f("onend"),e.end()}a.endEmitted?n.nextTick(u):r.once("end",u),e.on("unpipe",c);var h=function(e){return function(){var t=e._readableState;f("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&o(e,"data")&&(t.flowing=!0,A(e))}}(r);e.on("drain",h);var l=!1;var p=!1;function v(t){f("ondata"),p=!1,!1!==e.write(t)||p||((1===a.pipesCount&&a.pipes===e||a.pipesCount>1&&-1!==D(a.pipes,e))&&!l&&(f("false write response, pause",r._readableState.awaitDrain),r._readableState.awaitDrain++,p=!0),r.pause())}function m(t){f("onerror",t),b(),e.removeListener("error",m),0===o(e,"error")&&e.emit("error",t)}function g(){e.removeListener("finish",y),b()}function y(){f("onfinish"),e.removeListener("close",g),b()}function b(){f("unpipe"),r.unpipe(e)}return r.on("data",v),function(e,t,r){if("function"===typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?s(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}(e,"error",m),e.once("close",g),e.once("finish",y),e.emit("pipe",r),a.flowing||(f("pipe resume"),r.resume()),e},b.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r)),this;if(!e){var i=t.pipes,n=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var a=0;a<n;a++)i[a].emit("unpipe",this,r);return this}var s=D(t.pipes,e);return-1===s||(t.pipes.splice(s,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r)),this},b.prototype.on=function(e,t){var r=u.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var i=this._readableState;i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.emittedReadable=!1,i.reading?i.length&&S(this):n.nextTick(I,this))}return r},b.prototype.addListener=b.prototype.on,b.prototype.resume=function(){var e=this._readableState;return e.flowing||(f("resume"),e.flowing=!0,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,n.nextTick(M,e,t))}(this,e)),this},b.prototype.pause=function(){return f("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(f("pause"),this._readableState.flowing=!1,this.emit("pause")),this},b.prototype.wrap=function(e){var t=this,r=this._readableState,i=!1;for(var n in e.on("end",(function(){if(f("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(n){(f("wrapped data"),r.decoder&&(n=r.decoder.write(n)),!r.objectMode||null!==n&&void 0!==n)&&((r.objectMode||n&&n.length)&&(t.push(n)||(i=!0,e.pause())))})),e)void 0===this[n]&&"function"===typeof e[n]&&(this[n]=function(t){return function(){return e[t].apply(e,arguments)}}(n));for(var a=0;a<g.length;a++)e.on(g[a],this.emit.bind(this,g[a]));return this._read=function(t){f("wrapped _read",t),i&&(i=!1,e.resume())},this},Object.defineProperty(b.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),b._fromList=E}).call(this,r(35),r(46))},function(e,t,r){e.exports=r(120).EventEmitter},function(e,t,r){"use strict";var i=r(85);function n(e,t){e.emit("error",t)}e.exports={destroy:function(e,t){var r=this,a=this._readableState&&this._readableState.destroyed,s=this._writableState&&this._writableState.destroyed;return a||s?(t?t(e):!e||this._writableState&&this._writableState.errorEmitted||i.nextTick(n,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!t&&e?(i.nextTick(n,r,e),r._writableState&&(r._writableState.errorEmitted=!0)):t&&t(e)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(e,t,r){"use strict";var i=r(209).Buffer,n=i.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function a(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!==typeof t&&(i.isEncoding===n||!n(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=u,this.end=c,t=4;break;case"utf8":this.fillLast=o,t=4;break;case"base64":this.text=d,this.end=h,t=3;break;default:return this.write=l,void(this.end=f)}this.lastNeed=0,this.lastTotal=0,this.lastChar=i.allocUnsafe(t)}function s(e){return e<=127?0:e>>5===6?2:e>>4===14?3:e>>3===30?4:e>>6===2?-1:-2}function o(e){var t=this.lastTotal-this.lastNeed,r=function(e,t,r){if(128!==(192&t[0]))return e.lastNeed=0,"\ufffd";if(e.lastNeed>1&&t.length>1){if(128!==(192&t[1]))return e.lastNeed=1,"\ufffd";if(e.lastNeed>2&&t.length>2&&128!==(192&t[2]))return e.lastNeed=2,"\ufffd"}}(this,e);return void 0!==r?r:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function u(e,t){if((e.length-t)%2===0){var r=e.toString("utf16le",t);if(r){var i=r.charCodeAt(r.length-1);if(i>=55296&&i<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function c(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function d(e,t){var r=(e.length-t)%3;return 0===r?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function h(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function l(e){return e.toString(this.encoding)}function f(e){return e&&e.length?this.write(e):""}t.StringDecoder=a,a.prototype.write=function(e){if(0===e.length)return"";var t,r;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""},a.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"\ufffd":t},a.prototype.text=function(e,t){var r=function(e,t,r){var i=t.length-1;if(i<r)return 0;var n=s(t[i]);if(n>=0)return n>0&&(e.lastNeed=n-1),n;if(--i<r||-2===n)return 0;if((n=s(t[i]))>=0)return n>0&&(e.lastNeed=n-2),n;if(--i<r||-2===n)return 0;if((n=s(t[i]))>=0)return n>0&&(2===n?n=0:e.lastNeed=n-3),n;return 0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var i=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,i),e.toString("utf8",t,i)},a.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},function(e,t,r){"use strict";e.exports=s;var i=r(63),n=Object.create(r(75));function a(e,t){var r=this._transformState;r.transforming=!1;var i=r.writecb;if(!i)return this.emit("error",new Error("write callback called multiple times"));r.writechunk=null,r.writecb=null,null!=t&&this.push(t),i(e);var n=this._readableState;n.reading=!1,(n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}function s(e){if(!(this instanceof s))return new s(e);i.call(this,e),this._transformState={afterTransform:a.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"===typeof e.transform&&(this._transform=e.transform),"function"===typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",o)}function o(){var e=this;"function"===typeof this._flush?this._flush((function(t,r){u(e,t,r)})):u(this,null,null)}function u(e,t,r){if(t)return e.emit("error",t);if(null!=r&&e.push(r),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}n.inherits=r(56),n.inherits(s,i),s.prototype.push=function(e,t){return this._transformState.needTransform=!1,i.prototype.push.call(this,e,t)},s.prototype._transform=function(e,t,r){throw new Error("_transform() is not implemented")},s.prototype._write=function(e,t,r){var i=this._transformState;if(i.writecb=r,i.writechunk=e,i.writeencoding=t,!i.transforming){var n=this._readableState;(i.needTransform||n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}},s.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},s.prototype._destroy=function(e,t){var r=this;i.prototype._destroy.call(this,e,(function(e){t(e),r.emit("close")}))}},function(e,t,r){(function(e){t.fetch=o(e.fetch)&&o(e.ReadableStream),t.writableStream=o(e.WritableStream),t.abortController=o(e.AbortController),t.blobConstructor=!1;try{new Blob([new ArrayBuffer(1)]),t.blobConstructor=!0}catch(u){}var r;function i(){if(void 0!==r)return r;if(e.XMLHttpRequest){r=new e.XMLHttpRequest;try{r.open("GET",e.XDomainRequest?"/":"https://example.com")}catch(u){r=null}}else r=null;return r}function n(e){var t=i();if(!t)return!1;try{return t.responseType=e,t.responseType===e}catch(u){}return!1}var a="undefined"!==typeof e.ArrayBuffer,s=a&&o(e.ArrayBuffer.prototype.slice);function o(e){return"function"===typeof e}t.arraybuffer=t.fetch||a&&n("arraybuffer"),t.msstream=!t.fetch&&s&&n("ms-stream"),t.mozchunkedarraybuffer=!t.fetch&&a&&n("moz-chunked-arraybuffer"),t.overrideMimeType=t.fetch||!!i()&&o(i().overrideMimeType),t.vbArray=o(e.VBArray),r=null}).call(this,r(35))},function(e,t,r){(function(e,i,n){var a=r(144),s=r(56),o=r(74),u=t.readyStates={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},c=t.IncomingMessage=function(t,r,s,u){var c=this;if(o.Readable.call(c),c._mode=s,c.headers={},c.rawHeaders=[],c.trailers={},c.rawTrailers=[],c.on("end",(function(){e.nextTick((function(){c.emit("close")}))})),"fetch"===s){if(c._fetchResponse=r,c.url=r.url,c.statusCode=r.status,c.statusMessage=r.statusText,r.headers.forEach((function(e,t){c.headers[t.toLowerCase()]=e,c.rawHeaders.push(t,e)})),a.writableStream){var d=new WritableStream({write:function(e){return new Promise((function(t,r){c._destroyed?r():c.push(new i(e))?t():c._resumeFetch=t}))},close:function(){n.clearTimeout(u),c._destroyed||c.push(null)},abort:function(e){c._destroyed||c.emit("error",e)}});try{return void r.body.pipeTo(d).catch((function(e){n.clearTimeout(u),c._destroyed||c.emit("error",e)}))}catch(p){}}var h=r.body.getReader();!function e(){h.read().then((function(t){if(!c._destroyed){if(t.done)return n.clearTimeout(u),void c.push(null);c.push(new i(t.value)),e()}})).catch((function(e){n.clearTimeout(u),c._destroyed||c.emit("error",e)}))}()}else{if(c._xhr=t,c._pos=0,c.url=t.responseURL,c.statusCode=t.status,c.statusMessage=t.statusText,t.getAllResponseHeaders().split(/\r?\n/).forEach((function(e){var t=e.match(/^([^:]+):\s*(.*)/);if(t){var r=t[1].toLowerCase();"set-cookie"===r?(void 0===c.headers[r]&&(c.headers[r]=[]),c.headers[r].push(t[2])):void 0!==c.headers[r]?c.headers[r]+=", "+t[2]:c.headers[r]=t[2],c.rawHeaders.push(t[1],t[2])}})),c._charset="x-user-defined",!a.overrideMimeType){var l=c.rawHeaders["mime-type"];if(l){var f=l.match(/;\s*charset=([^;])(;|$)/);f&&(c._charset=f[1].toLowerCase())}c._charset||(c._charset="utf-8")}}};s(c,o.Readable),c.prototype._read=function(){var e=this._resumeFetch;e&&(this._resumeFetch=null,e())},c.prototype._onXHRProgress=function(){var e=this,t=e._xhr,r=null;switch(e._mode){case"text:vbarray":if(t.readyState!==u.DONE)break;try{r=new n.VBArray(t.responseBody).toArray()}catch(d){}if(null!==r){e.push(new i(r));break}case"text":try{r=t.responseText}catch(d){e._mode="text:vbarray";break}if(r.length>e._pos){var a=r.substr(e._pos);if("x-user-defined"===e._charset){for(var s=new i(a.length),o=0;o<a.length;o++)s[o]=255&a.charCodeAt(o);e.push(s)}else e.push(a,e._charset);e._pos=r.length}break;case"arraybuffer":if(t.readyState!==u.DONE||!t.response)break;r=t.response,e.push(new i(new Uint8Array(r)));break;case"moz-chunked-arraybuffer":if(r=t.response,t.readyState!==u.LOADING||!r)break;e.push(new i(new Uint8Array(r)));break;case"ms-stream":if(r=t.response,t.readyState!==u.LOADING)break;var c=new n.MSStreamReader;c.onprogress=function(){c.result.byteLength>e._pos&&(e.push(new i(new Uint8Array(c.result.slice(e._pos)))),e._pos=c.result.byteLength)},c.onload=function(){e.push(null)},c.readAsArrayBuffer(r)}e._xhr.readyState===u.DONE&&"ms-stream"!==e._mode&&e.push(null)}}).call(this,r(46),r(32).Buffer,r(35))},function(e,t,r){(function(e){var i=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),r={},i=0;i<t.length;i++)r[t[i]]=Object.getOwnPropertyDescriptor(e,t[i]);return r},n=/%[sdj%]/g;t.format=function(e){if(!g(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(o(arguments[r]));return t.join(" ")}r=1;for(var i=arguments,a=i.length,s=String(e).replace(n,(function(e){if("%%"===e)return"%";if(r>=a)return e;switch(e){case"%s":return String(i[r++]);case"%d":return Number(i[r++]);case"%j":try{return JSON.stringify(i[r++])}catch(t){return"[Circular]"}default:return e}})),u=i[r];r<a;u=i[++r])v(u)||!x(u)?s+=" "+u:s+=" "+o(u);return s},t.deprecate=function(r,i){if("undefined"!==typeof e&&!0===e.noDeprecation)return r;if("undefined"===typeof e)return function(){return t.deprecate(r,i).apply(this,arguments)};var n=!1;return function(){if(!n){if(e.throwDeprecation)throw new Error(i);e.traceDeprecation?console.trace(i):console.error(i),n=!0}return r.apply(this,arguments)}};var a,s={};function o(e,r){var i={seen:[],stylize:c};return arguments.length>=3&&(i.depth=arguments[2]),arguments.length>=4&&(i.colors=arguments[3]),p(r)?i.showHidden=r:r&&t._extend(i,r),y(i.showHidden)&&(i.showHidden=!1),y(i.depth)&&(i.depth=2),y(i.colors)&&(i.colors=!1),y(i.customInspect)&&(i.customInspect=!0),i.colors&&(i.stylize=u),d(i,e,i.depth)}function u(e,t){var r=o.styles[t];return r?"\x1b["+o.colors[r][0]+"m"+e+"\x1b["+o.colors[r][1]+"m":e}function c(e,t){return e}function d(e,r,i){if(e.customInspect&&r&&_(r.inspect)&&r.inspect!==t.inspect&&(!r.constructor||r.constructor.prototype!==r)){var n=r.inspect(i,e);return g(n)||(n=d(e,n,i)),n}var a=function(e,t){if(y(t))return e.stylize("undefined","undefined");if(g(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}if(m(t))return e.stylize(""+t,"number");if(p(t))return e.stylize(""+t,"boolean");if(v(t))return e.stylize("null","null")}(e,r);if(a)return a;var s=Object.keys(r),o=function(e){var t={};return e.forEach((function(e,r){t[e]=!0})),t}(s);if(e.showHidden&&(s=Object.getOwnPropertyNames(r)),w(r)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return h(r);if(0===s.length){if(_(r)){var u=r.name?": "+r.name:"";return e.stylize("[Function"+u+"]","special")}if(b(r))return e.stylize(RegExp.prototype.toString.call(r),"regexp");if(k(r))return e.stylize(Date.prototype.toString.call(r),"date");if(w(r))return h(r)}var c,x="",S=!1,O=["{","}"];(f(r)&&(S=!0,O=["[","]"]),_(r))&&(x=" [Function"+(r.name?": "+r.name:"")+"]");return b(r)&&(x=" "+RegExp.prototype.toString.call(r)),k(r)&&(x=" "+Date.prototype.toUTCString.call(r)),w(r)&&(x=" "+h(r)),0!==s.length||S&&0!=r.length?i<0?b(r)?e.stylize(RegExp.prototype.toString.call(r),"regexp"):e.stylize("[Object]","special"):(e.seen.push(r),c=S?function(e,t,r,i,n){for(var a=[],s=0,o=t.length;s<o;++s)I(t,String(s))?a.push(l(e,t,r,i,String(s),!0)):a.push("");return n.forEach((function(n){n.match(/^\d+$/)||a.push(l(e,t,r,i,n,!0))})),a}(e,r,i,o,s):s.map((function(t){return l(e,r,i,o,t,S)})),e.seen.pop(),function(e,t,r){if(e.reduce((function(e,t){return t.indexOf("\n")>=0&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60)return r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1];return r[0]+t+" "+e.join(", ")+" "+r[1]}(c,x,O)):O[0]+x+O[1]}function h(e){return"["+Error.prototype.toString.call(e)+"]"}function l(e,t,r,i,n,a){var s,o,u;if((u=Object.getOwnPropertyDescriptor(t,n)||{value:t[n]}).get?o=u.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):u.set&&(o=e.stylize("[Setter]","special")),I(i,n)||(s="["+n+"]"),o||(e.seen.indexOf(u.value)<0?(o=v(r)?d(e,u.value,null):d(e,u.value,r-1)).indexOf("\n")>-1&&(o=a?o.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+o.split("\n").map((function(e){return"   "+e})).join("\n")):o=e.stylize("[Circular]","special")),y(s)){if(a&&n.match(/^\d+$/))return o;(s=JSON.stringify(""+n)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+o}function f(e){return Array.isArray(e)}function p(e){return"boolean"===typeof e}function v(e){return null===e}function m(e){return"number"===typeof e}function g(e){return"string"===typeof e}function y(e){return void 0===e}function b(e){return x(e)&&"[object RegExp]"===S(e)}function x(e){return"object"===typeof e&&null!==e}function k(e){return x(e)&&"[object Date]"===S(e)}function w(e){return x(e)&&("[object Error]"===S(e)||e instanceof Error)}function _(e){return"function"===typeof e}function S(e){return Object.prototype.toString.call(e)}function O(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(r){if(y(a)&&(a=Object({NODE_ENV:"production",PUBLIC_URL:"/trading-system",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).NODE_DEBUG||""),r=r.toUpperCase(),!s[r])if(new RegExp("\\b"+r+"\\b","i").test(a)){var i=e.pid;s[r]=function(){var e=t.format.apply(t,arguments);console.error("%s %d: %s",r,i,e)}}else s[r]=function(){};return s[r]},t.inspect=o,o.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},o.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=f,t.isBoolean=p,t.isNull=v,t.isNullOrUndefined=function(e){return null==e},t.isNumber=m,t.isString=g,t.isSymbol=function(e){return"symbol"===typeof e},t.isUndefined=y,t.isRegExp=b,t.isObject=x,t.isDate=k,t.isError=w,t.isFunction=_,t.isPrimitive=function(e){return null===e||"boolean"===typeof e||"number"===typeof e||"string"===typeof e||"symbol"===typeof e||"undefined"===typeof e},t.isBuffer=r(227);var T=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function C(){var e=new Date,t=[O(e.getHours()),O(e.getMinutes()),O(e.getSeconds())].join(":");return[e.getDate(),T[e.getMonth()],t].join(" ")}function I(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){console.log("%s - %s",C(),t.format.apply(t,arguments))},t.inherits=r(228),t._extend=function(e,t){if(!t||!x(t))return e;for(var r=Object.keys(t),i=r.length;i--;)e[r[i]]=t[r[i]];return e};var M="undefined"!==typeof Symbol?Symbol("util.promisify.custom"):void 0;function A(e,t){if(!e){var r=new Error("Promise was rejected with a falsy value");r.reason=e,e=r}return t(e)}t.promisify=function(e){if("function"!==typeof e)throw new TypeError('The "original" argument must be of type Function');if(M&&e[M]){var t;if("function"!==typeof(t=e[M]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,M,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,r,i=new Promise((function(e,i){t=e,r=i})),n=[],a=0;a<arguments.length;a++)n.push(arguments[a]);n.push((function(e,i){e?r(e):t(i)}));try{e.apply(this,n)}catch(s){r(s)}return i}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),M&&Object.defineProperty(t,M,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,i(e))},t.promisify.custom=M,t.callbackify=function(t){if("function"!==typeof t)throw new TypeError('The "original" argument must be of type Function');function r(){for(var r=[],i=0;i<arguments.length;i++)r.push(arguments[i]);var n=r.pop();if("function"!==typeof n)throw new TypeError("The last argument must be of type Function");var a=this,s=function(){return n.apply(a,arguments)};t.apply(this,r).then((function(t){e.nextTick(s,null,t)}),(function(t){e.nextTick(A,t,s)}))}return Object.setPrototypeOf(r,Object.getPrototypeOf(t)),Object.defineProperties(r,i(t)),r}}).call(this,r(46))},function(e,t,r){"use strict";e.exports=function(e,t,r,i){for(var n=65535&e|0,a=e>>>16&65535|0,s=0;0!==r;){r-=s=r>2e3?2e3:r;do{a=a+(n=n+t[i++]|0)|0}while(--s);n%=65521,a%=65521}return n|a<<16|0}},function(e,t,r){"use strict";var i=function(){for(var e,t=[],r=0;r<256;r++){e=r;for(var i=0;i<8;i++)e=1&e?3988292384^e>>>1:e>>>1;t[r]=e}return t}();e.exports=function(e,t,r,n){var a=i,s=n+r;e^=-1;for(var o=n;o<s;o++)e=e>>>8^a[255&(e^t[o])];return-1^e}},function(e,t,r){"use strict";var i=Number.isFinite,n=Number.isInteger,a=Array.isArray,s=function(e){return void 0!==e&&null!==e},o=function(e){return"string"===typeof e},u=function(e){return null!==e&&"object"===typeof e},c=function(e){return s(e)&&e.toString||i(e)},d=function(e,t){return u(e)?e[t]:void 0},h=function(e,t,r){return u(e)?t in e&&null!==e[t]?e[t]:e[r]:void 0},l=function(e){return i(e)||o(e)?parseFloat(e):NaN},f=function(e){return i(e)||o(e)?parseInt(e,10):NaN};e.exports={isNumber:i,isInteger:n,isArray:a,isObject:u,isString:o,isStringCoercible:c,isDictionary:function(e){return u(e)&&Object.getPrototypeOf(e)===Object.prototype&&!a(e)&&!function(e){return e instanceof RegExp}(e)},hasProps:s,prop:d,asFloat:l,asInteger:f,safeFloat:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:l(d(e,t));return i(n)?n:r},safeInteger:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:f(d(e,t));return i(n)?n:r},safeIntegerProduct:function(e,t,r,n){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:f(d(e,t));return i(a)?parseInt(a*r):n},safeTimestamp:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:l(d(e,t));return i(n)?parseInt(1e3*n):r},safeValue:function(e,t,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:d(e,t);return s(i)?i:r},safeString:function(e,t,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:d(e,t);return c(i)?String(i):r},safeStringLower:function(e,t,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:d(e,t);return c(i)?String(i).toLowerCase():r},safeStringUpper:function(e,t,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:d(e,t);return c(i)?String(i).toUpperCase():r},safeFloat2:function(e,t,r,n){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:l(h(e,t,r));return i(a)?a:n},safeInteger2:function(e,t,r,n){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:f(h(e,t,r));return i(a)?a:n},safeIntegerProduct2:function(e,t,r,n,a){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:f(h(e,t,r));return i(s)?parseInt(s*n):a},safeTimestamp2:function(e,t,r,n){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:l(h(e,t,r));return i(a)?parseInt(1e3*a):n},safeValue2:function(e,t,r,i){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:h(e,t,r);return s(n)?n:i},safeString2:function(e,t,r,i){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:h(e,t,r);return c(n)?String(n):i},safeStringLower2:function(e,t,r,i){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:h(e,t,r);return c(n)?String(n).toLowerCase():i},safeStringUpper2:function(e,t,r,i){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:h(e,t,r);return c(n)?String(n).toUpperCase():i}}},function(e,t,r){"use strict";var i=Object.prototype.hasOwnProperty,n=Array.isArray,a=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),s=function(e,t){for(var r=t&&t.plainObjects?Object.create(null):{},i=0;i<e.length;++i)"undefined"!==typeof e[i]&&(r[i]=e[i]);return r};e.exports={arrayToObject:s,assign:function(e,t){return Object.keys(t).reduce((function(e,r){return e[r]=t[r],e}),e)},combine:function(e,t){return[].concat(e,t)},compact:function(e){for(var t=[{obj:{o:e},prop:"o"}],r=[],i=0;i<t.length;++i)for(var a=t[i],s=a.obj[a.prop],o=Object.keys(s),u=0;u<o.length;++u){var c=o[u],d=s[c];"object"===typeof d&&null!==d&&-1===r.indexOf(d)&&(t.push({obj:s,prop:c}),r.push(d))}return function(e){for(;e.length>1;){var t=e.pop(),r=t.obj[t.prop];if(n(r)){for(var i=[],a=0;a<r.length;++a)"undefined"!==typeof r[a]&&i.push(r[a]);t.obj[t.prop]=i}}}(t),e},decode:function(e,t,r){var i=e.replace(/\+/g," ");if("iso-8859-1"===r)return i.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(i)}catch(n){return i}},encode:function(e,t,r){if(0===e.length)return e;var i="string"===typeof e?e:String(e);if("iso-8859-1"===r)return escape(i).replace(/%u[0-9a-f]{4}/gi,(function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"}));for(var n="",s=0;s<i.length;++s){var o=i.charCodeAt(s);45===o||46===o||95===o||126===o||o>=48&&o<=57||o>=65&&o<=90||o>=97&&o<=122?n+=i.charAt(s):o<128?n+=a[o]:o<2048?n+=a[192|o>>6]+a[128|63&o]:o<55296||o>=57344?n+=a[224|o>>12]+a[128|o>>6&63]+a[128|63&o]:(s+=1,o=65536+((1023&o)<<10|1023&i.charCodeAt(s)),n+=a[240|o>>18]+a[128|o>>12&63]+a[128|o>>6&63]+a[128|63&o])}return n},isBuffer:function(e){return!(!e||"object"!==typeof e)&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},merge:function e(t,r,a){if(!r)return t;if("object"!==typeof r){if(n(t))t.push(r);else{if(!t||"object"!==typeof t)return[t,r];(a&&(a.plainObjects||a.allowPrototypes)||!i.call(Object.prototype,r))&&(t[r]=!0)}return t}if(!t||"object"!==typeof t)return[t].concat(r);var o=t;return n(t)&&!n(r)&&(o=s(t,a)),n(t)&&n(r)?(r.forEach((function(r,n){if(i.call(t,n)){var s=t[n];s&&"object"===typeof s&&r&&"object"===typeof r?t[n]=e(s,r,a):t.push(r)}else t[n]=r})),t):Object.keys(r).reduce((function(t,n){var s=r[n];return i.call(t,n)?t[n]=e(t[n],s,a):t[n]=s,t}),o)}}},function(e,t,r){"use strict";var i=String.prototype.replace,n=/%20/g;e.exports={default:"RFC3986",formatters:{RFC1738:function(e){return i.call(e,n,"+")},RFC3986:function(e){return e}},RFC1738:"RFC1738",RFC3986:"RFC3986"}},function(e,t,r){(function(t){var i=r(47)._;function n(e,r){null!=e&&("number"==typeof e?this.fromNumber(e,r):t.isBuffer(e)?this.fromBuffer(e):null==r&&"string"!=typeof e?this.fromByteArray(e):this.fromString(e,r))}function a(){return new n(null)}n.prototype.am=function(e,t,r,i,n,a){for(var s=16383&t,o=t>>14;--a>=0;){var u=16383&this[e],c=this[e++]>>14,d=o*u+c*s;n=((u=s*u+((16383&d)<<14)+r[i]+n)>>28)+(d>>14)+o*c,r[i++]=268435455&u}return n},n.prototype.DB=28,n.prototype.DM=268435455,n.prototype.DV=1<<28;n.prototype.FV=Math.pow(2,52),n.prototype.F1=24,n.prototype.F2=4;var s,o,u=new Array;for(s="0".charCodeAt(0),o=0;o<=9;++o)u[s++]=o;for(s="a".charCodeAt(0),o=10;o<36;++o)u[s++]=o;for(s="A".charCodeAt(0),o=10;o<36;++o)u[s++]=o;function c(e){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(e)}function d(e,t){var r=u[e.charCodeAt(t)];return null==r?-1:r}function h(e){var t=a();return t.fromInt(e),t}function l(e){var t,r=1;return 0!=(t=e>>>16)&&(e=t,r+=16),0!=(t=e>>8)&&(e=t,r+=8),0!=(t=e>>4)&&(e=t,r+=4),0!=(t=e>>2)&&(e=t,r+=2),0!=(t=e>>1)&&(e=t,r+=1),r}function f(e){this.m=e}function p(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function v(e,t){return e&t}function m(e,t){return e|t}function g(e,t){return e^t}function y(e){if(0===e)return-1;var t=0;return 0===(65535&e)&&(e>>=16,t+=16),0===(255&e)&&(e>>=8,t+=8),0===(15&e)&&(e>>=4,t+=4),0===(3&e)&&(e>>=2,t+=2),0===(1&e)&&++t,t}function b(){}function x(e){return e}function k(e){this.r2=a(),this.q3=a(),n.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}f.prototype.convert=function(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e},f.prototype.revert=function(e){return e},f.prototype.reduce=function(e){e.divRemTo(this.m,null,e)},f.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},f.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},p.prototype.convert=function(e){var t=a();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(n.ZERO)>0&&this.m.subTo(t,t),t},p.prototype.revert=function(e){var t=a();return e.copyTo(t),this.reduce(t),t},p.prototype.reduce=function(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var t=0;t<this.m.t;++t){var r=32767&e[t],i=r*this.mpl+((r*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(e[r=t+this.m.t]+=this.m.am(0,i,e,t,0,this.m.t);e[r]>=e.DV;)e[r]-=e.DV,e[++r]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)},p.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},p.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},b.prototype.convert=x,b.prototype.revert=x,b.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r)},b.prototype.sqrTo=function(e,t){e.squareTo(t)},k.prototype.convert=function(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=a();return e.copyTo(t),this.reduce(t),t},k.prototype.revert=function(e){return e},k.prototype.reduce=function(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)},k.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},k.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},n.prototype.copyTo=function(e){for(var t=this.t-1;t>=0;--t)e[t]=this[t];e.t=this.t,e.s=this.s},n.prototype.fromInt=function(e){this.t=1,this.s=e<0?-1:0,e>0?this[0]=e:e<-1?this[0]=e+DV:this.t=0},n.prototype.fromString=function(e,t,r){var i;switch(t){case 2:i=1;break;case 4:i=2;break;case 8:i=3;break;case 16:i=4;break;case 32:i=5;break;case 256:i=8;break;default:return void this.fromRadix(e,t)}this.t=0,this.s=0;for(var a=e.length,s=!1,o=0;--a>=0;){var u=8==i?255&e[a]:d(e,a);u<0?"-"==e.charAt(a)&&(s=!0):(s=!1,0===o?this[this.t++]=u:o+i>this.DB?(this[this.t-1]|=(u&(1<<this.DB-o)-1)<<o,this[this.t++]=u>>this.DB-o):this[this.t-1]|=u<<o,(o+=i)>=this.DB&&(o-=this.DB))}r||8!=i||0==(128&e[0])||(this.s=-1,o>0&&(this[this.t-1]|=(1<<this.DB-o)-1<<o)),this.clamp(),s&&n.ZERO.subTo(this,this)},n.prototype.fromByteArray=function(e,t){this.fromString(e,256,t)},n.prototype.fromBuffer=function(e){this.fromString(e,256,!0)},n.prototype.clamp=function(){for(var e=this.s&this.DM;this.t>0&&this[this.t-1]==e;)--this.t},n.prototype.dlShiftTo=function(e,t){var r;for(r=this.t-1;r>=0;--r)t[r+e]=this[r];for(r=e-1;r>=0;--r)t[r]=0;t.t=this.t+e,t.s=this.s},n.prototype.drShiftTo=function(e,t){for(var r=e;r<this.t;++r)t[r-e]=this[r];t.t=Math.max(this.t-e,0),t.s=this.s},n.prototype.lShiftTo=function(e,t){var r,i=e%this.DB,n=this.DB-i,a=(1<<n)-1,s=Math.floor(e/this.DB),o=this.s<<i&this.DM;for(r=this.t-1;r>=0;--r)t[r+s+1]=this[r]>>n|o,o=(this[r]&a)<<i;for(r=s-1;r>=0;--r)t[r]=0;t[s]=o,t.t=this.t+s+1,t.s=this.s,t.clamp()},n.prototype.rShiftTo=function(e,t){t.s=this.s;var r=Math.floor(e/this.DB);if(r>=this.t)t.t=0;else{var i=e%this.DB,n=this.DB-i,a=(1<<i)-1;t[0]=this[r]>>i;for(var s=r+1;s<this.t;++s)t[s-r-1]|=(this[s]&a)<<n,t[s-r]=this[s]>>i;i>0&&(t[this.t-r-1]|=(this.s&a)<<n),t.t=this.t-r,t.clamp()}},n.prototype.subTo=function(e,t){for(var r=0,i=0,n=Math.min(e.t,this.t);r<n;)i+=this[r]-e[r],t[r++]=i&this.DM,i>>=this.DB;if(e.t<this.t){for(i-=e.s;r<this.t;)i+=this[r],t[r++]=i&this.DM,i>>=this.DB;i+=this.s}else{for(i+=this.s;r<e.t;)i-=e[r],t[r++]=i&this.DM,i>>=this.DB;i-=e.s}t.s=i<0?-1:0,i<-1?t[r++]=this.DV+i:i>0&&(t[r++]=i),t.t=r,t.clamp()},n.prototype.multiplyTo=function(e,t){var r=this.abs(),i=e.abs(),a=r.t;for(t.t=a+i.t;--a>=0;)t[a]=0;for(a=0;a<i.t;++a)t[a+r.t]=r.am(0,i[a],t,a,0,r.t);t.s=0,t.clamp(),this.s!=e.s&&n.ZERO.subTo(t,t)},n.prototype.squareTo=function(e){for(var t=this.abs(),r=e.t=2*t.t;--r>=0;)e[r]=0;for(r=0;r<t.t-1;++r){var i=t.am(r,t[r],e,2*r,0,1);(e[r+t.t]+=t.am(r+1,2*t[r],e,2*r+1,i,t.t-r-1))>=t.DV&&(e[r+t.t]-=t.DV,e[r+t.t+1]=1)}e.t>0&&(e[e.t-1]+=t.am(r,t[r],e,2*r,0,1)),e.s=0,e.clamp()},n.prototype.divRemTo=function(e,t,r){var i=e.abs();if(!(i.t<=0)){var s=this.abs();if(s.t<i.t)return null!=t&&t.fromInt(0),void(null!=r&&this.copyTo(r));null==r&&(r=a());var o=a(),u=this.s,c=e.s,d=this.DB-l(i[i.t-1]);d>0?(i.lShiftTo(d,o),s.lShiftTo(d,r)):(i.copyTo(o),s.copyTo(r));var h=o.t,f=o[h-1];if(0!==f){var p=f*(1<<this.F1)+(h>1?o[h-2]>>this.F2:0),v=this.FV/p,m=(1<<this.F1)/p,g=1<<this.F2,y=r.t,b=y-h,x=null==t?a():t;for(o.dlShiftTo(b,x),r.compareTo(x)>=0&&(r[r.t++]=1,r.subTo(x,r)),n.ONE.dlShiftTo(h,x),x.subTo(o,o);o.t<h;)o[o.t++]=0;for(;--b>=0;){var k=r[--y]==f?this.DM:Math.floor(r[y]*v+(r[y-1]+g)*m);if((r[y]+=o.am(0,k,r,b,0,h))<k)for(o.dlShiftTo(b,x),r.subTo(x,r);r[y]<--k;)r.subTo(x,r)}null!=t&&(r.drShiftTo(h,t),u!=c&&n.ZERO.subTo(t,t)),r.t=h,r.clamp(),d>0&&r.rShiftTo(d,r),u<0&&n.ZERO.subTo(r,r)}}},n.prototype.invDigit=function(){if(this.t<1)return 0;var e=this[0];if(0===(1&e))return 0;var t=3&e;return(t=(t=(t=(t=t*(2-(15&e)*t)&15)*(2-(255&e)*t)&255)*(2-((65535&e)*t&65535))&65535)*(2-e*t%this.DV)%this.DV)>0?this.DV-t:-t},n.prototype.isEven=function(){return 0===(this.t>0?1&this[0]:this.s)},n.prototype.exp=function(e,t){if(e>4294967295||e<1)return n.ONE;var r=a(),i=a(),s=t.convert(this),o=l(e)-1;for(s.copyTo(r);--o>=0;)if(t.sqrTo(r,i),(e&1<<o)>0)t.mulTo(i,s,r);else{var u=r;r=i,i=u}return t.revert(r)},n.prototype.chunkSize=function(e){return Math.floor(Math.LN2*this.DB/Math.log(e))},n.prototype.toRadix=function(e){if(null==e&&(e=10),0===this.signum()||e<2||e>36)return"0";var t=this.chunkSize(e),r=Math.pow(e,t),i=h(r),n=a(),s=a(),o="";for(this.divRemTo(i,n,s);n.signum()>0;)o=(r+s.intValue()).toString(e).substr(1)+o,n.divRemTo(i,n,s);return s.intValue().toString(e)+o},n.prototype.fromRadix=function(e,t){this.fromInt(0),null==t&&(t=10);for(var r=this.chunkSize(t),i=Math.pow(t,r),a=!1,s=0,o=0,u=0;u<e.length;++u){var c=d(e,u);c<0?"-"==e.charAt(u)&&0===this.signum()&&(a=!0):(o=t*o+c,++s>=r&&(this.dMultiply(i),this.dAddOffset(o,0),s=0,o=0))}s>0&&(this.dMultiply(Math.pow(t,s)),this.dAddOffset(o,0)),a&&n.ZERO.subTo(this,this)},n.prototype.bitwiseTo=function(e,t,r){var i,n,a=Math.min(e.t,this.t);for(i=0;i<a;++i)r[i]=t(this[i],e[i]);if(e.t<this.t){for(n=e.s&this.DM,i=a;i<this.t;++i)r[i]=t(this[i],n);r.t=this.t}else{for(n=this.s&this.DM,i=a;i<e.t;++i)r[i]=t(n,e[i]);r.t=e.t}r.s=t(this.s,e.s),r.clamp()},n.prototype.addTo=function(e,t){for(var r=0,i=0,n=Math.min(e.t,this.t);r<n;)i+=this[r]+e[r],t[r++]=i&this.DM,i>>=this.DB;if(e.t<this.t){for(i+=e.s;r<this.t;)i+=this[r],t[r++]=i&this.DM,i>>=this.DB;i+=this.s}else{for(i+=this.s;r<e.t;)i+=e[r],t[r++]=i&this.DM,i>>=this.DB;i+=e.s}t.s=i<0?-1:0,i>0?t[r++]=i:i<-1&&(t[r++]=this.DV+i),t.t=r,t.clamp()},n.prototype.dMultiply=function(e){this[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()},n.prototype.dAddOffset=function(e,t){if(0!==e){for(;this.t<=t;)this[this.t++]=0;for(this[t]+=e;this[t]>=this.DV;)this[t]-=this.DV,++t>=this.t&&(this[this.t++]=0),++this[t]}},n.prototype.multiplyLowerTo=function(e,t,r){var i,n=Math.min(this.t+e.t,t);for(r.s=0,r.t=n;n>0;)r[--n]=0;for(i=r.t-this.t;n<i;++n)r[n+this.t]=this.am(0,e[n],r,n,0,this.t);for(i=Math.min(e.t,t);n<i;++n)this.am(0,e[n],r,n,0,t-n);r.clamp()},n.prototype.multiplyUpperTo=function(e,t,r){--t;var i=r.t=this.t+e.t-t;for(r.s=0;--i>=0;)r[i]=0;for(i=Math.max(t-this.t,0);i<e.t;++i)r[this.t+i-t]=this.am(t-i,e[i],r,0,0,this.t+i-t);r.clamp(),r.drShiftTo(1,r)},n.prototype.toString=function(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(16==e)t=4;else if(8==e)t=3;else if(2==e)t=1;else if(32==e)t=5;else{if(4!=e)return this.toRadix(e);t=2}var r,i=(1<<t)-1,n=!1,a="",s=this.t,o=this.DB-s*this.DB%t;if(s-- >0)for(o<this.DB&&(r=this[s]>>o)>0&&(n=!0,a=c(r));s>=0;)o<t?(r=(this[s]&(1<<o)-1)<<t-o,r|=this[--s]>>(o+=this.DB-t)):(r=this[s]>>(o-=t)&i,o<=0&&(o+=this.DB,--s)),r>0&&(n=!0),n&&(a+=c(r));return n?a:"0"},n.prototype.negate=function(){var e=a();return n.ZERO.subTo(this,e),e},n.prototype.abs=function(){return this.s<0?this.negate():this},n.prototype.compareTo=function(e){var t=this.s-e.s;if(0!=t)return t;var r=this.t;if(0!=(t=r-e.t))return this.s<0?-t:t;for(;--r>=0;)if(0!=(t=this[r]-e[r]))return t;return 0},n.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+l(this[this.t-1]^this.s&this.DM)},n.prototype.mod=function(e){var t=a();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(n.ZERO)>0&&e.subTo(t,t),t},n.prototype.clone=function(){var e=a();return this.copyTo(e),e},n.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0===this.t)return-1}else{if(1==this.t)return this[0];if(0===this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},n.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1},n.prototype.toByteArray=function(){var e=this.t,t=new Array;t[0]=this.s;var r,i=this.DB-e*this.DB%8,n=0;if(e-- >0)for(i<this.DB&&(r=this[e]>>i)!=(this.s&this.DM)>>i&&(t[n++]=r|this.s<<this.DB-i);e>=0;)i<8?(r=(this[e]&(1<<i)-1)<<8-i,r|=this[--e]>>(i+=this.DB-8)):(r=this[e]>>(i-=8)&255,i<=0&&(i+=this.DB,--e)),0!=(128&r)&&(r|=-256),0===n&&(128&this.s)!=(128&r)&&++n,(n>0||r!=this.s)&&(t[n++]=r);return t},n.prototype.toBuffer=function(e){var r=t.from(this.toByteArray());if(!0===e&&0===r[0])r=r.slice(1);else if(i.isNumber(e)){if(r.length>e){for(var n=0;n<r.length-e;n++)if(0!==r[n])return null;return r.slice(r.length-e)}if(r.length<e){var a=t.alloc(e);return a.fill(0,0,e-r.length),r.copy(a,e-r.length),a}}return r},n.prototype.equals=function(e){return 0==this.compareTo(e)},n.prototype.min=function(e){return this.compareTo(e)<0?this:e},n.prototype.max=function(e){return this.compareTo(e)>0?this:e},n.prototype.and=function(e){var t=a();return this.bitwiseTo(e,v,t),t},n.prototype.or=function(e){var t=a();return this.bitwiseTo(e,m,t),t},n.prototype.xor=function(e){var t=a();return this.bitwiseTo(e,g,t),t},n.prototype.not=function(){for(var e=a(),t=0;t<this.t;++t)e[t]=this.DM&~this[t];return e.t=this.t,e.s=~this.s,e},n.prototype.getLowestSetBit=function(){for(var e=0;e<this.t;++e)if(0!=this[e])return e*this.DB+y(this[e]);return this.s<0?this.t*this.DB:-1},n.prototype.add=function(e){var t=a();return this.addTo(e,t),t},n.prototype.subtract=function(e){var t=a();return this.subTo(e,t),t},n.prototype.multiply=function(e){var t=a();return this.multiplyTo(e,t),t},n.prototype.divide=function(e){var t=a();return this.divRemTo(e,t,null),t},n.prototype.remainder=function(e){var t=a();return this.divRemTo(e,null,t),t},n.prototype.modPow=function(e,t){var r,i,n=e.bitLength(),s=h(1);if(n<=0)return s;r=n<18?1:n<48?3:n<144?4:n<768?5:6,i=n<8?new f(t):t.isEven()?new k(t):new p(t);var o=new Array,u=3,c=r-1,d=(1<<r)-1;if(o[1]=i.convert(this),r>1){var v=a();for(i.sqrTo(o[1],v);u<=d;)o[u]=a(),i.mulTo(v,o[u-2],o[u]),u+=2}var m,g,y=e.t-1,b=!0,x=a();for(n=l(e[y])-1;y>=0;){for(n>=c?m=e[y]>>n-c&d:(m=(e[y]&(1<<n+1)-1)<<c-n,y>0&&(m|=e[y-1]>>this.DB+n-c)),u=r;0===(1&m);)m>>=1,--u;if((n-=u)<0&&(n+=this.DB,--y),b)o[m].copyTo(s),b=!1;else{for(;u>1;)i.sqrTo(s,x),i.sqrTo(x,s),u-=2;u>0?i.sqrTo(s,x):(g=s,s=x,x=g),i.mulTo(x,o[m],s)}for(;y>=0&&0===(e[y]&1<<n);)i.sqrTo(s,x),g=s,s=x,x=g,--n<0&&(n=this.DB-1,--y)}return i.revert(s)},n.prototype.pow=function(e){return this.exp(e,new b)},n.prototype.gcd=function(e){var t=this.s<0?this.negate():this.clone(),r=e.s<0?e.negate():e.clone();if(t.compareTo(r)<0){var i=t;t=r,r=i}var n=t.getLowestSetBit(),a=r.getLowestSetBit();if(a<0)return t;for(n<a&&(a=n),a>0&&(t.rShiftTo(a,t),r.rShiftTo(a,r));t.signum()>0;)(n=t.getLowestSetBit())>0&&t.rShiftTo(n,t),(n=r.getLowestSetBit())>0&&r.rShiftTo(n,r),t.compareTo(r)>=0?(t.subTo(r,t),t.rShiftTo(1,t)):(r.subTo(t,r),r.rShiftTo(1,r));return a>0&&r.lShiftTo(a,r),r},n.int2char=c,n.ZERO=h(0),n.ONE=h(1),n.prototype.square=function(){var e=a();return this.squareTo(e),e},e.exports=n}).call(this,r(32).Buffer)},function(e,t,r){e.exports={pkcs1:r(248),isEncryption:function(t){return e.exports[t]&&e.exports[t].isEncryption},isSignature:function(t){return e.exports[t]&&e.exports[t].isSignature}}},function(e,t,r){var i=r(252);e.exports={Ber:i,BerReader:i.Reader}},function(e,t){e.exports={newInvalidAsn1Error:function(e){var t=new Error;return t.name="InvalidAsn1Error",t.message=e||"",t}}},function(e,t){e.exports={EOC:0,Boolean:1,Integer:2,BitString:3,OctetString:4,Null:5,OID:6,ObjectDescriptor:7,External:8,Real:9,Enumeration:10,PDV:11,Utf8String:12,RelativeOID:13,Sequence:16,Set:17,NumericString:18,PrintableString:19,T61String:20,VideotexString:21,IA5String:22,UTCTime:23,GeneralizedTime:24,GraphicString:25,VisibleString:26,GeneralString:28,UniversalString:29,CharacterString:30,BMPString:31,Constructor:32,Context:128}},function(e,t,r){"use strict";var i,n=t,a=r(50),s=a.utils.assert;function o(e){"short"===e.type?this.curve=new a.curve.short(e):"edwards"===e.type?this.curve=new a.curve.edwards(e):this.curve=new a.curve.mont(e),this.g=this.curve.g,this.n=this.curve.n,this.hash=e.hash,s(this.g.validate(),"Invalid curve"),s(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function u(e,t){Object.defineProperty(n,e,{configurable:!0,enumerable:!0,get:function(){var r=new o(t);return Object.defineProperty(n,e,{configurable:!0,enumerable:!0,value:r}),r}})}n.PresetCurve=o,u("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:"SHA256",gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),u("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:"SHA256",gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),u("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:"SHA256",gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),u("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:"SHA384",gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),u("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:"SHA512",gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),u("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:"SHA256",gRed:!1,g:["9"]}),u("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:"SHA256",gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{i=r(260)}catch(c){i=void 0}u("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:"SHA256",beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",i]})},function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},function(e,t){e.exports=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}},function(e,t,r){"use strict";var i=r(7),n=r(8),a=r(1),s=r(4),o=r(5),u=r(271),c=Date.now,d=function(){return 1e3*c()},h=c,l=setTimeout,f=function e(t,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:c()+r,a=function(){},s=!0,o=i((function(){s=!0;var r=n-c();r>0?a=e(t,r,i,n):t()}),r);return function(){s&&(s=!1,clearTimeout(o)),a()}},p=function(e){s(r,e);var t=o(r);function r(){var e;a(this,r);var i="timed out";return(e=t.call(this,i)).constructor=r,e.__proto__=r.prototype,e.message=i,e}return r}(u(Error)),v=function(e){if("string"===typeof e&&e&&!e.match(/^[0-9]+$/)&&!(e.indexOf("-")<0||e.indexOf(":")<0))try{var t=Date.parse(e.indexOf("+")>=0||"Z"===e.slice(-1)?e:(e+"Z").replace(/\s(\d\d):/,"T$1:"));if(Number.isNaN(t))return;return t}catch(r){return}};e.exports={now:c,microseconds:d,milliseconds:h,seconds:function(){return Math.floor(c()/1e3)},iso8601:function(e){var t=void 0;if(t="number"===typeof e?Math.floor(e):parseInt(e,10),!(Number.isNaN(t)||t<0))try{return new Date(t).toISOString()}catch(r){return}},parse8601:v,rfc2616:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;return new Date(e).toUTCString()},uuidv1:function(){var e=(10*d()+122192928e9).toString(16);return e.slice(7,15)+e.slice(3,7)+"1"+e.slice(0,3)+"9696"+"ff".repeat(6)},parseDate:function(e){if("string"===typeof e&&e){if(e.indexOf("GMT")>=0)try{return Date.parse(e)}catch(t){return}return v(e)}},mdy:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-";t=t||"";var r=new Date(e),i=r.getUTCFullYear().toString(),n=r.getUTCMonth()+1,a=r.getUTCDate();return(n=n<10?"0"+n:n.toString())+t+(a=a<10?"0"+a:a.toString())+t+i},ymd:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-";t=t||"";var r=new Date(e),i=r.getUTCFullYear().toString(),n=r.getUTCMonth()+1,a=r.getUTCDate();return i+t+(n=n<10?"0"+n:n.toString())+t+(a=a<10?"0"+a:a.toString())},ymdhms:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:" ",r=new Date(e),i=r.getUTCFullYear(),n=r.getUTCMonth()+1,a=r.getUTCDate(),s=r.getUTCHours(),o=r.getUTCMinutes(),u=r.getUTCSeconds();return i+"-"+(n=n<10?"0"+n:n)+"-"+(a=a<10?"0"+a:a)+t+(s=s<10?"0"+s:s)+":"+(o=o<10?"0"+o:o)+":"+(u=u<10?"0"+u:u)},setTimeout_safe:f,sleep:function(e){return new Promise((function(t){return f(t,e)}))},TimedOut:p,timeout:function(){var e=n(i.mark((function e(t,r){var n,a;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=function(){},a=new Promise((function(e){return n=f(e,t)})),e.prev=2,e.next=5,Promise.race([r,a.then((function(){throw new p}))]);case 5:return e.abrupt("return",e.sent);case 6:return e.prev=6,n(),e.finish(6);case 9:case"end":return e.stop()}}),e,null,[[2,,6,9]])})));return function(t,r){return e.apply(this,arguments)}}()}},function(e,t,r){"use strict";var i=r(7),n=r(8),a=r(1),s=r(2),o=r(6),u=r(3),c=r(4),d=r(5),h=r(11),l=r(10),f=l.ExchangeError,p=l.ArgumentsRequired,v=l.ExchangeNotAvailable,m=l.InsufficientFunds,g=l.OrderNotFound,y=l.InvalidOrder,b=l.DDoSProtection,x=l.InvalidNonce,k=l.AuthenticationError,w=l.RateLimitExceeded,_=l.PermissionDenied,S=l.NotSupported,O=l.BadRequest,T=l.BadSymbol,C=l.AccountSuspended,I=l.OrderImmediatelyFillable,M=r(18).TRUNCATE,A=r(12);e.exports=function(e){c(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(u(r.prototype),"describe",this).call(this),{id:"binance",name:"Binance",countries:["JP","MT"],rateLimit:500,certified:!0,pro:!0,has:{cancelAllOrders:!0,cancelOrder:!0,CORS:!1,createOrder:!0,fetchCurrencies:!0,fetchBalance:!0,fetchBidsAsks:!0,fetchClosedOrders:"emulated",fetchDepositAddress:!0,fetchDeposits:!0,fetchFundingFees:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrders:!0,fetchOrderBook:!0,fetchStatus:!0,fetchTicker:!0,fetchTickers:!0,fetchTime:!0,fetchTrades:!0,fetchTradingFee:!0,fetchTradingFees:!0,fetchTransactions:!1,fetchWithdrawals:!0,withdraw:!0,transfer:!0,fetchTransfers:!0},timeframes:{"1m":"1m","3m":"3m","5m":"5m","15m":"15m","30m":"30m","1h":"1h","2h":"2h","4h":"4h","6h":"6h","8h":"8h","12h":"12h","1d":"1d","3d":"3d","1w":"1w","1M":"1M"},urls:{logo:"https://user-images.githubusercontent.com/1294454/29604020-d5483cdc-87ee-11e7-94c7-d1a8d9169293.jpg",test:{dapiPublic:"https://testnet.binancefuture.com/dapi/v1",dapiPrivate:"https://testnet.binancefuture.com/dapi/v1",fapiPublic:"https://testnet.binancefuture.com/fapi/v1",fapiPrivate:"https://testnet.binancefuture.com/fapi/v1",fapiPrivateV2:"https://testnet.binancefuture.com/fapi/v2",public:"https://testnet.binance.vision/api/v3",private:"https://testnet.binance.vision/api/v3",v3:"https://testnet.binance.vision/api/v3",v1:"https://testnet.binance.vision/api/v1"},api:{wapi:"https://api.binance.com/wapi/v3",sapi:"https://api.binance.com/sapi/v1",dapiPublic:"https://dapi.binance.com/dapi/v1",dapiPrivate:"https://dapi.binance.com/dapi/v1",dapiData:"https://dapi.binance.com/futures/data",fapiPublic:"https://fapi.binance.com/fapi/v1",fapiPrivate:"https://fapi.binance.com/fapi/v1",fapiData:"https://fapi.binance.com/futures/data",fapiPrivateV2:"https://fapi.binance.com/fapi/v2",public:"https://api.binance.com/api/v3",private:"https://api.binance.com/api/v3",v3:"https://api.binance.com/api/v3",v1:"https://api.binance.com/api/v1"},www:"https://www.binance.com",referral:"https://www.binance.com/?ref=10205187",doc:["https://binance-docs.github.io/apidocs/spot/en"],api_management:"https://www.binance.com/en/usercenter/settings/api-management",fees:"https://www.binance.com/en/fee/schedule"},api:{sapi:{get:["accountSnapshot","margin/asset","margin/pair","margin/allAssets","margin/allPairs","margin/priceIndex","asset/assetDividend","asset/transfer","asset/assetDetail","asset/tradeFee","margin/loan","margin/repay","margin/account","margin/transfer","margin/interestHistory","margin/forceLiquidationRec","margin/order","margin/openOrders","margin/allOrders","margin/myTrades","margin/maxBorrowable","margin/maxTransferable","margin/isolated/transfer","margin/isolated/account","margin/isolated/pair","margin/isolated/allPairs","fiatpayment/query/deposit/history","fiatpayment/query/withdraw/history","futures/transfer","futures/loan/borrow/history","futures/loan/repay/history","futures/loan/wallet","futures/loan/configs","futures/loan/calcAdjustLevel","futures/loan/calcMaxAdjustAmount","futures/loan/adjustCollateral/history","futures/loan/liquidationHistory","capital/config/getall","capital/deposit/address","capital/deposit/hisrec","capital/deposit/subAddress","capital/deposit/subHisrec","capital/withdraw/history","sub-account/futures/account","sub-account/futures/accountSummary","sub-account/futures/positionRisk","sub-account/futures/internalTransfer","sub-account/margin/account","sub-account/margin/accountSummary","sub-account/spotSummary","sub-account/status","sub-account/transfer/subUserHistory","sub-account/universalTransfer","lending/daily/product/list","lending/daily/userLeftQuota","lending/daily/userRedemptionQuota","lending/daily/token/position","lending/union/account","lending/union/purchaseRecord","lending/union/redemptionRecord","lending/union/interestHistory","lending/project/list","lending/project/position/list","mining/pub/algoList","mining/pub/coinList","mining/worker/detail","mining/worker/list","mining/payment/list","mining/statistics/user/status","mining/statistics/user/list","bswap/pools","bswap/liquidity","bswap/liquidityOps","bswap/quote","bswap/swap","blvt/tokenInfo","blvt/subscribe/record","blvt/redeem/record","blvt/userLimit","apiReferral/ifNewUser","apiReferral/customization","apiReferral/userCustomization","apiReferral/rebate/recentRecord","apiReferral/rebate/historicalRecord","apiReferral/kickback/recentRecord","apiReferral/kickback/historicalRecord","broker/subAccountApi","broker/subAccount","broker/subAccountApi/commission/futures","broker/subAccountApi/commission/coinFutures","broker/info","broker/transfer","broker/transfer/futures","broker/rebate/recentRecord","broker/rebate/historicalRecord","broker/subAccount/bnbBurn/status","broker/subAccount/depositHist","broker/subAccount/spotSummary","broker/subAccount/marginSummary","broker/subAccount/futuresSummary","broker/rebate/futures/recentRecord","broker/subAccountApi/ipRestriction","broker/universalTransfer"],post:["asset/dust","asset/transfer","account/disableFastWithdrawSwitch","account/enableFastWithdrawSwitch","capital/withdraw/apply","margin/transfer","margin/loan","margin/repay","margin/order","margin/isolated/create","margin/isolated/transfer","sub-account/margin/transfer","sub-account/margin/enable","sub-account/margin/enable","sub-account/futures/enable","sub-account/futures/transfer","sub-account/futures/internalTransfer","sub-account/transfer/subToSub","sub-account/transfer/subToMaster","sub-account/universalTransfer","userDataStream","userDataStream/isolated","futures/transfer","futures/loan/borrow","futures/loan/repay","futures/loan/adjustCollateral","lending/customizedFixed/purchase","lending/daily/purchase","lending/daily/redeem","bswap/liquidityAdd","bswap/liquidityRemove","bswap/swap","blvt/subscribe","blvt/redeem","apiReferral/customization","apiReferral/userCustomization","apiReferral/rebate/historicalRecord","apiReferral/kickback/historicalRecord","broker/subAccount","broker/subAccount/margin","broker/subAccount/futures","broker/subAccountApi","broker/subAccountApi/permission","broker/subAccountApi/commission","broker/subAccountApi/commission/futures","broker/subAccountApi/commission/coinFutures","broker/transfer","broker/transfer/futures","broker/rebate/historicalRecord","broker/subAccount/bnbBurn/spot","broker/subAccount/bnbBurn/marginInterest","broker/subAccount/blvt","broker/subAccountApi/ipRestriction","broker/subAccountApi/ipRestriction/ipList","broker/universalTransfer","broker/subAccountApi/permission/universalTransfer","broker/subAccountApi/permission/vanillaOptions"],put:["userDataStream","userDataStream/isolated"],delete:["margin/openOrders","margin/order","userDataStream","userDataStream/isolated","broker/subAccountApi","broker/subAccountApi/ipRestriction/ipList"]},wapi:{post:["withdraw","sub-account/transfer"],get:["depositHistory","withdrawHistory","depositAddress","accountStatus","systemStatus","apiTradingStatus","userAssetDribbletLog","tradeFee","assetDetail","sub-account/list","sub-account/transfer/history","sub-account/assets"]},dapiPublic:{get:["ping","time","exchangeInfo","depth","trades","historicalTrades","aggTrades","premiumIndex","fundingRate","klines","continuousKlines","indexPriceKlines","markPriceKlines","ticker/24hr","ticker/price","ticker/bookTicker","allForceOrders","openInterest"]},dapiData:{get:["openInterestHist","topLongShortAccountRatio","topLongShortPositionRatio","globalLongShortAccountRatio","takerBuySellVol","basis"]},dapiPrivate:{get:["positionSide/dual","order","openOrder","openOrders","allOrders","balance","account","positionMargin/history","positionRisk","userTrades","income","leverageBracket","forceOrders","adlQuantile"],post:["positionSide/dual","order","batchOrders","countdownCancelAll","leverage","marginType","positionMargin","listenKey"],put:["listenKey"],delete:["order","allOpenOrders","batchOrders","listenKey"]},fapiPublic:{get:["ping","time","exchangeInfo","depth","trades","historicalTrades","aggTrades","klines","continuousKlines","fundingRate","premiumIndex","ticker/24hr","ticker/price","ticker/bookTicker","allForceOrders","openInterest","indexInfo"]},fapiData:{get:["openInterestHist","topLongShortAccountRatio","topLongShortPositionRatio","globalLongShortAccountRatio","takerlongshortRatio"]},fapiPrivate:{get:["allForceOrders","allOrders","openOrder","openOrders","order","account","balance","leverageBracket","positionMargin/history","positionRisk","positionSide/dual","userTrades","income","commissionRate","apiTradingStatus","apiReferral/ifNewUser","apiReferral/customization","apiReferral/userCustomization","apiReferral/traderNum","apiReferral/overview","apiReferral/tradeVol","apiReferral/rebateVol","apiReferral/traderSummary"],post:["batchOrders","positionSide/dual","positionMargin","marginType","order","leverage","listenKey","countdownCancelAll","apiReferral/customization","apiReferral/userCustomization"],put:["listenKey"],delete:["batchOrders","order","allOpenOrders","listenKey"]},fapiPrivateV2:{get:["account","balance","positionRisk"]},v3:{get:["ticker/price","ticker/bookTicker"]},public:{get:["ping","time","depth","trades","aggTrades","historicalTrades","klines","ticker/24hr","ticker/price","ticker/bookTicker","exchangeInfo"],put:["userDataStream"],post:["userDataStream"],delete:["userDataStream"]},private:{get:["allOrderList","openOrderList","orderList","order","openOrders","allOrders","account","myTrades"],post:["order/oco","order","order/test"],delete:["openOrders","orderList","order"]}},fees:{trading:{feeSide:"get",tierBased:!1,percentage:!0,taker:.001,maker:.001}},commonCurrencies:{BCC:"BCC",YOYO:"YOYOW"},options:{fetchCurrencies:!1,defaultTimeInForce:"GTC",defaultType:"spot",hasAlreadyAuthenticatedSuccessfully:!1,warnOnFetchOpenOrdersWithoutSymbol:!0,recvWindow:5e3,timeDifference:0,adjustForTimeDifference:!1,parseOrderToPrecision:!1,newOrderRespType:{market:"FULL",limit:"FULL"},quoteOrderQty:!0,broker:{spot:"x-R4BD3S82",margin:"x-R4BD3S82",future:"x-xcKtGhcu",delivery:"x-xcKtGhcu"},fetchPositions:{future:"fapiPrivateV2GetAccount",delivery:"dapiPrivateGetAccount"},accountsByType:{main:"MAIN",spot:"MAIN",margin:"MARGIN",future:"UMFUTURE",delivery:"CMFUTURE",mining:"MINING"},typesByAccount:{MAIN:"spot",MARGIN:"margin",UMFUTURE:"future",CMFUTURE:"delivery",MINING:"mining"}},exceptions:{"System abnormality":f,"You are not authorized to execute this request.":_,"API key does not exist":k,"Order would trigger immediately.":I,"Stop price would trigger immediately.":I,"Order would immediately match and take.":I,"Account has insufficient balance for requested action.":m,"Rest API trading is not enabled.":v,"You don't have permission.":_,"Market is closed.":v,"Too many requests.":b,"-1000":v,"-1001":v,"-1002":k,"-1003":w,"-1013":y,"-1015":w,"-1016":v,"-1020":O,"-1021":x,"-1022":k,"-1100":O,"-1101":O,"-1102":O,"-1103":O,"-1104":O,"-1105":O,"-1106":O,"-1111":O,"-1112":y,"-1114":O,"-1115":O,"-1116":O,"-1117":O,"-1118":O,"-1119":O,"-1120":O,"-1121":T,"-1125":k,"-1127":O,"-1128":O,"-1130":O,"-1131":O,"-2010":f,"-2011":g,"-2013":g,"-2014":k,"-2015":k,"-2019":m,"-3005":m,"-3008":m,"-3010":f,"-3022":C,"-4028":O,"-3020":m,"-3041":m,"-5013":m}})}},{key:"currencyToPrecision",value:function(e,t){return this.numberToString(t)}},{key:"nonce",value:function(){return this.milliseconds()-this.options.timeDifference}},{key:"fetchTime",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:{},r=this.safeString2(this.options,"fetchTime","defaultType","spot"),n="publicGetTime","future"===r?n="fapiPublicGetTime":"delivery"===r&&(n="dapiPublicGetTime"),e.next=6,this[n](t);case 6:return a=e.sent,e.abrupt("return",this.safeInteger(a,"serverTime"));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadTimeDifference",value:function(){var e=n(i.mark((function e(){var t,r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},e.next=3,this.fetchTime(t);case 3:return r=e.sent,n=this.milliseconds(),this.options.timeDifference=n-r,e.abrupt("return",this.options.timeDifference);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchCurrencies",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p,v,m,g,y,b,x,k,w,_,S=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=S.length>0&&void 0!==S[0]?S[0]:{},this.safeValue(this.options,"fetchCurrencies")){e.next=4;break}return e.abrupt("return",void 0);case 4:if(this.checkRequiredCredentials(!1)){e.next=6;break}return e.abrupt("return",void 0);case 6:if(void 0===this.safeString(this.urls,"apiBackup")){e.next=9;break}return e.abrupt("return",void 0);case 9:return e.next=11,this.sapiGetCapitalConfigGetall(t);case 11:for(r=e.sent,n={},a=0;a<r.length;a++){for(s=r[a],o=this.safeString(s,"coin"),u=this.safeString(s,"name"),c=this.safeCurrencyCode(o),d=void 0,h=!0,l=!0,f=this.safeValue(s,"networkList",[]),p={},v=void 0,m=0;m<f.length;m++)g=f[m],y=this.safeString(g,"network"),b=this.safeNumber(g,"withdrawFee"),x=this.safeValue(g,"depositEnable"),k=this.safeValue(g,"withdrawEnable"),l=l||x,h=h||k,p[y]=b,(this.safeValue(g,"isDefault")||void 0===v)&&(v=b);w=this.safeValue(s,"trading"),_=h&&l&&w,n[c]={id:o,name:u,code:c,precision:d,info:s,active:_,fee:v,fees:p,limits:this.limits}}return e.abrupt("return",n);case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,p,v,m,g,y,b,x,k,w,_,S,O,T,C,I,M,A,E,N,P,D,L,B=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=B.length>0&&void 0!==B[0]?B[0]:{},r=this.safeString2(this.options,"fetchMarkets","defaultType","spot"),n=this.safeString(t,"type",r),a=this.omit(t,"type"),"spot"===n||"future"===n||"margin"===n||"delivery"===n){e.next=6;break}throw new f(this.id+" does not support '"+n+"' type, set exchange.options['defaultType'] to 'spot', 'margin', 'delivery' or 'future'");case 6:return s="publicGetExchangeInfo","future"===n?s="fapiPublicGetExchangeInfo":"delivery"===n&&(s="dapiPublicGetExchangeInfo"),e.next=10,this[s](a);case 10:if(o=e.sent,!this.options.adjustForTimeDifference){e.next=14;break}return e.next=14,this.loadTimeDifference();case 14:for(u=this.safeValue(o,"symbols",[]),c=[],d=0;d<u.length;d++)h=u[d],l="spot"===n,p="future"===n,v="delivery"===n,m=this.safeString(h,"symbol"),g=this.safeStringLower(h,"symbol"),y=this.safeString(h,"baseAsset"),b=this.safeString(h,"quoteAsset"),x=this.safeCurrencyCode(y),k=this.safeCurrencyCode(b),w=this.safeString(h,"contractType"),_=(p||v)&&"PERPETUAL"!==w?m:x+"/"+k,S=this.safeValue(h,"filters",[]),O=this.indexBy(S,"filterType"),T={base:this.safeInteger(h,"baseAssetPrecision"),quote:this.safeInteger(h,"quotePrecision"),amount:this.safeInteger(h,"baseAssetPrecision"),price:this.safeInteger(h,"quotePrecision")},C=this.safeString2(h,"status","contractStatus"),I="TRADING"===C,M=this.safeValue(h,"isMarginTradingAllowed",p||v),A={id:m,lowercaseId:g,symbol:_,base:x,quote:k,baseId:y,quoteId:b,info:h,type:n,spot:l,margin:M,future:p,delivery:v,active:I,precision:T,limits:{amount:{min:Math.pow(10,-T.amount),max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0}}},"PRICE_FILTER"in O&&(E=this.safeValue(O,"PRICE_FILTER",{}),A.limits.price={min:this.safeNumber(E,"minPrice"),max:this.safeNumber(E,"maxPrice")},A.precision.price=this.precisionFromString(E.tickSize)),"LOT_SIZE"in O&&(N=this.safeValue(O,"LOT_SIZE",{}),P=this.safeString(N,"stepSize"),A.precision.amount=this.precisionFromString(P),A.limits.amount={min:this.safeNumber(N,"minQty"),max:this.safeNumber(N,"maxQty")}),"MARKET_LOT_SIZE"in O&&(D=this.safeValue(O,"MARKET_LOT_SIZE",{}),A.limits.market={min:this.safeNumber(D,"minQty"),max:this.safeNumber(D,"maxQty")}),"MIN_NOTIONAL"in O&&(L=this.safeValue(O,"MIN_NOTIONAL",{}),A.limits.cost.min=this.safeNumber2(L,"minNotional","notional")),c.push(A);return e.abrupt("return",c);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p,v,m,g,y,b,x,k,w,_,S,O=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=O.length>0&&void 0!==O[0]?O[0]:{},e.next=3,this.loadMarkets();case 3:return r=this.safeString2(this.options,"fetchBalance","defaultType","spot"),n=this.safeString(t,"type",r),a="privateGetAccount","future"===n?(s=this.safeValue(this.options,"future",{}),o=this.safeValue(s,"fetchBalance",{}),a=this.safeString(o,"method","fapiPrivateV2GetAccount")):"delivery"===n?(u=this.safeValue(this.options,"delivery",{}),c=this.safeValue(u,"fetchBalance",{}),a=this.safeString(c,"method","dapiPrivateGetAccount")):"margin"===n&&(a="sapiGetMarginAccount"),d=this.omit(t,"type"),e.next=10,this[a](d);case 10:if(h=e.sent,l={info:h},"spot"===n||"margin"===n)for(f=this.safeValue2(h,"balances","userAssets",[]),p=0;p<f.length;p++)v=f[p],m=this.safeString(v,"asset"),g=this.safeCurrencyCode(m),(y=this.account()).free=this.safeString(v,"free"),y.used=this.safeString(v,"locked"),l[g]=y;else for(b=h,Array.isArray(h)||(b=this.safeValue(h,"assets",[])),x=0;x<b.length;x++)k=b[x],w=this.safeString(k,"asset"),_=this.safeCurrencyCode(w),(S=this.account()).free=this.safeString(k,"availableBalance"),S.used=this.safeString(k,"initialMargin"),S.total=this.safeString2(k,"marginBalance","balance"),l[_]=S;return e.abrupt("return",this.parseBalance(l,!1));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:{},e.next=4,this.loadMarkets();case 4:return a=this.market(t),s={symbol:a.id},void 0!==r&&(s.limit=r),o="publicGetDepth",a.future?o="fapiPublicGetDepth":a.delivery&&(o="dapiPublicGetDepth"),e.next=11,this[o](this.extend(s,n));case 11:return u=e.sent,c=this.safeInteger(u,"T"),(d=this.parseOrderBook(u,c)).nonce=this.safeInteger(u,"lastUpdateId"),e.abrupt("return",d);case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeInteger(e,"closeTime"),i=this.safeString(e,"symbol"),n=this.safeSymbol(i,t),a=this.safeNumber(e,"lastPrice");return{symbol:n,timestamp:r,datetime:this.iso8601(r),high:this.safeNumber(e,"highPrice"),low:this.safeNumber(e,"lowPrice"),bid:this.safeNumber(e,"bidPrice"),bidVolume:this.safeNumber(e,"bidQty"),ask:this.safeNumber(e,"askPrice"),askVolume:this.safeNumber(e,"askQty"),vwap:this.safeNumber(e,"weightedAvgPrice"),open:this.safeNumber(e,"openPrice"),close:a,last:a,previousClose:this.safeNumber(e,"prevClosePrice"),change:this.safeNumber(e,"priceChange"),percentage:this.safeNumber(e,"priceChangePercent"),average:void 0,baseVolume:this.safeNumber(e,"volume"),quoteVolume:this.safeNumber(e,"quoteVolume"),info:e}}},{key:"fetchStatus",value:function(){var e=n(i.mark((function e(){var t,r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},e.next=3,this.wapiGetSystemStatus(t);case 3:return r=e.sent,void 0!==(n=this.safeString(r,"status"))&&(n="0"===n?"ok":"maintenance",this.status=this.extend(this.status,{status:n,updated:this.milliseconds()})),e.abrupt("return",this.status);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={symbol:n.id},s="publicGetTicker24hr",n.future?s="fapiPublicGetTicker24hr":n.delivery&&(s="dapiPublicGetTicker24hr"),e.next=9,this[s](this.extend(a,r));case 9:if(o=e.sent,!Array.isArray(o)){e.next=13;break}return u=this.safeValue(o,0,{}),e.abrupt("return",this.parseTicker(u,n));case 13:return e.abrupt("return",this.parseTicker(o,n));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchBidsAsks",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:void 0,r=c.length>1&&void 0!==c[1]?c[1]:{},e.next=4,this.loadMarkets();case 4:return n=this.safeString2(this.options,"fetchBidsAsks","defaultType","spot"),a=this.safeString(r,"type",n),s=this.omit(r,"type"),o=void 0,o="future"===a?"fapiPublicGetTickerBookTicker":"delivery"===a?"dapiPublicGetTickerBookTicker":"publicGetTickerBookTicker",e.next=11,this[o](s);case 11:return u=e.sent,e.abrupt("return",this.parseTickers(u,t));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:{},e.next=4,this.loadMarkets();case 4:return n=this.safeString2(this.options,"fetchTickers","defaultType","spot"),a=this.safeString(r,"type",n),s=this.omit(r,"type"),o=void 0,o="future"===a?"fapiPublicGetTicker24hr":"delivery"===a?"dapiPublicGetTicker24hr":"publicGetTicker24hr",u=this.safeString(this.options,"fetchTickersMethod",o),e.next=12,this[u](s);case 12:return c=e.sent,e.abrupt("return",this.parseTickers(c,t));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){return[this.safeInteger(e,0),this.safeNumber(e,1),this.safeNumber(e,2),this.safeNumber(e,3),this.safeNumber(e,4),this.safeNumber(e,5)]}},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d,h,l,f,p,v,m=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=m.length>1&&void 0!==m[1]?m[1]:"1m",n=m.length>2&&void 0!==m[2]?m[2]:void 0,a=m.length>3&&void 0!==m[3]?m[3]:void 0,s=m.length>4&&void 0!==m[4]?m[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),u=500,c=1500,a=void 0===a?u:Math.min(a,c),d={symbol:o.id,interval:this.timeframes[r],limit:a},h=this.parseTimeframe(r),void 0!==n&&(d.startTime=n,n>0&&(l=this.sum(n,a*h*1e3-1),f=this.milliseconds(),d.endTime=Math.min(f,l))),p="publicGetKlines",o.future?p="fapiPublicGetKlines":o.delivery&&(p="dapiPublicGetKlines"),e.next=17,this[p](this.extend(d,s));case 17:return v=e.sent,e.abrupt("return",this.parseOHLCVs(v,o,r,n,a));case 19:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;if("isDustTrade"in e)return this.parseDustTrade(e,t);var r=this.safeInteger2(e,"T","time"),i=this.safeString2(e,"p","price"),n=this.safeString2(e,"q","qty"),a=this.parseNumber(i),s=this.parseNumber(n),o=this.parseNumber(A.stringMul(i,n)),u=this.safeString2(e,"a","id"),c=void 0,d=this.safeString(e,"orderId");"m"in e?c=e.m?"sell":"buy":"isBuyerMaker"in e?c=e.isBuyerMaker?"sell":"buy":"side"in e?c=this.safeStringLower(e,"side"):"isBuyer"in e&&(c=e.isBuyer?"buy":"sell");var h=void 0;"commission"in e&&(h={cost:this.safeNumber(e,"commission"),currency:this.safeCurrencyCode(this.safeString(e,"commissionAsset"))});var l=void 0;"isMaker"in e&&(l=e.isMaker?"maker":"taker"),"maker"in e&&(l=e.maker?"maker":"taker");var f=this.safeString(e,"symbol"),p=this.safeSymbol(f,t);return{info:e,timestamp:r,datetime:this.iso8601(r),symbol:p,id:u,order:d,type:void 0,side:c,takerOrMaker:l,price:a,amount:s,cost:o,fee:h}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=p.length>1&&void 0!==p[1]?p[1]:void 0,n=p.length>2&&void 0!==p[2]?p[2]:void 0,a=p.length>3&&void 0!==p[3]?p[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={symbol:s.id},u=this.safeString2(this.options,"fetchTrades","defaultType","spot"),c=this.safeString(a,"type",u),d=this.omit(a,"type"),h=void 0,h="future"===c?"fapiPublicGetAggTrades":"delivery"===c?"dapiPublicGetAggTrades":"publicGetAggTrades","publicGetAggTrades"===(l=this.safeString(this.options,"fetchTradesMethod",h))?(void 0!==r&&(o.startTime=r,o.endTime=this.sum(r,36e5)),"future"===c?l="fapiPublicGetAggTrades":"delivery"===c&&(l="dapiPublicGetAggTrades")):"publicGetHistoricalTrades"===l&&("future"===c?l="fapiPublicGetHistoricalTrades":"delivery"===c&&(l="dapiPublicGetHistoricalTrades")),void 0!==n&&(o.limit=n),e.next=17,this[l](this.extend(o,d));case 17:return f=e.sent,e.abrupt("return",this.parseTrades(f,s,r,n));case 19:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({NEW:"open",PARTIALLY_FILLED:"open",FILLED:"closed",CANCELED:"canceled",PENDING_CANCEL:"canceling",REJECTED:"rejected",EXPIRED:"expired"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.parseOrderStatus(this.safeString(e,"status")),i=this.safeString(e,"symbol"),n=this.safeSymbol(i,t),a=void 0;"time"in e?a=this.safeInteger(e,"time"):"transactTime"in e&&(a=this.safeInteger(e,"transactTime"));var s=this.safeNumber(e,"price"),o=this.safeNumber(e,"origQty"),u=this.safeNumber(e,"executedQty"),c=this.safeNumber2(e,"cummulativeQuoteQty","cumQuote"),d=this.safeString(e,"orderId"),h=this.safeStringLower(e,"type");"limit_maker"===h&&(h="limit");var l=this.safeStringLower(e,"side"),f=this.safeValue(e,"fills",[]),p=this.parseTrades(f,t),v=this.safeString(e,"clientOrderId"),m=this.safeString(e,"timeInForce"),g="limit_maker"===h||"GTX"===m,y=this.safeNumber(e,"stopPrice");return this.safeOrder({info:e,id:d,clientOrderId:v,timestamp:a,datetime:this.iso8601(a),lastTradeTimestamp:void 0,symbol:n,type:h,timeInForce:m,postOnly:g,side:l,price:s,stopPrice:y,amount:o,cost:c,average:void 0,filled:u,remaining:void 0,status:r,fee:void 0,trades:p})}},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,u,c,d,h,l,f,p,v,m,g,b,x,k,w,_,S,O,T,C=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=C.length>4&&void 0!==C[4]?C[4]:void 0,o=C.length>5&&void 0!==C[5]?C[5]:{},e.next=4,this.loadMarkets();case 4:if(u=this.market(t),c=this.safeString2(this.options,"createOrder","defaultType",u.type),d=this.safeString(o,"type",c),h=this.safeString2(o,"newClientOrderId","clientOrderId"),o=this.omit(o,["type","newClientOrderId","clientOrderId"]),l="privatePostOrder","future"===d?l="fapiPrivatePostOrder":"delivery"===d?l="dapiPrivatePostOrder":"margin"===d&&(l="sapiPostMarginOrder"),u.spot&&(this.safeValue(o,"test",!1)&&(l+="Test"),o=this.omit(o,"test")),f=r.toUpperCase(),p=this.safeValue(u.info,"orderTypes"),this.inArray(f,p)){e.next=16;break}throw new y(this.id+" "+r+" is not a valid order type in "+u.type+" market "+t);case 16:if(v={symbol:u.id,type:f,side:n.toUpperCase()},void 0===h?(m=this.safeValue(this.options,"broker"))&&void 0!==(g=this.safeString(m,d))&&(v.newClientOrderId=g+this.uuid22()):v.newClientOrderId=h,v.newOrderRespType="spot"===d||"margin"===d?this.safeValue(this.options.newOrderRespType,r,"RESULT"):"RESULT",b=!1,x=!1,k=!1,w=!1,"MARKET"!==f){e.next=28;break}this.safeValue(this.options,"quoteOrderQty",!1)?(_=this.safeNumber(o,"quoteOrderQty"),S=u.precision.price,void 0!==_?(v.quoteOrderQty=this.decimalToPrecision(_,M,S,this.precisionMode),o=this.omit(o,"quoteOrderQty")):void 0!==s?v.quoteOrderQty=this.decimalToPrecision(a*s,M,S,this.precisionMode):w=!0):w=!0,e.next=69;break;case 28:if("LIMIT"!==f){e.next=34;break}x=!0,b=!0,w=!0,e.next=69;break;case 34:if("STOP_LOSS"!==f&&"TAKE_PROFIT"!==f){e.next=40;break}k=!0,w=!0,(u.future||u.delivery)&&(x=!0),e.next=69;break;case 40:if("STOP_LOSS_LIMIT"!==f&&"TAKE_PROFIT_LIMIT"!==f){e.next=47;break}w=!0,k=!0,x=!0,b=!0,e.next=69;break;case 47:if("LIMIT_MAKER"!==f){e.next=52;break}x=!0,w=!0,e.next=69;break;case 52:if("STOP"!==f){e.next=58;break}w=!0,k=!0,x=!0,e.next=69;break;case 58:if("STOP_MARKET"!==f&&"TAKE_PROFIT_MARKET"!==f){e.next=64;break}void 0===this.safeValue(o,"closePosition")&&(w=!0),k=!0,e.next=69;break;case 64:if("TRAILING_STOP_MARKET"!==f){e.next=69;break}if(w=!0,void 0!==this.safeNumber(o,"callbackRate")){e.next=69;break}throw new y(this.id+" createOrder() requires a callbackRate extra param for a "+r+" order");case 69:if(w&&(v.quantity=this.amountToPrecision(t,a)),!x){e.next=74;break}if(void 0!==s){e.next=73;break}throw new y(this.id+" createOrder() requires a price argument for a "+r+" order");case 73:v.price=this.priceToPrecision(t,s);case 74:if(b&&(v.timeInForce=this.options.defaultTimeInForce),!k){e.next=83;break}if(void 0!==(O=this.safeNumber(o,"stopPrice"))){e.next=81;break}throw new y(this.id+" createOrder() requires a stopPrice extra param for a "+r+" order");case 81:o=this.omit(o,"stopPrice"),v.stopPrice=this.priceToPrecision(t,O);case 83:return e.next=85,this[l](this.extend(v,o));case 85:return T=e.sent,e.abrupt("return",this.parseOrder(T,u));case 87:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=f.length>1&&void 0!==f[1]?f[1]:void 0,n=f.length>2&&void 0!==f[2]?f[2]:{},void 0!==r){e.next=4;break}throw new p(this.id+" fetchOrder() requires a symbol argument");case 4:return e.next=6,this.loadMarkets();case 6:return a=this.market(r),s=this.safeString2(this.options,"fetchOrder","defaultType",a.type),o=this.safeString(n,"type",s),u="privateGetOrder","future"===o?u="fapiPrivateGetOrder":"delivery"===o?u="dapiPrivateGetOrder":"margin"===o&&(u="sapiGetMarginOrder"),c={symbol:a.id},void 0!==(d=this.safeValue2(n,"origClientOrderId","clientOrderId"))?c.origClientOrderId=d:c.orderId=t,h=this.omit(n,["type","clientOrderId","origClientOrderId"]),e.next=17,this[u](this.extend(c,h));case 17:return l=e.sent,e.abrupt("return",this.parseOrder(l,a));case 19:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.length>0&&void 0!==f[0]?f[0]:void 0,r=f.length>1&&void 0!==f[1]?f[1]:void 0,n=f.length>2&&void 0!==f[2]?f[2]:void 0,a=f.length>3&&void 0!==f[3]?f[3]:{},void 0!==t){e.next=6;break}throw new p(this.id+" fetchOrders() requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.market(t),o=this.safeString2(this.options,"fetchOrders","defaultType",s.type),u=this.safeString(a,"type",o),c="privateGetAllOrders","future"===u?c="fapiPrivateGetAllOrders":"delivery"===u?c="dapiPrivateGetAllOrders":"margin"===u&&(c="sapiGetMarginAllOrders"),d={symbol:s.id},void 0!==r&&(d.startTime=r),void 0!==n&&(d.limit=n),h=this.omit(a,"type"),e.next=19,this[c](this.extend(d,h));case 19:return l=e.sent,e.abrupt("return",this.parseOrders(l,s,r,n));case 21:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,p,v,m,g,y=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=y.length>0&&void 0!==y[0]?y[0]:void 0,r=y.length>1&&void 0!==y[1]?y[1]:void 0,n=y.length>2&&void 0!==y[2]?y[2]:void 0,a=y.length>3&&void 0!==y[3]?y[3]:{},e.next=6,this.loadMarkets();case 6:if(s=void 0,o=void 0,u=void 0,c={},void 0===t){e.next=18;break}s=this.market(t),c.symbol=s.id,d=this.safeString2(this.options,"fetchOpenOrders","defaultType",s.type),u=this.safeString(a,"type",d),o=this.omit(a,"type"),e.next=28;break;case 18:if(!this.options.warnOnFetchOpenOrdersWithoutSymbol){e.next=25;break}throw h=this.symbols,l=h.length,p=parseInt(l/2),new f(this.id+" fetchOpenOrders WARNING: fetching open orders without specifying a symbol is rate-limited to one call per "+p.toString()+" seconds. Do not call this method frequently to avoid ban. Set "+this.id+'.options["warnOnFetchOpenOrdersWithoutSymbol"] = false to suppress this warning message.');case 25:v=this.safeString2(this.options,"fetchOpenOrders","defaultType","spot"),u=this.safeString(a,"type",v),o=this.omit(a,"type");case 28:return m="privateGetOpenOrders","future"===u?m="fapiPrivateGetOpenOrders":"delivery"===u?m="dapiPrivateGetOpenOrders":"margin"===u&&(m="sapiGetMarginOpenOrders"),e.next=32,this[m](this.extend(c,o));case 32:return g=e.sent,e.abrupt("return",this.parseOrders(g,s,r,n));case 34:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:void 0,a=o.length>3&&void 0!==o[3]?o[3]:{},e.next=6,this.fetchOrders(t,r,n,a);case 6:return s=e.sent,e.abrupt("return",this.filterBy(s,"status","closed"));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=f.length>1&&void 0!==f[1]?f[1]:void 0,n=f.length>2&&void 0!==f[2]?f[2]:{},void 0!==r){e.next=4;break}throw new p(this.id+" cancelOrder() requires a symbol argument");case 4:return e.next=6,this.loadMarkets();case 6:return a=this.market(r),s=this.safeString2(this.options,"fetchOpenOrders","defaultType",a.type),o=this.safeString(n,"type",s),u=this.safeValue2(n,"origClientOrderId","clientOrderId"),c={symbol:a.id},void 0===u?c.orderId=t:c.origClientOrderId=u,d="privateDeleteOrder","future"===o?d="fapiPrivateDeleteOrder":"delivery"===o?d="dapiPrivateDeleteOrder":"margin"===o&&(d="sapiDeleteMarginOrder"),h=this.omit(n,["type","origClientOrderId","clientOrderId"]),e.next=17,this[d](this.extend(c,h));case 17:return l=e.sent,e.abrupt("return",this.parseOrder(l));case 19:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cancelAllOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:{},void 0!==t){e.next=4;break}throw new p(this.id+" cancelAllOrders() requires a symbol argument");case 4:return e.next=6,this.loadMarkets();case 6:return n=this.market(t),a={symbol:n.id},s=this.safeString2(this.options,"cancelAllOrders","defaultType","spot"),o=this.safeString(r,"type",s),u=this.omit(r,"type"),c="privateDeleteOpenOrders","margin"===o?c="sapiDeleteMarginOpenOrders":"future"===o?c="fapiPrivateDeleteAllOpenOrders":"delivery"===o&&(c="dapiPrivateDeleteAllOpenOrders"),e.next=15,this[c](this.extend(a,u));case 15:if(d=e.sent,!Array.isArray(d)){e.next=20;break}return e.abrupt("return",this.parseOrders(d,n));case 20:return e.abrupt("return",d);case 21:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchPositions",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.length>0&&void 0!==c[0]?c[0]:void 0,t=c.length>1&&void 0!==c[1]?c[1]:{},e.next=4,this.loadMarkets();case 4:return r=this.safeString(this.options,"defaultType","future"),n=this.safeString(t,"type",r),t=this.omit(t,"type"),a=this.safeValue(this.options,"fetchPositions",{}),s="delivery"===n?"dapiPrivateGetAccount":"fapiPrivateV2GetAccount",o=this.safeString(a,n,s),e.next=12,this[o](t);case 12:return u=e.sent,e.abrupt("return",this.safeValue(u,"positions",u));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=l.length>0&&void 0!==l[0]?l[0]:void 0,r=l.length>1&&void 0!==l[1]?l[1]:void 0,n=l.length>2&&void 0!==l[2]?l[2]:void 0,a=l.length>3&&void 0!==l[3]?l[3]:{},void 0!==t){e.next=6;break}throw new p(this.id+" fetchMyTrades() requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.market(t),o=this.safeString2(this.options,"fetchMyTrades","defaultType",s.type),u=this.safeString(a,"type",o),a=this.omit(a,"type"),c=void 0,"spot"===u?c="privateGetMyTrades":"margin"===u?c="sapiGetMarginMyTrades":"future"===u?c="fapiPrivateGetUserTrades":"delivery"===u&&(c="dapiPrivateGetUserTrades"),d={symbol:s.id},void 0!==r&&(d.startTime=r),void 0!==n&&(d.limit=n),e.next=19,this[c](this.extend(d,a));case 19:return h=e.sent,e.abrupt("return",this.parseTrades(h,s,r,n));case 21:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMyDustTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f.length>0&&void 0!==f[0]?f[0]:void 0,t=f.length>1&&void 0!==f[1]?f[1]:void 0,r=f.length>2&&void 0!==f[2]?f[2]:void 0,n=f.length>3&&void 0!==f[3]?f[3]:{},e.next=6,this.loadMarkets();case 6:return e.next=8,this.wapiGetUserAssetDribbletLog(n);case 8:for(a=e.sent,s=this.safeValue(a,"results",{}),o=this.safeValue(s,"rows",[]),u=[],c=0;c<o.length;c++)for(d=o[c].logs,h=0;h<d.length;h++)d[h].isDustTrade=!0,u.push(d[h]);return l=this.parseTrades(u,void 0,t,r),e.abrupt("return",this.filterBySinceLimit(l,t,r));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseDustTrade",value:function(e){var t=this.safeString(e,"tranId"),r=this.parse8601(this.safeString(e,"operateTime")),i=this.safeCurrencyCode(this.safeString(e,"fromAsset")),n=this.currency("BNB").code,a=n+"/"+i,s=!1;a in this.markets&&(s=!0);var o={currency:n,cost:this.safeNumber(e,"serviceChargeAmount")},u=void 0,c=void 0,d=void 0,h=void 0;s?(u=a,c=this.sum(this.safeNumber(e,"transferedAmount"),o.cost),d=this.safeNumber(e,"amount"),h="buy"):(u=i+"/"+n,c=this.safeNumber(e,"amount"),d=this.sum(this.safeNumber(e,"transferedAmount"),o.cost),h="sell");var l=void 0;void 0!==d&&c&&(l=d/c);var f=void 0,p=void 0,v=void 0;return{id:f,timestamp:r,datetime:this.iso8601(r),symbol:u,order:t,type:p,takerOrMaker:v,side:h,amount:c,price:l,cost:d,fee:o,info:e}}},{key:"fetchDeposits",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:void 0,r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},e.next=6,this.loadMarkets();case 6:return s=void 0,o={},void 0!==t&&(s=this.currency(t),o.coin=s.id),void 0!==r&&(o.startTime=r,o.endTime=this.sum(r,7776e6)),void 0!==n&&(o.limit=n),e.next=13,this.sapiGetCapitalDepositHisrec(this.extend(o,a));case 13:return u=e.sent,e.abrupt("return",this.parseTransactions(u,s,r,n));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchWithdrawals",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:void 0,r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},e.next=6,this.loadMarkets();case 6:return s=void 0,o={},void 0!==t&&(s=this.currency(t),o.coin=s.id),void 0!==r&&(o.startTime=r,o.endTime=this.sum(r,7776e6)),void 0!==n&&(o.limit=n),e.next=13,this.sapiGetCapitalWithdrawHistory(this.extend(o,a));case 13:return u=e.sent,e.abrupt("return",this.parseTransactions(u,s,r,n));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTransactionStatusByType",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r={deposit:{0:"pending",1:"ok"},withdrawal:{0:"pending",1:"canceled",2:"pending",3:"failed",4:"pending",5:"failed",6:"ok"}},i=this.safeValue(r,t,{});return this.safeString(i,e,e)}},{key:"parseTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),i=this.safeString(e,"address"),n=this.safeString(e,"addressTag");void 0!==n&&n.length<1&&(n=void 0);var a=this.safeString(e,"txId");void 0!==a&&a.indexOf("Internal transfer ")>=0&&(a=a.slice(18));var s=this.safeString(e,"coin"),o=this.safeCurrencyCode(s,t),u=void 0,c=this.safeInteger(e,"insertTime"),d=this.parse8601(this.safeString(e,"applyTime")),h=this.safeString(e,"type");void 0===h&&(void 0!==c&&void 0===d?(h="deposit",u=c):void 0===c&&void 0!==d&&(h="withdrawal",u=d));var l=this.parseTransactionStatusByType(this.safeString(e,"status"),h),f=this.safeNumber(e,"amount"),p=this.safeNumber(e,"transactionFee"),v=void 0;void 0!==p&&(v={currency:o,cost:p});var m=this.safeInteger(e,"successTime"),g=this.safeInteger(e,"transferType",!1);return g=!!g,{info:e,id:r,txid:a,timestamp:u,datetime:this.iso8601(u),address:i,addressTo:i,addressFrom:void 0,tag:n,tagTo:n,tagFrom:void 0,type:h,amount:f,currency:o,status:l,updated:m,internal:g,fee:v}}},{key:"parseTransferStatus",value:function(e){return this.safeString({CONFIRMED:"ok"},e,e)}},{key:"parseTransfer",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"tranId"),i=this.safeString(e,"asset"),n=this.safeCurrencyCode(i,t),a=this.safeNumber(e,"amount"),s=this.safeString(e,"type"),o=void 0,u=void 0,c=this.safeValue(this.options,"typesByAccount",{});if(void 0!==s){var d=s.split("_");o=this.safeValue(d,0),u=this.safeValue(d,1),o=this.safeString(c,o,o),u=this.safeString(c,u,u)}var h=this.safeInteger(e,"timestamp"),l=this.parseTransferStatus(this.safeString(e,"status"));return{info:e,id:r,timestamp:h,datetime:this.iso8601(h),currency:n,amount:a,fromAccount:o,toAccount:u,status:l}}},{key:"transfer",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,u,c,d,h,l,p,v,m,g,y=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=y.length>4&&void 0!==y[4]?y[4]:{},e.next=3,this.loadMarkets();case 3:if(o=this.currency(t),void 0!==(u=this.safeString(s,"type"))){e.next=16;break}if(c=this.safeValue(this.options,"accountsByType",{}),d=this.safeString(c,n,n),h=this.safeString(c,a,a),void 0!==d){e.next=12;break}throw l=Object.keys(c),new f(this.id+" fromAccount must be one of "+l.join(", "));case 12:if(void 0!==h){e.next=15;break}throw p=Object.keys(c),new f(this.id+" toAccount must be one of "+p.join(", "));case 15:u=d+"_"+h;case 16:return v={asset:o.id,amount:this.currencyToPrecision(t,r),type:u},e.next=19,this.sapiPostAssetTransfer(this.extend(v,s));case 19:return m=e.sent,g=this.parseTransfer(m,o),e.abrupt("return",this.extend(g,{amount:r,currency:t,fromAccount:n,toAccount:a}));case 22:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"fetchTransfers",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,p,v,m,g,y,b,x,k=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=k.length>0&&void 0!==k[0]?k[0]:void 0,r=k.length>1&&void 0!==k[1]?k[1]:void 0,n=k.length>2&&void 0!==k[2]?k[2]:void 0,a=k.length>3&&void 0!==k[3]?k[3]:{},e.next=6,this.loadMarkets();case 6:if(s=this.currency(t),o=this.safeString2(this.options,"fetchTransfers","defaultType","spot"),u=this.safeString(a,"fromAccount",o),c="future"===u?"spot":"future",d=this.safeString(a,"toAccount",c),h=this.safeString(a,"type"),l=this.safeValue(this.options,"accountsByType",{}),p=this.safeString(l,u),v=this.safeString(l,d),void 0!==h){e.next=23;break}if(void 0!==p){e.next=19;break}throw m=Object.keys(l),new f(this.id+" fromAccount parameter must be one of "+m.join(", "));case 19:if(void 0!==v){e.next=22;break}throw g=Object.keys(l),new f(this.id+" toAccount parameter must be one of "+g.join(", "));case 22:h=p+"_"+v;case 23:return y={type:h},void 0!==r&&(y.startTime=r),void 0!==n&&(y.size=n),e.next=28,this.sapiGetAssetTransfer(this.extend(y,a));case 28:return b=e.sent,x=this.safeValue(b,"rows",[]),e.abrupt("return",this.parseTransfers(x,s,r,n));case 31:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchDepositAddress",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.currency(t),a={coin:n.id},e.next=7,this.sapiGetCapitalDepositAddress(this.extend(a,r));case 7:return s=e.sent,o=this.safeString(s,"address"),u=this.safeString(s,"tag"),this.checkAddress(o),e.abrupt("return",{currency:t,address:o,tag:u,info:s});case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchFundingFees",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.length>0&&void 0!==c[0]?c[0]:void 0,t=c.length>1&&void 0!==c[1]?c[1]:{},e.next=4,this.sapiGetAssetAssetDetail(t);case 4:for(r=e.sent,n=Object.keys(r),a={},s=0;s<n.length;s++)o=n[s],u=this.safeCurrencyCode(o),a[u]=this.safeNumber(r[o],"withdrawFee");return e.abrupt("return",{withdraw:a,deposit:{},info:r});case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"withdraw",value:function(){var e=n(i.mark((function e(t,r,n){var a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=d.length>3&&void 0!==d[3]?d[3]:void 0,s=d.length>4&&void 0!==d[4]?d[4]:{},this.checkAddress(n),e.next=5,this.loadMarkets();case 5:return o=this.currency(t),u={coin:o.id,address:n,amount:r},void 0!==a&&(u.addressTag=a),e.next=10,this.sapiPostCapitalWithdrawApply(this.extend(u,s));case 10:return c=e.sent,e.abrupt("return",{info:c,id:this.safeString(c,"id")});case 12:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"parseTradingFee",value:function(e){var t=this.safeString(e,"symbol"),r=this.safeSymbol(t);return{info:e,symbol:r,maker:this.safeNumber(e,"makerCommission"),taker:this.safeNumber(e,"takerCommission")}}},{key:"fetchTradingFee",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={symbol:n.id},e.next=7,this.sapiGetAssetTradeFee(this.extend(a,r));case 7:return s=e.sent,o=this.safeValue(s,"tradeFee",[]),u=this.safeValue(o,0,{}),e.abrupt("return",this.parseTradingFee(u));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTradingFees",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.sapiGetAssetTradeFee(t);case 5:for(r=e.sent,n={},a=0;a<r.length;a++)s=this.parseTradingFee(r[a]),o=s.symbol,n[o]=s;return e.abrupt("return",n);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0;if(!(t in this.urls.api))throw new S(this.id+" does not have a testnet/sandbox URL for "+t+" endpoints");var s=this.urls.api[t];if(s+="/"+e,"wapi"===t&&(s+=".html"),"historicalTrades"===e){if(!this.apiKey)throw new k(this.id+" historicalTrades endpoint requires `apiKey` credential");n={"X-MBX-APIKEY":this.apiKey}}var o="userDataStream"===e||"listenKey"===e;if(o){if(!this.apiKey)throw new k(this.id+" userDataStream endpoint requires `apiKey` credential");n={"X-MBX-APIKEY":this.apiKey,"Content-Type":"application/x-www-form-urlencoded"},"GET"!==r&&(a=this.urlencode(i))}else if("private"===t||"sapi"===t||"wapi"===t&&"systemStatus"!==e||"dapiPrivate"===t||"fapiPrivate"===t||"fapiPrivateV2"===t){this.checkRequiredCredentials();var u=void 0,c=this.safeInteger(this.options,"recvWindow",5e3);u="sapi"===t&&"asset/dust"===e?this.urlencodeWithArrayRepeat(this.extend({timestamp:this.nonce(),recvWindow:c},i)):"batchOrders"===e||e.indexOf("sub-account")>=0?this.rawencode(this.extend({timestamp:this.nonce(),recvWindow:c},i)):this.urlencode(this.extend({timestamp:this.nonce(),recvWindow:c},i));var d=this.hmac(this.encode(u),this.encode(this.secret));u+="&signature="+d,n={"X-MBX-APIKEY":this.apiKey},"GET"===r||"DELETE"===r||"wapi"===t?s+="?"+u:(a=u,n["Content-Type"]="application/x-www-form-urlencoded")}else Object.keys(i).length&&(s+="?"+this.urlencode(i));return{url:s,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,u){if(418===e||429===e)throw new b(this.id+" "+e.toString()+" "+t+" "+a);if(e>=400){if(a.indexOf("Price * QTY is zero or less")>=0)throw new y(this.id+" order cost = amount * price is zero or less "+a);if(a.indexOf("LOT_SIZE")>=0)throw new y(this.id+" order amount should be evenly divisible by lot size "+a);if(a.indexOf("PRICE_FILTER")>=0)throw new y(this.id+" order price is invalid, i.e. exceeds allowed price precision, exceeds min price or max price limits or is invalid float value in general, use this.priceToPrecision (symbol, amount) "+a)}if(void 0!==s){var c=this.safeValue(s,"success",!0);if(!c){var d=this.safeString(s,"msg"),h=void 0;if(void 0!==d){try{h=JSON.parse(d)}catch(m){h=void 0}void 0!==h&&(s=h)}}var l=this.safeString(s,"msg");void 0!==l&&this.throwExactlyMatchedException(this.exceptions,l,this.id+" "+l);var p=this.safeString(s,"code");if(void 0!==p){if("200"===p||"0"===p)return;if("-2015"===p&&this.options.hasAlreadyAuthenticatedSuccessfully)throw new b(this.id+" temporary banned: "+a);var v=this.id+" "+a;throw this.throwExactlyMatchedException(this.exceptions,p,v),new f(v)}if(!c)throw new f(this.id+" "+a)}}},{key:"request",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:"public",n=c.length>2&&void 0!==c[2]?c[2]:"GET",a=c.length>3&&void 0!==c[3]?c[3]:{},s=c.length>4&&void 0!==c[4]?c[4]:void 0,o=c.length>5&&void 0!==c[5]?c[5]:void 0,e.next=7,this.fetch2(t,r,n,a,s,o);case 7:return u=e.sent,"private"!==r&&"wapi"!==r||(this.options.hasAlreadyAuthenticatedSuccessfully=!0),e.abrupt("return",u);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(h)},function(e,t,r){"use strict";var i=r(7),n=r(8),a=r(1),s=r(2),o=r(6),u=r(3),c=r(4),d=r(5),h=r(11),l=r(10),f=l.NotSupported,p=l.RateLimitExceeded,v=l.AuthenticationError,m=l.PermissionDenied,g=l.ArgumentsRequired,y=l.ExchangeError,b=l.ExchangeNotAvailable,x=l.InsufficientFunds,k=l.InvalidOrder,w=l.OrderNotFound,_=l.InvalidNonce,S=l.BadSymbol,O=r(18),T=O.SIGNIFICANT_DIGITS,C=O.DECIMAL_PLACES,I=O.TRUNCATE,M=O.ROUND,A=r(12);e.exports=function(e){c(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(u(r.prototype),"describe",this).call(this),{id:"bitfinex",name:"Bitfinex",countries:["VG"],version:"v1",rateLimit:1500,pro:!0,has:{cancelAllOrders:!0,cancelOrder:!0,CORS:!1,createDepositAddress:!0,createOrder:!0,deposit:!0,editOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchDepositAddress:!0,fetchDeposits:!1,fetchFundingFees:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,fetchTradingFee:!0,fetchTradingFees:!0,fetchTransactions:!0,fetchWithdrawals:!1,withdraw:!0,transfer:!0},timeframes:{"1m":"1m","5m":"5m","15m":"15m","30m":"30m","1h":"1h","3h":"3h","4h":"4h","6h":"6h","12h":"12h","1d":"1D","1w":"7D","2w":"14D","1M":"1M"},urls:{logo:"https://user-images.githubusercontent.com/1294454/27766244-e328a50c-5ed2-11e7-947b-041416579bb3.jpg",api:{v2:"https://api-pub.bitfinex.com",public:"https://api.bitfinex.com",private:"https://api.bitfinex.com"},www:"https://www.bitfinex.com",referral:"https://www.bitfinex.com/?refcode=P61eYxFL",doc:["https://docs.bitfinex.com/v1/docs","https://github.com/bitfinexcom/bitfinex-api-node"]},api:{v2:{get:["platform/status","tickers","ticker/{symbol}","trades/{symbol}/hist","book/{symbol}/{precision}","book/{symbol}/P0","book/{symbol}/P1","book/{symbol}/P2","book/{symbol}/P3","book/{symbol}/R0","stats1/{key}:{size}:{symbol}:{side}/{section}","stats1/{key}:{size}:{symbol}/{section}","stats1/{key}:{size}:{symbol}:long/last","stats1/{key}:{size}:{symbol}:long/hist","stats1/{key}:{size}:{symbol}:short/last","stats1/{key}:{size}:{symbol}:short/hist","candles/trade:{timeframe}:{symbol}/{section}","candles/trade:{timeframe}:{symbol}/last","candles/trade:{timeframe}:{symbol}/hist"]},public:{get:["book/{symbol}","lendbook/{currency}","lends/{currency}","pubticker/{symbol}","stats/{symbol}","symbols","symbols_details","tickers","trades/{symbol}"]},private:{post:["account_fees","account_infos","balances","basket_manage","credits","deposit/new","funding/close","history","history/movements","key_info","margin_infos","mytrades","mytrades_funding","offer/cancel","offer/new","offer/status","offers","offers/hist","order/cancel","order/cancel/all","order/cancel/multi","order/cancel/replace","order/new","order/new/multi","order/status","orders","orders/hist","position/claim","position/close","positions","summary","taken_funds","total_taken_funds","transfer","unused_taken_funds","withdraw"]}},fees:{trading:{feeSide:"get",tierBased:!0,percentage:!0,maker:.001,taker:.002,tiers:{taker:[[0,.002],[5e5,.002],[1e6,.002],[25e5,.002],[5e6,.002],[75e5,.002],[1e7,.0018],[15e6,.0016],[2e7,.14/100],[25e6,.0012],[3e7,.001]],maker:[[0,.001],[5e5,8e-4],[1e6,6e-4],[25e5,4e-4],[5e6,2e-4],[75e5,0],[1e7,0],[15e6,0],[2e7,0],[25e6,0],[3e7,0]]}},funding:{tierBased:!1,percentage:!1,deposit:{BTC:4e-4,IOTA:.5,ETH:.0027,BCH:1e-4,LTC:.001,EOS:.24279,XMR:.04,SAN:.99269,DASH:.01,ETC:.01,XRP:.02,YYW:16.915,NEO:0,ZEC:.001,BTG:0,OMG:.14026,DATA:20.773,QASH:1.9858,ETP:.01,QTUM:.01,EDO:.95001,AVT:1.3045,USDT:0,TRX:28.184,ZRX:1.9947,RCN:10.793,TNB:31.915,SNT:14.976,RLC:1.414,GNT:5.8952,SPK:10.893,REP:.041168,BAT:6.1546,ELF:1.8753,FUN:32.336,SNG:18.622,AID:8.08,MNA:16.617,NEC:1.6504,XTZ:.2},withdraw:{BTC:4e-4,IOTA:.5,ETH:.0027,BCH:1e-4,LTC:.001,EOS:.24279,XMR:.04,SAN:.99269,DASH:.01,ETC:.01,XRP:.02,YYW:16.915,NEO:0,ZEC:.001,BTG:0,OMG:.14026,DATA:20.773,QASH:1.9858,ETP:.01,QTUM:.01,EDO:.95001,AVT:1.3045,USDT:20,TRX:28.184,ZRX:1.9947,RCN:10.793,TNB:31.915,SNT:14.976,RLC:1.414,GNT:5.8952,SPK:10.893,REP:.041168,BAT:6.1546,ELF:1.8753,FUN:32.336,SNG:18.622,AID:8.08,MNA:16.617,NEC:1.6504,XTZ:.2}}},commonCurrencies:{ABS:"ABYSS",AIO:"AION",ALG:"ALGO",AMP:"AMPL",ATM:"ATMI",ATO:"ATOM",BAB:"BCH",CTX:"CTXC",DAD:"DADI",DAT:"DATA",DSH:"DASH",DRK:"DRK",EDO:"PNT",GSD:"GUSD",HOT:"Hydro Protocol",IOS:"IOST",IOT:"IOTA",IQX:"IQ",MIT:"MITH",MNA:"MANA",NCA:"NCASH",ORS:"ORS Group",POY:"POLY",QSH:"QASH",QTM:"QTUM",RBT:"RBTC",SEE:"SEER",SNG:"SNGLS",SPK:"SPANK",STJ:"STORJ",TRI:"TRIO",TSD:"TUSD",YYW:"YOYOW",UDC:"USDC",UST:"USDT",UTN:"UTNP",VSY:"VSYS",WAX:"WAXP",XCH:"XCHF",ZBT:"ZB"},exceptions:{exact:{temporarily_unavailable:b,"Order could not be cancelled.":w,"No such order found.":w,"Order price must be positive.":k,"Could not find a key matching the given X-BFX-APIKEY.":v,'Key price should be a decimal number, e.g. "123.456"':k,'Key amount should be a decimal number, e.g. "123.456"':k,ERR_RATE_LIMIT:p,Ratelimit:p,"Nonce is too small.":_,"No summary found.":y,"Cannot evaluate your available balance, please try again":b,"Unknown symbol":S,"Cannot complete transfer. Exchange balance insufficient.":x,"Momentary balance check. Please wait few seconds and try the transfer again.":y},broad:{"Invalid X-BFX-SIGNATURE":v,"This API key does not have permission":m,"not enough exchange balance for ":x,"minimum size for ":k,"Invalid order":k,"The available balance is only":x}},precisionMode:T,options:{currencyNames:{AGI:"agi",AID:"aid",AIO:"aio",ANT:"ant",AVT:"aventus",BAT:"bat",BCH:"bab",BCI:"bci",BFT:"bft",BSV:"bsv",BTC:"bitcoin",BTG:"bgold",CFI:"cfi",COMP:"comp",DAI:"dai",DADI:"dad",DASH:"dash",DATA:"datacoin",DTH:"dth",EDO:"eidoo",ELF:"elf",EOS:"eos",ETC:"ethereumc",ETH:"ethereum",ETP:"metaverse",FUN:"fun",GNT:"golem",IOST:"ios",IOTA:"iota",LEO:"let",LINK:"link",LRC:"lrc",LTC:"litecoin",LYM:"lym",MANA:"mna",MIT:"mit",MKR:"mkr",MTN:"mtn",NEO:"neo",ODE:"ode",OMG:"omisego",OMNI:"mastercoin",QASH:"qash",QTUM:"qtum",RCN:"rcn",RDN:"rdn",REP:"rep",REQ:"req",RLC:"rlc",SAN:"santiment",SNGLS:"sng",SNT:"status",SPANK:"spk",STORJ:"stj",TNB:"tnb",TRX:"trx",TUSD:"tsd",USD:"wire",USDC:"udc",UTK:"utk",USDT:"tetheruso",VEE:"vee",WAX:"wax",XLM:"xlm",XMR:"monero",XRP:"ripple",XVG:"xvg",YOYOW:"yoyow",ZEC:"zcash",ZRX:"zrx",XTZ:"xtz"},orderTypes:{limit:"exchange limit",market:"exchange market"},accountsByType:{spot:"exchange",margin:"trading",funding:"deposit",exchange:"exchange",trading:"trading",deposit:"deposit",derivatives:"trading"}}})}},{key:"fetchFundingFees",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privatePostAccountFees(t);case 5:for(r=e.sent,n=r.withdraw,a={},s=Object.keys(n),o=0;o<s.length;o++)u=s[o],c=this.safeCurrencyCode(u),a[c]=this.safeNumber(n,u);return e.abrupt("return",{info:r,withdraw:a,deposit:a});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTradingFees",value:function(){var e=n(i.mark((function e(){var t,r,n=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privatePostSummary(t);case 5:return r=e.sent,e.abrupt("return",{info:r,maker:this.safeNumber(r,"maker_fee"),taker:this.safeNumber(r,"taker_fee")});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p,v,m,g,y,b=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b.length>0&&void 0!==b[0]?b[0]:{},e.next=3,this.publicGetSymbols();case 3:return t=e.sent,e.next=6,this.publicGetSymbolsDetails();case 6:r=e.sent,n=[],a=0;case 9:if(!(a<r.length)){e.next=31;break}if(s=r[a],o=this.safeString(s,"pair"),this.inArray(o,t)){e.next=14;break}return e.abrupt("continue",28);case 14:o=o.toUpperCase(),u=void 0,c=void 0,o.indexOf(":")>=0?(d=o.split(":"),u=d[0],c=d[1]):(u=o.slice(0,3),c=o.slice(3,6)),h=this.safeCurrencyCode(u),l=this.safeCurrencyCode(c),f=h+"/"+l,p={price:this.safeInteger(s,"price_precision"),amount:8},v=this.safeString(s,"minimum_order_size"),m=this.safeString(s,"maximum_order_size"),(g={amount:{min:this.parseNumber(v),max:this.parseNumber(m)},price:{min:this.parseNumber("1e-8"),max:void 0}}).cost={min:this.parseNumber(A.stringMul(v,m)),max:void 0},y=this.safeValue(s,"margin"),n.push({id:o,symbol:f,base:h,quote:l,baseId:u,quoteId:c,active:!0,type:"spot",margin:y,precision:p,limits:g,info:s});case 28:a++,e.next=9;break;case 31:return e.abrupt("return",n);case 32:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"amountToPrecision",value:function(e,t){return this.decimalToPrecision(t,I,this.markets[e].precision.amount,C)}},{key:"priceToPrecision",value:function(e,t){return t=this.decimalToPrecision(t,M,this.markets[e].precision.price,this.precisionMode),this.decimalToPrecision(t,I,8,C)}},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p,v,m,g,b,x,k=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=k.length>0&&void 0!==k[0]?k[0]:{},e.next=3,this.loadMarkets();case 3:if(r=this.safeValue(this.options,"accountsByType",{}),n=this.safeString(t,"type","exchange"),void 0!==(a=this.safeString(r,n))){e.next=9;break}throw s=Object.keys(r),new y(this.id+" fetchBalance type parameter must be one of "+s.join(", "));case 9:return o=this.omit(t,"type"),e.next=12,this.privatePostBalances(o);case 12:for(u=e.sent,c={info:u},d="derivatives"===n,h=0;h<u.length;h++)l=u[h],f=this.safeString(l,"type"),p=this.safeStringLower(l,"currency",""),v=p.length-2,m="f0"===p.slice(v),g=!d||m,a===f&&g&&((b=this.safeCurrencyCode(p))in c||((x=this.account()).free=this.safeString(l,"available"),x.total=this.safeString(l,"amount"),c[b]=x));return e.abrupt("return",this.parseBalance(c,!1));case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"transfer",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,u,c,d,h,l,f,p,v,m,g,b,x,k,w=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=w.length>4&&void 0!==w[4]?w[4]:{},e.next=3,this.loadMarkets();case 3:if(o=this.safeValue(this.options,"accountsByType",{}),void 0!==(u=this.safeString(o,n))){e.next=8;break}throw c=Object.keys(o),new y(this.id+" transfer fromAccount must be one of "+c.join(", "));case 8:if(void 0!==(d=this.safeString(o,a))){e.next=12;break}throw h=Object.keys(o),new y(this.id+" transfer toAccount must be one of "+h.join(", "));case 12:return l=this.currencyId(t),f=this.convertDerivativesId(l,n),p=this.convertDerivativesId(l,a),v=this.currencyToPrecision(t,r),m={amount:v,currency:f,currency_to:p,walletfrom:u,walletto:d},e.next=19,this.privatePostTransfer(this.extend(m,s));case 19:if(g=e.sent,b=this.safeValue(g,0),x=this.safeString(b,"status"),void 0!==(k=this.safeString(b,"message"))){e.next=25;break}throw new y(this.id+" transfer failed");case 25:if("error"!==x){e.next=28;break}throw this.throwExactlyMatchedException(this.exceptions.exact,k,this.id+" "+k),new y(this.id+" "+k);case 28:return e.abrupt("return",{info:g,status:x,amount:v,code:t,fromAccount:n,toAccount:a,timestamp:void 0,datetime:void 0});case 29:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"convertDerivativesId",value:function(e,t){var r=e.length-2,i="F0"===e.slice(r);return"derivatives"!==t&&"trading"!==t&&"margin"!==t&&i?e=e.slice(0,r):"derivatives"!==t||i||(e+="F0"),e}},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return a={symbol:this.marketId(t)},void 0!==r&&(a.limit_bids=r,a.limit_asks=r),e.next=8,this.publicGetBookSymbol(this.extend(a,n));case 8:return s=e.sent,e.abrupt("return",this.parseOrderBook(s,void 0,"bids","asks","price","amount"));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:void 0,r=c.length>1&&void 0!==c[1]?c[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetTickers(r);case 6:for(n=e.sent,a={},s=0;s<n.length;s++)o=this.parseTicker(n[s]),u=o.symbol,a[u]=o;return e.abrupt("return",this.filterByArray(a,"symbol",t));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={symbol:n.id},e.next=7,this.publicGetPubtickerSymbol(this.extend(a,r));case 7:return s=e.sent,e.abrupt("return",this.parseTicker(s,n));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeNumber(e,"timestamp");void 0!==r&&(r*=1e3),r=parseInt(r);var i=void 0;if(void 0!==t)i=t.symbol;else if("pair"in e){var n=this.safeString(e,"pair");if(void 0!==n)if(n in this.markets_by_id)i=(t=this.markets_by_id[n]).symbol;else{var a=n.slice(0,3),s=n.slice(3,6),o=this.safeCurrencyCode(a),u=this.safeCurrencyCode(s);i=o+"/"+u}}var c=this.safeNumber(e,"last_price");return{symbol:i,timestamp:r,datetime:this.iso8601(r),high:this.safeNumber(e,"high"),low:this.safeNumber(e,"low"),bid:this.safeNumber(e,"bid"),bidVolume:void 0,ask:this.safeNumber(e,"ask"),askVolume:void 0,vwap:void 0,open:void 0,close:c,last:c,previousClose:void 0,change:void 0,percentage:void 0,average:this.safeNumber(e,"mid"),baseVolume:this.safeNumber(e,"volume"),quoteVolume:void 0,info:e}}},{key:"parseTrade",value:function(e,t){var r=this.safeString(e,"tid"),i=this.safeNumber(e,"timestamp");void 0!==i&&(i=1e3*parseInt(i));var n=this.safeStringLower(e,"type"),a=this.safeString(e,"order_id"),s=this.safeString(e,"price"),o=this.safeString(e,"amount"),u=this.parseNumber(s),c=this.parseNumber(o),d=this.parseNumber(A.stringMul(s,o)),h=void 0;if("fee_amount"in e){var l=-this.safeNumber(e,"fee_amount"),f=this.safeString(e,"fee_currency");h={cost:l,currency:this.safeCurrencyCode(f)}}return{id:r,info:e,timestamp:i,datetime:this.iso8601(i),symbol:t.symbol,type:undefined,order:a,side:n,takerOrMaker:void 0,price:u,amount:c,cost:d,fee:h}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:50,a=c.length>3&&void 0!==c[3]?c[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={symbol:s.id,limit_trades:n},void 0!==r&&(o.timestamp=parseInt(r/1e3)),e.next=10,this.publicGetTradesSymbol(this.extend(o,a));case 10:return u=e.sent,e.abrupt("return",this.parseTrades(u,s,r,n));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=c.length>0&&void 0!==c[0]?c[0]:void 0,r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},void 0!==t){e.next=6;break}throw new g(this.id+" fetchMyTrades() requires a `symbol` argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.market(t),o={symbol:s.id},void 0!==n&&(o.limit_trades=n),void 0!==r&&(o.timestamp=parseInt(r/1e3)),e.next=14,this.privatePostMytrades(this.extend(o,a));case 14:return u=e.sent,e.abrupt("return",this.parseTrades(u,s,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=d.length>4&&void 0!==d[4]?d[4]:void 0,o=d.length>5&&void 0!==d[5]?d[5]:{},e.next=4,this.loadMarkets();case 4:return(u={symbol:this.marketId(t),side:n,amount:this.amountToPrecision(t,a),type:this.safeString(this.options.orderTypes,r,r),ocoorder:!1,buy_price_oco:0,sell_price_oco:0}).price="market"===r?this.nonce().toString():this.priceToPrecision(t,s),e.next=8,this.privatePostOrderNew(this.extend(u,o));case 8:return c=e.sent,e.abrupt("return",this.parseOrder(c));case 10:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"editOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=h.length>4&&void 0!==h[4]?h[4]:void 0,o=h.length>5&&void 0!==h[5]?h[5]:void 0,u=h.length>6&&void 0!==h[6]?h[6]:{},e.next=5,this.loadMarkets();case 5:return c={order_id:parseInt(t)},void 0!==o&&(c.price=this.priceToPrecision(r,o)),void 0!==s&&(c.amount=this.numberToString(s)),void 0!==r&&(c.symbol=this.marketId(r)),void 0!==a&&(c.side=a),void 0!==n&&(c.type=this.safeString(this.options.orderTypes,n,n)),e.next=13,this.privatePostOrderCancelReplace(this.extend(c,u));case 13:return d=e.sent,e.abrupt("return",this.parseOrder(d));case 15:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:{},e.next=4,this.loadMarkets();case 4:return n={order_id:parseInt(t)},e.next=7,this.privatePostOrderCancel(this.extend(n,r));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cancelAllOrders",value:function(){var e=n(i.mark((function e(){var t,r=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.length>0&&void 0!==r[0]?r[0]:void 0,t=r.length>1&&void 0!==r[1]?r[1]:{},e.next=4,this.privatePostOrderCancelAll(t);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"side"),i=this.safeValue(e,"is_live"),n=this.safeValue(e,"is_cancelled"),a=void 0;a=i?"open":n?"canceled":"closed";var s=this.safeStringUpper(e,"symbol"),o=this.safeSymbol(s,t),u=this.safeString(e,"type",""),c=u.indexOf("exchange ")>=0;if(c){var d=e.type.split(" ");u=d[1]}var h=this.safeTimestamp(e,"timestamp"),l=this.safeString(e,"id");return this.safeOrder({info:e,id:l,clientOrderId:void 0,timestamp:h,datetime:this.iso8601(h),lastTradeTimestamp:void 0,symbol:o,type:u,timeInForce:void 0,postOnly:void 0,side:r,price:this.safeNumber(e,"price"),stopPrice:void 0,average:this.safeNumber(e,"avg_execution_price"),amount:this.safeNumber(e,"original_amount"),remaining:this.safeNumber(e,"remaining_amount"),filled:this.safeNumber(e,"executed_amount"),status:a,fee:void 0,cost:void 0,trades:void 0})}},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.loadMarkets();case 6:if(void 0===t){e.next=9;break}if(t in this.markets){e.next=9;break}throw new y(this.id+" has no symbol "+t);case 9:return e.next=11,this.privatePostOrders(a);case 11:return s=e.sent,o=this.parseOrders(s,void 0,r,n),void 0!==t&&(o=this.filterBy(o,"symbol",t)),e.abrupt("return",o);case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:void 0,r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},e.next=6,this.loadMarkets();case 6:return s={},void 0!==n&&(s.limit=n),e.next=10,this.privatePostOrdersHist(this.extend(s,a));case 10:return o=e.sent,u=this.parseOrders(o,void 0,r,n),void 0!==t&&(u=this.filterBy(u,"symbol",t)),u=this.filterByArray(u,"status",["closed","canceled"],!1),e.abrupt("return",u);case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.loadMarkets();case 4:return n={order_id:parseInt(t)},e.next=7,this.privatePostOrderStatus(this.extend(n,r));case 7:return a=e.sent,e.abrupt("return",this.parseOrder(a));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){return[this.safeInteger(e,0),this.safeNumber(e,1),this.safeNumber(e,3),this.safeNumber(e,4),this.safeNumber(e,2),this.safeNumber(e,5)]}},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:"1m",n=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:void 0,s=h.length>4&&void 0!==h[4]?h[4]:{},e.next=6,this.loadMarkets();case 6:return void 0===a&&(a=100),o=this.market(t),u="t"+o.id,c={symbol:u,timeframe:this.timeframes[r],sort:1,limit:a},void 0!==n&&(c.start=n),e.next=13,this.v2GetCandlesTradeTimeframeSymbolHist(this.extend(c,s));case 13:return d=e.sent,e.abrupt("return",this.parseOHLCVs(d,o,r,n,a));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getCurrencyName",value:function(e){if(e in this.options.currencyNames)return this.options.currencyNames[e];throw new f(this.id+" "+e+" not supported for withdrawal")}},{key:"createDepositAddress",value:function(){var e=n(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>1&&void 0!==s[1]?s[1]:{},e.next=3,this.loadMarkets();case 3:return n={renew:1},e.next=6,this.fetchDepositAddress(t,this.extend(n,r));case 6:return a=e.sent,e.abrupt("return",a);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchDepositAddress",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.getCurrencyName(t),a={method:n,wallet_name:"exchange",renew:0},e.next=7,this.privatePostDepositNew(this.extend(a,r));case 7:return s=e.sent,o=this.safeValue(s,"address"),u=void 0,"address_pool"in s&&(u=o,o=s.address_pool),this.checkAddress(o),e.abrupt("return",{currency:t,address:o,tag:u,info:s});case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTransactions",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:if(s=this.safeString(a,"currency"),o=this.omit(a,"currency"),u=void 0,void 0!==s){e.next=16;break}if(void 0!==t){e.next=14;break}throw new g(this.id+" fetchTransactions() requires a currency `code` argument or a `currency` parameter");case 14:u=this.currency(t),s=u.id;case 16:return o.currency=s,void 0!==r&&(o.since=parseInt(r/1e3)),e.next=20,this.privatePostHistoryMovements(this.extend(o,a));case 20:return c=e.sent,e.abrupt("return",this.parseTransactions(c,u,r,n));case 22:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeNumber(e,"timestamp_created");void 0!==r&&(r=parseInt(1e3*r));var i=this.safeNumber(e,"timestamp");void 0!==i&&(i=parseInt(1e3*i));var n=this.safeString(e,"currency"),a=this.safeCurrencyCode(n,t),s=this.safeStringLower(e,"type"),o=this.parseTransactionStatus(this.safeString(e,"status")),u=this.safeNumber(e,"fee");return void 0!==u&&(u=Math.abs(u)),{info:e,id:this.safeString(e,"id"),txid:this.safeString(e,"txid"),timestamp:r,datetime:this.iso8601(r),address:this.safeString(e,"address"),tag:void 0,type:s,amount:this.safeNumber(e,"amount"),currency:a,status:o,updated:i,fee:{currency:a,cost:u,rate:void 0}}}},{key:"parseTransactionStatus",value:function(e){return this.safeString({SENDING:"pending",CANCELED:"canceled",ZEROCONFIRMED:"failed",COMPLETED:"ok"},e,e)}},{key:"withdraw",value:function(){var e=n(i.mark((function e(t,r,n){var a,s,o,u,c,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=p.length>3&&void 0!==p[3]?p[3]:void 0,s=p.length>4&&void 0!==p[4]?p[4]:{},this.checkAddress(n),e.next=5,this.loadMarkets();case 5:return o=this.getCurrencyName(t),u={withdraw_type:o,walletselected:"exchange",amount:this.numberToString(r),address:n},void 0!==a&&(u.payment_id=a),e.next=10,this.privatePostWithdraw(this.extend(u,s));case 10:if(c=e.sent,d=c[0],h=this.safeString(d,"withdrawal_id"),l=this.safeString(d,"message"),f=this.findBroadlyMatchedKey(this.exceptions.broad,l),0!==h){e.next=20;break}if(void 0===f){e.next=19;break}throw new(0,this.exceptions.broad[f])(this.id+" "+l);case 19:throw new y(this.id+" withdraw returned an id of zero: "+this.json(d));case 20:return e.abrupt("return",{info:d,id:h});case 21:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"fetchPositions",value:function(){var e=n(i.mark((function e(){var t,r,n=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.length>0&&void 0!==n[0]?n[0]:void 0,t=n.length>1&&void 0!==n[1]?n[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.privatePostPositions(t);case 6:return r=e.sent,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"nonce",value:function(){return this.milliseconds()}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s="/"+this.implodeParams(e,i);s="v2"===t?"/"+t+s:"/"+this.version+s;var o=this.omit(i,this.extractParams(e)),u=this.urls.api[t]+s;if(("public"===t||e.indexOf("/hist")>=0)&&Object.keys(o).length){var c="?"+this.urlencode(o);u+=c,s+=c}if("private"===t){this.checkRequiredCredentials();var d=this.nonce();o=this.extend({nonce:d.toString(),request:s},o),a=this.json(o);var h=this.stringToBase64(a),l=this.encode(this.secret),f=this.hmac(h,l,"sha384");n={"X-BFX-APIKEY":this.apiKey,"X-BFX-PAYLOAD":this.decode(h),"X-BFX-SIGNATURE":f,"Content-Type":"application/json"}}return{url:u,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,u){if(void 0!==s&&e>=400&&"{"===a[0]){var c=this.id+" "+a,d=this.safeString2(s,"message","error");throw this.throwExactlyMatchedException(this.exceptions.exact,d,c),this.throwBroadlyMatchedException(this.exceptions.broad,d,c),new y(c)}}}]),r}(h)},function(e,t,r){"use strict";var i=r(7),n=r(21),a=r(8),s=r(1),o=r(2),u=r(6),c=r(3),d=r(4),h=r(5),l=r(11),f=r(10),p=f.BadRequest,v=f.ExchangeError,m=f.ArgumentsRequired,g=f.AuthenticationError,y=f.InsufficientFunds,b=f.OrderNotFound,x=f.ExchangeNotAvailable,k=f.DDoSProtection,w=f.InvalidOrder,_=f.InvalidAddress,S=r(12);e.exports=function(e){d(r,e);var t=h(r);function r(){return s(this,r),t.apply(this,arguments)}return o(r,[{key:"describe",value:function(){return this.deepExtend(u(c(r.prototype),"describe",this).call(this),{id:"zb",name:"ZB",countries:["CN"],rateLimit:1e3,version:"v1",has:{cancelOrder:!0,CORS:!1,createMarketOrder:!1,createOrder:!0,fetchBalance:!0,fetchDepositAddress:!0,fetchDepositAddresses:!0,fetchDeposits:!0,fetchMarkets:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchClosedOrders:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,fetchWithdrawals:!0,withdraw:!0},timeframes:{"1m":"1min","3m":"3min","5m":"5min","15m":"15min","30m":"30min","1h":"1hour","2h":"2hour","4h":"4hour","6h":"6hour","12h":"12hour","1d":"1day","3d":"3day","1w":"1week"},exceptions:{exact:{1001:v,1002:v,1003:g,1004:g,1005:g,1006:g,1009:x,2001:y,2002:y,2003:y,2005:y,2006:y,2007:y,2009:y,3001:b,3002:w,3003:w,3004:g,3005:p,3006:g,3007:g,3008:b,3009:w,3011:w,4001:x,4002:k},broad:{"\u63d0\u5e01\u5730\u5740\u6709\u8bef\uff0c\u8bf7\u5148\u6dfb\u52a0\u63d0\u5e01\u5730\u5740\u3002":_}},urls:{logo:"https://user-images.githubusercontent.com/1294454/32859187-cd5214f0-ca5e-11e7-967d-96568e2e2bd1.jpg",api:{public:"https://api.zb.today/data",private:"https://trade.zb.today/api"},www:"https://www.zb.com",doc:"https://www.zb.com/i/developer",fees:"https://www.zb.com/i/rate"},api:{public:{get:["markets","ticker","allTicker","depth","trades","kline"]},private:{get:["order","orderMoreV2","cancelOrder","getOrder","getOrders","getOrdersNew","getOrdersIgnoreTradeType","getUnfinishedOrdersIgnoreTradeType","getFinishedAndPartialOrders","getAccountInfo","getUserAddress","getPayinAddress","getWithdrawAddress","getWithdrawRecord","getChargeRecord","getCnyWithdrawRecord","getCnyChargeRecord","withdraw","addSubUser","getSubUserList","doTransferFunds","createSubUserKey","getLeverAssetsInfo","getLeverBills","transferInLever","transferOutLever","loan","cancelLoan","getLoans","getLoanRecords","borrow","autoBorrow","repay","doAllRepay","getRepayments","getFinanceRecords","changeInvestMark","changeLoop","getCrossAssets","getCrossBills","transferInCross","transferOutCross","doCrossLoan","doCrossRepay","getCrossRepayRecords"]}},fees:{funding:{withdraw:{BTC:1e-4,BCH:6e-4,LTC:.005,ETH:.01,ETC:.01,BTS:3,EOS:1,QTUM:.01,HSR:.001,XRP:.1,USDT:"0.1%",QCASH:5,DASH:.002,BCD:0,UBTC:0,SBTC:0,INK:20,TV:.1,BTH:0,BCX:0,LBTC:0,CHAT:20,bitCNY:20,HLC:20,BTP:0,BCW:0}},trading:{maker:.002,taker:.002}},commonCurrencies:{ENT:"ENTCash"}})}},{key:"fetchMarkets",value:function(){var e=a(i.mark((function e(){var t,r,a,s,o,u,c,d,h,l,f,p,v,m,g,y,b,x,k,w=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=w.length>0&&void 0!==w[0]?w[0]:{},e.next=3,this.publicGetMarkets(t);case 3:for(r=e.sent,a=Object.keys(r),s=[],o=0;o<a.length;o++)u=a[o],c=r[u],d=u.split("_"),h=n(d,2),l=h[0],f=h[1],p=this.safeCurrencyCode(l),v=this.safeCurrencyCode(f),m=p+"/"+v,g=this.safeString(c,"amountScale"),y=this.safeString(c,"priceScale"),b=void 0===g?void 0:"1e-"+g,x=void 0===y?void 0:"1e-"+y,k={amount:parseInt(g),price:parseInt(y)},s.push({id:u,symbol:m,baseId:l,quoteId:f,base:p,quote:v,active:!0,precision:k,limits:{amount:{min:this.parseNumber(b),max:void 0},price:{min:this.parseNumber(x),max:void 0},cost:{min:0,max:void 0}},info:c});return e.abrupt("return",s);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=a(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetGetAccountInfo(t);case 5:for(r=e.sent,n=this.safeValue(r.result,"coins"),a={info:r},s=0;s<n.length;s++)o=n[s],u=this.account(),c=this.safeString(o,"key"),d=this.safeCurrencyCode(c),u.free=this.safeString(o,"available"),u.used=this.safeString(o,"freez"),a[d]=u;return e.abrupt("return",this.parseBalance(a,!1));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseDepositAddress",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"key"),i=void 0,n=this.safeString(e,"memo");if(void 0!==n)i=n;else if(r.indexOf("_")>=0){var a=r.split("_");r=a[0],i=a[1]}var s=this.safeString(e,"blockChain"),o=this.safeCurrencyCode(s,t);return{currency:o,address:r,tag:i,info:e}}},{key:"fetchDepositAddresses",value:function(){var e=a(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.privateGetGetPayinAddress(r);case 6:return n=e.sent,a=this.safeValue(n,"message",{}),s=this.safeValue(a,"datas",[]),e.abrupt("return",this.parseDepositAddresses(s,t));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchDepositAddress",value:function(){var e=a(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.currency(t),a={currency:n.id},e.next=7,this.privateGetGetUserAddress(this.extend(a,r));case 7:return s=e.sent,o=this.safeValue(s,"message",{}),u=this.safeValue(o,"datas",{}),e.abrupt("return",this.parseDepositAddress(u,n));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=a(i.mark((function e(t){var r,n,a,s,o,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:{},e.next=4,this.loadMarkets();case 4:return a=this.market(t),s={market:a.id},void 0!==r&&(s.size=r),e.next=9,this.publicGetDepth(this.extend(s,n));case 9:return o=e.sent,e.abrupt("return",this.parseOrderBook(o));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTickers",value:function(){var e=a(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:void 0,r=f.length>1&&void 0!==f[1]?f[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetAllTicker(r);case 6:for(n=e.sent,a={},s={},o=Object.keys(this.marketsById),u=0;u<o.length;u++)c=o[u].replace("_",""),s[c]=this.marketsById[o[u]];for(d=Object.keys(n),h=0;h<d.length;h++)l=s[d[h]],a[l.symbol]=this.parseTicker(n[d[h]],l);return e.abrupt("return",this.filterByArray(a,"symbol",t));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=a(i.mark((function e(t){var r,n,a,s,o,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={market:n.id},e.next=7,this.publicGetTicker(this.extend(a,r));case 7:return s=e.sent,o=s.ticker,e.abrupt("return",this.parseTicker(o,n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.milliseconds(),i=void 0;void 0!==t&&(i=t.symbol);var n=this.safeNumber(e,"last");return{symbol:i,timestamp:r,datetime:this.iso8601(r),high:this.safeNumber(e,"high"),low:this.safeNumber(e,"low"),bid:this.safeNumber(e,"buy"),bidVolume:void 0,ask:this.safeNumber(e,"sell"),askVolume:void 0,vwap:void 0,open:void 0,close:n,last:n,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeNumber(e,"vol"),quoteVolume:void 0,info:e}}},{key:"parseOHLCV",value:function(e){return[this.safeInteger(e,0),this.safeNumber(e,1),this.safeNumber(e,2),this.safeNumber(e,3),this.safeNumber(e,4),this.safeNumber(e,5)]}},{key:"fetchOHLCV",value:function(){var e=a(i.mark((function e(t){var r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:"1m",n=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:void 0,s=h.length>4&&void 0!==h[4]?h[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),void 0===a&&(a=1e3),u={market:o.id,type:this.timeframes[r],limit:a},void 0!==n&&(u.since=n),e.next=12,this.publicGetKline(this.extend(u,s));case 12:return c=e.sent,d=this.safeValue(c,"data",[]),e.abrupt("return",this.parseOHLCVs(d,o,r,n,a));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeTimestamp(e,"date"),i=this.safeString(e,"trade_type");i="bid"===i?"buy":"sell";var n=this.safeString(e,"tid"),a=this.safeString(e,"price"),s=this.safeString(e,"amount"),o=S.stringMul(a,s),u=this.parseNumber(a),c=this.parseNumber(s),d=this.parseNumber(o),h=void 0;return void 0!==t&&(h=t.symbol),{info:e,id:n,timestamp:r,datetime:this.iso8601(r),symbol:h,type:void 0,side:i,order:void 0,takerOrMaker:void 0,price:u,amount:c,cost:d,fee:void 0}}},{key:"fetchTrades",value:function(){var e=a(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={market:s.id},e.next=9,this.publicGetTrades(this.extend(o,a));case 9:return u=e.sent,e.abrupt("return",this.parseTrades(u,s,r,n));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=a(i.mark((function e(t,r,n,a){var s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=d.length>4&&void 0!==d[4]?d[4]:void 0,o=d.length>5&&void 0!==d[5]?d[5]:{},"limit"===r){e.next=4;break}throw new w(this.id+" allows limit orders only");case 4:return e.next=6,this.loadMarkets();case 6:return u={price:this.priceToPrecision(t,s),amount:this.amountToPrecision(t,a),tradeType:"buy"===n?"1":"0",currency:this.marketId(t)},e.next=9,this.privateGetOrder(this.extend(u,o));case 9:return c=e.sent,e.abrupt("return",{info:c,id:c.id});case 11:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=a(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>1&&void 0!==s[1]?s[1]:void 0,n=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.loadMarkets();case 4:return a={id:t.toString(),currency:this.marketId(r)},e.next=7,this.privateGetCancelOrder(this.extend(a,n));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=a(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:{},void 0!==r){e.next=4;break}throw new m(this.id+" fetchOrder() requires a symbol argument");case 4:return e.next=6,this.loadMarkets();case 6:return a={id:t.toString(),currency:this.marketId(r)},e.next=9,this.privateGetGetOrder(this.extend(a,n));case 9:return s=e.sent,e.abrupt("return",this.parseOrder(s,void 0));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrders",value:function(){var e=a(i.mark((function e(){var t,r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:50,a=d.length>3&&void 0!==d[3]?d[3]:{},void 0!==t){e.next=6;break}throw new m(this.id+"fetchOrders() requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.market(t),o={currency:s.id,pageIndex:1,pageSize:n},u="privateGetGetOrdersIgnoreTradeType","tradeType"in a&&(u="privateGetGetOrdersNew"),c=void 0,e.prev=13,e.next=16,this[u](this.extend(o,a));case 16:c=e.sent,e.next=24;break;case 19:if(e.prev=19,e.t0=e.catch(13),!(e.t0 instanceof b)){e.next=23;break}return e.abrupt("return",[]);case 23:throw e.t0;case 24:return e.abrupt("return",this.parseOrders(c,s,r,n));case 25:case"end":return e.stop()}}),e,this,[[13,19]])})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=a(i.mark((function e(){var t,r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=c.length>0&&void 0!==c[0]?c[0]:void 0,r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},void 0!==t){e.next=6;break}throw new m(this.id+"fetchClosedOrders() requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.market(t),o={currency:s.id,pageIndex:1,pageSize:10},e.next=12,this.privateGetGetFinishedAndPartialOrders(this.extend(o,a));case 12:return u=e.sent,e.abrupt("return",this.parseOrders(u,s,r,n));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=a(i.mark((function e(){var t,r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:10,a=d.length>3&&void 0!==d[3]?d[3]:{},void 0!==t){e.next=6;break}throw new m(this.id+"fetchOpenOrders() requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.market(t),o={currency:s.id,pageIndex:1,pageSize:n},u="privateGetGetUnfinishedOrdersIgnoreTradeType","tradeType"in a&&(u="privateGetGetOrdersNew"),c=void 0,e.prev=13,e.next=16,this[u](this.extend(o,a));case 16:c=e.sent,e.next=24;break;case 19:if(e.prev=19,e.t0=e.catch(13),!(e.t0 instanceof b)){e.next=23;break}return e.abrupt("return",[]);case 23:throw e.t0;case 24:return e.abrupt("return",this.parseOrders(c,s,r,n));case 25:case"end":return e.stop()}}),e,this,[[13,19]])})));return function(){return e.apply(this,arguments)}}()},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeInteger(e,"type");r=1===r?"buy":"sell";var i="limit",n=this.safeInteger(e,"trade_date"),a=this.safeString(e,"currency"),s=this.safeSymbol(a,t,"_"),o=this.safeNumber(e,"price"),u=this.safeNumber(e,"trade_amount"),c=this.safeNumber(e,"total_amount"),d=this.safeNumber(e,"trade_money"),h=this.parseOrderStatus(this.safeString(e,"status")),l=this.safeString(e,"id"),f=this.safeNumber(e,"fees"),p=void 0;if(void 0!==f){var v=void 0,m=this.safeValue(e,"useZbFee");!0===m?v="ZB":void 0!==t&&(v="sell"===r?t.quote:t.base),p={cost:f,currency:v}}return this.safeOrder({info:e,id:l,clientOrderId:void 0,timestamp:n,datetime:this.iso8601(n),lastTradeTimestamp:void 0,symbol:s,type:i,timeInForce:void 0,postOnly:void 0,side:r,price:o,stopPrice:void 0,average:void 0,cost:d,amount:c,filled:u,remaining:void 0,status:h,fee:p,trades:void 0})}},{key:"parseOrderStatus",value:function(e){return this.safeString({0:"open",1:"canceled",2:"closed",3:"open"},e,e)}},{key:"parseTransactionStatus",value:function(e){return this.safeString({0:"pending",1:"failed",2:"ok",3:"canceled",5:"ok"},e,e)}},{key:"parseTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),i=this.safeString(e,"hash"),n=this.safeNumber(e,"amount"),a=this.parse8601(this.safeString(e,"submit_time"));a=this.safeInteger(e,"submitTime",a);var s=this.safeString2(e,"toAddress","address"),o=void 0;if(void 0!==s){var u=s.split("_");s=this.safeString(u,0),o=this.safeString(u,1)}var c=this.safeInteger(e,"confirmTimes"),d=this.safeInteger(e,"manageTime"),h=void 0,l=this.safeString(e,"currency"),f=this.safeCurrencyCode(l,t);void 0!==s&&(h=void 0===c?"withdrawal":"deposit");var p=this.parseTransactionStatus(this.safeString(e,"status")),v=void 0,m=this.safeNumber(e,"fees");return void 0!==m&&(v={cost:m,currency:f}),{info:e,id:r,txid:i,timestamp:a,datetime:this.iso8601(a),addressFrom:void 0,address:s,addressTo:s,tagFrom:void 0,tag:o,tagTo:o,type:h,amount:n,currency:f,status:p,updated:d,fee:v}}},{key:"withdraw",value:function(){var e=a(i.mark((function e(t,r,n){var a,s,o,u,c,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=f.length>3&&void 0!==f[3]?f[3]:void 0,s=f.length>4&&void 0!==f[4]?f[4]:{},void 0!==(o=this.safeString(s,"safePwd",this.password))){e.next=5;break}throw new m(this.id+" withdraw() requires exchange.password or a safePwd parameter");case 5:if(void 0!==(u=this.safeNumber(s,"fees"))){e.next=8;break}throw new m(this.id+" withdraw() requires a fees parameter");case 8:return this.checkAddress(n),e.next=11,this.loadMarkets();case 11:return c=this.currency(t),void 0!==a&&(n+="_"+a),d={amount:this.currencyToPrecision(t,r),currency:c.id,fees:this.currencyToPrecision(t,u),method:"withdraw",receiveAddr:n,safePwd:o},e.next=16,this.privateGetWithdraw(this.extend(d,s));case 16:return h=e.sent,l=this.parseTransaction(h,c),e.abrupt("return",this.extend(l,{type:"withdrawal",address:n,addressTo:n,amount:r}));case 19:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"fetchWithdrawals",value:function(){var e=a(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:void 0,r=l.length>1&&void 0!==l[1]?l[1]:void 0,n=l.length>2&&void 0!==l[2]?l[2]:void 0,a=l.length>3&&void 0!==l[3]?l[3]:{},e.next=6,this.loadMarkets();case 6:return s={},o=void 0,void 0!==t&&(o=this.currency(t),s.currency=o.id),void 0!==n&&(s.pageSize=n),e.next=12,this.privateGetGetWithdrawRecord(this.extend(s,a));case 12:return u=e.sent,c=this.safeValue(u,"message",{}),d=this.safeValue(c,"datas",{}),h=this.safeValue(d,"list",[]),e.abrupt("return",this.parseTransactions(h,o,r,n));case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchDeposits",value:function(){var e=a(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:void 0,r=l.length>1&&void 0!==l[1]?l[1]:void 0,n=l.length>2&&void 0!==l[2]?l[2]:void 0,a=l.length>3&&void 0!==l[3]?l[3]:{},e.next=6,this.loadMarkets();case 6:return s={},o=void 0,void 0!==t&&(o=this.currency(t),s.currency=o.id),void 0!==n&&(s.pageSize=n),e.next=12,this.privateGetGetChargeRecord(this.extend(s,a));case 12:return u=e.sent,c=this.safeValue(u,"message",{}),d=this.safeValue(c,"datas",{}),h=this.safeValue(d,"list",[]),e.abrupt("return",this.parseTransactions(h,o,r,n));case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"nonce",value:function(){return this.milliseconds()}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.urls.api[t];if("public"===t)s+="/"+this.version+"/"+e,Object.keys(i).length&&(s+="?"+this.urlencode(i));else{var o=this.keysort(this.extend({method:e,accesskey:this.apiKey},i)),u=this.nonce();o=this.keysort(o);var c=this.rawencode(o),d=this.hash(this.encode(this.secret),"sha1"),h=this.hmac(this.encode(c),this.encode(d),"md5"),l="sign="+h+"&reqTime="+u.toString();s+="/"+e+"?"+c+"&"+l}return{url:s,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,u){if(void 0!==s&&"{"===a[0]){var c=this.id+" "+a;if(this.throwBroadlyMatchedException(this.exceptions.broad,a,c),"code"in s){var d=this.safeString(s,"code");if(this.throwExactlyMatchedException(this.exceptions.exact,d,c),"1000"!==d)throw new v(c)}var h=this.safeValue(s,"result");if(void 0!==h)if(!h)throw"\u670d\u52a1\u7aef\u5fd9\u788c"===this.safeString(s,"message")?new x(c):new v(c)}}}]),r}(l)},function(e,t,r){"use strict";var i=r(7),n=r(8),a=r(1),s=r(2),o=r(6),u=r(3),c=r(4),d=r(5),h=r(11),l=r(10),f=l.InsufficientFunds,p=l.ArgumentsRequired,v=l.ExchangeError,m=l.InvalidOrder,g=l.InvalidAddress,y=l.AuthenticationError,b=l.NotSupported,x=l.OrderNotFound,k=l.OnMaintenance,w=l.PermissionDenied,_=l.RateLimitExceeded,S=r(18).TICK_SIZE,O=r(12);e.exports=function(e){c(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(u(r.prototype),"describe",this).call(this),{id:"coinbasepro",name:"Coinbase Pro",countries:["US"],rateLimit:1e3,userAgent:this.userAgents.chrome,pro:!0,has:{cancelAllOrders:!0,cancelOrder:!0,CORS:!0,createDepositAddress:!0,createOrder:!0,deposit:!0,fetchAccounts:!0,fetchBalance:!0,fetchCurrencies:!0,fetchClosedOrders:!0,fetchDepositAddress:!1,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchOrderTrades:!0,fetchTime:!0,fetchTicker:!0,fetchTrades:!0,fetchTransactions:!0,withdraw:!0,fetchDeposits:!0,fetchWithdrawals:!0},timeframes:{"1m":60,"5m":300,"15m":900,"1h":3600,"6h":21600,"1d":86400},hostname:"pro.coinbase.com",urls:{test:{public:"https://api-public.sandbox.pro.coinbase.com",private:"https://api-public.sandbox.pro.coinbase.com"},logo:"https://user-images.githubusercontent.com/1294454/41764625-63b7ffde-760a-11e8-996d-a6328fa9347a.jpg",api:{public:"https://api.{hostname}",private:"https://api.{hostname}"},www:"https://pro.coinbase.com/",doc:"https://docs.pro.coinbase.com",fees:["https://docs.pro.coinbase.com/#fees","https://support.pro.coinbase.com/customer/en/portal/articles/2945310-fees"]},requiredCredentials:{apiKey:!0,secret:!0,password:!0},api:{public:{get:["currencies","products","products/{id}","products/{id}/book","products/{id}/candles","products/{id}/stats","products/{id}/ticker","products/{id}/trades","time"]},private:{get:["accounts","accounts/{id}","accounts/{id}/holds","accounts/{id}/ledger","accounts/{id}/transfers","coinbase-accounts","fills","funding","fees","margin/profile_information","margin/buying_power","margin/withdrawal_power","margin/withdrawal_power_all","margin/exit_plan","margin/liquidation_history","margin/position_refresh_amounts","margin/status","oracle","orders","orders/{id}","orders/client:{client_oid}","otc/orders","payment-methods","position","profiles","profiles/{id}","reports/{report_id}","transfers","transfers/{transfer_id}","users/self/trailing-volume","users/self/exchange-limits","withdrawals/fee-estimate"],post:["conversions","deposits/coinbase-account","deposits/payment-method","coinbase-accounts/{id}/addresses","funding/repay","orders","position/close","profiles/margin-transfer","profiles/transfer","reports","withdrawals/coinbase","withdrawals/coinbase-account","withdrawals/crypto","withdrawals/payment-method"],delete:["orders","orders/client:{client_oid}","orders/{id}"]}},commonCurrencies:{CGLD:"CELO"},precisionMode:S,fees:{trading:{tierBased:!0,percentage:!0,maker:.005,taker:.005},funding:{tierBased:!1,percentage:!1,withdraw:{BCH:0,BTC:0,LTC:0,ETH:0,EUR:.15,USD:25},deposit:{BCH:0,BTC:0,LTC:0,ETH:0,EUR:.15,USD:10}}},exceptions:{exact:{"Insufficient funds":f,NotFound:x,"Invalid API Key":y,"invalid signature":y,"Invalid Passphrase":y,"Invalid order id":m,"Private rate limit exceeded":_,"Trading pair not available":w,"Product not found":m},broad:{"Order already done":x,"order not found":x,"price too small":m,"price too precise":m,"under maintenance":k,"size is too small":m,"Cancel only mode":k}}})}},{key:"fetchCurrencies",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.length>0&&void 0!==p[0]?p[0]:{},e.next=3,this.publicGetCurrencies(t);case 3:for(r=e.sent,n={},a=0;a<r.length;a++)s=r[a],o=this.safeString(s,"id"),u=this.safeString(s,"name"),c=this.safeCurrencyCode(o),d=this.safeValue(s,"details",{}),h=this.safeNumber(s,"max_precision"),l=this.safeString(s,"status"),f="online"===l,n[c]={id:o,code:c,info:s,type:this.safeString(d,"type"),name:u,active:f,fee:void 0,precision:h,limits:{amount:{min:this.safeNumber(d,"min_size"),max:void 0},withdraw:{min:this.safeNumber(d,"min_withdrawal_amount"),max:void 0}}};return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p,v,m,g=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=g.length>0&&void 0!==g[0]?g[0]:{},e.next=3,this.publicGetProducts(t);case 3:for(r=e.sent,n=[],a=0;a<r.length;a++)s=r[a],o=this.safeString(s,"id"),u=this.safeString(s,"base_currency"),c=this.safeString(s,"quote_currency"),d=this.safeCurrencyCode(u),h=this.safeCurrencyCode(c),l=d+"/"+h,f={min:this.safeNumber(s,"quote_increment"),max:void 0},p={amount:this.safeNumber(s,"base_increment"),price:this.safeNumber(s,"quote_increment")},v=this.safeString(s,"status"),m="online"===v,n.push(this.extend(this.fees.trading,{id:o,symbol:l,baseId:u,quoteId:c,base:d,quote:h,precision:p,limits:{amount:{min:this.safeNumber(s,"base_min_size"),max:this.safeNumber(s,"base_max_size")},price:f,cost:{min:this.safeNumber(s,"min_market_funds"),max:this.safeNumber(s,"max_market_funds")}},active:m,info:s}));return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchAccounts",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetAccounts(t);case 5:for(r=e.sent,n=[],a=0;a<r.length;a++)s=r[a],o=this.safeString(s,"id"),u=this.safeString(s,"currency"),c=this.safeCurrencyCode(u),n.push({id:o,type:void 0,currency:c,info:s});return e.abrupt("return",n);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetAccounts(t);case 5:for(r=e.sent,n={info:r},a=0;a<r.length;a++)s=r[a],o=this.safeString(s,"currency"),u=this.safeCurrencyCode(o),(c=this.account()).free=this.safeString(s,"available"),c.used=this.safeString(s,"hold"),c.total=this.safeString(s,"balance"),n[u]=c;return e.abrupt("return",this.parseBalance(n,!1));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.length>1&&void 0!==o[1]?o[1]:void 0,r=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return n={id:this.marketId(t),level:2},e.next=7,this.publicGetProductsIdBook(this.extend(n,r));case 7:return a=e.sent,(s=this.parseOrderBook(a)).nonce=this.safeInteger(a,"sequence"),e.abrupt("return",s);case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.parse8601(this.safeValue(e,"time")),i=this.safeNumber(e,"bid"),n=this.safeNumber(e,"ask"),a=this.safeNumber(e,"price"),s=void 0===t?void 0:t.symbol;return{symbol:s,timestamp:r,datetime:this.iso8601(r),high:this.safeNumber(e,"high"),low:this.safeNumber(e,"low"),bid:i,bidVolume:void 0,ask:n,askVolume:void 0,vwap:void 0,open:this.safeNumber(e,"open"),close:a,last:a,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeNumber(e,"volume"),quoteVolume:void 0,info:e}}},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={id:n.id},s=this.safeString(this.options,"fetchTickerMethod","publicGetProductsIdTicker"),e.next=8,this[s](this.extend(a,r));case 8:return o=e.sent,e.abrupt("return",this.parseTicker(o,n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.parse8601(this.safeString2(e,"time","created_at")),i=this.safeString(e,"product_id"),n=this.safeSymbol(i,t,"-"),a=void 0,s=void 0,o=void 0,u=void 0;if(void 0!==t){var c=this.safeStringLower(t,"quoteId"),d=c+"_value";u=this.safeNumber(e,d),s=t.quote;var h=this.safeString(e,"liquidity");void 0!==h&&(a=t[o="T"===h?"taker":"maker"])}var l=this.safeNumber2(e,"fill_fees","fee"),f={cost:l,currency:s,rate:a},p=void 0,v=this.safeString(e,"trade_id"),m="buy"===e.side?"sell":"buy",g=this.safeString(e,"order_id");void 0!==g&&(m="buy"===e.side?"buy":"sell");var y=this.safeString(e,"price"),b=this.safeString(e,"size"),x=this.parseNumber(y),k=this.parseNumber(b);return void 0===u&&(u=this.parseNumber(O.stringMul(y,b))),{id:v,order:g,info:e,timestamp:r,datetime:this.iso8601(r),symbol:n,type:p,takerOrMaker:o,side:m,price:x,amount:k,fee:f,cost:u}}},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=c.length>0&&void 0!==c[0]?c[0]:void 0,r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},void 0!==t){e.next=6;break}throw new p(this.id+" fetchMyTrades() requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.market(t),o={product_id:s.id},void 0!==n&&(o.limit=n),e.next=13,this.privateGetFills(this.extend(o,a));case 13:return u=e.sent,e.abrupt("return",this.parseTrades(u,s,r,n));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={id:s.id},void 0!==n&&(o.limit=n),e.next=10,this.publicGetProductsIdTrades(this.extend(o,a));case 10:return u=e.sent,e.abrupt("return",this.parseTrades(u,s,r,n));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){return[this.safeTimestamp(e,0),this.safeNumber(e,3),this.safeNumber(e,2),this.safeNumber(e,1),this.safeNumber(e,4),this.safeNumber(e,5)]}},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:"1m",n=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:void 0,s=h.length>4&&void 0!==h[4]?h[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),u=this.timeframes[r],c={id:o.id,granularity:u},void 0!==n&&(c.start=this.iso8601(n),void 0===a&&(a=300),c.end=this.iso8601(this.sum((a-1)*u*1e3,n))),e.next=12,this.publicGetProductsIdCandles(this.extend(c,s));case 12:return d=e.sent,e.abrupt("return",this.parseOHLCVs(d,o,r,n,a));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTime",value:function(){var e=n(i.mark((function e(){var t,r,n=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},e.next=3,this.publicGetTime(t);case 3:return r=e.sent,e.abrupt("return",this.safeTimestamp(r,"epoch"));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({pending:"open",active:"open",open:"open",done:"closed",canceled:"canceled",canceling:"open"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.parse8601(this.safeString(e,"created_at")),i=this.safeString(e,"product_id");t=this.safeMarket(i,t,"-");var n=this.parseOrderStatus(this.safeString(e,"status")),a=this.safeNumber(e,"price"),s=this.safeNumber(e,"filled_size"),o=this.safeNumber(e,"size",s),u=this.safeNumber(e,"executed_value"),c=this.safeNumber(e,"fill_fees"),d=void 0;if(void 0!==c){var h=void 0;void 0!==t&&(h=t.quote),d={cost:c,currency:h,rate:void 0}}var l=this.safeString(e,"id"),f=this.safeString(e,"type"),p=this.safeString(e,"side"),v=this.safeString(e,"time_in_force"),m=this.safeValue(e,"post_only"),g=this.safeNumber(e,"stop_price"),y=this.safeString(e,"client_oid");return this.safeOrder({id:l,clientOrderId:y,info:e,timestamp:r,datetime:this.iso8601(r),lastTradeTimestamp:void 0,status:n,symbol:t.symbol,type:f,timeInForce:v,postOnly:m,side:p,price:a,stopPrice:g,cost:u,amount:o,filled:s,remaining:void 0,fee:d,average:void 0,trades:void 0})}},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u.length>1&&void 0!==u[1]?u[1]:void 0,r=u.length>2&&void 0!==u[2]?u[2]:{},e.next=4,this.loadMarkets();case 4:return n={},a=this.safeString2(r,"clientOrderId","client_oid"),s=void 0,void 0===a?(s="privateGetOrdersId",n.id=t):(s="privateGetOrdersClientClientOid",n.client_oid=a,r=this.omit(r,["clientOrderId","client_oid"])),e.next=10,this[s](this.extend(n,r));case 10:return o=e.sent,e.abrupt("return",this.parseOrder(o));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrderTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:void 0,s=d.length>4&&void 0!==d[4]?d[4]:{},e.next=6,this.loadMarkets();case 6:return o=void 0,void 0!==r&&(o=this.market(r)),u={order_id:t},e.next=11,this.privateGetFills(this.extend(u,s));case 11:return c=e.sent,e.abrupt("return",this.parseTrades(c,o,n,a));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:void 0,a=o.length>3&&void 0!==o[3]?o[3]:{},s={status:"all"},e.next=7,this.fetchOpenOrders(t,r,n,this.extend(s,a));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:void 0,r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},e.next=6,this.loadMarkets();case 6:return s={},o=void 0,void 0!==t&&(o=this.market(t),s.product_id=o.id),void 0!==n&&(s.limit=n),e.next=12,this.privateGetOrders(this.extend(s,a));case 12:return u=e.sent,e.abrupt("return",this.parseOrders(u,o,r,n));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:void 0,a=o.length>3&&void 0!==o[3]?o[3]:{},s={status:"done"},e.next=7,this.fetchOpenOrders(t,r,n,this.extend(s,a));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,u,c,d,h,l,f,p,v=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=v.length>4&&void 0!==v[4]?v[4]:void 0,o=v.length>5&&void 0!==v[5]?v[5]:{},e.next=4,this.loadMarkets();case 4:return u=this.market(t),c={type:r,side:n,product_id:u.id},void 0!==(d=this.safeString2(o,"clientOrderId","client_oid"))&&(c.client_oid=d,o=this.omit(o,["clientOrderId","client_oid"])),void 0!==(h=this.safeNumber2(o,"stopPrice","stop_price"))&&(c.stop_price=this.priceToPrecision(t,h),o=this.omit(o,["stopPrice","stop_price"])),void 0!==(l=this.safeString2(o,"timeInForce","time_in_force"))&&(c.time_in_force=l,o=this.omit(o,["timeInForce","time_in_force"])),"limit"===r?(c.price=this.priceToPrecision(t,s),c.size=this.amountToPrecision(t,a)):"market"===r&&(void 0===(f=this.safeNumber2(o,"cost","funds"))?void 0!==s&&(f=a*s):o=this.omit(o,["cost","funds"]),void 0!==f?c.funds=this.costToPrecision(t,f):c.size=this.amountToPrecision(t,a)),e.next=15,this.privatePostOrders(this.extend(c,o));case 15:return p=e.sent,e.abrupt("return",this.parseOrder(p,u));case 17:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:{},e.next=4,this.loadMarkets();case 4:return a={},s=this.safeString2(n,"clientOrderId","client_oid"),o=void 0,void 0===s?(o="privateDeleteOrdersId",a.id=t):(o="privateDeleteOrdersClientClientOid",a.client_oid=s,n=this.omit(n,["clientOrderId","client_oid"])),u=void 0,void 0!==r&&(u=this.market(r),a.product_id=u.symbol),e.next=12,this[o](this.extend(a,n));case 12:return e.abrupt("return",e.sent);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cancelAllOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:{},e.next=4,this.loadMarkets();case 4:return n={},a=void 0,void 0!==t&&(a=this.market(t),n.product_id=a.symbol),e.next=9,this.privateDeleteOrders(this.extend(n,r));case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchPaymentMethods",value:function(){var e=n(i.mark((function e(){var t,r=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:{},e.next=3,this.privateGetPaymentMethods(t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"deposit",value:function(){var e=n(i.mark((function e(t,r,n){var a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=3,this.loadMarkets();case 3:if(s=this.currency(t),o={currency:s.id,amount:r},u="privatePostDeposits",!("payment_method_id"in a)){e.next=10;break}u+="PaymentMethod",e.next=15;break;case 10:if(!("coinbase_account_id"in a)){e.next=14;break}u+="CoinbaseAccount",e.next=15;break;case 14:throw new b(this.id+" deposit() requires one of `coinbase_account_id` or `payment_method_id` extra params");case 15:return e.next=17,this[u](this.extend(o,a));case 17:if(c=e.sent){e.next=20;break}throw new v(this.id+" deposit() error: "+this.json(c));case 20:return e.abrupt("return",{info:c,id:c.id});case 21:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"withdraw",value:function(){var e=n(i.mark((function e(t,r,n){var a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.length>3&&void 0!==h[3]?h[3]:void 0,s=h.length>4&&void 0!==h[4]?h[4]:{},this.checkAddress(n),e.next=5,this.loadMarkets();case 5:return o=this.currency(t),u={currency:o.id,amount:r},c="privatePostWithdrawals","payment_method_id"in s?c+="PaymentMethod":"coinbase_account_id"in s?c+="CoinbaseAccount":(c+="Crypto",u.crypto_address=n,void 0!==a&&(u.destination_tag=a)),e.next=11,this[c](this.extend(u,s));case 11:if(d=e.sent){e.next=14;break}throw new v(this.id+" withdraw() error: "+this.json(d));case 14:return e.abrupt("return",{info:d,id:d.id});case 15:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"fetchTransactions",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p,m,g,y=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=y.length>0&&void 0!==y[0]?y[0]:void 0,r=y.length>1&&void 0!==y[1]?y[1]:void 0,n=y.length>2&&void 0!==y[2]?y[2]:void 0,a=y.length>3&&void 0!==y[3]?y[3]:{},e.next=6,this.loadMarkets();case 6:return e.next=8,this.loadAccounts();case 8:if(s=void 0,void 0!==(o=this.safeString(a,"id"))){e.next=18;break}if(void 0===t){e.next=18;break}if(s=this.currency(t),u=this.indexBy(this.accounts,"currency"),void 0!==(c=this.safeValue(u,t))){e.next=17;break}throw new v(this.id+" fetchTransactions() could not find account id for "+t);case 17:o=c.id;case 18:if(d={},void 0!==o&&(d.id=o),void 0!==n&&(d.limit=n),h=void 0,void 0!==o){e.next=29;break}return e.next=25,this.privateGetTransfers(this.extend(d,a));case 25:for(h=e.sent,l=0;l<h.length;l++)f=this.safeString(h[l],"account_id"),p=this.safeValue(this.accountsById,f),m=this.safeString(p,"currency"),h[l].currency=m;e.next=33;break;case 29:return e.next=31,this.privateGetAccountsIdTransfers(this.extend(d,a));case 31:for(h=e.sent,g=0;g<h.length;g++)h[g].currency=t;case 33:return e.abrupt("return",this.parseTransactions(h,s,r,n));case 34:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchDeposits",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:void 0,n=s.length>2&&void 0!==s[2]?s[2]:void 0,a=s.length>3&&void 0!==s[3]?s[3]:{},e.abrupt("return",this.fetchTransactions(t,r,n,this.extend(a,{type:"deposit"})));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchWithdrawals",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:void 0,n=s.length>2&&void 0!==s[2]?s[2]:void 0,a=s.length>3&&void 0!==s[3]?s[3]:{},e.abrupt("return",this.fetchTransactions(t,r,n,this.extend(a,{type:"withdraw"})));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTransactionStatus",value:function(e){if(this.safeValue(e,"canceled_at"))return"canceled";var t=this.safeValue(e,"processed_at"),r=this.safeValue(e,"completed_at");return r?"ok":t&&!r?"failed":"pending"}},{key:"parseTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeValue(e,"details",{}),i=this.safeString(e,"id"),n=this.safeString(r,"crypto_transaction_hash"),a=this.parse8601(this.safeString(e,"created_at")),s=this.parse8601(this.safeString(e,"processed_at")),o=this.safeString(e,"currency"),u=this.safeCurrencyCode(o,t),c=this.parseTransactionStatus(e),d=this.safeNumber(e,"amount"),h=this.safeString(e,"type"),l=this.safeString(r,"crypto_address"),f=this.safeString(r,"destination_tag");l=this.safeString(e,"crypto_address",l);var p=void 0;if("withdraw"===h){h="withdrawal",l=this.safeString(r,"sent_to_address",l);var v=this.safeNumber(r,"fee");void 0!==v&&(void 0!==d&&(d-=v),p={cost:v,currency:u})}return{info:e,id:i,txid:n,timestamp:a,datetime:this.iso8601(a),address:l,tag:f,type:h,amount:d,currency:u,status:c,updated:s,fee:p}}},{key:"createDepositAddress",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>1&&void 0!==l[1]?l[1]:{},e.next=3,this.loadMarkets();case 3:if(n=this.currency(t),void 0!==(a=this.safeValue(this.options,"coinbaseAccounts"))){e.next=11;break}return e.next=8,this.privateGetCoinbaseAccounts();case 8:a=e.sent,this.options.coinbaseAccounts=a,this.options.coinbaseAccountsByCurrencyId=this.indexBy(a,"currency");case 11:if(s=n.id,void 0!==(o=this.safeValue(this.options.coinbaseAccountsByCurrencyId,s))){e.next=15;break}throw new g(this.id+" fetchDepositAddress() could not find currency code "+t+" with id = "+s+" in this.options['coinbaseAccountsByCurrencyId']");case 15:return u={id:o.id},e.next=18,this.privatePostCoinbaseAccountsIdAddresses(this.extend(u,r));case 18:return c=e.sent,d=this.safeString(c,"address"),h=this.safeString(c,"destination_tag"),e.abrupt("return",{currency:t,address:this.checkAddress(d),tag:h,info:c});case 22:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s="/"+this.implodeParams(e,i),o=this.omit(i,this.extractParams(e));"GET"===r&&Object.keys(o).length&&(s+="?"+this.urlencode(o));var u=this.implodeParams(this.urls.api[t],{hostname:this.hostname})+s;if("private"===t){this.checkRequiredCredentials();var c=this.nonce().toString(),d="";"GET"!==r&&Object.keys(o).length&&(d=a=this.json(o));var h=c+r+s+d,l=this.base64ToBinary(this.secret),f=this.hmac(this.encode(h),l,"sha256","base64");n={"CB-ACCESS-KEY":this.apiKey,"CB-ACCESS-SIGN":f,"CB-ACCESS-TIMESTAMP":c,"CB-ACCESS-PASSPHRASE":this.password,"Content-Type":"application/json"}}return{url:u,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,u){if(400===e||404===e){if("{"===a[0]){var c=this.safeString(s,"message"),d=this.id+" "+c;throw this.throwExactlyMatchedException(this.exceptions.exact,c,d),this.throwBroadlyMatchedException(this.exceptions.broad,c,d),new v(d)}throw new v(this.id+" "+a)}}},{key:"request",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:"public",n=c.length>2&&void 0!==c[2]?c[2]:"GET",a=c.length>3&&void 0!==c[3]?c[3]:{},s=c.length>4&&void 0!==c[4]?c[4]:void 0,o=c.length>5&&void 0!==c[5]?c[5]:void 0,e.next=7,this.fetch2(t,r,n,a,s,o);case 7:if("string"===typeof(u=e.sent)){e.next=11;break}if(!("message"in u)){e.next=11;break}throw new v(this.id+" "+this.json(u));case 11:return e.abrupt("return",u);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(h)},function(e,t,r){"use strict";var i=r(7),n=r(8),a=r(1),s=r(2),o=r(6),u=r(3),c=r(4),d=r(5),h=r(11),l=r(10),f=l.BadSymbol,p=l.ExchangeError,v=l.ExchangeNotAvailable,m=l.ArgumentsRequired,g=l.InsufficientFunds,y=l.InvalidOrder,b=l.RateLimitExceeded,x=l.InvalidNonce,k=l.AuthenticationError,w=l.NotSupported,_=r(12);e.exports=function(e){c(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(u(r.prototype),"describe",this).call(this),{id:"fcoin",name:"FCoin",countries:["CN"],rateLimit:2e3,userAgent:this.userAgents.chrome39,version:"v2",accounts:void 0,accountsById:void 0,hostname:"fcoin.com",has:{cancelOrder:!0,CORS:!1,createOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchCurrencies:!1,fetchDepositAddress:!1,fetchMarkets:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrderBooks:!1,fetchOrders:!0,fetchTicker:!0,fetchTime:!0,fetchTrades:!0,fetchTradingLimits:!1,withdraw:!1},timeframes:{"1m":"M1","3m":"M3","5m":"M5","15m":"M15","30m":"M30","1h":"H1","1d":"D1","1w":"W1","1M":"MN"},urls:{logo:"https://user-images.githubusercontent.com/1294454/42244210-c8c42e1e-7f1c-11e8-8710-a5fb63b165c4.jpg",api:{public:"https://api.{hostname}",private:"https://api.{hostname}",market:"https://api.{hostname}",openapi:"https://www.{hostname}"},www:"https://www.fcoin.com",referral:"https://www.fcoin.com/i/Z5P7V",doc:"https://developer.fcoin.com",fees:"https://fcoinjp.zendesk.com/hc/en-us/articles/360018727371"},api:{openapi:{get:["symbols"]},market:{get:["ticker/{symbol}","depth/{level}/{symbol}","trades/{symbol}","candles/{timeframe}/{symbol}"]},public:{get:["symbols","currencies","server-time"]},private:{get:["accounts/balance","assets/accounts/balance","broker/otc/suborders","broker/otc/suborders/{id}","broker/otc/suborders/{id}/payments","broker/otc/users","broker/otc/users/me/balances","broker/otc/users/me/balance","broker/leveraged_accounts/account","broker/leveraged_accounts","orders","orders/{order_id}","orders/{order_id}/match-results"],post:["assets/accounts/assets-to-spot","accounts/spot-to-assets","broker/otc/assets/transfer/in","broker/otc/assets/transfer/out","broker/otc/suborders","broker/otc/suborders/{id}/pay_confirm","broker/otc/suborders/{id}/cancel","broker/leveraged/assets/transfer/in","broker/leveraged/assets/transfer/out","orders","orders/{order_id}/submit-cancel"]}},fees:{trading:{tierBased:!1,percentage:!0,maker:-2e-4,taker:3e-4}},limits:{amount:{min:.01,max:1e5}},options:{createMarketBuyOrderRequiresPrice:!0,fetchMarketsMethod:"fetch_markets_from_open_api",limits:{"BTM/USDT":{amount:{min:.1,max:1e7}},"ETC/USDT":{amount:{min:.001,max:4e5}},"ETH/USDT":{amount:{min:.001,max:1e4}},"LTC/USDT":{amount:{min:.001,max:4e4}},"BCH/USDT":{amount:{min:.001,max:5e3}},"BTC/USDT":{amount:{min:.001,max:1e3}},"ICX/ETH":{amount:{min:.01,max:3e6}},"OMG/ETH":{amount:{min:.01,max:5e5}},"FT/USDT":{amount:{min:1,max:1e7}},"ZIL/ETH":{amount:{min:1,max:1e7}},"ZIP/ETH":{amount:{min:1,max:1e7}},"FT/BTC":{amount:{min:1,max:1e7}},"FT/ETH":{amount:{min:1,max:1e7}}}},exceptions:{400:w,401:k,405:w,429:b,1002:v,1016:g,2136:k,3008:y,6004:x,6005:k,40003:f},commonCurrencies:{DAG:"DAGX",PAI:"PCHAIN",MT:"Mariana Token"}})}},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},r=this.safeString(this.options,"fetchMarketsMethod","fetch_markets_from_open_api"),e.next=4,this[r](t);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMarketsFromOpenAPI",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p,v,m,g,y,b,x=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=x.length>0&&void 0!==x[0]?x[0]:{},e.next=3,this.openapiGetSymbols(t);case 3:for(r=e.sent,n=this.safeValue(r,"data",{}),a=this.safeValue(n,"symbols",{}),s=Object.keys(a),o=[],u=0;u<s.length;u++)c=s[u],d=a[c],h=this.safeString(d,"symbol"),l=this.safeString(d,"base_currency"),f=this.safeString(d,"quote_currency"),p=this.safeCurrencyCode(l),v=this.safeCurrencyCode(f),m=p+"/"+v,g={price:this.safeInteger(d,"price_decimal"),amount:this.safeInteger(d,"amount_decimal")},y={amount:{min:this.safeNumber(d,"limit_amount_min"),max:this.safeNumber(d,"limit_amount_max")},price:{min:Math.pow(10,-g.price),max:Math.pow(10,g.price)},cost:{min:void 0,max:void 0}},b=this.safeValue(d,"tradeable",!1),o.push({id:h,symbol:m,base:p,quote:v,baseId:l,quoteId:f,active:b,precision:g,limits:y,info:d});return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMarketsFromAPI",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p,v,m,g=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=g.length>0&&void 0!==g[0]?g[0]:{},e.next=3,this.publicGetSymbols(t);case 3:for(r=e.sent,n=[],a=this.safeValue(r,"data"),s=0;s<a.length;s++)o=a[s],u=this.safeString(o,"name"),c=this.safeString(o,"base_currency"),d=this.safeString(o,"quote_currency"),h=this.safeCurrencyCode(c),l=this.safeCurrencyCode(d),f=h+"/"+l,p={price:o.price_decimal,amount:o.amount_decimal},v={price:{min:Math.pow(10,-p.price),max:Math.pow(10,p.price)}},m=this.safeValue(o,"tradable",!1),f in this.options.limits&&(v=this.extend(this.options.limits[f],v)),n.push({id:u,symbol:f,base:h,quote:l,baseId:c,quoteId:d,active:m,precision:p,limits:v,info:o});return e.abrupt("return",n);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetAccountsBalance(t);case 5:for(r=e.sent,n={info:r},a=this.safeValue(r,"data"),s=0;s<a.length;s++)o=a[s],u=this.safeString(o,"currency"),c=this.safeCurrencyCode(u),(d=this.account()).free=this.safeString(o,"available"),d.total=this.safeString(o,"balance"),d.used=this.safeString(o,"frozen"),n[c]=d;return e.abrupt("return",this.parseBalance(n,!1));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseBidsAsks",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=[],n=e.length,a=parseInt(n/2),s=0;s<a;s++){var o=2*s,u=this.sum(o,t),c=this.sum(o,r);i.push([this.safeNumber(e,u),this.safeNumber(e,c)])}return i}},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:{},e.next=5,this.loadMarkets();case 5:if(void 0===r){e.next=13;break}if(20!==r&&150!==r){e.next=10;break}r="L"+r.toString(),e.next=11;break;case 10:throw new p(this.id+" fetchOrderBook supports limit of 20 or 150. Other values are not accepted");case 11:e.next=14;break;case 13:r="L20";case 14:return a={symbol:this.marketId(t),level:r},e.next=17,this.marketGetDepthLevelSymbol(this.extend(a,n));case 17:return s=e.sent,o=this.safeValue(s,"data"),e.abrupt("return",this.parseOrderBook(o,o.ts,"bids","asks",0,1));case 20:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={symbol:n.id},e.next=7,this.marketGetTickerSymbol(this.extend(a,r));case 7:return s=e.sent,e.abrupt("return",this.parseTicker(s.data,n));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0,i=void 0;if(void 0===t){var n=this.safeString(e,"type");if(void 0!==n){var a=n.split("."),s=a[1];i=this.safeSymbol(s,t)}}var o=e.ticker,u=this.safeNumber(o,0);return{symbol:i,timestamp:r,datetime:this.iso8601(r),high:this.safeNumber(o,7),low:this.safeNumber(o,8),bid:this.safeNumber(o,2),bidVolume:this.safeNumber(o,3),ask:this.safeNumber(o,4),askVolume:this.safeNumber(o,5),vwap:void 0,open:void 0,close:u,last:u,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeNumber(o,9),quoteVolume:this.safeNumber(o,10),info:e}}},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0;void 0!==t&&(r=t.symbol);var i=this.safeInteger(e,"ts"),n=this.safeStringLower(e,"side"),a=this.safeString(e,"id"),s=this.safeString(e,"price"),o=this.safeString(e,"amount"),u=this.parseNumber(s),c=this.parseNumber(o),d=this.parseNumber(_.stringMul(s,o)),h=void 0;return{id:a,info:e,timestamp:i,datetime:this.iso8601(i),symbol:r,type:void 0,order:void 0,side:n,takerOrMaker:void 0,price:u,amount:c,cost:d,fee:h}}},{key:"fetchTime",value:function(){var e=n(i.mark((function e(){var t,r,n=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},e.next=3,this.publicGetServerTime(t);case 3:return r=e.sent,e.abrupt("return",this.safeInteger(r,"data"));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:50,a=c.length>3&&void 0!==c[3]?c[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={symbol:s.id,limit:n},void 0!==r&&(o.timestamp=parseInt(r/1e3)),e.next=10,this.marketGetTradesSymbol(this.extend(o,a));case 10:return u=e.sent,e.abrupt("return",this.parseTrades(u.data,s,r,n));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=d.length>4&&void 0!==d[4]?d[4]:void 0,o=d.length>5&&void 0!==d[5]?d[5]:{},e.next=4,this.loadMarkets();case 4:if(u={symbol:this.marketId(t),side:n,type:r},"market"!==r||"buy"!==n){e.next=17;break}if(!this.options.createMarketBuyOrderRequiresPrice){e.next=14;break}if(void 0!==s){e.next=11;break}throw new y(this.id+" createOrder() requires the price argument with market buy orders to calculate total order cost (amount to spend), where cost = amount * price. Supply a price argument to createOrder() call if you want the cost to be calculated for you from price and amount, or, alternatively, add .options['createMarketBuyOrderRequiresPrice'] = false to supply the cost in the amount argument (the exchange-specific behaviour)");case 11:u.amount=this.costToPrecision(t,a*s);case 12:e.next=15;break;case 14:u.amount=this.costToPrecision(t,a);case 15:e.next=18;break;case 17:u.amount=this.amountToPrecision(t,a);case 18:return"limit"!==r&&"ioc"!==r&&"fok"!==r||(u.price=this.priceToPrecision(t,s)),e.next=21,this.privatePostOrders(this.extend(u,o));case 21:return c=e.sent,e.abrupt("return",{info:c,id:c.data});case 23:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.length>1&&void 0!==o[1]?o[1]:void 0,r=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return n={order_id:t},e.next=7,this.privatePostOrdersOrderIdSubmitCancel(this.extend(n,r));case 7:return a=e.sent,s=this.parseOrder(a),e.abrupt("return",this.extend(s,{id:t,status:"canceled"}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({submitted:"open",canceled:"canceled",partial_filled:"open",partial_canceled:"canceled",filled:"closed",pending_cancel:"canceled"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),i=this.safeString(e,"side"),n=this.parseOrderStatus(this.safeString(e,"state")),a=this.safeString(e,"symbol"),s=(t=this.safeMarket(a,t)).symbol,o=this.safeString(e,"type"),u=this.safeInteger(e,"created_at"),c=this.safeNumber(e,"amount"),d=this.safeNumber(e,"filled_amount"),h=this.safeNumber(e,"price"),l=this.safeNumber(e,"executed_value"),f=void 0,p=void 0,v=this.safeNumber(e,"fees_income");return void 0!==v&&v>0?(void 0!==t&&(f="buy"===i?t.quote:t.base),p=-v):(p=this.safeNumber(e,"fill_fees"),void 0!==t&&(f="buy"===i?t.base:t.quote)),this.safeOrder({info:e,id:r,clientOrderId:void 0,timestamp:u,datetime:this.iso8601(u),lastTradeTimestamp:void 0,symbol:s,type:o,timeInForce:void 0,postOnly:void 0,side:i,price:h,stopPrice:void 0,cost:l,amount:c,remaining:void 0,filled:d,average:void 0,status:n,fee:{cost:p,currency:f},trades:void 0})}},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.loadMarkets();case 4:return n={order_id:t},e.next=7,this.privateGetOrdersOrderId(this.extend(n,r));case 7:return a=e.sent,e.abrupt("return",this.parseOrder(a.data));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:void 0,a=o.length>3&&void 0!==o[3]?o[3]:{},s={states:"submitted,partial_filled"},e.next=7,this.fetchOrders(t,r,n,this.extend(s,a));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:void 0,a=o.length>3&&void 0!==o[3]?o[3]:{},s={states:"partial_canceled,filled"},e.next=7,this.fetchOrders(t,r,n,this.extend(s,a));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=c.length>0&&void 0!==c[0]?c[0]:void 0,r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},void 0!==t){e.next=6;break}throw new m(this.id+" fetchOrders() requires a `symbol` argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.market(t),o={symbol:s.id,states:"submitted,partial_filled,partial_canceled,filled,canceled"},void 0!==n&&(o.limit=n),e.next=13,this.privateGetOrders(this.extend(o,a));case 13:return u=e.sent,e.abrupt("return",this.parseOrders(u.data,s,r,n));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){return[this.safeTimestamp(e,"id"),this.safeNumber(e,"open"),this.safeNumber(e,"high"),this.safeNumber(e,"low"),this.safeNumber(e,"close"),this.safeNumber(e,"base_vol")]}},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=f.length>1&&void 0!==f[1]?f[1]:"1m",n=f.length>2&&void 0!==f[2]?f[2]:void 0,a=f.length>3&&void 0!==f[3]?f[3]:void 0,s=f.length>4&&void 0!==f[4]?f[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),void 0===a&&(a=20),u={symbol:o.id,timeframe:this.timeframes[r],limit:a},void 0!==n&&(c=parseInt(n/1e3),d=a*this.parseTimeframe(r),u.before=this.sum(c,d)-1),e.next=12,this.marketGetCandlesTimeframeSymbol(this.extend(u,s));case 12:return h=e.sent,l=this.safeValue(h,"data",[]),e.abrupt("return",this.parseOHLCVs(l,o,r,n,a));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"nonce",value:function(){return this.milliseconds()}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s="/",o="openapi"===t,u="private"===t;s+=o?t+"/":"",s+=this.version+"/",s+=u||o?"":t+"/",s+=this.implodeParams(e,i);var c=this.omit(i,this.extractParams(e)),d=this.implodeParams(this.urls.api[t],{hostname:this.hostname});if(d+=s,u){this.checkRequiredCredentials();var h=this.nonce().toString();c=this.keysort(c),"GET"===r&&Object.keys(c).length&&(d+="?"+this.rawencode(c));var l=r+d+h;"POST"===r&&Object.keys(c).length&&(a=this.json(c),l+=this.urlencode(c));var f=this.stringToBase64(l),p=this.hmac(f,this.encode(this.secret),"sha1","binary");p=this.decode(this.stringToBase64(p)),n={"FC-ACCESS-KEY":this.apiKey,"FC-ACCESS-SIGNATURE":p,"FC-ACCESS-TIMESTAMP":h,"Content-Type":"application/json"}}else Object.keys(c).length&&(d+="?"+this.urlencode(c));return{url:d,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,u){if(void 0!==s){var c=this.safeString(s,"status");if("0"!==c&&"ok"!==c){var d=this.id+" "+a;throw this.throwExactlyMatchedException(this.exceptions,c,d),new p(d)}}}}]),r}(h)},function(e,t,r){"use strict";var i=r(21),n=r(7),a=r(8),s=r(1),o=r(2),u=r(6),c=r(3),d=r(4),h=r(5),l=r(11),f=r(10),p=f.ExchangeError,v=f.ExchangeNotAvailable,m=f.OnMaintenance,g=f.ArgumentsRequired,y=f.BadRequest,b=f.AccountSuspended,x=f.InvalidAddress,k=f.PermissionDenied,w=f.DDoSProtection,_=f.InsufficientFunds,S=f.InvalidNonce,O=f.CancelPending,T=f.InvalidOrder,C=f.OrderNotFound,I=f.AuthenticationError,M=f.RequestTimeout,A=f.NotSupported,E=f.BadSymbol,N=f.RateLimitExceeded,P=r(18),D=P.TICK_SIZE,L=P.TRUNCATE,B=r(12);e.exports=function(e){d(r,e);var t=h(r);function r(){return s(this,r),t.apply(this,arguments)}return o(r,[{key:"describe",value:function(){return this.deepExtend(u(c(r.prototype),"describe",this).call(this),{id:"okex",name:"OKEX",countries:["CN","US"],version:"v3",rateLimit:1e3,pro:!0,has:{cancelOrder:!0,CORS:!1,createOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchCurrencies:!1,fetchDepositAddress:!0,fetchDeposits:!0,fetchLedger:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!1,fetchOrderTrades:!0,fetchTime:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,fetchTransactions:!1,fetchWithdrawals:!0,futures:!0,withdraw:!0},timeframes:{"1m":"60","3m":"180","5m":"300","15m":"900","30m":"1800","1h":"3600","2h":"7200","4h":"14400","6h":"21600","12h":"43200","1d":"86400","1w":"604800","1M":"2678400","3M":"8035200","6M":"16070400","1y":"31536000"},hostname:"okex.com",urls:{logo:"https://user-images.githubusercontent.com/1294454/32552768-0d6dd3c6-c4a6-11e7-90f8-c043b64756a7.jpg",api:{rest:"https://www.{hostname}"},www:"https://www.okex.com",doc:"https://www.okex.com/docs/en/",fees:"https://www.okex.com/pages/products/fees.html",referral:"https://www.okex.com/join/1888677",test:{rest:"https://testnet.okex.com"}},api:{general:{get:["time"]},account:{get:["wallet","sub-account","asset-valuation","wallet/{currency}","withdrawal/history","withdrawal/history/{currency}","ledger","deposit/address","deposit/history","deposit/history/{currency}","currencies","withdrawal/fee"],post:["transfer","withdrawal"]},spot:{get:["accounts","accounts/{currency}","accounts/{currency}/ledger","orders","amend_order/{instrument_id}","orders_pending","orders/{order_id}","orders/{client_oid}","trade_fee","fills","algo","instruments","instruments/{instrument_id}/book","instruments/ticker","instruments/{instrument_id}/ticker","instruments/{instrument_id}/trades","instruments/{instrument_id}/candles","instruments/{instrument_id}/history/candles"],post:["order_algo","orders","batch_orders","cancel_orders/{order_id}","cancel_orders/{client_oid}","cancel_batch_algos","cancel_batch_orders"]},margin:{get:["accounts","accounts/{instrument_id}","accounts/{instrument_id}/ledger","accounts/availability","accounts/{instrument_id}/availability","accounts/borrowed","accounts/{instrument_id}/borrowed","orders","accounts/{instrument_id}/leverage","orders/{order_id}","orders/{client_oid}","orders_pending","fills","instruments/{instrument_id}/mark_price"],post:["accounts/borrow","accounts/repayment","orders","batch_orders","cancel_orders","cancel_orders/{order_id}","cancel_orders/{client_oid}","cancel_batch_orders","accounts/{instrument_id}/leverage"]},futures:{get:["position","{instrument_id}/position","accounts","accounts/{underlying}","accounts/{underlying}/leverage","accounts/{underlying}/ledger","order_algo/{instrument_id}","orders/{instrument_id}","orders/{instrument_id}/{order_id}","orders/{instrument_id}/{client_oid}","fills","trade_fee","accounts/{instrument_id}/holds","order_algo/{instrument_id}","instruments","instruments/{instrument_id}/book","instruments/ticker","instruments/{instrument_id}/ticker","instruments/{instrument_id}/trades","instruments/{instrument_id}/candles","instruments/{instrument_id}/history/candles","instruments/{instrument_id}/index","rate","instruments/{instrument_id}/estimated_price","instruments/{instrument_id}/open_interest","instruments/{instrument_id}/price_limit","instruments/{instrument_id}/mark_price","instruments/{instrument_id}/liquidation"],post:["accounts/{underlying}/leverage","order","amend_order/{instrument_id}","orders","cancel_order/{instrument_id}/{order_id}","cancel_order/{instrument_id}/{client_oid}","cancel_batch_orders/{instrument_id}","accounts/margin_mode","close_position","cancel_all","order_algo","cancel_algos"]},swap:{get:["position","{instrument_id}/position","accounts","{instrument_id}/accounts","accounts/{instrument_id}/settings","accounts/{instrument_id}/ledger","orders/{instrument_id}","orders/{instrument_id}/{order_id}","orders/{instrument_id}/{client_oid}","fills","accounts/{instrument_id}/holds","trade_fee","order_algo/{instrument_id}","instruments","instruments/{instrument_id}/depth","instruments/ticker","instruments/{instrument_id}/ticker","instruments/{instrument_id}/trades","instruments/{instrument_id}/candles","instruments/{instrument_id}/history/candles","instruments/{instrument_id}/index","rate","instruments/{instrument_id}/open_interest","instruments/{instrument_id}/price_limit","instruments/{instrument_id}/liquidation","instruments/{instrument_id}/funding_time","instruments/{instrument_id}/mark_price","instruments/{instrument_id}/historical_funding_rate"],post:["accounts/{instrument_id}/leverage","order","amend_order/{instrument_id}","orders","cancel_order/{instrument_id}/{order_id}","cancel_order/{instrument_id}/{client_oid}","cancel_batch_orders/{instrument_id}","order_algo","cancel_algos","close_position","cancel_all","order_algo","cancel_algos"]},option:{get:["accounts","position","{underlying}/position","accounts/{underlying}","orders/{underlying}","fills/{underlying}","accounts/{underlying}/ledger","trade_fee","orders/{underlying}/{order_id}","orders/{underlying}/{client_oid}","underlying","instruments/{underlying}","instruments/{underlying}/summary","instruments/{underlying}/summary/{instrument_id}","instruments/{instrument_id}/book","instruments/{instrument_id}/trades","instruments/{instrument_id}/ticker","instruments/{instrument_id}/candles"],post:["order","orders","cancel_order/{underlying}/{order_id}","cancel_order/{underlying}/{client_oid}","cancel_batch_orders/{underlying}","amend_order/{underlying}","amend_batch_orders/{underlying}"]},index:{get:["{instrument_id}/constituents"]}},fees:{trading:{taker:.0015,maker:.001},spot:{taker:.0015,maker:.001},futures:{taker:5e-4,maker:2e-4},swap:{taker:75e-5,maker:2e-4}},requiredCredentials:{apiKey:!0,secret:!0,password:!0},exceptions:{exact:{1:p,"failure to get a peer from the ring-balancer":v,"Server is busy, please try again.":v,"An unexpected error occurred":p,"System error":p,4010:k,4001:p,4002:p,30001:I,30002:I,30003:I,30004:I,30005:S,30006:I,30007:y,30008:M,30009:p,30010:I,30011:k,30012:I,30013:I,30014:w,30015:I,30016:p,30017:p,30018:p,30019:v,30020:y,30021:y,30022:k,30023:y,30024:E,30025:y,30026:w,30027:I,30028:k,30029:b,30030:v,30031:y,30032:E,30033:y,30034:p,30035:p,30036:p,30037:v,30038:m,30044:M,32001:b,32002:k,32003:O,32004:p,32005:T,32006:T,32007:T,32008:T,32009:T,32010:p,32011:p,32012:p,32013:p,32014:p,32015:p,32016:p,32017:p,32018:p,32019:p,32020:p,32021:p,32022:p,32023:p,32024:p,32025:p,32026:p,32027:p,32028:p,32029:p,32030:T,32031:g,32038:I,32040:p,32044:p,32045:p,32046:p,32047:p,32048:T,32049:p,32050:T,32051:T,32052:p,32053:p,32057:p,32054:p,32055:T,32056:p,32058:p,32059:T,32060:T,32061:T,32062:T,32063:T,32064:p,32065:p,32066:p,32067:p,32068:p,32069:p,32070:p,32071:p,32072:p,32073:p,32074:p,32075:p,32076:p,32077:p,32078:p,32079:p,32080:p,32083:p,33001:k,33002:b,33003:_,33004:p,33005:p,33006:p,33007:p,33008:_,33009:p,33010:p,33011:p,33012:p,33013:T,33014:C,33015:T,33016:p,33017:_,33018:p,33020:p,33021:y,33022:T,33023:p,33024:T,33025:T,33026:p,33027:T,33028:T,33029:T,33034:p,33035:p,33036:p,33037:p,33038:p,33039:p,33040:p,33041:p,33042:p,33043:p,33044:p,33045:p,33046:p,33047:p,33048:p,33049:p,33050:p,33051:p,33059:y,33060:y,33061:p,33062:p,33063:p,33064:p,33065:p,33085:T,21009:p,34001:k,34002:x,34003:p,34004:p,34005:p,34006:p,34007:p,34008:_,34009:p,34010:p,34011:p,34012:p,34013:p,34014:p,34015:p,34016:k,34017:b,34018:I,34019:k,34020:k,34021:x,34022:p,34023:k,34026:N,34036:p,34037:p,34038:p,34039:p,35001:p,35002:p,35003:p,35004:p,35005:I,35008:T,35010:T,35012:T,35014:T,35015:T,35017:p,35019:T,35020:T,35021:T,35022:y,35024:y,35025:_,35026:y,35029:C,35030:T,35031:T,35032:p,35037:p,35039:_,35040:T,35044:p,35046:_,35047:_,35048:p,35049:T,35050:T,35052:_,35053:p,35055:_,35057:p,35058:p,35059:y,35060:y,35061:y,35062:T,35063:T,35064:T,35066:T,35067:T,35068:T,35069:T,35070:T,35071:T,35072:T,35073:T,35074:T,35075:T,35076:T,35077:T,35078:T,35079:T,35080:T,35081:T,35082:T,35083:T,35084:T,35085:T,35086:T,35087:T,35088:T,35089:T,35090:p,35091:p,35092:p,35093:p,35094:p,35095:y,35096:p,35097:p,35098:p,35099:p,35102:N,36001:y,36002:y,36005:p,36101:I,36102:k,36103:k,36104:k,36105:k,36106:k,36107:k,36108:_,36109:k,36201:k,36202:k,36203:T,36204:p,36205:y,36206:y,36207:T,36208:T,36209:T,36210:T,36211:T,36212:T,36213:T,36214:p,36216:C,36217:T,36218:T,36219:T,36220:T,36221:T,36222:T,36223:T,36224:T,36225:T,36226:T,36227:T,36228:T,36229:T,36230:T},broad:{}},precisionMode:D,options:{fetchOHLCV:{type:"Candles"},createMarketBuyOrderRequiresPrice:!0,fetchMarkets:["spot","futures","swap","option"],defaultType:"spot",auth:{time:"public",currencies:"private",instruments:"public",rate:"public","{instrument_id}/constituents":"public"}},commonCurrencies:{AE:"AET",BOX:"DefiBox",HOT:"Hydro Protocol",HSR:"HC",MAG:"Maggie",SBTC:"Super Bitcoin",YOYO:"YOYOW",WIN:"WinToken"}})}},{key:"fetchTime",value:function(){var e=a(n.mark((function e(){var t,r,i=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},e.next=3,this.generalGetTime(t);case 3:return r=e.sent,e.abrupt("return",this.parse8601(this.safeString(r,"iso")));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMarkets",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=o.length>0&&void 0!==o[0]?o[0]:{},r=this.safeValue(this.options,"fetchMarkets"),i=[],a=0;case 4:if(!(a<r.length)){e.next=12;break}return e.next=7,this.fetchMarketsByType(r[a],t);case 7:s=e.sent,i=this.arrayConcat(i,s);case 9:a++,e.next=4;break;case 12:return e.abrupt("return",i);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseMarkets",value:function(e){for(var t=[],r=0;r<e.length;r++)t.push(this.parseMarket(e[r]));return t}},{key:"parseMarket",value:function(e){var t=this.safeString(e,"instrument_id"),r="spot",i=!0,n=!1,a=!1,s=!1,o=this.safeString(e,"base_currency"),u=this.safeString(e,"quote_currency");if(void 0!==this.safeNumber(e,"contract_val"))if("option_type"in e){r="option",i=!1,s=!0;var c=this.safeString(e,"underlying").split("-");o=this.safeString(c,0),u=this.safeString(c,1)}else{r="swap",i=!1,a=!0,void 0!==this.safeString(e,"alias")&&(a=!1,n=!0,r="futures",o=this.safeString(e,"underlying_index"))}var d=this.safeCurrencyCode(o),h=this.safeCurrencyCode(u),l=i?d+"/"+h:t,f=this.safeNumber2(e,"lot_size","trade_increment"),p={amount:this.safeNumber(e,"size_increment",f),price:this.safeNumber(e,"tick_size")},v=this.safeNumber2(e,"min_size","base_min_size"),m=this.safeValue2(this.fees,r,"trading",{});return this.extend(m,{id:t,symbol:l,base:d,quote:h,baseId:o,quoteId:u,info:e,type:r,spot:i,futures:n,swap:a,option:s,active:!0,precision:p,limits:{amount:{min:v,max:void 0},price:{min:p.price,max:void 0},cost:{min:p.price,max:void 0}}})}},{key:"fetchMarketsByType",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,u,c,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=d.length>1&&void 0!==d[1]?d[1]:{},"option"!==t){e.next=18;break}return e.next=4,this.optionGetUnderlying(r);case 4:i=e.sent,a=[],s=0;case 7:if(!(s<i.length)){e.next=15;break}return e.next=10,this.optionGetInstrumentsUnderlying({underlying:i[s]});case 10:o=e.sent,a=this.arrayConcat(a,o);case 12:s++,e.next=7;break;case 15:return e.abrupt("return",this.parseMarkets(a));case 18:if("spot"!==t&&"futures"!==t&&"swap"!==t){e.next=26;break}return u=t+"GetInstruments",e.next=22,this[u](r);case 22:return c=e.sent,e.abrupt("return",this.parseMarkets(c));case 26:throw new A(this.id+" fetchMarketsByType does not support market type "+t);case 27:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchCurrencies",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,u,c,d,h,l,f,p=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.length>0&&void 0!==p[0]?p[0]:{},e.next=3,this.accountGetCurrencies(t);case 3:for(r=e.sent,i={},a=0;a<r.length;a++)s=r[a],o=this.safeString(s,"currency"),u=this.safeCurrencyCode(o),c=1e-8,d=this.safeString(s,"name"),h=this.safeInteger(s,"can_deposit"),l=this.safeInteger(s,"can_withdraw"),f=!(!h||!l),i[u]={id:o,code:u,info:s,type:void 0,name:d,active:f,fee:void 0,precision:c,limits:{amount:{min:void 0,max:void 0},withdraw:{min:this.safeNumber(s,"min_withdrawal"),max:void 0}}};return e.abrupt("return",i);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,u,c,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,i=d.length>2&&void 0!==d[2]?d[2]:{},e.next=4,this.loadMarkets();case 4:return a=this.market(t),s=a.type+"GetInstrumentsInstrumentId",s+="swap"===a.type?"Depth":"Book",o={instrument_id:a.id},void 0!==r&&(o.size=r),e.next=11,this[s](this.extend(o,i));case 11:return u=e.sent,c=this.parse8601(this.safeString2(u,"timestamp","time")),e.abrupt("return",this.parseOrderBook(u,c));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.parse8601(this.safeString(e,"timestamp")),n=void 0,a=this.safeString(e,"instrument_id");if(a in this.markets_by_id)n=(t=this.markets_by_id[a]).symbol;else if(void 0!==a){var s=a.split("-"),o=s.length;if(2===o){var u=i(s,2),c=u[0],d=u[1],h=this.safeCurrencyCode(c),l=this.safeCurrencyCode(d);n=h+"/"+l}else n=a}void 0===n&&void 0!==t&&(n=t.symbol);var f=this.safeNumber(e,"last"),p=this.safeNumber(e,"open_24h");return{symbol:n,timestamp:r,datetime:this.iso8601(r),high:this.safeNumber(e,"high_24h"),low:this.safeNumber(e,"low_24h"),bid:this.safeNumber(e,"best_bid"),bidVolume:this.safeNumber(e,"best_bid_size"),ask:this.safeNumber(e,"best_ask"),askVolume:this.safeNumber(e,"best_ask_size"),vwap:void 0,open:p,close:f,last:f,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeNumber(e,"base_volume_24h"),quoteVolume:this.safeNumber(e,"quote_volume_24h"),info:e}}},{key:"fetchTicker",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:{},e.next=3,this.loadMarkets();case 3:return i=this.market(t),a=i.type+"GetInstrumentsInstrumentIdTicker",s={instrument_id:i.id},e.next=8,this[a](this.extend(s,r));case 8:return o=e.sent,e.abrupt("return",this.parseTicker(o));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTickersByType",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,u,c,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:void 0,i=h.length>2&&void 0!==h[2]?h[2]:{},e.next=4,this.loadMarkets();case 4:return a=t+"GetInstrumentsTicker",e.next=7,this[a](i);case 7:for(s=e.sent,o={},u=0;u<s.length;u++)c=this.parseTicker(s[u]),d=c.symbol,o[d]=c;return e.abrupt("return",this.filterByArray(o,"symbol",r));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTickers",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:{},i=this.safeString2(this.options,"fetchTickers","defaultType"),a=this.safeString(r,"type",i),e.next=6,this.fetchTickersByType(a,t,this.omit(r,"type"));case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0,n=this.safeString(e,"instrument_id"),a=void 0,s=void 0;if(n in this.markets_by_id)r=(t=this.markets_by_id[n]).symbol,a=t.base,s=t.quote;else if(void 0!==n){var o=n.split("-"),u=o.length;if(2===u){var c=i(o,2),d=c[0],h=c[1];r=(a=this.safeCurrencyCode(d))+"/"+(s=this.safeCurrencyCode(h))}else r=n}void 0===r&&void 0!==t&&(r=t.symbol,a=t.base,s=t.quote);var l=this.parse8601(this.safeString2(e,"timestamp","created_at")),f=this.safeString(e,"price"),p=this.safeString2(e,"size","qty");p=this.safeString(e,"order_qty",p);var v=this.parseNumber(f),m=this.parseNumber(p),g=this.parseNumber(B.stringMul(f,p)),y=this.safeString2(e,"exec_type","liquidity");"M"===y?y="maker":"T"===y&&(y="taker");var b=this.safeString(e,"side"),x=this.safeNumber(e,"fee"),k=void 0;if(void 0!==x){var w="buy"===b?a:s;k={cost:-x,currency:w}}var _=this.safeString(e,"order_id");return{info:e,timestamp:l,datetime:this.iso8601(l),symbol:r,id:this.safeString2(e,"trade_id","ledger_id"),order:_,type:void 0,takerOrMaker:y,side:b,price:v,amount:m,cost:g,fee:k}}},{key:"fetchTrades",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,u,c,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,i=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o=s.type+"GetInstrumentsInstrumentIdTrades",(void 0===i||i>100)&&(i=100),u={instrument_id:s.id,limit:i},e.next=11,this[o](this.extend(u,a));case 11:return c=e.sent,e.abrupt("return",this.parseTrades(c,s,r,i));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){if(Array.isArray(e)){var t=e.length,r=t>6?6:5,i=this.safeValue(e,0);return"string"===typeof i&&(i=this.parse8601(i)),[i,this.safeNumber(e,1),this.safeNumber(e,2),this.safeNumber(e,3),this.safeNumber(e,4),this.safeNumber(e,r)]}return[this.parse8601(this.safeString(e,"time")),this.safeNumber(e,"open"),this.safeNumber(e,"high"),this.safeNumber(e,"low"),this.safeNumber(e,"close"),this.safeNumber(e,"volume")]}},{key:"fetchOHLCV",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,u,c,d,h,l,f,p,v,m,g=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=g.length>1&&void 0!==g[1]?g[1]:"1m",i=g.length>2&&void 0!==g[2]?g[2]:void 0,a=g.length>3&&void 0!==g[3]?g[3]:void 0,s=g.length>4&&void 0!==g[4]?g[4]:{},e.next=6,this.loadMarkets();case 6:if(o=this.market(t),u=this.parseTimeframe(r),c={instrument_id:o.id,granularity:this.timeframes[r]},d=this.safeValue(this.options,"fetchOHLCV",{}),h=this.safeString(d,"type","Candles"),l=this.safeString(s,"type",h),s=this.omit(s,"type"),f=o.type+"GetInstrumentsInstrumentId"+l,"Candles"!==l){e.next=18;break}void 0!==i?(void 0!==a&&(c.end=this.iso8601(this.sum(i,a*u*1e3))),c.start=this.iso8601(i)):void 0!==a&&(p=this.milliseconds(),c.start=this.iso8601(p-a*u*1e3),c.end=this.iso8601(p)),e.next=22;break;case 18:if("HistoryCandles"!==l){e.next=22;break}if(!o.option){e.next=21;break}throw new A(this.id+" fetchOHLCV does not have "+l+" for "+o.type+" markets");case 21:void 0!==i?(void 0===a&&(a=300),c.start=this.iso8601(this.sum(i,a*u*1e3)),c.end=this.iso8601(i)):void 0!==a&&(v=this.milliseconds(),c.end=this.iso8601(v-a*u*1e3),c.start=this.iso8601(v));case 22:return e.next=24,this[f](this.extend(c,s));case 24:return m=e.sent,e.abrupt("return",this.parseOHLCVs(m,o,r,i,a));case 26:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseAccountBalance",value:function(e){for(var t={info:e},r=0;r<e.length;r++){var i=e[r],n=this.safeString(i,"currency"),a=this.safeCurrencyCode(n),s=this.account();s.total=this.safeNumber(i,"balance"),s.used=this.safeNumber(i,"hold"),s.free=this.safeNumber(i,"available"),t[a]=s}return this.parseBalance(t)}},{key:"parseMarginBalance",value:function(e){for(var t={info:e},r=0;r<e.length;r++){var n=e[r],a=this.safeString(n,"instrument_id"),s=this.safeValue(this.markets_by_id,a),o=void 0;if(void 0===s){var u=a.split("-"),c=i(u,2),d=c[0],h=c[1];o=this.safeCurrencyCode(d)+"/"+this.safeCurrencyCode(h)}else o=s.symbol;for(var l=this.omit(n,["instrument_id","liquidation_price","product_id","risk_rate","margin_ratio","maint_margin_ratio","tiers"]),f=Object.keys(l),p={},v=0;v<f.length;v++){var m=f[v],g=n[m];if(!(m.indexOf(":")>=0))throw new A(this.id+" margin balance response format has changed!");var y=m.split(":")[1],b=this.safeCurrencyCode(y),x=this.account();x.total=this.safeNumber(g,"balance"),x.used=this.safeNumber(g,"hold"),x.free=this.safeNumber(g,"available"),p[b]=x}t[o]=this.parseBalance(p)}return t}},{key:"parseFuturesBalance",value:function(e){for(var t={info:e},r=this.safeValue(e,"info",{}),i=Object.keys(r),n=0;n<i.length;n++){var a=i[n],s=this.safeCurrencyCode(a),o=this.safeValue(r,a,{}),u=this.account(),c=this.safeNumber(o,"total_avail_balance");if("fixed"===this.safeString(o,"margin_mode")){for(var d=this.safeValue(o,"contracts",[]),h=c,l=0;l<d.length;l++){var f=d[l],p=this.safeNumber(f,"fixed_balance"),v=this.safeNumber(f,"realized_pnl"),m=this.safeNumber(f,"margin_frozen"),g=this.safeNumber(f,"margin_for_unfilled"),y=this.sum(p,v)-m-g;h=this.sum(h,y)}u.free=h}else{var b=this.safeNumber(o,"realized_pnl"),x=this.safeNumber(o,"unrealized_pnl"),k=this.safeNumber(o,"margin_frozen"),w=this.safeNumber(o,"margin_for_unfilled");u.free=this.sum(c,b,x)-k-w}u.total=this.safeNumber(o,"equity"),t[s]=u}return this.parseBalance(t)}},{key:"parseSwapBalance",value:function(e){for(var t={info:e},r=this.safeValue(e,"info",[]),i=0;i<r.length;i++){var n=r[i],a=this.safeString(n,"instrument_id"),s=a;a in this.markets_by_id&&(s=this.markets_by_id[a].symbol);var o=this.account();o.total=this.safeNumber(n,"equity"),o.free=this.safeNumber(n,"total_avail_balance"),t[s]=o}return this.parseBalance(t)}},{key:"fetchBalance",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.length>0&&void 0!==u[0]?u[0]:{},r=this.safeString2(this.options,"fetchBalance","defaultType"),void 0!==(i=this.safeString(t,"type",r))){e.next=5;break}throw new g(this.id+" fetchBalance() requires a type parameter (one of 'account', 'spot', 'margin', 'futures', 'swap')");case 5:return e.next=7,this.loadMarkets();case 7:return a=i+"Get"+("account"===i?"Wallet":"Accounts"),s=this.omit(t,"type"),e.next=12,this[a](s);case 12:return o=e.sent,e.abrupt("return",this.parseBalanceByType(i,o));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseBalanceByType",value:function(e,t){if("account"===e||"spot"===e)return this.parseAccountBalance(t);if("margin"===e)return this.parseMarginBalance(t);if("futures"===e)return this.parseFuturesBalance(t);if("swap"===e)return this.parseSwapBalance(t);throw new A(this.id+" fetchBalance does not support the '"+e+"' type (the type must be one of 'account', 'spot', 'margin', 'futures', 'swap')")}},{key:"createOrder",value:function(){var e=a(n.mark((function e(t,r,i,a){var s,o,u,c,d,h,l,f,p,v,m,g,y,b=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=b.length>4&&void 0!==b[4]?b[4]:void 0,o=b.length>5&&void 0!==b[5]?b[5]:{},e.next=4,this.loadMarkets();case 4:if(u=this.market(t),c={instrument_id:u.id},void 0!==(d=this.safeString2(o,"client_oid","clientOrderId"))&&(c.client_oid=d,o=this.omit(o,["client_oid","clientOrderId"])),h=void 0,!u.futures&&!u.swap){e.next=19;break}l=u.futures?this.numberToString(a):this.amountToPrecision(t,a),c=this.extend(c,{type:r,size:l}),f=this.safeString(o,"order_type"),"market"===r||"4"===f?c.order_type="4":c.price=this.priceToPrecision(t,s),u.futures&&(c.leverage="10"),h=u.type+"PostOrder",e.next=46;break;case 19:if(p=this.safeString(o,"margin_trading","1"),c=this.extend(c,{side:i,type:r,margin_trading:p}),"limit"!==r){e.next=26;break}c.price=this.priceToPrecision(t,s),c.size=this.amountToPrecision(t,a),e.next=45;break;case 26:if("market"!==r){e.next=45;break}if("buy"!==i){e.next=44;break}if(v=this.safeNumber(o,"notional"),!this.safeValue(this.options,"createMarketBuyOrderRequiresPrice",!0)){e.next=39;break}if(void 0===s){e.next=35;break}void 0===v&&(v=a*s),e.next=37;break;case 35:if(void 0!==v){e.next=37;break}throw new T(this.id+" createOrder() requires the price argument with market buy orders to calculate total order cost (amount to spend), where cost = amount * price. Supply a price argument to createOrder() call if you want the cost to be calculated for you from price and amount, or, alternatively, add .options['createMarketBuyOrderRequiresPrice'] = false and supply the total cost value in the 'amount' argument or in the 'notional' extra parameter (the exchange-specific behaviour)");case 37:e.next=40;break;case 39:v=void 0===v?a:v;case 40:m=u.precision.price,c.notional=this.decimalToPrecision(v,L,m,this.precisionMode),e.next=45;break;case 44:c.size=this.amountToPrecision(t,a);case 45:h="2"===p?"marginPostOrders":"spotPostOrders";case 46:return e.next=48,this[h](this.extend(c,o));case 48:return g=e.sent,y=this.parseOrder(g,u),e.abrupt("return",this.extend(y,{type:r,side:i}));case 51:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,u,c,d,h,l,f,p=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=p.length>1&&void 0!==p[1]?p[1]:void 0,i=p.length>2&&void 0!==p[2]?p[2]:{},void 0!==r){e.next=4;break}throw new g(this.id+" cancelOrder() requires a symbol argument");case 4:return e.next=6,this.loadMarkets();case 6:if(a=this.market(r),s=void 0,a.futures||a.swap?s=a.type:(o=this.safeString2(this.options,"cancelOrder","defaultType",a.type),s=this.safeString(i,"type",o)),void 0!==s){e.next=11;break}throw new g(this.id+" cancelOrder() requires a type parameter (one of 'spot', 'margin', 'futures', 'swap').");case 11:return u=s+"PostCancelOrder",c={instrument_id:a.id},a.futures||a.swap?u+="InstrumentId":u+="s",void 0!==(d=this.safeString2(i,"client_oid","clientOrderId"))?(u+="ClientOid",c.client_oid=d):(u+="OrderId",c.order_id=t),h=this.omit(i,["type","client_oid","clientOrderId"]),e.next=19,this[u](this.extend(c,h));case 19:return l=e.sent,f="result"in l?l:this.safeValue(l,a.id,{}),e.abrupt("return",this.parseOrder(f,a));case 22:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({"-2":"failed","-1":"canceled",0:"open",1:"open",2:"closed",3:"open",4:"canceled"},e,e)}},{key:"parseOrderSide",value:function(e){return this.safeString({1:"buy",2:"sell",3:"sell",4:"buy"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"order_id"),i=this.parse8601(this.safeString(e,"timestamp")),n=this.safeString(e,"side"),a=this.safeString(e,"type");"buy"!==n&&"sell"!==n&&(n=this.parseOrderSide(a));var s=void 0,o=this.safeString(e,"instrument_id");s=o in this.markets_by_id?(t=this.markets_by_id[o]).symbol:o,void 0!==t&&void 0===s&&(s=t.symbol);var u=this.safeNumber(e,"size"),c=this.safeNumber2(e,"filled_size","filled_qty"),d=void 0;void 0!==u&&void 0!==c&&(u=Math.max(u,c),d=Math.max(0,u-c)),"market"===a&&(d=0);var h=this.safeNumber2(e,"filled_notional","funds"),l=this.safeNumber(e,"price"),f=this.safeNumber(e,"price_avg");void 0===h?void 0!==c&&void 0!==f&&(h=f*c):void 0===f&&void 0!==c&&c>0&&(f=h/c);var p=this.parseOrderStatus(this.safeString(e,"state")),v=this.safeNumber(e,"fee"),m=void 0;if(void 0!==v){var g=void 0;m={cost:v,currency:g}}var y=this.safeString(e,"client_oid");void 0!==y&&y.length<1&&(y=void 0);var b=this.safeNumber(e,"trigger_price");return{info:e,id:r,clientOrderId:y,timestamp:i,datetime:this.iso8601(i),lastTradeTimestamp:void 0,symbol:s,type:a,timeInForce:void 0,postOnly:void 0,side:n,price:l,stopPrice:b,average:f,cost:h,amount:u,filled:c,remaining:d,status:p,fee:m,trades:void 0}}},{key:"fetchOrder",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,u,c,d,h,l,f,p=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=p.length>1&&void 0!==p[1]?p[1]:void 0,i=p.length>2&&void 0!==p[2]?p[2]:{},void 0!==r){e.next=4;break}throw new g(this.id+" fetchOrder() requires a symbol argument");case 4:return e.next=6,this.loadMarkets();case 6:if(a=this.market(r),s=this.safeString2(this.options,"fetchOrder","defaultType",a.type),void 0!==(o=this.safeString(i,"type",s))){e.next=11;break}throw new g(this.id+" fetchOrder() requires a type parameter (one of 'spot', 'margin', 'futures', 'swap').");case 11:return u=a.futures||a.swap?"InstrumentId":"",c=o+"GetOrders"+u,d={instrument_id:a.id},void 0!==(h=this.safeString(i,"client_oid"))?(c+="ClientOid",d.client_oid=h):(c+="OrderId",d.order_id=t),l=this.omit(i,"type"),e.next=19,this[c](this.extend(d,l));case 19:return f=e.sent,e.abrupt("return",this.parseOrder(f));case 21:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrdersByState",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,u,c,d,h,l,f,p,v,m=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=m.length>1&&void 0!==m[1]?m[1]:void 0,i=m.length>2&&void 0!==m[2]?m[2]:void 0,a=m.length>3&&void 0!==m[3]?m[3]:void 0,s=m.length>4&&void 0!==m[4]?m[4]:{},void 0!==r){e.next=6;break}throw new g(this.id+" fetchOrdersByState() requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:if(o=this.market(r),u=void 0,o.futures||o.swap?u=o.type:(c=this.safeString2(this.options,"fetchOrder","defaultType",o.type),u=this.safeString(s,"type",c)),void 0!==u){e.next=13;break}throw new g(this.id+" fetchOrdersByState() requires a type parameter (one of 'spot', 'margin', 'futures', 'swap').");case 13:return d={instrument_id:o.id,state:t},h=u+"GetOrders",(o.futures||o.swap)&&(h+="InstrumentId"),l=this.omit(s,"type"),e.next=19,this[h](this.extend(d,l));case 19:if(f=e.sent,p=void 0,!o.swap&&!o.futures){e.next=25;break}p=this.safeValue(f,"order_info",[]),e.next=30;break;case 25:if(p=f,!((v=f.length)<1)){e.next=29;break}return e.abrupt("return",[]);case 29:v>1&&void 0!==this.safeValue(f[1],"before")&&(p=f[0]);case 30:return e.abrupt("return",this.parseOrders(p,o,i,a));case 31:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:void 0,i=s.length>2&&void 0!==s[2]?s[2]:void 0,a=s.length>3&&void 0!==s[3]?s[3]:{},e.next=6,this.fetchOrdersByState("6",t,r,i,a);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:void 0,i=s.length>2&&void 0!==s[2]?s[2]:void 0,a=s.length>3&&void 0!==s[3]?s[3]:{},e.next=6,this.fetchOrdersByState("7",t,r,i,a);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseDepositAddress",value:function(e){var t=this.safeString(e,"address"),r=this.safeString2(e,"tag","payment_id");r=this.safeString(e,"memo",r);var i=this.safeString(e,"currency"),n=this.safeCurrencyCode(i);return this.checkAddress(t),{currency:n,address:t,tag:r,info:e}}},{key:"fetchDepositAddress",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,u,c,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:{},e.next=3,this.loadMarkets();case 3:return i=t.split("-"),a=this.currency(i[0]),s={currency:a.id},e.next=8,this.accountGetDepositAddress(this.extend(s,r));case 8:if(o=e.sent,u=this.parseDepositAddresses(o),void 0!==(c=this.safeValue(u,t))){e.next=13;break}throw new x(this.id+" fetchDepositAddress cannot return nonexistent addresses, you should create withdrawal addresses with the exchange website first");case 13:return e.abrupt("return",c);case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"withdraw",value:function(){var e=a(n.mark((function e(t,r,i){var a,s,o,u,c,d,h,l=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=l.length>3&&void 0!==l[3]?l[3]:void 0,s=l.length>4&&void 0!==l[4]?l[4]:{},this.checkAddress(i),e.next=5,this.loadMarkets();case 5:if(o=this.currency(t),a&&(i=i+":"+a),void 0!==(u=this.safeString(s,"fee"))){e.next=10;break}throw new g(this.id+" withdraw() requires a `fee` string parameter, network transaction fee must be \u2265 0. Withdrawals to OKCoin or OKEx are fee-free, please set '0'. Withdrawing to external digital asset address requires network transaction fee.");case 10:if(c={currency:o.id,to_address:i,destination:"4",amount:this.numberToString(r),fee:u},"password"in s?c.trade_pwd=s.password:"trade_pwd"in s?c.trade_pwd=s.trade_pwd:this.password&&(c.trade_pwd=this.password),d=this.omit(s,["fee","password","trade_pwd"]),"trade_pwd"in c){e.next=15;break}throw new p(this.id+" withdraw() requires this.password set on the exchange instance or a password / trade_pwd parameter");case 15:return e.next=17,this.accountPostWithdrawal(this.extend(c,d));case 17:return h=e.sent,e.abrupt("return",{info:h,id:this.safeString(h,"withdrawal_id")});case 19:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"fetchDeposits",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,u,c,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,i=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return s={},o="accountGetDepositHistory",u=void 0,void 0!==t&&(u=this.currency(t),s.currency=u.id,o+="Currency"),e.next=12,this[o](this.extend(s,a));case 12:return c=e.sent,e.abrupt("return",this.parseTransactions(c,u,r,i,a));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchWithdrawals",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,u,c,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,i=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return s={},o="accountGetWithdrawalHistory",u=void 0,void 0!==t&&(u=this.currency(t),s.currency=u.id,o+="Currency"),e.next=12,this[o](this.extend(s,a));case 12:return c=e.sent,e.abrupt("return",this.parseTransactions(c,u,r,i,a));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTransactionStatus",value:function(e){return this.safeString({"-3":"pending","-2":"canceled","-1":"failed",0:"pending",1:"pending",2:"ok",3:"pending",4:"pending",5:"pending"},e,e)}},{key:"parseTransaction",value:function(e){var t=void 0,r=void 0,i=void 0,n=this.safeString(e,"withdrawal_id"),a=this.safeString(e,"from"),s=this.safeString(e,"to"),o=this.safeString(e,"tag");void 0!==n?(t="withdrawal",r=n,i=s):(r=this.safeString2(e,"payment_id","deposit_id"),t="deposit",i=s);var u=this.safeString(e,"currency"),c=this.safeCurrencyCode(u),d=this.safeNumber(e,"amount"),h=this.parseTransactionStatus(this.safeString(e,"status")),l=this.safeString(e,"txid"),f=this.parse8601(this.safeString(e,"timestamp")),p=void 0;if("deposit"===t)p=0;else if(void 0!==u){var v=this.safeString(e,"fee");if(void 0!==v){var m=u.toLowerCase(),g=v.replace(m,"");p=parseFloat(g)}}return{info:e,id:r,currency:c,amount:d,addressFrom:a,addressTo:s,address:i,tagFrom:void 0,tagTo:o,tag:o,status:h,type:t,updated:void 0,txid:l,timestamp:f,datetime:this.iso8601(f),fee:{currency:c,cost:p}}}},{key:"parseMyTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeValue(e,1),i=this.safeValue(e,0),n=this.safeString(i,"instrument_id"),a=this.safeString(r,"instrument_id");if(n!==a)throw new A(this.id+" parseMyTrade() received unrecognized response format, differing instrument_ids in one fill, the exchange API might have changed, paste your verbose output: https://github.com/ccxt/ccxt/wiki/FAQ#what-is-required-to-get-help");var s=n,o=(t=this.safeMarket(s,t)).symbol,u=t.quoteId,c=void 0,d=void 0,h=void 0,l=this.safeString(r,"currency"),f=void 0;l===u?(c=this.safeString(i,"side"),d=this.safeNumber(i,"size"),h=this.safeNumber(r,"size"),f=this.safeString(i,"currency")):(c=this.safeString(r,"side"),d=this.safeNumber(r,"size"),h=this.safeNumber(i,"size"),f=this.safeString(r,"currency"));var p=this.safeString(r,"trade_id"),v=this.safeNumber(r,"price"),m=this.safeNumber(i,"fee"),g=this.safeNumber(r,"fee"),y=this.safeCurrencyCode(this.safeString(i,"currency")),b=this.safeCurrencyCode(this.safeString(r,"currency")),x=void 0,k=void 0;void 0!==m&&0!==m?void 0!==g&&0!==g?k=[{cost:-m,currency:y},{cost:-g,currency:b}]:x={cost:-m,currency:y}:x=void 0!==g&&0!==g?{cost:-g,currency:b}:{cost:0,currency:this.safeCurrencyCode(f)};var w=this.parse8601(this.safeString2(r,"timestamp","created_at")),_=this.safeString2(r,"exec_type","liquidity");"M"===_?_="maker":"T"===_&&(_="taker");var S=this.safeString(r,"order_id"),O={info:e,timestamp:w,datetime:this.iso8601(w),symbol:o,id:p,order:S,type:void 0,takerOrMaker:_,side:c,price:v,amount:d,cost:h,fee:x};return void 0!==k&&(O.fees=k),O}},{key:"parseMyTrades",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,n=this.groupBy(e,"trade_id"),a=Object.keys(n),s=[],o=0;o<a.length;o++){var u=a[o],c=n[u],d=c.length;if(2===d){var h=this.parseMyTrade(c);s.push(h)}}var l=void 0;return void 0!==t&&(l=t.symbol),this.filterBySymbolSinceLimit(s,l,r,i)}},{key:"fetchMyTrades",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,u,c,d,h,l,f=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.length>0&&void 0!==f[0]?f[0]:void 0,r=f.length>1&&void 0!==f[1]?f[1]:void 0,i=f.length>2&&void 0!==f[2]?f[2]:void 0,a=f.length>3&&void 0!==f[3]?f[3]:{},void 0!==t){e.next=6;break}throw new g(this.id+" fetchMyTrades() requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.market(t),void 0!==i&&i>100&&(i=100),o={instrument_id:s.id},u=this.safeString2(this.options,"fetchMyTrades","defaultType"),c=this.safeString(a,"type",u),d=this.omit(a,"type"),h=c+"GetFills",e.next=17,this[h](this.extend(o,d));case 17:return l=e.sent,e.abrupt("return",this.parseMyTrades(l,s,r,i,a));case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderTrades",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,i=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:void 0,s=u.length>4&&void 0!==u[4]?u[4]:{},o={order_id:t},e.next=7,this.fetchMyTrades(r,i,a,this.extend(o,s));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchPosition",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,u,c=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:{},e.next=3,this.loadMarkets();case 3:if(i=this.market(t),a=void 0,s={instrument_id:i.id},"futures"!==(o=i.type)&&"swap"!==o){e.next=11;break}a=o+"GetInstrumentIdPosition",e.next=19;break;case 11:if("option"!==o){e.next=18;break}if(void 0!==this.safeString(r,"underlying")){e.next=15;break}throw new g(this.id+" fetchPosition() requires an underlying parameter for "+o+" market "+t);case 15:a=o+"GetUnderlyingPosition",e.next=19;break;case 18:throw new A(this.id+" fetchPosition() does not support "+o+" market "+t+", supported market types are futures, swap or option");case 19:return e.next=21,this[a](this.extend(s,r));case 21:return u=e.sent,e.abrupt("return",u);case 23:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchPositions",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.length>0&&void 0!==o[0]?o[0]:void 0,t=o.length>1&&void 0!==o[1]?o[1]:{},e.next=4,this.loadMarkets();case 4:if(r=void 0,i=this.safeString2(this.options,"fetchPositions","defaultType"),"futures"!==(a=this.safeString(t,"type",i))&&"swap"!==a){e.next=11;break}r=a+"GetPosition",e.next=19;break;case 11:if("option"!==a){e.next=18;break}if(void 0!==this.safeString(t,"underlying")){e.next=15;break}throw new g(this.id+" fetchPositions() requires an underlying parameter for "+a+" markets");case 15:r=a+"GetUnderlyingPosition",e.next=19;break;case 18:throw new A(this.id+" fetchPositions() does not support "+a+" markets, supported market types are futures, swap or option");case 19:return t=this.omit(t,"type"),e.next=22,this[r](t);case 22:return s=e.sent,e.abrupt("return",s);case 24:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchLedger",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,u,c,d,h,l,f,p,v,m,y,b,x,k,w,_,S,O=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=O.length>0&&void 0!==O[0]?O[0]:void 0,r=O.length>1&&void 0!==O[1]?O[1]:void 0,i=O.length>2&&void 0!==O[2]?O[2]:void 0,a=O.length>3&&void 0!==O[3]?O[3]:{},e.next=6,this.loadMarkets();case 6:if(s=this.safeString2(this.options,"fetchLedger","defaultType"),o=this.safeString(a,"type",s),u=this.omit(a,"type"),c="account"===o?"":"Accounts",d="",h={},void 0!==i&&(h.limit=i),l=void 0,"spot"!==o){e.next=22;break}if(void 0!==t){e.next=17;break}throw new g(this.id+" fetchLedger() requires a currency code argument for '"+o+"' markets");case 17:d="Currency",l=this.currency(t),h.currency=l.id,e.next=49;break;case 22:if("futures"!==o){e.next=35;break}if(void 0!==t){e.next=25;break}throw new g(this.id+" fetchLedger() requires an underlying symbol for '"+o+"' markets");case 25:d="Underlying",f=this.market(t),p=this.safeValue(f,"info",{}),v=this.safeString(p,"settlement_currency"),m=this.safeCurrencyCode(v),l=this.currency(m),y=this.safeString(p,"underlying"),h.underlying=y,e.next=49;break;case 35:if("margin"!==o&&"swap"!==o){e.next=44;break}if(void 0!==t){e.next=38;break}throw new g(this.id+" fetchLedger() requires a code argument (a market symbol) for '"+o+"' markets");case 38:d="InstrumentId",b=this.market(t),l=this.currency(b.base),h.instrument_id=b.id,e.next=49;break;case 44:if("account"!==o){e.next=48;break}void 0!==t&&(l=this.currency(t),h.currency=l.id),e.next=49;break;case 48:throw new A(this.id+" fetchLedger does not support the '"+o+"' type (the type must be one of 'account', 'spot', 'margin', 'futures', 'swap')");case 49:return x=o+"Get"+c+d+"Ledger",e.next=52,this[x](this.extend(h,u));case 52:if(k=e.sent,!(k.length<1)){e.next=56;break}return e.abrupt("return",[]);case 56:if(w=Array.isArray(k[0]),_="margin"===o&&w?k[0]:k,"swap"!==o){e.next=62;break}return S=this.parseLedger(_),e.abrupt("return",this.filterBySymbolSinceLimit(S,t,r,i));case 62:return e.abrupt("return",this.parseLedger(_,l,r,i));case 63:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseLedgerEntryType",value:function(e){return this.safeString({transfer:"transfer",trade:"trade",rebate:"rebate",match:"trade",fee:"fee",settlement:"trade",liquidation:"trade",funding:"fee",margin:"margin"},e,e)}},{key:"parseLedgerEntry",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"ledger_id"),i=void 0,n=this.safeValue(e,"details",{}),a=this.safeString(n,"order_id"),s=void 0,o=this.parseLedgerEntryType(this.safeString(e,"type")),u=this.safeCurrencyCode(this.safeString(e,"currency"),t),c=this.safeNumber(e,"amount"),d=this.parse8601(this.safeString(e,"timestamp")),h={cost:this.safeNumber(e,"fee"),currency:u},l=void 0,f=this.safeNumber(e,"balance"),p="ok",v=this.safeString(e,"instrument_id"),m=void 0;if(v in this.markets_by_id){var g=this.markets_by_id[v];m=g.symbol}return{info:e,id:r,account:i,referenceId:a,referenceAccount:s,type:o,currency:u,symbol:m,amount:c,before:l,after:f,status:p,timestamp:d,datetime:this.iso8601(d),fee:h}}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=Array.isArray(i),o="/api/"+t+"/"+this.version+"/";o+=s?e:this.implodeParams(e,i);var u=s?i:this.omit(i,this.extractParams(e)),c=this.implodeParams(this.urls.api.rest,{hostname:this.hostname})+o,d=this.getPathAuthenticationType(e);if("public"===d)Object.keys(u).length&&(c+="?"+this.urlencode(u));else if("private"===d){this.checkRequiredCredentials();var h=this.iso8601(this.milliseconds());n={"OK-ACCESS-KEY":this.apiKey,"OK-ACCESS-PASSPHRASE":this.password,"OK-ACCESS-TIMESTAMP":h};var l=h+r+o;if("GET"===r){if(Object.keys(u).length){var f="?"+this.urlencode(u);c+=f,l+=f}}else(s||Object.keys(u).length)&&(l+=a=this.json(u)),n["Content-Type"]="application/json";var p=this.hmac(this.encode(l),this.encode(this.secret),"sha256","base64");n["OK-ACCESS-SIGN"]=p}return{url:c,method:r,body:a,headers:n}}},{key:"getPathAuthenticationType",value:function(e){if("underlying"===e)return"public";var t=this.safeValue(this.options,"auth",{}),r=this.findBroadlyMatchedKey(t,e);return this.safeString(t,r,"private")}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,u){if(s){var c=this.id+" "+a;if(503===e)throw new v(c);var d=this.safeString(s,"message"),h=this.safeString2(s,"code","error_code"),l=void 0!==d&&""!==d,f=void 0!==h&&"0"!==h;if(l&&(this.throwExactlyMatchedException(this.exceptions.exact,d,c),this.throwBroadlyMatchedException(this.exceptions.broad,d,c)),f&&this.throwExactlyMatchedException(this.exceptions.exact,h,c),f||l)throw new p(c)}}}]),r}(l)},function(e,t){e.exports=function(e,t){return e===t||e!==e&&t!==t}},function(e,t,r){var i=r(92),n=r(170);e.exports=function(e){if(!n(e))return!1;var t=i(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},function(e,t,r){(function(t){var r="object"==typeof t&&t&&t.Object===Object&&t;e.exports=r}).call(this,r(35))},function(e,t){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},function(e,t){var r=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return r.call(e)}catch(t){}try{return e+""}catch(t){}}return""}},function(e,t,r){var i=r(410),n=r(417),a=r(419),s=r(420),o=r(421);function u(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}u.prototype.clear=i,u.prototype.delete=n,u.prototype.get=a,u.prototype.has=s,u.prototype.set=o,e.exports=u},function(e,t,r){var i=r(422),n=r(425),a=r(426);e.exports=function(e,t,r,s,o,u){var c=1&r,d=e.length,h=t.length;if(d!=h&&!(c&&h>d))return!1;var l=u.get(e),f=u.get(t);if(l&&f)return l==t&&f==e;var p=-1,v=!0,m=2&r?new i:void 0;for(u.set(e,t),u.set(t,e);++p<d;){var g=e[p],y=t[p];if(s)var b=c?s(y,g,p,t,e,u):s(g,y,p,e,t,u);if(void 0!==b){if(b)continue;v=!1;break}if(m){if(!n(t,(function(e,t){if(!a(m,t)&&(g===e||o(g,e,r,s,u)))return m.push(t)}))){v=!1;break}}else if(g!==y&&!o(g,y,r,s,u)){v=!1;break}}return u.delete(e),u.delete(t),v}},function(e,t,r){(function(e){var i=r(53),n=r(443),a=t&&!t.nodeType&&t,s=a&&"object"==typeof e&&e&&!e.nodeType&&e,o=s&&s.exports===a?i.Buffer:void 0,u=(o?o.isBuffer:void 0)||n;e.exports=u}).call(this,r(87)(e))},function(e,t,r){var i=r(445),n=r(446),a=r(447),s=a&&a.isTypedArray,o=s?n(s):i;e.exports=o},function(e,t){e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},function(e,t,r){"use strict";r(64),r.p},function(e,t,r){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}r.d(t,"a",(function(){return i}))},function(e,t,r){"use strict";function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function n(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}r.d(t,"a",(function(){return n}))},function(e,t){function r(t){return"function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?(e.exports=r=function(e){return typeof e},e.exports.default=e.exports,e.exports.__esModule=!0):(e.exports=r=function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.default=e.exports,e.exports.__esModule=!0),r(t)}e.exports=r,e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){function r(t){return"function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?(e.exports=r=function(e){return typeof e},e.exports.default=e.exports,e.exports.__esModule=!0):(e.exports=r=function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.default=e.exports,e.exports.__esModule=!0),r(t)}e.exports=r,e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,r){"use strict";(function(e){function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function n(e,t){return(n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function s(e,t,r){return(s=a()?Reflect.construct:function(e,t,r){var i=[null];i.push.apply(i,t);var a=new(Function.bind.apply(e,i));return r&&n(a,r.prototype),a}).apply(null,arguments)}function o(e){var t="function"===typeof Map?new Map:void 0;return(o=function(e){if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,a)}function a(){return s(e,arguments,i(this).constructor)}return a.prototype=Object.create(e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),n(a,e)})(e)}var u=/%[sdj%]/g,c=function(){};function d(e){if(!e||!e.length)return null;var t={};return e.forEach((function(e){var r=e.field;t[r]=t[r]||[],t[r].push(e)})),t}function h(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=1,n=t[0],a=t.length;if("function"===typeof n)return n.apply(null,t.slice(1));if("string"===typeof n){var s=String(n).replace(u,(function(e){if("%%"===e)return"%";if(i>=a)return e;switch(e){case"%s":return String(t[i++]);case"%d":return Number(t[i++]);case"%j":try{return JSON.stringify(t[i++])}catch(r){return"[Circular]"}break;default:return e}}));return s}return n}function l(e,t){return void 0===e||null===e||(!("array"!==t||!Array.isArray(e)||e.length)||!(!function(e){return"string"===e||"url"===e||"hex"===e||"email"===e||"date"===e||"pattern"===e}(t)||"string"!==typeof e||e))}function f(e,t,r){var i=0,n=e.length;!function a(s){if(s&&s.length)r(s);else{var o=i;i+=1,o<n?t(e[o],a):r([])}}([])}"undefined"!==typeof e&&Object({NODE_ENV:"production",PUBLIC_URL:"/trading-system",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0});var p=function(e){var t,r;function i(t,r){var i;return(i=e.call(this,"Async Validation Error")||this).errors=t,i.fields=r,i}return r=e,(t=i).prototype=Object.create(r.prototype),t.prototype.constructor=t,n(t,r),i}(o(Error));function v(e,t,r,i){if(t.first){var n=new Promise((function(t,n){f(function(e){var t=[];return Object.keys(e).forEach((function(r){t.push.apply(t,e[r])})),t}(e),r,(function(e){return i(e),e.length?n(new p(e,d(e))):t()}))}));return n.catch((function(e){return e})),n}var a=t.firstFields||[];!0===a&&(a=Object.keys(e));var s=Object.keys(e),o=s.length,u=0,c=[],h=new Promise((function(t,n){var h=function(e){if(c.push.apply(c,e),++u===o)return i(c),c.length?n(new p(c,d(c))):t()};s.length||(i(c),t()),s.forEach((function(t){var i=e[t];-1!==a.indexOf(t)?f(i,r,h):function(e,t,r){var i=[],n=0,a=e.length;function s(e){i.push.apply(i,e),++n===a&&r(i)}e.forEach((function(e){t(e,s)}))}(i,r,h)}))}));return h.catch((function(e){return e})),h}function m(e){return function(t){return t&&t.message?(t.field=t.field||e.fullField,t):{message:"function"===typeof t?t():t,field:t.field||e.fullField}}}function g(e,t){if(t)for(var i in t)if(t.hasOwnProperty(i)){var n=t[i];"object"===typeof n&&"object"===typeof e[i]?e[i]=r({},e[i],n):e[i]=n}return e}function y(e,t,r,i,n,a){!e.required||r.hasOwnProperty(e.field)&&!l(t,a||e.type)||i.push(h(n.messages.required,e.fullField))}var b={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,url:new RegExp("^(?!mailto:)(?:(?:http|https|ftp)://|//)(?:\\S+(?::\\S*)?@)?(?:(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[0-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]+-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]+-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))|localhost)(?::\\d{2,5})?(?:(/|\\?|#)[^\\s]*)?$","i"),hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},x={integer:function(e){return x.number(e)&&parseInt(e,10)===e},float:function(e){return x.number(e)&&!x.integer(e)},array:function(e){return Array.isArray(e)},regexp:function(e){if(e instanceof RegExp)return!0;try{return!!new RegExp(e)}catch(t){return!1}},date:function(e){return"function"===typeof e.getTime&&"function"===typeof e.getMonth&&"function"===typeof e.getYear&&!isNaN(e.getTime())},number:function(e){return!isNaN(e)&&"number"===typeof e},object:function(e){return"object"===typeof e&&!x.array(e)},method:function(e){return"function"===typeof e},email:function(e){return"string"===typeof e&&!!e.match(b.email)&&e.length<255},url:function(e){return"string"===typeof e&&!!e.match(b.url)},hex:function(e){return"string"===typeof e&&!!e.match(b.hex)}};var k={required:y,whitespace:function(e,t,r,i,n){(/^\s+$/.test(t)||""===t)&&i.push(h(n.messages.whitespace,e.fullField))},type:function(e,t,r,i,n){if(e.required&&void 0===t)y(e,t,r,i,n);else{var a=e.type;["integer","float","array","regexp","object","method","email","number","date","url","hex"].indexOf(a)>-1?x[a](t)||i.push(h(n.messages.types[a],e.fullField,e.type)):a&&typeof t!==e.type&&i.push(h(n.messages.types[a],e.fullField,e.type))}},range:function(e,t,r,i,n){var a="number"===typeof e.len,s="number"===typeof e.min,o="number"===typeof e.max,u=t,c=null,d="number"===typeof t,l="string"===typeof t,f=Array.isArray(t);if(d?c="number":l?c="string":f&&(c="array"),!c)return!1;f&&(u=t.length),l&&(u=t.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"_").length),a?u!==e.len&&i.push(h(n.messages[c].len,e.fullField,e.len)):s&&!o&&u<e.min?i.push(h(n.messages[c].min,e.fullField,e.min)):o&&!s&&u>e.max?i.push(h(n.messages[c].max,e.fullField,e.max)):s&&o&&(u<e.min||u>e.max)&&i.push(h(n.messages[c].range,e.fullField,e.min,e.max))},enum:function(e,t,r,i,n){e.enum=Array.isArray(e.enum)?e.enum:[],-1===e.enum.indexOf(t)&&i.push(h(n.messages.enum,e.fullField,e.enum.join(", ")))},pattern:function(e,t,r,i,n){if(e.pattern)if(e.pattern instanceof RegExp)e.pattern.lastIndex=0,e.pattern.test(t)||i.push(h(n.messages.pattern.mismatch,e.fullField,t,e.pattern));else if("string"===typeof e.pattern){new RegExp(e.pattern).test(t)||i.push(h(n.messages.pattern.mismatch,e.fullField,t,e.pattern))}}};function w(e,t,r,i,n){var a=e.type,s=[];if(e.required||!e.required&&i.hasOwnProperty(e.field)){if(l(t,a)&&!e.required)return r();k.required(e,t,i,s,n,a),l(t,a)||k.type(e,t,i,s,n)}r(s)}var _={string:function(e,t,r,i,n){var a=[];if(e.required||!e.required&&i.hasOwnProperty(e.field)){if(l(t,"string")&&!e.required)return r();k.required(e,t,i,a,n,"string"),l(t,"string")||(k.type(e,t,i,a,n),k.range(e,t,i,a,n),k.pattern(e,t,i,a,n),!0===e.whitespace&&k.whitespace(e,t,i,a,n))}r(a)},method:function(e,t,r,i,n){var a=[];if(e.required||!e.required&&i.hasOwnProperty(e.field)){if(l(t)&&!e.required)return r();k.required(e,t,i,a,n),void 0!==t&&k.type(e,t,i,a,n)}r(a)},number:function(e,t,r,i,n){var a=[];if(e.required||!e.required&&i.hasOwnProperty(e.field)){if(""===t&&(t=void 0),l(t)&&!e.required)return r();k.required(e,t,i,a,n),void 0!==t&&(k.type(e,t,i,a,n),k.range(e,t,i,a,n))}r(a)},boolean:function(e,t,r,i,n){var a=[];if(e.required||!e.required&&i.hasOwnProperty(e.field)){if(l(t)&&!e.required)return r();k.required(e,t,i,a,n),void 0!==t&&k.type(e,t,i,a,n)}r(a)},regexp:function(e,t,r,i,n){var a=[];if(e.required||!e.required&&i.hasOwnProperty(e.field)){if(l(t)&&!e.required)return r();k.required(e,t,i,a,n),l(t)||k.type(e,t,i,a,n)}r(a)},integer:function(e,t,r,i,n){var a=[];if(e.required||!e.required&&i.hasOwnProperty(e.field)){if(l(t)&&!e.required)return r();k.required(e,t,i,a,n),void 0!==t&&(k.type(e,t,i,a,n),k.range(e,t,i,a,n))}r(a)},float:function(e,t,r,i,n){var a=[];if(e.required||!e.required&&i.hasOwnProperty(e.field)){if(l(t)&&!e.required)return r();k.required(e,t,i,a,n),void 0!==t&&(k.type(e,t,i,a,n),k.range(e,t,i,a,n))}r(a)},array:function(e,t,r,i,n){var a=[];if(e.required||!e.required&&i.hasOwnProperty(e.field)){if((void 0===t||null===t)&&!e.required)return r();k.required(e,t,i,a,n,"array"),void 0!==t&&null!==t&&(k.type(e,t,i,a,n),k.range(e,t,i,a,n))}r(a)},object:function(e,t,r,i,n){var a=[];if(e.required||!e.required&&i.hasOwnProperty(e.field)){if(l(t)&&!e.required)return r();k.required(e,t,i,a,n),void 0!==t&&k.type(e,t,i,a,n)}r(a)},enum:function(e,t,r,i,n){var a=[];if(e.required||!e.required&&i.hasOwnProperty(e.field)){if(l(t)&&!e.required)return r();k.required(e,t,i,a,n),void 0!==t&&k.enum(e,t,i,a,n)}r(a)},pattern:function(e,t,r,i,n){var a=[];if(e.required||!e.required&&i.hasOwnProperty(e.field)){if(l(t,"string")&&!e.required)return r();k.required(e,t,i,a,n),l(t,"string")||k.pattern(e,t,i,a,n)}r(a)},date:function(e,t,r,i,n){var a=[];if(e.required||!e.required&&i.hasOwnProperty(e.field)){if(l(t,"date")&&!e.required)return r();var s;if(k.required(e,t,i,a,n),!l(t,"date"))s=t instanceof Date?t:new Date(t),k.type(e,s,i,a,n),s&&k.range(e,s.getTime(),i,a,n)}r(a)},url:w,hex:w,email:w,required:function(e,t,r,i,n){var a=[],s=Array.isArray(t)?"array":typeof t;k.required(e,t,i,a,n,s),r(a)},any:function(e,t,r,i,n){var a=[];if(e.required||!e.required&&i.hasOwnProperty(e.field)){if(l(t)&&!e.required)return r();k.required(e,t,i,a,n)}r(a)}};function S(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var e=JSON.parse(JSON.stringify(this));return e.clone=this.clone,e}}}var O=S();function T(e){this.rules=null,this._messages=O,this.define(e)}T.prototype={messages:function(e){return e&&(this._messages=g(S(),e)),this._messages},define:function(e){if(!e)throw new Error("Cannot configure a schema with no rules");if("object"!==typeof e||Array.isArray(e))throw new Error("Rules must be an object");var t,r;for(t in this.rules={},e)e.hasOwnProperty(t)&&(r=e[t],this.rules[t]=Array.isArray(r)?r:[r])},validate:function(e,t,i){var n=this;void 0===t&&(t={}),void 0===i&&(i=function(){});var a,s,o=e,u=t,c=i;if("function"===typeof u&&(c=u,u={}),!this.rules||0===Object.keys(this.rules).length)return c&&c(),Promise.resolve();if(u.messages){var l=this.messages();l===O&&(l=S()),g(l,u.messages),u.messages=l}else u.messages=this.messages();var f={};(u.keys||Object.keys(this.rules)).forEach((function(t){a=n.rules[t],s=o[t],a.forEach((function(i){var a=i;"function"===typeof a.transform&&(o===e&&(o=r({},o)),s=o[t]=a.transform(s)),(a="function"===typeof a?{validator:a}:r({},a)).validator=n.getValidationMethod(a),a.field=t,a.fullField=a.fullField||t,a.type=n.getType(a),a.validator&&(f[t]=f[t]||[],f[t].push({rule:a,value:s,source:o,field:t}))}))}));var p={};return v(f,u,(function(e,t){var i,n=e.rule,a=("object"===n.type||"array"===n.type)&&("object"===typeof n.fields||"object"===typeof n.defaultField);function s(e,t){return r({},t,{fullField:n.fullField+"."+e})}function o(i){void 0===i&&(i=[]);var o=i;if(Array.isArray(o)||(o=[o]),!u.suppressWarning&&o.length&&T.warning("async-validator:",o),o.length&&void 0!==n.message&&(o=[].concat(n.message)),o=o.map(m(n)),u.first&&o.length)return p[n.field]=1,t(o);if(a){if(n.required&&!e.value)return void 0!==n.message?o=[].concat(n.message).map(m(n)):u.error&&(o=[u.error(n,h(u.messages.required,n.field))]),t(o);var c={};if(n.defaultField)for(var d in e.value)e.value.hasOwnProperty(d)&&(c[d]=n.defaultField);for(var l in c=r({},c,e.rule.fields))if(c.hasOwnProperty(l)){var f=Array.isArray(c[l])?c[l]:[c[l]];c[l]=f.map(s.bind(null,l))}var v=new T(c);v.messages(u.messages),e.rule.options&&(e.rule.options.messages=u.messages,e.rule.options.error=u.error),v.validate(e.value,e.rule.options||u,(function(e){var r=[];o&&o.length&&r.push.apply(r,o),e&&e.length&&r.push.apply(r,e),t(r.length?r:null)}))}else t(o)}a=a&&(n.required||!n.required&&e.value),n.field=e.field,n.asyncValidator?i=n.asyncValidator(n,e.value,o,e.source,u):n.validator&&(!0===(i=n.validator(n,e.value,o,e.source,u))?o():!1===i?o(n.message||n.field+" fails"):i instanceof Array?o(i):i instanceof Error&&o(i.message)),i&&i.then&&i.then((function(){return o()}),(function(e){return o(e)}))}),(function(e){!function(e){var t,r=[],i={};function n(e){var t;Array.isArray(e)?r=(t=r).concat.apply(t,e):r.push(e)}for(t=0;t<e.length;t++)n(e[t]);r.length?i=d(r):(r=null,i=null),c(r,i)}(e)}))},getType:function(e){if(void 0===e.type&&e.pattern instanceof RegExp&&(e.type="pattern"),"function"!==typeof e.validator&&e.type&&!_.hasOwnProperty(e.type))throw new Error(h("Unknown rule type %s",e.type));return e.type||"string"},getValidationMethod:function(e){if("function"===typeof e.validator)return e.validator;var t=Object.keys(e),r=t.indexOf("message");return-1!==r&&t.splice(r,1),1===t.length&&"required"===t[0]?_.required:_[this.getType(e)]||!1}},T.register=function(e,t){if("function"!==typeof t)throw new Error("Cannot register a validator by type, validator is not a function");_[e]=t},T.warning=c,T.messages=O,T.validators=_,t.a=T}).call(this,r(46))},function(e,t,r){var i=r(391);e.exports=function(e,t){return i(e,t)}},function(e,t,r){"use strict";r.d(t,"a",(function(){return Py}));var i={};r.r(i),r.d(i,"extendShape",(function(){return Tc})),r.d(i,"extendPath",(function(){return Ic})),r.d(i,"registerShape",(function(){return Mc})),r.d(i,"getShapeClass",(function(){return Ac})),r.d(i,"makePath",(function(){return Ec})),r.d(i,"makeImage",(function(){return Nc})),r.d(i,"mergePath",(function(){return Dc})),r.d(i,"resizePath",(function(){return Lc})),r.d(i,"subPixelOptimizeLine",(function(){return Bc})),r.d(i,"subPixelOptimizeRect",(function(){return Rc})),r.d(i,"subPixelOptimize",(function(){return Vc})),r.d(i,"updateProps",(function(){return Fc})),r.d(i,"initProps",(function(){return qc})),r.d(i,"removeElement",(function(){return jc})),r.d(i,"removeElementWithFadeOut",(function(){return Hc})),r.d(i,"isElementRemoved",(function(){return Uc})),r.d(i,"getTransform",(function(){return Wc})),r.d(i,"applyTransform",(function(){return Kc})),r.d(i,"transformDirection",(function(){return Xc})),r.d(i,"groupTransition",(function(){return Zc})),r.d(i,"clipPointsByRect",(function(){return Qc})),r.d(i,"clipRectByRect",(function(){return $c})),r.d(i,"createIcon",(function(){return Jc})),r.d(i,"linePolygonIntersect",(function(){return ed})),r.d(i,"lineLineIntersect",(function(){return td})),r.d(i,"setTooltipConfig",(function(){return id})),r.d(i,"Group",(function(){return Ti})),r.d(i,"Image",(function(){return Gs})),r.d(i,"Text",(function(){return no})),r.d(i,"Circle",(function(){return _u})),r.d(i,"Ellipse",(function(){return Tu})),r.d(i,"Sector",(function(){return ju})),r.d(i,"Ring",(function(){return Uu})),r.d(i,"Polygon",(function(){return Zu})),r.d(i,"Polyline",(function(){return Ju})),r.d(i,"Rect",(function(){return Ks})),r.d(i,"Line",(function(){return ic})),r.d(i,"BezierCurve",(function(){return uc})),r.d(i,"Arc",(function(){return hc})),r.d(i,"IncrementalDisplayable",(function(){return wc})),r.d(i,"CompoundPath",(function(){return lc})),r.d(i,"LinearGradient",(function(){return pc})),r.d(i,"RadialGradient",(function(){return vc})),r.d(i,"BoundingRect",(function(){return _r})),r.d(i,"OrientedBoundingRect",(function(){return xc})),r.d(i,"Point",(function(){return pr})),r.d(i,"Path",(function(){return Ns}));var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};function a(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var s=function(){return(s=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};Object.create;function o(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var i=Array(e),n=0;for(t=0;t<r;t++)for(var a=arguments[t],s=0,o=a.length;s<o;s++,n++)i[n]=a[s];return i}Object.create;var u=function(){this.firefox=!1,this.ie=!1,this.edge=!1,this.newEdge=!1,this.weChat=!1},c=new function(){this.browser=new u,this.node=!1,this.wxa=!1,this.worker=!1,this.canvasSupported=!1,this.svgSupported=!1,this.touchEventsSupported=!1,this.pointerEventsSupported=!1,this.domSupported=!1,this.transformSupported=!1,this.transform3dSupported=!1};"object"===typeof wx&&"function"===typeof wx.getSystemInfoSync?(c.wxa=!0,c.canvasSupported=!0,c.touchEventsSupported=!0):"undefined"===typeof document&&"undefined"!==typeof self?(c.worker=!0,c.canvasSupported=!0):"undefined"===typeof navigator?(c.node=!0,c.canvasSupported=!0,c.svgSupported=!0):function(e,t){var r=t.browser,i=e.match(/Firefox\/([\d.]+)/),n=e.match(/MSIE\s([\d.]+)/)||e.match(/Trident\/.+?rv:(([\d.]+))/),a=e.match(/Edge?\/([\d.]+)/),s=/micromessenger/i.test(e);i&&(r.firefox=!0,r.version=i[1]);n&&(r.ie=!0,r.version=n[1]);a&&(r.edge=!0,r.version=a[1],r.newEdge=+a[1].split(".")[0]>18);s&&(r.weChat=!0);t.canvasSupported=!!document.createElement("canvas").getContext,t.svgSupported="undefined"!==typeof SVGRect,t.touchEventsSupported="ontouchstart"in window&&!r.ie&&!r.edge,t.pointerEventsSupported="onpointerdown"in window&&(r.edge||r.ie&&+r.version>=11),t.domSupported="undefined"!==typeof document;var o=document.documentElement.style;t.transform3dSupported=(r.ie&&"transition"in o||r.edge||"WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix||"MozPerspective"in o)&&!("OTransition"in o),t.transformSupported=t.transform3dSupported||r.ie&&+r.version>=9}(navigator.userAgent,c);var d=c,h={"[object Function]":!0,"[object RegExp]":!0,"[object Date]":!0,"[object Error]":!0,"[object CanvasGradient]":!0,"[object CanvasPattern]":!0,"[object Image]":!0,"[object Canvas]":!0},l={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0},f=Object.prototype.toString,p=Array.prototype,v=p.forEach,m=p.filter,g=p.slice,y=p.map,b=function(){}.constructor,x=b?b.prototype:null,k={};var w=2311;function _(){return w++}function S(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];"undefined"!==typeof console&&console.error.apply(console,e)}function O(e){if(null==e||"object"!==typeof e)return e;var t=e,r=f.call(e);if("[object Array]"===r){if(!oe(e)){t=[];for(var i=0,n=e.length;i<n;i++)t[i]=O(e[i])}}else if(l[r]){if(!oe(e)){var a=e.constructor;if(a.from)t=a.from(e);else{t=new a(e.length);for(i=0,n=e.length;i<n;i++)t[i]=O(e[i])}}}else if(!h[r]&&!oe(e)&&!Z(e))for(var s in t={},e)e.hasOwnProperty(s)&&(t[s]=O(e[s]));return t}function T(e,t,r){if(!K(t)||!K(e))return r?O(t):e;for(var i in t)if(t.hasOwnProperty(i)){var n=e[i],a=t[i];!K(a)||!K(n)||j(a)||j(n)||Z(a)||Z(n)||X(a)||X(n)||oe(a)||oe(n)?!r&&i in e||(e[i]=O(t[i])):T(n,a,r)}return e}function C(e,t){for(var r=e[0],i=1,n=e.length;i<n;i++)r=T(r,e[i],t);return r}function I(e,t){if(Object.assign)Object.assign(e,t);else for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e}function M(e,t,r){for(var i=G(t),n=0;n<i.length;n++){var a=i[n];(r?null!=t[a]:null==e[a])&&(e[a]=t[a])}return e}var A=function(){return k.createCanvas()};function E(e,t){if(e){if(e.indexOf)return e.indexOf(t);for(var r=0,i=e.length;r<i;r++)if(e[r]===t)return r}return-1}function N(e,t){var r=e.prototype;function i(){}for(var n in i.prototype=t.prototype,e.prototype=new i,r)r.hasOwnProperty(n)&&(e.prototype[n]=r[n]);e.prototype.constructor=e,e.superClass=t}function P(e,t,r){if(e="prototype"in e?e.prototype:e,t="prototype"in t?t.prototype:t,Object.getOwnPropertyNames)for(var i=Object.getOwnPropertyNames(t),n=0;n<i.length;n++){var a=i[n];"constructor"!==a&&(r?null!=t[a]:null==e[a])&&(e[a]=t[a])}else M(e,t,r)}function D(e){return!!e&&("string"!==typeof e&&"number"===typeof e.length)}function L(e,t,r){if(e&&t)if(e.forEach&&e.forEach===v)e.forEach(t,r);else if(e.length===+e.length)for(var i=0,n=e.length;i<n;i++)t.call(r,e[i],i,e);else for(var a in e)e.hasOwnProperty(a)&&t.call(r,e[a],a,e)}function B(e,t,r){if(!e)return[];if(!t)return te(e);if(e.map&&e.map===y)return e.map(t,r);for(var i=[],n=0,a=e.length;n<a;n++)i.push(t.call(r,e[n],n,e));return i}function R(e,t,r,i){if(e&&t){for(var n=0,a=e.length;n<a;n++)r=t.call(i,r,e[n],n,e);return r}}function V(e,t,r){if(!e)return[];if(!t)return te(e);if(e.filter&&e.filter===m)return e.filter(t,r);for(var i=[],n=0,a=e.length;n<a;n++)t.call(r,e[n],n,e)&&i.push(e[n]);return i}function G(e){if(!e)return[];if(Object.keys)return Object.keys(e);var t=[];for(var r in e)e.hasOwnProperty(r)&&t.push(r);return t}k.createCanvas=function(){return document.createElement("canvas")};var F=x&&z(x.bind)?x.call.bind(x.bind):function(e,t){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return function(){return e.apply(t,r.concat(g.call(arguments)))}};function q(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return function(){return e.apply(this,t.concat(g.call(arguments)))}}function j(e){return Array.isArray?Array.isArray(e):"[object Array]"===f.call(e)}function z(e){return"function"===typeof e}function H(e){return"string"===typeof e}function U(e){return"[object String]"===f.call(e)}function W(e){return"number"===typeof e}function K(e){var t=typeof e;return"function"===t||!!e&&"object"===t}function X(e){return!!h[f.call(e)]}function Y(e){return!!l[f.call(e)]}function Z(e){return"object"===typeof e&&"number"===typeof e.nodeType&&"object"===typeof e.ownerDocument}function Q(e){return e!==e}function $(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r=0,i=e.length;r<i;r++)if(null!=e[r])return e[r]}function J(e,t){return null!=e?e:t}function ee(e,t,r){return null!=e?e:null!=t?t:r}function te(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return g.apply(e,t)}function re(e){if("number"===typeof e)return[e,e,e,e];var t=e.length;return 2===t?[e[0],e[1],e[0],e[1]]:3===t?[e[0],e[1],e[2],e[1]]:e}function ie(e,t){if(!e)throw new Error(t)}function ne(e){return null==e?null:"function"===typeof e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}var ae="__ec_primitive__";function se(e){e[ae]=!0}function oe(e){return e[ae]}var ue=function(){function e(t){this.data={};var r=j(t);this.data={};var i=this;function n(e,t){r?i.set(e,t):i.set(t,e)}t instanceof e?t.each(n):t&&L(t,n)}return e.prototype.get=function(e){return this.data.hasOwnProperty(e)?this.data[e]:null},e.prototype.set=function(e,t){return this.data[e]=t},e.prototype.each=function(e,t){for(var r in this.data)this.data.hasOwnProperty(r)&&e.call(t,this.data[r],r)},e.prototype.keys=function(){return G(this.data)},e.prototype.removeKey=function(e){delete this.data[e]},e}();function ce(e){return new ue(e)}function de(e,t){for(var r=new e.constructor(e.length+t.length),i=0;i<e.length;i++)r[i]=e[i];var n=e.length;for(i=0;i<t.length;i++)r[i+n]=t[i];return r}function he(e,t){var r;if(Object.create)r=Object.create(e);else{var i=function(){};i.prototype=e,r=new i}return t&&I(r,t),r}function le(e,t){return e.hasOwnProperty(t)}function fe(){}var pe=function(e,t){return(pe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};function ve(e,t){function r(){this.constructor=e}pe(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}Object.create;Object.create;function me(e,t){return null==e&&(e=0),null==t&&(t=0),[e,t]}function ge(e,t){return e[0]=t[0],e[1]=t[1],e}function ye(e){return[e[0],e[1]]}function be(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e}function xe(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e}function ke(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e}function we(e){return Math.sqrt(_e(e))}function _e(e){return e[0]*e[0]+e[1]*e[1]}function Se(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e}function Oe(e,t){var r=we(t);return 0===r?(e[0]=0,e[1]=0):(e[0]=t[0]/r,e[1]=t[1]/r),e}function Te(e,t){return Math.sqrt((e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1]))}var Ce=Te;var Ie=function(e,t){return(e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1])};function Me(e,t,r,i){return e[0]=t[0]+i*(r[0]-t[0]),e[1]=t[1]+i*(r[1]-t[1]),e}function Ae(e,t,r){var i=t[0],n=t[1];return e[0]=r[0]*i+r[2]*n+r[4],e[1]=r[1]*i+r[3]*n+r[5],e}function Ee(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e}function Ne(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e}var Pe=function(e,t){this.target=e,this.topTarget=t&&t.topTarget},De=function(){function e(e){this.handler=e,e.on("mousedown",this._dragStart,this),e.on("mousemove",this._drag,this),e.on("mouseup",this._dragEnd,this)}return e.prototype._dragStart=function(e){for(var t=e.target;t&&!t.draggable;)t=t.parent;t&&(this._draggingTarget=t,t.dragging=!0,this._x=e.offsetX,this._y=e.offsetY,this.handler.dispatchToElement(new Pe(t,e),"dragstart",e.event))},e.prototype._drag=function(e){var t=this._draggingTarget;if(t){var r=e.offsetX,i=e.offsetY,n=r-this._x,a=i-this._y;this._x=r,this._y=i,t.drift(n,a,e),this.handler.dispatchToElement(new Pe(t,e),"drag",e.event);var s=this.handler.findHover(r,i,t).target,o=this._dropTarget;this._dropTarget=s,t!==s&&(o&&s!==o&&this.handler.dispatchToElement(new Pe(o,e),"dragleave",e.event),s&&s!==o&&this.handler.dispatchToElement(new Pe(s,e),"dragenter",e.event))}},e.prototype._dragEnd=function(e){var t=this._draggingTarget;t&&(t.dragging=!1),this.handler.dispatchToElement(new Pe(t,e),"dragend",e.event),this._dropTarget&&this.handler.dispatchToElement(new Pe(this._dropTarget,e),"drop",e.event),this._draggingTarget=null,this._dropTarget=null},e}(),Le=function(){function e(e){e&&(this._$eventProcessor=e)}return e.prototype.on=function(e,t,r,i){this._$handlers||(this._$handlers={});var n=this._$handlers;if("function"===typeof t&&(i=r,r=t,t=null),!r||!e)return this;var a=this._$eventProcessor;null!=t&&a&&a.normalizeQuery&&(t=a.normalizeQuery(t)),n[e]||(n[e]=[]);for(var s=0;s<n[e].length;s++)if(n[e][s].h===r)return this;var o={h:r,query:t,ctx:i||this,callAtLast:r.zrEventfulCallAtLast},u=n[e].length-1,c=n[e][u];return c&&c.callAtLast?n[e].splice(u,0,o):n[e].push(o),this},e.prototype.isSilent=function(e){var t=this._$handlers;return!t||!t[e]||!t[e].length},e.prototype.off=function(e,t){var r=this._$handlers;if(!r)return this;if(!e)return this._$handlers={},this;if(t){if(r[e]){for(var i=[],n=0,a=r[e].length;n<a;n++)r[e][n].h!==t&&i.push(r[e][n]);r[e]=i}r[e]&&0===r[e].length&&delete r[e]}else delete r[e];return this},e.prototype.trigger=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(!this._$handlers)return this;var i=this._$handlers[e],n=this._$eventProcessor;if(i)for(var a=t.length,s=i.length,o=0;o<s;o++){var u=i[o];if(!n||!n.filter||null==u.query||n.filter(e,u.query))switch(a){case 0:u.h.call(u.ctx);break;case 1:u.h.call(u.ctx,t[0]);break;case 2:u.h.call(u.ctx,t[0],t[1]);break;default:u.h.apply(u.ctx,t)}}return n&&n.afterTrigger&&n.afterTrigger(e),this},e.prototype.triggerWithContext=function(e){if(!this._$handlers)return this;var t=this._$handlers[e],r=this._$eventProcessor;if(t)for(var i=arguments,n=i.length,a=i[n-1],s=t.length,o=0;o<s;o++){var u=t[o];if(!r||!r.filter||null==u.query||r.filter(e,u.query))switch(n){case 0:u.h.call(a);break;case 1:u.h.call(a,i[0]);break;case 2:u.h.call(a,i[0],i[1]);break;default:u.h.apply(a,i.slice(1,n-1))}}return r&&r.afterTrigger&&r.afterTrigger(e),this},e}(),Be=Math.log(2);function Re(e,t,r,i,n,a){var s=i+"-"+n,o=e.length;if(a.hasOwnProperty(s))return a[s];if(1===t){var u=Math.round(Math.log((1<<o)-1&~n)/Be);return e[r][u]}for(var c=i|1<<r,d=r+1;i&1<<d;)d++;for(var h=0,l=0,f=0;l<o;l++){var p=1<<l;p&n||(h+=(f%2?-1:1)*e[r][l]*Re(e,t-1,d,c,n|p,a),f++)}return a[s]=h,h}function Ve(e,t){var r=[[e[0],e[1],1,0,0,0,-t[0]*e[0],-t[0]*e[1]],[0,0,0,e[0],e[1],1,-t[1]*e[0],-t[1]*e[1]],[e[2],e[3],1,0,0,0,-t[2]*e[2],-t[2]*e[3]],[0,0,0,e[2],e[3],1,-t[3]*e[2],-t[3]*e[3]],[e[4],e[5],1,0,0,0,-t[4]*e[4],-t[4]*e[5]],[0,0,0,e[4],e[5],1,-t[5]*e[4],-t[5]*e[5]],[e[6],e[7],1,0,0,0,-t[6]*e[6],-t[6]*e[7]],[0,0,0,e[6],e[7],1,-t[7]*e[6],-t[7]*e[7]]],i={},n=Re(r,8,0,0,0,i);if(0!==n){for(var a=[],s=0;s<8;s++)for(var o=0;o<8;o++)null==a[o]&&(a[o]=0),a[o]+=((s+o)%2?-1:1)*Re(r,7,0===s?1:0,1<<s,1<<o,i)/n*t[s];return function(e,t,r){var i=t*a[6]+r*a[7]+1;e[0]=(t*a[0]+r*a[1]+a[2])/i,e[1]=(t*a[3]+r*a[4]+a[5])/i}}}var Ge=[];function Fe(e,t,r,i,n){if(t.getBoundingClientRect&&d.domSupported&&!qe(t)){var a=t.___zrEVENTSAVED||(t.___zrEVENTSAVED={}),s=function(e,t,r){for(var i=r?"invTrans":"trans",n=t[i],a=t.srcCoords,s=[],o=[],u=!0,c=0;c<4;c++){var d=e[c].getBoundingClientRect(),h=2*c,l=d.left,f=d.top;s.push(l,f),u=u&&a&&l===a[h]&&f===a[h+1],o.push(e[c].offsetLeft,e[c].offsetTop)}return u&&n?n:(t.srcCoords=s,t[i]=r?Ve(o,s):Ve(s,o))}(function(e,t){var r=t.markers;if(r)return r;r=t.markers=[];for(var i=["left","right"],n=["top","bottom"],a=0;a<4;a++){var s=document.createElement("div"),o=a%2,u=(a>>1)%2;s.style.cssText=["position: absolute","visibility: hidden","padding: 0","margin: 0","border-width: 0","user-select: none","width:0","height:0",i[o]+":0",n[u]+":0",i[1-o]+":auto",n[1-u]+":auto",""].join("!important;"),e.appendChild(s),r.push(s)}return r}(t,a),a,n);if(s)return s(e,r,i),!0}return!1}function qe(e){return"CANVAS"===e.nodeName.toUpperCase()}var je="undefined"!==typeof window&&!!window.addEventListener,ze=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,He=[];function Ue(e,t,r,i){return r=r||{},i||!d.canvasSupported?We(e,t,r):d.browser.firefox&&null!=t.layerX&&t.layerX!==t.offsetX?(r.zrX=t.layerX,r.zrY=t.layerY):null!=t.offsetX?(r.zrX=t.offsetX,r.zrY=t.offsetY):We(e,t,r),r}function We(e,t,r){if(d.domSupported&&e.getBoundingClientRect){var i=t.clientX,n=t.clientY;if(qe(e)){var a=e.getBoundingClientRect();return r.zrX=i-a.left,void(r.zrY=n-a.top)}if(Fe(He,e,i,n))return r.zrX=He[0],void(r.zrY=He[1])}r.zrX=r.zrY=0}function Ke(e){return e||window.event}function Xe(e,t,r){if(null!=(t=Ke(t)).zrX)return t;var i=t.type;if(i&&i.indexOf("touch")>=0){var n="touchend"!==i?t.targetTouches[0]:t.changedTouches[0];n&&Ue(e,n,t,r)}else{Ue(e,t,t,r);var a=function(e){var t=e.wheelDelta;if(t)return t;var r=e.deltaX,i=e.deltaY;if(null==r||null==i)return t;return 3*(0!==i?Math.abs(i):Math.abs(r))*(i>0?-1:i<0?1:r>0?-1:1)}(t);t.zrDelta=a?a/120:-(t.detail||0)/3}var s=t.button;return null==t.which&&void 0!==s&&ze.test(t.type)&&(t.which=1&s?1:2&s?3:4&s?2:0),t}function Ye(e,t,r,i){je?e.addEventListener(t,r,i):e.attachEvent("on"+t,r)}var Ze=je?function(e){e.preventDefault(),e.stopPropagation(),e.cancelBubble=!0}:function(e){e.returnValue=!1,e.cancelBubble=!0};function Qe(e){return 2===e.which||3===e.which}var $e=function(){function e(){this._track=[]}return e.prototype.recognize=function(e,t,r){return this._doTrack(e,t,r),this._recognize(e)},e.prototype.clear=function(){return this._track.length=0,this},e.prototype._doTrack=function(e,t,r){var i=e.touches;if(i){for(var n={points:[],touches:[],target:t,event:e},a=0,s=i.length;a<s;a++){var o=i[a],u=Ue(r,o,{});n.points.push([u.zrX,u.zrY]),n.touches.push(o)}this._track.push(n)}},e.prototype._recognize=function(e){for(var t in et)if(et.hasOwnProperty(t)){var r=et[t](this._track,e);if(r)return r}},e}();function Je(e){var t=e[1][0]-e[0][0],r=e[1][1]-e[0][1];return Math.sqrt(t*t+r*r)}var et={pinch:function(e,t){var r=e.length;if(r){var i,n=(e[r-1]||{}).points,a=(e[r-2]||{}).points||n;if(a&&a.length>1&&n&&n.length>1){var s=Je(n)/Je(a);!isFinite(s)&&(s=1),t.pinchScale=s;var o=[((i=n)[0][0]+i[1][0])/2,(i[0][1]+i[1][1])/2];return t.pinchX=o[0],t.pinchY=o[1],{type:"pinch",target:e[0].target,event:t}}}}},tt="silent";function rt(){Ze(this.event)}var it=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handler=null,t}return ve(t,e),t.prototype.dispose=function(){},t.prototype.setCursor=function(){},t}(Le),nt=function(e,t){this.x=e,this.y=t},at=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],st=function(e){function t(t,r,i,n){var a=e.call(this)||this;return a._hovered=new nt(0,0),a.storage=t,a.painter=r,a.painterRoot=n,i=i||new it,a.proxy=null,a.setHandlerProxy(i),a._draggingMgr=new De(a),a}return ve(t,e),t.prototype.setHandlerProxy=function(e){this.proxy&&this.proxy.dispose(),e&&(L(at,(function(t){e.on&&e.on(t,this[t],this)}),this),e.handler=this),this.proxy=e},t.prototype.mousemove=function(e){var t=e.zrX,r=e.zrY,i=ut(this,t,r),n=this._hovered,a=n.target;a&&!a.__zr&&(a=(n=this.findHover(n.x,n.y)).target);var s=this._hovered=i?new nt(t,r):this.findHover(t,r),o=s.target,u=this.proxy;u.setCursor&&u.setCursor(o?o.cursor:"default"),a&&o!==a&&this.dispatchToElement(n,"mouseout",e),this.dispatchToElement(s,"mousemove",e),o&&o!==a&&this.dispatchToElement(s,"mouseover",e)},t.prototype.mouseout=function(e){var t=e.zrEventControl;"only_globalout"!==t&&this.dispatchToElement(this._hovered,"mouseout",e),"no_globalout"!==t&&this.trigger("globalout",{type:"globalout",event:e})},t.prototype.resize=function(){this._hovered=new nt(0,0)},t.prototype.dispatch=function(e,t){var r=this[e];r&&r.call(this,t)},t.prototype.dispose=function(){this.proxy.dispose(),this.storage=null,this.proxy=null,this.painter=null},t.prototype.setCursorStyle=function(e){var t=this.proxy;t.setCursor&&t.setCursor(e)},t.prototype.dispatchToElement=function(e,t,r){var i=(e=e||{}).target;if(!i||!i.silent){for(var n="on"+t,a=function(e,t,r){return{type:e,event:r,target:t.target,topTarget:t.topTarget,cancelBubble:!1,offsetX:r.zrX,offsetY:r.zrY,gestureEvent:r.gestureEvent,pinchX:r.pinchX,pinchY:r.pinchY,pinchScale:r.pinchScale,wheelDelta:r.zrDelta,zrByTouch:r.zrByTouch,which:r.which,stop:rt}}(t,e,r);i&&(i[n]&&(a.cancelBubble=!!i[n].call(i,a)),i.trigger(t,a),i=i.__hostTarget?i.__hostTarget:i.parent,!a.cancelBubble););a.cancelBubble||(this.trigger(t,a),this.painter&&this.painter.eachOtherLayer&&this.painter.eachOtherLayer((function(e){"function"===typeof e[n]&&e[n].call(e,a),e.trigger&&e.trigger(t,a)})))}},t.prototype.findHover=function(e,t,r){for(var i=this.storage.getDisplayList(),n=new nt(e,t),a=i.length-1;a>=0;a--){var s=void 0;if(i[a]!==r&&!i[a].ignore&&(s=ot(i[a],e,t))&&(!n.topTarget&&(n.topTarget=i[a]),s!==tt)){n.target=i[a];break}}return n},t.prototype.processGesture=function(e,t){this._gestureMgr||(this._gestureMgr=new $e);var r=this._gestureMgr;"start"===t&&r.clear();var i=r.recognize(e,this.findHover(e.zrX,e.zrY,null).target,this.proxy.dom);if("end"===t&&r.clear(),i){var n=i.type;e.gestureEvent=n;var a=new nt;a.target=i.target,this.dispatchToElement(a,n,i.event)}},t}(Le);function ot(e,t,r){if(e[e.rectHover?"rectContain":"contain"](t,r)){for(var i=e,n=void 0,a=!1;i;){if(i.ignoreClip&&(a=!0),!a){var s=i.getClipPath();if(s&&!s.contain(t,r))return!1;i.silent&&(n=!0)}var o=i.__hostTarget;i=o||i.parent}return!n||tt}return!1}function ut(e,t,r){var i=e.painter;return t<0||t>i.getWidth()||r<0||r>i.getHeight()}L(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],(function(e){st.prototype[e]=function(t){var r,i,n=t.zrX,a=t.zrY,s=ut(this,n,a);if("mouseup"===e&&s||(i=(r=this.findHover(n,a)).target),"mousedown"===e)this._downEl=i,this._downPoint=[t.zrX,t.zrY],this._upEl=i;else if("mouseup"===e)this._upEl=i;else if("click"===e){if(this._downEl!==this._upEl||!this._downPoint||Ce(this._downPoint,[t.zrX,t.zrY])>4)return;this._downPoint=null}this.dispatchToElement(r,e,t)}}));var ct=st;function dt(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e}function ht(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function lt(e,t,r){var i=t[0]*r[0]+t[2]*r[1],n=t[1]*r[0]+t[3]*r[1],a=t[0]*r[2]+t[2]*r[3],s=t[1]*r[2]+t[3]*r[3],o=t[0]*r[4]+t[2]*r[5]+t[4],u=t[1]*r[4]+t[3]*r[5]+t[5];return e[0]=i,e[1]=n,e[2]=a,e[3]=s,e[4]=o,e[5]=u,e}function ft(e,t,r){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4]+r[0],e[5]=t[5]+r[1],e}function pt(e,t,r){var i=t[0],n=t[2],a=t[4],s=t[1],o=t[3],u=t[5],c=Math.sin(r),d=Math.cos(r);return e[0]=i*d+s*c,e[1]=-i*c+s*d,e[2]=n*d+o*c,e[3]=-n*c+d*o,e[4]=d*a+c*u,e[5]=d*u-c*a,e}function vt(e,t,r){var i=r[0],n=r[1];return e[0]=t[0]*i,e[1]=t[1]*n,e[2]=t[2]*i,e[3]=t[3]*n,e[4]=t[4]*i,e[5]=t[5]*n,e}function mt(e,t){var r=t[0],i=t[2],n=t[4],a=t[1],s=t[3],o=t[5],u=r*s-a*i;return u?(u=1/u,e[0]=s*u,e[1]=-a*u,e[2]=-i*u,e[3]=r*u,e[4]=(i*o-s*n)*u,e[5]=(a*n-r*o)*u,e):null}var gt=dt,yt=5e-5;function bt(e){return e>yt||e<-5e-5}var xt=[],kt=[],wt=[1,0,0,1,0,0],_t=Math.abs,St=function(){function e(){}return e.prototype.setPosition=function(e){this.x=e[0],this.y=e[1]},e.prototype.setScale=function(e){this.scaleX=e[0],this.scaleY=e[1]},e.prototype.setOrigin=function(e){this.originX=e[0],this.originY=e[1]},e.prototype.needLocalTransform=function(){return bt(this.rotation)||bt(this.x)||bt(this.y)||bt(this.scaleX-1)||bt(this.scaleY-1)},e.prototype.updateTransform=function(){var e=this.parent,t=e&&e.transform,r=this.needLocalTransform(),i=this.transform;r||t?(i=i||[1,0,0,1,0,0],r?this.getLocalTransform(i):gt(i),t&&(r?lt(i,e.transform,i):ht(i,e.transform)),this.transform=i,this._resolveGlobalScaleRatio(i)):i&&gt(i)},e.prototype._resolveGlobalScaleRatio=function(e){var t=this.globalScaleRatio;if(null!=t&&1!==t){this.getGlobalScale(xt);var r=xt[0]<0?-1:1,i=xt[1]<0?-1:1,n=((xt[0]-r)*t+r)/xt[0]||0,a=((xt[1]-i)*t+i)/xt[1]||0;e[0]*=n,e[1]*=n,e[2]*=a,e[3]*=a}this.invTransform=this.invTransform||[1,0,0,1,0,0],mt(this.invTransform,e)},e.prototype.getLocalTransform=function(t){return e.getLocalTransform(this,t)},e.prototype.getComputedTransform=function(){for(var e=this,t=[];e;)t.push(e),e=e.parent;for(;e=t.pop();)e.updateTransform();return this.transform},e.prototype.setLocalTransform=function(e){if(e){var t=e[0]*e[0]+e[1]*e[1],r=e[2]*e[2]+e[3]*e[3];bt(t-1)&&(t=Math.sqrt(t)),bt(r-1)&&(r=Math.sqrt(r)),e[0]<0&&(t=-t),e[3]<0&&(r=-r),this.rotation=Math.atan2(-e[1]/r,e[0]/t),t<0&&r<0&&(this.rotation+=Math.PI,t=-t,r=-r),this.x=e[4],this.y=e[5],this.scaleX=t,this.scaleY=r}},e.prototype.decomposeTransform=function(){if(this.transform){var e=this.parent,t=this.transform;e&&e.transform&&(lt(kt,e.invTransform,t),t=kt);var r=this.originX,i=this.originY;(r||i)&&(wt[4]=r,wt[5]=i,lt(kt,t,wt),kt[4]-=r,kt[5]-=i,t=kt),this.setLocalTransform(t)}},e.prototype.getGlobalScale=function(e){var t=this.transform;return e=e||[],t?(e[0]=Math.sqrt(t[0]*t[0]+t[1]*t[1]),e[1]=Math.sqrt(t[2]*t[2]+t[3]*t[3]),t[0]<0&&(e[0]=-e[0]),t[3]<0&&(e[1]=-e[1]),e):(e[0]=1,e[1]=1,e)},e.prototype.transformCoordToLocal=function(e,t){var r=[e,t],i=this.invTransform;return i&&Ae(r,r,i),r},e.prototype.transformCoordToGlobal=function(e,t){var r=[e,t],i=this.transform;return i&&Ae(r,r,i),r},e.prototype.getLineScale=function(){var e=this.transform;return e&&_t(e[0]-1)>1e-10&&_t(e[3]-1)>1e-10?Math.sqrt(_t(e[0]*e[3]-e[2]*e[1])):1},e.getLocalTransform=function(e,t){gt(t=t||[]);var r=e.originX||0,i=e.originY||0,n=e.scaleX,a=e.scaleY,s=e.rotation||0,o=e.x,u=e.y;return t[4]-=r,t[5]-=i,t[0]*=n,t[1]*=a,t[2]*=n,t[3]*=a,t[4]*=n,t[5]*=a,s&&pt(t,t,s),t[4]+=r,t[5]+=i,t[4]+=o,t[5]+=u,t},e.initDefaultProps=function(){var t=e.prototype;t.x=0,t.y=0,t.scaleX=1,t.scaleY=1,t.originX=0,t.originY=0,t.rotation=0,t.globalScaleRatio=1}(),e}(),Ot={linear:function(e){return e},quadraticIn:function(e){return e*e},quadraticOut:function(e){return e*(2-e)},quadraticInOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)},cubicIn:function(e){return e*e*e},cubicOut:function(e){return--e*e*e+1},cubicInOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)},quarticIn:function(e){return e*e*e*e},quarticOut:function(e){return 1- --e*e*e*e},quarticInOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)},quinticIn:function(e){return e*e*e*e*e},quinticOut:function(e){return--e*e*e*e*e+1},quinticInOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)},sinusoidalIn:function(e){return 1-Math.cos(e*Math.PI/2)},sinusoidalOut:function(e){return Math.sin(e*Math.PI/2)},sinusoidalInOut:function(e){return.5*(1-Math.cos(Math.PI*e))},exponentialIn:function(e){return 0===e?0:Math.pow(1024,e-1)},exponentialOut:function(e){return 1===e?1:1-Math.pow(2,-10*e)},exponentialInOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(2-Math.pow(2,-10*(e-1)))},circularIn:function(e){return 1-Math.sqrt(1-e*e)},circularOut:function(e){return Math.sqrt(1- --e*e)},circularInOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},elasticIn:function(e){var t,r=.1;return 0===e?0:1===e?1:(!r||r<1?(r=1,t=.1):t=.4*Math.asin(1/r)/(2*Math.PI),-r*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/.4))},elasticOut:function(e){var t,r=.1;return 0===e?0:1===e?1:(!r||r<1?(r=1,t=.1):t=.4*Math.asin(1/r)/(2*Math.PI),r*Math.pow(2,-10*e)*Math.sin((e-t)*(2*Math.PI)/.4)+1)},elasticInOut:function(e){var t,r=.1,i=.4;return 0===e?0:1===e?1:(!r||r<1?(r=1,t=.1):t=i*Math.asin(1/r)/(2*Math.PI),(e*=2)<1?r*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/i)*-.5:r*Math.pow(2,-10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/i)*.5+1)},backIn:function(e){var t=1.70158;return e*e*((t+1)*e-t)},backOut:function(e){var t=1.70158;return--e*e*((t+1)*e+t)+1},backInOut:function(e){var t=2.5949095;return(e*=2)<1?e*e*((t+1)*e-t)*.5:.5*((e-=2)*e*((t+1)*e+t)+2)},bounceIn:function(e){return 1-Ot.bounceOut(1-e)},bounceOut:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},bounceInOut:function(e){return e<.5?.5*Ot.bounceIn(2*e):.5*Ot.bounceOut(2*e-1)+.5}},Tt=Ot,Ct=function(){function e(e){this._initialized=!1,this._startTime=0,this._pausedTime=0,this._paused=!1,this._life=e.life||1e3,this._delay=e.delay||0,this.loop=null!=e.loop&&e.loop,this.gap=e.gap||0,this.easing=e.easing||"linear",this.onframe=e.onframe,this.ondestroy=e.ondestroy,this.onrestart=e.onrestart}return e.prototype.step=function(e,t){if(this._initialized||(this._startTime=e+this._delay,this._initialized=!0),!this._paused){var r=(e-this._startTime-this._pausedTime)/this._life;r<0&&(r=0),r=Math.min(r,1);var i=this.easing,n="string"===typeof i?Tt[i]:i,a="function"===typeof n?n(r):r;if(this.onframe&&this.onframe(a),1===r){if(!this.loop)return!0;this._restart(e),this.onrestart&&this.onrestart()}return!1}this._pausedTime+=t},e.prototype._restart=function(e){var t=(e-this._startTime-this._pausedTime)%this._life;this._startTime=e-t+this.gap,this._pausedTime=0},e.prototype.pause=function(){this._paused=!0},e.prototype.resume=function(){this._paused=!1},e}(),It=function(e){this.value=e},Mt=function(){function e(){this._len=0}return e.prototype.insert=function(e){var t=new It(e);return this.insertEntry(t),t},e.prototype.insertEntry=function(e){this.head?(this.tail.next=e,e.prev=this.tail,e.next=null,this.tail=e):this.head=this.tail=e,this._len++},e.prototype.remove=function(e){var t=e.prev,r=e.next;t?t.next=r:this.head=r,r?r.prev=t:this.tail=t,e.next=e.prev=null,this._len--},e.prototype.len=function(){return this._len},e.prototype.clear=function(){this.head=this.tail=null,this._len=0},e}(),At=function(){function e(e){this._list=new Mt,this._maxSize=10,this._map={},this._maxSize=e}return e.prototype.put=function(e,t){var r=this._list,i=this._map,n=null;if(null==i[e]){var a=r.len(),s=this._lastRemovedEntry;if(a>=this._maxSize&&a>0){var o=r.head;r.remove(o),delete i[o.key],n=o.value,this._lastRemovedEntry=o}s?s.value=t:s=new It(t),s.key=e,r.insertEntry(s),i[e]=s}return n},e.prototype.get=function(e){var t=this._map[e],r=this._list;if(null!=t)return t!==r.tail&&(r.remove(t),r.insertEntry(t)),t.value},e.prototype.clear=function(){this._list.clear(),this._map={}},e.prototype.len=function(){return this._list.len()},e}(),Et={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Nt(e){return(e=Math.round(e))<0?0:e>255?255:e}function Pt(e){return e<0?0:e>1?1:e}function Dt(e){var t=e;return t.length&&"%"===t.charAt(t.length-1)?Nt(parseFloat(t)/100*255):Nt(parseInt(t,10))}function Lt(e){var t=e;return t.length&&"%"===t.charAt(t.length-1)?Pt(parseFloat(t)/100):Pt(parseFloat(t))}function Bt(e,t,r){return r<0?r+=1:r>1&&(r-=1),6*r<1?e+(t-e)*r*6:2*r<1?t:3*r<2?e+(t-e)*(2/3-r)*6:e}function Rt(e,t,r){return e+(t-e)*r}function Vt(e,t,r,i,n){return e[0]=t,e[1]=r,e[2]=i,e[3]=n,e}function Gt(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}var Ft=new At(20),qt=null;function jt(e,t){qt&&Gt(qt,t),qt=Ft.put(e,qt||t.slice())}function zt(e,t){if(e){t=t||[];var r=Ft.get(e);if(r)return Gt(t,r);var i=(e+="").replace(/ /g,"").toLowerCase();if(i in Et)return Gt(t,Et[i]),jt(e,t),t;var n,a=i.length;if("#"===i.charAt(0))return 4===a||5===a?(n=parseInt(i.slice(1,4),16))>=0&&n<=4095?(Vt(t,(3840&n)>>4|(3840&n)>>8,240&n|(240&n)>>4,15&n|(15&n)<<4,5===a?parseInt(i.slice(4),16)/15:1),jt(e,t),t):void Vt(t,0,0,0,1):7===a||9===a?(n=parseInt(i.slice(1,7),16))>=0&&n<=16777215?(Vt(t,(16711680&n)>>16,(65280&n)>>8,255&n,9===a?parseInt(i.slice(7),16)/255:1),jt(e,t),t):void Vt(t,0,0,0,1):void 0;var s=i.indexOf("("),o=i.indexOf(")");if(-1!==s&&o+1===a){var u=i.substr(0,s),c=i.substr(s+1,o-(s+1)).split(","),d=1;switch(u){case"rgba":if(4!==c.length)return 3===c.length?Vt(t,+c[0],+c[1],+c[2],1):Vt(t,0,0,0,1);d=Lt(c.pop());case"rgb":return 3!==c.length?void Vt(t,0,0,0,1):(Vt(t,Dt(c[0]),Dt(c[1]),Dt(c[2]),d),jt(e,t),t);case"hsla":return 4!==c.length?void Vt(t,0,0,0,1):(c[3]=Lt(c[3]),Ht(c,t),jt(e,t),t);case"hsl":return 3!==c.length?void Vt(t,0,0,0,1):(Ht(c,t),jt(e,t),t);default:return}}Vt(t,0,0,0,1)}}function Ht(e,t){var r=(parseFloat(e[0])%360+360)%360/360,i=Lt(e[1]),n=Lt(e[2]),a=n<=.5?n*(i+1):n+i-n*i,s=2*n-a;return Vt(t=t||[],Nt(255*Bt(s,a,r+1/3)),Nt(255*Bt(s,a,r)),Nt(255*Bt(s,a,r-1/3)),1),4===e.length&&(t[3]=e[3]),t}function Ut(e,t){var r=zt(e);if(r){for(var i=0;i<3;i++)r[i]=t<0?r[i]*(1-t)|0:(255-r[i])*t+r[i]|0,r[i]>255?r[i]=255:r[i]<0&&(r[i]=0);return Zt(r,4===r.length?"rgba":"rgb")}}function Wt(e){var t=zt(e);if(t)return((1<<24)+(t[0]<<16)+(t[1]<<8)+ +t[2]).toString(16).slice(1)}function Kt(e,t,r){if(t&&t.length&&e>=0&&e<=1){r=r||[];var i=e*(t.length-1),n=Math.floor(i),a=Math.ceil(i),s=t[n],o=t[a],u=i-n;return r[0]=Nt(Rt(s[0],o[0],u)),r[1]=Nt(Rt(s[1],o[1],u)),r[2]=Nt(Rt(s[2],o[2],u)),r[3]=Pt(Rt(s[3],o[3],u)),r}}function Xt(e,t,r,i){var n,a=zt(e);if(e)return a=function(e){if(e){var t,r,i=e[0]/255,n=e[1]/255,a=e[2]/255,s=Math.min(i,n,a),o=Math.max(i,n,a),u=o-s,c=(o+s)/2;if(0===u)t=0,r=0;else{r=c<.5?u/(o+s):u/(2-o-s);var d=((o-i)/6+u/2)/u,h=((o-n)/6+u/2)/u,l=((o-a)/6+u/2)/u;i===o?t=l-h:n===o?t=1/3+d-l:a===o&&(t=2/3+h-d),t<0&&(t+=1),t>1&&(t-=1)}var f=[360*t,r,c];return null!=e[3]&&f.push(e[3]),f}}(a),null!=t&&(a[0]=(n=t,(n=Math.round(n))<0?0:n>360?360:n)),null!=r&&(a[1]=Lt(r)),null!=i&&(a[2]=Lt(i)),Zt(Ht(a),"rgba")}function Yt(e,t){var r=zt(e);if(r&&null!=t)return r[3]=Pt(t),Zt(r,"rgba")}function Zt(e,t){if(e&&e.length){var r=e[0]+","+e[1]+","+e[2];return"rgba"!==t&&"hsva"!==t&&"hsla"!==t||(r+=","+e[3]),t+"("+r+")"}}function Qt(e,t){var r=zt(e);return r?(.299*r[0]+.587*r[1]+.114*r[2])*r[3]/255+(1-r[3])*t:0}var $t=Array.prototype.slice;function Jt(e,t,r){return(t-e)*r+e}function er(e,t,r,i){for(var n=t.length,a=0;a<n;a++)e[a]=Jt(t[a],r[a],i)}function tr(e,t,r,i){for(var n=t.length,a=0;a<n;a++)e[a]=t[a]+r[a]*i;return e}function rr(e,t,r,i){for(var n=t.length,a=n&&t[0].length,s=0;s<n;s++){e[s]||(e[s]=[]);for(var o=0;o<a;o++)e[s][o]=t[s][o]+r[s][o]*i}return e}function ir(e,t,r){var i=e,n=t;if(i.push&&n.push){var a=i.length,s=n.length;if(a!==s)if(a>s)i.length=s;else for(var o=a;o<s;o++)i.push(1===r?n[o]:$t.call(n[o]));var u=i[0]&&i[0].length;for(o=0;o<i.length;o++)if(1===r)isNaN(i[o])&&(i[o]=n[o]);else for(var c=0;c<u;c++)isNaN(i[o][c])&&(i[o][c]=n[o][c])}}function nr(e,t){var r=e.length;if(r!==t.length)return!1;for(var i=0;i<r;i++)if(e[i]!==t[i])return!1;return!0}function ar(e,t,r,i,n,a,s){var o=.5*(r-e),u=.5*(i-t);return(2*(t-r)+o+u)*s+(-3*(t-r)-2*o-u)*a+o*n+t}function sr(e,t,r,i,n,a,s,o){for(var u=t.length,c=0;c<u;c++)e[c]=ar(t[c],r[c],i[c],n[c],a,s,o)}function or(e){if(D(e)){var t=e.length;if(D(e[0])){for(var r=[],i=0;i<t;i++)r.push($t.call(e[i]));return r}return $t.call(e)}return e}function ur(e){return e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.floor(e[2]),"rgba("+e.join(",")+")"}var cr,dr,hr=[0,0,0,0],lr=function(){function e(e){this.keyframes=[],this.maxTime=0,this.arrDim=0,this.interpolable=!0,this._needsSort=!1,this._isAllValueEqual=!0,this._lastFrame=0,this._lastFramePercent=0,this.propName=e}return e.prototype.isFinished=function(){return this._finished},e.prototype.setFinished=function(){this._finished=!0,this._additiveTrack&&this._additiveTrack.setFinished()},e.prototype.needsAnimate=function(){return!this._isAllValueEqual&&this.keyframes.length>=2&&this.interpolable},e.prototype.getAdditiveTrack=function(){return this._additiveTrack},e.prototype.addKeyframe=function(e,t){e>=this.maxTime?this.maxTime=e:this._needsSort=!0;var r=this.keyframes,i=r.length;if(this.interpolable)if(D(t)){var n=function(e){return D(e&&e[0])?2:1}(t);if(i>0&&this.arrDim!==n)return void(this.interpolable=!1);if(1===n&&"number"!==typeof t[0]||2===n&&"number"!==typeof t[0][0])return void(this.interpolable=!1);if(i>0){var a=r[i-1];this._isAllValueEqual&&(1===n&&nr(t,a.value)||(this._isAllValueEqual=!1))}this.arrDim=n}else{if(this.arrDim>0)return void(this.interpolable=!1);if("string"===typeof t){var s=zt(t);s?(t=s,this.isValueColor=!0):this.interpolable=!1}else if("number"!==typeof t||isNaN(t))return void(this.interpolable=!1);if(this._isAllValueEqual&&i>0){a=r[i-1];(this.isValueColor&&!nr(a.value,t)||a.value!==t)&&(this._isAllValueEqual=!1)}}var o={time:e,value:t,percent:0};return this.keyframes.push(o),o},e.prototype.prepare=function(e){var t=this.keyframes;this._needsSort&&t.sort((function(e,t){return e.time-t.time}));for(var r=this.arrDim,i=t.length,n=t[i-1],a=0;a<i;a++)t[a].percent=t[a].time/this.maxTime,r>0&&a!==i-1&&ir(t[a].value,n.value,r);if(e&&this.needsAnimate()&&e.needsAnimate()&&r===e.arrDim&&this.isValueColor===e.isValueColor&&!e._finished){this._additiveTrack=e;var s=t[0].value;for(a=0;a<i;a++)0===r?this.isValueColor?t[a].additiveValue=tr([],t[a].value,s,-1):t[a].additiveValue=t[a].value-s:1===r?t[a].additiveValue=tr([],t[a].value,s,-1):2===r&&(t[a].additiveValue=rr([],t[a].value,s,-1))}},e.prototype.step=function(e,t){if(!this._finished){this._additiveTrack&&this._additiveTrack._finished&&(this._additiveTrack=null);var r,i=null!=this._additiveTrack,n=i?"additiveValue":"value",a=this.keyframes,s=this.keyframes.length,o=this.propName,u=this.arrDim,c=this.isValueColor;if(t<0)r=0;else if(t<this._lastFramePercent){for(r=Math.min(this._lastFrame+1,s-1);r>=0&&!(a[r].percent<=t);r--);r=Math.min(r,s-2)}else{for(r=this._lastFrame;r<s&&!(a[r].percent>t);r++);r=Math.min(r-1,s-2)}var d=a[r+1],h=a[r];if(h&&d){this._lastFrame=r,this._lastFramePercent=t;var l=d.percent-h.percent;if(0!==l){var f=(t-h.percent)/l,p=i?this._additiveValue:c?hr:e[o];if((u>0||c)&&!p&&(p=this._additiveValue=[]),this.useSpline){var v=a[r][n],m=a[0===r?r:r-1][n],g=a[r>s-2?s-1:r+1][n],y=a[r>s-3?s-1:r+2][n];if(u>0)1===u?sr(p,m,v,g,y,f,f*f,f*f*f):function(e,t,r,i,n,a,s,o){for(var u=t.length,c=t[0].length,d=0;d<u;d++){e[d]||(e[1]=[]);for(var h=0;h<c;h++)e[d][h]=ar(t[d][h],r[d][h],i[d][h],n[d][h],a,s,o)}}(p,m,v,g,y,f,f*f,f*f*f);else if(c)sr(p,m,v,g,y,f,f*f,f*f*f),i||(e[o]=ur(p));else{var b=void 0;b=this.interpolable?ar(m,v,g,y,f,f*f,f*f*f):g,i?this._additiveValue=b:e[o]=b}}else if(u>0)1===u?er(p,h[n],d[n],f):function(e,t,r,i){for(var n=t.length,a=n&&t[0].length,s=0;s<n;s++){e[s]||(e[s]=[]);for(var o=0;o<a;o++)e[s][o]=Jt(t[s][o],r[s][o],i)}}(p,h[n],d[n],f);else if(c)er(p,h[n],d[n],f),i||(e[o]=ur(p));else{b=void 0;b=this.interpolable?Jt(h[n],d[n],f):function(e,t,r){return r>.5?t:e}(h[n],d[n],f),i?this._additiveValue=b:e[o]=b}i&&this._addToTarget(e)}}}},e.prototype._addToTarget=function(e){var t=this.arrDim,r=this.propName,i=this._additiveValue;0===t?this.isValueColor?(zt(e[r],hr),tr(hr,hr,i,1),e[r]=ur(hr)):e[r]=e[r]+i:1===t?tr(e[r],e[r],i,1):2===t&&rr(e[r],e[r],i,1)},e}(),fr=function(){function e(e,t,r){this._tracks={},this._trackKeys=[],this._delay=0,this._maxTime=0,this._paused=!1,this._started=0,this._clip=null,this._target=e,this._loop=t,t&&r?S("Can' use additive animation on looped animation."):this._additiveAnimators=r}return e.prototype.getTarget=function(){return this._target},e.prototype.changeTarget=function(e){this._target=e},e.prototype.when=function(e,t){return this.whenWithKeys(e,t,G(t))},e.prototype.whenWithKeys=function(e,t,r){for(var i=this._tracks,n=0;n<r.length;n++){var a=r[n],s=i[a];if(!s){s=i[a]=new lr(a);var o=void 0,u=this._getAdditiveTrack(a);if(u){var c=u.keyframes[u.keyframes.length-1];o=c&&c.value,u.isValueColor&&o&&(o=ur(o))}else o=this._target[a];if(null==o)continue;0!==e&&s.addKeyframe(0,or(o)),this._trackKeys.push(a)}s.addKeyframe(e,or(t[a]))}return this._maxTime=Math.max(this._maxTime,e),this},e.prototype.pause=function(){this._clip.pause(),this._paused=!0},e.prototype.resume=function(){this._clip.resume(),this._paused=!1},e.prototype.isPaused=function(){return!!this._paused},e.prototype._doneCallback=function(){this._setTracksFinished(),this._clip=null;var e=this._doneList;if(e)for(var t=e.length,r=0;r<t;r++)e[r].call(this)},e.prototype._abortedCallback=function(){this._setTracksFinished();var e=this.animation,t=this._abortedList;if(e&&e.removeClip(this._clip),this._clip=null,t)for(var r=0;r<t.length;r++)t[r].call(this)},e.prototype._setTracksFinished=function(){for(var e=this._tracks,t=this._trackKeys,r=0;r<t.length;r++)e[t[r]].setFinished()},e.prototype._getAdditiveTrack=function(e){var t,r=this._additiveAnimators;if(r)for(var i=0;i<r.length;i++){var n=r[i].getTrack(e);n&&(t=n)}return t},e.prototype.start=function(e,t){if(!(this._started>0)){this._started=1;for(var r=this,i=[],n=0;n<this._trackKeys.length;n++){var a=this._trackKeys[n],s=this._tracks[a],o=this._getAdditiveTrack(a),u=s.keyframes;if(s.prepare(o),s.needsAnimate())i.push(s);else if(!s.interpolable){var c=u[u.length-1];c&&(r._target[s.propName]=c.value)}}if(i.length||t){var d=new Ct({life:this._maxTime,loop:this._loop,delay:this._delay,onframe:function(e){r._started=2;var t=r._additiveAnimators;if(t){for(var n=!1,a=0;a<t.length;a++)if(t[a]._clip){n=!0;break}n||(r._additiveAnimators=null)}for(a=0;a<i.length;a++)i[a].step(r._target,e);var s=r._onframeList;if(s)for(a=0;a<s.length;a++)s[a](r._target,e)},ondestroy:function(){r._doneCallback()}});this._clip=d,this.animation&&this.animation.addClip(d),e&&"spline"!==e&&(d.easing=e)}else this._doneCallback();return this}},e.prototype.stop=function(e){if(this._clip){var t=this._clip;e&&t.onframe(1),this._abortedCallback()}},e.prototype.delay=function(e){return this._delay=e,this},e.prototype.during=function(e){return e&&(this._onframeList||(this._onframeList=[]),this._onframeList.push(e)),this},e.prototype.done=function(e){return e&&(this._doneList||(this._doneList=[]),this._doneList.push(e)),this},e.prototype.aborted=function(e){return e&&(this._abortedList||(this._abortedList=[]),this._abortedList.push(e)),this},e.prototype.getClip=function(){return this._clip},e.prototype.getTrack=function(e){return this._tracks[e]},e.prototype.stopTracks=function(e,t){if(!e.length||!this._clip)return!0;for(var r=this._tracks,i=this._trackKeys,n=0;n<e.length;n++){var a=r[e[n]];a&&(t?a.step(this._target,1):1===this._started&&a.step(this._target,0),a.setFinished())}var s=!0;for(n=0;n<i.length;n++)if(!r[i[n]].isFinished()){s=!1;break}return s&&this._abortedCallback(),s},e.prototype.saveFinalToTarget=function(e,t){if(e){t=t||this._trackKeys;for(var r=0;r<t.length;r++){var i=t[r],n=this._tracks[i];if(n&&!n.isFinished()){var a=n.keyframes,s=a[a.length-1];if(s){var o=or(s.value);n.isValueColor&&(o=ur(o)),e[i]=o}}}}},e.prototype.__changeFinalValue=function(e,t){t=t||G(e);for(var r=0;r<t.length;r++){var i=t[r],n=this._tracks[i];if(n){var a=n.keyframes;if(a.length>1){var s=a.pop();n.addKeyframe(s.time,e[i]),n.prepare(n.getAdditiveTrack())}}}},e}(),pr=function(){function e(e,t){this.x=e||0,this.y=t||0}return e.prototype.copy=function(e){return this.x=e.x,this.y=e.y,this},e.prototype.clone=function(){return new e(this.x,this.y)},e.prototype.set=function(e,t){return this.x=e,this.y=t,this},e.prototype.equal=function(e){return e.x===this.x&&e.y===this.y},e.prototype.add=function(e){return this.x+=e.x,this.y+=e.y,this},e.prototype.scale=function(e){this.x*=e,this.y*=e},e.prototype.scaleAndAdd=function(e,t){this.x+=e.x*t,this.y+=e.y*t},e.prototype.sub=function(e){return this.x-=e.x,this.y-=e.y,this},e.prototype.dot=function(e){return this.x*e.x+this.y*e.y},e.prototype.len=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},e.prototype.lenSquare=function(){return this.x*this.x+this.y*this.y},e.prototype.normalize=function(){var e=this.len();return this.x/=e,this.y/=e,this},e.prototype.distance=function(e){var t=this.x-e.x,r=this.y-e.y;return Math.sqrt(t*t+r*r)},e.prototype.distanceSquare=function(e){var t=this.x-e.x,r=this.y-e.y;return t*t+r*r},e.prototype.negate=function(){return this.x=-this.x,this.y=-this.y,this},e.prototype.transform=function(e){if(e){var t=this.x,r=this.y;return this.x=e[0]*t+e[2]*r+e[4],this.y=e[1]*t+e[3]*r+e[5],this}},e.prototype.toArray=function(e){return e[0]=this.x,e[1]=this.y,e},e.prototype.fromArray=function(e){this.x=e[0],this.y=e[1]},e.set=function(e,t,r){e.x=t,e.y=r},e.copy=function(e,t){e.x=t.x,e.y=t.y},e.len=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},e.lenSquare=function(e){return e.x*e.x+e.y*e.y},e.dot=function(e,t){return e.x*t.x+e.y*t.y},e.add=function(e,t,r){e.x=t.x+r.x,e.y=t.y+r.y},e.sub=function(e,t,r){e.x=t.x-r.x,e.y=t.y-r.y},e.scale=function(e,t,r){e.x=t.x*r,e.y=t.y*r},e.scaleAndAdd=function(e,t,r,i){e.x=t.x+r.x*i,e.y=t.y+r.y*i},e.lerp=function(e,t,r,i){var n=1-i;e.x=n*t.x+i*r.x,e.y=n*t.y+i*r.y},e}(),vr=Math.min,mr=Math.max,gr=new pr,yr=new pr,br=new pr,xr=new pr,kr=new pr,wr=new pr,_r=function(){function e(e,t,r,i){r<0&&isFinite(r)&&(e+=r,r=-r),i<0&&isFinite(i)&&(t+=i,i=-i),this.x=e,this.y=t,this.width=r,this.height=i}return e.prototype.union=function(e){var t=vr(e.x,this.x),r=vr(e.y,this.y);isFinite(this.x)&&isFinite(this.width)?this.width=mr(e.x+e.width,this.x+this.width)-t:this.width=e.width,isFinite(this.y)&&isFinite(this.height)?this.height=mr(e.y+e.height,this.y+this.height)-r:this.height=e.height,this.x=t,this.y=r},e.prototype.applyTransform=function(t){e.applyTransform(this,this,t)},e.prototype.calculateTransform=function(e){var t=this,r=e.width/t.width,i=e.height/t.height,n=[1,0,0,1,0,0];return ft(n,n,[-t.x,-t.y]),vt(n,n,[r,i]),ft(n,n,[e.x,e.y]),n},e.prototype.intersect=function(t,r){if(!t)return!1;t instanceof e||(t=e.create(t));var i=this,n=i.x,a=i.x+i.width,s=i.y,o=i.y+i.height,u=t.x,c=t.x+t.width,d=t.y,h=t.y+t.height,l=!(a<u||c<n||o<d||h<s);if(r){var f=1/0,p=0,v=Math.abs(a-u),m=Math.abs(c-n),g=Math.abs(o-d),y=Math.abs(h-s),b=Math.min(v,m),x=Math.min(g,y);a<u||c<n?b>p&&(p=b,v<m?pr.set(wr,-v,0):pr.set(wr,m,0)):b<f&&(f=b,v<m?pr.set(kr,v,0):pr.set(kr,-m,0)),o<d||h<s?x>p&&(p=x,g<y?pr.set(wr,0,-g):pr.set(wr,0,y)):b<f&&(f=b,g<y?pr.set(kr,0,g):pr.set(kr,0,-y))}return r&&pr.copy(r,l?kr:wr),l},e.prototype.contain=function(e,t){var r=this;return e>=r.x&&e<=r.x+r.width&&t>=r.y&&t<=r.y+r.height},e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height)},e.prototype.copy=function(t){e.copy(this,t)},e.prototype.plain=function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},e.prototype.isFinite=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},e.prototype.isZero=function(){return 0===this.width||0===this.height},e.create=function(t){return new e(t.x,t.y,t.width,t.height)},e.copy=function(e,t){e.x=t.x,e.y=t.y,e.width=t.width,e.height=t.height},e.applyTransform=function(t,r,i){if(i){if(i[1]<1e-5&&i[1]>-1e-5&&i[2]<1e-5&&i[2]>-1e-5){var n=i[0],a=i[3],s=i[4],o=i[5];return t.x=r.x*n+s,t.y=r.y*a+o,t.width=r.width*n,t.height=r.height*a,t.width<0&&(t.x+=t.width,t.width=-t.width),void(t.height<0&&(t.y+=t.height,t.height=-t.height))}gr.x=br.x=r.x,gr.y=xr.y=r.y,yr.x=xr.x=r.x+r.width,yr.y=br.y=r.y+r.height,gr.transform(i),xr.transform(i),yr.transform(i),br.transform(i),t.x=vr(gr.x,yr.x,br.x,xr.x),t.y=vr(gr.y,yr.y,br.y,xr.y);var u=mr(gr.x,yr.x,br.x,xr.x),c=mr(gr.y,yr.y,br.y,xr.y);t.width=u-t.x,t.height=c-t.y}else t!==r&&e.copy(t,r)},e}(),Sr={},Or="12px sans-serif";var Tr={measureText:function(e,t){return cr||(cr=A().getContext("2d")),dr!==t&&(dr=cr.font=t||Or),cr.measureText(e)}};function Cr(e,t){var r=Sr[t=t||Or];r||(r=Sr[t]=new At(500));var i=r.get(e);return null==i&&(i=Tr.measureText(e,t).width,r.put(e,i)),i}function Ir(e,t,r,i){var n=Cr(e,t),a=Nr(t),s=Ar(0,n,r),o=Er(0,a,i);return new _r(s,o,n,a)}function Mr(e,t,r,i){var n=((e||"")+"").split("\n");if(1===n.length)return Ir(n[0],t,r,i);for(var a=new _r(0,0,0,0),s=0;s<n.length;s++){var o=Ir(n[s],t,r,i);0===s?a.copy(o):a.union(o)}return a}function Ar(e,t,r){return"right"===r?e-=t:"center"===r&&(e-=t/2),e}function Er(e,t,r){return"middle"===r?e-=t/2:"bottom"===r&&(e-=t),e}function Nr(e){return Cr("\u56fd",e)}function Pr(e,t){return"string"===typeof e?e.lastIndexOf("%")>=0?parseFloat(e)/100*t:parseFloat(e):e}function Dr(e,t,r){var i=t.position||"inside",n=null!=t.distance?t.distance:5,a=r.height,s=r.width,o=a/2,u=r.x,c=r.y,d="left",h="top";if(i instanceof Array)u+=Pr(i[0],r.width),c+=Pr(i[1],r.height),d=null,h=null;else switch(i){case"left":u-=n,c+=o,d="right",h="middle";break;case"right":u+=n+s,c+=o,h="middle";break;case"top":u+=s/2,c-=n,d="center",h="bottom";break;case"bottom":u+=s/2,c+=a+n,d="center";break;case"inside":u+=s/2,c+=o,d="center",h="middle";break;case"insideLeft":u+=n,c+=o,h="middle";break;case"insideRight":u+=s-n,c+=o,d="right",h="middle";break;case"insideTop":u+=s/2,c+=n,d="center";break;case"insideBottom":u+=s/2,c+=a-n,d="center",h="bottom";break;case"insideTopLeft":u+=n,c+=n;break;case"insideTopRight":u+=s-n,c+=n,d="right";break;case"insideBottomLeft":u+=n,c+=a-n,h="bottom";break;case"insideBottomRight":u+=s-n,c+=a-n,d="right",h="bottom"}return(e=e||{}).x=u,e.y=c,e.align=d,e.verticalAlign=h,e}var Lr=1;"undefined"!==typeof window&&(Lr=Math.max(window.devicePixelRatio||window.screen&&window.screen.deviceXDPI/window.screen.logicalXDPI||1,1));var Br=Lr,Rr="#333",Vr="#ccc",Gr="__zr_normal__",Fr=["x","y","scaleX","scaleY","originX","originY","rotation","ignore"],qr={x:!0,y:!0,scaleX:!0,scaleY:!0,originX:!0,originY:!0,rotation:!0,ignore:!1},jr={},zr=new _r(0,0,0,0),Hr=function(){function e(e){this.id=_(),this.animators=[],this.currentStates=[],this.states={},this._init(e)}return e.prototype._init=function(e){this.attr(e)},e.prototype.drift=function(e,t,r){switch(this.draggable){case"horizontal":t=0;break;case"vertical":e=0}var i=this.transform;i||(i=this.transform=[1,0,0,1,0,0]),i[4]+=e,i[5]+=t,this.decomposeTransform(),this.markRedraw()},e.prototype.beforeUpdate=function(){},e.prototype.afterUpdate=function(){},e.prototype.update=function(){this.updateTransform(),this.__dirty&&this.updateInnerText()},e.prototype.updateInnerText=function(e){var t=this._textContent;if(t&&(!t.ignore||e)){this.textConfig||(this.textConfig={});var r=this.textConfig,i=r.local,n=t.attachedTransform,a=void 0,s=void 0,o=!1;n.parent=i?this:null;var u=!1;if(n.x=t.x,n.y=t.y,n.originX=t.originX,n.originY=t.originY,n.rotation=t.rotation,n.scaleX=t.scaleX,n.scaleY=t.scaleY,null!=r.position){var c=zr;r.layoutRect?c.copy(r.layoutRect):c.copy(this.getBoundingRect()),i||c.applyTransform(this.transform),this.calculateTextPosition?this.calculateTextPosition(jr,r,c):Dr(jr,r,c),n.x=jr.x,n.y=jr.y,a=jr.align,s=jr.verticalAlign;var d=r.origin;if(d&&null!=r.rotation){var h=void 0,l=void 0;"center"===d?(h=.5*c.width,l=.5*c.height):(h=Pr(d[0],c.width),l=Pr(d[1],c.height)),u=!0,n.originX=-n.x+h+(i?0:c.x),n.originY=-n.y+l+(i?0:c.y)}}null!=r.rotation&&(n.rotation=r.rotation);var f=r.offset;f&&(n.x+=f[0],n.y+=f[1],u||(n.originX=-f[0],n.originY=-f[1]));var p=null==r.inside?"string"===typeof r.position&&r.position.indexOf("inside")>=0:r.inside,v=this._innerTextDefaultStyle||(this._innerTextDefaultStyle={}),m=void 0,g=void 0,y=void 0;p&&this.canBeInsideText()?(m=r.insideFill,g=r.insideStroke,null!=m&&"auto"!==m||(m=this.getInsideTextFill()),null!=g&&"auto"!==g||(g=this.getInsideTextStroke(m),y=!0)):(m=r.outsideFill,g=r.outsideStroke,null!=m&&"auto"!==m||(m=this.getOutsideFill()),null!=g&&"auto"!==g||(g=this.getOutsideStroke(m),y=!0)),(m=m||"#000")===v.fill&&g===v.stroke&&y===v.autoStroke&&a===v.align&&s===v.verticalAlign||(o=!0,v.fill=m,v.stroke=g,v.autoStroke=y,v.align=a,v.verticalAlign=s,t.setDefaultTextStyle(v)),o&&t.dirtyStyle(),t.markRedraw()}},e.prototype.canBeInsideText=function(){return!0},e.prototype.getInsideTextFill=function(){return"#fff"},e.prototype.getInsideTextStroke=function(e){return"#000"},e.prototype.getOutsideFill=function(){return this.__zr&&this.__zr.isDarkMode()?Vr:Rr},e.prototype.getOutsideStroke=function(e){var t=this.__zr&&this.__zr.getBackgroundColor(),r="string"===typeof t&&zt(t);r||(r=[255,255,255,1]);for(var i=r[3],n=this.__zr.isDarkMode(),a=0;a<3;a++)r[a]=r[a]*i+(n?0:255)*(1-i);return r[3]=1,Zt(r,"rgba")},e.prototype.traverse=function(e,t){},e.prototype.attrKV=function(e,t){"textConfig"===e?this.setTextConfig(t):"textContent"===e?this.setTextContent(t):"clipPath"===e?this.setClipPath(t):"extra"===e?(this.extra=this.extra||{},I(this.extra,t)):this[e]=t},e.prototype.hide=function(){this.ignore=!0,this.markRedraw()},e.prototype.show=function(){this.ignore=!1,this.markRedraw()},e.prototype.attr=function(e,t){if("string"===typeof e)this.attrKV(e,t);else if(K(e))for(var r=G(e),i=0;i<r.length;i++){var n=r[i];this.attrKV(n,e[n])}return this.markRedraw(),this},e.prototype.saveCurrentToNormalState=function(e){this._innerSaveToNormal(e);for(var t=this._normalState,r=0;r<this.animators.length;r++){var i=this.animators[r],n=i.__fromStateTransition;if(!n||n===Gr){var a=i.targetName,s=a?t[a]:t;i.saveFinalToTarget(s)}}},e.prototype._innerSaveToNormal=function(e){var t=this._normalState;t||(t=this._normalState={}),e.textConfig&&!t.textConfig&&(t.textConfig=this.textConfig),this._savePrimaryToNormal(e,t,Fr)},e.prototype._savePrimaryToNormal=function(e,t,r){for(var i=0;i<r.length;i++){var n=r[i];null==e[n]||n in t||(t[n]=this[n])}},e.prototype.hasState=function(){return this.currentStates.length>0},e.prototype.getState=function(e){return this.states[e]},e.prototype.ensureState=function(e){var t=this.states;return t[e]||(t[e]={}),t[e]},e.prototype.clearStates=function(e){this.useState(Gr,!1,e)},e.prototype.useState=function(t,r,i){var n=t===Gr;if(this.hasState()||!n){var a=this.currentStates,s=this.stateTransition;if(!(E(a,t)>=0)||!r&&1!==a.length){var o;if(this.stateProxy&&!n&&(o=this.stateProxy(t)),o||(o=this.states&&this.states[t]),o||n){n||this.saveCurrentToNormalState(o);var u=!(!o||!o.hoverLayer);return u&&this._toggleHoverLayerFlag(!0),this._applyStateObj(t,o,this._normalState,r,!i&&!this.__inHover&&s&&s.duration>0,s),this._textContent&&this._textContent.useState(t,r),this._textGuide&&this._textGuide.useState(t,r),n?(this.currentStates=[],this._normalState={}):r?this.currentStates.push(t):this.currentStates=[t],this._updateAnimationTargets(),this.markRedraw(),!u&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~e.REDARAW_BIT),o}S("State "+t+" not exists.")}}},e.prototype.useStates=function(t,r){if(t.length){var i=[],n=this.currentStates,a=t.length,s=a===n.length;if(s)for(var o=0;o<a;o++)if(t[o]!==n[o]){s=!1;break}if(s)return;for(o=0;o<a;o++){var u=t[o],c=void 0;this.stateProxy&&(c=this.stateProxy(u,t)),c||(c=this.states[u]),c&&i.push(c)}var d=!(!i[a-1]||!i[a-1].hoverLayer);d&&this._toggleHoverLayerFlag(!0);var h=this._mergeStates(i),l=this.stateTransition;this.saveCurrentToNormalState(h),this._applyStateObj(t.join(","),h,this._normalState,!1,!r&&!this.__inHover&&l&&l.duration>0,l),this._textContent&&this._textContent.useStates(t),this._textGuide&&this._textGuide.useStates(t),this._updateAnimationTargets(),this.currentStates=t.slice(),this.markRedraw(),!d&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~e.REDARAW_BIT)}else this.clearStates()},e.prototype._updateAnimationTargets=function(){for(var e=0;e<this.animators.length;e++){var t=this.animators[e];t.targetName&&t.changeTarget(this[t.targetName])}},e.prototype.removeState=function(e){var t=E(this.currentStates,e);if(t>=0){var r=this.currentStates.slice();r.splice(t,1),this.useStates(r)}},e.prototype.replaceState=function(e,t,r){var i=this.currentStates.slice(),n=E(i,e),a=E(i,t)>=0;n>=0?a?i.splice(n,1):i[n]=t:r&&!a&&i.push(t),this.useStates(i)},e.prototype.toggleState=function(e,t){t?this.useState(e,!0):this.removeState(e)},e.prototype._mergeStates=function(e){for(var t,r={},i=0;i<e.length;i++){var n=e[i];I(r,n),n.textConfig&&I(t=t||{},n.textConfig)}return t&&(r.textConfig=t),r},e.prototype._applyStateObj=function(e,t,r,i,n,a){var s=!(t&&i);t&&t.textConfig?(this.textConfig=I({},i?this.textConfig:r.textConfig),I(this.textConfig,t.textConfig)):s&&r.textConfig&&(this.textConfig=r.textConfig);for(var o={},u=!1,c=0;c<Fr.length;c++){var d=Fr[c],h=n&&qr[d];t&&null!=t[d]?h?(u=!0,o[d]=t[d]):this[d]=t[d]:s&&null!=r[d]&&(h?(u=!0,o[d]=r[d]):this[d]=r[d])}if(!n)for(c=0;c<this.animators.length;c++){var l=this.animators[c],f=l.targetName;l.__changeFinalValue(f?(t||r)[f]:t||r)}u&&this._transitionState(e,o,a)},e.prototype._attachComponent=function(e){if(e.__zr&&!e.__hostTarget)throw new Error("Text element has been added to zrender.");if(e===this)throw new Error("Recursive component attachment.");var t=this.__zr;t&&e.addSelfToZr(t),e.__zr=t,e.__hostTarget=this},e.prototype._detachComponent=function(e){e.__zr&&e.removeSelfFromZr(e.__zr),e.__zr=null,e.__hostTarget=null},e.prototype.getClipPath=function(){return this._clipPath},e.prototype.setClipPath=function(e){this._clipPath&&this._clipPath!==e&&this.removeClipPath(),this._attachComponent(e),this._clipPath=e,this.markRedraw()},e.prototype.removeClipPath=function(){var e=this._clipPath;e&&(this._detachComponent(e),this._clipPath=null,this.markRedraw())},e.prototype.getTextContent=function(){return this._textContent},e.prototype.setTextContent=function(e){var t=this._textContent;if(t!==e){if(t&&t!==e&&this.removeTextContent(),e.__zr&&!e.__hostTarget)throw new Error("Text element has been added to zrender.");e.attachedTransform=new St,this._attachComponent(e),this._textContent=e,this.markRedraw()}},e.prototype.setTextConfig=function(e){this.textConfig||(this.textConfig={}),I(this.textConfig,e),this.markRedraw()},e.prototype.removeTextConfig=function(){this.textConfig=null,this.markRedraw()},e.prototype.removeTextContent=function(){var e=this._textContent;e&&(e.attachedTransform=null,this._detachComponent(e),this._textContent=null,this._innerTextDefaultStyle=null,this.markRedraw())},e.prototype.getTextGuideLine=function(){return this._textGuide},e.prototype.setTextGuideLine=function(e){this._textGuide&&this._textGuide!==e&&this.removeTextGuideLine(),this._attachComponent(e),this._textGuide=e,this.markRedraw()},e.prototype.removeTextGuideLine=function(){var e=this._textGuide;e&&(this._detachComponent(e),this._textGuide=null,this.markRedraw())},e.prototype.markRedraw=function(){this.__dirty|=e.REDARAW_BIT;var t=this.__zr;t&&(this.__inHover?t.refreshHover():t.refresh()),this.__hostTarget&&this.__hostTarget.markRedraw()},e.prototype.dirty=function(){this.markRedraw()},e.prototype._toggleHoverLayerFlag=function(e){this.__inHover=e;var t=this._textContent,r=this._textGuide;t&&(t.__inHover=e),r&&(r.__inHover=e)},e.prototype.addSelfToZr=function(e){this.__zr=e;var t=this.animators;if(t)for(var r=0;r<t.length;r++)e.animation.addAnimator(t[r]);this._clipPath&&this._clipPath.addSelfToZr(e),this._textContent&&this._textContent.addSelfToZr(e),this._textGuide&&this._textGuide.addSelfToZr(e)},e.prototype.removeSelfFromZr=function(e){this.__zr=null;var t=this.animators;if(t)for(var r=0;r<t.length;r++)e.animation.removeAnimator(t[r]);this._clipPath&&this._clipPath.removeSelfFromZr(e),this._textContent&&this._textContent.removeSelfFromZr(e),this._textGuide&&this._textGuide.removeSelfFromZr(e)},e.prototype.animate=function(e,t){var r=e?this[e]:this;if(r){var i=new fr(r,t);return this.addAnimator(i,e),i}S('Property "'+e+'" is not existed in element '+this.id)},e.prototype.addAnimator=function(e,t){var r=this.__zr,i=this;e.during((function(){i.updateDuringAnimation(t)})).done((function(){var t=i.animators,r=E(t,e);r>=0&&t.splice(r,1)})),this.animators.push(e),r&&r.animation.addAnimator(e),r&&r.wakeUp()},e.prototype.updateDuringAnimation=function(e){this.markRedraw()},e.prototype.stopAnimation=function(e,t){for(var r=this.animators,i=r.length,n=[],a=0;a<i;a++){var s=r[a];e&&e!==s.scope?n.push(s):s.stop(t)}return this.animators=n,this},e.prototype.animateTo=function(e,t,r){Ur(this,e,t,r)},e.prototype.animateFrom=function(e,t,r){Ur(this,e,t,r,!0)},e.prototype._transitionState=function(e,t,r,i){for(var n=Ur(this,t,r,i),a=0;a<n.length;a++)n[a].__fromStateTransition=e},e.prototype.getBoundingRect=function(){return null},e.prototype.getPaintRect=function(){return null},e.REDARAW_BIT=1,e.initDefaultProps=function(){var t=e.prototype;t.type="element",t.name="",t.ignore=!1,t.silent=!1,t.isGroup=!1,t.draggable=!1,t.dragging=!1,t.ignoreClip=!1,t.__inHover=!1,t.__dirty=e.REDARAW_BIT;var r={};function i(e,t,i){r[e+t+i]||(console.warn("DEPRECATED: '"+e+"' has been deprecated. use '"+t+"', '"+i+"' instead"),r[e+t+i]=!0)}function n(e,r,n,a){function s(e,t){Object.defineProperty(t,0,{get:function(){return e[n]},set:function(t){e[n]=t}}),Object.defineProperty(t,1,{get:function(){return e[a]},set:function(t){e[a]=t}})}Object.defineProperty(t,e,{get:function(){(i(e,n,a),this[r])||s(this,this[r]=[]);return this[r]},set:function(t){i(e,n,a),this[n]=t[0],this[a]=t[1],this[r]=t,s(this,t)}})}Object.defineProperty&&(!d.browser.ie||d.browser.version>8)&&(n("position","_legacyPos","x","y"),n("scale","_legacyScale","scaleX","scaleY"),n("origin","_legacyOrigin","originX","originY"))}(),e}();function Ur(e,t,r,i,n){var a=[];Xr(e,"",e,t,r=r||{},i,a,n);var s=a.length,o=!1,u=r.done,c=r.aborted,d=function(){o=!0,--s<=0&&(o?u&&u():c&&c())},h=function(){--s<=0&&(o?u&&u():c&&c())};s||u&&u(),a.length>0&&r.during&&a[0].during((function(e,t){r.during(t)}));for(var l=0;l<a.length;l++){var f=a[l];d&&f.done(d),h&&f.aborted(h),f.start(r.easing,r.force)}return a}function Wr(e,t,r){for(var i=0;i<r;i++)e[i]=t[i]}function Kr(e,t,r){if(D(t[r]))if(D(e[r])||(e[r]=[]),Y(t[r])){var i=t[r].length;e[r].length!==i&&(e[r]=new t[r].constructor(i),Wr(e[r],t[r],i))}else{var n=t[r],a=e[r],s=n.length;if(D(n[0]))for(var o=n[0].length,u=0;u<s;u++)a[u]?Wr(a[u],n[u],o):a[u]=Array.prototype.slice.call(n[u]);else Wr(a,n,s);a.length=n.length}else e[r]=t[r]}function Xr(e,t,r,i,n,a,s,o){for(var u=[],c=[],d=G(i),h=n.duration,l=n.delay,f=n.additive,p=n.setToFinal,v=!K(a),m=0;m<d.length;m++){if(null!=r[O=d[m]]&&null!=i[O]&&(v||a[O]))if(K(i[O])&&!D(i[O])){if(t){o||(r[O]=i[O],e.updateDuringAnimation(t));continue}Xr(e,O,r[O],i[O],n,a&&a[O],s,o)}else u.push(O),c.push(O);else o||(r[O]=i[O],e.updateDuringAnimation(t),c.push(O))}var g=u.length;if(g>0||n.force&&!s.length){for(var y=e.animators,b=[],x=0;x<y.length;x++)y[x].targetName===t&&b.push(y[x]);if(!f&&b.length)for(x=0;x<b.length;x++){if(b[x].stopTracks(c)){var k=E(y,b[x]);y.splice(k,1)}}var w=void 0,_=void 0,S=void 0;if(o){_={},p&&(w={});for(x=0;x<g;x++){_[O=u[x]]=r[O],p?w[O]=i[O]:r[O]=i[O]}}else if(p){S={};for(x=0;x<g;x++){var O;S[O=u[x]]=or(r[O]),Kr(r,i,O)}}var T=new fr(r,!1,f?b:null);T.targetName=t,n.scope&&(T.scope=n.scope),p&&w&&T.whenWithKeys(0,w,u),S&&T.whenWithKeys(0,S,u),T.whenWithKeys(null==h?500:h,o?_:i,u).delay(l||0),e.addAnimator(T,t),s.push(T)}}P(Hr,Le),P(Hr,St);var Yr=Hr;function Zr(e,t,r,i){var n=t+1;if(n===r)return 1;if(i(e[n++],e[t])<0){for(;n<r&&i(e[n],e[n-1])<0;)n++;!function(e,t,r){r--;for(;t<r;){var i=e[t];e[t++]=e[r],e[r--]=i}}(e,t,n)}else for(;n<r&&i(e[n],e[n-1])>=0;)n++;return n-t}function Qr(e,t,r,i,n){for(i===t&&i++;i<r;i++){for(var a,s=e[i],o=t,u=i;o<u;)n(s,e[a=o+u>>>1])<0?u=a:o=a+1;var c=i-o;switch(c){case 3:e[o+3]=e[o+2];case 2:e[o+2]=e[o+1];case 1:e[o+1]=e[o];break;default:for(;c>0;)e[o+c]=e[o+c-1],c--}e[o]=s}}function $r(e,t,r,i,n,a){var s=0,o=0,u=1;if(a(e,t[r+n])>0){for(o=i-n;u<o&&a(e,t[r+n+u])>0;)s=u,(u=1+(u<<1))<=0&&(u=o);u>o&&(u=o),s+=n,u+=n}else{for(o=n+1;u<o&&a(e,t[r+n-u])<=0;)s=u,(u=1+(u<<1))<=0&&(u=o);u>o&&(u=o);var c=s;s=n-u,u=n-c}for(s++;s<u;){var d=s+(u-s>>>1);a(e,t[r+d])>0?s=d+1:u=d}return u}function Jr(e,t,r,i,n,a){var s=0,o=0,u=1;if(a(e,t[r+n])<0){for(o=n+1;u<o&&a(e,t[r+n-u])<0;)s=u,(u=1+(u<<1))<=0&&(u=o);u>o&&(u=o);var c=s;s=n-u,u=n-c}else{for(o=i-n;u<o&&a(e,t[r+n+u])>=0;)s=u,(u=1+(u<<1))<=0&&(u=o);u>o&&(u=o),s+=n,u+=n}for(s++;s<u;){var d=s+(u-s>>>1);a(e,t[r+d])<0?u=d:s=d+1}return u}function ei(e,t){var r,i,n,a=7,s=0;r=e.length;var o=[];function u(r){var u=i[r],c=n[r],d=i[r+1],h=n[r+1];n[r]=c+h,r===s-3&&(i[r+1]=i[r+2],n[r+1]=n[r+2]),s--;var l=Jr(e[d],e,u,c,0,t);u+=l,0!==(c-=l)&&0!==(h=$r(e[u+c-1],e,d,h,h-1,t))&&(c<=h?function(r,i,n,s){var u=0;for(u=0;u<i;u++)o[u]=e[r+u];var c=0,d=n,h=r;if(e[h++]=e[d++],0===--s){for(u=0;u<i;u++)e[h+u]=o[c+u];return}if(1===i){for(u=0;u<s;u++)e[h+u]=e[d+u];return void(e[h+s]=o[c])}var l,f,p,v=a;for(;;){l=0,f=0,p=!1;do{if(t(e[d],o[c])<0){if(e[h++]=e[d++],f++,l=0,0===--s){p=!0;break}}else if(e[h++]=o[c++],l++,f=0,1===--i){p=!0;break}}while((l|f)<v);if(p)break;do{if(0!==(l=Jr(e[d],o,c,i,0,t))){for(u=0;u<l;u++)e[h+u]=o[c+u];if(h+=l,c+=l,(i-=l)<=1){p=!0;break}}if(e[h++]=e[d++],0===--s){p=!0;break}if(0!==(f=$r(o[c],e,d,s,0,t))){for(u=0;u<f;u++)e[h+u]=e[d+u];if(h+=f,d+=f,0===(s-=f)){p=!0;break}}if(e[h++]=o[c++],1===--i){p=!0;break}v--}while(l>=7||f>=7);if(p)break;v<0&&(v=0),v+=2}if((a=v)<1&&(a=1),1===i){for(u=0;u<s;u++)e[h+u]=e[d+u];e[h+s]=o[c]}else{if(0===i)throw new Error;for(u=0;u<i;u++)e[h+u]=o[c+u]}}(u,c,d,h):function(r,i,n,s){var u=0;for(u=0;u<s;u++)o[u]=e[n+u];var c=r+i-1,d=s-1,h=n+s-1,l=0,f=0;if(e[h--]=e[c--],0===--i){for(l=h-(s-1),u=0;u<s;u++)e[l+u]=o[u];return}if(1===s){for(f=(h-=i)+1,l=(c-=i)+1,u=i-1;u>=0;u--)e[f+u]=e[l+u];return void(e[h]=o[d])}var p=a;for(;;){var v=0,m=0,g=!1;do{if(t(o[d],e[c])<0){if(e[h--]=e[c--],v++,m=0,0===--i){g=!0;break}}else if(e[h--]=o[d--],m++,v=0,1===--s){g=!0;break}}while((v|m)<p);if(g)break;do{if(0!==(v=i-Jr(o[d],e,r,i,i-1,t))){for(i-=v,f=(h-=v)+1,l=(c-=v)+1,u=v-1;u>=0;u--)e[f+u]=e[l+u];if(0===i){g=!0;break}}if(e[h--]=o[d--],1===--s){g=!0;break}if(0!==(m=s-$r(e[c],o,0,s,s-1,t))){for(s-=m,f=(h-=m)+1,l=(d-=m)+1,u=0;u<m;u++)e[f+u]=o[l+u];if(s<=1){g=!0;break}}if(e[h--]=e[c--],0===--i){g=!0;break}p--}while(v>=7||m>=7);if(g)break;p<0&&(p=0),p+=2}(a=p)<1&&(a=1);if(1===s){for(f=(h-=i)+1,l=(c-=i)+1,u=i-1;u>=0;u--)e[f+u]=e[l+u];e[h]=o[d]}else{if(0===s)throw new Error;for(l=h-(s-1),u=0;u<s;u++)e[l+u]=o[u]}}(u,c,d,h))}return r<120?5:r<1542?10:r<119151?19:40,i=[],n=[],{mergeRuns:function(){for(;s>1;){var e=s-2;if(e>=1&&n[e-1]<=n[e]+n[e+1]||e>=2&&n[e-2]<=n[e]+n[e-1])n[e-1]<n[e+1]&&e--;else if(n[e]>n[e+1])break;u(e)}},forceMergeRuns:function(){for(;s>1;){var e=s-2;e>0&&n[e-1]<n[e+1]&&e--,u(e)}},pushRun:function(e,t){i[s]=e,n[s]=t,s+=1}}}function ti(e,t,r,i){r||(r=0),i||(i=e.length);var n=i-r;if(!(n<2)){var a=0;if(n<32)Qr(e,r,i,r+(a=Zr(e,r,i,t)),t);else{var s=ei(e,t),o=function(e){for(var t=0;e>=32;)t|=1&e,e>>=1;return e+t}(n);do{if((a=Zr(e,r,i,t))<o){var u=n;u>o&&(u=o),Qr(e,r,r+u,r+a,t),a=u}s.pushRun(r,a),s.mergeRuns(),n-=a,r+=a}while(0!==n);s.forceMergeRuns()}}}var ri=!1;function ii(){ri||(ri=!0,console.warn("z / z2 / zlevel of displayable is invalid, which may cause unexpected errors"))}function ni(e,t){return e.zlevel===t.zlevel?e.z===t.z?e.z2-t.z2:e.z-t.z:e.zlevel-t.zlevel}var ai=function(){function e(){this._roots=[],this._displayList=[],this._displayListLen=0,this.displayableSortFunc=ni}return e.prototype.traverse=function(e,t){for(var r=0;r<this._roots.length;r++)this._roots[r].traverse(e,t)},e.prototype.getDisplayList=function(e,t){t=t||!1;var r=this._displayList;return!e&&r.length||this.updateDisplayList(t),r},e.prototype.updateDisplayList=function(e){this._displayListLen=0;for(var t=this._roots,r=this._displayList,i=0,n=t.length;i<n;i++)this._updateAndAddDisplayable(t[i],null,e);r.length=this._displayListLen,d.canvasSupported&&ti(r,ni)},e.prototype._updateAndAddDisplayable=function(e,t,r){if(!e.ignore||r){e.beforeUpdate(),e.update(),e.afterUpdate();var i=e.getClipPath();if(e.ignoreClip)t=null;else if(i){t=t?t.slice():[];for(var n=i,a=e;n;)n.parent=a,n.updateTransform(),t.push(n),a=n,n=n.getClipPath()}if(e.childrenRef){for(var s=e.childrenRef(),o=0;o<s.length;o++){var u=s[o];e.__dirty&&(u.__dirty|=Yr.REDARAW_BIT),this._updateAndAddDisplayable(u,t,r)}e.__dirty=0}else{var c=e;t&&t.length?c.__clipPaths=t:c.__clipPaths&&c.__clipPaths.length>0&&(c.__clipPaths=[]),isNaN(c.z)&&(ii(),c.z=0),isNaN(c.z2)&&(ii(),c.z2=0),isNaN(c.zlevel)&&(ii(),c.zlevel=0),this._displayList[this._displayListLen++]=c}var d=e.getDecalElement&&e.getDecalElement();d&&this._updateAndAddDisplayable(d,t,r);var h=e.getTextGuideLine();h&&this._updateAndAddDisplayable(h,t,r);var l=e.getTextContent();l&&this._updateAndAddDisplayable(l,t,r)}},e.prototype.addRoot=function(e){e.__zr&&e.__zr.storage===this||this._roots.push(e)},e.prototype.delRoot=function(e){if(e instanceof Array)for(var t=0,r=e.length;t<r;t++)this.delRoot(e[t]);else{var i=E(this._roots,e);i>=0&&this._roots.splice(i,1)}},e.prototype.delAllRoots=function(){this._roots=[],this._displayList=[],this._displayListLen=0},e.prototype.getRoots=function(){return this._roots},e.prototype.dispose=function(){this._displayList=null,this._roots=null},e}(),si="undefined"!==typeof window&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(e){return setTimeout(e,16)},oi=function(e){function t(t){var r=e.call(this)||this;return r._running=!1,r._time=0,r._pausedTime=0,r._pauseStart=0,r._paused=!1,t=t||{},r.stage=t.stage||{},r.onframe=t.onframe||function(){},r}return ve(t,e),t.prototype.addClip=function(e){e.animation&&this.removeClip(e),this._clipsHead?(this._clipsTail.next=e,e.prev=this._clipsTail,e.next=null,this._clipsTail=e):this._clipsHead=this._clipsTail=e,e.animation=this},t.prototype.addAnimator=function(e){e.animation=this;var t=e.getClip();t&&this.addClip(t)},t.prototype.removeClip=function(e){if(e.animation){var t=e.prev,r=e.next;t?t.next=r:this._clipsHead=r,r?r.prev=t:this._clipsTail=t,e.next=e.prev=e.animation=null}},t.prototype.removeAnimator=function(e){var t=e.getClip();t&&this.removeClip(t),e.animation=null},t.prototype.update=function(e){for(var t=(new Date).getTime()-this._pausedTime,r=t-this._time,i=this._clipsHead;i;){var n=i.next;i.step(t,r)?(i.ondestroy&&i.ondestroy(),this.removeClip(i),i=n):i=n}this._time=t,e||(this.onframe(r),this.trigger("frame",r),this.stage.update&&this.stage.update())},t.prototype._startLoop=function(){var e=this;this._running=!0,si((function t(){e._running&&(si(t),!e._paused&&e.update())}))},t.prototype.start=function(){this._running||(this._time=(new Date).getTime(),this._pausedTime=0,this._startLoop())},t.prototype.stop=function(){this._running=!1},t.prototype.pause=function(){this._paused||(this._pauseStart=(new Date).getTime(),this._paused=!0)},t.prototype.resume=function(){this._paused&&(this._pausedTime+=(new Date).getTime()-this._pauseStart,this._paused=!1)},t.prototype.clear=function(){for(var e=this._clipsHead;e;){var t=e.next;e.prev=e.next=e.animation=null,e=t}this._clipsHead=this._clipsTail=null},t.prototype.isFinished=function(){return null==this._clipsHead},t.prototype.animate=function(e,t){t=t||{},this.start();var r=new fr(e,t.loop);return this.addAnimator(r),r},t}(Le),ui=d.domSupported,ci=function(){var e=["click","dblclick","mousewheel","wheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],t={pointerdown:1,pointerup:1,pointermove:1,pointerout:1};return{mouse:e,touch:["touchstart","touchend","touchmove"],pointer:B(e,(function(e){var r=e.replace("mouse","pointer");return t.hasOwnProperty(r)?r:e}))}}(),di=["mousemove","mouseup"],hi=["pointermove","pointerup"],li=!1;function fi(e){var t=e.pointerType;return"pen"===t||"touch"===t}function pi(e){e&&(e.zrByTouch=!0)}function vi(e,t){for(var r=t,i=!1;r&&9!==r.nodeType&&!(i=r.domBelongToZr||r!==t&&r===e.painterRoot);)r=r.parentNode;return i}var mi=function(e,t){this.stopPropagation=fe,this.stopImmediatePropagation=fe,this.preventDefault=fe,this.type=t.type,this.target=this.currentTarget=e.dom,this.pointerType=t.pointerType,this.clientX=t.clientX,this.clientY=t.clientY},gi={mousedown:function(e){e=Xe(this.dom,e),this.__mayPointerCapture=[e.zrX,e.zrY],this.trigger("mousedown",e)},mousemove:function(e){e=Xe(this.dom,e);var t=this.__mayPointerCapture;!t||e.zrX===t[0]&&e.zrY===t[1]||this.__togglePointerCapture(!0),this.trigger("mousemove",e)},mouseup:function(e){e=Xe(this.dom,e),this.__togglePointerCapture(!1),this.trigger("mouseup",e)},mouseout:function(e){vi(this,(e=Xe(this.dom,e)).toElement||e.relatedTarget)||(this.__pointerCapturing&&(e.zrEventControl="no_globalout"),this.trigger("mouseout",e))},wheel:function(e){li=!0,e=Xe(this.dom,e),this.trigger("mousewheel",e)},mousewheel:function(e){li||(e=Xe(this.dom,e),this.trigger("mousewheel",e))},touchstart:function(e){pi(e=Xe(this.dom,e)),this.__lastTouchMoment=new Date,this.handler.processGesture(e,"start"),gi.mousemove.call(this,e),gi.mousedown.call(this,e)},touchmove:function(e){pi(e=Xe(this.dom,e)),this.handler.processGesture(e,"change"),gi.mousemove.call(this,e)},touchend:function(e){pi(e=Xe(this.dom,e)),this.handler.processGesture(e,"end"),gi.mouseup.call(this,e),+new Date-+this.__lastTouchMoment<300&&gi.click.call(this,e)},pointerdown:function(e){gi.mousedown.call(this,e)},pointermove:function(e){fi(e)||gi.mousemove.call(this,e)},pointerup:function(e){gi.mouseup.call(this,e)},pointerout:function(e){fi(e)||gi.mouseout.call(this,e)}};L(["click","dblclick","contextmenu"],(function(e){gi[e]=function(t){t=Xe(this.dom,t),this.trigger(e,t)}}));var yi={pointermove:function(e){fi(e)||yi.mousemove.call(this,e)},pointerup:function(e){yi.mouseup.call(this,e)},mousemove:function(e){this.trigger("mousemove",e)},mouseup:function(e){var t=this.__pointerCapturing;this.__togglePointerCapture(!1),this.trigger("mouseup",e),t&&(e.zrEventControl="only_globalout",this.trigger("mouseout",e))}};function bi(e,t){var r=t.domHandlers;d.pointerEventsSupported?L(ci.pointer,(function(i){ki(t,i,(function(t){r[i].call(e,t)}))})):(d.touchEventsSupported&&L(ci.touch,(function(i){ki(t,i,(function(n){r[i].call(e,n),function(e){e.touching=!0,null!=e.touchTimer&&(clearTimeout(e.touchTimer),e.touchTimer=null),e.touchTimer=setTimeout((function(){e.touching=!1,e.touchTimer=null}),700)}(t)}))})),L(ci.mouse,(function(i){ki(t,i,(function(n){n=Ke(n),t.touching||r[i].call(e,n)}))})))}function xi(e,t){function r(r){ki(t,r,(function(i){i=Ke(i),vi(e,i.target)||(i=function(e,t){return Xe(e.dom,new mi(e,t),!0)}(e,i),t.domHandlers[r].call(e,i))}),{capture:!0})}d.pointerEventsSupported?L(hi,r):d.touchEventsSupported||L(di,r)}function ki(e,t,r,i){e.mounted[t]=r,e.listenerOpts[t]=i,Ye(e.domTarget,t,r,i)}function wi(e){var t,r,i,n,a=e.mounted;for(var s in a)a.hasOwnProperty(s)&&(t=e.domTarget,r=s,i=a[s],n=e.listenerOpts[s],je?t.removeEventListener(r,i,n):t.detachEvent("on"+r,i));e.mounted={}}var _i=function(e,t){this.mounted={},this.listenerOpts={},this.touching=!1,this.domTarget=e,this.domHandlers=t},Si=function(e){function t(t,r){var i=e.call(this)||this;return i.__pointerCapturing=!1,i.dom=t,i.painterRoot=r,i._localHandlerScope=new _i(t,gi),ui&&(i._globalHandlerScope=new _i(document,yi)),bi(i,i._localHandlerScope),i}return ve(t,e),t.prototype.dispose=function(){wi(this._localHandlerScope),ui&&wi(this._globalHandlerScope)},t.prototype.setCursor=function(e){this.dom.style&&(this.dom.style.cursor=e||"default")},t.prototype.__togglePointerCapture=function(e){if(this.__mayPointerCapture=null,ui&&+this.__pointerCapturing^+e){this.__pointerCapturing=e;var t=this._globalHandlerScope;e?xi(this,t):wi(t)}},t}(Le),Oi=function(e){function t(t){var r=e.call(this)||this;return r.isGroup=!0,r._children=[],r.attr(t),r}return ve(t,e),t.prototype.childrenRef=function(){return this._children},t.prototype.children=function(){return this._children.slice()},t.prototype.childAt=function(e){return this._children[e]},t.prototype.childOfName=function(e){for(var t=this._children,r=0;r<t.length;r++)if(t[r].name===e)return t[r]},t.prototype.childCount=function(){return this._children.length},t.prototype.add=function(e){if(e&&(e!==this&&e.parent!==this&&(this._children.push(e),this._doAdd(e)),e.__hostTarget))throw"This elemenet has been used as an attachment";return this},t.prototype.addBefore=function(e,t){if(e&&e!==this&&e.parent!==this&&t&&t.parent===this){var r=this._children,i=r.indexOf(t);i>=0&&(r.splice(i,0,e),this._doAdd(e))}return this},t.prototype.replaceAt=function(e,t){var r=this._children,i=r[t];if(e&&e!==this&&e.parent!==this&&e!==i){r[t]=e,i.parent=null;var n=this.__zr;n&&i.removeSelfFromZr(n),this._doAdd(e)}return this},t.prototype._doAdd=function(e){e.parent&&e.parent.remove(e),e.parent=this;var t=this.__zr;t&&t!==e.__zr&&e.addSelfToZr(t),t&&t.refresh()},t.prototype.remove=function(e){var t=this.__zr,r=this._children,i=E(r,e);return i<0||(r.splice(i,1),e.parent=null,t&&e.removeSelfFromZr(t),t&&t.refresh()),this},t.prototype.removeAll=function(){for(var e=this._children,t=this.__zr,r=0;r<e.length;r++){var i=e[r];t&&i.removeSelfFromZr(t),i.parent=null}return e.length=0,this},t.prototype.eachChild=function(e,t){for(var r=this._children,i=0;i<r.length;i++){var n=r[i];e.call(t,n,i)}return this},t.prototype.traverse=function(e,t){for(var r=0;r<this._children.length;r++){var i=this._children[r],n=e.call(t,i);i.isGroup&&!n&&i.traverse(e,t)}return this},t.prototype.addSelfToZr=function(t){e.prototype.addSelfToZr.call(this,t);for(var r=0;r<this._children.length;r++){this._children[r].addSelfToZr(t)}},t.prototype.removeSelfFromZr=function(t){e.prototype.removeSelfFromZr.call(this,t);for(var r=0;r<this._children.length;r++){this._children[r].removeSelfFromZr(t)}},t.prototype.getBoundingRect=function(e){for(var t=new _r(0,0,0,0),r=e||this._children,i=[],n=null,a=0;a<r.length;a++){var s=r[a];if(!s.ignore&&!s.invisible){var o=s.getBoundingRect(),u=s.getLocalTransform(i);u?(_r.applyTransform(t,o,u),(n=n||t.clone()).union(t)):(n=n||o.clone()).union(o)}}return n||t},t}(Yr);Oi.prototype.type="group";var Ti=Oi,Ci=!d.canvasSupported,Ii={},Mi={};var Ai=function(){function e(e,t,r){var i=this;this._sleepAfterStill=10,this._stillFrameAccum=0,this._needsRefresh=!0,this._needsRefreshHover=!0,this._darkMode=!1,r=r||{},this.dom=t,this.id=e;var n=new ai,a=r.renderer||"canvas";if(Ci)throw new Error("IE8 support has been dropped since 5.0");if(Ii[a]||(a=G(Ii)[0]),!Ii[a])throw new Error("Renderer '"+a+"' is not imported. Please import it first.");r.useDirtyRect=null!=r.useDirtyRect&&r.useDirtyRect;var s=new Ii[a](t,n,r,e);this.storage=n,this.painter=s;var o=d.node||d.worker?null:new Si(s.getViewportRoot(),s.root);this.handler=new ct(n,s,o,s.root),this.animation=new oi({stage:{update:function(){return i._flush(!0)}}}),this.animation.start()}return e.prototype.add=function(e){e&&(this.storage.addRoot(e),e.addSelfToZr(this),this.refresh())},e.prototype.remove=function(e){e&&(this.storage.delRoot(e),e.removeSelfFromZr(this),this.refresh())},e.prototype.configLayer=function(e,t){this.painter.configLayer&&this.painter.configLayer(e,t),this.refresh()},e.prototype.setBackgroundColor=function(e){this.painter.setBackgroundColor&&this.painter.setBackgroundColor(e),this.refresh(),this._backgroundColor=e,this._darkMode=function(e){if(!e)return!1;if("string"===typeof e)return Qt(e,1)<.4;if(e.colorStops){for(var t=e.colorStops,r=0,i=t.length,n=0;n<i;n++)r+=Qt(t[n].color,1);return(r/=i)<.4}return!1}(e)},e.prototype.getBackgroundColor=function(){return this._backgroundColor},e.prototype.setDarkMode=function(e){this._darkMode=e},e.prototype.isDarkMode=function(){return this._darkMode},e.prototype.refreshImmediately=function(e){e||this.animation.update(!0),this._needsRefresh=!1,this.painter.refresh(),this._needsRefresh=!1},e.prototype.refresh=function(){this._needsRefresh=!0,this.animation.start()},e.prototype.flush=function(){this._flush(!1)},e.prototype._flush=function(e){var t,r=(new Date).getTime();this._needsRefresh&&(t=!0,this.refreshImmediately(e)),this._needsRefreshHover&&(t=!0,this.refreshHoverImmediately());var i=(new Date).getTime();t?(this._stillFrameAccum=0,this.trigger("rendered",{elapsedTime:i-r})):this._sleepAfterStill>0&&(this._stillFrameAccum++,this._stillFrameAccum>this._sleepAfterStill&&this.animation.stop())},e.prototype.setSleepAfterStill=function(e){this._sleepAfterStill=e},e.prototype.wakeUp=function(){this.animation.start(),this._stillFrameAccum=0},e.prototype.addHover=function(e){},e.prototype.removeHover=function(e){},e.prototype.clearHover=function(){},e.prototype.refreshHover=function(){this._needsRefreshHover=!0},e.prototype.refreshHoverImmediately=function(){this._needsRefreshHover=!1,this.painter.refreshHover&&"canvas"===this.painter.getType()&&this.painter.refreshHover()},e.prototype.resize=function(e){e=e||{},this.painter.resize(e.width,e.height),this.handler.resize()},e.prototype.clearAnimation=function(){this.animation.clear()},e.prototype.getWidth=function(){return this.painter.getWidth()},e.prototype.getHeight=function(){return this.painter.getHeight()},e.prototype.pathToImage=function(e,t){if(this.painter.pathToImage)return this.painter.pathToImage(e,t)},e.prototype.setCursorStyle=function(e){this.handler.setCursorStyle(e)},e.prototype.findHover=function(e,t){return this.handler.findHover(e,t)},e.prototype.on=function(e,t,r){return this.handler.on(e,t,r),this},e.prototype.off=function(e,t){this.handler.off(e,t)},e.prototype.trigger=function(e,t){this.handler.trigger(e,t)},e.prototype.clear=function(){for(var e=this.storage.getRoots(),t=0;t<e.length;t++)e[t]instanceof Ti&&e[t].removeSelfFromZr(this);this.storage.delAllRoots(),this.painter.clear()},e.prototype.dispose=function(){var e;this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,e=this.id,delete Mi[e]},e}();function Ei(e,t){var r=new Ai(_(),e,t);return Mi[r.id]=r,r}var Ni=1e-4;function Pi(e,t,r,i){var n=t[1]-t[0],a=r[1]-r[0];if(0===n)return 0===a?r[0]:(r[0]+r[1])/2;if(i)if(n>0){if(e<=t[0])return r[0];if(e>=t[1])return r[1]}else{if(e>=t[0])return r[0];if(e<=t[1])return r[1]}else{if(e===t[0])return r[0];if(e===t[1])return r[1]}return(e-t[0])/n*a+r[0]}function Di(e,t){switch(e){case"center":case"middle":e="50%";break;case"left":case"top":e="0%";break;case"right":case"bottom":e="100%"}return"string"===typeof e?(r=e,r.replace(/^\s+|\s+$/g,"")).match(/%$/)?parseFloat(e)/100*t:parseFloat(e):null==e?NaN:+e;var r}function Li(e,t,r){return null==t&&(t=10),t=Math.min(Math.max(0,t),20),e=(+e).toFixed(t),r?e:+e}function Bi(e){return e.sort((function(e,t){return e-t})),e}function Ri(e){var t=e.toString(),r=t.indexOf("e");if(r>0){var i=+t.slice(r+1);return i<0?-i:0}var n=t.indexOf(".");return n<0?0:t.length-1-n}function Vi(e,t){var r=Math.log,i=Math.LN10,n=Math.floor(r(e[1]-e[0])/i),a=Math.round(r(Math.abs(t[1]-t[0]))/i),s=Math.min(Math.max(-n+a,0),20);return isFinite(s)?s:20}var Gi=9007199254740991;function Fi(e){var t=2*Math.PI;return(e%t+t)%t}function qi(e){return e>-1e-4&&e<Ni}var ji=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d{1,2})(?::(\d{1,2})(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;function zi(e){if(e instanceof Date)return e;if("string"===typeof e){var t=ji.exec(e);if(!t)return new Date(NaN);if(t[8]){var r=+t[4]||0;return"Z"!==t[8].toUpperCase()&&(r-=+t[8].slice(0,3)),new Date(Date.UTC(+t[1],+(t[2]||1)-1,+t[3]||1,r,+(t[5]||0),+t[6]||0,+t[7]||0))}return new Date(+t[1],+(t[2]||1)-1,+t[3]||1,+t[4]||0,+(t[5]||0),+t[6]||0,+t[7]||0)}return null==e?new Date(NaN):new Date(Math.round(e))}function Hi(e){if(0===e)return 0;var t=Math.floor(Math.log(e)/Math.LN10);return e/Math.pow(10,t)>=10&&t++,t}function Ui(e,t){var r=Hi(e),i=Math.pow(10,r),n=e/i;return e=(t?n<1.5?1:n<2.5?2:n<4?3:n<7?5:10:n<1?1:n<2?2:n<3?3:n<5?5:10)*i,r>=-20?+e.toFixed(r<0?-r:0):e}function Wi(e,t){var r=(e.length-1)*t+1,i=Math.floor(r),n=+e[i-1],a=r-i;return a?n+a*(e[i]-n):n}function Ki(e){e.sort((function(e,t){return o(e,t,0)?-1:1}));for(var t=-1/0,r=1,i=0;i<e.length;){for(var n=e[i].interval,a=e[i].close,s=0;s<2;s++)n[s]<=t&&(n[s]=t,a[s]=s?1:1-r),t=n[s],r=a[s];n[0]===n[1]&&a[0]*a[1]!==1?e.splice(i,1):i++}return e;function o(e,t,r){return e.interval[r]<t.interval[r]||e.interval[r]===t.interval[r]&&(e.close[r]-t.close[r]===(r?-1:1)||!r&&o(e,t,1))}}function Xi(e){var t=parseFloat(e);return t==e&&(0!==t||"string"!==typeof e||e.indexOf("x")<=0)?t:NaN}function Yi(e){return!isNaN(Xi(e))}function Zi(){return Math.round(9*Math.random())}function Qi(e,t){return 0===t?e:Qi(t,e%t)}function $i(e,t){return null==e?t:null==t?e:e*t/Qi(e,t)}var Ji="series\0",en="\0_ec_\0";function tn(e){return e instanceof Array?e:null==e?[]:[e]}function rn(e,t,r){if(e){e[t]=e[t]||{},e.emphasis=e.emphasis||{},e.emphasis[t]=e.emphasis[t]||{};for(var i=0,n=r.length;i<n;i++){var a=r[i];!e.emphasis[t].hasOwnProperty(a)&&e[t].hasOwnProperty(a)&&(e.emphasis[t][a]=e[t][a])}}}var nn=["fontStyle","fontWeight","fontSize","fontFamily","rich","tag","color","textBorderColor","textBorderWidth","width","height","lineHeight","align","verticalAlign","baseline","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","borderColor","borderWidth","borderRadius","padding"];function an(e){return!K(e)||j(e)||e instanceof Date?e:e.value}function sn(e,t,r){var i="normalMerge"===r,n="replaceMerge"===r,a="replaceAll"===r;e=e||[],t=(t||[]).slice();var s=ce();L(t,(function(e,r){K(e)||(t[r]=null)}));var o=function(e,t,r){var i=[];if("replaceAll"===r)return i;for(var n=0;n<e.length;n++){var a=e[n];a&&null!=a.id&&t.set(a.id,n),i.push({existing:"replaceMerge"===r||hn(a)?null:a,newOption:null,keyInfo:null,brandNew:null})}return i}(e,s,r);return(i||n)&&function(e,t,r,i){L(i,(function(n,a){if(n&&null!=n.id){var s=un(n.id),o=r.get(s);if(null!=o){var u=e[o];ie(!u.newOption,'Duplicated option on id "'+s+'".'),u.newOption=n,u.existing=t[o],i[a]=null}}}))}(o,e,s,t),i&&function(e,t){L(t,(function(r,i){if(r&&null!=r.name)for(var n=0;n<e.length;n++){var a=e[n].existing;if(!e[n].newOption&&a&&(null==a.id||null==r.id)&&!hn(r)&&!hn(a)&&on("name",a,r))return e[n].newOption=r,void(t[i]=null)}}))}(o,t),i||n?function(e,t,r){L(t,(function(t){if(t){for(var i,n=0;(i=e[n])&&(i.newOption||hn(i.existing)||i.existing&&null!=t.id&&!on("id",t,i.existing));)n++;i?(i.newOption=t,i.brandNew=r):e.push({newOption:t,brandNew:r,existing:null,keyInfo:null}),n++}}))}(o,t,n):a&&function(e,t){L(t,(function(t){e.push({newOption:t,brandNew:!0,existing:null,keyInfo:null})}))}(o,t),function(e){var t=ce();L(e,(function(e){var r=e.existing;r&&t.set(r.id,e)})),L(e,(function(e){var r=e.newOption;ie(!r||null==r.id||!t.get(r.id)||t.get(r.id)===e,"id duplicates: "+(r&&r.id)),r&&null!=r.id&&t.set(r.id,e),!e.keyInfo&&(e.keyInfo={})})),L(e,(function(e,r){var i=e.existing,n=e.newOption,a=e.keyInfo;if(K(n)){if(a.name=null!=n.name?un(n.name):i?i.name:Ji+r,i)a.id=un(i.id);else if(null!=n.id)a.id=un(n.id);else{var s=0;do{a.id="\0"+a.name+"\0"+s++}while(t.get(a.id))}t.set(a.id,e)}}))}(o),o}function on(e,t,r){var i=cn(t[e],null),n=cn(r[e],null);return null!=i&&null!=n&&i===n}function un(e){return cn(e,"")}function cn(e,t){if(null==e)return t;var r=typeof e;return"string"===r?e:"number"===r||U(e)?e+"":t}function dn(e){var t=e.name;return!(!t||!t.indexOf(Ji))}function hn(e){return e&&null!=e.id&&0===un(e.id).indexOf(en)}function ln(e,t){return null!=t.dataIndexInside?t.dataIndexInside:null!=t.dataIndex?j(t.dataIndex)?B(t.dataIndex,(function(t){return e.indexOfRawIndex(t)})):e.indexOfRawIndex(t.dataIndex):null!=t.name?j(t.name)?B(t.name,(function(t){return e.indexOfName(t)})):e.indexOfName(t.name):void 0}function fn(){var e="__ec_inner_"+pn++;return function(t){return t[e]||(t[e]={})}}var pn=Zi();function vn(e,t,r){var i=mn(t,r),n=i.mainTypeSpecified,a=i.queryOptionMap,s=i.others,o=r?r.defaultMainType:null;return!n&&o&&a.set(o,{}),a.each((function(t,i){var n=bn(e,i,t,{useDefault:o===i,enableAll:!r||null==r.enableAll||r.enableAll,enableNone:!r||null==r.enableNone||r.enableNone});s[i+"Models"]=n.models,s[i+"Model"]=n.models[0]})),s}function mn(e,t){var r;if(H(e)){var i={};i[e+"Index"]=0,r=i}else r=e;var n=ce(),a={},s=!1;return L(r,(function(e,r){if("dataIndex"!==r&&"dataIndexInside"!==r){var i=r.match(/^(\w+)(Index|Id|Name)$/)||[],o=i[1],u=(i[2]||"").toLowerCase();if(o&&u&&!(t&&t.includeMainTypes&&E(t.includeMainTypes,o)<0))s=s||!!o,(n.get(o)||n.set(o,{}))[u]=e}else a[r]=e})),{mainTypeSpecified:s,queryOptionMap:n,others:a}}var gn={useDefault:!0,enableAll:!1,enableNone:!1},yn={useDefault:!1,enableAll:!0,enableNone:!0};function bn(e,t,r,i){i=i||gn;var n=r.index,a=r.id,s=r.name,o={models:null,specified:null!=n||null!=a||null!=s};if(!o.specified){var u=void 0;return o.models=i.useDefault&&(u=e.getComponent(t))?[u]:[],o}return"none"===n||!1===n?(ie(i.enableNone,'`"none"` or `false` is not a valid value on index option.'),o.models=[],o):("all"===n&&(ie(i.enableAll,'`"all"` is not a valid value on index option.'),n=a=s=null),o.models=e.queryComponents({mainType:t,index:n,id:a,name:s}),o)}function xn(e,t,r){e.setAttribute?e.setAttribute(t,r):e[t]=r}function kn(e,t){var r=ce(),i=[];return L(e,(function(e){var n=t(e);(r.get(n)||(i.push(n),r.set(n,[]))).push(e)})),{keys:i,buckets:r}}function wn(e,t,r,i,n){var a=null==t||"auto"===t;if(null==i)return i;if("number"===typeof i)return Li(f=Jt(r||0,i,n),a?Math.max(Ri(r||0),Ri(i)):t);if("string"===typeof i)return n<1?r:i;for(var s=[],o=r,u=i,c=Math.max(o?o.length:0,u.length),d=0;d<c;++d){if("ordinal"===e.getDimensionInfo(d).type)s[d]=(n<1&&o?o:u)[d];else{var h=o&&o[d]?o[d]:0,l=u[d],f=Jt(h,l,n);s[d]=Li(f,a?Math.max(Ri(h),Ri(l)):t)}}return s}var _n="___EC__COMPONENT__CONTAINER___",Sn="___EC__EXTENDED_CLASS___";function On(e){var t={main:"",sub:""};if(e){var r=e.split(".");t.main=r[0]||"",t.sub=r[1]||""}return t}function Tn(e,t){e.$constructor=e,e.extend=function(e){var t=this;function r(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];if(e.$constructor)e.$constructor.apply(this,arguments);else{if(Cn(t)){var a=he(r.prototype,new(t.bind.apply(t,o([void 0],i))));return a}t.apply(this,arguments)}}return r[Sn]=!0,I(r.prototype,e),r.extend=this.extend,r.superCall=An,r.superApply=En,N(r,this),r.superClass=t,r}}function Cn(e){return"function"===typeof e&&/^class\s/.test(Function.prototype.toString.call(e))}function In(e,t){e.extend=t.extend}var Mn=Math.round(10*Math.random());function An(e,t){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return this.superClass.prototype[t].apply(e,r)}function En(e,t,r){return this.superClass.prototype[t].apply(e,r)}function Nn(e){var t={};e.registerClass=function(e){var r,i=e.type||e.prototype.type;if(i){ie(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(r=i),'componentType "'+r+'" illegal'),e.prototype.type=i;var n=On(i);if(n.sub){if(n.sub!==_n){(function(e){var r=t[e.main];r&&r[_n]||((r=t[e.main]={})[_n]=!0);return r}(n))[n.sub]=e}}else t[n.main]=e}return e},e.getClass=function(e,r,i){var n=t[e];if(n&&n[_n]&&(n=r?n[r]:null),i&&!n)throw new Error(r?"Component "+e+"."+(r||"")+" is used but not imported.":e+".type should be specified.");return n},e.getClassesByMainType=function(e){var r=On(e),i=[],n=t[r.main];return n&&n[_n]?L(n,(function(e,t){t!==_n&&i.push(e)})):i.push(n),i},e.hasClass=function(e){var r=On(e);return!!t[r.main]},e.getAllClassMainTypes=function(){var e=[];return L(t,(function(t,r){e.push(r)})),e},e.hasSubTypes=function(e){var r=On(e),i=t[r.main];return i&&i[_n]}}function Pn(e,t){for(var r=0;r<e.length;r++)e[r][1]||(e[r][1]=e[r][0]);return t=t||!1,function(r,i,n){for(var a={},s=0;s<e.length;s++){var o=e[s][1];if(!(i&&E(i,o)>=0||n&&E(n,o)<0)){var u=r.getShallow(o,t);null!=u&&(a[e[s][0]]=u)}}return a}}var Dn=Pn([["fill","color"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["opacity"],["shadowColor"]]),Ln=function(){function e(){}return e.prototype.getAreaStyle=function(e,t){return Dn(this,e,t)},e}(),Bn=new At(50);function Rn(e){if("string"===typeof e){var t=Bn.get(e);return t&&t.image}return e}function Vn(e,t,r,i,n){if(e){if("string"===typeof e){if(t&&t.__zrImageSrc===e||!r)return t;var a=Bn.get(e),s={hostEl:r,cb:i,cbPayload:n};return a?!Fn(t=a.image)&&a.pending.push(s):((t=new Image).onload=t.onerror=Gn,Bn.put(e,t.__cachedImgObj={image:t,pending:[s]}),t.src=t.__zrImageSrc=e),t}return e}return t}function Gn(){var e=this.__cachedImgObj;this.onload=this.onerror=this.__cachedImgObj=null;for(var t=0;t<e.pending.length;t++){var r=e.pending[t],i=r.cb;i&&i(this,r.cbPayload),r.hostEl.dirty()}e.pending.length=0}function Fn(e){return e&&e.width&&e.height}var qn=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g;function jn(e,t,r,i,n){if(!t)return"";var a=(e+"").split("\n");n=zn(t,r,i,n);for(var s=0,o=a.length;s<o;s++)a[s]=Hn(a[s],n);return a.join("\n")}function zn(e,t,r,i){var n=I({},i=i||{});n.font=t,r=J(r,"..."),n.maxIterations=J(i.maxIterations,2);var a=n.minChar=J(i.minChar,0);n.cnCharWidth=Cr("\u56fd",t);var s=n.ascCharWidth=Cr("a",t);n.placeholder=J(i.placeholder,"");for(var o=e=Math.max(0,e-1),u=0;u<a&&o>=s;u++)o-=s;var c=Cr(r,t);return c>o&&(r="",c=0),o=e-c,n.ellipsis=r,n.ellipsisWidth=c,n.contentWidth=o,n.containerWidth=e,n}function Hn(e,t){var r=t.containerWidth,i=t.font,n=t.contentWidth;if(!r)return"";var a=Cr(e,i);if(a<=r)return e;for(var s=0;;s++){if(a<=n||s>=t.maxIterations){e+=t.ellipsis;break}var o=0===s?Un(e,n,t.ascCharWidth,t.cnCharWidth):a>0?Math.floor(e.length*n/a):0;a=Cr(e=e.substr(0,o),i)}return""===e&&(e=t.placeholder),e}function Un(e,t,r,i){for(var n=0,a=0,s=e.length;a<s&&n<t;a++){var o=e.charCodeAt(a);n+=0<=o&&o<=127?r:i}return a}var Wn=function(){},Kn=function(e){this.tokens=[],e&&(this.tokens=e)},Xn=function(){this.width=0,this.height=0,this.contentWidth=0,this.contentHeight=0,this.outerWidth=0,this.outerHeight=0,this.lines=[]};function Yn(e,t,r,i,n){var a,s,o=""===t,u=n&&r.rich[n]||{},c=e.lines,d=u.font||r.font,h=!1;if(i){var l=u.padding,f=l?l[1]+l[3]:0;if(null!=u.width&&"auto"!==u.width){var p=Pr(u.width,i.width)+f;c.length>0&&p+i.accumWidth>i.width&&(a=t.split("\n"),h=!0),i.accumWidth=p}else{var v=$n(t,d,i.width,i.breakAll,i.accumWidth);i.accumWidth=v.accumWidth+f,s=v.linesWidths,a=v.lines}}else a=t.split("\n");for(var m=0;m<a.length;m++){var g=a[m],y=new Wn;if(y.styleName=n,y.text=g,y.isLineHolder=!g&&!o,"number"===typeof u.width?y.width=u.width:y.width=s?s[m]:Cr(g,d),m||h)c.push(new Kn([y]));else{var b=(c[c.length-1]||(c[0]=new Kn)).tokens,x=b.length;1===x&&b[0].isLineHolder?b[0]=y:(g||!x||o)&&b.push(y)}}}var Zn=R(",&?/;] ".split(""),(function(e,t){return e[t]=!0,e}),{});function Qn(e){return!function(e){var t=e.charCodeAt(0);return t>=33&&t<=255}(e)||!!Zn[e]}function $n(e,t,r,i,n){for(var a=[],s=[],o="",u="",c=0,d=0,h=0;h<e.length;h++){var l=e.charAt(h);if("\n"!==l){var f=Cr(l,t),p=!i&&!Qn(l);(a.length?d+f>r:n+d+f>r)?d?(o||u)&&(p?(o||(o=u,u="",d=c=0),a.push(o),s.push(d-c),u+=l,o="",d=c+=f):(u&&(o+=u,d+=c,u="",c=0),a.push(o),s.push(d),o=l,d=f)):p?(a.push(u),s.push(c),u=l,c=f):(a.push(l),s.push(f)):(d+=f,p?(u+=l,c+=f):(u&&(o+=u,u="",c=0),o+=l))}else u&&(o+=u,d+=c),a.push(o),s.push(d),o="",u="",c=0,d=0}return a.length||o||(o=e,u="",c=0),u&&(o+=u),o&&(a.push(o),s.push(d)),1===a.length&&(d+=n),{accumWidth:d,lines:a,linesWidths:s}}var Jn="__zr_style_"+Math.round(10*Math.random()),ea={shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"#000",opacity:1,blend:"source-over"},ta={style:{shadowBlur:!0,shadowOffsetX:!0,shadowOffsetY:!0,shadowColor:!0,opacity:!0}};ea[Jn]=!0;var ra=["z","z2","invisible"],ia=function(e){function t(t){return e.call(this,t)||this}return ve(t,e),t.prototype._init=function(t){for(var r=G(t),i=0;i<r.length;i++){var n=r[i];"style"===n?this.useStyle(t[n]):e.prototype.attrKV.call(this,n,t[n])}this.style||this.useStyle({})},t.prototype.beforeBrush=function(){},t.prototype.afterBrush=function(){},t.prototype.innerBeforeBrush=function(){},t.prototype.innerAfterBrush=function(){},t.prototype.shouldBePainted=function(e,t,r,i){var n=this.transform;if(this.ignore||this.invisible||0===this.style.opacity||this.culling&&function(e,t,r){na.copy(e.getBoundingRect()),e.transform&&na.applyTransform(e.transform);return aa.width=t,aa.height=r,!na.intersect(aa)}(this,e,t)||n&&!n[0]&&!n[3])return!1;if(r&&this.__clipPaths)for(var a=0;a<this.__clipPaths.length;++a)if(this.__clipPaths[a].isZeroArea())return!1;if(i&&this.parent)for(var s=this.parent;s;){if(s.ignore)return!1;s=s.parent}return!0},t.prototype.contain=function(e,t){return this.rectContain(e,t)},t.prototype.traverse=function(e,t){e.call(t,this)},t.prototype.rectContain=function(e,t){var r=this.transformCoordToLocal(e,t);return this.getBoundingRect().contain(r[0],r[1])},t.prototype.getPaintRect=function(){var e=this._paintRect;if(!this._paintRect||this.__dirty){var t=this.transform,r=this.getBoundingRect(),i=this.style,n=i.shadowBlur||0,a=i.shadowOffsetX||0,s=i.shadowOffsetY||0;e=this._paintRect||(this._paintRect=new _r(0,0,0,0)),t?_r.applyTransform(e,r,t):e.copy(r),(n||a||s)&&(e.width+=2*n+Math.abs(a),e.height+=2*n+Math.abs(s),e.x=Math.min(e.x,e.x+a-n),e.y=Math.min(e.y,e.y+s-n));var o=this.dirtyRectTolerance;e.isZero()||(e.x=Math.floor(e.x-o),e.y=Math.floor(e.y-o),e.width=Math.ceil(e.width+1+2*o),e.height=Math.ceil(e.height+1+2*o))}return e},t.prototype.setPrevPaintRect=function(e){e?(this._prevPaintRect=this._prevPaintRect||new _r(0,0,0,0),this._prevPaintRect.copy(e)):this._prevPaintRect=null},t.prototype.getPrevPaintRect=function(){return this._prevPaintRect},t.prototype.animateStyle=function(e){return this.animate("style",e)},t.prototype.updateDuringAnimation=function(e){"style"===e?this.dirtyStyle():this.markRedraw()},t.prototype.attrKV=function(t,r){"style"!==t?e.prototype.attrKV.call(this,t,r):this.style?this.setStyle(r):this.useStyle(r)},t.prototype.setStyle=function(e,t){return"string"===typeof e?this.style[e]=t:I(this.style,e),this.dirtyStyle(),this},t.prototype.dirtyStyle=function(){this.markRedraw(),this.__dirty|=t.STYLE_CHANGED_BIT,this._rect&&(this._rect=null)},t.prototype.dirty=function(){this.dirtyStyle()},t.prototype.styleChanged=function(){return!!(this.__dirty&t.STYLE_CHANGED_BIT)},t.prototype.styleUpdated=function(){this.__dirty&=~t.STYLE_CHANGED_BIT},t.prototype.createStyle=function(e){return he(ea,e)},t.prototype.useStyle=function(e){e[Jn]||(e=this.createStyle(e)),this.__inHover?this.__hoverStyle=e:this.style=e,this.dirtyStyle()},t.prototype.isStyleObject=function(e){return e[Jn]},t.prototype._innerSaveToNormal=function(t){e.prototype._innerSaveToNormal.call(this,t);var r=this._normalState;t.style&&!r.style&&(r.style=this._mergeStyle(this.createStyle(),this.style)),this._savePrimaryToNormal(t,r,ra)},t.prototype._applyStateObj=function(t,r,i,n,a,s){e.prototype._applyStateObj.call(this,t,r,i,n,a,s);var o,u=!(r&&n);if(r&&r.style?a?n?o=r.style:(o=this._mergeStyle(this.createStyle(),i.style),this._mergeStyle(o,r.style)):(o=this._mergeStyle(this.createStyle(),n?this.style:i.style),this._mergeStyle(o,r.style)):u&&(o=i.style),o)if(a){var c=this.style;if(this.style=this.createStyle(u?{}:c),u)for(var d=G(c),h=0;h<d.length;h++){(f=d[h])in o&&(o[f]=o[f],this.style[f]=c[f])}var l=G(o);for(h=0;h<l.length;h++){var f=l[h];this.style[f]=this.style[f]}this._transitionState(t,{style:o},s,this.getAnimationStyleProps())}else this.useStyle(o);for(h=0;h<ra.length;h++){f=ra[h];r&&null!=r[f]?this[f]=r[f]:u&&null!=i[f]&&(this[f]=i[f])}},t.prototype._mergeStates=function(t){for(var r,i=e.prototype._mergeStates.call(this,t),n=0;n<t.length;n++){var a=t[n];a.style&&(r=r||{},this._mergeStyle(r,a.style))}return r&&(i.style=r),i},t.prototype._mergeStyle=function(e,t){return I(e,t),e},t.prototype.getAnimationStyleProps=function(){return ta},t.STYLE_CHANGED_BIT=2,t.initDefaultProps=function(){var e=t.prototype;e.type="displayable",e.invisible=!1,e.z=0,e.z2=0,e.zlevel=0,e.culling=!1,e.cursor="pointer",e.rectHover=!1,e.incremental=!1,e._rect=null,e.dirtyRectTolerance=0,e.__dirty=Yr.REDARAW_BIT|t.STYLE_CHANGED_BIT}(),t}(Yr),na=new _r(0,0,0,0),aa=new _r(0,0,0,0);var sa=ia,oa=Math.pow,ua=Math.sqrt,ca=1e-8,da=1e-4,ha=ua(3),la=1/3,fa=me(),pa=me(),va=me();function ma(e){return e>-1e-8&&e<ca}function ga(e){return e>ca||e<-1e-8}function ya(e,t,r,i,n){var a=1-n;return a*a*(a*e+3*n*t)+n*n*(n*i+3*a*r)}function ba(e,t,r,i,n){var a=1-n;return 3*(((t-e)*a+2*(r-t)*n)*a+(i-r)*n*n)}function xa(e,t,r,i,n,a){var s=i+3*(t-r)-e,o=3*(r-2*t+e),u=3*(t-e),c=e-n,d=o*o-3*s*u,h=o*u-9*s*c,l=u*u-3*o*c,f=0;if(ma(d)&&ma(h)){if(ma(o))a[0]=0;else(S=-u/o)>=0&&S<=1&&(a[f++]=S)}else{var p=h*h-4*d*l;if(ma(p)){var v=h/d,m=-v/2;(S=-o/s+v)>=0&&S<=1&&(a[f++]=S),m>=0&&m<=1&&(a[f++]=m)}else if(p>0){var g=ua(p),y=d*o+1.5*s*(-h+g),b=d*o+1.5*s*(-h-g);(S=(-o-((y=y<0?-oa(-y,la):oa(y,la))+(b=b<0?-oa(-b,la):oa(b,la))))/(3*s))>=0&&S<=1&&(a[f++]=S)}else{var x=(2*d*o-3*s*h)/(2*ua(d*d*d)),k=Math.acos(x)/3,w=ua(d),_=Math.cos(k),S=(-o-2*w*_)/(3*s),O=(m=(-o+w*(_+ha*Math.sin(k)))/(3*s),(-o+w*(_-ha*Math.sin(k)))/(3*s));S>=0&&S<=1&&(a[f++]=S),m>=0&&m<=1&&(a[f++]=m),O>=0&&O<=1&&(a[f++]=O)}}return f}function ka(e,t,r,i,n){var a=6*r-12*t+6*e,s=9*t+3*i-3*e-9*r,o=3*t-3*e,u=0;if(ma(s)){if(ga(a))(d=-o/a)>=0&&d<=1&&(n[u++]=d)}else{var c=a*a-4*s*o;if(ma(c))n[0]=-a/(2*s);else if(c>0){var d,h=ua(c),l=(-a-h)/(2*s);(d=(-a+h)/(2*s))>=0&&d<=1&&(n[u++]=d),l>=0&&l<=1&&(n[u++]=l)}}return u}function wa(e,t,r,i,n,a){var s=(t-e)*n+e,o=(r-t)*n+t,u=(i-r)*n+r,c=(o-s)*n+s,d=(u-o)*n+o,h=(d-c)*n+c;a[0]=e,a[1]=s,a[2]=c,a[3]=h,a[4]=h,a[5]=d,a[6]=u,a[7]=i}function _a(e,t,r,i,n,a,s,o,u,c,d){var h,l,f,p,v,m=.005,g=1/0;fa[0]=u,fa[1]=c;for(var y=0;y<1;y+=.05)pa[0]=ya(e,r,n,s,y),pa[1]=ya(t,i,a,o,y),(p=Ie(fa,pa))<g&&(h=y,g=p);g=1/0;for(var b=0;b<32&&!(m<da);b++)l=h-m,f=h+m,pa[0]=ya(e,r,n,s,l),pa[1]=ya(t,i,a,o,l),p=Ie(pa,fa),l>=0&&p<g?(h=l,g=p):(va[0]=ya(e,r,n,s,f),va[1]=ya(t,i,a,o,f),v=Ie(va,fa),f<=1&&v<g?(h=f,g=v):m*=.5);return d&&(d[0]=ya(e,r,n,s,h),d[1]=ya(t,i,a,o,h)),ua(g)}function Sa(e,t,r,i,n,a,s,o,u){for(var c=e,d=t,h=0,l=1/u,f=1;f<=u;f++){var p=f*l,v=ya(e,r,n,s,p),m=ya(t,i,a,o,p),g=v-c,y=m-d;h+=Math.sqrt(g*g+y*y),c=v,d=m}return h}function Oa(e,t,r,i){var n=1-i;return n*(n*e+2*i*t)+i*i*r}function Ta(e,t,r,i){return 2*((1-i)*(t-e)+i*(r-t))}function Ca(e,t,r){var i=e+r-2*t;return 0===i?.5:(e-t)/i}function Ia(e,t,r,i,n){var a=(t-e)*i+e,s=(r-t)*i+t,o=(s-a)*i+a;n[0]=e,n[1]=a,n[2]=o,n[3]=o,n[4]=s,n[5]=r}function Ma(e,t,r,i,n,a,s,o,u){var c,d=.005,h=1/0;fa[0]=s,fa[1]=o;for(var l=0;l<1;l+=.05){pa[0]=Oa(e,r,n,l),pa[1]=Oa(t,i,a,l),(m=Ie(fa,pa))<h&&(c=l,h=m)}h=1/0;for(var f=0;f<32&&!(d<da);f++){var p=c-d,v=c+d;pa[0]=Oa(e,r,n,p),pa[1]=Oa(t,i,a,p);var m=Ie(pa,fa);if(p>=0&&m<h)c=p,h=m;else{va[0]=Oa(e,r,n,v),va[1]=Oa(t,i,a,v);var g=Ie(va,fa);v<=1&&g<h?(c=v,h=g):d*=.5}}return u&&(u[0]=Oa(e,r,n,c),u[1]=Oa(t,i,a,c)),ua(h)}function Aa(e,t,r,i,n,a,s){for(var o=e,u=t,c=0,d=1/s,h=1;h<=s;h++){var l=h*d,f=Oa(e,r,n,l),p=Oa(t,i,a,l),v=f-o,m=p-u;c+=Math.sqrt(v*v+m*m),o=f,u=p}return c}var Ea=Math.min,Na=Math.max,Pa=Math.sin,Da=Math.cos,La=2*Math.PI,Ba=me(),Ra=me(),Va=me();function Ga(e,t,r){if(0!==e.length){for(var i=e[0],n=i[0],a=i[0],s=i[1],o=i[1],u=1;u<e.length;u++)i=e[u],n=Ea(n,i[0]),a=Na(a,i[0]),s=Ea(s,i[1]),o=Na(o,i[1]);t[0]=n,t[1]=s,r[0]=a,r[1]=o}}function Fa(e,t,r,i,n,a){n[0]=Ea(e,r),n[1]=Ea(t,i),a[0]=Na(e,r),a[1]=Na(t,i)}var qa=[],ja=[];function za(e,t,r,i,n,a,s,o,u,c){var d=ka,h=ya,l=d(e,r,n,s,qa);u[0]=1/0,u[1]=1/0,c[0]=-1/0,c[1]=-1/0;for(var f=0;f<l;f++){var p=h(e,r,n,s,qa[f]);u[0]=Ea(p,u[0]),c[0]=Na(p,c[0])}l=d(t,i,a,o,ja);for(f=0;f<l;f++){var v=h(t,i,a,o,ja[f]);u[1]=Ea(v,u[1]),c[1]=Na(v,c[1])}u[0]=Ea(e,u[0]),c[0]=Na(e,c[0]),u[0]=Ea(s,u[0]),c[0]=Na(s,c[0]),u[1]=Ea(t,u[1]),c[1]=Na(t,c[1]),u[1]=Ea(o,u[1]),c[1]=Na(o,c[1])}function Ha(e,t,r,i,n,a,s,o){var u=Ca,c=Oa,d=Na(Ea(u(e,r,n),1),0),h=Na(Ea(u(t,i,a),1),0),l=c(e,r,n,d),f=c(t,i,a,h);s[0]=Ea(e,n,l),s[1]=Ea(t,a,f),o[0]=Na(e,n,l),o[1]=Na(t,a,f)}function Ua(e,t,r,i,n,a,s,o,u){var c=Ee,d=Ne,h=Math.abs(n-a);if(h%La<1e-4&&h>1e-4)return o[0]=e-r,o[1]=t-i,u[0]=e+r,void(u[1]=t+i);if(Ba[0]=Da(n)*r+e,Ba[1]=Pa(n)*i+t,Ra[0]=Da(a)*r+e,Ra[1]=Pa(a)*i+t,c(o,Ba,Ra),d(u,Ba,Ra),(n%=La)<0&&(n+=La),(a%=La)<0&&(a+=La),n>a&&!s?a+=La:n<a&&s&&(n+=La),s){var l=a;a=n,n=l}for(var f=0;f<a;f+=Math.PI/2)f>n&&(Va[0]=Da(f)*r+e,Va[1]=Pa(f)*i+t,c(o,Va,o),d(u,Va,u))}var Wa={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},Ka=[],Xa=[],Ya=[],Za=[],Qa=[],$a=[],Ja=Math.min,es=Math.max,ts=Math.cos,rs=Math.sin,is=Math.sqrt,ns=Math.abs,as=Math.PI,ss=2*as,os="undefined"!==typeof Float32Array,us=[];function cs(e){return Math.round(e/as*1e8)/1e8%2*as}function ds(e,t){var r=cs(e[0]);r<0&&(r+=ss);var i=r-e[0],n=e[1];n+=i,!t&&n-r>=ss?n=r+ss:t&&r-n>=ss?n=r-ss:!t&&r>n?n=r+(ss-cs(r-n)):t&&r<n&&(n=r-(ss-cs(n-r))),e[0]=r,e[1]=n}var hs=function(){function e(e){this.dpr=1,this._version=0,this._xi=0,this._yi=0,this._x0=0,this._y0=0,this._len=0,e&&(this._saveData=!1),this._saveData&&(this.data=[])}return e.prototype.increaseVersion=function(){this._version++},e.prototype.getVersion=function(){return this._version},e.prototype.setScale=function(e,t,r){(r=r||0)>0&&(this._ux=ns(r/Br/e)||0,this._uy=ns(r/Br/t)||0)},e.prototype.setDPR=function(e){this.dpr=e},e.prototype.setContext=function(e){this._ctx=e},e.prototype.getContext=function(){return this._ctx},e.prototype.beginPath=function(){return this._ctx&&this._ctx.beginPath(),this.reset(),this},e.prototype.reset=function(){this._saveData&&(this._len=0),this._lineDash&&(this._lineDash=null,this._dashOffset=0),this._pathSegLen&&(this._pathSegLen=null,this._pathLen=0),this._version++},e.prototype.moveTo=function(e,t){return this.addData(Wa.M,e,t),this._ctx&&this._ctx.moveTo(e,t),this._x0=e,this._y0=t,this._xi=e,this._yi=t,this},e.prototype.lineTo=function(e,t){var r=ns(e-this._xi)>this._ux||ns(t-this._yi)>this._uy||this._len<5;return this.addData(Wa.L,e,t),this._ctx&&r&&(this._needsDash?this._dashedLineTo(e,t):this._ctx.lineTo(e,t)),r&&(this._xi=e,this._yi=t),this},e.prototype.bezierCurveTo=function(e,t,r,i,n,a){return this.addData(Wa.C,e,t,r,i,n,a),this._ctx&&(this._needsDash?this._dashedBezierTo(e,t,r,i,n,a):this._ctx.bezierCurveTo(e,t,r,i,n,a)),this._xi=n,this._yi=a,this},e.prototype.quadraticCurveTo=function(e,t,r,i){return this.addData(Wa.Q,e,t,r,i),this._ctx&&(this._needsDash?this._dashedQuadraticTo(e,t,r,i):this._ctx.quadraticCurveTo(e,t,r,i)),this._xi=r,this._yi=i,this},e.prototype.arc=function(e,t,r,i,n,a){us[0]=i,us[1]=n,ds(us,a),i=us[0];var s=(n=us[1])-i;return this.addData(Wa.A,e,t,r,r,i,s,0,a?0:1),this._ctx&&this._ctx.arc(e,t,r,i,n,a),this._xi=ts(n)*r+e,this._yi=rs(n)*r+t,this},e.prototype.arcTo=function(e,t,r,i,n){return this._ctx&&this._ctx.arcTo(e,t,r,i,n),this},e.prototype.rect=function(e,t,r,i){return this._ctx&&this._ctx.rect(e,t,r,i),this.addData(Wa.R,e,t,r,i),this},e.prototype.closePath=function(){this.addData(Wa.Z);var e=this._ctx,t=this._x0,r=this._y0;return e&&(this._needsDash&&this._dashedLineTo(t,r),e.closePath()),this._xi=t,this._yi=r,this},e.prototype.fill=function(e){e&&e.fill(),this.toStatic()},e.prototype.stroke=function(e){e&&e.stroke(),this.toStatic()},e.prototype.setLineDash=function(e){if(e instanceof Array){this._lineDash=e,this._dashIdx=0;for(var t=0,r=0;r<e.length;r++)t+=e[r];this._dashSum=t,this._needsDash=!0}else this._lineDash=null,this._needsDash=!1;return this},e.prototype.setLineDashOffset=function(e){return this._dashOffset=e,this},e.prototype.len=function(){return this._len},e.prototype.setData=function(e){var t=e.length;this.data&&this.data.length===t||!os||(this.data=new Float32Array(t));for(var r=0;r<t;r++)this.data[r]=e[r];this._len=t},e.prototype.appendPath=function(e){e instanceof Array||(e=[e]);for(var t=e.length,r=0,i=this._len,n=0;n<t;n++)r+=e[n].len();os&&this.data instanceof Float32Array&&(this.data=new Float32Array(i+r));for(n=0;n<t;n++)for(var a=e[n].data,s=0;s<a.length;s++)this.data[i++]=a[s];this._len=i},e.prototype.addData=function(e,t,r,i,n,a,s,o,u){if(this._saveData){var c=this.data;this._len+arguments.length>c.length&&(this._expandData(),c=this.data);for(var d=0;d<arguments.length;d++)c[this._len++]=arguments[d]}},e.prototype._expandData=function(){if(!(this.data instanceof Array)){for(var e=[],t=0;t<this._len;t++)e[t]=this.data[t];this.data=e}},e.prototype._dashedLineTo=function(e,t){var r,i,n=this._dashSum,a=this._lineDash,s=this._ctx,o=this._dashOffset,u=this._xi,c=this._yi,d=e-u,h=t-c,l=is(d*d+h*h),f=u,p=c,v=a.length;for(o<0&&(o=n+o),f-=(o%=n)*(d/=l),p-=o*(h/=l);d>0&&f<=e||d<0&&f>=e||0===d&&(h>0&&p<=t||h<0&&p>=t);)f+=d*(r=a[i=this._dashIdx]),p+=h*r,this._dashIdx=(i+1)%v,d>0&&f<u||d<0&&f>u||h>0&&p<c||h<0&&p>c||s[i%2?"moveTo":"lineTo"](d>=0?Ja(f,e):es(f,e),h>=0?Ja(p,t):es(p,t));d=f-e,h=p-t,this._dashOffset=-is(d*d+h*h)},e.prototype._dashedBezierTo=function(e,t,r,i,n,a){var s,o,u,c,d,h=this._ctx,l=this._dashSum,f=this._dashOffset,p=this._lineDash,v=this._xi,m=this._yi,g=0,y=this._dashIdx,b=p.length,x=0;for(f<0&&(f=l+f),f%=l,s=0;s<1;s+=.1)o=ya(v,e,r,n,s+.1)-ya(v,e,r,n,s),u=ya(m,t,i,a,s+.1)-ya(m,t,i,a,s),g+=is(o*o+u*u);for(;y<b&&!((x+=p[y])>f);y++);for(s=(x-f)/g;s<=1;)c=ya(v,e,r,n,s),d=ya(m,t,i,a,s),y%2?h.moveTo(c,d):h.lineTo(c,d),s+=p[y]/g,y=(y+1)%b;y%2!==0&&h.lineTo(n,a),o=n-c,u=a-d,this._dashOffset=-is(o*o+u*u)},e.prototype._dashedQuadraticTo=function(e,t,r,i){var n=r,a=i;r=(r+2*e)/3,i=(i+2*t)/3,e=(this._xi+2*e)/3,t=(this._yi+2*t)/3,this._dashedBezierTo(e,t,r,i,n,a)},e.prototype.toStatic=function(){if(this._saveData){var e=this.data;e instanceof Array&&(e.length=this._len,os&&this._len>11&&(this.data=new Float32Array(e)))}},e.prototype.getBoundingRect=function(){Ya[0]=Ya[1]=Qa[0]=Qa[1]=Number.MAX_VALUE,Za[0]=Za[1]=$a[0]=$a[1]=-Number.MAX_VALUE;var e,t=this.data,r=0,i=0,n=0,a=0;for(e=0;e<this._len;){var s=t[e++],o=1===e;switch(o&&(n=r=t[e],a=i=t[e+1]),s){case Wa.M:r=n=t[e++],i=a=t[e++],Qa[0]=n,Qa[1]=a,$a[0]=n,$a[1]=a;break;case Wa.L:Fa(r,i,t[e],t[e+1],Qa,$a),r=t[e++],i=t[e++];break;case Wa.C:za(r,i,t[e++],t[e++],t[e++],t[e++],t[e],t[e+1],Qa,$a),r=t[e++],i=t[e++];break;case Wa.Q:Ha(r,i,t[e++],t[e++],t[e],t[e+1],Qa,$a),r=t[e++],i=t[e++];break;case Wa.A:var u=t[e++],c=t[e++],d=t[e++],h=t[e++],l=t[e++],f=t[e++]+l;e+=1;var p=!t[e++];o&&(n=ts(l)*d+u,a=rs(l)*h+c),Ua(u,c,d,h,l,f,p,Qa,$a),r=ts(f)*d+u,i=rs(f)*h+c;break;case Wa.R:Fa(n=r=t[e++],a=i=t[e++],n+t[e++],a+t[e++],Qa,$a);break;case Wa.Z:r=n,i=a}Ee(Ya,Ya,Qa),Ne(Za,Za,$a)}return 0===e&&(Ya[0]=Ya[1]=Za[0]=Za[1]=0),new _r(Ya[0],Ya[1],Za[0]-Ya[0],Za[1]-Ya[1])},e.prototype._calculateLength=function(){var e=this.data,t=this._len,r=this._ux,i=this._uy,n=0,a=0,s=0,o=0;this._pathSegLen||(this._pathSegLen=[]);for(var u=this._pathSegLen,c=0,d=0,h=0;h<t;){var l=e[h++],f=1===h;f&&(s=n=e[h],o=a=e[h+1]);var p=-1;switch(l){case Wa.M:n=s=e[h++],a=o=e[h++];break;case Wa.L:var v=e[h++],m=(b=e[h++])-a;(ns(M=v-n)>r||ns(m)>i||h===t-1)&&(p=Math.sqrt(M*M+m*m),n=v,a=b);break;case Wa.C:var g=e[h++],y=e[h++],b=(v=e[h++],e[h++]),x=e[h++],k=e[h++];p=Sa(n,a,g,y,v,b,x,k,10),n=x,a=k;break;case Wa.Q:p=Aa(n,a,g=e[h++],y=e[h++],v=e[h++],b=e[h++],10),n=v,a=b;break;case Wa.A:var w=e[h++],_=e[h++],S=e[h++],O=e[h++],T=e[h++],C=e[h++],I=C+T;h+=1;e[h++];f&&(s=ts(T)*S+w,o=rs(T)*O+_),p=es(S,O)*Ja(ss,Math.abs(C)),n=ts(I)*S+w,a=rs(I)*O+_;break;case Wa.R:s=n=e[h++],o=a=e[h++],p=2*e[h++]+2*e[h++];break;case Wa.Z:var M=s-n;m=o-a;p=Math.sqrt(M*M+m*m),n=s,a=o}p>=0&&(u[d++]=p,c+=p)}return this._pathLen=c,c},e.prototype.rebuildPath=function(e,t){var r,i,n,a,s,o,u,c,d=this.data,h=this._ux,l=this._uy,f=this._len,p=t<1,v=0,m=0;if(!p||(this._pathSegLen||this._calculateLength(),u=this._pathSegLen,c=t*this._pathLen))e:for(var g=0;g<f;){var y=d[g++],b=1===g;switch(b&&(r=n=d[g],i=a=d[g+1]),y){case Wa.M:r=n=d[g++],i=a=d[g++],e.moveTo(n,a);break;case Wa.L:if(s=d[g++],o=d[g++],ns(s-n)>h||ns(o-a)>l||g===f-1){if(p){if(v+(j=u[m++])>c){var x=(c-v)/j;e.lineTo(n*(1-x)+s*x,a*(1-x)+o*x);break e}v+=j}e.lineTo(s,o),n=s,a=o}break;case Wa.C:var k=d[g++],w=d[g++],_=d[g++],S=d[g++],O=d[g++],T=d[g++];if(p){if(v+(j=u[m++])>c){wa(n,k,_,O,x=(c-v)/j,Ka),wa(a,w,S,T,x,Xa),e.bezierCurveTo(Ka[1],Xa[1],Ka[2],Xa[2],Ka[3],Xa[3]);break e}v+=j}e.bezierCurveTo(k,w,_,S,O,T),n=O,a=T;break;case Wa.Q:k=d[g++],w=d[g++],_=d[g++],S=d[g++];if(p){if(v+(j=u[m++])>c){Ia(n,k,_,x=(c-v)/j,Ka),Ia(a,w,S,x,Xa),e.quadraticCurveTo(Ka[1],Xa[1],Ka[2],Xa[2]);break e}v+=j}e.quadraticCurveTo(k,w,_,S),n=_,a=S;break;case Wa.A:var C=d[g++],I=d[g++],M=d[g++],A=d[g++],E=d[g++],N=d[g++],P=d[g++],D=!d[g++],L=M>A?M:A,B=ns(M-A)>.001,R=E+N,V=!1;if(p)v+(j=u[m++])>c&&(R=E+N*(c-v)/j,V=!0),v+=j;if(B&&e.ellipse?e.ellipse(C,I,M,A,P,E,R,D):e.arc(C,I,L,E,R,D),V)break e;b&&(r=ts(E)*M+C,i=rs(E)*A+I),n=ts(R)*M+C,a=rs(R)*A+I;break;case Wa.R:r=n=d[g],i=a=d[g+1],s=d[g++],o=d[g++];var G=d[g++],F=d[g++];if(p){if(v+(j=u[m++])>c){var q=c-v;e.moveTo(s,o),e.lineTo(s+Ja(q,G),o),(q-=G)>0&&e.lineTo(s+G,o+Ja(q,F)),(q-=F)>0&&e.lineTo(s+es(G-q,0),o+F),(q-=G)>0&&e.lineTo(s,o+es(F-q,0));break e}v+=j}e.rect(s,o,G,F);break;case Wa.Z:if(p){var j;if(v+(j=u[m++])>c){x=(c-v)/j;e.lineTo(n*(1-x)+r*x,a*(1-x)+i*x);break e}v+=j}e.closePath(),n=r,a=i}}},e.CMD=Wa,e.initDefaultProps=function(){var t=e.prototype;t._saveData=!0,t._needsDash=!1,t._dashOffset=0,t._dashIdx=0,t._dashSum=0,t._ux=0,t._uy=0}(),e}();function ls(e,t,r,i,n,a,s){if(0===n)return!1;var o=n,u=0;if(s>t+o&&s>i+o||s<t-o&&s<i-o||a>e+o&&a>r+o||a<e-o&&a<r-o)return!1;if(e===r)return Math.abs(a-e)<=o/2;var c=(u=(t-i)/(e-r))*a-s+(e*i-r*t)/(e-r);return c*c/(u*u+1)<=o/2*o/2}function fs(e,t,r,i,n,a,s,o,u,c,d){if(0===u)return!1;var h=u;return!(d>t+h&&d>i+h&&d>a+h&&d>o+h||d<t-h&&d<i-h&&d<a-h&&d<o-h||c>e+h&&c>r+h&&c>n+h&&c>s+h||c<e-h&&c<r-h&&c<n-h&&c<s-h)&&_a(e,t,r,i,n,a,s,o,c,d,null)<=h/2}function ps(e,t,r,i,n,a,s,o,u){if(0===s)return!1;var c=s;return!(u>t+c&&u>i+c&&u>a+c||u<t-c&&u<i-c&&u<a-c||o>e+c&&o>r+c&&o>n+c||o<e-c&&o<r-c&&o<n-c)&&Ma(e,t,r,i,n,a,o,u,null)<=c/2}var vs=2*Math.PI;function ms(e){return(e%=vs)<0&&(e+=vs),e}var gs=2*Math.PI;function ys(e,t,r,i,n,a,s,o,u){if(0===s)return!1;var c=s;o-=e,u-=t;var d=Math.sqrt(o*o+u*u);if(d-c>r||d+c<r)return!1;if(Math.abs(i-n)%gs<1e-4)return!0;if(a){var h=i;i=ms(n),n=ms(h)}else i=ms(i),n=ms(n);i>n&&(n+=gs);var l=Math.atan2(u,o);return l<0&&(l+=gs),l>=i&&l<=n||l+gs>=i&&l+gs<=n}function bs(e,t,r,i,n,a){if(a>t&&a>i||a<t&&a<i)return 0;if(i===t)return 0;var s=(a-t)/(i-t),o=i<t?1:-1;1!==s&&0!==s||(o=i<t?.5:-.5);var u=s*(r-e)+e;return u===n?1/0:u>n?o:0}var xs=hs.CMD,ks=2*Math.PI;var ws=[-1,-1,-1],_s=[-1,-1];function Ss(){var e=_s[0];_s[0]=_s[1],_s[1]=e}function Os(e,t,r,i,n,a,s,o,u,c){if(c>t&&c>i&&c>a&&c>o||c<t&&c<i&&c<a&&c<o)return 0;var d=xa(t,i,a,o,c,ws);if(0===d)return 0;for(var h=0,l=-1,f=void 0,p=void 0,v=0;v<d;v++){var m=ws[v],g=0===m||1===m?.5:1;ya(e,r,n,s,m)<u||(l<0&&(l=ka(t,i,a,o,_s),_s[1]<_s[0]&&l>1&&Ss(),f=ya(t,i,a,o,_s[0]),l>1&&(p=ya(t,i,a,o,_s[1]))),2===l?m<_s[0]?h+=f<t?g:-g:m<_s[1]?h+=p<f?g:-g:h+=o<p?g:-g:m<_s[0]?h+=f<t?g:-g:h+=o<f?g:-g)}return h}function Ts(e,t,r,i,n,a,s,o){if(o>t&&o>i&&o>a||o<t&&o<i&&o<a)return 0;var u=function(e,t,r,i,n){var a=e-2*t+r,s=2*(t-e),o=e-i,u=0;if(ma(a))ga(s)&&(d=-o/s)>=0&&d<=1&&(n[u++]=d);else{var c=s*s-4*a*o;if(ma(c))(d=-s/(2*a))>=0&&d<=1&&(n[u++]=d);else if(c>0){var d,h=ua(c),l=(-s-h)/(2*a);(d=(-s+h)/(2*a))>=0&&d<=1&&(n[u++]=d),l>=0&&l<=1&&(n[u++]=l)}}return u}(t,i,a,o,ws);if(0===u)return 0;var c=Ca(t,i,a);if(c>=0&&c<=1){for(var d=0,h=Oa(t,i,a,c),l=0;l<u;l++){var f=0===ws[l]||1===ws[l]?.5:1;Oa(e,r,n,ws[l])<s||(ws[l]<c?d+=h<t?f:-f:d+=a<h?f:-f)}return d}f=0===ws[0]||1===ws[0]?.5:1;return Oa(e,r,n,ws[0])<s?0:a<t?f:-f}function Cs(e,t,r,i,n,a,s,o){if((o-=t)>r||o<-r)return 0;var u=Math.sqrt(r*r-o*o);ws[0]=-u,ws[1]=u;var c=Math.abs(i-n);if(c<1e-4)return 0;if(c>=ks-1e-4){i=0,n=ks;var d=a?1:-1;return s>=ws[0]+e&&s<=ws[1]+e?d:0}if(i>n){var h=i;i=n,n=h}i<0&&(i+=ks,n+=ks);for(var l=0,f=0;f<2;f++){var p=ws[f];if(p+e>s){var v=Math.atan2(o,p);d=a?1:-1;v<0&&(v=ks+v),(v>=i&&v<=n||v+ks>=i&&v+ks<=n)&&(v>Math.PI/2&&v<1.5*Math.PI&&(d=-d),l+=d)}}return l}function Is(e,t,r,i,n){for(var a,s,o,u,c=e.data,d=e.len(),h=0,l=0,f=0,p=0,v=0,m=0;m<d;){var g=c[m++],y=1===m;switch(g===xs.M&&m>1&&(r||(h+=bs(l,f,p,v,i,n))),y&&(p=l=c[m],v=f=c[m+1]),g){case xs.M:l=p=c[m++],f=v=c[m++];break;case xs.L:if(r){if(ls(l,f,c[m],c[m+1],t,i,n))return!0}else h+=bs(l,f,c[m],c[m+1],i,n)||0;l=c[m++],f=c[m++];break;case xs.C:if(r){if(fs(l,f,c[m++],c[m++],c[m++],c[m++],c[m],c[m+1],t,i,n))return!0}else h+=Os(l,f,c[m++],c[m++],c[m++],c[m++],c[m],c[m+1],i,n)||0;l=c[m++],f=c[m++];break;case xs.Q:if(r){if(ps(l,f,c[m++],c[m++],c[m],c[m+1],t,i,n))return!0}else h+=Ts(l,f,c[m++],c[m++],c[m],c[m+1],i,n)||0;l=c[m++],f=c[m++];break;case xs.A:var b=c[m++],x=c[m++],k=c[m++],w=c[m++],_=c[m++],S=c[m++];m+=1;var O=!!(1-c[m++]);a=Math.cos(_)*k+b,s=Math.sin(_)*w+x,y?(p=a,v=s):h+=bs(l,f,a,s,i,n);var T=(i-b)*w/k+b;if(r){if(ys(b,x,w,_,_+S,O,t,T,n))return!0}else h+=Cs(b,x,w,_,_+S,O,T,n);l=Math.cos(_+S)*k+b,f=Math.sin(_+S)*w+x;break;case xs.R:if(p=l=c[m++],v=f=c[m++],a=p+c[m++],s=v+c[m++],r){if(ls(p,v,a,v,t,i,n)||ls(a,v,a,s,t,i,n)||ls(a,s,p,s,t,i,n)||ls(p,s,p,v,t,i,n))return!0}else h+=bs(a,v,a,s,i,n),h+=bs(p,s,p,v,i,n);break;case xs.Z:if(r){if(ls(l,f,p,v,t,i,n))return!0}else h+=bs(l,f,p,v,i,n);l=p,f=v}}return r||(o=f,u=v,Math.abs(o-u)<1e-4)||(h+=bs(l,f,p,v,i,n)||0),0!==h}var Ms=M({fill:"#000",stroke:null,strokePercent:1,fillOpacity:1,strokeOpacity:1,lineDashOffset:0,lineWidth:1,lineCap:"butt",miterLimit:10,strokeNoScale:!1,strokeFirst:!1},ea),As={style:M({fill:!0,stroke:!0,strokePercent:!0,fillOpacity:!0,strokeOpacity:!0,lineDashOffset:!0,lineWidth:!0,miterLimit:!0},ta.style)},Es=["x","y","rotation","scaleX","scaleY","originX","originY","invisible","culling","z","z2","zlevel","parent"],Ns=function(e){function t(t){return e.call(this,t)||this}return ve(t,e),t.prototype.update=function(){var r=this;e.prototype.update.call(this);var i=this.style;if(i.decal){var n=this._decalEl=this._decalEl||new t;n.buildPath===t.prototype.buildPath&&(n.buildPath=function(e){r.buildPath(e,r.shape)}),n.silent=!0;var a=n.style;for(var s in i)a[s]!==i[s]&&(a[s]=i[s]);a.fill=i.fill?i.decal:null,a.decal=null,a.shadowColor=null,i.strokeFirst&&(a.stroke=null);for(var o=0;o<Es.length;++o)n[Es[o]]=this[Es[o]];n.__dirty|=Yr.REDARAW_BIT}else this._decalEl&&(this._decalEl=null)},t.prototype.getDecalElement=function(){return this._decalEl},t.prototype._init=function(t){var r=G(t);this.shape=this.getDefaultShape();var i=this.getDefaultStyle();i&&this.useStyle(i);for(var n=0;n<r.length;n++){var a=r[n],s=t[a];"style"===a?this.style?I(this.style,s):this.useStyle(s):"shape"===a?I(this.shape,s):e.prototype.attrKV.call(this,a,s)}this.style||this.useStyle({})},t.prototype.getDefaultStyle=function(){return null},t.prototype.getDefaultShape=function(){return{}},t.prototype.canBeInsideText=function(){return this.hasFill()},t.prototype.getInsideTextFill=function(){var e=this.style.fill;if("none"!==e){if(H(e)){var t=Qt(e,0);return t>.5?Rr:t>.2?"#eee":Vr}if(e)return Vr}return Rr},t.prototype.getInsideTextStroke=function(e){var t=this.style.fill;if(H(t)){var r=this.__zr;if(!(!r||!r.isDarkMode())===Qt(e,0)<.4)return t}},t.prototype.buildPath=function(e,t,r){},t.prototype.pathUpdated=function(){this.__dirty&=~t.SHAPE_CHANGED_BIT},t.prototype.createPathProxy=function(){this.path=new hs(!1)},t.prototype.hasStroke=function(){var e=this.style,t=e.stroke;return!(null==t||"none"===t||!(e.lineWidth>0))},t.prototype.hasFill=function(){var e=this.style.fill;return null!=e&&"none"!==e},t.prototype.getBoundingRect=function(){var e=this._rect,r=this.style,i=!e;if(i){var n=!1;this.path||(n=!0,this.createPathProxy());var a=this.path;(n||this.__dirty&t.SHAPE_CHANGED_BIT)&&(a.beginPath(),this.buildPath(a,this.shape,!1),this.pathUpdated()),e=a.getBoundingRect()}if(this._rect=e,this.hasStroke()&&this.path&&this.path.len()>0){var s=this._rectWithStroke||(this._rectWithStroke=e.clone());if(this.__dirty||i){s.copy(e);var o=r.strokeNoScale?this.getLineScale():1,u=r.lineWidth;if(!this.hasFill()){var c=this.strokeContainThreshold;u=Math.max(u,null==c?4:c)}o>1e-10&&(s.width+=u/o,s.height+=u/o,s.x-=u/o/2,s.y-=u/o/2)}return s}return e},t.prototype.contain=function(e,t){var r=this.transformCoordToLocal(e,t),i=this.getBoundingRect(),n=this.style;if(e=r[0],t=r[1],i.contain(e,t)){var a=this.path;if(this.hasStroke()){var s=n.lineWidth,o=n.strokeNoScale?this.getLineScale():1;if(o>1e-10&&(this.hasFill()||(s=Math.max(s,this.strokeContainThreshold)),function(e,t,r,i){return Is(e,t,!0,r,i)}(a,s/o,e,t)))return!0}if(this.hasFill())return function(e,t,r){return Is(e,0,!1,t,r)}(a,e,t)}return!1},t.prototype.dirtyShape=function(){this.__dirty|=t.SHAPE_CHANGED_BIT,this._rect&&(this._rect=null),this._decalEl&&this._decalEl.dirtyShape(),this.markRedraw()},t.prototype.dirty=function(){this.dirtyStyle(),this.dirtyShape()},t.prototype.animateShape=function(e){return this.animate("shape",e)},t.prototype.updateDuringAnimation=function(e){"style"===e?this.dirtyStyle():"shape"===e?this.dirtyShape():this.markRedraw()},t.prototype.attrKV=function(t,r){"shape"===t?this.setShape(r):e.prototype.attrKV.call(this,t,r)},t.prototype.setShape=function(e,t){var r=this.shape;return r||(r=this.shape={}),"string"===typeof e?r[e]=t:I(r,e),this.dirtyShape(),this},t.prototype.shapeChanged=function(){return!!(this.__dirty&t.SHAPE_CHANGED_BIT)},t.prototype.createStyle=function(e){return he(Ms,e)},t.prototype._innerSaveToNormal=function(t){e.prototype._innerSaveToNormal.call(this,t);var r=this._normalState;t.shape&&!r.shape&&(r.shape=I({},this.shape))},t.prototype._applyStateObj=function(t,r,i,n,a,s){e.prototype._applyStateObj.call(this,t,r,i,n,a,s);var o,u=!(r&&n);if(r&&r.shape?a?n?o=r.shape:(o=I({},i.shape),I(o,r.shape)):(o=I({},n?this.shape:i.shape),I(o,r.shape)):u&&(o=i.shape),o)if(a){this.shape=I({},this.shape);for(var c={},d=G(o),h=0;h<d.length;h++){var l=d[h];"object"===typeof o[l]?this.shape[l]=o[l]:c[l]=o[l]}this._transitionState(t,{shape:c},s)}else this.shape=o,this.dirtyShape()},t.prototype._mergeStates=function(t){for(var r,i=e.prototype._mergeStates.call(this,t),n=0;n<t.length;n++){var a=t[n];a.shape&&(r=r||{},this._mergeStyle(r,a.shape))}return r&&(i.shape=r),i},t.prototype.getAnimationStyleProps=function(){return As},t.prototype.isZeroArea=function(){return!1},t.extend=function(e){var r=function(t){function r(r){var i=t.call(this,r)||this;return e.init&&e.init.call(i,r),i}return ve(r,t),r.prototype.getDefaultStyle=function(){return O(e.style)},r.prototype.getDefaultShape=function(){return O(e.shape)},r}(t);for(var i in e)"function"===typeof e[i]&&(r.prototype[i]=e[i]);return r},t.SHAPE_CHANGED_BIT=4,t.initDefaultProps=function(){var e=t.prototype;e.type="path",e.strokeContainThreshold=5,e.segmentIgnoreThreshold=0,e.subPixelOptimize=!1,e.autoBatch=!1,e.__dirty=Yr.REDARAW_BIT|sa.STYLE_CHANGED_BIT|t.SHAPE_CHANGED_BIT}(),t}(sa),Ps=M({strokeFirst:!0,font:Or,x:0,y:0,textAlign:"left",textBaseline:"top",miterLimit:2},Ms),Ds=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ve(t,e),t.prototype.hasStroke=function(){var e=this.style,t=e.stroke;return null!=t&&"none"!==t&&e.lineWidth>0},t.prototype.hasFill=function(){var e=this.style.fill;return null!=e&&"none"!==e},t.prototype.createStyle=function(e){return he(Ps,e)},t.prototype.setBoundingRect=function(e){this._rect=e},t.prototype.getBoundingRect=function(){var e=this.style;if(!this._rect){var t=e.text;null!=t?t+="":t="";var r=Mr(t,e.font,e.textAlign,e.textBaseline);if(r.x+=e.x||0,r.y+=e.y||0,this.hasStroke()){var i=e.lineWidth;r.x-=i/2,r.y-=i/2,r.width+=i,r.height+=i}this._rect=r}return this._rect},t.initDefaultProps=void(t.prototype.dirtyRectTolerance=10),t}(sa);Ds.prototype.type="tspan";var Ls=Ds,Bs=M({x:0,y:0},ea),Rs={style:M({x:!0,y:!0,width:!0,height:!0,sx:!0,sy:!0,sWidth:!0,sHeight:!0},ta.style)};var Vs=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ve(t,e),t.prototype.createStyle=function(e){return he(Bs,e)},t.prototype._getSize=function(e){var t=this.style,r=t[e];if(null!=r)return r;var i,n=(i=t.image)&&"string"!==typeof i&&i.width&&i.height?t.image:this.__image;if(!n)return 0;var a="width"===e?"height":"width",s=t[a];return null==s?n[e]:n[e]/n[a]*s},t.prototype.getWidth=function(){return this._getSize("width")},t.prototype.getHeight=function(){return this._getSize("height")},t.prototype.getAnimationStyleProps=function(){return Rs},t.prototype.getBoundingRect=function(){var e=this.style;return this._rect||(this._rect=new _r(e.x||0,e.y||0,this.getWidth(),this.getHeight())),this._rect},t}(sa);Vs.prototype.type="image";var Gs=Vs;var Fs=Math.round;function qs(e,t,r){if(t){var i=t.x1,n=t.x2,a=t.y1,s=t.y2;e.x1=i,e.x2=n,e.y1=a,e.y2=s;var o=r&&r.lineWidth;return o?(Fs(2*i)===Fs(2*n)&&(e.x1=e.x2=zs(i,o,!0)),Fs(2*a)===Fs(2*s)&&(e.y1=e.y2=zs(a,o,!0)),e):e}}function js(e,t,r){if(t){var i=t.x,n=t.y,a=t.width,s=t.height;e.x=i,e.y=n,e.width=a,e.height=s;var o=r&&r.lineWidth;return o?(e.x=zs(i,o,!0),e.y=zs(n,o,!0),e.width=Math.max(zs(i+a,o,!1)-e.x,0===a?0:1),e.height=Math.max(zs(n+s,o,!1)-e.y,0===s?0:1),e):e}}function zs(e,t,r){if(!t)return e;var i=Fs(2*e);return(i+Fs(t))%2===0?i/2:(i+(r?1:-1))/2}var Hs=function(){this.x=0,this.y=0,this.width=0,this.height=0},Us={},Ws=function(e){function t(t){return e.call(this,t)||this}return ve(t,e),t.prototype.getDefaultShape=function(){return new Hs},t.prototype.buildPath=function(e,t){var r,i,n,a;if(this.subPixelOptimize){var s=js(Us,t,this.style);r=s.x,i=s.y,n=s.width,a=s.height,s.r=t.r,t=s}else r=t.x,i=t.y,n=t.width,a=t.height;t.r?function(e,t){var r,i,n,a,s,o=t.x,u=t.y,c=t.width,d=t.height,h=t.r;c<0&&(o+=c,c=-c),d<0&&(u+=d,d=-d),"number"===typeof h?r=i=n=a=h:h instanceof Array?1===h.length?r=i=n=a=h[0]:2===h.length?(r=n=h[0],i=a=h[1]):3===h.length?(r=h[0],i=a=h[1],n=h[2]):(r=h[0],i=h[1],n=h[2],a=h[3]):r=i=n=a=0,r+i>c&&(r*=c/(s=r+i),i*=c/s),n+a>c&&(n*=c/(s=n+a),a*=c/s),i+n>d&&(i*=d/(s=i+n),n*=d/s),r+a>d&&(r*=d/(s=r+a),a*=d/s),e.moveTo(o+r,u),e.lineTo(o+c-i,u),0!==i&&e.arc(o+c-i,u+i,i,-Math.PI/2,0),e.lineTo(o+c,u+d-n),0!==n&&e.arc(o+c-n,u+d-n,n,0,Math.PI/2),e.lineTo(o+a,u+d),0!==a&&e.arc(o+a,u+d-a,a,Math.PI/2,Math.PI),e.lineTo(o,u+r),0!==r&&e.arc(o+r,u+r,r,Math.PI,1.5*Math.PI)}(e,t):e.rect(r,i,n,a)},t.prototype.isZeroArea=function(){return!this.shape.width||!this.shape.height},t}(Ns);Ws.prototype.type="rect";var Ks=Ws,Xs={fill:"#000"},Ys={style:M({fill:!0,stroke:!0,fillOpacity:!0,strokeOpacity:!0,lineWidth:!0,fontSize:!0,lineHeight:!0,width:!0,height:!0,textShadowColor:!0,textShadowBlur:!0,textShadowOffsetX:!0,textShadowOffsetY:!0,backgroundColor:!0,padding:!0,borderColor:!0,borderWidth:!0,borderRadius:!0},ta.style)},Zs=function(e){function t(t){var r=e.call(this)||this;return r.type="text",r._children=[],r._defaultStyle=Xs,r.attr(t),r}return ve(t,e),t.prototype.childrenRef=function(){return this._children},t.prototype.update=function(){this.styleChanged()&&this._updateSubTexts();for(var t=0;t<this._children.length;t++){var r=this._children[t];r.zlevel=this.zlevel,r.z=this.z,r.z2=this.z2,r.culling=this.culling,r.cursor=this.cursor,r.invisible=this.invisible}var i=this.attachedTransform;if(i){i.updateTransform();var n=i.transform;n?(this.transform=this.transform||[],ht(this.transform,n)):this.transform=null}else e.prototype.update.call(this)},t.prototype.getComputedTransform=function(){return this.__hostTarget&&(this.__hostTarget.getComputedTransform(),this.__hostTarget.updateInnerText(!0)),this.attachedTransform?this.attachedTransform.getComputedTransform():e.prototype.getComputedTransform.call(this)},t.prototype._updateSubTexts=function(){var e;this._childCursor=0,Js(e=this.style),L(e.rich,Js),this.style.rich?this._updateRichTexts():this._updatePlainTexts(),this._children.length=this._childCursor,this.styleUpdated()},t.prototype.addSelfToZr=function(t){e.prototype.addSelfToZr.call(this,t);for(var r=0;r<this._children.length;r++)this._children[r].__zr=t},t.prototype.removeSelfFromZr=function(t){e.prototype.removeSelfFromZr.call(this,t);for(var r=0;r<this._children.length;r++)this._children[r].__zr=null},t.prototype.getBoundingRect=function(){if(this.styleChanged()&&this._updateSubTexts(),!this._rect){for(var e=new _r(0,0,0,0),t=this._children,r=[],i=null,n=0;n<t.length;n++){var a=t[n],s=a.getBoundingRect(),o=a.getLocalTransform(r);o?(e.copy(s),e.applyTransform(o),(i=i||e.clone()).union(e)):(i=i||s.clone()).union(s)}this._rect=i||e}return this._rect},t.prototype.setDefaultTextStyle=function(e){this._defaultStyle=e||Xs},t.prototype.setTextContent=function(e){throw new Error("Can't attach text on another text")},t.prototype._mergeStyle=function(e,t){if(!t)return e;var r=t.rich,i=e.rich||r&&{};return I(e,t),r&&i?(this._mergeRich(i,r),e.rich=i):i&&(e.rich=i),e},t.prototype._mergeRich=function(e,t){for(var r=G(t),i=0;i<r.length;i++){var n=r[i];e[n]=e[n]||{},I(e[n],t[n])}},t.prototype.getAnimationStyleProps=function(){return Ys},t.prototype._getOrCreateChild=function(e){var t=this._children[this._childCursor];return t&&t instanceof e||(t=new e),this._children[this._childCursor++]=t,t.__zr=this.__zr,t.parent=this,t},t.prototype._updatePlainTexts=function(){var e=this.style,t=e.font||Or,r=e.padding,i=function(e,t){null!=e&&(e+="");var r,i=t.overflow,n=t.padding,a=t.font,s="truncate"===i,o=Nr(a),u=J(t.lineHeight,o),c="truncate"===t.lineOverflow,d=t.width,h=(r=null!=d&&"break"===i||"breakAll"===i?e?$n(e,t.font,d,"breakAll"===i,0).lines:[]:e?e.split("\n"):[]).length*u,l=J(t.height,h);if(h>l&&c){var f=Math.floor(l/u);r=r.slice(0,f)}var p=l,v=d;if(n&&(p+=n[0]+n[2],null!=v&&(v+=n[1]+n[3])),e&&s&&null!=v)for(var m=zn(d,a,t.ellipsis,{minChar:t.truncateMinChar,placeholder:t.placeholder}),g=0;g<r.length;g++)r[g]=Hn(r[g],m);if(null==d){var y=0;for(g=0;g<r.length;g++)y=Math.max(Cr(r[g],a),y);d=y}return{lines:r,height:l,outerHeight:p,lineHeight:u,calculatedLineHeight:o,contentHeight:h,width:d}}(ro(e),e),n=io(e),a=!!e.backgroundColor,s=i.outerHeight,o=i.lines,u=i.lineHeight,c=this._defaultStyle,d=e.x||0,h=e.y||0,l=e.align||c.align||"left",f=e.verticalAlign||c.verticalAlign||"top",p=d,v=Er(h,i.contentHeight,f);if(n||r){var m=i.width;r&&(m+=r[1]+r[3]);var g=Ar(d,m,l),y=Er(h,s,f);n&&this._renderBackground(e,e,g,y,m,s)}v+=u/2,r&&(p=to(d,l,r),"top"===f?v+=r[0]:"bottom"===f&&(v-=r[2]));for(var b,x=0,k=!1,w=(null==(b="fill"in e?e.fill:(k=!0,c.fill))||"none"===b?null:b.image||b.colorStops?"#000":b),_=(eo("stroke"in e?e.stroke:a||c.autoStroke&&!k?null:(x=2,c.stroke))),S=e.textShadowBlur>0,O=null!=e.width&&("truncate"===e.overflow||"break"===e.overflow||"breakAll"===e.overflow),T=i.calculatedLineHeight,C=0;C<o.length;C++){var I=this._getOrCreateChild(Ls),M=I.createStyle();I.useStyle(M),M.text=o[C],M.x=p,M.y=v,l&&(M.textAlign=l),M.textBaseline="middle",M.opacity=e.opacity,M.strokeFirst=!0,S&&(M.shadowBlur=e.textShadowBlur||0,M.shadowColor=e.textShadowColor||"transparent",M.shadowOffsetX=e.textShadowOffsetX||0,M.shadowOffsetY=e.textShadowOffsetY||0),_&&(M.stroke=_,M.lineWidth=e.lineWidth||x,M.lineDash=e.lineDash,M.lineDashOffset=e.lineDashOffset||0),w&&(M.fill=w),M.font=t,v+=u,O&&I.setBoundingRect(new _r(Ar(M.x,e.width,M.textAlign),Er(M.y,T,M.textBaseline),e.width,T))}},t.prototype._updateRichTexts=function(){var e=this.style,t=function(e,t){var r=new Xn;if(null!=e&&(e+=""),!e)return r;for(var i,n=t.width,a=t.height,s=t.overflow,o="break"!==s&&"breakAll"!==s||null==n?null:{width:n,accumWidth:0,breakAll:"breakAll"===s},u=qn.lastIndex=0;null!=(i=qn.exec(e));){var c=i.index;c>u&&Yn(r,e.substring(u,c),t,o),Yn(r,i[2],t,o,i[1]),u=qn.lastIndex}u<e.length&&Yn(r,e.substring(u,e.length),t,o);var d=[],h=0,l=0,f=t.padding,p="truncate"===s,v="truncate"===t.lineOverflow;function m(e,t,r){e.width=t,e.lineHeight=r,h+=r,l=Math.max(l,t)}e:for(var g=0;g<r.lines.length;g++){for(var y=r.lines[g],b=0,x=0,k=0;k<y.tokens.length;k++){var w=(N=y.tokens[k]).styleName&&t.rich[N.styleName]||{},_=N.textPadding=w.padding,S=_?_[1]+_[3]:0,O=N.font=w.font||t.font;N.contentHeight=Nr(O);var T=J(w.height,N.contentHeight);if(N.innerHeight=T,_&&(T+=_[0]+_[2]),N.height=T,N.lineHeight=ee(w.lineHeight,t.lineHeight,T),N.align=w&&w.align||t.align,N.verticalAlign=w&&w.verticalAlign||"middle",v&&null!=a&&h+N.lineHeight>a){k>0?(y.tokens=y.tokens.slice(0,k),m(y,x,b),r.lines=r.lines.slice(0,g+1)):r.lines=r.lines.slice(0,g);break e}var C=w.width,I=null==C||"auto"===C;if("string"===typeof C&&"%"===C.charAt(C.length-1))N.percentWidth=C,d.push(N),N.contentWidth=Cr(N.text,O);else{if(I){var M=w.backgroundColor,A=M&&M.image;A&&Fn(A=Rn(A))&&(N.width=Math.max(N.width,A.width*T/A.height))}var E=p&&null!=n?n-x:null;null!=E&&E<N.width?!I||E<S?(N.text="",N.width=N.contentWidth=0):(N.text=jn(N.text,E-S,O,t.ellipsis,{minChar:t.truncateMinChar}),N.width=N.contentWidth=Cr(N.text,O)):N.contentWidth=Cr(N.text,O)}N.width+=S,x+=N.width,w&&(b=Math.max(b,N.lineHeight))}m(y,x,b)}for(r.outerWidth=r.width=J(n,l),r.outerHeight=r.height=J(a,h),r.contentHeight=h,r.contentWidth=l,f&&(r.outerWidth+=f[1]+f[3],r.outerHeight+=f[0]+f[2]),g=0;g<d.length;g++){var N,P=(N=d[g]).percentWidth;N.width=parseInt(P,10)/100*r.width}return r}(ro(e),e),r=t.width,i=t.outerWidth,n=t.outerHeight,a=e.padding,s=e.x||0,o=e.y||0,u=this._defaultStyle,c=e.align||u.align,d=e.verticalAlign||u.verticalAlign,h=Ar(s,i,c),l=Er(o,n,d),f=h,p=l;a&&(f+=a[3],p+=a[0]);var v=f+r;io(e)&&this._renderBackground(e,e,h,l,i,n);for(var m=!!e.backgroundColor,g=0;g<t.lines.length;g++){for(var y=t.lines[g],b=y.tokens,x=b.length,k=y.lineHeight,w=y.width,_=0,S=f,O=v,T=x-1,C=void 0;_<x&&(!(C=b[_]).align||"left"===C.align);)this._placeToken(C,e,k,p,S,"left",m),w-=C.width,S+=C.width,_++;for(;T>=0&&"right"===(C=b[T]).align;)this._placeToken(C,e,k,p,O,"right",m),w-=C.width,O-=C.width,T--;for(S+=(r-(S-f)-(v-O)-w)/2;_<=T;)C=b[_],this._placeToken(C,e,k,p,S+C.width/2,"center",m),S+=C.width,_++;p+=k}},t.prototype._placeToken=function(e,t,r,i,n,a,s){var o=t.rich[e.styleName]||{};o.text=e.text;var u=e.verticalAlign,c=i+r/2;"top"===u?c=i+e.height/2:"bottom"===u&&(c=i+r-e.height/2),!e.isLineHolder&&io(o)&&this._renderBackground(o,t,"right"===a?n-e.width:"center"===a?n-e.width/2:n,c-e.height/2,e.width,e.height);var d=!!o.backgroundColor,h=e.textPadding;h&&(n=to(n,a,h),c-=e.height/2-h[0]-e.innerHeight/2);var l=this._getOrCreateChild(Ls),f=l.createStyle();l.useStyle(f);var p=this._defaultStyle,v=!1,m=0,g=eo("fill"in o?o.fill:"fill"in t?t.fill:(v=!0,p.fill)),y=eo("stroke"in o?o.stroke:"stroke"in t?t.stroke:d||s||p.autoStroke&&!v?null:(m=2,p.stroke)),b=o.textShadowBlur>0||t.textShadowBlur>0;f.text=e.text,f.x=n,f.y=c,b&&(f.shadowBlur=o.textShadowBlur||t.textShadowBlur||0,f.shadowColor=o.textShadowColor||t.textShadowColor||"transparent",f.shadowOffsetX=o.textShadowOffsetX||t.textShadowOffsetX||0,f.shadowOffsetY=o.textShadowOffsetY||t.textShadowOffsetY||0),f.textAlign=a,f.textBaseline="middle",f.font=e.font||Or,f.opacity=ee(o.opacity,t.opacity,1),y&&(f.lineWidth=ee(o.lineWidth,t.lineWidth,m),f.lineDash=J(o.lineDash,t.lineDash),f.lineDashOffset=t.lineDashOffset||0,f.stroke=y),g&&(f.fill=g);var x=e.contentWidth,k=e.contentHeight;l.setBoundingRect(new _r(Ar(f.x,x,f.textAlign),Er(f.y,k,f.textBaseline),x,k))},t.prototype._renderBackground=function(e,t,r,i,n,a){var s,o,u,c=e.backgroundColor,d=e.borderWidth,h=e.borderColor,l=H(c),f=e.borderRadius,p=this;if(l||d&&h){(s=this._getOrCreateChild(Ks)).useStyle(s.createStyle()),s.style.fill=null;var v=s.shape;v.x=r,v.y=i,v.width=n,v.height=a,v.r=f,s.dirtyShape()}if(l)(u=s.style).fill=c||null,u.fillOpacity=J(e.fillOpacity,1);else if(c&&c.image){(o=this._getOrCreateChild(Gs)).onload=function(){p.dirtyStyle()};var m=o.style;m.image=c.image,m.x=r,m.y=i,m.width=n,m.height=a}d&&h&&((u=s.style).lineWidth=d,u.stroke=h,u.strokeOpacity=J(e.strokeOpacity,1),u.lineDash=e.borderDash,u.lineDashOffset=e.borderDashOffset||0,s.strokeContainThreshold=0,s.hasFill()&&s.hasStroke()&&(u.strokeFirst=!0,u.lineWidth*=2));var g=(s||o).style;g.shadowBlur=e.shadowBlur||0,g.shadowColor=e.shadowColor||"transparent",g.shadowOffsetX=e.shadowOffsetX||0,g.shadowOffsetY=e.shadowOffsetY||0,g.opacity=ee(e.opacity,t.opacity,1)},t.makeFont=function(e){var t="";if(e.fontSize||e.fontFamily||e.fontWeight){var r="";r="string"!==typeof e.fontSize||-1===e.fontSize.indexOf("px")&&-1===e.fontSize.indexOf("rem")&&-1===e.fontSize.indexOf("em")?isNaN(+e.fontSize)?"12px":e.fontSize+"px":e.fontSize,t=[e.fontStyle,e.fontWeight,r,e.fontFamily||"sans-serif"].join(" ")}return t&&ne(t)||e.textFont||e.font},t}(sa),Qs={left:!0,right:1,center:1},$s={top:1,bottom:1,middle:1};function Js(e){if(e){e.font=Zs.makeFont(e);var t=e.align;"middle"===t&&(t="center"),e.align=null==t||Qs[t]?t:"left";var r=e.verticalAlign;"center"===r&&(r="middle"),e.verticalAlign=null==r||$s[r]?r:"top",e.padding&&(e.padding=re(e.padding))}}function eo(e,t){return null==e||t<=0||"transparent"===e||"none"===e?null:e.image||e.colorStops?"#000":e}function to(e,t,r){return"right"===t?e-r[1]:"center"===t?e+r[3]/2-r[1]/2:e+r[3]}function ro(e){var t=e.text;return null!=t&&(t+=""),t}function io(e){return!!(e.backgroundColor||e.borderWidth&&e.borderColor)}var no=Zs,ao=fn(),so=1,oo={},uo=fn(),co=["emphasis","blur","select"],ho=["normal","emphasis","blur","select"],lo=10,fo="highlight",po="downplay",vo="select",mo="unselect",go="toggleSelect";function yo(e){return null!=e&&"none"!==e}var bo=new At(100);function xo(e){if("string"!==typeof e)return e;var t=bo.get(e);return t||(t=Ut(e,-.1),bo.put(e,t)),t}function ko(e,t,r){e.onHoverStateChange&&(e.hoverState||0)!==r&&e.onHoverStateChange(t),e.hoverState=r}function wo(e){ko(e,"emphasis",2)}function _o(e){2===e.hoverState&&ko(e,"normal",0)}function So(e){ko(e,"blur",1)}function Oo(e){1===e.hoverState&&ko(e,"normal",0)}function To(e){e.selected=!0}function Co(e){e.selected=!1}function Io(e,t,r){t(e,r)}function Mo(e,t,r){Io(e,t,r),e.isGroup&&e.traverse((function(e){Io(e,t,r)}))}function Ao(e,t){switch(t){case"emphasis":e.hoverState=2;break;case"normal":e.hoverState=0;break;case"blur":e.hoverState=1;break;case"select":e.selected=!0}}function Eo(e,t){var r=this.states[e];if(this.style){if("emphasis"===e)return function(e,t,r,i){var n=r&&E(r,"select")>=0,a=!1;if(e instanceof Ns){var s=uo(e),o=n&&s.selectFill||s.normalFill,u=n&&s.selectStroke||s.normalStroke;if(yo(o)||yo(u)){var c=(i=i||{}).style||{};!yo(c.fill)&&yo(o)?(a=!0,i=I({},i),(c=I({},c)).fill=xo(o)):!yo(c.stroke)&&yo(u)&&(a||(i=I({},i),c=I({},c)),c.stroke=xo(u)),i.style=c}}if(i&&null==i.z2){a||(i=I({},i));var d=e.z2EmphasisLift;i.z2=e.z2+(null!=d?d:lo)}return i}(this,0,t,r);if("blur"===e)return function(e,t,r){var i=E(e.currentStates,t)>=0,n=e.style.opacity,a=i?null:function(e,t,r,i){for(var n=e.style,a={},s=0;s<t.length;s++){var o=t[s],u=n[o];a[o]=null==u?i&&i[o]:u}for(s=0;s<e.animators.length;s++){var c=e.animators[s];c.__fromStateTransition&&c.__fromStateTransition.indexOf(r)<0&&"style"===c.targetName&&c.saveFinalToTarget(a,t)}return a}(e,["opacity"],t,{opacity:1}),s=(r=r||{}).style||{};return null==s.opacity&&(r=I({},r),s=I({opacity:i?n:.1*a.opacity},s),r.style=s),r}(this,e,r);if("select"===e)return function(e,t,r){if(r&&null==r.z2){r=I({},r);var i=e.z2SelectLift;r.z2=e.z2+(null!=i?i:9)}return r}(this,0,r)}return r}function No(e){e.stateProxy=Eo;var t=e.getTextContent(),r=e.getTextGuideLine();t&&(t.stateProxy=Eo),r&&(r.stateProxy=Eo)}function Po(e,t){!qo(e,t)&&!e.__highByOuter&&Mo(e,wo)}function Do(e,t){!qo(e,t)&&!e.__highByOuter&&Mo(e,_o)}function Lo(e,t){e.__highByOuter|=1<<(t||0),Mo(e,wo)}function Bo(e,t){!(e.__highByOuter&=~(1<<(t||0)))&&Mo(e,_o)}function Ro(e){Mo(e,So)}function Vo(e){Mo(e,Oo)}function Go(e){Mo(e,To)}function Fo(e){Mo(e,Co)}function qo(e,t){return e.__highDownSilentOnTouch&&t.zrByTouch}function jo(e){e.getModel().eachComponent((function(t,r){("series"===t?e.getViewOfSeriesModel(r):e.getViewOfComponentModel(r)).group.traverse((function(e){Oo(e)}))}))}function zo(e,t,r,i){var n=i.getModel();function a(e,t){for(var r=0;r<t.length;r++){var i=e.getItemGraphicEl(t[r]);i&&Vo(i)}}if(r=r||"coordinateSystem",null!=e&&t&&"none"!==t){var s=n.getSeriesByIndex(e),o=s.coordinateSystem;o&&o.master&&(o=o.master);var u=[];n.eachSeries((function(e){var n=s===e,c=e.coordinateSystem;if(c&&c.master&&(c=c.master),!("series"===r&&!n||"coordinateSystem"===r&&!(c&&o?c===o:n)||"series"===t&&n)){if(i.getViewOfSeriesModel(e).group.traverse((function(e){So(e)})),D(t))a(e.getData(),t);else if(K(t))for(var d=G(t),h=0;h<d.length;h++)a(e.getData(d[h]),t[d[h]]);u.push(e)}})),n.eachComponent((function(e,t){if("series"!==e){var r=i.getViewOfComponentModel(t);r&&r.blurSeries&&r.blurSeries(u,n)}}))}}function Ho(e,t,r){if(null!=e&&null!=t){var i=r.getModel().getComponent(e,t);if(i){var n=r.getViewOfComponentModel(i);n&&n.focusBlurEnabled&&n.group.traverse((function(e){So(e)}))}}}function Uo(e,t,r,i){var n={focusSelf:!1,dispatchers:null};if(null==e||"series"===e||null==t||null==r)return n;var a=i.getModel().getComponent(e,t);if(!a)return n;var s=i.getViewOfComponentModel(a);if(!s||!s.findHighDownDispatchers)return n;for(var o,u=s.findHighDownDispatchers(r),c=0;c<u.length;c++)if("self"===ao(u[c]).focus){o=!0;break}return{focusSelf:o,dispatchers:u}}function Wo(e){L(e.getAllData(),(function(t){var r=t.data,i=t.type;r.eachItemGraphicEl((function(t,r){e.isSelected(r,i)?Go(t):Fo(t)}))}))}function Ko(e){var t=[];return e.eachSeries((function(e){L(e.getAllData(),(function(r){r.data;var i=r.type,n=e.getSelectedDataIndices();if(n.length>0){var a={dataIndex:n,seriesIndex:e.seriesIndex};null!=i&&(a.dataType=i),t.push(a)}}))})),t}function Xo(e,t,r){Jo(e,!0),Mo(e,No),Yo(e,t,r)}function Yo(e,t,r){var i=ao(e);null!=t?(i.focus=t,i.blurScope=r):i.focus&&(i.focus=null)}var Zo=["emphasis","blur","select"],Qo={itemStyle:"getItemStyle",lineStyle:"getLineStyle",areaStyle:"getAreaStyle"};function $o(e,t,r,i){r=r||"itemStyle";for(var n=0;n<Zo.length;n++){var a=Zo[n],s=t.getModel([a,r]);e.ensureState(a).style=i?i(s):s[Qo[r]]()}}function Jo(e,t){var r=!1===t,i=e;e.highDownSilentOnTouch&&(i.__highDownSilentOnTouch=e.highDownSilentOnTouch),r&&!i.__highDownDispatcher||(i.__highByOuter=i.__highByOuter||0,i.__highDownDispatcher=!r)}function eu(e){return!(!e||!e.__highDownDispatcher)}function tu(e){var t=e.type;return t===vo||t===mo||t===go}function ru(e){var t=e.type;return t===fo||t===po}var iu=hs.CMD,nu=[[],[],[]],au=Math.sqrt,su=Math.atan2;var ou=Math.sqrt,uu=Math.sin,cu=Math.cos,du=Math.PI;function hu(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function lu(e,t){return(e[0]*t[0]+e[1]*t[1])/(hu(e)*hu(t))}function fu(e,t){return(e[0]*t[1]<e[1]*t[0]?-1:1)*Math.acos(lu(e,t))}function pu(e,t,r,i,n,a,s,o,u,c,d){var h=u*(du/180),l=cu(h)*(e-r)/2+uu(h)*(t-i)/2,f=-1*uu(h)*(e-r)/2+cu(h)*(t-i)/2,p=l*l/(s*s)+f*f/(o*o);p>1&&(s*=ou(p),o*=ou(p));var v=(n===a?-1:1)*ou((s*s*(o*o)-s*s*(f*f)-o*o*(l*l))/(s*s*(f*f)+o*o*(l*l)))||0,m=v*s*f/o,g=v*-o*l/s,y=(e+r)/2+cu(h)*m-uu(h)*g,b=(t+i)/2+uu(h)*m+cu(h)*g,x=fu([1,0],[(l-m)/s,(f-g)/o]),k=[(l-m)/s,(f-g)/o],w=[(-1*l-m)/s,(-1*f-g)/o],_=fu(k,w);if(lu(k,w)<=-1&&(_=du),lu(k,w)>=1&&(_=0),_<0){var S=Math.round(_/du*1e6)/1e6;_=2*du+S%2*du}d.addData(c,y,b,s,o,x,_,h,a)}var vu=/([mlvhzcqtsa])([^mlvhzcqtsa]*)/gi,mu=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;var gu=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ve(t,e),t.prototype.applyTransform=function(e){},t}(Ns);function yu(e){return null!=e.setData}function bu(e,t){var r=function(e){var t=new hs;if(!e)return t;var r,i=0,n=0,a=i,s=n,o=hs.CMD,u=e.match(vu);if(!u)return t;for(var c=0;c<u.length;c++){for(var d=u[c],h=d.charAt(0),l=void 0,f=d.match(mu)||[],p=f.length,v=0;v<p;v++)f[v]=parseFloat(f[v]);for(var m=0;m<p;){var g=void 0,y=void 0,b=void 0,x=void 0,k=void 0,w=void 0,_=void 0,S=i,O=n,T=void 0,C=void 0;switch(h){case"l":i+=f[m++],n+=f[m++],l=o.L,t.addData(l,i,n);break;case"L":i=f[m++],n=f[m++],l=o.L,t.addData(l,i,n);break;case"m":i+=f[m++],n+=f[m++],l=o.M,t.addData(l,i,n),a=i,s=n,h="l";break;case"M":i=f[m++],n=f[m++],l=o.M,t.addData(l,i,n),a=i,s=n,h="L";break;case"h":i+=f[m++],l=o.L,t.addData(l,i,n);break;case"H":i=f[m++],l=o.L,t.addData(l,i,n);break;case"v":n+=f[m++],l=o.L,t.addData(l,i,n);break;case"V":n=f[m++],l=o.L,t.addData(l,i,n);break;case"C":l=o.C,t.addData(l,f[m++],f[m++],f[m++],f[m++],f[m++],f[m++]),i=f[m-2],n=f[m-1];break;case"c":l=o.C,t.addData(l,f[m++]+i,f[m++]+n,f[m++]+i,f[m++]+n,f[m++]+i,f[m++]+n),i+=f[m-2],n+=f[m-1];break;case"S":g=i,y=n,T=t.len(),C=t.data,r===o.C&&(g+=i-C[T-4],y+=n-C[T-3]),l=o.C,S=f[m++],O=f[m++],i=f[m++],n=f[m++],t.addData(l,g,y,S,O,i,n);break;case"s":g=i,y=n,T=t.len(),C=t.data,r===o.C&&(g+=i-C[T-4],y+=n-C[T-3]),l=o.C,S=i+f[m++],O=n+f[m++],i+=f[m++],n+=f[m++],t.addData(l,g,y,S,O,i,n);break;case"Q":S=f[m++],O=f[m++],i=f[m++],n=f[m++],l=o.Q,t.addData(l,S,O,i,n);break;case"q":S=f[m++]+i,O=f[m++]+n,i+=f[m++],n+=f[m++],l=o.Q,t.addData(l,S,O,i,n);break;case"T":g=i,y=n,T=t.len(),C=t.data,r===o.Q&&(g+=i-C[T-4],y+=n-C[T-3]),i=f[m++],n=f[m++],l=o.Q,t.addData(l,g,y,i,n);break;case"t":g=i,y=n,T=t.len(),C=t.data,r===o.Q&&(g+=i-C[T-4],y+=n-C[T-3]),i+=f[m++],n+=f[m++],l=o.Q,t.addData(l,g,y,i,n);break;case"A":b=f[m++],x=f[m++],k=f[m++],w=f[m++],_=f[m++],pu(S=i,O=n,i=f[m++],n=f[m++],w,_,b,x,k,l=o.A,t);break;case"a":b=f[m++],x=f[m++],k=f[m++],w=f[m++],_=f[m++],pu(S=i,O=n,i+=f[m++],n+=f[m++],w,_,b,x,k,l=o.A,t)}}"z"!==h&&"Z"!==h||(l=o.Z,t.addData(l),i=a,n=s),r=l}return t.toStatic(),t}(e),i=I({},t);return i.buildPath=function(e){if(yu(e)){e.setData(r.data),(t=e.getContext())&&e.rebuildPath(t,1)}else{var t=e;r.rebuildPath(t,1)}},i.applyTransform=function(e){!function(e,t){var r,i,n,a,s,o,u=e.data,c=e.len(),d=iu.M,h=iu.C,l=iu.L,f=iu.R,p=iu.A,v=iu.Q;for(n=0,a=0;n<c;){switch(r=u[n++],a=n,i=0,r){case d:case l:i=1;break;case h:i=3;break;case v:i=2;break;case p:var m=t[4],g=t[5],y=au(t[0]*t[0]+t[1]*t[1]),b=au(t[2]*t[2]+t[3]*t[3]),x=su(-t[1]/b,t[0]/y);u[n]*=y,u[n++]+=m,u[n]*=b,u[n++]+=g,u[n++]*=y,u[n++]*=b,u[n++]+=x,u[n++]+=x,a=n+=2;break;case f:o[0]=u[n++],o[1]=u[n++],Ae(o,o,t),u[a++]=o[0],u[a++]=o[1],o[0]+=u[n++],o[1]+=u[n++],Ae(o,o,t),u[a++]=o[0],u[a++]=o[1]}for(s=0;s<i;s++){var k=nu[s];k[0]=u[n++],k[1]=u[n++],Ae(k,k,t),u[a++]=k[0],u[a++]=k[1]}}e.increaseVersion()}(r,e),this.dirtyShape()},i}function xu(e,t){return new gu(bu(e,t))}var ku=function(){this.cx=0,this.cy=0,this.r=0},wu=function(e){function t(t){return e.call(this,t)||this}return ve(t,e),t.prototype.getDefaultShape=function(){return new ku},t.prototype.buildPath=function(e,t,r){r&&e.moveTo(t.cx+t.r,t.cy),e.arc(t.cx,t.cy,t.r,0,2*Math.PI)},t}(Ns);wu.prototype.type="circle";var _u=wu,Su=function(){this.cx=0,this.cy=0,this.rx=0,this.ry=0},Ou=function(e){function t(t){return e.call(this,t)||this}return ve(t,e),t.prototype.getDefaultShape=function(){return new Su},t.prototype.buildPath=function(e,t){var r=.5522848,i=t.cx,n=t.cy,a=t.rx,s=t.ry,o=a*r,u=s*r;e.moveTo(i-a,n),e.bezierCurveTo(i-a,n-u,i-o,n-s,i,n-s),e.bezierCurveTo(i+o,n-s,i+a,n-u,i+a,n),e.bezierCurveTo(i+a,n+u,i+o,n+s,i,n+s),e.bezierCurveTo(i-o,n+s,i-a,n+u,i-a,n),e.closePath()},t}(Ns);Ou.prototype.type="ellipse";var Tu=Ou,Cu=Math.PI,Iu=2*Cu,Mu=Math.sin,Au=Math.cos,Eu=Math.acos,Nu=Math.atan2,Pu=Math.abs,Du=Math.sqrt,Lu=Math.max,Bu=Math.min,Ru=1e-4;function Vu(e,t,r,i,n,a,s){var o=e-r,u=t-i,c=(s?a:-a)/Du(o*o+u*u),d=c*u,h=-c*o,l=e+d,f=t+h,p=r+d,v=i+h,m=(l+p)/2,g=(f+v)/2,y=p-l,b=v-f,x=y*y+b*b,k=n-a,w=l*v-p*f,_=(b<0?-1:1)*Du(Lu(0,k*k*x-w*w)),S=(w*b-y*_)/x,O=(-w*y-b*_)/x,T=(w*b+y*_)/x,C=(-w*y+b*_)/x,I=S-m,M=O-g,A=T-m,E=C-g;return I*I+M*M>A*A+E*E&&(S=T,O=C),{cx:S,cy:O,x01:-d,y01:-h,x11:S*(n/k-1),y11:O*(n/k-1)}}function Gu(e,t){var r=Lu(t.r,0),i=Lu(t.r0||0,0),n=r>0;if(n||i>0){if(n||(r=i,i=0),i>r){var a=r;r=i,i=a}var s,o=!!t.clockwise,u=t.startAngle,c=t.endAngle;if(u===c)s=0;else{var d=[u,c];ds(d,!o),s=Pu(d[0]-d[1])}var h=t.cx,l=t.cy,f=t.cornerRadius||0,p=t.innerCornerRadius||0;if(r>Ru)if(s>Iu-Ru)e.moveTo(h+r*Au(u),l+r*Mu(u)),e.arc(h,l,r,u,c,!o),i>Ru&&(e.moveTo(h+i*Au(c),l+i*Mu(c)),e.arc(h,l,i,c,u,o));else{var v=Pu(r-i)/2,m=Bu(v,f),g=Bu(v,p),y=g,b=m,x=r*Au(u),k=r*Mu(u),w=i*Au(c),_=i*Mu(c),S=void 0,O=void 0,T=void 0,C=void 0;if((m>Ru||g>Ru)&&(S=r*Au(c),O=r*Mu(c),T=i*Au(u),C=i*Mu(u),s<Cu)){var I=function(e,t,r,i,n,a,s,o){var u=r-e,c=i-t,d=s-n,h=o-a,l=h*u-d*c;if(!(l*l<Ru))return[e+(l=(d*(t-a)-h*(e-n))/l)*u,t+l*c]}(x,k,T,C,S,O,w,_);if(I){var M=x-I[0],A=k-I[1],E=S-I[0],N=O-I[1],P=1/Mu(Eu((M*E+A*N)/(Du(M*M+A*A)*Du(E*E+N*N)))/2),D=Du(I[0]*I[0]+I[1]*I[1]);y=Bu(g,(i-D)/(P-1)),b=Bu(m,(r-D)/(P+1))}}if(s>Ru)if(b>Ru){var L=Vu(T,C,x,k,r,b,o),B=Vu(S,O,w,_,r,b,o);e.moveTo(h+L.cx+L.x01,l+L.cy+L.y01),b<m?e.arc(h+L.cx,l+L.cy,b,Nu(L.y01,L.x01),Nu(B.y01,B.x01),!o):(e.arc(h+L.cx,l+L.cy,b,Nu(L.y01,L.x01),Nu(L.y11,L.x11),!o),e.arc(h,l,r,Nu(L.cy+L.y11,L.cx+L.x11),Nu(B.cy+B.y11,B.cx+B.x11),!o),e.arc(h+B.cx,l+B.cy,b,Nu(B.y11,B.x11),Nu(B.y01,B.x01),!o))}else e.moveTo(h+x,l+k),e.arc(h,l,r,u,c,!o);else e.moveTo(h+x,l+k);if(i>Ru&&s>Ru)if(y>Ru){L=Vu(w,_,S,O,i,-y,o),B=Vu(x,k,T,C,i,-y,o);e.lineTo(h+L.cx+L.x01,l+L.cy+L.y01),y<g?e.arc(h+L.cx,l+L.cy,y,Nu(L.y01,L.x01),Nu(B.y01,B.x01),!o):(e.arc(h+L.cx,l+L.cy,y,Nu(L.y01,L.x01),Nu(L.y11,L.x11),!o),e.arc(h,l,i,Nu(L.cy+L.y11,L.cx+L.x11),Nu(B.cy+B.y11,B.cx+B.x11),o),e.arc(h+B.cx,l+B.cy,y,Nu(B.y11,B.x11),Nu(B.y01,B.x01),!o))}else e.lineTo(h+w,l+_),e.arc(h,l,i,c,u,o);else e.lineTo(h+w,l+_)}else e.moveTo(h,l);e.closePath()}}var Fu=function(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=2*Math.PI,this.clockwise=!0,this.cornerRadius=0,this.innerCornerRadius=0},qu=function(e){function t(t){return e.call(this,t)||this}return ve(t,e),t.prototype.getDefaultShape=function(){return new Fu},t.prototype.buildPath=function(e,t){Gu(e,t)},t.prototype.isZeroArea=function(){return this.shape.startAngle===this.shape.endAngle||this.shape.r===this.shape.r0},t}(Ns);qu.prototype.type="sector";var ju=qu,zu=function(){this.cx=0,this.cy=0,this.r=0,this.r0=0},Hu=function(e){function t(t){return e.call(this,t)||this}return ve(t,e),t.prototype.getDefaultShape=function(){return new zu},t.prototype.buildPath=function(e,t){var r=t.cx,i=t.cy,n=2*Math.PI;e.moveTo(r+t.r,i),e.arc(r,i,t.r,0,n,!1),e.moveTo(r+t.r0,i),e.arc(r,i,t.r0,0,n,!0)},t}(Ns);Hu.prototype.type="ring";var Uu=Hu;function Wu(e,t,r,i,n,a,s){var o=.5*(r-e),u=.5*(i-t);return(2*(t-r)+o+u)*s+(-3*(t-r)-2*o-u)*a+o*n+t}function Ku(e,t,r){var i=t.smooth,n=t.points;if(n&&n.length>=2){if(i&&"spline"!==i){var a=function(e,t,r,i){var n,a,s,o,u=[],c=[],d=[],h=[];if(i){s=[1/0,1/0],o=[-1/0,-1/0];for(var l=0,f=e.length;l<f;l++)Ee(s,s,e[l]),Ne(o,o,e[l]);Ee(s,s,i[0]),Ne(o,o,i[1])}for(l=0,f=e.length;l<f;l++){var p=e[l];if(r)n=e[l?l-1:f-1],a=e[(l+1)%f];else{if(0===l||l===f-1){u.push(ye(e[l]));continue}n=e[l-1],a=e[l+1]}ke(c,a,n),Se(c,c,t);var v=Te(p,n),m=Te(p,a),g=v+m;0!==g&&(v/=g,m/=g),Se(d,c,-v),Se(h,c,m);var y=be([],p,d),b=be([],p,h);i&&(Ne(y,y,s),Ee(y,y,o),Ne(b,b,s),Ee(b,b,o)),u.push(y),u.push(b)}return r&&u.push(u.shift()),u}(n,i,r,t.smoothConstraint);e.moveTo(n[0][0],n[0][1]);for(var s=n.length,o=0;o<(r?s:s-1);o++){var u=a[2*o],c=a[2*o+1],d=n[(o+1)%s];e.bezierCurveTo(u[0],u[1],c[0],c[1],d[0],d[1])}}else{"spline"===i&&(n=function(e,t){for(var r=e.length,i=[],n=0,a=1;a<r;a++)n+=Te(e[a-1],e[a]);var s=n/2;for(s=s<r?r:s,a=0;a<s;a++){var o=a/(s-1)*(t?r:r-1),u=Math.floor(o),c=o-u,d=void 0,h=e[u%r],l=void 0,f=void 0;t?(d=e[(u-1+r)%r],l=e[(u+1)%r],f=e[(u+2)%r]):(d=e[0===u?u:u-1],l=e[u>r-2?r-1:u+1],f=e[u>r-3?r-1:u+2]);var p=c*c,v=c*p;i.push([Wu(d[0],h[0],l[0],f[0],c,p,v),Wu(d[1],h[1],l[1],f[1],c,p,v)])}return i}(n,r)),e.moveTo(n[0][0],n[0][1]);o=1;for(var h=n.length;o<h;o++)e.lineTo(n[o][0],n[o][1])}r&&e.closePath()}}var Xu=function(){this.points=null,this.smooth=0,this.smoothConstraint=null},Yu=function(e){function t(t){return e.call(this,t)||this}return ve(t,e),t.prototype.getDefaultShape=function(){return new Xu},t.prototype.buildPath=function(e,t){Ku(e,t,!0)},t}(Ns);Yu.prototype.type="polygon";var Zu=Yu,Qu=function(){this.points=null,this.percent=1,this.smooth=0,this.smoothConstraint=null},$u=function(e){function t(t){return e.call(this,t)||this}return ve(t,e),t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new Qu},t.prototype.buildPath=function(e,t){Ku(e,t,!1)},t}(Ns);$u.prototype.type="polyline";var Ju=$u,ec={},tc=function(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1},rc=function(e){function t(t){return e.call(this,t)||this}return ve(t,e),t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new tc},t.prototype.buildPath=function(e,t){var r,i,n,a;if(this.subPixelOptimize){var s=qs(ec,t,this.style);r=s.x1,i=s.y1,n=s.x2,a=s.y2}else r=t.x1,i=t.y1,n=t.x2,a=t.y2;var o=t.percent;0!==o&&(e.moveTo(r,i),o<1&&(n=r*(1-o)+n*o,a=i*(1-o)+a*o),e.lineTo(n,a))},t.prototype.pointAt=function(e){var t=this.shape;return[t.x1*(1-e)+t.x2*e,t.y1*(1-e)+t.y2*e]},t}(Ns);rc.prototype.type="line";var ic=rc,nc=[],ac=function(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.percent=1};function sc(e,t,r){var i=e.cpx2,n=e.cpy2;return null===i||null===n?[(r?ba:ya)(e.x1,e.cpx1,e.cpx2,e.x2,t),(r?ba:ya)(e.y1,e.cpy1,e.cpy2,e.y2,t)]:[(r?Ta:Oa)(e.x1,e.cpx1,e.x2,t),(r?Ta:Oa)(e.y1,e.cpy1,e.y2,t)]}var oc=function(e){function t(t){return e.call(this,t)||this}return ve(t,e),t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new ac},t.prototype.buildPath=function(e,t){var r=t.x1,i=t.y1,n=t.x2,a=t.y2,s=t.cpx1,o=t.cpy1,u=t.cpx2,c=t.cpy2,d=t.percent;0!==d&&(e.moveTo(r,i),null==u||null==c?(d<1&&(Ia(r,s,n,d,nc),s=nc[1],n=nc[2],Ia(i,o,a,d,nc),o=nc[1],a=nc[2]),e.quadraticCurveTo(s,o,n,a)):(d<1&&(wa(r,s,u,n,d,nc),s=nc[1],u=nc[2],n=nc[3],wa(i,o,c,a,d,nc),o=nc[1],c=nc[2],a=nc[3]),e.bezierCurveTo(s,o,u,c,n,a)))},t.prototype.pointAt=function(e){return sc(this.shape,e,!1)},t.prototype.tangentAt=function(e){var t=sc(this.shape,e,!0);return Oe(t,t)},t}(Ns);oc.prototype.type="bezier-curve";var uc=oc,cc=function(){this.cx=0,this.cy=0,this.r=0,this.startAngle=0,this.endAngle=2*Math.PI,this.clockwise=!0},dc=function(e){function t(t){return e.call(this,t)||this}return ve(t,e),t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new cc},t.prototype.buildPath=function(e,t){var r=t.cx,i=t.cy,n=Math.max(t.r,0),a=t.startAngle,s=t.endAngle,o=t.clockwise,u=Math.cos(a),c=Math.sin(a);e.moveTo(u*n+r,c*n+i),e.arc(r,i,n,a,s,!o)},t}(Ns);dc.prototype.type="arc";var hc=dc,lc=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="compound",t}return ve(t,e),t.prototype._updatePathDirty=function(){for(var e=this.shape.paths,t=this.shapeChanged(),r=0;r<e.length;r++)t=t||e[r].shapeChanged();t&&this.dirtyShape()},t.prototype.beforeBrush=function(){this._updatePathDirty();for(var e=this.shape.paths||[],t=this.getGlobalScale(),r=0;r<e.length;r++)e[r].path||e[r].createPathProxy(),e[r].path.setScale(t[0],t[1],e[r].segmentIgnoreThreshold)},t.prototype.buildPath=function(e,t){for(var r=t.paths||[],i=0;i<r.length;i++)r[i].buildPath(e,r[i].shape,!0)},t.prototype.afterBrush=function(){for(var e=this.shape.paths||[],t=0;t<e.length;t++)e[t].pathUpdated()},t.prototype.getBoundingRect=function(){return this._updatePathDirty.call(this),Ns.prototype.getBoundingRect.call(this)},t}(Ns),fc=function(){function e(e){this.colorStops=e||[]}return e.prototype.addColorStop=function(e,t){this.colorStops.push({offset:e,color:t})},e}(),pc=function(e){function t(t,r,i,n,a,s){var o=e.call(this,a)||this;return o.x=null==t?0:t,o.y=null==r?0:r,o.x2=null==i?1:i,o.y2=null==n?0:n,o.type="linear",o.global=s||!1,o}return ve(t,e),t}(fc),vc=function(e){function t(t,r,i,n,a){var s=e.call(this,n)||this;return s.x=null==t?.5:t,s.y=null==r?.5:r,s.r=null==i?.5:i,s.type="radial",s.global=a||!1,s}return ve(t,e),t}(fc),mc=[0,0],gc=[0,0],yc=new pr,bc=new pr,xc=function(){function e(e,t){this._corners=[],this._axes=[],this._origin=[0,0];for(var r=0;r<4;r++)this._corners[r]=new pr;for(r=0;r<2;r++)this._axes[r]=new pr;e&&this.fromBoundingRect(e,t)}return e.prototype.fromBoundingRect=function(e,t){var r=this._corners,i=this._axes,n=e.x,a=e.y,s=n+e.width,o=a+e.height;if(r[0].set(n,a),r[1].set(s,a),r[2].set(s,o),r[3].set(n,o),t)for(var u=0;u<4;u++)r[u].transform(t);pr.sub(i[0],r[1],r[0]),pr.sub(i[1],r[3],r[0]),i[0].normalize(),i[1].normalize();for(u=0;u<2;u++)this._origin[u]=i[u].dot(r[0])},e.prototype.intersect=function(e,t){var r=!0,i=!t;return yc.set(1/0,1/0),bc.set(0,0),!this._intersectCheckOneSide(this,e,yc,bc,i,1)&&(r=!1,i)||!this._intersectCheckOneSide(e,this,yc,bc,i,-1)&&(r=!1,i)||i||pr.copy(t,r?yc:bc),r},e.prototype._intersectCheckOneSide=function(e,t,r,i,n,a){for(var s=!0,o=0;o<2;o++){var u=this._axes[o];if(this._getProjMinMaxOnAxis(o,e._corners,mc),this._getProjMinMaxOnAxis(o,t._corners,gc),mc[1]<gc[0]||mc[0]>gc[1]){if(s=!1,n)return s;var c=Math.abs(gc[0]-mc[1]),d=Math.abs(mc[0]-gc[1]);Math.min(c,d)>i.len()&&(c<d?pr.scale(i,u,-c*a):pr.scale(i,u,d*a))}else if(r){c=Math.abs(gc[0]-mc[1]),d=Math.abs(mc[0]-gc[1]);Math.min(c,d)<r.len()&&(c<d?pr.scale(r,u,c*a):pr.scale(r,u,-d*a))}}return s},e.prototype._getProjMinMaxOnAxis=function(e,t,r){for(var i=this._axes[e],n=this._origin,a=t[0].dot(i)+n[e],s=a,o=a,u=1;u<t.length;u++){var c=t[u].dot(i)+n[e];s=Math.min(c,s),o=Math.max(c,o)}r[0]=s,r[1]=o},e}(),kc=[],wc=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.notClear=!0,t.incremental=!0,t._displayables=[],t._temporaryDisplayables=[],t._cursor=0,t}return ve(t,e),t.prototype.traverse=function(e,t){e.call(t,this)},t.prototype.useStyle=function(){this.style={}},t.prototype.getCursor=function(){return this._cursor},t.prototype.innerAfterBrush=function(){this._cursor=this._displayables.length},t.prototype.clearDisplaybles=function(){this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.markRedraw(),this.notClear=!1},t.prototype.clearTemporalDisplayables=function(){this._temporaryDisplayables=[]},t.prototype.addDisplayable=function(e,t){t?this._temporaryDisplayables.push(e):this._displayables.push(e),this.markRedraw()},t.prototype.addDisplayables=function(e,t){t=t||!1;for(var r=0;r<e.length;r++)this.addDisplayable(e[r],t)},t.prototype.getDisplayables=function(){return this._displayables},t.prototype.getTemporalDisplayables=function(){return this._temporaryDisplayables},t.prototype.eachPendingDisplayable=function(e){for(var t=this._cursor;t<this._displayables.length;t++)e&&e(this._displayables[t]);for(t=0;t<this._temporaryDisplayables.length;t++)e&&e(this._temporaryDisplayables[t])},t.prototype.update=function(){this.updateTransform();for(var e=this._cursor;e<this._displayables.length;e++){(t=this._displayables[e]).parent=this,t.update(),t.parent=null}for(e=0;e<this._temporaryDisplayables.length;e++){var t;(t=this._temporaryDisplayables[e]).parent=this,t.update(),t.parent=null}},t.prototype.getBoundingRect=function(){if(!this._rect){for(var e=new _r(1/0,1/0,-1/0,-1/0),t=0;t<this._displayables.length;t++){var r=this._displayables[t],i=r.getBoundingRect().clone();r.needLocalTransform()&&i.applyTransform(r.getLocalTransform(kc)),e.union(i)}this._rect=e}return this._rect},t.prototype.contain=function(e,t){var r=this.transformCoordToLocal(e,t);if(this.getBoundingRect().contain(r[0],r[1]))for(var i=0;i<this._displayables.length;i++){if(this._displayables[i].contain(e,t))return!0}return!1},t}(sa),_c=Math.max,Sc=Math.min,Oc={};function Tc(e){return Ns.extend(e)}var Cc=function(e,t){var r=bu(e,t);return function(e){function t(t){var i=e.call(this,t)||this;return i.applyTransform=r.applyTransform,i.buildPath=r.buildPath,i}return ve(t,e),t}(gu)};function Ic(e,t){return Cc(e,t)}function Mc(e,t){Oc[e]=t}function Ac(e){if(Oc.hasOwnProperty(e))return Oc[e]}function Ec(e,t,r,i){var n=xu(e,t);return r&&("center"===i&&(r=Pc(r,n.getBoundingRect())),Lc(n,r)),n}function Nc(e,t,r){var i=new Gs({style:{image:e,x:t.x,y:t.y,width:t.width,height:t.height},onload:function(e){if("center"===r){var n={width:e.width,height:e.height};i.setStyle(Pc(t,n))}}});return i}function Pc(e,t){var r,i=t.width/t.height,n=e.height*i;return r=n<=e.width?e.height:(n=e.width)/i,{x:e.x+e.width/2-n/2,y:e.y+e.height/2-r/2,width:n,height:r}}var Dc=function(e,t){for(var r=[],i=e.length,n=0;n<i;n++){var a=e[n];a.path||a.createPathProxy(),a.shapeChanged()&&a.buildPath(a.path,a.shape,!0),r.push(a.path)}var s=new Ns(t);return s.createPathProxy(),s.buildPath=function(e){if(yu(e)){e.appendPath(r);var t=e.getContext();t&&e.rebuildPath(t,1)}},s};function Lc(e,t){if(e.applyTransform){var r=e.getBoundingRect().calculateTransform(t);e.applyTransform(r)}}function Bc(e){return qs(e.shape,e.shape,e.style),e}function Rc(e){return js(e.shape,e.shape,e.style),e}var Vc=zs;function Gc(e,t,r,i,n,a,s){var o,u=!1;"function"===typeof n?(s=a,a=n,n=null):K(n)&&(a=n.cb,s=n.during,u=n.isFrom,o=n.removeOpt,n=n.dataIndex);var c,d="update"===e,h="remove"===e;if(i&&i.ecModel){var l=i.ecModel.getUpdatePayload();c=l&&l.animation}var f=i&&i.isAnimationEnabled();if(h||t.stopAnimation("remove"),f){var p=void 0,v=void 0,m=void 0;c?(p=c.duration||0,v=c.easing||"cubicOut",m=c.delay||0):h?(p=J((o=o||{}).duration,200),v=J(o.easing,"cubicOut"),m=0):(p=i.getShallow(d?"animationDurationUpdate":"animationDuration"),v=i.getShallow(d?"animationEasingUpdate":"animationEasing"),m=i.getShallow(d?"animationDelayUpdate":"animationDelay")),"function"===typeof m&&(m=m(n,i.getAnimationDelayParams?i.getAnimationDelayParams(t,n):null)),"function"===typeof p&&(p=p(n)),p>0?u?t.animateFrom(r,{duration:p,delay:m||0,easing:v,done:a,force:!!a||!!s,scope:e,during:s}):t.animateTo(r,{duration:p,delay:m||0,easing:v,done:a,force:!!a||!!s,setToFinal:!0,scope:e,during:s}):(t.stopAnimation(),!u&&t.attr(r),a&&a())}else t.stopAnimation(),!u&&t.attr(r),s&&s(1),a&&a()}function Fc(e,t,r,i,n,a){Gc("update",e,t,r,i,n,a)}function qc(e,t,r,i,n,a){Gc("init",e,t,r,i,n,a)}function jc(e,t,r,i,n,a){Uc(e)||Gc("remove",e,t,r,i,n,a)}function zc(e,t,r,i){e.removeTextContent(),e.removeTextGuideLine(),jc(e,{style:{opacity:0}},t,r,i)}function Hc(e,t,r){function i(){e.parent&&e.parent.remove(e)}e.isGroup?e.traverse((function(e){e.isGroup||zc(e,t,r,i)})):zc(e,t,r,i)}function Uc(e){if(!e.__zr)return!0;for(var t=0;t<e.animators.length;t++){if("remove"===e.animators[t].scope)return!0}return!1}function Wc(e,t){for(var r=dt([]);e&&e!==t;)lt(r,e.getLocalTransform(),r),e=e.parent;return r}function Kc(e,t,r){return t&&!D(t)&&(t=St.getLocalTransform(t)),r&&(t=mt([],t)),Ae([],e,t)}function Xc(e,t,r){var i=0===t[4]||0===t[5]||0===t[0]?1:Math.abs(2*t[4]/t[0]),n=0===t[4]||0===t[5]||0===t[2]?1:Math.abs(2*t[4]/t[2]),a=["left"===e?-i:"right"===e?i:0,"top"===e?-n:"bottom"===e?n:0];return a=Kc(a,t,r),Math.abs(a[0])>Math.abs(a[1])?a[0]>0?"right":"left":a[1]>0?"bottom":"top"}function Yc(e){return!e.isGroup}function Zc(e,t,r){if(e&&t){var i=function(e){var t={};return e.traverse((function(e){Yc(e)&&e.anid&&(t[e.anid]=e)})),t}(e);t.traverse((function(e){if(Yc(e)&&e.anid){var t=i[e.anid];if(t){var a=n(e);e.attr(n(t)),Fc(e,a,r,ao(e).dataIndex)}}}))}function n(e){var t={x:e.x,y:e.y,rotation:e.rotation};return function(e){return null!=e.shape}(e)&&(t.shape=I({},e.shape)),t}}function Qc(e,t){return B(e,(function(e){var r=e[0];r=_c(r,t.x),r=Sc(r,t.x+t.width);var i=e[1];return i=_c(i,t.y),[r,i=Sc(i,t.y+t.height)]}))}function $c(e,t){var r=_c(e.x,t.x),i=Sc(e.x+e.width,t.x+t.width),n=_c(e.y,t.y),a=Sc(e.y+e.height,t.y+t.height);if(i>=r&&a>=n)return{x:r,y:n,width:i-r,height:a-n}}function Jc(e,t,r){var i=I({rectHover:!0},t),n=i.style={strokeNoScale:!0};if(r=r||{x:-1,y:-1,width:2,height:2},e)return 0===e.indexOf("image://")?(n.image=e.slice(8),M(n,r),new Gs(i)):Ec(e.replace("path://",""),i,r,"center")}function ed(e,t,r,i,n){for(var a=0,s=n[n.length-1];a<n.length;a++){var o=n[a];if(td(e,t,r,i,o[0],o[1],s[0],s[1]))return!0;s=o}}function td(e,t,r,i,n,a,s,o){var u,c=r-e,d=i-t,h=s-n,l=o-a,f=rd(h,l,c,d);if((u=f)<=1e-6&&u>=-1e-6)return!1;var p=e-n,v=t-a,m=rd(p,v,c,d)/f;if(m<0||m>1)return!1;var g=rd(p,v,h,l)/f;return!(g<0||g>1)}function rd(e,t,r,i){return e*i-r*t}function id(e){var t=e.itemTooltipOption,r=e.componentModel,i=e.itemName,n=H(t)?{formatter:t}:t,a=r.mainType,s=r.componentIndex,o={componentType:a,name:i,$vars:["name"]};o[a+"Index"]=s;var u=e.formatterParamsExtra;u&&L(G(u),(function(e){le(o,e)||(o[e]=u[e],o.$vars.push(e))}));var c=ao(e.el);c.componentMainType=a,c.componentIndex=s,c.tooltipConfig={name:i,option:M({content:i,formatterParams:o},n)}}Mc("circle",_u),Mc("ellipse",Tu),Mc("sector",ju),Mc("ring",Uu),Mc("polygon",Zu),Mc("polyline",Ju),Mc("rect",Ks),Mc("line",ic),Mc("bezierCurve",uc),Mc("arc",hc);var nd={};function ad(e,t){for(var r=0;r<co.length;r++){var i=co[r],n=t[i],a=e.ensureState(i);a.style=a.style||{},a.style.text=n}var s=e.currentStates.slice();e.clearStates(!0),e.setStyle({text:t.normal}),e.useStates(s,!0)}function sd(e,t,r){var i,n=e.labelFetcher,a=e.labelDataIndex,s=e.labelDimIndex,o=t.normal;n&&(i=n.getFormattedLabel(a,"normal",null,s,o&&o.get("formatter"),null!=r?{interpolatedValue:r}:null)),null==i&&(i=z(e.defaultText)?e.defaultText(a,e,r):e.defaultText);for(var u={normal:i},c=0;c<co.length;c++){var d=co[c],h=t[d];u[d]=J(n?n.getFormattedLabel(a,d,null,s,h&&h.get("formatter")):null,i)}return u}function od(e,t,r,i){r=r||nd;for(var n=e instanceof no,a=!1,s=0;s<ho.length;s++){if((l=t[ho[s]])&&l.getShallow("show")){a=!0;break}}var o=n?e:e.getTextContent();if(a){n||(o||(o=new no,e.setTextContent(o)),e.stateProxy&&(o.stateProxy=e.stateProxy));var u=sd(r,t),c=t.normal,d=!!c.getShallow("show"),h=cd(c,i&&i.normal,r,!1,!n);h.text=u.normal,n||e.setTextConfig(dd(c,r,!1));for(s=0;s<co.length;s++){var l,f=co[s];if(l=t[f]){var p=o.ensureState(f),v=!!J(l.getShallow("show"),d);if(v!==d&&(p.ignore=!v),p.style=cd(l,i&&i[f],r,!0,!n),p.style.text=u[f],!n)e.ensureState(f).textConfig=dd(l,r,!0)}}o.silent=!!c.getShallow("silent"),null!=o.style.x&&(h.x=o.style.x),null!=o.style.y&&(h.y=o.style.y),o.ignore=!d,o.useStyle(h),o.dirty(),r.enableTextSetter&&(md(o).setLabelText=function(e){var i=sd(r,t,e);ad(o,i)})}else o&&(o.ignore=!0);e.dirty()}function ud(e,t){t=t||"label";for(var r={normal:e.getModel(t)},i=0;i<co.length;i++){var n=co[i];r[n]=e.getModel([n,t])}return r}function cd(e,t,r,i,n){var a={};return function(e,t,r,i,n){r=r||nd;var a,s=t.ecModel,o=s&&s.option.textStyle,u=function(e){var t;for(;e&&e!==e.ecModel;){var r=(e.option||nd).rich;if(r){t=t||{};for(var i=G(r),n=0;n<i.length;n++){t[i[n]]=1}}e=e.parentModel}return t}(t);if(u)for(var c in a={},u)if(u.hasOwnProperty(c)){var d=t.getModel(["rich",c]);pd(a[c]={},d,o,r,i,n,!1,!0)}a&&(e.rich=a);var h=t.get("overflow");h&&(e.overflow=h);var l=t.get("minMargin");null!=l&&(e.margin=l);pd(e,t,o,r,i,n,!0,!1)}(a,e,r,i,n),t&&I(a,t),a}function dd(e,t,r){t=t||{};var i,n={},a=e.getShallow("rotate"),s=J(e.getShallow("distance"),r?null:5),o=e.getShallow("offset");return"outside"===(i=e.getShallow("position")||(r?null:"inside"))&&(i=t.defaultOutsidePosition||"top"),null!=i&&(n.position=i),null!=o&&(n.offset=o),null!=a&&(a*=Math.PI/180,n.rotation=a),null!=s&&(n.distance=s),n.outsideFill="inherit"===e.get("color")?t.inheritColor||null:"auto",n}var hd=["fontStyle","fontWeight","fontSize","fontFamily","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY"],ld=["align","lineHeight","width","height","tag","verticalAlign"],fd=["padding","borderWidth","borderRadius","borderDashOffset","backgroundColor","borderColor","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"];function pd(e,t,r,i,n,a,s,o){r=!n&&r||nd;var u=i&&i.inheritColor,c=t.getShallow("color"),d=t.getShallow("textBorderColor"),h=J(t.getShallow("opacity"),r.opacity);"inherit"!==c&&"auto"!==c||(c=u||null),"inherit"!==d&&"auto"!==d||(d=u||null),a||(c=c||r.color,d=d||r.textBorderColor),null!=c&&(e.fill=c),null!=d&&(e.stroke=d);var l=J(t.getShallow("textBorderWidth"),r.textBorderWidth);null!=l&&(e.lineWidth=l);var f=J(t.getShallow("textBorderType"),r.textBorderType);null!=f&&(e.lineDash=f);var p=J(t.getShallow("textBorderDashOffset"),r.textBorderDashOffset);null!=p&&(e.lineDashOffset=p),n||null!=h||o||(h=i&&i.defaultOpacity),null!=h&&(e.opacity=h),n||a||null==e.fill&&i.inheritColor&&(e.fill=i.inheritColor);for(var v=0;v<hd.length;v++){var m=hd[v];null!=(y=J(t.getShallow(m),r[m]))&&(e[m]=y)}for(v=0;v<ld.length;v++){m=ld[v];null!=(y=t.getShallow(m))&&(e[m]=y)}if(null==e.verticalAlign){var g=t.getShallow("baseline");null!=g&&(e.verticalAlign=g)}if(!s||!i.disableBox){for(v=0;v<fd.length;v++){var y;m=fd[v];null!=(y=t.getShallow(m))&&(e[m]=y)}var b=t.getShallow("borderType");null!=b&&(e.borderDash=b),"auto"!==e.backgroundColor&&"inherit"!==e.backgroundColor||!u||(e.backgroundColor=u),"auto"!==e.borderColor&&"inherit"!==e.borderColor||!u||(e.borderColor=u)}}function vd(e,t){var r=t&&t.getModel("textStyle");return ne([e.fontStyle||r&&r.getShallow("fontStyle")||"",e.fontWeight||r&&r.getShallow("fontWeight")||"",(e.fontSize||r&&r.getShallow("fontSize")||12)+"px",e.fontFamily||r&&r.getShallow("fontFamily")||"sans-serif"].join(" "))}var md=fn();function gd(e,t,r,i){if(e){var n=md(e);n.prevValue=n.value,n.value=r;var a=t.normal;n.valueAnimation=a.get("valueAnimation"),n.valueAnimation&&(n.precision=a.get("precision"),n.defaultInterpolatedText=i,n.statesModels=t)}}function yd(e,t,r,i,n){var a=md(e);if(a.valueAnimation){var s=a.defaultInterpolatedText,o=J(a.interpolatedValue,a.prevValue),u=a.value;(null==o?qc:Fc)(e,{},i,t,null,(function(i){var c=wn(r,a.precision,o,u,i);a.interpolatedValue=1===i?null:c;var d=sd({labelDataIndex:t,labelFetcher:n,defaultText:s?s(c):c+""},a.statesModels,c);ad(e,d)}))}}var bd=["textStyle","color"],xd=new no,kd=function(){function e(){}return e.prototype.getTextColor=function(e){var t=this.ecModel;return this.getShallow("color")||(!e&&t?t.get(bd):null)},e.prototype.getFont=function(){return vd({fontStyle:this.getShallow("fontStyle"),fontWeight:this.getShallow("fontWeight"),fontSize:this.getShallow("fontSize"),fontFamily:this.getShallow("fontFamily")},this.ecModel)},e.prototype.getTextRect=function(e){return xd.useStyle({text:e,fontStyle:this.getShallow("fontStyle"),fontWeight:this.getShallow("fontWeight"),fontSize:this.getShallow("fontSize"),fontFamily:this.getShallow("fontFamily"),verticalAlign:this.getShallow("verticalAlign")||this.getShallow("baseline"),padding:this.getShallow("padding"),lineHeight:this.getShallow("lineHeight"),rich:this.getShallow("rich")}),xd.update(),xd.getBoundingRect()},e}(),wd=[["lineWidth","width"],["stroke","color"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","type"],["lineDashOffset","dashOffset"],["lineCap","cap"],["lineJoin","join"],["miterLimit"]],_d=Pn(wd),Sd=function(){function e(){}return e.prototype.getLineStyle=function(e){return _d(this,e)},e}(),Od=[["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","borderType"],["lineDashOffset","borderDashOffset"],["lineCap","borderCap"],["lineJoin","borderJoin"],["miterLimit","borderMiterLimit"]],Td=Pn(Od),Cd=function(){function e(){}return e.prototype.getItemStyle=function(e,t){return Td(this,e,t)},e}(),Id=function(){function e(e,t,r){this.parentModel=t,this.ecModel=r,this.option=e}return e.prototype.init=function(e,t,r){for(var i=[],n=3;n<arguments.length;n++)i[n-3]=arguments[n]},e.prototype.mergeOption=function(e,t){T(this.option,e,!0)},e.prototype.get=function(e,t){return null==e?this.option:this._doGet(this.parsePath(e),!t&&this.parentModel)},e.prototype.getShallow=function(e,t){var r=this.option,i=null==r?r:r[e];if(null==i&&!t){var n=this.parentModel;n&&(i=n.getShallow(e))}return i},e.prototype.getModel=function(t,r){var i=null!=t,n=i?this.parsePath(t):null;return new e(i?this._doGet(n):this.option,r=r||this.parentModel&&this.parentModel.getModel(this.resolveParentPath(n)),this.ecModel)},e.prototype.isEmpty=function(){return null==this.option},e.prototype.restoreData=function(){},e.prototype.clone=function(){return new(0,this.constructor)(O(this.option))},e.prototype.parsePath=function(e){return"string"===typeof e?e.split("."):e},e.prototype.resolveParentPath=function(e){return e},e.prototype.isAnimationEnabled=function(){if(!d.node&&this.option){if(null!=this.option.animation)return!!this.option.animation;if(this.parentModel)return this.parentModel.isAnimationEnabled()}},e.prototype._doGet=function(e,t){var r=this.option;if(!e)return r;for(var i=0;i<e.length&&(!e[i]||null!=(r=r&&"object"===typeof r?r[e[i]]:null));i++);return null==r&&t&&(r=t._doGet(this.resolveParentPath(e),t.parentModel)),r},e}();Tn(Id),function(e){var t=["__\0is_clz",Mn++].join("_");e.prototype[t]=!0,e.isInstance=function(e){return!(!e||!e[t])}}(Id),P(Id,Sd),P(Id,Cd),P(Id,Ln),P(Id,kd);var Md=Id,Ad=Math.round(10*Math.random());function Ed(e){return[e||"",Ad++].join("_")}function Nd(e,t){return T(T({},e,!0),t,!0)}var Pd="ZH",Dd="EN",Ld=Dd,Bd={},Rd={},Vd=d.domSupported&&(document.documentElement.lang||navigator.language||navigator.browserLanguage).toUpperCase().indexOf(Pd)>-1?Pd:Ld;function Gd(e,t){e=e.toUpperCase(),Rd[e]=new Md(t),Bd[e]=t}Gd(Dd,{time:{month:["January","February","March","April","May","June","July","August","September","October","November","December"],monthAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayOfWeekAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},legend:{selector:{all:"All",inverse:"Inv"}},toolbox:{brush:{title:{rect:"Box Select",polygon:"Lasso Select",lineX:"Horizontally Select",lineY:"Vertically Select",keep:"Keep Selections",clear:"Clear Selections"}},dataView:{title:"Data View",lang:["Data View","Close","Refresh"]},dataZoom:{title:{zoom:"Zoom",back:"Zoom Reset"}},magicType:{title:{line:"Switch to Line Chart",bar:"Switch to Bar Chart",stack:"Stack",tiled:"Tile"}},restore:{title:"Restore"},saveAsImage:{title:"Save as Image",lang:["Right Click to Save Image"]}},series:{typeNames:{pie:"Pie chart",bar:"Bar chart",line:"Line chart",scatter:"Scatter plot",effectScatter:"Ripple scatter plot",radar:"Radar chart",tree:"Tree",treemap:"Treemap",boxplot:"Boxplot",candlestick:"Candlestick",k:"K line chart",heatmap:"Heat map",map:"Map",parallel:"Parallel coordinate map",lines:"Line graph",graph:"Relationship graph",sankey:"Sankey diagram",funnel:"Funnel chart",gauge:"Guage",pictorialBar:"Pictorial bar",themeRiver:"Theme River Map",sunburst:"Sunburst"}},aria:{general:{withTitle:'This is a chart about "{title}"',withoutTitle:"This is a chart"},series:{single:{prefix:"",withName:" with type {seriesType} named {seriesName}.",withoutName:" with type {seriesType}."},multiple:{prefix:". It consists of {seriesCount} series count.",withName:" The {seriesId} series is a {seriesType} representing {seriesName}.",withoutName:" The {seriesId} series is a {seriesType}.",separator:{middle:"",end:""}}},data:{allData:"The data is as follows: ",partialData:"The first {displayCnt} items are: ",withName:"the data for {name} is {value}",withoutName:"{value}",separator:{middle:", ",end:". "}}}}),Gd(Pd,{time:{month:["\u4e00\u6708","\u4e8c\u6708","\u4e09\u6708","\u56db\u6708","\u4e94\u6708","\u516d\u6708","\u4e03\u6708","\u516b\u6708","\u4e5d\u6708","\u5341\u6708","\u5341\u4e00\u6708","\u5341\u4e8c\u6708"],monthAbbr:["1\u6708","2\u6708","3\u6708","4\u6708","5\u6708","6\u6708","7\u6708","8\u6708","9\u6708","10\u6708","11\u6708","12\u6708"],dayOfWeek:["\u661f\u671f\u65e5","\u661f\u671f\u4e00","\u661f\u671f\u4e8c","\u661f\u671f\u4e09","\u661f\u671f\u56db","\u661f\u671f\u4e94","\u661f\u671f\u516d"],dayOfWeekAbbr:["\u65e5","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d"]},legend:{selector:{all:"\u5168\u9009",inverse:"\u53cd\u9009"}},toolbox:{brush:{title:{rect:"\u77e9\u5f62\u9009\u62e9",polygon:"\u5708\u9009",lineX:"\u6a2a\u5411\u9009\u62e9",lineY:"\u7eb5\u5411\u9009\u62e9",keep:"\u4fdd\u6301\u9009\u62e9",clear:"\u6e05\u9664\u9009\u62e9"}},dataView:{title:"\u6570\u636e\u89c6\u56fe",lang:["\u6570\u636e\u89c6\u56fe","\u5173\u95ed","\u5237\u65b0"]},dataZoom:{title:{zoom:"\u533a\u57df\u7f29\u653e",back:"\u533a\u57df\u7f29\u653e\u8fd8\u539f"}},magicType:{title:{line:"\u5207\u6362\u4e3a\u6298\u7ebf\u56fe",bar:"\u5207\u6362\u4e3a\u67f1\u72b6\u56fe",stack:"\u5207\u6362\u4e3a\u5806\u53e0",tiled:"\u5207\u6362\u4e3a\u5e73\u94fa"}},restore:{title:"\u8fd8\u539f"},saveAsImage:{title:"\u4fdd\u5b58\u4e3a\u56fe\u7247",lang:["\u53f3\u952e\u53e6\u5b58\u4e3a\u56fe\u7247"]}},series:{typeNames:{pie:"\u997c\u56fe",bar:"\u67f1\u72b6\u56fe",line:"\u6298\u7ebf\u56fe",scatter:"\u6563\u70b9\u56fe",effectScatter:"\u6d9f\u6f2a\u6563\u70b9\u56fe",radar:"\u96f7\u8fbe\u56fe",tree:"\u6811\u56fe",treemap:"\u77e9\u5f62\u6811\u56fe",boxplot:"\u7bb1\u578b\u56fe",candlestick:"K\u7ebf\u56fe",k:"K\u7ebf\u56fe",heatmap:"\u70ed\u529b\u56fe",map:"\u5730\u56fe",parallel:"\u5e73\u884c\u5750\u6807\u56fe",lines:"\u7ebf\u56fe",graph:"\u5173\u7cfb\u56fe",sankey:"\u6851\u57fa\u56fe",funnel:"\u6f0f\u6597\u56fe",gauge:"\u4eea\u8868\u76d8\u56fe",pictorialBar:"\u8c61\u5f62\u67f1\u56fe",themeRiver:"\u4e3b\u9898\u6cb3\u6d41\u56fe",sunburst:"\u65ed\u65e5\u56fe"}},aria:{general:{withTitle:"\u8fd9\u662f\u4e00\u4e2a\u5173\u4e8e\u201c{title}\u201d\u7684\u56fe\u8868\u3002",withoutTitle:"\u8fd9\u662f\u4e00\u4e2a\u56fe\u8868\uff0c"},series:{single:{prefix:"",withName:"\u56fe\u8868\u7c7b\u578b\u662f{seriesType}\uff0c\u8868\u793a{seriesName}\u3002",withoutName:"\u56fe\u8868\u7c7b\u578b\u662f{seriesType}\u3002"},multiple:{prefix:"\u5b83\u7531{seriesCount}\u4e2a\u56fe\u8868\u7cfb\u5217\u7ec4\u6210\u3002",withName:"\u7b2c{seriesId}\u4e2a\u7cfb\u5217\u662f\u4e00\u4e2a\u8868\u793a{seriesName}\u7684{seriesType}\uff0c",withoutName:"\u7b2c{seriesId}\u4e2a\u7cfb\u5217\u662f\u4e00\u4e2a{seriesType}\uff0c",separator:{middle:"\uff1b",end:"\u3002"}}},data:{allData:"\u5176\u6570\u636e\u662f\u2014\u2014",partialData:"\u5176\u4e2d\uff0c\u524d{displayCnt}\u9879\u662f\u2014\u2014",withName:"{name}\u7684\u6570\u636e\u662f{value}",withoutName:"{value}",separator:{middle:"\uff0c",end:""}}}});var Fd=1e3,qd=6e4,jd=36e5,zd=864e5,Hd=31536e6,Ud={year:"{yyyy}",month:"{MMM}",day:"{d}",hour:"{HH}:{mm}",minute:"{HH}:{mm}",second:"{HH}:{mm}:{ss}",millisecond:"{hh}:{mm}:{ss} {SSS}",none:"{yyyy}-{MM}-{dd} {hh}:{mm}:{ss} {SSS}"},Wd="{yyyy}-{MM}-{dd}",Kd={year:"{yyyy}",month:"{yyyy}-{MM}",day:Wd,hour:"{yyyy}-{MM}-{dd} "+Ud.hour,minute:"{yyyy}-{MM}-{dd} "+Ud.minute,second:"{yyyy}-{MM}-{dd} "+Ud.second,millisecond:Ud.none},Xd=["year","month","day","hour","minute","second","millisecond"],Yd=["year","half-year","quarter","month","week","half-week","day","half-day","quarter-day","hour","minute","second","millisecond"];function Zd(e,t){return"0000".substr(0,t-(e+="").length)+e}function Qd(e){switch(e){case"half-year":case"quarter":return"month";case"week":case"half-week":return"day";case"half-day":case"quarter-day":return"hour";default:return e}}function $d(e){return e===Qd(e)}function Jd(e,t,r,i){var n=zi(e),a=n[rh(r)](),s=n[ih(r)]()+1,o=Math.floor((s-1)/4)+1,u=n[nh(r)](),c=n["get"+(r?"UTC":"")+"Day"](),d=n[ah(r)](),h=(d-1)%12+1,l=n[sh(r)](),f=n[oh(r)](),p=n[uh(r)](),v=(i instanceof Md?i:function(e){return Rd[e]}(i||Vd)||Rd.EN).getModel("time"),m=v.get("month"),g=v.get("monthAbbr"),y=v.get("dayOfWeek"),b=v.get("dayOfWeekAbbr");return(t||"").replace(/{yyyy}/g,a+"").replace(/{yy}/g,a%100+"").replace(/{Q}/g,o+"").replace(/{MMMM}/g,m[s-1]).replace(/{MMM}/g,g[s-1]).replace(/{MM}/g,Zd(s,2)).replace(/{M}/g,s+"").replace(/{dd}/g,Zd(u,2)).replace(/{d}/g,u+"").replace(/{eeee}/g,y[c]).replace(/{ee}/g,b[c]).replace(/{e}/g,c+"").replace(/{HH}/g,Zd(d,2)).replace(/{H}/g,d+"").replace(/{hh}/g,Zd(h+"",2)).replace(/{h}/g,h+"").replace(/{mm}/g,Zd(l,2)).replace(/{m}/g,l+"").replace(/{ss}/g,Zd(f,2)).replace(/{s}/g,f+"").replace(/{SSS}/g,Zd(p,3)).replace(/{S}/g,p+"")}function eh(e,t){var r=zi(e),i=r[ih(t)]()+1,n=r[nh(t)](),a=r[ah(t)](),s=r[sh(t)](),o=r[oh(t)](),u=0===r[uh(t)](),c=u&&0===o,d=c&&0===s,h=d&&0===a,l=h&&1===n;return l&&1===i?"year":l?"month":h?"day":d?"hour":c?"minute":u?"second":"millisecond"}function th(e,t,r){var i="number"===typeof e?zi(e):e;switch(t=t||eh(e,r)){case"year":return i[rh(r)]();case"half-year":return i[ih(r)]()>=6?1:0;case"quarter":return Math.floor((i[ih(r)]()+1)/4);case"month":return i[ih(r)]();case"day":return i[nh(r)]();case"half-day":return i[ah(r)]()/24;case"hour":return i[ah(r)]();case"minute":return i[sh(r)]();case"second":return i[oh(r)]();case"millisecond":return i[uh(r)]()}}function rh(e){return e?"getUTCFullYear":"getFullYear"}function ih(e){return e?"getUTCMonth":"getMonth"}function nh(e){return e?"getUTCDate":"getDate"}function ah(e){return e?"getUTCHours":"getHours"}function sh(e){return e?"getUTCMinutes":"getMinutes"}function oh(e){return e?"getUTCSeconds":"getSeconds"}function uh(e){return e?"getUTCSeconds":"getSeconds"}function ch(e){return e?"setUTCFullYear":"setFullYear"}function dh(e){return e?"setUTCMonth":"setMonth"}function hh(e){return e?"setUTCDate":"setDate"}function lh(e){return e?"setUTCHours":"setHours"}function fh(e){return e?"setUTCMinutes":"setMinutes"}function ph(e){return e?"setUTCSeconds":"setSeconds"}function vh(e){return e?"setUTCSeconds":"setSeconds"}function mh(e){if(!Yi(e))return H(e)?e:"-";var t=(e+"").split(".");return t[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(t.length>1?"."+t[1]:"")}function gh(e,t){return e=(e||"").toLowerCase().replace(/-(.)/g,(function(e,t){return t.toUpperCase()})),t&&e&&(e=e.charAt(0).toUpperCase()+e.slice(1)),e}var yh=re,bh=/([&<>"'])/g,xh={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function kh(e){return null==e?"":(e+"").replace(bh,(function(e,t){return xh[t]}))}function wh(e,t,r){function i(e){return e&&ne(e)?e:"-"}function n(e){return!(null==e||isNaN(e)||!isFinite(e))}var a="time"===t,s=e instanceof Date;if(a||s){var o=a?zi(e):e;if(!isNaN(+o))return Jd(o,"{yyyy}-{MM}-{dd} {hh}:{mm}:{ss}",r);if(s)return"-"}if("ordinal"===t)return U(e)?i(e):W(e)&&n(e)?e+"":"-";var u=Xi(e);return n(u)?mh(u):U(e)?i(e):"-"}var _h=["a","b","c","d","e","f","g"],Sh=function(e,t){return"{"+e+(null==t?"":t)+"}"};function Oh(e,t,r){j(t)||(t=[t]);var i=t.length;if(!i)return"";for(var n=t[0].$vars||[],a=0;a<n.length;a++){var s=_h[a];e=e.replace(Sh(s),Sh(s,0))}for(var o=0;o<i;o++)for(var u=0;u<n.length;u++){var c=t[o][n[u]];e=e.replace(Sh(_h[u],o),r?kh(c):c)}return e}function Th(e,t){return t=t||"transparent",H(e)?e:K(e)&&e.colorStops&&(e.colorStops[0]||{}).color||t}function Ch(e,t){if("_blank"===t||"blank"===t){var r=window.open();r.opener=null,r.location.href=e}else window.open(e,t)}var Ih=L,Mh=["left","right","top","bottom","width","height"],Ah=[["width","left","right"],["height","top","bottom"]];function Eh(e,t,r,i,n){var a=0,s=0;null==i&&(i=1/0),null==n&&(n=1/0);var o=0;t.eachChild((function(u,c){var d,h,l=u.getBoundingRect(),f=t.childAt(c+1),p=f&&f.getBoundingRect();if("horizontal"===e){var v=l.width+(p?-p.x+l.x:0);(d=a+v)>i||u.newline?(a=0,d=v,s+=o+r,o=l.height):o=Math.max(o,l.height)}else{var m=l.height+(p?-p.y+l.y:0);(h=s+m)>n||u.newline?(a+=o+r,s=0,h=m,o=l.width):o=Math.max(o,l.width)}u.newline||(u.x=a,u.y=s,u.markRedraw(),"horizontal"===e?a=d+r:s=h+r)}))}var Nh=Eh;q(Eh,"vertical"),q(Eh,"horizontal");function Ph(e,t,r){r=yh(r||0);var i=t.width,n=t.height,a=Di(e.left,i),s=Di(e.top,n),o=Di(e.right,i),u=Di(e.bottom,n),c=Di(e.width,i),d=Di(e.height,n),h=r[2]+r[0],l=r[1]+r[3],f=e.aspect;switch(isNaN(c)&&(c=i-o-l-a),isNaN(d)&&(d=n-u-h-s),null!=f&&(isNaN(c)&&isNaN(d)&&(f>i/n?c=.8*i:d=.8*n),isNaN(c)&&(c=f*d),isNaN(d)&&(d=c/f)),isNaN(a)&&(a=i-o-c-l),isNaN(s)&&(s=n-u-d-h),e.left||e.right){case"center":a=i/2-c/2-r[3];break;case"right":a=i-c-l}switch(e.top||e.bottom){case"middle":case"center":s=n/2-d/2-r[0];break;case"bottom":s=n-d-h}a=a||0,s=s||0,isNaN(c)&&(c=i-l-a-(o||0)),isNaN(d)&&(d=n-h-s-(u||0));var p=new _r(a+r[3],s+r[0],c,d);return p.margin=r,p}function Dh(e,t,r,i,n){var a=!n||!n.hv||n.hv[0],s=!n||!n.hv||n.hv[1],o=n&&n.boundingMode||"all";if(a||s){var u;if("raw"===o)u="group"===e.type?new _r(0,0,+t.width||0,+t.height||0):e.getBoundingRect();else if(u=e.getBoundingRect(),e.needLocalTransform()){var c=e.getLocalTransform();(u=u.clone()).applyTransform(c)}var d=Ph(M({width:u.width,height:u.height},t),r,i),h=a?d.x-u.x:0,l=s?d.y-u.y:0;"raw"===o?(e.x=h,e.y=l):(e.x+=h,e.y+=l),e.markRedraw()}}function Lh(e){var t=e.layoutMode||e.constructor.layoutMode;return K(t)?t:t?{type:t}:null}function Bh(e,t,r){var i=r&&r.ignoreSize;!j(i)&&(i=[i,i]);var n=s(Ah[0],0),a=s(Ah[1],1);function s(r,n){var a={},s=0,c={},d=0;if(Ih(r,(function(t){c[t]=e[t]})),Ih(r,(function(e){o(t,e)&&(a[e]=c[e]=t[e]),u(a,e)&&s++,u(c,e)&&d++})),i[n])return u(t,r[1])?c[r[2]]=null:u(t,r[2])&&(c[r[1]]=null),c;if(2!==d&&s){if(s>=2)return a;for(var h=0;h<r.length;h++){var l=r[h];if(!o(a,l)&&o(e,l)){a[l]=e[l];break}}return a}return c}function o(e,t){return e.hasOwnProperty(t)}function u(e,t){return null!=e[t]&&"auto"!==e[t]}function c(e,t,r){Ih(e,(function(e){t[e]=r[e]}))}c(Ah[0],e,n),c(Ah[1],e,a)}function Rh(e){return Vh({},e)}function Vh(e,t){return t&&e&&Ih(Mh,(function(r){t.hasOwnProperty(r)&&(e[r]=t[r])})),e}var Gh=fn(),Fh=function(e){function t(t,r,i){var n=e.call(this,t,r,i)||this;return n.uid=Ed("ec_cpt_model"),n}return a(t,e),t.prototype.init=function(e,t,r){this.mergeDefaultAndTheme(e,r)},t.prototype.mergeDefaultAndTheme=function(e,t){var r=Lh(this),i=r?Rh(e):{};T(e,t.getTheme().get(this.mainType)),T(e,this.getDefaultOption()),r&&Bh(e,i,r)},t.prototype.mergeOption=function(e,t){T(this.option,e,!0);var r=Lh(this);r&&Bh(this.option,e,r)},t.prototype.optionUpdated=function(e,t){},t.prototype.getDefaultOption=function(){var e=this.constructor;if(!function(e){return!(!e||!e[Sn])}(e))return e.defaultOption;var t=Gh(this);if(!t.defaultOption){for(var r=[],i=e;i;){var n=i.prototype.defaultOption;n&&r.push(n),i=i.superClass}for(var a={},s=r.length-1;s>=0;s--)a=T(a,r[s],!0);t.defaultOption=a}return t.defaultOption},t.prototype.getReferringComponents=function(e,t){var r=e+"Index",i=e+"Id";return bn(this.ecModel,e,{index:this.get(r,!0),id:this.get(i,!0)},t)},t.prototype.getBoxLayoutParams=function(){var e=this;return{left:e.get("left"),top:e.get("top"),right:e.get("right"),bottom:e.get("bottom"),width:e.get("width"),height:e.get("height")}},t.protoInitialize=function(){var e=t.prototype;e.type="component",e.id="",e.name="",e.mainType="",e.subType="",e.componentIndex=0}(),t}(Md);In(Fh,Md),Nn(Fh),function(e){var t={};e.registerSubTypeDefaulter=function(e,r){var i=On(e);t[i.main]=r},e.determineSubType=function(r,i){var n=i.type;if(!n){var a=On(r).main;e.hasSubTypes(r)&&t[a]&&(n=t[a](i))}return n}}(Fh),function(e,t){function r(e,t){return e[t]||(e[t]={predecessor:[],successor:[]}),e[t]}e.topologicalTravel=function(e,i,n,a){if(e.length){var s=function(e){var i={},n=[];return L(e,(function(a){var s=r(i,a),o=function(e,t){var r=[];return L(e,(function(e){E(t,e)>=0&&r.push(e)})),r}(s.originalDeps=t(a),e);s.entryCount=o.length,0===s.entryCount&&n.push(a),L(o,(function(e){E(s.predecessor,e)<0&&s.predecessor.push(e);var t=r(i,e);E(t.successor,e)<0&&t.successor.push(a)}))})),{graph:i,noEntryList:n}}(i),o=s.graph,u=s.noEntryList,c={};for(L(e,(function(e){c[e]=!0}));u.length;){var d=u.pop(),h=o[d],l=!!c[d];l&&(n.call(a,d,h.originalDeps.slice()),delete c[d]),L(h.successor,l?p:f)}L(c,(function(){throw new Error("")}))}function f(e){o[e].entryCount--,0===o[e].entryCount&&u.push(e)}function p(e){c[e]=!0,f(e)}}}(Fh,(function(e){var t=[];L(Fh.getClassesByMainType(e),(function(e){t=t.concat(e.dependencies||e.prototype.dependencies||[])})),t=B(t,(function(e){return On(e).main})),"dataset"!==e&&E(t,"dataset")<=0&&t.unshift("dataset");return t}));var qh=Fh,jh="";"undefined"!==typeof navigator&&(jh=navigator.platform||"");var zh="rgba(0, 0, 0, 0.2)",Hh={darkMode:"auto",color:["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc"],gradientColor:["#f6efa6","#d88273","#bf444c"],aria:{decal:{decals:[{color:zh,dashArrayX:[1,0],dashArrayY:[2,5],symbolSize:1,rotation:Math.PI/6},{color:zh,symbol:"circle",dashArrayX:[[8,8],[0,8,8,0]],dashArrayY:[6,0],symbolSize:.8},{color:zh,dashArrayX:[1,0],dashArrayY:[4,3],rotation:-Math.PI/4},{color:zh,dashArrayX:[[6,6],[0,6,6,0]],dashArrayY:[6,0]},{color:zh,dashArrayX:[[1,0],[1,6]],dashArrayY:[1,0,6,0],rotation:Math.PI/4},{color:zh,symbol:"triangle",dashArrayX:[[9,9],[0,9,9,0]],dashArrayY:[7,2],symbolSize:.75}]}},textStyle:{fontFamily:jh.match(/^Win/)?"Microsoft YaHei":"sans-serif",fontSize:12,fontStyle:"normal",fontWeight:"normal"},blendMode:null,stateAnimation:{duration:300,easing:"cubicOut"},animation:"auto",animationDuration:1e3,animationDurationUpdate:500,animationEasing:"cubicInOut",animationEasingUpdate:"cubicInOut",animationThreshold:2e3,progressiveThreshold:3e3,progressive:400,hoverLayerThreshold:3e3,useUTC:!1},Uh=ce(["tooltip","label","itemName","itemId","seriesName"]),Wh="original",Kh="arrayRows",Xh="objectRows",Yh="keyedColumns",Zh="typedArray",Qh="unknown",$h="column",Jh="row",el=1,tl=2,rl=3,il=fn();function nl(e,t,r){var i={},n=sl(t);if(!n||!e)return i;var a,s,o=[],u=[],c=t.ecModel,d=il(c).datasetMap,h=n.uid+"_"+r.seriesLayoutBy;L(e=e.slice(),(function(t,r){var n=K(t)?t:e[r]={name:t};"ordinal"===n.type&&null==a&&(a=r,s=p(n)),i[n.name]=[]}));var l=d.get(h)||d.set(h,{categoryWayDim:s,valueWayDim:0});function f(e,t,r){for(var i=0;i<r;i++)e.push(t+i)}function p(e){var t=e.dimsDef;return t?t.length:1}return L(e,(function(e,t){var r=e.name,n=p(e);if(null==a){var s=l.valueWayDim;f(i[r],s,n),f(u,s,n),l.valueWayDim+=n}else if(a===t)f(i[r],0,n),f(o,0,n);else{s=l.categoryWayDim;f(i[r],s,n),f(u,s,n),l.categoryWayDim+=n}})),o.length&&(i.itemName=o),u.length&&(i.seriesName=u),i}function al(e,t,r){var i={};if(!sl(e))return i;var n,a=t.sourceFormat,s=t.dimensionsDefine;a!==Xh&&a!==Yh||L(s,(function(e,t){"name"===(K(e)?e.name:e)&&(n=t)}));var o=function(){for(var e={},i={},o=[],u=0,c=Math.min(5,r);u<c;u++){var d=ul(t.data,a,t.seriesLayoutBy,s,t.startIndex,u);o.push(d);var h=d===rl;if(h&&null==e.v&&u!==n&&(e.v=u),(null==e.n||e.n===e.v||!h&&o[e.n]===rl)&&(e.n=u),l(e)&&o[e.n]!==rl)return e;h||(d===tl&&null==i.v&&u!==n&&(i.v=u),null!=i.n&&i.n!==i.v||(i.n=u))}function l(e){return null!=e.v&&null!=e.n}return l(e)?e:l(i)?i:null}();if(o){i.value=[o.v];var u=null!=n?n:o.n;i.itemName=[u],i.seriesName=[u]}return i}function sl(e){if(!e.get("data",!0))return bn(e.ecModel,"dataset",{index:e.get("datasetIndex",!0),id:e.get("datasetId",!0)},gn).models[0]}function ol(e,t){return ul(e.data,e.sourceFormat,e.seriesLayoutBy,e.dimensionsDefine,e.startIndex,t)}function ul(e,t,r,i,n,a){var s,o,u;if(Y(e))return rl;if(i){var c=i[a];K(c)?(o=c.name,u=c.type):H(c)&&(o=c)}if(null!=u)return"ordinal"===u?el:rl;if(t===Kh){var d=e;if(r===Jh){for(var h=d[a],l=0;l<(h||[]).length&&l<5;l++)if(null!=(s=y(h[n+l])))return s}else for(l=0;l<d.length&&l<5;l++){var f=d[n+l];if(f&&null!=(s=y(f[a])))return s}}else if(t===Xh){var p=e;if(!o)return rl;for(l=0;l<p.length&&l<5;l++){if((m=p[l])&&null!=(s=y(m[o])))return s}}else if(t===Yh){if(!o)return rl;if(!(h=e[o])||Y(h))return rl;for(l=0;l<h.length&&l<5;l++)if(null!=(s=y(h[l])))return s}else if(t===Wh){var v=e;for(l=0;l<v.length&&l<5;l++){var m,g=an(m=v[l]);if(!j(g))return rl;if(null!=(s=y(g[a])))return s}}function y(e){var t=H(e);return null!=e&&isFinite(e)&&""!==e?t?tl:rl:t&&"-"!==e?el:void 0}return rl}var cl=ce();var dl,hl,ll,fl=fn(),pl=fn(),vl=function(){function e(){}return e.prototype.getColorFromPalette=function(e,t,r){var i=tn(this.get("color",!0)),n=this.get("colorLayer",!0);return gl(this,fl,i,n,e,t,r)},e.prototype.clearColorPalette=function(){var e,t;(t=fl)(e=this).paletteIdx=0,t(e).paletteNameMap={}},e}();function ml(e,t,r,i){var n=tn(e.get(["aria","decal","decals"]));return gl(e,pl,n,null,t,r,i)}function gl(e,t,r,i,n,a,s){var o=t(a=a||e),u=o.paletteIdx||0,c=o.paletteNameMap=o.paletteNameMap||{};if(c.hasOwnProperty(n))return c[n];var d=null!=s&&i?function(e,t){for(var r=e.length,i=0;i<r;i++)if(e[i].length>t)return e[i];return e[r-1]}(i,s):r;if((d=d||r)&&d.length){var h=d[u];return n&&(c[n]=h),o.paletteIdx=(u+1)%d.length,h}}var yl=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.init=function(e,t,r,i,n,a){i=i||{},this.option=null,this._theme=new Md(i),this._locale=new Md(n),this._optionManager=a},t.prototype.setOption=function(e,t,r){var i=kl(t);this._optionManager.setOption(e,r,i),this._resetOption(null,i)},t.prototype.resetOption=function(e,t){return this._resetOption(e,kl(t))},t.prototype._resetOption=function(e,t){var r=!1,i=this._optionManager;if(!e||"recreate"===e){var n=i.mountOption("recreate"===e);this.option&&"recreate"!==e?(this.restoreData(),this._mergeOption(n,t)):ll(this,n),r=!0}if("timeline"!==e&&"media"!==e||this.restoreData(),!e||"recreate"===e||"timeline"===e){var a=i.getTimelineOption(this);a&&(r=!0,this._mergeOption(a,t))}if(!e||"recreate"===e||"media"===e){var s=i.getMediaOption(this);s.length&&L(s,(function(e){r=!0,this._mergeOption(e,t)}),this)}return r},t.prototype.mergeOption=function(e){this._mergeOption(e,null)},t.prototype._mergeOption=function(e,t){var r=this.option,i=this._componentsMap,n=this._componentsCount,a=[],s=ce(),o=t&&t.replaceMergeMainTypeMap;il(this).datasetMap=ce(),L(e,(function(e,t){null!=e&&(qh.hasClass(t)?t&&(a.push(t),s.set(t,!0)):r[t]=null==r[t]?O(e):T(r[t],e,!0))})),o&&o.each((function(e,t){qh.hasClass(t)&&!s.get(t)&&(a.push(t),s.set(t,!0))})),qh.topologicalTravel(a,qh.getAllClassMainTypes(),(function(t){var a=function(e,t,r){var i=cl.get(t);if(!i)return r;var n=i(e);return n?r.concat(n):r}(this,t,tn(e[t])),s=i.get(t),u=s?o&&o.get(t)?"replaceMerge":"normalMerge":"replaceAll",c=sn(s,a,u);(function(e,t,r){L(e,(function(e){var i=e.newOption;K(i)&&(e.keyInfo.mainType=t,e.keyInfo.subType=function(e,t,r,i){return t.type?t.type:r?r.subType:i.determineSubType(e,t)}(t,i,e.existing,r))}))})(c,t,qh),r[t]=null,i.set(t,null),n.set(t,0);var d=[],h=[],l=0;L(c,(function(e,r){var i=e.existing,n=e.newOption;if(n){var a="series"===t,s=qh.getClass(t,e.keyInfo.subType,!a);if(!s)return;if(i&&i.constructor===s)i.name=e.keyInfo.name,i.mergeOption(n,this),i.optionUpdated(n,!1);else{var o=I({componentIndex:r},e.keyInfo);I(i=new s(n,this,this,o),o),e.brandNew&&(i.__requireNewView=!0),i.init(n,this,this),i.optionUpdated(null,!0)}}else i&&(i.mergeOption({},this),i.optionUpdated({},!1));i?(d.push(i.option),h.push(i),l++):(d.push(void 0),h.push(void 0))}),this),r[t]=d,i.set(t,h),n.set(t,l),"series"===t&&dl(this)}),this),this._seriesIndices||dl(this)},t.prototype.getOption=function(){var e=O(this.option);return L(e,(function(t,r){if(qh.hasClass(r)){for(var i=tn(t),n=i.length,a=!1,s=n-1;s>=0;s--)i[s]&&!hn(i[s])?a=!0:(i[s]=null,!a&&n--);i.length=n,e[r]=i}})),delete e["\0_ec_inner"],e},t.prototype.getTheme=function(){return this._theme},t.prototype.getLocaleModel=function(){return this._locale},t.prototype.getLocale=function(e){return this.getLocaleModel().get(e)},t.prototype.setUpdatePayload=function(e){this._payload=e},t.prototype.getUpdatePayload=function(){return this._payload},t.prototype.getComponent=function(e,t){var r=this._componentsMap.get(e);if(r){var i=r[t||0];if(i)return i;if(null==t)for(var n=0;n<r.length;n++)if(r[n])return r[n]}},t.prototype.queryComponents=function(e){var t=e.mainType;if(!t)return[];var r,i=e.index,n=e.id,a=e.name,s=this._componentsMap.get(t);return s&&s.length?(null!=i?(r=[],L(tn(i),(function(e){s[e]&&r.push(s[e])}))):r=null!=n?bl("id",n,s):null!=a?bl("name",a,s):V(s,(function(e){return!!e})),xl(r,e)):[]},t.prototype.findComponents=function(e){var t,r=e.query,i=e.mainType,n=function(e){var t=i+"Index",r=i+"Id",n=i+"Name";return!e||null==e[t]&&null==e[r]&&null==e[n]?null:{mainType:i,index:e[t],id:e[r],name:e[n]}}(r),a=n?this.queryComponents(n):V(this._componentsMap.get(i),(function(e){return!!e}));return t=xl(a,e),e.filter?V(t,e.filter):t},t.prototype.eachComponent=function(e,t,r){var i=this._componentsMap;if(z(e)){var n=t,a=e;i.each((function(e,t){for(var r=0;e&&r<e.length;r++){var i=e[r];i&&a.call(n,t,i,i.componentIndex)}}))}else for(var s=H(e)?i.get(e):K(e)?this.findComponents(e):null,o=0;s&&o<s.length;o++){var u=s[o];u&&t.call(r,u,u.componentIndex)}},t.prototype.getSeriesByName=function(e){var t=cn(e,null);return V(this._componentsMap.get("series"),(function(e){return!!e&&null!=t&&e.name===t}))},t.prototype.getSeriesByIndex=function(e){return this._componentsMap.get("series")[e]},t.prototype.getSeriesByType=function(e){return V(this._componentsMap.get("series"),(function(t){return!!t&&t.subType===e}))},t.prototype.getSeries=function(){return V(this._componentsMap.get("series").slice(),(function(e){return!!e}))},t.prototype.getSeriesCount=function(){return this._componentsCount.get("series")},t.prototype.eachSeries=function(e,t){hl(this),L(this._seriesIndices,(function(r){var i=this._componentsMap.get("series")[r];e.call(t,i,r)}),this)},t.prototype.eachRawSeries=function(e,t){L(this._componentsMap.get("series"),(function(r){r&&e.call(t,r,r.componentIndex)}))},t.prototype.eachSeriesByType=function(e,t,r){hl(this),L(this._seriesIndices,(function(i){var n=this._componentsMap.get("series")[i];n.subType===e&&t.call(r,n,i)}),this)},t.prototype.eachRawSeriesByType=function(e,t,r){return L(this.getSeriesByType(e),t,r)},t.prototype.isSeriesFiltered=function(e){return hl(this),null==this._seriesIndicesMap.get(e.componentIndex)},t.prototype.getCurrentSeriesIndices=function(){return(this._seriesIndices||[]).slice()},t.prototype.filterSeries=function(e,t){hl(this);var r=[];L(this._seriesIndices,(function(i){var n=this._componentsMap.get("series")[i];e.call(t,n,i)&&r.push(i)}),this),this._seriesIndices=r,this._seriesIndicesMap=ce(r)},t.prototype.restoreData=function(e){dl(this);var t=this._componentsMap,r=[];t.each((function(e,t){qh.hasClass(t)&&r.push(t)})),qh.topologicalTravel(r,qh.getAllClassMainTypes(),(function(r){L(t.get(r),(function(t){!t||"series"===r&&function(e,t){if(t){var r=t.seriesIndex,i=t.seriesId,n=t.seriesName;return null!=r&&e.componentIndex!==r||null!=i&&e.id!==i||null!=n&&e.name!==n}}(t,e)||t.restoreData()}))}))},t.internalField=(dl=function(e){var t=e._seriesIndices=[];L(e._componentsMap.get("series"),(function(e){e&&t.push(e.componentIndex)})),e._seriesIndicesMap=ce(t)},hl=function(e){},void(ll=function(e,t){e.option={},e.option["\0_ec_inner"]=1,e._componentsMap=ce({series:[]}),e._componentsCount=ce();var r=t.aria;K(r)&&null==r.enabled&&(r.enabled=!0),function(e,t){var r=e.color&&!e.colorLayer;L(t,(function(t,i){"colorLayer"===i&&r||qh.hasClass(i)||("object"===typeof t?e[i]=e[i]?T(e[i],t,!1):O(t):null==e[i]&&(e[i]=t))}))}(t,e._theme.option),T(t,Hh,!1),e._mergeOption(t,null)})),t}(Md);function bl(e,t,r){if(j(t)){var i=ce();return L(t,(function(e){null!=e&&(null!=cn(e,null)&&i.set(e,!0))})),V(r,(function(t){return t&&i.get(t[e])}))}var n=cn(t,null);return V(r,(function(t){return t&&null!=n&&t[e]===n}))}function xl(e,t){return t.hasOwnProperty("subType")?V(e,(function(e){return e&&e.subType===t.subType})):e}function kl(e){var t=ce();return e&&L(tn(e.replaceMerge),(function(e){t.set(e,!0)})),{replaceMergeMainTypeMap:t}}P(yl,vl);var wl=yl,_l=["getDom","getZr","getWidth","getHeight","getDevicePixelRatio","dispatchAction","isDisposed","on","off","getDataURL","getConnectedDataURL","getOption","getId","updateLabelLayout"],Sl=function(e){L(_l,(function(t){this[t]=F(e[t],e)}),this)},Ol={},Tl=function(){function e(){this._coordinateSystems=[]}return e.prototype.create=function(e,t){var r=[];L(Ol,(function(i,n){var a=i.create(e,t);r=r.concat(a||[])})),this._coordinateSystems=r},e.prototype.update=function(e,t){L(this._coordinateSystems,(function(r){r.update&&r.update(e,t)}))},e.prototype.getCoordinateSystems=function(){return this._coordinateSystems.slice()},e.register=function(e,t){Ol[e]=t},e.get=function(e){return Ol[e]},e}(),Cl=/^(min|max)?(.+)$/;function Il(e,t,r){var i={width:t,height:r,aspectratio:t/r},n=!0;return L(e,(function(e,t){var r=t.match(Cl);if(r&&r[1]&&r[2]){var a=r[1],s=r[2].toLowerCase();(function(e,t,r){return"min"===r?e>=t:"max"===r?e<=t:e===t})(i[s],e,a)||(n=!1)}})),n}var Ml=function(){function e(e){this._timelineOptions=[],this._mediaList=[],this._currentMediaIndices=[],this._api=e}return e.prototype.setOption=function(e,t,r){e&&(L(tn(e.series),(function(e){e&&e.data&&Y(e.data)&&se(e.data)})),L(tn(e.dataset),(function(e){e&&e.source&&Y(e.source)&&se(e.source)}))),e=O(e);var i=this._optionBackup,n=function(e,t,r){var i,n,a=[],s=e.baseOption,o=e.timeline,u=e.options,c=e.media,d=!!e.media,h=!!(u||o||s&&s.timeline);s?(n=s).timeline||(n.timeline=o):((h||d)&&(e.options=e.media=null),n=e);d&&j(c)&&L(c,(function(e){e&&e.option&&(e.query?a.push(e):i||(i=e))}));function l(e){L(t,(function(t){t(e,r)}))}return l(n),L(u,(function(e){return l(e)})),L(a,(function(e){return l(e.option)})),{baseOption:n,timelineOptions:u||[],mediaDefault:i,mediaList:a}}(e,t,!i);this._newBaseOption=n.baseOption,i?(n.timelineOptions.length&&(i.timelineOptions=n.timelineOptions),n.mediaList.length&&(i.mediaList=n.mediaList),n.mediaDefault&&(i.mediaDefault=n.mediaDefault)):this._optionBackup=n},e.prototype.mountOption=function(e){var t=this._optionBackup;return this._timelineOptions=t.timelineOptions,this._mediaList=t.mediaList,this._mediaDefault=t.mediaDefault,this._currentMediaIndices=[],O(e?t.baseOption:this._newBaseOption)},e.prototype.getTimelineOption=function(e){var t,r=this._timelineOptions;if(r.length){var i=e.getComponent("timeline");i&&(t=O(r[i.getCurrentIndex()]))}return t},e.prototype.getMediaOption=function(e){var t,r,i=this._api.getWidth(),n=this._api.getHeight(),a=this._mediaList,s=this._mediaDefault,o=[],u=[];if(!a.length&&!s)return u;for(var c=0,d=a.length;c<d;c++)Il(a[c].query,i,n)&&o.push(c);return!o.length&&s&&(o=[-1]),o.length&&(t=o,r=this._currentMediaIndices,t.join(",")!==r.join(","))&&(u=B(o,(function(e){return O(-1===e?s.option:a[e].option)}))),this._currentMediaIndices=o,u},e}(),Al=L,El=K,Nl=["areaStyle","lineStyle","nodeStyle","linkStyle","chordStyle","label","labelLine"];function Pl(e){var t=e&&e.itemStyle;if(t)for(var r=0,i=Nl.length;r<i;r++){var n=Nl[r],a=t.normal,s=t.emphasis;a&&a[n]&&(e[n]=e[n]||{},e[n].normal?T(e[n].normal,a[n]):e[n].normal=a[n],a[n]=null),s&&s[n]&&(e[n]=e[n]||{},e[n].emphasis?T(e[n].emphasis,s[n]):e[n].emphasis=s[n],s[n]=null)}}function Dl(e,t,r){if(e&&e[t]&&(e[t].normal||e[t].emphasis)){var i=e[t].normal,n=e[t].emphasis;i&&(r?(e[t].normal=e[t].emphasis=null,M(e[t],i)):e[t]=i),n&&(e.emphasis=e.emphasis||{},e.emphasis[t]=n,n.focus&&(e.emphasis.focus=n.focus),n.blurScope&&(e.emphasis.blurScope=n.blurScope))}}function Ll(e){Dl(e,"itemStyle"),Dl(e,"lineStyle"),Dl(e,"areaStyle"),Dl(e,"label"),Dl(e,"labelLine"),Dl(e,"upperLabel"),Dl(e,"edgeLabel")}function Bl(e,t){var r=El(e)&&e[t],i=El(r)&&r.textStyle;if(i){0;for(var n=0,a=nn.length;n<a;n++){var s=nn[n];i.hasOwnProperty(s)&&(r[s]=i[s])}}}function Rl(e){e&&(Ll(e),Bl(e,"label"),e.emphasis&&Bl(e.emphasis,"label"))}function Vl(e){return j(e)?e:e?[e]:[]}function Gl(e){return(j(e)?e[0]:e)||{}}function Fl(e,t){Al(Vl(e.series),(function(e){El(e)&&function(e){if(El(e)){Pl(e),Ll(e),Bl(e,"label"),Bl(e,"upperLabel"),Bl(e,"edgeLabel"),e.emphasis&&(Bl(e.emphasis,"label"),Bl(e.emphasis,"upperLabel"),Bl(e.emphasis,"edgeLabel"));var t=e.markPoint;t&&(Pl(t),Rl(t));var r=e.markLine;r&&(Pl(r),Rl(r));var i=e.markArea;i&&Rl(i);var n=e.data;if("graph"===e.type){n=n||e.nodes;var a=e.links||e.edges;if(a&&!Y(a))for(var s=0;s<a.length;s++)Rl(a[s]);L(e.categories,(function(e){Ll(e)}))}if(n&&!Y(n))for(s=0;s<n.length;s++)Rl(n[s]);if((t=e.markPoint)&&t.data){var o=t.data;for(s=0;s<o.length;s++)Rl(o[s])}if((r=e.markLine)&&r.data){var u=r.data;for(s=0;s<u.length;s++)j(u[s])?(Rl(u[s][0]),Rl(u[s][1])):Rl(u[s])}"gauge"===e.type?(Bl(e,"axisLabel"),Bl(e,"title"),Bl(e,"detail")):"treemap"===e.type?(Dl(e.breadcrumb,"itemStyle"),L(e.levels,(function(e){Ll(e)}))):"tree"===e.type&&Ll(e.leaves)}}(e)}));var r=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","parallelAxis","radar"];t&&r.push("valueAxis","categoryAxis","logAxis","timeAxis"),Al(r,(function(t){Al(Vl(e[t]),(function(e){e&&(Bl(e,"axisLabel"),Bl(e.axisPointer,"label"))}))})),Al(Vl(e.parallel),(function(e){var t=e&&e.parallelAxisDefault;Bl(t,"axisLabel"),Bl(t&&t.axisPointer,"label")})),Al(Vl(e.calendar),(function(e){Dl(e,"itemStyle"),Bl(e,"dayLabel"),Bl(e,"monthLabel"),Bl(e,"yearLabel")})),Al(Vl(e.radar),(function(e){Bl(e,"name"),e.name&&null==e.axisName&&(e.axisName=e.name,delete e.name),null!=e.nameGap&&null==e.axisNameGap&&(e.axisNameGap=e.nameGap,delete e.nameGap)})),Al(Vl(e.geo),(function(e){El(e)&&(Rl(e),Al(Vl(e.regions),(function(e){Rl(e)})))})),Al(Vl(e.timeline),(function(e){Rl(e),Dl(e,"label"),Dl(e,"itemStyle"),Dl(e,"controlStyle",!0);var t=e.data;j(t)&&L(t,(function(e){K(e)&&(Dl(e,"label"),Dl(e,"itemStyle"))}))})),Al(Vl(e.toolbox),(function(e){Dl(e,"iconStyle"),Al(e.feature,(function(e){Dl(e,"iconStyle")}))})),Bl(Gl(e.axisPointer),"label"),Bl(Gl(e.tooltip).axisPointer,"label")}function ql(e){e&&L(jl,(function(t){t[0]in e&&!(t[1]in e)&&(e[t[1]]=e[t[0]])}))}var jl=[["x","left"],["y","top"],["x2","right"],["y2","bottom"]],zl=["grid","geo","parallel","legend","toolbox","title","visualMap","dataZoom","timeline"],Hl=[["borderRadius","barBorderRadius"],["borderColor","barBorderColor"],["borderWidth","barBorderWidth"]];function Ul(e){var t=e&&e.itemStyle;if(t)for(var r=0;r<Hl.length;r++){var i=Hl[r][1],n=Hl[r][0];null!=t[i]&&(t[n]=t[i])}}function Wl(e){e&&"edge"===e.alignTo&&null!=e.margin&&null==e.edgeDistance&&(e.edgeDistance=e.margin)}function Kl(e){e&&e.downplay&&!e.blur&&(e.blur=e.downplay)}function Xl(e,t){if(e)for(var r=0;r<e.length;r++)t(e[r]),e[r]&&Xl(e[r].children,t)}function Yl(e,t){Fl(e,t),e.series=tn(e.series),L(e.series,(function(e){if(K(e)){var t=e.type;if("line"===t)null!=e.clipOverflow&&(e.clip=e.clipOverflow);else if("pie"===t||"gauge"===t){if(null!=e.clockWise&&(e.clockwise=e.clockWise),Wl(e.label),(n=e.data)&&!Y(n))for(var r=0;r<n.length;r++)Wl(n[r]);null!=e.hoverOffset&&(e.emphasis=e.emphasis||{},(e.emphasis.scaleSize=null)&&(e.emphasis.scaleSize=e.hoverOffset))}else if("gauge"===t){var i=function(e,t){for(var r=t.split(","),i=e,n=0;n<r.length&&null!=(i=i&&i[r[n]]);n++);return i}(e,"pointer.color");null!=i&&function(e,t,r,i){for(var n,a=t.split(","),s=e,o=0;o<a.length-1;o++)null==s[n=a[o]]&&(s[n]={}),s=s[n];(i||null==s[a[o]])&&(s[a[o]]=r)}(e,"itemStyle.color",i)}else if("bar"===t){var n;if(Ul(e),Ul(e.backgroundStyle),Ul(e.emphasis),(n=e.data)&&!Y(n))for(r=0;r<n.length;r++)"object"===typeof n[r]&&(Ul(n[r]),Ul(n[r]&&n[r].emphasis))}else if("sunburst"===t){var a=e.highlightPolicy;a&&(e.emphasis=e.emphasis||{},e.emphasis.focus||(e.emphasis.focus=a)),Kl(e),Xl(e.data,Kl)}else"graph"===t||"sankey"===t?function(e){e&&null!=e.focusNodeAdjacency&&(e.emphasis=e.emphasis||{},null==e.emphasis.focus&&(e.emphasis.focus="adjacency"))}(e):"map"===t&&(e.mapType&&!e.map&&(e.map=e.mapType),e.mapLocation&&M(e,e.mapLocation));null!=e.hoverAnimation&&(e.emphasis=e.emphasis||{},e.emphasis&&null==e.emphasis.scale&&(e.emphasis.scale=e.hoverAnimation)),ql(e)}})),e.dataRange&&(e.visualMap=e.dataRange),L(zl,(function(t){var r=e[t];r&&(j(r)||(r=[r]),L(r,(function(e){ql(e)})))}))}function Zl(e){L(e,(function(t,r){var i=[],n=[NaN,NaN],a=[t.stackResultDimension,t.stackedOverDimension],s=t.data,o=t.isStackedByIndex,u=s.map(a,(function(a,u,c){var d,h,l=s.get(t.stackedDimension,c);if(isNaN(l))return n;o?h=s.getRawIndex(c):d=s.get(t.stackedByDimension,c);for(var f=NaN,p=r-1;p>=0;p--){var v=e[p];if(o||(h=v.data.rawIndexOf(v.stackedByDimension,d)),h>=0){var m=v.data.getByRawIndex(v.stackResultDimension,h);if(l>=0&&m>0||l<=0&&m<0){l+=m,f=m;break}}}return i[0]=l,i[1]=f,i}));s.hostModel.setData(u),t.data=u}))}var Ql,$l,Jl,ef,tf,rf=function(e){this.data=e.data||(e.sourceFormat===Yh?{}:[]),this.sourceFormat=e.sourceFormat||Qh,this.seriesLayoutBy=e.seriesLayoutBy||$h,this.startIndex=e.startIndex||0,this.dimensionsDefine=e.dimensionsDefine,this.dimensionsDetectedCount=e.dimensionsDetectedCount,this.encodeDefine=e.encodeDefine,this.metaRawOption=e.metaRawOption};function nf(e){return e instanceof rf}function af(e,t,r,i){r=r||uf(e);var n=t.seriesLayoutBy,a=function(e,t,r,i,n){var a,s;if(!e)return{dimensionsDefine:cf(n),startIndex:s,dimensionsDetectedCount:a};if(t===Kh){var o=e;"auto"===i||null==i?df((function(e){null!=e&&"-"!==e&&(H(e)?null==s&&(s=1):s=0)}),r,o,10):s=W(i)?i:i?1:0,n||1!==s||(n=[],df((function(e,t){n[t]=null!=e?e+"":""}),r,o,1/0)),a=n?n.length:r===Jh?o.length:o[0]?o[0].length:null}else if(t===Xh)n||(n=function(e){var t,r=0;for(;r<e.length&&!(t=e[r++]););if(t){var i=[];return L(t,(function(e,t){i.push(t)})),i}}(e));else if(t===Yh)n||(n=[],L(e,(function(e,t){n.push(t)})));else if(t===Wh){var u=an(e[0]);a=j(u)&&u.length||1}return{startIndex:s,dimensionsDefine:cf(n),dimensionsDetectedCount:a}}(e,r,n,t.sourceHeader,t.dimensions);return new rf({data:e,sourceFormat:r,seriesLayoutBy:n,dimensionsDefine:a.dimensionsDefine,startIndex:a.startIndex,dimensionsDetectedCount:a.dimensionsDetectedCount,encodeDefine:of(i),metaRawOption:O(t)})}function sf(e){return new rf({data:e,sourceFormat:Y(e)?Zh:Wh})}function of(e){return e?ce(e):null}function uf(e){var t=Qh;if(Y(e))t=Zh;else if(j(e)){0===e.length&&(t=Kh);for(var r=0,i=e.length;r<i;r++){var n=e[r];if(null!=n){if(j(n)){t=Kh;break}if(K(n)){t=Xh;break}}}}else if(K(e))for(var a in e)if(le(e,a)&&D(e[a])){t=Yh;break}return t}function cf(e){if(e){var t=ce();return B(e,(function(e,r){var i={name:(e=K(e)?e:{name:e}).name,displayName:e.displayName,type:e.type};if(null==i.name)return i;i.name+="",null==i.displayName&&(i.displayName=i.name);var n=t.get(i.name);return n?i.name+="-"+n.count++:t.set(i.name,{count:1}),i}))}}function df(e,t,r,i){if(t===Jh)for(var n=0;n<r.length&&n<i;n++)e(r[n]?r[n][0]:null,n);else{var a=r[0]||[];for(n=0;n<a.length&&n<i;n++)e(a[n],n)}}var hf=function(){function e(e,t){var r=nf(e)?e:sf(e);this._source=r;var i=this._data=r.data;r.sourceFormat===Zh&&(this._offset=0,this._dimSize=t,this._data=i),tf(this,i,r)}return e.prototype.getSource=function(){return this._source},e.prototype.count=function(){return 0},e.prototype.getItem=function(e,t){},e.prototype.appendData=function(e){},e.prototype.clean=function(){},e.protoInitialize=function(){var t=e.prototype;t.pure=!1,t.persistent=!0}(),e.internalField=function(){var e;tf=function(e,n,a){var s=a.sourceFormat,o=a.seriesLayoutBy,u=a.startIndex,c=a.dimensionsDefine;if(I(e,ef[kf(s,o)]),s===Zh)e.getItem=t,e.count=i,e.fillStorage=r;else{var d=pf(s,o);e.getItem=F(d,null,n,u,c);var h=gf(s,o);e.count=F(h,null,n,u,c)}};var t=function(e,t){e-=this._offset,t=t||[];for(var r=this._data,i=this._dimSize,n=i*e,a=0;a<i;a++)t[a]=r[n+a];return t},r=function(e,t,r,i){for(var n=this._data,a=this._dimSize,s=0;s<a;s++){for(var o=i[s],u=null==o[0]?1/0:o[0],c=null==o[1]?-1/0:o[1],d=t-e,h=r[s],l=0;l<d;l++){var f=n[l*a+s];h[e+l]=f,f<u&&(u=f),f>c&&(c=f)}o[0]=u,o[1]=c}},i=function(){return this._data?this._data.length/this._dimSize:0};function n(e){for(var t=0;t<e.length;t++)this._data.push(e[t])}(e={}).arrayRows_column={pure:!0,appendData:n},e.arrayRows_row={pure:!0,appendData:function(){throw new Error('Do not support appendData when set seriesLayoutBy: "row".')}},e.objectRows={pure:!0,appendData:n},e.keyedColumns={pure:!0,appendData:function(e){var t=this._data;L(e,(function(e,r){for(var i=t[r]||(t[r]=[]),n=0;n<(e||[]).length;n++)i.push(e[n])}))}},e.original={appendData:n},e.typedArray={persistent:!1,pure:!0,appendData:function(e){this._data=e},clean:function(){this._offset+=this.count(),this._data=null}},ef=e}(),e}(),lf=function(e,t,r,i){return e[i]},ff=((Ql={}).arrayRows_column=function(e,t,r,i){return e[i+t]},Ql.arrayRows_row=function(e,t,r,i){i+=t;for(var n=[],a=e,s=0;s<a.length;s++){var o=a[s];n.push(o?o[i]:null)}return n},Ql.objectRows=lf,Ql.keyedColumns=function(e,t,r,i){for(var n=[],a=0;a<r.length;a++){0;var s=e[r[a].name];n.push(s?s[i]:null)}return n},Ql.original=lf,Ql);function pf(e,t){return ff[kf(e,t)]}var vf=function(e,t,r){return e.length},mf=(($l={}).arrayRows_column=function(e,t,r){return Math.max(0,e.length-t)},$l.arrayRows_row=function(e,t,r){var i=e[0];return i?Math.max(0,i.length-t):0},$l.objectRows=vf,$l.keyedColumns=function(e,t,r){var i=e[r[0].name];return i?i.length:0},$l.original=vf,$l);function gf(e,t){return mf[kf(e,t)]}var yf=function(e,t,r){return null!=t?e[t]:e},bf=((Jl={}).arrayRows=yf,Jl.objectRows=function(e,t,r){return null!=t?e[r]:e},Jl.keyedColumns=yf,Jl.original=function(e,t,r){var i=an(e);return null!=t&&i instanceof Array?i[t]:i},Jl.typedArray=yf,Jl);function xf(e){return bf[e]}function kf(e,t){return e===Kh?e+"_"+t:e}function wf(e,t,r){if(e){var i=e.getRawDataItem(t);if(null!=i){var n,a,s=e.getProvider().getSource().sourceFormat,o=e.getDimensionInfo(r);return o&&(n=o.name,a=o.index),xf(s)(i,a,n)}}}var _f=/\{@(.+?)\}/g,Sf=function(){function e(){}return e.prototype.getDataParams=function(e,t){var r=this.getData(t),i=this.getRawValue(e,t),n=r.getRawIndex(e),a=r.getName(e),s=r.getRawDataItem(e),o=r.getItemVisual(e,"style"),u=o&&o[r.getItemVisual(e,"drawType")||"fill"],c=o&&o.stroke,d=this.mainType,h="series"===d,l=r.userOutput;return{componentType:d,componentSubType:this.subType,componentIndex:this.componentIndex,seriesType:h?this.subType:null,seriesIndex:this.seriesIndex,seriesId:h?this.id:null,seriesName:h?this.name:null,name:a,dataIndex:n,data:s,dataType:t,value:i,color:u,borderColor:c,dimensionNames:l?l.dimensionNames:null,encode:l?l.encode:null,$vars:["seriesName","name","value"]}},e.prototype.getFormattedLabel=function(e,t,r,i,n,a){t=t||"normal";var s=this.getData(r),o=this.getDataParams(e,r);(a&&(o.value=a.interpolatedValue),null!=i&&j(o.value)&&(o.value=o.value[i]),n)||(n=s.getItemModel(e).get("normal"===t?["label","formatter"]:[t,"label","formatter"]));return"function"===typeof n?(o.status=t,o.dimensionIndex=i,n(o)):"string"===typeof n?Oh(n,o).replace(_f,(function(t,r){var i=r.length,n="["===r.charAt(0)&&"]"===r.charAt(i-1)?+r.slice(1,i-1):r,o=wf(s,e,n);if(a&&j(a.interpolatedValue)){var u=s.getDimensionInfo(n);u&&(o=a.interpolatedValue[u.index])}return null!=o?o+"":""})):void 0},e.prototype.getRawValue=function(e,t){return wf(this.getData(t),e)},e.prototype.formatTooltip=function(e,t,r){},e}();function Of(e){var t,r;return K(e)?e.type&&(r=e):t=e,{markupText:t,markupFragment:r}}function Tf(e){return new Cf(e)}var Cf=function(){function e(e){e=e||{},this._reset=e.reset,this._plan=e.plan,this._count=e.count,this._onDirty=e.onDirty,this._dirty=!0}return e.prototype.perform=function(e){var t,r=this._upstream,i=e&&e.skip;if(this._dirty&&r){var n=this.context;n.data=n.outputData=r.context.outputData}this.__pipeline&&(this.__pipeline.currentTask=this),this._plan&&!i&&(t=this._plan(this.context));var a,s=d(this._modBy),o=this._modDataCount||0,u=d(e&&e.modBy),c=e&&e.modDataCount||0;function d(e){return!(e>=1)&&(e=1),e}s===u&&o===c||(t="reset"),(this._dirty||"reset"===t)&&(this._dirty=!1,a=this._doReset(i)),this._modBy=u,this._modDataCount=c;var h=e&&e.step;if(this._dueEnd=r?r._outputDueEnd:this._count?this._count(this.context):1/0,this._progress){var l=this._dueIndex,f=Math.min(null!=h?this._dueIndex+h:1/0,this._dueEnd);if(!i&&(a||l<f)){var p=this._progress;if(j(p))for(var v=0;v<p.length;v++)this._doProgress(p[v],l,f,u,c);else this._doProgress(p,l,f,u,c)}this._dueIndex=f;var m=null!=this._settedOutputEnd?this._settedOutputEnd:f;0,this._outputDueEnd=m}else this._dueIndex=this._outputDueEnd=null!=this._settedOutputEnd?this._settedOutputEnd:this._dueEnd;return this.unfinished()},e.prototype.dirty=function(){this._dirty=!0,this._onDirty&&this._onDirty(this.context)},e.prototype._doProgress=function(e,t,r,i,n){If.reset(t,r,i,n),this._callingProgress=e,this._callingProgress({start:t,end:r,count:r-t,next:If.next},this.context)},e.prototype._doReset=function(e){var t,r;this._dueIndex=this._outputDueEnd=this._dueEnd=0,this._settedOutputEnd=null,!e&&this._reset&&((t=this._reset(this.context))&&t.progress&&(r=t.forceFirstProgress,t=t.progress),j(t)&&!t.length&&(t=null)),this._progress=t,this._modBy=this._modDataCount=null;var i=this._downstream;return i&&i.dirty(),r},e.prototype.unfinished=function(){return this._progress&&this._dueIndex<this._dueEnd},e.prototype.pipe=function(e){(this._downstream!==e||this._dirty)&&(this._downstream=e,e._upstream=this,e.dirty())},e.prototype.dispose=function(){this._disposed||(this._upstream&&(this._upstream._downstream=null),this._downstream&&(this._downstream._upstream=null),this._dirty=!1,this._disposed=!0)},e.prototype.getUpstream=function(){return this._upstream},e.prototype.getDownstream=function(){return this._downstream},e.prototype.setOutputEnd=function(e){this._outputDueEnd=this._settedOutputEnd=e},e}(),If=function(){var e,t,r,i,n,a={reset:function(u,c,d,h){t=u,e=c,r=d,i=h,n=Math.ceil(i/r),a.next=r>1&&i>0?o:s}};return a;function s(){return t<e?t++:null}function o(){var a=t%n*r+Math.ceil(t/n),s=t>=e?null:a<i?a:t;return t++,s}}();"undefined"!==typeof console&&console.warn&&console.log;function Mf(e){throw new Error(e)}function Af(e,t){var r=t&&t.type;if("ordinal"===r){var i=t&&t.ordinalMeta;return i?i.parseAndCollect(e):e}return"time"===r&&"number"!==typeof e&&null!=e&&"-"!==e&&(e=+zi(e)),null==e||""===e?NaN:+e}var Ef=ce({number:function(e){return parseFloat(e)},time:function(e){return+zi(e)},trim:function(e){return"string"===typeof e?ne(e):e}});function Nf(e){return Ef.get(e)}var Pf={lt:function(e,t){return e<t},lte:function(e,t){return e<=t},gt:function(e,t){return e>t},gte:function(e,t){return e>=t}},Df=function(){function e(e,t){if("number"!==typeof t){0,Mf("")}this._opFn=Pf[e],this._rvalFloat=Xi(t)}return e.prototype.evaluate=function(e){return"number"===typeof e?this._opFn(e,this._rvalFloat):this._opFn(Xi(e),this._rvalFloat)},e}(),Lf=function(){function e(e,t){var r="desc"===e;this._resultLT=r?1:-1,null==t&&(t=r?"min":"max"),this._incomparable="min"===t?-1/0:1/0}return e.prototype.evaluate=function(e,t){var r=typeof e,i=typeof t,n="number"===r?e:Xi(e),a="number"===i?t:Xi(t),s=isNaN(n),o=isNaN(a);if(s&&(n=this._incomparable),o&&(a=this._incomparable),s&&o){var u="string"===r,c="string"===i;u&&(n=c?e:0),c&&(a=u?t:0)}return n<a?this._resultLT:n>a?-this._resultLT:0},e}(),Bf=function(){function e(e,t){this._rval=t,this._isEQ=e,this._rvalTypeof=typeof t,this._rvalFloat=Xi(t)}return e.prototype.evaluate=function(e){var t=e===this._rval;if(!t){var r=typeof e;r===this._rvalTypeof||"number"!==r&&"number"!==this._rvalTypeof||(t=Xi(e)===this._rvalFloat)}return this._isEQ?t:!t},e}();function Rf(e,t){return"eq"===e||"ne"===e?new Bf("eq"===e,t):le(Pf,e)?new Df(e,t):null}var Vf=function(){function e(){}return e.prototype.getRawData=function(){throw new Error("not supported")},e.prototype.getRawDataItem=function(e){throw new Error("not supported")},e.prototype.cloneRawData=function(){},e.prototype.getDimensionInfo=function(e){},e.prototype.cloneAllDimensionInfo=function(){},e.prototype.count=function(){},e.prototype.retrieveValue=function(e,t){},e.prototype.retrieveValueFromItem=function(e,t){},e.prototype.convertValue=function(e,t){return Af(e,t)},e}();function Gf(e){if(!Uf(e.sourceFormat)){0,Mf("")}return e.data}function Ff(e){var t=e.sourceFormat,r=e.data;if(!Uf(t)){0,Mf("")}if(t===Kh){for(var i=[],n=0,a=r.length;n<a;n++)i.push(r[n].slice());return i}if(t===Xh){for(i=[],n=0,a=r.length;n<a;n++)i.push(I({},r[n]));return i}}function qf(e,t,r){if(null!=r)return"number"===typeof r||!isNaN(r)&&!le(t,r)?e[r]:le(t,r)?t[r]:void 0}function jf(e){return O(e)}var zf=ce();function Hf(e,t,r,i){t.length||Mf(""),K(e)||Mf("");var n=e.type,a=zf.get(n);a||Mf("");var s=B(t,(function(e){return function(e,t){var r=new Vf,i=e.data,n=r.sourceFormat=e.sourceFormat,a=e.startIndex;e.seriesLayoutBy!==$h&&Mf("");var s=[],o={},u=e.dimensionsDefine;if(u)L(u,(function(e,t){var r=e.name,i={index:t,name:r,displayName:e.displayName};s.push(i),null!=r&&(le(o,r)&&Mf(""),o[r]=i)}));else for(var c=0;c<e.dimensionsDetectedCount;c++)s.push({index:c});var d=pf(n,$h);t.__isBuiltIn&&(r.getRawDataItem=function(e){return d(i,a,s,e)},r.getRawData=F(Gf,null,e)),r.cloneRawData=F(Ff,null,e);var h=gf(n,$h);r.count=F(h,null,i,a,s);var l=xf(n);r.retrieveValue=function(e,t){var r=d(i,a,s,e);return f(r,t)};var f=r.retrieveValueFromItem=function(e,t){if(null!=e){var r=s[t];return r?l(e,t,r.name):void 0}};return r.getDimensionInfo=F(qf,null,s,o),r.cloneAllDimensionInfo=F(jf,null,s),r}(e,a)}));return B(tn(a.transform({upstream:s[0],upstreamList:s,config:O(e.config)})),(function(e,r){var i;K(e)||Mf(""),e.data||Mf(""),Uf(uf(e.data))||Mf("");var n=t[0];if(n&&0===r&&!e.dimensions){var a=n.startIndex;a&&(e.data=n.data.slice(0,a).concat(e.data)),i={seriesLayoutBy:$h,sourceHeader:a,dimensions:n.metaRawOption.dimensions}}else i={seriesLayoutBy:$h,sourceHeader:0,dimensions:e.dimensions};return af(e.data,i,null,null)}))}function Uf(e){return e===Kh||e===Xh}var Wf=function(){function e(e){this._sourceList=[],this._upstreamSignList=[],this._versionSignBase=0,this._sourceHost=e}return e.prototype.dirty=function(){this._setLocalSource([],[])},e.prototype._setLocalSource=function(e,t){this._sourceList=e,this._upstreamSignList=t,this._versionSignBase++,this._versionSignBase>9e10&&(this._versionSignBase=0)},e.prototype._getVersionSign=function(){return this._sourceHost.uid+"_"+this._versionSignBase},e.prototype.prepareSource=function(){this._isDirty()&&this._createSource()},e.prototype._createSource=function(){this._setLocalSource([],[]);var e,t,r=this._sourceHost,i=this._getUpstreamSourceManagers(),n=!!i.length;if(Xf(r)){var a=r,s=void 0,o=void 0,u=void 0;if(n){var c=i[0];c.prepareSource(),s=(u=c.getSource()).data,o=u.sourceFormat,t=[c._getVersionSign()]}else o=Y(s=a.get("data",!0))?Zh:Wh,t=[];var d=this._getSourceMetaRawOption(),h=u?u.metaRawOption:null;e=[af(s,{seriesLayoutBy:J(d.seriesLayoutBy,h?h.seriesLayoutBy:null),sourceHeader:J(d.sourceHeader,h?h.sourceHeader:null),dimensions:J(d.dimensions,h?h.dimensions:null)},o,a.get("encode",!0))]}else{var l=r;if(n){var f=this._applyTransform(i);e=f.sourceList,t=f.upstreamSignList}else{e=[af(l.get("source",!0),this._getSourceMetaRawOption(),null,null)],t=[]}}this._setLocalSource(e,t)},e.prototype._applyTransform=function(e){var t,r=this._sourceHost,i=r.get("transform",!0),n=r.get("fromTransformResult",!0);if(null!=n){1!==e.length&&Yf("")}var a,s=[],o=[];return L(e,(function(e){e.prepareSource();var t=e.getSource(n||0);null==n||t||Yf(""),s.push(t),o.push(e._getVersionSign())})),i?t=function(e,t,r){var i=tn(e),n=i.length;n||Mf("");for(var a=0,s=n;a<s;a++)t=Hf(i[a],t),a!==s-1&&(t.length=Math.max(t.length,1));return t}(i,s,r.componentIndex):null!=n&&(t=[(a=s[0],new rf({data:a.data,sourceFormat:a.sourceFormat,seriesLayoutBy:a.seriesLayoutBy,dimensionsDefine:O(a.dimensionsDefine),startIndex:a.startIndex,dimensionsDetectedCount:a.dimensionsDetectedCount,encodeDefine:of(a.encodeDefine)}))]),{sourceList:t,upstreamSignList:o}},e.prototype._isDirty=function(){if(!this._sourceList.length)return!0;for(var e=this._getUpstreamSourceManagers(),t=0;t<e.length;t++){var r=e[t];if(r._isDirty()||this._upstreamSignList[t]!==r._getVersionSign())return!0}},e.prototype.getSource=function(e){return this._sourceList[e||0]},e.prototype._getUpstreamSourceManagers=function(){var e=this._sourceHost;if(Xf(e)){var t=sl(e);return t?[t.getSourceManager()]:[]}return B(function(e){return e.get("transform",!0)||e.get("fromTransformResult",!0)?bn(e.ecModel,"dataset",{index:e.get("fromDatasetIndex",!0),id:e.get("fromDatasetId",!0)},gn).models:[]}(e),(function(e){return e.getSourceManager()}))},e.prototype._getSourceMetaRawOption=function(){var e,t,r,i=this._sourceHost;if(Xf(i))e=i.get("seriesLayoutBy",!0),t=i.get("sourceHeader",!0),r=i.get("dimensions",!0);else if(!this._getUpstreamSourceManagers().length){var n=i;e=n.get("seriesLayoutBy",!0),t=n.get("sourceHeader",!0),r=n.get("dimensions",!0)}return{seriesLayoutBy:e,sourceHeader:t,dimensions:r}},e}();function Kf(e){e.option.transform&&se(e.option.transform)}function Xf(e){return"series"===e.mainType}function Yf(e){throw new Error(e)}function Zf(e,t){var r=e.color||"#6e7079",i=e.fontSize||12,n=e.fontWeight||"400",a=e.color||"#464646",s=e.fontSize||14,o=e.fontWeight||"900";return"html"===t?{nameStyle:"font-size:"+kh(i+"")+"px;color:"+kh(r)+";font-weight:"+kh(n+""),valueStyle:"font-size:"+kh(s+"")+"px;color:"+kh(a)+";font-weight:"+kh(o+"")}:{nameStyle:{fontSize:i,fill:r,fontWeight:n},valueStyle:{fontSize:s,fill:a,fontWeight:o}}}var Qf=[0,10,20,30],$f=["","\n","\n\n","\n\n\n"];function Jf(e,t){return t.type=e,t}function ep(e){return le(tp,e.type)&&tp[e.type]}var tp={section:{planLayout:function(e){var t=e.blocks.length,r=t>1||t>0&&!e.noHeader,i=0;L(e.blocks,(function(e){ep(e).planLayout(e);var t=e.__gapLevelBetweenSubBlocks;t>=i&&(i=t+(!r||t&&("section"!==e.type||e.noHeader)?0:1))})),e.__gapLevelBetweenSubBlocks=i},build:function(e,t,r,i){var n=t.noHeader,a=ip(t),s=function(e,t,r,i){var n=[],a=t.blocks||[];ie(!a||j(a)),a=a||[];var s=e.orderMode;if(t.sortBlocks&&s){a=a.slice();var o={valueAsc:"asc",valueDesc:"desc"};if(le(o,s)){var u=new Lf(o[s],null);a.sort((function(e,t){return u.evaluate(e.sortParam,t.sortParam)}))}else"seriesDesc"===s&&a.reverse()}var c=ip(t);if(L(a,(function(t,r){var a=ep(t).build(e,t,r>0?c.html:0,i);null!=a&&n.push(a)})),!n.length)return;return"richText"===e.renderMode?n.join(c.richText):np(n.join(""),r)}(e,t,n?r:a.html,i);if(n)return s;var o=wh(t.header,"ordinal",e.useUTC),u=Zf(i,e.renderMode).nameStyle;return"richText"===e.renderMode?ap(e,o,u)+a.richText+s:np('<div style="'+u+";"+'line-height:1;">'+kh(o)+"</div>"+s,r)}},nameValue:{planLayout:function(e){e.__gapLevelBetweenSubBlocks=0},build:function(e,t,r,i){var n=e.renderMode,a=t.noName,s=t.noValue,o=!t.markerType,u=t.name,c=t.value,d=e.useUTC;if(!a||!s){var h=o?"":e.markupStyleCreator.makeTooltipMarker(t.markerType,t.markerColor||"#333",n),l=a?"":wh(u,"ordinal",d),f=t.valueType,p=s?[]:j(c)?B(c,(function(e,t){return wh(e,j(f)?f[t]:f,d)})):[wh(c,j(f)?f[0]:f,d)],v=!o||!a,m=!o&&a,g=Zf(i,n),y=g.nameStyle,b=g.valueStyle;return"richText"===n?(o?"":h)+(a?"":ap(e,l,y))+(s?"":function(e,t,r,i,n){var a=[n],s=i?10:20;return r&&a.push({padding:[0,0,0,s],align:"right"}),e.markupStyleCreator.wrapRichTextStyle(t.join("  "),a)}(e,p,v,m,b)):np((o?"":h)+(a?"":function(e,t,r){return'<span style="'+r+";"+(t?"margin-left:2px":"")+'">'+kh(e)+"</span>"}(l,!o,y))+(s?"":function(e,t,r,i){var n=r?"10px":"20px";return'<span style="'+(t?"float:right;margin-left:"+n:"")+";"+i+'">'+B(e,(function(e){return kh(e)})).join("&nbsp;&nbsp;")+"</span>"}(p,v,m,b)),r)}}}};function rp(e,t,r,i,n,a){if(e){var s=ep(e);s.planLayout(e);var o={useUTC:n,renderMode:r,orderMode:i,markupStyleCreator:t};return s.build(o,e,0,a)}}function ip(e){var t=e.__gapLevelBetweenSubBlocks;return{html:Qf[t],richText:$f[t]}}function np(e,t){return'<div style="'+("margin: "+t+"px 0 0")+";"+'line-height:1;">'+e+'<div style="clear:both"></div></div>'}function ap(e,t,r){return e.markupStyleCreator.wrapRichTextStyle(t,r)}function sp(e,t){return Th(e.getData().getItemVisual(t,"style")[e.visualDrawType])}function op(e,t){var r=e.get("padding");return null!=r?r:"richText"===t?[8,10]:10}var up=function(){function e(){this.richTextStyles={},this._nextStyleNameId=Zi()}return e.prototype._generateStyleName=function(){return"__EC_aUTo_"+this._nextStyleNameId++},e.prototype.makeTooltipMarker=function(e,t,r){var i="richText"===r?this._generateStyleName():null,n=function(e,t){var r=H(e)?{color:e,extraCssText:t}:e||{},i=r.color,n=r.type;t=r.extraCssText;var a=r.renderMode||"html";return i?"html"===a?"subItem"===n?'<span style="display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;border-radius:4px;width:4px;height:4px;background-color:'+kh(i)+";"+(t||"")+'"></span>':'<span style="display:inline-block;margin-right:4px;border-radius:10px;width:10px;height:10px;background-color:'+kh(i)+";"+(t||"")+'"></span>':{renderMode:a,content:"{"+(r.markerId||"markerX")+"|}  ",style:"subItem"===n?{width:4,height:4,borderRadius:2,backgroundColor:i}:{width:10,height:10,borderRadius:5,backgroundColor:i}}:""}({color:t,type:e,renderMode:r,markerId:i});return H(n)?n:(this.richTextStyles[i]=n.style,n.content)},e.prototype.wrapRichTextStyle=function(e,t){var r={};j(t)?L(t,(function(e){return I(r,e)})):I(r,t);var i=this._generateStyleName();return this.richTextStyles[i]=r,"{"+i+"|"+e+"}"},e}();function cp(e){var t,r,i,n,a=e.series,s=e.dataIndex,o=e.multipleSeries,u=a.getData(),c=u.mapDimensionsAll("defaultedTooltip"),d=c.length,h=a.getRawValue(s),l=j(h),f=sp(a,s);if(d>1||l&&!d){var p=function(e,t,r,i,n){var a=t.getData(),s=R(e,(function(e,t,r){var i=a.getDimensionInfo(r);return e||i&&!1!==i.tooltip&&null!=i.displayName}),!1),o=[],u=[],c=[];function d(e,t){var r=a.getDimensionInfo(t);r&&!1!==r.otherDims.tooltip&&(s?c.push(Jf("nameValue",{markerType:"subItem",markerColor:n,name:r.displayName,value:e,valueType:r.type})):(o.push(e),u.push(r.type)))}return i.length?L(i,(function(e){d(wf(a,r,e),e)})):L(e,d),{inlineValues:o,inlineValueTypes:u,blocks:c}}(h,a,s,c,f);t=p.inlineValues,r=p.inlineValueTypes,i=p.blocks,n=p.inlineValues[0]}else if(d){var v=u.getDimensionInfo(c[0]);n=t=wf(u,s,c[0]),r=v.type}else n=t=l?h[0]:h;var m=dn(a),g=m&&a.name||"",y=u.getName(s),b=o?g:y;return Jf("section",{header:g,noHeader:o||!m,sortParam:n,blocks:[Jf("nameValue",{markerType:"item",markerColor:f,name:b,noName:!ne(b),value:t,valueType:r})].concat(i||[])})}var dp=fn();function hp(e,t){return e.getName(t)||e.getId(t)}var lp=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._selectedDataIndicesMap={},t}return a(t,e),t.prototype.init=function(e,t,r){this.seriesIndex=this.componentIndex,this.dataTask=Tf({count:pp,reset:vp}),this.dataTask.context={model:this},this.mergeDefaultAndTheme(e,r),(dp(this).sourceManager=new Wf(this)).prepareSource();var i=this.getInitialData(e,r);gp(i,this),this.dataTask.context.data=i,dp(this).dataBeforeProcessed=i,fp(this),this._initSelectedMapFromData(i)},t.prototype.mergeDefaultAndTheme=function(e,t){var r=Lh(this),i=r?Rh(e):{},n=this.subType;qh.hasClass(n)&&(n+="Series"),T(e,t.getTheme().get(this.subType)),T(e,this.getDefaultOption()),rn(e,"label",["show"]),this.fillDataTextStyle(e.data),r&&Bh(e,i,r)},t.prototype.mergeOption=function(e,t){e=T(this.option,e,!0),this.fillDataTextStyle(e.data);var r=Lh(this);r&&Bh(this.option,e,r);var i=dp(this).sourceManager;i.dirty(),i.prepareSource();var n=this.getInitialData(e,t);gp(n,this),this.dataTask.dirty(),this.dataTask.context.data=n,dp(this).dataBeforeProcessed=n,fp(this),this._initSelectedMapFromData(n)},t.prototype.fillDataTextStyle=function(e){if(e&&!Y(e))for(var t=["show"],r=0;r<e.length;r++)e[r]&&e[r].label&&rn(e[r],"label",t)},t.prototype.getInitialData=function(e,t){},t.prototype.appendData=function(e){this.getRawData().appendData(e.data)},t.prototype.getData=function(e){var t=bp(this);if(t){var r=t.context.data;return null==e?r:r.getLinkedData(e)}return dp(this).data},t.prototype.getAllData=function(){var e=this.getData();return e&&e.getLinkedDataAll?e.getLinkedDataAll():[{data:e}]},t.prototype.setData=function(e){var t=bp(this);if(t){var r=t.context;r.outputData=e,t!==this.dataTask&&(r.data=e)}dp(this).data=e},t.prototype.getSource=function(){return dp(this).sourceManager.getSource()},t.prototype.getRawData=function(){return dp(this).dataBeforeProcessed},t.prototype.getBaseAxis=function(){var e=this.coordinateSystem;return e&&e.getBaseAxis&&e.getBaseAxis()},t.prototype.formatTooltip=function(e,t,r){return cp({series:this,dataIndex:e,multipleSeries:t})},t.prototype.isAnimationEnabled=function(){if(d.node)return!1;var e=this.getShallow("animation");return e&&this.getData().count()>this.getShallow("animationThreshold")&&(e=!1),!!e},t.prototype.restoreData=function(){this.dataTask.dirty()},t.prototype.getColorFromPalette=function(e,t,r){var i=this.ecModel,n=vl.prototype.getColorFromPalette.call(this,e,t,r);return n||(n=i.getColorFromPalette(e,t,r)),n},t.prototype.coordDimToDataDim=function(e){return this.getRawData().mapDimensionsAll(e)},t.prototype.getProgressive=function(){return this.get("progressive")},t.prototype.getProgressiveThreshold=function(){return this.get("progressiveThreshold")},t.prototype.select=function(e,t){this._innerSelect(this.getData(t),e)},t.prototype.unselect=function(e,t){var r=this.option.selectedMap;if(r)for(var i=this.getData(t),n=0;n<e.length;n++){var a=hp(i,e[n]);r[a]=!1,this._selectedDataIndicesMap[a]=-1}},t.prototype.toggleSelect=function(e,t){for(var r=[],i=0;i<e.length;i++)r[0]=e[i],this.isSelected(e[i],t)?this.unselect(r,t):this.select(r,t)},t.prototype.getSelectedDataIndices=function(){for(var e=this._selectedDataIndicesMap,t=G(e),r=[],i=0;i<t.length;i++){var n=e[t[i]];n>=0&&r.push(n)}return r},t.prototype.isSelected=function(e,t){var r=this.option.selectedMap;return r&&r[hp(this.getData(t),e)]||!1},t.prototype._innerSelect=function(e,t){var r,i,n=this.option.selectedMode,a=t.length;if(n&&a)if("multiple"===n)for(var s=this.option.selectedMap||(this.option.selectedMap={}),o=0;o<a;o++){var u=t[o];s[d=hp(e,u)]=!0,this._selectedDataIndicesMap[d]=e.getRawIndex(u)}else if("single"===n||!0===n){var c=t[a-1],d=hp(e,c);this.option.selectedMap=((r={})[d]=!0,r),this._selectedDataIndicesMap=((i={})[d]=e.getRawIndex(c),i)}},t.prototype._initSelectedMapFromData=function(e){if(!this.option.selectedMap){var t=[];e.hasItemOption&&e.each((function(r){var i=e.getRawDataItem(r);i&&i.selected&&t.push(r)})),t.length>0&&this._innerSelect(e,t)}},t.registerClass=function(e){return qh.registerClass(e)},t.protoInitialize=function(){var e=t.prototype;e.type="series.__base__",e.seriesIndex=0,e.useColorPaletteOnData=!1,e.ignoreStyleOnData=!1,e.hasSymbolVisual=!1,e.defaultSymbol="circle",e.visualStyleAccessPath="itemStyle",e.visualDrawType="fill"}(),t}(qh);function fp(e){var t=e.name;dn(e)||(e.name=function(e){var t=e.getRawData(),r=t.mapDimensionsAll("seriesName"),i=[];return L(r,(function(e){var r=t.getDimensionInfo(e);r.displayName&&i.push(r.displayName)})),i.join(" ")}(e)||t)}function pp(e){return e.model.getRawData().count()}function vp(e){var t=e.model;return t.setData(t.getRawData().cloneShallow()),mp}function mp(e,t){t.outputData&&e.end>t.outputData.count()&&t.model.getRawData().cloneShallow(t.outputData)}function gp(e,t){L(o(e.CHANGABLE_METHODS,e.DOWNSAMPLE_METHODS),(function(r){e.wrapMethod(r,q(yp,t))}))}function yp(e,t){var r=bp(e);return r&&r.setOutputEnd((t||this).count()),t}function bp(e){var t=(e.ecModel||{}).scheduler,r=t&&t.getPipeline(e.uid);if(r){var i=r.currentTask;if(i){var n=i.agentStubMap;n&&(i=n.get(e.uid))}return i}}P(lp,Sf),P(lp,vl),In(lp,qh);var xp=lp,kp=function(){function e(){this.group=new Ti,this.uid=Ed("viewComponent")}return e.prototype.init=function(e,t){},e.prototype.render=function(e,t,r,i){},e.prototype.dispose=function(e,t){},e.prototype.updateView=function(e,t,r,i){},e.prototype.updateLayout=function(e,t,r,i){},e.prototype.updateVisual=function(e,t,r,i){},e.prototype.blurSeries=function(e,t){},e}();Tn(kp),Nn(kp);var wp=kp;function _p(){var e=fn();return function(t){var r=e(t),i=t.pipelineContext,n=!!r.large,a=!!r.progressiveRender,s=r.large=!(!i||!i.large),o=r.progressiveRender=!(!i||!i.progressiveRender);return!(n===s&&a===o)&&"reset"}}var Sp=fn(),Op=_p(),Tp=function(){function e(){this.group=new Ti,this.uid=Ed("viewChart"),this.renderTask=Tf({plan:Mp,reset:Ap}),this.renderTask.context={view:this}}return e.prototype.init=function(e,t){},e.prototype.render=function(e,t,r,i){},e.prototype.highlight=function(e,t,r,i){Ip(e.getData(),i,"emphasis")},e.prototype.downplay=function(e,t,r,i){Ip(e.getData(),i,"normal")},e.prototype.remove=function(e,t){this.group.removeAll()},e.prototype.dispose=function(e,t){},e.prototype.updateView=function(e,t,r,i){this.render(e,t,r,i)},e.prototype.updateLayout=function(e,t,r,i){this.render(e,t,r,i)},e.prototype.updateVisual=function(e,t,r,i){this.render(e,t,r,i)},e.markUpdateMethod=function(e,t){Sp(e).updateMethod=t},e.protoInitialize=void(e.prototype.type="chart"),e}();function Cp(e,t,r){e&&("emphasis"===t?Lo:Bo)(e,r)}function Ip(e,t,r){var i=ln(e,t),n=t&&null!=t.highlightKey?function(e){var t=oo[e];return null==t&&so<=32&&(t=oo[e]=so++),t}(t.highlightKey):null;null!=i?L(tn(i),(function(t){Cp(e.getItemGraphicEl(t),r,n)})):e.eachItemGraphicEl((function(e){Cp(e,r,n)}))}function Mp(e){return Op(e.model)}function Ap(e){var t=e.model,r=e.ecModel,i=e.api,n=e.payload,a=t.pipelineContext.progressiveRender,s=e.view,o=n&&Sp(n).updateMethod,u=a?"incrementalPrepareRender":o&&s[o]?o:"render";return"render"!==u&&s[u](t,r,i,n),Ep[u]}Tn(Tp),Nn(Tp);var Ep={incrementalPrepareRender:{progress:function(e,t){t.view.incrementalRender(e,t.model,t.ecModel,t.api,t.payload)}},render:{forceFirstProgress:!0,progress:function(e,t){t.view.render(t.model,t.ecModel,t.api,t.payload)}}},Np=Tp,Pp="\0__throttleOriginMethod",Dp="\0__throttleRate",Lp="\0__throttleType";function Bp(e,t,r){var i,n,a,s,o,u=0,c=0,d=null;function h(){c=(new Date).getTime(),d=null,e.apply(a,s||[])}t=t||0;var l=function(){for(var e=[],l=0;l<arguments.length;l++)e[l]=arguments[l];i=(new Date).getTime(),a=this,s=e;var f=o||t,p=o||r;o=null,n=i-(p?u:c)-f,clearTimeout(d),p?d=setTimeout(h,f):n>=0?h():d=setTimeout(h,-n),u=i};return l.clear=function(){d&&(clearTimeout(d),d=null)},l.debounceNextCall=function(e){o=e},l}function Rp(e,t,r,i){var n=e[t];if(n){var a=n[Pp]||n,s=n[Lp];if(n[Dp]!==r||s!==i){if(null==r||!i)return e[t]=a;(n=e[t]=Bp(a,r,"debounce"===i))[Pp]=a,n[Lp]=i,n[Dp]=r}return n}}var Vp=fn(),Gp={itemStyle:Pn(Od,!0),lineStyle:Pn(wd,!0)},Fp={lineStyle:"stroke",itemStyle:"fill"};function qp(e,t){var r=e.visualStyleMapper||Gp[t];return r||(console.warn("Unkown style type '"+t+"'."),Gp.itemStyle)}function jp(e,t){var r=e.visualDrawType||Fp[t];return r||(console.warn("Unkown style type '"+t+"'."),"fill")}var zp={createOnAllSeries:!0,performRawSeries:!0,reset:function(e,t){var r=e.getData(),i=e.visualStyleAccessPath||"itemStyle",n=e.getModel(i),a=qp(e,i)(n),s=n.getShallow("decal");s&&(r.setVisual("decal",s),s.dirty=!0);var o=jp(e,i),u=a[o],c=z(u)?u:null,d="auto"===a.fill||"auto"===a.stroke;if(!a[o]||c||d){var h=e.getColorFromPalette(e.name,null,t.getSeriesCount());a[o]||(a[o]=h,r.setVisual("colorFromPalette",!0)),a.fill="auto"===a.fill||"function"===typeof a.fill?h:a.fill,a.stroke="auto"===a.stroke||"function"===typeof a.stroke?h:a.stroke}if(r.setVisual("style",a),r.setVisual("drawType",o),!t.isSeriesFiltered(e)&&c)return r.setVisual("colorFromPalette",!1),{dataEach:function(t,r){var i=e.getDataParams(r),n=I({},a);n[o]=c(i),t.setItemVisual(r,"style",n)}}}},Hp=new Md,Up={createOnAllSeries:!0,performRawSeries:!0,reset:function(e,t){if(!e.ignoreStyleOnData&&!t.isSeriesFiltered(e)){var r=e.getData(),i=e.visualStyleAccessPath||"itemStyle",n=qp(e,i),a=r.getVisual("drawType");return{dataEach:r.hasItemOption?function(e,t){var r=e.getRawDataItem(t);if(r&&r[i]){Hp.option=r[i];var s=n(Hp);I(e.ensureUniqueItemVisual(t,"style"),s),Hp.option.decal&&(e.setItemVisual(t,"decal",Hp.option.decal),Hp.option.decal.dirty=!0),a in s&&e.setItemVisual(t,"colorFromPalette",!1)}}:null}}}},Wp={performRawSeries:!0,overallReset:function(e){var t=ce();e.eachSeries((function(e){if(e.useColorPaletteOnData){var r=t.get(e.type);r||(r={},t.set(e.type,r)),Vp(e).scope=r}})),e.eachSeries((function(t){if(t.useColorPaletteOnData&&!e.isSeriesFiltered(t)){var r=t.getRawData(),i={},n=t.getData(),a=Vp(t).scope,s=t.visualStyleAccessPath||"itemStyle",o=jp(t,s);n.each((function(e){var t=n.getRawIndex(e);i[t]=e})),r.each((function(e){var s=i[e];if(n.getItemVisual(s,"colorFromPalette")){var u=n.ensureUniqueItemVisual(s,"style"),c=r.getName(e)||e+"",d=r.count();u[o]=t.getColorFromPalette(c,a,d)}}))}}))}},Kp=Math.PI;var Xp=function(){function e(e,t,r,i){this._stageTaskMap=ce(),this.ecInstance=e,this.api=t,r=this._dataProcessorHandlers=r.slice(),i=this._visualHandlers=i.slice(),this._allHandlers=r.concat(i)}return e.prototype.restoreData=function(e,t){e.restoreData(t),this._stageTaskMap.each((function(e){var t=e.overallTask;t&&t.dirty()}))},e.prototype.getPerformArgs=function(e,t){if(e.__pipeline){var r=this._pipelineMap.get(e.__pipeline.id),i=r.context,n=!t&&r.progressiveEnabled&&(!i||i.progressiveRender)&&e.__idxInPipeline>r.blockIndex?r.step:null,a=i&&i.modDataCount;return{step:n,modBy:null!=a?Math.ceil(a/n):null,modDataCount:a}}},e.prototype.getPipeline=function(e){return this._pipelineMap.get(e)},e.prototype.updateStreamModes=function(e,t){var r=this._pipelineMap.get(e.uid),i=e.getData().count(),n=r.progressiveEnabled&&t.incrementalPrepareRender&&i>=r.threshold,a=e.get("large")&&i>=e.get("largeThreshold"),s="mod"===e.get("progressiveChunkMode")?i:null;e.pipelineContext=r.context={progressiveRender:n,modDataCount:s,large:a}},e.prototype.restorePipelines=function(e){var t=this,r=t._pipelineMap=ce();e.eachSeries((function(e){var i=e.getProgressive(),n=e.uid;r.set(n,{id:n,head:null,tail:null,threshold:e.getProgressiveThreshold(),progressiveEnabled:i&&!(e.preventIncremental&&e.preventIncremental()),blockIndex:-1,step:Math.round(i||700),count:0}),t._pipe(e,e.dataTask)}))},e.prototype.prepareStageTasks=function(){var e=this._stageTaskMap,t=this.api.getModel(),r=this.api;L(this._allHandlers,(function(i){var n=e.get(i.uid)||e.set(i.uid,{});ie(!(i.reset&&i.overallReset),""),i.reset&&this._createSeriesStageTask(i,n,t,r),i.overallReset&&this._createOverallStageTask(i,n,t,r)}),this)},e.prototype.prepareView=function(e,t,r,i){var n=e.renderTask,a=n.context;a.model=t,a.ecModel=r,a.api=i,n.__block=!e.incrementalPrepareRender,this._pipe(t,n)},e.prototype.performDataProcessorTasks=function(e,t){this._performStageTasks(this._dataProcessorHandlers,e,t,{block:!0})},e.prototype.performVisualTasks=function(e,t,r){this._performStageTasks(this._visualHandlers,e,t,r)},e.prototype._performStageTasks=function(e,t,r,i){i=i||{};var n=!1,a=this;function s(e,t){return e.setDirty&&(!e.dirtyMap||e.dirtyMap.get(t.__pipeline.id))}L(e,(function(e,o){if(!i.visualType||i.visualType===e.visualType){var u=a._stageTaskMap.get(e.uid),c=u.seriesTaskMap,d=u.overallTask;if(d){var h,l=d.agentStubMap;l.each((function(e){s(i,e)&&(e.dirty(),h=!0)})),h&&d.dirty(),a.updatePayload(d,r);var f=a.getPerformArgs(d,i.block);l.each((function(e){e.perform(f)})),d.perform(f)&&(n=!0)}else c&&c.each((function(o,u){s(i,o)&&o.dirty();var c=a.getPerformArgs(o,i.block);c.skip=!e.performRawSeries&&t.isSeriesFiltered(o.context.model),a.updatePayload(o,r),o.perform(c)&&(n=!0)}))}})),this.unfinished=n||this.unfinished},e.prototype.performSeriesTasks=function(e){var t;e.eachSeries((function(e){t=e.dataTask.perform()||t})),this.unfinished=t||this.unfinished},e.prototype.plan=function(){this._pipelineMap.each((function(e){var t=e.tail;do{if(t.__block){e.blockIndex=t.__idxInPipeline;break}t=t.getUpstream()}while(t)}))},e.prototype.updatePayload=function(e,t){"remain"!==t&&(e.context.payload=t)},e.prototype._createSeriesStageTask=function(e,t,r,i){var n=this,a=t.seriesTaskMap,s=t.seriesTaskMap=ce(),o=e.seriesType,u=e.getTargetSeries;function c(t){var o=t.uid,u=s.set(o,a&&a.get(o)||Tf({plan:Jp,reset:ev,count:iv}));u.context={model:t,ecModel:r,api:i,useClearVisual:e.isVisual&&!e.isLayout,plan:e.plan,reset:e.reset,scheduler:n},n._pipe(t,u)}e.createOnAllSeries?r.eachRawSeries(c):o?r.eachRawSeriesByType(o,c):u&&u(r,i).each(c)},e.prototype._createOverallStageTask=function(e,t,r,i){var n=this,a=t.overallTask=t.overallTask||Tf({reset:Yp});a.context={ecModel:r,api:i,overallReset:e.overallReset,scheduler:n};var s=a.agentStubMap,o=a.agentStubMap=ce(),u=e.seriesType,c=e.getTargetSeries,d=!0,h=!1;function l(e){var t=e.uid,r=o.set(t,s&&s.get(t)||(h=!0,Tf({reset:Zp,onDirty:$p})));r.context={model:e,overallProgress:d},r.agent=a,r.__block=d,n._pipe(e,r)}ie(!e.createOnAllSeries,""),u?r.eachRawSeriesByType(u,l):c?c(r,i).each(l):(d=!1,L(r.getSeries(),l)),h&&a.dirty()},e.prototype._pipe=function(e,t){var r=e.uid,i=this._pipelineMap.get(r);!i.head&&(i.head=t),i.tail&&i.tail.pipe(t),i.tail=t,t.__idxInPipeline=i.count++,t.__pipeline=i},e.wrapStageHandler=function(e,t){return z(e)&&(e={overallReset:e,seriesType:nv(e)}),e.uid=Ed("stageHandler"),t&&(e.visualType=t),e},e}();function Yp(e){e.overallReset(e.ecModel,e.api,e.payload)}function Zp(e){return e.overallProgress&&Qp}function Qp(){this.agent.dirty(),this.getDownstream().dirty()}function $p(){this.agent&&this.agent.dirty()}function Jp(e){return e.plan?e.plan(e.model,e.ecModel,e.api,e.payload):null}function ev(e){e.useClearVisual&&e.data.clearAllVisual();var t=e.resetDefines=tn(e.reset(e.model,e.ecModel,e.api,e.payload));return t.length>1?B(t,(function(e,t){return rv(t)})):tv}var tv=rv(0);function rv(e){return function(t,r){var i=r.data,n=r.resetDefines[e];if(n&&n.dataEach)for(var a=t.start;a<t.end;a++)n.dataEach(i,a);else n&&n.progress&&n.progress(t,i)}}function iv(e){return e.data.count()}function nv(e){av=null;try{e(sv,ov)}catch(t){}return av}var av,sv={},ov={};function uv(e,t){for(var r in t.prototype)e[r]=fe}uv(sv,wl),uv(ov,Sl),sv.eachSeriesByType=sv.eachRawSeriesByType=function(e){av=e},sv.eachComponent=function(e){"series"===e.mainType&&e.subType&&(av=e.subType)};var cv=Xp,dv=["#37A2DA","#32C5E9","#67E0E3","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#E062AE","#E690D1","#e7bcf3","#9d96f5","#8378EA","#96BFFF"],hv={color:dv,colorLayer:[["#37A2DA","#ffd85c","#fd7b5f"],["#37A2DA","#67E0E3","#FFDB5C","#ff9f7f","#E062AE","#9d96f5"],["#37A2DA","#32C5E9","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#e7bcf3","#8378EA","#96BFFF"],dv]},lv="#B9B8CE",fv="#100C2A",pv=function(){return{axisLine:{lineStyle:{color:lv}},splitLine:{lineStyle:{color:"#484753"}},splitArea:{areaStyle:{color:["rgba(255,255,255,0.02)","rgba(255,255,255,0.05)"]}},minorSplitLine:{lineStyle:{color:"#20203B"}}}},vv=["#4992ff","#7cffb2","#fddd60","#ff6e76","#58d9f9","#05c091","#ff8a45","#8d48e3","#dd79ff"],mv={darkMode:!0,color:vv,backgroundColor:fv,axisPointer:{lineStyle:{color:"#817f91"},crossStyle:{color:"#817f91"},label:{color:"#fff"}},legend:{textStyle:{color:lv}},textStyle:{color:lv},title:{textStyle:{color:"#EEF1FA"},subtextStyle:{color:"#B9B8CE"}},toolbox:{iconStyle:{borderColor:lv}},dataZoom:{borderColor:"#71708A",textStyle:{color:lv},brushStyle:{color:"rgba(135,163,206,0.3)"},handleStyle:{color:"#353450",borderColor:"#C5CBE3"},moveHandleStyle:{color:"#B0B6C3",opacity:.3},fillerColor:"rgba(135,163,206,0.2)",emphasis:{handleStyle:{borderColor:"#91B7F2",color:"#4D587D"},moveHandleStyle:{color:"#636D9A",opacity:.7}},dataBackground:{lineStyle:{color:"#71708A",width:1},areaStyle:{color:"#71708A"}},selectedDataBackground:{lineStyle:{color:"#87A3CE"},areaStyle:{color:"#87A3CE"}}},visualMap:{textStyle:{color:lv}},timeline:{lineStyle:{color:lv},label:{color:lv},controlStyle:{color:lv,borderColor:lv}},calendar:{itemStyle:{color:fv},dayLabel:{color:lv},monthLabel:{color:lv},yearLabel:{color:lv}},timeAxis:pv(),logAxis:pv(),valueAxis:pv(),categoryAxis:pv(),line:{symbol:"circle"},graph:{color:vv},gauge:{title:{color:lv},axisLine:{lineStyle:{color:[[1,"rgba(207,212,219,0.2)"]]}},axisLabel:{color:lv},detail:{color:"#EEF1FA"}},candlestick:{itemStyle:{color:"#f64e56",color0:"#54ea92",borderColor:"#f64e56",borderColor0:"#54ea92"}}};mv.categoryAxis.splitLine.show=!1;var gv=mv,yv=function(){function e(){}return e.prototype.normalizeQuery=function(e){var t={},r={},i={};if(H(e)){var n=On(e);t.mainType=n.main||null,t.subType=n.sub||null}else{var a=["Index","Name","Id"],s={name:1,dataIndex:1,dataType:1};L(e,(function(e,n){for(var o=!1,u=0;u<a.length;u++){var c=a[u],d=n.lastIndexOf(c);if(d>0&&d===n.length-c.length){var h=n.slice(0,d);"data"!==h&&(t.mainType=h,t[c.toLowerCase()]=e,o=!0)}}s.hasOwnProperty(n)&&(r[n]=e,o=!0),o||(i[n]=e)}))}return{cptQuery:t,dataQuery:r,otherQuery:i}},e.prototype.filter=function(e,t){var r=this.eventInfo;if(!r)return!0;var i=r.targetEl,n=r.packedEvent,a=r.model,s=r.view;if(!a||!s)return!0;var o=t.cptQuery,u=t.dataQuery;return c(o,a,"mainType")&&c(o,a,"subType")&&c(o,a,"index","componentIndex")&&c(o,a,"name")&&c(o,a,"id")&&c(u,n,"name")&&c(u,n,"dataIndex")&&c(u,n,"dataType")&&(!s.filterForExposedEvent||s.filterForExposedEvent(e,t.otherQuery,i,n));function c(e,t,r,i){return null==e[r]||t[i||r]===e[r]}},e.prototype.afterTrigger=function(){this.eventInfo=null},e}(),bv={createOnAllSeries:!0,performRawSeries:!0,reset:function(e,t){var r=e.getData();if(e.legendSymbol&&r.setVisual("legendSymbol",e.legendSymbol),e.hasSymbolVisual){var i=e.get("symbol"),n=e.get("symbolSize"),a=e.get("symbolKeepAspect"),s=e.get("symbolRotate"),o=e.get("symbolOffset"),u=z(i),c=z(n),d=z(s),h=z(o),l=u||c||d||h,f=!u&&i?i:e.defaultSymbol,p=c?null:n,v=d?null:s,m=h?null:o;if(r.setVisual({legendSymbol:e.legendSymbol||f,symbol:f,symbolSize:p,symbolKeepAspect:a,symbolRotate:v,symbolOffset:m}),!t.isSeriesFiltered(e))return{dataEach:l?function(t,r){var a=e.getRawValue(r),l=e.getDataParams(r);u&&t.setItemVisual(r,"symbol",i(a,l)),c&&t.setItemVisual(r,"symbolSize",n(a,l)),d&&t.setItemVisual(r,"symbolRotate",s(a,l)),h&&t.setItemVisual(r,"symbolOffset",o(a,l))}:null}}}};function xv(e,t,r){switch(r){case"color":return e.getItemVisual(t,"style")[e.getVisual("drawType")];case"opacity":return e.getItemVisual(t,"style").opacity;case"symbol":case"symbolSize":case"liftZ":return e.getItemVisual(t,r);default:0}}function kv(e,t){switch(t){case"color":return e.getVisual("style")[e.getVisual("drawType")];case"opacity":return e.getVisual("style").opacity;case"symbol":case"symbolSize":case"liftZ":return e.getVisual(t);default:0}}function wv(e,t,r,i){switch(r){case"color":e.ensureUniqueItemVisual(t,"style")[e.getVisual("drawType")]=i,e.setItemVisual(t,"colorFromPalette",!1);break;case"opacity":e.ensureUniqueItemVisual(t,"style").opacity=i;break;case"symbol":case"symbolSize":case"liftZ":e.setItemVisual(t,r,i);break;default:0}}var _v=2*Math.PI,Sv=hs.CMD,Ov=["top","right","bottom","left"];function Tv(e,t,r,i,n){var a=r.width,s=r.height;switch(e){case"top":i.set(r.x+a/2,r.y-t),n.set(0,-1);break;case"bottom":i.set(r.x+a/2,r.y+s+t),n.set(0,1);break;case"left":i.set(r.x-t,r.y+s/2),n.set(-1,0);break;case"right":i.set(r.x+a+t,r.y+s/2),n.set(1,0)}}function Cv(e,t,r,i,n,a,s,o,u){s-=e,o-=t;var c=Math.sqrt(s*s+o*o),d=(s/=c)*r+e,h=(o/=c)*r+t;if(Math.abs(i-n)%_v<1e-4)return u[0]=d,u[1]=h,c-r;if(a){var l=i;i=ms(n),n=ms(l)}else i=ms(i),n=ms(n);i>n&&(n+=_v);var f=Math.atan2(o,s);if(f<0&&(f+=_v),f>=i&&f<=n||f+_v>=i&&f+_v<=n)return u[0]=d,u[1]=h,c-r;var p=r*Math.cos(i)+e,v=r*Math.sin(i)+t,m=r*Math.cos(n)+e,g=r*Math.sin(n)+t,y=(p-s)*(p-s)+(v-o)*(v-o),b=(m-s)*(m-s)+(g-o)*(g-o);return y<b?(u[0]=p,u[1]=v,Math.sqrt(y)):(u[0]=m,u[1]=g,Math.sqrt(b))}function Iv(e,t,r,i,n,a,s,o){var u=n-e,c=a-t,d=r-e,h=i-t,l=Math.sqrt(d*d+h*h),f=(u*(d/=l)+c*(h/=l))/l;o&&(f=Math.min(Math.max(f,0),1)),f*=l;var p=s[0]=e+f*d,v=s[1]=t+f*h;return Math.sqrt((p-n)*(p-n)+(v-a)*(v-a))}function Mv(e,t,r,i,n,a,s){r<0&&(e+=r,r=-r),i<0&&(t+=i,i=-i);var o=e+r,u=t+i,c=s[0]=Math.min(Math.max(n,e),o),d=s[1]=Math.min(Math.max(a,t),u);return Math.sqrt((c-n)*(c-n)+(d-a)*(d-a))}var Av=[];function Ev(e,t,r){var i=Mv(t.x,t.y,t.width,t.height,e.x,e.y,Av);return r.set(Av[0],Av[1]),i}function Nv(e,t,r){for(var i,n,a=0,s=0,o=0,u=0,c=1/0,d=t.data,h=e.x,l=e.y,f=0;f<d.length;){var p=d[f++];1===f&&(o=a=d[f],u=s=d[f+1]);var v=c;switch(p){case Sv.M:a=o=d[f++],s=u=d[f++];break;case Sv.L:v=Iv(a,s,d[f],d[f+1],h,l,Av,!0),a=d[f++],s=d[f++];break;case Sv.C:v=_a(a,s,d[f++],d[f++],d[f++],d[f++],d[f],d[f+1],h,l,Av),a=d[f++],s=d[f++];break;case Sv.Q:v=Ma(a,s,d[f++],d[f++],d[f],d[f+1],h,l,Av),a=d[f++],s=d[f++];break;case Sv.A:var m=d[f++],g=d[f++],y=d[f++],b=d[f++],x=d[f++],k=d[f++];f+=1;var w=!!(1-d[f++]);i=Math.cos(x)*y+m,n=Math.sin(x)*b+g,f<=1&&(o=i,u=n),v=Cv(m,g,b,x,x+k,w,(h-m)*b/y+m,l,Av),a=Math.cos(x+k)*y+m,s=Math.sin(x+k)*b+g;break;case Sv.R:v=Mv(o=a=d[f++],u=s=d[f++],d[f++],d[f++],h,l,Av);break;case Sv.Z:v=Iv(a,s,o,u,h,l,Av,!0),a=o,s=u}v<c&&(c=v,r.set(Av[0],Av[1]))}return c}var Pv=new pr,Dv=new pr,Lv=new pr,Bv=new pr,Rv=new pr;function Vv(e,t){if(e){var r=e.getTextGuideLine(),i=e.getTextContent();if(i&&r){var n=e.textGuideLineConfig||{},a=[[0,0],[0,0],[0,0]],s=n.candidates||Ov,o=i.getBoundingRect().clone();o.applyTransform(i.getComputedTransform());var u=1/0,c=n.anchor,d=e.getComputedTransform(),h=d&&mt([],d),l=t.get("length2")||0;c&&Lv.copy(c);for(var f=0;f<s.length;f++){Tv(s[f],0,o,Pv,Bv),pr.scaleAndAdd(Dv,Pv,Bv,l),Dv.transform(h);var p=e.getBoundingRect(),v=c?c.distance(Dv):e instanceof Ns?Nv(Dv,e.path,Lv):Ev(Dv,p,Lv);v<u&&(u=v,Dv.transform(d),Lv.transform(d),Lv.toArray(a[0]),Dv.toArray(a[1]),Pv.toArray(a[2]))}qv(a,t.get("minTurnAngle")),r.setShape({points:a})}}}var Gv=[],Fv=new pr;function qv(e,t){if(t<=180&&t>0){t=t/180*Math.PI,Pv.fromArray(e[0]),Dv.fromArray(e[1]),Lv.fromArray(e[2]),pr.sub(Bv,Pv,Dv),pr.sub(Rv,Lv,Dv);var r=Bv.len(),i=Rv.len();if(!(r<.001||i<.001)){Bv.scale(1/r),Rv.scale(1/i);var n=Bv.dot(Rv);if(Math.cos(t)<n){var a=Iv(Dv.x,Dv.y,Lv.x,Lv.y,Pv.x,Pv.y,Gv,!1);Fv.fromArray(Gv),Fv.scaleAndAdd(Rv,a/Math.tan(Math.PI-t));var s=Lv.x!==Dv.x?(Fv.x-Dv.x)/(Lv.x-Dv.x):(Fv.y-Dv.y)/(Lv.y-Dv.y);if(isNaN(s))return;s<0?pr.copy(Fv,Dv):s>1&&pr.copy(Fv,Lv),Fv.toArray(e[1])}}}}function jv(e,t,r){if(r<=180&&r>0){r=r/180*Math.PI,Pv.fromArray(e[0]),Dv.fromArray(e[1]),Lv.fromArray(e[2]),pr.sub(Bv,Dv,Pv),pr.sub(Rv,Lv,Dv);var i=Bv.len(),n=Rv.len();if(!(i<.001||n<.001))if(Bv.scale(1/i),Rv.scale(1/n),Bv.dot(t)<Math.cos(r)){var a=Iv(Dv.x,Dv.y,Lv.x,Lv.y,Pv.x,Pv.y,Gv,!1);Fv.fromArray(Gv);var s=Math.PI/2,o=s+Math.acos(Rv.dot(t))-r;if(o>=s)pr.copy(Fv,Lv);else{Fv.scaleAndAdd(Rv,a/Math.tan(Math.PI/2-o));var u=Lv.x!==Dv.x?(Fv.x-Dv.x)/(Lv.x-Dv.x):(Fv.y-Dv.y)/(Lv.y-Dv.y);if(isNaN(u))return;u<0?pr.copy(Fv,Dv):u>1&&pr.copy(Fv,Lv)}Fv.toArray(e[1])}}}function zv(e,t,r,i){var n="normal"===r,a=n?e:e.ensureState(r);a.ignore=t;var s=i.get("smooth");s&&!0===s&&(s=.3),a.shape=a.shape||{},s>0&&(a.shape.smooth=s);var o=i.getModel("lineStyle").getLineStyle();n?e.useStyle(o):a.style=o}function Hv(e,t){var r=t.smooth,i=t.points;if(i)if(e.moveTo(i[0][0],i[0][1]),r>0&&i.length>=3){var n=Ce(i[0],i[1]),a=Ce(i[1],i[2]);if(!n||!a)return e.lineTo(i[1][0],i[1][1]),void e.lineTo(i[2][0],i[2][1]);var s=Math.min(n,a)*r,o=Me([],i[1],i[0],s/n),u=Me([],i[1],i[2],s/a),c=Me([],o,u,.5);e.bezierCurveTo(o[0],o[1],o[0],o[1],c[0],c[1]),e.bezierCurveTo(u[0],u[1],u[0],u[1],i[2][0],i[2][1])}else for(var d=1;d<i.length;d++)e.lineTo(i[d][0],i[d][1])}function Uv(e,t,r){var i=e.getTextGuideLine(),n=e.getTextContent();if(n){for(var a=t.normal,s=a.get("show"),o=n.ignore,u=0;u<ho.length;u++){var c=ho[u],d=t[c],h="normal"===c;if(d){var l=d.get("show");if((h?o:J(n.states[c]&&n.states[c].ignore,o))||!J(l,s)){var f=h?i:i&&i.states.normal;f&&(f.ignore=!0);continue}i||(i=new Ju,e.setTextGuideLine(i),h||!o&&s||zv(i,!0,"normal",t.normal),e.stateProxy&&(i.stateProxy=e.stateProxy)),zv(i,!1,c,d)}}if(i){M(i.style,r),i.style.fill=null;var p=a.get("showAbove");(e.textGuideLineConfig=e.textGuideLineConfig||{}).showAbove=p||!1,i.buildPath=Hv}}else i&&e.removeTextGuideLine()}function Wv(e,t){t=t||"labelLine";for(var r={normal:e.getModel(t)},i=0;i<co.length;i++){var n=co[i];r[n]=e.getModel([n,t])}return r}function Kv(e,t,r,i,n,a){var s=e.length;if(!(s<2)){e.sort((function(e,r){return e.rect[t]-r.rect[t]}));for(var o,u=0,c=!1,d=[],h=0,l=0;l<s;l++){var f=e[l],p=f.rect;(o=p[t]-u)<0&&(p[t]-=o,f.label[t]-=o,c=!0);var v=Math.max(-o,0);d.push(v),h+=v,u=p[t]+p[r]}h>0&&a&&w(-h/s,0,s);var m,g,y=e[0],b=e[s-1];return x(),m<0&&_(-m,.8),g<0&&_(g,.8),x(),k(m,g,1),k(g,m,-1),x(),m<0&&S(-m),g<0&&S(g),c}function x(){m=y.rect[t]-i,g=n-b.rect[t]-b.rect[r]}function k(e,t,r){if(e<0){var i=Math.min(t,-e);if(i>0){w(i*r,0,s);var n=i+e;n<0&&_(-n*r,1)}else _(-e*r,1)}}function w(r,i,n){0!==r&&(c=!0);for(var a=i;a<n;a++){var s=e[a];s.rect[t]+=r,s.label[t]+=r}}function _(i,n){for(var a=[],o=0,u=1;u<s;u++){var c=e[u-1].rect,d=Math.max(e[u].rect[t]-c[t]-c[r],0);a.push(d),o+=d}if(o){var h=Math.min(Math.abs(i)/o,n);if(i>0)for(u=0;u<s-1;u++){w(a[u]*h,0,u+1)}else for(u=s-1;u>0;u--){w(-(a[u-1]*h),u,s)}}}function S(e){var t=e<0?-1:1;e=Math.abs(e);for(var r=Math.ceil(e/(s-1)),i=0;i<s-1;i++)if(t>0?w(r,0,i+1):w(-r,s-i-1,s),(e-=r)<=0)return}}function Xv(e,t,r,i){return Kv(e,"y","height",t,r,i)}function Yv(e){if(e){for(var t=[],r=0;r<e.length;r++)t.push(e[r].slice());return t}}function Zv(e,t){var r=e.label,i=t&&t.getTextGuideLine();return{dataIndex:e.dataIndex,dataType:e.dataType,seriesIndex:e.seriesModel.seriesIndex,text:e.label.style.text,rect:e.hostRect,labelRect:e.rect,align:r.style.align,verticalAlign:r.style.verticalAlign,labelLinePoints:Yv(i&&i.shape.points)}}var Qv=["align","verticalAlign","width","height","fontSize"],$v=new St,Jv=fn(),em=fn();function tm(e,t,r){for(var i=0;i<r.length;i++){var n=r[i];null!=t[n]&&(e[n]=t[n])}}var rm=["x","y","rotation"],im=function(){function e(){this._labelList=[],this._chartViewList=[]}return e.prototype.clearLabels=function(){this._labelList=[],this._chartViewList=[]},e.prototype._addLabel=function(e,t,r,i,n){var a=i.style,s=i.__hostTarget.textConfig||{},o=i.getComputedTransform(),u=i.getBoundingRect().plain();_r.applyTransform(u,u,o),o?$v.setLocalTransform(o):($v.x=$v.y=$v.rotation=$v.originX=$v.originY=0,$v.scaleX=$v.scaleY=1);var c,d=i.__hostTarget;if(d){c=d.getBoundingRect().plain();var h=d.getComputedTransform();_r.applyTransform(c,c,h)}var l=c&&d.getTextGuideLine();this._labelList.push({label:i,labelLine:l,seriesModel:r,dataIndex:e,dataType:t,layoutOption:n,computedLayoutOption:null,rect:u,hostRect:c,priority:c?c.width*c.height:0,defaultAttr:{ignore:i.ignore,labelGuideIgnore:l&&l.ignore,x:$v.x,y:$v.y,scaleX:$v.scaleX,scaleY:$v.scaleY,rotation:$v.rotation,style:{x:a.x,y:a.y,align:a.align,verticalAlign:a.verticalAlign,width:a.width,height:a.height,fontSize:a.fontSize},cursor:i.cursor,attachedPos:s.position,attachedRot:s.rotation}})},e.prototype.addLabelsOfSeries=function(e){var t=this;this._chartViewList.push(e);var r=e.__model,i=r.get("labelLayout");(z(i)||G(i).length)&&e.group.traverse((function(e){if(e.ignore)return!0;var n=e.getTextContent(),a=ao(e);n&&!n.disableLabelLayout&&t._addLabel(a.dataIndex,a.dataType,r,n,i)}))},e.prototype.updateLayoutConfig=function(e){var t=e.getWidth(),r=e.getHeight();function i(e,t){return function(){Vv(e,t)}}for(var n=0;n<this._labelList.length;n++){var a=this._labelList[n],s=a.label,o=s.__hostTarget,u=a.defaultAttr,c=void 0;c=(c="function"===typeof a.layoutOption?a.layoutOption(Zv(a,o)):a.layoutOption)||{},a.computedLayoutOption=c;var d=Math.PI/180;o&&o.setTextConfig({local:!1,position:null!=c.x||null!=c.y?null:u.attachedPos,rotation:null!=c.rotate?c.rotate*d:u.attachedRot,offset:[c.dx||0,c.dy||0]});var h=!1;if(null!=c.x?(s.x=Di(c.x,t),s.setStyle("x",0),h=!0):(s.x=u.x,s.setStyle("x",u.style.x)),null!=c.y?(s.y=Di(c.y,r),s.setStyle("y",0),h=!0):(s.y=u.y,s.setStyle("y",u.style.y)),c.labelLinePoints){var l=o.getTextGuideLine();l&&(l.setShape({points:c.labelLinePoints}),h=!1)}Jv(s).needsUpdateLabelLine=h,s.rotation=null!=c.rotate?c.rotate*d:u.rotation,s.scaleX=u.scaleX,s.scaleY=u.scaleY;for(var f=0;f<Qv.length;f++){var p=Qv[f];s.setStyle(p,null!=c[p]?c[p]:u.style[p])}if(c.draggable){if(s.draggable=!0,s.cursor="move",o){var v=a.seriesModel;if(null!=a.dataIndex)v=a.seriesModel.getData(a.dataType).getItemModel(a.dataIndex);s.on("drag",i(o,v.getModel("labelLine")))}}else s.off("drag"),s.cursor=u.cursor}},e.prototype.layout=function(e){var t,r=e.getWidth(),i=e.getHeight(),n=function(e){for(var t=[],r=0;r<e.length;r++){var i=e[r];if(!i.defaultAttr.ignore){var n=i.label,a=n.getComputedTransform(),s=n.getBoundingRect(),o=!a||a[1]<1e-5&&a[2]<1e-5,u=n.style.margin||0,c=s.clone();c.applyTransform(a),c.x-=u/2,c.y-=u/2,c.width+=u,c.height+=u;var d=o?new xc(s,a):null;t.push({label:n,labelLine:i.labelLine,rect:c,localRect:s,obb:d,priority:i.priority,defaultAttr:i.defaultAttr,layoutOption:i.computedLayoutOption,axisAligned:o,transform:a})}}return t}(this._labelList),a=V(n,(function(e){return"shiftX"===e.layoutOption.moveOverlap})),s=V(n,(function(e){return"shiftY"===e.layoutOption.moveOverlap}));Kv(a,"x","width",0,r,t),Xv(s,0,i),function(e){var t=[];e.sort((function(e,t){return t.priority-e.priority}));var r=new _r(0,0,0,0);function i(e){if(!e.ignore){var t=e.ensureState("emphasis");null==t.ignore&&(t.ignore=!1)}e.ignore=!0}for(var n=0;n<e.length;n++){var a=e[n],s=a.axisAligned,o=a.localRect,u=a.transform,c=a.label,d=a.labelLine;r.copy(a.rect),r.width-=.1,r.height-=.1,r.x+=.05,r.y+=.05;for(var h=a.obb,l=!1,f=0;f<t.length;f++){var p=t[f];if(r.intersect(p.rect)){if(s&&p.axisAligned){l=!0;break}if(p.obb||(p.obb=new xc(p.localRect,p.transform)),h||(h=new xc(o,u)),h.intersect(p.obb)){l=!0;break}}}l?(i(c),d&&i(d)):(c.attr("ignore",a.defaultAttr.ignore),d&&d.attr("ignore",a.defaultAttr.labelGuideIgnore),t.push(a))}}(V(n,(function(e){return e.layoutOption.hideOverlap})))},e.prototype.processLabelsOverall=function(){var e=this;L(this._chartViewList,(function(t){var r=t.__model,i=t.ignoreLabelLineUpdate,n=r.isAnimationEnabled();t.group.traverse((function(t){if(t.ignore)return!0;var a=!i,s=t.getTextContent();!a&&s&&(a=Jv(s).needsUpdateLabelLine),a&&e._updateLabelLine(t,r),n&&e._animateLabels(t,r)}))}))},e.prototype._updateLabelLine=function(e,t){var r=e.getTextContent(),i=ao(e),n=i.dataIndex;if(r&&null!=n){var a=t.getData(i.dataType),s=a.getItemModel(n),o={},u=a.getItemVisual(n,"style"),c=a.getVisual("drawType");o.stroke=u[c];var d=s.getModel("labelLine");Uv(e,Wv(s),o),Vv(e,d)}},e.prototype._animateLabels=function(e,t){var r=e.getTextContent(),i=e.getTextGuideLine();if(r&&!r.ignore&&!r.invisible&&!e.disableLabelAnimation&&!Uc(e)){var n=(f=Jv(r)).oldLayout,a=ao(e),s=a.dataIndex,o={x:r.x,y:r.y,rotation:r.rotation},u=t.getData(a.dataType);if(n){r.attr(n);var c=e.prevStates;c&&(E(c,"select")>=0&&r.attr(f.oldLayoutSelect),E(c,"emphasis")>=0&&r.attr(f.oldLayoutEmphasis)),Fc(r,o,t,s)}else if(r.attr(o),!md(r).valueAnimation){var d=J(r.style.opacity,1);r.style.opacity=0,qc(r,{style:{opacity:d}},t,s)}if(f.oldLayout=o,r.states.select){var h=f.oldLayoutSelect={};tm(h,o,rm),tm(h,r.states.select,rm)}if(r.states.emphasis){var l=f.oldLayoutEmphasis={};tm(l,o,rm),tm(l,r.states.emphasis,rm)}yd(r,s,u,t,t)}if(i&&!i.ignore&&!i.invisible){n=(f=em(i)).oldLayout;var f,p={points:i.shape.points};n?(i.attr({shape:n}),Fc(i,{shape:p},t)):(i.setShape(p),i.style.strokePercent=0,qc(i,{style:{strokePercent:1}},t)),f.oldLayout=p}},e}();function nm(e,t){function r(t,r){var i=[];return t.eachComponent({mainType:"series",subType:e,query:r},(function(e){i.push(e.seriesIndex)})),i}L([[e+"ToggleSelect","toggleSelect"],[e+"Select","select"],[e+"UnSelect","unselect"]],(function(e){t(e[0],(function(t,i,n){t=I({},t),n.dispatchAction(I(t,{type:e[1],seriesIndex:r(i,t)}))}))}))}function am(e,t,r,i,n){var a=e+t;r.isSilent(a)||i.eachComponent({mainType:"series",subType:"pie"},(function(e){for(var t=e.seriesIndex,i=n.selected,s=0;s<i.length;s++)if(i[s].seriesIndex===t){var o=e.getData(),u=ln(o,n.fromActionPayload);r.trigger(a,{type:a,seriesId:e.id,name:j(u)?o.getName(u[0]):o.getName(u),selected:I({},e.option.selectedMap)})}}))}function sm(e,t,r){for(var i;e&&(!t(e)||(i=e,!r));)e=e.__hostTarget||e.parent;return i}var om=Math.round(9*Math.random()),um=function(){function e(){this._id="__ec_inner_"+om++}return e.prototype.get=function(e){return this._guard(e)[this._id]},e.prototype.set=function(e,t){var r=this._guard(e);return"function"===typeof Object.defineProperty?Object.defineProperty(r,this._id,{value:t,enumerable:!1,configurable:!0}):r[this._id]=t,this},e.prototype.delete=function(e){return!!this.has(e)&&(delete this._guard(e)[this._id],!0)},e.prototype.has=function(e){return!!this._guard(e)[this._id]},e.prototype._guard=function(e){if(e!==Object(e))throw TypeError("Value of WeakMap is not a non-null object.");return e},e}(),cm=Ns.extend({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(e,t){var r=t.cx,i=t.cy,n=t.width/2,a=t.height/2;e.moveTo(r,i-a),e.lineTo(r+n,i+a),e.lineTo(r-n,i+a),e.closePath()}}),dm=Ns.extend({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(e,t){var r=t.cx,i=t.cy,n=t.width/2,a=t.height/2;e.moveTo(r,i-a),e.lineTo(r+n,i),e.lineTo(r,i+a),e.lineTo(r-n,i),e.closePath()}}),hm=Ns.extend({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(e,t){var r=t.x,i=t.y,n=t.width/5*3,a=Math.max(n,t.height),s=n/2,o=s*s/(a-s),u=i-a+s+o,c=Math.asin(o/s),d=Math.cos(c)*s,h=Math.sin(c),l=Math.cos(c),f=.6*s,p=.7*s;e.moveTo(r-d,u+o),e.arc(r,u,s,Math.PI-c,2*Math.PI+c),e.bezierCurveTo(r+d-h*f,u+o+l*f,r,i-p,r,i),e.bezierCurveTo(r,i-p,r-d+h*f,u+o+l*f,r-d,u+o),e.closePath()}}),lm=Ns.extend({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(e,t){var r=t.height,i=t.width,n=t.x,a=t.y,s=i/3*2;e.moveTo(n,a),e.lineTo(n+s,a+r),e.lineTo(n,a+r/4*3),e.lineTo(n-s,a+r),e.lineTo(n,a),e.closePath()}}),fm={line:function(e,t,r,i,n){n.x1=e,n.y1=t+i/2,n.x2=e+r,n.y2=t+i/2},rect:function(e,t,r,i,n){n.x=e,n.y=t,n.width=r,n.height=i},roundRect:function(e,t,r,i,n){n.x=e,n.y=t,n.width=r,n.height=i,n.r=Math.min(r,i)/4},square:function(e,t,r,i,n){var a=Math.min(r,i);n.x=e,n.y=t,n.width=a,n.height=a},circle:function(e,t,r,i,n){n.cx=e+r/2,n.cy=t+i/2,n.r=Math.min(r,i)/2},diamond:function(e,t,r,i,n){n.cx=e+r/2,n.cy=t+i/2,n.width=r,n.height=i},pin:function(e,t,r,i,n){n.x=e+r/2,n.y=t+i/2,n.width=r,n.height=i},arrow:function(e,t,r,i,n){n.x=e+r/2,n.y=t+i/2,n.width=r,n.height=i},triangle:function(e,t,r,i,n){n.cx=e+r/2,n.cy=t+i/2,n.width=r,n.height=i}},pm={};L({line:ic,rect:Ks,roundRect:Ks,square:Ks,circle:_u,diamond:dm,pin:hm,arrow:lm,triangle:cm},(function(e,t){pm[t]=new e}));var vm=Ns.extend({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},calculateTextPosition:function(e,t,r){var i=Dr(e,t,r),n=this.shape;return n&&"pin"===n.symbolType&&"inside"===t.position&&(i.y=r.y+.4*r.height),i},buildPath:function(e,t,r){var i=t.symbolType;if("none"!==i){var n=pm[i];n||(n=pm[i="rect"]),fm[i](t.x,t.y,t.width,t.height,n.shape),n.buildPath(e,n.shape,r)}}});function mm(e,t){if("image"!==this.type){var r=this.style;this.__isEmptyBrush?(r.stroke=e,r.fill=t||"#fff",r.lineWidth=2):"line"===this.shape.symbolType?r.stroke=e:r.fill=e,this.markRedraw()}}function gm(e,t,r,i,n,a,s){var o,u=0===e.indexOf("empty");return u&&(e=e.substr(5,1).toLowerCase()+e.substr(6)),(o=0===e.indexOf("image://")?Nc(e.slice(8),new _r(t,r,i,n),s?"center":"cover"):0===e.indexOf("path://")?Ec(e.slice(7),{},new _r(t,r,i,n),s?"center":"cover"):new vm({shape:{symbolType:e,x:t,y:r,width:i,height:n}})).__isEmptyBrush=u,o.setColor=mm,a&&o.setColor(a),o}function ym(e,t,r){for(var i="radial"===t.type?function(e,t,r){var i=r.width,n=r.height,a=Math.min(i,n),s=null==t.x?.5:t.x,o=null==t.y?.5:t.y,u=null==t.r?.5:t.r;return t.global||(s=s*i+r.x,o=o*n+r.y,u*=a),e.createRadialGradient(s,o,0,s,o,u)}(e,t,r):function(e,t,r){var i=null==t.x?0:t.x,n=null==t.x2?1:t.x2,a=null==t.y?0:t.y,s=null==t.y2?0:t.y2;return t.global||(i=i*r.width+r.x,n=n*r.width+r.x,a=a*r.height+r.y,s=s*r.height+r.y),i=isNaN(i)?0:i,n=isNaN(n)?1:n,a=isNaN(a)?0:a,s=isNaN(s)?0:s,e.createLinearGradient(i,a,n,s)}(e,t,r),n=t.colorStops,a=0;a<n.length;a++)i.addColorStop(n[a].offset,n[a].color);return i}function bm(e,t){if(e===t||!e&&!t)return!1;if(!e||!t||e.length!==t.length)return!0;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!0;return!1}function xm(e,t){return e&&"solid"!==e&&t>0?(t=t||1,"dashed"===e?[4*t,2*t]:"dotted"===e?[t]:W(e)?[e]:j(e)?e:null):null}var km=new hs(!0);function wm(e){var t=e.stroke;return!(null==t||"none"===t||!(e.lineWidth>0))}function _m(e){var t=e.fill;return null!=t&&"none"!==t}function Sm(e,t){if(null!=t.fillOpacity&&1!==t.fillOpacity){var r=e.globalAlpha;e.globalAlpha=t.fillOpacity*t.opacity,e.fill(),e.globalAlpha=r}else e.fill()}function Om(e,t){if(null!=t.strokeOpacity&&1!==t.strokeOpacity){var r=e.globalAlpha;e.globalAlpha=t.strokeOpacity*t.opacity,e.stroke(),e.globalAlpha=r}else e.stroke()}function Tm(e,t,r){var i=Vn(t.image,t.__image,r);if(Fn(i)){var n=e.createPattern(i,t.repeat||"repeat");if("function"===typeof DOMMatrix&&n.setTransform){var a=new DOMMatrix;a.rotateSelf(0,0,(t.rotation||0)/Math.PI*180),a.scaleSelf(t.scaleX||1,t.scaleY||1),a.translateSelf(t.x||0,t.y||0),n.setTransform(a)}return n}}var Cm=["shadowBlur","shadowOffsetX","shadowOffsetY"],Im=[["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]];function Mm(e,t,r,i,n){var a=!1;if(!i&&t===(r=r||{}))return!1;if(i||t.opacity!==r.opacity){a||(Nm(e,n),a=!0);var s=Math.max(Math.min(t.opacity,1),0);e.globalAlpha=isNaN(s)?ea.opacity:s}(i||t.blend!==r.blend)&&(a||(Nm(e,n),a=!0),e.globalCompositeOperation=t.blend||ea.blend);for(var o=0;o<Cm.length;o++){var u=Cm[o];(i||t[u]!==r[u])&&(a||(Nm(e,n),a=!0),e[u]=e.dpr*(t[u]||0))}return(i||t.shadowColor!==r.shadowColor)&&(a||(Nm(e,n),a=!0),e.shadowColor=t.shadowColor||ea.shadowColor),a}function Am(e,t,r,i,n){var a=Pm(t,n.inHover),s=i?null:r&&Pm(r,n.inHover)||{};if(a===s)return!1;var o=Mm(e,a,s,i,n);if((i||a.fill!==s.fill)&&(o||(Nm(e,n),o=!0),e.fillStyle=a.fill),(i||a.stroke!==s.stroke)&&(o||(Nm(e,n),o=!0),e.strokeStyle=a.stroke),(i||a.opacity!==s.opacity)&&(o||(Nm(e,n),o=!0),e.globalAlpha=null==a.opacity?1:a.opacity),t.hasStroke()){var u=a.lineWidth/(a.strokeNoScale&&t&&t.getLineScale?t.getLineScale():1);e.lineWidth!==u&&(o||(Nm(e,n),o=!0),e.lineWidth=u)}for(var c=0;c<Im.length;c++){var d=Im[c],h=d[0];(i||a[h]!==s[h])&&(o||(Nm(e,n),o=!0),e[h]=a[h]||d[1])}return o}function Em(e,t){var r=t.transform,i=e.dpr||1;r?e.setTransform(i*r[0],i*r[1],i*r[2],i*r[3],i*r[4],i*r[5]):e.setTransform(i,0,0,i,0,0)}function Nm(e,t){t.batchFill&&e.fill(),t.batchStroke&&e.stroke(),t.batchFill="",t.batchStroke=""}function Pm(e,t){return t&&e.__hoverStyle||e.style}function Dm(e,t){Lm(e,t,{inHover:!1,viewWidth:0,viewHeight:0},!0)}function Lm(e,t,r,i){var n=t.transform;if(!t.shouldBePainted(r.viewWidth,r.viewHeight,!1,!1))return t.__dirty&=~Yr.REDARAW_BIT,void(t.__isRendered=!1);var a=t.__clipPaths,s=r.prevElClipPaths,o=!1,u=!1;if(s&&!bm(a,s)||(s&&s.length&&(Nm(e,r),e.restore(),u=o=!0,r.prevElClipPaths=null,r.allClipped=!1,r.prevEl=null),a&&a.length&&(Nm(e,r),e.save(),function(e,t,r){for(var i=!1,n=0;n<e.length;n++){var a=e[n];i=i||a.isZeroArea(),Em(t,a),t.beginPath(),a.buildPath(t,a.shape),t.clip()}r.allClipped=i}(a,e,r),o=!0),r.prevElClipPaths=a),r.allClipped)t.__isRendered=!1;else{t.beforeBrush&&t.beforeBrush(),t.innerBeforeBrush();var c=r.prevEl;c||(u=o=!0);var d,h,l=t instanceof Ns&&t.autoBatch&&function(e){var t=_m(e),r=wm(e);return!(e.lineDash||!(+t^+r)||t&&"string"!==typeof e.fill||r&&"string"!==typeof e.stroke||e.strokePercent<1||e.strokeOpacity<1||e.fillOpacity<1)}(t.style);o||(d=n,h=c.transform,d&&h?d[0]!==h[0]||d[1]!==h[1]||d[2]!==h[2]||d[3]!==h[3]||d[4]!==h[4]||d[5]!==h[5]:d||h)?(Nm(e,r),Em(e,t)):l||Nm(e,r);var f=Pm(t,r.inHover);t instanceof Ns?(1!==r.lastDrawType&&(u=!0,r.lastDrawType=1),Am(e,t,c,u,r),l&&(r.batchFill||r.batchStroke)||e.beginPath(),function(e,t,r,i){var n=wm(r),a=_m(r),s=r.strokePercent,o=s<1,u=!t.path;t.silent&&!o||!u||t.createPathProxy();var c=t.path||km;if(!i){var d=r.fill,h=r.stroke,l=a&&!!d.colorStops,f=n&&!!h.colorStops,p=a&&!!d.image,v=n&&!!h.image,m=void 0,g=void 0,y=void 0,b=void 0,x=void 0;(l||f)&&(x=t.getBoundingRect()),l&&(m=t.__dirty?ym(e,d,x):t.__canvasFillGradient,t.__canvasFillGradient=m),f&&(g=t.__dirty?ym(e,h,x):t.__canvasStrokeGradient,t.__canvasStrokeGradient=g),p&&(y=t.__dirty||!t.__canvasFillPattern?Tm(e,d,t):t.__canvasFillPattern,t.__canvasFillPattern=y),v&&(b=t.__dirty||!t.__canvasStrokePattern?Tm(e,h,t):t.__canvasStrokePattern,t.__canvasStrokePattern=y),l?e.fillStyle=m:p&&(y?e.fillStyle=y:a=!1),f?e.strokeStyle=g:v&&(b?e.strokeStyle=b:n=!1)}var k=r.lineDash&&r.lineWidth>0&&xm(r.lineDash,r.lineWidth),w=r.lineDashOffset,_=!!e.setLineDash,S=t.getGlobalScale();if(c.setScale(S[0],S[1],t.segmentIgnoreThreshold),k){var O=r.strokeNoScale&&t.getLineScale?t.getLineScale():1;O&&1!==O&&(k=B(k,(function(e){return e/O})),w/=O)}var T=!0;(u||t.__dirty&Ns.SHAPE_CHANGED_BIT||k&&!_&&n)&&(c.setDPR(e.dpr),o?c.setContext(null):(c.setContext(e),T=!1),c.reset(),k&&!_&&(c.setLineDash(k),c.setLineDashOffset(w)),t.buildPath(c,t.shape,i),c.toStatic(),t.pathUpdated()),T&&c.rebuildPath(e,o?s:1),k&&_&&(e.setLineDash(k),e.lineDashOffset=w),i||(r.strokeFirst?(n&&Om(e,r),a&&Sm(e,r)):(a&&Sm(e,r),n&&Om(e,r))),k&&_&&e.setLineDash([])}(e,t,f,l),l&&(r.batchFill=f.fill||"",r.batchStroke=f.stroke||"")):t instanceof Ls?(3!==r.lastDrawType&&(u=!0,r.lastDrawType=3),Am(e,t,c,u,r),function(e,t,r){var i=r.text;if(null!=i&&(i+=""),i){e.font=r.font||Or,e.textAlign=r.textAlign,e.textBaseline=r.textBaseline;var n=void 0;if(e.setLineDash){var a=r.lineDash&&r.lineWidth>0&&xm(r.lineDash,r.lineWidth),s=r.lineDashOffset;if(a){var o=r.strokeNoScale&&t.getLineScale?t.getLineScale():1;o&&1!==o&&(a=B(a,(function(e){return e/o})),s/=o),e.setLineDash(a),e.lineDashOffset=s,n=!0}}r.strokeFirst?(wm(r)&&e.strokeText(i,r.x,r.y),_m(r)&&e.fillText(i,r.x,r.y)):(_m(r)&&e.fillText(i,r.x,r.y),wm(r)&&e.strokeText(i,r.x,r.y)),n&&e.setLineDash([])}}(e,t,f)):t instanceof Gs?(2!==r.lastDrawType&&(u=!0,r.lastDrawType=2),function(e,t,r,i,n){Mm(e,Pm(t,n.inHover),r&&Pm(r,n.inHover),i,n)}(e,t,c,u,r),function(e,t,r){var i=t.__image=Vn(r.image,t.__image,t,t.onload);if(i&&Fn(i)){var n=r.x||0,a=r.y||0,s=t.getWidth(),o=t.getHeight(),u=i.width/i.height;if(null==s&&null!=o?s=o*u:null==o&&null!=s?o=s/u:null==s&&null==o&&(s=i.width,o=i.height),r.sWidth&&r.sHeight){var c=r.sx||0,d=r.sy||0;e.drawImage(i,c,d,r.sWidth,r.sHeight,n,a,s,o)}else if(r.sx&&r.sy){var h=s-(c=r.sx),l=o-(d=r.sy);e.drawImage(i,c,d,h,l,n,a,s,o)}else e.drawImage(i,n,a,s,o)}}(e,t,f)):t instanceof wc&&(4!==r.lastDrawType&&(u=!0,r.lastDrawType=4),function(e,t,r){var i=t.getDisplayables(),n=t.getTemporalDisplayables();e.save();var a,s,o={prevElClipPaths:null,prevEl:null,allClipped:!1,viewWidth:r.viewWidth,viewHeight:r.viewHeight,inHover:r.inHover};for(a=t.getCursor(),s=i.length;a<s;a++){(d=i[a]).beforeBrush&&d.beforeBrush(),d.innerBeforeBrush(),Lm(e,d,o,a===s-1),d.innerAfterBrush(),d.afterBrush&&d.afterBrush(),o.prevEl=d}for(var u=0,c=n.length;u<c;u++){var d;(d=n[u]).beforeBrush&&d.beforeBrush(),d.innerBeforeBrush(),Lm(e,d,o,u===c-1),d.innerAfterBrush(),d.afterBrush&&d.afterBrush(),o.prevEl=d}t.clearTemporalDisplayables(),t.notClear=!0,e.restore()}(e,t,r)),l&&i&&Nm(e,r),t.innerAfterBrush(),t.afterBrush&&t.afterBrush(),r.prevEl=t,t.__dirty=0,t.__isRendered=!0}}var Bm,Rm=new um,Vm=new At(100),Gm=["symbol","symbolSize","symbolKeepAspect","color","backgroundColor","dashArrayX","dashArrayY","maxTileWidth","maxTileHeight"];function Fm(e,t){if("none"===e)return null;var r=t.getDevicePixelRatio(),i=t.getZr(),n="svg"===i.painter.type;e.dirty&&Rm.delete(e);var a=Rm.get(e);if(a)return a;var s=M(e,{symbol:"rect",symbolSize:1,symbolKeepAspect:!0,color:"rgba(0, 0, 0, 0.2)",backgroundColor:null,dashArrayX:5,dashArrayY:5,rotation:0,maxTileWidth:512,maxTileHeight:512});"none"===s.backgroundColor&&(s.backgroundColor=null);var o={repeat:"repeat"};return function(e){for(var t,a=[r],o=!0,u=0;u<Gm.length;++u){var c=s[Gm[u]],d=typeof c;if(null!=c&&!j(c)&&"string"!==d&&"number"!==d&&"boolean"!==d){o=!1;break}a.push(c)}if(o){t=a.join(",")+(n?"-svg":"");var h=Vm.get(t);h&&(n?e.svgElement=h:e.image=h)}var l,f=jm(s.dashArrayX),p=function(e){if(!e||"object"===typeof e&&0===e.length)return[0,0];if("number"===typeof e){var t=Math.ceil(e);return[t,t]}var r=B(e,(function(e){return Math.ceil(e)}));return e.length%2?r.concat(r):r}(s.dashArrayY),v=qm(s.symbol),m=(k=f,B(k,(function(e){return zm(e)}))),g=zm(p),y=!n&&A(),b=n&&i.painter.createSVGElement("g"),x=function(){for(var e=1,t=0,r=m.length;t<r;++t)e=$i(e,m[t]);var i=1;for(t=0,r=v.length;t<r;++t)i=$i(i,v[t].length);e*=i;var n=g*m.length*v.length;0;return{width:Math.max(1,Math.min(e,s.maxTileWidth)),height:Math.max(1,Math.min(n,s.maxTileHeight))}}();var k;y&&(y.width=x.width*r,y.height=x.height*r,l=y.getContext("2d"));(function(){l&&(l.clearRect(0,0,y.width,y.height),s.backgroundColor&&(l.fillStyle=s.backgroundColor,l.fillRect(0,0,y.width,y.height)));for(var e=0,t=0;t<p.length;++t)e+=p[t];if(e<=0)return;var a=-g,o=0,u=0,c=0;for(;a<x.height;){if(o%2===0){for(var d=u/2%v.length,h=0,m=0,k=0;h<2*x.width;){var w=0;for(t=0;t<f[c].length;++t)w+=f[c][t];if(w<=0)break;if(m%2===0){var _=.5*(1-s.symbolSize),S=h+f[c][m]*_,O=a+p[o]*_,T=f[c][m]*s.symbolSize,C=p[o]*s.symbolSize,I=k/2%v[d].length;M(S,O,T,C,v[d][I])}h+=f[c][m],++k,++m===f[c].length&&(m=0)}++c===f.length&&(c=0)}a+=p[o],++u,++o===p.length&&(o=0)}function M(e,t,a,o,u){var c=n?1:r,d=gm(u,e*c,t*c,a*c,o*c,s.color,s.symbolKeepAspect);n?b.appendChild(i.painter.paintOne(d)):Dm(l,d)}})(),o&&Vm.put(t,y||b);e.image=y,e.svgElement=b,e.svgWidth=x.width,e.svgHeight=x.height}(o),o.rotation=s.rotation,o.scaleX=o.scaleY=n?1:1/r,Rm.set(e,o),e.dirty=!1,o}function qm(e){if(!e||0===e.length)return[["rect"]];if("string"===typeof e)return[[e]];for(var t=!0,r=0;r<e.length;++r)if("string"!==typeof e[r]){t=!1;break}if(t)return qm([e]);var i=[];for(r=0;r<e.length;++r)"string"===typeof e[r]?i.push([e[r]]):i.push(e[r]);return i}function jm(e){if(!e||0===e.length)return[[0,0]];if("number"===typeof e)return[[n=Math.ceil(e),n]];for(var t=!0,r=0;r<e.length;++r)if("number"!==typeof e[r]){t=!1;break}if(t)return jm([e]);var i=[];for(r=0;r<e.length;++r)if("number"===typeof e[r]){var n=Math.ceil(e[r]);i.push([n,n])}else{(n=B(e[r],(function(e){return Math.ceil(e)}))).length%2===1?i.push(n.concat(n)):i.push(n)}return i}function zm(e){for(var t=0,r=0;r<e.length;++r)t+=e[r];return e.length%2===1?2*t:t}function Hm(e){H(e)&&(e=(new DOMParser).parseFromString(e,"text/xml"));var t=e;for(9===t.nodeType&&(t=t.firstChild);"svg"!==t.nodeName.toLowerCase()||1!==t.nodeType;)t=t.nextSibling;return t}var Um={fill:"fill",stroke:"stroke","stroke-width":"lineWidth",opacity:"opacity","fill-opacity":"fillOpacity","stroke-opacity":"strokeOpacity","stroke-dasharray":"lineDash","stroke-dashoffset":"lineDashOffset","stroke-linecap":"lineCap","stroke-linejoin":"lineJoin","stroke-miterlimit":"miterLimit","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","text-anchor":"textAlign",visibility:"visibility",display:"display"},Wm=G(Um),Km={"alignment-baseline":"textBaseline","stop-color":"stopColor"},Xm=G(Km),Ym=function(){function e(){this._defs={},this._root=null}return e.prototype.parse=function(e,t){t=t||{};var r=Hm(e);if(!r)throw new Error("Illegal svg");this._defsUsePending=[];var i=new Ti;this._root=i;var n=[],a=r.getAttribute("viewBox")||"",s=parseFloat(r.getAttribute("width")||t.width),o=parseFloat(r.getAttribute("height")||t.height);isNaN(s)&&(s=null),isNaN(o)&&(o=null),tg(r,i,null,!0,!1);for(var u,c,d=r.firstChild;d;)this._parseNode(d,i,n,null,!1,!1),d=d.nextSibling;if(function(e,t){for(var r=0;r<t.length;r++){var i=t[r];i[0].style[i[1]]=e[i[2]]}}(this._defs,this._defsUsePending),this._defsUsePending=[],a){var h=ag(a);h.length>=4&&(u={x:parseFloat(h[0]||0),y:parseFloat(h[1]||0),width:parseFloat(h[2]),height:parseFloat(h[3])})}if(u&&null!=s&&null!=o&&(c=cg(u,{x:0,y:0,width:s,height:o}),!t.ignoreViewBox)){var l=i;(i=new Ti).add(l),l.scaleX=l.scaleY=c.scale,l.x=c.x,l.y=c.y}return t.ignoreRootClip||null==s||null==o||i.setClipPath(new Ks({shape:{x:0,y:0,width:s,height:o}})),{root:i,width:s,height:o,viewBoxRect:u,viewBoxTransform:c,named:n}},e.prototype._parseNode=function(e,t,r,i,n,a){var s,o=e.nodeName.toLowerCase(),u=i;if("defs"===o&&(n=!0),"text"===o&&(a=!0),"defs"===o||"switch"===o)s=t;else{if(!n){var c=Bm[o];if(c&&le(Bm,o)){s=c.call(this,e,t);var d=e.getAttribute("name");if(d){var h={name:d,namedFrom:null,svgNodeTagLower:o,el:s};r.push(h),"g"===o&&(u=h)}else i&&r.push({name:i.name,namedFrom:i,svgNodeTagLower:o,el:s});t.add(s)}}var l=Zm[o];if(l&&le(Zm,o)){var f=l.call(this,e),p=e.getAttribute("id");p&&(this._defs[p]=f)}}if(s&&s.isGroup)for(var v=e.firstChild;v;)1===v.nodeType?this._parseNode(v,s,r,u,n,a):3===v.nodeType&&a&&this._parseText(v,s),v=v.nextSibling},e.prototype._parseText=function(e,t){var r=new Ls({style:{text:e.textContent},silent:!0,x:this._textX||0,y:this._textY||0});Jm(t,r),tg(e,r,this._defsUsePending,!1,!1),function(e,t){var r=t.__selfStyle;if(r){var i=r.textBaseline,n=i;i&&"auto"!==i?"baseline"===i?n="alphabetic":"before-edge"===i||"text-before-edge"===i?n="top":"after-edge"===i||"text-after-edge"===i?n="bottom":"central"!==i&&"mathematical"!==i||(n="middle"):n="alphabetic",e.style.textBaseline=n}var a=t.__inheritedStyle;if(a){var s=a.textAlign,o=s;s&&("middle"===s&&(o="center"),e.style.textAlign=o)}}(r,t);var i=r.style,n=i.fontSize;n&&n<9&&(i.fontSize=9,r.scaleX*=n/9,r.scaleY*=n/9);var a=(i.fontSize||i.fontFamily)&&[i.fontStyle,i.fontWeight,(i.fontSize||12)+"px",i.fontFamily||"sans-serif"].join(" ");i.font=a;var s=r.getBoundingRect();return this._textX+=s.width,t.add(r),r},e.internalField=void(Bm={g:function(e,t){var r=new Ti;return Jm(t,r),tg(e,r,this._defsUsePending,!1,!1),r},rect:function(e,t){var r=new Ks;return Jm(t,r),tg(e,r,this._defsUsePending,!1,!1),r.setShape({x:parseFloat(e.getAttribute("x")||"0"),y:parseFloat(e.getAttribute("y")||"0"),width:parseFloat(e.getAttribute("width")||"0"),height:parseFloat(e.getAttribute("height")||"0")}),r.silent=!0,r},circle:function(e,t){var r=new _u;return Jm(t,r),tg(e,r,this._defsUsePending,!1,!1),r.setShape({cx:parseFloat(e.getAttribute("cx")||"0"),cy:parseFloat(e.getAttribute("cy")||"0"),r:parseFloat(e.getAttribute("r")||"0")}),r.silent=!0,r},line:function(e,t){var r=new ic;return Jm(t,r),tg(e,r,this._defsUsePending,!1,!1),r.setShape({x1:parseFloat(e.getAttribute("x1")||"0"),y1:parseFloat(e.getAttribute("y1")||"0"),x2:parseFloat(e.getAttribute("x2")||"0"),y2:parseFloat(e.getAttribute("y2")||"0")}),r.silent=!0,r},ellipse:function(e,t){var r=new Tu;return Jm(t,r),tg(e,r,this._defsUsePending,!1,!1),r.setShape({cx:parseFloat(e.getAttribute("cx")||"0"),cy:parseFloat(e.getAttribute("cy")||"0"),rx:parseFloat(e.getAttribute("rx")||"0"),ry:parseFloat(e.getAttribute("ry")||"0")}),r.silent=!0,r},polygon:function(e,t){var r,i=e.getAttribute("points");i&&(r=eg(i));var n=new Zu({shape:{points:r||[]},silent:!0});return Jm(t,n),tg(e,n,this._defsUsePending,!1,!1),n},polyline:function(e,t){var r,i=e.getAttribute("points");i&&(r=eg(i));var n=new Ju({shape:{points:r||[]},silent:!0});return Jm(t,n),tg(e,n,this._defsUsePending,!1,!1),n},image:function(e,t){var r=new Gs;return Jm(t,r),tg(e,r,this._defsUsePending,!1,!1),r.setStyle({image:e.getAttribute("xlink:href"),x:+e.getAttribute("x"),y:+e.getAttribute("y"),width:+e.getAttribute("width"),height:+e.getAttribute("height")}),r.silent=!0,r},text:function(e,t){var r=e.getAttribute("x")||"0",i=e.getAttribute("y")||"0",n=e.getAttribute("dx")||"0",a=e.getAttribute("dy")||"0";this._textX=parseFloat(r)+parseFloat(n),this._textY=parseFloat(i)+parseFloat(a);var s=new Ti;return Jm(t,s),tg(e,s,this._defsUsePending,!1,!0),s},tspan:function(e,t){var r=e.getAttribute("x"),i=e.getAttribute("y");null!=r&&(this._textX=parseFloat(r)),null!=i&&(this._textY=parseFloat(i));var n=e.getAttribute("dx")||"0",a=e.getAttribute("dy")||"0",s=new Ti;return Jm(t,s),tg(e,s,this._defsUsePending,!1,!0),this._textX+=parseFloat(n),this._textY+=parseFloat(a),s},path:function(e,t){var r=xu(e.getAttribute("d")||"");return Jm(t,r),tg(e,r,this._defsUsePending,!1,!1),r.silent=!0,r}}),e}(),Zm={lineargradient:function(e){var t=parseInt(e.getAttribute("x1")||"0",10),r=parseInt(e.getAttribute("y1")||"0",10),i=parseInt(e.getAttribute("x2")||"10",10),n=parseInt(e.getAttribute("y2")||"0",10),a=new pc(t,r,i,n);return Qm(e,a),$m(e,a),a},radialgradient:function(e){var t=parseInt(e.getAttribute("cx")||"0",10),r=parseInt(e.getAttribute("cy")||"0",10),i=parseInt(e.getAttribute("r")||"0",10),n=new vc(t,r,i);return Qm(e,n),$m(e,n),n}};function Qm(e,t){"userSpaceOnUse"===e.getAttribute("gradientUnits")&&(t.global=!0)}function $m(e,t){for(var r=e.firstChild;r;){if(1===r.nodeType&&"stop"===r.nodeName.toLocaleLowerCase()){var i=r.getAttribute("offset"),n=void 0;n=i&&i.indexOf("%")>0?parseInt(i,10)/100:i?parseFloat(i):0;var a={};ug(r,a,a);var s=a.stopColor||r.getAttribute("stop-color")||"#000000";t.colorStops.push({offset:n,color:s})}r=r.nextSibling}}function Jm(e,t){e&&e.__inheritedStyle&&(t.__inheritedStyle||(t.__inheritedStyle={}),M(t.__inheritedStyle,e.__inheritedStyle))}function eg(e){for(var t=ag(e),r=[],i=0;i<t.length;i+=2){var n=parseFloat(t[i]),a=parseFloat(t[i+1]);r.push([n,a])}return r}function tg(e,t,r,i,n){var a=t,s=a.__inheritedStyle=a.__inheritedStyle||{},o={};1===e.nodeType&&(function(e,t){var r=e.getAttribute("transform");if(r){r=r.replace(/,/g," ");var i=[],n=null;r.replace(sg,(function(e,t,r){return i.push(t,r),""}));for(var a=i.length-1;a>0;a-=2){var s=i[a],o=void 0;switch(n=n||[1,0,0,1,0,0],i[a-1]){case"translate":o=ag(s),ft(n,n,[parseFloat(o[0]),parseFloat(o[1]||"0")]);break;case"scale":o=ag(s),vt(n,n,[parseFloat(o[0]),parseFloat(o[1]||o[0])]);break;case"rotate":o=ag(s),pt(n,n,-parseFloat(o[0])/180*Math.PI);break;case"skew":o=ag(s),console.warn("Skew transform is not supported yet");break;case"matrix":o=ag(s),n[0]=parseFloat(o[0]),n[1]=parseFloat(o[1]),n[2]=parseFloat(o[2]),n[3]=parseFloat(o[3]),n[4]=parseFloat(o[4]),n[5]=parseFloat(o[5])}}t.setLocalTransform(n)}}(e,t),ug(e,s,o),i||function(e,t,r){for(var i=0;i<Wm.length;i++){var n=Wm[i];null!=(a=e.getAttribute(n))&&(t[Um[n]]=a)}for(i=0;i<Xm.length;i++){var a;n=Xm[i];null!=(a=e.getAttribute(n))&&(r[Km[n]]=a)}}(e,s,o)),a.style=a.style||{},null!=s.fill&&(a.style.fill=ig(a,"fill",s.fill,r)),null!=s.stroke&&(a.style.stroke=ig(a,"stroke",s.stroke,r)),L(["lineWidth","opacity","fillOpacity","strokeOpacity","miterLimit","fontSize"],(function(e){null!=s[e]&&(a.style[e]=parseFloat(s[e]))})),L(["lineDashOffset","lineCap","lineJoin","fontWeight","fontFamily","fontStyle","textAlign"],(function(e){null!=s[e]&&(a.style[e]=s[e])})),n&&(a.__selfStyle=o),s.lineDash&&(a.style.lineDash=B(ag(s.lineDash),(function(e){return parseFloat(e)}))),"hidden"!==s.visibility&&"collapse"!==s.visibility||(a.invisible=!0),"none"===s.display&&(a.ignore=!0),a.z=-1e4,a.z2=-1e3}var rg=/^url\(\s*#(.*?)\)/;function ig(e,t,r,i){var n=r&&r.match(rg);if(!n)return"none"===r&&(r=null),r;var a=ne(n[1]);i.push([e,t,a])}var ng=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function ag(e){return e.match(ng)||[]}var sg=/(translate|scale|rotate|skewX|skewY|matrix)\(([\-\s0-9\.eE,]*)\)/g;var og=/([^\s:;]+)\s*:\s*([^:;]+)/g;function ug(e,t,r){var i,n=e.getAttribute("style");if(n)for(og.lastIndex=0;null!=(i=og.exec(n));){var a=i[1],s=le(Um,a)?Um[a]:null;s&&(t[s]=i[2]);var o=le(Km,a)?Km[a]:null;o&&(r[o]=i[2])}}function cg(e,t){var r=t.width/e.width,i=t.height/e.height,n=Math.min(r,i);return{scale:n,x:-(e.x+e.width/2)*n+(t.x+t.width/2),y:-(e.y+e.height/2)*n+(t.y+t.height/2)}}function dg(e,t){return Math.abs(e-t)<1e-8}function hg(e,t,r){var i=0,n=e[0];if(!n)return!1;for(var a=1;a<e.length;a++){var s=e[a];i+=bs(n[0],n[1],s[0],s[1],t,r),n=s}var o=e[0];return dg(n[0],o[0])&&dg(n[1],o[1])||(i+=bs(n[0],n[1],o[0],o[1],t,r)),0!==i}var lg=[],fg=function(){function e(e){this.name=e}return e.prototype.getCenter=function(){},e}(),pg=function(e){function t(t,r,i){var n=e.call(this,t)||this;if(n.type="geoJSON",n.geometries=r,i)i=[i[0],i[1]];else{var a=n.getBoundingRect();i=[a.x+a.width/2,a.y+a.height/2]}return n._center=i,n}return a(t,e),t.prototype.getBoundingRect=function(){var e=this._rect;if(e)return e;for(var t=Number.MAX_VALUE,r=[t,t],i=[-t,-t],n=[],a=[],s=this.geometries,o=0;o<s.length;o++){if("polygon"===s[o].type)Ga(s[o].exterior,n,a),Ee(r,r,n),Ne(i,i,a)}return 0===o&&(r[0]=r[1]=i[0]=i[1]=0),this._rect=new _r(r[0],r[1],i[0]-r[0],i[1]-r[1])},t.prototype.contain=function(e){var t=this.getBoundingRect(),r=this.geometries;if(!t.contain(e[0],e[1]))return!1;e:for(var i=0,n=r.length;i<n;i++)if("polygon"===r[i].type){var a=r[i].exterior,s=r[i].interiors;if(hg(a,e[0],e[1])){for(var o=0;o<(s?s.length:0);o++)if(hg(s[o],e[0],e[1]))continue e;return!0}}return!1},t.prototype.transformTo=function(e,t,r,i){var n=this.getBoundingRect(),a=n.width/n.height;r?i||(i=r/a):r=a*i;for(var s=new _r(e,t,r,i),o=n.calculateTransform(s),u=this.geometries,c=0;c<u.length;c++)if("polygon"===u[c].type){for(var d=u[c].exterior,h=u[c].interiors,l=0;l<d.length;l++)Ae(d[l],d[l],o);for(var f=0;f<(h?h.length:0);f++)for(l=0;l<h[f].length;l++)Ae(h[f][l],h[f][l],o)}(n=this._rect).copy(s),this._center=[n.x+n.width/2,n.y+n.height/2]},t.prototype.cloneShallow=function(e){null==e&&(e=this.name);var r=new t(e,this.geometries,this._center);return r._rect=this._rect,r.transformTo=null,r},t.prototype.getCenter=function(){return this._center},t.prototype.setCenter=function(e){this._center=e},t}(fg),vg=function(e){function t(t,r){var i=e.call(this,t)||this;return i.type="geoSVG",i._elOnlyForCalculate=r,i}return a(t,e),t.prototype.getCenter=function(){var e=this._center;return e||(e=this._center=this._calculateCenter()),e},t.prototype._calculateCenter=function(){for(var e=this._elOnlyForCalculate,t=e.getBoundingRect(),r=[t.x+t.width/2,t.y+t.height/2],i=dt(lg),n=e;n&&!n.isGeoSVGGraphicRoot;)lt(i,n.getLocalTransform(),i),n=n.parent;return mt(i,i),Ae(r,r,i),r},t}(fg),mg=ce(["rect","circle","line","ellipse","polygon","polyline","path","text","tspan","g"]),gg=function(){function e(e,t){this.type="geoSVG",this._usedGraphicMap=ce(),this._freedGraphics=[],this._mapName=e,this._parsedXML=Hm(t)}return e.prototype.load=function(){var e=this._firstGraphic;if(!e){e=this._firstGraphic=this._buildGraphic(this._parsedXML),this._freedGraphics.push(e),this._boundingRect=this._firstGraphic.boundingRect.clone();var t=function(e){var t=[],r=ce();return L(e,(function(e){if(null==e.namedFrom){var i=new vg(e.name,e.el);t.push(i),r.set(e.name,i)}})),{regions:t,regionsMap:r}}(e.named),r=t.regions,i=t.regionsMap;this._regions=r,this._regionsMap=i}return{boundingRect:this._boundingRect,regions:this._regions,regionsMap:this._regionsMap}},e.prototype._buildGraphic=function(e){var t,r,i,n;try{ie(null!=(r=(t=e&&(i=e,n={ignoreViewBox:!0,ignoreRootClip:!0},(new Ym).parse(i,n))||{}).root))}catch(g){throw new Error("Invalid svg format\n"+g.message)}var a=new Ti;a.add(r),a.isGeoSVGGraphicRoot=!0;var s=t.width,o=t.height,u=t.viewBoxRect,c=this._boundingRect;if(!c){var d=void 0,h=void 0,l=void 0,f=void 0;if(null!=s?(d=0,l=s):u&&(d=u.x,l=u.width),null!=o?(h=0,f=o):u&&(h=u.y,f=u.height),null==d||null==h){var p=r.getBoundingRect();null==d&&(d=p.x,l=p.width),null==h&&(h=p.y,f=p.height)}c=this._boundingRect=new _r(d,h,l,f)}if(u){var v=cg(u,c);r.scaleX=r.scaleY=v.scale,r.x=v.x,r.y=v.y}a.setClipPath(new Ks({shape:c.plain()}));var m=[];return L(t.named,(function(e){var t;null!=mg.get(e.svgNodeTagLower)&&(m.push(e),(t=e.el).silent=!1,t.isGroup&&t.traverse((function(e){e.silent=!1})))})),{root:a,boundingRect:c,named:m}},e.prototype.useGraphic=function(e){var t=this._usedGraphicMap,r=t.get(e);return r||(r=this._freedGraphics.pop()||this._buildGraphic(this._parsedXML),t.set(e,r),r)},e.prototype.freeGraphic=function(e){var t=this._usedGraphicMap,r=t.get(e);r&&(t.removeKey(e),this._freedGraphics.push(r))},e}();function yg(e,t,r){for(var i=[],n=t[0],a=t[1],s=0;s<e.length;s+=2){var o=e.charCodeAt(s)-64,u=e.charCodeAt(s+1)-64;o=o>>1^-(1&o),u=u>>1^-(1&u),n=o+=n,a=u+=a,i.push([o/r,u/r])}return i}function bg(e,t){return B(V((e=function(e){if(!e.UTF8Encoding)return e;var t=e,r=t.UTF8Scale;null==r&&(r=1024);for(var i=t.features,n=0;n<i.length;n++){var a=i[n].geometry;if("Polygon"===a.type)for(var s=a.coordinates,o=0;o<s.length;o++)s[o]=yg(s[o],a.encodeOffsets[o],r);else if("MultiPolygon"===a.type)for(s=a.coordinates,o=0;o<s.length;o++)for(var u=s[o],c=0;c<u.length;c++)u[c]=yg(u[c],a.encodeOffsets[o][c],r)}return t.UTF8Encoding=!1,t}(e)).features,(function(e){return e.geometry&&e.properties&&e.geometry.coordinates.length>0})),(function(e){var r=e.properties,i=e.geometry,n=[];if("Polygon"===i.type){var a=i.coordinates;n.push({type:"polygon",exterior:a[0],interiors:a.slice(1)})}"MultiPolygon"===i.type&&L(a=i.coordinates,(function(e){e[0]&&n.push({type:"polygon",exterior:e[0],interiors:e.slice(1)})}));var s=new pg(r[t||"name"],n,r.cp);return s.properties=r,s}))}for(var xg=[126,25],kg=[[[0,3.5],[7,11.2],[15,11.9],[30,7],[42,.7],[52,.7],[56,7.7],[59,.7],[64,.7],[64,0],[5,0],[0,3.5]],[[13,16.1],[19,14.7],[16,21.7],[11,23.1],[13,16.1]],[[12,32.2],[14,38.5],[15,38.5],[13,32.2],[12,32.2]],[[16,47.6],[12,53.2],[13,53.2],[18,47.6],[16,47.6]],[[6,64.4],[8,70],[9,70],[8,64.4],[6,64.4]],[[23,82.6],[29,79.8],[30,79.8],[25,82.6],[23,82.6]],[[37,70.7],[43,62.3],[44,62.3],[39,70.7],[37,70.7]],[[48,51.1],[51,45.5],[53,45.5],[50,51.1],[48,51.1]],[[51,35],[51,28.7],[53,28.7],[53,35],[51,35]],[[52,22.4],[55,17.5],[56,17.5],[53,22.4],[52,22.4]],[[58,12.6],[62,7],[63,7],[60,12.6],[58,12.6]],[[0,3.5],[0,93.1],[64,93.1],[64,0],[63,0],[63,92.4],[1,92.4],[1,3.5],[0,3.5]]],wg=0;wg<kg.length;wg++)for(var _g=0;_g<kg[wg].length;_g++)kg[wg][_g][0]/=10.5,kg[wg][_g][1]/=-14,kg[wg][_g][0]+=xg[0],kg[wg][_g][1]+=xg[1];var Sg={"\u5357\u6d77\u8bf8\u5c9b":[32,80],"\u5e7f\u4e1c":[0,-10],"\u9999\u6e2f":[10,5],"\u6fb3\u95e8":[-10,10],"\u5929\u6d25":[5,5]};var Og={Russia:[100,60],"United States":[-99,38],"United States of America":[-99,38]};var Tg=[[[123.45165252685547,25.73527164402261],[123.49731445312499,25.73527164402261],[123.49731445312499,25.750734064600884],[123.45165252685547,25.750734064600884],[123.45165252685547,25.73527164402261]]];var Cg=function(){function e(e,t,r){var i;this.type="geoJSON",this._parsedMap=ce(),this._mapName=e,this._specialAreas=r,this._geoJSON=H(i=t)?"undefined"!==typeof JSON&&JSON.parse?JSON.parse(i):new Function("return ("+i+");")():i}return e.prototype.load=function(e,t){t=t||"name";var r=this._parsedMap.get(t);if(!r){var i=this._parseToRegions(t);r=this._parsedMap.set(t,{regions:i,boundingRect:Ig(i)})}var n=ce(),a=[];return L(r.regions,(function(t){var r=t.name;e&&e.hasOwnProperty(r)&&(t=t.cloneShallow(r=e[r])),a.push(t),n.set(r,t)})),{regions:a,boundingRect:r.boundingRect||new _r(0,0,0,0),regionsMap:n}},e.prototype._parseToRegions=function(e){var t,r,i=this._mapName,n=this._geoJSON;try{t=n?bg(n,e):[]}catch(a){throw new Error("Invalid geoJson format\n"+a.message)}return r=t,"china"===i&&r.push(new pg("\u5357\u6d77\u8bf8\u5c9b",B(kg,(function(e){return{type:"polygon",exterior:e}})),xg)),L(t,(function(e){var t=e.name;!function(e,t){if("china"===e){var r=Sg[t.name];if(r){var i=t.getCenter();i[0]+=r[0]/10.5,i[1]+=-r[1]/14,t.setCenter(i)}}}(i,e),function(e,t){if("world"===e){var r=Og[t.name];if(r){var i=[r[0],r[1]];t.setCenter(i)}}}(i,e),function(e,t){"china"===e&&"\u53f0\u6e7e"===t.name&&t.geometries.push({type:"polygon",exterior:Tg[0]})}(i,e);var r=this._specialAreas&&this._specialAreas[t];r&&e.transformTo(r.left,r.top,r.width,r.height)}),this),t},e.prototype.getMapForUser=function(){return{geoJson:this._geoJSON,geoJSON:this._geoJSON,specialAreas:this._specialAreas}},e}();function Ig(e){for(var t,r=0;r<e.length;r++){var i=e[r].getBoundingRect();(t=t||i.clone()).union(i)}return t}var Mg=ce(),Ag=function(e,t,r){if(t.svg){var i=new gg(e,t.svg);Mg.set(e,i)}else{var n=t.geoJson||t.geoJSON;n&&!t.features?r=t.specialAreas:n=t;i=new Cg(e,n,r);Mg.set(e,i)}},Eg=function(e){return Mg.get(e)},Ng=function(e,t,r){var i=Mg.get(e);if(i)return i.load(t,r)},Pg=ie,Dg=L,Lg=z,Bg=K,Rg=E,Vg="undefined"!==typeof window,Gg=2e3,Fg=4500,qg={PROCESSOR:{FILTER:1e3,SERIES_FILTER:800,STATISTIC:5e3},VISUAL:{LAYOUT:1e3,PROGRESSIVE_LAYOUT:1100,GLOBAL:Gg,CHART:3e3,POST_CHART_LAYOUT:4600,COMPONENT:4e3,BRUSH:5e3,CHART_ITEM:Fg,ARIA:6e3,DECAL:7e3}},jg=/^[a-zA-Z0-9_]+$/,zg="__connectUpdateStatus";function Hg(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];if(!this.isDisposed())return Wg(this,e,t);by(this.id)}}function Ug(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return Wg(this,e,t)}}function Wg(e,t,r){return r[0]=r[0]&&r[0].toLowerCase(),Le.prototype[t].apply(e,r)}var Kg,Xg,Yg,Zg,Qg,$g,Jg,ey,ty,ry,iy,ny,ay,sy,oy,uy,cy,dy,hy,ly,fy,py=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t}(Le),vy=py.prototype;vy.on=Ug("on"),vy.off=Ug("off");var my=function(e){function t(t,r,i){var n=e.call(this,new yv)||this;n._chartsViews=[],n._chartsMap={},n._componentsViews=[],n._componentsMap={},n._pendingActions=[],i=i||{},"string"===typeof r&&(r=Cy[r]),n._dom=t;var a=n._zr=Ei(t,{renderer:i.renderer||"canvas",devicePixelRatio:i.devicePixelRatio,width:i.width,height:i.height,useDirtyRect:null!=i.useDirtyRect&&i.useDirtyRect});n._throttledZrFlush=Bp(F(a.flush,a),17),(r=O(r))&&Yl(r,!0),n._theme=r,n._locale=function(e){if(H(e)){var t=Bd[e.toUpperCase()]||{};return e===Pd||e===Dd?O(t):T(O(t),O(Bd.EN),!1)}return T(O(e),O(Bd.EN),!1)}(i.locale||Vd),n._coordSysMgr=new Tl;var s=n._api=cy(n);function o(e,t){return e.__prio-t.__prio}return ti(Ty,o),ti(wy,o),n._scheduler=new cv(n,s,wy,Ty),n._messageCenter=new py,n._labelManager=new im,n._initEvents(),n.resize=F(n.resize,n),a.animation.on("frame",n._onframe,n),ry(a,n),iy(a,n),se(n),n}return a(t,e),t.prototype._onframe=function(){if(!this._disposed){fy(this);var e=this._scheduler;if(this.__optionUpdated){var t=this.__optionUpdated.silent;this.__flagInMainProcess=!0,Kg(this),Zg.update.call(this),this._zr.flush(),this.__flagInMainProcess=!1,this.__optionUpdated=!1,ey.call(this,t),ty.call(this,t)}else if(e.unfinished){var r=1,i=this._model,n=this._api;e.unfinished=!1;do{var a=+new Date;e.performSeriesTasks(i),e.performDataProcessorTasks(i),$g(this,i),e.performVisualTasks(i),oy(this,this._model,n,"remain"),r-=+new Date-a}while(r>0&&e.unfinished);e.unfinished||this._zr.flush()}}},t.prototype.getDom=function(){return this._dom},t.prototype.getId=function(){return this.id},t.prototype.getZr=function(){return this._zr},t.prototype.setOption=function(e,t,r){if(this._disposed)by(this.id);else{var i,n,a;if(Bg(t)&&(r=t.lazyUpdate,i=t.silent,n=t.replaceMerge,a=t.transition,t=t.notMerge),this.__flagInMainProcess=!0,!this._model||t){var s=new Ml(this._api),o=this._theme,u=this._model=new wl;u.scheduler=this._scheduler,u.init(null,null,null,o,this._locale,s)}this._model.setOption(e,{replaceMerge:n},_y),hy(this,a),r?(this.__optionUpdated={silent:i},this.__flagInMainProcess=!1,this.getZr().wakeUp()):(Kg(this),Zg.update.call(this),this._zr.flush(),this.__optionUpdated=!1,this.__flagInMainProcess=!1,ey.call(this,i),ty.call(this,i))}},t.prototype.setTheme=function(){console.error("ECharts#setTheme() is DEPRECATED in ECharts 3.0")},t.prototype.getModel=function(){return this._model},t.prototype.getOption=function(){return this._model&&this._model.getOption()},t.prototype.getWidth=function(){return this._zr.getWidth()},t.prototype.getHeight=function(){return this._zr.getHeight()},t.prototype.getDevicePixelRatio=function(){return this._zr.painter.dpr||Vg&&window.devicePixelRatio||1},t.prototype.getRenderedCanvas=function(e){if(d.canvasSupported)return(e=I({},e||{})).pixelRatio=e.pixelRatio||this.getDevicePixelRatio(),e.backgroundColor=e.backgroundColor||this._model.get("backgroundColor"),this._zr.painter.getRenderedCanvas(e)},t.prototype.getSvgDataURL=function(){if(d.svgSupported){var e=this._zr;return L(e.storage.getDisplayList(),(function(e){e.stopAnimation(null,!0)})),e.painter.toDataURL()}},t.prototype.getDataURL=function(e){if(!this._disposed){var t=(e=e||{}).excludeComponents,r=this._model,i=[],n=this;Dg(t,(function(e){r.eachComponent({mainType:e},(function(e){var t=n._componentsMap[e.__viewId];t.group.ignore||(i.push(t),t.group.ignore=!0)}))}));var a="svg"===this._zr.painter.getType()?this.getSvgDataURL():this.getRenderedCanvas(e).toDataURL("image/"+(e&&e.type||"png"));return Dg(i,(function(e){e.group.ignore=!1})),a}by(this.id)},t.prototype.getConnectedDataURL=function(e){if(this._disposed)by(this.id);else if(d.canvasSupported){var t="svg"===e.type,r=this.group,i=Math.min,n=Math.max,a=1/0;if(Ay[r]){var s=a,o=a,u=-1/0,c=-1/0,h=[],l=e&&e.pixelRatio||this.getDevicePixelRatio();L(My,(function(a,d){if(a.group===r){var l=t?a.getZr().painter.getSvgDom().innerHTML:a.getRenderedCanvas(O(e)),f=a.getDom().getBoundingClientRect();s=i(f.left,s),o=i(f.top,o),u=n(f.right,u),c=n(f.bottom,c),h.push({dom:l,left:f.left,top:f.top})}}));var f=(u*=l)-(s*=l),p=(c*=l)-(o*=l),v=A(),m=Ei(v,{renderer:t?"svg":"canvas"});if(m.resize({width:f,height:p}),t){var g="";return Dg(h,(function(e){var t=e.left-s,r=e.top-o;g+='<g transform="translate('+t+","+r+')">'+e.dom+"</g>"})),m.painter.getSvgRoot().innerHTML=g,e.connectedBackgroundColor&&m.painter.setBackgroundColor(e.connectedBackgroundColor),m.refreshImmediately(),m.painter.toDataURL()}return e.connectedBackgroundColor&&m.add(new Ks({shape:{x:0,y:0,width:f,height:p},style:{fill:e.connectedBackgroundColor}})),Dg(h,(function(e){var t=new Gs({style:{x:e.left*l-s,y:e.top*l-o,image:e.dom}});m.add(t)})),m.refreshImmediately(),v.toDataURL("image/"+(e&&e.type||"png"))}return this.getDataURL(e)}},t.prototype.convertToPixel=function(e,t){return Qg(this,"convertToPixel",e,t)},t.prototype.convertFromPixel=function(e,t){return Qg(this,"convertFromPixel",e,t)},t.prototype.containPixel=function(e,t){var r;if(!this._disposed)return L(vn(this._model,e),(function(e,i){i.indexOf("Models")>=0&&L(e,(function(e){var n=e.coordinateSystem;if(n&&n.containPoint)r=r||!!n.containPoint(t);else if("seriesModels"===i){var a=this._chartsMap[e.__viewId];a&&a.containPoint&&(r=r||a.containPoint(t,e))}else 0}),this)}),this),!!r;by(this.id)},t.prototype.getVisual=function(e,t){var r=vn(this._model,e,{defaultMainType:"series"});var i=r.seriesModel.getData(),n=r.hasOwnProperty("dataIndexInside")?r.dataIndexInside:r.hasOwnProperty("dataIndex")?i.indexOfRawIndex(r.dataIndex):null;return null!=n?xv(i,n,t):kv(i,t)},t.prototype.getViewOfComponentModel=function(e){return this._componentsMap[e.__viewId]},t.prototype.getViewOfSeriesModel=function(e){return this._chartsMap[e.__viewId]},t.prototype._initEvents=function(){var e,t,r,i=this;Dg(yy,(function(e){var t=function(t){var r,n=i.getModel(),a=t.target;if("globalout"===e?r={}:a&&sm(a,(function(e){var t=ao(e);if(t&&null!=t.dataIndex){var i=t.dataModel||n.getSeriesByIndex(t.seriesIndex);return r=i&&i.getDataParams(t.dataIndex,t.dataType)||{},!0}if(t.eventData)return r=I({},t.eventData),!0}),!0),r){var s=r.componentType,o=r.componentIndex;"markLine"!==s&&"markPoint"!==s&&"markArea"!==s||(s="series",o=r.seriesIndex);var u=s&&null!=o&&n.getComponent(s,o),c=u&&i["series"===u.mainType?"_chartsMap":"_componentsMap"][u.__viewId];0,r.event=t,r.type=e,i._$eventProcessor.eventInfo={targetEl:a,packedEvent:r,model:u,view:c},i.trigger(e,r)}};t.zrEventfulCallAtLast=!0,i._zr.on(e,t,i)})),Dg(ky,(function(e,t){i._messageCenter.on(t,(function(e){this.trigger(t,e)}),i)})),Dg(["selectchanged"],(function(e){i._messageCenter.on(e,(function(t){this.trigger(e,t)}),i)})),e=this._messageCenter,t=this,r=this._api,e.on("selectchanged",(function(e){var i=r.getModel();e.isFromClick?(am("map","selectchanged",t,i,e),am("pie","selectchanged",t,i,e)):"select"===e.fromAction?(am("map","selected",t,i,e),am("pie","selected",t,i,e)):"unselect"===e.fromAction&&(am("map","unselected",t,i,e),am("pie","unselected",t,i,e))}))},t.prototype.isDisposed=function(){return this._disposed},t.prototype.clear=function(){this._disposed?by(this.id):this.setOption({series:[]},!0)},t.prototype.dispose=function(){if(this._disposed)by(this.id);else{this._disposed=!0,xn(this.getDom(),Ny,"");var e=this._api,t=this._model;Dg(this._componentsViews,(function(r){r.dispose(t,e)})),Dg(this._chartsViews,(function(r){r.dispose(t,e)})),this._zr.dispose(),delete My[this.id]}},t.prototype.resize=function(e){if(this._disposed)by(this.id);else{this._zr.resize(e);var t=this._model;if(this._loadingFX&&this._loadingFX.resize(),t){var r=t.resetOption("media"),i=e&&e.silent;this.__flagInMainProcess=!0,r&&Kg(this),Zg.update.call(this,{type:"resize",animation:I({duration:0},e&&e.animation)}),this.__flagInMainProcess=!1,ey.call(this,i),ty.call(this,i)}}},t.prototype.showLoading=function(e,t){if(this._disposed)by(this.id);else if(Bg(e)&&(t=e,e=""),e=e||"default",this.hideLoading(),Iy[e]){var r=Iy[e](this._api,t),i=this._zr;this._loadingFX=r,i.add(r)}},t.prototype.hideLoading=function(){this._disposed?by(this.id):(this._loadingFX&&this._zr.remove(this._loadingFX),this._loadingFX=null)},t.prototype.makeActionFromEvent=function(e){var t=I({},e);return t.type=ky[e.type],t},t.prototype.dispatchAction=function(e,t){if(this._disposed)by(this.id);else if(Bg(t)||(t={silent:!!t}),xy[e.type]&&this._model)if(this.__flagInMainProcess)this._pendingActions.push(e);else{var r=t.silent;Jg.call(this,e,r);var i=t.flush;i?this._zr.flush():!1!==i&&d.browser.weChat&&this._throttledZrFlush(),ey.call(this,r),ty.call(this,r)}},t.prototype.updateLabelLayout=function(){var e=this._labelManager;e.updateLayoutConfig(this._api),e.layout(this._api),e.processLabelsOverall()},t.prototype.appendData=function(e){if(this._disposed)by(this.id);else{var t=e.seriesIndex;0,this.getModel().getSeriesByIndex(t).appendData(e),this._scheduler.unfinished=!0,this.getZr().wakeUp()}},t.internalField=function(){function e(e){for(var t=[],r=e.currentStates,i=0;i<r.length;i++){var n=r[i];"emphasis"!==n&&"blur"!==n&&"select"!==n&&t.push(n)}e.selected&&e.states.select&&t.push("select"),2===e.hoverState&&e.states.emphasis?t.push("emphasis"):1===e.hoverState&&e.states.blur&&t.push("blur"),e.useStates(t)}function t(e,t){e.preventAutoZ||r(t.group,e.get("z")||0,e.get("zlevel")||0,-1/0)}function r(e,t,i,n){var a=e.getTextContent(),s=e.getTextGuideLine();if(e.isGroup)for(var o=e.childrenRef(),u=0;u<o.length;u++)n=Math.max(r(o[u],t,i,n),n);else e.z=t,e.zlevel=i,n=Math.max(e.z2,n);if(a&&(a.z=t,a.zlevel=i,isFinite(n)&&(a.z2=n+2)),s){var c=e.textGuideLineConfig;s.z=t,s.zlevel=i,isFinite(n)&&(s.z2=n+(c&&c.showAbove?1:-1))}return n}function i(e,t){t.group.traverse((function(e){if(!Uc(e)){var t=e.getTextContent(),r=e.getTextGuideLine();e.stateTransition&&(e.stateTransition=null),t&&t.stateTransition&&(t.stateTransition=null),r&&r.stateTransition&&(r.stateTransition=null),e.hasState()?(e.prevStates=e.currentStates,e.clearStates()):e.prevStates&&(e.prevStates=null)}}))}function n(t,r){var i=t.getModel("stateAnimation"),n=t.isAnimationEnabled(),a=i.get("duration"),s=a>0?{duration:a,delay:i.get("delay"),easing:i.get("easing")}:null;r.group.traverse((function(t){if(t.states&&t.states.emphasis){if(Uc(t))return;if(t instanceof Ns&&function(e){var t=uo(e);t.normalFill=e.style.fill,t.normalStroke=e.style.stroke;var r=e.states.select||{};t.selectFill=r.style&&r.style.fill||null,t.selectStroke=r.style&&r.style.stroke||null}(t),t.__dirty){var r=t.prevStates;r&&t.useStates(r)}if(n){t.stateTransition=s;var i=t.getTextContent(),a=t.getTextGuideLine();i&&(i.stateTransition=s),a&&(a.stateTransition=s)}t.__dirty&&e(t)}}))}Kg=function(e){var t=e._scheduler;t.restorePipelines(e._model),t.prepareStageTasks(),Xg(e,!0),Xg(e,!1),t.plan()},Xg=function(e,t){for(var r=e._model,i=e._scheduler,n=t?e._componentsViews:e._chartsViews,a=t?e._componentsMap:e._chartsMap,s=e._zr,o=e._api,u=0;u<n.length;u++)n[u].__alive=!1;function c(e){var u=e.__requireNewView;e.__requireNewView=!1;var c="_ec_"+e.id+"_"+e.type,d=!u&&a[c];if(!d){var h=On(e.type);0,(d=new(t?wp.getClass(h.main,h.sub):Np.getClass(h.sub))).init(r,o),a[c]=d,n.push(d),s.add(d.group)}e.__viewId=d.__id=c,d.__alive=!0,d.__model=e,d.group.__ecComponentInfo={mainType:e.mainType,index:e.componentIndex},!t&&i.prepareView(d,e,r,o)}t?r.eachComponent((function(e,t){"series"!==e&&c(t)})):r.eachSeries(c);for(u=0;u<n.length;){var d=n[u];d.__alive?u++:(!t&&d.renderTask.dispose(),s.remove(d.group),d.dispose(r,o),n.splice(u,1),a[d.__id]===d&&delete a[d.__id],d.__id=d.group.__ecComponentInfo=null)}},Yg=function(e,t,r,i,n){var a=e._model;if(a.setUpdatePayload(r),i){var s={};s[i+"Id"]=r[i+"Id"],s[i+"Index"]=r[i+"Index"],s[i+"Name"]=r[i+"Name"];var o={mainType:i,query:s};n&&(o.subType=n);var u,c=r.excludeSeriesId;null!=c&&(u=ce(),Dg(tn(c),(function(e){var t=cn(e,null);null!=t&&u.set(t,!0)}))),ru(r)&&jo(e._api),a&&a.eachComponent(o,(function(t){if(!u||null==u.get(t.id)){if(ru(r))if(t instanceof xp)r.type!==fo||r.notBlur||function(e,t,r){var i=e.seriesIndex,n=e.getData(t.dataType),a=ln(n,t);a=(j(a)?a[0]:a)||0;var s=n.getItemGraphicEl(a);if(!s)for(var o=n.count(),u=0;!s&&u<o;)s=n.getItemGraphicEl(u++);if(s){var c=ao(s);zo(i,c.focus,c.blurScope,r)}else{var d=e.get(["emphasis","focus"]),h=e.get(["emphasis","blurScope"]);null!=d&&zo(i,d,h,r)}}(t,r,e._api);else{var n=Uo(t.mainType,t.componentIndex,r.name,e._api),a=n.focusSelf,s=n.dispatchers;r.type===fo&&a&&!r.notBlur&&Ho(t.mainType,t.componentIndex,e._api),s&&Dg(s,(function(e){r.type===fo?Lo(e):Bo(e)}))}else tu(r)&&t instanceof xp&&(!function(e,t,r){if(tu(t)){var i=t.dataType,n=ln(e.getData(i),t);j(n)||(n=[n]),e[t.type===go?"toggleSelect":t.type===vo?"select":"unselect"](n,i)}}(t,r,e._api),Wo(t),ly(e));d(e["series"===i?"_chartsMap":"_componentsMap"][t.__viewId])}}),e)}else Dg([].concat(e._componentsViews).concat(e._chartsViews),d);function d(i){i&&i.__alive&&i[t]&&i[t](i.__model,a,e._api,r)}},Zg={prepareAndUpdate:function(e){Kg(this),Zg.update.call(this,e)},update:function(e){var t=this._model,r=this._api,i=this._zr,n=this._coordSysMgr,a=this._scheduler;if(t){t.setUpdatePayload(e),a.restoreData(t,e),a.performSeriesTasks(t),n.create(t,r),a.performDataProcessorTasks(t,e),$g(this,t),n.update(t,r),ny(t),a.performVisualTasks(t,e),ay(this,t,r,e);var s=t.get("backgroundColor")||"transparent",o=t.get("darkMode");if(d.canvasSupported)i.setBackgroundColor(s),null!=o&&"auto"!==o&&i.setDarkMode(o);else{var u=zt(s);s=Zt(u,"rgb"),0===u[3]&&(s="transparent")}uy(t,r)}},updateTransform:function(e){var t=this,r=this._model,i=this._api;if(r){r.setUpdatePayload(e);var n=[];r.eachComponent((function(a,s){if("series"!==a){var o=t.getViewOfComponentModel(s);if(o&&o.__alive)if(o.updateTransform){var u=o.updateTransform(s,r,i,e);u&&u.update&&n.push(o)}else n.push(o)}}));var a=ce();r.eachSeries((function(n){var s=t._chartsMap[n.__viewId];if(s.updateTransform){var o=s.updateTransform(n,r,i,e);o&&o.update&&a.set(n.uid,1)}else a.set(n.uid,1)})),ny(r),this._scheduler.performVisualTasks(r,e,{setDirty:!0,dirtyMap:a}),oy(this,r,i,e,a),uy(r,this._api)}},updateView:function(e){var t=this._model;t&&(t.setUpdatePayload(e),Np.markUpdateMethod(e,"updateView"),ny(t),this._scheduler.performVisualTasks(t,e,{setDirty:!0}),ay(this,this._model,this._api,e),uy(t,this._api))},updateVisual:function(e){var t=this,r=this._model;r&&(r.setUpdatePayload(e),r.eachSeries((function(e){e.getData().clearAllVisual()})),Np.markUpdateMethod(e,"updateVisual"),ny(r),this._scheduler.performVisualTasks(r,e,{visualType:"visual",setDirty:!0}),r.eachComponent((function(i,n){if("series"!==i){var a=t.getViewOfComponentModel(n);a&&a.__alive&&a.updateVisual(n,r,t._api,e)}})),r.eachSeries((function(i){t._chartsMap[i.__viewId].updateVisual(i,r,t._api,e)})),uy(r,this._api))},updateLayout:function(e){Zg.update.call(this,e)}},Qg=function(e,t,r,i){if(e._disposed)by(e.id);else{for(var n,a=e._model,s=e._coordSysMgr.getCoordinateSystems(),o=vn(a,r),u=0;u<s.length;u++){var c=s[u];if(c[t]&&null!=(n=c[t](a,o,i)))return n}0}},$g=function(e,t){var r=e._chartsMap,i=e._scheduler;t.eachSeries((function(e){i.updateStreamModes(e,r[e.__viewId])}))},Jg=function(e,t){var r=this,i=this.getModel(),n=e.type,a=e.escapeConnect,s=xy[n],o=s.actionInfo,u=(o.update||"update").split(":"),c=u.pop(),d=null!=u[0]&&On(u[0]);this.__flagInMainProcess=!0;var h=[e],l=!1;e.batch&&(l=!0,h=B(e.batch,(function(t){return(t=M(I({},t),e)).batch=null,t})));var f,p=[],v=tu(e),m=ru(e);if(Dg(h,(function(t){if((f=(f=s.action(t,r._model,r._api))||I({},t)).type=o.event||f.type,p.push(f),m){var i=mn(e),n=i.queryOptionMap,a=i.mainTypeSpecified?n.keys()[0]:"series";Yg(r,c,t,a),ly(r)}else v?(Yg(r,c,t,"series"),ly(r)):d&&Yg(r,c,t,d.main,d.sub)})),"none"===c||m||v||d||(this.__optionUpdated?(Kg(this),Zg.update.call(this,e),this.__optionUpdated=!1):Zg[c].call(this,e)),f=l?{type:o.event||n,escapeConnect:a,batch:p}:p[0],this.__flagInMainProcess=!1,!t){var g=this._messageCenter;if(g.trigger(f.type,f),v){var y={type:"selectchanged",escapeConnect:a,selected:Ko(i),isFromClick:e.isFromClick||!1,fromAction:e.type,fromActionPayload:e};g.trigger(y.type,y)}}},ey=function(e){for(var t=this._pendingActions;t.length;){var r=t.shift();Jg.call(this,r,e)}},ty=function(e){!e&&this.trigger("updated")},ry=function(e,t){e.on("rendered",(function(r){t.trigger("rendered",r),!e.animation.isFinished()||t.__optionUpdated||t._scheduler.unfinished||t._pendingActions.length||t.trigger("finished")}))},iy=function(e,t){e.on("mouseover",(function(e){var r=sm(e.target,eu);r&&(!function(e,t,r){var i=ao(e),n=Uo(i.componentMainType,i.componentIndex,i.componentHighDownName,r),a=n.dispatchers,s=n.focusSelf;a?(s&&Ho(i.componentMainType,i.componentIndex,r),L(a,(function(e){return Po(e,t)}))):(zo(i.seriesIndex,i.focus,i.blurScope,r),"self"===i.focus&&Ho(i.componentMainType,i.componentIndex,r),Po(e,t))}(r,e,t._api),ly(t))})).on("mouseout",(function(e){var r=sm(e.target,eu);r&&(!function(e,t,r){jo(r);var i=ao(e),n=Uo(i.componentMainType,i.componentIndex,i.componentHighDownName,r).dispatchers;n?L(n,(function(e){return Do(e,t)})):Do(e,t)}(r,e,t._api),ly(t))})).on("click",(function(e){var r=sm(e.target,(function(e){return null!=ao(e).dataIndex}),!0);if(r){var i=r.selected?"unselect":"select",n=ao(r);t._api.dispatchAction({type:i,dataType:n.dataType,dataIndexInside:n.dataIndex,seriesIndex:n.seriesIndex,isFromClick:!0})}}))},ny=function(e){e.clearColorPalette(),e.eachSeries((function(e){e.clearColorPalette()}))},ay=function(e,t,r,i){sy(e,t,r,i),Dg(e._chartsViews,(function(e){e.__alive=!1})),oy(e,t,r,i),Dg(e._chartsViews,(function(e){e.__alive||e.remove(t,r)}))},sy=function(e,r,a,s,o){Dg(o||e._componentsViews,(function(e){var o=e.__model;i(o,e),e.render(o,r,a,s),t(o,e),n(o,e)}))},oy=function(e,r,a,s,o){var u=e._scheduler,c=e._labelManager;c.clearLabels();var h=!1;r.eachSeries((function(t){var r=e._chartsMap[t.__viewId];r.__alive=!0;var n=r.renderTask;u.updatePayload(n,s),i(t,r),o&&o.get(t.uid)&&n.dirty(),n.perform(u.getPerformArgs(n))&&(h=!0),t.__transientTransitionOpt=null,r.group.silent=!!t.get("silent"),function(e,t){var r=e.get("blendMode")||null;0;t.group.traverse((function(e){e.isGroup||(e.style.blend=r),e.eachPendingDisplayable&&e.eachPendingDisplayable((function(e){e.style.blend=r}))}))}(t,r),Wo(t),c.addLabelsOfSeries(r)})),u.unfinished=h||u.unfinished,c.updateLayoutConfig(a),c.layout(a),c.processLabelsOverall(),r.eachSeries((function(r){var i=e._chartsMap[r.__viewId];t(r,i),n(r,i)})),function(e,t){var r=e._zr.storage,i=0;r.traverse((function(e){e.isGroup||i++})),i>t.get("hoverLayerThreshold")&&!d.node&&!d.worker&&t.eachSeries((function(t){if(!t.preventUsingHoverLayer){var r=e._chartsMap[t.__viewId];r.__alive&&r.group.traverse((function(e){e.states.emphasis&&(e.states.emphasis.hoverLayer=!0)}))}}))}(e,r)},uy=function(e,t){Dg(Oy,(function(r){r(e,t)}))},ly=function(e){e.__needsUpdateStatus=!0,e.getZr().wakeUp()},fy=function(t){t.__needsUpdateStatus&&(t.getZr().storage.traverse((function(t){Uc(t)||e(t)})),t.__needsUpdateStatus=!1)},cy=function(e){return new(function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return a(r,t),r.prototype.getCoordinateSystems=function(){return e._coordSysMgr.getCoordinateSystems()},r.prototype.getComponentByElement=function(t){for(;t;){var r=t.__ecComponentInfo;if(null!=r)return e._model.getComponent(r.mainType,r.index);t=t.parent}},r.prototype.enterEmphasis=function(t,r){Lo(t,r),ly(e)},r.prototype.leaveEmphasis=function(t,r){Bo(t,r),ly(e)},r.prototype.enterBlur=function(t){Ro(t),ly(e)},r.prototype.leaveBlur=function(t){Vo(t),ly(e)},r.prototype.enterSelect=function(t){Go(t),ly(e)},r.prototype.leaveSelect=function(t){Fo(t),ly(e)},r.prototype.getModel=function(){return e.getModel()},r.prototype.getViewOfComponentModel=function(t){return e.getViewOfComponentModel(t)},r.prototype.getViewOfSeriesModel=function(t){return e.getViewOfSeriesModel(t)},r}(Sl))(e)},dy=function(e){function t(e,t){for(var r=0;r<e.length;r++){e[r][zg]=t}}Dg(ky,(function(r,i){e._messageCenter.on(i,(function(r){if(Ay[e.group]&&0!==e[zg]){if(r&&r.escapeConnect)return;var i=e.makeActionFromEvent(r),n=[];Dg(My,(function(t){t!==e&&t.group===e.group&&n.push(t)})),t(n,0),Dg(n,(function(e){1!==e[zg]&&e.dispatchAction(i)})),t(n,2)}}))}))},hy=function(e,t){var r=e._model;L(tn(t),(function(e){var t,i=e.from,n=e.to;null==n&&Mf(t);var a={includeMainTypes:["series"],enableAll:!1,enableNone:!1},s=i?vn(r,i,a):null,o=vn(r,n,a).seriesModel;null==o&&(t=""),s&&s.seriesModel!==o&&(t=""),null!=t&&Mf(t),o.__transientTransitionOpt={from:i?i.dimension:null,to:n.dimension,dividingMethod:e.dividingMethod}}))}}(),t}(Le),gy=my.prototype;gy.on=Hg("on"),gy.off=Hg("off"),gy.one=function(e,t,r){var i=this;this.on.call(this,e,(function r(){for(var n=[],a=0;a<arguments.length;a++)n[a]=arguments[a];t&&t.apply&&t.apply(this,n),i.off(e,r)}),r)};var yy=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"];function by(e){0}var xy={},ky={},wy=[],_y=[],Sy=[],Oy=[],Ty=[],Cy={},Iy={},My={},Ay={},Ey=+new Date-0,Ny=(new Date,"_echarts_instance_");function Py(e,t,r){var i=Dy(e);if(i)return i;var n=new my(e,t,r);return n.id="ec_"+Ey++,My[n.id]=n,xn(e,Ny,n.id),dy(n),Dg(Sy,(function(e){e(n)})),n}function Dy(e){return My[function(e,t){return e.getAttribute?e.getAttribute(t):e[t]}(e,Ny)]}function Ly(e,t){Cy[e]=t}function By(e){Rg(_y,e)<0&&_y.push(e)}function Ry(e,t){qy(wy,e,t,2e3)}function Vy(e,t,r){"function"===typeof t&&(r=t,t="");var i=Bg(e)?e.type:[e,e={event:t}][0];e.event=(e.event||i).toLowerCase(),t=e.event,ky[t]||(Pg(jg.test(i)&&jg.test(t)),xy[i]||(xy[i]={action:r,actionInfo:e}),ky[t]=i)}function Gy(e,t){qy(Ty,e,t,3e3,"visual")}var Fy=[];function qy(e,t,r,i,n){if((Lg(t)||Bg(t))&&(r=t,t=i),!(Rg(Fy,r)>=0)){Fy.push(r);var a=cv.wrapStageHandler(r,n);a.__prio=t,a.__raw=r,e.push(a)}}function jy(e,t){Iy[e]=t}var zy=function(e){var t=(e=O(e)).type;t||Mf("");var r=t.split(":");2!==r.length&&Mf("");var i=!1;"echarts"===r[0]&&(t=r[1],i=!0),e.__isBuiltIn=i,zf.set(t,e)};Gy(Gg,zp),Gy(Fg,Up),Gy(Fg,Wp),Gy(Gg,bv),Gy(Fg,{createOnAllSeries:!0,performRawSeries:!0,reset:function(e,t){if(e.hasSymbolVisual&&!t.isSeriesFiltered(e))return{dataEach:e.getData().hasItemOption?function(e,t){var r=e.getItemModel(t),i=r.getShallow("symbol",!0),n=r.getShallow("symbolSize",!0),a=r.getShallow("symbolRotate",!0),s=r.getShallow("symbolOffset",!0),o=r.getShallow("symbolKeepAspect",!0);null!=i&&e.setItemVisual(t,"symbol",i),null!=n&&e.setItemVisual(t,"symbolSize",n),null!=a&&e.setItemVisual(t,"symbolRotate",a),null!=s&&e.setItemVisual(t,"symbolOffset",s),null!=o&&e.setItemVisual(t,"symbolKeepAspect",o)}:null}}}),Gy(7e3,(function(e,t){e.eachRawSeries((function(r){if(!e.isSeriesFiltered(r)){var i=r.getData();i.hasItemVisual()&&i.each((function(e){var r=i.getItemVisual(e,"decal");r&&(i.ensureUniqueItemVisual(e,"style").decal=Fm(r,t))}));var n=i.getVisual("decal");if(n)i.getVisual("style").decal=Fm(n,t)}}))})),By(Yl),Ry(900,(function(e){var t=ce();e.eachSeries((function(e){var r=e.get("stack");if(r){var i=t.get(r)||t.set(r,[]),n=e.getData(),a={stackResultDimension:n.getCalculationInfo("stackResultDimension"),stackedOverDimension:n.getCalculationInfo("stackedOverDimension"),stackedDimension:n.getCalculationInfo("stackedDimension"),stackedByDimension:n.getCalculationInfo("stackedByDimension"),isStackedByIndex:n.getCalculationInfo("isStackedByIndex"),data:n,seriesModel:e};if(!a.stackedDimension||!a.isStackedByIndex&&!a.stackedByDimension)return;i.length&&n.setCalculationInfo("stackedOnSeries",i[i.length-1].seriesModel),i.push(a)}})),t.each(Zl)})),jy("default",(function(e,t){M(t=t||{},{text:"loading",textColor:"#000",fontSize:12,fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif",maskColor:"rgba(255, 255, 255, 0.8)",showSpinner:!0,color:"#5470c6",spinnerRadius:10,lineWidth:5,zlevel:0});var r=new Ti,i=new Ks({style:{fill:t.maskColor},zlevel:t.zlevel,z:1e4});r.add(i);var n,a=new no({style:{text:t.text,fill:t.textColor,fontSize:t.fontSize,fontWeight:t.fontWeight,fontStyle:t.fontStyle,fontFamily:t.fontFamily},zlevel:t.zlevel,z:10001}),s=new Ks({style:{fill:"none"},textContent:a,textConfig:{position:"right",distance:10},zlevel:t.zlevel,z:10001});return r.add(s),t.showSpinner&&((n=new hc({shape:{startAngle:-Kp/2,endAngle:-Kp/2+.1,r:t.spinnerRadius},style:{stroke:t.color,lineCap:"round",lineWidth:t.lineWidth},zlevel:t.zlevel,z:10001})).animateShape(!0).when(1e3,{endAngle:3*Kp/2}).start("circularInOut"),n.animateShape(!0).when(1e3,{startAngle:3*Kp/2}).delay(300).start("circularInOut"),r.add(n)),r.resize=function(){var r=a.getBoundingRect().width,o=t.showSpinner?t.spinnerRadius:0,u=(e.getWidth()-2*o-(t.showSpinner&&r?10:0)-r)/2-(t.showSpinner&&r?0:5+r/2)+(t.showSpinner?0:r/2)+(r?0:o),c=e.getHeight()/2;t.showSpinner&&n.setShape({cx:u,cy:c}),s.setShape({x:u-o,y:c-o,width:2*o,height:2*o}),i.setShape({x:0,y:0,width:e.getWidth(),height:e.getHeight()})},r.resize(),r})),Vy({type:fo,event:fo,update:fo},fe),Vy({type:po,event:po,update:po},fe),Vy({type:vo,event:vo,update:vo},fe),Vy({type:mo,event:mo,update:mo},fe),Vy({type:go,event:go,update:go},fe),Ly("light",hv),Ly("dark",gv);var Hy=[],Uy={registerPreprocessor:By,registerProcessor:Ry,registerPostInit:function(e){Rg(Sy,e)<0&&e&&Sy.push(e)},registerPostUpdate:function(e){Rg(Oy,e)<0&&e&&Oy.push(e)},registerAction:Vy,registerCoordinateSystem:function(e,t){Tl.register(e,t)},registerLayout:function(e,t){qy(Ty,e,t,1e3,"layout")},registerVisual:Gy,registerTransform:zy,registerLoading:jy,registerMap:function(e,t,r){Ag(e,t,r)},PRIORITY:qg,ComponentModel:qh,ComponentView:wp,SeriesModel:xp,ChartView:Np,registerComponentModel:function(e){qh.registerClass(e)},registerComponentView:function(e){wp.registerClass(e)},registerSeriesModel:function(e){xp.registerClass(e)},registerChartView:function(e){Np.registerClass(e)},registerSubTypeDefaulter:function(e,t){qh.registerSubTypeDefaulter(e,t)},registerPainter:function(e,t){var r;r=t,Ii[e]=r}};function Wy(e){j(e)?L(e,(function(e){Wy(e)})):E(Hy,e)>=0||(Hy.push(e),z(e)&&(e={install:e}),e.install(Uy))}function Ky(){return!1}function Xy(e,t,r){var i=A(),n=t.getWidth(),a=t.getHeight(),s=i.style;return s&&(s.position="absolute",s.left="0",s.top="0",s.width=n+"px",s.height=a+"px",i.setAttribute("data-zr-dom-id",e)),i.width=n*r,i.height=a*r,i}var Yy=function(e){function t(t,r,i){var n,a=e.call(this)||this;a.motionBlur=!1,a.lastFrameAlpha=.7,a.dpr=1,a.virtual=!1,a.config={},a.incremental=!1,a.zlevel=0,a.maxRepaintRectCount=5,a.__dirty=!0,a.__firstTimePaint=!0,a.__used=!1,a.__drawIndex=0,a.__startIndex=0,a.__endIndex=0,a.__prevStartIndex=null,a.__prevEndIndex=null,i=i||Br,"string"===typeof t?n=Xy(t,r,i):K(t)&&(t=(n=t).id),a.id=t,a.dom=n;var s=n.style;return s&&(n.onselectstart=Ky,s.webkitUserSelect="none",s.userSelect="none",s.webkitTapHighlightColor="rgba(0,0,0,0)",s["-webkit-touch-callout"]="none",s.padding="0",s.margin="0",s.borderWidth="0"),a.domBack=null,a.ctxBack=null,a.painter=r,a.config=null,a.dpr=i,a}return ve(t,e),t.prototype.getElementCount=function(){return this.__endIndex-this.__startIndex},t.prototype.afterBrush=function(){this.__prevStartIndex=this.__startIndex,this.__prevEndIndex=this.__endIndex},t.prototype.initContext=function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},t.prototype.setUnpainted=function(){this.__firstTimePaint=!0},t.prototype.createBackBuffer=function(){var e=this.dpr;this.domBack=Xy("back-"+this.id,this.painter,e),this.ctxBack=this.domBack.getContext("2d"),1!==e&&this.ctxBack.scale(e,e)},t.prototype.createRepaintRects=function(e,t,r,i){if(this.__firstTimePaint)return this.__firstTimePaint=!1,null;var n,a=[],s=this.maxRepaintRectCount,o=!1,u=new _r(0,0,0,0);function c(e){if(e.isFinite()&&!e.isZero())if(0===a.length){(t=new _r(0,0,0,0)).copy(e),a.push(t)}else{for(var t,r=!1,i=1/0,n=0,c=0;c<a.length;++c){var d=a[c];if(d.intersect(e)){var h=new _r(0,0,0,0);h.copy(d),h.union(e),a[c]=h,r=!0;break}if(o){u.copy(e),u.union(d);var l=e.width*e.height,f=d.width*d.height,p=u.width*u.height-l-f;p<i&&(i=p,n=c)}}if(o&&(a[n].union(e),r=!0),!r)(t=new _r(0,0,0,0)).copy(e),a.push(t);o||(o=a.length>=s)}}for(var d=this.__startIndex;d<this.__endIndex;++d){if(f=e[d]){var h=f.shouldBePainted(r,i,!0,!0);(p=f.__isRendered&&(f.__dirty&Yr.REDARAW_BIT||!h)?f.getPrevPaintRect():null)&&c(p);var l=h&&(f.__dirty&Yr.REDARAW_BIT||!f.__isRendered)?f.getPaintRect():null;l&&c(l)}}for(d=this.__prevStartIndex;d<this.__prevEndIndex;++d){var f,p;h=(f=t[d]).shouldBePainted(r,i,!0,!0);if(f&&(!h||!f.__zr)&&f.__isRendered)(p=f.getPrevPaintRect())&&c(p)}do{n=!1;for(d=0;d<a.length;)if(a[d].isZero())a.splice(d,1);else{for(var v=d+1;v<a.length;)a[d].intersect(a[v])?(n=!0,a[d].union(a[v]),a.splice(v,1)):v++;d++}}while(n);return this._paintRects=a,a},t.prototype.debugGetPaintRects=function(){return(this._paintRects||[]).slice()},t.prototype.resize=function(e,t){var r=this.dpr,i=this.dom,n=i.style,a=this.domBack;n&&(n.width=e+"px",n.height=t+"px"),i.width=e*r,i.height=t*r,a&&(a.width=e*r,a.height=t*r,1!==r&&this.ctxBack.scale(r,r))},t.prototype.clear=function(e,t,r){var i=this.dom,n=this.ctx,a=i.width,s=i.height;t=t||this.clearColor;var o=this.motionBlur&&!e,u=this.lastFrameAlpha,c=this.dpr,d=this;o&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(i,0,0,a/c,s/c));var h=this.domBack;function l(e,r,i,a){if(n.clearRect(e,r,i,a),t&&"transparent"!==t){var s=void 0;null!=t.colorStops?(s=t.__canvasGradient||ym(n,t,{x:0,y:0,width:i,height:a}),t.__canvasGradient=s):function(e){return null!=e.image}(t)&&(s=Tm(n,t,{dirty:function(){d.setUnpainted(),d.__painter.refresh()}})),n.save(),n.fillStyle=s||t,n.fillRect(e,r,i,a),n.restore()}o&&(n.save(),n.globalAlpha=u,n.drawImage(h,e,r,i,a),n.restore())}!r||o?l(0,0,a,s):r.length&&L(r,(function(e){l(e.x*c,e.y*c,e.width*c,e.height*c)}))},t}(Le),Zy=1e5,Qy=314159,$y=.01;function Jy(e){return parseInt(e,10)}var eb=function(){function e(e,t,r,i){this.type="canvas",this._zlevelList=[],this._prevDisplayList=[],this._layers={},this._layerConfig={},this._needsManuallyCompositing=!1,this.type="canvas";var n=!e.nodeName||"CANVAS"===e.nodeName.toUpperCase();this._opts=r=I({},r||{}),this.dpr=r.devicePixelRatio||Br,this._singleCanvas=n,this.root=e;var a=e.style;a&&(a.webkitTapHighlightColor="transparent",a.webkitUserSelect="none",a.userSelect="none",a["-webkit-touch-callout"]="none",e.innerHTML=""),this.storage=t;var s=this._zlevelList;this._prevDisplayList=[];var o=this._layers;if(n){var u=e,c=u.width,d=u.height;null!=r.width&&(c=r.width),null!=r.height&&(d=r.height),this.dpr=r.devicePixelRatio||1,u.width=c*this.dpr,u.height=d*this.dpr,this._width=c,this._height=d;var h=new Yy(u,this,this.dpr);h.__builtin__=!0,h.initContext(),o[314159]=h,h.zlevel=Qy,s.push(Qy),this._domRoot=e}else{this._width=this._getSize(0),this._height=this._getSize(1);var l=this._domRoot=function(e,t){var r=document.createElement("div");return r.style.cssText=["position:relative","width:"+e+"px","height:"+t+"px","padding:0","margin:0","border-width:0"].join(";")+";",r}(this._width,this._height);e.appendChild(l)}}return e.prototype.getType=function(){return"canvas"},e.prototype.isSingleCanvas=function(){return this._singleCanvas},e.prototype.getViewportRoot=function(){return this._domRoot},e.prototype.getViewportRootOffset=function(){var e=this.getViewportRoot();if(e)return{offsetLeft:e.offsetLeft||0,offsetTop:e.offsetTop||0}},e.prototype.refresh=function(e){var t=this.storage.getDisplayList(!0),r=this._prevDisplayList,i=this._zlevelList;this._redrawId=Math.random(),this._paintList(t,r,e,this._redrawId);for(var n=0;n<i.length;n++){var a=i[n],s=this._layers[a];if(!s.__builtin__&&s.refresh){var o=0===n?this._backgroundColor:null;s.refresh(o)}}return this._opts.useDirtyRect&&(this._prevDisplayList=t.slice()),this},e.prototype.refreshHover=function(){this._paintHoverList(this.storage.getDisplayList(!1))},e.prototype._paintHoverList=function(e){var t=e.length,r=this._hoverlayer;if(r&&r.clear(),t){for(var i,n={inHover:!0,viewWidth:this._width,viewHeight:this._height},a=0;a<t;a++){var s=e[a];s.__inHover&&(r||(r=this._hoverlayer=this.getLayer(Zy)),i||(i=r.ctx).save(),Lm(i,s,n,a===t-1))}i&&i.restore()}},e.prototype.getHoverLayer=function(){return this.getLayer(Zy)},e.prototype.paintOne=function(e,t){Dm(e,t)},e.prototype._paintList=function(e,t,r,i){if(this._redrawId===i){r=r||!1,this._updateLayerStatus(e);var n=this._doPaintList(e,t,r),a=n.finished,s=n.needsRefreshHover;if(this._needsManuallyCompositing&&this._compositeManually(),s&&this._paintHoverList(e),a)this.eachLayer((function(e){e.afterBrush&&e.afterBrush()}));else{var o=this;si((function(){o._paintList(e,t,r,i)}))}}},e.prototype._compositeManually=function(){var e=this.getLayer(Qy).ctx,t=this._domRoot.width,r=this._domRoot.height;e.clearRect(0,0,t,r),this.eachBuiltinLayer((function(i){i.virtual&&e.drawImage(i.dom,0,0,t,r)}))},e.prototype._doPaintList=function(e,t,r){for(var i=this,n=[],a=this._opts.useDirtyRect,s=0;s<this._zlevelList.length;s++){var o=this._zlevelList[s],u=this._layers[o];u.__builtin__&&u!==this._hoverlayer&&(u.__dirty||r)&&n.push(u)}for(var c=!0,h=!1,l=function(s){var o=n[s],u=o.ctx,d=a&&o.createRepaintRects(e,t,f._width,f._height);u.save();var l,p=r?o.__startIndex:o.__drawIndex,v=!r&&o.incremental&&Date.now,m=v&&Date.now(),g=o.zlevel===f._zlevelList[0]?f._backgroundColor:null;if(o.__startIndex===o.__endIndex)o.clear(!1,g,d);else if(p===o.__startIndex){var y=e[p];y.incremental&&y.notClear&&!r||o.clear(!1,g,d)}-1===p&&(console.error("For some unknown reason. drawIndex is -1"),p=o.__startIndex);var b=function(t){var r={inHover:!1,allClipped:!1,prevEl:null,viewWidth:i._width,viewHeight:i._height};for(l=p;l<o.__endIndex;l++){var n=e[l];if(n.__inHover&&(h=!0),i._doPaintEl(n,o,a,t,r,l===o.__endIndex-1),v)if(Date.now()-m>15)break}r.prevElClipPaths&&u.restore()};if(d)if(0===d.length)l=o.__endIndex;else for(var x=f.dpr,k=0;k<d.length;++k){var w=d[k];u.save(),u.beginPath(),u.rect(w.x*x,w.y*x,w.width*x,w.height*x),u.clip(),b(w),u.restore()}else u.save(),b(),u.restore();o.__drawIndex=l,o.__drawIndex<o.__endIndex&&(c=!1)},f=this,p=0;p<n.length;p++)l(p);return d.wxa&&L(this._layers,(function(e){e&&e.ctx&&e.ctx.draw&&e.ctx.draw()})),{finished:c,needsRefreshHover:h}},e.prototype._doPaintEl=function(e,t,r,i,n,a){var s=t.ctx;if(r){var o=e.getPaintRect();(!i||o&&o.intersect(i))&&(Lm(s,e,n,a),e.setPrevPaintRect(o))}else Lm(s,e,n,a)},e.prototype.getLayer=function(e,t){this._singleCanvas&&!this._needsManuallyCompositing&&(e=Qy);var r=this._layers[e];return r||((r=new Yy("zr_"+e,this,this.dpr)).zlevel=e,r.__builtin__=!0,this._layerConfig[e]?T(r,this._layerConfig[e],!0):this._layerConfig[e-$y]&&T(r,this._layerConfig[e-$y],!0),t&&(r.virtual=t),this.insertLayer(e,r),r.initContext()),r},e.prototype.insertLayer=function(e,t){var r=this._layers,i=this._zlevelList,n=i.length,a=this._domRoot,s=null,o=-1;if(r[e])S("ZLevel "+e+" has been used already");else if(function(e){return!!e&&(!!e.__builtin__||"function"===typeof e.resize&&"function"===typeof e.refresh)}(t)){if(n>0&&e>i[0]){for(o=0;o<n-1&&!(i[o]<e&&i[o+1]>e);o++);s=r[i[o]]}if(i.splice(o+1,0,e),r[e]=t,!t.virtual)if(s){var u=s.dom;u.nextSibling?a.insertBefore(t.dom,u.nextSibling):a.appendChild(t.dom)}else a.firstChild?a.insertBefore(t.dom,a.firstChild):a.appendChild(t.dom);t.__painter=this}else S("Layer of zlevel "+e+" is not valid")},e.prototype.eachLayer=function(e,t){for(var r=this._zlevelList,i=0;i<r.length;i++){var n=r[i];e.call(t,this._layers[n],n)}},e.prototype.eachBuiltinLayer=function(e,t){for(var r=this._zlevelList,i=0;i<r.length;i++){var n=r[i],a=this._layers[n];a.__builtin__&&e.call(t,a,n)}},e.prototype.eachOtherLayer=function(e,t){for(var r=this._zlevelList,i=0;i<r.length;i++){var n=r[i],a=this._layers[n];a.__builtin__||e.call(t,a,n)}},e.prototype.getLayers=function(){return this._layers},e.prototype._updateLayerStatus=function(e){function t(e){a&&(a.__endIndex!==e&&(a.__dirty=!0),a.__endIndex=e)}if(this.eachBuiltinLayer((function(e,t){e.__dirty=e.__used=!1})),this._singleCanvas)for(var r=1;r<e.length;r++){if((o=e[r]).zlevel!==e[r-1].zlevel||o.incremental){this._needsManuallyCompositing=!0;break}}var i,n,a=null,s=0;for(n=0;n<e.length;n++){var o,u=(o=e[n]).zlevel,c=void 0;i!==u&&(i=u,s=0),o.incremental?((c=this.getLayer(u+.001,this._needsManuallyCompositing)).incremental=!0,s=1):c=this.getLayer(u+(s>0?$y:0),this._needsManuallyCompositing),c.__builtin__||S("ZLevel "+u+" has been used by unkown layer "+c.id),c!==a&&(c.__used=!0,c.__startIndex!==n&&(c.__dirty=!0),c.__startIndex=n,c.incremental?c.__drawIndex=-1:c.__drawIndex=n,t(n),a=c),o.__dirty&Yr.REDARAW_BIT&&!o.__inHover&&(c.__dirty=!0,c.incremental&&c.__drawIndex<0&&(c.__drawIndex=n))}t(n),this.eachBuiltinLayer((function(e,t){!e.__used&&e.getElementCount()>0&&(e.__dirty=!0,e.__startIndex=e.__endIndex=e.__drawIndex=0),e.__dirty&&e.__drawIndex<0&&(e.__drawIndex=e.__startIndex)}))},e.prototype.clear=function(){return this.eachBuiltinLayer(this._clearLayer),this},e.prototype._clearLayer=function(e){e.clear()},e.prototype.setBackgroundColor=function(e){this._backgroundColor=e,L(this._layers,(function(e){e.setUnpainted()}))},e.prototype.configLayer=function(e,t){if(t){var r=this._layerConfig;r[e]?T(r[e],t,!0):r[e]=t;for(var i=0;i<this._zlevelList.length;i++){var n=this._zlevelList[i];if(n===e||n===e+$y)T(this._layers[n],r[e],!0)}}},e.prototype.delLayer=function(e){var t=this._layers,r=this._zlevelList,i=t[e];i&&(i.dom.parentNode.removeChild(i.dom),delete t[e],r.splice(E(r,e),1))},e.prototype.resize=function(e,t){if(this._domRoot.style){var r=this._domRoot;r.style.display="none";var i=this._opts;if(null!=e&&(i.width=e),null!=t&&(i.height=t),e=this._getSize(0),t=this._getSize(1),r.style.display="",this._width!==e||t!==this._height){for(var n in r.style.width=e+"px",r.style.height=t+"px",this._layers)this._layers.hasOwnProperty(n)&&this._layers[n].resize(e,t);this.refresh(!0)}this._width=e,this._height=t}else{if(null==e||null==t)return;this._width=e,this._height=t,this.getLayer(Qy).resize(e,t)}return this},e.prototype.clearLayer=function(e){var t=this._layers[e];t&&t.clear()},e.prototype.dispose=function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},e.prototype.getRenderedCanvas=function(e){if(e=e||{},this._singleCanvas&&!this._compositeManually)return this._layers[314159].dom;var t=new Yy("image",this,e.pixelRatio||this.dpr);t.initContext(),t.clear(!1,e.backgroundColor||this._backgroundColor);var r=t.ctx;if(e.pixelRatio<=this.dpr){this.refresh();var i=t.dom.width,n=t.dom.height;this.eachLayer((function(e){e.__builtin__?r.drawImage(e.dom,0,0,i,n):e.renderToCanvas&&(r.save(),e.renderToCanvas(r),r.restore())}))}else for(var a={inHover:!1,viewWidth:this._width,viewHeight:this._height},s=this.storage.getDisplayList(!0),o=0,u=s.length;o<u;o++){var c=s[o];Lm(r,c,a,o===u-1)}return t.dom},e.prototype.getWidth=function(){return this._width},e.prototype.getHeight=function(){return this._height},e.prototype._getSize=function(e){var t=this._opts,r=["width","height"][e],i=["clientWidth","clientHeight"][e],n=["paddingLeft","paddingTop"][e],a=["paddingRight","paddingBottom"][e];if(null!=t[r]&&"auto"!==t[r])return parseFloat(t[r]);var s=this.root,o=document.defaultView.getComputedStyle(s);return(s[i]||Jy(o[r])||Jy(s.style[r]))-(Jy(o[n])||0)-(Jy(o[a])||0)|0},e.prototype.pathToImage=function(e,t){t=t||this.dpr;var r=document.createElement("canvas"),i=r.getContext("2d"),n=e.getBoundingRect(),a=e.style,s=a.shadowBlur*t,o=a.shadowOffsetX*t,u=a.shadowOffsetY*t,c=e.hasStroke()?a.lineWidth:0,d=Math.max(c/2,-o+s),h=Math.max(c/2,o+s),l=Math.max(c/2,-u+s),f=Math.max(c/2,u+s),p=n.width+d+h,v=n.height+l+f;r.width=p*t,r.height=v*t,i.scale(t,t),i.clearRect(0,0,p,v),i.dpr=t;var m={x:e.x,y:e.y,scaleX:e.scaleX,scaleY:e.scaleY,rotation:e.rotation,originX:e.originX,originY:e.originY};e.x=d-n.x,e.y=l-n.y,e.rotation=0,e.scaleX=1,e.scaleY=1,e.updateTransform(),e&&Lm(i,e,{inHover:!1,viewWidth:this._width,viewHeight:this._height},!0);var g=new Gs({style:{x:0,y:0,image:r}});return I(e,m),g},e}();function tb(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function rb(e,t,r,i,n){for(var a=t.length,s=r.length,o=e.newPos,u=o-i,c=0;o+1<a&&u+1<s&&n(t[o+1],r[u+1]);)o++,u++,c++;return c&&e.components.push({count:c,added:!1,removed:!1,indices:[]}),e.newPos=o,u}function ib(e,t,r){var i=e[e.length-1];i&&i.added===t&&i.removed===r?e[e.length-1]={count:i.count+1,added:t,removed:r,indices:[]}:e.push({count:1,added:t,removed:r,indices:[]})}function nb(e){for(var t=0,r=e.length,i=0,n=0;t<r;t++){var a=e[t];if(a.removed){for(o=n;o<n+a.count;o++)a.indices.push(o);n+=a.count}else{for(var s=[],o=i;o<i+a.count;o++)s.push(o);a.indices=s,i+=a.count,a.added||(n+=a.count)}}return e}function ab(e,t,r){return function(e,t,r){r||(r=function(e,t){return e===t}),e=e.slice();var i=(t=t.slice()).length,n=e.length,a=1,s=i+n,o=[{newPos:-1,components:[]}],u=rb(o[0],t,e,0,r);if(o[0].newPos+1>=i&&u+1>=n){for(var c=[],d=0;d<t.length;d++)c.push(d);return[{indices:c,count:t.length,added:!1,removed:!1}]}function h(){for(var s=-1*a;s<=a;s+=2){var u,c=o[s-1],d=o[s+1],h=(d?d.newPos:0)-s;c&&(o[s-1]=void 0);var l=c&&c.newPos+1<i,f=d&&0<=h&&h<n;if(l||f){if(!l||f&&c.newPos<d.newPos?ib((u={newPos:(p=d).newPos,components:p.components.slice(0)}).components,!1,!0):((u=c).newPos++,ib(u.components,!0,!1)),h=rb(u,t,e,s,r),u.newPos+1>=i&&h+1>=n)return nb(u.components);o[s]=u}else o[s]=void 0}var p;a++}for(;a<=s;){var l=h();if(l)return l}}(e,t,r)}var sb="none",ob=Math.round,ub=Math.sin,cb=Math.cos,db=Math.PI,hb=2*Math.PI,lb=180/db,fb=1e-4;function pb(e){return ob(1e3*e)/1e3}function vb(e){return ob(1e4*e)/1e4}function mb(e){return e<fb&&e>-1e-4}function gb(e,t){t&&yb(e,"transform","matrix("+pb(t[0])+","+pb(t[1])+","+pb(t[2])+","+pb(t[3])+","+vb(t[4])+","+vb(t[5])+")")}function yb(e,t,r){(!r||"linear"!==r.type&&"radial"!==r.type)&&e.setAttribute(t,r)}function bb(e,t,r){var i=null==t.opacity?1:t.opacity;if(r instanceof Gs)e.style.opacity=i+"";else{if(function(e){var t=e.fill;return null!=t&&t!==sb}(t)){var n=t.fill;yb(e,"fill",n="transparent"===n?sb:n),yb(e,"fill-opacity",(null!=t.fillOpacity?t.fillOpacity*i:i)+"")}else yb(e,"fill",sb);if(function(e){var t=e.stroke;return null!=t&&t!==sb}(t)){var a=t.stroke;yb(e,"stroke",a="transparent"===a?sb:a);var s=t.lineWidth,o=t.strokeNoScale?r.getLineScale():1;yb(e,"stroke-width",(o?s/o:0)+""),yb(e,"paint-order",t.strokeFirst?"stroke":"fill"),yb(e,"stroke-opacity",(null!=t.strokeOpacity?t.strokeOpacity*i:i)+"");var u=t.lineDash&&s>0&&xm(t.lineDash,s);if(u){var c=t.lineDashOffset;o&&1!==o&&(u=B(u,(function(e){return e/o})),c&&(c=ob(c/=o))),yb(e,"stroke-dasharray",u.join(",")),yb(e,"stroke-dashoffset",(c||0)+"")}else yb(e,"stroke-dasharray","");t.lineCap&&yb(e,"stroke-linecap",t.lineCap),t.lineJoin&&yb(e,"stroke-linejoin",t.lineJoin),t.miterLimit&&yb(e,"stroke-miterlimit",t.miterLimit+"")}else yb(e,"stroke",sb)}}var xb=function(){function e(){}return e.prototype.reset=function(){this._d=[],this._str=""},e.prototype.moveTo=function(e,t){this._add("M",e,t)},e.prototype.lineTo=function(e,t){this._add("L",e,t)},e.prototype.bezierCurveTo=function(e,t,r,i,n,a){this._add("C",e,t,r,i,n,a)},e.prototype.quadraticCurveTo=function(e,t,r,i){this._add("Q",e,t,r,i)},e.prototype.arc=function(e,t,r,i,n,a){this.ellipse(e,t,r,r,0,i,n,a)},e.prototype.ellipse=function(e,t,r,i,n,a,s,o){var u=0===this._d.length,c=s-a,d=!o,h=Math.abs(c),l=mb(h-hb)||(d?c>=hb:-c>=hb),f=c>0?c%hb:c%hb+hb,p=!1;p=!!l||!mb(h)&&f>=db===!!d;var v=vb(e+r*cb(a)),m=vb(t+i*ub(a));l&&(c=d?hb-1e-4:1e-4-hb,p=!0,u&&this._d.push("M",v,m));var g=vb(e+r*cb(a+c)),y=vb(t+i*ub(a+c));if(isNaN(v)||isNaN(m)||isNaN(r)||isNaN(i)||isNaN(n)||isNaN(lb)||isNaN(g)||isNaN(y))return"";this._d.push("A",vb(r),vb(i),ob(n*lb),+p,+d,g,y)},e.prototype.rect=function(e,t,r,i){this._add("M",e,t),this._add("L",e+r,t),this._add("L",e+r,t+i),this._add("L",e,t+i),this._add("L",e,t)},e.prototype.closePath=function(){this._d.length>0&&this._add("Z")},e.prototype._add=function(e,t,r,i,n,a,s,o,u){this._d.push(e);for(var c=1;c<arguments.length;c++){var d=arguments[c];if(isNaN(d))return void(this._invalid=!0);this._d.push(vb(d))}},e.prototype.generateStr=function(){this._str=this._invalid?"":this._d.join(" "),this._d=[]},e.prototype.getStr=function(){return this._str},e}(),kb={brush:function(e){var t=e.style,r=e.__svgEl;r||(r=tb("path"),e.__svgEl=r),e.path||e.createPathProxy();var i=e.path;e.shapeChanged()&&(i.beginPath(),e.buildPath(i,e.shape),e.pathUpdated());var n=i.getVersion(),a=e,s=a.__svgPathBuilder;(a.__svgPathVersion!==n||!s||e.style.strokePercent<1)&&(s||(s=a.__svgPathBuilder=new xb),s.reset(),i.rebuildPath(s,e.style.strokePercent),s.generateStr(),a.__svgPathVersion=n),yb(r,"d",s.getStr()),bb(r,t,e),gb(r,e.transform)}},wb={brush:function(e){var t=e.style,r=t.image;if(r instanceof HTMLImageElement?r=r.src:r instanceof HTMLCanvasElement&&(r=r.toDataURL()),r){var i=t.x||0,n=t.y||0,a=t.width,s=t.height,o=e.__svgEl;o||(o=tb("image"),e.__svgEl=o),r!==e.__imageSrc&&(!function(e,t,r){e.setAttributeNS("http://www.w3.org/1999/xlink",t,r)}(o,"href",r),e.__imageSrc=r),yb(o,"width",a+""),yb(o,"height",s+""),yb(o,"x",i+""),yb(o,"y",n+""),bb(o,t,e),gb(o,e.transform)}}},_b={left:"start",right:"end",center:"middle",middle:"middle"};var Sb={brush:function(e){var t=e.style,r=t.text;if(null!=r&&(r+=""),r&&!isNaN(t.x)&&!isNaN(t.y)){var i=e.__svgEl;i||(function(e,t,r){e.setAttributeNS("http://www.w3.org/XML/1998/namespace",t,r)}(i=tb("text"),"xml:space","preserve"),e.__svgEl=i);var n=t.font||Or;i.style.font=n,i.textContent=r,bb(i,t,e),gb(i,e.transform);var a=t.x||0,s=function(e,t,r){return"top"===r?e+=t/2:"bottom"===r&&(e-=t/2),e}(t.y||0,Nr(n),t.textBaseline),o=_b[t.textAlign]||t.textAlign;yb(i,"dominant-baseline","central"),yb(i,"text-anchor",o),yb(i,"x",a+""),yb(i,"y",s+"")}}},Ob=function(){function e(e,t,r,i,n){this.nextId=0,this._domName="_dom",this.createElement=tb,this._zrId=e,this._svgRoot=t,this._tagNames="string"===typeof r?[r]:r,this._markLabel=i,n&&(this._domName=n)}return e.prototype.getDefs=function(e){var t=this._svgRoot,r=this._svgRoot.getElementsByTagName("defs");if(0===r.length){if(e){var i=t.insertBefore(this.createElement("defs"),t.firstChild);return i.contains||(i.contains=function(e){var t=i.children;if(!t)return!1;for(var r=t.length-1;r>=0;--r)if(t[r]===e)return!0;return!1}),i}return null}return r[0]},e.prototype.doUpdate=function(e,t){if(e){var r=this.getDefs(!1);if(e[this._domName]&&r.contains(e[this._domName]))"function"===typeof t&&t(e);else{var i=this.add(e);i&&(e[this._domName]=i)}}},e.prototype.add=function(e){return null},e.prototype.addDom=function(e){var t=this.getDefs(!0);e.parentNode!==t&&t.appendChild(e)},e.prototype.removeDom=function(e){var t=this.getDefs(!1);t&&e[this._domName]&&(t.removeChild(e[this._domName]),e[this._domName]=null)},e.prototype.getDoms=function(){var e=this.getDefs(!1);if(!e)return[];var t=[];return L(this._tagNames,(function(r){for(var i=e.getElementsByTagName(r),n=0;n<i.length;n++)t.push(i[n])})),t},e.prototype.markAllUnused=function(){var e=this.getDoms(),t=this;L(e,(function(e){e[t._markLabel]="0"}))},e.prototype.markDomUsed=function(e){e&&(e[this._markLabel]="1")},e.prototype.markDomUnused=function(e){e&&(e[this._markLabel]="0")},e.prototype.isDomUnused=function(e){return e&&"1"!==e[this._markLabel]},e.prototype.removeUnused=function(){var e=this,t=this.getDefs(!1);t&&L(this.getDoms(),(function(r){e.isDomUnused(r)&&t.removeChild(r)}))},e.prototype.getSvgProxy=function(e){return e instanceof Ns?kb:e instanceof Gs?wb:e instanceof Ls?Sb:kb},e.prototype.getSvgElement=function(e){return e.__svgEl},e}();function Tb(e){return"linear"===e.type}function Cb(e){return"radial"===e.type}function Ib(e){return e&&("linear"===e.type||"radial"===e.type)}var Mb=function(e){function t(t,r){return e.call(this,t,r,["linearGradient","radialGradient"],"__gradient_in_use__")||this}return ve(t,e),t.prototype.addWithoutUpdate=function(e,t){if(t&&t.style){var r=this;L(["fill","stroke"],(function(i){var n=t.style[i];if(Ib(n)){var a=n,s=r.getDefs(!0),o=void 0;a.__dom?(o=a.__dom,s.contains(a.__dom)||r.addDom(o)):o=r.add(a),r.markUsed(t);var u=o.getAttribute("id");e.setAttribute(i,"url(#"+u+")")}}))}},t.prototype.add=function(e){var t;if(Tb(e))t=this.createElement("linearGradient");else{if(!Cb(e))return S("Illegal gradient type."),null;t=this.createElement("radialGradient")}return e.id=e.id||this.nextId++,t.setAttribute("id","zr"+this._zrId+"-gradient-"+e.id),this.updateDom(e,t),this.addDom(t),t},t.prototype.update=function(e){if(Ib(e)){var t=this;this.doUpdate(e,(function(){var r=e.__dom;if(r){var i=r.tagName,n=e.type;"linear"===n&&"linearGradient"===i||"radial"===n&&"radialGradient"===i?t.updateDom(e,e.__dom):(t.removeDom(e),t.add(e))}}))}},t.prototype.updateDom=function(e,t){if(Tb(e))t.setAttribute("x1",e.x+""),t.setAttribute("y1",e.y+""),t.setAttribute("x2",e.x2+""),t.setAttribute("y2",e.y2+"");else{if(!Cb(e))return void S("Illegal gradient type.");t.setAttribute("cx",e.x+""),t.setAttribute("cy",e.y+""),t.setAttribute("r",e.r+"")}e.global?t.setAttribute("gradientUnits","userSpaceOnUse"):t.setAttribute("gradientUnits","objectBoundingBox"),t.innerHTML="";for(var r=e.colorStops,i=0,n=r.length;i<n;++i){var a=this.createElement("stop");a.setAttribute("offset",100*r[i].offset+"%");var s=r[i].color;if(s.indexOf("rgba")>-1){var o=zt(s)[3],u=Wt(s);a.setAttribute("stop-color","#"+u),a.setAttribute("stop-opacity",o+"")}else a.setAttribute("stop-color",r[i].color);t.appendChild(a)}e.__dom=t},t.prototype.markUsed=function(t){if(t.style){var r=t.style.fill;r&&r.__dom&&e.prototype.markDomUsed.call(this,r.__dom),(r=t.style.stroke)&&r.__dom&&e.prototype.markDomUsed.call(this,r.__dom)}},t}(Ob);function Ab(e){return e&&(!!e.image||!!e.svgElement)}var Eb=new um,Nb=function(e){function t(t,r){return e.call(this,t,r,["pattern"],"__pattern_in_use__")||this}return ve(t,e),t.prototype.addWithoutUpdate=function(e,t){if(t&&t.style){var r=this;L(["fill","stroke"],(function(i){var n=t.style[i];if(Ab(n)){var a=r.getDefs(!0),s=Eb.get(n);s?a.contains(s)||r.addDom(s):s=r.add(n),r.markUsed(t);var o=s.getAttribute("id");e.setAttribute(i,"url(#"+o+")")}}))}},t.prototype.add=function(e){if(Ab(e)){var t=this.createElement("pattern");return e.id=null==e.id?this.nextId++:e.id,t.setAttribute("id","zr"+this._zrId+"-pattern-"+e.id),t.setAttribute("x","0"),t.setAttribute("y","0"),t.setAttribute("patternUnits","userSpaceOnUse"),this.updateDom(e,t),this.addDom(t),t}},t.prototype.update=function(e){if(Ab(e)){var t=this;this.doUpdate(e,(function(){var r=Eb.get(e);t.updateDom(e,r)}))}},t.prototype.updateDom=function(e,t){var r=e.svgElement;if(r instanceof SVGElement)r.parentNode!==t&&(t.innerHTML="",t.appendChild(r),t.setAttribute("width",e.svgWidth+""),t.setAttribute("height",e.svgHeight+""));else{var i=void 0,n=t.getElementsByTagName("image");if(n.length){if(!e.image)return void t.removeChild(n[0]);i=n[0]}else e.image&&(i=this.createElement("image"));if(i){var a=void 0;if("string"===typeof e.image?a=e.image:e.image instanceof HTMLImageElement?a=e.image.src:e.image instanceof HTMLCanvasElement&&(a=e.image.toDataURL()),a){i.setAttribute("href",a),i.setAttribute("x","0"),i.setAttribute("y","0");var s=Vn(a,i,{dirty:function(){}},(function(e){t.setAttribute("width",e.width+""),t.setAttribute("height",e.height+"")}));s&&s.width&&s.height&&(t.setAttribute("width",s.width+""),t.setAttribute("height",s.height+"")),t.appendChild(i)}}}var o="translate("+(e.x||0)+", "+(e.y||0)+") rotate("+(e.rotation||0)/Math.PI*180+") scale("+(e.scaleX||1)+", "+(e.scaleY||1)+")";t.setAttribute("patternTransform",o),Eb.set(e,t)},t.prototype.markUsed=function(t){t.style&&(Ab(t.style.fill)&&e.prototype.markDomUsed.call(this,Eb.get(t.style.fill)),Ab(t.style.stroke)&&e.prototype.markDomUsed.call(this,Eb.get(t.style.stroke)))},t}(Ob);function Pb(e){var t=e.__clipPaths;return t&&t.length>0}var Db=function(e){function t(t,r){var i=e.call(this,t,r,"clipPath","__clippath_in_use__")||this;return i._refGroups={},i._keyDuplicateCount={},i}return ve(t,e),t.prototype.markAllUnused=function(){for(var t in e.prototype.markAllUnused.call(this),this._refGroups)this.markDomUnused(this._refGroups[t]);this._keyDuplicateCount={}},t.prototype._getClipPathGroup=function(e,t){if(Pb(e)){var r=e.__clipPaths,i=this._keyDuplicateCount,n=function(e){var t=[];if(e)for(var r=0;r<e.length;r++){var i=e[r];t.push(i.id)}return t.join(",")}(r);return bm(r,t&&t.__clipPaths)&&(i[n]=i[n]||0,i[n]&&(n+="-"+i[n]),i[n]++),this._refGroups[n]||(this._refGroups[n]=this.createElement("g"))}},t.prototype.update=function(e,t){var r=this._getClipPathGroup(e,t);return r&&(this.markDomUsed(r),this.updateDom(r,e.__clipPaths)),r},t.prototype.updateDom=function(e,t){if(t&&t.length>0){var r=this.getDefs(!0),i=t[0],n=void 0,a=void 0;i._dom?(a=i._dom.getAttribute("id"),n=i._dom,r.contains(n)||r.appendChild(n)):(a="zr"+this._zrId+"-clip-"+this.nextId,++this.nextId,(n=this.createElement("clipPath")).setAttribute("id",a),r.appendChild(n),i._dom=n),this.getSvgProxy(i).brush(i);var s=this.getSvgElement(i);n.innerHTML="",n.appendChild(s),e.setAttribute("clip-path","url(#"+a+")"),t.length>1&&this.updateDom(n,t.slice(1))}else e&&e.setAttribute("clip-path","none")},t.prototype.markUsed=function(t){var r=this;t.__clipPaths&&L(t.__clipPaths,(function(t){t._dom&&e.prototype.markDomUsed.call(r,t._dom)}))},t.prototype.removeUnused=function(){e.prototype.removeUnused.call(this);var t={};for(var r in this._refGroups){var i=this._refGroups[r];this.isDomUnused(i)?i.parentNode&&i.parentNode.removeChild(i):t[r]=i}this._refGroups=t},t}(Ob),Lb=function(e){function t(t,r){var i=e.call(this,t,r,["filter"],"__filter_in_use__","_shadowDom")||this;return i._shadowDomMap={},i._shadowDomPool=[],i}return ve(t,e),t.prototype._getFromPool=function(){var e=this._shadowDomPool.pop();if(!e){(e=this.createElement("filter")).setAttribute("id","zr"+this._zrId+"-shadow-"+this.nextId++);var t=this.createElement("feDropShadow");e.appendChild(t),this.addDom(e)}return e},t.prototype.update=function(e,t){if(function(e){return e&&(e.shadowBlur||e.shadowOffsetX||e.shadowOffsetY)}(t.style)){var r=function(e){var t=e.style,r=e.getGlobalScale();return[t.shadowColor,(t.shadowBlur||0).toFixed(2),(t.shadowOffsetX||0).toFixed(2),(t.shadowOffsetY||0).toFixed(2),r[0],r[1]].join(",")}(t),i=t._shadowDom=this._shadowDomMap[r];i||(i=this._getFromPool(),this._shadowDomMap[r]=i),this.updateDom(e,t,i)}else this.remove(e,t)},t.prototype.remove=function(e,t){null!=t._shadowDom&&(t._shadowDom=null,e.style.filter="")},t.prototype.updateDom=function(e,t,r){var i=r.children[0],n=t.style,a=t.getGlobalScale(),s=a[0],o=a[1];if(s&&o){var u=n.shadowOffsetX||0,c=n.shadowOffsetY||0,d=n.shadowBlur,h=n.shadowColor;i.setAttribute("dx",u/s+""),i.setAttribute("dy",c/o+""),i.setAttribute("flood-color",h);var l=d/2/s+" "+d/2/o;i.setAttribute("stdDeviation",l),r.setAttribute("x","-100%"),r.setAttribute("y","-100%"),r.setAttribute("width","300%"),r.setAttribute("height","300%"),t._shadowDom=r;var f=r.getAttribute("id");e.style.filter="url(#"+f+")"}},t.prototype.removeUnused=function(){if(this.getDefs(!1)){var e=this._shadowDomPool;for(var t in this._shadowDomMap){var r=this._shadowDomMap[t];e.push(r)}this._shadowDomMap={}}},t}(Ob);function Bb(e){return parseInt(e,10)}function Rb(e){return e instanceof Ns?kb:e instanceof Gs?wb:e instanceof Ls?Sb:kb}function Vb(e,t){return t&&e&&t.parentNode!==e}function Gb(e,t,r){if(Vb(e,t)&&r){var i=r.nextSibling;i?e.insertBefore(t,i):e.appendChild(t)}}function Fb(e,t){if(Vb(e,t)){var r=e.firstChild;r?e.insertBefore(t,r):e.appendChild(t)}}function qb(e,t){t&&e&&t.parentNode===e&&e.removeChild(t)}function jb(e){return e.__svgEl}function zb(e){return function(){S('In SVG mode painter not support method "'+e+'"')}}var Hb=function(){function e(e,t,r,i){this.type="svg",this.refreshHover=zb("refreshHover"),this.pathToImage=zb("pathToImage"),this.configLayer=zb("configLayer"),this.root=e,this.storage=t,this._opts=r=I({},r||{});var n=tb("svg");n.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns","http://www.w3.org/2000/svg"),n.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),n.setAttribute("version","1.1"),n.setAttribute("baseProfile","full"),n.style.cssText="user-select:none;position:absolute;left:0;top:0;";var a=tb("g");n.appendChild(a);var s=tb("g");n.appendChild(s),this._gradientManager=new Mb(i,s),this._patternManager=new Nb(i,s),this._clipPathManager=new Db(i,s),this._shadowManager=new Lb(i,s);var o=document.createElement("div");o.style.cssText="overflow:hidden;position:relative",this._svgDom=n,this._svgRoot=s,this._backgroundRoot=a,this._viewport=o,e.appendChild(o),o.appendChild(n),this.resize(r.width,r.height),this._visibleList=[]}return e.prototype.getType=function(){return"svg"},e.prototype.getViewportRoot=function(){return this._viewport},e.prototype.getSvgDom=function(){return this._svgDom},e.prototype.getSvgRoot=function(){return this._svgRoot},e.prototype.getViewportRootOffset=function(){var e=this.getViewportRoot();if(e)return{offsetLeft:e.offsetLeft||0,offsetTop:e.offsetTop||0}},e.prototype.refresh=function(){var e=this.storage.getDisplayList(!0);this._paintList(e)},e.prototype.setBackgroundColor=function(e){this._backgroundRoot&&this._backgroundNode&&this._backgroundRoot.removeChild(this._backgroundNode);var t=tb("rect");t.setAttribute("width",this.getWidth()),t.setAttribute("height",this.getHeight()),t.setAttribute("x",0),t.setAttribute("y",0),t.setAttribute("id",0),t.style.fill=e,this._backgroundRoot.appendChild(t),this._backgroundNode=t},e.prototype.createSVGElement=function(e){return tb(e)},e.prototype.paintOne=function(e){var t=Rb(e);return t&&t.brush(e),jb(e)},e.prototype._paintList=function(e){var t=this._gradientManager,r=this._patternManager,i=this._clipPathManager,n=this._shadowManager;t.markAllUnused(),r.markAllUnused(),i.markAllUnused(),n.markAllUnused();for(var a=this._svgRoot,s=this._visibleList,o=e.length,u=[],c=0;c<o;c++){var d=Rb(x=e[c]),h=jb(x);x.invisible||(!x.__dirty&&h||(d&&d.brush(x),(h=jb(x))&&x.style&&(t.update(x.style.fill),t.update(x.style.stroke),r.update(x.style.fill),r.update(x.style.stroke),n.update(h,x)),x.__dirty=0),h&&u.push(x))}var l,f,p,v,m,g=ab(s,u);for(c=0;c<g.length;c++){if((b=g[c]).removed)for(var y=0;y<b.count;y++){h=jb(x=s[b.indices[y]]);Pb(x)?(p=h)&&p.parentNode&&p.parentNode.removeChild(p):qb(a,h)}}for(c=0;c<g.length;c++){var b;if(!(b=g[c]).removed)for(y=0;y<b.count;y++){var x=u[b.indices[y]],k=i.update(x,v);k!==m&&(l=f,k&&(l?Gb(a,k,l):Fb(a,k),f=k,l=null),m=k);h=jb(x);l?Gb(m||a,h,l):Fb(m||a,h),l=h||l,m||(f=l),t.markUsed(x),t.addWithoutUpdate(h,x),r.markUsed(x),r.addWithoutUpdate(h,x),i.markUsed(x),v=x}}t.removeUnused(),r.removeUnused(),i.removeUnused(),n.removeUnused(),this._visibleList=u},e.prototype.resize=function(e,t){var r=this._viewport;r.style.display="none";var i=this._opts;if(null!=e&&(i.width=e),null!=t&&(i.height=t),e=this._getSize(0),t=this._getSize(1),r.style.display="",this._width!==e||this._height!==t){this._width=e,this._height=t;var n=r.style;n.width=e+"px",n.height=t+"px";var a=this._svgDom;a.setAttribute("width",e+""),a.setAttribute("height",t+"")}this._backgroundNode&&(this._backgroundNode.setAttribute("width",e),this._backgroundNode.setAttribute("height",t))},e.prototype.getWidth=function(){return this._width},e.prototype.getHeight=function(){return this._height},e.prototype._getSize=function(e){var t=this._opts,r=["width","height"][e],i=["clientWidth","clientHeight"][e],n=["paddingLeft","paddingTop"][e],a=["paddingRight","paddingBottom"][e];if(null!=t[r]&&"auto"!==t[r])return parseFloat(t[r]);var s=this.root,o=document.defaultView.getComputedStyle(s);return(s[i]||Bb(o[r])||Bb(s.style[r]))-(Bb(o[n])||0)-(Bb(o[a])||0)|0},e.prototype.dispose=function(){this.root.innerHTML="",this._svgRoot=this._backgroundRoot=this._svgDom=this._backgroundNode=this._viewport=this.storage=null},e.prototype.clear=function(){var e=this._viewport;e&&e.parentNode&&e.parentNode.removeChild(e)},e.prototype.toDataURL=function(){this.refresh();var e=this._svgDom,t=e.outerHTML||(e.parentNode&&e.parentNode).innerHTML;return"data:image/svg+xml;charset=UTF-8,"+encodeURIComponent(t.replace(/></g,">\n\r<"))},e}();function Ub(e){return null==e?0:e.length||1}function Wb(e){return e}var Kb=function(){function e(e,t,r,i,n,a){this._old=e,this._new=t,this._oldKeyGetter=r||Wb,this._newKeyGetter=i||Wb,this.context=n,this._diffModeMultiple="multiple"===a}return e.prototype.add=function(e){return this._add=e,this},e.prototype.update=function(e){return this._update=e,this},e.prototype.updateManyToOne=function(e){return this._updateManyToOne=e,this},e.prototype.updateOneToMany=function(e){return this._updateOneToMany=e,this},e.prototype.remove=function(e){return this._remove=e,this},e.prototype.execute=function(){this[this._diffModeMultiple?"_executeMultiple":"_executeOneToOne"]()},e.prototype._executeOneToOne=function(){var e=this._old,t=this._new,r={},i=new Array(e.length),n=new Array(t.length);this._initIndexMap(e,null,i,"_oldKeyGetter"),this._initIndexMap(t,r,n,"_newKeyGetter");for(var a=0;a<e.length;a++){var s=i[a],o=r[s],u=Ub(o);if(u>1){var c=o.shift();1===o.length&&(r[s]=o[0]),this._update&&this._update(c,a)}else 1===u?(r[s]=null,this._update&&this._update(o,a)):this._remove&&this._remove(a)}this._performRestAdd(n,r)},e.prototype._executeMultiple=function(){var e=this._old,t=this._new,r={},i={},n=[],a=[];this._initIndexMap(e,r,n,"_oldKeyGetter"),this._initIndexMap(t,i,a,"_newKeyGetter");for(var s=0;s<n.length;s++){var o=n[s],u=r[o],c=i[o],d=Ub(u),h=Ub(c);if(d>1&&1===h)this._updateManyToOne&&this._updateManyToOne(c,u),i[o]=null;else if(1===d&&h>1)this._updateOneToMany&&this._updateOneToMany(c,u),i[o]=null;else if(1===d&&1===h)this._update&&this._update(c,u),i[o]=null;else if(d>1)for(var l=0;l<d;l++)this._remove&&this._remove(u[l]);else this._remove&&this._remove(u)}this._performRestAdd(a,i)},e.prototype._performRestAdd=function(e,t){for(var r=0;r<e.length;r++){var i=e[r],n=t[i],a=Ub(n);if(a>1)for(var s=0;s<a;s++)this._add&&this._add(n[s]);else 1===a&&this._add&&this._add(n);t[i]=null}},e.prototype._initIndexMap=function(e,t,r,i){for(var n=this._diffModeMultiple,a=0;a<e.length;a++){var s="_ec_"+this[i](e[a],a);if(n||(r[a]=s),t){var o=t[s],u=Ub(o);0===u?(t[s]=a,n&&r.push(s)):1===u?t[s]=[o,a]:o.push(a)}}},e}();function Xb(e,t){return e.hasOwnProperty(t)||(e[t]=[]),e[t]}function Yb(e){return"category"===e?"ordinal":"time"===e?"time":"float"}var Zb,Qb,$b,Jb,ex,tx,rx,ix,nx,ax,sx,ox,ux,cx,dx=function(e){this.otherDims={},null!=e&&I(this,e)},hx=Math.floor,lx=K,fx=B,px="undefined",vx={float:typeof Float64Array===px?Array:Float64Array,int:typeof Int32Array===px?Array:Int32Array,ordinal:Array,number:Array,time:Array},mx=typeof Uint32Array===px?Array:Uint32Array,gx=typeof Int32Array===px?Array:Int32Array,yx=typeof Uint16Array===px?Array:Uint16Array,bx=["hasItemOption","_nameList","_idList","_invertedIndicesMap","_rawData","_dimValueGetter","_count","_rawCount","_nameDimIdx","_idDimIdx","_nameRepeatCount"],xx=["_extent","_approximateExtent","_rawExtent"],kx=function(){function e(e,t){this.type="list",this._count=0,this._rawCount=0,this._storage={},this._storageArr=[],this._nameList=[],this._idList=[],this._visual={},this._layout={},this._itemVisuals=[],this._itemLayouts=[],this._graphicEls=[],this._rawExtent={},this._extent={},this._approximateExtent={},this._calculationInfo={},this.hasItemOption=!0,this.TRANSFERABLE_METHODS=["cloneShallow","downSample","lttbDownSample","map"],this.CHANGABLE_METHODS=["filterSelf","selectRange"],this.DOWNSAMPLE_METHODS=["downSample","lttbDownSample"],this.getRawIndex=ex,e=e||["x","y"];for(var r={},i=[],n={},a=0;a<e.length;a++){var s=e[a],o=H(s)?new dx({name:s}):s instanceof dx?s:new dx(s),u=o.name;o.type=o.type||"float",o.coordDim||(o.coordDim=u,o.coordDimIndex=0);var c=o.otherDims=o.otherDims||{};i.push(u),r[u]=o,o.index=a,o.createInvertedIndices&&(n[u]=[]),0===c.itemName&&(this._nameDimIdx=a,this._nameOrdinalMeta=o.ordinalMeta),0===c.itemId&&(this._idDimIdx=a,this._idOrdinalMeta=o.ordinalMeta)}this.dimensions=i,this._dimensionInfos=r,this.hostModel=t,this._dimensionsSummary=function(e){var t={},r=t.encode={},i=ce(),n=[],a=[],s=t.userOutput={dimensionNames:e.dimensions.slice(),encode:{}};L(e.dimensions,(function(t){var o,u=e.getDimensionInfo(t),c=u.coordDim;if(c){var d=u.coordDimIndex;Xb(r,c)[d]=t,u.isExtraCoord||(i.set(c,1),"ordinal"!==(o=u.type)&&"time"!==o&&(n[0]=t),Xb(s.encode,c)[d]=u.index),u.defaultTooltip&&a.push(t)}Uh.each((function(e,t){var i=Xb(r,t),n=u.otherDims[t];null!=n&&!1!==n&&(i[n]=u.name)}))}));var o=[],u={};i.each((function(e,t){var i=r[t];u[t]=i[0],o=o.concat(i)})),t.dataDimsOnCoord=o,t.encodeFirstDimNotExtra=u;var c=r.label;c&&c.length&&(n=c.slice());var d=r.tooltip;return d&&d.length?a=d.slice():a.length||(a=n.slice()),r.defaultedLabel=n,r.defaultedTooltip=a,t}(this),this._invertedIndicesMap=n,this.userOutput=this._dimensionsSummary.userOutput}return e.prototype.getDimension=function(e){return"number"!==typeof e&&(isNaN(e)||this._dimensionInfos.hasOwnProperty(e))||(e=this.dimensions[e]),e},e.prototype.getDimensionInfo=function(e){return this._dimensionInfos[this.getDimension(e)]},e.prototype.getDimensionsOnCoord=function(){return this._dimensionsSummary.dataDimsOnCoord.slice()},e.prototype.mapDimension=function(e,t){var r=this._dimensionsSummary;if(null==t)return r.encodeFirstDimNotExtra[e];var i=r.encode[e];return i?i[t]:null},e.prototype.mapDimensionsAll=function(e){return(this._dimensionsSummary.encode[e]||[]).slice()},e.prototype.initData=function(e,t,r){var i=nf(e)||D(e)?new hf(e,this.dimensions.length):e;this._rawData=i;var n=i.getSource().sourceFormat;this._storage={},this._indices=null,this._dontMakeIdFromName=null!=this._idDimIdx||n===Zh||!!i.fillStorage,this._nameList=(t||[]).slice(),this._idList=[],this._nameRepeatCount={},r||(this.hasItemOption=!1),this.defaultDimValueGetter=Zb[n],this._dimValueGetter=r=r||this.defaultDimValueGetter,this._dimValueGetterArrayRows=Zb.arrayRows,this._rawExtent={},this._initDataFromProvider(0,i.count()),i.pure&&(this.hasItemOption=!1)},e.prototype.getProvider=function(){return this._rawData},e.prototype.appendData=function(e){var t=this._rawData,r=this.count();t.appendData(e);var i=t.count();t.persistent||(i+=r),this._initDataFromProvider(r,i,!0)},e.prototype.appendValues=function(e,t){for(var r=this._storage,i=this.dimensions,n=i.length,a=this._rawExtent,s=this.count(),o=s+Math.max(e.length,t?t.length:0),u=0;u<n;u++){var c=i[u];a[c]||(a[c]=ox()),Jb(r,this._dimensionInfos[c],o,!0)}for(var d=fx(i,(function(e){return a[e]})),h=this._storageArr=fx(i,(function(e){return r[e]})),l=[],f=s;f<o;f++){for(var p=f-s,v=0;v<n;v++){c=i[v];var m=this._dimValueGetterArrayRows(e[p]||l,c,p,v);h[v][f]=m;var g=d[v];m<g[0]&&(g[0]=m),m>g[1]&&(g[1]=m)}t&&(this._nameList[f]=t[p],this._dontMakeIdFromName||nx(this,f))}this._rawCount=this._count=o,this._extent={},Qb(this)},e.prototype._initDataFromProvider=function(e,t,r){if(!(e>=t)){for(var i=this._rawData,n=this._storage,a=this.dimensions,s=a.length,o=this._dimensionInfos,u=this._nameList,c=this._idList,d=this._rawExtent,h=i.getSource().sourceFormat===Wh,l=0;l<s;l++){var f=a[l];d[f]||(d[f]=ox()),Jb(n,o[f],t,r)}var p=this._storageArr=fx(a,(function(e){return n[e]})),v=fx(a,(function(e){return d[e]}));if(i.fillStorage)i.fillStorage(e,t,p,v);else for(var m=[],g=e;g<t;g++){m=i.getItem(g,m);for(var y=0;y<s;y++){f=a[y];var b=p[y],x=this._dimValueGetter(m,f,g,y);b[g]=x;var k=v[y];x<k[0]&&(k[0]=x),x>k[1]&&(k[1]=x)}if(h&&!i.pure&&m){var w=m.name;null==u[g]&&null!=w&&(u[g]=cn(w,null));var _=m.id;null==c[g]&&null!=_&&(c[g]=cn(_,null))}this._dontMakeIdFromName||nx(this,g)}!i.persistent&&i.clean&&i.clean(),this._rawCount=this._count=t,this._extent={},Qb(this)}},e.prototype.count=function(){return this._count},e.prototype.getIndices=function(){var e,t=this._indices;if(t){var r=t.constructor,i=this._count;if(r===Array){e=new r(i);for(var n=0;n<i;n++)e[n]=t[n]}else e=new r(t.buffer,0,i)}else{e=new(r=$b(this))(this.count());for(n=0;n<e.length;n++)e[n]=n}return e},e.prototype.getByDimIdx=function(e,t){if(!(t>=0&&t<this._count))return NaN;var r=this._storageArr[e];return r?r[this.getRawIndex(t)]:NaN},e.prototype.get=function(e,t){if(!(t>=0&&t<this._count))return NaN;var r=this._storage[e];return r?r[this.getRawIndex(t)]:NaN},e.prototype.getByRawIndex=function(e,t){if(!(t>=0&&t<this._rawCount))return NaN;var r=this._storage[e];return r?r[t]:NaN},e.prototype.getValues=function(e,t){var r=[];j(e)||(t=e,e=this.dimensions);for(var i=0,n=e.length;i<n;i++)r.push(this.get(e[i],t));return r},e.prototype.hasValue=function(e){for(var t=this._dimensionsSummary.dataDimsOnCoord,r=0,i=t.length;r<i;r++)if(isNaN(this.get(t[r],e)))return!1;return!0},e.prototype.getDataExtent=function(e){e=this.getDimension(e);var t=this._storage[e],r=ox();if(!t)return r;var i,n=this.count();if(!this._indices)return this._rawExtent[e].slice();if(i=this._extent[e])return i.slice();for(var a=(i=r)[0],s=i[1],o=0;o<n;o++){var u=t[this.getRawIndex(o)];u<a&&(a=u),u>s&&(s=u)}return i=[a,s],this._extent[e]=i,i},e.prototype.getApproximateExtent=function(e){return e=this.getDimension(e),this._approximateExtent[e]||this.getDataExtent(e)},e.prototype.setApproximateExtent=function(e,t){t=this.getDimension(t),this._approximateExtent[t]=e.slice()},e.prototype.getCalculationInfo=function(e){return this._calculationInfo[e]},e.prototype.setCalculationInfo=function(e,t){lx(e)?I(this._calculationInfo,e):this._calculationInfo[e]=t},e.prototype.getSum=function(e){var t=0;if(this._storage[e])for(var r=0,i=this.count();r<i;r++){var n=this.get(e,r);isNaN(n)||(t+=n)}return t},e.prototype.getMedian=function(e){var t=[];this.each(e,(function(e){isNaN(e)||t.push(e)}));var r=t.sort((function(e,t){return e-t})),i=this.count();return 0===i?0:i%2===1?r[(i-1)/2]:(r[i/2]+r[i/2-1])/2},e.prototype.rawIndexOf=function(e,t){var r=(e&&this._invertedIndicesMap[e])[t];return null==r||isNaN(r)?-1:r},e.prototype.indexOfName=function(e){for(var t=0,r=this.count();t<r;t++)if(this.getName(t)===e)return t;return-1},e.prototype.indexOfRawIndex=function(e){if(e>=this._rawCount||e<0)return-1;if(!this._indices)return e;var t=this._indices,r=t[e];if(null!=r&&r<this._count&&r===e)return e;for(var i=0,n=this._count-1;i<=n;){var a=(i+n)/2|0;if(t[a]<e)i=a+1;else{if(!(t[a]>e))return a;n=a-1}}return-1},e.prototype.indicesOfNearest=function(e,t,r){var i=this._storage[e],n=[];if(!i)return n;null==r&&(r=1/0);for(var a=1/0,s=-1,o=0,u=0,c=this.count();u<c;u++){var d=t-i[this.getRawIndex(u)],h=Math.abs(d);h<=r&&((h<a||h===a&&d>=0&&s<0)&&(a=h,s=d,o=0),d===s&&(n[o++]=u))}return n.length=o,n},e.prototype.getRawDataItem=function(e){if(this._rawData.persistent)return this._rawData.getItem(this.getRawIndex(e));for(var t=[],r=0;r<this.dimensions.length;r++){var i=this.dimensions[r];t.push(this.get(i,e))}return t},e.prototype.getName=function(e){var t=this.getRawIndex(e),r=this._nameList[t];return null==r&&null!=this._nameDimIdx&&(r=ix(this,this._nameDimIdx,this._nameOrdinalMeta,t)),null==r&&(r=""),r},e.prototype.getId=function(e){return rx(this,this.getRawIndex(e))},e.prototype.each=function(e,t,r,i){var n=this;if(this._count){"function"===typeof e&&(i=r,r=t,t=e,e=[]);var a=r||i||this,s=fx(ax(e),this.getDimension,this);0;for(var o=s.length,u=fx(s,(function(e){return n._dimensionInfos[e].index})),c=this._storageArr,d=0,h=this.count();d<h;d++){var l=this.getRawIndex(d);switch(o){case 0:t.call(a,d);break;case 1:t.call(a,c[u[0]][l],d);break;case 2:t.call(a,c[u[0]][l],c[u[1]][l],d);break;default:for(var f=0,p=[];f<o;f++)p[f]=c[u[f]][l];p[f]=d,t.apply(a,p)}}}},e.prototype.filterSelf=function(e,t,r,i){var n=this;if(this._count){"function"===typeof e&&(i=r,r=t,t=e,e=[]);var a=r||i||this,s=fx(ax(e),this.getDimension,this);0;for(var o=this.count(),u=new($b(this))(o),c=[],d=s.length,h=0,l=fx(s,(function(e){return n._dimensionInfos[e].index})),f=l[0],p=this._storageArr,v=0;v<o;v++){var m=void 0,g=this.getRawIndex(v);if(0===d)m=t.call(a,v);else if(1===d){var y=p[f][g];m=t.call(a,y,v)}else{for(var b=0;b<d;b++)c[b]=p[l[b]][g];c[b]=v,m=t.apply(a,c)}m&&(u[h++]=g)}return h<o&&(this._indices=u),this._count=h,this._extent={},this.getRawIndex=this._indices?tx:ex,this}},e.prototype.selectRange=function(e){var t=this,r=this._count;if(r){var i=[];for(var n in e)e.hasOwnProperty(n)&&i.push(n);0;var a=i.length;if(a){var s=this.count(),o=new($b(this))(s),u=0,c=i[0],d=fx(i,(function(e){return t._dimensionInfos[e].index})),h=e[c][0],l=e[c][1],f=this._storageArr,p=!1;if(!this._indices){var v=0;if(1===a){for(var m=f[d[0]],g=0;g<r;g++){((k=m[g])>=h&&k<=l||isNaN(k))&&(o[u++]=v),v++}p=!0}else if(2===a){m=f[d[0]];var y=f[d[1]],b=e[i[1]][0],x=e[i[1]][1];for(g=0;g<r;g++){var k=m[g],w=y[g];(k>=h&&k<=l||isNaN(k))&&(w>=b&&w<=x||isNaN(w))&&(o[u++]=v),v++}p=!0}}if(!p)if(1===a)for(g=0;g<s;g++){var _=this.getRawIndex(g);((k=f[d[0]][_])>=h&&k<=l||isNaN(k))&&(o[u++]=_)}else for(g=0;g<s;g++){for(var S=!0,O=(_=this.getRawIndex(g),0);O<a;O++){var T=i[O];((k=f[d[O]][_])<e[T][0]||k>e[T][1])&&(S=!1)}S&&(o[u++]=this.getRawIndex(g))}return u<s&&(this._indices=o),this._count=u,this._extent={},this.getRawIndex=this._indices?tx:ex,this}}},e.prototype.mapArray=function(e,t,r,i){"function"===typeof e&&(i=r,r=t,t=e,e=[]),r=r||i||this;var n=[];return this.each(e,(function(){n.push(t&&t.apply(this,arguments))}),r),n},e.prototype.map=function(e,t,r,i){var n=r||i||this,a=fx(ax(e),this.getDimension,this);var s=sx(this,a),o=s._storage;s._indices=this._indices,s.getRawIndex=s._indices?tx:ex;for(var u=[],c=a.length,d=this.count(),h=[],l=s._rawExtent,f=0;f<d;f++){for(var p=0;p<c;p++)h[p]=this.get(a[p],f);h[c]=f;var v=t&&t.apply(n,h);if(null!=v){"object"!==typeof v&&(u[0]=v,v=u);for(var m=this.getRawIndex(f),g=0;g<v.length;g++){var y=a[g],b=v[g],x=l[y],k=o[y];k&&(k[m]=b),b<x[0]&&(x[0]=b),b>x[1]&&(x[1]=b)}}}return s},e.prototype.downSample=function(e,t,r,i){for(var n=sx(this,[e]),a=n._storage,s=[],o=hx(1/t),u=a[e],c=this.count(),d=n._rawExtent[e],h=new($b(this))(c),l=0,f=0;f<c;f+=o){o>c-f&&(o=c-f,s.length=o);for(var p=0;p<o;p++){var v=this.getRawIndex(f+p);s[p]=u[v]}var m=r(s),g=this.getRawIndex(Math.min(f+i(s,m)||0,c-1));u[g]=m,m<d[0]&&(d[0]=m),m>d[1]&&(d[1]=m),h[l++]=g}return n._count=l,n._indices=h,n.getRawIndex=tx,n},e.prototype.lttbDownSample=function(e,t){var r,i,n,a=sx(this,[]),s=a._storage[e],o=this.count(),u=new($b(this))(o),c=0,d=hx(1/t),h=this.getRawIndex(0);u[c++]=h;for(var l=1;l<o-1;l+=d){for(var f=Math.min(l+d,o-1),p=Math.min(l+2*d,o),v=(p+f)/2,m=0,g=f;g<p;g++){var y=s[_=this.getRawIndex(g)];isNaN(y)||(m+=y)}m/=p-f;var b=l,x=Math.min(l+d,o),k=l-1,w=s[h];r=-1,n=b;for(g=b;g<x;g++){var _;y=s[_=this.getRawIndex(g)];isNaN(y)||(i=Math.abs((k-v)*(y-w)-(k-g)*(m-w)))>r&&(r=i,n=_)}u[c++]=n,h=n}return u[c++]=this.getRawIndex(o-1),a._count=c,a._indices=u,a.getRawIndex=tx,a},e.prototype.getItemModel=function(e){var t=this.hostModel,r=this.getRawDataItem(e);return new Md(r,t,t&&t.ecModel)},e.prototype.diff=function(e){var t=this;return new Kb(e?e.getIndices():[],this.getIndices(),(function(t){return rx(e,t)}),(function(e){return rx(t,e)}))},e.prototype.getVisual=function(e){var t=this._visual;return t&&t[e]},e.prototype.setVisual=function(e,t){this._visual=this._visual||{},lx(e)?I(this._visual,e):this._visual[e]=t},e.prototype.getItemVisual=function(e,t){var r=this._itemVisuals[e],i=r&&r[t];return null==i?this.getVisual(t):i},e.prototype.hasItemVisual=function(){return this._itemVisuals.length>0},e.prototype.ensureUniqueItemVisual=function(e,t){var r=this._itemVisuals,i=r[e];i||(i=r[e]={});var n=i[t];return null==n&&(j(n=this.getVisual(t))?n=n.slice():lx(n)&&(n=I({},n)),i[t]=n),n},e.prototype.setItemVisual=function(e,t,r){var i=this._itemVisuals[e]||{};this._itemVisuals[e]=i,lx(t)?I(i,t):i[t]=r},e.prototype.clearAllVisual=function(){this._visual={},this._itemVisuals=[]},e.prototype.setLayout=function(e,t){if(lx(e))for(var r in e)e.hasOwnProperty(r)&&this.setLayout(r,e[r]);else this._layout[e]=t},e.prototype.getLayout=function(e){return this._layout[e]},e.prototype.getItemLayout=function(e){return this._itemLayouts[e]},e.prototype.setItemLayout=function(e,t,r){this._itemLayouts[e]=r?I(this._itemLayouts[e]||{},t):t},e.prototype.clearItemLayouts=function(){this._itemLayouts.length=0},e.prototype.setItemGraphicEl=function(e,t){var r=this.hostModel;if(t){var i=ao(t);i.dataIndex=e,i.dataType=this.dataType,i.seriesIndex=r&&r.seriesIndex,"group"===t.type&&t.traverse(ux,t)}this._graphicEls[e]=t},e.prototype.getItemGraphicEl=function(e){return this._graphicEls[e]},e.prototype.eachItemGraphicEl=function(e,t){L(this._graphicEls,(function(r,i){r&&e&&e.call(t,r,i)}))},e.prototype.cloneShallow=function(t){t||(t=new e(fx(this.dimensions,this.getDimensionInfo,this),this.hostModel));if(t._storage=this._storage,t._storageArr=this._storageArr,cx(t,this),this._indices){var r=this._indices.constructor;if(r===Array){var i=this._indices.length;t._indices=new r(i);for(var n=0;n<i;n++)t._indices[n]=this._indices[n]}else t._indices=new r(this._indices)}else t._indices=null;return t.getRawIndex=t._indices?tx:ex,t},e.prototype.wrapMethod=function(e,t){var r=this[e];"function"===typeof r&&(this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(e),this[e]=function(){var e=r.apply(this,arguments);return t.apply(this,[e].concat(te(arguments)))})},e.internalField=function(){function t(e,t,r,i){return Af(e[i],this._dimensionInfos[t])}function r(e){var t=e.constructor;return t===Array?e.slice():new t(e)}Zb={arrayRows:t,objectRows:function(e,t,r,i){return Af(e[t],this._dimensionInfos[t])},keyedColumns:t,original:function(e,t,r,i){var n=e&&(null==e.value?e:e.value);return!this._rawData.pure&&function(e){return K(e)&&!(e instanceof Array)}(e)&&(this.hasItemOption=!0),Af(n instanceof Array?n[i]:n,this._dimensionInfos[t])},typedArray:function(e,t,r,i){return e[i]}},Qb=function(e){var t=e._invertedIndicesMap;L(t,(function(r,i){var n=e._dimensionInfos[i].ordinalMeta;if(n){r=t[i]=new gx(n.categories.length);for(var a=0;a<r.length;a++)r[a]=-1;for(a=0;a<e._count;a++)r[e.get(i,a)]=a}}))},ix=function(e,t,r,i){var n,a=e._storageArr[t];return a&&(n=a[i],r&&r.categories.length&&(n=r.categories[n])),cn(n,null)},$b=function(e){return e._rawCount>65535?mx:yx},Jb=function(e,t,r,i){var n=vx[t.type],a=t.name;if(i){var s=e[a],o=s&&s.length;if(o!==r){for(var u=new n(r),c=0;c<o;c++)u[c]=s[c];e[a]=u}}else e[a]=new n(r)},ex=function(e){return e},tx=function(e){return e<this._count&&e>=0?this._indices[e]:-1},rx=function(e,t){var r=e._idList[t];return null==r&&null!=e._idDimIdx&&(r=ix(e,e._idDimIdx,e._idOrdinalMeta,t)),null==r&&(r="e\0\0"+t),r},ax=function(e){return j(e)||(e=null!=e?[e]:[]),e},function(e,t){for(var r=0;r<t.length;r++)e._dimensionInfos[t[r]]||console.error("Unkown dimension "+t[r])},sx=function(t,i){var n=t.dimensions,a=new e(fx(n,t.getDimensionInfo,t),t.hostModel);cx(a,t);for(var s=a._storage={},o=t._storage,u=a._storageArr=[],c=0;c<n.length;c++){var d=n[c];o[d]&&(E(i,d)>=0?(s[d]=r(o[d]),a._rawExtent[d]=ox(),a._extent[d]=null):s[d]=o[d],u.push(s[d]))}return a},ox=function(){return[1/0,-1/0]},ux=function(e){var t=ao(e),r=ao(this);t.seriesIndex=r.seriesIndex,t.dataIndex=r.dataIndex,t.dataType=r.dataType},cx=function(e,t){L(bx.concat(t.__wrappedMethods||[]),(function(r){t.hasOwnProperty(r)&&(e[r]=t[r])})),e.__wrappedMethods=t.__wrappedMethods,L(xx,(function(r){e[r]=O(t[r])})),e._calculationInfo=I({},t._calculationInfo)},nx=function(e,t){var r=e._nameList,i=e._idList,n=e._nameDimIdx,a=e._idDimIdx,s=r[t],o=i[t];if(null==s&&null!=n&&(r[t]=s=ix(e,n,e._nameOrdinalMeta,t)),null==o&&null!=a&&(i[t]=o=ix(e,a,e._idOrdinalMeta,t)),null==o&&null!=s){var u=e._nameRepeatCount,c=u[s]=(u[s]||0)+1;o=s,c>1&&(o+="__ec__"+c),i[t]=o}}}(),e}();function _x(e,t,r){if(r||null!=t.get(e)){for(var i=0;null!=t.get(e+i);)i++;e+=i}return t.set(e,!0),e}var Sx=function(e,t,r){nf(t)||(t=sf(t)),r=r||{},e=(e||[]).slice();for(var i=(r.dimsDef||[]).slice(),n=ce(),a=ce(),s=[],o=function(e,t,r,i){var n=Math.max(e.dimensionsDetectedCount||1,t.length,r.length,i||0);return L(t,(function(e){var t;K(e)&&(t=e.dimsDef)&&(n=Math.max(n,t.length))})),n}(t,e,i,r.dimCount),u=0;u<o;u++){var c=i[u],d=i[u]=I({},K(c)?c:{name:c}),h=d.name,l=s[u]=new dx;null!=h&&null==n.get(h)&&(l.name=l.displayName=h,n.set(h,u)),null!=d.type&&(l.type=d.type),null!=d.displayName&&(l.displayName=d.displayName)}var f=r.encodeDef;!f&&r.encodeDefaulter&&(f=r.encodeDefaulter(t,o));var p=ce(f);p.each((function(e,t){var r=tn(e).slice();if(1===r.length&&!H(r[0])&&r[0]<0)p.set(t,!1);else{var i=p.set(t,[]);L(r,(function(e,r){var a=H(e)?n.get(e):e;null!=a&&a<o&&(i[r]=a,m(s[a],t,r))}))}}));var v=0;function m(e,t,r){null!=Uh.get(t)?e.otherDims[t]=r:(e.coordDim=t,e.coordDimIndex=r,a.set(t,!0))}L(e,(function(e){var t,r,i,n;if(H(e))t=e,n={};else{t=(n=e).name;var a=n.ordinalMeta;n.ordinalMeta=null,(n=O(n)).ordinalMeta=a,r=n.dimsDef,i=n.otherDims,n.name=n.coordDim=n.coordDimIndex=n.dimsDef=n.otherDims=null}var o=p.get(t);if(!1!==o){if(!(o=tn(o)).length)for(var u=0;u<(r&&r.length||1);u++){for(;v<s.length&&null!=s[v].coordDim;)v++;v<s.length&&o.push(v++)}L(o,(function(e,a){var o=s[e];if(m(M(o,n),t,a),null==o.name&&r){var u=r[a];!K(u)&&(u={name:u}),o.name=o.displayName=u.name,o.defaultTooltip=u.defaultTooltip}i&&M(o.otherDims,i)}))}}));var g=r.generateCoord,y=r.generateCoordCount,b=null!=y;y=g?y||1:0;for(var x=g||"value",k=0;k<o;k++){null==(l=s[k]=s[k]||new dx).coordDim&&(l.coordDim=_x(x,a,b),l.coordDimIndex=0,(!g||y<=0)&&(l.isExtraCoord=!0),y--),null==l.name&&(l.name=_x(l.coordDim,n,!1)),null!=l.type||ol(t,k)!==el&&(!l.isExtraCoord||null==l.otherDims.itemName&&null==l.otherDims.seriesName)||(l.type="ordinal")}return s};function Ox(e,t){return Sx((t=t||{}).coordDimensions||[],e,{dimsDef:t.dimensionsDefine||e.dimensionsDefine,encodeDef:t.encodeDefine||e.encodeDefine,dimCount:t.dimensionsCount,encodeDefaulter:t.encodeDefaulter,generateCoord:t.generateCoord,generateCoordCount:t.generateCoordCount})}var Tx=function(e){this.coordSysDims=[],this.axisMap=ce(),this.categoryAxisMap=ce(),this.coordSysName=e};var Cx={cartesian2d:function(e,t,r,i){var n=e.getReferringComponents("xAxis",gn).models[0],a=e.getReferringComponents("yAxis",gn).models[0];t.coordSysDims=["x","y"],r.set("x",n),r.set("y",a),Ix(n)&&(i.set("x",n),t.firstCategoryDimIndex=0),Ix(a)&&(i.set("y",a),null==t.firstCategoryDimIndex&&(t.firstCategoryDimIndex=1))},singleAxis:function(e,t,r,i){var n=e.getReferringComponents("singleAxis",gn).models[0];t.coordSysDims=["single"],r.set("single",n),Ix(n)&&(i.set("single",n),t.firstCategoryDimIndex=0)},polar:function(e,t,r,i){var n=e.getReferringComponents("polar",gn).models[0],a=n.findAxisModel("radiusAxis"),s=n.findAxisModel("angleAxis");t.coordSysDims=["radius","angle"],r.set("radius",a),r.set("angle",s),Ix(a)&&(i.set("radius",a),t.firstCategoryDimIndex=0),Ix(s)&&(i.set("angle",s),null==t.firstCategoryDimIndex&&(t.firstCategoryDimIndex=1))},geo:function(e,t,r,i){t.coordSysDims=["lng","lat"]},parallel:function(e,t,r,i){var n=e.ecModel,a=n.getComponent("parallel",e.get("parallelIndex")),s=t.coordSysDims=a.dimensions.slice();L(a.parallelAxisIndex,(function(e,a){var o=n.getComponent("parallelAxis",e),u=s[a];r.set(u,o),Ix(o)&&(i.set(u,o),null==t.firstCategoryDimIndex&&(t.firstCategoryDimIndex=a))}))}};function Ix(e){return"category"===e.get("type")}function Mx(e,t){return!!t&&t===e.getCalculationInfo("stackedDimension")}function Ax(e,t){return Mx(e,t)?e.getCalculationInfo("stackResultDimension"):t}var Ex=function(e,t,r){r=r||{},nf(e)||(e=sf(e));var i,n=t.get("coordinateSystem"),a=Tl.get(n),s=function(e){var t=e.get("coordinateSystem"),r=new Tx(t),i=Cx[t];if(i)return i(e,r,r.axisMap,r.categoryAxisMap),r}(t);s&&s.coordSysDims&&(i=B(s.coordSysDims,(function(e){var t={name:e},r=s.axisMap.get(e);if(r){var i=r.get("type");t.type=Yb(i)}return t}))),i||(i=a&&(a.getDimensionsInfo?a.getDimensionsInfo():a.dimensions.slice())||["x","y"]);var o,u,c=r.useEncodeDefaulter,d=Ox(e,{coordDimensions:i,generateCoord:r.generateCoord,encodeDefaulter:z(c)?c:c?q(nl,i,t):null});s&&L(d,(function(e,t){var i=e.coordDim,n=s.categoryAxisMap.get(i);n&&(null==o&&(o=t),e.ordinalMeta=n.getOrdinalMeta(),r.createInvertedIndices&&(e.createInvertedIndices=!0)),null!=e.otherDims.itemName&&(u=!0)})),u||null==o||(d[o].otherDims.itemName=0);var h=function(e,t,r){var i,n,a,s,o=(r=r||{}).byIndex,u=r.stackedCoordDimension,c=!(!e||!e.get("stack"));if(L(t,(function(e,r){H(e)&&(t[r]=e={name:e}),c&&!e.isExtraCoord&&(o||i||!e.ordinalMeta||(i=e),n||"ordinal"===e.type||"time"===e.type||u&&u!==e.coordDim||(n=e))})),!n||o||i||(o=!0),n){a="__\0ecstackresult",s="__\0ecstackedover",i&&(i.createInvertedIndices=!0);var d=n.coordDim,h=n.type,l=0;L(t,(function(e){e.coordDim===d&&l++})),t.push({name:a,coordDim:d,coordDimIndex:l,type:h,isExtraCoord:!0,isCalculationCoord:!0}),l++,t.push({name:s,coordDim:s,coordDimIndex:l,type:h,isExtraCoord:!0,isCalculationCoord:!0})}return{stackedDimension:n&&n.name,stackedByDimension:i&&i.name,isStackedByIndex:o,stackedOverDimension:s,stackResultDimension:a}}(t,d),l=new kx(d,t);l.setCalculationInfo(h);var f=null!=o&&function(e){if(e.sourceFormat===Wh){var t=function(e){var t=0;for(;t<e.length&&null==e[t];)t++;return e[t]}(e.data||[]);return null!=t&&!j(an(t))}}(e)?function(e,t,r,i){return i===o?r:this.defaultDimValueGetter(e,t,r,i)}:null;return l.hasItemOption=!1,l.initData(e,null,f),l},Nx=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return r.type=t.type,r.hasSymbolVisual=!0,r}return a(t,e),t.prototype.getInitialData=function(e){return Ex(this.getSource(),this,{useEncodeDefaulter:!0})},t.prototype.getLegendIcon=function(e){var t=new Ti,r=gm("line",0,e.itemHeight/2,e.itemWidth,0,e.lineStyle.stroke,!1);t.add(r),r.setStyle(e.lineStyle);var i=this.getData().getVisual("symbol"),n="none"===i?"circle":i,a=.8*e.itemHeight,s=gm(n,(e.itemWidth-a)/2,(e.itemHeight-a)/2,a,a,e.itemStyle.fill,e.symbolKeepAspect);return t.add(s),s.setStyle(e.itemStyle),n.indexOf("empty")>-1&&(s.style.stroke=s.style.fill,s.style.fill="#fff",s.style.lineWidth=2),t},t.type="series.line",t.dependencies=["grid","polar"],t.defaultOption={zlevel:0,z:3,coordinateSystem:"cartesian2d",legendHoverLink:!0,clip:!0,label:{position:"top"},endLabel:{show:!1,valueAnimation:!0,distance:8},lineStyle:{width:2,type:"solid"},emphasis:{scale:!0,lineStyle:{width:"bolder"}},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0},t}(xp);function Px(e,t){var r=e.mapDimensionsAll("defaultedLabel"),i=r.length;if(1===i){var n=wf(e,t,r[0]);return null!=n?n+"":null}if(i){for(var a=[],s=0;s<r.length;s++)a.push(wf(e,t,r[s]));return a.join(" ")}}function Dx(e,t){var r=e.mapDimensionsAll("defaultedLabel");if(!j(t))return t+"";for(var i=[],n=0;n<r.length;n++){var a=e.getDimensionInfo(r[n]);a&&i.push(t[a.index])}return i.join(" ")}function Lx(e,t){this.parent.drift(e,t)}var Bx=function(e){function t(t,r,i,n){var a=e.call(this)||this;return a.updateData(t,r,i,n),a}return a(t,e),t.prototype._createSymbol=function(e,t,r,i,n){this.removeAll();var a=gm(e,-1,-1,2,2,null,n);a.attr({z2:100,culling:!0,scaleX:i[0]/2,scaleY:i[1]/2}),a.drift=Lx,this._symbolType=e,this.add(a)},t.prototype.stopSymbolAnimation=function(e){this.childAt(0).stopAnimation(null,e)},t.prototype.getSymbolPath=function(){return this.childAt(0)},t.prototype.highlight=function(){Lo(this.childAt(0))},t.prototype.downplay=function(){Bo(this.childAt(0))},t.prototype.setZ=function(e,t){var r=this.childAt(0);r.zlevel=e,r.z=t},t.prototype.setDraggable=function(e){var t=this.childAt(0);t.draggable=e,t.cursor=e?"move":t.cursor},t.prototype.updateData=function(e,r,i,n){this.silent=!1;var a=e.getItemVisual(r,"symbol")||"circle",s=e.hostModel,o=t.getSymbolSize(e,r),u=a!==this._symbolType,c=n&&n.disableAnimation;if(u){var d=e.getItemVisual(r,"symbolKeepAspect");this._createSymbol(a,e,r,o,d)}else{(l=this.childAt(0)).silent=!1;var h={scaleX:o[0]/2,scaleY:o[1]/2};c?l.attr(h):Fc(l,h,s,r)}if(this._updateCommon(e,r,o,i,n),u){var l=this.childAt(0);if(!c){h={scaleX:this._sizeX,scaleY:this._sizeY,style:{opacity:l.style.opacity}};l.scaleX=l.scaleY=0,l.style.opacity=0,qc(l,h,s,r)}}c&&this.childAt(0).stopAnimation("remove"),this._seriesModel=s},t.prototype._updateCommon=function(e,t,r,i,n){var a,s,o,u,c,d,h,l,f=this.childAt(0),p=e.hostModel;if(i&&(a=i.emphasisItemStyle,s=i.blurItemStyle,o=i.selectItemStyle,u=i.focus,c=i.blurScope,d=i.labelStatesModels,h=i.hoverScale,l=i.cursorStyle),!i||e.hasItemOption){var v=i&&i.itemModel?i.itemModel:e.getItemModel(t),m=v.getModel("emphasis");a=m.getModel("itemStyle").getItemStyle(),o=v.getModel(["select","itemStyle"]).getItemStyle(),s=v.getModel(["blur","itemStyle"]).getItemStyle(),u=m.get("focus"),c=m.get("blurScope"),d=ud(v),h=m.getShallow("scale"),l=v.getShallow("cursor")}var g=e.getItemVisual(t,"symbolRotate");f.attr("rotation",(g||0)*Math.PI/180||0);var y=e.getItemVisual(t,"symbolOffset")||0;y&&(j(y)||(y=[y,y]),f.x=Di(y[0],r[0]),f.y=Di(J(y[1],y[0])||0,r[1])),l&&f.attr("cursor",l);var b=e.getItemVisual(t,"style"),x=b.fill;if(f instanceof Gs){var k=f.style;f.useStyle(I({image:k.image,x:k.x,y:k.y,width:k.width,height:k.height},b))}else f.__isEmptyBrush?f.useStyle(I({},b)):f.useStyle(b),f.style.decal=null,f.setColor(x,n&&n.symbolInnerColor),f.style.strokeNoScale=!0;var w=e.getItemVisual(t,"liftZ"),_=this._z2;null!=w?null==_&&(this._z2=f.z2,f.z2+=w):null!=_&&(f.z2=_,this._z2=null);var S=n&&n.useNameLabel;od(f,d,{labelFetcher:p,labelDataIndex:t,defaultText:function(t){return S?e.getName(t):Px(e,t)},inheritColor:x,defaultOpacity:b.opacity}),this._sizeX=r[0]/2,this._sizeY=r[1]/2;var O=f.ensureState("emphasis");if(O.style=a,f.ensureState("select").style=o,f.ensureState("blur").style=s,h){var T=Math.max(1.1,3/this._sizeY);O.scaleX=this._sizeX*T,O.scaleY=this._sizeY*T}this.setSymbolScale(1),Xo(this,u,c)},t.prototype.setSymbolScale=function(e){this.scaleX=this.scaleY=e},t.prototype.fadeOut=function(e,t){var r=this.childAt(0),i=this._seriesModel,n=ao(this).dataIndex,a=t&&t.animation;if(this.silent=r.silent=!0,t&&t.fadeLabel){var s=r.getTextContent();s&&jc(s,{style:{opacity:0}},i,{dataIndex:n,removeOpt:a,cb:function(){r.removeTextContent()}})}else r.removeTextContent();jc(r,{style:{opacity:0},scaleX:0,scaleY:0},i,{dataIndex:n,cb:e,removeOpt:a})},t.getSymbolSize=function(e,t){var r=e.getItemVisual(t,"symbolSize");return j(r)?r.slice():[+r,+r]},t}(Ti);function Rx(e,t,r,i){return t&&!isNaN(t[0])&&!isNaN(t[1])&&!(i.isIgnore&&i.isIgnore(r))&&!(i.clipShape&&!i.clipShape.contain(t[0],t[1]))&&"none"!==e.getItemVisual(r,"symbol")}function Vx(e){return null==e||K(e)||(e={isIgnore:e}),e||{}}function Gx(e){var t=e.hostModel,r=t.getModel("emphasis");return{emphasisItemStyle:r.getModel("itemStyle").getItemStyle(),blurItemStyle:t.getModel(["blur","itemStyle"]).getItemStyle(),selectItemStyle:t.getModel(["select","itemStyle"]).getItemStyle(),focus:r.get("focus"),blurScope:r.get("blurScope"),hoverScale:r.get("scale"),labelStatesModels:ud(t),cursorStyle:t.get("cursor")}}var Fx=function(){function e(e){this.group=new Ti,this._SymbolCtor=e||Bx}return e.prototype.updateData=function(e,t){t=Vx(t);var r=this.group,i=e.hostModel,n=this._data,a=this._SymbolCtor,s=t.disableAnimation,o=Gx(e),u={disableAnimation:s},c=t.getSymbolPoint||function(t){return e.getItemLayout(t)};n||r.removeAll(),e.diff(n).add((function(i){var n=c(i);if(Rx(e,n,i,t)){var s=new a(e,i,o,u);s.setPosition(n),e.setItemGraphicEl(i,s),r.add(s)}})).update((function(d,h){var l=n.getItemGraphicEl(h),f=c(d);if(Rx(e,f,d,t)){if(l){l.updateData(e,d,o,u);var p={x:f[0],y:f[1]};s?l.attr(p):Fc(l,p,i)}else(l=new a(e,d)).setPosition(f);r.add(l),e.setItemGraphicEl(d,l)}else r.remove(l)})).remove((function(e){var t=n.getItemGraphicEl(e);t&&t.fadeOut((function(){r.remove(t)}))})).execute(),this._getSymbolPoint=c,this._data=e},e.prototype.isPersistent=function(){return!0},e.prototype.updateLayout=function(){var e=this,t=this._data;t&&t.eachItemGraphicEl((function(t,r){var i=e._getSymbolPoint(r);t.setPosition(i),t.markRedraw()}))},e.prototype.incrementalPrepareUpdate=function(e){this._seriesScope=Gx(e),this._data=null,this.group.removeAll()},e.prototype.incrementalUpdate=function(e,t,r){function i(e){e.isGroup||(e.incremental=!0,e.ensureState("emphasis").hoverLayer=!0)}r=Vx(r);for(var n=e.start;n<e.end;n++){var a=t.getItemLayout(n);if(Rx(t,a,n,r)){var s=new this._SymbolCtor(t,n,this._seriesScope);s.traverse(i),s.setPosition(a),this.group.add(s),t.setItemGraphicEl(n,s)}}},e.prototype.remove=function(e){var t=this.group,r=this._data;r&&e?r.eachItemGraphicEl((function(e){e.fadeOut((function(){t.remove(e)}))})):t.removeAll()},e}();function qx(e,t,r){var i=e.getBaseAxis(),n=e.getOtherAxis(i),a=function(e,t){var r=0,i=e.scale.getExtent();"start"===t?r=i[0]:"end"===t?r=i[1]:i[0]>0?r=i[0]:i[1]<0&&(r=i[1]);return r}(n,r),s=i.dim,o=n.dim,u=t.mapDimension(o),c=t.mapDimension(s),d="x"===o||"radius"===o?1:0,h=B(e.dimensions,(function(e){return t.mapDimension(e)})),l=!1,f=t.getCalculationInfo("stackResultDimension");return Mx(t,h[0])&&(l=!0,h[0]=f),Mx(t,h[1])&&(l=!0,h[1]=f),{dataDimsForPoint:h,valueStart:a,valueAxisDim:o,baseAxisDim:s,stacked:!!l,valueDim:u,baseDim:c,baseDataOffset:d,stackedOverDimension:t.getCalculationInfo("stackedOverDimension")}}function jx(e,t,r,i){var n=NaN;e.stacked&&(n=r.get(r.getCalculationInfo("stackedOverDimension"),i)),isNaN(n)&&(n=e.valueStart);var a=e.baseDataOffset,s=[];return s[a]=r.get(e.baseDim,i),s[1-a]=n,t.dataToPoint(s)}var zx="undefined"!==typeof Float32Array,Hx=zx?Float32Array:Array;function Ux(e){return j(e)?zx?new Float32Array(e):e:new Hx(e)}var Wx=Math.min,Kx=Math.max;function Xx(e,t){return isNaN(e)||isNaN(t)}function Yx(e,t,r,i,n,a,s,o,u){for(var c,d,h,l,f,p,v=r,m=0;m<i;m++){var g=t[2*v],y=t[2*v+1];if(v>=n||v<0)break;if(Xx(g,y)){if(u){v+=a;continue}break}if(v===r)e[a>0?"moveTo":"lineTo"](g,y),h=g,l=y;else{var b=g-c,x=y-d;if(b*b+x*x<.5){v+=a;continue}if(s>0){var k=v+a,w=t[2*k],_=t[2*k+1],S=m+1;if(u)for(;Xx(w,_)&&S<i;)S++,w=t[2*(k+=a)],_=t[2*k+1];var O=.5,T=0,C=0,I=void 0,M=void 0;if(S>=i||Xx(w,_))f=g,p=y;else{T=w-c,C=_-d;var A=g-c,E=w-g,N=y-d,P=_-y,D=void 0,L=void 0;"x"===o?(D=Math.abs(A),L=Math.abs(E),f=g-D*s,p=y,I=g+D*s,M=y):"y"===o?(D=Math.abs(N),L=Math.abs(P),f=g,p=y-D*s,I=g,M=y+D*s):(D=Math.sqrt(A*A+N*N),f=g-T*s*(1-(O=(L=Math.sqrt(E*E+P*P))/(L+D))),p=y-C*s*(1-O),M=y+C*s*O,I=Wx(I=g+T*s*O,Kx(w,g)),M=Wx(M,Kx(_,y)),I=Kx(I,Wx(w,g)),p=y-(C=(M=Kx(M,Wx(_,y)))-y)*D/L,f=Wx(f=g-(T=I-g)*D/L,Kx(c,g)),p=Wx(p,Kx(d,y)),I=g+(T=g-(f=Kx(f,Wx(c,g))))*L/D,M=y+(C=y-(p=Kx(p,Wx(d,y))))*L/D)}e.bezierCurveTo(h,l,f,p,g,y),h=I,l=M}else e.lineTo(g,y)}c=g,d=y,v+=a}return m}var Zx=function(){this.smooth=0,this.smoothConstraint=!0},Qx=function(e){function t(t){var r=e.call(this,t)||this;return r.type="ec-polyline",r}return a(t,e),t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new Zx},t.prototype.buildPath=function(e,t){var r=t.points,i=0,n=r.length/2;if(t.connectNulls){for(;n>0&&Xx(r[2*n-2],r[2*n-1]);n--);for(;i<n&&Xx(r[2*i],r[2*i+1]);i++);}for(;i<n;)i+=Yx(e,r,i,n,n,1,t.smooth,t.smoothMonotone,t.connectNulls)+1},t.prototype.getPointOn=function(e,t){this.path||(this.createPathProxy(),this.buildPath(this.path,this.shape));for(var r,i,n=this.path.data,a=hs.CMD,s="x"===t,o=[],u=0;u<n.length;){var c=void 0,d=void 0,h=void 0,l=void 0,f=void 0,p=void 0,v=void 0;switch(n[u++]){case a.M:r=n[u++],i=n[u++];break;case a.L:if(c=n[u++],d=n[u++],(v=s?(e-r)/(c-r):(e-i)/(d-i))<=1&&v>=0){var m=s?(d-i)*v+i:(c-r)*v+r;return s?[e,m]:[m,e]}r=c,i=d;break;case a.C:c=n[u++],d=n[u++],h=n[u++],l=n[u++],f=n[u++],p=n[u++];var g=s?xa(r,c,h,f,e,o):xa(i,d,l,p,e,o);if(g>0)for(var y=0;y<g;y++){var b=o[y];if(b<=1&&b>=0){m=s?ya(i,d,l,p,b):ya(r,c,h,f,b);return s?[e,m]:[m,e]}}r=f,i=p}}},t}(Ns),$x=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t}(Zx),Jx=function(e){function t(t){var r=e.call(this,t)||this;return r.type="ec-polygon",r}return a(t,e),t.prototype.getDefaultShape=function(){return new $x},t.prototype.buildPath=function(e,t){var r=t.points,i=t.stackedOnPoints,n=0,a=r.length/2,s=t.smoothMonotone;if(t.connectNulls){for(;a>0&&Xx(r[2*a-2],r[2*a-1]);a--);for(;n<a&&Xx(r[2*n],r[2*n+1]);n++);}for(;n<a;){var o=Yx(e,r,n,a,a,1,t.smooth,s,t.connectNulls);Yx(e,i,n+o-1,o,a,-1,t.stackedOnSmooth,s,t.connectNulls),n+=o+1,e.closePath()}},t}(Ns);function ek(e,t,r,i,n){var a=e.getArea(),s=a.x,o=a.y,u=a.width,c=a.height,d=r.get(["lineStyle","width"])||2;s-=d/2,o-=d/2,u+=d,c+=d,s=Math.floor(s),u=Math.round(u);var h=new Ks({shape:{x:s,y:o,width:u,height:c}});if(t){var l=e.getBaseAxis(),f=l.isHorizontal(),p=l.inverse;f?(p&&(h.shape.x+=u),h.shape.width=0):(p||(h.shape.y+=c),h.shape.height=0),qc(h,{shape:{width:u,height:c,x:s,y:o}},r,null,i,"function"===typeof n?function(e){n(e,h)}:null)}return h}function tk(e,t,r){var i=e.getArea(),n=Li(i.r0,1),a=Li(i.r,1),s=new ju({shape:{cx:Li(e.cx,1),cy:Li(e.cy,1),r0:n,r:a,startAngle:i.startAngle,endAngle:i.endAngle,clockwise:i.clockwise}});t&&("angle"===e.getBaseAxis().dim?s.shape.endAngle=i.startAngle:s.shape.r=n,qc(s,{shape:{endAngle:i.endAngle,r:a}},r));return s}function rk(e,t,r,i,n){return e?"polar"===e.type?tk(e,t,r):"cartesian2d"===e.type?ek(e,t,r,i,n):null:null}function ik(e,t){return e.type===t}function nk(e,t){if(e.length===t.length){for(var r=0;r<e.length;r++)if(e[r]!==t[r])return;return!0}}function ak(e){for(var t=1/0,r=1/0,i=-1/0,n=-1/0,a=0;a<e.length;){var s=e[a++],o=e[a++];isNaN(s)||(t=Math.min(s,t),i=Math.max(s,i)),isNaN(o)||(r=Math.min(o,r),n=Math.max(o,n))}return[[t,r],[i,n]]}function sk(e,t){var r=ak(e),i=r[0],n=r[1],a=ak(t),s=a[0],o=a[1];return Math.max(Math.abs(i[0]-s[0]),Math.abs(i[1]-s[1]),Math.abs(n[0]-o[0]),Math.abs(n[1]-o[1]))}function ok(e){return"number"===typeof e?e:e?.5:0}function uk(e,t,r){for(var i=t.getBaseAxis(),n="x"===i.dim||"radius"===i.dim?0:1,a=[],s=0,o=[],u=[],c=[];s<e.length-2;s+=2)switch(c[0]=e[s+2],c[1]=e[s+3],u[0]=e[s],u[1]=e[s+1],a.push(u[0],u[1]),r){case"end":o[n]=c[n],o[1-n]=u[1-n],a.push(o[0],o[1]);break;case"middle":var d=(u[n]+c[n])/2,h=[];o[n]=h[n]=d,o[1-n]=u[1-n],h[1-n]=c[1-n],a.push(o[0],o[1]),a.push(h[0],h[1]);break;default:o[n]=u[n],o[1-n]=c[1-n],a.push(o[0],o[1])}return a.push(e[s++],e[s++]),a}function ck(e,t,r){var i=e.get("showAllSymbol"),n="auto"===i;if(!i||n){var a=r.getAxesByScale("ordinal")[0];if(a&&(!n||!function(e,t){var r=e.getExtent(),i=Math.abs(r[1]-r[0])/e.scale.count();isNaN(i)&&(i=0);for(var n=t.count(),a=Math.max(1,Math.round(n/5)),s=0;s<n;s+=a)if(1.5*Bx.getSymbolSize(t,s)[e.isHorizontal()?1:0]>i)return!1;return!0}(a,t))){var s=t.mapDimension(a.dim),o={};return L(a.getViewLabels(),(function(e){var t=a.scale.getRawOrdinalNumber(e.tickValue);o[t]=1})),function(e){return!o.hasOwnProperty(t.get(s,e))}}}}function dk(e,t){return[e[2*t],e[2*t+1]]}function hk(e,t,r,i){if(ik(t,"cartesian2d")){var n=i.getModel("endLabel"),a=n.get("show"),s=n.get("valueAnimation"),o=i.getData(),u={lastFrameIndex:0},c=a?function(r,i){e._endLabelOnDuring(r,i,o,u,s,n,t)}:null,d=t.getBaseAxis().isHorizontal(),h=ek(t,r,i,(function(){var t=e._endLabel;t&&r&&null!=u.originalX&&t.attr({x:u.originalX,y:u.originalY})}),c);if(!i.get("clip",!0)){var l=h.shape,f=Math.max(l.width,l.height);d?(l.y-=f,l.height+=2*f):(l.x-=f,l.width+=2*f)}return c&&c(1,h),h}return tk(t,r,i)}var lk=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.init=function(){var e=new Ti,t=new Fx;this.group.add(t.group),this._symbolDraw=t,this._lineGroup=e},t.prototype.render=function(e,t,r){var i=this,n=e.coordinateSystem,a=this.group,s=e.getData(),o=e.getModel("lineStyle"),u=e.getModel("areaStyle"),c=s.getLayout("points")||[],d="polar"===n.type,h=this._coordSys,l=this._symbolDraw,f=this._polyline,p=this._polygon,v=this._lineGroup,m=e.get("animation"),g=!u.isEmpty(),y=u.get("origin"),b=qx(n,s,y),x=g&&function(e,t,r){if(!r.valueDim)return[];for(var i=t.count(),n=Ux(2*i),a=0;a<i;a++){var s=jx(r,e,t,a);n[2*a]=s[0],n[2*a+1]=s[1]}return n}(n,s,b),k=e.get("showSymbol"),w=k&&!d&&ck(e,s,n),_=this._data;_&&_.eachItemGraphicEl((function(e,t){e.__temp&&(a.remove(e),_.setItemGraphicEl(t,null))})),k||l.remove(),a.add(v);var S,O=!d&&e.get("step");n&&n.getArea&&e.get("clip",!0)&&(null!=(S=n.getArea()).width?(S.x-=.1,S.y-=.1,S.width+=.2,S.height+=.2):S.r0&&(S.r0-=.5,S.r+=.5)),this._clipShapeForSymbol=S;var T=function(e,t){var r=e.getVisual("visualMeta");if(r&&r.length&&e.count()&&"cartesian2d"===t.type){for(var i,n,a=r.length-1;a>=0;a--){var s=r[a].dimension,o=e.dimensions[s],u=e.getDimensionInfo(o);if("x"===(i=u&&u.coordDim)||"y"===i){n=r[a];break}}if(n){var c=t.getAxis(i),d=B(n.stops,(function(e){return{offset:0,coord:c.toGlobalCoord(c.dataToCoord(e.value)),color:e.color}})),h=d.length,l=n.outerColors.slice();h&&d[0].coord>d[h-1].coord&&(d.reverse(),l.reverse());var f=d[0].coord-10,p=d[h-1].coord+10,v=p-f;if(v<.001)return"transparent";L(d,(function(e){e.offset=(e.coord-f)/v})),d.push({offset:h?d[h-1].offset:.5,color:l[1]||"transparent"}),d.unshift({offset:h?d[0].offset:.5,color:l[0]||"transparent"});var m=new pc(0,0,0,0,d,!0);return m[i]=f,m[i+"2"]=p,m}}}(s,n)||s.getVisual("style")[s.getVisual("drawType")];f&&h.type===n.type&&O===this._step?(g&&!p?p=this._newPolygon(c,x):p&&!g&&(v.remove(p),p=this._polygon=null),d||this._initOrUpdateEndLabel(e,n,Th(T)),v.setClipPath(hk(this,n,!1,e)),k&&l.updateData(s,{isIgnore:w,clipShape:S,disableAnimation:!0,getSymbolPoint:function(e){return[c[2*e],c[2*e+1]]}}),nk(this._stackedOnPoints,x)&&nk(this._points,c)||(m?this._doUpdateAnimation(s,x,n,r,O,y):(O&&(c=uk(c,n,O),x&&(x=uk(x,n,O))),f.setShape({points:c}),p&&p.setShape({points:c,stackedOnPoints:x})))):(k&&l.updateData(s,{isIgnore:w,clipShape:S,disableAnimation:!0,getSymbolPoint:function(e){return[c[2*e],c[2*e+1]]}}),m&&this._initSymbolLabelAnimation(s,n,S),O&&(c=uk(c,n,O),x&&(x=uk(x,n,O))),f=this._newPolyline(c),g&&(p=this._newPolygon(c,x)),d||this._initOrUpdateEndLabel(e,n,Th(T)),v.setClipPath(hk(this,n,!0,e)));var C=e.get(["emphasis","focus"]),I=e.get(["emphasis","blurScope"]);(f.useStyle(M(o.getLineStyle(),{fill:"none",stroke:T,lineJoin:"bevel"})),$o(f,e,"lineStyle"),f.style.lineWidth>0&&"bolder"===e.get(["emphasis","lineStyle","width"]))&&(f.getState("emphasis").style.lineWidth=+f.style.lineWidth+1);ao(f).seriesIndex=e.seriesIndex,Xo(f,C,I);var A=ok(e.get("smooth")),E=e.get("smoothMonotone"),N=e.get("connectNulls");if(f.setShape({smooth:A,smoothMonotone:E,connectNulls:N}),p){var P=s.getCalculationInfo("stackedOnSeries"),D=0;p.useStyle(M(u.getAreaStyle(),{fill:T,opacity:.7,lineJoin:"bevel",decal:s.getVisual("style").decal})),P&&(D=ok(P.get("smooth"))),p.setShape({smooth:A,stackedOnSmooth:D,smoothMonotone:E,connectNulls:N}),$o(p,e,"areaStyle"),ao(p).seriesIndex=e.seriesIndex,Xo(p,C,I)}var R=function(e){i._changePolyState(e)};s.eachItemGraphicEl((function(e){e&&(e.onHoverStateChange=R)})),this._polyline.onHoverStateChange=R,this._data=s,this._coordSys=n,this._stackedOnPoints=x,this._points=c,this._step=O,this._valueOrigin=y},t.prototype.dispose=function(){},t.prototype.highlight=function(e,t,r,i){var n=e.getData(),a=ln(n,i);if(this._changePolyState("emphasis"),!(a instanceof Array)&&null!=a&&a>=0){var s=n.getLayout("points"),o=n.getItemGraphicEl(a);if(!o){var u=s[2*a],c=s[2*a+1];if(isNaN(u)||isNaN(c))return;if(this._clipShapeForSymbol&&!this._clipShapeForSymbol.contain(u,c))return;(o=new Bx(n,a)).x=u,o.y=c,o.setZ(e.get("zlevel"),e.get("z"));var d=o.getSymbolPath().getTextContent();d&&(d.z2=this._polyline.z2+1),o.__temp=!0,n.setItemGraphicEl(a,o),o.stopSymbolAnimation(!0),this.group.add(o)}o.highlight()}else Np.prototype.highlight.call(this,e,t,r,i)},t.prototype.downplay=function(e,t,r,i){var n=e.getData(),a=ln(n,i);if(this._changePolyState("normal"),null!=a&&a>=0){var s=n.getItemGraphicEl(a);s&&(s.__temp?(n.setItemGraphicEl(a,null),this.group.remove(s)):s.downplay())}else Np.prototype.downplay.call(this,e,t,r,i)},t.prototype._changePolyState=function(e){var t=this._polygon;Ao(this._polyline,e),t&&Ao(t,e)},t.prototype._newPolyline=function(e){var t=this._polyline;return t&&this._lineGroup.remove(t),t=new Qx({shape:{points:e},segmentIgnoreThreshold:2,z2:10}),this._lineGroup.add(t),this._polyline=t,t},t.prototype._newPolygon=function(e,t){var r=this._polygon;return r&&this._lineGroup.remove(r),r=new Jx({shape:{points:e,stackedOnPoints:t},segmentIgnoreThreshold:2}),this._lineGroup.add(r),this._polygon=r,r},t.prototype._initSymbolLabelAnimation=function(e,t,r){var i,n,a=t.getBaseAxis(),s=a.inverse;"cartesian2d"===t.type?(i=a.isHorizontal(),n=!1):"polar"===t.type&&(i="angle"===a.dim,n=!0);var o=e.hostModel,u=o.get("animationDuration");"function"===typeof u&&(u=u(null));var c=o.get("animationDelay")||0,d="function"===typeof c?c(null):c;e.eachItemGraphicEl((function(e,a){var o=e;if(o){var h=[e.x,e.y],l=void 0,f=void 0,p=void 0;if(n){var v=r,m=t.pointToCoord(h);i?(l=v.startAngle,f=v.endAngle,p=-m[1]/180*Math.PI):(l=v.r0,f=v.r,p=m[0])}else{var g=r;i?(l=g.x,f=g.x+g.width,p=e.x):(l=g.y+g.height,f=g.y,p=e.y)}var y=f===l?0:(p-l)/(f-l);s&&(y=1-y);var b="function"===typeof c?c(a):u*y+d,x=o.getSymbolPath(),k=x.getTextContent();o.attr({scaleX:0,scaleY:0}),o.animateTo({scaleX:1,scaleY:1},{duration:200,delay:b}),k&&k.animateFrom({style:{opacity:0}},{duration:300,delay:b}),x.disableLabelAnimation=!0}}))},t.prototype._initOrUpdateEndLabel=function(e,t,r){var i=e.getModel("endLabel");if(i.get("show")){var n=e.getData(),a=this._polyline,s=this._endLabel;s||((s=this._endLabel=new no({z2:200})).ignoreClip=!0,a.setTextContent(this._endLabel),a.disableLabelAnimation=!0);var o=function(e){for(var t,r,i=e.length/2;i>0&&(t=e[2*i-2],r=e[2*i-1],isNaN(t)||isNaN(r));i--);return i-1}(n.getLayout("points"));o>=0&&(od(a,ud(e,"endLabel"),{inheritColor:r,labelFetcher:e,labelDataIndex:o,defaultText:function(e,t,r){return null!=r?Dx(n,r):Px(n,e)},enableTextSetter:!0},function(e,t){var r=t.getBaseAxis(),i=r.isHorizontal(),n=r.inverse,a=i?n?"right":"left":"center",s=i?"middle":n?"top":"bottom";return{normal:{align:e.get("align")||a,verticalAlign:e.get("verticalAlign")||s}}}(i,t)),a.textConfig.position=null)}else this._endLabel&&(this._polyline.removeTextContent(),this._endLabel=null)},t.prototype._endLabelOnDuring=function(e,t,r,i,n,a,s){var o=this._endLabel,u=this._polyline;if(o){e<1&&null==i.originalX&&(i.originalX=o.x,i.originalY=o.y);var c=r.getLayout("points"),d=r.hostModel,h=d.get("connectNulls"),l=a.get("precision"),f=a.get("distance")||0,p=s.getBaseAxis(),v=p.isHorizontal(),m=p.inverse,g=t.shape,y=m?v?g.x:g.y+g.height:v?g.x+g.width:g.y,b=(v?f:0)*(m?-1:1),x=(v?0:-f)*(m?-1:1),k=v?"x":"y",w=function(e,t,r){for(var i,n,a=e.length/2,s="x"===r?0:1,o=0,u=-1,c=0;c<a;c++)if(n=e[2*c+s],!isNaN(n)&&!isNaN(e[2*c+1-s]))if(0!==c){if(i<=t&&n>=t||i>=t&&n<=t){u=c;break}o=c,i=n}else i=n;return{range:[o,u],t:(t-i)/(n-i)}}(c,y,k),_=w.range,S=_[1]-_[0],O=void 0;if(S>=1){if(S>1&&!h){var T=dk(c,_[0]);o.attr({x:T[0]+b,y:T[1]+x}),n&&(O=d.getRawValue(_[0]))}else{(T=u.getPointOn(y,k))&&o.attr({x:T[0]+b,y:T[1]+x});var C=d.getRawValue(_[0]),I=d.getRawValue(_[1]);n&&(O=wn(r,l,C,I,w.t))}i.lastFrameIndex=_[0]}else{var M=1===e||i.lastFrameIndex>0?_[0]:0;T=dk(c,M);n&&(O=d.getRawValue(M)),o.attr({x:T[0]+b,y:T[1]+x})}n&&md(o).setLabelText(O)}},t.prototype._doUpdateAnimation=function(e,t,r,i,n,a){var s=this._polyline,o=this._polygon,u=e.hostModel,c=function(e,t,r,i,n,a,s,o){for(var u=function(e,t){var r=[];return t.diff(e).add((function(e){r.push({cmd:"+",idx:e})})).update((function(e,t){r.push({cmd:"=",idx:t,idx1:e})})).remove((function(e){r.push({cmd:"-",idx:e})})).execute(),r}(e,t),c=[],d=[],h=[],l=[],f=[],p=[],v=[],m=qx(n,t,s),g=(qx(a,e,o),e.getLayout("points")||[]),y=t.getLayout("points")||[],b=0;b<u.length;b++){var x=u[b],k=!0,w=void 0,_=void 0;switch(x.cmd){case"=":w=2*x.idx,_=2*x.idx1;var S=g[w],O=g[w+1],T=y[_],C=y[_+1];(isNaN(S)||isNaN(O))&&(S=T,O=C),c.push(S,O),d.push(T,C),h.push(r[w],r[w+1]),l.push(i[_],i[_+1]),v.push(t.getRawIndex(x.idx1));break;case"+":var I=x.idx,M=m.dataDimsForPoint,A=n.dataToPoint([t.get(M[0],I),t.get(M[1],I)]);_=2*I,c.push(A[0],A[1]),d.push(y[_],y[_+1]);var E=jx(m,n,t,I);h.push(E[0],E[1]),l.push(i[_],i[_+1]),v.push(t.getRawIndex(I));break;case"-":k=!1}k&&(f.push(x),p.push(p.length))}p.sort((function(e,t){return v[e]-v[t]}));var N=c.length,P=Ux(N),D=Ux(N),L=Ux(N),B=Ux(N),R=[];for(b=0;b<p.length;b++){var V=p[b],G=2*b,F=2*V;P[G]=c[F],P[G+1]=c[F+1],D[G]=d[F],D[G+1]=d[F+1],L[G]=h[F],L[G+1]=h[F+1],B[G]=l[F],B[G+1]=l[F+1],R[b]=f[V]}return{current:P,next:D,stackedOnCurrent:L,stackedOnNext:B,status:R}}(this._data,e,this._stackedOnPoints,t,this._coordSys,r,this._valueOrigin,a),d=c.current,h=c.stackedOnCurrent,l=c.next,f=c.stackedOnNext;if(n&&(d=uk(c.current,r,n),h=uk(c.stackedOnCurrent,r,n),l=uk(c.next,r,n),f=uk(c.stackedOnNext,r,n)),sk(d,l)>3e3||o&&sk(h,f)>3e3)return s.setShape({points:l}),void(o&&o.setShape({points:l,stackedOnPoints:f}));s.shape.__points=c.current,s.shape.points=d;var p={shape:{points:l}};c.current!==d&&(p.shape.__points=c.next),s.stopAnimation(),Fc(s,p,u),o&&(o.setShape({points:d,stackedOnPoints:h}),o.stopAnimation(),Fc(o,{shape:{stackedOnPoints:f}},u),s.shape.points!==o.shape.points&&(o.shape.points=s.shape.points));for(var v=[],m=c.status,g=0;g<m.length;g++){if("="===m[g].cmd){var y=e.getItemGraphicEl(m[g].idx1);y&&v.push({el:y,ptIdx:g})}}s.animators&&s.animators.length&&s.animators[0].during((function(){o&&o.dirtyShape();for(var e=s.shape.__points,t=0;t<v.length;t++){var r=v[t].el,i=2*v[t].ptIdx;r.x=e[i],r.y=e[i+1],r.markRedraw()}}))},t.prototype.remove=function(e){var t=this.group,r=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),r&&r.eachItemGraphicEl((function(e,i){e.__temp&&(t.remove(e),r.setItemGraphicEl(i,null))})),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._endLabel=this._data=null},t.type="line",t}(Np);function fk(e,t){return{seriesType:e,plan:_p(),reset:function(e){var r=e.getData(),i=e.coordinateSystem,n=e.pipelineContext,a=t||n.large;if(i){var s=B(i.dimensions,(function(e){return r.mapDimension(e)})).slice(0,2),o=s.length,u=r.getCalculationInfo("stackResultDimension");Mx(r,s[0])&&(s[0]=u),Mx(r,s[1])&&(s[1]=u);var c=r.getDimensionInfo(s[0]),d=r.getDimensionInfo(s[1]),h=c&&c.index,l=d&&d.index;return o&&{progress:function(e,t){for(var r=e.end-e.start,n=a&&Ux(r*o),s=[],u=[],c=e.start,d=0;c<e.end;c++){var f=void 0;if(1===o){var p=t.getByDimIdx(h,c);f=i.dataToPoint(p,null,u)}else s[0]=t.getByDimIdx(h,c),s[1]=t.getByDimIdx(l,c),f=i.dataToPoint(s,null,u);a?(n[d++]=f[0],n[d++]=f[1]):t.setItemLayout(c,f.slice())}a&&t.setLayout("points",n)}}}}}}var pk={average:function(e){for(var t=0,r=0,i=0;i<e.length;i++)isNaN(e[i])||(t+=e[i],r++);return 0===r?NaN:t/r},sum:function(e){for(var t=0,r=0;r<e.length;r++)t+=e[r]||0;return t},max:function(e){for(var t=-1/0,r=0;r<e.length;r++)e[r]>t&&(t=e[r]);return isFinite(t)?t:NaN},min:function(e){for(var t=1/0,r=0;r<e.length;r++)e[r]<t&&(t=e[r]);return isFinite(t)?t:NaN},nearest:function(e){return e[0]}},vk=function(e){return Math.round(e.length/2)};function mk(e){return{seriesType:e,reset:function(e,t,r){var i=e.getData(),n=e.get("sampling"),a=e.coordinateSystem,s=i.count();if(s>10&&"cartesian2d"===a.type&&n){var o=a.getBaseAxis(),u=a.getOtherAxis(o),c=o.getExtent(),d=r.getDevicePixelRatio(),h=Math.abs(c[1]-c[0])*(d||1),l=Math.round(s/h);if(l>1){"lttb"===n&&e.setData(i.lttbDownSample(i.mapDimension(u.dim),1/l));var f=void 0;"string"===typeof n?f=pk[n]:"function"===typeof n&&(f=n),f&&e.setData(i.downSample(i.mapDimension(u.dim),1/l,f,vk))}}}}}var gk="__ec_stack_",yk="undefined"!==typeof Float32Array?Float32Array:Array;function bk(e){return e.get("stack")||gk+e.seriesIndex}function xk(e){return e.dim+e.index}function kk(e,t){var r=[];return t.eachSeriesByType(e,(function(e){Ck(e)&&!Ik(e)&&r.push(e)})),r}function wk(e){var t=function(e){var t={};L(e,(function(e){var r=e.coordinateSystem.getBaseAxis();if("time"===r.type||"value"===r.type)for(var i=e.getData(),n=r.dim+"_"+r.index,a=i.mapDimension(r.dim),s=0,o=i.count();s<o;++s){var u=i.get(a,s);t[n]?t[n].push(u):t[n]=[u]}}));var r={};for(var i in t)if(t.hasOwnProperty(i)){var n=t[i];if(n){n.sort((function(e,t){return e-t}));for(var a=null,s=1;s<n.length;++s){var o=n[s]-n[s-1];o>0&&(a=null===a?o:Math.min(a,o))}r[i]=a}}return r}(e),r=[];return L(e,(function(e){var i,n=e.coordinateSystem.getBaseAxis(),a=n.getExtent();if("category"===n.type)i=n.getBandWidth();else if("value"===n.type||"time"===n.type){var s=n.dim+"_"+n.index,o=t[s],u=Math.abs(a[1]-a[0]),c=n.scale.getExtent(),d=Math.abs(c[1]-c[0]);i=o?u/d*o:u}else{var h=e.getData();i=Math.abs(a[1]-a[0])/h.count()}var l=Di(e.get("barWidth"),i),f=Di(e.get("barMaxWidth"),i),p=Di(e.get("barMinWidth")||1,i),v=e.get("barGap"),m=e.get("barCategoryGap");r.push({bandWidth:i,barWidth:l,barMaxWidth:f,barMinWidth:p,barGap:v,barCategoryGap:m,axisKey:xk(n),stackId:bk(e)})})),_k(r)}function _k(e){var t={};L(e,(function(e,r){var i=e.axisKey,n=e.bandWidth,a=t[i]||{bandWidth:n,remainedWidth:n,autoWidthCount:0,categoryGap:null,gap:"20%",stacks:{}},s=a.stacks;t[i]=a;var o=e.stackId;s[o]||a.autoWidthCount++,s[o]=s[o]||{width:0,maxWidth:0};var u=e.barWidth;u&&!s[o].width&&(s[o].width=u,u=Math.min(a.remainedWidth,u),a.remainedWidth-=u);var c=e.barMaxWidth;c&&(s[o].maxWidth=c);var d=e.barMinWidth;d&&(s[o].minWidth=d);var h=e.barGap;null!=h&&(a.gap=h);var l=e.barCategoryGap;null!=l&&(a.categoryGap=l)}));var r={};return L(t,(function(e,t){r[t]={};var i=e.stacks,n=e.bandWidth,a=e.categoryGap;if(null==a){var s=G(i).length;a=Math.max(35-4*s,15)+"%"}var o=Di(a,n),u=Di(e.gap,1),c=e.remainedWidth,d=e.autoWidthCount,h=(c-o)/(d+(d-1)*u);h=Math.max(h,0),L(i,(function(e){var t=e.maxWidth,r=e.minWidth;if(e.width){i=e.width;t&&(i=Math.min(i,t)),r&&(i=Math.max(i,r)),e.width=i,c-=i+u*i,d--}else{var i=h;t&&t<i&&(i=Math.min(t,c)),r&&r>i&&(i=r),i!==h&&(e.width=i,c-=i+u*i,d--)}})),h=(c-o)/(d+(d-1)*u),h=Math.max(h,0);var l,f=0;L(i,(function(e,t){e.width||(e.width=h),l=e,f+=e.width*(1+u)})),l&&(f-=l.width*u);var p=-f/2;L(i,(function(e,i){r[t][i]=r[t][i]||{bandWidth:n,offset:p,width:e.width},p+=e.width*(1+u)}))})),r}function Sk(e,t,r){if(e&&t){var i=e[xk(t)];return null!=i&&null!=r?i[bk(r)]:i}}function Ok(e,t){var r=kk(e,t),i=wk(r),n={};L(r,(function(e){var t=e.getData(),r=e.coordinateSystem,a=r.getBaseAxis(),s=bk(e),o=i[xk(a)][s],u=o.offset,c=o.width,d=r.getOtherAxis(a),h=e.get("barMinHeight")||0;n[s]=n[s]||[],t.setLayout({bandWidth:o.bandWidth,offset:u,size:c});for(var l=t.mapDimension(d.dim),f=t.mapDimension(a.dim),p=Mx(t,l),v=d.isHorizontal(),m=Mk(a,d,p),g=0,y=t.count();g<y;g++){var b=t.get(l,g),x=t.get(f,g),k=b>=0?"p":"n",w=m;p&&(n[s][x]||(n[s][x]={p:m,n:m}),w=n[s][x][k]);var _,S=void 0,O=void 0,T=void 0,C=void 0;if(v)S=w,O=(_=r.dataToPoint([b,x]))[1]+u,T=_[0]-m,C=c,Math.abs(T)<h&&(T=(T<0?-1:1)*h),isNaN(T)||p&&(n[s][x][k]+=T);else S=(_=r.dataToPoint([x,b]))[0]+u,O=w,T=c,C=_[1]-m,Math.abs(C)<h&&(C=(C<=0?-1:1)*h),isNaN(C)||p&&(n[s][x][k]+=C);t.setItemLayout(g,{x:S,y:O,width:T,height:C})}}))}var Tk={seriesType:"bar",plan:_p(),reset:function(e){if(Ck(e)&&Ik(e)){var t=e.getData(),r=e.coordinateSystem,i=r.master.getRect(),n=r.getBaseAxis(),a=r.getOtherAxis(n),s=t.mapDimension(a.dim),o=t.mapDimension(n.dim),u=a.isHorizontal(),c=u?0:1,d=Sk(wk([e]),n,e).width;return d>.5||(d=.5),{progress:function(e,t){for(var h,l=e.count,f=new yk(2*l),p=new yk(2*l),v=new yk(l),m=[],g=[],y=0,b=0;null!=(h=e.next());)g[c]=t.get(s,h),g[1-c]=t.get(o,h),m=r.dataToPoint(g,null,m),p[y]=u?i.x+i.width:m[0],f[y++]=m[0],p[y]=u?m[1]:i.y+i.height,f[y++]=m[1],v[b++]=h;t.setLayout({largePoints:f,largeDataIndices:v,largeBackgroundPoints:p,barWidth:d,valueAxisStart:Mk(n,a,!1),backgroundStart:u?i.x:i.y,valueAxisHorizontal:u})}}}}};function Ck(e){return e.coordinateSystem&&"cartesian2d"===e.coordinateSystem.type}function Ik(e){return e.pipelineContext&&e.pipelineContext.large}function Mk(e,t,r){return t.toGlobalCoord(t.dataToCoord("log"===t.type?1:0))}var Ak=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return r.type=t.type,r}return a(t,e),t.prototype.getInitialData=function(e,t){return Ex(this.getSource(),this,{useEncodeDefaulter:!0})},t.prototype.getMarkerPosition=function(e){var t=this.coordinateSystem;if(t){var r=t.dataToPoint(t.clampData(e)),i=this.getData(),n=i.getLayout("offset"),a=i.getLayout("size");return r[t.getBaseAxis().isHorizontal()?0:1]+=n+a/2,r}return[NaN,NaN]},t.type="series.__base_bar__",t.defaultOption={zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod"},t}(xp);xp.registerClass(Ak);var Ek=Ak,Nk=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return r.type=t.type,r}return a(t,e),t.prototype.getInitialData=function(){return Ex(this.getSource(),this,{useEncodeDefaulter:!0,createInvertedIndices:!!this.get("realtimeSort",!0)||null})},t.prototype.getProgressive=function(){return!!this.get("large")&&this.get("progressive")},t.prototype.getProgressiveThreshold=function(){var e=this.get("progressiveThreshold"),t=this.get("largeThreshold");return t>e&&(e=t),e},t.prototype.brushSelector=function(e,t,r){return r.rect(t.getItemLayout(e))},t.type="series.bar",t.dependencies=["grid","polar"],t.defaultOption=Nd(Ek.defaultOption,{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1},select:{itemStyle:{borderColor:"#212121"}},realtimeSort:!1}),t}(Ek),Pk=function(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=2*Math.PI,this.clockwise=!0},Dk=function(e){function t(t){var r=e.call(this,t)||this;return r.type="sausage",r}return a(t,e),t.prototype.getDefaultShape=function(){return new Pk},t.prototype.buildPath=function(e,t){var r=t.cx,i=t.cy,n=Math.max(t.r0||0,0),a=Math.max(t.r,0),s=.5*(a-n),o=n+s,u=t.startAngle,c=t.endAngle,d=t.clockwise,h=Math.cos(u),l=Math.sin(u),f=Math.cos(c),p=Math.sin(c);(d?c-u<2*Math.PI:u-c<2*Math.PI)&&(e.moveTo(h*n+r,l*n+i),e.arc(h*o+r,l*o+i,s,-Math.PI+u,u,!d)),e.arc(r,i,a,u,c,!d),e.moveTo(f*a+r,p*a+i),e.arc(f*o+r,p*o+i,s,c-2*Math.PI,c-Math.PI,!d),0!==n&&(e.arc(r,i,n,c,u,d),e.moveTo(h*n+r,p*n+i)),e.closePath()},t}(Ns),Lk=[0,0],Bk=Math.max,Rk=Math.min;var Vk=function(e){function t(){var r=e.call(this)||this;return r.type=t.type,r._isFirstFrame=!0,r}return a(t,e),t.prototype.render=function(e,t,r,i){this._model=e,this._removeOnRenderedListener(r),this._updateDrawMode(e);var n=e.get("coordinateSystem");("cartesian2d"===n||"polar"===n)&&(this._isLargeDraw?this._renderLarge(e,t,r):this._renderNormal(e,t,r,i))},t.prototype.incrementalPrepareRender=function(e){this._clear(),this._updateDrawMode(e),this._updateLargeClip(e)},t.prototype.incrementalRender=function(e,t){this._incrementalRenderLarge(e,t)},t.prototype._updateDrawMode=function(e){var t=e.pipelineContext.large;null!=this._isLargeDraw&&t===this._isLargeDraw||(this._isLargeDraw=t,this._clear())},t.prototype._renderNormal=function(e,t,r,i){var n,a=this.group,s=e.getData(),o=this._data,u=e.coordinateSystem,c=u.getBaseAxis();"cartesian2d"===u.type?n=c.isHorizontal():"polar"===u.type&&(n="angle"===c.dim);var d=e.isAnimationEnabled()?e:null,h=function(e,t){var r=e.get("realtimeSort",!0),i=t.getBaseAxis();0;if(r&&"category"===i.type&&"cartesian2d"===t.type)return{baseAxis:i,otherAxis:t.getOtherAxis(i)}}(e,u);h&&this._enableRealtimeSort(h,s,r);var l=e.get("clip",!0)||h,f=function(e,t){var r=e.getArea&&e.getArea();if(ik(e,"cartesian2d")){var i=e.getBaseAxis();if("category"!==i.type||!i.onBand){var n=t.getLayout("bandWidth");i.isHorizontal()?(r.x-=n,r.width+=2*n):(r.y-=n,r.height+=2*n)}}return r}(u,s);a.removeClipPath();var p=e.get("roundCap",!0),v=e.get("showBackground",!0),m=e.getModel("backgroundStyle"),g=m.get("borderRadius")||0,y=[],b=this._backgroundEls,x=i&&i.isInitSort,k=i&&"changeAxisOrder"===i.type;function w(e){var t=jk[u.type](s,e),r=function(e,t,r){return new("polar"===e.type?ju:Ks)({shape:Xk(t,r,e),silent:!0,z2:0})}(u,n,t);return r.useStyle(m.getItemStyle()),"cartesian2d"===u.type&&r.setShape("r",g),y[e]=r,r}s.diff(o).add((function(t){var r=s.getItemModel(t),i=jk[u.type](s,t,r);if(v&&w(t),s.hasValue(t)){var o=!1;l&&(o=Gk[u.type](f,i));var m=Fk[u.type](e,s,t,i,n,d,c.model,!1,p);zk(m,s,t,r,i,e,n,"polar"===u.type),x?m.attr({shape:i}):h?qk(h,d,m,i,t,n,!1,!1):qc(m,{shape:i},e,t),s.setItemGraphicEl(t,m),a.add(m),m.ignore=o}})).update((function(t,r){var i=s.getItemModel(t),_=jk[u.type](s,t,i);if(v){var S=void 0;0===b.length?S=w(r):((S=b[r]).useStyle(m.getItemStyle()),"cartesian2d"===u.type&&S.setShape("r",g),y[t]=S);var O=jk[u.type](s,t);Fc(S,{shape:Xk(n,O,u)},d,t)}var T=o.getItemGraphicEl(r);if(!s.hasValue(t))return a.remove(T),void(T=null);var C=!1;l&&(C=Gk[u.type](f,_))&&a.remove(T),T||(T=Fk[u.type](e,s,t,_,n,d,c.model,!!T,p)),k||zk(T,s,t,i,_,e,n,"polar"===u.type),x?T.attr({shape:_}):h?qk(h,d,T,_,t,n,!0,k):Fc(T,{shape:_},e,t,null),s.setItemGraphicEl(t,T),T.ignore=C,a.add(T)})).remove((function(t){var r=o.getItemGraphicEl(t);r&&Hc(r,e,t)})).execute();var _=this._backgroundGroup||(this._backgroundGroup=new Ti);_.removeAll();for(var S=0;S<y.length;++S)_.add(y[S]);a.add(_),this._backgroundEls=y,this._data=s},t.prototype._renderLarge=function(e,t,r){this._clear(),Wk(e,this.group),this._updateLargeClip(e)},t.prototype._incrementalRenderLarge=function(e,t){this._removeBackground(),Wk(t,this.group,!0)},t.prototype._updateLargeClip=function(e){var t=e.get("clip",!0)?rk(e.coordinateSystem,!1,e):null;t?this.group.setClipPath(t):this.group.removeClipPath()},t.prototype._enableRealtimeSort=function(e,t,r){var i=this;if(t.count()){var n=e.baseAxis;if(this._isFirstFrame)this._dispatchInitSort(t,e,r),this._isFirstFrame=!1;else{var a=function(e){var r=t.getItemGraphicEl(e);if(r){var i=r.shape;return(n.isHorizontal()?Math.abs(i.height):Math.abs(i.width))||0}return 0};this._onRendered=function(){i._updateSortWithinSameData(t,a,n,r)},r.getZr().on("rendered",this._onRendered)}}},t.prototype._dataSort=function(e,t,r){var i=[];return e.each(e.mapDimension(t.dim),(function(e,t){var n=r(t);n=null==n?NaN:n,i.push({dataIndex:t,mappedValue:n,ordinalNumber:e})})),i.sort((function(e,t){return t.mappedValue-e.mappedValue})),{ordinalNumbers:B(i,(function(e){return e.ordinalNumber}))}},t.prototype._isOrderChangedWithinSameData=function(e,t,r){for(var i=r.scale,n=e.mapDimension(r.dim),a=Number.MAX_VALUE,s=0,o=i.getOrdinalMeta().categories.length;s<o;++s){var u=e.rawIndexOf(n,i.getRawOrdinalNumber(s)),c=u<0?Number.MIN_VALUE:t(e.indexOfRawIndex(u));if(c>a)return!0;a=c}return!1},t.prototype._isOrderDifferentInView=function(e,t){for(var r=t.scale,i=r.getExtent(),n=Math.max(0,i[0]),a=Math.min(i[1],r.getOrdinalMeta().categories.length-1);n<=a;++n)if(e.ordinalNumbers[n]!==r.getRawOrdinalNumber(n))return!0},t.prototype._updateSortWithinSameData=function(e,t,r,i){if(this._isOrderChangedWithinSameData(e,t,r)){var n=this._dataSort(e,r,t);this._isOrderDifferentInView(n,r)&&(this._removeOnRenderedListener(i),i.dispatchAction({type:"changeAxisOrder",componentType:r.dim+"Axis",axisId:r.index,sortInfo:n}))}},t.prototype._dispatchInitSort=function(e,t,r){var i=t.baseAxis,n=this._dataSort(e,i,(function(r){return e.get(e.mapDimension(t.otherAxis.dim),r)}));r.dispatchAction({type:"changeAxisOrder",componentType:i.dim+"Axis",isInitSort:!0,axisId:i.index,sortInfo:n,animation:{duration:0}})},t.prototype.remove=function(e,t){this._clear(this._model),this._removeOnRenderedListener(t)},t.prototype.dispose=function(e,t){this._removeOnRenderedListener(t)},t.prototype._removeOnRenderedListener=function(e){this._onRendered&&(e.getZr().off("rendered",this._onRendered),this._onRendered=null)},t.prototype._clear=function(e){var t=this.group,r=this._data;e&&e.isAnimationEnabled()&&r&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],r.eachItemGraphicEl((function(t){Hc(t,e,ao(t).dataIndex)}))):t.removeAll(),this._data=null,this._isFirstFrame=!0},t.prototype._removeBackground=function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null},t.type="bar",t}(Np),Gk={cartesian2d:function(e,t){var r=t.width<0?-1:1,i=t.height<0?-1:1;r<0&&(t.x+=t.width,t.width=-t.width),i<0&&(t.y+=t.height,t.height=-t.height);var n=e.x+e.width,a=e.y+e.height,s=Bk(t.x,e.x),o=Rk(t.x+t.width,n),u=Bk(t.y,e.y),c=Rk(t.y+t.height,a),d=o<s,h=c<u;return t.x=d&&s>n?o:s,t.y=h&&u>a?c:u,t.width=d?0:o-s,t.height=h?0:c-u,r<0&&(t.x+=t.width,t.width=-t.width),i<0&&(t.y+=t.height,t.height=-t.height),d||h},polar:function(e,t){var r=t.r0<=t.r?1:-1;if(r<0){var i=t.r;t.r=t.r0,t.r0=i}var n=Rk(t.r,e.r),a=Bk(t.r0,e.r0);t.r=n,t.r0=a;var s=n-a<0;if(r<0){i=t.r;t.r=t.r0,t.r0=i}return s}},Fk={cartesian2d:function(e,t,r,i,n,a,s,o,u){var c=new Ks({shape:I({},i),z2:1});(c.__dataIndex=r,c.name="item",a)&&(c.shape[n?"height":"width"]=0);return c},polar:function(e,t,r,i,n,a,s,o,u){var c=i.startAngle<i.endAngle,d=new(!n&&u?Dk:ju)({shape:M({clockwise:c},i),z2:1});if(d.name="item",a){var h=n?"r":"endAngle",l={};d.shape[h]=n?0:i.startAngle,l[h]=i[h],(o?Fc:qc)(d,{shape:l},a)}return d}};function qk(e,t,r,i,n,a,s,o){var u,c;a?(c={x:i.x,width:i.width},u={y:i.y,height:i.height}):(c={y:i.y,height:i.height},u={x:i.x,width:i.width}),o||(s?Fc:qc)(r,{shape:u},t,n,null),(s?Fc:qc)(r,{shape:c},t?e.baseAxis.model:null,n)}var jk={cartesian2d:function(e,t,r){var i=e.getItemLayout(t),n=r?function(e,t){var r=e.get(["itemStyle","borderColor"]);if(!r||"none"===r)return 0;var i=e.get(["itemStyle","borderWidth"])||0,n=isNaN(t.width)?Number.MAX_VALUE:Math.abs(t.width),a=isNaN(t.height)?Number.MAX_VALUE:Math.abs(t.height);return Math.min(i,n,a)}(r,i):0,a=i.width>0?1:-1,s=i.height>0?1:-1;return{x:i.x+a*n/2,y:i.y+s*n/2,width:i.width-a*n,height:i.height-s*n}},polar:function(e,t,r){var i=e.getItemLayout(t);return{cx:i.cx,cy:i.cy,r0:i.r0,r:i.r,startAngle:i.startAngle,endAngle:i.endAngle}}};function zk(e,t,r,i,n,a,s,o){var u=t.getItemVisual(r,"style");o||e.setShape("r",i.get(["itemStyle","borderRadius"])||0),e.useStyle(u);var c=i.getShallow("cursor");if(c&&e.attr("cursor",c),!o){var d=s?n.height>0?"bottom":"top":n.width>0?"left":"right",h=ud(i);od(e,h,{labelFetcher:a,labelDataIndex:r,defaultText:Px(a.getData(),r),inheritColor:u.fill,defaultOpacity:u.opacity,defaultOutsidePosition:d}),gd(e.getTextContent(),h,a.getRawValue(r),(function(e){return Dx(t,e)}))}var l=i.getModel(["emphasis"]);Xo(e,l.get("focus"),l.get("blurScope")),$o(e,i),function(e){return null!=e.startAngle&&null!=e.endAngle&&e.startAngle===e.endAngle}(n)&&(e.style.fill="none",e.style.stroke="none",L(e.states,(function(e){e.style&&(e.style.fill=e.style.stroke="none")})))}var Hk=function(){},Uk=function(e){function t(t){var r=e.call(this,t)||this;return r.type="largeBar",r}return a(t,e),t.prototype.getDefaultShape=function(){return new Hk},t.prototype.buildPath=function(e,t){for(var r=t.points,i=this.__startPoint,n=this.__baseDimIdx,a=0;a<r.length;a+=2)i[n]=r[a+n],e.moveTo(i[0],i[1]),e.lineTo(r[a],r[a+1])},t}(Ns);function Wk(e,t,r){var i=e.getData(),n=[],a=i.getLayout("valueAxisHorizontal")?1:0;n[1-a]=i.getLayout("valueAxisStart");var s=i.getLayout("largeDataIndices"),o=i.getLayout("barWidth"),u=e.getModel("backgroundStyle");if(e.get("showBackground",!0)){var c=i.getLayout("largeBackgroundPoints"),d=[];d[1-a]=i.getLayout("backgroundStart");var h=new Uk({shape:{points:c},incremental:!!r,silent:!0,z2:0});h.__startPoint=d,h.__baseDimIdx=a,h.__largeDataIndices=s,h.__barWidth=o,function(e,t,r){var i=t.get("borderColor")||t.get("color"),n=t.getItemStyle();e.useStyle(n),e.style.fill=null,e.style.stroke=i,e.style.lineWidth=r.getLayout("barWidth")}(h,u,i),t.add(h)}var l=new Uk({shape:{points:i.getLayout("largePoints")},incremental:!!r});l.__startPoint=n,l.__baseDimIdx=a,l.__largeDataIndices=s,l.__barWidth=o,t.add(l),function(e,t,r){var i=r.getVisual("style");e.useStyle(I({},i)),e.style.fill=null,e.style.stroke=i.fill,e.style.lineWidth=r.getLayout("barWidth")}(l,0,i),ao(l).seriesIndex=e.seriesIndex,e.get("silent")||(l.on("mousedown",Kk),l.on("mousemove",Kk))}var Kk=Bp((function(e){var t=function(e,t,r){var i=e.__baseDimIdx,n=1-i,a=e.shape.points,s=e.__largeDataIndices,o=Math.abs(e.__barWidth/2),u=e.__startPoint[n];Lk[0]=t,Lk[1]=r;for(var c=Lk[i],d=Lk[1-i],h=c-o,l=c+o,f=0,p=a.length/2;f<p;f++){var v=2*f,m=a[v+i],g=a[v+n];if(m>=h&&m<=l&&(u<=g?d>=u&&d<=g:d>=g&&d<=u))return s[f]}return-1}(this,e.offsetX,e.offsetY);ao(this).dataIndex=t>=0?t:null}),30,!1);function Xk(e,t,r){if(ik(r,"cartesian2d")){var i=t,n=r.getArea();return{x:e?i.x:n.x,y:e?n.y:i.y,width:e?i.width:n.width,height:e?n.height:i.height}}var a=t;return{cx:(n=r.getArea()).cx,cy:n.cy,r0:e?n.r0:a.r0,r:e?n.r:a.r,startAngle:e?a.startAngle:0,endAngle:e?a.endAngle:2*Math.PI}}var Yk=Vk;var Zk=2*Math.PI,Qk=Math.PI/180;function $k(e,t,r){t.eachSeriesByType(e,(function(e){var t=e.getData(),i=t.mapDimension("value"),n=function(e,t){return Ph(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})}(e,r),a=e.get("center"),s=e.get("radius");j(s)||(s=[0,s]),j(a)||(a=[a,a]);var o=Di(n.width,r.getWidth()),u=Di(n.height,r.getHeight()),c=Math.min(o,u),d=Di(a[0],o)+n.x,h=Di(a[1],u)+n.y,l=Di(s[0],c/2),f=Di(s[1],c/2),p=-e.get("startAngle")*Qk,v=e.get("minAngle")*Qk,m=0;t.each(i,(function(e){!isNaN(e)&&m++}));var g=t.getSum(i),y=Math.PI/(g||m)*2,b=e.get("clockwise"),x=e.get("roseType"),k=e.get("stillShowZeroSum"),w=t.getDataExtent(i);w[0]=0;var _=Zk,S=0,O=p,T=b?1:-1;if(t.setLayout({viewRect:n,r:f}),t.each(i,(function(e,r){var i;if(isNaN(e))t.setItemLayout(r,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:b,cx:d,cy:h,r0:l,r:x?NaN:f});else{(i="area"!==x?0===g&&k?y:e*y:Zk/m)<v?(i=v,_-=v):S+=e;var n=O+T*i;t.setItemLayout(r,{angle:i,startAngle:O,endAngle:n,clockwise:b,cx:d,cy:h,r0:l,r:x?Pi(e,w,[l,f]):f}),O=n}})),_<Zk&&m)if(_<=.001){var C=Zk/m;t.each(i,(function(e,r){if(!isNaN(e)){var i=t.getItemLayout(r);i.angle=C,i.startAngle=p+T*r*C,i.endAngle=p+T*(r+1)*C}}))}else y=_/S,O=p,t.each(i,(function(e,r){if(!isNaN(e)){var i=t.getItemLayout(r),n=i.angle===v?v:e*y;i.startAngle=O,i.endAngle=O+T*n,O+=T*n}}))}))}function Jk(e){return{seriesType:e,reset:function(e,t){var r=t.findComponents({mainType:"legend"});if(r&&r.length){var i=e.getData();i.filterSelf((function(e){for(var t=i.getName(e),n=0;n<r.length;n++)if(!r[n].isSelected(t))return!1;return!0}))}}}}var ew=Math.PI/180;function tw(e,t,r,i,n,a,s,o,u,c){if(!(e.length<2)){for(var d=e.length,h=0;h<d;h++)if("outer"===e[h].position&&"labelLine"===e[h].labelAlignTo){var l=e[h].label.x-c;e[h].linePoints[1][0]+=l,e[h].label.x=c}Xv(e,u,u+s)&&function(e){for(var a={list:[],maxY:0},s={list:[],maxY:0},o=0;o<e.length;o++)if("none"===e[o].labelAlignTo){var u=e[o],c=u.label.y>r?s:a,d=Math.abs(u.label.y-r);if(d>c.maxY){var h=u.label.x-t-u.len2*n,l=i+u.len,p=Math.abs(h)<l?Math.sqrt(d*d/(1-h*h/l/l)):l;c.rB=p,c.maxY=d}c.list.push(u)}f(a),f(s)}(e)}function f(e){for(var a=e.rB,s=a*a,o=0;o<e.list.length;o++){var u=e.list[o],c=Math.abs(u.label.y-r),d=i+u.len,h=d*d,l=Math.sqrt((1-Math.abs(c*c/s))*h);u.label.x=t+(l+u.len2)*n}}}function rw(e){return"center"===e.position}function iw(e){var t,r,i=e.getData(),n=[],a=!1,s=(e.get("minShowLabelAngle")||0)*ew,o=i.getLayout("viewRect"),u=i.getLayout("r"),c=o.width,d=o.x,h=o.y,l=o.height;function f(e){e.ignore=!0}i.each((function(e){var o=i.getItemGraphicEl(e),h=o.shape,l=o.getTextContent(),p=o.getTextGuideLine(),v=i.getItemModel(e),m=v.getModel("label"),g=m.get("position")||v.get(["emphasis","label","position"]),y=m.get("distanceToLabelLine"),b=m.get("alignTo"),x=Di(m.get("edgeDistance"),c),k=m.get("bleedMargin"),w=v.getModel("labelLine"),_=w.get("length");_=Di(_,c);var S=w.get("length2");if(S=Di(S,c),Math.abs(h.endAngle-h.startAngle)<s)return L(l.states,f),void(l.ignore=!0);if(function(e){if(!e.ignore)return!0;for(var t in e.states)if(!1===e.states[t].ignore)return!0;return!1}(l)){var O,T,C,I,M=(h.startAngle+h.endAngle)/2,A=Math.cos(M),E=Math.sin(M);t=h.cx,r=h.cy;var N,P="inside"===g||"inner"===g;if("center"===g)O=h.cx,T=h.cy,I="center";else{var D=(P?(h.r+h.r0)/2*A:h.r*A)+t,B=(P?(h.r+h.r0)/2*E:h.r*E)+r;if(O=D+3*A,T=B+3*E,!P){var R=D+A*(_+u-h.r),V=B+E*(_+u-h.r),G=R+(A<0?-1:1)*S;O="edge"===b?A<0?d+x:d+c-x:G+(A<0?-y:y),T=V,C=[[D,B],[R,V],[G,V]]}I=P?"center":"edge"===b?A>0?"right":"left":A>0?"left":"right"}var F=m.get("rotate");if(N="number"===typeof F?F*(Math.PI/180):F?A<0?-M+Math.PI:-M:0,a=!!N,l.x=O,l.y=T,l.rotation=N,l.setStyle({verticalAlign:"middle"}),P){l.setStyle({align:I});var q=l.states.select;q&&(q.x+=l.x,q.y+=l.y)}else{var j=l.getBoundingRect().clone();j.applyTransform(l.getComputedTransform());var z=(l.style.margin||0)+2.1;j.y-=z/2,j.height+=z,n.push({label:l,labelLine:p,position:g,len:_,len2:S,minTurnAngle:w.get("minTurnAngle"),maxSurfaceAngle:w.get("maxSurfaceAngle"),surfaceNormal:new pr(A,E),linePoints:C,textAlign:I,labelDistance:y,labelAlignTo:b,edgeDistance:x,bleedMargin:k,rect:j})}o.setTextConfig({inside:P})}})),!a&&e.get("avoidLabelOverlap")&&function(e,t,r,i,n,a,s,o){for(var u=[],c=[],d=Number.MAX_VALUE,h=-Number.MAX_VALUE,l=0;l<e.length;l++){var f=e[l].label;rw(e[l])||(f.x<t?(d=Math.min(d,f.x),u.push(e[l])):(h=Math.max(h,f.x),c.push(e[l])))}for(tw(c,t,r,i,1,0,a,0,o,h),tw(u,t,r,i,-1,0,a,0,o,d),l=0;l<e.length;l++){var p=e[l];if(f=p.label,!rw(p)){var v=p.linePoints;if(v){var m="edge"===p.labelAlignTo,g=p.rect.width,y=void 0;(y=m?f.x<t?v[2][0]-p.labelDistance-s-p.edgeDistance:s+n-p.edgeDistance-v[2][0]-p.labelDistance:f.x<t?f.x-s-p.bleedMargin:s+n-f.x-p.bleedMargin)<p.rect.width&&(p.label.style.width=y,"edge"===p.labelAlignTo&&(g=y));var b=v[1][0]-v[2][0];m?f.x<t?v[2][0]=s+p.edgeDistance+g+p.labelDistance:v[2][0]=s+n-p.edgeDistance-g-p.labelDistance:(f.x<t?v[2][0]=f.x+p.labelDistance:v[2][0]=f.x-p.labelDistance,v[1][0]=v[2][0]+b),v[1][1]=v[2][1]=f.y}}}}(n,t,r,u,c,l,d,h);for(var p=0;p<n.length;p++){var v=n[p],m=v.label,g=v.labelLine,y=isNaN(m.x)||isNaN(m.y);if(m){m.setStyle({align:v.textAlign}),y&&(L(m.states,f),m.ignore=!0);var b=m.states.select;b&&(b.x+=m.x,b.y+=m.y)}if(g){var x=v.linePoints;y||!x?(L(g.states,f),g.ignore=!0):(qv(x,v.minTurnAngle),jv(x,v.surfaceNormal,v.maxSurfaceAngle),g.setShape({points:x}),m.__hostTarget.textGuideLineConfig={anchor:new pr(x[0][0],x[0][1])})}}}function nw(e,t){var r=e.get("borderRadius");return null==r?null:(j(r)||(r=[r,r]),{innerCornerRadius:Pr(r[0],t.r0),cornerRadius:Pr(r[1],t.r)})}var aw=function(e){function t(t,r,i){var n=e.call(this)||this;n.z2=2;var a=new Ju,s=new no;return n.setTextGuideLine(a),n.setTextContent(s),n.updateData(t,r,i,!0),n}return a(t,e),t.prototype.updateData=function(e,t,r,i){var n=this,a=e.hostModel,o=e.getItemModel(t),u=o.getModel("emphasis"),c=e.getItemLayout(t),d=I(nw(o.getModel("itemStyle"),c)||{},c);if(isNaN(d.startAngle))n.setShape(d);else{if(i)n.setShape(d),"scale"===a.getShallow("animationType")?(n.shape.r=c.r0,qc(n,{shape:{r:c.r}},a,t)):null!=r?(n.setShape({startAngle:r,endAngle:r}),qc(n,{shape:{startAngle:c.startAngle,endAngle:c.endAngle}},a,t)):(n.shape.endAngle=c.startAngle,Fc(n,{shape:{endAngle:c.endAngle}},a,t));else Fc(n,{shape:d},a,t);n.useStyle(e.getItemVisual(t,"style")),$o(n,o);var h=(c.startAngle+c.endAngle)/2,l=a.get("selectedOffset"),f=Math.cos(h)*l,p=Math.sin(h)*l,v=o.getShallow("cursor");v&&n.attr("cursor",v),this._updateLabel(a,e,t),n.ensureState("emphasis").shape=s({r:c.r+(u.get("scale")&&u.get("scaleSize")||0)},nw(u.getModel("itemStyle"),c)),I(n.ensureState("select"),{x:f,y:p,shape:nw(o.getModel(["select","itemStyle"]),c)}),I(n.ensureState("blur"),{shape:nw(o.getModel(["blur","itemStyle"]),c)});var m=n.getTextGuideLine(),g=n.getTextContent();m&&I(m.ensureState("select"),{x:f,y:p}),I(g.ensureState("select"),{x:f,y:p}),Xo(this,u.get("focus"),u.get("blurScope"))}},t.prototype._updateLabel=function(e,t,r){var i,n=this,a=t.getItemModel(r),s=a.getModel("labelLine"),o=t.getItemVisual(r,"style"),u=o&&o.fill,c=o&&o.opacity;od(n,ud(a),{labelFetcher:t.hostModel,labelDataIndex:r,inheritColor:u,defaultOpacity:c,defaultText:e.getFormattedLabel(r,"normal")||t.getName(r)});var d=n.getTextContent();n.setTextConfig({position:null,rotation:null}),d.attr({z2:10});var h=e.get(["label","position"]);"outside"===h||"outer"===h?Uv(this,Wv(a),{stroke:u,opacity:ee(s.get(["lineStyle","opacity"]),c,1)}):null===(i=n.getTextGuideLine())||void 0===i||i.hide()},t}(ju),sw=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ignoreLabelLineUpdate=!0,t}return a(t,e),t.prototype.init=function(){var e=new Ti;this._sectorGroup=e},t.prototype.render=function(e,t,r,i){var n,a=e.getData(),s=this._data,o=this.group;if(!s&&a.count()>0){for(var u=a.getItemLayout(0),c=1;isNaN(u&&u.startAngle)&&c<a.count();++c)u=a.getItemLayout(c);u&&(n=u.startAngle)}a.diff(s).add((function(e){var t=new aw(a,e,n);a.setItemGraphicEl(e,t),o.add(t)})).update((function(e,t){var r=s.getItemGraphicEl(t);r.updateData(a,e,n),r.off("click"),o.add(r),a.setItemGraphicEl(e,r)})).remove((function(t){Hc(s.getItemGraphicEl(t),e,t)})).execute(),iw(e),"expansion"!==e.get("animationTypeUpdate")&&(this._data=a)},t.prototype.dispose=function(){},t.prototype.containPoint=function(e,t){var r=t.getData().getItemLayout(0);if(r){var i=e[0]-r.cx,n=e[1]-r.cy,a=Math.sqrt(i*i+n*n);return a<=r.r&&a>=r.r0}},t.type="pie",t}(Np);function ow(e,t,r){t=j(t)&&{coordDimensions:t}||I({},t);var i=e.getSource(),n=Ox(i,t),a=new kx(n,e);return a.initData(i,r),a}var uw=function(){function e(e,t){this._getDataWithEncodedVisual=e,this._getRawData=t}return e.prototype.getAllNames=function(){var e=this._getRawData();return e.mapArray(e.getName)},e.prototype.containName=function(e){return this._getRawData().indexOfName(e)>=0},e.prototype.indexOfName=function(e){return this._getDataWithEncodedVisual().indexOfName(e)},e.prototype.getItemVisual=function(e,t){return this._getDataWithEncodedVisual().getItemVisual(e,t)},e}(),cw=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.useColorPaletteOnData=!0,t}return a(t,e),t.prototype.init=function(t){e.prototype.init.apply(this,arguments),this.legendVisualProvider=new uw(F(this.getData,this),F(this.getRawData,this)),this._defaultLabelLine(t)},t.prototype.mergeOption=function(){e.prototype.mergeOption.apply(this,arguments)},t.prototype.getInitialData=function(){return ow(this,{coordDimensions:["value"],encodeDefaulter:q(al,this)})},t.prototype.getDataParams=function(t){var r=this.getData(),i=e.prototype.getDataParams.call(this,t),n=[];return r.each(r.mapDimension("value"),(function(e){n.push(e)})),i.percent=function(e,t,r){if(!e[t])return 0;var i=R(e,(function(e,t){return e+(isNaN(t)?0:t)}),0);if(0===i)return 0;for(var n=Math.pow(10,r),a=B(e,(function(e){return(isNaN(e)?0:e)/i*n*100})),s=100*n,o=B(a,(function(e){return Math.floor(e)})),u=R(o,(function(e,t){return e+t}),0),c=B(a,(function(e,t){return e-o[t]}));u<s;){for(var d=Number.NEGATIVE_INFINITY,h=null,l=0,f=c.length;l<f;++l)c[l]>d&&(d=c[l],h=l);++o[h],c[h]=0,++u}return o[t]/n}(n,t,r.hostModel.get("percentPrecision")),i.$vars.push("percent"),i},t.prototype._defaultLabelLine=function(e){rn(e,"labelLine",["show"]);var t=e.labelLine,r=e.emphasis.labelLine;t.show=t.show&&e.label.show,r.show=r.show&&e.emphasis.label.show},t.type="series.pie",t.defaultOption={zlevel:0,z:2,legendHoverLink:!0,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,minShowLabelAngle:0,selectedOffset:10,percentPrecision:2,stillShowZeroSum:!0,left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:0,show:!0,overflow:"truncate",position:"outer",alignTo:"none",edgeDistance:"25%",bleedMargin:10,distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:15,smooth:!1,minTurnAngle:90,maxSurfaceAngle:90,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1},labelLayout:{hideOverlap:!0},emphasis:{scale:!0,scaleSize:5},avoidLabelOverlap:!0,animationType:"expansion",animationDuration:1e3,animationTypeUpdate:"transition",animationEasingUpdate:"cubicInOut",animationDurationUpdate:500,animationEasing:"cubicInOut"},t}(xp);var dw=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return r.type=t.type,r.hasSymbolVisual=!0,r}return a(t,e),t.prototype.getInitialData=function(e,t){return Ex(this.getSource(),this,{useEncodeDefaulter:!0})},t.prototype.getProgressive=function(){var e=this.option.progressive;return null==e?this.option.large?5e3:this.get("progressive"):e},t.prototype.getProgressiveThreshold=function(){var e=this.option.progressiveThreshold;return null==e?this.option.large?1e4:this.get("progressiveThreshold"):e},t.prototype.brushSelector=function(e,t,r){return r.point(t.getItemLayout(e))},t.type="series.scatter",t.dependencies=["grid","polar","geo","singleAxis","calendar"],t.defaultOption={coordinateSystem:"cartesian2d",zlevel:0,z:2,legendHoverLink:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},emphasis:{scale:!0},clip:!0,select:{itemStyle:{borderColor:"#212121"}}},t}(xp),hw=function(){},lw=function(e){function t(t){return e.call(this,t)||this}return a(t,e),t.prototype.getDefaultShape=function(){return new hw},t.prototype.buildPath=function(e,t){var r=t.points,i=t.size,n=this.symbolProxy,a=n.shape,s=e.getContext?e.getContext():e;if(s&&i[0]<4)this._ctx=s;else{this._ctx=null;for(var o=0;o<r.length;){var u=r[o++],c=r[o++];isNaN(u)||isNaN(c)||(this.softClipShape&&!this.softClipShape.contain(u,c)||(a.x=u-i[0]/2,a.y=c-i[1]/2,a.width=i[0],a.height=i[1],n.buildPath(e,a,!0)))}}},t.prototype.afterBrush=function(){var e=this.shape,t=e.points,r=e.size,i=this._ctx;if(i)for(var n=0;n<t.length;){var a=t[n++],s=t[n++];isNaN(a)||isNaN(s)||(this.softClipShape&&!this.softClipShape.contain(a,s)||i.fillRect(a-r[0]/2,s-r[1]/2,r[0],r[1]))}},t.prototype.findDataIndex=function(e,t){for(var r=this.shape,i=r.points,n=r.size,a=Math.max(n[0],4),s=Math.max(n[1],4),o=i.length/2-1;o>=0;o--){var u=2*o,c=i[u]-a/2,d=i[u+1]-s/2;if(e>=c&&t>=d&&e<=c+a&&t<=d+s)return o}return-1},t}(Ns),fw=function(){function e(){this.group=new Ti}return e.prototype.isPersistent=function(){return!this._incremental},e.prototype.updateData=function(e,t){this.group.removeAll();var r=new lw({rectHover:!0,cursor:"default"});r.setShape({points:e.getLayout("points")}),this._setCommon(r,e,!1,t),this.group.add(r),this._incremental=null},e.prototype.updateLayout=function(e){if(!this._incremental){var t=e.getLayout("points");this.group.eachChild((function(e){if(null!=e.startIndex){var r=2*(e.endIndex-e.startIndex),i=4*e.startIndex*2;t=new Float32Array(t.buffer,i,r)}e.setShape("points",t)}))}},e.prototype.incrementalPrepareUpdate=function(e){this.group.removeAll(),this._clearIncremental(),e.count()>2e6?(this._incremental||(this._incremental=new wc({silent:!0})),this.group.add(this._incremental)):this._incremental=null},e.prototype.incrementalUpdate=function(e,t,r){var i;this._incremental?(i=new lw,this._incremental.addDisplayable(i,!0)):((i=new lw({rectHover:!0,cursor:"default",startIndex:e.start,endIndex:e.end})).incremental=!0,this.group.add(i)),i.setShape({points:t.getLayout("points")}),this._setCommon(i,t,!!this._incremental,r)},e.prototype._setCommon=function(e,t,r,i){var n=t.hostModel;i=i||{};var a=t.getVisual("symbolSize");e.setShape("size",a instanceof Array?a:[a,a]),e.softClipShape=i.clipShape||null,e.symbolProxy=gm(t.getVisual("symbol"),0,0,0,0),e.setColor=e.symbolProxy.setColor;var s=e.shape.size[0]<4;e.useStyle(n.getModel("itemStyle").getItemStyle(s?["color","shadowBlur","shadowColor"]:["color"]));var o=t.getVisual("style"),u=o&&o.fill;if(u&&e.setColor(u),!r){var c=ao(e);c.seriesIndex=n.seriesIndex,e.on("mousemove",(function(t){c.dataIndex=null;var r=e.findDataIndex(t.offsetX,t.offsetY);r>=0&&(c.dataIndex=r+(e.startIndex||0))}))}},e.prototype.remove=function(){this._clearIncremental(),this._incremental=null,this.group.removeAll()},e.prototype._clearIncremental=function(){var e=this._incremental;e&&e.clearDisplaybles()},e}(),pw=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return r.type=t.type,r}return a(t,e),t.prototype.render=function(e,t,r){var i=e.getData();this._updateSymbolDraw(i,e).updateData(i,{clipShape:this._getClipShape(e)}),this._finished=!0},t.prototype.incrementalPrepareRender=function(e,t,r){var i=e.getData();this._updateSymbolDraw(i,e).incrementalPrepareUpdate(i),this._finished=!1},t.prototype.incrementalRender=function(e,t,r){this._symbolDraw.incrementalUpdate(e,t.getData(),{clipShape:this._getClipShape(t)}),this._finished=e.end===t.getData().count()},t.prototype.updateTransform=function(e,t,r){var i=e.getData();if(this.group.dirty(),!this._finished||i.count()>1e4||!this._symbolDraw.isPersistent())return{update:!0};var n=fk("").reset(e,t,r);n.progress&&n.progress({start:0,end:i.count(),count:i.count()},i),this._symbolDraw.updateLayout(i)},t.prototype._getClipShape=function(e){var t=e.coordinateSystem,r=t&&t.getArea&&t.getArea();return e.get("clip",!0)?r:null},t.prototype._updateSymbolDraw=function(e,t){var r=this._symbolDraw,i=t.pipelineContext.large;return r&&i===this._isLargeDraw||(r&&r.remove(),r=this._symbolDraw=i?new fw:new Fx,this._isLargeDraw=i,this.group.removeAll()),this.group.add(r.group),r},t.prototype.remove=function(e,t){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},t.prototype.dispose=function(){},t.type="scatter",t}(Np),vw=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.type="grid",t.dependencies=["xAxis","yAxis"],t.layoutMode="box",t.defaultOption={show:!1,zlevel:0,z:0,left:"10%",top:60,right:"10%",bottom:70,containLabel:!1,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderColor:"#ccc"},t}(qh),mw=function(){function e(){}return e.prototype.getNeedCrossZero=function(){return!this.option.scale},e.prototype.getCoordSysModel=function(){},e}(),gw=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.getCoordSysModel=function(){return this.getReferringComponents("grid",gn).models[0]},t.type="cartesian2dAxis",t}(qh);P(gw,mw);var yw={show:!0,zlevel:0,z:0,inverse:!1,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisPointer:{},axisLine:{show:!0,onZero:!0,onZeroAxisIndex:null,lineStyle:{color:"#6E7079",width:1,type:"solid"},symbol:["none","none"],symbolSize:[10,15]},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12},splitLine:{show:!0,lineStyle:{color:["#E0E6F1"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.2)","rgba(210,219,238,0.2)"]}}},bw=T({boundaryGap:!0,deduplication:null,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"}},yw),xw=T({boundaryGap:[0,0],axisLine:{show:"auto"},axisTick:{show:"auto"},splitNumber:5,minorTick:{show:!1,splitNumber:5,length:3,lineStyle:{}},minorSplitLine:{show:!1,lineStyle:{color:"#F4F7FD",width:1}}},yw),kw={category:bw,value:xw,time:T({scale:!0,splitNumber:6,axisLabel:{showMinLabel:!1,showMaxLabel:!1,rich:{primary:{fontWeight:"bold"}}},splitLine:{show:!1}},xw),log:M({scale:!0,logBase:10},xw)};function ww(e){return K(e)&&null!=e.value?e.value:e+""}var _w=function(){function e(e){this.categories=e.categories||[],this._needCollect=e.needCollect,this._deduplication=e.deduplication}return e.createByAxisModel=function(t){var r=t.option,i=r.data,n=i&&B(i,ww);return new e({categories:n,needCollect:!n,deduplication:!1!==r.dedplication})},e.prototype.getOrdinal=function(e){return this._getOrCreateMap().get(e)},e.prototype.parseAndCollect=function(e){var t,r=this._needCollect;if("string"!==typeof e&&!r)return e;if(r&&!this._deduplication)return t=this.categories.length,this.categories[t]=e,t;var i=this._getOrCreateMap();return null==(t=i.get(e))&&(r?(t=this.categories.length,this.categories[t]=e,i.set(e,t)):t=NaN),t},e.prototype._getOrCreateMap=function(){return this._map||(this._map=ce(this.categories))},e}(),Sw={value:1,category:1,time:1,log:1};function Ow(e,t,r,i){L(Sw,(function(n,s){var o=T(T({},kw[s],!0),i,!0),u=function(e){function r(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var n=e.apply(this,r)||this;return n.type=t+"Axis."+s,n}return a(r,e),r.prototype.mergeDefaultAndTheme=function(e,t){var r=Lh(this),i=r?Rh(e):{};T(e,t.getTheme().get(s+"Axis")),T(e,this.getDefaultOption()),e.type=Tw(e),r&&Bh(e,i,r)},r.prototype.optionUpdated=function(){"category"===this.option.type&&(this.__ordinalMeta=_w.createByAxisModel(this))},r.prototype.getCategories=function(e){var t=this.option;if("category"===t.type)return e?t.data:this.__ordinalMeta.categories},r.prototype.getOrdinalMeta=function(){return this.__ordinalMeta},r.type=t+"Axis."+s,r.defaultOption=o,r}(r);e.registerComponentModel(u)})),e.registerSubTypeDefaulter(t+"Axis",Tw)}function Tw(e){return e.type||(e.data?"category":"value")}var Cw=function(){function e(e){this._setting=e||{},this._extent=[1/0,-1/0]}return e.prototype.getSetting=function(e){return this._setting[e]},e.prototype.unionExtent=function(e){var t=this._extent;e[0]<t[0]&&(t[0]=e[0]),e[1]>t[1]&&(t[1]=e[1])},e.prototype.unionExtentFromData=function(e,t){this.unionExtent(e.getApproximateExtent(t))},e.prototype.getExtent=function(){return this._extent.slice()},e.prototype.setExtent=function(e,t){var r=this._extent;isNaN(e)||(r[0]=e),isNaN(t)||(r[1]=t)},e.prototype.isInExtentRange=function(e){return this._extent[0]<=e&&this._extent[1]>=e},e.prototype.isBlank=function(){return this._isBlank},e.prototype.setBlank=function(e){this._isBlank=e},e}();Nn(Cw);var Iw=Cw,Mw=Li;function Aw(e,t,r,i){var n={},a=e[1]-e[0],s=n.interval=Ui(a/t,!0);null!=r&&s<r&&(s=n.interval=r),null!=i&&s>i&&(s=n.interval=i);var o=n.intervalPrecision=Ew(s);return function(e,t){!isFinite(e[0])&&(e[0]=t[0]),!isFinite(e[1])&&(e[1]=t[1]),Nw(e,0,t),Nw(e,1,t),e[0]>e[1]&&(e[0]=e[1])}(n.niceTickExtent=[Mw(Math.ceil(e[0]/s)*s,o),Mw(Math.floor(e[1]/s)*s,o)],e),n}function Ew(e){return Ri(e)+2}function Nw(e,t,r){e[t]=Math.max(Math.min(e[t],r[1]),r[0])}function Pw(e,t){return e>=t[0]&&e<=t[1]}function Dw(e,t){return t[1]===t[0]?.5:(e-t[0])/(t[1]-t[0])}function Lw(e,t){return e*(t[1]-t[0])+t[0]}var Bw=function(e){function t(t){var r=e.call(this,t)||this;r.type="ordinal";var i=r.getSetting("ordinalMeta");return i||(i=new _w({})),j(i)&&(i=new _w({categories:B(i,(function(e){return K(e)?e.value:e}))})),r._ordinalMeta=i,r._extent=r.getSetting("extent")||[0,i.categories.length-1],r}return a(t,e),t.prototype.parse=function(e){return"string"===typeof e?this._ordinalMeta.getOrdinal(e):Math.round(e)},t.prototype.contain=function(e){return Pw(e=this.parse(e),this._extent)&&null!=this._ordinalMeta.categories[e]},t.prototype.normalize=function(e){return Dw(e=this._getTickNumber(this.parse(e)),this._extent)},t.prototype.scale=function(e){return e=Math.round(Lw(e,this._extent)),this.getRawOrdinalNumber(e)},t.prototype.getTicks=function(){for(var e=[],t=this._extent,r=t[0];r<=t[1];)e.push({value:r}),r++;return e},t.prototype.getMinorTicks=function(e){},t.prototype.setSortInfo=function(e){if(null!=e){for(var t=e.ordinalNumbers,r=this._ordinalNumbersByTick=[],i=this._ticksByOrdinalNumber=[],n=0,a=this._ordinalMeta.categories.length,s=Math.min(a,t.length);n<s;++n){var o=t[n];r[n]=o,i[o]=n}for(var u=0;n<a;++n){for(;null!=i[u];)u++;r.push(u),i[u]=n}}else this._ordinalNumbersByTick=this._ticksByOrdinalNumber=null},t.prototype._getTickNumber=function(e){var t=this._ticksByOrdinalNumber;return t&&e>=0&&e<t.length?t[e]:e},t.prototype.getRawOrdinalNumber=function(e){var t=this._ordinalNumbersByTick;return t&&e>=0&&e<t.length?t[e]:e},t.prototype.getLabel=function(e){if(!this.isBlank()){var t=this.getRawOrdinalNumber(e.value),r=this._ordinalMeta.categories[t];return null==r?"":r+""}},t.prototype.count=function(){return this._extent[1]-this._extent[0]+1},t.prototype.unionExtentFromData=function(e,t){this.unionExtent(e.getApproximateExtent(t))},t.prototype.isInExtentRange=function(e){return e=this._getTickNumber(e),this._extent[0]<=e&&this._extent[1]>=e},t.prototype.getOrdinalMeta=function(){return this._ordinalMeta},t.prototype.niceTicks=function(){},t.prototype.niceExtent=function(){},t.type="ordinal",t}(Iw);Iw.registerClass(Bw);var Rw=Bw,Vw=Li,Gw=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="interval",t._interval=0,t._intervalPrecision=2,t}return a(t,e),t.prototype.parse=function(e){return e},t.prototype.contain=function(e){return Pw(e,this._extent)},t.prototype.normalize=function(e){return Dw(e,this._extent)},t.prototype.scale=function(e){return Lw(e,this._extent)},t.prototype.setExtent=function(e,t){var r=this._extent;isNaN(e)||(r[0]=parseFloat(e)),isNaN(t)||(r[1]=parseFloat(t))},t.prototype.unionExtent=function(e){var t=this._extent;e[0]<t[0]&&(t[0]=e[0]),e[1]>t[1]&&(t[1]=e[1]),this.setExtent(t[0],t[1])},t.prototype.getInterval=function(){return this._interval},t.prototype.setInterval=function(e){this._interval=e,this._niceExtent=this._extent.slice(),this._intervalPrecision=Ew(e)},t.prototype.getTicks=function(e){var t=this._interval,r=this._extent,i=this._niceExtent,n=this._intervalPrecision,a=[];if(!t)return a;r[0]<i[0]&&(e?a.push({value:Vw(i[0]-t,n)}):a.push({value:r[0]}));for(var s=i[0];s<=i[1]&&(a.push({value:s}),(s=Vw(s+t,n))!==a[a.length-1].value);)if(a.length>1e4)return[];var o=a.length?a[a.length-1].value:i[1];return r[1]>o&&(e?a.push({value:Vw(o+t,n)}):a.push({value:r[1]})),a},t.prototype.getMinorTicks=function(e){for(var t=this.getTicks(!0),r=[],i=this.getExtent(),n=1;n<t.length;n++){for(var a=t[n],s=t[n-1],o=0,u=[],c=(a.value-s.value)/e;o<e-1;){var d=Vw(s.value+(o+1)*c);d>i[0]&&d<i[1]&&u.push(d),o++}r.push(u)}return r},t.prototype.getLabel=function(e,t){if(null==e)return"";var r=t&&t.precision;return null==r?r=Ri(e.value)||0:"auto"===r&&(r=this._intervalPrecision),mh(Vw(e.value,r,!0))},t.prototype.niceTicks=function(e,t,r){e=e||5;var i=this._extent,n=i[1]-i[0];if(isFinite(n)){n<0&&(n=-n,i.reverse());var a=Aw(i,e,t,r);this._intervalPrecision=a.intervalPrecision,this._interval=a.interval,this._niceExtent=a.niceTickExtent}},t.prototype.niceExtent=function(e){var t=this._extent;if(t[0]===t[1])if(0!==t[0]){var r=t[0];e.fixMax||(t[1]+=r/2),t[0]-=r/2}else t[1]=1;var i=t[1]-t[0];isFinite(i)||(t[0]=0,t[1]=1),this.niceTicks(e.splitNumber,e.minInterval,e.maxInterval);var n=this._interval;e.fixMin||(t[0]=Vw(Math.floor(t[0]/n)*n)),e.fixMax||(t[1]=Vw(Math.ceil(t[1]/n)*n))},t.type="interval",t}(Iw);Iw.registerClass(Gw);var Fw=Gw,qw=function(e){function t(t){var r=e.call(this,t)||this;return r.type="time",r}return a(t,e),t.prototype.getLabel=function(e){var t=this.getSetting("useUTC");return Jd(e.value,Kd[function(e){switch(e){case"year":case"month":return"day";case"millisecond":return"millisecond";default:return"second"}}(Qd(this._minLevelUnit))]||Kd.second,t,this.getSetting("locale"))},t.prototype.getFormattedLabel=function(e,t,r){var i=this.getSetting("useUTC");return function(e,t,r,i,n){var a=null;if("string"===typeof r)a=r;else if("function"===typeof r)a=r(e.value,t,{level:e.level});else{var s=I({},Ud);if(e.level>0)for(var o=0;o<Xd.length;++o)s[Xd[o]]="{primary|"+s[Xd[o]]+"}";var u=r?!1===r.inherit?r:M(r,s):s,c=eh(e.value,n);if(u[c])a=u[c];else if(u.inherit){for(o=Yd.indexOf(c)-1;o>=0;--o)if(u[c]){a=u[c];break}a=a||s.none}if(j(a)){var d=null==e.level?0:e.level>=0?e.level:a.length+e.level;a=a[d=Math.min(d,a.length-1)]}}return Jd(new Date(e.value),a,n,i)}(e,t,r,this.getSetting("locale"),i)},t.prototype.getTicks=function(e){var t=this._interval,r=this._extent,i=[];if(!t)return i;i.push({value:r[0],level:0});var n=this.getSetting("useUTC"),a=function(e,t,r,i){var n=1e4,a=Yd,s=0;function o(e,t,r,n,a,s,o){for(var u=new Date(t),c=t,d=u[n]();c<r&&c<=i[1];)o.push({value:c}),d+=e,u[a](d),c=u.getTime();o.push({value:c,notAdd:!0})}function u(e,n,a){var s=[],u=!n.length;if(!function(e,t,r,i){var n=zi(t),a=zi(r),s=function(e){return th(n,e,i)===th(a,e,i)},o=function(){return s("year")},u=function(){return o()&&s("month")},c=function(){return u()&&s("day")},d=function(){return c()&&s("hour")},h=function(){return d()&&s("minute")},l=function(){return h()&&s("second")},f=function(){return l()&&s("millisecond")};switch(e){case"year":return o();case"month":return u();case"day":return c();case"hour":return d();case"minute":return h();case"second":return l();case"millisecond":return f()}}(Qd(e),i[0],i[1],r)){u&&(n=[{value:Xw(new Date(i[0]),e,r)},{value:i[1]}]);for(var c=0;c<n.length-1;c++){var d=n[c].value,h=n[c+1].value;if(d!==h){var l=void 0,f=void 0,p=void 0,v=!1;switch(e){case"year":l=Math.max(1,Math.round(t/zd/365)),f=rh(r),p=ch(r);break;case"half-year":case"quarter":case"month":l=Hw(t),f=ih(r),p=dh(r);break;case"week":case"half-week":case"day":l=zw(t,31),f=nh(r),p=hh(r),v=!0;break;case"half-day":case"quarter-day":case"hour":l=Uw(t),f=ah(r),p=lh(r);break;case"minute":l=Ww(t,!0),f=sh(r),p=fh(r);break;case"second":l=Ww(t,!1),f=oh(r),p=ph(r);break;case"millisecond":l=Kw(t),f=uh(r),p=vh(r)}o(l,d,h,f,p,v,s),"year"===e&&a.length>1&&0===c&&a.unshift({value:a[0].value-l})}}for(c=0;c<s.length;c++)a.push(s[c]);return s}}for(var c=[],d=[],h=0,l=0,f=0;f<a.length&&s++<n;++f){var p=Qd(a[f]);if($d(a[f]))if(u(a[f],c[c.length-1]||[],d),p!==(a[f+1]?Qd(a[f+1]):null)){if(d.length){l=h,d.sort((function(e,t){return e.value-t.value}));for(var v=[],m=0;m<d.length;++m){var g=d[m].value;0!==m&&d[m-1].value===g||(v.push(d[m]),g>=i[0]&&g<=i[1]&&h++)}var y=(i[1]-i[0])/t;if(h>1.5*y&&l>y/1.5)break;if(c.push(v),h>y||e===a[f])break}d=[]}}0;var b=V(B(c,(function(e){return V(e,(function(e){return e.value>=i[0]&&e.value<=i[1]&&!e.notAdd}))})),(function(e){return e.length>0})),x=[],k=b.length-1;for(f=0;f<b.length;++f)for(var w=b[f],_=0;_<w.length;++_)x.push({value:w[_].value,level:k-f});x.sort((function(e,t){return e.value-t.value}));var S=[];for(f=0;f<x.length;++f)0!==f&&x[f].value===x[f-1].value||S.push(x[f]);return S}(this._minLevelUnit,this._approxInterval,n,r);return(i=i.concat(a)).push({value:r[1],level:0}),i},t.prototype.niceExtent=function(e){var t=this._extent;if(t[0]===t[1]&&(t[0]-=zd,t[1]+=zd),t[1]===-1/0&&t[0]===1/0){var r=new Date;t[1]=+new Date(r.getFullYear(),r.getMonth(),r.getDate()),t[0]=t[1]-zd}this.niceTicks(e.splitNumber,e.minInterval,e.maxInterval)},t.prototype.niceTicks=function(e,t,r){e=e||10;var i=this._extent,n=i[1]-i[0];this._approxInterval=n/e,null!=t&&this._approxInterval<t&&(this._approxInterval=t),null!=r&&this._approxInterval>r&&(this._approxInterval=r);var a=jw.length,s=Math.min(function(e,t,r,i){for(;r<i;){var n=r+i>>>1;e[n][1]<t?r=n+1:i=n}return r}(jw,this._approxInterval,0,a),a-1);this._interval=jw[s][1],this._minLevelUnit=jw[Math.max(s-1,0)][0]},t.prototype.parse=function(e){return"number"===typeof e?e:+zi(e)},t.prototype.contain=function(e){return Pw(this.parse(e),this._extent)},t.prototype.normalize=function(e){return Dw(this.parse(e),this._extent)},t.prototype.scale=function(e){return Lw(e,this._extent)},t.type="time",t}(Fw),jw=[["second",Fd],["minute",qd],["hour",jd],["quarter-day",216e5],["half-day",432e5],["day",10368e4],["half-week",3024e5],["week",6048e5],["month",26784e5],["quarter",8208e6],["half-year",Hd/2],["year",Hd]];function zw(e,t){return(e/=zd)>16?16:e>7.5?7:e>3.5?4:e>1.5?2:1}function Hw(e){return(e/=2592e6)>6?6:e>3?3:e>2?2:1}function Uw(e){return(e/=jd)>12?12:e>6?6:e>3.5?4:e>2?2:1}function Ww(e,t){return(e/=t?qd:Fd)>30?30:e>20?20:e>15?15:e>10?10:e>5?5:e>2?2:1}function Kw(e){return Ui(e,!0)}function Xw(e,t,r){var i=new Date(e);switch(Qd(t)){case"year":case"month":i[dh(r)](0);case"day":i[hh(r)](1);case"hour":i[lh(r)](0);case"minute":i[fh(r)](0);case"second":i[ph(r)](0),i[vh(r)](0)}return i.getTime()}Iw.registerClass(qw);var Yw=qw,Zw=Iw.prototype,Qw=Fw.prototype,$w=Ri,Jw=Li,e_=Math.floor,t_=Math.ceil,r_=Math.pow,i_=Math.log,n_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="log",t.base=10,t._originalScale=new Fw,t._interval=0,t}return a(t,e),t.prototype.getTicks=function(e){var t=this._originalScale,r=this._extent,i=t.getExtent();return B(Qw.getTicks.call(this,e),(function(e){var t=e.value,n=Li(r_(this.base,t));return n=t===r[0]&&this._fixMin?s_(n,i[0]):n,{value:n=t===r[1]&&this._fixMax?s_(n,i[1]):n}}),this)},t.prototype.setExtent=function(e,t){var r=this.base;e=i_(e)/i_(r),t=i_(t)/i_(r),Qw.setExtent.call(this,e,t)},t.prototype.getExtent=function(){var e=this.base,t=Zw.getExtent.call(this);t[0]=r_(e,t[0]),t[1]=r_(e,t[1]);var r=this._originalScale.getExtent();return this._fixMin&&(t[0]=s_(t[0],r[0])),this._fixMax&&(t[1]=s_(t[1],r[1])),t},t.prototype.unionExtent=function(e){this._originalScale.unionExtent(e);var t=this.base;e[0]=i_(e[0])/i_(t),e[1]=i_(e[1])/i_(t),Zw.unionExtent.call(this,e)},t.prototype.unionExtentFromData=function(e,t){this.unionExtent(e.getApproximateExtent(t))},t.prototype.niceTicks=function(e){e=e||10;var t=this._extent,r=t[1]-t[0];if(!(r===1/0||r<=0)){var i,n=(i=r,Math.pow(10,Hi(i)));for(e/r*n<=.5&&(n*=10);!isNaN(n)&&Math.abs(n)<1&&Math.abs(n)>0;)n*=10;var a=[Li(t_(t[0]/n)*n),Li(e_(t[1]/n)*n)];this._interval=n,this._niceExtent=a}},t.prototype.niceExtent=function(e){Qw.niceExtent.call(this,e),this._fixMin=e.fixMin,this._fixMax=e.fixMax},t.prototype.parse=function(e){return e},t.prototype.contain=function(e){return Pw(e=i_(e)/i_(this.base),this._extent)},t.prototype.normalize=function(e){return Dw(e=i_(e)/i_(this.base),this._extent)},t.prototype.scale=function(e){return e=Lw(e,this._extent),r_(this.base,e)},t.type="log",t}(Iw),a_=n_.prototype;function s_(e,t){return Jw(e,$w(t))}a_.getMinorTicks=Qw.getMinorTicks,a_.getLabel=Qw.getLabel,Iw.registerClass(n_);var o_=n_,u_=function(){function e(e,t,r){this._prepareParams(e,t,r)}return e.prototype._prepareParams=function(e,t,r){r[1]<r[0]&&(r=[NaN,NaN]),this._dataMin=r[0],this._dataMax=r[1];var i=this._isOrdinal="ordinal"===e.type;this._needCrossZero=t.getNeedCrossZero&&t.getNeedCrossZero();var n=this._modelMinRaw=t.get("min",!0);z(n)?this._modelMinNum=l_(e,n({min:r[0],max:r[1]})):"dataMin"!==n&&(this._modelMinNum=l_(e,n));var a=this._modelMaxRaw=t.get("max",!0);if(z(a)?this._modelMaxNum=l_(e,a({min:r[0],max:r[1]})):"dataMax"!==a&&(this._modelMaxNum=l_(e,a)),i)this._axisDataLen=t.getCategories().length;else{var s=t.get("boundaryGap"),o=j(s)?s:[s||0,s||0];"boolean"===typeof o[0]||"boolean"===typeof o[1]?this._boundaryGapInner=[0,0]:this._boundaryGapInner=[Pr(o[0],1),Pr(o[1],1)]}},e.prototype.calculate=function(){var e=this._isOrdinal,t=this._dataMin,r=this._dataMax,i=this._axisDataLen,n=this._boundaryGapInner,a=e?null:r-t||Math.abs(t),s="dataMin"===this._modelMinRaw?t:this._modelMinNum,o="dataMax"===this._modelMaxRaw?r:this._modelMaxNum,u=null!=s,c=null!=o;null==s&&(s=e?i?0:NaN:t-n[0]*a),null==o&&(o=e?i?i-1:NaN:r+n[1]*a),(null==s||!isFinite(s))&&(s=NaN),(null==o||!isFinite(o))&&(o=NaN),s>o&&(s=NaN,o=NaN);var d=Q(s)||Q(o)||e&&!i;this._needCrossZero&&(s>0&&o>0&&!u&&(s=0),s<0&&o<0&&!c&&(o=0));var h=this._determinedMin,l=this._determinedMax;return null!=h&&(s=h,u=!0),null!=l&&(o=l,c=!0),{min:s,max:o,minFixed:u,maxFixed:c,isBlank:d}},e.prototype.modifyDataMinMax=function(e,t){this[d_[e]]=t},e.prototype.setDeterminedMinMax=function(e,t){this[c_[e]]=t},e.prototype.freeze=function(){this.frozen=!0},e}(),c_={min:"_determinedMin",max:"_determinedMax"},d_={min:"_dataMin",max:"_dataMax"};function h_(e,t,r){var i=e.rawExtentInfo;return i||(i=new u_(e,t,r),e.rawExtentInfo=i,i)}function l_(e,t){return null==t?null:Q(t)?NaN:e.parse(t)}function f_(e,t){var r=e.type,i=h_(e,t,e.getExtent()).calculate();e.setBlank(i.isBlank);var n=i.min,a=i.max,s=t.ecModel;if(s&&"time"===r){var o=kk("bar",s),u=!1;if(L(o,(function(e){u=u||e.getBaseAxis()===t.axis})),u){var c=wk(o),d=function(e,t,r,i){var n=r.axis.getExtent(),a=n[1]-n[0],s=Sk(i,r.axis);if(void 0===s)return{min:e,max:t};var o=1/0;L(s,(function(e){o=Math.min(e.offset,o)}));var u=-1/0;L(s,(function(e){u=Math.max(e.offset+e.width,u)})),o=Math.abs(o),u=Math.abs(u);var c=o+u,d=t-e,h=d/(1-(o+u)/a)-d;return{min:e-=h*(o/c),max:t+=h*(u/c)}}(n,a,t,c);n=d.min,a=d.max}}return{extent:[n,a],fixMin:i.minFixed,fixMax:i.maxFixed}}function p_(e,t){var r=f_(e,t),i=r.extent,n=t.get("splitNumber");e instanceof o_&&(e.base=t.get("logBase"));var a=e.type;e.setExtent(i[0],i[1]),e.niceExtent({splitNumber:n,fixMin:r.fixMin,fixMax:r.fixMax,minInterval:"interval"===a||"time"===a?t.get("minInterval"):null,maxInterval:"interval"===a||"time"===a?t.get("maxInterval"):null});var s=t.get("interval");null!=s&&e.setInterval&&e.setInterval(s)}function v_(e,t){if(t=t||e.get("type"))switch(t){case"category":return new Rw({ordinalMeta:e.getOrdinalMeta?e.getOrdinalMeta():e.getCategories(),extent:[1/0,-1/0]});case"time":return new Yw({locale:e.ecModel.getLocaleModel(),useUTC:e.ecModel.get("useUTC")});default:return new(Iw.getClass(t)||Fw)}}function m_(e){var t,r,i=e.getLabelModel().get("formatter"),n="category"===e.type?e.scale.getExtent()[0]:null;return"time"===e.scale.type?(r=i,function(t,i){return e.scale.getFormattedLabel(t,i,r)}):"string"===typeof i?function(t){return function(r){var i=e.scale.getLabel(r);return t.replace("{value}",null!=i?i:"")}}(i):"function"===typeof i?(t=i,function(r,i){return null!=n&&(i=r.value-n),t(g_(e,r),i,null!=r.level?{level:r.level}:null)}):function(t){return e.scale.getLabel(t)}}function g_(e,t){return"category"===e.type?e.scale.getLabel(t):t.value}function y_(e,t){var r=t*Math.PI/180,i=e.width,n=e.height,a=i*Math.abs(Math.cos(r))+Math.abs(n*Math.sin(r)),s=i*Math.abs(Math.sin(r))+Math.abs(n*Math.cos(r));return new _r(e.x,e.y,a,s)}function b_(e){var t=e.get("interval");return null==t?"auto":t}function x_(e){return"category"===e.type&&0===b_(e.getLabelModel())}function k_(e,t){var r={};return L(e.mapDimensionsAll(t),(function(t){r[Ax(e,t)]=!0})),G(r)}var w_=function(){function e(e){this.type="cartesian",this._dimList=[],this._axes={},this.name=e||""}return e.prototype.getAxis=function(e){return this._axes[e]},e.prototype.getAxes=function(){return B(this._dimList,(function(e){return this._axes[e]}),this)},e.prototype.getAxesByScale=function(e){return e=e.toLowerCase(),V(this.getAxes(),(function(t){return t.scale.type===e}))},e.prototype.addAxis=function(e){var t=e.dim;this._axes[t]=e,this._dimList.push(t)},e}(),__=["x","y"];function S_(e){return"interval"===e.type||"time"===e.type}var O_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="cartesian2d",t.dimensions=__,t}return a(t,e),t.prototype.calcAffineTransform=function(){this._transform=this._invTransform=null;var e=this.getAxis("x").scale,t=this.getAxis("y").scale;if(S_(e)&&S_(t)){var r=e.getExtent(),i=t.getExtent(),n=this.dataToPoint([r[0],i[0]]),a=this.dataToPoint([r[1],i[1]]),s=r[1]-r[0],o=i[1]-i[0];if(s&&o){var u=(a[0]-n[0])/s,c=(a[1]-n[1])/o,d=n[0]-r[0]*u,h=n[1]-i[0]*c,l=this._transform=[u,0,0,c,d,h];this._invTransform=mt([],l)}}},t.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},t.prototype.containPoint=function(e){var t=this.getAxis("x"),r=this.getAxis("y");return t.contain(t.toLocalCoord(e[0]))&&r.contain(r.toLocalCoord(e[1]))},t.prototype.containData=function(e){return this.getAxis("x").containData(e[0])&&this.getAxis("y").containData(e[1])},t.prototype.dataToPoint=function(e,t,r){r=r||[];var i=e[0],n=e[1];if(this._transform&&null!=i&&isFinite(i)&&null!=n&&isFinite(n))return Ae(r,e,this._transform);var a=this.getAxis("x"),s=this.getAxis("y");return r[0]=a.toGlobalCoord(a.dataToCoord(i)),r[1]=s.toGlobalCoord(s.dataToCoord(n)),r},t.prototype.clampData=function(e,t){var r=this.getAxis("x").scale,i=this.getAxis("y").scale,n=r.getExtent(),a=i.getExtent(),s=r.parse(e[0]),o=i.parse(e[1]);return(t=t||[])[0]=Math.min(Math.max(Math.min(n[0],n[1]),s),Math.max(n[0],n[1])),t[1]=Math.min(Math.max(Math.min(a[0],a[1]),o),Math.max(a[0],a[1])),t},t.prototype.pointToData=function(e,t){if(t=t||[],this._invTransform)return Ae(t,e,this._invTransform);var r=this.getAxis("x"),i=this.getAxis("y");return t[0]=r.coordToData(r.toLocalCoord(e[0])),t[1]=i.coordToData(i.toLocalCoord(e[1])),t},t.prototype.getOtherAxis=function(e){return this.getAxis("x"===e.dim?"y":"x")},t.prototype.getArea=function(){var e=this.getAxis("x").getGlobalExtent(),t=this.getAxis("y").getGlobalExtent(),r=Math.min(e[0],e[1]),i=Math.min(t[0],t[1]),n=Math.max(e[0],e[1])-r,a=Math.max(t[0],t[1])-i;return new _r(r,i,n,a)},t}(w_),T_=fn();function C_(e){return"category"===e.type?function(e){var t=e.getLabelModel(),r=M_(e,t);return!t.get("show")||e.scale.isBlank()?{labels:[],labelCategoryInterval:r.labelCategoryInterval}:r}(e):function(e){var t=e.scale.getTicks(),r=m_(e);return{labels:B(t,(function(t,i){return{formattedLabel:r(t,i),rawLabel:e.scale.getLabel(t),tickValue:t.value}}))}}(e)}function I_(e,t){return"category"===e.type?function(e,t){var r,i,n=A_(e,"ticks"),a=b_(t),s=E_(n,a);if(s)return s;t.get("show")&&!e.scale.isBlank()||(r=[]);if(z(a))r=D_(e,a,!0);else if("auto"===a){var o=M_(e,e.getLabelModel());i=o.labelCategoryInterval,r=B(o.labels,(function(e){return e.tickValue}))}else r=P_(e,i=a,!0);return N_(n,a,{ticks:r,tickCategoryInterval:i})}(e,t):{ticks:B(e.scale.getTicks(),(function(e){return e.value}))}}function M_(e,t){var r,i,n=A_(e,"labels"),a=b_(t),s=E_(n,a);return s||(z(a)?r=D_(e,a):(i="auto"===a?function(e){var t=T_(e).autoInterval;return null!=t?t:T_(e).autoInterval=e.calculateCategoryInterval()}(e):a,r=P_(e,i)),N_(n,a,{labels:r,labelCategoryInterval:i}))}function A_(e,t){return T_(e)[t]||(T_(e)[t]=[])}function E_(e,t){for(var r=0;r<e.length;r++)if(e[r].key===t)return e[r].value}function N_(e,t,r){return e.push({key:t,value:r}),r}function P_(e,t,r){var i=m_(e),n=e.scale,a=n.getExtent(),s=e.getLabelModel(),o=[],u=Math.max((t||0)+1,1),c=a[0],d=n.count();0!==c&&u>1&&d/u>2&&(c=Math.round(Math.ceil(c/u)*u));var h=x_(e),l=s.get("showMinLabel")||h,f=s.get("showMaxLabel")||h;l&&c!==a[0]&&v(a[0]);for(var p=c;p<=a[1];p+=u)v(p);function v(e){var t={value:e};o.push(r?e:{formattedLabel:i(t),rawLabel:n.getLabel(t),tickValue:e})}return f&&p-u!==a[1]&&v(a[1]),o}function D_(e,t,r){var i=e.scale,n=m_(e),a=[];return L(i.getTicks(),(function(e){var s=i.getLabel(e),o=e.value;t(e.value,s)&&a.push(r?o:{formattedLabel:n(e),rawLabel:s,tickValue:o})})),a}var L_=[0,1];function B_(e,t){var r=(e[1]-e[0])/t/2;e[0]+=r,e[1]-=r}var R_=function(){function e(e,t,r){this.onBand=!1,this.inverse=!1,this.dim=e,this.scale=t,this._extent=r||[0,0]}return e.prototype.contain=function(e){var t=this._extent,r=Math.min(t[0],t[1]),i=Math.max(t[0],t[1]);return e>=r&&e<=i},e.prototype.containData=function(e){return this.scale.contain(e)},e.prototype.getExtent=function(){return this._extent.slice()},e.prototype.getPixelPrecision=function(e){return Vi(e||this.scale.getExtent(),this._extent)},e.prototype.setExtent=function(e,t){var r=this._extent;r[0]=e,r[1]=t},e.prototype.dataToCoord=function(e,t){var r=this._extent,i=this.scale;return e=i.normalize(e),this.onBand&&"ordinal"===i.type&&B_(r=r.slice(),i.count()),Pi(e,L_,r,t)},e.prototype.coordToData=function(e,t){var r=this._extent,i=this.scale;this.onBand&&"ordinal"===i.type&&B_(r=r.slice(),i.count());var n=Pi(e,r,L_,t);return this.scale.scale(n)},e.prototype.pointToData=function(e,t){},e.prototype.getTicksCoords=function(e){var t=(e=e||{}).tickModel||this.getTickModel(),r=B(I_(this,t).ticks,(function(e){return{coord:this.dataToCoord("ordinal"===this.scale.type?this.scale.getRawOrdinalNumber(e):e),tickValue:e}}),this);return function(e,t,r,i){var n=t.length;if(!e.onBand||r||!n)return;var a,s,o=e.getExtent();if(1===n)t[0].coord=o[0],a=t[1]={coord:o[0]};else{var u=t[n-1].tickValue-t[0].tickValue,c=(t[n-1].coord-t[0].coord)/u;L(t,(function(e){e.coord-=c/2})),s=1+e.scale.getExtent()[1]-t[n-1].tickValue,a={coord:t[n-1].coord+c*s},t.push(a)}var d=o[0]>o[1];h(t[0].coord,o[0])&&(i?t[0].coord=o[0]:t.shift());i&&h(o[0],t[0].coord)&&t.unshift({coord:o[0]});h(o[1],a.coord)&&(i?a.coord=o[1]:t.pop());i&&h(a.coord,o[1])&&t.push({coord:o[1]});function h(e,t){return e=Li(e),t=Li(t),d?e>t:e<t}}(this,r,t.get("alignWithLabel"),e.clamp),r},e.prototype.getMinorTicksCoords=function(){if("ordinal"===this.scale.type)return[];var e=this.model.getModel("minorTick").get("splitNumber");return e>0&&e<100||(e=5),B(this.scale.getMinorTicks(e),(function(e){return B(e,(function(e){return{coord:this.dataToCoord(e),tickValue:e}}),this)}),this)},e.prototype.getViewLabels=function(){return C_(this).labels},e.prototype.getLabelModel=function(){return this.model.getModel("axisLabel")},e.prototype.getTickModel=function(){return this.model.getModel("axisTick")},e.prototype.getBandWidth=function(){var e=this._extent,t=this.scale.getExtent(),r=t[1]-t[0]+(this.onBand?1:0);0===r&&(r=1);var i=Math.abs(e[1]-e[0]);return Math.abs(i)/r},e.prototype.calculateCategoryInterval=function(){return function(e){var t=function(e){var t=e.getLabelModel();return{axisRotate:e.getRotate?e.getRotate():e.isHorizontal&&!e.isHorizontal()?90:0,labelRotate:t.get("rotate")||0,font:t.getFont()}}(e),r=m_(e),i=(t.axisRotate-t.labelRotate)/180*Math.PI,n=e.scale,a=n.getExtent(),s=n.count();if(a[1]-a[0]<1)return 0;var o=1;s>40&&(o=Math.max(1,Math.floor(s/40)));for(var u=a[0],c=e.dataToCoord(u+1)-e.dataToCoord(u),d=Math.abs(c*Math.cos(i)),h=Math.abs(c*Math.sin(i)),l=0,f=0;u<=a[1];u+=o){var p,v,m=Mr(r({value:u}),t.font,"center","top");p=1.3*m.width,v=1.3*m.height,l=Math.max(l,p,7),f=Math.max(f,v,7)}var g=l/d,y=f/h;isNaN(g)&&(g=1/0),isNaN(y)&&(y=1/0);var b=Math.max(0,Math.floor(Math.min(g,y))),x=T_(e.model),k=e.getExtent(),w=x.lastAutoInterval,_=x.lastTickCount;return null!=w&&null!=_&&Math.abs(w-b)<=1&&Math.abs(_-s)<=1&&w>b&&x.axisExtent0===k[0]&&x.axisExtent1===k[1]?b=w:(x.lastTickCount=s,x.lastAutoInterval=b,x.axisExtent0=k[0],x.axisExtent1=k[1]),b}(this)},e}(),V_=function(e){function t(t,r,i,n,a){var s=e.call(this,t,r,i)||this;return s.index=0,s.type=n||"value",s.position=a||"bottom",s}return a(t,e),t.prototype.isHorizontal=function(){var e=this.position;return"top"===e||"bottom"===e},t.prototype.getGlobalExtent=function(e){var t=this.getExtent();return t[0]=this.toGlobalCoord(t[0]),t[1]=this.toGlobalCoord(t[1]),e&&t[0]>t[1]&&t.reverse(),t},t.prototype.pointToData=function(e,t){return this.coordToData(this.toLocalCoord(e["x"===this.dim?0:1]),t)},t.prototype.setCategorySortInfo=function(e){if("category"!==this.type)return!1;this.model.option.categorySortInfo=e,this.scale.setSortInfo(e)},t}(R_);function G_(e,t,r){r=r||{};var i=e.coordinateSystem,n=t.axis,a={},s=n.getAxesOnZeroOf()[0],o=n.position,u=s?"onZero":o,c=n.dim,d=i.getRect(),h=[d.x,d.x+d.width,d.y,d.y+d.height],l={left:0,right:1,top:0,bottom:1,onZero:2},f=t.get("offset")||0,p="x"===c?[h[2]-f,h[3]+f]:[h[0]-f,h[1]+f];if(s){var v=s.toGlobalCoord(s.dataToCoord(0));p[l.onZero]=Math.max(Math.min(v,p[1]),p[0])}a.position=["y"===c?p[l[u]]:h[0],"x"===c?p[l[u]]:h[3]],a.rotation=Math.PI/2*("x"===c?0:1);a.labelDirection=a.tickDirection=a.nameDirection={top:-1,bottom:1,left:-1,right:1}[o],a.labelOffset=s?p[l[o]]-p[l.onZero]:0,t.get(["axisTick","inside"])&&(a.tickDirection=-a.tickDirection),$(r.labelInside,t.get(["axisLabel","inside"]))&&(a.labelDirection=-a.labelDirection);var m=t.get(["axisLabel","rotate"]);return a.labelRotate="top"===u?-m:m,a.z2=1,a}function F_(e){return"cartesian2d"===e.get("coordinateSystem")}function q_(e){var t={xAxisModel:null,yAxisModel:null};return L(t,(function(r,i){var n=i.replace(/Model$/,""),a=e.getReferringComponents(n,gn).models[0];t[i]=a})),t}function j_(e,t){return e.getCoordSysModel()===t}function z_(e,t,r,i){r.getAxesOnZeroOf=function(){return n?[n]:[]};var n,a=e[t],s=r.model,o=s.get(["axisLine","onZero"]),u=s.get(["axisLine","onZeroAxisIndex"]);if(o){if(null!=u)H_(a[u])&&(n=a[u]);else for(var c in a)if(a.hasOwnProperty(c)&&H_(a[c])&&!i[d(a[c])]){n=a[c];break}n&&(i[d(n)]=!0)}function d(e){return e.dim+"_"+e.index}}function H_(e){return e&&"category"!==e.type&&"time"!==e.type&&function(e){var t=e.scale.getExtent(),r=t[0],i=t[1];return!(r>0&&i>0||r<0&&i<0)}(e)}var U_=function(){function e(e,t,r){this.type="grid",this._coordsMap={},this._coordsList=[],this._axesMap={},this._axesList=[],this.axisPointerEnabled=!0,this.dimensions=__,this._initCartesian(e,t,r),this.model=e}return e.prototype.getRect=function(){return this._rect},e.prototype.update=function(e,t){var r=this._axesMap;this._updateScale(e,this.model),L(r.x,(function(e){p_(e.scale,e.model)})),L(r.y,(function(e){p_(e.scale,e.model)}));var i={};L(r.x,(function(e){z_(r,"y",e,i)})),L(r.y,(function(e){z_(r,"x",e,i)})),this.resize(this.model,t)},e.prototype.resize=function(e,t,r){var i=e.getBoxLayoutParams(),n=!r&&e.get("containLabel"),a=Ph(i,{width:t.getWidth(),height:t.getHeight()});this._rect=a;var s=this._axesList;function o(){L(s,(function(e){var t=e.isHorizontal(),r=t?[0,a.width]:[0,a.height],i=e.inverse?1:0;e.setExtent(r[i],r[1-i]),function(e,t){var r=e.getExtent(),i=r[0]+r[1];e.toGlobalCoord="x"===e.dim?function(e){return e+t}:function(e){return i-e+t},e.toLocalCoord="x"===e.dim?function(e){return e-t}:function(e){return i-e+t}}(e,t?a.x:a.y)}))}o(),n&&(L(s,(function(e){if(!e.model.get(["axisLabel","inside"])){var t=function(e){var t=e.model,r=e.scale;if(t.get(["axisLabel","show"])&&!r.isBlank()){var i,n,a=r.getExtent();n=r instanceof Rw?r.count():(i=r.getTicks()).length;var s,o=e.getLabelModel(),u=m_(e),c=1;n>40&&(c=Math.ceil(n/40));for(var d=0;d<n;d+=c){var h=u(i?i[d]:{value:a[0]+d},d),l=y_(o.getTextRect(h),o.get("rotate")||0);s?s.union(l):s=l}return s}}(e);if(t){var r=e.isHorizontal()?"height":"width",i=e.model.get(["axisLabel","margin"]);a[r]-=t[r]+i,"top"===e.position?a.y+=t.height+i:"left"===e.position&&(a.x+=t.width+i)}}})),o()),L(this._coordsList,(function(e){e.calcAffineTransform()}))},e.prototype.getAxis=function(e,t){var r=this._axesMap[e];if(null!=r)return r[t||0]},e.prototype.getAxes=function(){return this._axesList.slice()},e.prototype.getCartesian=function(e,t){if(null!=e&&null!=t){var r="x"+e+"y"+t;return this._coordsMap[r]}K(e)&&(t=e.yAxisIndex,e=e.xAxisIndex);for(var i=0,n=this._coordsList;i<n.length;i++)if(n[i].getAxis("x").index===e||n[i].getAxis("y").index===t)return n[i]},e.prototype.getCartesians=function(){return this._coordsList.slice()},e.prototype.convertToPixel=function(e,t,r){var i=this._findConvertTarget(t);return i.cartesian?i.cartesian.dataToPoint(r):i.axis?i.axis.toGlobalCoord(i.axis.dataToCoord(r)):null},e.prototype.convertFromPixel=function(e,t,r){var i=this._findConvertTarget(t);return i.cartesian?i.cartesian.pointToData(r):i.axis?i.axis.coordToData(i.axis.toLocalCoord(r)):null},e.prototype._findConvertTarget=function(e){var t,r,i=e.seriesModel,n=e.xAxisModel||i&&i.getReferringComponents("xAxis",gn).models[0],a=e.yAxisModel||i&&i.getReferringComponents("yAxis",gn).models[0],s=e.gridModel,o=this._coordsList;if(i)E(o,t=i.coordinateSystem)<0&&(t=null);else if(n&&a)t=this.getCartesian(n.componentIndex,a.componentIndex);else if(n)r=this.getAxis("x",n.componentIndex);else if(a)r=this.getAxis("y",a.componentIndex);else if(s){s.coordinateSystem===this&&(t=this._coordsList[0])}return{cartesian:t,axis:r}},e.prototype.containPoint=function(e){var t=this._coordsList[0];if(t)return t.containPoint(e)},e.prototype._initCartesian=function(e,t,r){var i=this,n=this,a={left:!1,right:!1,top:!1,bottom:!1},s={x:{},y:{}},o={x:0,y:0};if(t.eachComponent("xAxis",u("x"),this),t.eachComponent("yAxis",u("y"),this),!o.x||!o.y)return this._axesMap={},void(this._axesList=[]);function u(t){return function(r,i){if(j_(r,e)){var u=r.get("position");"x"===t?"top"!==u&&"bottom"!==u&&(u=a.bottom?"top":"bottom"):"left"!==u&&"right"!==u&&(u=a.left?"right":"left"),a[u]=!0;var c=new V_(t,v_(r),[0,0],r.get("type"),u),d="category"===c.type;c.onBand=d&&r.get("boundaryGap"),c.inverse=r.get("inverse"),r.axis=c,c.model=r,c.grid=n,c.index=i,n._axesList.push(c),s[t][i]=c,o[t]++}}}this._axesMap=s,L(s.x,(function(t,r){L(s.y,(function(n,a){var s="x"+r+"y"+a,o=new O_(s);o.master=i,o.model=e,i._coordsMap[s]=o,i._coordsList.push(o),o.addAxis(t),o.addAxis(n)}))}))},e.prototype._updateScale=function(e,t){function r(e,t){L(k_(e,t.dim),(function(r){t.scale.unionExtentFromData(e,r)}))}L(this._axesList,(function(e){if(e.scale.setExtent(1/0,-1/0),"category"===e.type){var t=e.model.get("categorySortInfo");e.scale.setSortInfo(t)}})),e.eachSeries((function(e){if(F_(e)){var i=q_(e),n=i.xAxisModel,a=i.yAxisModel;if(!j_(n,t)||!j_(a,t))return;var s=this.getCartesian(n.componentIndex,a.componentIndex),o=e.getData(),u=s.getAxis("x"),c=s.getAxis("y");"list"===o.type&&(r(o,u),r(o,c))}}),this)},e.prototype.getTooltipAxes=function(e){var t=[],r=[];return L(this.getCartesians(),(function(i){var n=null!=e&&"auto"!==e?i.getAxis(e):i.getBaseAxis(),a=i.getOtherAxis(n);E(t,n)<0&&t.push(n),E(r,a)<0&&r.push(a)})),{baseAxes:t,otherAxes:r}},e.create=function(t,r){var i=[];return t.eachComponent("grid",(function(n,a){var s=new e(n,t,r);s.name="grid_"+a,s.resize(n,r,!0),n.coordinateSystem=s,i.push(s)})),t.eachSeries((function(e){if(F_(e)){var t=q_(e),r=t.xAxisModel,i=t.yAxisModel;0;var n=r.getCoordSysModel().coordinateSystem;e.coordinateSystem=n.getCartesian(r.componentIndex,i.componentIndex)}})),i},e.dimensions=__,e}(),W_=Math.PI,K_=function(){function e(e,t){this.group=new Ti,this.opt=t,this.axisModel=e,M(t,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:!0,handleAutoShown:function(){return!0}});var r=new Ti({x:t.position[0],y:t.position[1],rotation:t.rotation});r.updateTransform(),this._transformGroup=r}return e.prototype.hasBuilder=function(e){return!!X_[e]},e.prototype.add=function(e){X_[e](this.opt,this.axisModel,this.group,this._transformGroup)},e.prototype.getGroup=function(){return this.group},e.innerTextLayout=function(e,t,r){var i,n,a=Fi(t-e);return qi(a)?(n=r>0?"top":"bottom",i="center"):qi(a-W_)?(n=r>0?"bottom":"top",i="center"):(n="middle",i=a>0&&a<W_?r>0?"right":"left":r>0?"left":"right"),{rotation:a,textAlign:i,textVerticalAlign:n}},e.makeAxisEventDataBase=function(e){var t={componentType:e.mainType,componentIndex:e.componentIndex};return t[e.mainType+"Index"]=e.componentIndex,t},e.isLabelSilent=function(e){var t=e.get("tooltip");return e.get("silent")||!(e.get("triggerEvent")||t&&t.show)},e}(),X_={axisLine:function(e,t,r,i){var n=t.get(["axisLine","show"]);if("auto"===n&&e.handleAutoShown&&(n=e.handleAutoShown("axisLine")),n){var a=t.axis.getExtent(),s=i.transform,o=[a[0],0],u=[a[1],0];s&&(Ae(o,o,s),Ae(u,u,s));var c=I({lineCap:"round"},t.getModel(["axisLine","lineStyle"]).getLineStyle()),d=new ic({subPixelOptimize:!0,shape:{x1:o[0],y1:o[1],x2:u[0],y2:u[1]},style:c,strokeContainThreshold:e.strokeContainThreshold||5,silent:!0,z2:1});d.anid="line",r.add(d);var h=t.get(["axisLine","symbol"]),l=t.get(["axisLine","symbolSize"]),f=t.get(["axisLine","symbolOffset"])||0;if("number"===typeof f&&(f=[f,f]),null!=h){"string"===typeof h&&(h=[h,h]),"string"!==typeof l&&"number"!==typeof l||(l=[l,l]);var p=l[0],v=l[1];L([{rotate:e.rotation+Math.PI/2,offset:f[0],r:0},{rotate:e.rotation-Math.PI/2,offset:f[1],r:Math.sqrt((o[0]-u[0])*(o[0]-u[0])+(o[1]-u[1])*(o[1]-u[1]))}],(function(t,i){if("none"!==h[i]&&null!=h[i]){var n=gm(h[i],-p/2,-v/2,p,v,c.stroke,!0),a=t.r+t.offset;n.attr({rotation:t.rotate,x:o[0]+a*Math.cos(e.rotation),y:o[1]-a*Math.sin(e.rotation),silent:!0,z2:11}),r.add(n)}}))}}},axisTickLabel:function(e,t,r,i){var n=function(e,t,r,i){var n=r.axis,a=r.getModel("axisTick"),s=a.get("show");"auto"===s&&i.handleAutoShown&&(s=i.handleAutoShown("axisTick"));if(!s||n.scale.isBlank())return;for(var o=a.getModel("lineStyle"),u=i.tickDirection*a.get("length"),c=$_(n.getTicksCoords(),t.transform,u,M(o.getLineStyle(),{stroke:r.get(["axisLine","lineStyle","color"])}),"ticks"),d=0;d<c.length;d++)e.add(c[d]);return c}(r,i,t,e),a=function(e,t,r,i){var n=r.axis;if(!$(i.axisLabelShow,r.get(["axisLabel","show"]))||n.scale.isBlank())return;var a=r.getModel("axisLabel"),s=a.get("margin"),o=n.getViewLabels(),u=($(i.labelRotate,a.get("rotate"))||0)*W_/180,c=K_.innerTextLayout(i.rotation,u,i.labelDirection),d=r.getCategories&&r.getCategories(!0),h=[],l=K_.isLabelSilent(r),f=r.get("triggerEvent");return L(o,(function(o,u){var p="ordinal"===n.scale.type?n.scale.getRawOrdinalNumber(o.tickValue):o.tickValue,v=o.formattedLabel,m=o.rawLabel,g=a;if(d&&d[p]){var y=d[p];K(y)&&y.textStyle&&(g=new Md(y.textStyle,a,r.ecModel))}var b=g.getTextColor()||r.get(["axisLine","lineStyle","color"]),x=n.dataToCoord(p),k=new no({x:x,y:i.labelOffset+i.labelDirection*s,rotation:c.rotation,silent:l,z2:10,style:cd(g,{text:v,align:g.getShallow("align",!0)||c.textAlign,verticalAlign:g.getShallow("verticalAlign",!0)||g.getShallow("baseline",!0)||c.textVerticalAlign,fill:"function"===typeof b?b("category"===n.type?m:"value"===n.type?p+"":p,u):b})});if(k.anid="label_"+p,f){var w=K_.makeAxisEventDataBase(r);w.targetType="axisLabel",w.value=m,ao(k).eventData=w}t.add(k),k.updateTransform(),h.push(k),e.add(k),k.decomposeTransform()})),h}(r,i,t,e);!function(e,t,r){if(x_(e.axis))return;var i=e.get(["axisLabel","showMinLabel"]),n=e.get(["axisLabel","showMaxLabel"]);r=r||[];var a=(t=t||[])[0],s=t[1],o=t[t.length-1],u=t[t.length-2],c=r[0],d=r[1],h=r[r.length-1],l=r[r.length-2];!1===i?(Y_(a),Y_(c)):Z_(a,s)&&(i?(Y_(s),Y_(d)):(Y_(a),Y_(c)));!1===n?(Y_(o),Y_(h)):Z_(u,o)&&(n?(Y_(u),Y_(l)):(Y_(o),Y_(h)))}(t,a,n),function(e,t,r,i){var n=r.axis,a=r.getModel("minorTick");if(!a.get("show")||n.scale.isBlank())return;var s=n.getMinorTicksCoords();if(!s.length)return;for(var o=a.getModel("lineStyle"),u=i*a.get("length"),c=M(o.getLineStyle(),M(r.getModel("axisTick").getLineStyle(),{stroke:r.get(["axisLine","lineStyle","color"])})),d=0;d<s.length;d++)for(var h=$_(s[d],t.transform,u,c,"minorticks_"+d),l=0;l<h.length;l++)e.add(h[l])}(r,i,t,e.tickDirection)},axisName:function(e,t,r,i){var n=$(e.axisName,t.get("name"));if(n){var a,s,o=t.get("nameLocation"),u=e.nameDirection,c=t.getModel("nameTextStyle"),d=t.get("nameGap")||0,h=t.axis.getExtent(),l=h[0]>h[1]?-1:1,f=["start"===o?h[0]-l*d:"end"===o?h[1]+l*d:(h[0]+h[1])/2,Q_(o)?e.labelOffset+u*d:0],p=t.get("nameRotate");null!=p&&(p=p*W_/180),Q_(o)?a=K_.innerTextLayout(e.rotation,null!=p?p:e.rotation,u):(a=function(e,t,r,i){var n,a,s=Fi(r-e),o=i[0]>i[1],u="start"===t&&!o||"start"!==t&&o;qi(s-W_/2)?(a=u?"bottom":"top",n="center"):qi(s-1.5*W_)?(a=u?"top":"bottom",n="center"):(a="middle",n=s<1.5*W_&&s>W_/2?u?"left":"right":u?"right":"left");return{rotation:s,textAlign:n,textVerticalAlign:a}}(e.rotation,o,p||0,h),null!=(s=e.axisNameAvailableWidth)&&(s=Math.abs(s/Math.sin(a.rotation)),!isFinite(s)&&(s=null)));var v=c.getFont(),m=t.get("nameTruncate",!0)||{},g=m.ellipsis,y=$(e.nameTruncateMaxWidth,m.maxWidth,s),b=new no({x:f[0],y:f[1],rotation:a.rotation,silent:K_.isLabelSilent(t),style:cd(c,{text:n,font:v,overflow:"truncate",width:y,ellipsis:g,fill:c.getTextColor()||t.get(["axisLine","lineStyle","color"]),align:c.get("align")||a.textAlign,verticalAlign:c.get("verticalAlign")||a.textVerticalAlign}),z2:1});if(id({el:b,componentModel:t,itemName:n}),b.__fullText=n,b.anid="name",t.get("triggerEvent")){var x=K_.makeAxisEventDataBase(t);x.targetType="axisName",x.name=n,ao(b).eventData=x}i.add(b),b.updateTransform(),r.add(b),b.decomposeTransform()}}};function Y_(e){e&&(e.ignore=!0)}function Z_(e,t){var r=e&&e.getBoundingRect().clone(),i=t&&t.getBoundingRect().clone();if(r&&i){var n=dt([]);return pt(n,n,-e.rotation),r.applyTransform(lt([],n,e.getLocalTransform())),i.applyTransform(lt([],n,t.getLocalTransform())),r.intersect(i)}}function Q_(e){return"middle"===e||"center"===e}function $_(e,t,r,i,n){for(var a=[],s=[],o=[],u=0;u<e.length;u++){var c=e[u].coord;s[0]=c,s[1]=0,o[0]=c,o[1]=r,t&&(Ae(s,s,t),Ae(o,o,t));var d=new ic({subPixelOptimize:!0,shape:{x1:s[0],y1:s[1],x2:o[0],y2:o[1]},style:i,z2:2,autoBatch:!0,silent:!0});d.anid=n+"_"+e[u].tickValue,a.push(d)}return a}var J_=K_;function eS(e,t){var r={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return function(e,t,r){var i=t.getComponent("tooltip"),n=t.getComponent("axisPointer"),a=n.get("link",!0)||[],s=[];L(r.getCoordinateSystems(),(function(r){if(r.axisPointerEnabled){var o=aS(r.model),u=e.coordSysAxesInfo[o]={};e.coordSysMap[o]=r;var c=r.model.getModel("tooltip",i);if(L(r.getAxes(),q(f,!1,null)),r.getTooltipAxes&&i&&c.get("show")){var d="axis"===c.get("trigger"),h="cross"===c.get(["axisPointer","type"]),l=r.getTooltipAxes(c.get(["axisPointer","axis"]));(d||h)&&L(l.baseAxes,q(f,!h||"cross",d)),h&&L(l.otherAxes,q(f,"cross",!1))}}function f(i,o,d){var h=d.model.getModel("axisPointer",n),l=h.get("show");if(l&&("auto"!==l||i||nS(h))){null==o&&(o=h.get("triggerTooltip"));var f=(h=i?function(e,t,r,i,n,a){var s=t.getModel("axisPointer"),o={};L(["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],(function(e){o[e]=O(s.get(e))})),o.snap="category"!==e.type&&!!a,"cross"===s.get("type")&&(o.type="line");var u=o.label||(o.label={});if(null==u.show&&(u.show=!1),"cross"===n){var c=s.get(["label","show"]);if(u.show=null==c||c,!a){var d=o.lineStyle=s.get("crossStyle");d&&M(u,d.textStyle)}}return e.model.getModel("axisPointer",new Md(o,r,i))}(d,c,n,t,i,o):h).get("snap"),p=aS(d.model),v=o||f||"category"===d.type,m=e.axesInfo[p]={key:p,axis:d,coordSys:r,axisPointerModel:h,triggerTooltip:o,involveSeries:v,snap:f,useHandle:nS(h),seriesModels:[],linkGroup:null};u[p]=m,e.seriesInvolved=e.seriesInvolved||v;var g=function(e,t){for(var r=t.model,i=t.dim,n=0;n<e.length;n++){var a=e[n]||{};if(tS(a[i+"AxisId"],r.id)||tS(a[i+"AxisIndex"],r.componentIndex)||tS(a[i+"AxisName"],r.name))return n}}(a,d);if(null!=g){var y=s[g]||(s[g]={axesInfo:{}});y.axesInfo[p]=m,y.mapper=a[g].mapper,m.linkGroup=y}}}}))}(r,e,t),r.seriesInvolved&&function(e,t){t.eachSeries((function(t){var r=t.coordinateSystem,i=t.get(["tooltip","trigger"],!0),n=t.get(["tooltip","show"],!0);r&&"none"!==i&&!1!==i&&"item"!==i&&!1!==n&&!1!==t.get(["axisPointer","show"],!0)&&L(e.coordSysAxesInfo[aS(r.model)],(function(e){var i=e.axis;r.getAxis(i.dim)===i&&(e.seriesModels.push(t),null==e.seriesDataCount&&(e.seriesDataCount=0),e.seriesDataCount+=t.getData().count())}))}))}(r,e),r}function tS(e,t){return"all"===e||j(e)&&E(e,t)>=0||e===t}function rS(e){var t=iS(e);if(t){var r=t.axisPointerModel,i=t.axis.scale,n=r.option,a=r.get("status"),s=r.get("value");null!=s&&(s=i.parse(s));var o=nS(r);null==a&&(n.status=o?"show":"hide");var u=i.getExtent().slice();u[0]>u[1]&&u.reverse(),(null==s||s>u[1])&&(s=u[1]),s<u[0]&&(s=u[0]),n.value=s,o&&(n.status=t.axis.scale.isBlank()?"hide":"show")}}function iS(e){var t=(e.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return t&&t.axesInfo[aS(e)]}function nS(e){return!!e.get(["handle","show"])}function aS(e){return e.type+"||"+e.id}var sS={},oS=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return r.type=t.type,r}return a(t,e),t.prototype.render=function(t,r,i,n){this.axisPointerClass&&rS(t),e.prototype.render.apply(this,arguments),this._doUpdateAxisPointerClass(t,i,!0)},t.prototype.updateAxisPointer=function(e,t,r,i){this._doUpdateAxisPointerClass(e,r,!1)},t.prototype.remove=function(e,t){var r=this._axisPointer;r&&r.remove(t)},t.prototype.dispose=function(t,r){this._disposeAxisPointer(r),e.prototype.dispose.apply(this,arguments)},t.prototype._doUpdateAxisPointerClass=function(e,r,i){var n=t.getAxisPointerClass(this.axisPointerClass);if(n){var a=function(e){var t=iS(e);return t&&t.axisPointerModel}(e);a?(this._axisPointer||(this._axisPointer=new n)).render(e,a,r,i):this._disposeAxisPointer(r)}},t.prototype._disposeAxisPointer=function(e){this._axisPointer&&this._axisPointer.dispose(e),this._axisPointer=null},t.registerAxisPointerClass=function(e,t){sS[e]=t},t.getAxisPointerClass=function(e){return e&&sS[e]},t.type="axis",t}(wp),uS=fn();function cS(e,t,r,i){var n=r.axis;if(!n.scale.isBlank()){var a=r.getModel("splitArea"),s=a.getModel("areaStyle"),o=s.get("color"),u=i.coordinateSystem.getRect(),c=n.getTicksCoords({tickModel:a,clamp:!0});if(c.length){var d=o.length,h=uS(e).splitAreaColors,l=ce(),f=0;if(h)for(var p=0;p<c.length;p++){var v=h.get(c[p].tickValue);if(null!=v){f=(v+(d-1)*p)%d;break}}var m=n.toGlobalCoord(c[0].coord),g=s.getAreaStyle();o=j(o)?o:[o];for(p=1;p<c.length;p++){var y=n.toGlobalCoord(c[p].coord),b=void 0,x=void 0,k=void 0,w=void 0;n.isHorizontal()?(b=m,x=u.y,k=y-b,w=u.height,m=b+k):(b=u.x,x=m,k=u.width,m=x+(w=y-x));var _=c[p-1].tickValue;null!=_&&l.set(_,f),t.add(new Ks({anid:null!=_?"area_"+_:null,shape:{x:b,y:x,width:k,height:w},style:M({fill:o[f]},g),autoBatch:!0,silent:!0})),f=(f+1)%d}uS(e).splitAreaColors=l}}}function dS(e){uS(e).splitAreaColors=null}var hS=["axisLine","axisTickLabel","axisName"],lS=["splitArea","splitLine","minorSplitLine"],fS=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return r.type=t.type,r.axisPointerClass="CartesianAxisPointer",r}return a(t,e),t.prototype.render=function(t,r,i,n){this.group.removeAll();var a=this._axisGroup;if(this._axisGroup=new Ti,this.group.add(this._axisGroup),t.get("show")){var s=t.getCoordSysModel(),o=G_(s,t),u=new J_(t,I({handleAutoShown:function(e){for(var r=s.coordinateSystem.getCartesians(),i=0;i<r.length;i++){var n=r[i].getOtherAxis(t.axis).type;if("value"===n||"log"===n)return!0}return!1}},o));L(hS,u.add,u),this._axisGroup.add(u.getGroup()),L(lS,(function(e){t.get([e,"show"])&&pS[e](this,this._axisGroup,t,s)}),this),Zc(a,this._axisGroup,t),e.prototype.render.call(this,t,r,i,n)}},t.prototype.remove=function(){dS(this)},t.type="cartesianAxis",t}(oS),pS={splitLine:function(e,t,r,i){var n=r.axis;if(!n.scale.isBlank()){var a=r.getModel("splitLine"),s=a.getModel("lineStyle"),o=s.get("color");o=j(o)?o:[o];for(var u=i.coordinateSystem.getRect(),c=n.isHorizontal(),d=0,h=n.getTicksCoords({tickModel:a}),l=[],f=[],p=s.getLineStyle(),v=0;v<h.length;v++){var m=n.toGlobalCoord(h[v].coord);c?(l[0]=m,l[1]=u.y,f[0]=m,f[1]=u.y+u.height):(l[0]=u.x,l[1]=m,f[0]=u.x+u.width,f[1]=m);var g=d++%o.length,y=h[v].tickValue;t.add(new ic({anid:null!=y?"line_"+h[v].tickValue:null,subPixelOptimize:!0,autoBatch:!0,shape:{x1:l[0],y1:l[1],x2:f[0],y2:f[1]},style:M({stroke:o[g]},p),silent:!0}))}}},minorSplitLine:function(e,t,r,i){var n=r.axis,a=r.getModel("minorSplitLine").getModel("lineStyle"),s=i.coordinateSystem.getRect(),o=n.isHorizontal(),u=n.getMinorTicksCoords();if(u.length)for(var c=[],d=[],h=a.getLineStyle(),l=0;l<u.length;l++)for(var f=0;f<u[l].length;f++){var p=n.toGlobalCoord(u[l][f].coord);o?(c[0]=p,c[1]=s.y,d[0]=p,d[1]=s.y+s.height):(c[0]=s.x,c[1]=p,d[0]=s.x+s.width,d[1]=p),t.add(new ic({anid:"minor_line_"+u[l][f].tickValue,subPixelOptimize:!0,autoBatch:!0,shape:{x1:c[0],y1:c[1],x2:d[0],y2:d[1]},style:h,silent:!0}))}},splitArea:function(e,t,r,i){cS(e,t,r,i)}},vS=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return r.type=t.type,r}return a(t,e),t.type="xAxis",t}(fS),mS=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=vS.type,t}return a(t,e),t.type="yAxis",t}(fS),gS=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="grid",t}return a(t,e),t.prototype.render=function(e,t){this.group.removeAll(),e.get("show")&&this.group.add(new Ks({shape:e.coordinateSystem.getRect(),style:M({fill:e.get("backgroundColor")},e.getItemStyle()),silent:!0,z2:-1}))},t.type="grid",t}(wp),yS={offset:0};function bS(e){e.registerComponentView(gS),e.registerComponentModel(vw),e.registerCoordinateSystem("cartesian2d",U_),Ow(e,"x",gw,yS),Ow(e,"y",gw,yS),e.registerComponentView(vS),e.registerComponentView(mS),e.registerPreprocessor((function(e){e.xAxis&&e.yAxis&&!e.grid&&(e.grid={})}))}function xS(e){e.eachSeriesByType("radar",(function(e){var t=e.getData(),r=[],i=e.coordinateSystem;if(i){var n=i.getIndicatorAxes();L(n,(function(e,a){t.each(t.mapDimension(n[a].dim),(function(e,t){r[t]=r[t]||[];var n=i.dataToPoint(e,a);r[t][a]=kS(n)?n:wS(i)}))})),t.each((function(e){var n=function(e,t,r){if(e&&t)for(var i=0,n=e.length;i<n;i++)if(t.call(r,e[i],i,e))return e[i]}(r[e],(function(e){return kS(e)}))||wS(i);r[e].push(n.slice()),t.setItemLayout(e,r[e])}))}}))}function kS(e){return!isNaN(e[0])&&!isNaN(e[1])}function wS(e){return[e.cx,e.cy]}function _S(e){var t=e.polar;if(t){j(t)||(t=[t]);var r=[];L(t,(function(t,i){t.indicator?(t.type&&!t.shape&&(t.shape=t.type),e.radar=e.radar||[],j(e.radar)||(e.radar=[e.radar]),e.radar.push(t)):r.push(t)})),e.polar=r}L(e.series,(function(e){e&&"radar"===e.type&&e.polarIndex&&(e.radarIndex=e.polarIndex)}))}var SS=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return r.type=t.type,r}return a(t,e),t.prototype.render=function(e,t,r){var n=e.coordinateSystem,a=this.group,s=e.getData(),o=this._data;function u(e,t){var r=e.getItemVisual(t,"symbol")||"circle";if("none"!==r){var i=function(e){return j(e)||(e=[+e,+e]),e}(e.getItemVisual(t,"symbolSize")),n=gm(r,-1,-1,2,2),a=e.getItemVisual(t,"symbolRotate")||0;return n.attr({style:{strokeNoScale:!0},z2:100,scaleX:i[0]/2,scaleY:i[1]/2,rotation:a*Math.PI/180||0}),n}}function c(t,r,n,a,s,o){n.removeAll();for(var c=0;c<r.length-1;c++){var d=u(a,s);d&&(d.__dimIdx=c,t[c]?(d.setPosition(t[c]),i[o?"initProps":"updateProps"](d,{x:r[c][0],y:r[c][1]},e,s)):d.setPosition(r[c]),n.add(d))}}function d(e){return B(e,(function(e){return[n.cx,n.cy]}))}s.diff(o).add((function(t){var r=s.getItemLayout(t);if(r){var i=new Zu,n=new Ju,a={shape:{points:r}};i.shape.points=d(r),n.shape.points=d(r),qc(i,a,e,t),qc(n,a,e,t);var o=new Ti,u=new Ti;o.add(n),o.add(i),o.add(u),c(n.shape.points,r,u,s,t,!0),s.setItemGraphicEl(t,o)}})).update((function(t,r){var i=o.getItemGraphicEl(r),n=i.childAt(0),a=i.childAt(1),u=i.childAt(2),d={shape:{points:s.getItemLayout(t)}};d.shape.points&&(c(n.shape.points,d.shape.points,u,s,t,!1),Fc(n,d,e),Fc(a,d,e),s.setItemGraphicEl(t,i))})).remove((function(e){a.remove(o.getItemGraphicEl(e))})).execute(),s.eachItemGraphicEl((function(e,t){var r=s.getItemModel(t),i=e.childAt(0),n=e.childAt(1),o=e.childAt(2),u=s.getItemVisual(t,"style"),c=u.fill;a.add(e),i.useStyle(M(r.getModel("lineStyle").getLineStyle(),{fill:"none",stroke:c})),$o(i,r,"lineStyle"),$o(n,r,"areaStyle");var d=r.getModel("areaStyle"),h=d.isEmpty()&&d.parentModel.isEmpty();n.ignore=h,L(["emphasis","select","blur"],(function(e){var t=r.getModel([e,"areaStyle"]),i=t.isEmpty()&&t.parentModel.isEmpty();n.ensureState(e).ignore=i&&h})),n.useStyle(M(d.getAreaStyle(),{fill:c,opacity:.7,decal:u.decal}));var l=r.getModel("emphasis"),f=l.getModel("itemStyle").getItemStyle();o.eachChild((function(e){if(e instanceof Gs){var i=e.style;e.useStyle(I({image:i.image,x:i.x,y:i.y,width:i.width,height:i.height},u))}else e.useStyle(u),e.setColor(c);e.ensureState("emphasis").style=O(f);var n=s.get(s.dimensions[e.__dimIdx],t);(null==n||isNaN(n))&&(n=""),od(e,ud(r),{labelFetcher:s.hostModel,labelDataIndex:t,labelDimIndex:e.__dimIdx,defaultText:n,inheritColor:c,defaultOpacity:u.opacity})})),Xo(e,l.get("focus"),l.get("blurScope"))})),this._data=s},t.prototype.remove=function(){this.group.removeAll(),this._data=null},t.type="radar",t}(Np),OS=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return r.type=t.type,r.useColorPaletteOnData=!0,r.hasSymbolVisual=!0,r}return a(t,e),t.prototype.init=function(t){e.prototype.init.apply(this,arguments),this.legendVisualProvider=new uw(F(this.getData,this),F(this.getRawData,this))},t.prototype.getInitialData=function(e,t){return ow(this,{generateCoord:"indicator_",generateCoordCount:1/0})},t.prototype.formatTooltip=function(e,t,r){var i=this.getData(),n=this.coordinateSystem.getIndicatorAxes(),a=this.getData().getName(e),s=""===a?this.name:a,o=sp(this,e);return Jf("section",{header:s,sortBlocks:!0,blocks:B(n,(function(t){var r=i.get(i.mapDimension(t.dim),e);return Jf("nameValue",{markerType:"subItem",markerColor:o,name:t.name,value:r,sortParam:r})}))})},t.prototype.getTooltipPosition=function(e){if(null!=e)for(var t=this.getData(),r=this.coordinateSystem,i=t.getValues(B(r.dimensions,(function(e){return t.mapDimension(e)})),e),n=0,a=i.length;n<a;n++)if(!isNaN(i[n])){var s=r.getIndicatorAxes();return r.coordToPoint(s[n].dataToCoord(i[n]),n)}},t.type="series.radar",t.dependencies=["radar"],t.defaultOption={zlevel:0,z:2,coordinateSystem:"radar",legendHoverLink:!0,radarIndex:0,lineStyle:{width:2,type:"solid"},label:{position:"top"},symbolSize:8},t}(xp),TS=kw.value;function CS(e,t){return M({show:t},e)}var IS=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return r.type=t.type,r}return a(t,e),t.prototype.optionUpdated=function(){var e=this.get("boundaryGap"),t=this.get("splitNumber"),r=this.get("scale"),i=this.get("axisLine"),n=this.get("axisTick"),a=this.get("axisLabel"),s=this.get("axisName"),o=this.get(["axisName","show"]),u=this.get(["axisName","formatter"]),c=this.get("axisNameGap"),d=this.get("triggerEvent"),h=B(this.get("indicator")||[],(function(h){null!=h.max&&h.max>0&&!h.min?h.min=0:null!=h.min&&h.min<0&&!h.max&&(h.max=0);var l=s;null!=h.color&&(l=M({color:h.color},s));var f=T(O(h),{boundaryGap:e,splitNumber:t,scale:r,axisLine:i,axisTick:n,axisLabel:a,name:h.text,nameLocation:"end",nameGap:c,nameTextStyle:l,triggerEvent:d},!1);if(o||(f.name=""),"string"===typeof u){var p=f.name;f.name=u.replace("{value}",null!=p?p:"")}else"function"===typeof u&&(f.name=u(f.name,f));var v=new Md(f,null,this.ecModel);return P(v,mw.prototype),v.mainType="radar",v.componentIndex=this.componentIndex,v}),this);this._indicatorModels=h},t.prototype.getIndicatorModels=function(){return this._indicatorModels},t.type="radar",t.defaultOption={zlevel:0,z:0,center:["50%","50%"],radius:"75%",startAngle:90,axisName:{show:!0},boundaryGap:[0,0],splitNumber:5,axisNameGap:15,scale:!1,shape:"polygon",axisLine:T({lineStyle:{color:"#bbb"}},TS.axisLine),axisLabel:CS(TS.axisLabel,!1),axisTick:CS(TS.axisTick,!1),splitLine:CS(TS.splitLine,!0),splitArea:CS(TS.splitArea,!0),indicator:[]},t}(qh),MS=["axisLine","axisTickLabel","axisName"],AS=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return r.type=t.type,r}return a(t,e),t.prototype.render=function(e,t,r){this.group.removeAll(),this._buildAxes(e),this._buildSplitLineAndArea(e)},t.prototype._buildAxes=function(e){var t=e.coordinateSystem;L(B(t.getIndicatorAxes(),(function(e){return new J_(e.model,{position:[t.cx,t.cy],rotation:e.angle,labelDirection:-1,tickDirection:-1,nameDirection:1})})),(function(e){L(MS,e.add,e),this.group.add(e.getGroup())}),this)},t.prototype._buildSplitLineAndArea=function(e){var t=e.coordinateSystem,r=t.getIndicatorAxes();if(r.length){var i=e.get("shape"),n=e.getModel("splitLine"),a=e.getModel("splitArea"),s=n.getModel("lineStyle"),o=a.getModel("areaStyle"),u=n.get("show"),c=a.get("show"),d=s.get("color"),h=o.get("color"),l=j(d)?d:[d],f=j(h)?h:[h],p=[],v=[];if("circle"===i)for(var m=r[0].getTicksCoords(),g=t.cx,y=t.cy,b=0;b<m.length;b++){if(u)p[C(p,l,b)].push(new _u({shape:{cx:g,cy:y,r:m[b].coord}}));if(c&&b<m.length-1)v[C(v,f,b)].push(new Uu({shape:{cx:g,cy:y,r0:m[b].coord,r:m[b+1].coord}}))}else{var x,k=B(r,(function(e,r){var i=e.getTicksCoords();return x=null==x?i.length-1:Math.min(i.length-1,x),B(i,(function(e){return t.coordToPoint(e.coord,r)}))})),w=[];for(b=0;b<=x;b++){for(var _=[],S=0;S<r.length;S++)_.push(k[S][b]);if(_[0]&&_.push(_[0].slice()),u)p[C(p,l,b)].push(new Ju({shape:{points:_}}));if(c&&w)v[C(v,f,b-1)].push(new Zu({shape:{points:_.concat(w)}}));w=_.slice().reverse()}}var O=s.getLineStyle(),T=o.getAreaStyle();L(v,(function(e,t){this.group.add(Dc(e,{style:M({stroke:"none",fill:f[t%f.length]},T),silent:!0}))}),this),L(p,(function(e,t){this.group.add(Dc(e,{style:M({fill:"none",stroke:l[t%l.length]},O),silent:!0}))}),this)}function C(e,t,r){var i=r%t.length;return e[i]=e[i]||[],i}},t.type="radar",t}(wp),ES=function(e){function t(t,r,i){var n=e.call(this,t,r,i)||this;return n.type="value",n.angle=0,n.name="",n}return a(t,e),t}(R_),NS=function(){function e(e,t,r){this.dimensions=[],this._model=e,this._indicatorAxes=B(e.getIndicatorModels(),(function(e,t){var r="indicator_"+t,i=new ES(r,new Fw);return i.name=e.get("name"),i.model=e,e.axis=i,this.dimensions.push(r),i}),this),this.resize(e,r)}return e.prototype.getIndicatorAxes=function(){return this._indicatorAxes},e.prototype.dataToPoint=function(e,t){var r=this._indicatorAxes[t];return this.coordToPoint(r.dataToCoord(e),t)},e.prototype.coordToPoint=function(e,t){var r=this._indicatorAxes[t].angle;return[this.cx+e*Math.cos(r),this.cy-e*Math.sin(r)]},e.prototype.pointToData=function(e){var t=e[0]-this.cx,r=e[1]-this.cy,i=Math.sqrt(t*t+r*r);t/=i,r/=i;for(var n,a=Math.atan2(-r,t),s=1/0,o=-1,u=0;u<this._indicatorAxes.length;u++){var c=this._indicatorAxes[u],d=Math.abs(a-c.angle);d<s&&(n=c,o=u,s=d)}return[o,+(n&&n.coordToData(i))]},e.prototype.resize=function(e,t){var r=e.get("center"),i=t.getWidth(),n=t.getHeight(),a=Math.min(i,n)/2;this.cx=Di(r[0],i),this.cy=Di(r[1],n),this.startAngle=e.get("startAngle")*Math.PI/180;var s=e.get("radius");"string"!==typeof s&&"number"!==typeof s||(s=[0,s]),this.r0=Di(s[0],a),this.r=Di(s[1],a),L(this._indicatorAxes,(function(e,t){e.setExtent(this.r0,this.r);var r=this.startAngle+t*Math.PI*2/this._indicatorAxes.length;r=Math.atan2(Math.sin(r),Math.cos(r)),e.angle=r}),this)},e.prototype.update=function(e,t){var r=this._indicatorAxes,i=this._model;L(r,(function(e){e.scale.setExtent(1/0,-1/0)})),e.eachSeriesByType("radar",(function(t,n){if("radar"===t.get("coordinateSystem")&&e.getComponent("radar",t.get("radarIndex"))===i){var a=t.getData();L(r,(function(e){e.scale.unionExtentFromData(a,a.mapDimension(e.dim))}))}}),this);var n=i.get("splitNumber");function a(e){var t=Math.pow(10,Math.floor(Math.log(e)/Math.LN10)),r=e/t;return 2===r?r=5:r*=2,r*t}L(r,(function(e,t){var r=f_(e.scale,e.model).extent;p_(e.scale,e.model);var i=e.model,s=e.scale,o=l_(s,i.get("min",!0)),u=l_(s,i.get("max",!0)),c=s.getInterval();if(null!=o&&null!=u)s.setExtent(+o,+u),s.setInterval((u-o)/n);else if(null!=o){var d=void 0;do{d=o+c*n,s.setExtent(+o,d),s.setInterval(c),c=a(c)}while(d<r[1]&&isFinite(d)&&isFinite(r[1]))}else if(null!=u){var h=void 0;do{h=u-c*n,s.setExtent(h,+u),s.setInterval(c),c=a(c)}while(h>r[0]&&isFinite(h)&&isFinite(r[0]))}else{s.getTicks().length-1>n&&(c=a(c));h=Li((d=Math.ceil(r[1]/c)*c)-c*n);s.setExtent(h,d),s.setInterval(c)}}))},e.prototype.convertToPixel=function(e,t,r){return console.warn("Not implemented."),null},e.prototype.convertFromPixel=function(e,t,r){return console.warn("Not implemented."),null},e.prototype.containPoint=function(e){return console.warn("Not implemented."),!1},e.create=function(t,r){var i=[];return t.eachComponent("radar",(function(n){var a=new e(n,t,r);i.push(a),n.coordinateSystem=a})),t.eachSeriesByType("radar",(function(e){"radar"===e.get("coordinateSystem")&&(e.coordinateSystem=i[e.get("radarIndex")||0])})),i},e.dimensions=[],e}();function PS(e){e.registerCoordinateSystem("radar",NS),e.registerComponentModel(IS),e.registerComponentView(AS),e.registerVisual({seriesType:"radar",reset:function(e){var t=e.getData();t.each((function(e){t.setItemVisual(e,"legendSymbol","roundRect")})),t.setVisual("legendSymbol","roundRect")}})}var DS="\0_ec_interaction_mutex";function LS(e,t){return!!BS(e)[t]}function BS(e){return e[DS]||(e[DS]={})}function RS(e,t,r,i,n){e.pointerChecker&&e.pointerChecker(i,n.originX,n.originY)&&(Ze(i.event),VS(e,t,r,i,n))}function VS(e,t,r,i,n){n.isAvailableBehavior=F(GS,null,r,i),e.trigger(t,n)}function GS(e,t,r){var i=r[e];return!e||i&&(!H(i)||t.event[i+"Key"])}Vy({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},(function(){}));var FS=function(e){function t(t){var r=e.call(this)||this;r._zr=t;var i=F(r._mousedownHandler,r),n=F(r._mousemoveHandler,r),a=F(r._mouseupHandler,r),s=F(r._mousewheelHandler,r),o=F(r._pinchHandler,r);return r.enable=function(e,r){this.disable(),this._opt=M(O(r)||{},{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),null==e&&(e=!0),!0!==e&&"move"!==e&&"pan"!==e||(t.on("mousedown",i),t.on("mousemove",n),t.on("mouseup",a)),!0!==e&&"scale"!==e&&"zoom"!==e||(t.on("mousewheel",s),t.on("pinch",o))},r.disable=function(){t.off("mousedown",i),t.off("mousemove",n),t.off("mouseup",a),t.off("mousewheel",s),t.off("pinch",o)},r}return a(t,e),t.prototype.isDragging=function(){return this._dragging},t.prototype.isPinching=function(){return this._pinching},t.prototype.setPointerChecker=function(e){this.pointerChecker=e},t.prototype.dispose=function(){this.disable()},t.prototype._mousedownHandler=function(e){if(!(Qe(e)||e.target&&e.target.draggable)){var t=e.offsetX,r=e.offsetY;this.pointerChecker&&this.pointerChecker(e,t,r)&&(this._x=t,this._y=r,this._dragging=!0)}},t.prototype._mousemoveHandler=function(e){if(this._dragging&&GS("moveOnMouseMove",e,this._opt)&&"pinch"!==e.gestureEvent&&!LS(this._zr,"globalPan")){var t=e.offsetX,r=e.offsetY,i=this._x,n=this._y,a=t-i,s=r-n;this._x=t,this._y=r,this._opt.preventDefaultMouseMove&&Ze(e.event),VS(this,"pan","moveOnMouseMove",e,{dx:a,dy:s,oldX:i,oldY:n,newX:t,newY:r,isAvailableBehavior:null})}},t.prototype._mouseupHandler=function(e){Qe(e)||(this._dragging=!1)},t.prototype._mousewheelHandler=function(e){var t=GS("zoomOnMouseWheel",e,this._opt),r=GS("moveOnMouseWheel",e,this._opt),i=e.wheelDelta,n=Math.abs(i),a=e.offsetX,s=e.offsetY;if(0!==i&&(t||r)){if(t){var o=n>3?1.4:n>1?1.2:1.1;RS(this,"zoom","zoomOnMouseWheel",e,{scale:i>0?o:1/o,originX:a,originY:s,isAvailableBehavior:null})}if(r){var u=Math.abs(i);RS(this,"scrollMove","moveOnMouseWheel",e,{scrollDelta:(i>0?1:-1)*(u>3?.4:u>1?.15:.05),originX:a,originY:s,isAvailableBehavior:null})}}},t.prototype._pinchHandler=function(e){LS(this._zr,"globalPan")||RS(this,"zoom",null,e,{scale:e.pinchScale>1?1.1:1/1.1,originX:e.pinchX,originY:e.pinchY,isAvailableBehavior:null})},t}(Le);function qS(e,t,r){var i=e.target;i.x+=t,i.y+=r,i.dirty()}function jS(e,t,r,i){var n=e.target,a=e.zoomLimit,s=e.zoom=e.zoom||1;if(s*=t,a){var o=a.min||0,u=a.max||1/0;s=Math.max(Math.min(u,s),o)}var c=s/e.zoom;e.zoom=s,n.x-=(r-n.x)*(c-1),n.y-=(i-n.y)*(c-1),n.scaleX*=c,n.scaleY*=c,n.dirty()}var zS={axisPointer:1,tooltip:1,brush:1};function HS(e,t,r){var i=t.getComponentByElement(e.topTarget),n=i&&i.coordinateSystem;return i&&i!==r&&!zS.hasOwnProperty(i.mainType)&&n&&n.model!==r}var US=["rect","circle","line","ellipse","polygon","polyline","path"],WS=ce(US),KS=ce(US.concat(["g"])),XS=ce(US.concat(["g"])),YS=fn();function ZS(e){var t=e.getItemStyle(),r=e.get("areaColor");return null!=r&&(t.fill=r),t}function QS(e,t,r,i){var n=i.getModel("itemStyle"),a=i.getModel(["emphasis","itemStyle"]),s=i.getModel(["blur","itemStyle"]),o=i.getModel(["select","itemStyle"]),u=ZS(n),c=ZS(a),d=ZS(o),h=ZS(s),l=e.data;if(l){var f=l.getItemVisual(r,"style"),p=l.getItemVisual(r,"decal");e.isVisualEncodedByVisualMap&&f.fill&&(u.fill=f.fill),p&&(u.decal=Fm(p,e.api))}t.setStyle(u),t.style.strokeNoScale=!0,t.ensureState("emphasis").style=c,t.ensureState("select").style=d,t.ensureState("blur").style=h,No(t)}function $S(e,t,r,i,n,a,s){var o=e.data,u=e.isGeo,c=o&&isNaN(o.get(o.mapDimension("value"),a)),d=o&&o.getItemLayout(a);if(u||c||d&&d.showLabel){var h=u?r:a,l=void 0;(!o||a>=0)&&(l=n);var f=s?{normal:{align:"center",verticalAlign:"middle"}}:null;od(t,ud(i),{labelFetcher:l,labelDataIndex:h,defaultText:r},f);var p=t.getTextContent();if(p&&(YS(p).ignore=p.ignore,t.textConfig&&s)){var v=t.getBoundingRect().clone();t.textConfig.position=[(s[0]-v.x)/v.width*100+"%",(s[1]-v.y)/v.height*100+"%"]}!function(e,t,r){ao(e).dataIndex=t,ao(e).dataType=r}(t,a,null),t.disableLabelAnimation=!0}else t.removeTextContent(),t.removeTextConfig(),t.disableLabelAnimation=null}function JS(e,t,r,i,n,a){e.data?e.data.setItemGraphicEl(a,t):ao(t).eventData={componentType:"geo",componentIndex:n.componentIndex,geoIndex:n.componentIndex,name:r,region:i&&i.option||{}}}function eO(e,t,r,i,n){e.data||id({el:t,componentModel:n,itemName:r,itemTooltipOption:i.get("tooltip")})}function tO(e,t,r,i,n){t.highDownSilentOnTouch=!!n.get("selectedMode");var a=i.getModel("emphasis"),s=a.get("focus");return Xo(t,s,a.get("blurScope")),e.isGeo&&function(e,t,r){var i=ao(e);i.componentMainType=t.mainType,i.componentIndex=t.componentIndex,i.componentHighDownName=r}(t,n,r),s}var rO=function(){function e(e){var t=new Ti;this.uid=Ed("ec_map_draw"),this._controller=new FS(e.getZr()),this._controllerHost={target:t},this.group=t,t.add(this._regionsGroup=new Ti),t.add(this._svgGroup=new Ti)}return e.prototype.draw=function(e,t,r,i,n){var a="geo"===e.mainType,s=e.getData&&e.getData();a&&t.eachComponent({mainType:"series",subType:"map"},(function(t){s||t.getHostGeoModel()!==e||(s=t.getData())}));var o=e.coordinateSystem,u=this._regionsGroup,c=this.group,d=o.getTransformInfo(),h=d.raw,l=d.roam;!u.childAt(0)||n?(c.x=l.x,c.y=l.y,c.scaleX=l.scaleX,c.scaleY=l.scaleY,c.dirty()):Fc(c,l,e);var f=s&&s.getVisual("visualMeta")&&s.getVisual("visualMeta").length>0,p={api:r,geo:o,mapOrGeoModel:e,data:s,isVisualEncodedByVisualMap:f,isGeo:a,transformInfoRaw:h};"geoJSON"===o.resourceType?this._buildGeoJSON(p):"geoSVG"===o.resourceType&&this._buildSVG(p),this._updateController(e,t,r),this._updateMapSelectHandler(e,u,r,i)},e.prototype._buildGeoJSON=function(e){var t=this._regionsGroupByName=ce(),r=this._regionsGroup,i=e.transformInfoRaw,n=e.mapOrGeoModel,a=e.data,s=function(e){return[e[0]*i.scaleX+i.x,e[1]*i.scaleY+i.y]};r.removeAll(),L(e.geo.regions,(function(i){var o=i.name,u=n.getRegionModel(o),c=a?a.indexOfName(o):null,d=t.get(o);d||(d=t.set(o,new Ti),r.add(d),JS(e,d,o,u,n,c),eO(e,d,o,u,n),tO(e,d,o,u,n));var h=new lc({segmentIgnoreThreshold:1,shape:{paths:[]}});d.add(h),L(i.geometries,(function(e){if("polygon"===e.type){for(var t=[],r=0;r<e.exterior.length;++r)t.push(s(e.exterior[r]));h.shape.paths.push(new Zu({segmentIgnoreThreshold:1,shape:{points:t}}));for(r=0;r<(e.interiors?e.interiors.length:0);++r){for(var i=e.interiors[r],n=[],a=0;a<i.length;++a)n.push(s(i[a]));h.shape.paths.push(new Zu({segmentIgnoreThreshold:1,shape:{points:n}}))}}})),QS(e,h,c,u),h instanceof sa&&(h.culling=!0);var l=s(i.getCenter());$S(e,h,o,u,n,c,l)}),this)},e.prototype._buildSVG=function(e){var t=e.geo.map,r=e.transformInfoRaw;this._svgGroup.x=r.x,this._svgGroup.y=r.y,this._svgGroup.scaleX=r.scaleX,this._svgGroup.scaleY=r.scaleY,this._svgResourceChanged(t)&&(this._freeSVG(),this._useSVG(t));var i=this._svgDispatcherMap=ce(),n=!1;L(this._svgGraphicRecord.named,(function(t){var r=t.name,a=e.mapOrGeoModel,s=e.data,o=t.svgNodeTagLower,u=t.el,c=s?s.indexOfName(r):null,d=a.getRegionModel(r);(null!=WS.get(o)&&u instanceof sa&&QS(e,u,c,d),u instanceof sa&&(u.culling=!0),u.z2EmphasisLift=0,t.namedFrom)||(null!=XS.get(o)&&$S(e,u,r,d,a,c,null),JS(e,u,r,d,a,c),eO(e,u,r,d,a),null!=KS.get(o)&&("self"===tO(e,u,r,d,a)&&(n=!0),(i.get(r)||i.set(r,[])).push(u)))}),this),this._enableBlurEntireSVG(n,e)},e.prototype._enableBlurEntireSVG=function(e,t){if(e&&t.isGeo){var r=t.mapOrGeoModel.getModel(["blur","itemStyle"]).getItemStyle().opacity;this._svgGraphicRecord.root.traverse((function(e){if(!e.isGroup){No(e);var t=e.ensureState("blur").style||{};null==t.opacity&&null!=r&&(t.opacity=r),e.ensureState("emphasis")}}))}},e.prototype.remove=function(){this._regionsGroup.removeAll(),this._regionsGroupByName=null,this._svgGroup.removeAll(),this._freeSVG(),this._controller.dispose(),this._controllerHost=null},e.prototype.findHighDownDispatchers=function(e,t){if(null==e)return[];var r=t.coordinateSystem;if("geoJSON"===r.resourceType){var i=this._regionsGroupByName;if(i){var n=i.get(e);return n?[n]:[]}}else if("geoSVG"===r.resourceType)return this._svgDispatcherMap&&this._svgDispatcherMap.get(e)||[]},e.prototype._svgResourceChanged=function(e){return this._svgMapName!==e},e.prototype._useSVG=function(e){var t=Eg(e);if(t&&"geoSVG"===t.type){var r=t.useGraphic(this.uid);this._svgGroup.add(r.root),this._svgGraphicRecord=r,this._svgMapName=e}},e.prototype._freeSVG=function(){var e=this._svgMapName;if(null!=e){var t=Eg(e);t&&"geoSVG"===t.type&&t.freeGraphic(this.uid),this._svgGraphicRecord=null,this._svgDispatcherMap=null,this._svgGroup.removeAll(),this._svgMapName=null}},e.prototype._updateController=function(e,t,r){var i=e.coordinateSystem,n=this._controller,a=this._controllerHost;a.zoomLimit=e.get("scaleLimit"),a.zoom=i.getZoom(),n.enable(e.get("roam")||!1);var s=e.mainType;function o(){var t={type:"geoRoam",componentType:s};return t[s+"Id"]=e.id,t}n.off("pan").on("pan",(function(e){this._mouseDownFlag=!1,qS(a,e.dx,e.dy),r.dispatchAction(I(o(),{dx:e.dx,dy:e.dy}))}),this),n.off("zoom").on("zoom",(function(e){this._mouseDownFlag=!1,jS(a,e.scale,e.originX,e.originY),r.dispatchAction(I(o(),{zoom:e.scale,originX:e.originX,originY:e.originY}))}),this),n.setPointerChecker((function(t,n,a){return i.containPoint([n,a])&&!HS(t,r,e)}))},e.prototype.resetForLabelLayout=function(){this.group.traverse((function(e){var t=e.getTextContent();t&&(t.ignore=YS(t).ignore)}))},e.prototype._updateMapSelectHandler=function(e,t,r,i){var n=this;t.off("mousedown"),t.off("click"),e.get("selectedMode")&&(t.on("mousedown",(function(){n._mouseDownFlag=!0})),t.on("click",(function(e){n._mouseDownFlag&&(n._mouseDownFlag=!1)})))},e}(),iO=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return r.type=t.type,r}return a(t,e),t.prototype.render=function(e,t,r,i){if(!i||"mapToggleSelect"!==i.type||i.from!==this.uid){var n=this.group;if(n.removeAll(),!e.getHostGeoModel()){if(this._mapDraw&&i&&"geoRoam"===i.type&&this._mapDraw.resetForLabelLayout(),i&&"geoRoam"===i.type&&"series"===i.componentType&&i.seriesId===e.id)(a=this._mapDraw)&&n.add(a.group);else if(e.needsDrawMap){var a=this._mapDraw||new rO(r);n.add(a.group),a.draw(e,t,r,this,i),this._mapDraw=a}else this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;e.get("showLegendSymbol")&&t.getComponent("legend")&&this._renderSymbols(e,t,r)}}},t.prototype.remove=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null,this.group.removeAll()},t.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null},t.prototype._renderSymbols=function(e,t,r){var i=e.originalData,n=this.group;i.each(i.mapDimension("value"),(function(t,r){if(!isNaN(t)){var a=i.getItemLayout(r);if(a&&a.point){var s=a.point,o=a.offset,u=new _u({style:{fill:e.getData().getVisual("style").fill},shape:{cx:s[0]+9*o,cy:s[1],r:3},silent:!0,z2:8+(o?0:11)});if(!o){var c=e.mainSeries.getData(),d=i.getName(r),h=c.indexOfName(d),l=i.getItemModel(r),f=l.getModel("label"),p=c.getItemGraphicEl(h);od(u,ud(l),{labelFetcher:{getFormattedLabel:function(t,r){return e.getFormattedLabel(h,r)}}}),u.disableLabelAnimation=!0,f.get("position")||u.setTextConfig({position:"bottom"}),p.onHoverStateChange=function(e){u.useState(e)}}n.add(u)}}}))},t.type="map",t}(Np),nO=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return r.type=t.type,r.needsDrawMap=!1,r.seriesGroup=[],r.getTooltipPosition=function(e){if(null!=e){var t=this.getData().getName(e),r=this.coordinateSystem,i=r.getRegion(t);return i&&r.dataToPoint(i.getCenter())}},r}return a(t,e),t.prototype.getInitialData=function(e){for(var t=ow(this,{coordDimensions:["value"],encodeDefaulter:q(al,this)}),r=ce(),i=[],n=0,a=t.count();n<a;n++){var s=t.getName(n);r.set(s,!0)}return L(Ng(this.getMapType(),this.option.nameMap,this.option.nameProperty).regions,(function(e){var t=e.name;r.get(t)||i.push(t)})),t.appendValues([],i),t},t.prototype.getHostGeoModel=function(){var e=this.option.geoIndex;return null!=e?this.ecModel.getComponent("geo",e):null},t.prototype.getMapType=function(){return(this.getHostGeoModel()||this).option.map},t.prototype.getRawValue=function(e){var t=this.getData();return t.get(t.mapDimension("value"),e)},t.prototype.getRegionModel=function(e){var t=this.getData();return t.getItemModel(t.indexOfName(e))},t.prototype.formatTooltip=function(e,t,r){for(var i=this.getData(),n=this.getRawValue(e),a=i.getName(e),s=this.seriesGroup,o=[],u=0;u<s.length;u++){var c=s[u].originalData.indexOfName(a),d=i.mapDimension("value");isNaN(s[u].originalData.get(d,c))||o.push(s[u].name)}return Jf("section",{header:o.join(", "),noHeader:!o.length,blocks:[Jf("nameValue",{name:a,value:n})]})},t.prototype.setZoom=function(e){this.option.zoom=e},t.prototype.setCenter=function(e){this.option.center=e},t.prototype.getLegendIcon=function(e){var t=e.symbolType||"roundRect",r=gm(t,0,0,e.itemWidth,e.itemHeight,e.itemStyle.fill,e.symbolKeepAspect);return r.setStyle(e.itemStyle),r.style.stroke="none",t.indexOf("empty")>-1&&(r.style.stroke=r.style.fill,r.style.fill="#fff",r.style.lineWidth=2),r},t.type="series.map",t.dependencies=["geo"],t.layoutMode="box",t.defaultOption={zlevel:0,z:2,coordinateSystem:"geo",map:"",left:"center",top:"center",aspectScale:null,showLegendSymbol:!0,boundingCoords:null,center:null,zoom:1,scaleLimit:null,selectedMode:!0,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444",areaColor:"#eee"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{areaColor:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},nameProperty:"name"},t}(xp);function aO(e){var t={};e.eachSeriesByType("map",(function(e){var r=e.getHostGeoModel(),i=r?"o"+r.id:"i"+e.getMapType();(t[i]=t[i]||[]).push(e)})),L(t,(function(e,t){for(var r=function(e,t){var r={};return L(e,(function(e){e.each(e.mapDimension("value"),(function(t,i){var n="ec-"+e.getName(i);r[n]=r[n]||[],isNaN(t)||r[n].push(t)}))})),e[0].map(e[0].mapDimension("value"),(function(i,n){for(var a="ec-"+e[0].getName(n),s=0,o=1/0,u=-1/0,c=r[a].length,d=0;d<c;d++)o=Math.min(o,r[a][d]),u=Math.max(u,r[a][d]),s+=r[a][d];return 0===c?NaN:"min"===t?o:"max"===t?u:"average"===t?s/c:s}))}(B(e,(function(e){return e.getData()})),e[0].get("mapValueCalculation")),i=0;i<e.length;i++)e[i].originalData=e[i].getData();for(i=0;i<e.length;i++)e[i].seriesGroup=e,e[i].needsDrawMap=0===i&&!e[i].getHostGeoModel(),e[i].setData(r.cloneShallow()),e[i].mainSeries=e[0]}))}function sO(e){var t={};e.eachSeriesByType("map",(function(r){var i=r.getMapType();if(!r.getHostGeoModel()&&!t[i]){var n={};L(r.seriesGroup,(function(t){var r=t.coordinateSystem,i=t.originalData;t.get("showLegendSymbol")&&e.getComponent("legend")&&i.each(i.mapDimension("value"),(function(e,t){var a=i.getName(t),s=r.getRegion(a);if(s&&!isNaN(e)){var o=n[a]||0,u=r.dataToPoint(s.getCenter());n[a]=o+1,i.setItemLayout(t,{point:u,offset:o})}}))}));var a=r.getData();a.each((function(e){var t=a.getName(e),r=a.getItemLayout(e)||{};r.showLabel=!n[t],a.setItemLayout(e,r)})),t[i]=!0}}))}var oO=Ae;function uO(e){var t=e.seriesModel;return t?t.coordinateSystem:null}var cO=function(e){function t(t){var r=e.call(this)||this;return r.type="view",r.dimensions=["x","y"],r._roamTransformable=new St,r._rawTransformable=new St,r.name=t,r}return a(t,e),t.prototype.setBoundingRect=function(e,t,r,i){return this._rect=new _r(e,t,r,i),this._rect},t.prototype.getBoundingRect=function(){return this._rect},t.prototype.setViewRect=function(e,t,r,i){this._transformTo(e,t,r,i),this._viewRect=new _r(e,t,r,i)},t.prototype._transformTo=function(e,t,r,i){var n=this.getBoundingRect(),a=this._rawTransformable;a.transform=n.calculateTransform(new _r(e,t,r,i));var s=a.parent;a.parent=null,a.decomposeTransform(),a.parent=s,this._updateTransform()},t.prototype.setCenter=function(e){e&&(this._center=e,this._updateCenterAndZoom())},t.prototype.setZoom=function(e){e=e||1;var t=this.zoomLimit;t&&(null!=t.max&&(e=Math.min(t.max,e)),null!=t.min&&(e=Math.max(t.min,e))),this._zoom=e,this._updateCenterAndZoom()},t.prototype.getDefaultCenter=function(){var e=this.getBoundingRect();return[e.x+e.width/2,e.y+e.height/2]},t.prototype.getCenter=function(){return this._center||this.getDefaultCenter()},t.prototype.getZoom=function(){return this._zoom||1},t.prototype.getRoamTransform=function(){return this._roamTransformable.getLocalTransform()},t.prototype._updateCenterAndZoom=function(){var e=this._rawTransformable.getLocalTransform(),t=this._roamTransformable,r=this.getDefaultCenter(),i=this.getCenter(),n=this.getZoom();i=Ae([],i,e),r=Ae([],r,e),t.originX=i[0],t.originY=i[1],t.x=r[0]-i[0],t.y=r[1]-i[1],t.scaleX=t.scaleY=n,this._updateTransform()},t.prototype._updateTransform=function(){var e=this._roamTransformable,t=this._rawTransformable;t.parent=e,e.updateTransform(),t.updateTransform(),ht(this.transform||(this.transform=[]),t.transform||[1,0,0,1,0,0]),this._rawTransform=t.getLocalTransform(),this.invTransform=this.invTransform||[],mt(this.invTransform,this.transform),this.decomposeTransform()},t.prototype.getTransformInfo=function(){var e=this._rawTransformable,t=this._roamTransformable,r=new St;return r.transform=t.transform,r.decomposeTransform(),{roam:{x:r.x,y:r.y,scaleX:r.scaleX,scaleY:r.scaleY},raw:{x:e.x,y:e.y,scaleX:e.scaleX,scaleY:e.scaleY}}},t.prototype.getViewRect=function(){return this._viewRect},t.prototype.getViewRectAfterRoam=function(){var e=this.getBoundingRect().clone();return e.applyTransform(this.transform),e},t.prototype.dataToPoint=function(e,t,r){var i=t?this._rawTransform:this.transform;return r=r||[],i?oO(r,e,i):ge(r,e)},t.prototype.pointToData=function(e){var t=this.invTransform;return t?oO([],e,t):[e[0],e[1]]},t.prototype.convertToPixel=function(e,t,r){var i=uO(t);return i===this?i.dataToPoint(r):null},t.prototype.convertFromPixel=function(e,t,r){var i=uO(t);return i===this?i.pointToData(r):null},t.prototype.containPoint=function(e){return this.getViewRectAfterRoam().contain(e[0],e[1])},t.dimensions=["x","y"],t}(St),dO={geoJSON:{aspectScale:.75,invertLongitute:!0},geoSVG:{aspectScale:1,invertLongitute:!1}},hO=function(e){function t(t,r,i){var n=e.call(this,t)||this;n.dimensions=["lng","lat"],n.type="geo",n._nameCoordMap=ce(),n.map=r;var a=Ng(r,i.nameMap,i.nameProperty),s=Eg(r);n.resourceType=s?s.type:null;var o=dO[s.type];n._regionsMap=a.regionsMap,n._invertLongitute=o.invertLongitute,n.regions=a.regions,n.aspectScale=J(i.aspectScale,o.aspectScale);var u=a.boundingRect;return n.setBoundingRect(u.x,u.y,u.width,u.height),n}return a(t,e),t.prototype._transformTo=function(e,t,r,i){var n=this.getBoundingRect(),a=this._invertLongitute;n=n.clone(),a&&(n.y=-n.y-n.height);var s=this._rawTransformable;s.transform=n.calculateTransform(new _r(e,t,r,i));var o=s.parent;s.parent=null,s.decomposeTransform(),s.parent=o,a&&(s.scaleY=-s.scaleY),this._updateTransform()},t.prototype.getRegion=function(e){return this._regionsMap.get(e)},t.prototype.getRegionByCoord=function(e){for(var t=this.regions,r=0;r<t.length;r++){var i=t[r];if("geoJSON"===i.type&&i.contain(e))return t[r]}},t.prototype.addGeoCoord=function(e,t){this._nameCoordMap.set(e,t)},t.prototype.getGeoCoord=function(e){var t=this._regionsMap.get(e);return this._nameCoordMap.get(e)||t&&t.getCenter()},t.prototype.dataToPoint=function(e,t,r){if("string"===typeof e&&(e=this.getGeoCoord(e)),e)return cO.prototype.dataToPoint.call(this,e,t,r)},t.prototype.convertToPixel=function(e,t,r){var i=lO(t);return i===this?i.dataToPoint(r):null},t.prototype.convertFromPixel=function(e,t,r){var i=lO(t);return i===this?i.pointToData(r):null},t}(cO);function lO(e){var t=e.geoModel,r=e.seriesModel;return t?t.coordinateSystem:r?r.coordinateSystem||(r.getReferringComponents("geo",gn).models[0]||{}).coordinateSystem:null}P(hO,cO);var fO=hO;function pO(e,t){var r=e.get("boundingCoords");if(null!=r){var i=r[0],n=r[1];isNaN(i[0])||isNaN(i[1])||isNaN(n[0])||isNaN(n[1])||this.setBoundingRect(i[0],i[1],n[0]-i[0],n[1]-i[1])}var a,s,o,u=this.getBoundingRect(),c=e.get("layoutCenter"),d=e.get("layoutSize"),h=t.getWidth(),l=t.getHeight(),f=u.width/u.height*this.aspectScale,p=!1;if(c&&d&&(a=[Di(c[0],h),Di(c[1],l)],s=Di(d,Math.min(h,l)),isNaN(a[0])||isNaN(a[1])||isNaN(s)||(p=!0)),p)o={},f>1?(o.width=s,o.height=s/f):(o.height=s,o.width=s*f),o.y=a[1]-o.height/2,o.x=a[0]-o.width/2;else{var v=e.getBoxLayoutParams();v.aspect=f,o=Ph(v,{width:h,height:l})}this.setViewRect(o.x,o.y,o.width,o.height),this.setCenter(e.get("center")),this.setZoom(e.get("zoom"))}var vO=new(function(){function e(){this.dimensions=fO.prototype.dimensions}return e.prototype.create=function(e,t){var r=[];e.eachComponent("geo",(function(e,i){var n=e.get("map"),a=new fO(n+i,n,{nameMap:e.get("nameMap"),nameProperty:e.get("nameProperty"),aspectScale:e.get("aspectScale")});a.zoomLimit=e.get("scaleLimit"),r.push(a),e.coordinateSystem=a,a.model=e,a.resize=pO,a.resize(e,t)})),e.eachSeries((function(e){if("geo"===e.get("coordinateSystem")){var t=e.get("geoIndex")||0;e.coordinateSystem=r[t]}}));var i={};return e.eachSeriesByType("map",(function(e){if(!e.getHostGeoModel()){var t=e.getMapType();i[t]=i[t]||[],i[t].push(e)}})),L(i,(function(e,i){var n=B(e,(function(e){return e.get("nameMap")})),a=new fO(i,i,{nameMap:C(n),nameProperty:e[0].get("nameProperty"),aspectScale:e[0].get("aspectScale")});a.zoomLimit=$.apply(null,B(e,(function(e){return e.get("scaleLimit")}))),r.push(a),a.resize=pO,a.resize(e[0],t),L(e,(function(e){e.coordinateSystem=a,function(e,t){L(t.get("geoCoord"),(function(t,r){e.addGeoCoord(r,t)}))}(a,e)}))})),r},e.prototype.getFilledRegions=function(e,t,r,i){for(var n=(e||[]).slice(),a=ce(),s=0;s<n.length;s++)a.set(n[s].name,n[s]);return L(Ng(t,r,i).regions,(function(e){var t=e.name;!a.get(t)&&n.push({name:t})})),n},e}()),mO=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return r.type=t.type,r}return a(t,e),t.prototype.init=function(e,t,r){var i=Eg(e.map);if(i&&"geoJSON"===i.type){var n=e.itemStyle=e.itemStyle||{};"color"in n||(n.color="#eee")}this.mergeDefaultAndTheme(e,r),rn(e,"label",["show"])},t.prototype.optionUpdated=function(){var e=this,t=this.option;t.regions=vO.getFilledRegions(t.regions,t.map,t.nameMap,t.nameProperty);var r={};this._optionModelMap=R(t.regions||[],(function(t,i){var n=i.name;return n&&(t.set(n,new Md(i,e,e.ecModel)),i.selected&&(r[n]=!0)),t}),ce()),t.selectedMap||(t.selectedMap=r)},t.prototype.getRegionModel=function(e){return this._optionModelMap.get(e)||new Md(null,this,this.ecModel)},t.prototype.getFormattedLabel=function(e,t){var r=this.getRegionModel(e),i="normal"===t?r.get(["label","formatter"]):r.get(["emphasis","label","formatter"]),n={name:e};return"function"===typeof i?(n.status=t,i(n)):"string"===typeof i?i.replace("{a}",null!=e?e:""):void 0},t.prototype.setZoom=function(e){this.option.zoom=e},t.prototype.setCenter=function(e){this.option.center=e},t.prototype.select=function(e){var t=this.option,r=t.selectedMode;r&&("multiple"!==r&&(t.selectedMap=null),(t.selectedMap||(t.selectedMap={}))[e]=!0)},t.prototype.unSelect=function(e){var t=this.option.selectedMap;t&&(t[e]=!1)},t.prototype.toggleSelected=function(e){this[this.isSelected(e)?"unSelect":"select"](e)},t.prototype.isSelected=function(e){var t=this.option.selectedMap;return!(!t||!t[e])},t.type="geo",t.layoutMode="box",t.defaultOption={zlevel:0,z:0,show:!0,left:"center",top:"center",aspectScale:null,silent:!1,map:"",boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},regions:[],tooltip:{show:!1}},t}(qh);function gO(e,t,r){var i=e.getZoom(),n=e.getCenter(),a=t.zoom,s=e.dataToPoint(n);if(null!=t.dx&&null!=t.dy&&(s[0]-=t.dx,s[1]-=t.dy,e.setCenter(e.pointToData(s))),null!=a){if(r){var o=r.min||0,u=r.max||1/0;a=Math.max(Math.min(i*a,u),o)/i}e.scaleX*=a,e.scaleY*=a;var c=(t.originX-e.x)*(a-1),d=(t.originY-e.y)*(a-1);e.x-=c,e.y-=d,e.updateTransform(),e.setCenter(e.pointToData(s)),e.setZoom(a*i)}return{center:e.getCenter(),zoom:e.getZoom()}}var yO=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return r.type=t.type,r.focusBlurEnabled=!0,r}return a(t,e),t.prototype.init=function(e,t){var r=new rO(t);this._mapDraw=r,this.group.add(r.group),this._api=t},t.prototype.render=function(e,t,r,i){var n=this._mapDraw;e.get("show")?n.draw(e,t,r,this,i):this._mapDraw.group.removeAll(),n.group.on("click",this._handleRegionClick,this),n.group.silent=e.get("silent"),this._model=e,this.updateSelectStatus(e,t,r)},t.prototype._handleRegionClick=function(e){var t;sm(e.target,(function(e){return null!=(t=ao(e).eventData)}),!0),t&&this._api.dispatchAction({type:"geoToggleSelect",geoId:this._model.id,name:t.name})},t.prototype.updateSelectStatus=function(e,t,r){var i=this;this._mapDraw.group.traverse((function(e){var t=ao(e).eventData;if(t)return i._model.isSelected(t.name)?r.enterSelect(e):r.leaveSelect(e),!0}))},t.prototype.findHighDownDispatchers=function(e){return this._mapDraw&&this._mapDraw.findHighDownDispatchers(e,this._model)},t.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove()},t.type="geo",t}(wp);function bO(e){function t(t,r){r.update="geo:updateSelectStatus",e.registerAction(r,(function(e,r){var i={},n=[];return r.eachComponent({mainType:"geo",query:e},(function(r){r[t](e.name),L(r.coordinateSystem.regions,(function(e){i[e.name]=r.isSelected(e.name)||!1}));var a=[];L(i,(function(e,t){i[t]&&a.push(t)})),n.push({geoIndex:r.componentIndex,name:a})})),{selected:i,allSelected:n,name:e.name}}))}e.registerCoordinateSystem("geo",vO),e.registerComponentModel(mO),e.registerComponentView(yO),t("toggleSelected",{type:"geoToggleSelect",event:"geoselectchanged"}),t("select",{type:"geoSelect",event:"geoselected"}),t("unSelect",{type:"geoUnSelect",event:"geounselected"}),e.registerAction({type:"geoRoam",event:"geoRoam",update:"updateTransform"},(function(e,t){var r=e.componentType||"series";t.eachComponent({mainType:r,query:e},(function(t){var i=t.coordinateSystem;if("geo"===i.type){var n=gO(i,e,t.get("scaleLimit"));t.setCenter&&t.setCenter(n.center),t.setZoom&&t.setZoom(n.zoom),"series"===r&&L(t.seriesGroup,(function(e){e.setCenter(n.center),e.setZoom(n.zoom)}))}}))}))}function xO(e,t){var r=e.isExpand?e.children:[],i=e.parentNode.children,n=e.hierNode.i?i[e.hierNode.i-1]:null;if(r.length){!function(e){var t=e.children,r=t.length,i=0,n=0;for(;--r>=0;){var a=t[r];a.hierNode.prelim+=i,a.hierNode.modifier+=i,n+=a.hierNode.change,i+=a.hierNode.shift+n}}(e);var a=(r[0].hierNode.prelim+r[r.length-1].hierNode.prelim)/2;n?(e.hierNode.prelim=n.hierNode.prelim+t(e,n),e.hierNode.modifier=e.hierNode.prelim-a):e.hierNode.prelim=a}else n&&(e.hierNode.prelim=n.hierNode.prelim+t(e,n));e.parentNode.hierNode.defaultAncestor=function(e,t,r,i){if(t){for(var n=e,a=e,s=a.parentNode.children[0],o=t,u=n.hierNode.modifier,c=a.hierNode.modifier,d=s.hierNode.modifier,h=o.hierNode.modifier;o=SO(o),a=OO(a),o&&a;){n=SO(n),s=OO(s),n.hierNode.ancestor=e;var l=o.hierNode.prelim+h-a.hierNode.prelim-c+i(o,a);l>0&&(CO(TO(o,e,r),e,l),c+=l,u+=l),h+=o.hierNode.modifier,c+=a.hierNode.modifier,u+=n.hierNode.modifier,d+=s.hierNode.modifier}o&&!SO(n)&&(n.hierNode.thread=o,n.hierNode.modifier+=h-u),a&&!OO(s)&&(s.hierNode.thread=a,s.hierNode.modifier+=c-d,r=e)}return r}(e,n,e.parentNode.hierNode.defaultAncestor||i[0],t)}function kO(e){var t=e.hierNode.prelim+e.parentNode.hierNode.modifier;e.setLayout({x:t},!0),e.hierNode.modifier+=e.parentNode.hierNode.modifier}function wO(e){return arguments.length?e:IO}function _O(e,t){return e-=Math.PI/2,{x:t*Math.cos(e),y:t*Math.sin(e)}}function SO(e){var t=e.children;return t.length&&e.isExpand?t[t.length-1]:e.hierNode.thread}function OO(e){var t=e.children;return t.length&&e.isExpand?t[0]:e.hierNode.thread}function TO(e,t,r){return e.hierNode.ancestor.parentNode===t.parentNode?e.hierNode.ancestor:r}function CO(e,t,r){var i=r/(t.hierNode.i-e.hierNode.i);t.hierNode.change-=i,t.hierNode.shift+=r,t.hierNode.modifier+=r,t.hierNode.prelim+=r,e.hierNode.change+=i}function IO(e,t){return e.parentNode===t.parentNode?1:2}var MO=function(){this.parentPoint=[],this.childPoints=[]},AO=function(e){function t(t){return e.call(this,t)||this}return a(t,e),t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new MO},t.prototype.buildPath=function(e,t){var r=t.childPoints,i=r.length,n=t.parentPoint,a=r[0],s=r[i-1];if(1===i)return e.moveTo(n[0],n[1]),void e.lineTo(a[0],a[1]);var o=t.orient,u="TB"===o||"BT"===o?0:1,c=1-u,d=Di(t.forkPosition,1),h=[];h[u]=n[u],h[c]=n[c]+(s[c]-n[c])*d,e.moveTo(n[0],n[1]),e.lineTo(h[0],h[1]),e.moveTo(a[0],a[1]),h[u]=a[u],e.lineTo(h[0],h[1]),h[u]=s[u],e.lineTo(h[0],h[1]),e.lineTo(s[0],s[1]);for(var l=1;l<i-1;l++){var f=r[l];e.moveTo(f[0],f[1]),h[u]=f[u],e.lineTo(h[0],h[1])}},t}(Ns);function EO(e,t){var r=e.getItemLayout(t);return r&&!isNaN(r.x)&&!isNaN(r.y)}function NO(e,t,r,i,n){var a=!r,s=e.tree.getNodeByDataIndex(t),o=s.getModel(),u=s.getVisual("style").fill,c=!1===s.isExpand&&0!==s.children.length?u:"#fff",d=e.tree.root,h=s.parentNode===d?s:s.parentNode||s,l=e.getItemGraphicEl(h.dataIndex),f=h.getLayout(),p=l?{x:l.__oldX,y:l.__oldY,rawX:l.__radialOldRawX,rawY:l.__radialOldRawY}:f,v=s.getLayout();a?((r=new Bx(e,t,null,{symbolInnerColor:c,useNameLabel:!0})).x=p.x,r.y=p.y):r.updateData(e,t,null,{symbolInnerColor:c,useNameLabel:!0}),r.__radialOldRawX=r.__radialRawX,r.__radialOldRawY=r.__radialRawY,r.__radialRawX=v.rawX,r.__radialRawY=v.rawY,i.add(r),e.setItemGraphicEl(t,r),r.__oldX=r.x,r.__oldY=r.y,Fc(r,{x:v.x,y:v.y},n);var m=r.getSymbolPath();if("radial"===n.get("layout")){var g=d.children[0],y=g.getLayout(),b=g.children.length,x=void 0,k=void 0;if(v.x===y.x&&!0===s.isExpand){var w={x:(g.children[0].getLayout().x+g.children[b-1].getLayout().x)/2,y:(g.children[0].getLayout().y+g.children[b-1].getLayout().y)/2};(x=Math.atan2(w.y-y.y,w.x-y.x))<0&&(x=2*Math.PI+x),(k=w.x<y.x)&&(x-=Math.PI)}else(x=Math.atan2(v.y-y.y,v.x-y.x))<0&&(x=2*Math.PI+x),0===s.children.length||0!==s.children.length&&!1===s.isExpand?(k=v.x<y.x)&&(x-=Math.PI):(k=v.x>y.x)||(x-=Math.PI);var _=k?"left":"right",S=o.getModel("label"),O=S.get("rotate"),T=O*(Math.PI/180),C=m.getTextContent();C&&(m.setTextConfig({position:S.get("position")||_,rotation:null==O?-x:T,origin:"center"}),C.setStyle("verticalAlign","middle"))}var I=o.get(["emphasis","focus"]),A="ancestor"===I?s.getAncestorsIndices():"descendant"===I?s.getDescendantIndices():null;A&&(ao(r).focus=A),function(e,t,r,i,n,a,s,o){var u=t.getModel(),c=e.get("edgeShape"),d=e.get("layout"),h=e.getOrient(),l=e.get(["lineStyle","curveness"]),f=e.get("edgeForkPosition"),p=u.getModel("lineStyle").getLineStyle(),v=i.__edge;if("curve"===c)t.parentNode&&t.parentNode!==r&&(v||(v=i.__edge=new uc({shape:DO(d,h,l,n,n)})),Fc(v,{shape:DO(d,h,l,a,s)},e));else if("polyline"===c)if("orthogonal"===d){if(t!==r&&t.children&&0!==t.children.length&&!0===t.isExpand){for(var m=t.children,g=[],y=0;y<m.length;y++){var b=m[y].getLayout();g.push([b.x,b.y])}v||(v=i.__edge=new AO({shape:{parentPoint:[s.x,s.y],childPoints:[[s.x,s.y]],orient:h,forkPosition:f}})),Fc(v,{shape:{parentPoint:[s.x,s.y],childPoints:g}},e)}}else 0;v&&(v.useStyle(M({strokeNoScale:!0,fill:null},p)),$o(v,u,"lineStyle"),No(v),o.add(v))}(n,s,d,r,p,f,v,i),r.__edge&&(r.onHoverStateChange=function(t){if("blur"!==t){var i=s.parentNode&&e.getItemGraphicEl(s.parentNode.dataIndex);i&&1===i.hoverState||Ao(r.__edge,t)}})}function PO(e,t,r,i,n){for(var a,s=e.tree.getNodeByDataIndex(t),o=e.tree.root,u=s.parentNode===o?s:s.parentNode||s;null==(a=u.getLayout());)u=u.parentNode===o?u:u.parentNode||u;var c={duration:n.get("animationDurationUpdate"),easing:n.get("animationEasingUpdate")};jc(r,{x:a.x+1,y:a.y+1},n,{cb:function(){i.remove(r),e.setItemGraphicEl(t,null)},removeOpt:c}),r.fadeOut(null,{fadeLabel:!0,animation:c});var d=e.getItemGraphicEl(u.dataIndex).__edge,h=r.__edge||(!1===u.isExpand||1===u.children.length?d:void 0),l=n.get("edgeShape"),f=n.get("layout"),p=n.get("orient"),v=n.get(["lineStyle","curveness"]);h&&("curve"===l?jc(h,{shape:DO(f,p,v,a,a),style:{opacity:0}},n,{cb:function(){i.remove(h)},removeOpt:c}):"polyline"===l&&"orthogonal"===n.get("layout")&&jc(h,{shape:{parentPoint:[a.x,a.y],childPoints:[[a.x,a.y]]},style:{opacity:0}},n,{cb:function(){i.remove(h)},removeOpt:c}))}function DO(e,t,r,i,n){var a,s,o,u,c,d,h,l;if("radial"===e){c=i.rawX,h=i.rawY,d=n.rawX,l=n.rawY;var f=_O(c,h),p=_O(c,h+(l-h)*r),v=_O(d,l+(h-l)*r),m=_O(d,l);return{x1:f.x||0,y1:f.y||0,x2:m.x||0,y2:m.y||0,cpx1:p.x||0,cpy1:p.y||0,cpx2:v.x||0,cpy2:v.y||0}}return c=i.x,h=i.y,d=n.x,l=n.y,"LR"!==t&&"RL"!==t||(a=c+(d-c)*r,s=h,o=d+(c-d)*r,u=l),"TB"!==t&&"BT"!==t||(a=c,s=h+(l-h)*r,o=d,u=l+(h-l)*r),{x1:c,y1:h,x2:d,y2:l,cpx1:a,cpy1:s,cpx2:o,cpy2:u}}var LO=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return r.type=t.type,r._mainGroup=new Ti,r}return a(t,e),t.prototype.init=function(e,t){this._controller=new FS(t.getZr()),this._controllerHost={target:this.group},this.group.add(this._mainGroup)},t.prototype.render=function(e,t,r){var i=e.getData(),n=e.layoutInfo,a=this._mainGroup;"radial"===e.get("layout")?(a.x=n.x+n.width/2,a.y=n.y+n.height/2):(a.x=n.x,a.y=n.y),this._updateViewCoordSys(e),this._updateController(e,t,r);var s=this._data;i.diff(s).add((function(t){EO(i,t)&&NO(i,t,null,a,e)})).update((function(t,r){var n=s.getItemGraphicEl(r);EO(i,t)?NO(i,t,n,a,e):n&&PO(s,r,n,a,e)})).remove((function(t){var r=s.getItemGraphicEl(t);r&&PO(s,t,r,a,e)})).execute(),this._nodeScaleRatio=e.get("nodeScaleRatio"),this._updateNodeAndLinkScale(e),!0===e.get("expandAndCollapse")&&i.eachItemGraphicEl((function(t,i){t.off("click").on("click",(function(){r.dispatchAction({type:"treeExpandAndCollapse",seriesId:e.id,dataIndex:i})}))})),this._data=i},t.prototype._updateViewCoordSys=function(e){var t=e.getData(),r=[];t.each((function(e){var i=t.getItemLayout(e);!i||isNaN(i.x)||isNaN(i.y)||r.push([+i.x,+i.y])}));var i=[],n=[];Ga(r,i,n);var a=this._min,s=this._max;n[0]-i[0]===0&&(i[0]=a?a[0]:i[0]-1,n[0]=s?s[0]:n[0]+1),n[1]-i[1]===0&&(i[1]=a?a[1]:i[1]-1,n[1]=s?s[1]:n[1]+1);var o=e.coordinateSystem=new cO;o.zoomLimit=e.get("scaleLimit"),o.setBoundingRect(i[0],i[1],n[0]-i[0],n[1]-i[1]),o.setCenter(e.get("center")),o.setZoom(e.get("zoom")),this.group.attr({x:o.x,y:o.y,scaleX:o.scaleX,scaleY:o.scaleY}),this._min=i,this._max=n},t.prototype._updateController=function(e,t,r){var i=this,n=this._controller,a=this._controllerHost,s=this.group;n.setPointerChecker((function(t,i,n){var a=s.getBoundingRect();return a.applyTransform(s.transform),a.contain(i,n)&&!HS(t,r,e)})),n.enable(e.get("roam")),a.zoomLimit=e.get("scaleLimit"),a.zoom=e.coordinateSystem.getZoom(),n.off("pan").off("zoom").on("pan",(function(t){qS(a,t.dx,t.dy),r.dispatchAction({seriesId:e.id,type:"treeRoam",dx:t.dx,dy:t.dy})})).on("zoom",(function(t){jS(a,t.scale,t.originX,t.originY),r.dispatchAction({seriesId:e.id,type:"treeRoam",zoom:t.scale,originX:t.originX,originY:t.originY}),i._updateNodeAndLinkScale(e),r.updateLabelLayout()}))},t.prototype._updateNodeAndLinkScale=function(e){var t=e.getData(),r=this._getNodeGlobalScale(e);t.eachItemGraphicEl((function(e,t){e.setSymbolScale(r)}))},t.prototype._getNodeGlobalScale=function(e){var t=e.coordinateSystem;if("view"!==t.type)return 1;var r=this._nodeScaleRatio,i=t.scaleX||1;return((t.getZoom()-1)*r+1)/i},t.prototype.dispose=function(){this._controller&&this._controller.dispose(),this._controllerHost=null},t.prototype.remove=function(){this._mainGroup.removeAll(),this._data=null},t.type="tree",t}(Np),BO=fn();function RO(e,t){if(BO(i=this).mainData===i){var r=I({},BO(this).datas);r[this.dataType]=t,jO(t,r,e)}else zO(t,this.dataType,BO(this).mainData,e);var i;return t}function VO(e,t){return e.struct&&e.struct.update(),t}function GO(e,t){return L(BO(t).datas,(function(r,i){r!==t&&zO(r.cloneShallow(),i,t,e)})),t}function FO(e){var t=BO(this).mainData;return null==e||null==t?t:BO(t).datas[e]}function qO(){var e=BO(this).mainData;return null==e?[{data:e}]:B(G(BO(e).datas),(function(t){return{type:t,data:BO(e).datas[t]}}))}function jO(e,t,r){BO(e).datas={},L(t,(function(t,i){zO(t,i,e,r)}))}function zO(e,t,r,i){BO(r).datas[t]=e,BO(e).mainData=r,e.dataType=t,i.struct&&(e[i.structAttr]=i.struct,i.struct[i.datasAttr[t]]=e),e.getLinkedData=FO,e.getLinkedDataAll=qO}var HO=function(e){var t=e.mainData,r=e.datas;r||(r={main:t},e.datasAttr={main:"data"}),e.datas=e.mainData=null,jO(t,r,e),L(r,(function(r){L(t.TRANSFERABLE_METHODS,(function(t){r.wrapMethod(t,q(RO,e))}))})),t.wrapMethod("cloneShallow",q(GO,e)),L(t.CHANGABLE_METHODS,(function(r){t.wrapMethod(r,q(VO,e))})),ie(r[t.dataType]===t)},UO=function(){function e(e,t){this.depth=0,this.height=0,this.dataIndex=-1,this.children=[],this.viewChildren=[],this.isExpand=!1,this.name=e||"",this.hostTree=t}return e.prototype.isRemoved=function(){return this.dataIndex<0},e.prototype.eachNode=function(e,t,r){"function"===typeof e&&(r=t,t=e,e=null),H(e=e||{})&&(e={order:e});var i,n=e.order||"preorder",a=this[e.attr||"children"];"preorder"===n&&(i=t.call(r,this));for(var s=0;!i&&s<a.length;s++)a[s].eachNode(e,t,r);"postorder"===n&&t.call(r,this)},e.prototype.updateDepthAndHeight=function(e){var t=0;this.depth=e;for(var r=0;r<this.children.length;r++){var i=this.children[r];i.updateDepthAndHeight(e+1),i.height>t&&(t=i.height)}this.height=t+1},e.prototype.getNodeById=function(e){if(this.getId()===e)return this;for(var t=0,r=this.children,i=r.length;t<i;t++){var n=r[t].getNodeById(e);if(n)return n}},e.prototype.contains=function(e){if(e===this)return!0;for(var t=0,r=this.children,i=r.length;t<i;t++){var n=r[t].contains(e);if(n)return n}},e.prototype.getAncestors=function(e){for(var t=[],r=e?this:this.parentNode;r;)t.push(r),r=r.parentNode;return t.reverse(),t},e.prototype.getAncestorsIndices=function(){for(var e=[],t=this;t;)e.push(t.dataIndex),t=t.parentNode;return e.reverse(),e},e.prototype.getDescendantIndices=function(){var e=[];return this.eachNode((function(t){e.push(t.dataIndex)})),e},e.prototype.getValue=function(e){var t=this.hostTree.data;return t.get(t.getDimension(e||"value"),this.dataIndex)},e.prototype.setLayout=function(e,t){this.dataIndex>=0&&this.hostTree.data.setItemLayout(this.dataIndex,e,t)},e.prototype.getLayout=function(){return this.hostTree.data.getItemLayout(this.dataIndex)},e.prototype.getModel=function(e){if(!(this.dataIndex<0))return this.hostTree.data.getItemModel(this.dataIndex).getModel(e)},e.prototype.getLevelModel=function(){return(this.hostTree.levelModels||[])[this.depth]},e.prototype.setVisual=function(e,t){this.dataIndex>=0&&this.hostTree.data.setItemVisual(this.dataIndex,e,t)},e.prototype.getVisual=function(e){return this.hostTree.data.getItemVisual(this.dataIndex,e)},e.prototype.getRawIndex=function(){return this.hostTree.data.getRawIndex(this.dataIndex)},e.prototype.getId=function(){return this.hostTree.data.getId(this.dataIndex)},e.prototype.isAncestorOf=function(e){for(var t=e.parentNode;t;){if(t===this)return!0;t=t.parentNode}return!1},e.prototype.isDescendantOf=function(e){return e!==this&&e.isAncestorOf(this)},e}();var WO=function(){function e(e){this.type="tree",this._nodes=[],this.hostModel=e}return e.prototype.eachNode=function(e,t,r){this.root.eachNode(e,t,r)},e.prototype.getNodeByDataIndex=function(e){var t=this.data.getRawIndex(e);return this._nodes[t]},e.prototype.getNodeById=function(e){return this.root.getNodeById(e)},e.prototype.update=function(){for(var e=this.data,t=this._nodes,r=0,i=t.length;r<i;r++)t[r].dataIndex=-1;for(r=0,i=e.count();r<i;r++)t[e.getRawIndex(r)].dataIndex=r},e.prototype.clearLayouts=function(){this.data.clearItemLayouts()},e.createTree=function(t,r,i){var n=new e(r),a=[],s=1;!function e(t,r){var i=t.value;s=Math.max(s,j(i)?i.length:1),a.push(t);var o=new UO(cn(t.name,""),n);r?function(e,t){var r=t.children;if(e.parentNode===t)return;r.push(e),e.parentNode=t}(o,r):n.root=o,n._nodes.push(o);var u=t.children;if(u)for(var c=0;c<u.length;c++)e(u[c],o)}(t),n.root.updateDepthAndHeight(0);var o=Ox(a,{coordDimensions:["value"],dimensionsCount:s}),u=new kx(o,r);return u.initData(a),i&&i(u),HO({mainData:u,struct:n,structAttr:"tree"}),n.update(),n},e}(),KO=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.hasSymbolVisual=!0,t.ignoreStyleOnData=!0,t}return a(t,e),t.prototype.getInitialData=function(e){var t={name:e.name,children:e.data},r=e.leaves||{},i=new Md(r,this,this.ecModel),n=WO.createTree(t,this,(function(e){e.wrapMethod("getItemModel",(function(e,t){var r=n.getNodeByDataIndex(t);return r.children.length&&r.isExpand||(e.parentModel=i),e}))}));var a=0;n.eachNode("preorder",(function(e){e.depth>a&&(a=e.depth)}));var s=e.expandAndCollapse&&e.initialTreeDepth>=0?e.initialTreeDepth:a;return n.root.eachNode("preorder",(function(e){var t=e.hostTree.data.getRawDataItem(e.dataIndex);e.isExpand=t&&null!=t.collapsed?!t.collapsed:e.depth<=s})),n.data},t.prototype.getOrient=function(){var e=this.get("orient");return"horizontal"===e?e="LR":"vertical"===e&&(e="TB"),e},t.prototype.setZoom=function(e){this.option.zoom=e},t.prototype.setCenter=function(e){this.option.center=e},t.prototype.formatTooltip=function(e,t,r){for(var i=this.getData().tree,n=i.root.children[0],a=i.getNodeByDataIndex(e),s=a.getValue(),o=a.name;a&&a!==n;)o=a.parentNode.name+"."+o,a=a.parentNode;return Jf("nameValue",{name:o,value:s,noValue:isNaN(s)||null==s})},t.type="series.tree",t.layoutMode="box",t.defaultOption={zlevel:0,z:2,coordinateSystem:"view",left:"12%",top:"12%",right:"12%",bottom:"12%",layout:"orthogonal",edgeShape:"curve",edgeForkPosition:"50%",roam:!1,nodeScaleRatio:.4,center:null,zoom:1,orient:"LR",symbol:"emptyCircle",symbolSize:7,expandAndCollapse:!0,initialTreeDepth:2,lineStyle:{color:"#ccc",width:1.5,curveness:.5},itemStyle:{color:"lightsteelblue",borderWidth:1.5},label:{show:!0},animationEasing:"linear",animationDuration:700,animationDurationUpdate:500},t}(xp);function XO(e,t){for(var r,i=[e];r=i.pop();)if(t(r),r.isExpand){var n=r.children;if(n.length)for(var a=n.length-1;a>=0;a--)i.push(n[a])}}function YO(e,t){e.eachSeriesByType("tree",(function(e){!function(e,t){var r=function(e,t){return Ph(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})}(e,t);e.layoutInfo=r;var i=e.get("layout"),n=0,a=0,s=null;"radial"===i?(n=2*Math.PI,a=Math.min(r.height,r.width)/2,s=wO((function(e,t){return(e.parentNode===t.parentNode?1:2)/e.depth}))):(n=r.width,a=r.height,s=wO());var o=e.getData().tree.root,u=o.children[0];if(u){!function(e){var t=e;t.hierNode={defaultAncestor:null,ancestor:t,prelim:0,modifier:0,change:0,shift:0,i:0,thread:null};for(var r,i,n=[t];r=n.pop();)if(i=r.children,r.isExpand&&i.length)for(var a=i.length-1;a>=0;a--){var s=i[a];s.hierNode={defaultAncestor:null,ancestor:s,prelim:0,modifier:0,change:0,shift:0,i:a,thread:null},n.push(s)}}(o),function(e,t,r){for(var i,n=[e],a=[];i=n.pop();)if(a.push(i),i.isExpand){var s=i.children;if(s.length)for(var o=0;o<s.length;o++)n.push(s[o])}for(;i=a.pop();)t(i,r)}(u,xO,s),o.hierNode.modifier=-u.hierNode.prelim,XO(u,kO);var c=u,d=u,h=u;XO(u,(function(e){var t=e.getLayout().x;t<c.getLayout().x&&(c=e),t>d.getLayout().x&&(d=e),e.depth>h.depth&&(h=e)}));var l=c===d?1:s(c,d)/2,f=l-c.getLayout().x,p=0,v=0,m=0,g=0;if("radial"===i)p=n/(d.getLayout().x+l+f),v=a/(h.depth-1||1),XO(u,(function(e){m=(e.getLayout().x+f)*p,g=(e.depth-1)*v;var t=_O(m,g);e.setLayout({x:t.x,y:t.y,rawX:m,rawY:g},!0)}));else{var y=e.getOrient();"RL"===y||"LR"===y?(v=a/(d.getLayout().x+l+f),p=n/(h.depth-1||1),XO(u,(function(e){g=(e.getLayout().x+f)*v,m="LR"===y?(e.depth-1)*p:n-(e.depth-1)*p,e.setLayout({x:m,y:g},!0)}))):"TB"!==y&&"BT"!==y||(p=n/(d.getLayout().x+l+f),v=a/(h.depth-1||1),XO(u,(function(e){m=(e.getLayout().x+f)*p,g="TB"===y?(e.depth-1)*v:a-(e.depth-1)*v,e.setLayout({x:m,y:g},!0)})))}}}(e,t)}))}function ZO(e){e.eachSeriesByType("tree",(function(e){var t=e.getData();t.tree.eachNode((function(e){var r=e.getModel().getModel("itemStyle").getItemStyle();I(t.ensureUniqueItemVisual(e.dataIndex,"style"),r)}))}))}function QO(e,t,r){if(e&&E(t,e.type)>=0){var i=r.getData().tree.root,n=e.targetNode;if("string"===typeof n&&(n=i.getNodeById(n)),n&&i.contains(n))return{node:n};var a=e.targetNodeId;if(null!=a&&(n=i.getNodeById(a)))return{node:n}}}function $O(e){for(var t=[];e;)(e=e.parentNode)&&t.push(e);return t.reverse()}function JO(e,t){return E($O(e),t)>=0}function eT(e,t){for(var r=[];e;){var i=e.dataIndex;r.push({name:e.name,dataIndex:i,value:t.getRawValue(i)}),e=e.parentNode}return r.reverse(),r}var tT=function(){},rT=["treemapZoomToNode","treemapRender","treemapMove"];function iT(e){var t=e.getData().tree,r={};t.eachNode((function(t){for(var i=t;i&&i.depth>1;)i=i.parentNode;var n=ml(e.ecModel,i.name||i.dataIndex+"",r);t.setVisual("decal",n)}))}function nT(e){var t=0;L(e.children,(function(e){nT(e);var r=e.value;j(r)&&(r=r[0]),t+=r}));var r=e.value;j(r)&&(r=r[0]),(null==r||isNaN(r))&&(r=t),r<0&&(r=0),j(e.value)?e.value[0]=r:e.value=r}var aT=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return r.type=t.type,r.preventUsingHoverLayer=!0,r}return a(t,e),t.prototype.getInitialData=function(e,t){var r={name:e.name,children:e.data};nT(r);var i=e.levels||[],n=this.designatedVisualItemStyle={},a=new Md({itemStyle:n},this,t),s=B((i=e.levels=function(e,t){var r,i,n=tn(t.get("color")),a=tn(t.get(["aria","decal","decals"]));if(!n)return;L(e=e||[],(function(e){var t=new Md(e),n=t.get("color"),a=t.get("decal");(t.get(["itemStyle","color"])||n&&"none"!==n)&&(r=!0),(t.get(["itemStyle","decal"])||a&&"none"!==a)&&(i=!0)}));var s=e[0]||(e[0]={});r||(s.color=n.slice());!i&&a&&(s.decal=a.slice());return e}(i,t))||[],(function(e){return new Md(e,a,t)}),this),o=WO.createTree(r,this,(function(e){e.wrapMethod("getItemModel",(function(e,t){var r=o.getNodeByDataIndex(t),i=s[r.depth];return e.parentModel=i||a,e}))}));return o.data},t.prototype.optionUpdated=function(){this.resetViewRoot()},t.prototype.formatTooltip=function(e,t,r){var i=this.getData(),n=this.getRawValue(e);return Jf("nameValue",{name:i.getName(e),value:n})},t.prototype.getDataParams=function(t){var r=e.prototype.getDataParams.apply(this,arguments),i=this.getData().tree.getNodeByDataIndex(t);return r.treePathInfo=eT(i,this),r},t.prototype.setLayoutInfo=function(e){this.layoutInfo=this.layoutInfo||{},I(this.layoutInfo,e)},t.prototype.mapIdToIndex=function(e){var t=this._idIndexMap;t||(t=this._idIndexMap=ce(),this._idIndexMapCount=0);var r=t.get(e);return null==r&&t.set(e,r=this._idIndexMapCount++),r},t.prototype.getViewRoot=function(){return this._viewRoot},t.prototype.resetViewRoot=function(e){e?this._viewRoot=e:e=this._viewRoot;var t=this.getRawData().tree.root;e&&(e===t||t.contains(e))||(this._viewRoot=t)},t.prototype.enableAriaDecal=function(){iT(this)},t.type="series.treemap",t.layoutMode="box",t.defaultOption={progressive:0,left:"center",top:"middle",width:"80%",height:"80%",sort:!0,clipWindow:"origin",squareRatio:.5*(1+Math.sqrt(5)),leafDepth:null,drillDownIcon:"\u25b6",zoomToNodeRatio:.1024,roam:!0,nodeClick:"zoomToNode",animation:!0,animationDurationUpdate:900,animationEasing:"quinticInOut",breadcrumb:{show:!0,height:22,left:"center",top:"bottom",emptyItemWidth:25,itemStyle:{color:"rgba(0,0,0,0.7)",textStyle:{color:"#fff"}}},label:{show:!0,distance:0,padding:5,position:"inside",color:"#fff",overflow:"truncate"},upperLabel:{show:!1,position:[0,"50%"],height:20,overflow:"truncate",verticalAlign:"middle"},itemStyle:{color:null,colorAlpha:null,colorSaturation:null,borderWidth:0,gapWidth:0,borderColor:"#fff",borderColorSaturation:null},emphasis:{upperLabel:{show:!0,position:[0,"50%"],ellipsis:!0,verticalAlign:"middle"}},visualDimension:0,visualMin:null,visualMax:null,color:[],colorAlpha:null,colorSaturation:null,colorMappingBy:"index",visibleMin:10,childrenVisibleMin:null,levels:[]},t}(xp);function sT(e,t,r,i,n,a){var s=[[n?e:e-5,t],[e+r,t],[e+r,t+i],[n?e:e-5,t+i]];return!a&&s.splice(2,0,[e+r+5,t+i/2]),!n&&s.push([e,t+i/2]),s}function oT(e,t,r){ao(e).eventData={componentType:"series",componentSubType:"treemap",componentIndex:t.componentIndex,seriesIndex:t.componentIndex,seriesName:t.name,seriesType:"treemap",selfType:"breadcrumb",nodeData:{dataIndex:r&&r.dataIndex,name:r&&r.name},treePathInfo:r&&eT(r,t)}}var uT=function(){function e(e){this.group=new Ti,e.add(this.group)}return e.prototype.render=function(e,t,r,i){var n=e.getModel("breadcrumb"),a=this.group;if(a.removeAll(),n.get("show")&&r){var s=n.getModel("itemStyle"),o=s.getModel("textStyle"),u={pos:{left:n.get("left"),right:n.get("right"),top:n.get("top"),bottom:n.get("bottom")},box:{width:t.getWidth(),height:t.getHeight()},emptyItemWidth:n.get("emptyItemWidth"),totalWidth:0,renderList:[]};this._prepare(r,u,o),this._renderContent(e,u,s,o,i),Dh(a,u.pos,u.box)}},e.prototype._prepare=function(e,t,r){for(var i=e;i;i=i.parentNode){var n=cn(i.getModel().get("name"),""),a=r.getTextRect(n),s=Math.max(a.width+16,t.emptyItemWidth);t.totalWidth+=s+8,t.renderList.push({node:i,text:n,width:s})}},e.prototype._renderContent=function(e,t,r,i,n){for(var a=0,s=t.emptyItemWidth,o=e.get(["breadcrumb","height"]),u=function(e,t,r){var i=t.width,n=t.height,a=Di(e.left,i),s=Di(e.top,n),o=Di(e.right,i),u=Di(e.bottom,n);return(isNaN(a)||isNaN(parseFloat(e.left)))&&(a=0),(isNaN(o)||isNaN(parseFloat(e.right)))&&(o=i),(isNaN(s)||isNaN(parseFloat(e.top)))&&(s=0),(isNaN(u)||isNaN(parseFloat(e.bottom)))&&(u=n),r=yh(r||0),{width:Math.max(o-a-r[1]-r[3],0),height:Math.max(u-s-r[0]-r[2],0)}}(t.pos,t.box),c=t.totalWidth,d=t.renderList,h=d.length-1;h>=0;h--){var l=d[h],f=l.node,p=l.width,v=l.text;c>u.width&&(c-=p-s,p=s,v=null);var m=new Zu({shape:{points:sT(a,0,p,o,h===d.length-1,0===h)},style:M(r.getItemStyle(),{lineJoin:"bevel"}),textContent:new no({style:{text:v,fill:i.getTextColor(),font:i.getFont()}}),textConfig:{position:"inside"},z2:1e5,onclick:q(n,f)});m.disableLabelAnimation=!0,this.group.add(m),oT(m,e,f),a+=p+8}},e.prototype.remove=function(){this.group.removeAll()},e}(),cT=function(){function e(){this._storage=[],this._elExistsMap={}}return e.prototype.add=function(e,t,r,i,n){return!this._elExistsMap[e.id]&&(this._elExistsMap[e.id]=!0,this._storage.push({el:e,target:t,duration:r,delay:i,easing:n}),!0)},e.prototype.finished=function(e){return this._finishedCallback=e,this},e.prototype.start=function(){for(var e=this,t=this._storage.length,r=function(){--t<=0&&(e._storage.length=0,e._elExistsMap={},e._finishedCallback&&e._finishedCallback())},i=0,n=this._storage.length;i<n;i++){var a=this._storage[i];a.el.animateTo(a.target,{duration:a.duration,delay:a.delay,easing:a.easing,setToFinal:!0,done:r,aborted:r})}return this},e}();var dT=Ti,hT=Ks,lT="label",fT="upperLabel",pT=Pn([["fill","color"],["stroke","strokeColor"],["lineWidth","strokeWidth"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),vT=function(e){var t=pT(e);return t.stroke=t.fill=t.lineWidth=null,t},mT=fn();var gT=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return r.type=t.type,r._state="ready",r._storage={nodeGroup:[],background:[],content:[]},r}return a(t,e),t.prototype.render=function(e,t,r,i){if(!(E(t.findComponents({mainType:"series",subType:"treemap",query:i}),e)<0)){this.seriesModel=e,this.api=r,this.ecModel=t;var n=QO(i,["treemapZoomToNode","treemapRootToNode"],e),a=i&&i.type,s=e.layoutInfo,o=!this._oldTree,u=this._storage,c="treemapRootToNode"===a&&n&&u?{rootNodeGroup:u.nodeGroup[n.node.getRawIndex()],direction:i.direction}:null,d=this._giveContainerGroup(s),h=this._doRender(d,e,c);o||a&&"treemapZoomToNode"!==a&&"treemapRootToNode"!==a?h.renderFinally():this._doAnimation(d,h,e,c),this._resetController(r),this._renderBreadcrumb(e,r,n)}},t.prototype._giveContainerGroup=function(e){var t=this._containerGroup;return t||(t=this._containerGroup=new dT,this._initEvents(t),this.group.add(t)),t.x=e.x,t.y=e.y,t},t.prototype._doRender=function(e,t,r){var i=t.getData().tree,n=this._oldTree,a={nodeGroup:[],background:[],content:[]},s={nodeGroup:[],background:[],content:[]},o=this._storage,u=[];function c(e,i,n,c){return function(e,t,r,i,n,a,s,o,u,c){if(!s)return;var d=s.getLayout(),h=e.getData(),l=s.getModel();if(h.setItemGraphicEl(s.dataIndex,null),!d||!d.isInView)return;var f=d.width,p=d.height,v=d.borderWidth,m=d.invisible,g=s.getRawIndex(),y=o&&o.getRawIndex(),b=s.viewChildren,x=d.upperHeight,k=b&&b.length,w=l.getModel("itemStyle"),_=l.getModel(["emphasis","itemStyle"]),S=l.getModel(["blur","itemStyle"]),O=l.getModel(["select","itemStyle"]),T=w.get("borderRadius")||0,C=G("nodeGroup",dT);if(!C)return;if(u.add(C),C.x=d.x||0,C.y=d.y||0,C.markRedraw(),mT(C).nodeWidth=f,mT(C).nodeHeight=p,d.isAboveViewRoot)return C;var M=G("background",hT,c,20);M&&D(C,M,k&&d.upperLabelHeight);var A=l.get(["emphasis","focus"]),E=l.get(["emphasis","blurScope"]),N="ancestor"===A?s.getAncestorsIndices():"descendant"===A?s.getDescendantIndices():A;if(k)eu(C)&&Jo(C,!1),M&&(Jo(M,!0),h.setItemGraphicEl(s.dataIndex,M),Yo(M,N,E));else{var P=G("content",hT,c,30);P&&L(C,P),M&&eu(M)&&Jo(M,!1),Jo(C,!0),h.setItemGraphicEl(s.dataIndex,C),Yo(C,N,E)}return C;function D(t,r,i){var n=ao(r);if(n.dataIndex=s.dataIndex,n.seriesIndex=e.seriesIndex,r.setShape({x:0,y:0,width:f,height:p,r:T}),m)B(r);else{r.invisible=!1;var a=s.getVisual("style"),o=a.stroke,u=vT(w);u.fill=o;var c=pT(_);c.fill=_.get("borderColor");var d=pT(S);d.fill=S.get("borderColor");var h=pT(O);if(h.fill=O.get("borderColor"),i){var l=f-2*v;R(r,o,a.opacity,{x:v,y:0,width:l,height:x})}else r.removeTextContent();r.setStyle(u),r.ensureState("emphasis").style=c,r.ensureState("blur").style=d,r.ensureState("select").style=h,No(r)}t.add(r)}function L(t,r){var i=ao(r);i.dataIndex=s.dataIndex,i.seriesIndex=e.seriesIndex;var n=Math.max(f-2*v,0),a=Math.max(p-2*v,0);if(r.culling=!0,r.setShape({x:v,y:v,width:n,height:a,r:T}),m)B(r);else{r.invisible=!1;var o=s.getVisual("style"),u=o.fill,c=vT(w);c.fill=u,c.decal=o.decal;var d=pT(_),h=pT(S),l=pT(O);R(r,u,o.opacity,null),r.setStyle(c),r.ensureState("emphasis").style=d,r.ensureState("blur").style=h,r.ensureState("select").style=l,No(r)}t.add(r)}function B(e){!e.invisible&&a.push(e)}function R(t,r,i,n){var a=l.getModel(n?fT:lT),o=cn(l.get("name"),null),u=a.getShallow("show");od(t,ud(l,n?fT:lT),{defaultText:u?o:null,inheritColor:r,defaultOpacity:i,labelFetcher:e,labelDataIndex:s.dataIndex});var c=t.getTextContent(),h=c.style,f=re(h.padding||0);n&&(t.setTextConfig({layoutRect:n}),c.disableLabelLayout=!0),c.beforeUpdate=function(){var e=Math.max((n?n.width:t.shape.width)-f[1]-f[3],0),r=Math.max((n?n.height:t.shape.height)-f[0]-f[2],0);h.width===e&&h.height===r||c.setStyle({width:e,height:r})},h.truncateMinChar=2,h.lineOverflow="truncate",V(h,n,d);var p=c.getState("emphasis");V(p?p.style:null,n,d)}function V(t,r,i){var n=t?t.text:null;if(!r&&i.isLeafRoot&&null!=n){var a=e.get("drillDownIcon",!0);t.text=a?a+" "+n:n}}function G(e,i,a,s){var o=null!=y&&r[e][y],u=n[e];return o?(r[e][y]=null,F(u,o)):m||((o=new i)instanceof sa&&(o.z2=function(e,t){return 100*e+t}(a,s)),q(u,o)),t[e][g]=o}function F(e,t){var r=e[g]={};t instanceof dT?(r.oldX=t.x,r.oldY=t.y):r.oldShape=I({},t.shape)}function q(e,t){var r=e[g]={},a=s.parentNode,o=t instanceof Ti;if(a&&(!i||"drillDown"===i.direction)){var u=0,c=0,d=n.background[a.getRawIndex()];!i&&d&&d.oldShape&&(u=d.oldShape.width,c=d.oldShape.height),o?(r.oldX=0,r.oldY=c):r.oldShape={x:u,y:c,width:0,height:0}}r.fadein=!o}}(t,s,o,r,a,u,e,i,n,c)}!function e(t,r,i,n,a){n?(r=t,L(t,(function(e,t){!e.isRemoved()&&o(t,t)}))):new Kb(r,t,s,s).add(o).update(o).remove(q(o,null)).execute();function s(e){return e.getId()}function o(s,o){var u=null!=s?t[s]:null,d=null!=o?r[o]:null,h=c(u,d,i,a);h&&e(u&&u.viewChildren||[],d&&d.viewChildren||[],h,n,a+1)}}(i.root?[i.root]:[],n&&n.root?[n.root]:[],e,i===n||!n,0);var d=function(e){var t={nodeGroup:[],background:[],content:[]};return e&&L(e,(function(e,r){var i=t[r];L(e,(function(e){e&&(i.push(e),mT(e).willDelete=!0)}))})),t}(o);return this._oldTree=i,this._storage=s,{lastsForAnimation:a,willDeleteEls:d,renderFinally:function(){L(d,(function(e){L(e,(function(e){e.parent&&e.parent.remove(e)}))})),L(u,(function(e){e.invisible=!0,e.dirty()}))}}},t.prototype._doAnimation=function(e,t,r,i){if(r.get("animation")){var n=r.get("animationDurationUpdate"),a=r.get("animationEasing"),s=(z(n)?0:n)||0,o=(z(a)?null:a)||"cubicOut",u=new cT;L(t.willDeleteEls,(function(e,t){L(e,(function(e,r){if(!e.invisible){var n,a=e.parent,c=mT(a);if(i&&"drillDown"===i.direction)n=a===i.rootNodeGroup?{shape:{x:0,y:0,width:c.nodeWidth,height:c.nodeHeight},style:{opacity:0}}:{style:{opacity:0}};else{var d=0,h=0;c.willDelete||(d=c.nodeWidth/2,h=c.nodeHeight/2),n="nodeGroup"===t?{x:d,y:h,style:{opacity:0}}:{shape:{x:d,y:h,width:0,height:0},style:{opacity:0}}}n&&u.add(e,n,s,0,o)}}))})),L(this._storage,(function(e,r){L(e,(function(e,i){var n=t.lastsForAnimation[r][i],a={};n&&(e instanceof Ti?null!=n.oldX&&(a.x=e.x,a.y=e.y,e.x=n.oldX,e.y=n.oldY):(n.oldShape&&(a.shape=I({},e.shape),e.setShape(n.oldShape)),n.fadein?(e.setStyle("opacity",0),a.style={opacity:1}):1!==e.style.opacity&&(a.style={opacity:1})),u.add(e,a,s,0,o))}))}),this),this._state="animating",u.finished(F((function(){this._state="ready",t.renderFinally()}),this)).start()}},t.prototype._resetController=function(e){var t=this._controller;t||((t=this._controller=new FS(e.getZr())).enable(this.seriesModel.get("roam")),t.on("pan",F(this._onPan,this)),t.on("zoom",F(this._onZoom,this)));var r=new _r(0,0,e.getWidth(),e.getHeight());t.setPointerChecker((function(e,t,i){return r.contain(t,i)}))},t.prototype._clearController=function(){var e=this._controller;e&&(e.dispose(),e=null)},t.prototype._onPan=function(e){if("animating"!==this._state&&(Math.abs(e.dx)>3||Math.abs(e.dy)>3)){var t=this.seriesModel.getData().tree.root;if(!t)return;var r=t.getLayout();if(!r)return;this.api.dispatchAction({type:"treemapMove",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:r.x+e.dx,y:r.y+e.dy,width:r.width,height:r.height}})}},t.prototype._onZoom=function(e){var t=e.originX,r=e.originY;if("animating"!==this._state){var i=this.seriesModel.getData().tree.root;if(!i)return;var n=i.getLayout();if(!n)return;var a=new _r(n.x,n.y,n.width,n.height),s=this.seriesModel.layoutInfo,o=[1,0,0,1,0,0];ft(o,o,[-(t-=s.x),-(r-=s.y)]),vt(o,o,[e.scale,e.scale]),ft(o,o,[t,r]),a.applyTransform(o),this.api.dispatchAction({type:"treemapRender",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:a.x,y:a.y,width:a.width,height:a.height}})}},t.prototype._initEvents=function(e){var t=this;e.on("click",(function(e){if("ready"===t._state){var r=t.seriesModel.get("nodeClick",!0);if(r){var i=t.findTarget(e.offsetX,e.offsetY);if(i){var n=i.node;if(n.getLayout().isLeafRoot)t._rootToNode(i);else if("zoomToNode"===r)t._zoomToNode(i);else if("link"===r){var a=n.hostTree.data.getItemModel(n.dataIndex),s=a.get("link",!0),o=a.get("target",!0)||"blank";s&&Ch(s,o)}}}}}),this)},t.prototype._renderBreadcrumb=function(e,t,r){var i=this;r||(r=null!=e.get("leafDepth",!0)?{node:e.getViewRoot()}:this.findTarget(t.getWidth()/2,t.getHeight()/2))||(r={node:e.getData().tree.root}),(this._breadcrumb||(this._breadcrumb=new uT(this.group))).render(e,t,r.node,(function(t){"animating"!==i._state&&(JO(e.getViewRoot(),t)?i._rootToNode({node:t}):i._zoomToNode({node:t}))}))},t.prototype.remove=function(){this._clearController(),this._containerGroup&&this._containerGroup.removeAll(),this._storage={nodeGroup:[],background:[],content:[]},this._state="ready",this._breadcrumb&&this._breadcrumb.remove()},t.prototype.dispose=function(){this._clearController()},t.prototype._zoomToNode=function(e){this.api.dispatchAction({type:"treemapZoomToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:e.node})},t.prototype._rootToNode=function(e){this.api.dispatchAction({type:"treemapRootToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:e.node})},t.prototype.findTarget=function(e,t){var r;return this.seriesModel.getViewRoot().eachNode({attr:"viewChildren",order:"preorder"},(function(i){var n=this._storage.background[i.getRawIndex()];if(n){var a=n.transformCoordToLocal(e,t),s=n.shape;if(!(s.x<=a[0]&&a[0]<=s.x+s.width&&s.y<=a[1]&&a[1]<=s.y+s.height))return!1;r={node:i,offsetX:a[0],offsetY:a[1]}}}),this),r},t.type="treemap",t}(Np),yT=L,bT=K,xT=-1,kT=function(){function e(t){var r=t.mappingMethod,i=t.type,n=this.option=O(t);this.type=i,this.mappingMethod=r,this._normalizeData=ET[r];var a=e.visualHandlers[i];this.applyVisual=a.applyVisual,this.getColorMapper=a.getColorMapper,this._normalizedToVisual=a._normalizedToVisual[r],"piecewise"===r?(wT(n),function(e){var t=e.pieceList;e.hasSpecialVisual=!1,L(t,(function(t,r){t.originIndex=r,null!=t.visual&&(e.hasSpecialVisual=!0)}))}(n)):"category"===r?n.categories?function(e){var t=e.categories,r=e.categoryMap={},i=e.visual;if(yT(t,(function(e,t){r[e]=t})),!j(i)){var n=[];K(i)?yT(i,(function(e,t){var i=r[t];n[null!=i?i:xT]=e})):n[-1]=i,i=AT(e,n)}for(var a=t.length-1;a>=0;a--)null==i[a]&&(delete r[t[a]],t.pop())}(n):wT(n,!0):(ie("linear"!==r||n.dataExtent),wT(n))}return e.prototype.mapValueToVisual=function(e){var t=this._normalizeData(e);return this._normalizedToVisual(t,e)},e.prototype.getNormalizer=function(){return F(this._normalizeData,this)},e.listVisualTypes=function(){return G(e.visualHandlers)},e.isValidType=function(t){return e.visualHandlers.hasOwnProperty(t)},e.eachVisual=function(e,t,r){K(e)?L(e,t,r):t.call(r,e)},e.mapVisual=function(t,r,i){var n,a=j(t)?[]:K(t)?{}:(n=!0,null);return e.eachVisual(t,(function(e,t){var s=r.call(i,e,t);n?a=s:a[t]=s})),a},e.retrieveVisuals=function(t){var r,i={};return t&&yT(e.visualHandlers,(function(e,n){t.hasOwnProperty(n)&&(i[n]=t[n],r=!0)})),r?i:null},e.prepareVisualTypes=function(e){if(j(e))e=e.slice();else{if(!bT(e))return[];var t=[];yT(e,(function(e,r){t.push(r)})),e=t}return e.sort((function(e,t){return"color"===t&&"color"!==e&&0===e.indexOf("color")?1:-1})),e},e.dependsOn=function(e,t){return"color"===t?!(!e||0!==e.indexOf(t)):e===t},e.findPieceIndex=function(e,t,r){for(var i,n=1/0,a=0,s=t.length;a<s;a++){var o=t[a].value;if(null!=o){if(o===e||"string"===typeof o&&o===e+"")return a;r&&h(o,a)}}for(a=0,s=t.length;a<s;a++){var u=t[a],c=u.interval,d=u.close;if(c){if(c[0]===-1/0){if(NT(d[1],e,c[1]))return a}else if(c[1]===1/0){if(NT(d[0],c[0],e))return a}else if(NT(d[0],c[0],e)&&NT(d[1],e,c[1]))return a;r&&h(c[0],a),r&&h(c[1],a)}}if(r)return e===1/0?t.length-1:e===-1/0?0:i;function h(t,r){var a=Math.abs(t-e);a<n&&(n=a,i=r)}},e.visualHandlers={color:{applyVisual:OT("color"),getColorMapper:function(){var e=this.option;return F("category"===e.mappingMethod?function(e,t){return!t&&(e=this._normalizeData(e)),TT.call(this,e)}:function(t,r,i){var n=!!i;return!r&&(t=this._normalizeData(t)),i=Kt(t,e.parsedVisual,i),n?i:Zt(i,"rgba")},this)},_normalizedToVisual:{linear:function(e){return Zt(Kt(e,this.option.parsedVisual),"rgba")},category:TT,piecewise:function(e,t){var r=MT.call(this,t);return null==r&&(r=Zt(Kt(e,this.option.parsedVisual),"rgba")),r},fixed:CT}},colorHue:_T((function(e,t){return Xt(e,t)})),colorSaturation:_T((function(e,t){return Xt(e,null,t)})),colorLightness:_T((function(e,t){return Xt(e,null,null,t)})),colorAlpha:_T((function(e,t){return Yt(e,t)})),decal:{applyVisual:OT("decal"),_normalizedToVisual:{linear:null,category:TT,piecewise:null,fixed:null}},opacity:{applyVisual:OT("opacity"),_normalizedToVisual:IT([0,1])},liftZ:{applyVisual:OT("liftZ"),_normalizedToVisual:{linear:CT,category:CT,piecewise:CT,fixed:CT}},symbol:{applyVisual:function(e,t,r){r("symbol",this.mapValueToVisual(e))},_normalizedToVisual:{linear:ST,category:TT,piecewise:function(e,t){var r=MT.call(this,t);return null==r&&(r=ST.call(this,e)),r},fixed:CT}},symbolSize:{applyVisual:OT("symbolSize"),_normalizedToVisual:IT([0,1])}},e}();function wT(e,t){var r=e.visual,i=[];K(r)?yT(r,(function(e){i.push(e)})):null!=r&&i.push(r);t||1!==i.length||{color:1,symbol:1}.hasOwnProperty(e.type)||(i[1]=i[0]),AT(e,i)}function _T(e){return{applyVisual:function(t,r,i){var n=this.mapValueToVisual(t);i("color",e(r("color"),n))},_normalizedToVisual:IT([0,1])}}function ST(e){var t=this.option.visual;return t[Math.round(Pi(e,[0,1],[0,t.length-1],!0))]||{}}function OT(e){return function(t,r,i){i(e,this.mapValueToVisual(t))}}function TT(e){var t=this.option.visual;return t[this.option.loop&&e!==xT?e%t.length:e]}function CT(){return this.option.visual[0]}function IT(e){return{linear:function(t){return Pi(t,e,this.option.visual,!0)},category:TT,piecewise:function(t,r){var i=MT.call(this,r);return null==i&&(i=Pi(t,e,this.option.visual,!0)),i},fixed:CT}}function MT(e){var t=this.option,r=t.pieceList;if(t.hasSpecialVisual){var i=r[kT.findPieceIndex(e,r)];if(i&&i.visual)return i.visual[this.type]}}function AT(e,t){return e.visual=t,"color"===e.type&&(e.parsedVisual=B(t,(function(e){return zt(e)}))),t}var ET={linear:function(e){return Pi(e,this.option.dataExtent,[0,1],!0)},piecewise:function(e){var t=this.option.pieceList,r=kT.findPieceIndex(e,t,!0);if(null!=r)return Pi(r,[0,t.length-1],[0,1],!0)},category:function(e){var t=this.option.categories?this.option.categoryMap[e]:e;return null==t?xT:t},fixed:fe};function NT(e,t,r){return e?t<=r:t<r}var PT=kT,DT=fn(),LT={seriesType:"treemap",reset:function(e){var t=e.getData().tree.root;t.isRemoved()||BT(t,{},e.getViewRoot().getAncestors(),e)}};function BT(e,t,r,i){var n=e.getModel(),a=e.getLayout(),s=e.hostTree.data;if(a&&!a.invisible&&a.isInView){var o,u=n.getModel("itemStyle"),c=function(e,t,r){var i=I({},t),n=r.designatedVisualItemStyle;return L(["color","colorAlpha","colorSaturation"],(function(r){n[r]=t[r];var a=e.get(r);n[r]=null,null!=a&&(i[r]=a)})),i}(u,t,i),d=s.ensureUniqueItemVisual(e.dataIndex,"style"),h=u.get("borderColor"),l=u.get("borderColorSaturation");null!=l&&(h=function(e,t){return null!=t?Xt(t,null,null,e):null}(l,o=RT(c))),d.stroke=h;var f=e.viewChildren;if(f&&f.length){var p=function(e,t,r,i,n,a){if(!a||!a.length)return;var s=GT(t,"color")||null!=n.color&&"none"!==n.color&&(GT(t,"colorAlpha")||GT(t,"colorSaturation"));if(!s)return;var o=t.get("visualMin"),u=t.get("visualMax"),c=r.dataExtent.slice();null!=o&&o<c[0]&&(c[0]=o),null!=u&&u>c[1]&&(c[1]=u);var d=t.get("colorMappingBy"),h={type:s.name,dataExtent:c,visual:s.range};"color"!==h.type||"index"!==d&&"id"!==d?h.mappingMethod="linear":(h.mappingMethod="category",h.loop=!0);var l=new PT(h);return DT(l).drColorMappingBy=d,l}(0,n,a,0,c,f);L(f,(function(e,t){if(e.depth>=r.length||e===r[e.depth]){var a=function(e,t,r,i,n,a){var s=I({},t);if(n){var o=n.type,u="color"===o&&DT(n).drColorMappingBy,c="index"===u?i:"id"===u?a.mapIdToIndex(r.getId()):r.getValue(e.get("visualDimension"));s[o]=n.mapValueToVisual(c)}return s}(n,c,e,t,p,i);BT(e,a,r,i)}}))}else o=RT(c),d.fill=o}}function RT(e){var t=VT(e,"color");if(t){var r=VT(e,"colorAlpha"),i=VT(e,"colorSaturation");return i&&(t=Xt(t,null,null,i)),r&&(t=Yt(t,r)),t}}function VT(e,t){var r=e[t];if(null!=r&&"none"!==r)return r}function GT(e,t){var r=e.get(t);return j(r)&&r.length?{name:t,range:r}:null}var FT=Math.max,qT=Math.min,jT=$,zT=L,HT=["itemStyle","borderWidth"],UT=["itemStyle","gapWidth"],WT=["upperLabel","show"],KT=["upperLabel","height"],XT={seriesType:"treemap",reset:function(e,t,r,i){var n=r.getWidth(),a=r.getHeight(),s=e.option,o=Ph(e.getBoxLayoutParams(),{width:r.getWidth(),height:r.getHeight()}),u=s.size||[],c=Di(jT(o.width,u[0]),n),d=Di(jT(o.height,u[1]),a),h=i&&i.type,l=QO(i,["treemapZoomToNode","treemapRootToNode"],e),f="treemapRender"===h||"treemapMove"===h?i.rootRect:null,p=e.getViewRoot(),v=$O(p);if("treemapMove"!==h){var m="treemapZoomToNode"===h?function(e,t,r,i,n){var a,s=(t||{}).node,o=[i,n];if(!s||s===r)return o;var u=i*n,c=u*e.option.zoomToNodeRatio;for(;a=s.parentNode;){for(var d=0,h=a.children,l=0,f=h.length;l<f;l++)d+=h[l].getValue();var p=s.getValue();if(0===p)return o;c*=d/p;var v=a.getModel(),m=v.get(HT);(c+=4*m*m+(3*m+Math.max(m,JT(v)))*Math.pow(c,.5))>Gi&&(c=Gi),s=a}c<u&&(c=u);var g=Math.pow(c/u,.5);return[i*g,n*g]}(e,l,p,c,d):f?[f.width,f.height]:[c,d],g=s.sort;g&&"asc"!==g&&"desc"!==g&&(g="desc");var y={squareRatio:s.squareRatio,sort:g,leafDepth:s.leafDepth};p.hostTree.clearLayouts();var b={x:0,y:0,width:m[0],height:m[1],area:m[0]*m[1]};p.setLayout(b),YT(p,y,!1,0),b=p.getLayout(),zT(v,(function(e,t){var r=(v[t+1]||p).getValue();e.setLayout(I({dataExtent:[r,r],borderWidth:0,upperHeight:0},b))}))}var x=e.getData().tree.root;x.setLayout(function(e,t,r){if(t)return{x:t.x,y:t.y};var i={x:0,y:0};if(!r)return i;var n=r.node,a=n.getLayout();if(!a)return i;var s=[a.width/2,a.height/2],o=n;for(;o;){var u=o.getLayout();s[0]+=u.x,s[1]+=u.y,o=o.parentNode}return{x:e.width/2-s[0],y:e.height/2-s[1]}}(o,f,l),!0),e.setLayoutInfo(o),$T(x,new _r(-o.x,-o.y,n,a),v,p,0)}};function YT(e,t,r,i){var n,a;if(!e.isRemoved()){var s=e.getLayout();n=s.width,a=s.height;var o=e.getModel(),u=o.get(HT),c=o.get(UT)/2,d=JT(o),h=Math.max(u,d),l=u-c,f=h-c;e.setLayout({borderWidth:u,upperHeight:h,upperLabelHeight:d},!0);var p=(n=FT(n-2*l,0))*(a=FT(a-l-f,0)),v=function(e,t,r,i,n,a){var s=e.children||[],o=i.sort;"asc"!==o&&"desc"!==o&&(o=null);var u=null!=i.leafDepth&&i.leafDepth<=a;if(n&&!u)return e.viewChildren=[];!function(e,t){t&&e.sort((function(e,r){var i="asc"===t?e.getValue()-r.getValue():r.getValue()-e.getValue();return 0===i?"asc"===t?e.dataIndex-r.dataIndex:r.dataIndex-e.dataIndex:i}))}(s=V(s,(function(e){return!e.isRemoved()})),o);var c=function(e,t,r){for(var i=0,n=0,a=t.length;n<a;n++)i+=t[n].getValue();var s,o=e.get("visualDimension");t&&t.length?"value"===o&&r?(s=[t[t.length-1].getValue(),t[0].getValue()],"asc"===r&&s.reverse()):(s=[1/0,-1/0],zT(t,(function(e){var t=e.getValue(o);t<s[0]&&(s[0]=t),t>s[1]&&(s[1]=t)}))):s=[NaN,NaN];return{sum:i,dataExtent:s}}(t,s,o);if(0===c.sum)return e.viewChildren=[];if(c.sum=function(e,t,r,i,n){if(!i)return r;for(var a=e.get("visibleMin"),s=n.length,o=s,u=s-1;u>=0;u--){var c=n["asc"===i?s-u-1:u].getValue();c/r*t<a&&(o=u,r-=c)}return"asc"===i?n.splice(0,s-o):n.splice(o,s-o),r}(t,r,c.sum,o,s),0===c.sum)return e.viewChildren=[];for(var d=0,h=s.length;d<h;d++){var l=s[d].getValue()/c.sum*r;s[d].setLayout({area:l})}u&&(s.length&&e.setLayout({isLeafRoot:!0},!0),s.length=0);return e.viewChildren=s,e.setLayout({dataExtent:c.dataExtent},!0),s}(e,o,p,t,r,i);if(v.length){var m={x:l,y:f,width:n,height:a},g=qT(n,a),y=1/0,b=[];b.area=0;for(var x=0,k=v.length;x<k;){var w=v[x];b.push(w),b.area+=w.getLayout().area;var _=ZT(b,g,t.squareRatio);_<=y?(x++,y=_):(b.area-=b.pop().getLayout().area,QT(b,g,m,c,!1),g=qT(m.width,m.height),b.length=b.area=0,y=1/0)}if(b.length&&QT(b,g,m,c,!0),!r){var S=o.get("childrenVisibleMin");null!=S&&p<S&&(r=!0)}for(x=0,k=v.length;x<k;x++)YT(v[x],t,r,i+1)}}}function ZT(e,t,r){for(var i=0,n=1/0,a=0,s=void 0,o=e.length;a<o;a++)(s=e[a].getLayout().area)&&(s<n&&(n=s),s>i&&(i=s));var u=e.area*e.area,c=t*t*r;return u?FT(c*i/u,u/(c*n)):1/0}function QT(e,t,r,i,n){var a=t===r.width?0:1,s=1-a,o=["x","y"],u=["width","height"],c=r[o[a]],d=t?e.area/t:0;(n||d>r[u[s]])&&(d=r[u[s]]);for(var h=0,l=e.length;h<l;h++){var f=e[h],p={},v=d?f.getLayout().area/d:0,m=p[u[s]]=FT(d-2*i,0),g=r[o[a]]+r[u[a]]-c,y=h===l-1||g<v?g:v,b=p[u[a]]=FT(y-2*i,0);p[o[s]]=r[o[s]]+qT(i,m/2),p[o[a]]=c+qT(i,b/2),c+=y,f.setLayout(p,!0)}r[o[s]]+=d,r[u[s]]-=d}function $T(e,t,r,i,n){var a=e.getLayout(),s=r[n],o=s&&s===e;if(!(s&&!o||n===r.length&&e!==i)){e.setLayout({isInView:!0,invisible:!o&&!t.intersect(a),isAboveViewRoot:o},!0);var u=new _r(t.x-a.x,t.y-a.y,t.width,t.height);zT(e.viewChildren||[],(function(e){$T(e,u,r,i,n+1)}))}}function JT(e){return e.get(WT)?e.get(KT):0}function eC(e){var t=e.findComponents({mainType:"legend"});t&&t.length&&e.eachSeriesByType("graph",(function(e){var r=e.getCategoriesData(),i=e.getGraph().data,n=r.mapArray(r.getName);i.filterSelf((function(e){var r=i.getItemModel(e).getShallow("category");if(null!=r){"number"===typeof r&&(r=n[r]);for(var a=0;a<t.length;a++)if(!t[a].isSelected(r))return!1}return!0}))}))}function tC(e){var t={};e.eachSeriesByType("graph",(function(e){var r=e.getCategoriesData(),i=e.getData(),n={};r.each((function(i){var a=r.getName(i);n["ec-"+a]=i;var s=r.getItemModel(i),o=s.getModel("itemStyle").getItemStyle();o.fill||(o.fill=e.getColorFromPalette(a,t)),r.setItemVisual(i,"style",o);for(var u=["symbol","symbolSize","symbolKeepAspect"],c=0;c<u.length;c++){var d=s.getShallow(u[c],!0);null!=d&&r.setItemVisual(i,u[c],d)}})),r.count()&&i.each((function(e){var t=i.getItemModel(e).getShallow("category");if(null!=t){"string"===typeof t&&(t=n["ec-"+t]);var a=r.getItemVisual(t,"style");I(i.ensureUniqueItemVisual(e,"style"),a);for(var s=["symbol","symbolSize","symbolKeepAspect"],o=0;o<s.length;o++)i.setItemVisual(e,s[o],r.getItemVisual(t,s[o]))}}))}))}function rC(e){return e instanceof Array||(e=[e,e]),e}function iC(e){e.eachSeriesByType("graph",(function(e){var t=e.getGraph(),r=e.getEdgeData(),i=rC(e.get("edgeSymbol")),n=rC(e.get("edgeSymbolSize"));r.setVisual("fromSymbol",i&&i[0]),r.setVisual("toSymbol",i&&i[1]),r.setVisual("fromSymbolSize",n&&n[0]),r.setVisual("toSymbolSize",n&&n[1]),r.setVisual("style",e.getModel("lineStyle").getLineStyle()),r.each((function(e){var i=r.getItemModel(e),n=t.getEdgeByIndex(e),a=rC(i.getShallow("symbol",!0)),s=rC(i.getShallow("symbolSize",!0)),o=i.getModel("lineStyle").getLineStyle(),u=r.ensureUniqueItemVisual(e,"style");switch(I(u,o),u.stroke){case"source":var c=n.node1.getVisual("style");u.stroke=c&&c.fill;break;case"target":c=n.node2.getVisual("style");u.stroke=c&&c.fill}a[0]&&n.setVisual("fromSymbol",a[0]),a[1]&&n.setVisual("toSymbol",a[1]),s[0]&&n.setVisual("fromSymbolSize",s[0]),s[1]&&n.setVisual("toSymbolSize",s[1])}))}))}var nC="--\x3e",aC=function(e){return e.get("autoCurveness")||null},sC=function(e,t){var r=aC(e),i=20,n=[];if("number"===typeof r)i=r;else if(j(r))return void(e.__curvenessList=r);t>i&&(i=t);var a=i%2?i+2:i+3;n=[];for(var s=0;s<a;s++)n.push((s%2?s+1:s)/10*(s%2?-1:1));e.__curvenessList=n},oC=function(e,t,r){var i=[e.id,e.dataIndex].join("."),n=[t.id,t.dataIndex].join(".");return[r.uid,i,n].join(nC)},uC=function(e){var t=e.split(nC);return[t[0],t[2],t[1]].join(nC)},cC=function(e,t){var r=t.__edgeMap;return r[e]?r[e].length:0};function dC(e,t,r,i){var n=aC(t),a=j(n);if(!n)return null;var s=function(e,t){var r=oC(e.node1,e.node2,t);return t.__edgeMap[r]}(e,t);if(!s)return null;for(var o=-1,u=0;u<s.length;u++)if(s[u]===r){o=u;break}var c=function(e,t){return cC(oC(e.node1,e.node2,t),t)+cC(oC(e.node2,e.node1,t),t)}(e,t);sC(t,c),e.lineStyle=e.lineStyle||{};var d=oC(e.node1,e.node2,t),h=t.__curvenessList,l=a||c%2?0:1;if(s.isForward)return h[l+o];var f=uC(d),p=cC(f,t),v=h[o+p+l];return i?a?n&&0===n[0]?(p+l)%2?v:-v:((p%2?0:1)+l)%2?v:-v:(p+l)%2?v:-v:h[o+p+l]}function hC(e){var t=e.coordinateSystem;if(!t||"view"===t.type){var r=e.getGraph();r.eachNode((function(e){var t=e.getModel();e.setLayout([+t.get("x"),+t.get("y")])})),lC(r,e)}}function lC(e,t){e.eachEdge((function(e,r){var i=ee(e.getModel().get(["lineStyle","curveness"]),-dC(e,t,r,!0),0),n=ye(e.node1.getLayout()),a=ye(e.node2.getLayout()),s=[n,a];+i&&s.push([(n[0]+a[0])/2-(n[1]-a[1])*i,(n[1]+a[1])/2-(a[0]-n[0])*i]),e.setLayout(s)}))}function fC(e,t){e.eachSeriesByType("graph",(function(e){var t=e.get("layout"),r=e.coordinateSystem;if(r&&"view"!==r.type){var i=e.getData(),n=[];L(r.dimensions,(function(e){n=n.concat(i.mapDimensionsAll(e))}));for(var a=0;a<i.count();a++){for(var s=[],o=!1,u=0;u<n.length;u++){var c=i.get(n[u],a);isNaN(c)||(o=!0),s.push(c)}o?i.setItemLayout(a,r.dataToPoint(s)):i.setItemLayout(a,[NaN,NaN])}lC(i.graph,e)}else t&&"none"!==t||hC(e)}))}function pC(e){var t=e.coordinateSystem;if("view"!==t.type)return 1;var r=e.option.nodeScaleRatio,i=t.scaleX;return((t.getZoom()-1)*r+1)/i}function vC(e){var t=e.getVisual("symbolSize");return t instanceof Array&&(t=(t[0]+t[1])/2),+t}var mC=Math.PI,gC=[];function yC(e,t){var r=e.coordinateSystem;if(!r||"view"===r.type){var i=r.getBoundingRect(),n=e.getData(),a=n.graph,s=i.width/2+i.x,o=i.height/2+i.y,u=Math.min(i.width,i.height)/2,c=n.count();n.setLayout({cx:s,cy:o}),c&&(bC[t](e,a,n,u,s,o,c),a.eachEdge((function(t,r){var i,n=ee(t.getModel().get(["lineStyle","curveness"]),dC(t,e,r),0),a=ye(t.node1.getLayout()),u=ye(t.node2.getLayout()),c=(a[0]+u[0])/2,d=(a[1]+u[1])/2;+n&&(i=[s*(n*=3)+c*(1-n),o*n+d*(1-n)]),t.setLayout([a,u,i])})))}}var bC={value:function(e,t,r,i,n,a,s){var o=0,u=r.getSum("value"),c=2*Math.PI/(u||s);t.eachNode((function(e){var t=e.getValue("value"),r=c*(u?t:1)/2;o+=r,e.setLayout([i*Math.cos(o)+n,i*Math.sin(o)+a]),o+=r}))},symbolSize:function(e,t,r,i,n,a,s){var o=0;gC.length=s;var u=pC(e);t.eachNode((function(e){var t=vC(e);isNaN(t)&&(t=2),t<0&&(t=0),t*=u;var r=Math.asin(t/2/i);isNaN(r)&&(r=mC/2),gC[e.dataIndex]=r,o+=2*r}));var c=(2*mC-o)/s/2,d=0;t.eachNode((function(e){var t=c+gC[e.dataIndex];d+=t,e.setLayout([i*Math.cos(d)+n,i*Math.sin(d)+a]),d+=t}))}};function xC(e){e.eachSeriesByType("graph",(function(e){"circular"===e.get("layout")&&yC(e,"symbolSize")}))}var kC=xe;function wC(e){e.eachSeriesByType("graph",(function(e){var t=e.coordinateSystem;if(!t||"view"===t.type)if("force"===e.get("layout")){var r=e.preservedPoints||{},i=e.getGraph(),n=i.data,a=i.edgeData,s=e.getModel("force"),o=s.get("initLayout");e.preservedPoints?n.each((function(e){var t=n.getId(e);n.setItemLayout(e,r[t]||[NaN,NaN])})):o&&"none"!==o?"circular"===o&&yC(e,"value"):hC(e);var u=n.getDataExtent("value"),c=a.getDataExtent("value"),d=s.get("repulsion"),h=s.get("edgeLength"),l=j(d)?d:[d,d],f=j(h)?h:[h,h];f=[f[1],f[0]];var p=n.mapArray("value",(function(e,t){var r=n.getItemLayout(t),i=Pi(e,u,l);return isNaN(i)&&(i=(l[0]+l[1])/2),{w:i,rep:i,fixed:n.getItemModel(t).get("fixed"),p:!r||isNaN(r[0])||isNaN(r[1])?null:r}})),v=a.mapArray("value",(function(t,r){var n=i.getEdgeByIndex(r),a=Pi(t,c,f);isNaN(a)&&(a=(f[0]+f[1])/2);var s=n.getModel(),o=ee(n.getModel().get(["lineStyle","curveness"]),-dC(n,e,r,!0),0);return{n1:p[n.node1.dataIndex],n2:p[n.node2.dataIndex],d:a,curveness:o,ignoreForceLayout:s.get("ignoreForceLayout")}})),m=t.getBoundingRect(),g=function(e,t,r){for(var i=e,n=t,a=r.rect,s=a.width,o=a.height,u=[a.x+s/2,a.y+o/2],c=null==r.gravity?.1:r.gravity,d=0;d<i.length;d++){var h=i[d];h.p||(h.p=me(s*(Math.random()-.5)+u[0],o*(Math.random()-.5)+u[1])),h.pp=ye(h.p),h.edges=null}var l,f,p=null==r.friction?.6:r.friction,v=p;return{warmUp:function(){v=.8*p},setFixed:function(e){i[e].fixed=!0},setUnfixed:function(e){i[e].fixed=!1},beforeStep:function(e){l=e},afterStep:function(e){f=e},step:function(e){l&&l(i,n);for(var t,r,a,s=[],o=i.length,d=0;d<n.length;d++){var h=n[d];if(!h.ignoreForceLayout){var p=h.n1;ke(s,(b=h.n2).p,p.p);var m=we(s)-h.d,g=b.w/(p.w+b.w);isNaN(g)&&(g=0),Oe(s,s),!p.fixed&&kC(p.p,p.p,s,g*m*v),!b.fixed&&kC(b.p,b.p,s,-(1-g)*m*v)}}for(d=0;d<o;d++)(w=i[d]).fixed||(ke(s,u,w.p),kC(w.p,w.p,s,c*v));for(d=0;d<o;d++){p=i[d];for(var y=d+1;y<o;y++){var b;ke(s,(b=i[y]).p,p.p),0===(m=we(s))&&(t=s,r=Math.random()-.5,a=Math.random()-.5,t[0]=r,t[1]=a,m=1);var x=(p.rep+b.rep)/m/m;!p.fixed&&kC(p.pp,p.pp,s,x),!b.fixed&&kC(b.pp,b.pp,s,-x)}}var k=[];for(d=0;d<o;d++){var w;(w=i[d]).fixed||(ke(k,w.p,w.pp),kC(w.p,w.p,k,v),ge(w.pp,w.p))}var _=(v*=.992)<.01;f&&f(i,n,_),e&&e(_)}}}(p,v,{rect:m,gravity:s.get("gravity"),friction:s.get("friction")});g.beforeStep((function(e,t){for(var r=0,n=e.length;r<n;r++)e[r].fixed&&ge(e[r].p,i.getNodeByIndex(r).getLayout())})),g.afterStep((function(e,t,a){for(var s=0,o=e.length;s<o;s++)e[s].fixed||i.getNodeByIndex(s).setLayout(e[s].p),r[n.getId(s)]=e[s].p;for(s=0,o=t.length;s<o;s++){var u=t[s],c=i.getEdgeByIndex(s),d=u.n1.p,h=u.n2.p,l=c.getLayout();(l=l?l.slice():[])[0]=l[0]||[],l[1]=l[1]||[],ge(l[0],d),ge(l[1],h),+u.curveness&&(l[2]=[(d[0]+h[0])/2-(d[1]-h[1])*u.curveness,(d[1]+h[1])/2-(h[0]-d[0])*u.curveness]),c.setLayout(l)}})),e.forceLayout=g,e.preservedPoints=r,g.step()}else e.forceLayout=null}))}function _C(e,t){var r=[];return e.eachSeriesByType("graph",(function(e){var i=e.get("coordinateSystem");if(!i||"view"===i){var n=e.getData(),a=[],s=[];Ga(n.mapArray((function(e){var t=n.getItemModel(e);return[+t.get("x"),+t.get("y")]})),a,s),s[0]-a[0]===0&&(s[0]+=1,a[0]-=1),s[1]-a[1]===0&&(s[1]+=1,a[1]-=1);var o=(s[0]-a[0])/(s[1]-a[1]),u=function(e,t,r){return Ph(I(e.getBoxLayoutParams(),{aspect:r}),{width:t.getWidth(),height:t.getHeight()})}(e,t,o);isNaN(o)&&(a=[u.x,u.y],s=[u.x+u.width,u.y+u.height]);var c=s[0]-a[0],d=s[1]-a[1],h=u.width,l=u.height,f=e.coordinateSystem=new cO;f.zoomLimit=e.get("scaleLimit"),f.setBoundingRect(a[0],a[1],c,d),f.setViewRect(u.x,u.y,h,l),f.setCenter(e.get("center")),f.setZoom(e.get("zoom")),r.push(f)}})),r}var SC=ic.prototype,OC=uc.prototype,TC=function(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1};!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}a(t,e)}(TC);function CC(e){return isNaN(+e.cpx1)||isNaN(+e.cpy1)}var IC=function(e){function t(t){var r=e.call(this,t)||this;return r.type="ec-line",r}return a(t,e),t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new TC},t.prototype.buildPath=function(e,t){CC(t)?SC.buildPath.call(this,e,t):OC.buildPath.call(this,e,t)},t.prototype.pointAt=function(e){return CC(this.shape)?SC.pointAt.call(this,e):OC.pointAt.call(this,e)},t.prototype.tangentAt=function(e){var t=this.shape,r=CC(t)?[t.x2-t.x1,t.y2-t.y1]:OC.tangentAt.call(this,e);return Oe(r,r)},t}(Ns),MC=["fromSymbol","toSymbol"];function AC(e){return"_"+e+"Type"}function EC(e,t,r){var i=t.getItemVisual(r,e);if(i&&"none"!==i){var n=t.getItemVisual(r,e+"Size"),a=t.getItemVisual(r,e+"Rotate"),s=t.getItemVisual(r,e+"Offset")||0,o=t.getItemVisual(r,e+"KeepAspect"),u=j(n)?n:[n,n],c=j(s)?s:[s,s];c[0]=Di(c[0],u[0]),c[1]=Di(J(c[1],c[0]),u[1]);var d=gm(i,-u[0]/2+c[0],-u[1]/2+c[1],u[0],u[1],null,o);return d.__specifiedRotation=null==a||isNaN(a)?void 0:+a*Math.PI/180||0,d.name=e,d}}function NC(e,t){e.x1=t[0][0],e.y1=t[0][1],e.x2=t[1][0],e.y2=t[1][1],e.percent=1;var r=t[2];r?(e.cpx1=r[0],e.cpy1=r[1]):(e.cpx1=NaN,e.cpy1=NaN)}var PC=function(e){function t(t,r,i){var n=e.call(this)||this;return n._createLine(t,r,i),n}return a(t,e),t.prototype._createLine=function(e,t,r){var i=e.hostModel,n=function(e){var t=new IC({name:"line",subPixelOptimize:!0});return NC(t.shape,e),t}(e.getItemLayout(t));n.shape.percent=0,qc(n,{shape:{percent:1}},i,t),this.add(n),L(MC,(function(r){var i=EC(r,e,t);this.add(i),this[AC(r)]=e.getItemVisual(t,r)}),this),this._updateCommonStl(e,t,r)},t.prototype.updateData=function(e,t,r){var i=e.hostModel,n=this.childOfName("line"),a=e.getItemLayout(t),s={shape:{}};NC(s.shape,a),Fc(n,s,i,t),L(MC,(function(r){var i=e.getItemVisual(t,r),n=AC(r);if(this[n]!==i){this.remove(this.childOfName(r));var a=EC(r,e,t);this.add(a)}this[n]=i}),this),this._updateCommonStl(e,t,r)},t.prototype.getLinePath=function(){return this.childAt(0)},t.prototype._updateCommonStl=function(e,t,r){var i=e.hostModel,n=this.childOfName("line"),a=r&&r.emphasisLineStyle,s=r&&r.blurLineStyle,o=r&&r.selectLineStyle,u=r&&r.labelStatesModels;if(!r||e.hasItemOption){var c=e.getItemModel(t);a=c.getModel(["emphasis","lineStyle"]).getLineStyle(),s=c.getModel(["blur","lineStyle"]).getLineStyle(),o=c.getModel(["select","lineStyle"]).getLineStyle(),u=ud(c)}var d=e.getItemVisual(t,"style"),h=d.stroke;n.useStyle(d),n.style.fill=null,n.style.strokeNoScale=!0,n.ensureState("emphasis").style=a,n.ensureState("blur").style=s,n.ensureState("select").style=o,L(MC,(function(e){var t=this.childOfName(e);if(t){t.setColor(h),t.style.opacity=d.opacity;for(var r=0;r<co.length;r++){var i=co[r],a=n.getState(i);if(a){var s=a.style||{},o=t.ensureState(i),u=o.style||(o.style={});null!=s.stroke&&(u[t.__isEmptyBrush?"stroke":"fill"]=s.stroke),null!=s.opacity&&(u.opacity=s.opacity)}}t.markRedraw()}}),this);var l=i.getRawValue(t);od(this,u,{labelDataIndex:t,labelFetcher:{getFormattedLabel:function(t,r){return i.getFormattedLabel(t,r,e.dataType)}},inheritColor:h||"#000",defaultOpacity:d.opacity,defaultText:(null==l?e.getName(t):isFinite(l)?Li(l):l)+""});var f=this.getTextContent();if(f){var p=u.normal;f.__align=f.style.align,f.__verticalAlign=f.style.verticalAlign,f.__position=p.get("position")||"middle";var v=p.get("distance");j(v)||(v=[v,v]),f.__labelDistance=v}this.setTextConfig({position:null,local:!0,inside:!1}),Xo(this)},t.prototype.highlight=function(){Lo(this)},t.prototype.downplay=function(){Bo(this)},t.prototype.updateLayout=function(e,t){this.setLinePoints(e.getItemLayout(t))},t.prototype.setLinePoints=function(e){var t=this.childOfName("line");NC(t.shape,e),t.dirty()},t.prototype.beforeUpdate=function(){var e=this,t=e.childOfName("fromSymbol"),r=e.childOfName("toSymbol"),i=e.getTextContent();if(t||r||i&&!i.ignore){for(var n=1,a=this.parent;a;)a.scaleX&&(n/=a.scaleX),a=a.parent;var s=e.childOfName("line");if(this.__dirty||s.__dirty){var o=s.shape.percent,u=s.pointAt(0),c=s.pointAt(o),d=ke([],c,u);if(Oe(d,d),t&&(t.setPosition(u),_(t,0),t.scaleX=t.scaleY=n*o,t.markRedraw()),r&&(r.setPosition(c),_(r,1),r.scaleX=r.scaleY=n*o,r.markRedraw()),i&&!i.ignore){i.x=i.y=0,i.originX=i.originY=0;var h=void 0,l=void 0,f=i.__labelDistance,p=f[0]*n,v=f[1]*n,m=o/2,g=s.tangentAt(m),y=[g[1],-g[0]],b=s.pointAt(m);y[1]>0&&(y[0]=-y[0],y[1]=-y[1]);var x=g[0]<0?-1:1;if("start"!==i.__position&&"end"!==i.__position){var k=-Math.atan2(g[1],g[0]);c[0]<u[0]&&(k=Math.PI+k),i.rotation=k}var w=void 0;switch(i.__position){case"insideStartTop":case"insideMiddleTop":case"insideEndTop":case"middle":w=-v,l="bottom";break;case"insideStartBottom":case"insideMiddleBottom":case"insideEndBottom":w=v,l="top";break;default:w=0,l="middle"}switch(i.__position){case"end":i.x=d[0]*p+c[0],i.y=d[1]*v+c[1],h=d[0]>.8?"left":d[0]<-.8?"right":"center",l=d[1]>.8?"top":d[1]<-.8?"bottom":"middle";break;case"start":i.x=-d[0]*p+u[0],i.y=-d[1]*v+u[1],h=d[0]>.8?"right":d[0]<-.8?"left":"center",l=d[1]>.8?"bottom":d[1]<-.8?"top":"middle";break;case"insideStartTop":case"insideStart":case"insideStartBottom":i.x=p*x+u[0],i.y=u[1]+w,h=g[0]<0?"right":"left",i.originX=-p*x,i.originY=-w;break;case"insideMiddleTop":case"insideMiddle":case"insideMiddleBottom":case"middle":i.x=b[0],i.y=b[1]+w,h="center",i.originY=-w;break;case"insideEndTop":case"insideEnd":case"insideEndBottom":i.x=-p*x+c[0],i.y=c[1]+w,h=g[0]>=0?"right":"left",i.originX=p*x,i.originY=-w}i.scaleX=i.scaleY=n,i.setStyle({verticalAlign:i.__verticalAlign||l,align:i.__align||h})}}}function _(e,t){var r=e.__specifiedRotation;if(null==r){var i=s.tangentAt(t);e.attr("rotation",(1===t?-1:1)*Math.PI/2-Math.atan2(i[1],i[0]))}else e.attr("rotation",r)}},t}(Ti);function DC(e){var t=e.hostModel;return{lineStyle:t.getModel("lineStyle").getLineStyle(),emphasisLineStyle:t.getModel(["emphasis","lineStyle"]).getLineStyle(),blurLineStyle:t.getModel(["blur","lineStyle"]).getLineStyle(),selectLineStyle:t.getModel(["select","lineStyle"]).getLineStyle(),labelStatesModels:ud(t)}}function LC(e){return isNaN(e[0])||isNaN(e[1])}function BC(e){return!LC(e[0])&&!LC(e[1])}var RC=function(){function e(e){this.group=new Ti,this._LineCtor=e||PC}return e.prototype.isPersistent=function(){return!0},e.prototype.updateData=function(e){var t=this,r=this,i=r.group,n=r._lineData;r._lineData=e,n||i.removeAll();var a=DC(e);e.diff(n).add((function(r){t._doAdd(e,r,a)})).update((function(r,i){t._doUpdate(n,e,i,r,a)})).remove((function(e){i.remove(n.getItemGraphicEl(e))})).execute()},e.prototype.updateLayout=function(){var e=this._lineData;e&&e.eachItemGraphicEl((function(t,r){t.updateLayout(e,r)}),this)},e.prototype.incrementalPrepareUpdate=function(e){this._seriesScope=DC(e),this._lineData=null,this.group.removeAll()},e.prototype.incrementalUpdate=function(e,t){function r(e){e.isGroup||function(e){return e.animators&&e.animators.length>0}(e)||(e.incremental=!0,e.ensureState("emphasis").hoverLayer=!0)}for(var i=e.start;i<e.end;i++){if(BC(t.getItemLayout(i))){var n=new this._LineCtor(t,i,this._seriesScope);n.traverse(r),this.group.add(n),t.setItemGraphicEl(i,n)}}},e.prototype.remove=function(){this.group.removeAll()},e.prototype._doAdd=function(e,t,r){if(BC(e.getItemLayout(t))){var i=new this._LineCtor(e,t,r);e.setItemGraphicEl(t,i),this.group.add(i)}},e.prototype._doUpdate=function(e,t,r,i,n){var a=e.getItemGraphicEl(r);BC(t.getItemLayout(i))?(a?a.updateData(t,i,n):a=new this._LineCtor(t,i,n),t.setItemGraphicEl(i,a),this.group.add(a)):this.group.remove(a)},e}(),VC=[],GC=[],FC=[],qC=Oa,jC=Ie,zC=Math.abs;function HC(e,t,r){for(var i,n=e[0],a=e[1],s=e[2],o=1/0,u=r*r,c=.1,d=.1;d<=.9;d+=.1){VC[0]=qC(n[0],a[0],s[0],d),VC[1]=qC(n[1],a[1],s[1],d),(f=zC(jC(VC,t)-u))<o&&(o=f,i=d)}for(var h=0;h<32;h++){var l=i+c;GC[0]=qC(n[0],a[0],s[0],i),GC[1]=qC(n[1],a[1],s[1],i),FC[0]=qC(n[0],a[0],s[0],l),FC[1]=qC(n[1],a[1],s[1],l);var f=jC(GC,t)-u;if(zC(f)<.01)break;var p=jC(FC,t)-u;c/=2,f<0?p>=0?i+=c:i-=c:p>=0?i-=c:i+=c}return i}function UC(e,t){var r=[],i=Ia,n=[[],[],[]],a=[[],[]],s=[];t/=2,e.eachEdge((function(e,o){var u=e.getLayout(),c=e.getVisual("fromSymbol"),d=e.getVisual("toSymbol");u.__original||(u.__original=[ye(u[0]),ye(u[1])],u[2]&&u.__original.push(ye(u[2])));var h=u.__original;if(null!=u[2]){if(ge(n[0],h[0]),ge(n[1],h[2]),ge(n[2],h[1]),c&&"none"!==c){var l=vC(e.node1),f=HC(n,h[0],l*t);i(n[0][0],n[1][0],n[2][0],f,r),n[0][0]=r[3],n[1][0]=r[4],i(n[0][1],n[1][1],n[2][1],f,r),n[0][1]=r[3],n[1][1]=r[4]}if(d&&"none"!==d){l=vC(e.node2),f=HC(n,h[1],l*t);i(n[0][0],n[1][0],n[2][0],f,r),n[1][0]=r[1],n[2][0]=r[2],i(n[0][1],n[1][1],n[2][1],f,r),n[1][1]=r[1],n[2][1]=r[2]}ge(u[0],n[0]),ge(u[1],n[2]),ge(u[2],n[1])}else{if(ge(a[0],h[0]),ge(a[1],h[1]),ke(s,a[1],a[0]),Oe(s,s),c&&"none"!==c){l=vC(e.node1);xe(a[0],a[0],s,l*t)}if(d&&"none"!==d){l=vC(e.node2);xe(a[1],a[1],s,-l*t)}ge(u[0],a[0]),ge(u[1],a[1])}}))}function WC(e){return"view"===e.type}var KC=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return r.type=t.type,r}return a(t,e),t.prototype.init=function(e,t){var r=new Fx,i=new RC,n=this.group;this._controller=new FS(t.getZr()),this._controllerHost={target:n},n.add(r.group),n.add(i.group),this._symbolDraw=r,this._lineDraw=i,this._firstRender=!0},t.prototype.render=function(e,t,r){var i=this,n=e.coordinateSystem;this._model=e;var a=this._symbolDraw,s=this._lineDraw,o=this.group;if(WC(n)){var u={x:n.x,y:n.y,scaleX:n.scaleX,scaleY:n.scaleY};this._firstRender?o.attr(u):Fc(o,u,e)}UC(e.getGraph(),pC(e));var c=e.getData();a.updateData(c);var d=e.getEdgeData();s.updateData(d),this._updateNodeAndLinkScale(),this._updateController(e,t,r),clearTimeout(this._layoutTimeout);var h=e.forceLayout,l=e.get(["force","layoutAnimation"]);h&&this._startForceLayoutIteration(h,l),c.graph.eachNode((function(e){var t=e.dataIndex,r=e.getGraphicEl(),n=e.getModel();r.off("drag").off("dragend");var a=n.get("draggable");a&&r.on("drag",(function(){h&&(h.warmUp(),!i._layouting&&i._startForceLayoutIteration(h,l),h.setFixed(t),c.setItemLayout(t,[r.x,r.y]))})).on("dragend",(function(){h&&h.setUnfixed(t)})),r.setDraggable(a&&!!h),"adjacency"===n.get(["emphasis","focus"])&&(ao(r).focus=e.getAdjacentDataIndices())})),c.graph.eachEdge((function(e){var t=e.getGraphicEl();"adjacency"===e.getModel().get(["emphasis","focus"])&&(ao(t).focus={edge:[e.dataIndex],node:[e.node1.dataIndex,e.node2.dataIndex]})}));var f="circular"===e.get("layout")&&e.get(["circular","rotateLabel"]),p=c.getLayout("cx"),v=c.getLayout("cy");c.eachItemGraphicEl((function(e,t){var r=c.getItemModel(t).get(["label","rotate"])||0,i=e.getSymbolPath();if(f){var n=c.getItemLayout(t),a=Math.atan2(n[1]-v,n[0]-p);a<0&&(a=2*Math.PI+a);var s=n[0]<p;s&&(a-=Math.PI);var o=s?"left":"right";i.setTextConfig({rotation:-a,position:o,origin:"center"});var u=i.ensureState("emphasis");I(u.textConfig||(u.textConfig={}),{position:o})}else i.setTextConfig({rotation:r*=Math.PI/180})})),this._firstRender=!1},t.prototype.dispose=function(){this._controller&&this._controller.dispose(),this._controllerHost=null},t.prototype._startForceLayoutIteration=function(e,t){var r=this;!function i(){e.step((function(e){r.updateLayout(r._model),(r._layouting=!e)&&(t?r._layoutTimeout=setTimeout(i,16):i())}))}()},t.prototype._updateController=function(e,t,r){var i=this,n=this._controller,a=this._controllerHost,s=this.group;n.setPointerChecker((function(t,i,n){var a=s.getBoundingRect();return a.applyTransform(s.transform),a.contain(i,n)&&!HS(t,r,e)})),WC(e.coordinateSystem)?(n.enable(e.get("roam")),a.zoomLimit=e.get("scaleLimit"),a.zoom=e.coordinateSystem.getZoom(),n.off("pan").off("zoom").on("pan",(function(t){qS(a,t.dx,t.dy),r.dispatchAction({seriesId:e.id,type:"graphRoam",dx:t.dx,dy:t.dy})})).on("zoom",(function(t){jS(a,t.scale,t.originX,t.originY),r.dispatchAction({seriesId:e.id,type:"graphRoam",zoom:t.scale,originX:t.originX,originY:t.originY}),i._updateNodeAndLinkScale(),UC(e.getGraph(),pC(e)),i._lineDraw.updateLayout(),r.updateLabelLayout()}))):n.disable()},t.prototype._updateNodeAndLinkScale=function(){var e=this._model,t=e.getData(),r=pC(e);t.eachItemGraphicEl((function(e,t){e.setSymbolScale(r)}))},t.prototype.updateLayout=function(e){UC(e.getGraph(),pC(e)),this._symbolDraw.updateLayout(),this._lineDraw.updateLayout()},t.prototype.remove=function(e,t){this._symbolDraw&&this._symbolDraw.remove(),this._lineDraw&&this._lineDraw.remove()},t.type="graph",t}(Np);function XC(e){return"_EC_"+e}var YC=function(){function e(e){this.type="graph",this.nodes=[],this.edges=[],this._nodesMap={},this._edgesMap={},this._directed=e||!1}return e.prototype.isDirected=function(){return this._directed},e.prototype.addNode=function(e,t){e=null==e?""+t:""+e;var r=this._nodesMap;if(!r[XC(e)]){var i=new ZC(e,t);return i.hostGraph=this,this.nodes.push(i),r[XC(e)]=i,i}},e.prototype.getNodeByIndex=function(e){var t=this.data.getRawIndex(e);return this.nodes[t]},e.prototype.getNodeById=function(e){return this._nodesMap[XC(e)]},e.prototype.addEdge=function(e,t,r){var i=this._nodesMap,n=this._edgesMap;if("number"===typeof e&&(e=this.nodes[e]),"number"===typeof t&&(t=this.nodes[t]),e instanceof ZC||(e=i[XC(e)]),t instanceof ZC||(t=i[XC(t)]),e&&t){var a=e.id+"-"+t.id,s=new QC(e,t,r);return s.hostGraph=this,this._directed&&(e.outEdges.push(s),t.inEdges.push(s)),e.edges.push(s),e!==t&&t.edges.push(s),this.edges.push(s),n[a]=s,s}},e.prototype.getEdgeByIndex=function(e){var t=this.edgeData.getRawIndex(e);return this.edges[t]},e.prototype.getEdge=function(e,t){e instanceof ZC&&(e=e.id),t instanceof ZC&&(t=t.id);var r=this._edgesMap;return this._directed?r[e+"-"+t]:r[e+"-"+t]||r[t+"-"+e]},e.prototype.eachNode=function(e,t){for(var r=this.nodes,i=r.length,n=0;n<i;n++)r[n].dataIndex>=0&&e.call(t,r[n],n)},e.prototype.eachEdge=function(e,t){for(var r=this.edges,i=r.length,n=0;n<i;n++)r[n].dataIndex>=0&&r[n].node1.dataIndex>=0&&r[n].node2.dataIndex>=0&&e.call(t,r[n],n)},e.prototype.breadthFirstTraverse=function(e,t,r,i){if(t instanceof ZC||(t=this._nodesMap[XC(t)]),t){for(var n="out"===r?"outEdges":"in"===r?"inEdges":"edges",a=0;a<this.nodes.length;a++)this.nodes[a].__visited=!1;if(!e.call(i,t,null))for(var s=[t];s.length;){var o=s.shift(),u=o[n];for(a=0;a<u.length;a++){var c=u[a],d=c.node1===o?c.node2:c.node1;if(!d.__visited){if(e.call(i,d,o))return;s.push(d),d.__visited=!0}}}}},e.prototype.update=function(){for(var e=this.data,t=this.edgeData,r=this.nodes,i=this.edges,n=0,a=r.length;n<a;n++)r[n].dataIndex=-1;for(n=0,a=e.count();n<a;n++)r[e.getRawIndex(n)].dataIndex=n;t.filterSelf((function(e){var r=i[t.getRawIndex(e)];return r.node1.dataIndex>=0&&r.node2.dataIndex>=0}));for(n=0,a=i.length;n<a;n++)i[n].dataIndex=-1;for(n=0,a=t.count();n<a;n++)i[t.getRawIndex(n)].dataIndex=n},e.prototype.clone=function(){for(var t=new e(this._directed),r=this.nodes,i=this.edges,n=0;n<r.length;n++)t.addNode(r[n].id,r[n].dataIndex);for(n=0;n<i.length;n++){var a=i[n];t.addEdge(a.node1.id,a.node2.id,a.dataIndex)}return t},e}(),ZC=function(){function e(e,t){this.inEdges=[],this.outEdges=[],this.edges=[],this.dataIndex=-1,this.id=null==e?"":e,this.dataIndex=null==t?-1:t}return e.prototype.degree=function(){return this.edges.length},e.prototype.inDegree=function(){return this.inEdges.length},e.prototype.outDegree=function(){return this.outEdges.length},e.prototype.getModel=function(e){if(!(this.dataIndex<0))return this.hostGraph.data.getItemModel(this.dataIndex).getModel(e)},e.prototype.getAdjacentDataIndices=function(){for(var e={edge:[],node:[]},t=0;t<this.edges.length;t++){var r=this.edges[t];r.dataIndex<0||(e.edge.push(r.dataIndex),e.node.push(r.node1.dataIndex,r.node2.dataIndex))}return e},e}(),QC=function(){function e(e,t,r){this.dataIndex=-1,this.node1=e,this.node2=t,this.dataIndex=null==r?-1:r}return e.prototype.getModel=function(e){if(!(this.dataIndex<0))return this.hostGraph.edgeData.getItemModel(this.dataIndex).getModel(e)},e.prototype.getAdjacentDataIndices=function(){return{edge:[this.dataIndex],node:[this.node1.dataIndex,this.node2.dataIndex]}},e}();function $C(e,t){return{getValue:function(r){var i=this[e][t];return i.get(i.getDimension(r||"value"),this.dataIndex)},setVisual:function(r,i){this.dataIndex>=0&&this[e][t].setItemVisual(this.dataIndex,r,i)},getVisual:function(r){return this[e][t].getItemVisual(this.dataIndex,r)},setLayout:function(r,i){this.dataIndex>=0&&this[e][t].setItemLayout(this.dataIndex,r,i)},getLayout:function(){return this[e][t].getItemLayout(this.dataIndex)},getGraphicEl:function(){return this[e][t].getItemGraphicEl(this.dataIndex)},getRawIndex:function(){return this[e][t].getRawIndex(this.dataIndex)}}}P(ZC,$C("hostGraph","data")),P(QC,$C("hostGraph","edgeData"));var JC=YC;function eI(e,t,r,i,n){for(var a=new JC(i),s=0;s<e.length;s++)a.addNode($(e[s].id,e[s].name,s),s);var o=[],u=[],c=0;for(s=0;s<t.length;s++){var d=t[s],h=d.source,l=d.target;a.addEdge(h,l,c)&&(u.push(d),o.push($(cn(d.id,null),h+" > "+l)),c++)}var f,p=r.get("coordinateSystem");if("cartesian2d"===p||"polar"===p)f=Ex(e,r);else{var v=Tl.get(p),m=v&&v.dimensions||[];E(m,"value")<0&&m.concat(["value"]);var g=Ox(e,{coordDimensions:m});(f=new kx(g,r)).initData(e)}var y=new kx(["value"],r);return y.initData(u,o),n&&n(f,y),HO({mainData:f,struct:a,structAttr:"graph",datas:{node:f,edge:y},datasAttr:{node:"data",edge:"edgeData"}}),a.update(),a}var tI=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return r.type=t.type,r.hasSymbolVisual=!0,r}return a(t,e),t.prototype.init=function(t){e.prototype.init.apply(this,arguments);var r=this;function i(){return r._categoriesData}this.legendVisualProvider=new uw(i,i),this.fillDataTextStyle(t.edges||t.links),this._updateCategoriesData()},t.prototype.mergeOption=function(t){e.prototype.mergeOption.apply(this,arguments),this.fillDataTextStyle(t.edges||t.links),this._updateCategoriesData()},t.prototype.mergeDefaultAndTheme=function(t){e.prototype.mergeDefaultAndTheme.apply(this,arguments),rn(t,"edgeLabel",["show"])},t.prototype.getInitialData=function(e,t){var r,i=e.edges||e.links||[],n=e.data||e.nodes||[],a=this;if(n&&i){aC(r=this)&&(r.__curvenessList=[],r.__edgeMap={},sC(r));var s=eI(n,i,this,!0,(function(e,t){e.wrapMethod("getItemModel",(function(e){var t=a._categoriesModels[e.getShallow("category")];return t&&(t.parentModel=e.parentModel,e.parentModel=t),e}));var r=Md.prototype.getModel;function i(e,t){var i=r.call(this,e,t);return i.resolveParentPath=n,i}function n(e){if(e&&("label"===e[0]||"label"===e[1])){var t=e.slice();return"label"===e[0]?t[0]="edgeLabel":"label"===e[1]&&(t[1]="edgeLabel"),t}return e}t.wrapMethod("getItemModel",(function(e){return e.resolveParentPath=n,e.getModel=i,e}))}));return L(s.edges,(function(e){!function(e,t,r,i){if(aC(r)){var n=oC(e,t,r),a=r.__edgeMap,s=a[uC(n)];a[n]&&!s?a[n].isForward=!0:s&&a[n]&&(s.isForward=!0,a[n].isForward=!1),a[n]=a[n]||[],a[n].push(i)}}(e.node1,e.node2,this,e.dataIndex)}),this),s.data}},t.prototype.getGraph=function(){return this.getData().graph},t.prototype.getEdgeData=function(){return this.getGraph().edgeData},t.prototype.getCategoriesData=function(){return this._categoriesData},t.prototype.formatTooltip=function(e,t,r){if("edge"===r){var i=this.getData(),n=this.getDataParams(e,r),a=i.graph.getEdgeByIndex(e),s=i.getName(a.node1.dataIndex),o=i.getName(a.node2.dataIndex),u=[];return null!=s&&u.push(s),null!=o&&u.push(o),Jf("nameValue",{name:u.join(" > "),value:n.value,noValue:null==n.value})}return cp({series:this,dataIndex:e,multipleSeries:t})},t.prototype._updateCategoriesData=function(){var e=B(this.option.categories||[],(function(e){return null!=e.value?e:I({value:0},e)})),t=new kx(["value"],this);t.initData(e),this._categoriesData=t,this._categoriesModels=t.mapArray((function(e){return t.getItemModel(e)}))},t.prototype.setZoom=function(e){this.option.zoom=e},t.prototype.setCenter=function(e){this.option.center=e},t.prototype.isAnimationEnabled=function(){return e.prototype.isAnimationEnabled.call(this)&&!("force"===this.get("layout")&&this.get(["force","layoutAnimation"]))},t.type="series.graph",t.dependencies=["grid","polar","geo","singleAxis","calendar"],t.defaultOption={zlevel:0,z:2,coordinateSystem:"view",legendHoverLink:!0,layout:null,circular:{rotateLabel:!1},force:{initLayout:null,repulsion:[0,50],gravity:.1,friction:.6,edgeLength:30,layoutAnimation:!0},left:"center",top:"center",symbol:"circle",symbolSize:10,edgeSymbol:["none","none"],edgeSymbolSize:10,edgeLabel:{position:"middle",distance:5},draggable:!1,roam:!1,center:null,zoom:1,nodeScaleRatio:.6,label:{show:!1,formatter:"{b}"},itemStyle:{},lineStyle:{color:"#aaa",width:1,opacity:.5},emphasis:{scale:!0,label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},t}(xp),rI={type:"graphRoam",event:"graphRoam",update:"none"};var iI=function(){this.angle=0,this.width=10,this.r=10,this.x=0,this.y=0},nI=function(e){function t(t){var r=e.call(this,t)||this;return r.type="pointer",r}return a(t,e),t.prototype.getDefaultShape=function(){return new iI},t.prototype.buildPath=function(e,t){var r=Math.cos,i=Math.sin,n=t.r,a=t.width,s=t.angle,o=t.x-r(s)*a*(a>=n/3?1:2),u=t.y-i(s)*a*(a>=n/3?1:2);s=t.angle-Math.PI/2,e.moveTo(o,u),e.lineTo(t.x+r(s)*a,t.y+i(s)*a),e.lineTo(t.x+r(t.angle)*n,t.y+i(t.angle)*n),e.lineTo(t.x-r(s)*a,t.y-i(s)*a),e.lineTo(o,u)},t}(Ns);function aI(e,t){var r=null==e?"":e+"";return t&&("string"===typeof t?r=t.replace("{value}",r):"function"===typeof t&&(r=t(e))),r}var sI=2*Math.PI,oI=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return r.type=t.type,r}return a(t,e),t.prototype.render=function(e,t,r){this.group.removeAll();var i=e.get(["axisLine","lineStyle","color"]),n=function(e,t){var r=e.get("center"),i=t.getWidth(),n=t.getHeight(),a=Math.min(i,n);return{cx:Di(r[0],t.getWidth()),cy:Di(r[1],t.getHeight()),r:Di(e.get("radius"),a/2)}}(e,r);this._renderMain(e,t,r,i,n),this._data=e.getData()},t.prototype.dispose=function(){},t.prototype._renderMain=function(e,t,r,i,n){for(var a=this.group,s=e.get("clockwise"),o=-e.get("startAngle")/180*Math.PI,u=-e.get("endAngle")/180*Math.PI,c=e.getModel("axisLine"),d=c.get("roundCap")?Dk:ju,h=c.get("show"),l=c.getModel("lineStyle"),f=l.get("width"),p=(u-o)%sI||u===o?(u-o)%sI:sI,v=o,m=0;h&&m<i.length;m++){var g=new d({shape:{startAngle:v,endAngle:u=o+p*Math.min(Math.max(i[m][0],0),1),cx:n.cx,cy:n.cy,clockwise:s,r0:n.r-f,r:n.r},silent:!0});g.setStyle({fill:i[m][1]}),g.setStyle(l.getLineStyle(["color","width"])),a.add(g),v=u}var y=function(e){if(e<=0)return i[0][1];var t;for(t=0;t<i.length;t++)if(i[t][0]>=e&&(0===t?0:i[t-1][0])<e)return i[t][1];return i[t-1][1]};if(!s){var b=o;o=u,u=b}this._renderTicks(e,t,r,y,n,o,u,s,f),this._renderTitleAndDetail(e,t,r,y,n),this._renderAnchor(e,n),this._renderPointer(e,t,r,y,n,o,u,s,f)},t.prototype._renderTicks=function(e,t,r,i,n,a,s,o,u){for(var c,d,h=this.group,l=n.cx,f=n.cy,p=n.r,v=+e.get("min"),m=+e.get("max"),g=e.getModel("splitLine"),y=e.getModel("axisTick"),b=e.getModel("axisLabel"),x=e.get("splitNumber"),k=y.get("splitNumber"),w=Di(g.get("length"),p),_=Di(y.get("length"),p),S=a,O=(s-a)/x,T=O/k,C=g.getModel("lineStyle").getLineStyle(),I=y.getModel("lineStyle").getLineStyle(),M=g.get("distance"),A=0;A<=x;A++){if(c=Math.cos(S),d=Math.sin(S),g.get("show")){var E=new ic({shape:{x1:c*(p-(N=M?M+u:u))+l,y1:d*(p-N)+f,x2:c*(p-w-N)+l,y2:d*(p-w-N)+f},style:C,silent:!0});"auto"===C.stroke&&E.setStyle({stroke:i(A/x)}),h.add(E)}if(b.get("show")){var N=b.get("distance")+M,P=aI(Li(A/x*(m-v)+v),b.get("formatter")),D=i(A/x);h.add(new no({style:cd(b,{text:P,x:c*(p-w-N)+l,y:d*(p-w-N)+f,verticalAlign:d<-.8?"top":d>.8?"bottom":"middle",align:c<-.4?"left":c>.4?"right":"center"},{inheritColor:D}),silent:!0}))}if(y.get("show")&&A!==x){N=(N=y.get("distance"))?N+u:u;for(var L=0;L<=k;L++){c=Math.cos(S),d=Math.sin(S);var B=new ic({shape:{x1:c*(p-N)+l,y1:d*(p-N)+f,x2:c*(p-_-N)+l,y2:d*(p-_-N)+f},silent:!0,style:I});"auto"===I.stroke&&B.setStyle({stroke:i((A+L/k)/x)}),h.add(B),S+=T}S-=T}else S+=O}},t.prototype._renderPointer=function(e,t,r,i,n,a,s,o,u){var c=this.group,d=this._data,h=this._progressEls,l=[],f=e.get(["pointer","show"]),p=e.getModel("progress"),v=p.get("show"),m=e.getData(),g=m.mapDimension("value"),y=+e.get("min"),b=+e.get("max"),x=[y,b],k=[a,s];function w(t,r){var i,a=m.getItemModel(t).getModel("pointer"),s=Di(a.get("width"),n.r),o=Di(a.get("length"),n.r),u=e.get(["pointer","icon"]),c=a.get("offsetCenter"),d=Di(c[0],n.r),h=Di(c[1],n.r),l=a.get("keepAspect");return(i=u?gm(u,d-s/2,h-o,s,o,null,l):new nI({shape:{angle:-Math.PI/2,width:s,r:o,x:d,y:h}})).rotation=-(r+Math.PI/2),i.x=n.cx,i.y=n.cy,i}function _(e,t){var r=p.get("roundCap")?Dk:ju,i=p.get("overlap"),s=i?p.get("width"):u/m.count(),c=i?n.r-s:n.r-(e+1)*s,d=i?n.r:n.r-e*s,h=new r({shape:{startAngle:a,endAngle:t,cx:n.cx,cy:n.cy,clockwise:o,r0:c,r:d}});return i&&(h.z2=b-m.get(g,e)%b),h}(v||f)&&(m.diff(d).add((function(t){if(f){var r=w(t,a);qc(r,{rotation:-(Pi(m.get(g,t),x,k,!0)+Math.PI/2)},e),c.add(r),m.setItemGraphicEl(t,r)}if(v){var i=_(t,a),n=p.get("clip");qc(i,{shape:{endAngle:Pi(m.get(g,t),x,k,n)}},e),c.add(i),l[t]=i}})).update((function(t,r){if(f){var i=d.getItemGraphicEl(r),n=i?i.rotation:a,s=w(t,n);s.rotation=n,Fc(s,{rotation:-(Pi(m.get(g,t),x,k,!0)+Math.PI/2)},e),c.add(s),m.setItemGraphicEl(t,s)}if(v){var o=h[r],u=_(t,o?o.shape.endAngle:a),y=p.get("clip");Fc(u,{shape:{endAngle:Pi(m.get(g,t),x,k,y)}},e),c.add(u),l[t]=u}})).execute(),m.each((function(e){var t=m.getItemModel(e),r=t.getModel("emphasis");if(f){var n=m.getItemGraphicEl(e),a=m.getItemVisual(e,"style"),s=a.fill;if(n instanceof Gs){var o=n.style;n.useStyle(I({image:o.image,x:o.x,y:o.y,width:o.width,height:o.height},a))}else n.useStyle(a),"pointer"!==n.type&&n.setColor(s);n.setStyle(t.getModel(["pointer","itemStyle"]).getItemStyle()),"auto"===n.style.fill&&n.setStyle("fill",i(Pi(m.get(g,e),x,[0,1],!0))),n.z2EmphasisLift=0,$o(n,t),Xo(n,r.get("focus"),r.get("blurScope"))}if(v){var u=l[e];u.useStyle(m.getItemVisual(e,"style")),u.setStyle(t.getModel(["progress","itemStyle"]).getItemStyle()),u.z2EmphasisLift=0,$o(u,t),Xo(u,r.get("focus"),r.get("blurScope"))}})),this._progressEls=l)},t.prototype._renderAnchor=function(e,t){var r=e.getModel("anchor");if(r.get("show")){var i=r.get("size"),n=r.get("icon"),a=r.get("offsetCenter"),s=r.get("keepAspect"),o=gm(n,t.cx-i/2+Di(a[0],t.r),t.cy-i/2+Di(a[1],t.r),i,i,null,s);o.z2=r.get("showAbove")?1:0,o.setStyle(r.getModel("itemStyle").getItemStyle()),this.group.add(o)}},t.prototype._renderTitleAndDetail=function(e,t,r,i,n){var a=this,s=e.getData(),o=s.mapDimension("value"),u=+e.get("min"),c=+e.get("max"),d=new Ti,h=[],l=[],f=e.isAnimationEnabled();s.diff(this._data).add((function(e){h[e]=new no({silent:!0}),l[e]=new no({silent:!0})})).update((function(e,t){h[e]=a._titleEls[t],l[e]=a._detailEls[t]})).execute(),s.each((function(t){var r=s.getItemModel(t),a=s.get(o,t),p=new Ti,v=i(Pi(a,[u,c],[0,1],!0)),m=r.getModel("title");if(m.get("show")){var g=m.get("offsetCenter"),y=n.cx+Di(g[0],n.r),b=n.cy+Di(g[1],n.r);(C=h[t]).attr({style:cd(m,{x:y,y:b,text:s.getName(t),align:"center",verticalAlign:"middle"},{inheritColor:v})}),p.add(C)}var x=r.getModel("detail");if(x.get("show")){var k=x.get("offsetCenter"),w=n.cx+Di(k[0],n.r),_=n.cy+Di(k[1],n.r),S=Di(x.get("width"),n.r),O=Di(x.get("height"),n.r),T=e.get(["progress","show"])?s.getItemVisual(t,"style").fill:v,C=l[t],I=x.get("formatter");C.attr({style:cd(x,{x:w,y:_,text:aI(a,I),width:isNaN(S)?null:S,height:isNaN(O)?null:O,align:"center",verticalAlign:"middle"},{inheritColor:T})}),gd(C,{normal:x},a,(function(e){return aI(e,I)})),f&&yd(C,t,s,e,{getFormattedLabel:function(e,t,r,i,n,s){return aI(s?s.interpolatedValue:a,I)}}),p.add(C)}d.add(p)})),this.group.add(d),this._titleEls=h,this._detailEls=l},t.type="gauge",t}(Np),uI=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return r.type=t.type,r.visualStyleAccessPath="itemStyle",r.useColorPaletteOnData=!0,r}return a(t,e),t.prototype.getInitialData=function(e,t){return ow(this,["value"])},t.type="series.gauge",t.defaultOption={zlevel:0,z:2,center:["50%","50%"],legendHoverLink:!0,radius:"75%",startAngle:225,endAngle:-45,clockwise:!0,min:0,max:100,splitNumber:10,axisLine:{show:!0,roundCap:!1,lineStyle:{color:[[1,"#E6EBF8"]],width:10}},progress:{show:!1,overlap:!0,width:10,roundCap:!1,clip:!0},splitLine:{show:!0,length:10,distance:10,lineStyle:{color:"#63677A",width:3,type:"solid"}},axisTick:{show:!0,splitNumber:5,length:6,distance:10,lineStyle:{color:"#63677A",width:1,type:"solid"}},axisLabel:{show:!0,distance:15,color:"#464646",fontSize:12},pointer:{icon:null,offsetCenter:[0,0],show:!0,length:"60%",width:6,keepAspect:!1},anchor:{show:!1,showAbove:!1,size:6,icon:"circle",offsetCenter:[0,0],keepAspect:!1,itemStyle:{color:"#fff",borderWidth:0,borderColor:"#5470c6"}},title:{show:!0,offsetCenter:[0,"20%"],color:"#464646",fontSize:16,valueAnimation:!1},detail:{show:!0,backgroundColor:"rgba(0,0,0,0)",borderWidth:0,borderColor:"#ccc",width:100,height:null,padding:[5,10],offsetCenter:[0,"40%"],color:"#464646",fontSize:30,fontWeight:"bold",lineHeight:30,valueAnimation:!1}},t}(xp);var cI=["itemStyle","opacity"],dI=function(e){function t(t,r){var i=e.call(this)||this,n=i,a=new Ju,s=new no;return n.setTextContent(s),i.setTextGuideLine(a),i.updateData(t,r,!0),i}return a(t,e),t.prototype.updateData=function(e,t,r){var i=this,n=e.hostModel,a=e.getItemModel(t),s=e.getItemLayout(t),o=a.getModel("emphasis"),u=a.get(cI);u=null==u?1:u,i.useStyle(e.getItemVisual(t,"style")),i.style.lineJoin="round",r?(i.setShape({points:s.points}),i.style.opacity=0,qc(i,{style:{opacity:u}},n,t)):Fc(i,{style:{opacity:u},shape:{points:s.points}},n,t),$o(i,a),this._updateLabel(e,t),Xo(this,o.get("focus"),o.get("blurScope"))},t.prototype._updateLabel=function(e,t){var r=this,i=this.getTextGuideLine(),n=r.getTextContent(),a=e.hostModel,s=e.getItemModel(t),o=e.getItemLayout(t).label,u=e.getItemVisual(t,"style"),c=u.fill;od(n,ud(s),{labelFetcher:e.hostModel,labelDataIndex:t,defaultOpacity:u.opacity,defaultText:e.getName(t)},{normal:{align:o.textAlign,verticalAlign:o.verticalAlign}}),r.setTextConfig({local:!0,inside:!!o.inside,insideStroke:c,outsideFill:c});var d=o.linePoints;i.setShape({points:d}),r.textGuideLineConfig={anchor:d?new pr(d[0][0],d[0][1]):null},Fc(n,{style:{x:o.x,y:o.y}},a,t),n.attr({rotation:o.rotation,originX:o.x,originY:o.y,z2:10}),Uv(r,Wv(s),{stroke:c})},t}(Zu),hI=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return r.type=t.type,r.ignoreLabelLineUpdate=!0,r}return a(t,e),t.prototype.render=function(e,t,r){var i=e.getData(),n=this._data,a=this.group;i.diff(n).add((function(e){var t=new dI(i,e);i.setItemGraphicEl(e,t),a.add(t)})).update((function(e,t){var r=n.getItemGraphicEl(t);r.updateData(i,e),a.add(r),i.setItemGraphicEl(e,r)})).remove((function(t){Hc(n.getItemGraphicEl(t),e,t)})).execute(),this._data=i},t.prototype.remove=function(){this.group.removeAll(),this._data=null},t.prototype.dispose=function(){},t.type="funnel",t}(Np),lI=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return r.type=t.type,r.useColorPaletteOnData=!0,r}return a(t,e),t.prototype.init=function(t){e.prototype.init.apply(this,arguments),this.legendVisualProvider=new uw(F(this.getData,this),F(this.getRawData,this)),this._defaultLabelLine(t)},t.prototype.getInitialData=function(e,t){return ow(this,{coordDimensions:["value"],encodeDefaulter:q(al,this)})},t.prototype._defaultLabelLine=function(e){rn(e,"labelLine",["show"]);var t=e.labelLine,r=e.emphasis.labelLine;t.show=t.show&&e.label.show,r.show=r.show&&e.emphasis.label.show},t.prototype.getDataParams=function(t){var r=this.getData(),i=e.prototype.getDataParams.call(this,t),n=r.mapDimension("value"),a=r.getSum(n);return i.percent=a?+(r.get(n,t)/a*100).toFixed(2):0,i.$vars.push("percent"),i},t.type="series.funnel",t.defaultOption={zlevel:0,z:2,legendHoverLink:!0,left:80,top:60,right:80,bottom:60,minSize:"0%",maxSize:"100%",sort:"descending",orient:"vertical",gap:0,funnelAlign:"center",label:{show:!0,position:"outer"},labelLine:{show:!0,length:20,lineStyle:{width:1}},itemStyle:{borderColor:"#fff",borderWidth:1},emphasis:{label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},t}(xp);function fI(e,t){e.eachSeriesByType("funnel",(function(e){var r=e.getData(),i=r.mapDimension("value"),n=e.get("sort"),a=function(e,t){return Ph(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})}(e,t),s=e.get("orient"),o=a.width,u=a.height,c=function(e,t){for(var r=e.mapDimension("value"),i=e.mapArray(r,(function(e){return e})),n=[],a="ascending"===t,s=0,o=e.count();s<o;s++)n[s]=s;return"function"===typeof t?n.sort(t):"none"!==t&&n.sort((function(e,t){return a?i[e]-i[t]:i[t]-i[e]})),n}(r,n),d=a.x,h=a.y,l="horizontal"===s?[Di(e.get("minSize"),u),Di(e.get("maxSize"),u)]:[Di(e.get("minSize"),o),Di(e.get("maxSize"),o)],f=r.getDataExtent(i),p=e.get("min"),v=e.get("max");null==p&&(p=Math.min(f[0],0)),null==v&&(v=f[1]);var m=e.get("funnelAlign"),g=e.get("gap"),y=(("horizontal"===s?o:u)-g*(r.count()-1))/r.count(),b=function(e,t){if("horizontal"===s){var n=Pi(r.get(i,e)||0,[p,v],l,!0),a=void 0;switch(m){case"top":a=h;break;case"center":a=h+(u-n)/2;break;case"bottom":a=h+(u-n)}return[[t,a],[t,a+n]]}var c,f=Pi(r.get(i,e)||0,[p,v],l,!0);switch(m){case"left":c=d;break;case"center":c=d+(o-f)/2;break;case"right":c=d+o-f}return[[c,t],[c+f,t]]};"ascending"===n&&(y=-y,g=-g,"horizontal"===s?d+=o:h+=u,c=c.reverse());for(var x=0;x<c.length;x++){var k=c[x],w=c[x+1],_=r.getItemModel(k);if("horizontal"===s){var S=_.get(["itemStyle","width"]);null==S?S=y:(S=Di(S,o),"ascending"===n&&(S=-S));var O=b(k,d),T=b(w,d+S);d+=S+g,r.setItemLayout(k,{points:O.concat(T.slice().reverse())})}else{var C=_.get(["itemStyle","height"]);null==C?C=y:(C=Di(C,u),"ascending"===n&&(C=-C));O=b(k,h),T=b(w,h+C);h+=C+g,r.setItemLayout(k,{points:O.concat(T.slice().reverse())})}}!function(e){var t=e.hostModel.get("orient");e.each((function(r){var i,n,a,s,o=e.getItemModel(r),u=o.getModel("label").get("position"),c=o.getModel("labelLine"),d=e.getItemLayout(r),h=d.points,l="inner"===u||"inside"===u||"center"===u||"insideLeft"===u||"insideRight"===u;if(l)"insideLeft"===u?(n=(h[0][0]+h[3][0])/2+5,a=(h[0][1]+h[3][1])/2,i="left"):"insideRight"===u?(n=(h[1][0]+h[2][0])/2-5,a=(h[1][1]+h[2][1])/2,i="right"):(n=(h[0][0]+h[1][0]+h[2][0]+h[3][0])/4,a=(h[0][1]+h[1][1]+h[2][1]+h[3][1])/4,i="center"),s=[[n,a],[n,a]];else{var f=void 0,p=void 0,v=void 0,m=void 0,g=c.get("length");"left"===u?(f=(h[3][0]+h[0][0])/2,p=(h[3][1]+h[0][1])/2,n=(v=f-g)-5,i="right"):"right"===u?(f=(h[1][0]+h[2][0])/2,p=(h[1][1]+h[2][1])/2,n=(v=f+g)+5,i="left"):"top"===u?(f=(h[3][0]+h[0][0])/2,a=(m=(p=(h[3][1]+h[0][1])/2)-g)-5,i="center"):"bottom"===u?(f=(h[1][0]+h[2][0])/2,a=(m=(p=(h[1][1]+h[2][1])/2)+g)+5,i="center"):"rightTop"===u?(f="horizontal"===t?h[3][0]:h[1][0],p="horizontal"===t?h[3][1]:h[1][1],"horizontal"===t?(a=(m=p-g)-5,i="center"):(n=(v=f+g)+5,i="top")):"rightBottom"===u?(f=h[2][0],p=h[2][1],"horizontal"===t?(a=(m=p+g)+5,i="center"):(n=(v=f+g)+5,i="bottom")):"leftTop"===u?(f=h[0][0],p="horizontal"===t?h[0][1]:h[1][1],"horizontal"===t?(a=(m=p-g)-5,i="center"):(n=(v=f-g)-5,i="right")):"leftBottom"===u?(f="horizontal"===t?h[1][0]:h[3][0],p="horizontal"===t?h[1][1]:h[2][1],"horizontal"===t?(a=(m=p+g)+5,i="center"):(n=(v=f-g)-5,i="right")):(f=(h[1][0]+h[2][0])/2,p=(h[1][1]+h[2][1])/2,"horizontal"===t?(a=(m=p+g)+5,i="center"):(n=(v=f+g)+5,i="left")),"horizontal"===t?n=v=f:a=m=p,s=[[f,p],[v,m]]}d.label={linePoints:s,x:n,y:a,verticalAlign:"middle",textAlign:i,inside:l}}))}(r)}))}function pI(e,t,r,i){for(var n,a=[],s=0;s<r.length;s++){var o=r[s],u=e.get(e.mapDimension(o),t);n=u,("category"===i.getAxis(o).type?null==n:null==n||isNaN(n))||a.push(i.dataToPoint(u,o))}return a}function vI(e,t,r,i,n){var a=pI(e,r,i,n),s=new Ju({shape:{points:a},z2:10});return t.add(s),e.setItemGraphicEl(r,s),s}function mI(e){var t=e.get("smooth",!0);return!0===t&&(t=.3),Q(t=Xi(t))&&(t=0),{smooth:t}}function gI(e,t,r,i){e.useStyle(t.getItemVisual(r,"style")),e.style.fill=null,e.setShape("smooth",i.smooth);var n=t.getItemModel(r),a=n.getModel("emphasis");$o(e,n,"lineStyle"),Xo(e,a.get("focus"),a.get("blurScope"))}var yI=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return r.type=t.type,r._dataGroup=new Ti,r._initialized=!1,r}return a(t,e),t.prototype.init=function(){this.group.add(this._dataGroup)},t.prototype.render=function(e,t,r,i){var n=this._dataGroup,a=e.getData(),s=this._data,o=e.coordinateSystem,u=o.dimensions,c=mI(e);if(a.diff(s).add((function(e){gI(vI(a,n,e,u,o),a,e,c)})).update((function(t,r){var i=s.getItemGraphicEl(r),n=pI(a,t,u,o);a.setItemGraphicEl(t,i),Fc(i,{shape:{points:n}},e,t),gI(i,a,t,c)})).remove((function(e){var t=s.getItemGraphicEl(e);n.remove(t)})).execute(),!this._initialized){this._initialized=!0;var d=function(e,t,r){var i=e.model,n=e.getRect(),a=new Ks({shape:{x:n.x,y:n.y,width:n.width,height:n.height}}),s="horizontal"===i.get("layout")?"width":"height";return a.setShape(s,0),qc(a,{shape:{width:n.width,height:n.height}},t,r),a}(o,e,(function(){setTimeout((function(){n.removeClipPath()}))}));n.setClipPath(d)}this._data=a},t.prototype.incrementalPrepareRender=function(e,t,r){this._initialized=!0,this._data=null,this._dataGroup.removeAll()},t.prototype.incrementalRender=function(e,t,r){for(var i=t.getData(),n=t.coordinateSystem,a=n.dimensions,s=mI(t),o=e.start;o<e.end;o++){var u=vI(i,this._dataGroup,o,a,n);u.incremental=!0,gI(u,i,o,s)}},t.prototype.remove=function(){this._dataGroup&&this._dataGroup.removeAll(),this._data=null},t.type="parallel",t}(Np);function bI(e){var t=e.ecModel.getComponent("parallel",e.get("parallelIndex"));if(t){var r={};return L(t.dimensions,(function(e){var t=+e.replace("dim","");r[e]=t})),r}}var xI=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return r.type=t.type,r.visualStyleAccessPath="lineStyle",r.visualDrawType="stroke",r}return a(t,e),t.prototype.getInitialData=function(e,t){return Ex(this.getSource(),this,{useEncodeDefaulter:F(bI,null,this)})},t.prototype.getRawIndicesByActiveState=function(e){var t=this.coordinateSystem,r=this.getData(),i=[];return t.eachActiveState(r,(function(t,n){e===t&&i.push(r.getRawIndex(n))})),i},t.type="series.parallel",t.dependencies=["parallel"],t.defaultOption={zlevel:0,z:2,coordinateSystem:"parallel",parallelIndex:0,label:{show:!1},inactiveOpacity:.05,activeOpacity:1,lineStyle:{width:1,opacity:.45,type:"solid"},emphasis:{label:{show:!1}},progressive:500,smooth:!1,animationEasing:"linear"},t}(xp),kI=["lineStyle","opacity"],wI={seriesType:"parallel",reset:function(e,t){var r=e.coordinateSystem,i={normal:e.get(["lineStyle","opacity"]),active:e.get("activeOpacity"),inactive:e.get("inactiveOpacity")};return{progress:function(e,t){r.eachActiveState(t,(function(e,r){var n=i[e];if("normal"===e&&t.hasItemOption){var a=t.getItemModel(r).get(kI,!0);null!=a&&(n=a)}t.ensureUniqueItemVisual(r,"style").opacity=n}),e.start,e.end)}}}};function _I(e){!function(e){if(e.parallel)return;var t=!1;L(e.series,(function(e){e&&"parallel"===e.type&&(t=!0)})),t&&(e.parallel=[{}])}(e),function(e){L(tn(e.parallelAxis),(function(t){if(K(t)){var r=t.parallelIndex||0,i=tn(e.parallel)[r];i&&i.parallelAxisDefault&&T(t,i.parallelAxisDefault,!1)}}))}(e)}var SI=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return r.type=t.type,r}return a(t,e),t.prototype.render=function(e,t,r){this._model=e,this._api=r,this._handlers||(this._handlers={},L(OI,(function(e,t){r.getZr().on(t,this._handlers[t]=F(e,this))}),this)),Rp(this,"_throttledDispatchExpand",e.get("axisExpandRate"),"fixRate")},t.prototype.dispose=function(e,t){L(this._handlers,(function(e,r){t.getZr().off(r,e)})),this._handlers=null},t.prototype._throttledDispatchExpand=function(e){this._dispatchExpand(e)},t.prototype._dispatchExpand=function(e){e&&this._api.dispatchAction(I({type:"parallelAxisExpand"},e))},t.type="parallel",t}(wp),OI={mousedown:function(e){TI(this,"click")&&(this._mouseDownPoint=[e.offsetX,e.offsetY])},mouseup:function(e){var t=this._mouseDownPoint;if(TI(this,"click")&&t){var r=[e.offsetX,e.offsetY];if(Math.pow(t[0]-r[0],2)+Math.pow(t[1]-r[1],2)>5)return;var i=this._model.coordinateSystem.getSlidedAxisExpandWindow([e.offsetX,e.offsetY]);"none"!==i.behavior&&this._dispatchExpand({axisExpandWindow:i.axisExpandWindow})}this._mouseDownPoint=null},mousemove:function(e){if(!this._mouseDownPoint&&TI(this,"mousemove")){var t=this._model,r=t.coordinateSystem.getSlidedAxisExpandWindow([e.offsetX,e.offsetY]),i=r.behavior;"jump"===i&&this._throttledDispatchExpand.debounceNextCall(t.get("axisExpandDebounce")),this._throttledDispatchExpand("none"===i?null:{axisExpandWindow:r.axisExpandWindow,animation:"jump"===i?null:{duration:0}})}}};function TI(e,t){var r=e._model;return r.get("axisExpandable")&&r.get("axisExpandTriggerOn")===t}var CI=SI,II=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return r.type=t.type,r}return a(t,e),t.prototype.init=function(){e.prototype.init.apply(this,arguments),this.mergeOption({})},t.prototype.mergeOption=function(e){var t=this.option;e&&T(t,e,!0),this._initDimensions()},t.prototype.contains=function(e,t){var r=e.get("parallelIndex");return null!=r&&t.getComponent("parallel",r)===this},t.prototype.setAxisExpand=function(e){L(["axisExpandable","axisExpandCenter","axisExpandCount","axisExpandWidth","axisExpandWindow"],(function(t){e.hasOwnProperty(t)&&(this.option[t]=e[t])}),this)},t.prototype._initDimensions=function(){var e=this.dimensions=[],t=this.parallelAxisIndex=[];L(V(this.ecModel.queryComponents({mainType:"parallelAxis"}),(function(e){return(e.get("parallelIndex")||0)===this.componentIndex}),this),(function(r){e.push("dim"+r.get("dim")),t.push(r.componentIndex)}))},t.type="parallel",t.dependencies=["parallelAxis"],t.layoutMode="box",t.defaultOption={zlevel:0,z:0,left:80,top:60,right:80,bottom:60,layout:"horizontal",axisExpandable:!1,axisExpandCenter:null,axisExpandCount:0,axisExpandWidth:50,axisExpandRate:17,axisExpandDebounce:50,axisExpandSlideTriggerArea:[-.15,.05,.4],axisExpandTriggerOn:"click",parallelAxisDefault:null},t}(qh),MI=function(e){function t(t,r,i,n,a){var s=e.call(this,t,r,i)||this;return s.type=n||"value",s.axisIndex=a,s}return a(t,e),t.prototype.isHorizontal=function(){return"horizontal"!==this.coordinateSystem.getModel().get("layout")},t}(R_);function AI(e,t,r,i,n,a){e=e||0;var s=r[1]-r[0];if(null!=n&&(n=NI(n,[0,s])),null!=a&&(a=Math.max(a,null!=n?n:0)),"all"===i){var o=Math.abs(t[1]-t[0]);o=NI(o,[0,s]),n=a=NI(o,[n,a]),i=0}t[0]=NI(t[0],r),t[1]=NI(t[1],r);var u=EI(t,i);t[i]+=e;var c,d=n||0,h=r.slice();return u.sign<0?h[0]+=d:h[1]-=d,t[i]=NI(t[i],h),c=EI(t,i),null!=n&&(c.sign!==u.sign||c.span<n)&&(t[1-i]=t[i]+u.sign*n),c=EI(t,i),null!=a&&c.span>a&&(t[1-i]=t[i]+c.sign*a),t}function EI(e,t){var r=e[t]-e[1-t];return{span:Math.abs(r),sign:r>0?-1:r<0?1:t?-1:1}}function NI(e,t){return Math.min(null!=t[1]?t[1]:1/0,Math.max(null!=t[0]?t[0]:-1/0,e))}var PI=L,DI=Math.min,LI=Math.max,BI=Math.floor,RI=Math.ceil,VI=Li,GI=Math.PI;function FI(e,t){return DI(LI(e,t[0]),t[1])}function qI(e,t){var r=t.layoutLength/(t.axisCount-1);return{position:r*e,axisNameAvailableWidth:r,axisLabelShow:!0}}function jI(e,t){var r,i,n=t.layoutLength,a=t.axisExpandWidth,s=t.axisCount,o=t.axisCollapseWidth,u=t.winInnerIndices,c=o,d=!1;return e<u[0]?(r=e*o,i=o):e<=u[1]?(r=t.axisExpandWindow0Pos+e*a-t.axisExpandWindow[0],c=a,d=!0):(r=n-(s-1-e)*o,i=o),{position:r,axisNameAvailableWidth:c,axisLabelShow:d,nameTruncateMaxWidth:i}}var zI=function(){function e(e,t,r){this.type="parallel",this._axesMap=ce(),this._axesLayout={},this.dimensions=e.dimensions,this._model=e,this._init(e,t,r)}return e.prototype._init=function(e,t,r){var i=e.dimensions,n=e.parallelAxisIndex;PI(i,(function(e,r){var i=n[r],a=t.getComponent("parallelAxis",i),s=this._axesMap.set(e,new MI(e,v_(a),[0,0],a.get("type"),i)),o="category"===s.type;s.onBand=o&&a.get("boundaryGap"),s.inverse=a.get("inverse"),a.axis=s,s.model=a,s.coordinateSystem=a.coordinateSystem=this}),this)},e.prototype.update=function(e,t){this._updateAxesFromSeries(this._model,e)},e.prototype.containPoint=function(e){var t=this._makeLayoutInfo(),r=t.axisBase,i=t.layoutBase,n=t.pixelDimIndex,a=e[1-n],s=e[n];return a>=r&&a<=r+t.axisLength&&s>=i&&s<=i+t.layoutLength},e.prototype.getModel=function(){return this._model},e.prototype._updateAxesFromSeries=function(e,t){t.eachSeries((function(r){if(e.contains(r,t)){var i=r.getData();PI(this.dimensions,(function(e){var t=this._axesMap.get(e);t.scale.unionExtentFromData(i,i.mapDimension(e)),p_(t.scale,t.model)}),this)}}),this)},e.prototype.resize=function(e,t){this._rect=Ph(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()}),this._layoutAxes()},e.prototype.getRect=function(){return this._rect},e.prototype._makeLayoutInfo=function(){var e,t=this._model,r=this._rect,i=["x","y"],n=["width","height"],a=t.get("layout"),s="horizontal"===a?0:1,o=r[n[s]],u=[0,o],c=this.dimensions.length,d=FI(t.get("axisExpandWidth"),u),h=FI(t.get("axisExpandCount")||0,[0,c]),l=t.get("axisExpandable")&&c>3&&c>h&&h>1&&d>0&&o>0,f=t.get("axisExpandWindow");f?(e=FI(f[1]-f[0],u),f[1]=f[0]+e):(e=FI(d*(h-1),u),(f=[d*(t.get("axisExpandCenter")||BI(c/2))-e/2])[1]=f[0]+e);var p=(o-e)/(c-h);p<3&&(p=0);var v=[BI(VI(f[0]/d,1))+1,RI(VI(f[1]/d,1))-1],m=p/d*f[0];return{layout:a,pixelDimIndex:s,layoutBase:r[i[s]],layoutLength:o,axisBase:r[i[1-s]],axisLength:r[n[1-s]],axisExpandable:l,axisExpandWidth:d,axisCollapseWidth:p,axisExpandWindow:f,axisCount:c,winInnerIndices:v,axisExpandWindow0Pos:m}},e.prototype._layoutAxes=function(){var e=this._rect,t=this._axesMap,r=this.dimensions,i=this._makeLayoutInfo(),n=i.layout;t.each((function(e){var t=[0,i.axisLength],r=e.inverse?1:0;e.setExtent(t[r],t[1-r])})),PI(r,(function(t,r){var a=(i.axisExpandable?jI:qI)(r,i),s={horizontal:{x:a.position,y:i.axisLength},vertical:{x:0,y:a.position}},o={horizontal:GI/2,vertical:0},u=[s[n].x+e.x,s[n].y+e.y],c=o[n],d=[1,0,0,1,0,0];pt(d,d,c),ft(d,d,u),this._axesLayout[t]={position:u,rotation:c,transform:d,axisNameAvailableWidth:a.axisNameAvailableWidth,axisLabelShow:a.axisLabelShow,nameTruncateMaxWidth:a.nameTruncateMaxWidth,tickDirection:1,labelDirection:1}}),this)},e.prototype.getAxis=function(e){return this._axesMap.get(e)},e.prototype.dataToPoint=function(e,t){return this.axisCoordToPoint(this._axesMap.get(t).dataToCoord(e),t)},e.prototype.eachActiveState=function(e,t,r,i){null==r&&(r=0),null==i&&(i=e.count());var n=this._axesMap,a=this.dimensions,s=[],o=[];L(a,(function(t){s.push(e.mapDimension(t)),o.push(n.get(t).model)}));for(var u=this.hasAxisBrushed(),c=r;c<i;c++){var d=void 0;if(u){d="active";for(var h=e.getValues(s,c),l=0,f=a.length;l<f;l++){if("inactive"===o[l].getActiveState(h[l])){d="inactive";break}}}else d="normal";t(d,c)}},e.prototype.hasAxisBrushed=function(){for(var e=this.dimensions,t=this._axesMap,r=!1,i=0,n=e.length;i<n;i++)"normal"!==t.get(e[i]).model.getActiveState()&&(r=!0);return r},e.prototype.axisCoordToPoint=function(e,t){return Kc([e,0],this._axesLayout[t].transform)},e.prototype.getAxisLayout=function(e){return O(this._axesLayout[e])},e.prototype.getSlidedAxisExpandWindow=function(e){var t=this._makeLayoutInfo(),r=t.pixelDimIndex,i=t.axisExpandWindow.slice(),n=i[1]-i[0],a=[0,t.axisExpandWidth*(t.axisCount-1)];if(!this.containPoint(e))return{behavior:"none",axisExpandWindow:i};var s,o=e[r]-t.layoutBase-t.axisExpandWindow0Pos,u="slide",c=t.axisCollapseWidth,d=this._model.get("axisExpandSlideTriggerArea"),h=null!=d[0];if(c)h&&c&&o<n*d[0]?(u="jump",s=o-n*d[2]):h&&c&&o>n*(1-d[0])?(u="jump",s=o-n*(1-d[2])):(s=o-n*d[1])>=0&&(s=o-n*(1-d[1]))<=0&&(s=0),(s*=t.axisExpandWidth/c)?AI(s,i,a,"all"):u="none";else{var l=i[1]-i[0];(i=[LI(0,a[1]*o/l-l/2)])[1]=DI(a[1],i[0]+l),i[0]=i[1]-l}return{axisExpandWindow:i,behavior:u}},e}();var HI={create:function(e,t){var r=[];return e.eachComponent("parallel",(function(i,n){var a=new zI(i,e,t);a.name="parallel_"+n,a.resize(i,t),i.coordinateSystem=a,a.model=i,r.push(a)})),e.eachSeries((function(e){if("parallel"===e.get("coordinateSystem")){var t=e.getReferringComponents("parallel",gn).models[0];e.coordinateSystem=t.coordinateSystem}})),r}},UI=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return r.type=t.type,r.activeIntervals=[],r}return a(t,e),t.prototype.getAreaSelectStyle=function(){return Pn([["fill","color"],["lineWidth","borderWidth"],["stroke","borderColor"],["width","width"],["opacity","opacity"]])(this.getModel("areaSelectStyle"))},t.prototype.setActiveIntervals=function(e){var t=this.activeIntervals=O(e);if(t)for(var r=t.length-1;r>=0;r--)Bi(t[r])},t.prototype.getActiveState=function(e){var t=this.activeIntervals;if(!t.length)return"normal";if(null==e||isNaN(+e))return"inactive";if(1===t.length){var r=t[0];if(r[0]<=e&&e<=r[1])return"active"}else for(var i=0,n=t.length;i<n;i++)if(t[i][0]<=e&&e<=t[i][1])return"active";return"inactive"},t}(qh);P(UI,mw);var WI=UI,KI=!0,XI=Math.min,YI=Math.max,ZI=Math.pow,QI="globalPan",$I={w:[0,0],e:[0,1],n:[1,0],s:[1,1]},JI={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},eM={brushStyle:{lineWidth:2,stroke:"rgba(210,219,238,0.3)",fill:"#D2DBEE"},transformable:!0,brushMode:"single",removeOnClick:!1},tM=0,rM=function(e){function t(t){var r=e.call(this)||this;return r._track=[],r._covers=[],r._handlers={},r._zr=t,r.group=new Ti,r._uid="brushController_"+tM++,L(MM,(function(e,t){this._handlers[t]=F(e,this)}),r),r}return a(t,e),t.prototype.enableBrush=function(e){return this._brushType&&this._doDisableBrush(),e.brushType&&this._doEnableBrush(e),this},t.prototype._doEnableBrush=function(e){var t=this._zr;this._enableGlobalPan||function(e,t,r){BS(e)[t]=r}(t,QI,this._uid),L(this._handlers,(function(e,r){t.on(r,e)})),this._brushType=e.brushType,this._brushOption=T(O(eM),e,!0)},t.prototype._doDisableBrush=function(){var e=this._zr;!function(e,t,r){var i=BS(e);i[t]===r&&(i[t]=null)}(e,QI,this._uid),L(this._handlers,(function(t,r){e.off(r,t)})),this._brushType=this._brushOption=null},t.prototype.setPanels=function(e){if(e&&e.length){var t=this._panels={};L(e,(function(e){t[e.panelId]=O(e)}))}else this._panels=null;return this},t.prototype.mount=function(e){e=e||{},this._enableGlobalPan=e.enableGlobalPan;var t=this.group;return this._zr.add(t),t.attr({x:e.x||0,y:e.y||0,rotation:e.rotation||0,scaleX:e.scaleX||1,scaleY:e.scaleY||1}),this._transform=t.getLocalTransform(),this},t.prototype.updateCovers=function(e){e=B(e,(function(e){return T(O(eM),e,!0)}));var t=this._covers,r=this._covers=[],i=this,n=this._creatingCover;return new Kb(t,e,(function(e,t){return a(e.__brushOption,t)}),a).add(s).update(s).remove((function(e){t[e]!==n&&i.group.remove(t[e])})).execute(),this;function a(e,t){return(null!=e.id?e.id:"\0-brush-index-"+t)+"-"+e.brushType}function s(a,s){var o=e[a];if(null!=s&&t[s]===n)r[a]=t[s];else{var u=r[a]=null!=s?(t[s].__brushOption=o,t[s]):nM(i,iM(i,o));oM(i,u)}}},t.prototype.unmount=function(){return this.enableBrush(!1),hM(this),this._zr.remove(this.group),this},t.prototype.dispose=function(){this.unmount(),this.off()},t}(Le);function iM(e,t){var r=EM[t.brushType].createCover(e,t);return r.__brushOption=t,sM(r,t),e.group.add(r),r}function nM(e,t){var r=uM(t);return r.endCreating&&(r.endCreating(e,t),sM(t,t.__brushOption)),t}function aM(e,t){var r=t.__brushOption;uM(t).updateCoverShape(e,t,r.range,r)}function sM(e,t){var r=t.z;null==r&&(r=1e4),e.traverse((function(e){e.z=r,e.z2=r}))}function oM(e,t){uM(t).updateCommon(e,t),aM(e,t)}function uM(e){return EM[e.__brushOption.brushType]}function cM(e,t,r){var i,n=e._panels;if(!n)return KI;var a=e._transform;return L(n,(function(e){e.isTargetByCursor(t,r,a)&&(i=e)})),i}function dM(e,t){var r=e._panels;if(!r)return KI;var i=t.__brushOption.panelId;return null!=i?r[i]:KI}function hM(e){var t=e._covers,r=t.length;return L(t,(function(t){e.group.remove(t)}),e),t.length=0,!!r}function lM(e,t){var r=B(e._covers,(function(e){var t=e.__brushOption,r=O(t.range);return{brushType:t.brushType,panelId:t.panelId,range:r}}));e.trigger("brush",{areas:r,isEnd:!!t.isEnd,removeOnClick:!!t.removeOnClick})}function fM(e){var t=e.length-1;return t<0&&(t=0),[e[0],e[t]]}function pM(e,t,r,i){var n=new Ti;return n.add(new Ks({name:"main",style:yM(r),silent:!0,draggable:!0,cursor:"move",drift:q(kM,e,t,n,["n","s","w","e"]),ondragend:q(lM,t,{isEnd:!0})})),L(i,(function(r){n.add(new Ks({name:r.join(""),style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:q(kM,e,t,n,r),ondragend:q(lM,t,{isEnd:!0})}))})),n}function vM(e,t,r,i){var n=i.brushStyle.lineWidth||0,a=YI(n,6),s=r[0][0],o=r[1][0],u=s-n/2,c=o-n/2,d=r[0][1],h=r[1][1],l=d-a+n/2,f=h-a+n/2,p=d-s,v=h-o,m=p+n,g=v+n;gM(e,t,"main",s,o,p,v),i.transformable&&(gM(e,t,"w",u,c,a,g),gM(e,t,"e",l,c,a,g),gM(e,t,"n",u,c,m,a),gM(e,t,"s",u,f,m,a),gM(e,t,"nw",u,c,a,a),gM(e,t,"ne",l,c,a,a),gM(e,t,"sw",u,f,a,a),gM(e,t,"se",l,f,a,a))}function mM(e,t){var r=t.__brushOption,i=r.transformable,n=t.childAt(0);n.useStyle(yM(r)),n.attr({silent:!i,cursor:i?"move":"default"}),L([["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]],(function(r){var n=t.childOfName(r.join("")),a=1===r.length?xM(e,r[0]):function(e,t){var r=[xM(e,t[0]),xM(e,t[1])];return("e"===r[0]||"w"===r[0])&&r.reverse(),r.join("")}(e,r);n&&n.attr({silent:!i,invisible:!i,cursor:i?JI[a]+"-resize":null})}))}function gM(e,t,r,i,n,a,s){var o=t.childOfName(r);o&&o.setShape(function(e){var t=XI(e[0][0],e[1][0]),r=XI(e[0][1],e[1][1]),i=YI(e[0][0],e[1][0]),n=YI(e[0][1],e[1][1]);return{x:t,y:r,width:i-t,height:n-r}}(SM(e,t,[[i,n],[i+a,n+s]])))}function yM(e){return M({strokeNoScale:!0},e.brushStyle)}function bM(e,t,r,i){var n=[XI(e,r),XI(t,i)],a=[YI(e,r),YI(t,i)];return[[n[0],a[0]],[n[1],a[1]]]}function xM(e,t){return{left:"w",right:"e",top:"n",bottom:"s"}[Xc({w:"left",e:"right",n:"top",s:"bottom"}[t],function(e){return Wc(e.group)}(e))]}function kM(e,t,r,i,n,a){var s=r.__brushOption,o=e.toRectRange(s.range),u=_M(t,n,a);L(i,(function(e){var t=$I[e];o[t[0]][t[1]]+=u[t[0]]})),s.range=e.fromRectRange(bM(o[0][0],o[1][0],o[0][1],o[1][1])),oM(t,r),lM(t,{isEnd:!1})}function wM(e,t,r,i){var n=t.__brushOption.range,a=_M(e,r,i);L(n,(function(e){e[0]+=a[0],e[1]+=a[1]})),oM(e,t),lM(e,{isEnd:!1})}function _M(e,t,r){var i=e.group,n=i.transformCoordToLocal(t,r),a=i.transformCoordToLocal(0,0);return[n[0]-a[0],n[1]-a[1]]}function SM(e,t,r){var i=dM(e,t);return i&&i!==KI?i.clipPath(r,e._transform):O(r)}function OM(e){var t=e.event;t.preventDefault&&t.preventDefault()}function TM(e,t,r){return e.childOfName("main").contain(t,r)}function CM(e,t,r,i){var n,a=e._creatingCover,s=e._creatingPanel,o=e._brushOption;if(e._track.push(r.slice()),function(e){var t=e._track;if(!t.length)return!1;var r=t[t.length-1],i=t[0],n=r[0]-i[0],a=r[1]-i[1];return ZI(n*n+a*a,.5)>6}(e)||a){if(s&&!a){"single"===o.brushMode&&hM(e);var u=O(o);u.brushType=IM(u.brushType,s),u.panelId=s===KI?null:s.panelId,a=e._creatingCover=iM(e,u),e._covers.push(a)}if(a){var c=EM[IM(e._brushType,s)];a.__brushOption.range=c.getCreatingRange(SM(e,a,e._track)),i&&(nM(e,a),c.updateCommon(e,a)),aM(e,a),n={isEnd:i}}}else i&&"single"===o.brushMode&&o.removeOnClick&&cM(e,t,r)&&hM(e)&&(n={isEnd:i,removeOnClick:!0});return n}function IM(e,t){return"auto"===e?t.defaultBrushType:e}var MM={mousedown:function(e){if(this._dragging)AM(this,e);else if(!e.target||!e.target.draggable){OM(e);var t=this.group.transformCoordToLocal(e.offsetX,e.offsetY);this._creatingCover=null,(this._creatingPanel=cM(this,e,t))&&(this._dragging=!0,this._track=[t.slice()])}},mousemove:function(e){var t=e.offsetX,r=e.offsetY,i=this.group.transformCoordToLocal(t,r);if(function(e,t,r){if(e._brushType&&!function(e,t,r){var i=e._zr;return t<0||t>i.getWidth()||r<0||r>i.getHeight()}(e,t.offsetX,t.offsetY)){var i=e._zr,n=e._covers,a=cM(e,t,r);if(!e._dragging)for(var s=0;s<n.length;s++){var o=n[s].__brushOption;if(a&&(a===KI||o.panelId===a.panelId)&&EM[o.brushType].contain(n[s],r[0],r[1]))return}a&&i.setCursorStyle("crosshair")}}(this,e,i),this._dragging){OM(e);var n=CM(this,e,i,!1);n&&lM(this,n)}},mouseup:function(e){AM(this,e)}};function AM(e,t){if(e._dragging){OM(t);var r=t.offsetX,i=t.offsetY,n=e.group.transformCoordToLocal(r,i),a=CM(e,t,n,!0);e._dragging=!1,e._track=[],e._creatingCover=null,a&&lM(e,a)}}var EM={lineX:NM(0),lineY:NM(1),rect:{createCover:function(e,t){function r(e){return e}return pM({toRectRange:r,fromRectRange:r},e,t,[["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]])},getCreatingRange:function(e){var t=fM(e);return bM(t[1][0],t[1][1],t[0][0],t[0][1])},updateCoverShape:function(e,t,r,i){vM(e,t,r,i)},updateCommon:mM,contain:TM},polygon:{createCover:function(e,t){var r=new Ti;return r.add(new Ju({name:"main",style:yM(t),silent:!0})),r},getCreatingRange:function(e){return e},endCreating:function(e,t){t.remove(t.childAt(0)),t.add(new Zu({name:"main",draggable:!0,drift:q(wM,e,t),ondragend:q(lM,e,{isEnd:!0})}))},updateCoverShape:function(e,t,r,i){t.childAt(0).setShape({points:SM(e,t,r)})},updateCommon:mM,contain:TM}};function NM(e){return{createCover:function(t,r){return pM({toRectRange:function(t){var r=[t,[0,100]];return e&&r.reverse(),r},fromRectRange:function(t){return t[e]}},t,r,[[["w"],["e"]],[["n"],["s"]]][e])},getCreatingRange:function(t){var r=fM(t);return[XI(r[0][e],r[1][e]),YI(r[0][e],r[1][e])]},updateCoverShape:function(t,r,i,n){var a,s=dM(t,r);if(s!==KI&&s.getLinearBrushOtherExtent)a=s.getLinearBrushOtherExtent(e);else{var o=t._zr;a=[0,[o.getWidth(),o.getHeight()][1-e]]}var u=[i,a];e&&u.reverse(),vM(t,r,u,n)},updateCommon:mM,contain:TM}}var PM=rM;function DM(e){return e=RM(e),function(t){return Qc(t,e)}}function LM(e,t){return e=RM(e),function(r){var i=null!=t?t:r,n=i?e.width:e.height,a=i?e.x:e.y;return[a,a+(n||0)]}}function BM(e,t,r){var i=RM(e);return function(e,n){return i.contain(n[0],n[1])&&!HS(e,t,r)}}function RM(e){return _r.create(e)}var VM=["axisLine","axisTickLabel","axisName"];var GM=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return r.type=t.type,r}return a(t,e),t.prototype.init=function(t,r){e.prototype.init.apply(this,arguments),(this._brushController=new PM(r.getZr())).on("brush",F(this._onBrush,this))},t.prototype.render=function(e,t,r,i){if(!function(e,t,r){return r&&"axisAreaSelect"===r.type&&t.findComponents({mainType:"parallelAxis",query:r})[0]===e}(e,t,i)){this.axisModel=e,this.api=r,this.group.removeAll();var n=this._axisGroup;if(this._axisGroup=new Ti,this.group.add(this._axisGroup),e.get("show")){var a=function(e,t){return t.getComponent("parallel",e.get("parallelIndex"))}(e,t),s=a.coordinateSystem,o=e.getAreaSelectStyle(),u=o.width,c=e.axis.dim,d=I({strokeContainThreshold:u},s.getAxisLayout(c)),h=new J_(e,d);L(VM,h.add,h),this._axisGroup.add(h.getGroup()),this._refreshBrushController(d,o,e,a,u,r),Zc(n,this._axisGroup,e)}}},t.prototype._refreshBrushController=function(e,t,r,i,n,a){var s=r.axis.getExtent(),o=s[1]-s[0],u=Math.min(30,.1*Math.abs(o)),c=_r.create({x:s[0],y:-n/2,width:o,height:n});c.x-=u,c.width+=2*u,this._brushController.mount({enableGlobalPan:!0,rotation:e.rotation,x:e.position[0],y:e.position[1]}).setPanels([{panelId:"pl",clipPath:DM(c),isTargetByCursor:BM(c,a,i),getLinearBrushOtherExtent:LM(c,0)}]).enableBrush({brushType:"lineX",brushStyle:t,removeOnClick:!0}).updateCovers(function(e){var t=e.axis;return B(e.activeIntervals,(function(e){return{brushType:"lineX",panelId:"pl",range:[t.dataToCoord(e[0],!0),t.dataToCoord(e[1],!0)]}}))}(r))},t.prototype._onBrush=function(e){var t=e.areas,r=this.axisModel,i=r.axis,n=B(t,(function(e){return[i.coordToData(e.range[0],!0),i.coordToData(e.range[1],!0)]}));(!r.option.realtime===e.isEnd||e.removeOnClick)&&this.api.dispatchAction({type:"axisAreaSelect",parallelAxisId:r.id,intervals:n})},t.prototype.dispose=function(){this._brushController.dispose()},t.type="parallelAxis",t}(wp),FM={type:"axisAreaSelect",event:"axisAreaSelected"};var qM={type:"value",areaSelectStyle:{width:20,borderWidth:1,borderColor:"rgba(160,197,232)",color:"rgba(160,197,232)",opacity:.3},realtime:!0,z:10};function jM(e){e.registerComponentView(CI),e.registerComponentModel(II),e.registerCoordinateSystem("parallel",HI),e.registerPreprocessor(_I),e.registerComponentModel(WI),e.registerComponentView(GM),Ow(e,"parallel",WI,qM),function(e){e.registerAction(FM,(function(e,t){t.eachComponent({mainType:"parallelAxis",query:e},(function(t){t.axis.model.setActiveIntervals(e.intervals)}))})),e.registerAction("parallelAxisExpand",(function(e,t){t.eachComponent({mainType:"parallel",query:e},(function(t){t.setAxisExpand(e)}))}))}(e)}var zM=function(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.cpx2=0,this.cpy2=0,this.extent=0},HM=function(e){function t(t){return e.call(this,t)||this}return a(t,e),t.prototype.getDefaultShape=function(){return new zM},t.prototype.buildPath=function(e,t){var r=t.extent;e.moveTo(t.x1,t.y1),e.bezierCurveTo(t.cpx1,t.cpy1,t.cpx2,t.cpy2,t.x2,t.y2),"vertical"===t.orient?(e.lineTo(t.x2+r,t.y2),e.bezierCurveTo(t.cpx2+r,t.cpy2,t.cpx1+r,t.cpy1,t.x1+r,t.y1)):(e.lineTo(t.x2,t.y2+r),e.bezierCurveTo(t.cpx2,t.cpy2+r,t.cpx1,t.cpy1+r,t.x1,t.y1+r)),e.closePath()},t.prototype.highlight=function(){Lo(this)},t.prototype.downplay=function(){Bo(this)},t}(Ns);var UM=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return r.type=t.type,r._focusAdjacencyDisabled=!1,r}return a(t,e),t.prototype.render=function(e,t,r){var i=this,n=e.getGraph(),a=this.group,s=e.layoutInfo,o=s.width,u=s.height,c=e.getData(),d=e.getData("edge"),h=e.get("orient");this._model=e,a.removeAll(),a.x=s.x,a.y=s.y,n.eachEdge((function(t){var r=new HM,i=ao(r);i.dataIndex=t.dataIndex,i.seriesIndex=e.seriesIndex,i.dataType="edge";var n,s,c,l,f,p,v,m,g=t.getModel(),y=g.getModel("lineStyle"),b=y.get("curveness"),x=t.node1.getLayout(),k=t.node1.getModel(),w=k.get("localX"),_=k.get("localY"),S=t.node2.getLayout(),O=t.node2.getModel(),T=O.get("localX"),C=O.get("localY"),I=t.getLayout();switch(r.shape.extent=Math.max(1,I.dy),r.shape.orient=h,"vertical"===h?(n=(null!=w?w*o:x.x)+I.sy,s=(null!=_?_*u:x.y)+x.dy,c=(null!=T?T*o:S.x)+I.ty,f=n,p=s*(1-b)+(l=null!=C?C*u:S.y)*b,v=c,m=s*b+l*(1-b)):(n=(null!=w?w*o:x.x)+x.dx,s=(null!=_?_*u:x.y)+I.sy,f=n*(1-b)+(c=null!=T?T*o:S.x)*b,p=s,v=n*b+c*(1-b),m=l=(null!=C?C*u:S.y)+I.ty),r.setShape({x1:n,y1:s,x2:c,y2:l,cpx1:f,cpy1:p,cpx2:v,cpy2:m}),r.useStyle(y.getItemStyle()),r.style.fill){case"source":r.style.fill=t.node1.getVisual("color"),r.style.decal=t.node1.getVisual("style").decal;break;case"target":r.style.fill=t.node2.getVisual("color"),r.style.decal=t.node2.getVisual("style").decal;break;case"gradient":var M=t.node1.getVisual("color"),A=t.node2.getVisual("color");"string"===typeof M&&"string"===typeof A&&(r.style.fill=new pc(0,0,1,0,[{color:M,offset:0},{color:A,offset:1}]))}var E=g.getModel("emphasis");$o(r,g,"lineStyle",(function(e){return e.getItemStyle()})),a.add(r),d.setItemGraphicEl(t.dataIndex,r);var N=E.get("focus");Xo(r,"adjacency"===N?t.getAdjacentDataIndices():N,E.get("blurScope")),ao(r).dataType="edge"})),n.eachNode((function(t){var r=t.getLayout(),i=t.getModel(),n=i.get("localX"),s=i.get("localY"),d=i.getModel("emphasis"),h=new Ks({shape:{x:null!=n?n*o:r.x,y:null!=s?s*u:r.y,width:r.dx,height:r.dy},style:i.getModel("itemStyle").getItemStyle(),z2:10});od(h,ud(i),{labelFetcher:e,labelDataIndex:t.dataIndex,defaultText:t.id}),h.disableLabelAnimation=!0,h.setStyle("fill",t.getVisual("color")),h.setStyle("decal",t.getVisual("style").decal),$o(h,i),a.add(h),c.setItemGraphicEl(t.dataIndex,h),ao(h).dataType="node";var l=d.get("focus");Xo(h,"adjacency"===l?t.getAdjacentDataIndices():l,d.get("blurScope"))})),c.eachItemGraphicEl((function(t,n){c.getItemModel(n).get("draggable")&&(t.drift=function(t,a){i._focusAdjacencyDisabled=!0,this.shape.x+=t,this.shape.y+=a,this.dirty(),r.dispatchAction({type:"dragNode",seriesId:e.id,dataIndex:c.getRawIndex(n),localX:this.shape.x/o,localY:this.shape.y/u})},t.ondragend=function(){i._focusAdjacencyDisabled=!1},t.draggable=!0,t.cursor="move")})),!this._data&&e.isAnimationEnabled()&&a.setClipPath(function(e,t,r){var i=new Ks({shape:{x:e.x-10,y:e.y-10,width:0,height:e.height+20}});return qc(i,{shape:{width:e.width+20}},t,r),i}(a.getBoundingRect(),e,(function(){a.removeClipPath()}))),this._data=e.getData()},t.prototype.dispose=function(){},t.type="sankey",t}(Np),WM=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return r.type=t.type,r}return a(t,e),t.prototype.getInitialData=function(e,t){var r=e.edges||e.links,i=e.data||e.nodes,n=e.levels;this.levelModels=[];for(var a=this.levelModels,s=0;s<n.length;s++)null!=n[s].depth&&n[s].depth>=0&&(a[n[s].depth]=new Md(n[s],this,t));if(i&&r)return eI(i,r,this,!0,(function(e,t){e.wrapMethod("getItemModel",(function(e,t){var r=e.parentModel,i=r.getData().getItemLayout(t);if(i){var n=i.depth,a=r.levelModels[n];a&&(e.parentModel=a)}return e})),t.wrapMethod("getItemModel",(function(e,t){var r=e.parentModel,i=r.getGraph().getEdgeByIndex(t).node1.getLayout();if(i){var n=i.depth,a=r.levelModels[n];a&&(e.parentModel=a)}return e}))})).data},t.prototype.setNodePosition=function(e,t){var r=this.option.data[e];r.localX=t[0],r.localY=t[1]},t.prototype.getGraph=function(){return this.getData().graph},t.prototype.getEdgeData=function(){return this.getGraph().edgeData},t.prototype.formatTooltip=function(e,t,r){function i(e){return isNaN(e)||null==e}if("edge"===r){var n=this.getDataParams(e,r),a=n.data,s=n.value;return Jf("nameValue",{name:a.source+" -- "+a.target,value:s,noValue:i(s)})}var o=this.getGraph().getNodeByIndex(e).getLayout().value,u=this.getDataParams(e,r).data.name;return Jf("nameValue",{name:null!=u?u+"":null,value:o,noValue:i(o)})},t.prototype.optionUpdated=function(){this.option},t.prototype.getDataParams=function(t,r){var i=e.prototype.getDataParams.call(this,t,r);if(null==i.value&&"node"===r){var n=this.getGraph().getNodeByIndex(t).getLayout().value;i.value=n}return i},t.type="series.sankey",t.defaultOption={zlevel:0,z:2,coordinateSystem:"view",left:"5%",top:"5%",right:"20%",bottom:"5%",orient:"horizontal",nodeWidth:20,nodeGap:8,draggable:!0,layoutIterations:32,label:{show:!0,position:"right",fontSize:12},levels:[],nodeAlign:"justify",lineStyle:{color:"#314656",opacity:.2,curveness:.5},emphasis:{label:{show:!0},lineStyle:{opacity:.5}},select:{itemStyle:{borderColor:"#212121"}},animationEasing:"linear",animationDuration:1e3},t}(xp);function KM(e,t){e.eachSeriesByType("sankey",(function(e){var r=e.get("nodeWidth"),i=e.get("nodeGap"),n=function(e,t){return Ph(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})}(e,t);e.layoutInfo=n;var a=n.width,s=n.height,o=e.getGraph(),u=o.nodes,c=o.edges;!function(e){L(e,(function(e){var t=iA(e.outEdges,rA),r=iA(e.inEdges,rA),i=e.getValue()||0,n=Math.max(t,r,i);e.setLayout({value:n},!0)}))}(u),function(e,t,r,i,n,a,s,o,u){(function(e,t,r,i,n,a,s){for(var o=[],u=[],c=[],d=[],h=0,l=0;l<t.length;l++)o[l]=1;for(l=0;l<e.length;l++)u[l]=e[l].inEdges.length,0===u[l]&&c.push(e[l]);var f=-1;for(;c.length;){for(var p=0;p<c.length;p++){var v=c[p],m=v.hostGraph.data.getRawDataItem(v.dataIndex),g=null!=m.depth&&m.depth>=0;g&&m.depth>f&&(f=m.depth),v.setLayout({depth:g?m.depth:h},!0),"vertical"===a?v.setLayout({dy:r},!0):v.setLayout({dx:r},!0);for(var y=0;y<v.outEdges.length;y++){var b=v.outEdges[y];o[t.indexOf(b)]=0;var x=b.node2;0===--u[e.indexOf(x)]&&d.indexOf(x)<0&&d.push(x)}}++h,c=d,d=[]}for(l=0;l<o.length;l++)if(1===o[l])throw new Error("Sankey is a DAG, the original data has cycle!");var k=f>h-1?f:h-1;s&&"left"!==s&&function(e,t,r,i){if("right"===t){for(var n=[],a=e,s=0;a.length;){for(var o=0;o<a.length;o++){var u=a[o];u.setLayout({skNodeHeight:s},!0);for(var c=0;c<u.inEdges.length;c++){var d=u.inEdges[c];n.indexOf(d.node1)<0&&n.push(d.node1)}}a=n,n=[],++s}L(e,(function(e){XM(e)||e.setLayout({depth:Math.max(0,i-e.getLayout().skNodeHeight)},!0)}))}else"justify"===t&&function(e,t){L(e,(function(e){XM(e)||e.outEdges.length||e.setLayout({depth:t},!0)}))}(e,i)}(e,s,0,k);!function(e,t,r){L(e,(function(e){var i=e.getLayout().depth*t;"vertical"===r?e.setLayout({y:i},!0):e.setLayout({x:i},!0)}))}(e,"vertical"===a?(n-r)/k:(i-r)/k,a)})(e,t,r,n,a,o,u),function(e,t,r,i,n,a,s){var o=function(e,t){var r=[],i="vertical"===t?"y":"x",n=kn(e,(function(e){return e.getLayout()[i]}));return n.keys.sort((function(e,t){return e-t})),L(n.keys,(function(e){r.push(n.buckets.get(e))})),r}(e,s);(function(e,t,r,i,n,a){var s=1/0;L(e,(function(e){var t=e.length,o=0;L(e,(function(e){o+=e.getLayout().value}));var u="vertical"===a?(i-(t-1)*n)/o:(r-(t-1)*n)/o;u<s&&(s=u)})),L(e,(function(e){L(e,(function(e,t){var r=e.getLayout().value*s;"vertical"===a?(e.setLayout({x:t},!0),e.setLayout({dx:r},!0)):(e.setLayout({y:t},!0),e.setLayout({dy:r},!0))}))})),L(t,(function(e){var t=+e.getValue()*s;e.setLayout({dy:t},!0)}))})(o,t,r,i,n,s),YM(o,n,r,i,s);for(var u=1;a>0;a--)ZM(o,u*=.99,s),YM(o,n,r,i,s),nA(o,u,s),YM(o,n,r,i,s)}(e,t,a,n,i,s,o),function(e,t){var r="vertical"===t?"x":"y";L(e,(function(e){e.outEdges.sort((function(e,t){return e.node2.getLayout()[r]-t.node2.getLayout()[r]})),e.inEdges.sort((function(e,t){return e.node1.getLayout()[r]-t.node1.getLayout()[r]}))})),L(e,(function(e){var t=0,r=0;L(e.outEdges,(function(e){e.setLayout({sy:t},!0),t+=e.getLayout().dy})),L(e.inEdges,(function(e){e.setLayout({ty:r},!0),r+=e.getLayout().dy}))}))}(e,o)}(u,c,r,i,a,s,0!==V(u,(function(e){return 0===e.getLayout().value})).length?0:e.get("layoutIterations"),e.get("orient"),e.get("nodeAlign"))}))}function XM(e){var t=e.hostGraph.data.getRawDataItem(e.dataIndex);return null!=t.depth&&t.depth>=0}function YM(e,t,r,i,n){var a="vertical"===n?"x":"y";L(e,(function(e){var s,o,u;e.sort((function(e,t){return e.getLayout()[a]-t.getLayout()[a]}));for(var c=0,d=e.length,h="vertical"===n?"dx":"dy",l=0;l<d;l++)(u=c-(o=e[l]).getLayout()[a])>0&&(s=o.getLayout()[a]+u,"vertical"===n?o.setLayout({x:s},!0):o.setLayout({y:s},!0)),c=o.getLayout()[a]+o.getLayout()[h]+t;if((u=c-t-("vertical"===n?i:r))>0){s=o.getLayout()[a]-u,"vertical"===n?o.setLayout({x:s},!0):o.setLayout({y:s},!0),c=s;for(l=d-2;l>=0;--l)(u=(o=e[l]).getLayout()[a]+o.getLayout()[h]+t-c)>0&&(s=o.getLayout()[a]-u,"vertical"===n?o.setLayout({x:s},!0):o.setLayout({y:s},!0)),c=o.getLayout()[a]}}))}function ZM(e,t,r){L(e.slice().reverse(),(function(e){L(e,(function(e){if(e.outEdges.length){var i=iA(e.outEdges,QM,r)/iA(e.outEdges,rA);if(isNaN(i)){var n=e.outEdges.length;i=n?iA(e.outEdges,$M,r)/n:0}if("vertical"===r){var a=e.getLayout().x+(i-tA(e,r))*t;e.setLayout({x:a},!0)}else{var s=e.getLayout().y+(i-tA(e,r))*t;e.setLayout({y:s},!0)}}}))}))}function QM(e,t){return tA(e.node2,t)*e.getValue()}function $M(e,t){return tA(e.node2,t)}function JM(e,t){return tA(e.node1,t)*e.getValue()}function eA(e,t){return tA(e.node1,t)}function tA(e,t){return"vertical"===t?e.getLayout().x+e.getLayout().dx/2:e.getLayout().y+e.getLayout().dy/2}function rA(e){return e.getValue()}function iA(e,t,r){for(var i=0,n=e.length,a=-1;++a<n;){var s=+t(e[a],r);isNaN(s)||(i+=s)}return i}function nA(e,t,r){L(e,(function(e){L(e,(function(e){if(e.inEdges.length){var i=iA(e.inEdges,JM,r)/iA(e.inEdges,rA);if(isNaN(i)){var n=e.inEdges.length;i=n?iA(e.inEdges,eA,r)/n:0}if("vertical"===r){var a=e.getLayout().x+(i-tA(e,r))*t;e.setLayout({x:a},!0)}else{var s=e.getLayout().y+(i-tA(e,r))*t;e.setLayout({y:s},!0)}}}))}))}function aA(e){e.eachSeriesByType("sankey",(function(e){var t=e.getGraph().nodes;if(t.length){var r=1/0,i=-1/0;L(t,(function(e){var t=e.getLayout().value;t<r&&(r=t),t>i&&(i=t)})),L(t,(function(t){var n=new PT({type:"color",mappingMethod:"linear",dataExtent:[r,i],visual:e.get("color")}).mapValueToVisual(t.getLayout().value),a=t.getModel().get(["itemStyle","color"]);null!=a?(t.setVisual("color",a),t.setVisual("style",{fill:a})):(t.setVisual("color",n),t.setVisual("style",{fill:n}))}))}}))}var sA=function(){function e(){}return e.prototype.getInitialData=function(e,t){var r,i,n=t.getComponent("xAxis",this.get("xAxisIndex")),a=t.getComponent("yAxis",this.get("yAxisIndex")),s=n.get("type"),o=a.get("type");"category"===s?(e.layout="horizontal",r=n.getOrdinalMeta(),i=!0):"category"===o?(e.layout="vertical",r=a.getOrdinalMeta(),i=!0):e.layout=e.layout||"horizontal";var u=["x","y"],c="horizontal"===e.layout?0:1,d=this._baseAxisDim=u[c],h=u[1-c],l=[n,a],f=l[c].get("type"),p=l[1-c].get("type"),v=e.data;if(v&&i){var m=[];L(v,(function(e,t){var r;j(e)?(r=e.slice(),e.unshift(t)):j(e.value)?(r=e.value.slice(),e.value.unshift(t)):r=e,m.push(r)})),e.data=m}var g=this.defaultValueDimensions,y=[{name:d,type:Yb(f),ordinalMeta:r,otherDims:{tooltip:!1,itemName:0},dimsDef:["base"]},{name:h,type:Yb(p),dimsDef:g.slice()}];return ow(this,{coordDimensions:y,dimensionsCount:g.length+1,encodeDefaulter:q(nl,y,this)})},e.prototype.getBaseAxis=function(){var e=this._baseAxisDim;return this.ecModel.getComponent(e+"Axis",this.get(e+"AxisIndex")).axis},e}(),oA=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return r.type=t.type,r.defaultValueDimensions=[{name:"min",defaultTooltip:!0},{name:"Q1",defaultTooltip:!0},{name:"median",defaultTooltip:!0},{name:"Q3",defaultTooltip:!0},{name:"max",defaultTooltip:!0}],r.visualDrawType="stroke",r}return a(t,e),t.type="series.boxplot",t.dependencies=["xAxis","yAxis","grid"],t.defaultOption={zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,boxWidth:[7,50],itemStyle:{color:"#fff",borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2,shadowBlur:5,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}},animationDuration:800},t}(xp);P(oA,sA,!0);var uA=oA,cA=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return r.type=t.type,r}return a(t,e),t.prototype.render=function(e,t,r){var i=e.getData(),n=this.group,a=this._data;this._data||n.removeAll();var s="horizontal"===e.get("layout")?1:0;i.diff(a).add((function(e){if(i.hasValue(e)){var t=lA(i.getItemLayout(e),i,e,s,!0);i.setItemGraphicEl(e,t),n.add(t)}})).update((function(e,t){var r=a.getItemGraphicEl(t);if(i.hasValue(e)){var o=i.getItemLayout(e);r?fA(o,r,i,e):r=lA(o,i,e,s),n.add(r),i.setItemGraphicEl(e,r)}else n.remove(r)})).remove((function(e){var t=a.getItemGraphicEl(e);t&&n.remove(t)})).execute(),this._data=i},t.prototype.remove=function(e){var t=this.group,r=this._data;this._data=null,r&&r.eachItemGraphicEl((function(e){e&&t.remove(e)}))},t.type="boxplot",t}(Np),dA=function(){},hA=function(e){function t(t){var r=e.call(this,t)||this;return r.type="boxplotBoxPath",r}return a(t,e),t.prototype.getDefaultShape=function(){return new dA},t.prototype.buildPath=function(e,t){var r=t.points,i=0;for(e.moveTo(r[i][0],r[i][1]),i++;i<4;i++)e.lineTo(r[i][0],r[i][1]);for(e.closePath();i<r.length;i++)e.moveTo(r[i][0],r[i][1]),i++,e.lineTo(r[i][0],r[i][1])},t}(Ns);function lA(e,t,r,i,n){var a=e.ends,s=new hA({shape:{points:n?pA(a,i,e):a}});return fA(e,s,t,r,n),s}function fA(e,t,r,n,a){var s=r.hostModel;(0,i[a?"initProps":"updateProps"])(t,{shape:{points:e.ends}},s,n),t.useStyle(r.getItemVisual(n,"style")),t.style.strokeNoScale=!0,t.z2=100;var o=r.getItemModel(n);$o(t,o),Xo(t,o.get(["emphasis","focus"]),o.get(["emphasis","blurScope"]))}function pA(e,t,r){return B(e,(function(e){return(e=e.slice())[t]=r.initBaseline,e}))}var vA=cA;function mA(e,t){}var gA=L;function yA(e){var t=function(e){var t=[],r=[];return e.eachSeriesByType("boxplot",(function(e){var i=e.getBaseAxis(),n=E(r,i);n<0&&(n=r.length,r[n]=i,t[n]={axis:i,seriesModels:[]}),t[n].seriesModels.push(e)})),t}(e);gA(t,(function(e){var t=e.seriesModels;t.length&&(!function(e){var t,r,i=e.axis,n=e.seriesModels,a=n.length,s=e.boxWidthList=[],o=e.boxOffsetList=[],u=[];if("category"===i.type)r=i.getBandWidth();else{var c=0;gA(n,(function(e){c=Math.max(c,e.getData().count())})),t=i.getExtent(),Math.abs(t[1]-t[0])}gA(n,(function(e){var t=e.get("boxWidth");j(t)||(t=[t,t]),u.push([Di(t[0],r)||0,Di(t[1],r)||0])}));var d=.8*r-2,h=d/a*.3,l=(d-h*(a-1))/a,f=l/2-d/2;gA(n,(function(e,t){o.push(f),f+=h+l,s.push(Math.min(Math.max(l,u[t][0]),u[t][1]))}))}(e),gA(t,(function(t,r){!function(e,t,r){var i=e.coordinateSystem,n=e.getData(),a=r/2,s="horizontal"===e.get("layout")?0:1,o=1-s,u=["x","y"],c=n.mapDimension(u[s]),d=n.mapDimensionsAll(u[o]);if(null==c||d.length<5)return;for(var h=0;h<n.count();h++){var l=n.get(c,h),f=b(l,d[2],h),p=b(l,d[0],h),v=b(l,d[1],h),m=b(l,d[3],h),g=b(l,d[4],h),y=[];x(y,v,!1),x(y,m,!0),y.push(p,v,g,m),k(y,p),k(y,g),k(y,f),n.setItemLayout(h,{initBaseline:f[o],ends:y})}function b(e,r,a){var u,c=n.get(r,a),d=[];return d[s]=e,d[o]=c,isNaN(e)||isNaN(c)?u=[NaN,NaN]:(u=i.dataToPoint(d))[s]+=t,u}function x(e,t,r){var i=t.slice(),n=t.slice();i[s]+=a,n[s]-=a,r?e.push(i,n):e.push(n,i)}function k(e,t){var r=t.slice(),i=t.slice();r[s]-=a,i[s]+=a,e.push(r,i)}}(t,e.boxOffsetList[r],e.boxWidthList[r])})))}))}var bA={type:"echarts:boxplot",transform:function(e){var t=e.upstream;if(t.sourceFormat!==Kh){0,Mf("")}var r=function(e,t){for(var r=[],i=[],n=(t=t||{}).boundIQR,a="none"===n||0===n,s=0;s<e.length;s++){var o=Bi(e[s].slice()),u=Wi(o,.25),c=Wi(o,.5),d=Wi(o,.75),h=o[0],l=o[o.length-1],f=(null==n?1.5:n)*(d-u),p=a?h:Math.max(h,u-f),v=a?l:Math.min(l,d+f),m=t.itemNameFormatter,g=z(m)?m({value:s}):H(m)?m.replace("{value}",s+""):s+"";r.push([g,p,u,c,d,v]);for(var y=0;y<o.length;y++){var b=o[y];if(b<p||b>v){var x=[g,b];i.push(x)}}}return{boxData:r,outliers:i}}(t.getRawData(),e.config);return[{dimensions:["ItemName","Low","Q1","Q2","Q3","High"],data:r.boxData},{data:r.outliers}]}};var xA=["color","borderColor"],kA=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return r.type=t.type,r}return a(t,e),t.prototype.render=function(e,t,r){this.group.removeClipPath(),this._updateDrawMode(e),this._isLargeDraw?this._renderLarge(e):this._renderNormal(e)},t.prototype.incrementalPrepareRender=function(e,t,r){this._clear(),this._updateDrawMode(e)},t.prototype.incrementalRender=function(e,t,r,i){this._isLargeDraw?this._incrementalRenderLarge(e,t):this._incrementalRenderNormal(e,t)},t.prototype._updateDrawMode=function(e){var t=e.pipelineContext.large;null!=this._isLargeDraw&&t===this._isLargeDraw||(this._isLargeDraw=t,this._clear())},t.prototype._renderNormal=function(e){var t=e.getData(),r=this._data,i=this.group,n=t.getLayout("isSimpleBox"),a=e.get("clip",!0),s=e.coordinateSystem,o=s.getArea&&s.getArea();this._data||i.removeAll(),t.diff(r).add((function(r){if(t.hasValue(r)){var s=t.getItemLayout(r);if(a&&OA(o,s))return;var u=SA(s,r,!0);qc(u,{shape:{points:s.ends}},e,r),TA(u,t,r,n),i.add(u),t.setItemGraphicEl(r,u)}})).update((function(s,u){var c=r.getItemGraphicEl(u);if(t.hasValue(s)){var d=t.getItemLayout(s);a&&OA(o,d)?i.remove(c):(c?Fc(c,{shape:{points:d.ends}},e,s):c=SA(d,s),TA(c,t,s,n),i.add(c),t.setItemGraphicEl(s,c))}else i.remove(c)})).remove((function(e){var t=r.getItemGraphicEl(e);t&&i.remove(t)})).execute(),this._data=t},t.prototype._renderLarge=function(e){this._clear(),AA(e,this.group);var t=e.get("clip",!0)?rk(e.coordinateSystem,!1,e):null;t?this.group.setClipPath(t):this.group.removeClipPath()},t.prototype._incrementalRenderNormal=function(e,t){for(var r,i=t.getData(),n=i.getLayout("isSimpleBox");null!=(r=e.next());){var a=SA(i.getItemLayout(r),r);TA(a,i,r,n),a.incremental=!0,this.group.add(a)}},t.prototype._incrementalRenderLarge=function(e,t){AA(t,this.group,!0)},t.prototype.remove=function(e){this._clear()},t.prototype._clear=function(){this.group.removeAll(),this._data=null},t.type="candlestick",t}(Np),wA=function(){},_A=function(e){function t(t){var r=e.call(this,t)||this;return r.type="normalCandlestickBox",r}return a(t,e),t.prototype.getDefaultShape=function(){return new wA},t.prototype.buildPath=function(e,t){var r=t.points;this.__simpleBox?(e.moveTo(r[4][0],r[4][1]),e.lineTo(r[6][0],r[6][1])):(e.moveTo(r[0][0],r[0][1]),e.lineTo(r[1][0],r[1][1]),e.lineTo(r[2][0],r[2][1]),e.lineTo(r[3][0],r[3][1]),e.closePath(),e.moveTo(r[4][0],r[4][1]),e.lineTo(r[5][0],r[5][1]),e.moveTo(r[6][0],r[6][1]),e.lineTo(r[7][0],r[7][1]))},t}(Ns);function SA(e,t,r){var i=e.ends;return new _A({shape:{points:r?CA(i,e):i},z2:100})}function OA(e,t){for(var r=!0,i=0;i<t.ends.length;i++)if(e.contain(t.ends[i][0],t.ends[i][1])){r=!1;break}return r}function TA(e,t,r,i){var n=t.getItemModel(r);e.useStyle(t.getItemVisual(r,"style")),e.style.strokeNoScale=!0,e.__simpleBox=i,$o(e,n)}function CA(e,t){return B(e,(function(e){return(e=e.slice())[1]=t.initBaseline,e}))}var IA=function(){},MA=function(e){function t(t){var r=e.call(this,t)||this;return r.type="largeCandlestickBox",r}return a(t,e),t.prototype.getDefaultShape=function(){return new IA},t.prototype.buildPath=function(e,t){for(var r=t.points,i=0;i<r.length;)if(this.__sign===r[i++]){var n=r[i++];e.moveTo(n,r[i++]),e.lineTo(n,r[i++])}else i+=3},t}(Ns);function AA(e,t,r){var i=e.getData(),n=i.getLayout("largePoints"),a=new MA({shape:{points:n},__sign:1});t.add(a);var s=new MA({shape:{points:n},__sign:-1});t.add(s),EA(1,a,e,i),EA(-1,s,e,i),r&&(a.incremental=!0,s.incremental=!0)}function EA(e,t,r,i){var n=r.get(["itemStyle",e>0?"borderColor":"borderColor0"])||r.get(["itemStyle",e>0?"color":"color0"]),a=r.getModel("itemStyle").getItemStyle(xA);t.useStyle(a),t.style.fill=null,t.style.stroke=n}var NA=kA,PA=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return r.type=t.type,r.defaultValueDimensions=[{name:"open",defaultTooltip:!0},{name:"close",defaultTooltip:!0},{name:"lowest",defaultTooltip:!0},{name:"highest",defaultTooltip:!0}],r}return a(t,e),t.prototype.getShadowDim=function(){return"open"},t.prototype.brushSelector=function(e,t,r){var i=t.getItemLayout(e);return i&&r.rect(i.brushRect)},t.type="series.candlestick",t.dependencies=["xAxis","yAxis","grid"],t.defaultOption={zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,clip:!0,itemStyle:{color:"#eb5454",color0:"#47b262",borderColor:"#eb5454",borderColor0:"#47b262",borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2}},barMaxWidth:null,barMinWidth:null,barWidth:null,large:!0,largeThreshold:600,progressive:3e3,progressiveThreshold:1e4,progressiveChunkMode:"mod",animationEasing:"linear",animationDuration:300},t}(xp);P(PA,sA,!0);var DA=PA;function LA(e){e&&j(e.series)&&L(e.series,(function(e){K(e)&&"k"===e.type&&(e.type="candlestick")}))}var BA=["itemStyle","borderColor"],RA=["itemStyle","borderColor0"],VA=["itemStyle","color"],GA=["itemStyle","color0"],FA={seriesType:"candlestick",plan:_p(),performRawSeries:!0,reset:function(e,t){function r(e,t){return t.get(e>0?VA:GA)}function i(e,t){return t.get(e>0?BA:RA)}e.getData();if(!t.isSeriesFiltered(e))return!e.pipelineContext.large&&{progress:function(e,t){for(var n;null!=(n=e.next());){var a=t.getItemModel(n),s=t.getItemLayout(n).sign,o=a.getItemStyle();o.fill=r(s,a),o.stroke=i(s,a)||o.fill,I(t.ensureUniqueItemVisual(n,"style"),o)}}}}},qA="undefined"!==typeof Float32Array?Float32Array:Array;function jA(e,t,r,i,n){return r>i?-1:r<i?1:t>0?e.get(n,t-1)<=i?1:-1:1}var zA={seriesType:"candlestick",plan:_p(),reset:function(e){var t=e.coordinateSystem,r=e.getData(),i=function(e,t){var r,i=e.getBaseAxis(),n="category"===i.type?i.getBandWidth():(r=i.getExtent(),Math.abs(r[1]-r[0])/t.count()),a=Di(J(e.get("barMaxWidth"),n),n),s=Di(J(e.get("barMinWidth"),1),n),o=e.get("barWidth");return null!=o?Di(o,n):Math.max(Math.min(n/2,a),s)}(e,r),n=["x","y"],a=r.mapDimension(n[0]),s=r.mapDimensionsAll(n[1]),o=s[0],u=s[1],c=s[2],d=s[3];if(r.setLayout({candleWidth:i,isSimpleBox:i<=1.3}),!(null==a||s.length<4))return{progress:e.pipelineContext.large?function(e,r){var i,n,s=new qA(4*e.count),h=0,l=[],f=[];for(;null!=(n=e.next());){var p=r.get(a,n),v=r.get(o,n),m=r.get(u,n),g=r.get(c,n),y=r.get(d,n);isNaN(p)||isNaN(g)||isNaN(y)?(s[h++]=NaN,h+=3):(s[h++]=jA(r,n,v,m,u),l[0]=p,l[1]=g,i=t.dataToPoint(l,null,f),s[h++]=i?i[0]:NaN,s[h++]=i?i[1]:NaN,l[1]=y,i=t.dataToPoint(l,null,f),s[h++]=i?i[1]:NaN)}r.setLayout("largePoints",s)}:function(e,r){var n;for(;null!=(n=e.next());){var s=r.get(a,n),h=r.get(o,n),l=r.get(u,n),f=r.get(c,n),p=r.get(d,n),v=Math.min(h,l),m=Math.max(h,l),g=w(v,s),y=w(m,s),b=w(f,s),x=w(p,s),k=[];_(k,y,0),_(k,g,1),k.push(O(x),O(y),O(b),O(g)),r.setItemLayout(n,{sign:jA(r,n,h,l,u),initBaseline:h>l?y[1]:g[1],ends:k,brushRect:S(f,p,s)})}function w(e,r){var i=[];return i[0]=r,i[1]=e,isNaN(r)||isNaN(e)?[NaN,NaN]:t.dataToPoint(i)}function _(e,t,r){var n=t.slice(),a=t.slice();n[0]=Vc(n[0]+i/2,1,!1),a[0]=Vc(a[0]-i/2,1,!0),r?e.push(n,a):e.push(a,n)}function S(e,t,r){var n=w(e,r),a=w(t,r);return n[0]-=i/2,a[0]-=i/2,{x:n[0],y:n[1],width:i,height:a[1]-n[1]}}function O(e){return e[0]=Vc(e[0],1),e}}}}};function HA(e,t){var r=t.rippleEffectColor||t.color;e.eachChild((function(e){e.attr({z:t.z,zlevel:t.zlevel,style:{stroke:"stroke"===t.brushType?r:null,fill:"fill"===t.brushType?r:null}})}))}var UA=function(e){function t(t,r){var i=e.call(this)||this,n=new Bx(t,r),a=new Ti;return i.add(n),i.add(a),i.updateData(t,r),i}return a(t,e),t.prototype.stopEffectAnimation=function(){this.childAt(1).removeAll()},t.prototype.startEffectAnimation=function(e){for(var t=e.symbolType,r=e.color,i=this.childAt(1),n=0;n<3;n++){var a=gm(t,-1,-1,2,2,r);a.attr({style:{strokeNoScale:!0},z2:99,silent:!0,scaleX:.5,scaleY:.5});var s=-n/3*e.period+e.effectOffset;a.animate("",!0).when(e.period,{scaleX:e.rippleScale/2,scaleY:e.rippleScale/2}).delay(s).start(),a.animateStyle(!0).when(e.period,{opacity:0}).delay(s).start(),i.add(a)}HA(i,e)},t.prototype.updateEffectAnimation=function(e){for(var t=this._effectCfg,r=this.childAt(1),i=["symbolType","period","rippleScale"],n=0;n<i.length;n++){var a=i[n];if(t[a]!==e[a])return this.stopEffectAnimation(),void this.startEffectAnimation(e)}HA(r,e)},t.prototype.highlight=function(){Lo(this)},t.prototype.downplay=function(){Bo(this)},t.prototype.updateData=function(e,t){var r=this,i=e.hostModel;this.childAt(0).updateData(e,t);var n=this.childAt(1),a=e.getItemModel(t),s=e.getItemVisual(t,"symbol"),o=function(e){return j(e)||(e=[+e,+e]),e}(e.getItemVisual(t,"symbolSize")),u=e.getItemVisual(t,"style"),c=u&&u.fill;n.setScale(o),n.traverse((function(e){e.setStyle("fill",c)}));var d=e.getItemVisual(t,"symbolOffset");d&&(j(d)||(d=[d,d]),n.x=Di(d[0],o[0]),n.y=Di(J(d[1],d[0])||0,o[1]));var h=e.getItemVisual(t,"symbolRotate");n.rotation=(h||0)*Math.PI/180||0;var l={};l.showEffectOn=i.get("showEffectOn"),l.rippleScale=a.get(["rippleEffect","scale"]),l.brushType=a.get(["rippleEffect","brushType"]),l.period=1e3*a.get(["rippleEffect","period"]),l.effectOffset=t/e.count(),l.z=i.getShallow("z")||0,l.zlevel=i.getShallow("zlevel")||0,l.symbolType=s,l.color=c,l.rippleEffectColor=a.get(["rippleEffect","color"]),this.off("mouseover").off("mouseout").off("emphasis").off("normal"),"render"===l.showEffectOn?(this._effectCfg?this.updateEffectAnimation(l):this.startEffectAnimation(l),this._effectCfg=l):(this._effectCfg=null,this.stopEffectAnimation(),this.onHoverStateChange=function(e){"emphasis"===e?"render"!==l.showEffectOn&&r.startEffectAnimation(l):"normal"===e&&"render"!==l.showEffectOn&&r.stopEffectAnimation()}),this._effectCfg=l,Xo(this)},t.prototype.fadeOut=function(e){this.off("mouseover").off("mouseout"),e&&e()},t}(Ti);N(UA,Ti);var WA=UA,KA=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return r.type=t.type,r}return a(t,e),t.prototype.init=function(){this._symbolDraw=new Fx(WA)},t.prototype.render=function(e,t,r){var i=e.getData(),n=this._symbolDraw;n.updateData(i,{clipShape:this._getClipShape(e)}),this.group.add(n.group)},t.prototype._getClipShape=function(e){var t=e.coordinateSystem,r=t&&t.getArea&&t.getArea();return e.get("clip",!0)?r:null},t.prototype.updateTransform=function(e,t,r){var i=e.getData();this.group.dirty();var n=fk("").reset(e,t,r);n.progress&&n.progress({start:0,end:i.count(),count:i.count()},i),this._symbolDraw.updateLayout()},t.prototype._updateGroupTransform=function(e){var t=e.coordinateSystem;t&&t.getRoamTransform&&(this.group.transform=function(e){var t=[1,0,0,1,0,0];return ht(t,e),t}(t.getRoamTransform()),this.group.decomposeTransform())},t.prototype.remove=function(e,t){this._symbolDraw&&this._symbolDraw.remove(!0)},t.type="effectScatter",t}(Np),XA=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return r.type=t.type,r.hasSymbolVisual=!0,r}return a(t,e),t.prototype.getInitialData=function(e,t){return Ex(this.getSource(),this,{useEncodeDefaulter:!0})},t.prototype.brushSelector=function(e,t,r){return r.point(t.getItemLayout(e))},t.type="series.effectScatter",t.dependencies=["grid","polar"],t.defaultOption={coordinateSystem:"cartesian2d",zlevel:0,z:2,legendHoverLink:!0,effectType:"ripple",progressive:0,showEffectOn:"render",clip:!0,rippleEffect:{period:4,scale:2.5,brushType:"fill"},symbolSize:10},t}(xp);var YA=function(e){function t(t,r,i){var n=e.call(this)||this;return n.add(n.createLine(t,r,i)),n._updateEffectSymbol(t,r),n}return a(t,e),t.prototype.createLine=function(e,t,r){return new PC(e,t,r)},t.prototype._updateEffectSymbol=function(e,t){var r=e.getItemModel(t).getModel("effect"),i=r.get("symbolSize"),n=r.get("symbol");j(i)||(i=[i,i]);var a=e.getItemVisual(t,"style"),s=r.get("color")||a&&a.stroke,o=this.childAt(1);this._symbolType!==n&&(this.remove(o),(o=gm(n,-.5,-.5,1,1,s)).z2=100,o.culling=!0,this.add(o)),o&&(o.setStyle("shadowColor",s),o.setStyle(r.getItemStyle(["color"])),o.scaleX=i[0],o.scaleY=i[1],o.setColor(s),this._symbolType=n,this._symbolScale=i,this._updateEffectAnimation(e,r,t))},t.prototype._updateEffectAnimation=function(e,t,r){var i=this.childAt(1);if(i){var n=this,a=e.getItemLayout(r),s=1e3*t.get("period"),o=t.get("loop"),u=t.get("constantSpeed"),c=$(t.get("delay"),(function(t){return t/e.count()*s/3}));if(i.ignore=!0,this._updateAnimationPoints(i,a),u>0&&(s=this._getLineLength(i)/u*1e3),(s!==this._period||o!==this._loop)&&(i.stopAnimation(),s>0)){var d=void 0;d="function"===typeof c?c(r):c,i.__t>0&&(d=-s*i.__t),i.__t=0;var h=i.animate("",o).when(s,{__t:1}).delay(d).during((function(){n._updateSymbolPosition(i)}));o||h.done((function(){n.remove(i)})),h.start()}this._period=s,this._loop=o}},t.prototype._getLineLength=function(e){return Ce(e.__p1,e.__cp1)+Ce(e.__cp1,e.__p2)},t.prototype._updateAnimationPoints=function(e,t){e.__p1=t[0],e.__p2=t[1],e.__cp1=t[2]||[(t[0][0]+t[1][0])/2,(t[0][1]+t[1][1])/2]},t.prototype.updateData=function(e,t,r){this.childAt(0).updateData(e,t,r),this._updateEffectSymbol(e,t)},t.prototype._updateSymbolPosition=function(e){var t=e.__p1,r=e.__p2,i=e.__cp1,n=e.__t,a=[e.x,e.y],s=a.slice(),o=Oa,u=Ta;a[0]=o(t[0],i[0],r[0],n),a[1]=o(t[1],i[1],r[1],n);var c=u(t[0],i[0],r[0],n),d=u(t[1],i[1],r[1],n);e.rotation=-Math.atan2(d,c)-Math.PI/2,"line"!==this._symbolType&&"rect"!==this._symbolType&&"roundRect"!==this._symbolType||(void 0!==e.__lastT&&e.__lastT<e.__t?(e.scaleY=1.05*Ce(s,a),1===n&&(a[0]=s[0]+(a[0]-s[0])/2,a[1]=s[1]+(a[1]-s[1])/2)):1===e.__lastT?e.scaleY=2*Ce(t,a):e.scaleY=this._symbolScale[1]),e.__lastT=e.__t,e.ignore=!1,e.x=a[0],e.y=a[1]},t.prototype.updateLayout=function(e,t){this.childAt(0).updateLayout(e,t);var r=e.getItemModel(t).getModel("effect");this._updateEffectAnimation(e,r,t)},t}(Ti),ZA=function(e){function t(t,r,i){var n=e.call(this)||this;return n._createPolyline(t,r,i),n}return a(t,e),t.prototype._createPolyline=function(e,t,r){var i=e.getItemLayout(t),n=new Ju({shape:{points:i}});this.add(n),this._updateCommonStl(e,t,r)},t.prototype.updateData=function(e,t,r){var i=e.hostModel;Fc(this.childAt(0),{shape:{points:e.getItemLayout(t)}},i,t),this._updateCommonStl(e,t,r)},t.prototype._updateCommonStl=function(e,t,r){var i=this.childAt(0),n=e.getItemModel(t),a=r&&r.emphasisLineStyle;r&&!e.hasItemOption||(a=n.getModel(["emphasis","lineStyle"]).getLineStyle()),i.useStyle(e.getItemVisual(t,"style")),i.style.fill=null,i.style.strokeNoScale=!0,i.ensureState("emphasis").style=a,Xo(this)},t.prototype.updateLayout=function(e,t){this.childAt(0).setShape("points",e.getItemLayout(t))},t}(Ti),QA=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._lastFrame=0,t._lastFramePercent=0,t}return a(t,e),t.prototype.createLine=function(e,t,r){return new ZA(e,t,r)},t.prototype._updateAnimationPoints=function(e,t){this._points=t;for(var r=[0],i=0,n=1;n<t.length;n++){var a=t[n-1],s=t[n];i+=Ce(a,s),r.push(i)}if(0!==i){for(n=0;n<r.length;n++)r[n]/=i;this._offsets=r,this._length=i}else this._length=0},t.prototype._getLineLength=function(){return this._length},t.prototype._updateSymbolPosition=function(e){var t=e.__t,r=this._points,i=this._offsets,n=r.length;if(i){var a,s=this._lastFrame;if(t<this._lastFramePercent){for(a=Math.min(s+1,n-1);a>=0&&!(i[a]<=t);a--);a=Math.min(a,n-2)}else{for(a=s;a<n&&!(i[a]>t);a++);a=Math.min(a-1,n-2)}var o=(t-i[a])/(i[a+1]-i[a]),u=r[a],c=r[a+1];e.x=u[0]*(1-o)+o*c[0],e.y=u[1]*(1-o)+o*c[1];var d=c[0]-u[0],h=c[1]-u[1];e.rotation=-Math.atan2(h,d)-Math.PI/2,this._lastFrame=a,this._lastFramePercent=t,e.ignore=!1}},t}(YA),$A=function(){this.polyline=!1,this.curveness=0,this.segs=[]},JA=function(e){function t(t){return e.call(this,t)||this}return a(t,e),t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new $A},t.prototype.buildPath=function(e,t){var r=t.segs,i=t.curveness;if(t.polyline)for(var n=0;n<r.length;){var a=r[n++];if(a>0){e.moveTo(r[n++],r[n++]);for(var s=1;s<a;s++)e.lineTo(r[n++],r[n++])}}else for(n=0;n<r.length;){var o=r[n++],u=r[n++],c=r[n++],d=r[n++];if(e.moveTo(o,u),i>0){var h=(o+c)/2-(u-d)*i,l=(u+d)/2-(c-o)*i;e.quadraticCurveTo(h,l,c,d)}else e.lineTo(c,d)}},t.prototype.findDataIndex=function(e,t){var r=this.shape,i=r.segs,n=r.curveness,a=this.style.lineWidth;if(r.polyline)for(var s=0,o=0;o<i.length;){var u=i[o++];if(u>0)for(var c=i[o++],d=i[o++],h=1;h<u;h++){if(ls(c,d,l=i[o++],f=i[o++],a,e,t))return s}s++}else for(s=0,o=0;o<i.length;){c=i[o++],d=i[o++];var l=i[o++],f=i[o++];if(n>0){if(ps(c,d,(c+l)/2-(d-f)*n,(d+f)/2-(l-c)*n,l,f,a,e,t))return s}else if(ls(c,d,l,f,a,e,t))return s;s++}return-1},t}(Ns),eE=function(){function e(){this.group=new Ti}return e.prototype.isPersistent=function(){return!this._incremental},e.prototype.updateData=function(e){this.group.removeAll();var t=new JA({rectHover:!0,cursor:"default"});t.setShape({segs:e.getLayout("linesPoints")}),this._setCommon(t,e),this.group.add(t),this._incremental=null},e.prototype.incrementalPrepareUpdate=function(e){this.group.removeAll(),this._clearIncremental(),e.count()>5e5?(this._incremental||(this._incremental=new wc({silent:!0})),this.group.add(this._incremental)):this._incremental=null},e.prototype.incrementalUpdate=function(e,t){var r=new JA;r.setShape({segs:t.getLayout("linesPoints")}),this._setCommon(r,t,!!this._incremental),this._incremental?this._incremental.addDisplayable(r,!0):(r.rectHover=!0,r.cursor="default",r.__startIndex=e.start,this.group.add(r))},e.prototype.remove=function(){this._clearIncremental(),this._incremental=null,this.group.removeAll()},e.prototype._setCommon=function(e,t,r){var i=t.hostModel;e.setShape({polyline:i.get("polyline"),curveness:i.get(["lineStyle","curveness"])}),e.useStyle(i.getModel("lineStyle").getLineStyle()),e.style.strokeNoScale=!0;var n=t.getVisual("style");if(n&&n.stroke&&e.setStyle("stroke",n.stroke),e.setStyle("fill",null),!r){var a=ao(e);a.seriesIndex=i.seriesIndex,e.on("mousemove",(function(t){a.dataIndex=null;var r=e.findDataIndex(t.offsetX,t.offsetY);r>0&&(a.dataIndex=r+e.__startIndex)}))}},e.prototype._clearIncremental=function(){var e=this._incremental;e&&e.clearDisplaybles()},e}(),tE={seriesType:"lines",plan:_p(),reset:function(e){var t=e.coordinateSystem,r=e.get("polyline"),i=e.pipelineContext.large;return{progress:function(n,a){var s=[];if(i){var o=void 0,u=n.end-n.start;if(r){for(var c=0,d=n.start;d<n.end;d++)c+=e.getLineCoordsCount(d);o=new Float32Array(u+2*c)}else o=new Float32Array(4*u);var h=0,l=[];for(d=n.start;d<n.end;d++){var f=e.getLineCoords(d,s);r&&(o[h++]=f);for(var p=0;p<f;p++)l=t.dataToPoint(s[p],!1,l),o[h++]=l[0],o[h++]=l[1]}a.setLayout("linesPoints",o)}else for(d=n.start;d<n.end;d++){var v=a.getItemModel(d),m=(f=e.getLineCoords(d,s),[]);if(r)for(var g=0;g<f;g++)m.push(t.dataToPoint(s[g]));else{m[0]=t.dataToPoint(s[0]),m[1]=t.dataToPoint(s[1]);var y=v.get(["lineStyle","curveness"]);+y&&(m[2]=[(m[0][0]+m[1][0])/2-(m[0][1]-m[1][1])*y,(m[0][1]+m[1][1])/2-(m[1][0]-m[0][0])*y])}a.setItemLayout(d,m)}}}}},rE=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return r.type=t.type,r}return a(t,e),t.prototype.render=function(e,t,r){var i=e.getData(),n=this._updateLineDraw(i,e),a=e.get("zlevel"),s=e.get(["effect","trailLength"]),o=r.getZr(),u="svg"===o.painter.getType();(u||o.painter.getLayer(a).clear(!0),null==this._lastZlevel||u||o.configLayer(this._lastZlevel,{motionBlur:!1}),this._showEffect(e)&&s)&&(u||o.configLayer(a,{motionBlur:!0,lastFrameAlpha:Math.max(Math.min(s/10+.9,1),0)}));n.updateData(i);var c=e.get("clip",!0)&&rk(e.coordinateSystem,!1,e);c?this.group.setClipPath(c):this.group.removeClipPath(),this._lastZlevel=a,this._finished=!0},t.prototype.incrementalPrepareRender=function(e,t,r){var i=e.getData();this._updateLineDraw(i,e).incrementalPrepareUpdate(i),this._clearLayer(r),this._finished=!1},t.prototype.incrementalRender=function(e,t,r){this._lineDraw.incrementalUpdate(e,t.getData()),this._finished=e.end===t.getData().count()},t.prototype.updateTransform=function(e,t,r){var i=e.getData(),n=e.pipelineContext;if(!this._finished||n.large||n.progressiveRender)return{update:!0};var a=tE.reset(e,t,r);a.progress&&a.progress({start:0,end:i.count(),count:i.count()},i),this._lineDraw.updateLayout(),this._clearLayer(r)},t.prototype._updateLineDraw=function(e,t){var r=this._lineDraw,i=this._showEffect(t),n=!!t.get("polyline"),a=t.pipelineContext.large;return r&&i===this._hasEffet&&n===this._isPolyline&&a===this._isLargeDraw||(r&&r.remove(),r=this._lineDraw=a?new eE:new RC(n?i?QA:ZA:i?YA:PC),this._hasEffet=i,this._isPolyline=n,this._isLargeDraw=a,this.group.removeAll()),this.group.add(r.group),r},t.prototype._showEffect=function(e){return!!e.get(["effect","show"])},t.prototype._clearLayer=function(e){var t=e.getZr();"svg"===t.painter.getType()||null==this._lastZlevel||t.painter.getLayer(this._lastZlevel).clear(!0)},t.prototype.remove=function(e,t){this._lineDraw&&this._lineDraw.remove(),this._lineDraw=null,this._clearLayer(t)},t.type="lines",t}(Np),iE="undefined"===typeof Uint32Array?Array:Uint32Array,nE="undefined"===typeof Float64Array?Array:Float64Array;function aE(e){var t=e.data;t&&t[0]&&t[0][0]&&t[0][0].coord&&(e.data=B(t,(function(e){var t={coords:[e[0].coord,e[1].coord]};return e[0].name&&(t.fromName=e[0].name),e[1].name&&(t.toName=e[1].name),C([t,e[0],e[1]])})))}var sE=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return r.type=t.type,r.visualStyleAccessPath="lineStyle",r.visualDrawType="stroke",r}return a(t,e),t.prototype.init=function(t){t.data=t.data||[],aE(t);var r=this._processFlatCoordsArray(t.data);this._flatCoords=r.flatCoords,this._flatCoordsOffset=r.flatCoordsOffset,r.flatCoords&&(t.data=new Float32Array(r.count)),e.prototype.init.apply(this,arguments)},t.prototype.mergeOption=function(t){if(aE(t),t.data){var r=this._processFlatCoordsArray(t.data);this._flatCoords=r.flatCoords,this._flatCoordsOffset=r.flatCoordsOffset,r.flatCoords&&(t.data=new Float32Array(r.count))}e.prototype.mergeOption.apply(this,arguments)},t.prototype.appendData=function(e){var t=this._processFlatCoordsArray(e.data);t.flatCoords&&(this._flatCoords?(this._flatCoords=de(this._flatCoords,t.flatCoords),this._flatCoordsOffset=de(this._flatCoordsOffset,t.flatCoordsOffset)):(this._flatCoords=t.flatCoords,this._flatCoordsOffset=t.flatCoordsOffset),e.data=new Float32Array(t.count)),this.getRawData().appendData(e.data)},t.prototype._getCoordsFromItemModel=function(e){var t=this.getData().getItemModel(e);return t.option instanceof Array?t.option:t.getShallow("coords")},t.prototype.getLineCoordsCount=function(e){return this._flatCoordsOffset?this._flatCoordsOffset[2*e+1]:this._getCoordsFromItemModel(e).length},t.prototype.getLineCoords=function(e,t){if(this._flatCoordsOffset){for(var r=this._flatCoordsOffset[2*e],i=this._flatCoordsOffset[2*e+1],n=0;n<i;n++)t[n]=t[n]||[],t[n][0]=this._flatCoords[r+2*n],t[n][1]=this._flatCoords[r+2*n+1];return i}var a=this._getCoordsFromItemModel(e);for(n=0;n<a.length;n++)t[n]=t[n]||[],t[n][0]=a[n][0],t[n][1]=a[n][1];return a.length},t.prototype._processFlatCoordsArray=function(e){var t=0;if(this._flatCoords&&(t=this._flatCoords.length),"number"===typeof e[0]){for(var r=e.length,i=new iE(r),n=new nE(r),a=0,s=0,o=0,u=0;u<r;){o++;var c=e[u++];i[s++]=a+t,i[s++]=c;for(var d=0;d<c;d++){var h=e[u++],l=e[u++];n[a++]=h,n[a++]=l}}return{flatCoordsOffset:new Uint32Array(i.buffer,0,s),flatCoords:n,count:o}}return{flatCoordsOffset:null,flatCoords:null,count:e.length}},t.prototype.getInitialData=function(e,t){var r=new kx(["value"],this);return r.hasItemOption=!1,r.initData(e.data,[],(function(e,t,i,n){if(e instanceof Array)return NaN;r.hasItemOption=!0;var a=e.value;return null!=a?a instanceof Array?a[n]:a:void 0})),r},t.prototype.formatTooltip=function(e,t,r){var i=this.getData().getItemModel(e),n=i.get("name");if(n)return n;var a=i.get("fromName"),s=i.get("toName"),o=[];return null!=a&&o.push(a),null!=s&&o.push(s),Jf("nameValue",{name:o.join(" > ")})},t.prototype.preventIncremental=function(){return!!this.get(["effect","show"])},t.prototype.getProgressive=function(){var e=this.option.progressive;return null==e?this.option.large?1e4:this.get("progressive"):e},t.prototype.getProgressiveThreshold=function(){var e=this.option.progressiveThreshold;return null==e?this.option.large?2e4:this.get("progressiveThreshold"):e},t.type="series.lines",t.dependencies=["grid","polar","geo","calendar"],t.defaultOption={coordinateSystem:"geo",zlevel:0,z:2,legendHoverLink:!0,xAxisIndex:0,yAxisIndex:0,symbol:["none","none"],symbolSize:[10,10],geoIndex:0,effect:{show:!1,period:4,constantSpeed:0,symbol:"circle",symbolSize:3,loop:!0,trailLength:.2},large:!1,largeThreshold:2e3,polyline:!1,clip:!0,label:{show:!1,position:"end"},lineStyle:{opacity:.5}},t}(xp);function oE(e){return e instanceof Array||(e=[e,e]),e}var uE={seriesType:"lines",reset:function(e){var t=oE(e.get("symbol")),r=oE(e.get("symbolSize")),i=e.getData();return i.setVisual("fromSymbol",t&&t[0]),i.setVisual("toSymbol",t&&t[1]),i.setVisual("fromSymbolSize",r&&r[0]),i.setVisual("toSymbolSize",r&&r[1]),{dataEach:i.hasItemOption?function(e,t){var r=e.getItemModel(t),i=oE(r.getShallow("symbol",!0)),n=oE(r.getShallow("symbolSize",!0));i[0]&&e.setItemVisual(t,"fromSymbol",i[0]),i[1]&&e.setItemVisual(t,"toSymbol",i[1]),n[0]&&e.setItemVisual(t,"fromSymbolSize",n[0]),n[1]&&e.setItemVisual(t,"toSymbolSize",n[1])}:null}}};var cE=function(){function e(){this.blurSize=30,this.pointSize=20,this.maxOpacity=1,this.minOpacity=0,this._gradientPixels={inRange:null,outOfRange:null};var e=A();this.canvas=e}return e.prototype.update=function(e,t,r,i,n,a){var s=this._getBrush(),o=this._getGradient(n,"inRange"),u=this._getGradient(n,"outOfRange"),c=this.pointSize+this.blurSize,d=this.canvas,h=d.getContext("2d"),l=e.length;d.width=t,d.height=r;for(var f=0;f<l;++f){var p=e[f],v=p[0],m=p[1],g=i(p[2]);h.globalAlpha=g,h.drawImage(s,v-c,m-c)}if(!d.width||!d.height)return d;for(var y=h.getImageData(0,0,d.width,d.height),b=y.data,x=0,k=b.length,w=this.minOpacity,_=this.maxOpacity-w;x<k;){g=b[x+3]/256;var S=4*Math.floor(255*g);if(g>0){var O=a(g)?o:u;g>0&&(g=g*_+w),b[x++]=O[S],b[x++]=O[S+1],b[x++]=O[S+2],b[x++]=O[S+3]*g*256}else x+=4}return h.putImageData(y,0,0),d},e.prototype._getBrush=function(){var e=this._brushCanvas||(this._brushCanvas=A()),t=this.pointSize+this.blurSize,r=2*t;e.width=r,e.height=r;var i=e.getContext("2d");return i.clearRect(0,0,r,r),i.shadowOffsetX=r,i.shadowBlur=this.blurSize,i.shadowColor="#000",i.beginPath(),i.arc(-t,t,this.pointSize,0,2*Math.PI,!0),i.closePath(),i.fill(),e},e.prototype._getGradient=function(e,t){for(var r=this._gradientPixels,i=r[t]||(r[t]=new Uint8ClampedArray(1024)),n=[0,0,0,0],a=0,s=0;s<256;s++)e[t](s/255,!0,n),i[a++]=n[0],i[a++]=n[1],i[a++]=n[2],i[a++]=n[3];return i},e}();function dE(e){var t=e.dimensions;return"lng"===t[0]&&"lat"===t[1]}var hE=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return r.type=t.type,r}return a(t,e),t.prototype.render=function(e,t,r){var i;t.eachComponent("visualMap",(function(t){t.eachTargetSeries((function(r){r===e&&(i=t)}))})),this.group.removeAll(),this._incrementalDisplayable=null;var n=e.coordinateSystem;"cartesian2d"===n.type||"calendar"===n.type?this._renderOnCartesianAndCalendar(e,r,0,e.getData().count()):dE(n)&&this._renderOnGeo(n,e,i,r)},t.prototype.incrementalPrepareRender=function(e,t,r){this.group.removeAll()},t.prototype.incrementalRender=function(e,t,r,i){var n=t.coordinateSystem;n&&(dE(n)?this.render(t,r,i):this._renderOnCartesianAndCalendar(t,i,e.start,e.end,!0))},t.prototype._renderOnCartesianAndCalendar=function(e,t,r,i,n){var a,s,o,u,c=e.coordinateSystem;if(ik(c,"cartesian2d")){var d=c.getAxis("x"),h=c.getAxis("y");0,a=d.getBandWidth(),s=h.getBandWidth(),o=d.scale.getExtent(),u=h.scale.getExtent()}for(var l=this.group,f=e.getData(),p=e.getModel(["emphasis","itemStyle"]).getItemStyle(),v=e.getModel(["blur","itemStyle"]).getItemStyle(),m=e.getModel(["select","itemStyle"]).getItemStyle(),g=ud(e),y=e.get(["emphasis","focus"]),b=e.get(["emphasis","blurScope"]),x=ik(c,"cartesian2d")?[f.mapDimension("x"),f.mapDimension("y"),f.mapDimension("value")]:[f.mapDimension("time"),f.mapDimension("value")],k=r;k<i;k++){var w=void 0,_=f.getItemVisual(k,"style");if(ik(c,"cartesian2d")){var S=f.get(x[0],k),O=f.get(x[1],k);if(isNaN(f.get(x[2],k))||S<o[0]||S>o[1]||O<u[0]||O>u[1])continue;var T=c.dataToPoint([S,O]);w=new Ks({shape:{x:Math.floor(Math.round(T[0])-a/2),y:Math.floor(Math.round(T[1])-s/2),width:Math.ceil(a),height:Math.ceil(s)},style:_})}else{if(isNaN(f.get(x[1],k)))continue;w=new Ks({z2:1,shape:c.dataToRect([f.get(x[0],k)]).contentShape,style:_})}var C=f.getItemModel(k);if(f.hasItemOption){var I=C.getModel("emphasis");p=I.getModel("itemStyle").getItemStyle(),v=C.getModel(["blur","itemStyle"]).getItemStyle(),m=C.getModel(["select","itemStyle"]).getItemStyle(),y=I.get("focus"),b=I.get("blurScope"),g=ud(C)}var M=e.getRawValue(k),A="-";M&&null!=M[2]&&(A=M[2]+""),od(w,g,{labelFetcher:e,labelDataIndex:k,defaultOpacity:_.opacity,defaultText:A}),w.ensureState("emphasis").style=p,w.ensureState("blur").style=v,w.ensureState("select").style=m,Xo(w,y,b),w.incremental=n,n&&(w.states.emphasis.hoverLayer=!0),l.add(w),f.setItemGraphicEl(k,w)}},t.prototype._renderOnGeo=function(e,t,r,i){var n=r.targetVisuals.inRange,a=r.targetVisuals.outOfRange,s=t.getData(),o=this._hmLayer||this._hmLayer||new cE;o.blurSize=t.get("blurSize"),o.pointSize=t.get("pointSize"),o.minOpacity=t.get("minOpacity"),o.maxOpacity=t.get("maxOpacity");var u=e.getViewRect().clone(),c=e.getRoamTransform();u.applyTransform(c);var d=Math.max(u.x,0),h=Math.max(u.y,0),l=Math.min(u.width+u.x,i.getWidth()),f=Math.min(u.height+u.y,i.getHeight()),p=l-d,v=f-h,m=[s.mapDimension("lng"),s.mapDimension("lat"),s.mapDimension("value")],g=s.mapArray(m,(function(t,r,i){var n=e.dataToPoint([t,r]);return n[0]-=d,n[1]-=h,n.push(i),n})),y=r.getExtent(),b="visualMap.continuous"===r.type?function(e,t){var r=e[1]-e[0];return t=[(t[0]-e[0])/r,(t[1]-e[0])/r],function(e){return e>=t[0]&&e<=t[1]}}(y,r.option.range):function(e,t,r){var i=e[1]-e[0],n=(t=B(t,(function(t){return{interval:[(t.interval[0]-e[0])/i,(t.interval[1]-e[0])/i]}}))).length,a=0;return function(e){var i;for(i=a;i<n;i++)if((s=t[i].interval)[0]<=e&&e<=s[1]){a=i;break}if(i===n)for(i=a-1;i>=0;i--){var s;if((s=t[i].interval)[0]<=e&&e<=s[1]){a=i;break}}return i>=0&&i<n&&r[i]}}(y,r.getPieceList(),r.option.selected);o.update(g,p,v,n.color.getNormalizer(),{inRange:n.color.getColorMapper(),outOfRange:a.color.getColorMapper()},b);var x=new Gs({style:{width:p,height:v,x:d,y:h,image:o.canvas},silent:!0});this.group.add(x)},t.type="heatmap",t}(Np),lE=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return r.type=t.type,r}return a(t,e),t.prototype.getInitialData=function(e,t){return Ex(this.getSource(),this,{generateCoord:"value"})},t.prototype.preventIncremental=function(){var e=Tl.get(this.get("coordinateSystem"));if(e&&e.dimensions)return"lng"===e.dimensions[0]&&"lat"===e.dimensions[1]},t.type="series.heatmap",t.dependencies=["grid","geo","calendar"],t.defaultOption={coordinateSystem:"cartesian2d",zlevel:0,z:2,geoIndex:0,blurSize:30,pointSize:20,maxOpacity:1,minOpacity:0,select:{itemStyle:{borderColor:"#212121"}}},t}(xp);var fE=["itemStyle","borderWidth"],pE=[{xy:"x",wh:"width",index:0,posDesc:["left","right"]},{xy:"y",wh:"height",index:1,posDesc:["top","bottom"]}],vE=new _u;function mE(e,t,r,i){var n=e.getItemLayout(t),a=r.get("symbolRepeat"),s=r.get("symbolClip"),o=r.get("symbolPosition")||"start",u=(r.get("symbolRotate")||0)*Math.PI/180||0,c=r.get("symbolPatternSize")||2,d=r.isAnimationEnabled(),h={dataIndex:t,layout:n,itemModel:r,symbolType:e.getItemVisual(t,"symbol")||"circle",style:e.getItemVisual(t,"style"),symbolClip:s,symbolRepeat:a,symbolRepeatDirection:r.get("symbolRepeatDirection"),symbolPatternSize:c,rotation:u,animationModel:d?r:null,hoverScale:d&&r.get(["emphasis","scale"]),z2:r.getShallow("z",!0)||0};!function(e,t,r,i,n){var a,s=i.valueDim,o=e.get("symbolBoundingData"),u=i.coordSys.getOtherAxis(i.coordSys.getBaseAxis()),c=u.toGlobalCoord(u.dataToCoord(0)),d=1-+(r[s.wh]<=0);if(j(o)){var h=[gE(u,o[0])-c,gE(u,o[1])-c];h[1]<h[0]&&h.reverse(),a=h[d]}else a=null!=o?gE(u,o)-c:t?i.coordSysExtent[s.index][d]-c:r[s.wh];n.boundingLength=a,t&&(n.repeatCutLength=r[s.wh]);n.pxSign=a>0?1:a<0?-1:0}(r,a,n,i,h),function(e,t,r,i,n,a,s,o,u,c){var d,h=u.valueDim,l=u.categoryDim,f=Math.abs(r[l.wh]),p=e.getItemVisual(t,"symbolSize");d=j(p)?p.slice():null==p?["100%","100%"]:[p,p];d[l.index]=Di(d[l.index],f),d[h.index]=Di(d[h.index],i?f:Math.abs(a)),c.symbolSize=d,(c.symbolScale=[d[0]/o,d[1]/o])[h.index]*=(u.isHorizontal?-1:1)*s}(e,t,n,a,0,h.boundingLength,h.pxSign,c,i,h),function(e,t,r,i,n){var a=e.get(fE)||0;a&&(vE.attr({scaleX:t[0],scaleY:t[1],rotation:r}),vE.updateTransform(),a/=vE.getLineScale(),a*=t[i.valueDim.index]);n.valueLineWidth=a}(r,h.symbolScale,u,i,h);var l=h.symbolSize,f=r.get("symbolOffset");return j(f)&&(f=[Di(f[0],l[0]),Di(f[1],l[1])]),function(e,t,r,i,n,a,s,o,u,c,d,h){var l=d.categoryDim,f=d.valueDim,p=h.pxSign,v=Math.max(t[f.index]+o,0),m=v;if(i){var g=Math.abs(u),y=$(e.get("symbolMargin"),"15%")+"",b=!1;y.lastIndexOf("!")===y.length-1&&(b=!0,y=y.slice(0,y.length-1));var x=Di(y,t[f.index]),k=Math.max(v+2*x,0),w=b?0:2*x,_=Yi(i),S=_?i:NE((g+w)/k);k=v+2*(x=(g-S*v)/2/(b?S:S-1)),w=b?0:2*x,_||"fixed"===i||(S=c?NE((Math.abs(c)+w)/k):0),m=S*k-w,h.repeatTimes=S,h.symbolMargin=x}var O=p*(m/2),T=h.pathPosition=[];T[l.index]=r[l.wh]/2,T[f.index]="start"===s?O:"end"===s?u-O:u/2,a&&(T[0]+=a[0],T[1]+=a[1]);var C=h.bundlePosition=[];C[l.index]=r[l.xy],C[f.index]=r[f.xy];var M=h.barRectShape=I({},r);M[f.wh]=p*Math.max(Math.abs(r[f.wh]),Math.abs(T[f.index]+O)),M[l.wh]=r[l.wh];var A=h.clipShape={};A[l.xy]=-r[l.xy],A[l.wh]=d.ecSize[l.wh],A[f.xy]=0,A[f.wh]=r[f.wh]}(r,l,n,a,0,f,o,h.valueLineWidth,h.boundingLength,h.repeatCutLength,i,h),h}function gE(e,t){return e.toGlobalCoord(e.dataToCoord(e.scale.parse(t)))}function yE(e){var t=e.symbolPatternSize,r=gm(e.symbolType,-t/2,-t/2,t,t);return r.attr({culling:!0}),"image"!==r.type&&r.setStyle({strokeNoScale:!0}),r}function bE(e,t,r,i){var n=e.__pictorialBundle,a=r.symbolSize,s=r.valueLineWidth,o=r.pathPosition,u=t.valueDim,c=r.repeatTimes||0,d=0,h=a[t.valueDim.index]+s+2*r.symbolMargin;for(ME(e,(function(e){e.__pictorialAnimationIndex=d,e.__pictorialRepeatTimes=c,d<c?AE(e,null,p(d),r,i):AE(e,null,{scaleX:0,scaleY:0},r,i,(function(){n.remove(e)})),d++}));d<c;d++){var l=yE(r);l.__pictorialAnimationIndex=d,l.__pictorialRepeatTimes=c,n.add(l);var f=p(d);AE(l,{x:f.x,y:f.y,scaleX:0,scaleY:0},{scaleX:f.scaleX,scaleY:f.scaleY,rotation:f.rotation},r,i)}function p(e){var t=o.slice(),i=r.pxSign,n=e;return("start"===r.symbolRepeatDirection?i>0:i<0)&&(n=c-1-e),t[u.index]=h*(n-c/2+.5)+o[u.index],{x:t[0],y:t[1],scaleX:r.symbolScale[0],scaleY:r.symbolScale[1],rotation:r.rotation}}}function xE(e,t,r,i){var n=e.__pictorialBundle,a=e.__pictorialMainPath;a?AE(a,null,{x:r.pathPosition[0],y:r.pathPosition[1],scaleX:r.symbolScale[0],scaleY:r.symbolScale[1],rotation:r.rotation},r,i):(a=e.__pictorialMainPath=yE(r),n.add(a),AE(a,{x:r.pathPosition[0],y:r.pathPosition[1],scaleX:0,scaleY:0,rotation:r.rotation},{scaleX:r.symbolScale[0],scaleY:r.symbolScale[1]},r,i))}function kE(e,t,r){var i=I({},t.barRectShape),n=e.__pictorialBarRect;n?AE(n,null,{shape:i},t,r):(n=e.__pictorialBarRect=new Ks({z2:2,shape:i,silent:!0,style:{stroke:"transparent",fill:"transparent",lineWidth:0}}),e.add(n))}function wE(e,t,r,n){if(r.symbolClip){var a=e.__pictorialClipPath,s=I({},r.clipShape),o=t.valueDim,u=r.animationModel,c=r.dataIndex;if(a)Fc(a,{shape:s},u,c);else{s[o.wh]=0,a=new Ks({shape:s}),e.__pictorialBundle.setClipPath(a),e.__pictorialClipPath=a;var d={};d[o.wh]=r.clipShape[o.wh],i[n?"updateProps":"initProps"](a,{shape:d},u,c)}}}function _E(e,t){var r=e.getItemModel(t);return r.getAnimationDelayParams=SE,r.isAnimationEnabled=OE,r}function SE(e){return{index:e.__pictorialAnimationIndex,count:e.__pictorialRepeatTimes}}function OE(){return this.parentModel.isAnimationEnabled()&&!!this.getShallow("animation")}function TE(e,t,r,i){var n=new Ti,a=new Ti;return n.add(a),n.__pictorialBundle=a,a.x=r.bundlePosition[0],a.y=r.bundlePosition[1],r.symbolRepeat?bE(n,t,r):xE(n,0,r),kE(n,r,i),wE(n,t,r,i),n.__pictorialShapeStr=IE(e,r),n.__pictorialSymbolMeta=r,n}function CE(e,t,r,i){var n=i.__pictorialBarRect;n&&n.removeTextContent();var a=[];ME(i,(function(e){a.push(e)})),i.__pictorialMainPath&&a.push(i.__pictorialMainPath),i.__pictorialClipPath&&(r=null),L(a,(function(e){jc(e,{scaleX:0,scaleY:0},r,t,(function(){i.parent&&i.parent.remove(i)}))})),e.setItemGraphicEl(t,null)}function IE(e,t){return[e.getItemVisual(t.dataIndex,"symbol")||"none",!!t.symbolRepeat,!!t.symbolClip].join(":")}function ME(e,t,r){L(e.__pictorialBundle.children(),(function(i){i!==e.__pictorialBarRect&&t.call(r,i)}))}function AE(e,t,r,n,a,s){t&&e.attr(t),n.symbolClip&&!a?r&&e.attr(r):r&&i[a?"updateProps":"initProps"](e,r,n.animationModel,n.dataIndex,s)}function EE(e,t,r){var i=r.dataIndex,n=r.itemModel,a=n.getModel("emphasis"),s=a.getModel("itemStyle").getItemStyle(),o=n.getModel(["blur","itemStyle"]).getItemStyle(),u=n.getModel(["select","itemStyle"]).getItemStyle(),c=n.getShallow("cursor"),d=a.get("focus"),h=a.get("blurScope"),l=a.get("scale");ME(e,(function(e){if(e instanceof Gs){var t=e.style;e.useStyle(I({image:t.image,x:t.x,y:t.y,width:t.width,height:t.height},r.style))}else e.useStyle(r.style);var i=e.ensureState("emphasis");i.style=s,l&&(i.scaleX=1.1*e.scaleX,i.scaleY=1.1*e.scaleY),e.ensureState("blur").style=o,e.ensureState("select").style=u,c&&(e.cursor=c),e.z2=r.z2}));var f=t.valueDim.posDesc[+(r.boundingLength>0)];od(e.__pictorialBarRect,ud(n),{labelFetcher:t.seriesModel,labelDataIndex:i,defaultText:Px(t.seriesModel.getData(),i),inheritColor:r.style.fill,defaultOpacity:r.style.opacity,defaultOutsidePosition:f}),Xo(e,d,h)}function NE(e){var t=Math.round(e);return Math.abs(e-t)<1e-4?t:Math.ceil(e)}var PE=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return r.type=t.type,r}return a(t,e),t.prototype.render=function(e,t,r){var i=this.group,n=e.getData(),a=this._data,s=e.coordinateSystem,o=s.getBaseAxis().isHorizontal(),u=s.master.getRect(),c={ecSize:{width:r.getWidth(),height:r.getHeight()},seriesModel:e,coordSys:s,coordSysExtent:[[u.x,u.x+u.width],[u.y,u.y+u.height]],isHorizontal:o,valueDim:pE[+o],categoryDim:pE[1-+o]};return n.diff(a).add((function(e){if(n.hasValue(e)){var t=_E(n,e),r=mE(n,e,t,c),a=TE(n,c,r);n.setItemGraphicEl(e,a),i.add(a),EE(a,c,r)}})).update((function(e,t){var r=a.getItemGraphicEl(t);if(n.hasValue(e)){var s=_E(n,e),o=mE(n,e,s,c),u=IE(n,o);r&&u!==r.__pictorialShapeStr&&(i.remove(r),n.setItemGraphicEl(e,null),r=null),r?function(e,t,r){var i=r.animationModel,n=r.dataIndex;Fc(e.__pictorialBundle,{x:r.bundlePosition[0],y:r.bundlePosition[1]},i,n),r.symbolRepeat?bE(e,t,r,!0):xE(e,t,r,!0);kE(e,r,!0),wE(e,t,r,!0)}(r,c,o):r=TE(n,c,o,!0),n.setItemGraphicEl(e,r),r.__pictorialSymbolMeta=o,i.add(r),EE(r,c,o)}else i.remove(r)})).remove((function(e){var t=a.getItemGraphicEl(e);t&&CE(a,e,t.__pictorialSymbolMeta.animationModel,t)})).execute(),this._data=n,this.group},t.prototype.remove=function(e,t){var r=this.group,i=this._data;e.get("animation")?i&&i.eachItemGraphicEl((function(t){CE(i,ao(t).dataIndex,e,t)})):r.removeAll()},t.type="pictorialBar",t}(Np),DE=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return r.type=t.type,r.hasSymbolVisual=!0,r.defaultSymbol="roundRect",r}return a(t,e),t.prototype.getInitialData=function(t){return t.stack=null,e.prototype.getInitialData.apply(this,arguments)},t.type="series.pictorialBar",t.dependencies=["grid"],t.defaultOption=Nd(Ek.defaultOption,{symbol:"circle",symbolSize:null,symbolRotate:null,symbolPosition:null,symbolOffset:null,symbolMargin:null,symbolRepeat:!1,symbolRepeatDirection:"end",symbolClip:!1,symbolBoundingData:null,symbolPatternSize:400,barGap:"-100%",progressive:0,emphasis:{scale:!1},select:{itemStyle:{borderColor:"#212121"}}}),t}(Ek);var LE=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return r.type=t.type,r._layers=[],r}return a(t,e),t.prototype.render=function(e,t,r){var i=e.getData(),n=this,a=this.group,s=e.getLayerSeries(),o=i.getLayout("layoutInfo"),u=o.rect,c=o.boundaryGap;function d(e){return e.name}a.x=0,a.y=u.y+c[0];var h=new Kb(this._layersSeries||[],s,d,d),l=[];function f(t,r,o){var u=n._layers;if("remove"!==t){for(var c,d,h=[],f=[],p=s[r].indices,v=0;v<p.length;v++){var m=i.getItemLayout(p[v]),g=m.x,y=m.y0,b=m.y;h.push(g,y),f.push(g,y+b),c=i.getItemVisual(p[v],"style")}var x=i.getItemLayout(p[0]),k=e.getModel("label").get("margin"),w=e.getModel("emphasis");if("add"===t){var _=l[r]=new Ti;d=new Jx({shape:{points:h,stackedOnPoints:f,smooth:.4,stackedOnSmooth:.4,smoothConstraint:!1},z2:0}),_.add(d),a.add(_),e.isAnimationEnabled()&&d.setClipPath(function(e,t,r){var i=new Ks({shape:{x:e.x-10,y:e.y-10,width:0,height:e.height+20}});return qc(i,{shape:{x:e.x-50,width:e.width+100,height:e.height+20}},t,r),i}(d.getBoundingRect(),e,(function(){d.removeClipPath()})))}else{_=u[o];d=_.childAt(0),a.add(_),l[r]=_,Fc(d,{shape:{points:h,stackedOnPoints:f}},e)}od(d,ud(e),{labelDataIndex:p[v-1],defaultText:i.getName(p[v-1]),inheritColor:c.fill},{normal:{verticalAlign:"middle"}}),d.setTextConfig({position:null,local:!0});var S=d.getTextContent();S&&(S.x=x.x-k,S.y=x.y0+x.y/2),d.useStyle(c),i.setItemGraphicEl(r,d),$o(d,e),Xo(d,w.get("focus"),w.get("blurScope"))}else a.remove(u[r])}h.add(F(f,this,"add")).update(F(f,this,"update")).remove(F(f,this,"remove")).execute(),this._layersSeries=s,this._layers=l},t.type="themeRiver",t}(Np),BE=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return r.type=t.type,r.useColorPaletteOnData=!0,r}return a(t,e),t.prototype.init=function(t){e.prototype.init.apply(this,arguments),this.legendVisualProvider=new uw(F(this.getData,this),F(this.getRawData,this))},t.prototype.fixData=function(e){var t=e.length,r={},i=kn(e,(function(e){return r.hasOwnProperty(e[0]+"")||(r[e[0]+""]=-1),e[2]})),n=[];i.buckets.each((function(e,t){n.push({name:t,dataList:e})}));for(var a=n.length,s=0;s<a;++s){for(var o=n[s].name,u=0;u<n[s].dataList.length;++u){var c=n[s].dataList[u][0]+"";r[c]=s}for(var c in r)r.hasOwnProperty(c)&&r[c]!==s&&(r[c]=s,e[t]=[c,0,o],t++)}return e},t.prototype.getInitialData=function(e,t){for(var r=this.getReferringComponents("singleAxis",gn).models[0].get("type"),i=V(e.data,(function(e){return void 0!==e[2]})),n=this.fixData(i||[]),a=[],s=this.nameMap=ce(),o=0,u=0;u<n.length;++u)a.push(n[u][2]),s.get(n[u][2])||(s.set(n[u][2],o),o++);var c=Ox(n,{coordDimensions:["single"],dimensionsDefine:[{name:"time",type:Yb(r)},{name:"value",type:"float"},{name:"name",type:"ordinal"}],encodeDefine:{single:0,value:1,itemName:2}}),d=new kx(c,this);return d.initData(n),d},t.prototype.getLayerSeries=function(){for(var e=this.getData(),t=e.count(),r=[],i=0;i<t;++i)r[i]=i;var n=e.mapDimension("single"),a=kn(r,(function(t){return e.get("name",t)})),s=[];return a.buckets.each((function(t,r){t.sort((function(t,r){return e.get(n,t)-e.get(n,r)})),s.push({name:r,indices:t})})),s},t.prototype.getAxisTooltipData=function(e,t,r){j(e)||(e=e?[e]:[]);for(var i,n=this.getData(),a=this.getLayerSeries(),s=[],o=a.length,u=0;u<o;++u){for(var c=Number.MAX_VALUE,d=-1,h=a[u].indices.length,l=0;l<h;++l){var f=n.get(e[0],a[u].indices[l]),p=Math.abs(f-t);p<=c&&(i=f,c=p,d=a[u].indices[l])}s.push(d)}return{dataIndices:s,nestestValue:i}},t.prototype.formatTooltip=function(e,t,r){var i=this.getData();return Jf("nameValue",{name:i.getName(e),value:i.get(i.mapDimension("value"),e)})},t.type="series.themeRiver",t.dependencies=["singleAxis"],t.defaultOption={zlevel:0,z:2,coordinateSystem:"singleAxis",boundaryGap:["10%","10%"],singleAxisIndex:0,animationEasing:"linear",label:{margin:4,show:!0,position:"left",fontSize:11},emphasis:{label:{show:!0}}},t}(xp);function RE(e,t){e.eachSeriesByType("themeRiver",(function(e){var t=e.getData(),r=e.coordinateSystem,i={},n=r.getRect();i.rect=n;var a=e.get("boundaryGap"),s=r.getAxis();(i.boundaryGap=a,"horizontal"===s.orient)?(a[0]=Di(a[0],n.height),a[1]=Di(a[1],n.height),VE(t,e,n.height-a[0]-a[1])):(a[0]=Di(a[0],n.width),a[1]=Di(a[1],n.width),VE(t,e,n.width-a[0]-a[1]));t.setLayout("layoutInfo",i)}))}function VE(e,t,r){if(e.count())for(var i,n=t.coordinateSystem,a=t.getLayerSeries(),s=e.mapDimension("single"),o=e.mapDimension("value"),u=B(a,(function(t){return B(t.indices,(function(t){var r=n.dataToPoint(e.get(s,t));return r[1]=e.get(o,t),r}))})),c=function(e){for(var t=e.length,r=e[0].length,i=[],n=[],a=0,s=0;s<r;++s){for(var o=0,u=0;u<t;++u)o+=e[u][s][1];o>a&&(a=o),i.push(o)}for(var c=0;c<r;++c)n[c]=(a-i[c])/2;a=0;for(var d=0;d<r;++d){var h=i[d]+n[d];h>a&&(a=h)}return{y0:n,max:a}}(u),d=c.y0,h=r/c.max,l=a.length,f=a[0].indices.length,p=0;p<f;++p){i=d[p]*h,e.setItemLayout(a[0].indices[p],{layerIndex:0,x:u[0][p][0],y0:i,y:u[0][p][1]*h});for(var v=1;v<l;++v)i+=u[v-1][p][1]*h,e.setItemLayout(a[v].indices[p],{layerIndex:v,x:u[v][p][0],y0:i,y:u[v][p][1]*h})}}var GE=function(e){function t(t,r,i,n){var a=e.call(this)||this;a.z2=2,a.textConfig={inside:!0},ao(a).seriesIndex=r.seriesIndex;var s=new no({z2:4,silent:t.getModel().get(["label","silent"])});return a.setTextContent(s),a.updateData(!0,t,r,i,n),a}return a(t,e),t.prototype.updateData=function(e,t,r,i,n){this.node=t,t.piece=this,r=r||this._seriesModel,i=i||this._ecModel;var a=this;ao(a).dataIndex=t.dataIndex;var s=t.getModel(),o=s.getModel("emphasis"),u=t.getLayout(),c=I({},u);c.label=null;var d=t.getVisual("style");d.lineJoin="bevel";var h=t.getVisual("decal");h&&(d.decal=Fm(h,n));var l=nw(s.getModel("itemStyle"),c);I(c,l),L(co,(function(e){var t=a.ensureState(e),r=s.getModel([e,"itemStyle"]);t.style=r.getItemStyle();var i=nw(r,c);i&&(t.shape=i)})),e?(a.setShape(c),a.shape.r=u.r0,Fc(a,{shape:{r:u.r}},r,t.dataIndex)):Fc(a,{shape:c},r),a.useStyle(d),this._updateLabel(r);var f=s.getShallow("cursor");f&&a.attr("cursor",f),this._seriesModel=r||this._seriesModel,this._ecModel=i||this._ecModel;var p=o.get("focus");Xo(this,"ancestor"===p?t.getAncestorsIndices():"descendant"===p?t.getDescendantIndices():p,o.get("blurScope"))},t.prototype._updateLabel=function(e){var t=this,r=this.node.getModel(),i=r.getModel("label"),n=this.node.getLayout(),a=n.endAngle-n.startAngle,s=(n.startAngle+n.endAngle)/2,o=Math.cos(s),u=Math.sin(s),c=this,d=c.getTextContent(),h=this.node.dataIndex,l=i.get("minAngle")/180*Math.PI,f=i.get("show")&&!(null!=l&&Math.abs(a)<l);function p(e,t){var r=e.get(t);return null==r?i.get(t):r}d.ignore=!f,L(ho,(function(i){var a="normal"===i?r.getModel("label"):r.getModel([i,"label"]),l="normal"===i,f=l?d:d.ensureState(i),v=e.getFormattedLabel(h,i);l&&(v=v||t.node.name),f.style=cd(a,{},null,"normal"!==i,!0),v&&(f.style.text=v);var m=a.get("show");null==m||l||(f.ignore=!m);var g,y=p(a,"position"),b=l?c:c.states[i],x=b.style.fill;b.textConfig={outsideFill:"inherit"===a.get("color")?x:null,inside:"outside"!==y};var k=p(a,"distance")||0,w=p(a,"align");"outside"===y?(g=n.r+k,w=s>Math.PI/2?"right":"left"):w&&"center"!==w?"left"===w?(g=n.r0+k,s>Math.PI/2&&(w="right")):"right"===w&&(g=n.r-k,s>Math.PI/2&&(w="left")):(g=(n.r+n.r0)/2,w="center"),f.style.align=w,f.style.verticalAlign=p(a,"verticalAlign")||"middle",f.x=g*o+n.cx,f.y=g*u+n.cy;var _=p(a,"rotate"),S=0;"radial"===_?(S=-s)<-Math.PI/2&&(S+=Math.PI):"tangential"===_?(S=Math.PI/2-s)>Math.PI/2?S-=Math.PI:S<-Math.PI/2&&(S+=Math.PI):"number"===typeof _&&(S=_*Math.PI/180),f.rotation=S})),d.dirtyStyle()},t}(ju),FE="sunburstRootToNode",qE="sunburstHighlight";var jE=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return r.type=t.type,r}return a(t,e),t.prototype.render=function(e,t,r,i){var n=this;this.seriesModel=e,this.api=r,this.ecModel=t;var a=e.getData(),s=a.tree.root,o=e.getViewRoot(),u=this.group,c=e.get("renderLabelForZeroData"),d=[];o.eachNode((function(e){d.push(e)}));var h=this._oldChildren||[];!function(i,n){if(0===i.length&&0===n.length)return;function o(e){return e.getId()}function d(o,d){!function(i,n){c||!i||i.getValue()||(i=null);if(i!==s&&n!==s)if(n&&n.piece)i?(n.piece.updateData(!1,i,e,t,r),a.setItemGraphicEl(i.dataIndex,n.piece)):function(e){if(!e)return;e.piece&&(u.remove(e.piece),e.piece=null)}(n);else if(i){var o=new GE(i,e,t,r);u.add(o),a.setItemGraphicEl(i.dataIndex,o)}}(null==o?null:i[o],null==d?null:n[d])}new Kb(n,i,o,o).add(d).update(d).remove(q(d,null)).execute()}(d,h),function(i,a){a.depth>0?(n.virtualPiece?n.virtualPiece.updateData(!1,i,e,t,r):(n.virtualPiece=new GE(i,e,t,r),u.add(n.virtualPiece)),a.piece.off("click"),n.virtualPiece.on("click",(function(e){n._rootToNode(a.parentNode)}))):n.virtualPiece&&(u.remove(n.virtualPiece),n.virtualPiece=null)}(s,o),this._initEvents(),this._oldChildren=d},t.prototype._initEvents=function(){var e=this;this.group.off("click"),this.group.on("click",(function(t){var r=!1;e.seriesModel.getViewRoot().eachNode((function(i){if(!r&&i.piece&&i.piece===t.target){var n=i.getModel().get("nodeClick");if("rootToNode"===n)e._rootToNode(i);else if("link"===n){var a=i.getModel(),s=a.get("link");if(s)Ch(s,a.get("target",!0)||"_blank")}r=!0}}))}))},t.prototype._rootToNode=function(e){e!==this.seriesModel.getViewRoot()&&this.api.dispatchAction({type:FE,from:this.uid,seriesId:this.seriesModel.id,targetNode:e})},t.prototype.containPoint=function(e,t){var r=t.getData().getItemLayout(0);if(r){var i=e[0]-r.cx,n=e[1]-r.cy,a=Math.sqrt(i*i+n*n);return a<=r.r&&a>=r.r0}},t.type="sunburst",t}(Np);function zE(e){var t=0;L(e.children,(function(e){zE(e);var r=e.value;j(r)&&(r=r[0]),t+=r}));var r=e.value;j(r)&&(r=r[0]),(null==r||isNaN(r))&&(r=t),r<0&&(r=0),j(e.value)?e.value[0]=r:e.value=r}var HE=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return r.type=t.type,r.ignoreStyleOnData=!0,r}return a(t,e),t.prototype.getInitialData=function(e,t){var r={name:e.name,children:e.data};zE(r);var i=B(e.levels||[],(function(e){return new Md(e,this,t)}),this),n=WO.createTree(r,this,(function(e){e.wrapMethod("getItemModel",(function(e,t){var r=n.getNodeByDataIndex(t),a=i[r.depth];return a&&(e.parentModel=a),e}))}));return n.data},t.prototype.optionUpdated=function(){this.resetViewRoot()},t.prototype.getDataParams=function(t){var r=e.prototype.getDataParams.apply(this,arguments),i=this.getData().tree.getNodeByDataIndex(t);return r.treePathInfo=eT(i,this),r},t.prototype.getViewRoot=function(){return this._viewRoot},t.prototype.resetViewRoot=function(e){e?this._viewRoot=e:e=this._viewRoot;var t=this.getRawData().tree.root;e&&(e===t||t.contains(e))||(this._viewRoot=t)},t.prototype.enableAriaDecal=function(){iT(this)},t.type="series.sunburst",t.defaultOption={zlevel:0,z:2,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,stillShowZeroSum:!0,nodeClick:"rootToNode",renderLabelForZeroData:!1,label:{rotate:"radial",show:!0,opacity:1,align:"center",position:"inside",distance:5,silent:!0},itemStyle:{borderWidth:1,borderColor:"white",borderType:"solid",shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0.2)",shadowOffsetX:0,shadowOffsetY:0,opacity:1},emphasis:{focus:"descendant"},blur:{itemStyle:{opacity:.2},label:{opacity:.1}},animationType:"expansion",animationDuration:1e3,animationDurationUpdate:500,data:[],levels:[],sort:"desc"},t}(xp),UE=Math.PI/180;function WE(e,t,r){t.eachSeriesByType(e,(function(e){var t=e.get("center"),i=e.get("radius");j(i)||(i=[0,i]),j(t)||(t=[t,t]);var n=r.getWidth(),a=r.getHeight(),s=Math.min(n,a),o=Di(t[0],n),u=Di(t[1],a),c=Di(i[0],s/2),d=Di(i[1],s/2),h=-e.get("startAngle")*UE,l=e.get("minAngle")*UE,f=e.getData().tree.root,p=e.getViewRoot(),v=p.depth,m=e.get("sort");null!=m&&KE(p,m);var g=0;L(p.children,(function(e){!isNaN(e.getValue())&&g++}));var y=p.getValue(),b=Math.PI/(y||g)*2,x=p.depth>0,k=p.height-(x?-1:1),w=(d-c)/(k||1),_=e.get("clockwise"),S=e.get("stillShowZeroSum"),O=_?1:-1;if(x){var T=c,C=c+w,I=2*Math.PI;f.setLayout({angle:I,startAngle:h,endAngle:h+I,clockwise:_,cx:o,cy:u,r0:T,r:C})}!function e(t,r){if(t){var i=r;if(t!==f){var n=t.getValue(),a=0===y&&S?b:n*b;a<l&&(a=l),i=r+O*a;var d=t.depth-v-(x?-1:1),h=c+w*d,p=c+w*(d+1),m=t.getModel();null!=m.get("r0")&&(h=Di(m.get("r0"),s/2)),null!=m.get("r")&&(p=Di(m.get("r"),s/2)),t.setLayout({angle:a,startAngle:r,endAngle:i,clockwise:_,cx:o,cy:u,r0:h,r:p})}if(t.children&&t.children.length){var g=0;L(t.children,(function(t){g+=e(t,r+g)}))}return i-r}}(p,h)}))}function KE(e,t){var r=e.children||[];e.children=function(e,t){if("function"===typeof t){var r=B(e,(function(e,t){var r=e.getValue();return{params:{depth:e.depth,height:e.height,dataIndex:e.dataIndex,getValue:function(){return r}},index:t}}));return r.sort((function(e,r){return t(e.params,r.params)})),B(r,(function(t){return e[t.index]}))}var i="asc"===t;return e.sort((function(e,t){var r=(e.getValue()-t.getValue())*(i?1:-1);return 0===r?(e.dataIndex-t.dataIndex)*(i?-1:1):r}))}(r,t),r.length&&L(e.children,(function(e){KE(e,t)}))}function XE(e){var t={};e.eachSeriesByType("sunburst",(function(e){var r=e.getData(),i=r.tree;i.eachNode((function(n){var a=n.getModel().getModel("itemStyle").getItemStyle();a.fill||(a.fill=function(e,r,i){for(var n=e;n&&n.depth>1;)n=n.parentNode;var a=r.getColorFromPalette(n.name||n.dataIndex+"",t);return e.depth>1&&"string"===typeof a&&(a=Ut(a,(e.depth-1)/(i-1)*.5)),a}(n,e,i.root.height)),I(r.ensureUniqueItemVisual(n.dataIndex,"style"),a)}))}))}function YE(e,t){return t=t||[0,0],B(["x","y"],(function(r,i){var n=this.getAxis(r),a=t[i],s=e[i]/2;return"category"===n.type?n.getBandWidth():Math.abs(n.dataToCoord(a-s)-n.dataToCoord(a+s))}),this)}function ZE(e,t){return t=t||[0,0],B([0,1],(function(r){var i=t[r],n=e[r]/2,a=[],s=[];return a[r]=i-n,s[r]=i+n,a[1-r]=s[1-r]=t[1-r],Math.abs(this.dataToPoint(a)[r]-this.dataToPoint(s)[r])}),this)}function QE(e,t){var r=this.getAxis(),i=t instanceof Array?t[0]:t,n=(e instanceof Array?e[0]:e)/2;return"category"===r.type?r.getBandWidth():Math.abs(r.dataToCoord(i-n)-r.dataToCoord(i+n))}function $E(e,t){return t=t||[0,0],B(["Radius","Angle"],(function(r,i){var n=this["get"+r+"Axis"](),a=t[i],s=e[i]/2,o="category"===n.type?n.getBandWidth():Math.abs(n.dataToCoord(a-s)-n.dataToCoord(a+s));return"Angle"===r&&(o=o*Math.PI/180),o}),this)}function JE(e,t,r,i){return e&&(e.legacy||!1!==e.legacy&&!r&&!i&&"tspan"!==t&&("text"===t||le(e,"text")))}function eN(e,t,r){var i,n,a,s=e;if("text"===t)a=s;else{a={},le(s,"text")&&(a.text=s.text),le(s,"rich")&&(a.rich=s.rich),le(s,"textFill")&&(a.fill=s.textFill),le(s,"textStroke")&&(a.stroke=s.textStroke),n={type:"text",style:a,silent:!0},i={};var o=le(s,"textPosition");r?i.position=o?s.textPosition:"inside":o&&(i.position=s.textPosition),le(s,"textPosition")&&(i.position=s.textPosition),le(s,"textOffset")&&(i.offset=s.textOffset),le(s,"textRotation")&&(i.rotation=s.textRotation),le(s,"textDistance")&&(i.distance=s.textDistance)}return tN(a,e),L(a.rich,(function(e){tN(e,e)})),{textConfig:i,textContent:n}}function tN(e,t){t&&(t.font=t.textFont||t.font,le(t,"textStrokeWidth")&&(e.lineWidth=t.textStrokeWidth),le(t,"textAlign")&&(e.align=t.textAlign),le(t,"textVerticalAlign")&&(e.verticalAlign=t.textVerticalAlign),le(t,"textLineHeight")&&(e.lineHeight=t.textLineHeight),le(t,"textWidth")&&(e.width=t.textWidth),le(t,"textHeight")&&(e.height=t.textHeight),le(t,"textBackgroundColor")&&(e.backgroundColor=t.textBackgroundColor),le(t,"textPadding")&&(e.padding=t.textPadding),le(t,"textBorderColor")&&(e.borderColor=t.textBorderColor),le(t,"textBorderWidth")&&(e.borderWidth=t.textBorderWidth),le(t,"textBorderRadius")&&(e.borderRadius=t.textBorderRadius),le(t,"textBoxShadowColor")&&(e.shadowColor=t.textBoxShadowColor),le(t,"textBoxShadowBlur")&&(e.shadowBlur=t.textBoxShadowBlur),le(t,"textBoxShadowOffsetX")&&(e.shadowOffsetX=t.textBoxShadowOffsetX),le(t,"textBoxShadowOffsetY")&&(e.shadowOffsetY=t.textBoxShadowOffsetY))}function rN(e,t,r){var i=e;i.textPosition=i.textPosition||r.position||"inside",null!=r.offset&&(i.textOffset=r.offset),null!=r.rotation&&(i.textRotation=r.rotation),null!=r.distance&&(i.textDistance=r.distance);var n=i.textPosition.indexOf("inside")>=0,a=e.fill||"#000";iN(i,t);var s=null==i.textFill;return n?s&&(i.textFill=r.insideFill||"#fff",!i.textStroke&&r.insideStroke&&(i.textStroke=r.insideStroke),!i.textStroke&&(i.textStroke=a),null==i.textStrokeWidth&&(i.textStrokeWidth=2)):(s&&(i.textFill=e.fill||r.outsideFill||"#000"),!i.textStroke&&r.outsideStroke&&(i.textStroke=r.outsideStroke)),i.text=t.text,i.rich=t.rich,L(t.rich,(function(e){iN(e,e)})),i}function iN(e,t){t&&(le(t,"fill")&&(e.textFill=t.fill),le(t,"stroke")&&(e.textStroke=t.fill),le(t,"lineWidth")&&(e.textStrokeWidth=t.lineWidth),le(t,"font")&&(e.font=t.font),le(t,"fontStyle")&&(e.fontStyle=t.fontStyle),le(t,"fontWeight")&&(e.fontWeight=t.fontWeight),le(t,"fontSize")&&(e.fontSize=t.fontSize),le(t,"fontFamily")&&(e.fontFamily=t.fontFamily),le(t,"align")&&(e.textAlign=t.align),le(t,"verticalAlign")&&(e.textVerticalAlign=t.verticalAlign),le(t,"lineHeight")&&(e.textLineHeight=t.lineHeight),le(t,"width")&&(e.textWidth=t.width),le(t,"height")&&(e.textHeight=t.height),le(t,"backgroundColor")&&(e.textBackgroundColor=t.backgroundColor),le(t,"padding")&&(e.textPadding=t.padding),le(t,"borderColor")&&(e.textBorderColor=t.borderColor),le(t,"borderWidth")&&(e.textBorderWidth=t.borderWidth),le(t,"borderRadius")&&(e.textBorderRadius=t.borderRadius),le(t,"shadowColor")&&(e.textBoxShadowColor=t.shadowColor),le(t,"shadowBlur")&&(e.textBoxShadowBlur=t.shadowBlur),le(t,"shadowOffsetX")&&(e.textBoxShadowOffsetX=t.shadowOffsetX),le(t,"shadowOffsetY")&&(e.textBoxShadowOffsetY=t.shadowOffsetY),le(t,"textShadowColor")&&(e.textShadowColor=t.textShadowColor),le(t,"textShadowBlur")&&(e.textShadowBlur=t.textShadowBlur),le(t,"textShadowOffsetX")&&(e.textShadowOffsetX=t.textShadowOffsetX),le(t,"textShadowOffsetY")&&(e.textShadowOffsetY=t.textShadowOffsetY))}var nN=hs.CMD,aN=2*Math.PI,sN=["x","y"],oN=["width","height"],uN=[];function cN(e,t){return Math.abs(e-t)<1e-5}function dN(e){var t,r,i,n,a,s=e.data,o=e.len(),u=[],c=0,d=0,h=0,l=0;function f(e,r){t&&t.length>2&&u.push(t),t=[e,r]}function p(e,r,i,n){cN(e,i)&&cN(r,n)||t.push(e,r,i,n,i,n)}function v(e,r,i,n,a,s){var o=Math.abs(r-e),u=4*Math.tan(o/4)/3,c=r<e?-1:1,d=Math.cos(e),h=Math.sin(e),l=Math.cos(r),f=Math.sin(r),p=d*a+i,v=h*s+n,m=l*a+i,g=f*s+n,y=a*u*c,b=s*u*c;t.push(p-y*h,v+b*d,m+y*f,g-b*l,m,g)}for(var m=0;m<o;){var g=s[m++],y=1===m;switch(y&&(h=c=s[m],l=d=s[m+1],g!==nN.L&&g!==nN.C&&g!==nN.Q||(t=[h,l])),g){case nN.M:c=h=s[m++],d=l=s[m++],f(h,l);break;case nN.L:p(c,d,r=s[m++],i=s[m++]),c=r,d=i;break;case nN.C:t.push(s[m++],s[m++],s[m++],s[m++],c=s[m++],d=s[m++]);break;case nN.Q:r=s[m++],i=s[m++],n=s[m++],a=s[m++],t.push(c+2/3*(r-c),d+2/3*(i-d),n+2/3*(r-n),a+2/3*(i-a),n,a),c=n,d=a;break;case nN.A:var b=s[m++],x=s[m++],k=s[m++],w=s[m++],_=s[m++],S=s[m++]+_;m+=1;var O=!s[m++];r=Math.cos(_)*k+b,i=Math.sin(_)*w+x,y?f(h=r,l=i):p(c,d,r,i),c=Math.cos(S)*k+b,d=Math.sin(S)*w+x;for(var T=(O?-1:1)*Math.PI/2,C=_;O?C>S:C<S;C+=T){v(C,O?Math.max(C+T,S):Math.min(C+T,S),b,x,k,w)}break;case nN.R:h=c=s[m++],l=d=s[m++],r=h+s[m++],i=l+s[m++],f(r,l),p(r,l,r,i),p(r,i,h,i),p(h,i,h,l),p(h,l,r,l);break;case nN.Z:t&&p(c,d,h,l),c=h,d=l}}return t&&t.length>2&&u.push(t),u}function hN(e,t){var r=e.length,i=t.length;if(r===i)return[e,t];for(var n=r<i?e:t,a=Math.min(r,i),s=Math.abs(i-r)/6,o=(a-2)/6,u=Math.ceil(s/o)+1,c=[n[0],n[1]],d=s,h=[],l=[],f=2;f<a;){var p=n[f-2],v=n[f-1],m=n[f++],g=n[f++],y=n[f++],b=n[f++],x=n[f++],k=n[f++];if(d<=0)c.push(m,g,y,b,x,k);else{for(var w=Math.min(d,u-1)+1,_=1;_<=w;_++){var S=_/w;wa(p,m,y,x,S,h),wa(v,g,b,k,S,l),p=h[3],v=l[3],c.push(h[1],l[1],h[2],l[2],p,v),m=h[5],g=l[5],y=h[6],b=l[6]}d-=w-1}}return n===e?[c,t]:[e,c]}function lN(e,t){for(var r=e.length,i=e[r-2],n=e[r-1],a=[],s=0;s<t.length;)a[s++]=i,a[s++]=n;return a}function fN(e){for(var t=0,r=0,i=0,n=e.length,a=0,s=n-2;a<n;s=a,a+=2){var o=e[s],u=e[s+1],c=e[a],d=e[a+1],h=o*d-c*u;t+=h,r+=(o+c)*h,i+=(u+d)*h}return 0===t?[e[0]||0,e[1]||0]:[r/t/3,i/t/3,t]}function pN(e,t,r,i){for(var n=(e.length-2)/6,a=1/0,s=0,o=e.length,u=o-2,c=0;c<n;c++){for(var d=6*c,h=0,l=0;l<o;l+=2){var f=0===l?d:(d+l-2)%u+2,p=e[f]-r[0],v=e[f+1]-r[1],m=t[l]-i[0]-p,g=t[l+1]-i[1]-v;h+=m*m+g*g}h<a&&(a=h,s=c)}return s}function vN(e){for(var t=[],r=e.length,i=0;i<r;i+=2)t[i]=e[r-i-2],t[i+1]=e[r-i-1];return t}function mN(e,t,r){var i,n;if(!e||!t)return t;!e.path&&e.createPathProxy(),(i=e.path).beginPath(),e.buildPath(i,e.shape),!t.path&&t.createPathProxy(),(n=t.path)===i&&(n=new hs(!1)),n.beginPath(),bN(t)?t.__oldBuildPath(n,t.shape):t.buildPath(n,t.shape);var a=function(e,t){for(var r,i,n,a=[],s=[],o=0;o<Math.max(e.length,t.length);o++){var u=e[o],c=t[o],d=void 0,h=void 0;u?c?(i=d=(r=hN(u,c))[0],n=h=r[1]):(h=lN(n||u,u),d=u):(d=lN(i||c,c),h=c),a.push(d),s.push(h)}return[a,s]}(dN(i),dN(n)),s=function(e,t,r,i){for(var n,a=[],s=0;s<e.length;s++){var o=e[s],u=t[s],c=fN(o),d=fN(u);null==n&&(n=c[2]<0!==d[2]<0);var h=[],l=[],f=0,p=1/0,v=[],m=o.length;n&&(o=vN(o));for(var g=6*pN(o,u,c,d),y=m-2,b=0;b<y;b+=2){var x=(g+b)%y+2;h[b+2]=o[x]-c[0],h[b+3]=o[x+1]-c[1]}if(h[0]=o[g]-c[0],h[1]=o[g+1]-c[1],r>0)for(var k=i/r,w=-i/2;w<=i/2;w+=k){var _=Math.sin(w),S=Math.cos(w),O=0;for(b=0;b<o.length;b+=2){var T=h[b],C=h[b+1],I=u[b]-d[0],M=u[b+1]-d[1],A=I*S-M*_,E=I*_+M*S;v[b]=A,v[b+1]=E;var N=A-T,P=E-C;O+=N*N+P*P}if(O<p){p=O,f=w;for(var D=0;D<v.length;D++)l[D]=v[D]}}else for(var L=0;L<m;L+=2)l[L]=u[L]-d[0],l[L+1]=u[L+1]-d[1];a.push({from:h,to:l,fromCp:c,toCp:d,rotation:-f})}return a}(a[0],a[1],10,Math.PI);!function(e,t,r){if(bN(e))return void yN(e,t,r);var i=e;i.__oldBuildPath=i.buildPath,i.buildPath=gN,yN(i,t,r)}(t,s,0);var o=r&&r.done,u=r&&r.aborted,c=r&&r.during;return t.animateTo({__morphT:1},M({during:function(e){t.dirtyShape(),c&&c(e)},done:function(){var e;bN(e=t)&&(e.buildPath=e.__oldBuildPath,e.__oldBuildPath=e.__morphingData=null),t.createPathProxy(),t.dirtyShape(),o&&o()},aborted:function(){u&&u()}},r)),t}function gN(e){for(var t=this.__morphingData,r=this.__morphT,i=1-r,n=[],a=0;a<t.length;a++){var s=t[a],o=s.from,u=s.to,c=s.rotation*r,d=s.fromCp,h=s.toCp,l=Math.sin(c),f=Math.cos(c);Me(n,d,h,r);for(var p=0;p<o.length;p+=2){var v=o[p],m=o[p+1],g=v*i+u[p]*r,y=m*i+u[p+1]*r;uN[p]=g*f-y*l+n[0],uN[p+1]=g*l+y*f+n[1]}for(p=0;p<o.length;)0===p&&e.moveTo(uN[p++],uN[p++]),e.bezierCurveTo(uN[p++],uN[p++],uN[p++],uN[p++],uN[p++],uN[p++])}}function yN(e,t,r){e.__morphingData=t,e.__morphT=r}function bN(e){return null!=e.__oldBuildPath}function xN(e){return!!e.__combiningSubList}function kN(e,t,r,i){for(var n=[],a=0,s=0;s<e.length;s++){var o=e[s];if(xN(o)){for(var u=o.__combiningSubList,c=0;c<u.length;c++)n.push(u[c]);a+=u.length}else n.push(o),a++}if(a){var d=r?r.dividingMethod:null,h=CN(t,a,d);ie(h.length===a);var l=r&&r.done,f=r&&r.aborted,p=r&&r.during,v=0,m=!1,g=M({during:function(e){p&&p(e)},done:function(){++v===h.length&&(!function(e){if(!xN(e))return;var t=e;wN(t,null),t.addSelfToZr=t.__oldAddSelfToZr,t.removeSelfFromZr=t.__oldRemoveSelfFromZr,t.buildPath=t.__oldBuildPath,t.childrenRef=t.__combiningSubList=t.__oldAddSelfToZr=t.__oldRemoveSelfFromZr=t.__oldBuildPath=null}(t),l&&l())},aborted:function(){m||(m=!0,f&&f())}},r);for(s=0;s<a;s++){var y=n[s],b=h[s];i&&i(t,b,!0),mN(y,b,g)}return function(e,t){if(xN(e))return void wN(e,t);var r=e;wN(r,t),r.__oldAddSelfToZr=e.addSelfToZr,r.__oldRemoveSelfFromZr=e.removeSelfFromZr,r.addSelfToZr=_N,r.removeSelfFromZr=ON,r.__oldBuildPath=r.buildPath,r.buildPath=fe,r.childrenRef=TN}(t,h),{fromIndividuals:n,toIndividuals:h,count:a}}}function wN(e,t){if(e.__combiningSubList!==t){if(SN(e,"removeSelfFromZr"),e.__combiningSubList=t,t)for(var r=0;r<t.length;r++)t[r].parent=e;SN(e,"addSelfToZr")}}function _N(e){this.__oldAddSelfToZr(e),SN(this,"addSelfToZr")}function SN(e,t){var r=e.__combiningSubList,i=e.__zr;if(r&&i)for(var n=0;n<r.length;n++){r[n][t](i)}}function ON(e){this.__oldRemoveSelfFromZr(e);for(var t=this.__combiningSubList,r=0;r<t.length;r++){t[r].removeSelfFromZr(e)}}function TN(){return this.__combiningSubList}function CN(e,t,r){return"duplicate"===r?IN(e,t):function(e,t){var r=[];if(t<=0)return r;if(1===t)return IN(e,t);if(e instanceof Ks)for(var i=(h=e.shape).height>h.width?1:0,n=oN[i],a=sN[i],s=h[n]/t,o=h[a],u=0;u<t;u++,o+=s){var c={x:h.x,y:h.y,width:h.width,height:h.height};c[a]=o,c[n]=u<t-1?s:h[a]+h[n]-o;var d=new Ks({shape:c});r.push(d)}else{if(!(e instanceof ju))return IN(e,t);var h,l=(h=e.shape).clockwise,f=h.startAngle,p=h.endAngle,v=(function(e,t,r){return t+aN*Math[r?"ceil":"floor"]((e-t)/aN)}(f,h.endAngle,l)-f)/t,m=f;for(u=0;u<t;u++,m+=v){d=new ju({shape:{cx:h.cx,cy:h.cy,r:h.r,r0:h.r0,clockwise:l,startAngle:m,endAngle:u===t-1?p:m+v}});r.push(d)}}return r}(e,t)}function IN(e,t){var r=[];if(t<=0)return r;for(var i=e.constructor,n=0;n<t;n++){var a=new i({shape:O(e.shape)});r.push(a)}return r}var MN=fn(),AN=(G({x:1,y:1,scaleX:1,scaleY:1,originX:1,originY:1,rotation:1}).join(", "),{color:"fill",borderColor:"stroke"}),EN={symbol:1,symbolSize:1,symbolKeepAspect:1,legendSymbol:1,visualMeta:1,liftZ:1,decal:1},NN="emphasis",PN="normal",DN="blur",LN="select",BN=[PN,NN,DN,LN],RN={normal:["itemStyle"],emphasis:[NN,"itemStyle"],blur:[DN,"itemStyle"],select:[LN,"itemStyle"]},VN={normal:["label"],emphasis:[NN,"label"],blur:[DN,"label"],select:[LN,"label"]},GN={normal:{},emphasis:{},blur:{},select:{}},FN={position:["x","y"],scale:["scaleX","scaleY"],origin:["originX","originY"]},qN=new St,jN={cartesian2d:function(e){var t=e.master.getRect();return{coordSys:{type:"cartesian2d",x:t.x,y:t.y,width:t.width,height:t.height},api:{coord:function(t){return e.dataToPoint(t)},size:F(YE,e)}}},geo:function(e){var t=e.getBoundingRect();return{coordSys:{type:"geo",x:t.x,y:t.y,width:t.width,height:t.height,zoom:e.getZoom()},api:{coord:function(t){return e.dataToPoint(t)},size:F(ZE,e)}}},singleAxis:function(e){var t=e.getRect();return{coordSys:{type:"singleAxis",x:t.x,y:t.y,width:t.width,height:t.height},api:{coord:function(t){return e.dataToPoint(t)},size:F(QE,e)}}},polar:function(e){var t=e.getRadiusAxis(),r=e.getAngleAxis(),i=t.getExtent();return i[0]>i[1]&&i.reverse(),{coordSys:{type:"polar",cx:e.cx,cy:e.cy,r:i[1],r0:i[0]},api:{coord:function(i){var n=t.dataToRadius(i[0]),a=r.dataToAngle(i[1]),s=e.coordToPoint([n,a]);return s.push(n,a*Math.PI/180),s},size:F($E,e)}}},calendar:function(e){var t=e.getRect(),r=e.getRangeInfo();return{coordSys:{type:"calendar",x:t.x,y:t.y,width:t.width,height:t.height,cellWidth:e.getCellWidth(),cellHeight:e.getCellHeight(),rangeInfo:{start:r.start,end:r.end,weeks:r.weeks,dayCount:r.allDay}},api:{coord:function(t,r){return e.dataToPoint(t,r)}}}}},zN=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return r.type=t.type,r}return a(t,e),t.prototype.optionUpdated=function(){this.currentZLevel=this.get("zlevel",!0),this.currentZ=this.get("z",!0)},t.prototype.getInitialData=function(e,t){return Ex(this.getSource(),this)},t.prototype.getDataParams=function(t,r,i){var n=e.prototype.getDataParams.call(this,t,r);return i&&(n.info=MN(i).info),n},t.type="series.custom",t.dependencies=["grid","polar","geo","singleAxis","calendar"],t.defaultOption={coordinateSystem:"cartesian2d",zlevel:0,z:2,legendHoverLink:!0,clip:!1},t}(xp),HN=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return r.type=t.type,r}return a(t,e),t.prototype.render=function(e,t,r,i){var n=this._data,a=e.getData(),s=this.group,o=dP(e,a,t,r),u=e.__transientTransitionOpt;if(!u||null!=u.from&&null!=u.to){var c=new OP(e,u),d=u?"multiple":"oneToOne";new Kb(n?n.getIndices():[],a.getIndices(),UN(n,d,u&&u.from),UN(a,d,u&&u.to),null,d).add((function(t){lP(r,null,t,o(t,i),e,s,a,null)})).remove((function(t){kP(n.getItemGraphicEl(t),e,s)})).update((function(t,u){c.reset("oneToOne");var d=n.getItemGraphicEl(u);c.findAndAddFrom(d),c.hasFrom()&&(SP(d,s),d=null),lP(r,d,t,o(t,i),e,s,a,c),c.applyMorphing()})).updateManyToOne((function(t,u){c.reset("manyToOne");for(var d=0;d<u.length;d++){var h=n.getItemGraphicEl(u[d]);c.findAndAddFrom(h),SP(h,s)}lP(r,null,t,o(t,i),e,s,a,c),c.applyMorphing()})).updateOneToMany((function(t,u){c.reset("oneToMany");var d=t.length,h=n.getItemGraphicEl(u);c.findAndAddFrom(h),SP(h,s);for(var l=0;l<d;l++)lP(r,null,t[l],o(t[l],i),e,s,a,c);c.applyMorphing()})).execute()}else n&&n.each((function(t){kP(n.getItemGraphicEl(t),e,s)})),a.each((function(t){lP(r,null,t,o(t,i),e,s,a,null)}));var h=e.get("clip",!0)?rk(e.coordinateSystem,!1,e):null;h?s.setClipPath(h):s.removeClipPath(),this._data=a},t.prototype.incrementalPrepareRender=function(e,t,r){this.group.removeAll(),this._data=null},t.prototype.incrementalRender=function(e,t,r,i,n){var a=t.getData(),s=dP(t,a,r,i);function o(e){e.isGroup||(e.incremental=!0,e.ensureState("emphasis").hoverLayer=!0)}for(var u=e.start;u<e.end;u++){lP(null,null,u,s(u,n),t,this.group,a,null).traverse(o)}},t.prototype.filterForExposedEvent=function(e,t,r,i){var n=t.element;if(null==n||r.name===n)return!0;for(;(r=r.__hostTarget||r.parent)&&r!==this.group;)if(r.name===n)return!0;return!1},t.type="custom",t}(Np);function UN(e,t,r){if(e){if("oneToOne"===t)return function(t,r){return e.getId(r)};var i=e.getDimension(r),n=e.getDimensionInfo(i);if(!n){0,Mf("")}var a=n.ordinalMeta;return function(t,r){var n=e.get(i,r);return a&&(n=a.categories[n]),null==n||Q(n)?t+"":"_ec_"+n}}}function WN(e){var t,r=e.type;if("path"===r){var i=e.shape,n=null!=i.width&&null!=i.height?{x:i.x||0,y:i.y||0,width:i.width,height:i.height}:null,a=wP(i);t=Ec(a,null,n,i.layout||"center"),MN(t).customPathData=a}else if("image"===r)t=new Gs({}),MN(t).customImagePath=e.style.image;else if("text"===r)t=new no({});else if("group"===r)t=new Ti;else{if("compoundPath"===r)throw new Error('"compoundPath" is not supported yet.');var s=Ac(r);if(!s){0,Mf("")}t=new s}return MN(t).customGraphicType=r,t.name=e.name,t.z2EmphasisLift=1,t.z2SelectLift=1,t}function KN(e,t,r,i,n,a,s,o,u,c){var d={},h={},l=t.isGroup?null:t;!r&&ZN("shape",t,null,n,d,u),QN("shape",n,h),!r&&ZN("extra",t,null,n,d,u),QN("extra",n,h),!r&&$N(t,null,n,d,u),function(e,t){oP(e,t,"position"),oP(e,t,"scale"),oP(e,t,"origin"),uP(e,t,"x"),uP(e,t,"y"),uP(e,t,"scaleX"),uP(e,t,"scaleY"),uP(e,t,"originX"),uP(e,t,"originY"),uP(e,t,"rotation")}(n,h);var f=s&&s.normal.cfg;if(f&&t.setTextConfig(f),"text"===t.type&&a){var p=a;le(p,"textFill")&&(p.fill=p.textFill),le(p,"textStroke")&&(p.stroke=p.textStroke)}if(a){var v=void 0,m=_P(t)?a.decal:null;e&&m&&(m.dirty=!0,v=Fm(m,e)),a.__decalPattern=v}return!r&&JN(t,null,n,a,d,u),l&&le(n,"invisible")&&(l.invisible=n.invisible),r||(XN(t,h,a),YN(t,i,n,o,d,u)),le(n,"silent")&&(t.silent=n.silent),le(n,"ignore")&&(t.ignore=n.ignore),c||le(n,"info")&&(MN(t).info=n.info),a?t.dirty():t.markRedraw(),r?h:null}function XN(e,t,r){var i=e.isGroup?null:e;if(i&&r){var n=r.__decalPattern,a=void 0;n&&(a=r.decal,r.decal=n),i.useStyle(r),n&&(r.decal=a);for(var s=i.animators,o=0;o<s.length;o++){var u=s[o];"style"===u.targetName&&u.changeTarget(i.style)}}t&&e.attr(t)}function YN(e,t,r,i,n,a){if(n){var s=r.during;MN(e).userDuring=s;var o={dataIndex:t,isFrom:!0,during:s?F(nP,{el:e,userDuring:s}):null};a?qc(e,n,i,o):Fc(e,n,i,o)}}function ZN(e,t,r,i,n,a){var s=i[e];if(s){var o,u=t[e],c=s.enterFrom;if(a&&c){!o&&(o=n[e]={});for(var d=G(c),h=0;h<d.length;h++){o[b=d[h]]=c[b]}}if(!a&&u&&(null==r||"shape"!==e))if(s.transition){!o&&(o=n[e]={});var l=tn(s.transition);for(h=0;h<l.length;h++){var f=u[b=l[h]];0,o[b]=f}}else if(E(i.transition,e)>=0){!o&&(o=n[e]={});var p=G(u);for(h=0;h<p.length;h++){f=u[b=p[h]];eP(s[b],f)&&(o[b]=f)}}var v=s.leaveTo;if(v){var m=tP(t),g=m[e]||(m[e]={}),y=G(v);for(h=0;h<y.length;h++){var b;g[b=y[h]]=v[b]}}}}function QN(e,t,r){var i=t[e];if(i)for(var n=r[e]={},a=G(i),s=0;s<a.length;s++){var o=a[s];n[o]=or(i[o])}}function $N(e,t,r,i,n){var a=r.enterFrom;if(n&&a)for(var s=G(a),o=0;o<s.length;o++){0,i[p=s[o]]=a[p]}if(!n)if(t){var u=function(e,t){if(!e||e===t||e.parent===t.parent)return e;var r=qN.transform||(qN.transform=dt([])),i=e.getComputedTransform();i?ht(r,i):dt(r);var n=t.parent;n&&n.getComputedTransform();return qN.originX=e.originX,qN.originY=e.originY,qN.parent=n,qN.decomposeTransform(),qN}(t,e);cP(i,"x",u),cP(i,"y",u),cP(i,"scaleX",u),cP(i,"scaleY",u),cP(i,"originX",u),cP(i,"originY",u),cP(i,"rotation",u)}else if(r.transition){var c=tn(r.transition);for(o=0;o<c.length;o++){if("style"!==(p=c[o])&&"shape"!==p&&"extra"!==p){var d=e[p];0,i[p]=d}}}else cP(i,"x",e),cP(i,"y",e);var h=r.leaveTo;if(h){var l=tP(e),f=G(h);for(o=0;o<f.length;o++){var p;0,l[p=f[o]]=h[p]}}}function JN(e,t,r,i,n,a){if(i){var s,o=(t||e).style,u=i.enterFrom;if(a&&u){var c=G(u);!s&&(s=n.style={});for(var d=0;d<c.length;d++){s[x=c[d]]=u[x]}}if(!a&&o)if(i.transition){var h=tn(i.transition);!s&&(s=n.style={});for(d=0;d<h.length;d++){var l=o[x=h[d]];s[x]=l}}else if(e.getAnimationStyleProps&&E(r.transition,"style")>=0){var f=e.getAnimationStyleProps(),p=f?f.style:null;if(p){!s&&(s=n.style={});var v=G(i);for(d=0;d<v.length;d++){if(p[x=v[d]]){l=o[x];s[x]=l}}}}var m=i.leaveTo;if(m){var g=G(m),y=tP(e),b=y.style||(y.style={});for(d=0;d<g.length;d++){var x;b[x=g[d]]=m[x]}}}}function eP(e,t){return D(e)?e!==t:null!=e&&isFinite(e)}function tP(e){var t=MN(e);return t.leaveToProps||(t.leaveToProps={})}var rP={},iP={setTransform:function(e,t){return rP.el[e]=t,this},getTransform:function(e){return rP.el[e]},setShape:function(e,t){return(rP.el.shape||(rP.el.shape={}))[e]=t,rP.isShapeDirty=!0,this},getShape:function(e){var t=rP.el.shape;if(t)return t[e]},setStyle:function(e,t){var r=rP.el.style;return r&&(r[e]=t,rP.isStyleDirty=!0),this},getStyle:function(e){var t=rP.el.style;if(t)return t[e]},setExtra:function(e,t){return(rP.el.extra||(rP.el.extra={}))[e]=t,this},getExtra:function(e){var t=rP.el.extra;if(t)return t[e]}};function nP(){var e=this,t=e.el;if(t){var r=MN(t).userDuring,i=e.userDuring;r===i?(rP.el=t,rP.isShapeDirty=!1,rP.isStyleDirty=!1,i(iP),rP.isShapeDirty&&t.dirtyShape&&t.dirtyShape(),rP.isStyleDirty&&t.dirtyStyle&&t.dirtyStyle()):e.el=e.userDuring=null}}function aP(e,t,r,i,n,a,s){var o=t.isGroup?null:t,u=n&&n[e].cfg;if(o){var c=o.ensureState(e);if(!1===i){var d=o.getState(e);d&&(d.style=null)}else c.style=i||null;u&&(c.textConfig=u),No(o)}}function sP(e,t,r){var i=r===PN,n=i?t:mP(t,r),a=n?n.z2:null;null!=a&&((i?e:e.ensureState(r)).z2=a||0)}function oP(e,t,r,i){var n=e[r],a=FN[r];n&&(i?(t[a[0]]=i[a[0]],t[a[1]]=i[a[1]]):(t[a[0]]=n[0],t[a[1]]=n[1]))}function uP(e,t,r,i){null!=e[r]&&(t[r]=i?i[r]:e[r])}function cP(e,t,r){r&&(e[t]=r[t])}function dP(e,t,r,i){var n=e.get("renderItem"),a=e.coordinateSystem,s={};a&&(s=a.prepareCustoms?a.prepareCustoms(a):jN[a.type](a));for(var o,u,c=M({getWidth:i.getWidth,getHeight:i.getHeight,getZr:i.getZr,getDevicePixelRatio:i.getDevicePixelRatio,value:function(e,r){return null==r&&(r=o),t.get(t.getDimension(e||0),r)},style:function(r,i){0;null==i&&(i=o);var n=t.getItemVisual(i,"style"),a=n&&n.fill,s=n&&n.opacity,u=y(i,PN).getItemStyle();null!=a&&(u.fill=a),null!=s&&(u.opacity=s);var c={inheritColor:H(a)?a:"#000"},d=b(i,PN),h=cd(d,null,c,!1,!0);h.text=d.getShallow("show")?J(e.getFormattedLabel(i,PN),Px(t,i)):null;var l=dd(d,c,!1);return k(r,u),u=rN(u,h,l),r&&x(u,r),u.legacy=!0,u},ordinalRawValue:function(e,r){null==r&&(r=o);var i=t.getDimensionInfo(e||0);if(!i)return;var n=t.get(i.name,r),a=i&&i.ordinalMeta;return a?a.categories[n]:n},styleEmphasis:function(r,i){0;null==i&&(i=o);var n=y(i,NN).getItemStyle(),a=b(i,NN),s=cd(a,null,null,!0,!0);s.text=a.getShallow("show")?ee(e.getFormattedLabel(i,NN),e.getFormattedLabel(i,PN),Px(t,i)):null;var u=dd(a,null,!0);return k(r,n),n=rN(n,s,u),r&&x(n,r),n.legacy=!0,n},visual:function(e,r){if(null==r&&(r=o),le(AN,e)){var i=t.getItemVisual(r,"style");return i?i[AN[e]]:null}if(le(EN,e))return t.getItemVisual(r,e)},barLayout:function(e){if("cartesian2d"===a.type){return function(e){var t=[],r=e.axis,i="axis0";if("category"===r.type){for(var n=r.getBandWidth(),a=0;a<e.count;a++)t.push(M({bandWidth:n,axisKey:i,stackId:gk+a},e));var s=_k(t),o=[];for(a=0;a<e.count;a++){var u=s.axis0[gk+a];u.offsetCenter=u.offset+u.width/2,o.push(u)}return o}}(M({axis:a.getBaseAxis()},e))}},currentSeriesIndices:function(){return r.getCurrentSeriesIndices()},font:function(e){return vd(e,r)}},s.api||{}),d={context:{},seriesId:e.id,seriesName:e.name,seriesIndex:e.seriesIndex,coordSys:s.coordSys,dataInsideLength:t.count(),encode:hP(e.getData())},h={},l={},f={},p={},v=0;v<BN.length;v++){var m=BN[v];f[m]=e.getModel(RN[m]),p[m]=e.getModel(VN[m])}function g(e){return e===o?u||(u=t.getItemModel(e)):t.getItemModel(e)}function y(e,r){return t.hasItemOption?e===o?h[r]||(h[r]=g(e).getModel(RN[r])):g(e).getModel(RN[r]):f[r]}function b(e,r){return t.hasItemOption?e===o?l[r]||(l[r]=g(e).getModel(VN[r])):g(e).getModel(VN[r]):p[r]}return function(e,r){return o=e,u=null,h={},l={},n&&n(M({dataIndexInside:e,dataIndex:t.getRawIndex(e),actionType:r?r.type:null},d),c)};function x(e,t){for(var r in t)le(t,r)&&(e[r]=t[r])}function k(e,t){e&&(e.textFill&&(t.textFill=e.textFill),e.textPosition&&(t.textPosition=e.textPosition))}}function hP(e){var t={};return L(e.dimensions,(function(r,i){var n=e.getDimensionInfo(r);if(!n.isExtraCoord){var a=n.coordDim;(t[a]=t[a]||[])[n.coordDimIndex]=i}})),t}function lP(e,t,r,i,n,a,s,o){if(i)return(t=fP(e,t,r,i,n,a,!0,o))&&s.setItemGraphicEl(r,t),Xo(t,i.focus,i.blurScope),t;SP(t,a)}function fP(e,t,r,i,n,a,s,o){var u=-1;t&&pP(t,i)&&(u=a.childrenRef().indexOf(t),t=null);var c=!t;t?t.clearStates():t=WN(i);var d=(MN(t).canMorph=i.morph&&_P(t))&&o&&o.hasFrom(),h=c&&!d;GN.normal.cfg=GN.normal.conOpt=GN.emphasis.cfg=GN.emphasis.conOpt=GN.blur.cfg=GN.blur.conOpt=GN.select.cfg=GN.select.conOpt=null,GN.isLegacy=!1,function(e,t,r,i,n,a){if(e.isGroup)return;vP(r,null,a),vP(r,NN,a);var s=a.normal.conOpt,o=a.emphasis.conOpt,u=a.blur.conOpt,c=a.select.conOpt;if(null!=s||null!=o||null!=c||null!=u){var d=e.getTextContent();if(!1===s)d&&e.removeTextContent();else{s=a.normal.conOpt=s||{type:"text"},d?d.clearStates():(d=WN(s),e.setTextContent(d));var h=s&&s.style;KN(null,d,null,t,s,h,null,i,n,!0);for(var l=0;l<BN.length;l++){var f=BN[l];if(f!==PN){var p=a[f].conOpt;aP(f,d,0,gP(s,p,f),null)}}h?d.dirty():d.markRedraw()}}}(t,r,i,n,h,GN),function(e,t,r,i,n){var a=r.clipPath;if(!1===a)e&&e.getClipPath()&&e.removeClipPath();else if(a){var s=e.getClipPath();s&&pP(s,a)&&(s=null),s||(s=WN(a),e.setClipPath(s)),KN(null,s,null,t,a,null,null,i,n,!1)}}(t,r,i,n,h);var l=KN(e,t,d,r,i,i.style,GN,n,h,!1);d&&o.addTo(t,i,r,l);for(var f=0;f<BN.length;f++){var p=BN[f];if(p!==PN){var v=mP(i,p);aP(p,t,0,gP(i,v,p),GN)}}return function(e,t,r,i){if(!e.isGroup){var n=e,a=r.currentZ,s=r.currentZLevel;n.z=a,n.zlevel=s;var o=t.z2;null!=o&&(n.z2=o||0);for(var u=0;u<BN.length;u++)sP(n,t,BN[u])}}(t,i,n),"group"===i.type&&function(e,t,r,i,n,a){var s=i.children,o=s?s.length:0,u=i.$mergeChildren,c="byName"===u||i.diffChildrenByName,d=!1===u;if(!o&&!c&&!d)return;if(c)return h={api:e,oldChildren:t.children()||[],newChildren:s||[],dataIndex:r,seriesModel:n,group:t,morphPreparation:a},void new Kb(h.oldChildren,h.newChildren,yP,yP,h).add(bP).update(bP).remove(xP).execute();var h;d&&t.removeAll();for(var l=0;l<o;l++)s[l]&&fP(e,t.childAt(l),r,s[l],n,t,!1,a);for(var f=t.childCount()-1;f>=l;f--)kP(t.childAt(f),n,t)}(e,t,r,i,n,o),u>=0?a.replaceAt(t,u):a.add(t),t}function pP(e,t){var r,i=MN(e),n=t.type,a=t.shape,s=t.style;return null!=n&&n!==i.customGraphicType||"path"===n&&((r=a)&&(le(r,"pathData")||le(r,"d")))&&wP(a)!==i.customPathData||"image"===n&&le(s,"image")&&s.image!==i.customImagePath}function vP(e,t,r){var i=t?mP(e,t):e,n=t?gP(e,i,NN):e.style,a=e.type,s=i?i.textConfig:null,o=e.textContent,u=o?t?mP(o,t):o:null;if(n&&(r.isLegacy||JE(n,a,!!s,!!u))){r.isLegacy=!0;var c=eN(n,a,!t);!s&&c.textConfig&&(s=c.textConfig),!u&&c.textContent&&(u=c.textContent)}if(!t&&u){var d=u;!d.type&&(d.type="text")}var h=t?r[t]:r.normal;h.cfg=s,h.conOpt=u}function mP(e,t){return t?e?e[t]:null:e}function gP(e,t,r){var i=t&&t.style;return null==i&&r===NN&&e&&(i=e.styleEmphasis),i}function yP(e,t){var r=e&&e.name;return null!=r?r:"e\0\0"+t}function bP(e,t){var r=this.context,i=null!=e?r.newChildren[e]:null,n=null!=t?r.oldChildren[t]:null;fP(r.api,n,r.dataIndex,i,r.seriesModel,r.group,0,r.morphPreparation)}function xP(e){var t=this.context;kP(t.oldChildren[e],t.seriesModel,t.group)}function kP(e,t,r){if(e){var i=MN(e).leaveToProps;i?Fc(e,i,t,{cb:function(){r.remove(e)}}):r.remove(e)}}function wP(e){return e&&(e.pathData||e.d)}function _P(e){return e&&e instanceof Ns}function SP(e,t){e&&t.remove(e)}var OP=function(){function e(e,t){this._fromList=[],this._toList=[],this._toElOptionList=[],this._allPropsFinalList=[],this._toDataIndices=[],this._morphConfigList=[],this._seriesModel=e,this._transOpt=t}return e.prototype.hasFrom=function(){return!!this._fromList.length},e.prototype.findAndAddFrom=function(e){if(e&&(MN(e).canMorph&&this._fromList.push(e),e.isGroup))for(var t=e.childrenRef(),r=0;r<t.length;r++)this.findAndAddFrom(t[r])},e.prototype.addTo=function(e,t,r,i){e&&(this._toList.push(e),this._toElOptionList.push(t),this._toDataIndices.push(r),this._allPropsFinalList.push(i))},e.prototype.applyMorphing=function(){var e=this._type,t=this._fromList,r=this._toList.length,i=t.length;if(i&&r)if("oneToOne"===e)for(var n=0;n<r;n++)this._oneToOneForSingleTo(n,n);else if("manyToOne"===e)for(var a=Math.max(1,Math.floor(i/r)),s=(n=0,0);n<r;n++,s+=a){var o=n+1>=r?i-s:a;this._manyToOneForSingleTo(n,s>=i?null:s,o)}else if("oneToMany"===e)for(var u=Math.max(1,Math.floor(r/i)),c=0,d=0;c<r;c+=u,d++){var h=c+u>=r?r-c:u;this._oneToManyForSingleFrom(c,h,d>=i?null:d)}},e.prototype._oneToOneForSingleTo=function(e,t){var r,i=this._toList[e],n=this._toElOptionList[e],a=this._toDataIndices[e],s=this._allPropsFinalList[e],o=this._fromList[t],u=this._getOrCreateMorphConfig(a),c=u.duration;if(o&&xN(o)){if(XN(i,s,n.style),c){var d=kN([o],i,u,TP);this._processResultIndividuals(d,e,null)}}else{var h=c&&o&&(o!==i||(bN(r=o)||xN(r)))?o:null,l={};ZN("shape",i,h,n,l,!1),ZN("extra",i,h,n,l,!1),$N(i,h,n,l,!1),JN(i,h,n,n.style,l,!1),XN(i,s,n.style),h&&mN(h,i,u),YN(i,a,n,this._seriesModel,l,!1)}},e.prototype._manyToOneForSingleTo=function(e,t,r){var i=this._toList[e],n=this._toElOptionList[e];XN(i,this._allPropsFinalList[e],n.style);var a=this._getOrCreateMorphConfig(this._toDataIndices[e]);if(a.duration&&null!=t){for(var s=[],o=t;o<r;o++)s.push(this._fromList[o]);var u=kN(s,i,a,TP);this._processResultIndividuals(u,e,null)}},e.prototype._oneToManyForSingleFrom=function(e,t,r){for(var i=null==r?null:this._fromList[r],n=this._toList,a=[],s=e;s<t;s++){var o=n[s];XN(o,this._allPropsFinalList[s],this._toElOptionList[s].style),a.push(o)}var u=this._getOrCreateMorphConfig(this._toDataIndices[e]);if(u.duration&&i){var c=function(e,t,r,i){var n,a=t.length,s=r?r.dividingMethod:null,o=!1;if(xN(e)){var u=e.__combiningSubList;u.length===a?n=u:(n=CN(e,a,s),o=!0)}else n=CN(e,a,s),o=!0;ie(n.length===a);for(var c=0;c<a;c++)o&&i&&i(e,n[c],!1),mN(n[c],t[c],r);return{fromIndividuals:n,toIndividuals:t,count:a}}(i,a,u,TP);this._processResultIndividuals(c,e,t)}},e.prototype._processResultIndividuals=function(e,t,r){for(var i=null!=r,n=0;n<e.count;n++){var a=e.fromIndividuals[n],s=e.toIndividuals[n],o=t+(i?n:0),u=this._toElOptionList[o],c=this._toDataIndices[o],d={};$N(s,a,u,d,!1),JN(s,a,u,u.style,d,!1),YN(s,c,u,this._seriesModel,d,!1)}},e.prototype._getOrCreateMorphConfig=function(e){var t,r,i,n=this._morphConfigList,a=n[e];if(a)return a;var s=this._seriesModel,o=this._transOpt;if(s.isAnimationEnabled()){var u=void 0;if(s&&s.ecModel){var c=s.ecModel.getUpdatePayload();u=c&&c.animation}if(u)t=u.duration||0,r=u.easing||"cubicOut",i=u.delay||0;else{r=s.get("animationEasingUpdate");var d=s.get("animationDelayUpdate");i=z(d)?d(e):d;var h=s.get("animationDurationUpdate");t=z(h)?h(e):h}}return a={duration:t||0,delay:i,easing:r,dividingMethod:o?o.dividingMethod:null},n[e]=a,a},e.prototype.reset=function(e){this._type=e,this._fromList.length=this._toList.length=this._toElOptionList.length=this._allPropsFinalList.length=this._toDataIndices.length=0},e}();function TP(e,t,r){t.style=r?O(e.style):e.style,t.zlevel=e.zlevel,t.z=e.z,t.z2=e.z2}var CP=fn(),IP=O,MP=F;function AP(e,t,r,i){EP(CP(r).lastProp,i)||(CP(r).lastProp=i,t?Fc(r,i,e):(r.stopAnimation(),r.attr(i)))}function EP(e,t){if(K(e)&&K(t)){var r=!0;return L(t,(function(t,i){r=r&&EP(e[i],t)})),!!r}return e===t}function NP(e,t){e[t.get(["label","show"])?"show":"hide"]()}function PP(e){return{x:e.x||0,y:e.y||0,rotation:e.rotation||0}}function DP(e,t,r){var i=t.get("z"),n=t.get("zlevel");e&&e.traverse((function(e){"group"!==e.type&&(null!=i&&(e.z=i),null!=n&&(e.zlevel=n),e.silent=r)}))}var LP=function(){function e(){this._dragging=!1,this.animationThreshold=15}return e.prototype.render=function(e,t,r,i){var n=t.get("value"),a=t.get("status");if(this._axisModel=e,this._axisPointerModel=t,this._api=r,i||this._lastValue!==n||this._lastStatus!==a){this._lastValue=n,this._lastStatus=a;var s=this._group,o=this._handle;if(!a||"hide"===a)return s&&s.hide(),void(o&&o.hide());s&&s.show(),o&&o.show();var u={};this.makeElOption(u,n,e,t,r);var c=u.graphicKey;c!==this._lastGraphicKey&&this.clear(r),this._lastGraphicKey=c;var d=this._moveAnimation=this.determineAnimation(e,t);if(s){var h=q(AP,t,d);this.updatePointerEl(s,u,h),this.updateLabelEl(s,u,h,t)}else s=this._group=new Ti,this.createPointerEl(s,u,e,t),this.createLabelEl(s,u,e,t),r.getZr().add(s);DP(s,t,!0),this._renderHandle(n)}},e.prototype.remove=function(e){this.clear(e)},e.prototype.dispose=function(e){this.clear(e)},e.prototype.determineAnimation=function(e,t){var r=t.get("animation"),i=e.axis,n="category"===i.type,a=t.get("snap");if(!a&&!n)return!1;if("auto"===r||null==r){var s=this.animationThreshold;if(n&&i.getBandWidth()>s)return!0;if(a){var o=iS(e).seriesDataCount,u=i.getExtent();return Math.abs(u[0]-u[1])/o>s}return!1}return!0===r},e.prototype.makeElOption=function(e,t,r,i,n){},e.prototype.createPointerEl=function(e,t,r,n){var a=t.pointer;if(a){var s=CP(e).pointerEl=new i[a.type](IP(t.pointer));e.add(s)}},e.prototype.createLabelEl=function(e,t,r,i){if(t.label){var n=CP(e).labelEl=new no(IP(t.label));e.add(n),NP(n,i)}},e.prototype.updatePointerEl=function(e,t,r){var i=CP(e).pointerEl;i&&t.pointer&&(i.setStyle(t.pointer.style),r(i,{shape:t.pointer.shape}))},e.prototype.updateLabelEl=function(e,t,r,i){var n=CP(e).labelEl;n&&(n.setStyle(t.label.style),r(n,{x:t.label.x,y:t.label.y}),NP(n,i))},e.prototype._renderHandle=function(e){if(!this._dragging&&this.updateHandleTransform){var t,r=this._axisPointerModel,i=this._api.getZr(),n=this._handle,a=r.getModel("handle"),s=r.get("status");if(!a.get("show")||!s||"hide"===s)return n&&i.remove(n),void(this._handle=null);this._handle||(t=!0,n=this._handle=Jc(a.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(e){Ze(e.event)},onmousedown:MP(this._onHandleDragMove,this,0,0),drift:MP(this._onHandleDragMove,this),ondragend:MP(this._onHandleDragEnd,this)}),i.add(n)),DP(n,r,!1),n.setStyle(a.getItemStyle(null,["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]));var o=a.get("size");j(o)||(o=[o,o]),n.scaleX=o[0]/2,n.scaleY=o[1]/2,Rp(this,"_doDispatchAxisPointer",a.get("throttle")||0,"fixRate"),this._moveHandleToValue(e,t)}},e.prototype._moveHandleToValue=function(e,t){AP(this._axisPointerModel,!t&&this._moveAnimation,this._handle,PP(this.getHandleTransform(e,this._axisModel,this._axisPointerModel)))},e.prototype._onHandleDragMove=function(e,t){var r=this._handle;if(r){this._dragging=!0;var i=this.updateHandleTransform(PP(r),[e,t],this._axisModel,this._axisPointerModel);this._payloadInfo=i,r.stopAnimation(),r.attr(PP(i)),CP(r).lastProp=null,this._doDispatchAxisPointer()}},e.prototype._doDispatchAxisPointer=function(){if(this._handle){var e=this._payloadInfo,t=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:e.cursorPoint[0],y:e.cursorPoint[1],tooltipOption:e.tooltipOption,axesInfo:[{axisDim:t.axis.dim,axisIndex:t.componentIndex}]})}},e.prototype._onHandleDragEnd=function(){if(this._dragging=!1,this._handle){var e=this._axisPointerModel.get("value");this._moveHandleToValue(e),this._api.dispatchAction({type:"hideTip"})}},e.prototype.clear=function(e){this._lastValue=null,this._lastStatus=null;var t=e.getZr(),r=this._group,i=this._handle;t&&r&&(this._lastGraphicKey=null,r&&t.remove(r),i&&t.remove(i),this._group=null,this._handle=null,this._payloadInfo=null)},e.prototype.doClear=function(){},e.prototype.buildLabel=function(e,t,r){return{x:e[r=r||0],y:e[1-r],width:t[r],height:t[1-r]}},e}();function BP(e){var t,r=e.get("type"),i=e.getModel(r+"Style");return"line"===r?(t=i.getLineStyle()).fill=null:"shadow"===r&&((t=i.getAreaStyle()).stroke=null),t}function RP(e,t,r,i,n){var a=VP(r.get("value"),t.axis,t.ecModel,r.get("seriesDataIndices"),{precision:r.get(["label","precision"]),formatter:r.get(["label","formatter"])}),s=r.getModel("label"),o=yh(s.get("padding")||0),u=s.getFont(),c=Mr(a,u),d=n.position,h=c.width+o[1]+o[3],l=c.height+o[0]+o[2],f=n.align;"right"===f&&(d[0]-=h),"center"===f&&(d[0]-=h/2);var p=n.verticalAlign;"bottom"===p&&(d[1]-=l),"middle"===p&&(d[1]-=l/2),function(e,t,r,i){var n=i.getWidth(),a=i.getHeight();e[0]=Math.min(e[0]+t,n)-t,e[1]=Math.min(e[1]+r,a)-r,e[0]=Math.max(e[0],0),e[1]=Math.max(e[1],0)}(d,h,l,i);var v=s.get("backgroundColor");v&&"auto"!==v||(v=t.get(["axisLine","lineStyle","color"])),e.label={x:d[0],y:d[1],style:cd(s,{text:a,font:u,fill:s.getTextColor(),padding:o,backgroundColor:v}),z2:10}}function VP(e,t,r,i,n){e=t.scale.parse(e);var a=t.scale.getLabel({value:e},{precision:n.precision}),s=n.formatter;if(s){var o={value:g_(t,{value:e}),axisDimension:t.dim,axisIndex:t.index,seriesData:[]};L(i,(function(e){var t=r.getSeriesByIndex(e.seriesIndex),i=e.dataIndexInside,n=t&&t.getDataParams(i);n&&o.seriesData.push(n)})),H(s)?a=s.replace("{value}",a):z(s)&&(a=s(o))}return a}function GP(e,t,r){var i=[1,0,0,1,0,0];return pt(i,i,r.rotation),ft(i,i,r.position),Kc([e.dataToCoord(t),(r.labelOffset||0)+(r.labelDirection||1)*(r.labelMargin||0)],i)}function FP(e,t,r,i,n,a){var s=J_.innerTextLayout(r.rotation,0,r.labelDirection);r.labelMargin=n.get(["label","margin"]),RP(t,i,n,a,{position:GP(i.axis,e,r),align:s.textAlign,verticalAlign:s.textVerticalAlign})}function qP(e,t,r){return{x1:e[r=r||0],y1:e[1-r],x2:t[r],y2:t[1-r]}}function jP(e,t,r){return{x:e[r=r||0],y:e[1-r],width:t[r],height:t[1-r]}}function zP(e,t,r,i,n,a){return{cx:e,cy:t,r0:r,r:i,startAngle:n,endAngle:a,clockwise:!0}}var HP=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.makeElOption=function(e,t,r,i,n){var a=r.axis,s=a.grid,o=i.get("type"),u=UP(s,a).getOtherAxis(a).getGlobalExtent(),c=a.toGlobalCoord(a.dataToCoord(t,!0));if(o&&"none"!==o){var d=BP(i),h=WP[o](a,c,u);h.style=d,e.graphicKey=h.type,e.pointer=h}FP(t,e,G_(s.model,r),r,i,n)},t.prototype.getHandleTransform=function(e,t,r){var i=G_(t.axis.grid.model,t,{labelInside:!1});i.labelMargin=r.get(["handle","margin"]);var n=GP(t.axis,e,i);return{x:n[0],y:n[1],rotation:i.rotation+(i.labelDirection<0?Math.PI:0)}},t.prototype.updateHandleTransform=function(e,t,r,i){var n=r.axis,a=n.grid,s=n.getGlobalExtent(!0),o=UP(a,n).getOtherAxis(n).getGlobalExtent(),u="x"===n.dim?0:1,c=[e.x,e.y];c[u]+=t[u],c[u]=Math.min(s[1],c[u]),c[u]=Math.max(s[0],c[u]);var d=(o[1]+o[0])/2,h=[d,d];h[u]=c[u];return{x:c[0],y:c[1],rotation:e.rotation,cursorPoint:h,tooltipOption:[{verticalAlign:"middle"},{align:"center"}][u]}},t}(LP);function UP(e,t){var r={};return r[t.dim+"AxisIndex"]=t.index,e.getCartesian(r)}var WP={line:function(e,t,r){return{type:"Line",subPixelOptimize:!0,shape:qP([t,r[0]],[t,r[1]],KP(e))}},shadow:function(e,t,r){var i=Math.max(1,e.getBandWidth()),n=r[1]-r[0];return{type:"Rect",shape:jP([t-i/2,r[0]],[i,n],KP(e))}}};function KP(e){return"x"===e.dim?0:1}var XP=HP,YP=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return r.type=t.type,r}return a(t,e),t.type="axisPointer",t.defaultOption={show:"auto",zlevel:0,z:50,type:"line",snap:!1,triggerTooltip:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:"#B9BEC9",width:1,type:"dashed"},shadowStyle:{color:"rgba(210,219,238,0.2)"},label:{show:!0,formatter:null,precision:"auto",margin:3,color:"#fff",padding:[5,7,5,7],backgroundColor:"auto",borderColor:null,borderWidth:0,borderRadius:3},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2,throttle:40}},t}(qh),ZP=fn(),QP=L;function $P(e,t,r){if(!d.node){var i=t.getZr();ZP(i).records||(ZP(i).records={}),function(e,t){if(ZP(e).initialized)return;function r(r,i){e.on(r,(function(r){var n=function(e){var t={showTip:[],hideTip:[]};return{dispatchAction:function r(i){var n=t[i.type];n?n.push(i):(i.dispatchAction=r,e.dispatchAction(i))},pendings:t}}(t);QP(ZP(e).records,(function(e){e&&i(e,r,n.dispatchAction)})),function(e,t){var r,i=e.showTip.length,n=e.hideTip.length;i?r=e.showTip[i-1]:n&&(r=e.hideTip[n-1]);r&&(r.dispatchAction=null,t.dispatchAction(r))}(n.pendings,t)}))}ZP(e).initialized=!0,r("click",q(eD,"click")),r("mousemove",q(eD,"mousemove")),r("globalout",JP)}(i,t),(ZP(i).records[e]||(ZP(i).records[e]={})).handler=r}}function JP(e,t,r){e.handler("leave",null,r)}function eD(e,t,r,i){t.handler(e,r,i)}function tD(e,t){if(!d.node){var r=t.getZr();(ZP(r).records||{})[e]&&(ZP(r).records[e]=null)}}var rD=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return r.type=t.type,r}return a(t,e),t.prototype.render=function(e,t,r){var i=t.getComponent("tooltip"),n=e.get("triggerOn")||i&&i.get("triggerOn")||"mousemove|click";$P("axisPointer",r,(function(e,t,r){"none"!==n&&("leave"===e||n.indexOf(e)>=0)&&r({type:"updateAxisPointer",currTrigger:e,x:t&&t.offsetX,y:t&&t.offsetY})}))},t.prototype.remove=function(e,t){tD("axisPointer",t)},t.prototype.dispose=function(e,t){tD("axisPointer",t)},t.type="axisPointer",t}(wp);function iD(e,t){var r,i=[],n=e.seriesIndex;if(null==n||!(r=t.getSeriesByIndex(n)))return{point:[]};var a=r.getData(),s=ln(a,e);if(null==s||s<0||j(s))return{point:[]};var o=a.getItemGraphicEl(s),u=r.coordinateSystem;if(r.getTooltipPosition)i=r.getTooltipPosition(s)||[];else if(u&&u.dataToPoint)if(e.isStacked){var c=u.getBaseAxis(),d=u.getOtherAxis(c).dim,h=c.dim,l="x"===d||"radius"===d?1:0,f=a.mapDimension(h),p=[];p[l]=a.get(f,s),p[1-l]=a.get(a.getCalculationInfo("stackResultDimension"),s),i=u.dataToPoint(p)||[]}else i=u.dataToPoint(a.getValues(B(u.dimensions,(function(e){return a.mapDimension(e)})),s))||[];else if(o){var v=o.getBoundingRect().clone();v.applyTransform(o.transform),i=[v.x+v.width/2,v.y+v.height/2]}return{point:i,el:o}}var nD=fn();function aD(e,t,r){var i=e.currTrigger,n=[e.x,e.y],a=e,s=e.dispatchAction||F(r.dispatchAction,r),o=t.getComponent("axisPointer").coordSysAxesInfo;if(o){dD(n)&&(n=iD({seriesIndex:a.seriesIndex,dataIndex:a.dataIndex},t).point);var u=dD(n),c=a.axesInfo,d=o.axesInfo,h="leave"===i||dD(n),l={},f={},p={list:[],map:{}},v={showPointer:q(oD,f),showTooltip:q(uD,p)};L(o.coordSysMap,(function(e,t){var r=u||e.containPoint(n);L(o.coordSysAxesInfo[t],(function(e,t){var i=e.axis,a=function(e,t){for(var r=0;r<(e||[]).length;r++){var i=e[r];if(t.axis.dim===i.axisDim&&t.axis.model.componentIndex===i.axisIndex)return i}}(c,e);if(!h&&r&&(!c||a)){var s=a&&a.value;null!=s||u||(s=i.pointToData(n)),null!=s&&sD(e,s,v,!1,l)}}))}));var m={};return L(d,(function(e,t){var r=e.linkGroup;r&&!f[t]&&L(r.axesInfo,(function(t,i){var n=f[i];if(t!==e&&n){var a=n.value;r.mapper&&(a=e.axis.scale.parse(r.mapper(a,cD(t),cD(e)))),m[e.key]=a}}))})),L(m,(function(e,t){sD(d[t],e,v,!0,l)})),function(e,t,r){var i=r.axesInfo=[];L(t,(function(t,r){var n=t.axisPointerModel.option,a=e[r];a?(!t.useHandle&&(n.status="show"),n.value=a.value,n.seriesDataIndices=(a.payloadBatch||[]).slice()):!t.useHandle&&(n.status="hide"),"show"===n.status&&i.push({axisDim:t.axis.dim,axisIndex:t.axis.model.componentIndex,value:n.value})}))}(f,d,l),function(e,t,r,i){if(dD(t)||!e.list.length)return void i({type:"hideTip"});var n=((e.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};i({type:"showTip",escapeConnect:!0,x:t[0],y:t[1],tooltipOption:r.tooltipOption,position:r.position,dataIndexInside:n.dataIndexInside,dataIndex:n.dataIndex,seriesIndex:n.seriesIndex,dataByCoordSys:e.list})}(p,n,e,s),function(e,t,r){var i=r.getZr(),n="axisPointerLastHighlights",a=nD(i)[n]||{},s=nD(i)[n]={};L(e,(function(e,t){var r=e.axisPointerModel.option;"show"===r.status&&L(r.seriesDataIndices,(function(e){var t=e.seriesIndex+" | "+e.dataIndex;s[t]=e}))}));var o=[],u=[];L(a,(function(e,t){!s[t]&&u.push(e)})),L(s,(function(e,t){!a[t]&&o.push(e)})),u.length&&r.dispatchAction({type:"downplay",escapeConnect:!0,notBlur:!0,batch:u}),o.length&&r.dispatchAction({type:"highlight",escapeConnect:!0,notBlur:!0,batch:o})}(d,0,r),l}}function sD(e,t,r,i,n){var a=e.axis;if(!a.scale.isBlank()&&a.containData(t))if(e.involveSeries){var s=function(e,t){var r=t.axis,i=r.dim,n=e,a=[],s=Number.MAX_VALUE,o=-1;return L(t.seriesModels,(function(t,u){var c,d,h=t.getData().mapDimensionsAll(i);if(t.getAxisTooltipData){var l=t.getAxisTooltipData(h,e,r);d=l.dataIndices,c=l.nestestValue}else{if(!(d=t.getData().indicesOfNearest(h[0],e,"category"===r.type?.5:null)).length)return;c=t.getData().get(h[0],d[0])}if(null!=c&&isFinite(c)){var f=e-c,p=Math.abs(f);p<=s&&((p<s||f>=0&&o<0)&&(s=p,o=f,n=c,a.length=0),L(d,(function(e){a.push({seriesIndex:t.seriesIndex,dataIndexInside:e,dataIndex:t.getData().getRawIndex(e)})})))}})),{payloadBatch:a,snapToValue:n}}(t,e),o=s.payloadBatch,u=s.snapToValue;o[0]&&null==n.seriesIndex&&I(n,o[0]),!i&&e.snap&&a.containData(u)&&null!=u&&(t=u),r.showPointer(e,t,o),r.showTooltip(e,s,u)}else r.showPointer(e,t)}function oD(e,t,r,i){e[t.key]={value:r,payloadBatch:i}}function uD(e,t,r,i){var n=r.payloadBatch,a=t.axis,s=a.model,o=t.axisPointerModel;if(t.triggerTooltip&&n.length){var u=t.coordSys.model,c=aS(u),d=e.map[c];d||(d=e.map[c]={coordSysId:u.id,coordSysIndex:u.componentIndex,coordSysType:u.type,coordSysMainType:u.mainType,dataByAxis:[]},e.list.push(d)),d.dataByAxis.push({axisDim:a.dim,axisIndex:s.componentIndex,axisType:s.type,axisId:s.id,value:i,valueLabelOpt:{precision:o.get(["label","precision"]),formatter:o.get(["label","formatter"])},seriesDataIndices:n.slice()})}}function cD(e){var t=e.axis.model,r={},i=r.axisDim=e.axis.dim;return r.axisIndex=r[i+"AxisIndex"]=t.componentIndex,r.axisName=r[i+"AxisName"]=t.name,r.axisId=r[i+"AxisId"]=t.id,r}function dD(e){return!e||null==e[0]||isNaN(e[0])||null==e[1]||isNaN(e[1])}function hD(e){oS.registerAxisPointerClass("CartesianAxisPointer",XP),e.registerComponentModel(YP),e.registerComponentView(rD),e.registerPreprocessor((function(e){if(e){(!e.axisPointer||0===e.axisPointer.length)&&(e.axisPointer={});var t=e.axisPointer.link;t&&!j(t)&&(e.axisPointer.link=[t])}})),e.registerProcessor(e.PRIORITY.PROCESSOR.STATISTIC,(function(e,t){e.getComponent("axisPointer").coordSysAxesInfo=eS(e,t)})),e.registerAction({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},aD)}var lD=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.makeElOption=function(e,t,r,i,n){var a=r.axis;"angle"===a.dim&&(this.animationThreshold=Math.PI/18);var s=a.polar,o=s.getOtherAxis(a).getExtent(),u=a.dataToCoord(t),c=i.get("type");if(c&&"none"!==c){var d=BP(i),h=fD[c](a,s,u,o);h.style=d,e.graphicKey=h.type,e.pointer=h}var l=function(e,t,r,i,n){var a=t.axis,s=a.dataToCoord(e),o=i.getAngleAxis().getExtent()[0];o=o/180*Math.PI;var u,c,d,h=i.getRadiusAxis().getExtent();if("radius"===a.dim){var l=[1,0,0,1,0,0];pt(l,l,o),ft(l,l,[i.cx,i.cy]),u=Kc([s,-n],l);var f=t.getModel("axisLabel").get("rotate")||0,p=J_.innerTextLayout(o,f*Math.PI/180,-1);c=p.textAlign,d=p.textVerticalAlign}else{var v=h[1];u=i.coordToPoint([v+n,s]);var m=i.cx,g=i.cy;c=Math.abs(u[0]-m)/v<.3?"center":u[0]>m?"left":"right",d=Math.abs(u[1]-g)/v<.3?"middle":u[1]>g?"top":"bottom"}return{position:u,align:c,verticalAlign:d}}(t,r,0,s,i.get(["label","margin"]));RP(e,r,i,n,l)},t}(LP);var fD={line:function(e,t,r,i){return"angle"===e.dim?{type:"Line",shape:qP(t.coordToPoint([i[0],r]),t.coordToPoint([i[1],r]))}:{type:"Circle",shape:{cx:t.cx,cy:t.cy,r:r}}},shadow:function(e,t,r,i){var n=Math.max(1,e.getBandWidth()),a=Math.PI/180;return"angle"===e.dim?{type:"Sector",shape:zP(t.cx,t.cy,i[0],i[1],(-r-n/2)*a,(n/2-r)*a)}:{type:"Sector",shape:zP(t.cx,t.cy,r-n/2,r+n/2,0,2*Math.PI)}}},pD=lD,vD=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return r.type=t.type,r}return a(t,e),t.prototype.findAxisModel=function(e){var t;return this.ecModel.eachComponent(e,(function(e){e.getCoordSysModel()===this&&(t=e)}),this),t},t.type="polar",t.dependencies=["radiusAxis","angleAxis"],t.defaultOption={zlevel:0,z:0,center:["50%","50%"],radius:"80%"},t}(qh),mD=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.getCoordSysModel=function(){return this.getReferringComponents("polar",gn).models[0]},t.type="polarAxis",t}(qh);P(mD,mw);var gD=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return r.type=t.type,r}return a(t,e),t.type="angleAxis",t}(mD),yD=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return r.type=t.type,r}return a(t,e),t.type="radiusAxis",t}(mD),bD=function(e){function t(t,r){return e.call(this,"radius",t,r)||this}return a(t,e),t.prototype.pointToData=function(e,t){return this.polar.pointToData(e,t)["radius"===this.dim?0:1]},t}(R_);bD.prototype.dataToRadius=R_.prototype.dataToCoord,bD.prototype.radiusToData=R_.prototype.coordToData;var xD=bD,kD=fn(),wD=function(e){function t(t,r){return e.call(this,"angle",t,r||[0,360])||this}return a(t,e),t.prototype.pointToData=function(e,t){return this.polar.pointToData(e,t)["radius"===this.dim?0:1]},t.prototype.calculateCategoryInterval=function(){var e=this,t=e.getLabelModel(),r=e.scale,i=r.getExtent(),n=r.count();if(i[1]-i[0]<1)return 0;var a=i[0],s=e.dataToCoord(a+1)-e.dataToCoord(a),o=Math.abs(s),u=Mr(null==a?"":a+"",t.getFont(),"center","top"),c=Math.max(u.height,7)/o;isNaN(c)&&(c=1/0);var d=Math.max(0,Math.floor(c)),h=kD(e.model),l=h.lastAutoInterval,f=h.lastTickCount;return null!=l&&null!=f&&Math.abs(l-d)<=1&&Math.abs(f-n)<=1&&l>d?d=l:(h.lastTickCount=n,h.lastAutoInterval=d),d},t}(R_);wD.prototype.dataToAngle=R_.prototype.dataToCoord,wD.prototype.angleToData=R_.prototype.coordToData;var _D=wD;function SD(e){var t=e.seriesModel,r=e.polarModel;return r&&r.coordinateSystem||t&&t.coordinateSystem}var OD=function(){function e(e){this.dimensions=["radius","angle"],this.type="polar",this.cx=0,this.cy=0,this._radiusAxis=new xD,this._angleAxis=new _D,this.axisPointerEnabled=!0,this.name=e||"",this._radiusAxis.polar=this._angleAxis.polar=this}return e.prototype.containPoint=function(e){var t=this.pointToCoord(e);return this._radiusAxis.contain(t[0])&&this._angleAxis.contain(t[1])},e.prototype.containData=function(e){return this._radiusAxis.containData(e[0])&&this._angleAxis.containData(e[1])},e.prototype.getAxis=function(e){return this["_"+e+"Axis"]},e.prototype.getAxes=function(){return[this._radiusAxis,this._angleAxis]},e.prototype.getAxesByScale=function(e){var t=[],r=this._angleAxis,i=this._radiusAxis;return r.scale.type===e&&t.push(r),i.scale.type===e&&t.push(i),t},e.prototype.getAngleAxis=function(){return this._angleAxis},e.prototype.getRadiusAxis=function(){return this._radiusAxis},e.prototype.getOtherAxis=function(e){var t=this._angleAxis;return e===t?this._radiusAxis:t},e.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAngleAxis()},e.prototype.getTooltipAxes=function(e){var t=null!=e&&"auto"!==e?this.getAxis(e):this.getBaseAxis();return{baseAxes:[t],otherAxes:[this.getOtherAxis(t)]}},e.prototype.dataToPoint=function(e,t){return this.coordToPoint([this._radiusAxis.dataToRadius(e[0],t),this._angleAxis.dataToAngle(e[1],t)])},e.prototype.pointToData=function(e,t){var r=this.pointToCoord(e);return[this._radiusAxis.radiusToData(r[0],t),this._angleAxis.angleToData(r[1],t)]},e.prototype.pointToCoord=function(e){var t=e[0]-this.cx,r=e[1]-this.cy,i=this.getAngleAxis(),n=i.getExtent(),a=Math.min(n[0],n[1]),s=Math.max(n[0],n[1]);i.inverse?a=s-360:s=a+360;var o=Math.sqrt(t*t+r*r);t/=o,r/=o;for(var u=Math.atan2(-r,t)/Math.PI*180,c=u<a?1:-1;u<a||u>s;)u+=360*c;return[o,u]},e.prototype.coordToPoint=function(e){var t=e[0],r=e[1]/180*Math.PI;return[Math.cos(r)*t+this.cx,-Math.sin(r)*t+this.cy]},e.prototype.getArea=function(){var e=this.getAngleAxis(),t=this.getRadiusAxis().getExtent().slice();t[0]>t[1]&&t.reverse();var r=e.getExtent(),i=Math.PI/180;return{cx:this.cx,cy:this.cy,r0:t[0],r:t[1],startAngle:-r[0]*i,endAngle:-r[1]*i,clockwise:e.inverse,contain:function(e,t){var r=e-this.cx,i=t-this.cy,n=r*r+i*i,a=this.r,s=this.r0;return n<=a*a&&n>=s*s}}},e.prototype.convertToPixel=function(e,t,r){return SD(t)===this?this.dataToPoint(r):null},e.prototype.convertFromPixel=function(e,t,r){return SD(t)===this?this.pointToData(r):null},e}();function TD(e,t){var r=this,i=r.getAngleAxis(),n=r.getRadiusAxis();if(i.scale.setExtent(1/0,-1/0),n.scale.setExtent(1/0,-1/0),e.eachSeries((function(e){if(e.coordinateSystem===r){var t=e.getData();L(k_(t,"radius"),(function(e){n.scale.unionExtentFromData(t,e)})),L(k_(t,"angle"),(function(e){i.scale.unionExtentFromData(t,e)}))}})),p_(i.scale,i.model),p_(n.scale,n.model),"category"===i.type&&!i.onBand){var a=i.getExtent(),s=360/i.scale.count();i.inverse?a[1]+=s:a[1]-=s,i.setExtent(a[0],a[1])}}function CD(e,t){if(e.type=t.get("type"),e.scale=v_(t),e.onBand=t.get("boundaryGap")&&"category"===e.type,e.inverse=t.get("inverse"),function(e){return"angleAxis"===e.mainType}(t)){e.inverse=e.inverse!==t.get("clockwise");var r=t.get("startAngle");e.setExtent(r,r+(e.inverse?-360:360))}t.axis=e,e.model=t}var ID={dimensions:OD.prototype.dimensions,create:function(e,t){var r=[];return e.eachComponent("polar",(function(e,i){var n=new OD(i+"");n.update=TD;var a=n.getRadiusAxis(),s=n.getAngleAxis(),o=e.findAxisModel("radiusAxis"),u=e.findAxisModel("angleAxis");CD(a,o),CD(s,u),function(e,t,r){var i=t.get("center"),n=r.getWidth(),a=r.getHeight();e.cx=Di(i[0],n),e.cy=Di(i[1],a);var s=e.getRadiusAxis(),o=Math.min(n,a)/2,u=t.get("radius");null==u?u=[0,"100%"]:j(u)||(u=[0,u]);var c=[Di(u[0],o),Di(u[1],o)];s.inverse?s.setExtent(c[1],c[0]):s.setExtent(c[0],c[1])}(n,e,t),r.push(n),e.coordinateSystem=n,n.model=e})),e.eachSeries((function(e){if("polar"===e.get("coordinateSystem")){var t=e.getReferringComponents("polar",gn).models[0];0,e.coordinateSystem=t.coordinateSystem}})),r}},MD=["axisLine","axisLabel","axisTick","minorTick","splitLine","minorSplitLine","splitArea"];function AD(e,t,r){t[1]>t[0]&&(t=t.slice().reverse());var i=e.coordToPoint([t[0],r]),n=e.coordToPoint([t[1],r]);return{x1:i[0],y1:i[1],x2:n[0],y2:n[1]}}function ED(e){return e.getRadiusAxis().inverse?0:1}function ND(e){var t=e[0],r=e[e.length-1];t&&r&&Math.abs(Math.abs(t.coord-r.coord)-360)<1e-4&&e.pop()}var PD=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return r.type=t.type,r.axisPointerClass="PolarAxisPointer",r}return a(t,e),t.prototype.render=function(e,t){if(this.group.removeAll(),e.get("show")){var r=e.axis,i=r.polar,n=i.getRadiusAxis().getExtent(),a=r.getTicksCoords(),s=r.getMinorTicksCoords(),o=B(r.getViewLabels(),(function(e){e=O(e);var t=r.scale,i="ordinal"===t.type?t.getRawOrdinalNumber(e.tickValue):e.tickValue;return e.coord=r.dataToCoord(i),e}));ND(o),ND(a),L(MD,(function(t){!e.get([t,"show"])||r.scale.isBlank()&&"axisLine"!==t||DD[t](this.group,e,i,a,s,n,o)}),this)}},t.type="angleAxis",t}(oS),DD={axisLine:function(e,t,r,i,n,a){var s,o=t.getModel(["axisLine","lineStyle"]),u=ED(r),c=u?0:1;(s=0===a[c]?new _u({shape:{cx:r.cx,cy:r.cy,r:a[u]},style:o.getLineStyle(),z2:1,silent:!0}):new Uu({shape:{cx:r.cx,cy:r.cy,r:a[u],r0:a[c]},style:o.getLineStyle(),z2:1,silent:!0})).style.fill=null,e.add(s)},axisTick:function(e,t,r,i,n,a){var s=t.getModel("axisTick"),o=(s.get("inside")?-1:1)*s.get("length"),u=a[ED(r)],c=B(i,(function(e){return new ic({shape:AD(r,[u,u+o],e.coord)})}));e.add(Dc(c,{style:M(s.getModel("lineStyle").getLineStyle(),{stroke:t.get(["axisLine","lineStyle","color"])})}))},minorTick:function(e,t,r,i,n,a){if(n.length){for(var s=t.getModel("axisTick"),o=t.getModel("minorTick"),u=(s.get("inside")?-1:1)*o.get("length"),c=a[ED(r)],d=[],h=0;h<n.length;h++)for(var l=0;l<n[h].length;l++)d.push(new ic({shape:AD(r,[c,c+u],n[h][l].coord)}));e.add(Dc(d,{style:M(o.getModel("lineStyle").getLineStyle(),M(s.getLineStyle(),{stroke:t.get(["axisLine","lineStyle","color"])}))}))}},axisLabel:function(e,t,r,i,n,a,s){var o=t.getCategories(!0),u=t.getModel("axisLabel"),c=u.get("margin"),d=t.get("triggerEvent");L(s,(function(i,n){var s=u,h=i.tickValue,l=a[ED(r)],f=r.coordToPoint([l+c,i.coord]),p=r.cx,v=r.cy,m=Math.abs(f[0]-p)/l<.3?"center":f[0]>p?"left":"right",g=Math.abs(f[1]-v)/l<.3?"middle":f[1]>v?"top":"bottom";if(o&&o[h]){var y=o[h];K(y)&&y.textStyle&&(s=new Md(y.textStyle,u,u.ecModel))}var b=new no({silent:J_.isLabelSilent(t),style:cd(s,{x:f[0],y:f[1],fill:s.getTextColor()||t.get(["axisLine","lineStyle","color"]),text:i.formattedLabel,align:m,verticalAlign:g})});if(e.add(b),d){var x=J_.makeAxisEventDataBase(t);x.targetType="axisLabel",x.value=i.rawLabel,ao(b).eventData=x}}),this)},splitLine:function(e,t,r,i,n,a){var s=t.getModel("splitLine").getModel("lineStyle"),o=s.get("color"),u=0;o=o instanceof Array?o:[o];for(var c=[],d=0;d<i.length;d++){var h=u++%o.length;c[h]=c[h]||[],c[h].push(new ic({shape:AD(r,a,i[d].coord)}))}for(d=0;d<c.length;d++)e.add(Dc(c[d],{style:M({stroke:o[d%o.length]},s.getLineStyle()),silent:!0,z:t.get("z")}))},minorSplitLine:function(e,t,r,i,n,a){if(n.length){for(var s=t.getModel("minorSplitLine").getModel("lineStyle"),o=[],u=0;u<n.length;u++)for(var c=0;c<n[u].length;c++)o.push(new ic({shape:AD(r,a,n[u][c].coord)}));e.add(Dc(o,{style:s.getLineStyle(),silent:!0,z:t.get("z")}))}},splitArea:function(e,t,r,i,n,a){if(i.length){var s=t.getModel("splitArea").getModel("areaStyle"),o=s.get("color"),u=0;o=o instanceof Array?o:[o];for(var c=[],d=Math.PI/180,h=-i[0].coord*d,l=Math.min(a[0],a[1]),f=Math.max(a[0],a[1]),p=t.get("clockwise"),v=1,m=i.length;v<=m;v++){var g=v===m?i[0].coord:i[v].coord,y=u++%o.length;c[y]=c[y]||[],c[y].push(new ju({shape:{cx:r.cx,cy:r.cy,r0:l,r:f,startAngle:h,endAngle:-g*d,clockwise:p},silent:!0})),h=-g*d}for(v=0;v<c.length;v++)e.add(Dc(c[v],{style:M({fill:o[v%o.length]},s.getAreaStyle()),silent:!0}))}}},LD=PD,BD=["axisLine","axisTickLabel","axisName"],RD=["splitLine","splitArea","minorSplitLine"],VD=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return r.type=t.type,r.axisPointerClass="PolarAxisPointer",r}return a(t,e),t.prototype.render=function(e,t){if(this.group.removeAll(),e.get("show")){var r=this._axisGroup,i=this._axisGroup=new Ti;this.group.add(i);var n=e.axis,a=n.polar,s=a.getAngleAxis(),o=n.getTicksCoords(),u=n.getMinorTicksCoords(),c=s.getExtent()[0],d=n.getExtent(),h=function(e,t,r){return{position:[e.cx,e.cy],rotation:r/180*Math.PI,labelDirection:-1,tickDirection:-1,nameDirection:1,labelRotate:t.getModel("axisLabel").get("rotate"),z2:1}}(a,e,c),l=new J_(e,h);L(BD,l.add,l),i.add(l.getGroup()),Zc(r,i,e),L(RD,(function(t){e.get([t,"show"])&&!n.scale.isBlank()&&GD[t](this.group,e,a,c,d,o,u)}),this)}},t.type="radiusAxis",t}(oS),GD={splitLine:function(e,t,r,i,n,a){var s=t.getModel("splitLine").getModel("lineStyle"),o=s.get("color"),u=0;o=o instanceof Array?o:[o];for(var c=[],d=0;d<a.length;d++){var h=u++%o.length;c[h]=c[h]||[],c[h].push(new _u({shape:{cx:r.cx,cy:r.cy,r:a[d].coord}}))}for(d=0;d<c.length;d++)e.add(Dc(c[d],{style:M({stroke:o[d%o.length],fill:null},s.getLineStyle()),silent:!0}))},minorSplitLine:function(e,t,r,i,n,a,s){if(s.length){for(var o=t.getModel("minorSplitLine").getModel("lineStyle"),u=[],c=0;c<s.length;c++)for(var d=0;d<s[c].length;d++)u.push(new _u({shape:{cx:r.cx,cy:r.cy,r:s[c][d].coord}}));e.add(Dc(u,{style:M({fill:null},o.getLineStyle()),silent:!0}))}},splitArea:function(e,t,r,i,n,a){if(a.length){var s=t.getModel("splitArea").getModel("areaStyle"),o=s.get("color"),u=0;o=o instanceof Array?o:[o];for(var c=[],d=a[0].coord,h=1;h<a.length;h++){var l=u++%o.length;c[l]=c[l]||[],c[l].push(new ju({shape:{cx:r.cx,cy:r.cy,r0:d,r:a[h].coord,startAngle:0,endAngle:2*Math.PI},silent:!0})),d=a[h].coord}for(h=0;h<c.length;h++)e.add(Dc(c[h],{style:M({fill:o[h%o.length]},s.getAreaStyle()),silent:!0}))}}};var FD=VD;function qD(e){return e.get("stack")||"__ec_stack_"+e.seriesIndex}function jD(e,t){return t.dim+e.model.componentIndex}var zD=function(e,t,r){var i={},n=function(e){var t={};L(e,(function(e,r){var i=e.getData(),n=e.coordinateSystem,a=n.getBaseAxis(),s=jD(n,a),o=a.getExtent(),u="category"===a.type?a.getBandWidth():Math.abs(o[1]-o[0])/i.count(),c=t[s]||{bandWidth:u,remainedWidth:u,autoWidthCount:0,categoryGap:"20%",gap:"30%",stacks:{}},d=c.stacks;t[s]=c;var h=qD(e);d[h]||c.autoWidthCount++,d[h]=d[h]||{width:0,maxWidth:0};var l=Di(e.get("barWidth"),u),f=Di(e.get("barMaxWidth"),u),p=e.get("barGap"),v=e.get("barCategoryGap");l&&!d[h].width&&(l=Math.min(c.remainedWidth,l),d[h].width=l,c.remainedWidth-=l),f&&(d[h].maxWidth=f),null!=p&&(c.gap=p),null!=v&&(c.categoryGap=v)}));var r={};return L(t,(function(e,t){r[t]={};var i=e.stacks,n=e.bandWidth,a=Di(e.categoryGap,n),s=Di(e.gap,1),o=e.remainedWidth,u=e.autoWidthCount,c=(o-a)/(u+(u-1)*s);c=Math.max(c,0),L(i,(function(e,t){var r=e.maxWidth;r&&r<c&&(r=Math.min(r,o),e.width&&(r=Math.min(r,e.width)),o-=r,e.width=r,u--)})),c=(o-a)/(u+(u-1)*s),c=Math.max(c,0);var d,h=0;L(i,(function(e,t){e.width||(e.width=c),d=e,h+=e.width*(1+s)})),d&&(h-=d.width*s);var l=-h/2;L(i,(function(e,i){r[t][i]=r[t][i]||{offset:l,width:e.width},l+=e.width*(1+s)}))})),r}(V(t.getSeriesByType(e),(function(e){return!t.isSeriesFiltered(e)&&e.coordinateSystem&&"polar"===e.coordinateSystem.type})));t.eachSeriesByType(e,(function(e){if("polar"===e.coordinateSystem.type){var t=e.getData(),r=e.coordinateSystem,a=r.getBaseAxis(),s=jD(r,a),o=qD(e),u=n[s][o],c=u.offset,d=u.width,h=r.getOtherAxis(a),l=e.coordinateSystem.cx,f=e.coordinateSystem.cy,p=e.get("barMinHeight")||0,v=e.get("barMinAngle")||0;i[o]=i[o]||[];for(var m=t.mapDimension(h.dim),g=t.mapDimension(a.dim),y=Mx(t,m),b="radius"!==a.dim||!e.get("roundCap",!0),x=h.dataToCoord(0),k=0,w=t.count();k<w;k++){var _=t.get(m,k),S=t.get(g,k),O=_>=0?"p":"n",T=x;y&&(i[o][S]||(i[o][S]={p:x,n:x}),T=i[o][S][O]);var C=void 0,I=void 0,M=void 0,A=void 0;if("radius"===h.dim){var E=h.dataToCoord(_)-x,N=a.dataToCoord(S);Math.abs(E)<p&&(E=(E<0?-1:1)*p),C=T,I=T+E,A=(M=N-c)-d,y&&(i[o][S][O]=I)}else{var P=h.dataToCoord(_,b)-x,D=a.dataToCoord(S);Math.abs(P)<v&&(P=(P<0?-1:1)*v),I=(C=D+c)+d,M=T,A=T+P,y&&(i[o][S][O]=A)}t.setItemLayout(k,{cx:l,cy:f,r0:C,r:I,startAngle:-M*Math.PI/180,endAngle:-A*Math.PI/180})}}}))},HD={startAngle:90,clockwise:!0,splitNumber:12,axisLabel:{rotate:0}},UD={splitNumber:5},WD=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return r.type=t.type,r}return a(t,e),t.type="polar",t}(wp);function KD(e,t){t=t||{};var r=e.coordinateSystem,i=e.axis,n={},a=i.position,s=i.orient,o=r.getRect(),u=[o.x,o.x+o.width,o.y,o.y+o.height],c={horizontal:{top:u[2],bottom:u[3]},vertical:{left:u[0],right:u[1]}};n.position=["vertical"===s?c.vertical[a]:u[0],"horizontal"===s?c.horizontal[a]:u[3]];n.rotation=Math.PI/2*{horizontal:0,vertical:1}[s];n.labelDirection=n.tickDirection=n.nameDirection={top:-1,bottom:1,right:1,left:-1}[a],e.get(["axisTick","inside"])&&(n.tickDirection=-n.tickDirection),$(t.labelInside,e.get(["axisLabel","inside"]))&&(n.labelDirection=-n.labelDirection);var d=t.rotate;return null==d&&(d=e.get(["axisLabel","rotate"])),n.labelRotation="top"===a?-d:d,n.z2=1,n}var XD=["axisLine","axisTickLabel","axisName"],YD=["splitArea","splitLine"],ZD=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return r.type=t.type,r.axisPointerClass="SingleAxisPointer",r}return a(t,e),t.prototype.render=function(t,r,i,n){var a=this.group;a.removeAll();var s=this._axisGroup;this._axisGroup=new Ti;var o=KD(t),u=new J_(t,o);L(XD,u.add,u),a.add(this._axisGroup),a.add(u.getGroup()),L(YD,(function(e){t.get([e,"show"])&&QD[e](this,this.group,this._axisGroup,t)}),this),Zc(s,this._axisGroup,t),e.prototype.render.call(this,t,r,i,n)},t.prototype.remove=function(){dS(this)},t.type="singleAxis",t}(oS),QD={splitLine:function(e,t,r,i){var n=i.axis;if(!n.scale.isBlank()){var a=i.getModel("splitLine"),s=a.getModel("lineStyle"),o=s.get("color");o=o instanceof Array?o:[o];for(var u=i.coordinateSystem.getRect(),c=n.isHorizontal(),d=[],h=0,l=n.getTicksCoords({tickModel:a}),f=[],p=[],v=0;v<l.length;++v){var m=n.toGlobalCoord(l[v].coord);c?(f[0]=m,f[1]=u.y,p[0]=m,p[1]=u.y+u.height):(f[0]=u.x,f[1]=m,p[0]=u.x+u.width,p[1]=m);var g=h++%o.length;d[g]=d[g]||[],d[g].push(new ic({subPixelOptimize:!0,shape:{x1:f[0],y1:f[1],x2:p[0],y2:p[1]},silent:!0}))}var y=s.getLineStyle(["color"]);for(v=0;v<d.length;++v)t.add(Dc(d[v],{style:M({stroke:o[v%o.length]},y),silent:!0}))}},splitArea:function(e,t,r,i){cS(e,r,i,i)}},$D=ZD,JD=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return r.type=t.type,r}return a(t,e),t.prototype.getCoordSysModel=function(){return this},t.type="singleAxis",t.layoutMode="box",t.defaultOption={left:"5%",top:"5%",right:"5%",bottom:"5%",type:"value",position:"bottom",orient:"horizontal",axisLine:{show:!0,lineStyle:{width:1,type:"solid"}},tooltip:{show:!0},axisTick:{show:!0,length:6,lineStyle:{width:1}},axisLabel:{show:!0,interval:"auto"},splitLine:{show:!0,lineStyle:{type:"dashed",opacity:.2}}},t}(qh);P(JD,mw.prototype);var eL=JD,tL=function(e){function t(t,r,i,n,a){var s=e.call(this,t,r,i)||this;return s.type=n||"value",s.position=a||"bottom",s}return a(t,e),t.prototype.isHorizontal=function(){var e=this.position;return"top"===e||"bottom"===e},t.prototype.pointToData=function(e,t){return this.coordinateSystem.pointToData(e)[0]},t}(R_);function rL(e){var t=e.seriesModel,r=e.singleAxisModel;return r&&r.coordinateSystem||t&&t.coordinateSystem}var iL=function(){function e(e,t,r){this.type="single",this.dimension="single",this.dimensions=["single"],this.axisPointerEnabled=!0,this.model=e,this._init(e,t,r)}return e.prototype._init=function(e,t,r){var i=this.dimension,n=new tL(i,v_(e),[0,0],e.get("type"),e.get("position")),a="category"===n.type;n.onBand=a&&e.get("boundaryGap"),n.inverse=e.get("inverse"),n.orient=e.get("orient"),e.axis=n,n.model=e,n.coordinateSystem=this,this._axis=n},e.prototype.update=function(e,t){e.eachSeries((function(e){if(e.coordinateSystem===this){var t=e.getData();L(t.mapDimensionsAll(this.dimension),(function(e){this._axis.scale.unionExtentFromData(t,e)}),this),p_(this._axis.scale,this._axis.model)}}),this)},e.prototype.resize=function(e,t){this._rect=Ph({left:e.get("left"),top:e.get("top"),right:e.get("right"),bottom:e.get("bottom"),width:e.get("width"),height:e.get("height")},{width:t.getWidth(),height:t.getHeight()}),this._adjustAxis()},e.prototype.getRect=function(){return this._rect},e.prototype._adjustAxis=function(){var e=this._rect,t=this._axis,r=t.isHorizontal(),i=r?[0,e.width]:[0,e.height],n=t.reverse?1:0;t.setExtent(i[n],i[1-n]),this._updateAxisTransform(t,r?e.x:e.y)},e.prototype._updateAxisTransform=function(e,t){var r=e.getExtent(),i=r[0]+r[1],n=e.isHorizontal();e.toGlobalCoord=n?function(e){return e+t}:function(e){return i-e+t},e.toLocalCoord=n?function(e){return e-t}:function(e){return i-e+t}},e.prototype.getAxis=function(){return this._axis},e.prototype.getBaseAxis=function(){return this._axis},e.prototype.getAxes=function(){return[this._axis]},e.prototype.getTooltipAxes=function(){return{baseAxes:[this.getAxis()],otherAxes:[]}},e.prototype.containPoint=function(e){var t=this.getRect(),r=this.getAxis();return"horizontal"===r.orient?r.contain(r.toLocalCoord(e[0]))&&e[1]>=t.y&&e[1]<=t.y+t.height:r.contain(r.toLocalCoord(e[1]))&&e[0]>=t.y&&e[0]<=t.y+t.height},e.prototype.pointToData=function(e){var t=this.getAxis();return[t.coordToData(t.toLocalCoord(e["horizontal"===t.orient?0:1]))]},e.prototype.dataToPoint=function(e){var t=this.getAxis(),r=this.getRect(),i=[],n="horizontal"===t.orient?0:1;return e instanceof Array&&(e=e[0]),i[n]=t.toGlobalCoord(t.dataToCoord(+e)),i[1-n]=0===n?r.y+r.height/2:r.x+r.width/2,i},e.prototype.convertToPixel=function(e,t,r){return rL(t)===this?this.dataToPoint(r):null},e.prototype.convertFromPixel=function(e,t,r){return rL(t)===this?this.pointToData(r):null},e}();var nL={create:function(e,t){var r=[];return e.eachComponent("singleAxis",(function(i,n){var a=new iL(i,e,t);a.name="single_"+n,a.resize(i,t),i.coordinateSystem=a,r.push(a)})),e.eachSeries((function(e){if("singleAxis"===e.get("coordinateSystem")){var t=e.getReferringComponents("singleAxis",gn).models[0];e.coordinateSystem=t&&t.coordinateSystem}})),r},dimensions:iL.prototype.dimensions},aL=["x","y"],sL=["width","height"],oL=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.makeElOption=function(e,t,r,i,n){var a=r.axis,s=a.coordinateSystem,o=dL(s,1-cL(a)),u=s.dataToPoint(t)[0],c=i.get("type");if(c&&"none"!==c){var d=BP(i),h=uL[c](a,u,o);h.style=d,e.graphicKey=h.type,e.pointer=h}FP(t,e,KD(r),r,i,n)},t.prototype.getHandleTransform=function(e,t,r){var i=KD(t,{labelInside:!1});i.labelMargin=r.get(["handle","margin"]);var n=GP(t.axis,e,i);return{x:n[0],y:n[1],rotation:i.rotation+(i.labelDirection<0?Math.PI:0)}},t.prototype.updateHandleTransform=function(e,t,r,i){var n=r.axis,a=n.coordinateSystem,s=cL(n),o=dL(a,s),u=[e.x,e.y];u[s]+=t[s],u[s]=Math.min(o[1],u[s]),u[s]=Math.max(o[0],u[s]);var c=dL(a,1-s),d=(c[1]+c[0])/2,h=[d,d];return h[s]=u[s],{x:u[0],y:u[1],rotation:e.rotation,cursorPoint:h,tooltipOption:{verticalAlign:"middle"}}},t}(LP),uL={line:function(e,t,r){return{type:"Line",subPixelOptimize:!0,shape:qP([t,r[0]],[t,r[1]],cL(e))}},shadow:function(e,t,r){var i=e.getBandWidth(),n=r[1]-r[0];return{type:"Rect",shape:jP([t-i/2,r[0]],[i,n],cL(e))}}};function cL(e){return e.isHorizontal()?0:1}function dL(e,t){var r=e.getRect();return[r[aL[t]],r[aL[t]]+r[sL[t]]]}var hL=oL,lL=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return r.type=t.type,r}return a(t,e),t.type="single",t}(wp);function fL(e,t){var r,i=e.cellSize;1===(r=j(i)?i:e.cellSize=[i,i]).length&&(r[1]=r[0]);var n=B([0,1],(function(e){return function(e,t){return null!=e[Ah[t][0]]||null!=e[Ah[t][1]]&&null!=e[Ah[t][2]]}(t,e)&&(r[e]="auto"),null!=r[e]&&"auto"!==r[e]}));Bh(e,t,{type:"box",ignoreSize:n})}var pL=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return r.type=t.type,r}return a(t,e),t.prototype.init=function(t,r,i){var n=Rh(t);e.prototype.init.apply(this,arguments),fL(t,n)},t.prototype.mergeOption=function(t){e.prototype.mergeOption.apply(this,arguments),fL(this.option,t)},t.prototype.getCellSize=function(){return this.option.cellSize},t.type="calendar",t.defaultOption={zlevel:0,z:2,left:80,top:60,cellSize:20,orient:"horizontal",splitLine:{show:!0,lineStyle:{color:"#000",width:1,type:"solid"}},itemStyle:{color:"#fff",borderWidth:1,borderColor:"#ccc"},dayLabel:{show:!0,firstDay:0,position:"start",margin:"50%",nameMap:"en",color:"#000"},monthLabel:{show:!0,position:"start",margin:5,align:"center",nameMap:"en",formatter:null,color:"#000"},yearLabel:{show:!0,position:null,margin:30,formatter:null,color:"#ccc",fontFamily:"sans-serif",fontWeight:"bolder",fontSize:20}},t}(qh),vL={EN:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],CN:["\u4e00\u6708","\u4e8c\u6708","\u4e09\u6708","\u56db\u6708","\u4e94\u6708","\u516d\u6708","\u4e03\u6708","\u516b\u6708","\u4e5d\u6708","\u5341\u6708","\u5341\u4e00\u6708","\u5341\u4e8c\u6708"]},mL={EN:["S","M","T","W","T","F","S"],CN:["\u65e5","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d"]},gL=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return r.type=t.type,r}return a(t,e),t.prototype.render=function(e,t,r){var i=this.group;i.removeAll();var n=e.coordinateSystem,a=n.getRangeInfo(),s=n.getOrient();this._renderDayRect(e,a,i),this._renderLines(e,a,s,i),this._renderYearText(e,a,s,i),this._renderMonthText(e,s,i),this._renderWeekText(e,a,s,i)},t.prototype._renderDayRect=function(e,t,r){for(var i=e.coordinateSystem,n=e.getModel("itemStyle").getItemStyle(),a=i.getCellWidth(),s=i.getCellHeight(),o=t.start.time;o<=t.end.time;o=i.getNextNDay(o,1).time){var u=i.dataToRect([o],!1).tl,c=new Ks({shape:{x:u[0],y:u[1],width:a,height:s},cursor:"default",style:n});r.add(c)}},t.prototype._renderLines=function(e,t,r,i){var n=this,a=e.coordinateSystem,s=e.getModel(["splitLine","lineStyle"]).getLineStyle(),o=e.get(["splitLine","show"]),u=s.lineWidth;this._tlpoints=[],this._blpoints=[],this._firstDayOfMonth=[],this._firstDayPoints=[];for(var c=t.start,d=0;c.time<=t.end.time;d++){l(c.formatedDate),0===d&&(c=a.getDateInfo(t.start.y+"-"+t.start.m));var h=c.date;h.setMonth(h.getMonth()+1),c=a.getDateInfo(h)}function l(t){n._firstDayOfMonth.push(a.getDateInfo(t)),n._firstDayPoints.push(a.dataToRect([t],!1).tl);var u=n._getLinePointsOfOneWeek(e,t,r);n._tlpoints.push(u[0]),n._blpoints.push(u[u.length-1]),o&&n._drawSplitline(u,s,i)}l(a.getNextNDay(t.end.time,1).formatedDate),o&&this._drawSplitline(n._getEdgesPoints(n._tlpoints,u,r),s,i),o&&this._drawSplitline(n._getEdgesPoints(n._blpoints,u,r),s,i)},t.prototype._getEdgesPoints=function(e,t,r){var i=[e[0].slice(),e[e.length-1].slice()],n="horizontal"===r?0:1;return i[0][n]=i[0][n]-t/2,i[1][n]=i[1][n]+t/2,i},t.prototype._drawSplitline=function(e,t,r){var i=new Ju({z2:20,shape:{points:e},style:t});r.add(i)},t.prototype._getLinePointsOfOneWeek=function(e,t,r){for(var i=e.coordinateSystem,n=i.getDateInfo(t),a=[],s=0;s<7;s++){var o=i.getNextNDay(n.time,s),u=i.dataToRect([o.time],!1);a[2*o.day]=u.tl,a[2*o.day+1]=u["horizontal"===r?"bl":"tr"]}return a},t.prototype._formatterLabel=function(e,t){return"string"===typeof e&&e?(r=e,L(t,(function(e,t){r=r.replace("{"+t+"}",i?kh(e):e)})),r):"function"===typeof e?e(t):t.nameMap;var r,i},t.prototype._yearTextPositionControl=function(e,t,r,i,n){var a=t[0],s=t[1],o=["center","bottom"];"bottom"===i?(s+=n,o=["center","top"]):"left"===i?a-=n:"right"===i?(a+=n,o=["center","top"]):s-=n;var u=0;return"left"!==i&&"right"!==i||(u=Math.PI/2),{rotation:u,x:a,y:s,style:{align:o[0],verticalAlign:o[1]}}},t.prototype._renderYearText=function(e,t,r,i){var n=e.getModel("yearLabel");if(n.get("show")){var a=n.get("margin"),s=n.get("position");s||(s="horizontal"!==r?"top":"left");var o=[this._tlpoints[this._tlpoints.length-1],this._blpoints[0]],u=(o[0][0]+o[1][0])/2,c=(o[0][1]+o[1][1])/2,d="horizontal"===r?0:1,h={top:[u,o[d][1]],bottom:[u,o[1-d][1]],left:[o[1-d][0],c],right:[o[d][0],c]},l=t.start.y;+t.end.y>+t.start.y&&(l=l+"-"+t.end.y);var f=n.get("formatter"),p={start:t.start.y,end:t.end.y,nameMap:l},v=this._formatterLabel(f,p),m=new no({z2:30,style:cd(n,{text:v})});m.attr(this._yearTextPositionControl(m,h[s],r,s,a)),i.add(m)}},t.prototype._monthTextPositionControl=function(e,t,r,i,n){var a="left",s="top",o=e[0],u=e[1];return"horizontal"===r?(u+=n,t&&(a="center"),"start"===i&&(s="bottom")):(o+=n,t&&(s="middle"),"start"===i&&(a="right")),{x:o,y:u,align:a,verticalAlign:s}},t.prototype._renderMonthText=function(e,t,r){var i=e.getModel("monthLabel");if(i.get("show")){var n=i.get("nameMap"),a=i.get("margin"),s=i.get("position"),o=i.get("align"),u=[this._tlpoints,this._blpoints];H(n)&&(n=vL[n.toUpperCase()]||[]);var c="start"===s?0:1,d="horizontal"===t?0:1;a="start"===s?-a:a;for(var h="center"===o,l=0;l<u[c].length-1;l++){var f=u[c][l].slice(),p=this._firstDayOfMonth[l];if(h){var v=this._firstDayPoints[l];f[d]=(v[d]+u[0][l+1][d])/2}var m=i.get("formatter"),g=n[+p.m-1],y={yyyy:p.y,yy:(p.y+"").slice(2),MM:p.m,M:+p.m,nameMap:g},b=this._formatterLabel(m,y),x=new no({z2:30,style:I(cd(i,{text:b}),this._monthTextPositionControl(f,h,t,s,a))});r.add(x)}}},t.prototype._weekTextPositionControl=function(e,t,r,i,n){var a="center",s="middle",o=e[0],u=e[1],c="start"===r;return"horizontal"===t?(o=o+i+(c?1:-1)*n[0]/2,a=c?"right":"left"):(u=u+i+(c?1:-1)*n[1]/2,s=c?"bottom":"top"),{x:o,y:u,align:a,verticalAlign:s}},t.prototype._renderWeekText=function(e,t,r,i){var n=e.getModel("dayLabel");if(n.get("show")){var a=e.coordinateSystem,s=n.get("position"),o=n.get("nameMap"),u=n.get("margin"),c=a.getFirstDayOfWeek();H(o)&&(o=mL[o.toUpperCase()]||[]);var d=a.getNextNDay(t.end.time,7-t.lweek).time,h=[a.getCellWidth(),a.getCellHeight()];u=Di(u,Math.min(h[1],h[0])),"start"===s&&(d=a.getNextNDay(t.start.time,-(7+t.fweek)).time,u=-u);for(var l=0;l<7;l++){var f,p=a.getNextNDay(d,l),v=a.dataToRect([p.time],!1).center;f=Math.abs((l+c)%7);var m=new no({z2:30,style:I(cd(n,{text:o[f]}),this._weekTextPositionControl(v,r,s,u,h))});i.add(m)}}},t.type="calendar",t}(wp),yL=864e5;function bL(e){var t=e.calendarModel,r=e.seriesModel;return t?t.coordinateSystem:r?r.coordinateSystem:null}var xL=function(){function e(t,r,i){this.type="calendar",this.dimensions=e.dimensions,this.getDimensionsInfo=e.getDimensionsInfo,this._model=t}return e.getDimensionsInfo=function(){return[{name:"time",type:"time"},"value"]},e.prototype.getRangeInfo=function(){return this._rangeInfo},e.prototype.getModel=function(){return this._model},e.prototype.getRect=function(){return this._rect},e.prototype.getCellWidth=function(){return this._sw},e.prototype.getCellHeight=function(){return this._sh},e.prototype.getOrient=function(){return this._orient},e.prototype.getFirstDayOfWeek=function(){return this._firstDayOfWeek},e.prototype.getDateInfo=function(e){var t=(e=zi(e)).getFullYear(),r=e.getMonth()+1,i=r<10?"0"+r:""+r,n=e.getDate(),a=n<10?"0"+n:""+n,s=e.getDay();return{y:t+"",m:i,d:a,day:s=Math.abs((s+7-this.getFirstDayOfWeek())%7),time:e.getTime(),formatedDate:t+"-"+i+"-"+a,date:e}},e.prototype.getNextNDay=function(e,t){return 0===(t=t||0)||(e=new Date(this.getDateInfo(e).time)).setDate(e.getDate()+t),this.getDateInfo(e)},e.prototype.update=function(e,t){this._firstDayOfWeek=+this._model.getModel("dayLabel").get("firstDay"),this._orient=this._model.get("orient"),this._lineWidth=this._model.getModel("itemStyle").getItemStyle().lineWidth||0,this._rangeInfo=this._getRangeInfo(this._initRangeOption());var r=this._rangeInfo.weeks||1,i=["width","height"],n=this._model.getCellSize().slice(),a=this._model.getBoxLayoutParams(),s="horizontal"===this._orient?[r,7]:[7,r];L([0,1],(function(e){c(n,e)&&(a[i[e]]=n[e]*s[e])}));var o={width:t.getWidth(),height:t.getHeight()},u=this._rect=Ph(a,o);function c(e,t){return null!=e[t]&&"auto"!==e[t]}L([0,1],(function(e){c(n,e)||(n[e]=u[i[e]]/s[e])})),this._sw=n[0],this._sh=n[1]},e.prototype.dataToPoint=function(e,t){j(e)&&(e=e[0]),null==t&&(t=!0);var r=this.getDateInfo(e),i=this._rangeInfo,n=r.formatedDate;if(t&&!(r.time>=i.start.time&&r.time<i.end.time+yL))return[NaN,NaN];var a=r.day,s=this._getRangeInfo([i.start.time,n]).nthWeek;return"vertical"===this._orient?[this._rect.x+a*this._sw+this._sw/2,this._rect.y+s*this._sh+this._sh/2]:[this._rect.x+s*this._sw+this._sw/2,this._rect.y+a*this._sh+this._sh/2]},e.prototype.pointToData=function(e){var t=this.pointToDate(e);return t&&t.time},e.prototype.dataToRect=function(e,t){var r=this.dataToPoint(e,t);return{contentShape:{x:r[0]-(this._sw-this._lineWidth)/2,y:r[1]-(this._sh-this._lineWidth)/2,width:this._sw-this._lineWidth,height:this._sh-this._lineWidth},center:r,tl:[r[0]-this._sw/2,r[1]-this._sh/2],tr:[r[0]+this._sw/2,r[1]-this._sh/2],br:[r[0]+this._sw/2,r[1]+this._sh/2],bl:[r[0]-this._sw/2,r[1]+this._sh/2]}},e.prototype.pointToDate=function(e){var t=Math.floor((e[0]-this._rect.x)/this._sw)+1,r=Math.floor((e[1]-this._rect.y)/this._sh)+1,i=this._rangeInfo.range;return"vertical"===this._orient?this._getDateByWeeksAndDay(r,t-1,i):this._getDateByWeeksAndDay(t,r-1,i)},e.prototype.convertToPixel=function(e,t,r){var i=bL(t);return i===this?i.dataToPoint(r):null},e.prototype.convertFromPixel=function(e,t,r){var i=bL(t);return i===this?i.pointToData(r):null},e.prototype.containPoint=function(e){return console.warn("Not implemented."),!1},e.prototype._initRangeOption=function(){var e,t=this._model.get("range");if(j(t)&&1===t.length&&(t=t[0]),j(t))e=t;else{var r=t.toString();if(/^\d{4}$/.test(r)&&(e=[r+"-01-01",r+"-12-31"]),/^\d{4}[\/|-]\d{1,2}$/.test(r)){var i=this.getDateInfo(r),n=i.date;n.setMonth(n.getMonth()+1);var a=this.getNextNDay(n,-1);e=[i.formatedDate,a.formatedDate]}/^\d{4}[\/|-]\d{1,2}[\/|-]\d{1,2}$/.test(r)&&(e=[r,r])}if(!e)return t;var s=this._getRangeInfo(e);return s.start.time>s.end.time&&e.reverse(),e},e.prototype._getRangeInfo=function(e){var t,r=[this.getDateInfo(e[0]),this.getDateInfo(e[1])];r[0].time>r[1].time&&(t=!0,r.reverse());var i=Math.floor(r[1].time/yL)-Math.floor(r[0].time/yL)+1,n=new Date(r[0].time),a=n.getDate(),s=r[1].date.getDate();n.setDate(a+i-1);var o=n.getDate();if(o!==s)for(var u=n.getTime()-r[1].time>0?1:-1;(o=n.getDate())!==s&&(n.getTime()-r[1].time)*u>0;)i-=u,n.setDate(o-u);var c=Math.floor((i+r[0].day+6)/7),d=t?1-c:c-1;return t&&r.reverse(),{range:[r[0].formatedDate,r[1].formatedDate],start:r[0],end:r[1],allDay:i,weeks:c,nthWeek:d,fweek:r[0].day,lweek:r[1].day}},e.prototype._getDateByWeeksAndDay=function(e,t,r){var i=this._getRangeInfo(r);if(e>i.weeks||0===e&&t<i.fweek||e===i.weeks&&t>i.lweek)return null;var n=7*(e-1)-i.fweek+t,a=new Date(i.start.time);return a.setDate(+i.start.d+n),this.getDateInfo(a)},e.create=function(t,r){var i=[];return t.eachComponent("calendar",(function(n){var a=new e(n,t,r);i.push(a),n.coordinateSystem=a})),t.eachSeries((function(e){"calendar"===e.get("coordinateSystem")&&(e.coordinateSystem=i[e.get("calendarIndex")||0])})),i},e.dimensions=["time","value"],e}();var kL=fn(),wL={path:null,compoundPath:null,group:Ti,image:Gs,text:no},_L=function(e){var t=e.graphic;j(t)?t[0]&&t[0].elements?e.graphic=[e.graphic[0]]:e.graphic=[{elements:t}]:t&&!t.elements&&(e.graphic=[{elements:[t]}])},SL=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return r.type=t.type,r.preventAutoZ=!0,r}return a(t,e),t.prototype.mergeOption=function(t,r){var i=this.option.elements;this.option.elements=null,e.prototype.mergeOption.call(this,t,r),this.option.elements=i},t.prototype.optionUpdated=function(e,t){var r=this.option,i=(t?r:e).elements,n=r.elements=t?[]:r.elements,a=[];this._flatten(i,a,null);var s=sn(n,a,"normalMerge"),o=this._elOptionsToUpdate=[];L(s,(function(e,t){var r=e.newOption;r&&(o.push(r),function(e,t){var r=e.existing;if(t.id=e.keyInfo.id,!t.type&&r&&(t.type=r.type),null==t.parentId){var i=t.parentOption;i?t.parentId=i.id:r&&(t.parentId=r.parentId)}t.parentOption=null}(e,r),function(e,t,r){var i=I({},r),n=e[t],a=r.$action||"merge";if("merge"===a){if(n)T(n,i,!0),Bh(n,i,{ignoreSize:!0}),Vh(r,n);else e[t]=i}else"replace"===a?e[t]=i:"remove"===a&&n&&(e[t]=null)}(n,t,r),function(e,t){if(!e)return;if(e.hv=t.hv=[IL(t,["left","right"]),IL(t,["top","bottom"])],"group"===e.type){var r=e,i=t;null==r.width&&(r.width=i.width=0),null==r.height&&(r.height=i.height=0)}}(n[t],r))}),this);for(var u=n.length-1;u>=0;u--)null==n[u]?n.splice(u,1):delete n[u].$action},t.prototype._flatten=function(e,t,r){L(e,(function(e){if(e){r&&(e.parentOption=r),t.push(e);var i=e.children;"group"===e.type&&i&&this._flatten(i,t,e),delete e.children}}),this)},t.prototype.useElOptionsToUpdate=function(){var e=this._elOptionsToUpdate;return this._elOptionsToUpdate=null,e},t.type="graphic",t.defaultOption={elements:[]},t}(qh),OL=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return r.type=t.type,r}return a(t,e),t.prototype.init=function(){this._elMap=ce()},t.prototype.render=function(e,t,r){e!==this._lastGraphicModel&&this._clear(),this._lastGraphicModel=e,this._updateElements(e),this._relocate(e,r)},t.prototype._updateElements=function(e){var t=e.useElOptionsToUpdate();if(t){var r=this._elMap,i=this.group;L(t,(function(t){var n=cn(t.id,null),a=null!=n?r.get(n):null,s=cn(t.parentId,null),o=null!=s?r.get(s):i,u=t.type,c=t.style;"text"===u&&c&&t.hv&&t.hv[1]&&(c.textVerticalAlign=c.textBaseline=c.verticalAlign=c.align=null);var d=t.textContent,h=t.textConfig;if(c&&JE(c,u,!!h,!!d)){var l=eN(c,u,!0);!h&&l.textConfig&&(h=t.textConfig=l.textConfig),!d&&l.textContent&&(d=l.textContent)}var f=function(e){return e=I({},e),L(["id","parentId","$action","hv","bounding","textContent"].concat(Mh),(function(t){delete e[t]})),e}(t);var p=t.$action||"merge";"merge"===p?a?a.attr(f):TL(n,o,f,r):"replace"===p?(CL(a,r),TL(n,o,f,r)):"remove"===p&&CL(a,r);var v=r.get(n);if(v&&d)if("merge"===p){var m=v.getTextContent();m?m.attr(d):v.setTextContent(new no(d))}else"replace"===p&&v.setTextContent(new no(d));if(v){var g=kL(v);g.__ecGraphicWidthOption=t.width,g.__ecGraphicHeightOption=t.height,function(e,t,r){var i=ao(e).eventData;e.silent||e.ignore||i||(i=ao(e).eventData={componentType:"graphic",componentIndex:t.componentIndex,name:e.name});i&&(i.info=r.info)}(v,e,t),id({el:v,componentModel:e,itemName:v.name,itemTooltipOption:t.tooltip})}}))}},t.prototype._relocate=function(e,t){for(var r=e.option.elements,i=this.group,n=this._elMap,a=t.getWidth(),s=t.getHeight(),o=0;o<r.length;o++){if((f=null!=(l=cn((h=r[o]).id,null))?n.get(l):null)&&f.isGroup){var u=(p=f.parent)===i,c=kL(f),d=kL(p);c.__ecGraphicWidth=Di(c.__ecGraphicWidthOption,u?a:d.__ecGraphicWidth)||0,c.__ecGraphicHeight=Di(c.__ecGraphicHeightOption,u?s:d.__ecGraphicHeight)||0}}for(o=r.length-1;o>=0;o--){var h,l,f;if(f=null!=(l=cn((h=r[o]).id,null))?n.get(l):null){var p=f.parent;d=kL(p);Dh(f,h,p===i?{width:a,height:s}:{width:d.__ecGraphicWidth,height:d.__ecGraphicHeight},null,{hv:h.hv,boundingMode:h.bounding})}}},t.prototype._clear=function(){var e=this._elMap;e.each((function(t){CL(t,e)})),this._elMap=ce()},t.prototype.dispose=function(){this._clear()},t.type="graphic",t}(wp);function TL(e,t,r,i){var n=r.type;var a=new(le(wL,n)?wL[n]:Ac(n))(r);t.add(a),i.set(e,a),kL(a).__ecGraphicId=e}function CL(e,t){var r=e&&e.parent;r&&("group"===e.type&&e.traverse((function(e){CL(e,t)})),t.removeKey(kL(e).__ecGraphicId),r.remove(e))}function IL(e,t){var r;return L(t,(function(t){null!=e[t]&&"auto"!==e[t]&&(r=!0)})),r}var ML=["x","y","radius","angle","single"],AL=["cartesian2d","polar","singleAxis"];function EL(e){return e+"Axis"}function NL(e,t){var r,i=ce(),n=[],a=ce();e.eachComponent({mainType:"dataZoom",query:t},(function(e){a.get(e.uid)||o(e)}));do{r=!1,e.eachComponent("dataZoom",s)}while(r);function s(e){!a.get(e.uid)&&function(e){var t=!1;return e.eachTargetAxis((function(e,r){var n=i.get(e);n&&n[r]&&(t=!0)})),t}(e)&&(o(e),r=!0)}function o(e){a.set(e.uid,!0),n.push(e),e.eachTargetAxis((function(e,t){(i.get(e)||i.set(e,[]))[t]=!0}))}return n}function PL(e){var t=e.ecModel,r={infoList:[],infoMap:ce()};return e.eachTargetAxis((function(e,i){var n=t.getComponent(EL(e),i);if(n){var a=n.getCoordSysModel();if(a){var s=a.uid,o=r.infoMap.get(s);o||(o={model:a,axisModels:[]},r.infoList.push(o),r.infoMap.set(s,o)),o.axisModels.push(n)}}})),r}var DL=function(){function e(){this.indexList=[],this.indexMap=[]}return e.prototype.add=function(e){this.indexMap[e]||(this.indexList.push(e),this.indexMap[e]=!0)},e}();function LL(e){var t={};return L(["start","end","startValue","endValue","throttle"],(function(r){e.hasOwnProperty(r)&&(t[r]=e[r])})),t}var BL=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return r.type=t.type,r._autoThrottle=!0,r._noTarget=!0,r._rangePropMode=["percent","percent"],r}return a(t,e),t.prototype.init=function(e,t,r){var i=LL(e);this.settledOption=i,this.mergeDefaultAndTheme(e,r),this._doInit(i)},t.prototype.mergeOption=function(e){var t=LL(e);T(this.option,e,!0),T(this.settledOption,t,!0),this._doInit(t)},t.prototype._doInit=function(e){var t=this.option;this._setDefaultThrottle(e),this._updateRangeUse(e);var r=this.settledOption;L([["start","startValue"],["end","endValue"]],(function(e,i){"value"===this._rangePropMode[i]&&(t[e[0]]=r[e[0]]=null)}),this),this._resetTarget()},t.prototype._resetTarget=function(){var e=this.get("orient",!0),t=this._targetAxisInfoMap=ce();this._fillSpecifiedTargetAxis(t)?this._orient=e||this._makeAutoOrientByTargetAxis():(this._orient=e||"horizontal",this._fillAutoTargetAxisByOrient(t,this._orient)),this._noTarget=!0,t.each((function(e){e.indexList.length&&(this._noTarget=!1)}),this)},t.prototype._fillSpecifiedTargetAxis=function(e){var t=!1;return L(ML,(function(r){var i=this.getReferringComponents(EL(r),yn);if(i.specified){t=!0;var n=new DL;L(i.models,(function(e){n.add(e.componentIndex)})),e.set(r,n)}}),this),t},t.prototype._fillAutoTargetAxisByOrient=function(e,t){var r=this.ecModel,i=!0;if(i){var n="vertical"===t?"y":"x";a(r.findComponents({mainType:n+"Axis"}),n)}i&&a(r.findComponents({mainType:"singleAxis",filter:function(e){return e.get("orient",!0)===t}}),"single");function a(t,r){var n=t[0];if(n){var a=new DL;if(a.add(n.componentIndex),e.set(r,a),i=!1,"x"===r||"y"===r){var s=n.getReferringComponents("grid",gn).models[0];s&&L(t,(function(e){n.componentIndex!==e.componentIndex&&s===e.getReferringComponents("grid",gn).models[0]&&a.add(e.componentIndex)}))}}}i&&L(ML,(function(t){if(i){var n=r.findComponents({mainType:EL(t),filter:function(e){return"category"===e.get("type",!0)}});if(n[0]){var a=new DL;a.add(n[0].componentIndex),e.set(t,a),i=!1}}}),this)},t.prototype._makeAutoOrientByTargetAxis=function(){var e;return this.eachTargetAxis((function(t){!e&&(e=t)}),this),"y"===e?"vertical":"horizontal"},t.prototype._setDefaultThrottle=function(e){if(e.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var t=this.ecModel.option;this.option.throttle=t.animation&&t.animationDurationUpdate>0?100:20}},t.prototype._updateRangeUse=function(e){var t=this._rangePropMode,r=this.get("rangeMode");L([["start","startValue"],["end","endValue"]],(function(i,n){var a=null!=e[i[0]],s=null!=e[i[1]];a&&!s?t[n]="percent":!a&&s?t[n]="value":r?t[n]=r[n]:a&&(t[n]="percent")}))},t.prototype.noTarget=function(){return this._noTarget},t.prototype.getFirstTargetAxisModel=function(){var e;return this.eachTargetAxis((function(t,r){null==e&&(e=this.ecModel.getComponent(EL(t),r))}),this),e},t.prototype.eachTargetAxis=function(e,t){this._targetAxisInfoMap.each((function(r,i){L(r.indexList,(function(r){e.call(t,i,r)}))}))},t.prototype.getAxisProxy=function(e,t){var r=this.getAxisModel(e,t);if(r)return r.__dzAxisProxy},t.prototype.getAxisModel=function(e,t){var r=this._targetAxisInfoMap.get(e);if(r&&r.indexMap[t])return this.ecModel.getComponent(EL(e),t)},t.prototype.setRawRange=function(e){var t=this.option,r=this.settledOption;L([["start","startValue"],["end","endValue"]],(function(i){null==e[i[0]]&&null==e[i[1]]||(t[i[0]]=r[i[0]]=e[i[0]],t[i[1]]=r[i[1]]=e[i[1]])}),this),this._updateRangeUse(e)},t.prototype.setCalculatedRange=function(e){var t=this.option;L(["start","startValue","end","endValue"],(function(r){t[r]=e[r]}))},t.prototype.getPercentRange=function(){var e=this.findRepresentativeAxisProxy();if(e)return e.getDataPercentWindow()},t.prototype.getValueRange=function(e,t){if(null!=e||null!=t)return this.getAxisProxy(e,t).getDataValueWindow();var r=this.findRepresentativeAxisProxy();return r?r.getDataValueWindow():void 0},t.prototype.findRepresentativeAxisProxy=function(e){if(e)return e.__dzAxisProxy;for(var t,r=this._targetAxisInfoMap.keys(),i=0;i<r.length;i++)for(var n=r[i],a=this._targetAxisInfoMap.get(n),s=0;s<a.indexList.length;s++){var o=this.getAxisProxy(n,a.indexList[s]);if(o.hostedBy(this))return o;t||(t=o)}return t},t.prototype.getRangePropMode=function(){return this._rangePropMode.slice()},t.prototype.getOrient=function(){return this._orient},t.type="dataZoom",t.dependencies=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","series","toolbox"],t.defaultOption={zlevel:0,z:4,filterMode:"filter",start:0,end:100},t}(qh),RL=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return r.type=t.type,r}return a(t,e),t.type="dataZoom.select",t}(BL),VL=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return r.type=t.type,r}return a(t,e),t.prototype.render=function(e,t,r,i){this.dataZoomModel=e,this.ecModel=t,this.api=r},t.type="dataZoom",t}(wp),GL=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return r.type=t.type,r}return a(t,e),t.type="dataZoom.select",t}(VL),FL=L,qL=Bi;var jL=function(){function e(e,t,r,i){this._dimName=e,this._axisIndex=t,this.ecModel=i,this._dataZoomModel=r}return e.prototype.hostedBy=function(e){return this._dataZoomModel===e},e.prototype.getDataValueWindow=function(){return this._valueWindow.slice()},e.prototype.getDataPercentWindow=function(){return this._percentWindow.slice()},e.prototype.getTargetSeriesModels=function(){var e=[];return this.ecModel.eachSeries((function(t){if(function(e){var t=e.get("coordinateSystem");return E(AL,t)>=0}(t)){var r=EL(this._dimName),i=t.getReferringComponents(r,gn).models[0];i&&this._axisIndex===i.componentIndex&&e.push(t)}}),this),e},e.prototype.getAxisModel=function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},e.prototype.getMinMaxSpan=function(){return O(this._minMaxSpan)},e.prototype.calculateDataWindow=function(e){var t,r=this._dataExtent,i=this.getAxisModel().axis.scale,n=this._dataZoomModel.getRangePropMode(),a=[0,100],s=[],o=[];FL(["start","end"],(function(u,c){var d=e[u],h=e[u+"Value"];"percent"===n[c]?(null==d&&(d=a[c]),h=i.parse(Pi(d,a,r))):(t=!0,d=Pi(h=null==h?r[c]:i.parse(h),r,a)),o[c]=h,s[c]=d})),qL(o),qL(s);var u=this._minMaxSpan;function c(e,t,r,n,a){var s=a?"Span":"ValueSpan";AI(0,e,r,"all",u["min"+s],u["max"+s]);for(var o=0;o<2;o++)t[o]=Pi(e[o],r,n,!0),a&&(t[o]=i.parse(t[o]))}return t?c(o,s,r,a,!1):c(s,o,a,r,!0),{valueWindow:o,percentWindow:s}},e.prototype.reset=function(e){if(e===this._dataZoomModel){var t=this.getTargetSeriesModels();this._dataExtent=function(e,t,r){var i=[1/0,-1/0];FL(r,(function(e){!function(e,t,r){t&&L(k_(t,r),(function(r){var i=t.getApproximateExtent(r);i[0]<e[0]&&(e[0]=i[0]),i[1]>e[1]&&(e[1]=i[1])}))}(i,e.getData(),t)}));var n=e.getAxisModel(),a=h_(n.axis.scale,n,i).calculate();return[a.min,a.max]}(this,this._dimName,t),this._updateMinMaxSpan();var r=this.calculateDataWindow(e.settledOption);this._valueWindow=r.valueWindow,this._percentWindow=r.percentWindow,this._setAxisModel()}},e.prototype.filterData=function(e,t){if(e===this._dataZoomModel){var r=this._dimName,i=this.getTargetSeriesModels(),n=e.get("filterMode"),a=this._valueWindow;"none"!==n&&FL(i,(function(e){var t=e.getData(),i=t.mapDimensionsAll(r);i.length&&("weakFilter"===n?t.filterSelf((function(e){for(var r,n,s,o=0;o<i.length;o++){var u=t.get(i[o],e),c=!isNaN(u),d=u<a[0],h=u>a[1];if(c&&!d&&!h)return!0;c&&(s=!0),d&&(r=!0),h&&(n=!0)}return s&&r&&n})):FL(i,(function(r){if("empty"===n)e.setData(t=t.map(r,(function(e){return function(e){return e>=a[0]&&e<=a[1]}(e)?e:NaN})));else{var i={};i[r]=a,t.selectRange(i)}})),FL(i,(function(e){t.setApproximateExtent(a,e)})))}))}},e.prototype._updateMinMaxSpan=function(){var e=this._minMaxSpan={},t=this._dataZoomModel,r=this._dataExtent;FL(["min","max"],(function(i){var n=t.get(i+"Span"),a=t.get(i+"ValueSpan");null!=a&&(a=this.getAxisModel().axis.scale.parse(a)),null!=a?n=Pi(r[0]+a,r,[0,100],!0):null!=n&&(a=Pi(n,[0,100],r,!0)-r[0]),e[i+"Span"]=n,e[i+"ValueSpan"]=a}),this)},e.prototype._setAxisModel=function(){var e=this.getAxisModel(),t=this._percentWindow,r=this._valueWindow;if(t){var i=Vi(r,[0,500]);i=Math.min(i,20);var n=e.axis.scale.rawExtentInfo;0!==t[0]&&n.setDeterminedMinMax("min",+r[0].toFixed(i)),100!==t[1]&&n.setDeterminedMinMax("max",+r[1].toFixed(i)),n.freeze()}},e}(),zL={getTargetSeries:function(e){function t(t){e.eachComponent("dataZoom",(function(r){r.eachTargetAxis((function(i,n){var a=e.getComponent(EL(i),n);t(i,n,a,r)}))}))}t((function(e,t,r,i){r.__dzAxisProxy=null}));var r=[];t((function(t,i,n,a){n.__dzAxisProxy||(n.__dzAxisProxy=new jL(t,i,a,e),r.push(n.__dzAxisProxy))}));var i=ce();return L(r,(function(e){L(e.getTargetSeriesModels(),(function(e){i.set(e.uid,e)}))})),i},overallReset:function(e,t){e.eachComponent("dataZoom",(function(e){e.eachTargetAxis((function(t,r){e.getAxisProxy(t,r).reset(e)})),e.eachTargetAxis((function(r,i){e.getAxisProxy(r,i).filterData(e,t)}))})),e.eachComponent("dataZoom",(function(e){var t=e.findRepresentativeAxisProxy();if(t){var r=t.getDataPercentWindow(),i=t.getDataValueWindow();e.setCalculatedRange({start:r[0],end:r[1],startValue:i[0],endValue:i[1]})}}))}};var HL=!1;function UL(e){HL||(HL=!0,e.registerProcessor(e.PRIORITY.PROCESSOR.FILTER,zL),function(e){e.registerAction("dataZoom",(function(e,t){L(NL(t,e),(function(t){t.setRawRange({start:e.start,end:e.end,startValue:e.startValue,endValue:e.endValue})}))}))}(e),e.registerSubTypeDefaulter("dataZoom",(function(){return"slider"})))}function WL(e){e.registerComponentModel(RL),e.registerComponentView(GL),UL(e)}var KL=function(){},XL={};function YL(e,t){XL[e]=t}function ZL(e){return XL[e]}var QL=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return r.type=t.type,r}return a(t,e),t.prototype.optionUpdated=function(){e.prototype.optionUpdated.apply(this,arguments);var t=this.ecModel;L(this.option.feature,(function(e,r){var i=ZL(r);i&&(i.getDefaultOption&&(i.defaultOption=i.getDefaultOption(t)),T(e,i.defaultOption))}))},t.type="toolbox",t.layoutMode={type:"box",ignoreSize:!0},t.defaultOption={show:!0,z:6,zlevel:0,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemSize:15,itemGap:8,showTitle:!0,iconStyle:{borderColor:"#666",color:"none"},emphasis:{iconStyle:{borderColor:"#3E98C5"}},tooltip:{show:!1,position:"bottom"}},t}(qh);function $L(e,t){var r=yh(t.get("padding")),i=t.getItemStyle(["color","opacity"]);return i.fill=t.get("backgroundColor"),e=new Ks({shape:{x:e.x-r[3],y:e.y-r[0],width:e.width+r[1]+r[3],height:e.height+r[0]+r[2],r:t.get("borderRadius")},style:i,silent:!0,z2:-1})}var JL=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.render=function(e,t,r,i){var n=this.group;if(n.removeAll(),e.get("show")){var a=+e.get("itemSize"),s=e.get("feature")||{},o=this._features||(this._features={}),u=[];L(s,(function(e,t){u.push(t)})),new Kb(this._featureNames||[],u).add(c).update(c).remove(q(c,null)).execute(),this._featureNames=u,function(e,t,r){var i=t.getBoxLayoutParams(),n=t.get("padding"),a={width:r.getWidth(),height:r.getHeight()},s=Ph(i,a,n);Nh(t.get("orient"),e,t.get("itemGap"),s.width,s.height),Dh(e,i,a,n)}(n,e,r),n.add($L(n.getBoundingRect(),e)),n.eachChild((function(e){var t=e.__title,i=e.ensureState("emphasis"),s=i.textConfig||(i.textConfig={}),o=e.getTextContent(),u=o&&o.states.emphasis;if(u&&!z(u)&&t){var c=u.style||(u.style={}),d=Mr(t,no.makeFont(c)),h=e.x+n.x,l=!1;e.y+n.y+a+d.height>r.getHeight()&&(s.position="top",l=!0);var f=l?-5-d.height:a+8;h+d.width/2>r.getWidth()?(s.position=["100%",f],c.align="right"):h-d.width/2<0&&(s.position=[0,f],c.align="left")}}))}function c(c,d){var h,l=u[c],f=u[d],p=s[l],v=new Md(p,e,e.ecModel);if(i&&null!=i.newTitle&&i.featureName===l&&(p.title=i.newTitle),l&&!f){if(function(e){return 0===e.indexOf("my")}(l))h={onclick:v.option.onclick,featureName:l};else{var m=ZL(l);if(!m)return;h=new m}o[l]=h}else if(!(h=o[f]))return;if(h.uid=Ed("toolbox-feature"),h.model=v,h.ecModel=t,h.api=r,h instanceof KL){if(!l&&f)return void(h.dispose&&h.dispose(t,r));if(!v.get("show")||h.unusable)return void(h.remove&&h.remove(t,r))}!function(i,s,o){var u,c,d=i.getModel("iconStyle"),h=i.getModel(["emphasis","iconStyle"]),l=s instanceof KL&&s.getIcons?s.getIcons():i.get("icon"),f=i.get("title")||{};"string"===typeof l?(u={})[o]=l:u=l;"string"===typeof f?(c={})[o]=f:c=f;var p=i.iconPaths={};L(u,(function(o,u){var l=Jc(o,{},{x:-a/2,y:-a/2,width:a,height:a});l.setStyle(d.getItemStyle()),l.ensureState("emphasis").style=h.getItemStyle();var f=new no({style:{text:c[u],align:h.get("textAlign"),borderRadius:h.get("textBorderRadius"),padding:h.get("textPadding"),fill:null},ignore:!0});l.setTextContent(f),id({el:l,componentModel:e,itemName:u,formatterParamsExtra:{title:c[u]}}),l.__title=c[u],l.on("mouseover",(function(){var t=h.getItemStyle(),r="vertical"===e.get("orient")?null==e.get("right")?"right":"left":null==e.get("bottom")?"bottom":"top";f.setStyle({fill:h.get("textFill")||t.fill||t.stroke||"#000",backgroundColor:h.get("textBackgroundColor")}),l.setTextConfig({position:h.get("textPosition")||r}),f.ignore=!e.get("showTitle"),Lo(this)})).on("mouseout",(function(){"emphasis"!==i.get(["iconStatus",u])&&Bo(this),f.hide()})),("emphasis"===i.get(["iconStatus",u])?Lo:Bo)(l),n.add(l),l.on("click",F(s.onclick,s,t,r,u)),p[u]=l}))}(v,h,l),v.setIconStatus=function(e,t){var r=this.option,i=this.iconPaths;r.iconStatus=r.iconStatus||{},r.iconStatus[e]=t,i[e]&&("emphasis"===t?Lo:Bo)(i[e])},h instanceof KL&&h.render&&h.render(v,t,r,i)}},t.prototype.updateView=function(e,t,r,i){L(this._features,(function(e){e instanceof KL&&e.updateView&&e.updateView(e.model,t,r,i)}))},t.prototype.remove=function(e,t){L(this._features,(function(r){r instanceof KL&&r.remove&&r.remove(e,t)})),this.group.removeAll()},t.prototype.dispose=function(e,t){L(this._features,(function(r){r instanceof KL&&r.dispose&&r.dispose(e,t)}))},t.type="toolbox",t}(wp),eB=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.onclick=function(e,t){var r=this.model,i=r.get("name")||e.get("title.0.text")||"echarts",n="svg"===t.getZr().painter.getType(),a=n?"svg":r.get("type",!0)||"png",s=t.getConnectedDataURL({type:a,backgroundColor:r.get("backgroundColor",!0)||e.get("backgroundColor")||"#fff",connectedBackgroundColor:r.get("connectedBackgroundColor"),excludeComponents:r.get("excludeComponents"),pixelRatio:r.get("pixelRatio")});if("function"!==typeof MouseEvent||!d.browser.newEdge&&(d.browser.ie||d.browser.edge))if(window.navigator.msSaveOrOpenBlob||n){var o=s.split(","),u=o[0].indexOf("base64")>-1,c=n?decodeURIComponent(o[1]):o[1];u&&(c=atob(c));var h=i+"."+a;if(window.navigator.msSaveOrOpenBlob){for(var l=c.length,f=new Uint8Array(l);l--;)f[l]=c.charCodeAt(l);var p=new Blob([f]);window.navigator.msSaveOrOpenBlob(p,h)}else{var v=document.createElement("iframe");document.body.appendChild(v);var m=v.contentWindow,g=m.document;g.open("image/svg+xml","replace"),g.write(c),g.close(),m.focus(),g.execCommand("SaveAs",!0,h),document.body.removeChild(v)}}else{var y=r.get("lang"),b='<body style="margin:0;"><img src="'+s+'" style="max-width:100%;" title="'+(y&&y[0]||"")+'" /></body>',x=window.open();x.document.write(b),x.document.title=i}else{var k=document.createElement("a");k.download=i+"."+a,k.target="_blank",k.href=s;var w=new MouseEvent("click",{view:document.defaultView,bubbles:!0,cancelable:!1});k.dispatchEvent(w)}},t.getDefaultOption=function(e){return{show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:e.getLocale(["toolbox","saveAsImage","title"]),type:"png",connectedBackgroundColor:"#fff",name:"",excludeComponents:["toolbox"],lang:e.getLocale(["toolbox","saveAsImage","lang"])}},t}(KL);eB.prototype.unusable=!d.canvasSupported;var tB=eB,rB="__ec_magicType_stack__",iB=[["line","bar"],["stack"]],nB=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.getIcons=function(){var e=this.model,t=e.get("icon"),r={};return L(e.get("type"),(function(e){t[e]&&(r[e]=t[e])})),r},t.getDefaultOption=function(e){return{show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z"},title:e.getLocale(["toolbox","magicType","title"]),option:{},seriesIndex:{}}},t.prototype.onclick=function(e,t,r){var i=this.model,n=i.get(["seriesIndex",r]);if(aB[r]){var a,s={series:[]};L(iB,(function(e){E(e,r)>=0&&L(e,(function(e){i.setIconStatus(e,"normal")}))})),i.setIconStatus(r,"emphasis"),e.eachComponent({mainType:"series",query:null==n?null:{seriesIndex:n}},(function(e){var t=e.subType,n=e.id,a=aB[r](t,n,e,i);a&&(M(a,e.option),s.series.push(a));var o=e.coordinateSystem;if(o&&"cartesian2d"===o.type&&("line"===r||"bar"===r)){var u=o.getAxesByScale("ordinal")[0];if(u){var c=u.dim+"Axis",d=e.getReferringComponents(c,gn).models[0].componentIndex;s[c]=s[c]||[];for(var h=0;h<=d;h++)s[c][d]=s[c][d]||{};s[c][d].boundaryGap="bar"===r}}})),"stack"===r&&(a=T({stack:i.option.title.tiled,tiled:i.option.title.stack},i.option.title)),t.dispatchAction({type:"changeMagicType",currentType:r,newOption:s,newTitle:a,featureName:"magicType"})}},t}(KL),aB={line:function(e,t,r,i){if("bar"===e)return T({id:t,type:"line",data:r.get("data"),stack:r.get("stack"),markPoint:r.get("markPoint"),markLine:r.get("markLine")},i.get(["option","line"])||{},!0)},bar:function(e,t,r,i){if("line"===e)return T({id:t,type:"bar",data:r.get("data"),stack:r.get("stack"),markPoint:r.get("markPoint"),markLine:r.get("markLine")},i.get(["option","bar"])||{},!0)},stack:function(e,t,r,i){var n=r.get("stack")===rB;if("line"===e||"bar"===e)return i.setIconStatus("stack",n?"normal":"emphasis"),T({id:t,stack:n?"":rB},i.get(["option","stack"])||{},!0)}};Vy({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},(function(e,t){t.mergeOption(e.newOption)}));var sB=nB,oB=new Array(60).join("-"),uB="\t";function cB(e){var t=[];return L(e,(function(e,r){var i=e.categoryAxis,n=e.valueAxis.dim,a=[" "].concat(B(e.series,(function(e){return e.name}))),s=[i.model.getCategories()];L(e.series,(function(e){var t=e.getRawData();s.push(e.getRawData().mapArray(t.mapDimension(n),(function(e){return e})))}));for(var o=[a.join(uB)],u=0;u<s[0].length;u++){for(var c=[],d=0;d<s.length;d++)c.push(s[d][u]);o.push(c.join(uB))}t.push(o.join("\n"))})),t.join("\n\n"+oB+"\n\n")}function dB(e){return e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}var hB=new RegExp("[\t]+","g");function lB(e,t){var r=e.split(new RegExp("\n*"+oB+"\n*","g")),i={series:[]};return L(r,(function(e,r){if(function(e){if(e.slice(0,e.indexOf("\n")).indexOf(uB)>=0)return!0}(e)){var n=function(e){for(var t=e.split(/\n+/g),r=[],i=B(dB(t.shift()).split(hB),(function(e){return{name:e,data:[]}})),n=0;n<t.length;n++){var a=dB(t[n]).split(hB);r.push(a.shift());for(var s=0;s<a.length;s++)i[s]&&(i[s].data[n]=a[s])}return{series:i,categories:r}}(e),a=t[r],s=a.axisDim+"Axis";a&&(i[s]=i[s]||[],i[s][a.axisIndex]={data:n.categories},i.series=i.series.concat(n.series))}else{n=function(e){for(var t=e.split(/\n+/g),r=dB(t.shift()),i=[],n=0;n<t.length;n++){var a=dB(t[n]);if(a){var s=a.split(hB),o="",u=void 0,c=!1;isNaN(s[0])?(c=!0,o=s[0],s=s.slice(1),i[n]={name:o,value:[]},u=i[n].value):u=i[n]=[];for(var d=0;d<s.length;d++)u.push(+s[d]);1===u.length&&(c?i[n].value=u[0]:i[n]=u[0])}}return{name:r,data:i}}(e);i.series.push(n)}})),i}var fB=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.onclick=function(e,t){var r=t.getDom(),i=this.model;this._dom&&r.removeChild(this._dom);var n=document.createElement("div");n.style.cssText="position:absolute;left:5px;top:5px;bottom:5px;right:5px;",n.style.backgroundColor=i.get("backgroundColor")||"#fff";var a=document.createElement("h4"),s=i.get("lang")||[];a.innerHTML=s[0]||i.get("title"),a.style.cssText="margin: 10px 20px;",a.style.color=i.get("textColor");var o=document.createElement("div"),u=document.createElement("textarea");o.style.cssText="display:block;width:100%;overflow:auto;";var c=i.get("optionToContent"),d=i.get("contentToOption"),h=function(e){var t,r=function(e){var t={},r=[],i=[];return e.eachRawSeries((function(e){var n=e.coordinateSystem;if(!n||"cartesian2d"!==n.type&&"polar"!==n.type)r.push(e);else{var a=n.getBaseAxis();if("category"===a.type){var s=a.dim+"_"+a.index;t[s]||(t[s]={categoryAxis:a,valueAxis:n.getOtherAxis(a),series:[]},i.push({axisDim:a.dim,axisIndex:a.index})),t[s].series.push(e)}else r.push(e)}})),{seriesGroupByCategoryAxis:t,other:r,meta:i}}(e);return{value:V([cB(r.seriesGroupByCategoryAxis),(t=r.other,B(t,(function(e){var t=e.getRawData(),r=[e.name],i=[];return t.each(t.dimensions,(function(){for(var e=arguments.length,n=arguments[e-1],a=t.getName(n),s=0;s<e-1;s++)i[s]=arguments[s];r.push((a?a+uB:"")+i.join(uB))})),r.join("\n")})).join("\n\n"+oB+"\n\n"))],(function(e){return!!e.replace(/[\n\t\s]/g,"")})).join("\n\n"+oB+"\n\n"),meta:r.meta}}(e);if("function"===typeof c){var l=c(t.getOption());"string"===typeof l?o.innerHTML=l:Z(l)&&o.appendChild(l)}else o.appendChild(u),u.readOnly=i.get("readOnly"),u.style.cssText="width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;",u.style.color=i.get("textColor"),u.style.borderColor=i.get("textareaBorderColor"),u.style.backgroundColor=i.get("textareaColor"),u.value=h.value;var f=h.meta,p=document.createElement("div");p.style.cssText="position:absolute;bottom:0;left:0;right:0;";var v="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",m=document.createElement("div"),g=document.createElement("div");v+=";background-color:"+i.get("buttonColor"),v+=";color:"+i.get("buttonTextColor");var y=this;function b(){r.removeChild(n),y._dom=null}Ye(m,"click",b),Ye(g,"click",(function(){if(null==d&&null!=c||null!=d&&null==c)b();else{var e;try{e="function"===typeof d?d(o,t.getOption()):lB(u.value,f)}catch(r){throw b(),new Error("Data view format error "+r)}e&&t.dispatchAction({type:"changeDataView",newOption:e}),b()}})),m.innerHTML=s[1],g.innerHTML=s[2],g.style.cssText=v,m.style.cssText=v,!i.get("readOnly")&&p.appendChild(g),p.appendChild(m),n.appendChild(a),n.appendChild(o),n.appendChild(p),o.style.height=r.clientHeight-80+"px",r.appendChild(n),this._dom=n},t.prototype.remove=function(e,t){this._dom&&t.getDom().removeChild(this._dom)},t.prototype.dispose=function(e,t){this.remove(e,t)},t.getDefaultOption=function(e){return{show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:e.getLocale(["toolbox","dataView","title"]),lang:e.getLocale(["toolbox","dataView","lang"]),backgroundColor:"#fff",textColor:"#000",textareaColor:"#fff",textareaBorderColor:"#333",buttonColor:"#c23531",buttonTextColor:"#fff"}},t}(KL);function pB(e,t){return B(e,(function(e,r){var i=t&&t[r];if(K(i)&&!j(i)){K(e)&&!j(e)||(e={value:e});var n=null!=i.name&&null==e.name;return e=M(e,i),n&&delete e.name,e}return e}))}Vy({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},(function(e,t){var r=[];L(e.newOption.series,(function(e){var i=t.getSeriesByName(e.name)[0];if(i){var n=i.get("data");r.push({name:e.name,data:pB(e.data,n)})}else r.push(I({type:"scatter"},e))})),t.mergeOption(M({series:r},e.newOption))}));var vB=fB,mB=L,gB=fn();function yB(e){var t=gB(e);return t.snapshots||(t.snapshots=[{}]),t.snapshots}var bB=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.onclick=function(e,t){!function(e){gB(e).snapshots=null}(e),t.dispatchAction({type:"restore",from:this.uid})},t.getDefaultOption=function(e){return{show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:e.getLocale(["toolbox","restore","title"])}},t}(KL);Vy({type:"restore",event:"restore",update:"prepareAndUpdate"},(function(e,t){t.resetOption("recreate")}));var xB=bB,kB=["dataToPoint","pointToData"],wB=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"],_B=function(){function e(e,t,r){var i=this;this._targetInfoList=[];var n=OB(t,e);L(TB,(function(e,t){(!r||!r.include||E(r.include,t)>=0)&&e(n,i._targetInfoList)}))}return e.prototype.setOutputRanges=function(e,t){return this.matchOutputRanges(e,t,(function(e,t,r){if((e.coordRanges||(e.coordRanges=[])).push(t),!e.coordRange){e.coordRange=t;var i=MB[e.brushType](0,r,t);e.__rangeOffset={offset:EB[e.brushType](i.values,e.range,[1,1]),xyMinMax:i.xyMinMax}}})),e},e.prototype.matchOutputRanges=function(e,t,r){L(e,(function(e){var i=this.findTargetInfo(e,t);i&&!0!==i&&L(i.coordSyses,(function(i){var n=MB[e.brushType](1,i,e.range);r(e,n.values,i,t)}))}),this)},e.prototype.setInputRanges=function(e,t){L(e,(function(e){var r=this.findTargetInfo(e,t);if(e.range=e.range||[],r&&!0!==r){e.panelId=r.panelId;var i=MB[e.brushType](0,r.coordSys,e.coordRange),n=e.__rangeOffset;e.range=n?EB[e.brushType](i.values,n.offset,function(e,t){var r=PB(e),i=PB(t),n=[r[0]/i[0],r[1]/i[1]];return isNaN(n[0])&&(n[0]=1),isNaN(n[1])&&(n[1]=1),n}(i.xyMinMax,n.xyMinMax)):i.values}}),this)},e.prototype.makePanelOpts=function(e,t){return B(this._targetInfoList,(function(r){var i=r.getPanelRect();return{panelId:r.panelId,defaultBrushType:t?t(r):null,clipPath:DM(i),isTargetByCursor:BM(i,e,r.coordSysModel),getLinearBrushOtherExtent:LM(i)}}))},e.prototype.controlSeries=function(e,t,r){var i=this.findTargetInfo(e,r);return!0===i||i&&E(i.coordSyses,t.coordinateSystem)>=0},e.prototype.findTargetInfo=function(e,t){for(var r=this._targetInfoList,i=OB(t,e),n=0;n<r.length;n++){var a=r[n],s=e.panelId;if(s){if(a.panelId===s)return a}else for(var o=0;o<CB.length;o++)if(CB[o](i,a))return a}return!0},e}();function SB(e){return e[0]>e[1]&&e.reverse(),e}function OB(e,t){return vn(e,t,{includeMainTypes:wB})}var TB={grid:function(e,t){var r=e.xAxisModels,i=e.yAxisModels,n=e.gridModels,a=ce(),s={},o={};(r||i||n)&&(L(r,(function(e){var t=e.axis.grid.model;a.set(t.id,t),s[t.id]=!0})),L(i,(function(e){var t=e.axis.grid.model;a.set(t.id,t),o[t.id]=!0})),L(n,(function(e){a.set(e.id,e),s[e.id]=!0,o[e.id]=!0})),a.each((function(e){var n=e.coordinateSystem,a=[];L(n.getCartesians(),(function(e,t){(E(r,e.getAxis("x").model)>=0||E(i,e.getAxis("y").model)>=0)&&a.push(e)})),t.push({panelId:"grid--"+e.id,gridModel:e,coordSysModel:e,coordSys:a[0],coordSyses:a,getPanelRect:IB.grid,xAxisDeclared:s[e.id],yAxisDeclared:o[e.id]})})))},geo:function(e,t){L(e.geoModels,(function(e){var r=e.coordinateSystem;t.push({panelId:"geo--"+e.id,geoModel:e,coordSysModel:e,coordSys:r,coordSyses:[r],getPanelRect:IB.geo})}))}},CB=[function(e,t){var r=e.xAxisModel,i=e.yAxisModel,n=e.gridModel;return!n&&r&&(n=r.axis.grid.model),!n&&i&&(n=i.axis.grid.model),n&&n===t.gridModel},function(e,t){var r=e.geoModel;return r&&r===t.geoModel}],IB={grid:function(){return this.coordSys.master.getRect().clone()},geo:function(){var e=this.coordSys,t=e.getBoundingRect().clone();return t.applyTransform(Wc(e)),t}},MB={lineX:q(AB,0),lineY:q(AB,1),rect:function(e,t,r){var i=t[kB[e]]([r[0][0],r[1][0]]),n=t[kB[e]]([r[0][1],r[1][1]]),a=[SB([i[0],n[0]]),SB([i[1],n[1]])];return{values:a,xyMinMax:a}},polygon:function(e,t,r){var i=[[1/0,-1/0],[1/0,-1/0]];return{values:B(r,(function(r){var n=t[kB[e]](r);return i[0][0]=Math.min(i[0][0],n[0]),i[1][0]=Math.min(i[1][0],n[1]),i[0][1]=Math.max(i[0][1],n[0]),i[1][1]=Math.max(i[1][1],n[1]),n})),xyMinMax:i}}};function AB(e,t,r,i){var n=r.getAxis(["x","y"][e]),a=SB(B([0,1],(function(e){return t?n.coordToData(n.toLocalCoord(i[e])):n.toGlobalCoord(n.dataToCoord(i[e]))}))),s=[];return s[e]=a,s[1-e]=[NaN,NaN],{values:a,xyMinMax:s}}var EB={lineX:q(NB,0),lineY:q(NB,1),rect:function(e,t,r){return[[e[0][0]-r[0]*t[0][0],e[0][1]-r[0]*t[0][1]],[e[1][0]-r[1]*t[1][0],e[1][1]-r[1]*t[1][1]]]},polygon:function(e,t,r){return B(e,(function(e,i){return[e[0]-r[0]*t[i][0],e[1]-r[1]*t[i][1]]}))}};function NB(e,t,r,i){return[t[0]-i[e]*r[0],t[1]-i[e]*r[1]]}function PB(e){return e?[e[0][1]-e[0][0],e[1][1]-e[1][0]]:[NaN,NaN]}var DB,LB,BB=_B,RB=L,VB=en+"toolbox-dataZoom_",GB=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.render=function(e,t,r,i){this._brushController||(this._brushController=new PM(r.getZr()),this._brushController.on("brush",F(this._onBrush,this)).mount()),function(e,t,r,i,n){var a=r._isZoomActive;i&&"takeGlobalCursor"===i.type&&(a="dataZoomSelect"===i.key&&i.dataZoomSelectActive);r._isZoomActive=a,e.setIconStatus("zoom",a?"emphasis":"normal");var s=new BB(qB(e),t,{include:["grid"]}).makePanelOpts(n,(function(e){return e.xAxisDeclared&&!e.yAxisDeclared?"lineX":!e.xAxisDeclared&&e.yAxisDeclared?"lineY":"rect"}));r._brushController.setPanels(s).enableBrush(!(!a||!s.length)&&{brushType:"auto",brushStyle:e.getModel("brushStyle").getItemStyle()})}(e,t,this,i,r),function(e,t){e.setIconStatus("back",function(e){return yB(e).length}(t)>1?"emphasis":"normal")}(e,t)},t.prototype.onclick=function(e,t,r){FB[r].call(this)},t.prototype.remove=function(e,t){this._brushController&&this._brushController.unmount()},t.prototype.dispose=function(e,t){this._brushController&&this._brushController.dispose()},t.prototype._onBrush=function(e){var t=e.areas;if(e.isEnd&&t.length){var r={},i=this.ecModel;this._brushController.updateCovers([]),new BB(qB(this.model),i,{include:["grid"]}).matchOutputRanges(t,i,(function(e,t,r){if("cartesian2d"===r.type){var i=e.brushType;"rect"===i?(n("x",r,t[0]),n("y",r,t[1])):n({lineX:"x",lineY:"y"}[i],r,t)}})),function(e,t){var r=yB(e);mB(t,(function(t,i){for(var n=r.length-1;n>=0&&!r[n][i];n--);if(n<0){var a=e.queryComponents({mainType:"dataZoom",subType:"select",id:i})[0];if(a){var s=a.getPercentRange();r[0][i]={dataZoomId:i,start:s[0],end:s[1]}}}})),r.push(t)}(i,r),this._dispatchZoomAction(r)}function n(e,t,n){var a=t.getAxis(e),s=a.model,o=function(e,t,r){var i;return r.eachComponent({mainType:"dataZoom",subType:"select"},(function(r){r.getAxisModel(e,t.componentIndex)&&(i=r)})),i}(e,s,i),u=o.findRepresentativeAxisProxy(s).getMinMaxSpan();null==u.minValueSpan&&null==u.maxValueSpan||(n=AI(0,n.slice(),a.scale.getExtent(),0,u.minValueSpan,u.maxValueSpan)),o&&(r[o.id]={dataZoomId:o.id,startValue:n[0],endValue:n[1]})}},t.prototype._dispatchZoomAction=function(e){var t=[];RB(e,(function(e,r){t.push(O(e))})),t.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:t})},t.getDefaultOption=function(e){return{show:!0,filterMode:"filter",icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:e.getLocale(["toolbox","dataZoom","title"]),brushStyle:{borderWidth:0,color:"rgba(210,219,238,0.2)"}}},t}(KL),FB={zoom:function(){var e=!this._isZoomActive;this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:e})},back:function(){this._dispatchZoomAction(function(e){var t=yB(e),r=t[t.length-1];t.length>1&&t.pop();var i={};return mB(r,(function(e,r){for(var n=t.length-1;n>=0;n--)if(e=t[n][r]){i[r]=e;break}})),i}(this.ecModel))}};function qB(e){var t={xAxisIndex:e.get("xAxisIndex",!0),yAxisIndex:e.get("yAxisIndex",!0),xAxisId:e.get("xAxisId",!0),yAxisId:e.get("yAxisId",!0)};return null==t.xAxisIndex&&null==t.xAxisId&&(t.xAxisIndex="all"),null==t.yAxisIndex&&null==t.yAxisId&&(t.yAxisIndex="all"),t}DB="dataZoom",LB=function(e){var t=e.getComponent("toolbox",0);if(t){var r=t.getModel(["feature","dataZoom"]),i=[],n=vn(e,qB(r));return RB(n.xAxisModels,(function(e){return a(e,"xAxis","xAxisIndex")})),RB(n.yAxisModels,(function(e){return a(e,"yAxis","yAxisIndex")})),i}function a(e,t,n){var a=e.componentIndex,s={type:"select",$fromToolbox:!0,filterMode:r.get("filterMode",!0)||"filter",id:VB+t+a};s[n]=a,i.push(s)}},ie(null==cl.get(DB)&&LB),cl.set(DB,LB);var jB=GB;var zB=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return r.type=t.type,r}return a(t,e),t.type="tooltip",t.dependencies=["axisPointer"],t.defaultOption={zlevel:0,z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",renderMode:"auto",confine:null,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"#fff",shadowBlur:10,shadowColor:"rgba(0, 0, 0, .2)",shadowOffsetX:1,shadowOffsetY:2,borderRadius:4,borderWidth:1,padding:null,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#666",fontSize:14}},t}(qh);function HB(e){var t=e.get("confine");return null!=t?!!t:"richText"===e.get("renderMode")}function UB(e){if(d.domSupported)for(var t=document.documentElement.style,r=0,i=e.length;r<i;r++)if(e[r]in t)return e[r]}var WB=UB(["transform","webkitTransform","OTransform","MozTransform","msTransform"]);function KB(e,t){if(!e)return t;t=gh(t,!0);var r=e.indexOf(t);return(e=-1===r?t:"-"+e.slice(0,r)+"-"+t).toLowerCase()}function XB(e,t){var r=e.currentStyle||document.defaultView&&document.defaultView.getComputedStyle(e);return r?t?r[t]:r:null}var YB=KB(UB(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),"transition"),ZB=KB(WB,"transform"),QB="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+(d.transform3dSupported?"will-change:transform;":"");function $B(e,t,r,i){var n,a;if(!d.transformSupported)return n=t.toFixed(0),a=r.toFixed(0),i?"top:"+a+"px;left:"+n+"px;":[["top",a+"px"],["left",n+"px"]];var s=XB(e.parentElement);n=(t-parseInt(s.paddingLeft,10)).toFixed(0),a=(r-parseInt(s.paddingTop,10)).toFixed(0);var o=d.transform3dSupported,u="translate"+(o?"3d":"")+"("+n+"px,"+a+"px"+(o?",0":"")+")";return i?ZB+":"+u+";":[[WB,u]]}function JB(e,t,r){var i=[],n=e.get("transitionDuration"),a=e.get("backgroundColor"),s=e.get("shadowBlur"),o=e.get("shadowColor"),u=e.get("shadowOffsetX"),c=e.get("shadowOffsetY"),h=e.getModel("textStyle"),l=op(e,"html"),f=u+"px "+c+"px "+s+"px "+o;return i.push("box-shadow:"+f),t&&n&&i.push(function(e,t){var r="cubic-bezier(0.23,1,0.32,1)",i=" "+e/2+"s "+r,n="opacity"+i+",visibility"+i;return t||(i=" "+e+"s "+r,n+=d.transformSupported?","+WB+i:",left"+i+",top"+i),YB+":"+n}(n,r)),a&&(d.canvasSupported?i.push("background-color:"+a):(i.push("background-color:#"+Wt(a)),i.push("filter:alpha(opacity=70)"))),L(["width","color","radius"],(function(t){var r="border-"+t,n=gh(r),a=e.get(n);null!=a&&i.push(r+":"+a+("color"===t?"":"px"))})),i.push(function(e){var t=[],r=e.get("fontSize"),i=e.getTextColor();i&&t.push("color:"+i),t.push("font:"+e.getFont()),r&&t.push("line-height:"+Math.round(3*r/2)+"px");var n=e.get("textShadowColor"),a=e.get("textShadowBlur")||0,s=e.get("textShadowOffsetX")||0,o=e.get("textShadowOffsetY")||0;return n&&a&&t.push("text-shadow:"+s+"px "+o+"px "+a+"px "+n),L(["decoration","align"],(function(r){var i=e.get(r);i&&t.push("text-"+r+":"+i)})),t.join(";")}(h)),null!=l&&i.push("padding:"+yh(l).join("px ")+"px"),i.join(";")+";"}function eR(e,t,r,i,n){var a=t&&t.painter;if(r){var s=a&&a.getViewportRoot();s&&function(e,t,r,i,n){Fe(Ge,t,i,n,!0)&&Fe(e,r,Ge[0],Ge[1])}(e,s,document.body,i,n)}else{e[0]=i,e[1]=n;var o=a&&a.getViewportRootOffset();o&&(e[0]+=o.offsetLeft,e[1]+=o.offsetTop)}e[2]=e[0]/t.getWidth(),e[3]=e[1]/t.getHeight()}var tR=function(){function e(e,t,r){if(this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._firstShow=!0,this._longHide=!0,d.wxa)return null;var i=document.createElement("div");i.domBelongToZr=!0,this.el=i;var n=this._zr=t.getZr(),a=this._appendToBody=r&&r.appendToBody;eR(this._styleCoord,n,a,t.getWidth()/2,t.getHeight()/2),a?document.body.appendChild(i):e.prepend(i),this._container=e;var s=this;i.onmouseenter=function(){s._enterable&&(clearTimeout(s._hideTimeout),s._show=!0),s._inContent=!0},i.onmousemove=function(e){if(e=e||window.event,!s._enterable){var t=n.handler;Xe(n.painter.getViewportRoot(),e,!0),t.dispatch("mousemove",e)}},i.onmouseleave=function(){s._inContent=!1,s._enterable&&s._show&&s.hideLater(s._hideDelay)}}return e.prototype.update=function(e){var t=this._container,r=XB(t,"position"),i=t.style;"absolute"!==i.position&&"absolute"!==r&&(i.position="relative"),e.get("alwaysShowContent")&&this._moveIfResized(),this.el.className=e.get("className")||""},e.prototype.show=function(e,t){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var r=this.el,i=r.style,n=this._styleCoord;r.innerHTML?i.cssText=QB+JB(e,!this._firstShow,this._longHide)+$B(r,n[0],n[1],!0)+"border-color:"+Th(t)+";"+(e.get("extraCssText")||"")+";pointer-event:"+(this._enterable?"auto":"none"):i.display="none",this._show=!0,this._firstShow=!1,this._longHide=!1},e.prototype.setContent=function(e,t,r,i,n){if(null!=e){var a=this.el;if(H(n)&&"item"===r.get("trigger")&&!HB(r)&&(e+=function(e,t,r){if(!H(r)||"inside"===r)return"";t=Th(t);var i,n="left"===(i=r)?"right":"right"===i?"left":"top"===i?"bottom":"top",a=n+":-6px;",s=ZB+":";E(["left","right"],n)>-1?(a+="top:50%",s+="translateY(-50%) rotate("+("left"===n?-225:-45)+"deg)"):(a+="left:50%",s+="translateX(-50%) rotate("+("top"===n?225:45)+"deg)");var o=t+" solid 1px;";return'<div style="'+["position:absolute;width:10px;height:10px;",a+";"+s+";","border-bottom:"+o,"border-right:"+o,"background-color:"+e+";","box-shadow:8px 8px 16px -3px #000;"].join("")+'"></div>'}(r.get("backgroundColor"),i,n)),H(e))a.innerHTML=e;else if(e){a.innerHTML="",j(e)||(e=[e]);for(var s=0;s<e.length;s++)Z(e[s])&&e[s].parentNode!==a&&a.appendChild(e[s])}}},e.prototype.setEnterable=function(e){this._enterable=e},e.prototype.getSize=function(){var e=this.el;return[e.clientWidth,e.clientHeight]},e.prototype.moveTo=function(e,t){var r=this._styleCoord;if(eR(r,this._zr,this._appendToBody,e,t),null!=r[0]&&null!=r[1]){var i=this.el.style;L($B(this.el,r[0],r[1]),(function(e){i[e[0]]=e[1]}))}},e.prototype._moveIfResized=function(){var e=this._styleCoord[2],t=this._styleCoord[3];this.moveTo(e*this._zr.getWidth(),t*this._zr.getHeight())},e.prototype.hide=function(){var e=this,t=this.el.style;t.visibility="hidden",t.opacity="0",d.transform3dSupported&&(t.willChange=""),this._show=!1,this._longHideTimeout=setTimeout((function(){return e._longHide=!0}),500)},e.prototype.hideLater=function(e){!this._show||this._inContent&&this._enterable||(e?(this._hideDelay=e,this._show=!1,this._hideTimeout=setTimeout(F(this.hide,this),e)):this.hide())},e.prototype.isShow=function(){return this._show},e.prototype.dispose=function(){this.el.parentNode.removeChild(this.el)},e.prototype.getOuterSize=function(){var e=this.el.clientWidth,t=this.el.clientHeight,r=XB(this.el);return r&&(e+=parseInt(r.borderLeftWidth,10)+parseInt(r.borderRightWidth,10),t+=parseInt(r.borderTopWidth,10)+parseInt(r.borderBottomWidth,10)),{width:e,height:t}},e}();function rR(e){return Math.max(0,e)}function iR(e){var t=rR(e.shadowBlur||0),r=rR(e.shadowOffsetX||0),i=rR(e.shadowOffsetY||0);return{left:rR(t-r),right:rR(t+r),top:rR(t-i),bottom:rR(t+i)}}function nR(e,t,r,i){e[0]=r,e[1]=i,e[2]=e[0]/t.getWidth(),e[3]=e[1]/t.getHeight()}var aR=function(){function e(e){this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._zr=e.getZr(),nR(this._styleCoord,this._zr,e.getWidth()/2,e.getHeight()/2)}return e.prototype.update=function(e){e.get("alwaysShowContent")&&this._moveIfResized()},e.prototype.show=function(){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.show(),this._show=!0},e.prototype.setContent=function(e,t,r,i,n){K(e)&&Mf(""),this.el&&this._zr.remove(this.el);var a=r.getModel("textStyle");this.el=new no({style:{rich:t.richTextStyles,text:e,lineHeight:22,backgroundColor:r.get("backgroundColor"),borderRadius:r.get("borderRadius"),borderWidth:1,borderColor:i,shadowColor:r.get("shadowColor"),shadowBlur:r.get("shadowBlur"),shadowOffsetX:r.get("shadowOffsetX"),shadowOffsetY:r.get("shadowOffsetY"),textShadowColor:a.get("textShadowColor"),textShadowBlur:a.get("textShadowBlur")||0,textShadowOffsetX:a.get("textShadowOffsetX")||0,textShadowOffsetY:a.get("textShadowOffsetY")||0,fill:r.get(["textStyle","color"]),padding:op(r,"richText"),verticalAlign:"top",align:"left"},z:r.get("z")}),this._zr.add(this.el);var s=this;this.el.on("mouseover",(function(){s._enterable&&(clearTimeout(s._hideTimeout),s._show=!0),s._inContent=!0})),this.el.on("mouseout",(function(){s._enterable&&s._show&&s.hideLater(s._hideDelay),s._inContent=!1}))},e.prototype.setEnterable=function(e){this._enterable=e},e.prototype.getSize=function(){var e=this.el,t=this.el.getBoundingRect(),r=iR(e.style);return[t.width+r.left+r.right,t.height+r.top+r.bottom]},e.prototype.moveTo=function(e,t){var r=this.el;if(r){var i=this._styleCoord;nR(i,this._zr,e,t),e=i[0],t=i[1];var n=r.style,a=rR(n.borderWidth||0),s=iR(n);r.x=e+a+s.left,r.y=t+a+s.top,r.markRedraw()}},e.prototype._moveIfResized=function(){var e=this._styleCoord[2],t=this._styleCoord[3];this.moveTo(e*this._zr.getWidth(),t*this._zr.getHeight())},e.prototype.hide=function(){this.el&&this.el.hide(),this._show=!1},e.prototype.hideLater=function(e){!this._show||this._inContent&&this._enterable||(e?(this._hideDelay=e,this._show=!1,this._hideTimeout=setTimeout(F(this.hide,this),e)):this.hide())},e.prototype.isShow=function(){return this._show},e.prototype.getOuterSize=function(){var e=this.getSize();return{width:e[0],height:e[1]}},e.prototype.dispose=function(){this._zr.remove(this.el)},e}(),sR=F,oR=L,uR=Di,cR=new Ks({shape:{x:-1,y:-1,width:2,height:2}});function dR(e,t,r){var i,n=t.ecModel;r?(i=new Md(r,n,n),i=new Md(t.option,i,n)):i=t;for(var a=e.length-1;a>=0;a--){var s=e[a];s&&(s instanceof Md&&(s=s.get("tooltip",!0)),H(s)&&(s={formatter:s}),s&&(i=new Md(s,i,n)))}return i}function hR(e,t){return e.dispatchAction||F(t.dispatchAction,t)}function lR(e){return"center"===e||"middle"===e}var fR=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return r.type=t.type,r}return a(t,e),t.prototype.init=function(e,t){if(!d.node){var r,i=e.getComponent("tooltip"),n=i.get("renderMode");this._renderMode="auto"===(r=n)?d.domSupported?"html":"richText":r||"html",this._tooltipContent="richText"===this._renderMode?new aR(t):new tR(t.getDom(),t,{appendToBody:i.get("appendToBody",!0)})}},t.prototype.render=function(e,t,r){if(!d.node){this.group.removeAll(),this._tooltipModel=e,this._ecModel=t,this._api=r,this._alwaysShowContent=e.get("alwaysShowContent");var i=this._tooltipContent;i.update(e),i.setEnterable(e.get("enterable")),this._initGlobalListener(),this._keepShow()}},t.prototype._initGlobalListener=function(){var e=this._tooltipModel.get("triggerOn");$P("itemTooltip",this._api,sR((function(t,r,i){"none"!==e&&(e.indexOf(t)>=0?this._tryShow(r,i):"leave"===t&&this._hide(i))}),this))},t.prototype._keepShow=function(){var e=this._tooltipModel,t=this._ecModel,r=this._api;if(null!=this._lastX&&null!=this._lastY&&"none"!==e.get("triggerOn")){var i=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout((function(){!r.isDisposed()&&i.manuallyShowTip(e,t,r,{x:i._lastX,y:i._lastY,dataByCoordSys:i._lastDataByCoordSys})}))}},t.prototype.manuallyShowTip=function(e,t,r,i){if(i.from!==this.uid&&!d.node){var n=hR(i,r);this._ticket="";var a=i.dataByCoordSys,s=function(e,t,r){var i=mn(e).queryOptionMap,n=i.keys()[0];if(!n||"series"===n)return;var a,s=bn(t,n,i.get(n),{useDefault:!1,enableAll:!1,enableNone:!1}).models[0];if(!s)return;if(r.getViewOfComponentModel(s).group.traverse((function(t){var r=ao(t).tooltipConfig;if(r&&r.name===e.name)return a=t,!0})),a)return{componentMainType:n,componentIndex:s.componentIndex,el:a}}(i,t,r);if(s){var o=s.el.getBoundingRect().clone();o.applyTransform(s.el.transform),this._tryShow({offsetX:o.x+o.width/2,offsetY:o.y+o.height/2,target:s.el,position:i.position,positionDefault:"bottom"},n)}else if(i.tooltip&&null!=i.x&&null!=i.y){var u=cR;u.x=i.x,u.y=i.y,u.update(),ao(u).tooltipConfig={name:null,option:i.tooltip},this._tryShow({offsetX:i.x,offsetY:i.y,target:u},n)}else if(a)this._tryShow({offsetX:i.x,offsetY:i.y,position:i.position,dataByCoordSys:a,tooltipOption:i.tooltipOption},n);else if(null!=i.seriesIndex){if(this._manuallyAxisShowTip(e,t,r,i))return;var c=iD(i,t),h=c.point[0],l=c.point[1];null!=h&&null!=l&&this._tryShow({offsetX:h,offsetY:l,target:c.el,position:i.position,positionDefault:"bottom"},n)}else null!=i.x&&null!=i.y&&(r.dispatchAction({type:"updateAxisPointer",x:i.x,y:i.y}),this._tryShow({offsetX:i.x,offsetY:i.y,position:i.position,target:r.getZr().findHover(i.x,i.y).target},n))}},t.prototype.manuallyHideTip=function(e,t,r,i){var n=this._tooltipContent;!this._alwaysShowContent&&this._tooltipModel&&n.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=this._lastDataByCoordSys=null,i.from!==this.uid&&this._hide(hR(i,r))},t.prototype._manuallyAxisShowTip=function(e,t,r,i){var n=i.seriesIndex,a=i.dataIndex,s=t.getComponent("axisPointer").coordSysAxesInfo;if(null!=n&&null!=a&&null!=s){var o=t.getSeriesByIndex(n);if(o)if("axis"===dR([o.getData().getItemModel(a),o,(o.coordinateSystem||{}).model],this._tooltipModel).get("trigger"))return r.dispatchAction({type:"updateAxisPointer",seriesIndex:n,dataIndex:a,position:i.position}),!0}},t.prototype._tryShow=function(e,t){var r=e.target;if(this._tooltipModel){this._lastX=e.offsetX,this._lastY=e.offsetY;var i=e.dataByCoordSys;if(i&&i.length)this._showAxisTooltip(i,e);else if(r){var n,a;this._lastDataByCoordSys=null,sm(r,(function(e){return null!=ao(e).dataIndex?(n=e,!0):null!=ao(e).tooltipConfig?(a=e,!0):void 0}),!0),n?this._showSeriesItemTooltip(e,n,t):a?this._showComponentItemTooltip(e,a,t):this._hide(t)}else this._lastDataByCoordSys=null,this._hide(t)}},t.prototype._showOrMove=function(e,t){var r=e.get("showDelay");t=F(t,this),clearTimeout(this._showTimout),r>0?this._showTimout=setTimeout(t,r):t()},t.prototype._showAxisTooltip=function(e,t){var r=this._ecModel,i=this._tooltipModel,n=[t.offsetX,t.offsetY],a=dR([t.tooltipOption],i),s=this._renderMode,o=[],u=Jf("section",{blocks:[],noHeader:!0}),c=[],d=new up;oR(e,(function(e){oR(e.dataByAxis,(function(e){var t=r.getComponent(e.axisDim+"Axis",e.axisIndex),i=e.value;if(t&&null!=i){var n=VP(i,t.axis,r,e.seriesDataIndices,e.valueLabelOpt),a=Jf("section",{header:n,noHeader:!ne(n),sortBlocks:!0,blocks:[]});u.blocks.push(a),L(e.seriesDataIndices,(function(u){var h=r.getSeriesByIndex(u.seriesIndex),l=u.dataIndexInside,f=h.getDataParams(l);f.axisDim=e.axisDim,f.axisIndex=e.axisIndex,f.axisType=e.axisType,f.axisId=e.axisId,f.axisValue=g_(t.axis,{value:i}),f.axisValueLabel=n,f.marker=d.makeTooltipMarker("item",Th(f.color),s);var p=Of(h.formatTooltip(l,!0,null));p.markupFragment&&a.blocks.push(p.markupFragment),p.markupText&&c.push(p.markupText),o.push(f)}))}}))})),u.blocks.reverse(),c.reverse();var h=t.position,l=a.get("order"),f=rp(u,d,s,l,r.get("useUTC"),a.get("textStyle"));f&&c.unshift(f);var p="richText"===s?"\n\n":"<br/>",v=c.join(p);this._showOrMove(a,(function(){this._updateContentNotChangedOnAxis(e)?this._updatePosition(a,h,n[0],n[1],this._tooltipContent,o):this._showTooltipContent(a,v,o,Math.random()+"",n[0],n[1],h,null,d)}))},t.prototype._showSeriesItemTooltip=function(e,t,r){var i=this._ecModel,n=ao(t),a=n.seriesIndex,s=i.getSeriesByIndex(a),o=n.dataModel||s,u=n.dataIndex,c=n.dataType,d=o.getData(c),h=this._renderMode,l=e.positionDefault,f=dR([d.getItemModel(u),o,s&&(s.coordinateSystem||{}).model],this._tooltipModel,l?{position:l}:null),p=f.get("trigger");if(null==p||"item"===p){var v=o.getDataParams(u,c),m=new up;v.marker=m.makeTooltipMarker("item",Th(v.color),h);var g=Of(o.formatTooltip(u,!1,c)),y=f.get("order"),b=g.markupFragment?rp(g.markupFragment,m,h,y,i.get("useUTC"),f.get("textStyle")):g.markupText,x="item_"+o.name+"_"+u;this._showOrMove(f,(function(){this._showTooltipContent(f,b,v,x,e.offsetX,e.offsetY,e.position,e.target,m)})),r({type:"showTip",dataIndexInside:u,dataIndex:d.getRawIndex(u),seriesIndex:a,from:this.uid})}},t.prototype._showComponentItemTooltip=function(e,t,r){var i=ao(t),n=i.tooltipConfig.option;if(H(n)){n={content:n,formatter:n}}var a=[n],s=this._ecModel.getComponent(i.componentMainType,i.componentIndex);s&&a.push(s);var o=e.positionDefault,u=dR(a,this._tooltipModel,o?{position:o}:null),c=u.get("content"),d=Math.random()+"",h=new up;this._showOrMove(u,(function(){var r=O(u.get("formatterParams")||{});this._showTooltipContent(u,c,r,d,e.offsetX,e.offsetY,e.position,t,h)})),r({type:"showTip",from:this.uid})},t.prototype._showTooltipContent=function(e,t,r,i,n,a,s,o,u){if(this._ticket="",e.get("showContent")&&e.get("show")){var c=this._tooltipContent,d=e.get("formatter");s=s||e.get("position");var h=t,l=this._getNearestPoint([n,a],r,e.get("trigger"),e.get("borderColor")).color;if(d&&H(d)){var f=e.ecModel.get("useUTC"),p=j(r)?r[0]:r;h=d,p&&p.axisType&&p.axisType.indexOf("time")>=0&&(h=Jd(p.axisValue,h,f)),h=Oh(h,r,!0)}else if(z(d)){var v=sR((function(t,i){t===this._ticket&&(c.setContent(i,u,e,l,s),this._updatePosition(e,s,n,a,c,r,o))}),this);this._ticket=i,h=d(r,i,v)}c.setContent(h,u,e,l,s),c.show(e,l),this._updatePosition(e,s,n,a,c,r,o)}},t.prototype._getNearestPoint=function(e,t,r,i){return"axis"===r||j(t)?{color:i||("html"===this._renderMode?"#fff":"none")}:j(t)?void 0:{color:i||t.color||t.borderColor}},t.prototype._updatePosition=function(e,t,r,i,n,a,s){var o=this._api.getWidth(),u=this._api.getHeight();t=t||e.get("position");var c=n.getSize(),d=e.get("align"),h=e.get("verticalAlign"),l=s&&s.getBoundingRect().clone();if(s&&l.applyTransform(s.transform),z(t)&&(t=t([r,i],a,n.el,l,{viewSize:[o,u],contentSize:c.slice()})),j(t))r=uR(t[0],o),i=uR(t[1],u);else if(K(t)){var f=t;f.width=c[0],f.height=c[1];var p=Ph(f,{width:o,height:u});r=p.x,i=p.y,d=null,h=null}else if(H(t)&&s){var v=function(e,t,r){var i=r[0],n=r[1],a=10,s=5,o=0,u=0,c=t.width,d=t.height;switch(e){case"inside":o=t.x+c/2-i/2,u=t.y+d/2-n/2;break;case"top":o=t.x+c/2-i/2,u=t.y-n-a;break;case"bottom":o=t.x+c/2-i/2,u=t.y+d+a;break;case"left":o=t.x-i-a-s,u=t.y+d/2-n/2;break;case"right":o=t.x+c+a+s,u=t.y+d/2-n/2}return[o,u]}(t,l,c);r=v[0],i=v[1]}else{v=function(e,t,r,i,n,a,s){var o=r.getOuterSize(),u=o.width,c=o.height;null!=a&&(e+u+a+2>i?e-=u+a:e+=a);null!=s&&(t+c+s>n?t-=c+s:t+=s);return[e,t]}(r,i,n,o,u,d?null:20,h?null:20);r=v[0],i=v[1]}if(d&&(r-=lR(d)?c[0]/2:"right"===d?c[0]:0),h&&(i-=lR(h)?c[1]/2:"bottom"===h?c[1]:0),HB(e)){v=function(e,t,r,i,n){var a=r.getOuterSize(),s=a.width,o=a.height;return e=Math.min(e+s,i)-s,t=Math.min(t+o,n)-o,e=Math.max(e,0),t=Math.max(t,0),[e,t]}(r,i,n,o,u);r=v[0],i=v[1]}n.moveTo(r,i)},t.prototype._updateContentNotChangedOnAxis=function(e){var t=this._lastDataByCoordSys,r=!!t&&t.length===e.length;return r&&oR(t,(function(t,i){var n=t.dataByAxis||[],a=(e[i]||{}).dataByAxis||[];(r=r&&n.length===a.length)&&oR(n,(function(e,t){var i=a[t]||{},n=e.seriesDataIndices||[],s=i.seriesDataIndices||[];(r=r&&e.value===i.value&&e.axisType===i.axisType&&e.axisId===i.axisId&&n.length===s.length)&&oR(n,(function(e,t){var i=s[t];r=r&&e.seriesIndex===i.seriesIndex&&e.dataIndex===i.dataIndex}))}))})),this._lastDataByCoordSys=e,!!r},t.prototype._hide=function(e){this._lastDataByCoordSys=null,e({type:"hideTip",from:this.uid})},t.prototype.dispose=function(e,t){d.node||(this._tooltipContent.dispose(),tD("itemTooltip",t))},t.type="tooltip",t}(wp);var pR=["rect","polygon","keep","clear"];function vR(e,t){var r=tn(e?e.brush:[]);if(r.length){var i=[];L(r,(function(e){var t=e.hasOwnProperty("toolbox")?e.toolbox:[];t instanceof Array&&(i=i.concat(t))}));var n=e&&e.toolbox;j(n)&&(n=n[0]),n||(n={feature:{}},e.toolbox=[n]);var a=n.feature||(n.feature={}),s=a.brush||(a.brush={}),o=s.type||(s.type=[]);o.push.apply(o,i),function(e){var t={};L(e,(function(e){t[e]=1})),e.length=0,L(t,(function(t,r){e.push(r)}))}(o),t&&!o.length&&o.push.apply(o,pR)}}var mR=L;function gR(e){if(e)for(var t in e)if(e.hasOwnProperty(t))return!0}function yR(e,t,r){var i={};return mR(t,(function(t){var n=i[t]=function(){var e=function(){};return e.prototype.__hidden=e.prototype,new e}();mR(e[t],(function(e,i){if(PT.isValidType(i)){var a={type:i,visual:e};r&&r(a,t),n[i]=new PT(a),"opacity"===i&&((a=O(a)).type="colorAlpha",n.__hidden.__alphaForOpacity=new PT(a))}}))})),i}function bR(e,t,r){var i;L(r,(function(e){t.hasOwnProperty(e)&&gR(t[e])&&(i=!0)})),i&&L(r,(function(r){t.hasOwnProperty(r)&&gR(t[r])?e[r]=O(t[r]):delete e[r]}))}var xR={lineX:kR(0),lineY:kR(1),rect:{point:function(e,t,r){return e&&r.boundingRect.contain(e[0],e[1])},rect:function(e,t,r){return e&&r.boundingRect.intersect(e)}},polygon:{point:function(e,t,r){return e&&r.boundingRect.contain(e[0],e[1])&&hg(r.range,e[0],e[1])},rect:function(e,t,r){var i=r.range;if(!e||i.length<=1)return!1;var n=e.x,a=e.y,s=e.width,o=e.height,u=i[0];return!!(hg(i,n,a)||hg(i,n+s,a)||hg(i,n,a+o)||hg(i,n+s,a+o)||_r.create(e).contain(u[0],u[1])||ed(n,a,n+s,a,i)||ed(n,a,n,a+o,i)||ed(n+s,a,n+s,a+o,i)||ed(n,a+o,n+s,a+o,i))||void 0}}};function kR(e){var t=["x","y"],r=["width","height"];return{point:function(t,r,i){if(t){var n=i.range;return wR(t[e],n)}},rect:function(i,n,a){if(i){var s=a.range,o=[i[t[e]],i[t[e]]+i[r[e]]];return o[1]<o[0]&&o.reverse(),wR(o[0],s)||wR(o[1],s)||wR(s[0],o)||wR(s[1],o)}}}}function wR(e,t){return t[0]<=e&&e<=t[1]}var _R=["inBrush","outOfBrush"],SR="__ecBrushSelect",OR="__ecInBrushSelectEvent";function TR(e){e.eachComponent({mainType:"brush"},(function(t){(t.brushTargetManager=new BB(t.option,e)).setInputRanges(t.areas,e)}))}function CR(e,t,r){var i,n,a=[];e.eachComponent({mainType:"brush"},(function(e){r&&"takeGlobalCursor"===r.type&&e.setBrushOption("brush"===r.key?r.brushOption:{brushType:!1})})),TR(e),e.eachComponent({mainType:"brush"},(function(t,r){var s={brushId:t.id,brushIndex:r,brushName:t.name,areas:O(t.areas),selected:[]};a.push(s);var o=t.option,u=o.brushLink,c=[],d=[],h=[],l=!1;r||(i=o.throttleType,n=o.throttleDelay);var f=B(t.areas,(function(e){var t=AR[e.brushType],r=M({boundingRect:t?t(e):void 0},e);return r.selectors=function(e){var t=e.brushType,r={point:function(i){return xR[t].point(i,r,e)},rect:function(i){return xR[t].rect(i,r,e)}};return r}(r),r})),p=yR(t.option,_R,(function(e){e.mappingMethod="fixed"}));function v(e){return"all"===u||!!c[e]}function m(e){return!!e.length}j(u)&&L(u,(function(e){c[e]=1})),e.eachSeries((function(r,i){var n=h[i]=[];"parallel"===r.subType?function(e,t){var r=e.coordinateSystem;l=l||r.hasAxisBrushed(),v(t)&&r.eachActiveState(e.getData(),(function(e,t){"active"===e&&(d[t]=1)}))}(r,i):function(r,i,n){if(!r.brushSelector||function(e,t){var r=e.option.seriesIndex;return null!=r&&"all"!==r&&(j(r)?E(r,t)<0:t!==r)}(t,i))return;if(L(f,(function(i){t.brushTargetManager.controlSeries(i,r,e)&&n.push(i),l=l||m(n)})),v(i)&&m(n)){var a=r.getData();a.each((function(e){MR(r,n,a,e)&&(d[e]=1)}))}}(r,i,n)})),e.eachSeries((function(e,t){var r={seriesId:e.id,seriesIndex:t,seriesName:e.name,dataIndex:[]};s.selected.push(r);var i=h[t],n=e.getData(),a=v(t)?function(e){return d[e]?(r.dataIndex.push(n.getRawIndex(e)),"inBrush"):"outOfBrush"}:function(t){return MR(e,i,n,t)?(r.dataIndex.push(n.getRawIndex(t)),"inBrush"):"outOfBrush"};(v(t)?l:m(i))&&function(e,t,r,i,n,a){var s,o={};function u(e){return xv(r,s,e)}function c(e,t){wv(r,s,e,t)}function d(e,d){s=null==a?e:d;var h=r.getRawDataItem(s);if(!h||!1!==h.visualMap)for(var l=i.call(n,e),f=t[l],p=o[l],v=0,m=p.length;v<m;v++){var g=p[v];f[g]&&f[g].applyVisual(e,u,c)}}L(e,(function(e){var r=PT.prepareVisualTypes(t[e]);o[e]=r})),null==a?r.each(d):r.each([a],d)}(_R,p,n,a)}))})),function(e,t,r,i,n){if(!n)return;var a=e.getZr();if(a[OR])return;a.__ecBrushSelect||(a.__ecBrushSelect=IR);Rp(a,SR,r,t)(e,i)}(t,i,n,a,r)}function IR(e,t){if(!e.isDisposed()){var r=e.getZr();r[OR]=!0,e.dispatchAction({type:"brushSelect",batch:t}),r[OR]=!1}}function MR(e,t,r,i){for(var n=0,a=t.length;n<a;n++){var s=t[n];if(e.brushSelector(i,r,s.selectors,s))return!0}}var AR={rect:function(e){return ER(e.range)},polygon:function(e){for(var t,r=e.range,i=0,n=r.length;i<n;i++){t=t||[[1/0,-1/0],[1/0,-1/0]];var a=r[i];a[0]<t[0][0]&&(t[0][0]=a[0]),a[0]>t[0][1]&&(t[0][1]=a[0]),a[1]<t[1][0]&&(t[1][0]=a[1]),a[1]>t[1][1]&&(t[1][1]=a[1])}return t&&ER(t)}};function ER(e){return new _r(e[0][0],e[1][0],e[0][1]-e[0][0],e[1][1]-e[1][0])}var NR=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return r.type=t.type,r}return a(t,e),t.prototype.init=function(e,t){this.ecModel=e,this.api=t,this.model,(this._brushController=new PM(t.getZr())).on("brush",F(this._onBrush,this)).mount()},t.prototype.render=function(e,t,r,i){this.model=e,this._updateController(e,t,r,i)},t.prototype.updateTransform=function(e,t,r,i){TR(t),this._updateController(e,t,r,i)},t.prototype.updateVisual=function(e,t,r,i){this.updateTransform(e,t,r,i)},t.prototype.updateView=function(e,t,r,i){this._updateController(e,t,r,i)},t.prototype._updateController=function(e,t,r,i){(!i||i.$from!==e.id)&&this._brushController.setPanels(e.brushTargetManager.makePanelOpts(r)).enableBrush(e.brushOption).updateCovers(e.areas.slice())},t.prototype.dispose=function(){this._brushController.dispose()},t.prototype._onBrush=function(e){var t=this.model.id,r=this.model.brushTargetManager.setOutputRanges(e.areas,this.ecModel);(!e.isEnd||e.removeOnClick)&&this.api.dispatchAction({type:"brush",brushId:t,areas:O(r),$from:t}),e.isEnd&&this.api.dispatchAction({type:"brushEnd",brushId:t,areas:O(r),$from:t})},t.type="brush",t}(wp);function PR(e,t){return T({brushType:e.brushType,brushMode:e.brushMode,transformable:e.transformable,brushStyle:new Md(e.brushStyle).getItemStyle(),removeOnClick:e.removeOnClick,z:e.z},t,!0)}var DR=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return r.type=t.type,r.areas=[],r.brushOption={},r}return a(t,e),t.prototype.optionUpdated=function(e,t){var r=this.option;!t&&bR(r,e,["inBrush","outOfBrush"]);var i=r.inBrush=r.inBrush||{};r.outOfBrush=r.outOfBrush||{color:"#ddd"},i.hasOwnProperty("liftZ")||(i.liftZ=5)},t.prototype.setAreas=function(e){e&&(this.areas=B(e,(function(e){return PR(this.option,e)}),this))},t.prototype.setBrushOption=function(e){this.brushOption=PR(this.option,e),this.brushType=this.brushOption.brushType},t.type="brush",t.dependencies=["geo","grid","xAxis","yAxis","parallel","series"],t.defaultOption={seriesIndex:"all",brushType:"rect",brushMode:"single",transformable:!0,brushStyle:{borderWidth:1,color:"rgba(210,219,238,0.3)",borderColor:"#D2DBEE"},throttleType:"fixRate",throttleDelay:0,removeOnClick:!0,z:1e4},t}(qh),LR=["rect","polygon","lineX","lineY","keep","clear"],BR=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.render=function(e,t,r){var i,n,a;t.eachComponent({mainType:"brush"},(function(e){i=e.brushType,n=e.brushOption.brushMode||"single",a=a||!!e.areas.length})),this._brushType=i,this._brushMode=n,L(e.get("type",!0),(function(t){e.setIconStatus(t,("keep"===t?"multiple"===n:"clear"===t?a:t===i)?"emphasis":"normal")}))},t.prototype.updateView=function(e,t,r){this.render(e,t,r)},t.prototype.getIcons=function(){var e=this.model,t=e.get("icon",!0),r={};return L(e.get("type",!0),(function(e){t[e]&&(r[e]=t[e])})),r},t.prototype.onclick=function(e,t,r){var i=this._brushType,n=this._brushMode;"clear"===r?(t.dispatchAction({type:"axisAreaSelect",intervals:[]}),t.dispatchAction({type:"brush",command:"clear",areas:[]})):t.dispatchAction({type:"takeGlobalCursor",key:"brush",brushOption:{brushType:"keep"===r?i:i!==r&&r,brushMode:"keep"===r?"multiple"===n?"single":"multiple":n}})},t.getDefaultOption=function(e){return{show:!0,type:LR.slice(),icon:{rect:"M7.3,34.7 M0.4,10V-0.2h9.8 M89.6,10V-0.2h-9.8 M0.4,60v10.2h9.8 M89.6,60v10.2h-9.8 M12.3,22.4V10.5h13.1 M33.6,10.5h7.8 M49.1,10.5h7.8 M77.5,22.4V10.5h-13 M12.3,31.1v8.2 M77.7,31.1v8.2 M12.3,47.6v11.9h13.1 M33.6,59.5h7.6 M49.1,59.5 h7.7 M77.5,47.6v11.9h-13",polygon:"M55.2,34.9c1.7,0,3.1,1.4,3.1,3.1s-1.4,3.1-3.1,3.1 s-3.1-1.4-3.1-3.1S53.5,34.9,55.2,34.9z M50.4,51c1.7,0,3.1,1.4,3.1,3.1c0,1.7-1.4,3.1-3.1,3.1c-1.7,0-3.1-1.4-3.1-3.1 C47.3,52.4,48.7,51,50.4,51z M55.6,37.1l1.5-7.8 M60.1,13.5l1.6-8.7l-7.8,4 M59,19l-1,5.3 M24,16.1l6.4,4.9l6.4-3.3 M48.5,11.6 l-5.9,3.1 M19.1,12.8L9.7,5.1l1.1,7.7 M13.4,29.8l1,7.3l6.6,1.6 M11.6,18.4l1,6.1 M32.8,41.9 M26.6,40.4 M27.3,40.2l6.1,1.6 M49.9,52.1l-5.6-7.6l-4.9-1.2",lineX:"M15.2,30 M19.7,15.6V1.9H29 M34.8,1.9H40.4 M55.3,15.6V1.9H45.9 M19.7,44.4V58.1H29 M34.8,58.1H40.4 M55.3,44.4 V58.1H45.9 M12.5,20.3l-9.4,9.6l9.6,9.8 M3.1,29.9h16.5 M62.5,20.3l9.4,9.6L62.3,39.7 M71.9,29.9H55.4",lineY:"M38.8,7.7 M52.7,12h13.2v9 M65.9,26.6V32 M52.7,46.3h13.2v-9 M24.9,12H11.8v9 M11.8,26.6V32 M24.9,46.3H11.8v-9 M48.2,5.1l-9.3-9l-9.4,9.2 M38.9-3.9V12 M48.2,53.3l-9.3,9l-9.4-9.2 M38.9,62.3V46.4",keep:"M4,10.5V1h10.3 M20.7,1h6.1 M33,1h6.1 M55.4,10.5V1H45.2 M4,17.3v6.6 M55.6,17.3v6.6 M4,30.5V40h10.3 M20.7,40 h6.1 M33,40h6.1 M55.4,30.5V40H45.2 M21,18.9h62.9v48.6H21V18.9z",clear:"M22,14.7l30.9,31 M52.9,14.7L22,45.7 M4.7,16.8V4.2h13.1 M26,4.2h7.8 M41.6,4.2h7.8 M70.3,16.8V4.2H57.2 M4.7,25.9v8.6 M70.3,25.9v8.6 M4.7,43.2v12.6h13.1 M26,55.8h7.8 M41.6,55.8h7.8 M70.3,43.2v12.6H57.2"},title:e.getLocale(["toolbox","brush","title"])}},t}(KL);var RR=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return r.type=t.type,r.layoutMode={type:"box",ignoreSize:!0},r}return a(t,e),t.type="title",t.defaultOption={zlevel:0,z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bold",color:"#464646"},subtextStyle:{fontSize:12,color:"#6E7079"}},t}(qh),VR=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return r.type=t.type,r}return a(t,e),t.prototype.render=function(e,t,r){if(this.group.removeAll(),e.get("show")){var i=this.group,n=e.getModel("textStyle"),a=e.getModel("subtextStyle"),s=e.get("textAlign"),o=J(e.get("textBaseline"),e.get("textVerticalAlign")),u=new no({style:cd(n,{text:e.get("text"),fill:n.getTextColor()},{disableBox:!0}),z2:10}),c=u.getBoundingRect(),d=e.get("subtext"),h=new no({style:cd(a,{text:d,fill:a.getTextColor(),y:c.height+e.get("itemGap"),verticalAlign:"top"},{disableBox:!0}),z2:10}),l=e.get("link"),f=e.get("sublink"),p=e.get("triggerEvent",!0);u.silent=!l&&!p,h.silent=!f&&!p,l&&u.on("click",(function(){Ch(l,"_"+e.get("target"))})),f&&h.on("click",(function(){Ch(f,"_"+e.get("subtarget"))})),ao(u).eventData=ao(h).eventData=p?{componentType:"title",componentIndex:e.componentIndex}:null,i.add(u),d&&i.add(h);var v=i.getBoundingRect(),m=e.getBoxLayoutParams();m.width=v.width,m.height=v.height;var g=Ph(m,{width:r.getWidth(),height:r.getHeight()},e.get("padding"));s||("middle"===(s=e.get("left")||e.get("right"))&&(s="center"),"right"===s?g.x+=g.width:"center"===s&&(g.x+=g.width/2)),o||("center"===(o=e.get("top")||e.get("bottom"))&&(o="middle"),"bottom"===o?g.y+=g.height:"middle"===o&&(g.y+=g.height/2),o=o||"top"),i.x=g.x,i.y=g.y,i.markRedraw();var y={align:s,verticalAlign:o};u.setStyle(y),h.setStyle(y),v=i.getBoundingRect();var b=g.margin,x=e.getItemStyle(["color","opacity"]);x.fill=e.get("backgroundColor");var k=new Ks({shape:{x:v.x-b[3],y:v.y-b[0],width:v.width+b[1]+b[3],height:v.height+b[0]+b[2],r:e.get("borderRadius")},style:x,subPixelOptimize:!0,silent:!0});i.add(k)}},t.type="title",t}(wp);var GR=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return r.type=t.type,r.layoutMode="box",r}return a(t,e),t.prototype.init=function(e,t,r){this.mergeDefaultAndTheme(e,r),this._initData()},t.prototype.mergeOption=function(t){e.prototype.mergeOption.apply(this,arguments),this._initData()},t.prototype.setCurrentIndex=function(e){null==e&&(e=this.option.currentIndex);var t=this._data.count();this.option.loop?e=(e%t+t)%t:(e>=t&&(e=t-1),e<0&&(e=0)),this.option.currentIndex=e},t.prototype.getCurrentIndex=function(){return this.option.currentIndex},t.prototype.isIndexMax=function(){return this.getCurrentIndex()>=this._data.count()-1},t.prototype.setPlayState=function(e){this.option.autoPlay=!!e},t.prototype.getPlayState=function(){return!!this.option.autoPlay},t.prototype._initData=function(){var e,t=this.option,r=t.data||[],i=t.axisType,n=this._names=[];"category"===i?(e=[],L(r,(function(t,r){var i,a=cn(an(t),"");K(t)?(i=O(t)).value=r:i=r,e.push(i),n.push(a)}))):e=r;var a={category:"ordinal",time:"time",value:"number"}[i]||"number";(this._data=new kx([{name:"value",type:a}],this)).initData(e,n)},t.prototype.getData=function(){return this._data},t.prototype.getCategories=function(){if("category"===this.get("axisType"))return this._names.slice()},t.type="timeline",t.defaultOption={zlevel:0,z:4,show:!0,axisType:"time",realtime:!0,left:"20%",top:null,right:"20%",bottom:0,width:null,height:40,padding:5,controlPosition:"left",autoPlay:!1,rewind:!1,loop:!0,playInterval:2e3,currentIndex:0,itemStyle:{},label:{color:"#000"},data:[]},t}(qh),FR=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return r.type=t.type,r}return a(t,e),t.type="timeline.slider",t.defaultOption=Nd(GR.defaultOption,{backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,orient:"horizontal",inverse:!1,tooltip:{trigger:"item"},symbol:"circle",symbolSize:12,lineStyle:{show:!0,width:2,color:"#DAE1F5"},label:{position:"auto",show:!0,interval:"auto",rotate:0,color:"#A4B1D7"},itemStyle:{color:"#A4B1D7",borderWidth:1},checkpointStyle:{symbol:"circle",symbolSize:15,color:"#316bf3",borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0, 0, 0, 0.3)",animation:!0,animationDuration:300,animationEasing:"quinticInOut"},controlStyle:{show:!0,showPlayBtn:!0,showPrevBtn:!0,showNextBtn:!0,itemSize:24,itemGap:12,position:"left",playIcon:"path://M31.6,53C17.5,53,6,41.5,6,27.4S17.5,1.8,31.6,1.8C45.7,1.8,57.2,13.3,57.2,27.4S45.7,53,31.6,53z M31.6,3.3 C18.4,3.3,7.5,14.1,7.5,27.4c0,13.3,10.8,24.1,24.1,24.1C44.9,51.5,55.7,40.7,55.7,27.4C55.7,14.1,44.9,3.3,31.6,3.3z M24.9,21.3 c0-2.2,1.6-3.1,3.5-2l10.5,6.1c1.899,1.1,1.899,2.9,0,4l-10.5,6.1c-1.9,1.1-3.5,0.2-3.5-2V21.3z",stopIcon:"path://M30.9,53.2C16.8,53.2,5.3,41.7,5.3,27.6S16.8,2,30.9,2C45,2,56.4,13.5,56.4,27.6S45,53.2,30.9,53.2z M30.9,3.5C17.6,3.5,6.8,14.4,6.8,27.6c0,13.3,10.8,24.1,24.101,24.1C44.2,51.7,55,40.9,55,27.6C54.9,14.4,44.1,3.5,30.9,3.5z M36.9,35.8c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H36c0.5,0,0.9,0.4,0.9,1V35.8z M27.8,35.8 c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H27c0.5,0,0.9,0.4,0.9,1L27.8,35.8L27.8,35.8z",nextIcon:"M2,18.5A1.52,1.52,0,0,1,.92,18a1.49,1.49,0,0,1,0-2.12L7.81,9.36,1,3.11A1.5,1.5,0,1,1,3,.89l8,7.34a1.48,1.48,0,0,1,.49,1.09,1.51,1.51,0,0,1-.46,1.1L3,18.08A1.5,1.5,0,0,1,2,18.5Z",prevIcon:"M10,.5A1.52,1.52,0,0,1,11.08,1a1.49,1.49,0,0,1,0,2.12L4.19,9.64,11,15.89a1.5,1.5,0,1,1-2,2.22L1,10.77A1.48,1.48,0,0,1,.5,9.68,1.51,1.51,0,0,1,1,8.58L9,.92A1.5,1.5,0,0,1,10,.5Z",prevBtnSize:18,nextBtnSize:18,color:"#A4B1D7",borderColor:"#A4B1D7",borderWidth:1},emphasis:{label:{show:!0,color:"#6f778d"},itemStyle:{color:"#316BF3"},controlStyle:{color:"#316BF3",borderColor:"#316BF3",borderWidth:2}},progress:{lineStyle:{color:"#316BF3"},itemStyle:{color:"#316BF3"},label:{color:"#6f778d"}},data:[]}),t}(GR);P(FR,Sf.prototype);var qR=FR,jR=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return r.type=t.type,r}return a(t,e),t.type="timeline",t}(wp),zR=function(e){function t(t,r,i,n){var a=e.call(this,t,r,i)||this;return a.type=n||"value",a}return a(t,e),t.prototype.getLabelModel=function(){return this.model.getModel("label")},t.prototype.isHorizontal=function(){return"horizontal"===this.model.get("orient")},t}(R_),HR=Math.PI,UR=fn();function WR(e,t,r,i,n,a){var s=t.get("color");n?(n.setColor(s),r.add(n),a&&a.onUpdate(n)):((n=gm(e.get("symbol"),-1,-1,2,2,s)).setStyle("strokeNoScale",!0),r.add(n),a&&a.onCreate(n));var o=t.getItemStyle(["color"]);n.setStyle(o),i=T({rectHover:!0,z2:100},i,!0);var u=e.get("symbolSize");u=u instanceof Array?u.slice():[+u,+u],i.scaleX=u[0]/2,i.scaleY=u[1]/2;var c=e.get("symbolOffset");c&&(i.x=i.x||0,i.y=i.y||0,i.x+=Di(c[0],u[0]),i.y+=Di(c[1],u[1]));var d=e.get("symbolRotate");return i.rotation=(d||0)*Math.PI/180||0,n.attr(i),n.updateTransform(),n}function KR(e,t,r,i,n,a){if(!e.dragging){var s=n.getModel("checkpointStyle"),o=i.dataToCoord(n.getData().get("value",r));if(a||!s.get("animation",!0))e.attr({x:o,y:0}),t&&t.attr({shape:{x2:o}});else{var u={duration:s.get("animationDuration",!0),easing:s.get("animationEasing",!0)};e.stopAnimation(null,!0),e.animateTo({x:o,y:0},u),t&&t.animateTo({shape:{x2:o}},u)}}}var XR=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return r.type=t.type,r}return a(t,e),t.prototype.init=function(e,t){this.api=t},t.prototype.render=function(e,t,r){if(this.model=e,this.api=r,this.ecModel=t,this.group.removeAll(),e.get("show",!0)){var i=this._layout(e,r),n=this._createGroup("_mainGroup"),a=this._createGroup("_labelGroup"),s=this._axis=this._createAxis(i,e);e.formatTooltip=function(e){return Jf("nameValue",{noName:!0,value:s.scale.getLabel({value:e})})},L(["AxisLine","AxisTick","Control","CurrentPointer"],(function(t){this["_render"+t](i,n,s,e)}),this),this._renderAxisLabel(i,a,s,e),this._position(i,e)}this._doPlayStop(),this._updateTicksStatus()},t.prototype.remove=function(){this._clearTimer(),this.group.removeAll()},t.prototype.dispose=function(){this._clearTimer()},t.prototype._layout=function(e,t){var r,i,n,a,s=e.get(["label","position"]),o=e.get("orient"),u=function(e,t){return Ph(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()},e.get("padding"))}(e,t),c={horizontal:"center",vertical:(r=null==s||"auto"===s?"horizontal"===o?u.y+u.height/2<t.getHeight()/2?"-":"+":u.x+u.width/2<t.getWidth()/2?"+":"-":H(s)?{horizontal:{top:"-",bottom:"+"},vertical:{left:"-",right:"+"}}[o][s]:s)>=0||"+"===r?"left":"right"},d={horizontal:r>=0||"+"===r?"top":"bottom",vertical:"middle"},h={horizontal:0,vertical:HR/2},l="vertical"===o?u.height:u.width,f=e.getModel("controlStyle"),p=f.get("show",!0),v=p?f.get("itemSize"):0,m=p?f.get("itemGap"):0,g=v+m,y=e.get(["label","rotate"])||0;y=y*HR/180;var b=f.get("position",!0),x=p&&f.get("showPlayBtn",!0),k=p&&f.get("showPrevBtn",!0),w=p&&f.get("showNextBtn",!0),_=0,S=l;"left"===b||"bottom"===b?(x&&(i=[0,0],_+=g),k&&(n=[_,0],_+=g),w&&(a=[S-v,0],S-=g)):(x&&(i=[S-v,0],S-=g),k&&(n=[0,0],_+=g),w&&(a=[S-v,0],S-=g));var O=[_,S];return e.get("inverse")&&O.reverse(),{viewRect:u,mainLength:l,orient:o,rotation:h[o],labelRotation:y,labelPosOpt:r,labelAlign:e.get(["label","align"])||c[o],labelBaseline:e.get(["label","verticalAlign"])||e.get(["label","baseline"])||d[o],playPosition:i,prevBtnPosition:n,nextBtnPosition:a,axisExtent:O,controlSize:v,controlGap:m}},t.prototype._position=function(e,t){var r=this._mainGroup,i=this._labelGroup,n=e.viewRect;if("vertical"===e.orient){var a=[1,0,0,1,0,0],s=n.x,o=n.y+n.height;ft(a,a,[-s,-o]),pt(a,a,-HR/2),ft(a,a,[s,o]),(n=n.clone()).applyTransform(a)}var u=m(n),c=m(r.getBoundingRect()),d=m(i.getBoundingRect()),h=[r.x,r.y],l=[i.x,i.y];l[0]=h[0]=u[0][0];var f,p=e.labelPosOpt;null==p||H(p)?(g(h,c,u,1,f="+"===p?0:1),g(l,d,u,1,1-f)):(g(h,c,u,1,f=p>=0?0:1),l[1]=h[1]+p);function v(e){e.originX=u[0][0]-e.x,e.originY=u[1][0]-e.y}function m(e){return[[e.x,e.x+e.width],[e.y,e.y+e.height]]}function g(e,t,r,i,n){e[i]+=r[i][n]-t[i][n]}r.setPosition(h),i.setPosition(l),r.rotation=i.rotation=e.rotation,v(r),v(i)},t.prototype._createAxis=function(e,t){var r=t.getData(),i=t.get("axisType"),n=function(e,t){if(t=t||e.get("type"))switch(t){case"category":return new Rw({ordinalMeta:e.getCategories(),extent:[1/0,-1/0]});case"time":return new Yw({locale:e.ecModel.getLocaleModel(),useUTC:e.ecModel.get("useUTC")});default:return new Fw}}(t,i);n.getTicks=function(){return r.mapArray(["value"],(function(e){return{value:e}}))};var a=r.getDataExtent("value");n.setExtent(a[0],a[1]),n.niceTicks();var s=new zR("value",n,e.axisExtent,i);return s.model=t,s},t.prototype._createGroup=function(e){var t=this[e]=new Ti;return this.group.add(t),t},t.prototype._renderAxisLine=function(e,t,r,i){var n=r.getExtent();if(i.get(["lineStyle","show"])){var a=new ic({shape:{x1:n[0],y1:0,x2:n[1],y2:0},style:I({lineCap:"round"},i.getModel("lineStyle").getLineStyle()),silent:!0,z2:1});t.add(a);var s=this._progressLine=new ic({shape:{x1:n[0],x2:this._currentPointer?this._currentPointer.x:n[0],y1:0,y2:0},style:M({lineCap:"round",lineWidth:a.style.lineWidth},i.getModel(["progress","lineStyle"]).getLineStyle()),silent:!0,z2:1});t.add(s)}},t.prototype._renderAxisTick=function(e,t,r,i){var n=this,a=i.getData(),s=r.scale.getTicks();this._tickSymbols=[],L(s,(function(e){var s=r.dataToCoord(e.value),o=a.getItemModel(e.value),u=o.getModel("itemStyle"),c=o.getModel(["emphasis","itemStyle"]),d=o.getModel(["progress","itemStyle"]),h={x:s,y:0,onclick:F(n._changeTimeline,n,e.value)},l=WR(o,u,t,h);l.ensureState("emphasis").style=c.getItemStyle(),l.ensureState("progress").style=d.getItemStyle(),Xo(l);var f=ao(l);o.get("tooltip")?(f.dataIndex=e.value,f.dataModel=i):f.dataIndex=f.dataModel=null,n._tickSymbols.push(l)}))},t.prototype._renderAxisLabel=function(e,t,r,i){var n=this;if(r.getLabelModel().get("show")){var a=i.getData(),s=r.getViewLabels();this._tickLabels=[],L(s,(function(i){var s=i.tickValue,o=a.getItemModel(s),u=o.getModel("label"),c=o.getModel(["emphasis","label"]),d=o.getModel(["progress","label"]),h=r.dataToCoord(i.tickValue),l=new no({x:h,y:0,rotation:e.labelRotation-e.rotation,onclick:F(n._changeTimeline,n,s),silent:!1,style:cd(u,{text:i.formattedLabel,align:e.labelAlign,verticalAlign:e.labelBaseline})});l.ensureState("emphasis").style=cd(c),l.ensureState("progress").style=cd(d),t.add(l),Xo(l),UR(l).dataIndex=s,n._tickLabels.push(l)}))}},t.prototype._renderControl=function(e,t,r,i){var n=e.controlSize,a=e.rotation,s=i.getModel("controlStyle").getItemStyle(),o=i.getModel(["emphasis","controlStyle"]).getItemStyle(),u=i.getPlayState(),c=i.get("inverse",!0);function d(e,r,u,c){if(e){var d=Pr(J(i.get(["controlStyle",r+"BtnSize"]),n),n),h=function(e,t,r,i){var n=i.style,a=Jc(e.get(["controlStyle",t]),i||{},new _r(r[0],r[1],r[2],r[3]));n&&a.setStyle(n);return a}(i,r+"Icon",[0,-d/2,d,d],{x:e[0],y:e[1],originX:n/2,originY:0,rotation:c?-a:0,rectHover:!0,style:s,onclick:u});h.ensureState("emphasis").style=o,t.add(h),Xo(h)}}d(e.nextBtnPosition,"next",F(this._changeTimeline,this,c?"-":"+")),d(e.prevBtnPosition,"prev",F(this._changeTimeline,this,c?"+":"-")),d(e.playPosition,u?"stop":"play",F(this._handlePlayClick,this,!u),!0)},t.prototype._renderCurrentPointer=function(e,t,r,i){var n=i.getData(),a=i.getCurrentIndex(),s=n.getItemModel(a).getModel("checkpointStyle"),o=this,u={onCreate:function(e){e.draggable=!0,e.drift=F(o._handlePointerDrag,o),e.ondragend=F(o._handlePointerDragend,o),KR(e,o._progressLine,a,r,i,!0)},onUpdate:function(e){KR(e,o._progressLine,a,r,i)}};this._currentPointer=WR(s,s,this._mainGroup,{},this._currentPointer,u)},t.prototype._handlePlayClick=function(e){this._clearTimer(),this.api.dispatchAction({type:"timelinePlayChange",playState:e,from:this.uid})},t.prototype._handlePointerDrag=function(e,t,r){this._clearTimer(),this._pointerChangeTimeline([r.offsetX,r.offsetY])},t.prototype._handlePointerDragend=function(e){this._pointerChangeTimeline([e.offsetX,e.offsetY],!0)},t.prototype._pointerChangeTimeline=function(e,t){var r=this._toAxisCoord(e)[0],i=Bi(this._axis.getExtent().slice());r>i[1]&&(r=i[1]),r<i[0]&&(r=i[0]),this._currentPointer.x=r,this._currentPointer.markRedraw(),this._progressLine.shape.x2=r,this._progressLine.dirty();var n=this._findNearestTick(r),a=this.model;(t||n!==a.getCurrentIndex()&&a.get("realtime"))&&this._changeTimeline(n)},t.prototype._doPlayStop=function(){var e=this;this._clearTimer(),this.model.getPlayState()&&(this._timer=setTimeout((function(){var t=e.model;e._changeTimeline(t.getCurrentIndex()+(t.get("rewind",!0)?-1:1))}),this.model.get("playInterval")))},t.prototype._toAxisCoord=function(e){return Kc(e,this._mainGroup.getLocalTransform(),!0)},t.prototype._findNearestTick=function(e){var t,r=this.model.getData(),i=1/0,n=this._axis;return r.each(["value"],(function(r,a){var s=n.dataToCoord(r),o=Math.abs(s-e);o<i&&(i=o,t=a)})),t},t.prototype._clearTimer=function(){this._timer&&(clearTimeout(this._timer),this._timer=null)},t.prototype._changeTimeline=function(e){var t=this.model.getCurrentIndex();"+"===e?e=t+1:"-"===e&&(e=t-1),this.api.dispatchAction({type:"timelineChange",currentIndex:e,from:this.uid})},t.prototype._updateTicksStatus=function(){var e=this.model.getCurrentIndex(),t=this._tickSymbols,r=this._tickLabels;if(t)for(var i=0;i<t.length;i++)t&&t[i]&&t[i].toggleState("progress",i<e);if(r)for(i=0;i<r.length;i++)r&&r[i]&&r[i].toggleState("progress",UR(r[i]).dataIndex<=e)},t.type="timeline.slider",t}(jR);function YR(e){var t=e&&e.timeline;j(t)||(t=t?[t]:[]),L(t,(function(e){e&&function(e){var t=e.type,r={number:"value",time:"time"};r[t]&&(e.axisType=r[t],delete e.type);if(ZR(e),QR(e,"controlPosition")){var i=e.controlStyle||(e.controlStyle={});QR(i,"position")||(i.position=e.controlPosition),"none"!==i.position||QR(i,"show")||(i.show=!1,delete i.position),delete e.controlPosition}L(e.data||[],(function(e){K(e)&&!j(e)&&(!QR(e,"value")&&QR(e,"name")&&(e.value=e.name),ZR(e))}))}(e)}))}function ZR(e){var t=e.itemStyle||(e.itemStyle={}),r=t.emphasis||(t.emphasis={}),i=e.label||e.label||{},n=i.normal||(i.normal={}),a={normal:1,emphasis:1};L(i,(function(e,t){a[t]||QR(n,t)||(n[t]=e)})),r.label&&!QR(i,"emphasis")&&(i.emphasis=r.label,delete r.label)}function QR(e,t){return e.hasOwnProperty(t)}function $R(e,t){if(!e)return!1;for(var r=j(e)?e:[e],i=0;i<r.length;i++)if(r[i]&&r[i][t])return!0;return!1}function JR(e){rn(e,"label",["show"])}var eV=fn(),tV=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return r.type=t.type,r.createdBySelf=!1,r}return a(t,e),t.prototype.init=function(e,t,r){this.mergeDefaultAndTheme(e,r),this._mergeOption(e,r,!1,!0)},t.prototype.isAnimationEnabled=function(){if(d.node)return!1;var e=this.__hostSeries;return this.getShallow("animation")&&e&&e.isAnimationEnabled()},t.prototype.mergeOption=function(e,t){this._mergeOption(e,t,!1,!1)},t.prototype._mergeOption=function(e,t,r,i){var n=this.mainType;r||t.eachSeries((function(e){var r=e.get(this.mainType,!0),a=eV(e)[n];r&&r.data?(a?a._mergeOption(r,t,!0):(i&&JR(r),L(r.data,(function(e){e instanceof Array?(JR(e[0]),JR(e[1])):JR(e)})),I(a=this.createMarkerModelFromSeries(r,this,t),{mainType:this.mainType,seriesIndex:e.seriesIndex,name:e.name,createdBySelf:!0}),a.__hostSeries=e),eV(e)[n]=a):eV(e)[n]=null}),this)},t.prototype.formatTooltip=function(e,t,r){var i=this.getData(),n=this.getRawValue(e),a=i.getName(e);return Jf("section",{header:this.name,blocks:[Jf("nameValue",{name:a,value:n,noName:!a,noValue:null==n})]})},t.prototype.getData=function(){return this._data},t.prototype.setData=function(e){this._data=e},t.getMarkerModelFromSeries=function(e,t){return eV(e)[t]},t.type="marker",t.dependencies=["series","grid","polar","geo"],t}(qh);P(tV,Sf.prototype);var rV=tV,iV=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return r.type=t.type,r}return a(t,e),t.prototype.createMarkerModelFromSeries=function(e,r,i){return new t(e,r,i)},t.type="markPoint",t.defaultOption={zlevel:0,z:5,symbol:"pin",symbolSize:50,tooltip:{trigger:"item"},label:{show:!0,position:"inside"},itemStyle:{borderWidth:2},emphasis:{label:{show:!0}}},t}(rV);function nV(e,t,r,i,n,a){var s=[],o=Mx(t,i)?t.getCalculationInfo("stackResultDimension"):i,u=dV(t,o,e),c=t.indicesOfNearest(o,u)[0];s[n]=t.get(r,c),s[a]=t.get(o,c);var d=t.get(i,c),h=function(e){if(e=+e,isNaN(e))return 0;for(var t=1,r=0;Math.round(e*t)/t!==e;)t*=10,r++;return r}(t.get(i,c));return(h=Math.min(h,20))>=0&&(s[a]=+s[a].toFixed(h)),[s,d]}var aV={min:q(nV,"min"),max:q(nV,"max"),average:q(nV,"average"),median:q(nV,"median")};function sV(e,t){var r=e.getData(),i=e.coordinateSystem;if(t&&!function(e){return!isNaN(parseFloat(e.x))&&!isNaN(parseFloat(e.y))}(t)&&!j(t.coord)&&i){var n=i.dimensions,a=oV(t,r,i,e);if((t=O(t)).type&&aV[t.type]&&a.baseAxis&&a.valueAxis){var s=E(n,a.baseAxis.dim),o=E(n,a.valueAxis.dim),u=aV[t.type](r,a.baseDataDim,a.valueDataDim,s,o);t.coord=u[0],t.value=u[1]}else{for(var c=[null!=t.xAxis?t.xAxis:t.radiusAxis,null!=t.yAxis?t.yAxis:t.angleAxis],d=0;d<2;d++)aV[c[d]]&&(c[d]=dV(r,r.mapDimension(n[d]),c[d]));t.coord=c}}return t}function oV(e,t,r,i){var n={};return null!=e.valueIndex||null!=e.valueDim?(n.valueDataDim=null!=e.valueIndex?t.getDimension(e.valueIndex):e.valueDim,n.valueAxis=r.getAxis(function(e,t){var r=e.getData(),i=r.dimensions;t=r.getDimension(t);for(var n=0;n<i.length;n++){var a=r.getDimensionInfo(i[n]);if(a.name===t)return a.coordDim}}(i,n.valueDataDim)),n.baseAxis=r.getOtherAxis(n.valueAxis),n.baseDataDim=t.mapDimension(n.baseAxis.dim)):(n.baseAxis=i.getBaseAxis(),n.valueAxis=r.getOtherAxis(n.baseAxis),n.baseDataDim=t.mapDimension(n.baseAxis.dim),n.valueDataDim=t.mapDimension(n.valueAxis.dim)),n}function uV(e,t){return!(e&&e.containData&&t.coord&&!function(e){return!(isNaN(parseFloat(e.x))&&isNaN(parseFloat(e.y)))}(t))||e.containData(t.coord)}function cV(e,t,r,i){return i<2?e.coord&&e.coord[i]:e.value}function dV(e,t,r){if("average"===r){var i=0,n=0;return e.each(t,(function(e,t){isNaN(e)||(i+=e,n++)})),i/n}return"median"===r?e.getMedian(t):e.getDataExtent(t)["max"===r?1:0]}var hV=fn(),lV=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return r.type=t.type,r}return a(t,e),t.prototype.init=function(){this.markerGroupMap=ce()},t.prototype.render=function(e,t,r){var i=this,n=this.markerGroupMap;n.each((function(e){hV(e).keep=!1})),t.eachSeries((function(e){var n=rV.getMarkerModelFromSeries(e,i.type);n&&i.renderSeries(e,n,t,r)})),n.each((function(e){!hV(e).keep&&i.group.remove(e.group)}))},t.prototype.markKeep=function(e){hV(e).keep=!0},t.prototype.blurSeries=function(e){var t=this;L(e,(function(e){var r=rV.getMarkerModelFromSeries(e,t.type);r&&r.getData().eachItemGraphicEl((function(e){e&&Ro(e)}))}))},t.type="marker",t}(wp);function fV(e,t,r){var i=t.coordinateSystem;e.each((function(n){var a,s=e.getItemModel(n),o=Di(s.get("x"),r.getWidth()),u=Di(s.get("y"),r.getHeight());if(isNaN(o)||isNaN(u)){if(t.getMarkerPosition)a=t.getMarkerPosition(e.getValues(e.dimensions,n));else if(i){var c=e.get(i.dimensions[0],n),d=e.get(i.dimensions[1],n);a=i.dataToPoint([c,d])}}else a=[o,u];isNaN(o)||(a[0]=o),isNaN(u)||(a[1]=u),e.setItemLayout(n,a)}))}var pV=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return r.type=t.type,r}return a(t,e),t.prototype.updateTransform=function(e,t,r){t.eachSeries((function(e){var t=rV.getMarkerModelFromSeries(e,"markPoint");t&&(fV(t.getData(),e,r),this.markerGroupMap.get(e.id).updateLayout())}),this)},t.prototype.renderSeries=function(e,t,r,i){var n=e.coordinateSystem,a=e.id,s=e.getData(),o=this.markerGroupMap,u=o.get(a)||o.set(a,new Fx),c=function(e,t,r){var i;i=e?B(e&&e.dimensions,(function(e){return M({name:e},t.getData().getDimensionInfo(t.getData().mapDimension(e))||{})})):[{name:"value",type:"float"}];var n=new kx(i,r),a=B(r.get("data"),q(sV,t));e&&(a=V(a,q(uV,e)));return n.initData(a,null,e?cV:function(e){return e.value}),n}(n,e,t);t.setData(c),fV(t.getData(),e,i),c.each((function(e){var r=c.getItemModel(e),i=r.getShallow("symbol"),n=r.getShallow("symbolSize"),a=r.getShallow("symbolRotate");if(z(i)||z(n)||z(a)){var o=t.getRawValue(e),u=t.getDataParams(e);z(i)&&(i=i(o,u)),z(n)&&(n=n(o,u)),z(a)&&(a=a(o,u))}var d=r.getModel("itemStyle").getItemStyle(),h=kv(s,"color");d.fill||(d.fill=h),c.setItemVisual(e,{symbol:i,symbolSize:n,symbolRotate:a,style:d})})),u.updateData(c),this.group.add(u.group),c.eachItemGraphicEl((function(e){e.traverse((function(e){ao(e).dataModel=t}))})),this.markKeep(u),u.group.silent=t.get("silent")||e.get("silent")},t.type="markPoint",t}(lV);var vV=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return r.type=t.type,r}return a(t,e),t.prototype.createMarkerModelFromSeries=function(e,r,i){return new t(e,r,i)},t.type="markLine",t.defaultOption={zlevel:0,z:5,symbol:["circle","arrow"],symbolSize:[8,16],symbolOffset:0,precision:2,tooltip:{trigger:"item"},label:{show:!0,position:"end",distance:5},lineStyle:{type:"dashed"},emphasis:{label:{show:!0},lineStyle:{width:3}},animationEasing:"linear"},t}(rV),mV=fn(),gV=function(e,t,r,i){var n,a=e.getData();if(j(i))n=i;else{var s=i.type;if("min"===s||"max"===s||"average"===s||"median"===s||null!=i.xAxis||null!=i.yAxis){var o=void 0,u=void 0;if(null!=i.yAxis||null!=i.xAxis)o=t.getAxis(null!=i.yAxis?"y":"x"),u=$(i.yAxis,i.xAxis);else{var c=oV(i,a,t,e);o=c.valueAxis,u=dV(a,Ax(a,c.valueDataDim),s)}var d="x"===o.dim?0:1,h=1-d,l=O(i),f={coord:[]};l.type=null,l.coord=[],l.coord[h]=-1/0,f.coord[h]=1/0;var p=r.get("precision");p>=0&&"number"===typeof u&&(u=+u.toFixed(Math.min(p,20))),l.coord[d]=f.coord[d]=u,n=[l,f,{type:s,valueIndex:i.valueIndex,value:u}]}else n=[]}var v=[sV(e,n[0]),sV(e,n[1]),I({},n[2])];return v[2].type=v[2].type||null,T(v[2],v[0]),T(v[2],v[1]),v};function yV(e){return!isNaN(e)&&!isFinite(e)}function bV(e,t,r,i){var n=1-e,a=i.dimensions[e];return yV(t[n])&&yV(r[n])&&t[e]===r[e]&&i.getAxis(a).containData(t[e])}function xV(e,t){if("cartesian2d"===e.type){var r=t[0].coord,i=t[1].coord;if(r&&i&&(bV(1,r,i,e)||bV(0,r,i,e)))return!0}return uV(e,t[0])&&uV(e,t[1])}function kV(e,t,r,i,n){var a,s=i.coordinateSystem,o=e.getItemModel(t),u=Di(o.get("x"),n.getWidth()),c=Di(o.get("y"),n.getHeight());if(isNaN(u)||isNaN(c)){if(i.getMarkerPosition)a=i.getMarkerPosition(e.getValues(e.dimensions,t));else{var d=s.dimensions,h=e.get(d[0],t),l=e.get(d[1],t);a=s.dataToPoint([h,l])}if(ik(s,"cartesian2d")){var f=s.getAxis("x"),p=s.getAxis("y");d=s.dimensions;yV(e.get(d[0],t))?a[0]=f.toGlobalCoord(f.getExtent()[r?0:1]):yV(e.get(d[1],t))&&(a[1]=p.toGlobalCoord(p.getExtent()[r?0:1]))}isNaN(u)||(a[0]=u),isNaN(c)||(a[1]=c)}else a=[u,c];e.setItemLayout(t,a)}var wV=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return r.type=t.type,r}return a(t,e),t.prototype.updateTransform=function(e,t,r){t.eachSeries((function(e){var t=rV.getMarkerModelFromSeries(e,"markLine");if(t){var i=t.getData(),n=mV(t).from,a=mV(t).to;n.each((function(t){kV(n,t,!0,e,r),kV(a,t,!1,e,r)})),i.each((function(e){i.setItemLayout(e,[n.getItemLayout(e),a.getItemLayout(e)])})),this.markerGroupMap.get(e.id).updateLayout()}}),this)},t.prototype.renderSeries=function(e,t,r,i){var n=e.coordinateSystem,a=e.id,s=e.getData(),o=this.markerGroupMap,u=o.get(a)||o.set(a,new RC);this.group.add(u.group);var c=function(e,t,r){var i;i=e?B(e&&e.dimensions,(function(e){return M({name:e},t.getData().getDimensionInfo(t.getData().mapDimension(e))||{})})):[{name:"value",type:"float"}];var n=new kx(i,r),a=new kx(i,r),s=new kx([],r),o=B(r.get("data"),q(gV,t,e,r));e&&(o=V(o,q(xV,e)));var u=e?cV:function(e){return e.value};return n.initData(B(o,(function(e){return e[0]})),null,u),a.initData(B(o,(function(e){return e[1]})),null,u),s.initData(B(o,(function(e){return e[2]}))),s.hasItemOption=!0,{from:n,to:a,line:s}}(n,e,t),d=c.from,h=c.to,l=c.line;mV(t).from=d,mV(t).to=h,t.setData(l);var f=t.get("symbol"),p=t.get("symbolSize"),v=t.get("symbolRotate"),m=t.get("symbolOffset");function g(t,r,n){var a=t.getItemModel(r);kV(t,r,n,e,i);var o=a.getModel("itemStyle").getItemStyle();null==o.fill&&(o.fill=kv(s,"color")),t.setItemVisual(r,{symbolKeepAspect:a.get("symbolKeepAspect"),symbolOffset:J(a.get("symbolOffset"),m[n?0:1]),symbolRotate:J(a.get("symbolRotate",!0),v[n?0:1]),symbolSize:J(a.get("symbolSize"),p[n?0:1]),symbol:J(a.get("symbol",!0),f[n?0:1]),style:o})}j(f)||(f=[f,f]),j(p)||(p=[p,p]),j(v)||(v=[v,v]),j(m)||(m=[m,m]),c.from.each((function(e){g(d,e,!0),g(h,e,!1)})),l.each((function(e){var t=l.getItemModel(e).getModel("lineStyle").getLineStyle();l.setItemLayout(e,[d.getItemLayout(e),h.getItemLayout(e)]),null==t.stroke&&(t.stroke=d.getItemVisual(e,"style").fill),l.setItemVisual(e,{fromSymbolKeepAspect:d.getItemVisual(e,"symbolKeepAspect"),fromSymbolOffset:d.getItemVisual(e,"symbolOffset"),fromSymbolRotate:d.getItemVisual(e,"symbolRotate"),fromSymbolSize:d.getItemVisual(e,"symbolSize"),fromSymbol:d.getItemVisual(e,"symbol"),toSymbolKeepAspect:h.getItemVisual(e,"symbolKeepAspect"),toSymbolOffset:h.getItemVisual(e,"symbolOffset"),toSymbolRotate:h.getItemVisual(e,"symbolRotate"),toSymbolSize:h.getItemVisual(e,"symbolSize"),toSymbol:h.getItemVisual(e,"symbol"),style:t})})),u.updateData(l),c.line.eachItemGraphicEl((function(e,r){e.traverse((function(e){ao(e).dataModel=t}))})),this.markKeep(u),u.group.silent=t.get("silent")||e.get("silent")},t.type="markLine",t}(lV);var _V=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return r.type=t.type,r}return a(t,e),t.prototype.createMarkerModelFromSeries=function(e,r,i){return new t(e,r,i)},t.type="markArea",t.defaultOption={zlevel:0,z:1,tooltip:{trigger:"item"},animation:!1,label:{show:!0,position:"top"},itemStyle:{borderWidth:0},emphasis:{label:{show:!0,position:"top"}}},t}(rV),SV=fn(),OV=function(e,t,r,i){var n=sV(e,i[0]),a=sV(e,i[1]),s=n.coord,o=a.coord;s[0]=$(s[0],-1/0),s[1]=$(s[1],-1/0),o[0]=$(o[0],1/0),o[1]=$(o[1],1/0);var u=C([{},n,a]);return u.coord=[n.coord,a.coord],u.x0=n.x,u.y0=n.y,u.x1=a.x,u.y1=a.y,u};function TV(e){return!isNaN(e)&&!isFinite(e)}function CV(e,t,r,i){var n=1-e;return TV(t[n])&&TV(r[n])}function IV(e,t){var r=t.coord[0],i=t.coord[1];return!!(ik(e,"cartesian2d")&&r&&i&&(CV(1,r,i)||CV(0,r,i)))||(uV(e,{coord:r,x:t.x0,y:t.y0})||uV(e,{coord:i,x:t.x1,y:t.y1}))}function MV(e,t,r,i,n){var a,s=i.coordinateSystem,o=e.getItemModel(t),u=Di(o.get(r[0]),n.getWidth()),c=Di(o.get(r[1]),n.getHeight());if(isNaN(u)||isNaN(c)){if(i.getMarkerPosition)a=i.getMarkerPosition(e.getValues(r,t));else{var d=[f=e.get(r[0],t),p=e.get(r[1],t)];s.clampData&&s.clampData(d,d),a=s.dataToPoint(d,!0)}if(ik(s,"cartesian2d")){var h=s.getAxis("x"),l=s.getAxis("y"),f=e.get(r[0],t),p=e.get(r[1],t);TV(f)?a[0]=h.toGlobalCoord(h.getExtent()["x0"===r[0]?0:1]):TV(p)&&(a[1]=l.toGlobalCoord(l.getExtent()["y0"===r[1]?0:1]))}isNaN(u)||(a[0]=u),isNaN(c)||(a[1]=c)}else a=[u,c];return a}var AV=[["x0","y0"],["x1","y0"],["x1","y1"],["x0","y1"]];var EV=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return r.type=t.type,r}return a(t,e),t.prototype.updateTransform=function(e,t,r){t.eachSeries((function(e){var t=rV.getMarkerModelFromSeries(e,"markArea");if(t){var i=t.getData();i.each((function(t){var n=B(AV,(function(n){return MV(i,t,n,e,r)}));i.setItemLayout(t,n),i.getItemGraphicEl(t).setShape("points",n)}))}}),this)},t.prototype.renderSeries=function(e,t,r,i){var n=e.coordinateSystem,a=e.id,s=e.getData(),o=this.markerGroupMap,u=o.get(a)||o.set(a,{group:new Ti});this.group.add(u.group),this.markKeep(u);var c=function(e,t,r){var i,n,a=["x0","y0","x1","y1"];e?(i=B(e&&e.dimensions,(function(e){var r=t.getData();return M({name:e},r.getDimensionInfo(r.mapDimension(e))||{})})),n=new kx(B(a,(function(e,t){return{name:e,type:i[t%2].type}})),r)):n=new kx(i=[{name:"value",type:"float"}],r);var s=B(r.get("data"),q(OV,t,e,r));e&&(s=V(s,q(IV,e)));var o=e?function(e,t,r,i){return e.coord[Math.floor(i/2)][i%2]}:function(e){return e.value};return n.initData(s,null,o),n.hasItemOption=!0,n}(n,e,t);t.setData(c),c.each((function(t){var r=B(AV,(function(r){return MV(c,t,r,e,i)})),a=n.getAxis("x").scale,o=n.getAxis("y").scale,u=a.getExtent(),d=o.getExtent(),h=[a.parse(c.get("x0",t)),a.parse(c.get("x1",t))],l=[o.parse(c.get("y0",t)),o.parse(c.get("y1",t))];Bi(h),Bi(l);var f=!!(u[0]>h[1]||u[1]<h[0]||d[0]>l[1]||d[1]<l[0]);c.setItemLayout(t,{points:r,allClipped:f});var p=c.getItemModel(t).getModel("itemStyle").getItemStyle(),v=kv(s,"color");p.fill||(p.fill=v,"string"===typeof p.fill&&(p.fill=Yt(p.fill,.4))),p.stroke||(p.stroke=v),c.setItemVisual(t,"style",p)})),c.diff(SV(u).data).add((function(e){var t=c.getItemLayout(e);if(!t.allClipped){var r=new Zu({shape:{points:t.points}});c.setItemGraphicEl(e,r),u.group.add(r)}})).update((function(e,r){var i=SV(u).data.getItemGraphicEl(r),n=c.getItemLayout(e);n.allClipped?i&&u.group.remove(i):(i?Fc(i,{shape:{points:n.points}},t,e):i=new Zu({shape:{points:n.points}}),c.setItemGraphicEl(e,i),u.group.add(i))})).remove((function(e){var t=SV(u).data.getItemGraphicEl(e);u.group.remove(t)})).execute(),c.eachItemGraphicEl((function(e,r){var i=c.getItemModel(r),n=c.getItemVisual(r,"style");e.useStyle(c.getItemVisual(r,"style")),od(e,ud(i),{labelFetcher:t,labelDataIndex:r,defaultText:c.getName(r)||"",inheritColor:"string"===typeof n.fill?Yt(n.fill,1):"#000"}),$o(e,i),Xo(e),ao(e).dataModel=t})),SV(u).data=c,u.group.silent=t.get("silent")||e.get("silent")},t.type="markArea",t}(lV);var NV=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return r.type=t.type,r.layoutMode={type:"box",ignoreSize:!0},r}return a(t,e),t.prototype.init=function(e,t,r){this.mergeDefaultAndTheme(e,r),e.selected=e.selected||{},this._updateSelector(e)},t.prototype.mergeOption=function(t,r){e.prototype.mergeOption.call(this,t,r),this._updateSelector(t)},t.prototype._updateSelector=function(e){var t=e.selector,r=this.ecModel;!0===t&&(t=e.selector=["all","inverse"]),j(t)&&L(t,(function(e,i){H(e)&&(e={type:e}),t[i]=T(e,function(e,t){return"all"===t?{type:"all",title:e.getLocale(["legend","selector","all"])}:"inverse"===t?{type:"inverse",title:e.getLocale(["legend","selector","inverse"])}:void 0}(r,e.type))}))},t.prototype.optionUpdated=function(){this._updateData(this.ecModel);var e=this._data;if(e[0]&&"single"===this.get("selectedMode")){for(var t=!1,r=0;r<e.length;r++){var i=e[r].get("name");if(this.isSelected(i)){this.select(i),t=!0;break}}!t&&this.select(e[0].get("name"))}},t.prototype._updateData=function(e){var t=[],r=[];e.eachRawSeries((function(i){var n,a=i.name;if(r.push(a),i.legendVisualProvider){var s=i.legendVisualProvider.getAllNames();e.isSeriesFiltered(i)||(r=r.concat(s)),s.length?t=t.concat(s):n=!0}else n=!0;n&&dn(i)&&t.push(i.name)})),this._availableNames=r;var i=B(this.get("data")||t,(function(e){return"string"!==typeof e&&"number"!==typeof e||(e={name:e}),new Md(e,this,this.ecModel)}),this);this._data=i},t.prototype.getData=function(){return this._data},t.prototype.select=function(e){var t=this.option.selected;"single"===this.get("selectedMode")&&L(this._data,(function(e){t[e.get("name")]=!1}));t[e]=!0},t.prototype.unSelect=function(e){"single"!==this.get("selectedMode")&&(this.option.selected[e]=!1)},t.prototype.toggleSelected=function(e){var t=this.option.selected;t.hasOwnProperty(e)||(t[e]=!0),this[t[e]?"unSelect":"select"](e)},t.prototype.allSelect=function(){var e=this._data,t=this.option.selected;L(e,(function(e){t[e.get("name",!0)]=!0}))},t.prototype.inverseSelect=function(){var e=this._data,t=this.option.selected;L(e,(function(e){var r=e.get("name",!0);t.hasOwnProperty(r)||(t[r]=!0),t[r]=!t[r]}))},t.prototype.isSelected=function(e){var t=this.option.selected;return!(t.hasOwnProperty(e)&&!t[e])&&E(this._availableNames,e)>=0},t.prototype.getOrient=function(){return"vertical"===this.get("orient")?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},t.type="legend.plain",t.dependencies=["series"],t.defaultOption={zlevel:0,z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,symbolSize:"auto",inactiveColor:"#ccc",inactiveBorderColor:"#ccc",inactiveBorderWidth:"auto",itemStyle:{color:"inherit",opacity:"inherit",decal:"inherit",shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,borderColor:"inherit",borderWidth:"auto",borderCap:"inherit",borderJoin:"inherit",borderDashOffset:"inherit",borderMiterLimit:"inherit"},lineStyle:{width:"auto",color:"inherit",inactiveColor:"#ccc",inactiveWidth:2,opacity:"inherit",type:"inherit",cap:"inherit",join:"inherit",dashOffset:"inherit",miterLimit:"inherit",shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0},textStyle:{color:"#333"},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:" sans-serif",color:"#666",borderWidth:1,borderColor:"#666"},emphasis:{selectorLabel:{show:!0,color:"#eee",backgroundColor:"#666"}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1}},t}(qh),PV=q,DV=L,LV=Ti;function BV(e,t,r,i){GV(e,t,r,i),r.dispatchAction({type:"legendToggleSelect",name:null!=e?e:t}),VV(e,t,r,i)}function RV(e){for(var t,r=e.getZr().storage.getDisplayList(),i=0,n=r.length;i<n&&!(t=r[i].states.emphasis);)i++;return t&&t.hoverLayer}function VV(e,t,r,i){RV(r)||r.dispatchAction({type:"highlight",seriesName:e,name:t,excludeSeriesId:i})}function GV(e,t,r,i){RV(r)||r.dispatchAction({type:"downplay",seriesName:e,name:t,excludeSeriesId:i})}var FV=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return r.type=t.type,r.newlineDisabled=!1,r}return a(t,e),t.prototype.init=function(){this.group.add(this._contentGroup=new LV),this.group.add(this._selectorGroup=new LV),this._isFirstRender=!0},t.prototype.getContentGroup=function(){return this._contentGroup},t.prototype.getSelectorGroup=function(){return this._selectorGroup},t.prototype.render=function(e,t,r){var i=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),e.get("show",!0)){var n=e.get("align"),a=e.get("orient");n&&"auto"!==n||(n="right"===e.get("left")&&"vertical"===a?"right":"left");var s=e.get("selector",!0),o=e.get("selectorPosition",!0);!s||o&&"auto"!==o||(o="horizontal"===a?"end":"start"),this.renderInner(n,e,t,r,s,a,o);var u=e.getBoxLayoutParams(),c={width:r.getWidth(),height:r.getHeight()},d=e.get("padding"),h=Ph(u,c,d),l=this.layoutInner(e,n,h,i,s,o),f=Ph(M({width:l.width,height:l.height},u),c,d);this.group.x=f.x-l.x,this.group.y=f.y-l.y,this.group.markRedraw(),this.group.add(this._backgroundEl=$L(l,e))}},t.prototype.resetInner=function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},t.prototype.renderInner=function(e,t,r,i,n,a,s){var o=this.getContentGroup(),u=ce(),c=t.get("selectedMode"),d=[];r.eachRawSeries((function(e){!e.get("legendHoverLink")&&d.push(e.id)})),DV(t.getData(),(function(n,a){var s=n.get("name");if(!this.newlineDisabled&&(""===s||"\n"===s)){var h=new LV;return h.newline=!0,void o.add(h)}var l=r.getSeriesByName(s)[0];if(!u.get(s)){if(l){var f=l.getData(),p=f.getVisual("legendLineStyle")||{},v=f.getVisual("legendSymbol"),m=f.getVisual("style");f.getVisual("symbolSize"),this._createItem(l,s,a,n,t,e,p,m,v,c).on("click",PV(BV,s,null,i,d)).on("mouseover",PV(VV,l.name,null,i,d)).on("mouseout",PV(GV,l.name,null,i,d)),u.set(s,!0)}else r.eachRawSeries((function(r){if(!u.get(s)&&r.legendVisualProvider){var o=r.legendVisualProvider;if(!o.containName(s))return;var h=o.indexOfName(s),l=o.getItemVisual(h,"style"),f=o.getItemVisual(h,"legendSymbol"),p=zt(l.fill);p&&0===p[3]&&(p[3]=.2,l.fill=Zt(p,"rgba")),this._createItem(r,s,a,n,t,e,{},l,f,c).on("click",PV(BV,null,s,i,d)).on("mouseover",PV(VV,null,s,i,d)).on("mouseout",PV(GV,null,s,i,d)),u.set(s,!0)}}),this);0}}),this),n&&this._createSelector(n,t,i,a,s)},t.prototype._createSelector=function(e,t,r,i,n){var a=this.getSelectorGroup();DV(e,(function(e){var i=e.type,n=new no({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){r.dispatchAction({type:"all"===i?"legendAllSelect":"legendInverseSelect"})}});a.add(n),od(n,{normal:t.getModel("selectorLabel"),emphasis:t.getModel(["emphasis","selectorLabel"])},{defaultText:e.title}),Xo(n)}))},t.prototype._createItem=function(e,t,r,i,n,a,s,o,u,c){var d=e.visualDrawType,h=n.get("itemWidth"),l=n.get("itemHeight"),f=n.isSelected(t),p=i.get("symbolKeepAspect"),v=i.get("icon"),m=function(e,t,r,i,n,a,s){for(var o=t.getModel("itemStyle"),u=Od.concat([["decal"]]),c={},d=0;d<u.length;++d){var h=u[d][u[d].length-1],l=u[d][0];if("inherit"===(m=o.getShallow(h)))switch(l){case"fill":c.fill=n[a];break;case"stroke":c.stroke=n[e.startsWith("empty")?"fill":"stroke"];break;case"opacity":c.opacity=("fill"===a?n:i).opacity;break;default:c[l]=n[l]}else"auto"===m&&"lineWidth"===l?c.lineWidth=n.lineWidth>0?2:0:c[l]=m}var f=t.getModel("lineStyle"),p=wd.concat([["inactiveColor"],["inactiveWidth"]]),v={};for(d=0;d<p.length;++d){var m;h=p[d][1],l=p[d][0];"inherit"===(m=f.getShallow(h))?v[l]=i[l]:"auto"===m&&"lineWidth"===l?v.lineWidth=i.lineWidth>0?2:0:v[l]=m}if("auto"===c.fill&&(c.fill=n.fill),"auto"===c.stroke&&(c.stroke=n.fill),"auto"===v.stroke&&(v.stroke=n.fill),!s){var g=t.get("inactiveBorderWidth"),y=c[e.indexOf("empty")>-1?"fill":"stroke"];c.lineWidth="auto"===g?n.lineWidth>0&&y?2:0:c.lineWidth,c.fill=t.get("inactiveColor"),c.stroke=t.get("inactiveBorderColor"),v.stroke=r.get("inactiveColor"),v.lineWidth=r.get("inactiveWidth")}return{itemStyle:c,lineStyle:v}}(u=v||u||"roundRect",i,n.getModel("lineStyle"),s,o,d,f),g=new LV,y=i.getModel("textStyle");"function"!==typeof e.getLegendIcon||v?g.add(function(e){var t=e.symbolType||"roundRect",r=gm(t,0,0,e.itemWidth,e.itemHeight,e.itemStyle.fill,e.symbolKeepAspect);r.setStyle(e.itemStyle),t.indexOf("empty")>-1&&(r.style.stroke=r.style.fill,r.style.fill="#fff",r.style.lineWidth=2);return r}({itemWidth:h,itemHeight:l,symbolType:u,symbolKeepAspect:p,itemStyle:m.itemStyle,lineStyle:m.lineStyle})):g.add(e.getLegendIcon({itemWidth:h,itemHeight:l,symbolType:u,symbolKeepAspect:p,itemStyle:m.itemStyle,lineStyle:m.lineStyle}));var b="left"===a?h+5:-5,x=a,k=n.get("formatter"),w=t;"string"===typeof k&&k?w=k.replace("{name}",null!=t?t:""):"function"===typeof k&&(w=k(t));var _=i.get("inactiveColor");g.add(new no({style:cd(y,{text:w,x:b,y:l/2,fill:f?y.getTextColor():_,align:x,verticalAlign:"middle"})}));var S=new Ks({shape:g.getBoundingRect(),invisible:!0}),O=i.getModel("tooltip");return O.get("show")&&id({el:S,componentModel:n,itemName:t,itemTooltipOption:O.option}),g.add(S),g.eachChild((function(e){e.silent=!0})),S.silent=!c,this.getContentGroup().add(g),Xo(g),g.__legendDataIndex=r,g},t.prototype.layoutInner=function(e,t,r,i,n,a){var s=this.getContentGroup(),o=this.getSelectorGroup();Nh(e.get("orient"),s,e.get("itemGap"),r.width,r.height);var u=s.getBoundingRect(),c=[-u.x,-u.y];if(o.markRedraw(),s.markRedraw(),n){Nh("horizontal",o,e.get("selectorItemGap",!0));var d=o.getBoundingRect(),h=[-d.x,-d.y],l=e.get("selectorButtonGap",!0),f=e.getOrient().index,p=0===f?"width":"height",v=0===f?"height":"width",m=0===f?"y":"x";"end"===a?h[f]+=u[p]+l:c[f]+=d[p]+l,h[1-f]+=u[v]/2-d[v]/2,o.x=h[0],o.y=h[1],s.x=c[0],s.y=c[1];var g={x:0,y:0};return g[p]=u[p]+l+d[p],g[v]=Math.max(u[v],d[v]),g[m]=Math.min(0,d[m]+h[1-f]),g}return s.x=c[0],s.y=c[1],this.group.getBoundingRect()},t.prototype.remove=function(){this.getContentGroup().removeAll(),this._isFirstRender=!0},t.type="legend.plain",t}(wp);function qV(e){var t=e.findComponents({mainType:"legend"});t&&t.length&&e.filterSeries((function(e){for(var r=0;r<t.length;r++)if(!t[r].isSelected(e.name))return!1;return!0}))}function jV(e,t,r){var i,n={},a="toggleSelected"===e;return r.eachComponent("legend",(function(r){a&&null!=i?r[i?"select":"unSelect"](t.name):"allSelect"===e||"inverseSelect"===e?r[e]():(r[e](t.name),i=r.isSelected(t.name)),L(r.getData(),(function(e){var t=e.get("name");if("\n"!==t&&""!==t){var i=r.isSelected(t);n.hasOwnProperty(t)?n[t]=n[t]&&i:n[t]=i}}))})),"allSelect"===e||"inverseSelect"===e?{selected:n}:{name:t.name,selected:n}}function zV(e){e.registerComponentModel(NV),e.registerComponentView(FV),e.registerProcessor(e.PRIORITY.PROCESSOR.SERIES_FILTER,qV),e.registerSubTypeDefaulter("legend",(function(){return"plain"})),function(e){e.registerAction("legendToggleSelect","legendselectchanged",q(jV,"toggleSelected")),e.registerAction("legendAllSelect","legendselectall",q(jV,"allSelect")),e.registerAction("legendInverseSelect","legendinverseselect",q(jV,"inverseSelect")),e.registerAction("legendSelect","legendselected",q(jV,"select")),e.registerAction("legendUnSelect","legendunselected",q(jV,"unSelect"))}(e)}function HV(e,t,r){var i=[1,1];i[e.getOrient().index]=0,Bh(t,r,{type:"box",ignoreSize:!!i})}var UV=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return r.type=t.type,r}return a(t,e),t.prototype.setScrollDataIndex=function(e){this.option.scrollDataIndex=e},t.prototype.init=function(t,r,i){var n=Rh(t);e.prototype.init.call(this,t,r,i),HV(this,t,n)},t.prototype.mergeOption=function(t,r){e.prototype.mergeOption.call(this,t,r),HV(this,this.option,t)},t.type="legend.scroll",t.defaultOption=Nd(NV.defaultOption,{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800}),t}(NV),WV=Ti,KV=["width","height"],XV=["x","y"],YV=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return r.type=t.type,r.newlineDisabled=!0,r._currentIndex=0,r}return a(t,e),t.prototype.init=function(){e.prototype.init.call(this),this.group.add(this._containerGroup=new WV),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new WV)},t.prototype.resetInner=function(){e.prototype.resetInner.call(this),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},t.prototype.renderInner=function(t,r,i,n,a,s,o){var u=this;e.prototype.renderInner.call(this,t,r,i,n,a,s,o);var c=this._controllerGroup,d=r.get("pageIconSize",!0),h=j(d)?d:[d,d];f("pagePrev",0);var l=r.getModel("pageTextStyle");function f(e,t){var i=e+"DataIndex",a=Jc(r.get("pageIcons",!0)[r.getOrient().name][t],{onclick:F(u._pageGo,u,i,r,n)},{x:-h[0]/2,y:-h[1]/2,width:h[0],height:h[1]});a.name=e,c.add(a)}c.add(new no({name:"pageText",style:{text:"xx/xx",fill:l.getTextColor(),font:l.getFont(),verticalAlign:"middle",align:"center"},silent:!0})),f("pageNext",1)},t.prototype.layoutInner=function(e,t,r,i,n,a){var s=this.getSelectorGroup(),o=e.getOrient().index,u=KV[o],c=XV[o],d=KV[1-o],h=XV[1-o];n&&Nh("horizontal",s,e.get("selectorItemGap",!0));var l=e.get("selectorButtonGap",!0),f=s.getBoundingRect(),p=[-f.x,-f.y],v=O(r);n&&(v[u]=r[u]-f[u]-l);var m=this._layoutContentAndController(e,i,v,o,u,d,h,c);if(n){if("end"===a)p[o]+=m[u]+l;else{var g=f[u]+l;p[o]-=g,m[c]-=g}m[u]+=f[u]+l,p[1-o]+=m[h]+m[d]/2-f[d]/2,m[d]=Math.max(m[d],f[d]),m[h]=Math.min(m[h],f[h]+p[1-o]),s.x=p[0],s.y=p[1],s.markRedraw()}return m},t.prototype._layoutContentAndController=function(e,t,r,i,n,a,s,o){var u=this.getContentGroup(),c=this._containerGroup,d=this._controllerGroup;Nh(e.get("orient"),u,e.get("itemGap"),i?r.width:null,i?null:r.height),Nh("horizontal",d,e.get("pageButtonItemGap",!0));var h=u.getBoundingRect(),l=d.getBoundingRect(),f=this._showController=h[n]>r[n],p=[-h.x,-h.y];t||(p[i]=u[o]);var v=[0,0],m=[-l.x,-l.y],g=J(e.get("pageButtonGap",!0),e.get("itemGap",!0));f&&("end"===e.get("pageButtonPosition",!0)?m[i]+=r[n]-l[n]:v[i]+=l[n]+g);m[1-i]+=h[a]/2-l[a]/2,u.setPosition(p),c.setPosition(v),d.setPosition(m);var y={x:0,y:0};if(y[n]=f?r[n]:h[n],y[a]=Math.max(h[a],l[a]),y[s]=Math.min(0,l[s]+m[1-i]),c.__rectSize=r[n],f){var b={x:0,y:0};b[n]=Math.max(r[n]-l[n]-g,0),b[a]=y[a],c.setClipPath(new Ks({shape:b})),c.__rectSize=b[n]}else d.eachChild((function(e){e.attr({invisible:!0,silent:!0})}));var x=this._getPageInfo(e);return null!=x.pageIndex&&Fc(u,{x:x.contentPosition[0],y:x.contentPosition[1]},f?e:null),this._updatePageInfoView(e,x),y},t.prototype._pageGo=function(e,t,r){var i=this._getPageInfo(t)[e];null!=i&&r.dispatchAction({type:"legendScroll",scrollDataIndex:i,legendId:t.id})},t.prototype._updatePageInfoView=function(e,t){var r=this._controllerGroup;L(["pagePrev","pageNext"],(function(i){var n=null!=t[i+"DataIndex"],a=r.childOfName(i);a&&(a.setStyle("fill",n?e.get("pageIconColor",!0):e.get("pageIconInactiveColor",!0)),a.cursor=n?"pointer":"default")}));var i=r.childOfName("pageText"),n=e.get("pageFormatter"),a=t.pageIndex,s=null!=a?a+1:0,o=t.pageCount;i&&n&&i.setStyle("text",H(n)?n.replace("{current}",null==s?"":s+"").replace("{total}",null==o?"":o+""):n({current:s,total:o}))},t.prototype._getPageInfo=function(e){var t=e.get("scrollDataIndex",!0),r=this.getContentGroup(),i=this._containerGroup.__rectSize,n=e.getOrient().index,a=KV[n],s=XV[n],o=this._findTargetItemIndex(t),u=r.children(),c=u[o],d=u.length,h=d?1:0,l={contentPosition:[r.x,r.y],pageCount:h,pageIndex:h-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!c)return l;var f=y(c);l.contentPosition[n]=-f.s;for(var p=o+1,v=f,m=f,g=null;p<=d;++p)(!(g=y(u[p]))&&m.e>v.s+i||g&&!b(g,v.s))&&(v=m.i>v.i?m:g)&&(null==l.pageNextDataIndex&&(l.pageNextDataIndex=v.i),++l.pageCount),m=g;for(p=o-1,v=f,m=f,g=null;p>=-1;--p)(g=y(u[p]))&&b(m,g.s)||!(v.i<m.i)||(m=v,null==l.pagePrevDataIndex&&(l.pagePrevDataIndex=v.i),++l.pageCount,++l.pageIndex),v=g;return l;function y(e){if(e){var t=e.getBoundingRect(),r=t[s]+e[s];return{s:r,e:r+t[a],i:e.__legendDataIndex}}}function b(e,t){return e.e>=t&&e.s<=t+i}},t.prototype._findTargetItemIndex=function(e){return this._showController?(this.getContentGroup().eachChild((function(i,n){var a=i.__legendDataIndex;null==r&&null!=a&&(r=n),a===e&&(t=n)})),null!=t?t:r):0;var t,r},t.type="legend.scroll",t}(FV);function ZV(e){Wy(zV),e.registerComponentModel(UV),e.registerComponentView(YV),function(e){e.registerAction("legendScroll","legendscroll",(function(e,t){var r=e.scrollDataIndex;null!=r&&t.eachComponent({mainType:"legend",subType:"scroll",query:e},(function(e){e.setScrollDataIndex(r)}))}))}(e)}var QV=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return r.type=t.type,r}return a(t,e),t.type="dataZoom.inside",t.defaultOption=Nd(BL.defaultOption,{disabled:!1,zoomLock:!1,zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),t}(BL),$V=fn();function JV(e,t,r){$V(e).coordSysRecordMap.each((function(e){var i=e.dataZoomInfoMap.get(t.uid);i&&(i.getRange=r)}))}function eG(e,t){if(t){e.removeKey(t.model.uid);var r=t.controller;r&&r.dispose()}}function tG(e,t){e.dispatchAction({type:"dataZoom",animation:{easing:"cubicOut",duration:100},batch:t})}function rG(e,t,r,i){return e.coordinateSystem.containPoint([r,i])}function iG(e){e.registerProcessor(e.PRIORITY.PROCESSOR.FILTER,(function(e,t){var r=$V(t),i=r.coordSysRecordMap||(r.coordSysRecordMap=ce());i.each((function(e){e.dataZoomInfoMap=null})),e.eachComponent({mainType:"dataZoom",subType:"inside"},(function(e){L(PL(e).infoList,(function(r){var n=r.model.uid,a=i.get(n)||i.set(n,function(e,t){var r={model:t,containsPoint:q(rG,t),dispatchAction:q(tG,e),dataZoomInfoMap:null,controller:null},i=r.controller=new FS(e.getZr());return L(["pan","zoom","scrollMove"],(function(e){i.on(e,(function(t){var i=[];r.dataZoomInfoMap.each((function(n){if(t.isAvailableBehavior(n.model.option)){var a=(n.getRange||{})[e],s=a&&a(n.dzReferCoordSysInfo,r.model.mainType,r.controller,t);!n.model.get("disabled",!0)&&s&&i.push({dataZoomId:n.model.id,start:s[0],end:s[1]})}})),i.length&&r.dispatchAction(i)}))})),r}(t,r.model));(a.dataZoomInfoMap||(a.dataZoomInfoMap=ce())).set(e.uid,{dzReferCoordSysInfo:r,model:e,getRange:null})}))})),i.each((function(e){var t,r=e.controller,n=e.dataZoomInfoMap;if(n){var a=n.keys()[0];null!=a&&(t=n.get(a))}if(t){var s=function(e){var t,r="type_",i={type_true:2,type_move:1,type_false:0,type_undefined:-1},n=!0;return e.each((function(e){var a=e.model,s=!a.get("disabled",!0)&&(!a.get("zoomLock",!0)||"move");i[r+s]>i[r+t]&&(t=s),n=n&&a.get("preventDefaultMouseMove",!0)})),{controlType:t,opt:{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!0,preventDefaultMouseMove:!!n}}}(n);r.enable(s.controlType,s.opt),r.setPointerChecker(e.containsPoint),Rp(e,"dispatchAction",t.model.get("throttle",!0),"fixRate")}else eG(i,e)}))}))}var nG=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="dataZoom.inside",t}return a(t,e),t.prototype.render=function(t,r,i){e.prototype.render.apply(this,arguments),t.noTarget()?this._clear():(this.range=t.getPercentRange(),JV(i,t,{pan:F(aG.pan,this),zoom:F(aG.zoom,this),scrollMove:F(aG.scrollMove,this)}))},t.prototype.dispose=function(){this._clear(),e.prototype.dispose.apply(this,arguments)},t.prototype._clear=function(){!function(e,t){for(var r=$V(e).coordSysRecordMap,i=r.keys(),n=0;n<i.length;n++){var a=i[n],s=r.get(a),o=s.dataZoomInfoMap;if(o){var u=t.uid;o.get(u)&&(o.removeKey(u),o.keys().length||eG(r,s))}}}(this.api,this.dataZoomModel),this.range=null},t.type="dataZoom.inside",t}(VL),aG={zoom:function(e,t,r,i){var n=this.range,a=n.slice(),s=e.axisModels[0];if(s){var o=oG[t](null,[i.originX,i.originY],s,r,e),u=(o.signal>0?o.pixelStart+o.pixelLength-o.pixel:o.pixel-o.pixelStart)/o.pixelLength*(a[1]-a[0])+a[0],c=Math.max(1/i.scale,0);a[0]=(a[0]-u)*c+u,a[1]=(a[1]-u)*c+u;var d=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();return AI(0,a,[0,100],0,d.minSpan,d.maxSpan),this.range=a,n[0]!==a[0]||n[1]!==a[1]?a:void 0}},pan:sG((function(e,t,r,i,n,a){var s=oG[i]([a.oldX,a.oldY],[a.newX,a.newY],t,n,r);return s.signal*(e[1]-e[0])*s.pixel/s.pixelLength})),scrollMove:sG((function(e,t,r,i,n,a){return oG[i]([0,0],[a.scrollDelta,a.scrollDelta],t,n,r).signal*(e[1]-e[0])*a.scrollDelta}))};function sG(e){return function(t,r,i,n){var a=this.range,s=a.slice(),o=t.axisModels[0];if(o)return AI(e(s,o,t,r,i,n),s,[0,100],"all"),this.range=s,a[0]!==s[0]||a[1]!==s[1]?s:void 0}}var oG={grid:function(e,t,r,i,n){var a=r.axis,s={},o=n.model.coordinateSystem.getRect();return e=e||[0,0],"x"===a.dim?(s.pixel=t[0]-e[0],s.pixelLength=o.width,s.pixelStart=o.x,s.signal=a.inverse?1:-1):(s.pixel=t[1]-e[1],s.pixelLength=o.height,s.pixelStart=o.y,s.signal=a.inverse?-1:1),s},polar:function(e,t,r,i,n){var a=r.axis,s={},o=n.model.coordinateSystem,u=o.getRadiusAxis().getExtent(),c=o.getAngleAxis().getExtent();return e=e?o.pointToCoord(e):[0,0],t=o.pointToCoord(t),"radiusAxis"===r.mainType?(s.pixel=t[0]-e[0],s.pixelLength=u[1]-u[0],s.pixelStart=u[0],s.signal=a.inverse?1:-1):(s.pixel=t[1]-e[1],s.pixelLength=c[1]-c[0],s.pixelStart=c[0],s.signal=a.inverse?-1:1),s},singleAxis:function(e,t,r,i,n){var a=r.axis,s=n.model.coordinateSystem.getRect(),o={};return e=e||[0,0],"horizontal"===a.orient?(o.pixel=t[0]-e[0],o.pixelLength=s.width,o.pixelStart=s.x,o.signal=a.inverse?1:-1):(o.pixel=t[1]-e[1],o.pixelLength=s.height,o.pixelStart=s.y,o.signal=a.inverse?-1:1),o}},uG=nG;function cG(e){UL(e),e.registerComponentModel(QV),e.registerComponentView(uG),iG(e)}var dG=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return r.type=t.type,r}return a(t,e),t.type="dataZoom.slider",t.layoutMode="box",t.defaultOption=Nd(BL.defaultOption,{show:!0,right:"ph",top:"ph",width:"ph",height:"ph",left:null,bottom:null,borderColor:"#d2dbee",borderRadius:3,backgroundColor:"rgba(47,69,84,0)",dataBackground:{lineStyle:{color:"#d2dbee",width:.5},areaStyle:{color:"#d2dbee",opacity:.2}},selectedDataBackground:{lineStyle:{color:"#8fb0f7",width:.5},areaStyle:{color:"#8fb0f7",opacity:.2}},fillerColor:"rgba(135,175,274,0.2)",handleIcon:"path://M-9.35,34.56V42m0-40V9.5m-2,0h4a2,2,0,0,1,2,2v21a2,2,0,0,1-2,2h-4a2,2,0,0,1-2-2v-21A2,2,0,0,1-11.35,9.5Z",handleSize:"100%",handleStyle:{color:"#fff",borderColor:"#ACB8D1"},moveHandleSize:7,moveHandleIcon:"path://M-320.9-50L-320.9-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-348-41-339-50-320.9-50z M-212.3-50L-212.3-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-239.4-41-230.4-50-212.3-50z M-103.7-50L-103.7-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-130.9-41-121.8-50-103.7-50z",moveHandleStyle:{color:"#D2DBEE",opacity:.7},showDetail:!0,showDataShadow:"auto",realtime:!0,zoomLock:!1,textStyle:{color:"#6E7079"},brushSelect:!0,brushStyle:{color:"rgba(135,175,274,0.15)"},emphasis:{handleStyle:{borderColor:"#8FB0F7"},moveHandleStyle:{color:"#8FB0F7"}}}),t}(BL),hG=Ks,lG="horizontal",fG="vertical",pG=["line","bar","candlestick","scatter"],vG={easing:"cubicOut",duration:100};function mG(e){return"vertical"===e?"ns-resize":"ew-resize"}var gG=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return r.type=t.type,r._displayables={},r}return a(t,e),t.prototype.init=function(e,t){this.api=t,this._onBrush=F(this._onBrush,this),this._onBrushEnd=F(this._onBrushEnd,this)},t.prototype.render=function(t,r,i,n){if(e.prototype.render.apply(this,arguments),Rp(this,"_dispatchZoomAction",t.get("throttle"),"fixRate"),this._orient=t.getOrient(),!1!==t.get("show")){if(t.noTarget())return this._clear(),void this.group.removeAll();n&&"dataZoom"===n.type&&n.from===this.uid||this._buildView(),this._updateView()}else this.group.removeAll()},t.prototype.dispose=function(){this._clear(),e.prototype.dispose.apply(this,arguments)},t.prototype._clear=function(){!function(e,t){var r=e[t];r&&r[Pp]&&(e[t]=r[Pp])}(this,"_dispatchZoomAction");var e=this.api.getZr();e.off("mousemove",this._onBrush),e.off("mouseup",this._onBrushEnd)},t.prototype._buildView=function(){var e=this.group;e.removeAll(),this._brushing=!1,this._displayables.brushRect=null,this._resetLocation(),this._resetInterval();var t=this._displayables.sliderGroup=new Ti;this._renderBackground(),this._renderHandle(),this._renderDataShadow(),e.add(t),this._positionGroup()},t.prototype._resetLocation=function(){var e=this.dataZoomModel,t=this.api,r=e.get("brushSelect")?7:0,i=this._findCoordRect(),n={width:t.getWidth(),height:t.getHeight()},a=this._orient===lG?{right:n.width-i.x-i.width,top:n.height-30-7-r,width:i.width,height:30}:{right:7,top:i.y,width:30,height:i.height},s=Rh(e.option);L(["right","top","width","height"],(function(e){"ph"===s[e]&&(s[e]=a[e])}));var o=Ph(s,n);this._location={x:o.x,y:o.y},this._size=[o.width,o.height],this._orient===fG&&this._size.reverse()},t.prototype._positionGroup=function(){var e=this.group,t=this._location,r=this._orient,i=this.dataZoomModel.getFirstTargetAxisModel(),n=i&&i.get("inverse"),a=this._displayables.sliderGroup,s=(this._dataShadowInfo||{}).otherAxisInverse;a.attr(r!==lG||n?r===lG&&n?{scaleY:s?1:-1,scaleX:-1}:r!==fG||n?{scaleY:s?-1:1,scaleX:-1,rotation:Math.PI/2}:{scaleY:s?-1:1,scaleX:1,rotation:Math.PI/2}:{scaleY:s?1:-1,scaleX:1});var o=e.getBoundingRect([a]);e.x=t.x-o.x,e.y=t.y-o.y,e.markRedraw()},t.prototype._getViewExtent=function(){return[0,this._size[0]]},t.prototype._renderBackground=function(){var e=this.dataZoomModel,t=this._size,r=this._displayables.sliderGroup,i=e.get("brushSelect");r.add(new hG({silent:!0,shape:{x:0,y:0,width:t[0],height:t[1]},style:{fill:e.get("backgroundColor")},z2:-40}));var n=new hG({shape:{x:0,y:0,width:t[0],height:t[1]},style:{fill:"transparent"},z2:0,onclick:F(this._onClickPanel,this)}),a=this.api.getZr();i?(n.on("mousedown",this._onBrushStart,this),n.cursor="crosshair",a.on("mousemove",this._onBrush),a.on("mouseup",this._onBrushEnd)):(a.off("mousemove",this._onBrush),a.off("mouseup",this._onBrushEnd)),r.add(n)},t.prototype._renderDataShadow=function(){var e=this._dataShadowInfo=this._prepareDataShadowInfo();if(this._displayables.dataShadowSegs=[],e){var t=this._size,r=e.series,i=r.getRawData(),n=r.getShadowDim?r.getShadowDim():e.otherDim;if(null!=n){var a=i.getDataExtent(n),s=.3*(a[1]-a[0]);a=[a[0]-s,a[1]+s];var o,u=[0,t[1]],c=[0,t[0]],d=[[t[0],0],[0,0]],h=[],l=c[1]/(i.count()-1),f=0,p=Math.round(i.count()/t[0]);i.each([n],(function(e,t){if(p>0&&t%p)f+=l;else{var r=null==e||isNaN(e)||""===e,i=r?0:Pi(e,a,u,!0);r&&!o&&t?(d.push([d[d.length-1][0],0]),h.push([h[h.length-1][0],0])):!r&&o&&(d.push([f,0]),h.push([f,0])),d.push([f,i]),h.push([f,i]),f+=l,o=r}}));for(var v=this.dataZoomModel,m=0;m<3;m++){var g=y(1===m);this._displayables.sliderGroup.add(g),this._displayables.dataShadowSegs.push(g)}}}function y(e){var t=v.getModel(e?"selectedDataBackground":"dataBackground"),r=new Ti,i=new Zu({shape:{points:d},segmentIgnoreThreshold:1,style:t.getModel("areaStyle").getAreaStyle(),silent:!0,z2:-20}),n=new Ju({shape:{points:h},segmentIgnoreThreshold:1,style:t.getModel("lineStyle").getLineStyle(),silent:!0,z2:-19});return r.add(i),r.add(n),r}},t.prototype._prepareDataShadowInfo=function(){var e=this.dataZoomModel,t=e.get("showDataShadow");if(!1!==t){var r,i=this.ecModel;return e.eachTargetAxis((function(n,a){L(e.getAxisProxy(n,a).getTargetSeriesModels(),(function(e){if(!r&&!(!0!==t&&E(pG,e.get("type"))<0)){var s,o=i.getComponent(EL(n),a).axis,u={x:"y",y:"x",radius:"angle",angle:"radius"}[n],c=e.coordinateSystem;null!=u&&c.getOtherAxis&&(s=c.getOtherAxis(o).inverse),u=e.getData().mapDimension(u),r={thisAxis:o,series:e,thisDim:n,otherDim:u,otherAxisInverse:s}}}),this)}),this),r}},t.prototype._renderHandle=function(){var e=this.group,t=this._displayables,r=t.handles=[null,null],i=t.handleLabels=[null,null],n=this._displayables.sliderGroup,a=this._size,s=this.dataZoomModel,o=this.api,u=s.get("borderRadius")||0,c=s.get("brushSelect"),d=t.filler=new hG({silent:c,style:{fill:s.get("fillerColor")},textConfig:{position:"inside"}});n.add(d),n.add(new hG({silent:!0,subPixelOptimize:!0,shape:{x:0,y:0,width:a[0],height:a[1],r:u},style:{stroke:s.get("dataBackgroundColor")||s.get("borderColor"),lineWidth:1,fill:"rgba(0,0,0,0)"}})),L([0,1],(function(t){var a=s.get("handleIcon");!pm[a]&&a.indexOf("path://")<0&&a.indexOf("image://")<0&&(a="path://"+a);var o=gm(a,-1,0,2,2,null,!0);o.attr({cursor:mG(this._orient),draggable:!0,drift:F(this._onDragMove,this,t),ondragend:F(this._onDragEnd,this),onmouseover:F(this._showDataInfo,this,!0),onmouseout:F(this._showDataInfo,this,!1),z2:5});var u=o.getBoundingRect(),c=s.get("handleSize");this._handleHeight=Di(c,this._size[1]),this._handleWidth=u.width/u.height*this._handleHeight,o.setStyle(s.getModel("handleStyle").getItemStyle()),o.style.strokeNoScale=!0,o.rectHover=!0,o.ensureState("emphasis").style=s.getModel(["emphasis","handleStyle"]).getItemStyle(),Xo(o);var d=s.get("handleColor");null!=d&&(o.style.fill=d),n.add(r[t]=o);var h=s.getModel("textStyle");e.add(i[t]=new no({silent:!0,invisible:!0,style:cd(h,{x:0,y:0,text:"",verticalAlign:"middle",align:"center",fill:h.getTextColor(),font:h.getFont()}),z2:10}))}),this);var h=d;if(c){var l=Di(s.get("moveHandleSize"),a[1]),f=t.moveHandle=new Ks({style:s.getModel("moveHandleStyle").getItemStyle(),silent:!0,shape:{r:[0,0,2,2],y:a[1]-.5,height:l}}),p=.8*l,v=t.moveHandleIcon=gm(s.get("moveHandleIcon"),-p/2,-p/2,p,p,"#fff",!0);v.silent=!0,v.y=a[1]+l/2-.5,f.ensureState("emphasis").style=s.getModel(["emphasis","moveHandleStyle"]).getItemStyle();var m=Math.min(a[1]/2,Math.max(l,10));(h=t.moveZone=new Ks({invisible:!0,shape:{y:a[1]-m,height:l+m}})).on("mouseover",(function(){o.enterEmphasis(f)})).on("mouseout",(function(){o.leaveEmphasis(f)})),n.add(f),n.add(v),n.add(h)}h.attr({draggable:!0,cursor:mG(this._orient),drift:F(this._onDragMove,this,"all"),ondragstart:F(this._showDataInfo,this,!0),ondragend:F(this._onDragEnd,this),onmouseover:F(this._showDataInfo,this,!0),onmouseout:F(this._showDataInfo,this,!1)})},t.prototype._resetInterval=function(){var e=this._range=this.dataZoomModel.getPercentRange(),t=this._getViewExtent();this._handleEnds=[Pi(e[0],[0,100],t,!0),Pi(e[1],[0,100],t,!0)]},t.prototype._updateInterval=function(e,t){var r=this.dataZoomModel,i=this._handleEnds,n=this._getViewExtent(),a=r.findRepresentativeAxisProxy().getMinMaxSpan(),s=[0,100];AI(t,i,n,r.get("zoomLock")?"all":e,null!=a.minSpan?Pi(a.minSpan,s,n,!0):null,null!=a.maxSpan?Pi(a.maxSpan,s,n,!0):null);var o=this._range,u=this._range=Bi([Pi(i[0],n,s,!0),Pi(i[1],n,s,!0)]);return!o||o[0]!==u[0]||o[1]!==u[1]},t.prototype._updateView=function(e){var t=this._displayables,r=this._handleEnds,i=Bi(r.slice()),n=this._size;L([0,1],(function(e){var i=t.handles[e],a=this._handleHeight;i.attr({scaleX:a/2,scaleY:a/2,x:r[e]+(e?-1:1),y:n[1]/2-a/2})}),this),t.filler.setShape({x:i[0],y:0,width:i[1]-i[0],height:n[1]});var a={x:i[0],width:i[1]-i[0]};t.moveHandle&&(t.moveHandle.setShape(a),t.moveZone.setShape(a),t.moveZone.getBoundingRect(),t.moveHandleIcon&&t.moveHandleIcon.attr("x",a.x+a.width/2));for(var s=t.dataShadowSegs,o=[0,i[0],i[1],n[0]],u=0;u<s.length;u++){var c=s[u],d=c.getClipPath();d||(d=new Ks,c.setClipPath(d)),d.setShape({x:o[u],y:0,width:o[u+1]-o[u],height:n[1]})}this._updateDataInfo(e)},t.prototype._updateDataInfo=function(e){var t=this.dataZoomModel,r=this._displayables,i=r.handleLabels,n=this._orient,a=["",""];if(t.get("showDetail")){var s=t.findRepresentativeAxisProxy();if(s){var o=s.getAxisModel().axis,u=this._range,c=e?s.calculateDataWindow({start:u[0],end:u[1]}).valueWindow:s.getDataValueWindow();a=[this._formatLabel(c[0],o),this._formatLabel(c[1],o)]}}var d=Bi(this._handleEnds.slice());function h(e){var t=Wc(r.handles[e].parent,this.group),s=Xc(0===e?"right":"left",t),o=this._handleWidth/2+5,u=Kc([d[e]+(0===e?-o:o),this._size[1]/2],t);i[e].setStyle({x:u[0],y:u[1],verticalAlign:n===lG?"middle":s,align:n===lG?s:"center",text:a[e]})}h.call(this,0),h.call(this,1)},t.prototype._formatLabel=function(e,t){var r=this.dataZoomModel,i=r.get("labelFormatter"),n=r.get("labelPrecision");null!=n&&"auto"!==n||(n=t.getPixelPrecision());var a=null==e||isNaN(e)?"":"category"===t.type||"time"===t.type?t.scale.getLabel({value:Math.round(e)}):e.toFixed(Math.min(n,20));return z(i)?i(e,a):H(i)?i.replace("{value}",a):a},t.prototype._showDataInfo=function(e){e=this._dragging||e;var t=this._displayables,r=t.handleLabels;r[0].attr("invisible",!e),r[1].attr("invisible",!e),t.moveHandle&&this.api[e?"enterEmphasis":"leaveEmphasis"](t.moveHandle,1)},t.prototype._onDragMove=function(e,t,r,i){this._dragging=!0,Ze(i.event);var n=Kc([t,r],this._displayables.sliderGroup.getLocalTransform(),!0),a=this._updateInterval(e,n[0]),s=this.dataZoomModel.get("realtime");this._updateView(!s),a&&s&&this._dispatchZoomAction(!0)},t.prototype._onDragEnd=function(){this._dragging=!1,this._showDataInfo(!1),!this.dataZoomModel.get("realtime")&&this._dispatchZoomAction(!1)},t.prototype._onClickPanel=function(e){var t=this._size,r=this._displayables.sliderGroup.transformCoordToLocal(e.offsetX,e.offsetY);if(!(r[0]<0||r[0]>t[0]||r[1]<0||r[1]>t[1])){var i=this._handleEnds,n=(i[0]+i[1])/2,a=this._updateInterval("all",r[0]-n);this._updateView(),a&&this._dispatchZoomAction(!1)}},t.prototype._onBrushStart=function(e){var t=e.offsetX,r=e.offsetY;this._brushStart=new pr(t,r),this._brushing=!0,this._brushStartTime=+new Date},t.prototype._onBrushEnd=function(e){if(this._brushing){var t=this._displayables.brushRect;if(this._brushing=!1,t){t.attr("ignore",!0);var r=t.shape;if(!(+new Date-this._brushStartTime<200&&Math.abs(r.width)<5)){var i=this._getViewExtent(),n=[0,100];this._range=Bi([Pi(r.x,i,n,!0),Pi(r.x+r.width,i,n,!0)]),this._handleEnds=[r.x,r.x+r.width],this._updateView(),this._dispatchZoomAction(!1)}}}},t.prototype._onBrush=function(e){this._brushing&&(Ze(e.event),this._updateBrushRect(e.offsetX,e.offsetY))},t.prototype._updateBrushRect=function(e,t){var r=this._displayables,i=this.dataZoomModel,n=r.brushRect;n||(n=r.brushRect=new hG({silent:!0,style:i.getModel("brushStyle").getItemStyle()}),r.sliderGroup.add(n)),n.attr("ignore",!1);var a=this._brushStart,s=this._displayables.sliderGroup,o=s.transformCoordToLocal(e,t),u=s.transformCoordToLocal(a.x,a.y),c=this._size;o[0]=Math.max(Math.min(c[0],o[0]),0),n.setShape({x:u[0],y:0,width:o[0]-u[0],height:c[1]})},t.prototype._dispatchZoomAction=function(e){var t=this._range;this.api.dispatchAction({type:"dataZoom",from:this.uid,dataZoomId:this.dataZoomModel.id,animation:e?vG:null,start:t[0],end:t[1]})},t.prototype._findCoordRect=function(){var e,t=PL(this.dataZoomModel).infoList;if(!e&&t.length){var r=t[0].model.coordinateSystem;e=r.getRect&&r.getRect()}if(!e){var i=this.api.getWidth(),n=this.api.getHeight();e={x:.2*i,y:.2*n,width:.6*i,height:.6*n}}return e},t.type="dataZoom.slider",t}(VL);function yG(e){e.registerComponentModel(dG),e.registerComponentView(gG),UL(e)}var bG={get:function(e,t,r){var i=O((xG[e]||{})[t]);return r&&j(i)?i[i.length-1]:i}},xG={color:{active:["#006edd","#e0ffff"],inactive:["rgba(0,0,0,0)"]},colorHue:{active:[0,360],inactive:[0,0]},colorSaturation:{active:[.3,1],inactive:[0,0]},colorLightness:{active:[.9,.5],inactive:[0,0]},colorAlpha:{active:[.3,1],inactive:[0,0]},opacity:{active:[.3,1],inactive:[0,0]},symbol:{active:["circle","roundRect","diamond"],inactive:["none"]},symbolSize:{active:[10,50],inactive:[0,0]}},kG=bG,wG=PT.mapVisual,_G=PT.eachVisual,SG=j,OG=L,TG=Bi,CG=Pi,IG=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return r.type=t.type,r.stateList=["inRange","outOfRange"],r.replacableOptionKeys=["inRange","outOfRange","target","controller","color"],r.layoutMode={type:"box",ignoreSize:!0},r.dataBound=[-1/0,1/0],r.targetVisuals={},r.controllerVisuals={},r}return a(t,e),t.prototype.init=function(e,t,r){this.mergeDefaultAndTheme(e,r)},t.prototype.optionUpdated=function(e,t){var r=this.option;d.canvasSupported||(r.realtime=!1),!t&&bR(r,e,this.replacableOptionKeys),this.textStyleModel=this.getModel("textStyle"),this.resetItemSize(),this.completeVisualOption()},t.prototype.resetVisual=function(e){var t=this.stateList;e=F(e,this),this.controllerVisuals=yR(this.option.controller,t,e),this.targetVisuals=yR(this.option.target,t,e)},t.prototype.getItemSymbol=function(){return null},t.prototype.getTargetSeriesIndices=function(){var e=this.option.seriesIndex,t=[];return null==e||"all"===e?this.ecModel.eachSeries((function(e,r){t.push(r)})):t=tn(e),t},t.prototype.eachTargetSeries=function(e,t){L(this.getTargetSeriesIndices(),(function(r){var i=this.ecModel.getSeriesByIndex(r);i&&e.call(t,i)}),this)},t.prototype.isTargetSeries=function(e){var t=!1;return this.eachTargetSeries((function(r){r===e&&(t=!0)})),t},t.prototype.formatValueText=function(e,t,r){var i,n=this.option,a=n.precision,s=this.dataBound,o=n.formatter;r=r||["<",">"],j(e)&&(e=e.slice(),i=!0);var u=t?e:i?[c(e[0]),c(e[1])]:c(e);return H(o)?o.replace("{value}",i?u[0]:u).replace("{value2}",i?u[1]:u):z(o)?i?o(e[0],e[1]):o(e):i?e[0]===s[0]?r[0]+" "+u[1]:e[1]===s[1]?r[1]+" "+u[0]:u[0]+" - "+u[1]:u;function c(e){return e===s[0]?"min":e===s[1]?"max":(+e).toFixed(Math.min(a,20))}},t.prototype.resetExtent=function(){var e=this.option,t=TG([e.min,e.max]);this._dataExtent=t},t.prototype.getDataDimension=function(e){var t=this.option.dimension,r=e.dimensions;if(null!=t||r.length){if(null!=t)return e.getDimension(t);for(var i=e.dimensions,n=i.length-1;n>=0;n--){var a=i[n];if(!e.getDimensionInfo(a).isCalculationCoord)return a}}},t.prototype.getExtent=function(){return this._dataExtent.slice()},t.prototype.completeVisualOption=function(){var e=this.ecModel,t=this.option,r={inRange:t.inRange,outOfRange:t.outOfRange},i=t.target||(t.target={}),n=t.controller||(t.controller={});T(i,r),T(n,r);var a=this.isCategory();function s(r){SG(t.color)&&!r.inRange&&(r.inRange={color:t.color.slice().reverse()}),r.inRange=r.inRange||{color:e.get("gradientColor")}}s.call(this,i),s.call(this,n),function(e,t,r){var i=e[t],n=e[r];i&&!n&&(n=e[r]={},OG(i,(function(e,t){if(PT.isValidType(t)){var r=kG.get(t,"inactive",a);null!=r&&(n[t]=r,"color"!==t||n.hasOwnProperty("opacity")||n.hasOwnProperty("colorAlpha")||(n.opacity=[0,0]))}})))}.call(this,i,"inRange","outOfRange"),function(e){var t=(e.inRange||{}).symbol||(e.outOfRange||{}).symbol,r=(e.inRange||{}).symbolSize||(e.outOfRange||{}).symbolSize,i=this.get("inactiveColor"),n=this.getItemSymbol()||"roundRect";OG(this.stateList,(function(s){var o=this.itemSize,u=e[s];u||(u=e[s]={color:a?i:[i]}),null==u.symbol&&(u.symbol=t&&O(t)||(a?n:[n])),null==u.symbolSize&&(u.symbolSize=r&&O(r)||(a?o[0]:[o[0],o[0]])),u.symbol=wG(u.symbol,(function(e){return"none"===e?n:e}));var c=u.symbolSize;if(null!=c){var d=-1/0;_G(c,(function(e){e>d&&(d=e)})),u.symbolSize=wG(c,(function(e){return CG(e,[0,d],[0,o[0]],!0)}))}}),this)}.call(this,n)},t.prototype.resetItemSize=function(){this.itemSize=[parseFloat(this.get("itemWidth")),parseFloat(this.get("itemHeight"))]},t.prototype.isCategory=function(){return!!this.option.categories},t.prototype.setSelected=function(e){},t.prototype.getSelected=function(){return null},t.prototype.getValueState=function(e){return null},t.prototype.getVisualMeta=function(e){return null},t.type="visualMap",t.dependencies=["series"],t.defaultOption={show:!0,zlevel:0,z:4,seriesIndex:"all",min:0,max:200,left:0,right:null,top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:!1,orient:"vertical",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",contentColor:"#5793f3",inactiveColor:"#aaa",borderWidth:0,padding:5,textGap:10,precision:0,textStyle:{color:"#333"}},t}(qh),MG=[20,140];function AG(e,t,r){if(r[0]===r[1])return r.slice();for(var i=(r[1]-r[0])/200,n=r[0],a=[],s=0;s<=200&&n<r[1];s++)a.push(n),n+=i;return a.push(r[1]),a}var EG=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return r.type=t.type,r}return a(t,e),t.prototype.optionUpdated=function(t,r){e.prototype.optionUpdated.apply(this,arguments),this.resetExtent(),this.resetVisual((function(e){e.mappingMethod="linear",e.dataExtent=this.getExtent()})),this._resetRange()},t.prototype.resetItemSize=function(){e.prototype.resetItemSize.apply(this,arguments);var t=this.itemSize;(null==t[0]||isNaN(t[0]))&&(t[0]=MG[0]),(null==t[1]||isNaN(t[1]))&&(t[1]=MG[1])},t.prototype._resetRange=function(){var e=this.getExtent(),t=this.option.range;!t||t.auto?(e.auto=1,this.option.range=e):j(t)&&(t[0]>t[1]&&t.reverse(),t[0]=Math.max(t[0],e[0]),t[1]=Math.min(t[1],e[1]))},t.prototype.completeVisualOption=function(){e.prototype.completeVisualOption.apply(this,arguments),L(this.stateList,(function(e){var t=this.option.controller[e].symbolSize;t&&t[0]!==t[1]&&(t[0]=t[1]/3)}),this)},t.prototype.setSelected=function(e){this.option.range=e.slice(),this._resetRange()},t.prototype.getSelected=function(){var e=this.getExtent(),t=Bi((this.get("range")||[]).slice());return t[0]>e[1]&&(t[0]=e[1]),t[1]>e[1]&&(t[1]=e[1]),t[0]<e[0]&&(t[0]=e[0]),t[1]<e[0]&&(t[1]=e[0]),t},t.prototype.getValueState=function(e){var t=this.option.range,r=this.getExtent();return(t[0]<=r[0]||t[0]<=e)&&(t[1]>=r[1]||e<=t[1])?"inRange":"outOfRange"},t.prototype.findTargetDataIndices=function(e){var t=[];return this.eachTargetSeries((function(r){var i=[],n=r.getData();n.each(this.getDataDimension(n),(function(t,r){e[0]<=t&&t<=e[1]&&i.push(r)}),this),t.push({seriesId:r.id,dataIndex:i})}),this),t},t.prototype.getVisualMeta=function(e){var t=AG(this,"outOfRange",this.getExtent()),r=AG(this,"inRange",this.option.range.slice()),i=[];function n(t,r){i.push({value:t,color:e(t,r)})}for(var a=0,s=0,o=r.length,u=t.length;s<u&&(!r.length||t[s]<=r[0]);s++)t[s]<r[a]&&n(t[s],"outOfRange");for(var c=1;a<o;a++,c=0)c&&i.length&&n(r[a],"outOfRange"),n(r[a],"inRange");for(c=1;s<u;s++)(!r.length||r[r.length-1]<t[s])&&(c&&(i.length&&n(i[i.length-1].value,"outOfRange"),c=0),n(t[s],"outOfRange"));var d=i.length;return{stops:i,outerColors:[d?i[0].color:"transparent",d?i[d-1].color:"transparent"]}},t.type="visualMap.continuous",t.defaultOption=Nd(IG.defaultOption,{align:"auto",calculable:!1,hoverLink:!0,realtime:!0,handleIcon:"path://M-11.39,9.77h0a3.5,3.5,0,0,1-3.5,3.5h-22a3.5,3.5,0,0,1-3.5-3.5h0a3.5,3.5,0,0,1,3.5-3.5h22A3.5,3.5,0,0,1-11.39,9.77Z",handleSize:"120%",handleStyle:{borderColor:"#fff",borderWidth:1},indicatorIcon:"circle",indicatorSize:"50%",indicatorStyle:{borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}}),t}(IG),NG=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return r.type=t.type,r.autoPositionValues={left:1,right:1,top:1,bottom:1},r}return a(t,e),t.prototype.init=function(e,t){this.ecModel=e,this.api=t},t.prototype.render=function(e,t,r,i){this.visualMapModel=e,!1!==e.get("show")?this.doRender(e,t,r,i):this.group.removeAll()},t.prototype.renderBackground=function(e){var t=this.visualMapModel,r=yh(t.get("padding")||0),i=e.getBoundingRect();e.add(new Ks({z2:-1,silent:!0,shape:{x:i.x-r[3],y:i.y-r[0],width:i.width+r[3]+r[1],height:i.height+r[0]+r[2]},style:{fill:t.get("backgroundColor"),stroke:t.get("borderColor"),lineWidth:t.get("borderWidth")}}))},t.prototype.getControllerVisual=function(e,t,r){var i=(r=r||{}).forceState,n=this.visualMapModel,a={};if("color"===t){var s=n.get("contentColor");a.color=s}function o(e){return a[e]}function u(e,t){a[e]=t}var c=n.controllerVisuals[i||n.getValueState(e)];return L(PT.prepareVisualTypes(c),(function(i){var n=c[i];r.convertOpacityToAlpha&&"opacity"===i&&(i="colorAlpha",n=c.__alphaForOpacity),PT.dependsOn(i,t)&&n&&n.applyVisual(e,o,u)})),a[t]},t.prototype.positionGroup=function(e){var t=this.visualMapModel,r=this.api;Dh(e,t.getBoxLayoutParams(),{width:r.getWidth(),height:r.getHeight()})},t.prototype.doRender=function(e,t,r,i){},t.type="visualMap",t}(wp),PG=[["left","right","width"],["top","bottom","height"]];function DG(e,t,r){var i=e.option,n=i.align;if(null!=n&&"auto"!==n)return n;for(var a={width:t.getWidth(),height:t.getHeight()},s="horizontal"===i.orient?1:0,o=PG[s],u=[0,null,10],c={},d=0;d<3;d++)c[PG[1-s][d]]=u[d],c[o[d]]=2===d?r[0]:i[o[d]];var h=[["x","width",3],["y","height",0]][s],l=Ph(c,a,i.padding);return o[(l.margin[h[2]]||0)+l[h[0]]+.5*l[h[1]]<.5*a[h[1]]?0:1]}function LG(e,t){return L(e||[],(function(e){null!=e.dataIndex&&(e.dataIndexInside=e.dataIndex,e.dataIndex=null),e.highlightKey="visualMap"+(t?t.componentIndex:"")})),e}var BG=Pi,RG=L,VG=Math.min,GG=Math.max;function FG(e,t,r,i){return new Zu({shape:{points:e},draggable:!!r,cursor:t,drift:r,onmousemove:function(e){Ze(e.event)},ondragend:i})}function qG(e){var t=e.get("hoverLinkOnHandle");return!!(null==t?e.get("realtime"):t)}function jG(e){return"vertical"===e?"ns-resize":"ew-resize"}var zG=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return r.type=t.type,r._shapes={},r._dataInterval=[],r._handleEnds=[],r._hoverLinkDataIndices=[],r}return a(t,e),t.prototype.doRender=function(e,t,r,i){this._api=r,i&&"selectDataRange"===i.type&&i.from===this.uid||this._buildView()},t.prototype._buildView=function(){this.group.removeAll();var e=this.visualMapModel,t=this.group;this._orient=e.get("orient"),this._useHandle=e.get("calculable"),this._resetInterval(),this._renderBar(t);var r=e.get("text");this._renderEndsText(t,r,0),this._renderEndsText(t,r,1),this._updateView(!0),this.renderBackground(t),this._updateView(),this._enableHoverLinkToSeries(),this._enableHoverLinkFromSeries(),this.positionGroup(t)},t.prototype._renderEndsText=function(e,t,r){if(t){var i=t[1-r];i=null!=i?i+"":"";var n=this.visualMapModel,a=n.get("textGap"),s=n.itemSize,o=this._shapes.mainGroup,u=this._applyTransform([s[0]/2,0===r?-a:s[1]+a],o),c=this._applyTransform(0===r?"bottom":"top",o),d=this._orient,h=this.visualMapModel.textStyleModel;this.group.add(new no({style:{x:u[0],y:u[1],verticalAlign:"horizontal"===d?"middle":c,align:"horizontal"===d?c:"center",text:i,font:h.getFont(),fill:h.getTextColor()}}))}},t.prototype._renderBar=function(e){var t=this.visualMapModel,r=this._shapes,i=t.itemSize,n=this._orient,a=this._useHandle,s=DG(t,this.api,i),o=r.mainGroup=this._createBarGroup(s),u=new Ti;o.add(u),u.add(r.outOfRange=FG()),u.add(r.inRange=FG(null,a?jG(this._orient):null,F(this._dragHandle,this,"all",!1),F(this._dragHandle,this,"all",!0))),u.setClipPath(new Ks({shape:{x:0,y:0,width:i[0],height:i[1],r:3}}));var c=t.textStyleModel.getTextRect("\u56fd"),d=GG(c.width,c.height);a&&(r.handleThumbs=[],r.handleLabels=[],r.handleLabelPoints=[],this._createHandle(t,o,0,i,d,n),this._createHandle(t,o,1,i,d,n)),this._createIndicator(t,o,i,d,n),e.add(o)},t.prototype._createHandle=function(e,t,r,i,n,a){var s=F(this._dragHandle,this,r,!1),o=F(this._dragHandle,this,r,!0),u=Pr(e.get("handleSize"),i[0]),c=gm(e.get("handleIcon"),-u/2,-u/2,u,u,null,!0),d=jG(this._orient);c.attr({cursor:d,draggable:!0,drift:s,ondragend:o,onmousemove:function(e){Ze(e.event)}}),c.x=i[0]/2,c.useStyle(e.getModel("handleStyle").getItemStyle()),c.setStyle({strokeNoScale:!0,strokeFirst:!0}),c.style.lineWidth*=2,c.ensureState("emphasis").style=e.getModel(["emphasis","handleStyle"]).getItemStyle(),Jo(c,!0),t.add(c);var h=this.visualMapModel.textStyleModel,l=new no({cursor:d,draggable:!0,drift:s,onmousemove:function(e){Ze(e.event)},ondragend:o,style:{x:0,y:0,text:"",font:h.getFont(),fill:h.getTextColor()}});l.ensureState("blur").style={opacity:.1},l.stateTransition={duration:200},this.group.add(l);var f=[u,0],p=this._shapes;p.handleThumbs[r]=c,p.handleLabelPoints[r]=f,p.handleLabels[r]=l},t.prototype._createIndicator=function(e,t,r,i,n){var a=Pr(e.get("indicatorSize"),r[0]),s=gm(e.get("indicatorIcon"),-a/2,-a/2,a,a,null,!0);s.attr({cursor:"move",invisible:!0,silent:!0,x:r[0]/2});var o=e.getModel("indicatorStyle").getItemStyle();if(s instanceof Gs){var u=s.style;s.useStyle(I({image:u.image,x:u.x,y:u.y,width:u.width,height:u.height},o))}else s.useStyle(o);t.add(s);var c=this.visualMapModel.textStyleModel,d=new no({silent:!0,invisible:!0,style:{x:0,y:0,text:"",font:c.getFont(),fill:c.getTextColor()}});this.group.add(d);var h=[("horizontal"===n?i/2:6)+r[0]/2,0],l=this._shapes;l.indicator=s,l.indicatorLabel=d,l.indicatorLabelPoint=h,this._firstShowIndicator=!0},t.prototype._dragHandle=function(e,t,r,i){if(this._useHandle){if(this._dragging=!t,!t){var n=this._applyTransform([r,i],this._shapes.mainGroup,!0);this._updateInterval(e,n[1]),this._hideIndicator(),this._updateView()}t===!this.visualMapModel.get("realtime")&&this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:this._dataInterval.slice()}),t?!this._hovering&&this._clearHoverLinkToSeries():qG(this.visualMapModel)&&this._doHoverLinkToSeries(this._handleEnds[e],!1)}},t.prototype._resetInterval=function(){var e=this.visualMapModel,t=this._dataInterval=e.getSelected(),r=e.getExtent(),i=[0,e.itemSize[1]];this._handleEnds=[BG(t[0],r,i,!0),BG(t[1],r,i,!0)]},t.prototype._updateInterval=function(e,t){t=t||0;var r=this.visualMapModel,i=this._handleEnds,n=[0,r.itemSize[1]];AI(t,i,n,e,0);var a=r.getExtent();this._dataInterval=[BG(i[0],n,a,!0),BG(i[1],n,a,!0)]},t.prototype._updateView=function(e){var t=this.visualMapModel,r=t.getExtent(),i=this._shapes,n=[0,t.itemSize[1]],a=e?n:this._handleEnds,s=this._createBarVisual(this._dataInterval,r,a,"inRange"),o=this._createBarVisual(r,r,n,"outOfRange");i.inRange.setStyle({fill:s.barColor}).setShape("points",s.barPoints),i.outOfRange.setStyle({fill:o.barColor}).setShape("points",o.barPoints),this._updateHandle(a,s)},t.prototype._createBarVisual=function(e,t,r,i){var n={forceState:i,convertOpacityToAlpha:!0},a=this._makeColorGradient(e,n),s=[this.getControllerVisual(e[0],"symbolSize",n),this.getControllerVisual(e[1],"symbolSize",n)],o=this._createBarPoints(r,s);return{barColor:new pc(0,0,0,1,a),barPoints:o,handlesColor:[a[0].color,a[a.length-1].color]}},t.prototype._makeColorGradient=function(e,t){var r=[],i=(e[1]-e[0])/100;r.push({color:this.getControllerVisual(e[0],"color",t),offset:0});for(var n=1;n<100;n++){var a=e[0]+i*n;if(a>e[1])break;r.push({color:this.getControllerVisual(a,"color",t),offset:n/100})}return r.push({color:this.getControllerVisual(e[1],"color",t),offset:1}),r},t.prototype._createBarPoints=function(e,t){var r=this.visualMapModel.itemSize;return[[r[0]-t[0],e[0]],[r[0],e[0]],[r[0],e[1]],[r[0]-t[1],e[1]]]},t.prototype._createBarGroup=function(e){var t=this._orient,r=this.visualMapModel.get("inverse");return new Ti("horizontal"!==t||r?"horizontal"===t&&r?{scaleX:"bottom"===e?-1:1,rotation:-Math.PI/2}:"vertical"!==t||r?{scaleX:"left"===e?1:-1}:{scaleX:"left"===e?1:-1,scaleY:-1}:{scaleX:"bottom"===e?1:-1,rotation:Math.PI/2})},t.prototype._updateHandle=function(e,t){if(this._useHandle){var r=this._shapes,i=this.visualMapModel,n=r.handleThumbs,a=r.handleLabels,s=i.itemSize,o=i.getExtent();RG([0,1],(function(u){var c=n[u];c.setStyle("fill",t.handlesColor[u]),c.y=e[u];var d=BG(e[u],[0,s[1]],o,!0),h=this.getControllerVisual(d,"symbolSize");c.scaleX=c.scaleY=h/s[0],c.x=s[0]-h/2;var l=Kc(r.handleLabelPoints[u],Wc(c,this.group));a[u].setStyle({x:l[0],y:l[1],text:i.formatValueText(this._dataInterval[u]),verticalAlign:"middle",align:"vertical"===this._orient?this._applyTransform("left",r.mainGroup):"center"})}),this)}},t.prototype._showIndicator=function(e,t,r,i){var n=this.visualMapModel,a=n.getExtent(),s=n.itemSize,o=[0,s[1]],u=this._shapes,c=u.indicator;if(c){c.attr("invisible",!1);var d=this.getControllerVisual(e,"color",{convertOpacityToAlpha:!0}),h=this.getControllerVisual(e,"symbolSize"),l=BG(e,a,o,!0),f=s[0]-h/2,p={x:c.x,y:c.y};c.y=l,c.x=f;var v=Kc(u.indicatorLabelPoint,Wc(c,this.group)),m=u.indicatorLabel;m.attr("invisible",!1);var g=this._applyTransform("left",u.mainGroup),y="horizontal"===this._orient;m.setStyle({text:(r||"")+n.formatValueText(t),verticalAlign:y?g:"middle",align:y?"center":g});var b={x:f,y:l,style:{fill:d}},x={style:{x:v[0],y:v[1]}};if(n.ecModel.isAnimationEnabled()&&!this._firstShowIndicator){var k={duration:100,easing:"cubicInOut",additive:!0};c.x=p.x,c.y=p.y,c.animateTo(b,k),m.animateTo(x,k)}else c.attr(b),m.attr(x);this._firstShowIndicator=!1;var w=this._shapes.handleLabels;if(w)for(var _=0;_<w.length;_++)this._api.enterBlur(w[_])}},t.prototype._enableHoverLinkToSeries=function(){var e=this;this._shapes.mainGroup.on("mousemove",(function(t){if(e._hovering=!0,!e._dragging){var r=e.visualMapModel.itemSize,i=e._applyTransform([t.offsetX,t.offsetY],e._shapes.mainGroup,!0,!0);i[1]=VG(GG(0,i[1]),r[1]),e._doHoverLinkToSeries(i[1],0<=i[0]&&i[0]<=r[0])}})).on("mouseout",(function(){e._hovering=!1,!e._dragging&&e._clearHoverLinkToSeries()}))},t.prototype._enableHoverLinkFromSeries=function(){var e=this.api.getZr();this.visualMapModel.option.hoverLink?(e.on("mouseover",this._hoverLinkFromSeriesMouseOver,this),e.on("mouseout",this._hideIndicator,this)):this._clearHoverLinkFromSeries()},t.prototype._doHoverLinkToSeries=function(e,t){var r=this.visualMapModel,i=r.itemSize;if(r.option.hoverLink){var n=[0,i[1]],a=r.getExtent();e=VG(GG(n[0],e),n[1]);var s=function(e,t,r){var i=6,n=e.get("hoverLinkDataSize");n&&(i=BG(n,t,r,!0)/2);return i}(r,a,n),o=[e-s,e+s],u=BG(e,n,a,!0),c=[BG(o[0],n,a,!0),BG(o[1],n,a,!0)];o[0]<n[0]&&(c[0]=-1/0),o[1]>n[1]&&(c[1]=1/0),t&&(c[0]===-1/0?this._showIndicator(u,c[1],"< ",s):c[1]===1/0?this._showIndicator(u,c[0],"> ",s):this._showIndicator(u,u,"\u2248 ",s));var d=this._hoverLinkDataIndices,h=[];(t||qG(r))&&(h=this._hoverLinkDataIndices=r.findTargetDataIndices(c));var l=function(e,t){var r={},i={};return n(e||[],r),n(t||[],i,r),[a(r),a(i)];function n(e,t,r){for(var i=0,n=e.length;i<n;i++){var a=cn(e[i].seriesId,null);if(null==a)return;for(var s=tn(e[i].dataIndex),o=r&&r[a],u=0,c=s.length;u<c;u++){var d=s[u];o&&o[d]?o[d]=null:(t[a]||(t[a]={}))[d]=1}}}function a(e,t){var r=[];for(var i in e)if(e.hasOwnProperty(i)&&null!=e[i])if(t)r.push(+i);else{var n=a(e[i],!0);n.length&&r.push({seriesId:i,dataIndex:n})}return r}}(d,h);this._dispatchHighDown("downplay",LG(l[0],r)),this._dispatchHighDown("highlight",LG(l[1],r))}},t.prototype._hoverLinkFromSeriesMouseOver=function(e){var t=e.target,r=this.visualMapModel;if(t&&null!=ao(t).dataIndex){var i=ao(t),n=this.ecModel.getSeriesByIndex(i.seriesIndex);if(r.isTargetSeries(n)){var a=n.getData(i.dataType),s=a.get(r.getDataDimension(a),i.dataIndex);isNaN(s)||this._showIndicator(s,s)}}},t.prototype._hideIndicator=function(){var e=this._shapes;e.indicator&&e.indicator.attr("invisible",!0),e.indicatorLabel&&e.indicatorLabel.attr("invisible",!0);var t=this._shapes.handleLabels;if(t)for(var r=0;r<t.length;r++)this._api.leaveBlur(t[r])},t.prototype._clearHoverLinkToSeries=function(){this._hideIndicator();var e=this._hoverLinkDataIndices;this._dispatchHighDown("downplay",LG(e,this.visualMapModel)),e.length=0},t.prototype._clearHoverLinkFromSeries=function(){this._hideIndicator();var e=this.api.getZr();e.off("mouseover",this._hoverLinkFromSeriesMouseOver),e.off("mouseout",this._hideIndicator)},t.prototype._applyTransform=function(e,t,r,i){var n=Wc(t,i?null:this.group);return j(e)?Kc(e,n,r):Xc(e,n,r)},t.prototype._dispatchHighDown=function(e,t){t&&t.length&&this.api.dispatchAction({type:e,batch:t})},t.prototype.dispose=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},t.prototype.remove=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},t.type="visualMap.continuous",t}(NG),HG={type:"selectDataRange",event:"dataRangeSelected",update:"update"},UG=function(e,t){t.eachComponent({mainType:"visualMap",query:e},(function(t){t.setSelected(e.selected)}))},WG=[{createOnAllSeries:!0,reset:function(e,t){var r=[];return t.eachComponent("visualMap",(function(t){var i=e.pipelineContext;!t.isTargetSeries(e)||i&&i.large||r.push(function(e,t,r,i){var n={};return L(e,(function(e){var r=PT.prepareVisualTypes(t[e]);n[e]=r})),{progress:function(e,a){var s,o;function u(e){return xv(a,o,e)}function c(e,t){wv(a,o,e,t)}for(null!=i&&(s=a.getDimension(i));null!=(o=e.next());){var d=a.getRawDataItem(o);if(!d||!1!==d.visualMap)for(var h=null!=i?a.get(s,o):o,l=r(h),f=t[l],p=n[l],v=0,m=p.length;v<m;v++){var g=p[v];f[g]&&f[g].applyVisual(h,u,c)}}}}}(t.stateList,t.targetVisuals,F(t.getValueState,t),t.getDataDimension(e.getData())))})),r}},{createOnAllSeries:!0,reset:function(e,t){var r=e.getData(),i=[];t.eachComponent("visualMap",(function(t){if(t.isTargetSeries(e)){var n=t.getVisualMeta(F(KG,null,e,t))||{stops:[],outerColors:[]},a=t.getDataDimension(r),s=r.getDimensionInfo(a);null!=s&&(n.dimension=s.index,i.push(n))}})),e.getData().setVisual("visualMeta",i)}}];function KG(e,t,r,i){for(var n=t.targetVisuals[i],a=PT.prepareVisualTypes(n),s={color:kv(e.getData(),"color")},o=0,u=a.length;o<u;o++){var c=a[o],d=n["opacity"===c?"__alphaForOpacity":c];d&&d.applyVisual(r,h,l)}return s.color;function h(e){return s[e]}function l(e,t){s[e]=t}}var XG=L;function YG(e){var t=e&&e.visualMap;j(t)||(t=t?[t]:[]),XG(t,(function(e){if(e){ZG(e,"splitList")&&!ZG(e,"pieces")&&(e.pieces=e.splitList,delete e.splitList);var t=e.pieces;t&&j(t)&&XG(t,(function(e){K(e)&&(ZG(e,"start")&&!ZG(e,"min")&&(e.min=e.start),ZG(e,"end")&&!ZG(e,"max")&&(e.max=e.end))}))}}))}function ZG(e,t){return e&&e.hasOwnProperty&&e.hasOwnProperty(t)}var QG=!1;function $G(e){QG||(QG=!0,e.registerSubTypeDefaulter("visualMap",(function(e){return e.categories||(e.pieces?e.pieces.length>0:e.splitNumber>0)&&!e.calculable?"piecewise":"continuous"})),e.registerAction(HG,UG),L(WG,(function(t){e.registerVisual(e.PRIORITY.VISUAL.COMPONENT,t)})),e.registerPreprocessor(YG))}function JG(e){e.registerComponentModel(EG),e.registerComponentView(zG),$G(e)}var eF=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return r.type=t.type,r._pieceList=[],r}return a(t,e),t.prototype.optionUpdated=function(t,r){e.prototype.optionUpdated.apply(this,arguments),this.resetExtent();var i=this._mode=this._determineMode();this._pieceList=[],tF[this._mode].call(this,this._pieceList),this._resetSelected(t,r);var n=this.option.categories;this.resetVisual((function(e,t){"categories"===i?(e.mappingMethod="category",e.categories=O(n)):(e.dataExtent=this.getExtent(),e.mappingMethod="piecewise",e.pieceList=B(this._pieceList,(function(e){return e=O(e),"inRange"!==t&&(e.visual=null),e})))}))},t.prototype.completeVisualOption=function(){var t=this.option,r={},i=PT.listVisualTypes(),n=this.isCategory();function a(e,t,r){return e&&e[t]&&e[t].hasOwnProperty(r)}L(t.pieces,(function(e){L(i,(function(t){e.hasOwnProperty(t)&&(r[t]=1)}))})),L(r,(function(e,r){var i=!1;L(this.stateList,(function(e){i=i||a(t,e,r)||a(t.target,e,r)}),this),!i&&L(this.stateList,(function(e){(t[e]||(t[e]={}))[r]=kG.get(r,"inRange"===e?"active":"inactive",n)}))}),this),e.prototype.completeVisualOption.apply(this,arguments)},t.prototype._resetSelected=function(e,t){var r=this.option,i=this._pieceList,n=(t?r:e).selected||{};if(r.selected=n,L(i,(function(e,t){var r=this.getSelectedMapKey(e);n.hasOwnProperty(r)||(n[r]=!0)}),this),"single"===r.selectedMode){var a=!1;L(i,(function(e,t){var r=this.getSelectedMapKey(e);n[r]&&(a?n[r]=!1:a=!0)}),this)}},t.prototype.getItemSymbol=function(){return this.get("itemSymbol")},t.prototype.getSelectedMapKey=function(e){return"categories"===this._mode?e.value+"":e.index+""},t.prototype.getPieceList=function(){return this._pieceList},t.prototype._determineMode=function(){var e=this.option;return e.pieces&&e.pieces.length>0?"pieces":this.option.categories?"categories":"splitNumber"},t.prototype.setSelected=function(e){this.option.selected=O(e)},t.prototype.getValueState=function(e){var t=PT.findPieceIndex(e,this._pieceList);return null!=t&&this.option.selected[this.getSelectedMapKey(this._pieceList[t])]?"inRange":"outOfRange"},t.prototype.findTargetDataIndices=function(e){var t=[],r=this._pieceList;return this.eachTargetSeries((function(i){var n=[],a=i.getData();a.each(this.getDataDimension(a),(function(t,i){PT.findPieceIndex(t,r)===e&&n.push(i)}),this),t.push({seriesId:i.id,dataIndex:n})}),this),t},t.prototype.getRepresentValue=function(e){var t;if(this.isCategory())t=e.value;else if(null!=e.value)t=e.value;else{var r=e.interval||[];t=r[0]===-1/0&&r[1]===1/0?0:(r[0]+r[1])/2}return t},t.prototype.getVisualMeta=function(e){if(!this.isCategory()){var t=[],r=["",""],i=this,n=this._pieceList.slice();if(n.length){var a=n[0].interval[0];a!==-1/0&&n.unshift({interval:[-1/0,a]}),(a=n[n.length-1].interval[1])!==1/0&&n.push({interval:[a,1/0]})}else n.push({interval:[-1/0,1/0]});var s=-1/0;return L(n,(function(e){var t=e.interval;t&&(t[0]>s&&o([s,t[0]],"outOfRange"),o(t.slice()),s=t[1])}),this),{stops:t,outerColors:r}}function o(n,a){var s=i.getRepresentValue({interval:n});a||(a=i.getValueState(s));var o=e(s,a);n[0]===-1/0?r[0]=o:n[1]===1/0?r[1]=o:t.push({value:n[0],color:o},{value:n[1],color:o})}},t.type="visualMap.piecewise",t.defaultOption=Nd(IG.defaultOption,{selected:null,minOpen:!1,maxOpen:!1,align:"auto",itemWidth:20,itemHeight:14,itemSymbol:"roundRect",pieces:null,categories:null,splitNumber:5,selectedMode:"multiple",itemGap:10,hoverLink:!0}),t}(IG),tF={splitNumber:function(e){var t=this.option,r=Math.min(t.precision,20),i=this.getExtent(),n=t.splitNumber;n=Math.max(parseInt(n,10),1),t.splitNumber=n;for(var a=(i[1]-i[0])/n;+a.toFixed(r)!==a&&r<5;)r++;t.precision=r,a=+a.toFixed(r),t.minOpen&&e.push({interval:[-1/0,i[0]],close:[0,0]});for(var s=0,o=i[0];s<n;o+=a,s++){var u=s===n-1?i[1]:o+a;e.push({interval:[o,u],close:[1,1]})}t.maxOpen&&e.push({interval:[i[1],1/0],close:[0,0]}),Ki(e),L(e,(function(e,t){e.index=t,e.text=this.formatValueText(e.interval)}),this)},categories:function(e){var t=this.option;L(t.categories,(function(t){e.push({text:this.formatValueText(t,!0),value:t})}),this),rF(t,e)},pieces:function(e){var t=this.option;L(t.pieces,(function(t,r){K(t)||(t={value:t});var i={text:"",index:r};if(null!=t.label&&(i.text=t.label),t.hasOwnProperty("value")){var n=i.value=t.value;i.interval=[n,n],i.close=[1,1]}else{for(var a=i.interval=[],s=i.close=[0,0],o=[1,0,1],u=[-1/0,1/0],c=[],d=0;d<2;d++){for(var h=[["gte","gt","min"],["lte","lt","max"]][d],l=0;l<3&&null==a[d];l++)a[d]=t[h[l]],s[d]=o[l],c[d]=2===l;null==a[d]&&(a[d]=u[d])}c[0]&&a[1]===1/0&&(s[0]=0),c[1]&&a[0]===-1/0&&(s[1]=0),a[0]===a[1]&&s[0]&&s[1]&&(i.value=a[0])}i.visual=PT.retrieveVisuals(t),e.push(i)}),this),rF(t,e),Ki(e),L(e,(function(e){var t=e.close,r=[["<","\u2264"][t[1]],[">","\u2265"][t[0]]];e.text=e.text||this.formatValueText(null!=e.value?e.value:e.interval,!1,r)}),this)}};function rF(e,t){var r=e.inverse;("vertical"===e.orient?!r:r)&&t.reverse()}var iF=eF,nF=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return r.type=t.type,r}return a(t,e),t.prototype.doRender=function(){var e=this.group;e.removeAll();var t=this.visualMapModel,r=t.get("textGap"),i=t.textStyleModel,n=i.getFont(),a=i.getTextColor(),s=this._getItemAlign(),o=t.itemSize,u=this._getViewData(),c=u.endsText,d=$(t.get("showLabel",!0),!c);c&&this._renderEndsText(e,c[0],o,d,s),L(u.viewPieceList,(function(i){var u=i.piece,c=new Ti;c.onclick=F(this._onItemClick,this,u),this._enableHoverLink(c,i.indexInModelPieceList);var h=t.getRepresentValue(u);if(this._createItemSymbol(c,h,[0,0,o[0],o[1]]),d){var l=this.visualMapModel.getValueState(h);c.add(new no({style:{x:"right"===s?-r:o[0]+r,y:o[1]/2,text:u.text,verticalAlign:"middle",align:s,font:n,fill:a,opacity:"outOfRange"===l?.5:1}}))}e.add(c)}),this),c&&this._renderEndsText(e,c[1],o,d,s),Nh(t.get("orient"),e,t.get("itemGap")),this.renderBackground(e),this.positionGroup(e)},t.prototype._enableHoverLink=function(e,t){var r=this;e.on("mouseover",(function(){return i("highlight")})).on("mouseout",(function(){return i("downplay")}));var i=function(e){var i=r.visualMapModel;i.option.hoverLink&&r.api.dispatchAction({type:e,batch:LG(i.findTargetDataIndices(t),i)})}},t.prototype._getItemAlign=function(){var e=this.visualMapModel,t=e.option;if("vertical"===t.orient)return DG(e,this.api,e.itemSize);var r=t.align;return r&&"auto"!==r||(r="left"),r},t.prototype._renderEndsText=function(e,t,r,i,n){if(t){var a=new Ti,s=this.visualMapModel.textStyleModel;a.add(new no({style:{x:i?"right"===n?r[0]:0:r[0]/2,y:r[1]/2,verticalAlign:"middle",align:i?n:"center",text:t,font:s.getFont(),fill:s.getTextColor()}})),e.add(a)}},t.prototype._getViewData=function(){var e=this.visualMapModel,t=B(e.getPieceList(),(function(e,t){return{piece:e,indexInModelPieceList:t}})),r=e.get("text"),i=e.get("orient"),n=e.get("inverse");return("horizontal"===i?n:!n)?t.reverse():r&&(r=r.slice().reverse()),{viewPieceList:t,endsText:r}},t.prototype._createItemSymbol=function(e,t,r){e.add(gm(this.getControllerVisual(t,"symbol"),r[0],r[1],r[2],r[3],this.getControllerVisual(t,"color")))},t.prototype._onItemClick=function(e){var t=this.visualMapModel,r=t.option,i=O(r.selected),n=t.getSelectedMapKey(e);"single"===r.selectedMode?(i[n]=!0,L(i,(function(e,t){i[t]=t===n}))):i[n]=!i[n],this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:i})},t.type="visualMap.piecewise",t}(NG);function aF(e){e.registerComponentModel(iF),e.registerComponentView(nF),$G(e)}var sF={label:{enabled:!0},decal:{show:!1}},oF=fn(),uF={};function cF(e,t){var r=e.getModel("aria");if(r.get("enabled")){var i=O(sF);T(i.label,e.getLocaleModel().get("aria"),!1),T(r.option,i,!1),function(){if(r.getModel("decal").get("show")){var t=ce();e.eachSeries((function(e){if(e.useColorPaletteOnData){var r=t.get(e.type);r||(r={},t.set(e.type,r)),oF(e).scope=r}})),e.eachRawSeries((function(t){if(!e.isSeriesFiltered(t))if("function"!==typeof t.enableAriaDecal){var r=t.getData();if(t.useColorPaletteOnData){var i=t.getRawData(),n={},a=oF(t).scope;r.each((function(e){var t=r.getRawIndex(e);n[t]=e}));var s=i.count();i.each((function(e){var o=n[e],u=i.getName(e)||e+"",d=ml(t.ecModel,u,a,s),h=r.getItemVisual(o,"decal");r.setItemVisual(o,"decal",c(h,d))}))}else{var o=ml(t.ecModel,t.name,uF,e.getSeriesCount()),u=r.getVisual("decal");r.setVisual("decal",c(u,o))}}else t.enableAriaDecal();function c(e,t){var r=e?I(I({},t),e):t;return r.dirty=!0,r}}))}}(),function(){var i=e.getLocaleModel().get("aria"),a=r.getModel("label");if(a.option=M(a.option,i),!a.get("enabled"))return;var s=t.getZr().dom;if(a.get("description"))return void s.setAttribute("aria-label",a.get("description"));var o,u=e.getSeriesCount(),c=a.get(["data","maxCount"])||10,d=a.get(["series","maxCount"])||10,h=Math.min(u,d);if(u<1)return;var l=function(){var t=e.get("title");t&&t.length&&(t=t[0]);return t&&t.text}();if(l){var f=a.get(["general","withTitle"]);o=n(f,{title:l})}else o=a.get(["general","withoutTitle"]);var p=[],v=u>1?a.get(["series","multiple","prefix"]):a.get(["series","single","prefix"]);o+=n(v,{seriesCount:u}),e.eachSeries((function(t,r){if(r<h){var i=void 0,s=t.get("name")?"withName":"withoutName";i=n(i=u>1?a.get(["series","multiple",s]):a.get(["series","single",s]),{seriesId:t.seriesIndex,seriesName:t.get("name"),seriesType:(b=t.subType,e.getLocaleModel().get(["series","typeNames"])[b]||"\u81ea\u5b9a\u4e49\u56fe")});var o=t.getData();if(o.count()>c)i+=n(a.get(["data","partialData"]),{displayCnt:c});else i+=a.get(["data","allData"]);for(var d=[],l=0;l<o.count();l++)if(l<c){var f=o.getName(l),v=wf(o,l),m=a.get(["data",f?"withName":"withoutName"]);d.push(n(m,{name:f,value:v}))}var g=a.get(["data","separator","middle"]),y=a.get(["data","separator","end"]);i+=d.join(g)+y,p.push(i)}var b}));var m=a.getModel(["series","multiple","separator"]),g=m.get("middle"),y=m.get("end");o+=p.join(g)+y,s.setAttribute("aria-label",o)}()}function n(e,t){if("string"!==typeof e)return e;var r=e;return L(t,(function(e,t){r=r.replace(new RegExp("\\{\\s*"+t+"\\s*\\}","g"),e)})),r}}function dF(e){if(e&&e.aria){var t=e.aria;null!=t.show&&(t.enabled=t.show),t.label=t.label||{},L(["description","general","series","data"],(function(e){null!=t[e]&&(t.label[e]=t[e])}))}}var hF={value:"eq","<":"lt","<=":"lte",">":"gt",">=":"gte","=":"eq","!=":"ne","<>":"ne"},lF=function(){function e(e){var t;if(null==(this._condVal=H(e)?new RegExp(e):(t=e,"[object RegExp]"===f.call(t)?e:null))){0,Mf("")}}return e.prototype.evaluate=function(e){var t=typeof e;return"string"===t?this._condVal.test(e):"number"===t&&this._condVal.test(e+"")},e}(),fF=function(){function e(){}return e.prototype.evaluate=function(){return this.value},e}(),pF=function(){function e(){}return e.prototype.evaluate=function(){for(var e=this.children,t=0;t<e.length;t++)if(!e[t].evaluate())return!1;return!0},e}(),vF=function(){function e(){}return e.prototype.evaluate=function(){for(var e=this.children,t=0;t<e.length;t++)if(e[t].evaluate())return!0;return!1},e}(),mF=function(){function e(){}return e.prototype.evaluate=function(){return!this.child.evaluate()},e}(),gF=function(){function e(){}return e.prototype.evaluate=function(){for(var e=!!this.valueParser,t=(0,this.getValue)(this.valueGetterParam),r=e?this.valueParser(t):null,i=0;i<this.subCondList.length;i++)if(!this.subCondList[i].evaluate(e?r:t))return!1;return!0},e}();function yF(e,t){if(!0===e||!1===e){var r=new fF;return r.value=e,r}return xF(e)||Mf(""),e.and?bF("and",e,t):e.or?bF("or",e,t):e.not?function(e,t){var r=e.not,i="";0;xF(r)||Mf(i);var n=new mF;n.child=yF(r,t),n.child||Mf(i);return n}(e,t):function(e,t){for(var r="",i=t.prepareGetValue(e),n=[],a=G(e),s=e.parser,o=s?Nf(s):null,u=0;u<a.length;u++){var c=a[u];if("parser"!==c&&!t.valueGetterAttrMap.get(c)){var d=le(hF,c)?hF[c]:c,h=e[c],l=o?o(h):h,f=Rf(d,l)||"reg"===d&&new lF(l);f||Mf(r),n.push(f)}}n.length||Mf(r);var p=new gF;return p.valueGetterParam=i,p.valueParser=o,p.getValue=t.getValue,p.subCondList=n,p}(e,t)}function bF(e,t,r){var i=t[e];j(i)||Mf(""),i.length||Mf("");var n="and"===e?new pF:new vF;return n.children=B(i,(function(e){return yF(e,r)})),n.children.length||Mf(""),n}function xF(e){return K(e)&&!D(e)}var kF=function(){function e(e,t){this._cond=yF(e,t)}return e.prototype.evaluate=function(){return this._cond.evaluate()},e}();var wF={type:"echarts:filter",transform:function(e){for(var t,r,i,n=e.upstream,a=(r=e.config,i={valueGetterAttrMap:ce({dimension:!0}),prepareGetValue:function(e){var t=e.dimension;le(e,"dimension")||Mf("");var r=n.getDimensionInfo(t);return r||Mf(""),{dimIdx:r.index}},getValue:function(e){return n.retrieveValueFromItem(t,e.dimIdx)}},new kF(r,i)),s=[],o=0,u=n.count();o<u;o++)t=n.getRawDataItem(o),a.evaluate()&&s.push(t);return{data:s}}};var _F={type:"echarts:sort",transform:function(e){var t=e.upstream,r=e.config,i="",n=tn(r);n.length||Mf(i);var a=[];L(n,(function(e){var r=e.dimension,n=e.order,s=e.parser,o=e.incomparable;if(null==r&&Mf(i),"asc"!==n&&"desc"!==n&&Mf(i),o&&"min"!==o&&"max"!==o){0,Mf("")}if("asc"!==n&&"desc"!==n){0,Mf("")}var u=t.getDimensionInfo(r);u||Mf(i);var c=s?Nf(s):null;s&&!c&&Mf(i),a.push({dimIdx:u.index,parser:c,comparator:new Lf(n,o)})}));var s=t.sourceFormat;s!==Kh&&s!==Xh&&Mf(i);for(var o=[],u=0,c=t.count();u<c;u++)o.push(t.getRawDataItem(u));return o.sort((function(e,r){for(var i=0;i<a.length;i++){var n=a[i],s=t.retrieveValueFromItem(e,n.dimIdx),o=t.retrieveValueFromItem(r,n.dimIdx);n.parser&&(s=n.parser(s),o=n.parser(o));var u=n.comparator.evaluate(s,o);if(0!==u)return u}return 0})),{data:o}}};var SF=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="dataset",t}return a(t,e),t.prototype.init=function(t,r,i){e.prototype.init.call(this,t,r,i),this._sourceManager=new Wf(this),Kf(this)},t.prototype.mergeOption=function(t,r){e.prototype.mergeOption.call(this,t,r),Kf(this)},t.prototype.optionUpdated=function(){this._sourceManager.dirty()},t.prototype.getSourceManager=function(){return this._sourceManager},t.type="dataset",t.defaultOption={seriesLayoutBy:$h},t}(qh),OF=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="dataset",t}return a(t,e),t.type="dataset",t}(wp);Wy([function(e){e.registerPainter("canvas",eb)}]),Wy([function(e){e.registerPainter("svg",Hb)}]),Wy([function(e){e.registerChartView(lk),e.registerSeriesModel(Nx),e.registerLayout(fk("line",!0)),e.registerVisual({seriesType:"line",reset:function(e){var t=e.getData(),r=e.getModel("lineStyle").getLineStyle();r&&!r.stroke&&(r.stroke=t.getVisual("style").fill),t.setVisual("legendLineStyle",r)}}),e.registerProcessor(e.PRIORITY.PROCESSOR.STATISTIC,mk("line"))},function(e){e.registerChartView(Yk),e.registerSeriesModel(Nk),e.registerLayout(e.PRIORITY.VISUAL.LAYOUT,q(Ok,"bar")),e.registerLayout(e.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,Tk),e.registerProcessor(e.PRIORITY.PROCESSOR.STATISTIC,mk("bar")),e.registerAction({type:"changeAxisOrder",event:"changeAxisOrder",update:"update"},(function(e,t){var r=e.componentType||"series";t.eachComponent({mainType:r,query:e},(function(t){e.sortInfo&&t.axis.setCategorySortInfo(e.sortInfo)}))}))},function(e){e.registerChartView(sw),e.registerSeriesModel(cw),nm("pie",e.registerAction),e.registerLayout(q($k,"pie")),e.registerProcessor(Jk("pie"))},function(e){Wy(bS),e.registerSeriesModel(dw),e.registerChartView(pw),e.registerLayout(fk("scatter"))},function(e){Wy(PS),e.registerChartView(SS),e.registerSeriesModel(OS),e.registerLayout(xS),e.registerProcessor(Jk("radar")),e.registerPreprocessor(_S)},function(e){Wy(bO),e.registerChartView(iO),e.registerSeriesModel(nO),e.registerLayout(sO),e.registerProcessor(e.PRIORITY.PROCESSOR.STATISTIC,aO),nm("map",e.registerAction)},function(e){e.registerChartView(LO),e.registerSeriesModel(KO),e.registerLayout(YO),e.registerVisual(ZO),function(e){e.registerAction({type:"treeExpandAndCollapse",event:"treeExpandAndCollapse",update:"update"},(function(e,t){t.eachComponent({mainType:"series",subType:"tree",query:e},(function(t){var r=e.dataIndex,i=t.getData().tree.getNodeByDataIndex(r);i.isExpand=!i.isExpand}))})),e.registerAction({type:"treeRoam",event:"treeRoam",update:"none"},(function(e,t){t.eachComponent({mainType:"series",subType:"tree",query:e},(function(t){var r=gO(t.coordinateSystem,e);t.setCenter&&t.setCenter(r.center),t.setZoom&&t.setZoom(r.zoom)}))}))}(e)},function(e){e.registerSeriesModel(aT),e.registerChartView(gT),e.registerVisual(LT),e.registerLayout(XT),function(e){for(var t=0;t<rT.length;t++)e.registerAction({type:rT[t],update:"updateView"},tT);e.registerAction({type:"treemapRootToNode",update:"updateView"},(function(e,t){t.eachComponent({mainType:"series",subType:"treemap",query:e},(function(t,r){var i=QO(e,["treemapZoomToNode","treemapRootToNode"],t);if(i){var n=t.getViewRoot();n&&(e.direction=JO(n,i.node)?"rollUp":"drillDown"),t.resetViewRoot(i.node)}}))}))}(e)},function(e){e.registerChartView(KC),e.registerSeriesModel(tI),e.registerProcessor(eC),e.registerVisual(tC),e.registerVisual(iC),e.registerLayout(fC),e.registerLayout(e.PRIORITY.VISUAL.POST_CHART_LAYOUT,xC),e.registerLayout(wC),e.registerCoordinateSystem("graphView",{dimensions:cO.dimensions,create:_C}),e.registerAction({type:"focusNodeAdjacency",event:"focusNodeAdjacency",update:"series:focusNodeAdjacency"},(function(){})),e.registerAction({type:"unfocusNodeAdjacency",event:"unfocusNodeAdjacency",update:"series:unfocusNodeAdjacency"},(function(){})),e.registerAction(rI,(function(e,t){t.eachComponent({mainType:"series",query:e},(function(t){var r=gO(t.coordinateSystem,e);t.setCenter&&t.setCenter(r.center),t.setZoom&&t.setZoom(r.zoom)}))}))},function(e){e.registerChartView(oI),e.registerSeriesModel(uI)},function(e){e.registerChartView(hI),e.registerSeriesModel(lI),e.registerLayout(fI),e.registerProcessor(Jk("funnel"))},function(e){Wy(jM),e.registerChartView(yI),e.registerSeriesModel(xI),e.registerVisual(e.PRIORITY.VISUAL.BRUSH,wI)},function(e){e.registerChartView(UM),e.registerSeriesModel(WM),e.registerLayout(KM),e.registerVisual(aA),e.registerAction({type:"dragNode",event:"dragnode",update:"update"},(function(e,t){t.eachComponent({mainType:"series",subType:"sankey",query:e},(function(t){t.setNodePosition(e.dataIndex,[e.localX,e.localY])}))}))},function(e){e.registerSeriesModel(uA),e.registerChartView(vA),e.registerVisual(mA),e.registerLayout(yA),e.registerTransform(bA)},function(e){e.registerChartView(NA),e.registerSeriesModel(DA),e.registerPreprocessor(LA),e.registerVisual(FA),e.registerLayout(zA)},function(e){e.registerChartView(KA),e.registerSeriesModel(XA),e.registerLayout(fk("effectScatter"))},function(e){e.registerChartView(rE),e.registerSeriesModel(sE),e.registerLayout(tE),e.registerVisual(uE)},function(e){e.registerChartView(hE),e.registerSeriesModel(lE)},function(e){e.registerChartView(PE),e.registerSeriesModel(DE),e.registerLayout(q(Ok,"pictorialBar"))},function(e){e.registerChartView(LE),e.registerSeriesModel(BE),e.registerLayout(RE),e.registerProcessor(Jk("themeRiver"))},function(e){e.registerChartView(jE),e.registerSeriesModel(HE),e.registerLayout(q(WE,"sunburst")),e.registerProcessor(q(Jk,"sunburst")),e.registerVisual(XE),function(e){e.registerAction({type:FE,update:"updateView"},(function(e,t){t.eachComponent({mainType:"series",subType:"sunburst",query:e},(function(t,r){var i=QO(e,[FE],t);if(i){var n=t.getViewRoot();n&&(e.direction=JO(n,i.node)?"rollUp":"drillDown"),t.resetViewRoot(i.node)}}))})),e.registerAction({type:qE,update:"none"},(function(e,t,r){e=I({},e),t.eachComponent({mainType:"series",subType:"sunburst",query:e},(function(t){var r=QO(e,[qE],t);r&&(e.dataIndex=r.node.dataIndex)})),r.dispatchAction(I(e,{type:"highlight"}))})),e.registerAction({type:"sunburstUnhighlight",update:"updateView"},(function(e,t,r){e=I({},e),r.dispatchAction(I(e,{type:"downplay"}))}))}(e)},function(e){e.registerChartView(HN),e.registerSeriesModel(zN)}]),Wy((function(e){Wy(bS),Wy(hD)})),Wy((function(e){Wy(hD),oS.registerAxisPointerClass("PolarAxisPointer",pD),e.registerCoordinateSystem("polar",ID),e.registerComponentModel(vD),e.registerComponentView(WD),Ow(e,"angle",gD,HD),Ow(e,"radius",yD,UD),e.registerComponentView(LD),e.registerComponentView(FD),e.registerLayout(q(zD,"bar"))})),Wy(bO),Wy((function(e){Wy(hD),oS.registerAxisPointerClass("SingleAxisPointer",hL),e.registerComponentView(lL),e.registerComponentView($D),e.registerComponentModel(eL),Ow(e,"single",eL,eL.defaultOption),e.registerCoordinateSystem("single",nL)})),Wy(jM),Wy((function(e){e.registerComponentModel(pL),e.registerComponentView(gL),e.registerCoordinateSystem("calendar",xL)})),Wy((function(e){e.registerComponentModel(SL),e.registerComponentView(OL),e.registerPreprocessor(_L)})),Wy((function(e){e.registerComponentModel(QL),e.registerComponentView(JL),YL("saveAsImage",tB),YL("magicType",sB),YL("dataView",vB),YL("dataZoom",jB),YL("restore",xB),Wy(WL)})),Wy((function(e){Wy(hD),e.registerComponentModel(zB),e.registerComponentView(fR),e.registerAction({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},(function(){})),e.registerAction({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},(function(){}))})),Wy(hD),Wy((function(e){e.registerComponentView(NR),e.registerComponentModel(DR),e.registerPreprocessor(vR),e.registerVisual(e.PRIORITY.VISUAL.BRUSH,CR),e.registerAction({type:"brush",event:"brush",update:"updateVisual"},(function(e,t){t.eachComponent({mainType:"brush",query:e},(function(t){t.setAreas(e.areas)}))})),e.registerAction({type:"brushSelect",event:"brushSelected",update:"none"},(function(){})),e.registerAction({type:"brushEnd",event:"brushEnd",update:"none"},(function(){})),YL("brush",BR)})),Wy((function(e){e.registerComponentModel(RR),e.registerComponentView(VR)})),Wy((function(e){e.registerComponentModel(qR),e.registerComponentView(XR),e.registerSubTypeDefaulter("timeline",(function(){return"slider"})),function(e){e.registerAction({type:"timelineChange",event:"timelineChanged",update:"prepareAndUpdate"},(function(e,t){var r=t.getComponent("timeline");return r&&null!=e.currentIndex&&(r.setCurrentIndex(e.currentIndex),!r.get("loop",!0)&&r.isIndexMax()&&r.setPlayState(!1)),t.resetOption("timeline",{replaceMerge:r.get("replaceMerge",!0)}),M({currentIndex:r.option.currentIndex},e)})),e.registerAction({type:"timelinePlayChange",event:"timelinePlayChanged",update:"update"},(function(e,t){var r=t.getComponent("timeline");r&&null!=e.playState&&r.setPlayState(e.playState)}))}(e),e.registerPreprocessor(YR)})),Wy((function(e){e.registerComponentModel(iV),e.registerComponentView(pV),e.registerPreprocessor((function(e){$R(e.series,"markPoint")&&(e.markPoint=e.markPoint||{})}))})),Wy((function(e){e.registerComponentModel(vV),e.registerComponentView(wV),e.registerPreprocessor((function(e){$R(e.series,"markLine")&&(e.markLine=e.markLine||{})}))})),Wy((function(e){e.registerComponentModel(_V),e.registerComponentView(EV),e.registerPreprocessor((function(e){$R(e.series,"markArea")&&(e.markArea=e.markArea||{})}))})),Wy((function(e){Wy(zV),Wy(ZV)})),Wy((function(e){Wy(cG),Wy(yG)})),Wy(cG),Wy(yG),Wy((function(e){Wy(JG),Wy(aF)})),Wy(JG),Wy(aF),Wy((function(e){e.registerPreprocessor(dF),e.registerVisual(e.PRIORITY.VISUAL.ARIA,cF)})),Wy((function(e){e.registerTransform(wF),e.registerTransform(_F)})),Wy((function(e){e.registerComponentModel(SF),e.registerComponentView(OF)}))},function(e,t,r){"use strict";var i=r(13),n=r(51),a=r(59),s=r(61),o=r(60),u=r(9),c=r(0),d=r(14),h=r.n(d),l=r(33),f=r(72),p=r(37),v=r(28),m=Object(p.a)("text","input");function g(e){return!!(e.prefix||e.suffix||e.allowClear)}function y(e){return!(!e.addonBefore&&!e.addonAfter)}var b=function(e){Object(s.a)(r,e);var t=Object(o.a)(r);function r(){var e;return Object(n.a)(this,r),(e=t.apply(this,arguments)).containerRef=c.createRef(),e.onInputMouseUp=function(t){var r;if(null===(r=e.containerRef.current)||void 0===r?void 0:r.contains(t.target)){var i=e.props.triggerFocus;null===i||void 0===i||i()}},e}return Object(a.a)(r,[{key:"renderClearIcon",value:function(e){var t=this.props,r=t.allowClear,i=t.value,n=t.disabled,a=t.readOnly,s=t.handleReset;if(!r)return null;var o=!n&&!a&&i,d="".concat(e,"-clear-icon");return c.createElement(f.a,{onClick:s,className:h()(Object(u.a)({},"".concat(d,"-hidden"),!o),d),role:"button"})}},{key:"renderSuffix",value:function(e){var t=this.props,r=t.suffix,i=t.allowClear;return r||i?c.createElement("span",{className:"".concat(e,"-suffix")},this.renderClearIcon(e),r):null}},{key:"renderLabeledIcon",value:function(e,t){var r,i=this.props,n=i.focused,a=i.value,s=i.prefix,o=i.className,d=i.size,l=i.suffix,f=i.disabled,p=i.allowClear,m=i.direction,b=i.style,x=i.readOnly,k=i.bordered,w=this.renderSuffix(e);if(!g(this.props))return Object(v.a)(t,{value:a});var _=s?c.createElement("span",{className:"".concat(e,"-prefix")},s):null,S=h()("".concat(e,"-affix-wrapper"),(r={},Object(u.a)(r,"".concat(e,"-affix-wrapper-focused"),n),Object(u.a)(r,"".concat(e,"-affix-wrapper-disabled"),f),Object(u.a)(r,"".concat(e,"-affix-wrapper-sm"),"small"===d),Object(u.a)(r,"".concat(e,"-affix-wrapper-lg"),"large"===d),Object(u.a)(r,"".concat(e,"-affix-wrapper-input-with-clear-btn"),l&&p&&a),Object(u.a)(r,"".concat(e,"-affix-wrapper-rtl"),"rtl"===m),Object(u.a)(r,"".concat(e,"-affix-wrapper-readonly"),x),Object(u.a)(r,"".concat(e,"-affix-wrapper-borderless"),!k),Object(u.a)(r,"".concat(o),!y(this.props)&&o),r));return c.createElement("span",{ref:this.containerRef,className:S,style:b,onMouseUp:this.onInputMouseUp},_,Object(v.a)(t,{style:null,value:a,className:O(e,k,d,f)}),w)}},{key:"renderInputWithLabel",value:function(e,t){var r,i=this.props,n=i.addonBefore,a=i.addonAfter,s=i.style,o=i.size,d=i.className,l=i.direction;if(!y(this.props))return t;var f="".concat(e,"-group"),p="".concat(f,"-addon"),m=n?c.createElement("span",{className:p},n):null,g=a?c.createElement("span",{className:p},a):null,b=h()("".concat(e,"-wrapper"),f,Object(u.a)({},"".concat(f,"-rtl"),"rtl"===l)),x=h()("".concat(e,"-group-wrapper"),(r={},Object(u.a)(r,"".concat(e,"-group-wrapper-sm"),"small"===o),Object(u.a)(r,"".concat(e,"-group-wrapper-lg"),"large"===o),Object(u.a)(r,"".concat(e,"-group-wrapper-rtl"),"rtl"===l),r),d);return c.createElement("span",{className:x,style:s},c.createElement("span",{className:b},m,Object(v.a)(t,{style:null}),g))}},{key:"renderTextAreaWithClearIcon",value:function(e,t){var r,i=this.props,n=i.value,a=i.allowClear,s=i.className,o=i.style,d=i.direction,l=i.bordered;if(!a)return Object(v.a)(t,{value:n});var f=h()("".concat(e,"-affix-wrapper"),"".concat(e,"-affix-wrapper-textarea-with-clear-btn"),(r={},Object(u.a)(r,"".concat(e,"-affix-wrapper-rtl"),"rtl"===d),Object(u.a)(r,"".concat(e,"-affix-wrapper-borderless"),!l),Object(u.a)(r,"".concat(s),!y(this.props)&&s),r));return c.createElement("span",{className:f,style:o},Object(v.a)(t,{style:null,value:n}),this.renderClearIcon(e))}},{key:"render",value:function(){var e=this.props,t=e.prefixCls,r=e.inputType,i=e.element;return r===m[0]?this.renderTextAreaWithClearIcon(t,i):this.renderInputWithLabel(t,this.renderLabeledIcon(t,i))}}]),r}(c.Component),x=r(466),k=r(39),w=r(30);function _(e){return"undefined"===typeof e||null===e?"":e}function S(e,t,r,i){if(r){var n=t,a=e.value;return"click"===t.type?((n=Object.create(t)).target=e,n.currentTarget=e,e.value="",r(n),void(e.value=a)):void 0!==i?((n=Object.create(t)).target=e,n.currentTarget=e,e.value=i,void r(n)):void r(n)}}function O(e,t,r,i,n){var a;return h()(e,(a={},Object(u.a)(a,"".concat(e,"-sm"),"small"===r),Object(u.a)(a,"".concat(e,"-lg"),"large"===r),Object(u.a)(a,"".concat(e,"-disabled"),i),Object(u.a)(a,"".concat(e,"-rtl"),"rtl"===n),Object(u.a)(a,"".concat(e,"-borderless"),!t),a))}function T(e,t){if(e){e.focus(t);var r=(t||{}).cursor;if(r){var i=e.value.length;switch(r){case"start":e.setSelectionRange(0,0);break;case"end":e.setSelectionRange(i,i);break;default:e.setSelectionRange(0,i)}}}}var C=function(e){Object(s.a)(r,e);var t=Object(o.a)(r);function r(e){var a;Object(n.a)(this,r),(a=t.call(this,e)).direction="ltr",a.focus=function(e){T(a.input,e)},a.saveClearableInput=function(e){a.clearableInput=e},a.saveInput=function(e){a.input=e},a.onFocus=function(e){var t=a.props.onFocus;a.setState({focused:!0},a.clearPasswordValueAttribute),null===t||void 0===t||t(e)},a.onBlur=function(e){var t=a.props.onBlur;a.setState({focused:!1},a.clearPasswordValueAttribute),null===t||void 0===t||t(e)},a.handleReset=function(e){a.setValue("",(function(){a.focus()})),S(a.input,e,a.props.onChange)},a.renderInput=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s=a.props,o=s.className,d=s.addonBefore,f=s.addonAfter,p=s.size,v=s.disabled,m=Object(l.a)(a.props,["prefixCls","onPressEnter","addonBefore","addonAfter","prefix","suffix","allowClear","defaultValue","size","inputType","bordered"]);return c.createElement("input",Object(i.a)({autoComplete:n.autoComplete},m,{onChange:a.handleChange,onFocus:a.onFocus,onBlur:a.onBlur,onKeyDown:a.handleKeyDown,className:h()(O(e,r,p||t,v,a.direction),Object(u.a)({},o,o&&!d&&!f)),ref:a.saveInput}))},a.clearPasswordValueAttribute=function(){a.removePasswordTimeout=setTimeout((function(){a.input&&"password"===a.input.getAttribute("type")&&a.input.hasAttribute("value")&&a.input.removeAttribute("value")}))},a.handleChange=function(e){a.setValue(e.target.value,a.clearPasswordValueAttribute),S(a.input,e,a.props.onChange)},a.handleKeyDown=function(e){var t=a.props,r=t.onPressEnter,i=t.onKeyDown;r&&13===e.keyCode&&r(e),null===i||void 0===i||i(e)},a.renderComponent=function(e){var t=e.getPrefixCls,r=e.direction,n=e.input,s=a.state,o=s.value,u=s.focused,d=a.props,h=d.prefixCls,l=d.bordered,f=void 0===l||l,p=t("input",h);return a.direction=r,c.createElement(k.b.Consumer,null,(function(e){return c.createElement(b,Object(i.a)({size:e},a.props,{prefixCls:p,inputType:"input",value:_(o),element:a.renderInput(p,e,f,n),handleReset:a.handleReset,ref:a.saveClearableInput,direction:r,focused:u,triggerFocus:a.focus,bordered:f}))}))};var s="undefined"===typeof e.value?e.defaultValue:e.value;return a.state={value:s,focused:!1,prevValue:e.value},a}return Object(a.a)(r,[{key:"componentDidMount",value:function(){this.clearPasswordValueAttribute()}},{key:"componentDidUpdate",value:function(){}},{key:"getSnapshotBeforeUpdate",value:function(e){return g(e)!==g(this.props)&&Object(w.a)(this.input!==document.activeElement,"Input","When Input is focused, dynamic add or remove prefix / suffix will make it lose focus caused by dom structure change. Read more: https://ant.design/components/input/#FAQ"),null}},{key:"componentWillUnmount",value:function(){this.removePasswordTimeout&&clearTimeout(this.removePasswordTimeout)}},{key:"blur",value:function(){this.input.blur()}},{key:"setSelectionRange",value:function(e,t,r){this.input.setSelectionRange(e,t,r)}},{key:"select",value:function(){this.input.select()}},{key:"setValue",value:function(e,t){void 0===this.props.value?this.setState({value:e},t):null===t||void 0===t||t()}},{key:"render",value:function(){return c.createElement(x.a,null,this.renderComponent)}}],[{key:"getDerivedStateFromProps",value:function(e,t){var r=t.prevValue,i={prevValue:e.value};return void 0===e.value&&r===e.value||(i.value=e.value),i}}]),r}(c.Component);C.defaultProps={type:"text"};var I=C,M=function(e){return c.createElement(x.a,null,(function(t){var r,i=t.getPrefixCls,n=t.direction,a=e.prefixCls,s=e.className,o=void 0===s?"":s,d=i("input-group",a),l=h()(d,(r={},Object(u.a)(r,"".concat(d,"-lg"),"large"===e.size),Object(u.a)(r,"".concat(d,"-sm"),"small"===e.size),Object(u.a)(r,"".concat(d,"-compact"),e.compact),Object(u.a)(r,"".concat(d,"-rtl"),"rtl"===n),r),o);return c.createElement("span",{className:l,style:e.style,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,onFocus:e.onFocus,onBlur:e.onBlur},e.children)}))},A=r(26),E=r(114),N=r(111),P=function(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var n=0;for(i=Object.getOwnPropertySymbols(e);n<i.length;n++)t.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(e,i[n])&&(r[i[n]]=e[i[n]])}return r},D=c.forwardRef((function(e,t){var r,n,a=e.prefixCls,s=e.inputPrefixCls,o=e.className,d=e.size,l=e.suffix,f=e.enterButton,p=void 0!==f&&f,m=e.addonAfter,g=e.loading,y=e.disabled,b=e.onSearch,w=e.onChange,_=P(e,["prefixCls","inputPrefixCls","className","size","suffix","enterButton","addonAfter","loading","disabled","onSearch","onChange"]),S=c.useContext(x.b),O=S.getPrefixCls,T=S.direction,C=c.useContext(k.b),M=d||C,D=c.useRef(null),L=function(e){var t;document.activeElement===(null===(t=D.current)||void 0===t?void 0:t.input)&&e.preventDefault()},B=function(e){var t;b&&b(null===(t=D.current)||void 0===t?void 0:t.input.value,e)},R=O("input-search",a),V=O("input",s),G="boolean"===typeof p||"undefined"===typeof p?c.createElement(E.a,null):null,F="".concat(R,"-button"),q=p||{},j=q.type&&!0===q.type.__ANT_BUTTON;n=j||"button"===q.type?Object(v.a)(q,Object(i.a)({onMouseDown:L,onClick:B,key:"enterButton"},j?{className:F,size:M}:{})):c.createElement(N.a,{className:F,type:p?"primary":void 0,size:M,disabled:y,key:"enterButton",onMouseDown:L,onClick:B,loading:g,icon:G},p),m&&(n=[n,Object(v.a)(m,{key:"addonAfter"})]);var z=h()(R,(r={},Object(u.a)(r,"".concat(R,"-rtl"),"rtl"===T),Object(u.a)(r,"".concat(R,"-").concat(M),!!M),Object(u.a)(r,"".concat(R,"-with-button"),!!p),r),o);return c.createElement(I,Object(i.a)({ref:Object(A.a)(D,t),onPressEnter:B},_,{size:M,prefixCls:V,addonAfter:n,suffix:l,onChange:function(e){e&&e.target&&"click"===e.type&&b&&b(e.target.value,e),w&&w(e)},className:z,disabled:y}))}));D.displayName="Search";var L,B,R=D,V=r(27),G=r(22),F=r(40),q=r(24),j=r(41),z=r(42),H=r(45),U=r(44),W=r(15),K=r(17),X=r(57),Y="\n  min-height:0 !important;\n  max-height:none !important;\n  height:0 !important;\n  visibility:hidden !important;\n  overflow:hidden !important;\n  position:absolute !important;\n  z-index:-1000 !important;\n  top:0 !important;\n  right:0 !important\n",Z=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","font-variant","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"],Q={};function $(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=e.getAttribute("id")||e.getAttribute("data-reactid")||e.getAttribute("name");if(t&&Q[r])return Q[r];var i=window.getComputedStyle(e),n=i.getPropertyValue("box-sizing")||i.getPropertyValue("-moz-box-sizing")||i.getPropertyValue("-webkit-box-sizing"),a=parseFloat(i.getPropertyValue("padding-bottom"))+parseFloat(i.getPropertyValue("padding-top")),s=parseFloat(i.getPropertyValue("border-bottom-width"))+parseFloat(i.getPropertyValue("border-top-width")),o=Z.map((function(e){return"".concat(e,":").concat(i.getPropertyValue(e))})).join(";"),u={sizingStyle:o,paddingSize:a,borderSize:s,boxSizing:n};return t&&r&&(Q[r]=u),u}!function(e){e[e.NONE=0]="NONE",e[e.RESIZING=1]="RESIZING",e[e.RESIZED=2]="RESIZED"}(B||(B={}));var J=function(e){Object(H.a)(r,e);var t=Object(U.a)(r);function r(e){var i;return Object(j.a)(this,r),(i=t.call(this,e)).saveTextArea=function(e){i.textArea=e},i.handleResize=function(e){var t=i.state.resizeStatus,r=i.props,n=r.autoSize,a=r.onResize;t===B.NONE&&("function"===typeof a&&a(e),n&&i.resizeOnNextFrame())},i.resizeOnNextFrame=function(){cancelAnimationFrame(i.nextFrameActionId),i.nextFrameActionId=requestAnimationFrame(i.resizeTextarea)},i.resizeTextarea=function(){var e=i.props.autoSize;if(e&&i.textArea){var t=e.minRows,r=e.maxRows,n=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;L||((L=document.createElement("textarea")).setAttribute("tab-index","-1"),L.setAttribute("aria-hidden","true"),document.body.appendChild(L)),e.getAttribute("wrap")?L.setAttribute("wrap",e.getAttribute("wrap")):L.removeAttribute("wrap");var n=$(e,t),a=n.paddingSize,s=n.borderSize,o=n.boxSizing,u=n.sizingStyle;L.setAttribute("style","".concat(u,";").concat(Y)),L.value=e.value||e.placeholder||"";var c,d=Number.MIN_SAFE_INTEGER,h=Number.MAX_SAFE_INTEGER,l=L.scrollHeight;if("border-box"===o?l+=s:"content-box"===o&&(l-=a),null!==r||null!==i){L.value=" ";var f=L.scrollHeight-a;null!==r&&(d=f*r,"border-box"===o&&(d=d+a+s),l=Math.max(d,l)),null!==i&&(h=f*i,"border-box"===o&&(h=h+a+s),c=l>h?"":"hidden",l=Math.min(h,l))}return{height:l,minHeight:d,maxHeight:h,overflowY:c,resize:"none"}}(i.textArea,!1,t,r);i.setState({textareaStyles:n,resizeStatus:B.RESIZING},(function(){cancelAnimationFrame(i.resizeFrameId),i.resizeFrameId=requestAnimationFrame((function(){i.setState({resizeStatus:B.RESIZED},(function(){i.resizeFrameId=requestAnimationFrame((function(){i.setState({resizeStatus:B.NONE}),i.fixFirefoxAutoScroll()}))}))}))}))}},i.renderTextArea=function(){var e=i.props,t=e.prefixCls,r=void 0===t?"rc-textarea":t,n=e.autoSize,a=e.onResize,s=e.className,o=e.disabled,u=i.state,d=u.textareaStyles,f=u.resizeStatus,p=Object(l.a)(i.props,["prefixCls","onPressEnter","autoSize","defaultValue","onResize"]),v=h()(r,s,Object(K.a)({},"".concat(r,"-disabled"),o));"value"in p&&(p.value=p.value||"");var m=Object(W.a)(Object(W.a)(Object(W.a)({},i.props.style),d),f===B.RESIZING?{overflowX:"hidden",overflowY:"hidden"}:null);return c.createElement(X.a,{onResize:i.handleResize,disabled:!(n||a)},c.createElement("textarea",Object(q.a)({},p,{className:v,style:m,ref:i.saveTextArea})))},i.state={textareaStyles:{},resizeStatus:B.NONE},i}return Object(z.a)(r,[{key:"componentDidMount",value:function(){this.resizeTextarea()}},{key:"componentDidUpdate",value:function(e){e.value!==this.props.value&&this.resizeTextarea()}},{key:"componentWillUnmount",value:function(){cancelAnimationFrame(this.nextFrameActionId),cancelAnimationFrame(this.resizeFrameId)}},{key:"fixFirefoxAutoScroll",value:function(){try{if(document.activeElement===this.textArea){var e=this.textArea.selectionStart,t=this.textArea.selectionEnd;this.textArea.setSelectionRange(e,t)}}catch(r){}}},{key:"render",value:function(){return this.renderTextArea()}}]),r}(c.Component),ee=function(e){Object(H.a)(r,e);var t=Object(U.a)(r);function r(e){var i;Object(j.a)(this,r),(i=t.call(this,e)).focus=function(){i.resizableTextArea.textArea.focus()},i.saveTextArea=function(e){i.resizableTextArea=e},i.handleChange=function(e){var t=i.props.onChange;i.setValue(e.target.value,(function(){i.resizableTextArea.resizeTextarea()})),t&&t(e)},i.handleKeyDown=function(e){var t=i.props,r=t.onPressEnter,n=t.onKeyDown;13===e.keyCode&&r&&r(e),n&&n(e)};var n="undefined"===typeof e.value||null===e.value?e.defaultValue:e.value;return i.state={value:n},i}return Object(z.a)(r,[{key:"setValue",value:function(e,t){"value"in this.props||this.setState({value:e},t)}},{key:"blur",value:function(){this.resizableTextArea.textArea.blur()}},{key:"render",value:function(){return c.createElement(J,Object(q.a)({},this.props,{value:this.state.value,onKeyDown:this.handleKeyDown,onChange:this.handleChange,ref:this.saveTextArea}))}}],[{key:"getDerivedStateFromProps",value:function(e){return"value"in e?{value:e.value}:null}}]),r}(c.Component),te=r(65),re=function(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var n=0;for(i=Object.getOwnPropertySymbols(e);n<i.length;n++)t.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(e,i[n])&&(r[i[n]]=e[i[n]])}return r};function ie(e,t){return Object(F.a)(e||"").slice(0,t).join("")}var ne=c.forwardRef((function(e,t){var r,n=e.prefixCls,a=e.bordered,s=void 0===a||a,o=e.showCount,d=void 0!==o&&o,f=e.maxLength,p=e.className,v=e.style,m=e.size,g=e.onCompositionStart,y=e.onCompositionEnd,w=e.onChange,O=re(e,["prefixCls","bordered","showCount","maxLength","className","style","size","onCompositionStart","onCompositionEnd","onChange"]),C=c.useContext(x.b),I=C.getPrefixCls,M=C.direction,A=c.useContext(k.b),E=c.useRef(null),N=c.useRef(null),P=c.useState(!1),D=Object(G.a)(P,2),L=D[0],B=D[1],R=Object(te.a)(O.defaultValue,{value:O.value}),q=Object(G.a)(R,2),j=q[0],z=q[1],H=function(e,t){void 0===O.value&&(z(e),null===t||void 0===t||t())},U=Number(f)>0,W=I("input",n);c.useImperativeHandle(t,(function(){var e;return{resizableTextArea:null===(e=E.current)||void 0===e?void 0:e.resizableTextArea,focus:function(e){var t,r;T(null===(r=null===(t=E.current)||void 0===t?void 0:t.resizableTextArea)||void 0===r?void 0:r.textArea,e)},blur:function(){var e;return null===(e=E.current)||void 0===e?void 0:e.blur()}}}));var K=c.createElement(ee,Object(i.a)({},Object(l.a)(O,["allowClear"]),{className:h()((r={},Object(u.a)(r,"".concat(W,"-borderless"),!s),Object(u.a)(r,p,p&&!d),Object(u.a)(r,"".concat(W,"-sm"),"small"===A||"small"===m),Object(u.a)(r,"".concat(W,"-lg"),"large"===A||"large"===m),r)),style:d?void 0:v,prefixCls:W,onCompositionStart:function(e){B(!0),null===g||void 0===g||g(e)},onChange:function(e){var t=e.target.value;!L&&U&&(t=ie(t,f)),H(t),S(e.currentTarget,e,w,t)},onCompositionEnd:function(e){B(!1);var t=e.currentTarget.value;U&&(t=ie(t,f)),t!==j&&(H(t),S(e.currentTarget,e,w,t)),null===y||void 0===y||y(e)},ref:E})),X=_(j);L||!U||null!==O.value&&void 0!==O.value||(X=ie(X,f));var Y=c.createElement(b,Object(i.a)({},O,{prefixCls:W,direction:M,inputType:"text",value:X,element:K,handleReset:function(e){var t,r;H("",(function(){var e;null===(e=E.current)||void 0===e||e.focus()})),S(null===(r=null===(t=E.current)||void 0===t?void 0:t.resizableTextArea)||void 0===r?void 0:r.textArea,e,w)},ref:N,bordered:s}));if(d){var Z=Object(F.a)(X).length,Q="";return Q="object"===Object(V.a)(d)?d.formatter({count:Z,maxLength:f}):"".concat(Z).concat(U?" / ".concat(f):""),c.createElement("div",{className:h()("".concat(W,"-textarea"),Object(u.a)({},"".concat(W,"-textarea-rtl"),"rtl"===M),"".concat(W,"-textarea-show-count"),p),style:v,"data-count":Q},Y)}return Y})),ae={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM512 766c-161.3 0-279.4-81.8-362.7-254C232.6 339.8 350.7 258 512 258c161.3 0 279.4 81.8 362.7 254C791.5 684.2 673.4 766 512 766zm-4-430c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm0 288c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z"}}]},name:"eye",theme:"outlined"},se=r(25),oe=function(e,t){return c.createElement(se.a,Object.assign({},e,{ref:t,icon:ae}))};oe.displayName="EyeOutlined";var ue=c.forwardRef(oe),ce={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2Q889.47 375.11 816.7 305l-50.88 50.88C807.31 395.53 843.45 447.4 874.7 512 791.5 684.2 673.4 766 512 766q-72.67 0-133.87-22.38L323 798.75Q408 838 512 838q288.3 0 430.2-300.3a60.29 60.29 0 000-51.5zm-63.57-320.64L836 122.88a8 8 0 00-11.32 0L715.31 232.2Q624.86 186 512 186q-288.3 0-430.2 300.3a60.3 60.3 0 000 51.5q56.69 119.4 136.5 191.41L112.48 835a8 8 0 000 11.31L155.17 889a8 8 0 0011.31 0l712.15-712.12a8 8 0 000-11.32zM149.3 512C232.6 339.8 350.7 258 512 258c54.54 0 104.13 9.36 149.12 28.39l-70.3 70.3a176 176 0 00-238.13 238.13l-83.42 83.42C223.1 637.49 183.3 582.28 149.3 512zm246.7 0a112.11 112.11 0 01146.2-106.69L401.31 546.2A112 112 0 01396 512z"}},{tag:"path",attrs:{d:"M508 624c-3.46 0-6.87-.16-10.25-.47l-52.82 52.82a176.09 176.09 0 00227.42-227.42l-52.82 52.82c.31 3.38.47 6.79.47 10.25a111.94 111.94 0 01-112 112z"}}]},name:"eye-invisible",theme:"outlined"},de=function(e,t){return c.createElement(se.a,Object.assign({},e,{ref:t,icon:ce}))};de.displayName="EyeInvisibleOutlined";var he=c.forwardRef(de),le=function(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var n=0;for(i=Object.getOwnPropertySymbols(e);n<i.length;n++)t.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(e,i[n])&&(r[i[n]]=e[i[n]])}return r},fe={click:"onClick",hover:"onMouseOver"},pe=c.forwardRef((function(e,t){var r=Object(c.useState)(!1),n=Object(G.a)(r,2),a=n[0],s=n[1],o=function(){e.disabled||s(!a)},d=function(r){var n=r.getPrefixCls,s=e.className,d=e.prefixCls,f=e.inputPrefixCls,p=e.size,v=e.visibilityToggle,m=le(e,["className","prefixCls","inputPrefixCls","size","visibilityToggle"]),g=n("input",f),y=n("input-password",d),b=v&&function(t){var r,i=e.action,n=e.iconRender,s=fe[i]||"",d=(void 0===n?function(){return null}:n)(a),h=(r={},Object(u.a)(r,s,o),Object(u.a)(r,"className","".concat(t,"-icon")),Object(u.a)(r,"key","passwordIcon"),Object(u.a)(r,"onMouseDown",(function(e){e.preventDefault()})),Object(u.a)(r,"onMouseUp",(function(e){e.preventDefault()})),r);return c.cloneElement(c.isValidElement(d)?d:c.createElement("span",null,d),h)}(y),x=h()(y,s,Object(u.a)({},"".concat(y,"-").concat(p),!!p)),k=Object(i.a)(Object(i.a)({},Object(l.a)(m,["suffix","iconRender"])),{type:a?"text":"password",className:x,prefixCls:g,suffix:b});return p&&(k.size=p),c.createElement(I,Object(i.a)({ref:t},k))};return c.createElement(x.a,null,d)}));pe.defaultProps={action:"click",visibilityToggle:!0,iconRender:function(e){return e?c.createElement(ue,null):c.createElement(he,null)}},pe.displayName="Password";var ve=pe;I.Group=M,I.Search=R,I.TextArea=ne,I.Password=ve;t.a=I},,,function(e,t,r){"use strict";var i=r(83),n=60103,a=60106;t.Fragment=60107,t.StrictMode=60108,t.Profiler=60114;var s=60109,o=60110,u=60112;t.Suspense=60113;var c=60115,d=60116;if("function"===typeof Symbol&&Symbol.for){var h=Symbol.for;n=h("react.element"),a=h("react.portal"),t.Fragment=h("react.fragment"),t.StrictMode=h("react.strict_mode"),t.Profiler=h("react.profiler"),s=h("react.provider"),o=h("react.context"),u=h("react.forward_ref"),t.Suspense=h("react.suspense"),c=h("react.memo"),d=h("react.lazy")}var l="function"===typeof Symbol&&Symbol.iterator;function f(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v={};function m(e,t,r){this.props=e,this.context=t,this.refs=v,this.updater=r||p}function g(){}function y(e,t,r){this.props=e,this.context=t,this.refs=v,this.updater=r||p}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(f(85));this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=m.prototype;var b=y.prototype=new g;b.constructor=y,i(b,m.prototype),b.isPureReactComponent=!0;var x={current:null},k=Object.prototype.hasOwnProperty,w={key:!0,ref:!0,__self:!0,__source:!0};function _(e,t,r){var i,a={},s=null,o=null;if(null!=t)for(i in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(s=""+t.key),t)k.call(t,i)&&!w.hasOwnProperty(i)&&(a[i]=t[i]);var u=arguments.length-2;if(1===u)a.children=r;else if(1<u){for(var c=Array(u),d=0;d<u;d++)c[d]=arguments[d+2];a.children=c}if(e&&e.defaultProps)for(i in u=e.defaultProps)void 0===a[i]&&(a[i]=u[i]);return{$$typeof:n,type:e,key:s,ref:o,props:a,_owner:x.current}}function S(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var O=/\/+/g;function T(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function C(e,t,r,i,s){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var u=!1;if(null===e)u=!0;else switch(o){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case a:u=!0}}if(u)return s=s(u=e),e=""===i?"."+T(u,0):i,Array.isArray(s)?(r="",null!=e&&(r=e.replace(O,"$&/")+"/"),C(s,t,r,"",(function(e){return e}))):null!=s&&(S(s)&&(s=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(s,r+(!s.key||u&&u.key===s.key?"":(""+s.key).replace(O,"$&/")+"/")+e)),t.push(s)),1;if(u=0,i=""===i?".":i+":",Array.isArray(e))for(var c=0;c<e.length;c++){var d=i+T(o=e[c],c);u+=C(o,t,r,d,s)}else if("function"===typeof(d=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=l&&e[l]||e["@@iterator"])?e:null}(e)))for(e=d.call(e),c=0;!(o=e.next()).done;)u+=C(o=o.value,t,r,d=i+T(o,c++),s);else if("object"===o)throw t=""+e,Error(f(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return u}function I(e,t,r){if(null==e)return e;var i=[],n=0;return C(e,i,"","",(function(e){return t.call(r,e,n++)})),i}function M(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var A={current:null};function E(){var e=A.current;if(null===e)throw Error(f(321));return e}var N={ReactCurrentDispatcher:A,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:x,IsSomeRendererActing:{current:!1},assign:i};t.Children={map:I,forEach:function(e,t,r){I(e,(function(){t.apply(this,arguments)}),r)},count:function(e){var t=0;return I(e,(function(){t++})),t},toArray:function(e){return I(e,(function(e){return e}))||[]},only:function(e){if(!S(e))throw Error(f(143));return e}},t.Component=m,t.PureComponent=y,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=N,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error(f(267,e));var a=i({},e.props),s=e.key,o=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,u=x.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(d in t)k.call(t,d)&&!w.hasOwnProperty(d)&&(a[d]=void 0===t[d]&&void 0!==c?c[d]:t[d])}var d=arguments.length-2;if(1===d)a.children=r;else if(1<d){c=Array(d);for(var h=0;h<d;h++)c[h]=arguments[h+2];a.children=c}return{$$typeof:n,type:e.type,key:s,ref:o,props:a,_owner:u}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:o,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=_,t.createFactory=function(e){var t=_.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=S,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:M}},t.memo=function(e,t){return{$$typeof:c,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return E().useCallback(e,t)},t.useContext=function(e,t){return E().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return E().useEffect(e,t)},t.useImperativeHandle=function(e,t,r){return E().useImperativeHandle(e,t,r)},t.useLayoutEffect=function(e,t){return E().useLayoutEffect(e,t)},t.useMemo=function(e,t){return E().useMemo(e,t)},t.useReducer=function(e,t,r){return E().useReducer(e,t,r)},t.useRef=function(e){return E().useRef(e)},t.useState=function(e){return E().useState(e)},t.version="17.0.2"},function(e,t,r){"use strict";var i=r(0),n=r(83),a=r(190);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!i)throw Error(s(227));var o=new Set,u={};function c(e,t){d(e,t),d(e+"Capture",t)}function d(e,t){for(u[e]=t,e=0;e<t.length;e++)o.add(t[e])}var h=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),l=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f=Object.prototype.hasOwnProperty,p={},v={};function m(e,t,r,i,n,a,s){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=i,this.attributeNamespace=n,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=s}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function b(e){return e[1].toUpperCase()}function x(e,t,r,i){var n=g.hasOwnProperty(t)?g[t]:null;(null!==n?0===n.type:!i&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,r,i){if(null===t||"undefined"===typeof t||function(e,t,r,i){if(null!==r&&0===r.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!i&&(null!==r?!r.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,r,i))return!0;if(i)return!1;if(null!==r)switch(r.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,r,n,i)&&(r=null),i||null===n?function(e){return!!f.call(v,e)||!f.call(p,e)&&(l.test(e)?v[e]=!0:(p[e]=!0,!1))}(t)&&(null===r?e.removeAttribute(t):e.setAttribute(t,""+r)):n.mustUseProperty?e[n.propertyName]=null===r?3!==n.type&&"":r:(t=n.attributeName,i=n.attributeNamespace,null===r?e.removeAttribute(t):(r=3===(n=n.type)||4===n&&!0===r?"":""+r,i?e.setAttributeNS(i,t,r):e.setAttribute(t,r))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,b);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,b);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,b);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var k=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=60103,_=60106,S=60107,O=60108,T=60114,C=60109,I=60110,M=60112,A=60113,E=60120,N=60115,P=60116,D=60121,L=60128,B=60129,R=60130,V=60131;if("function"===typeof Symbol&&Symbol.for){var G=Symbol.for;w=G("react.element"),_=G("react.portal"),S=G("react.fragment"),O=G("react.strict_mode"),T=G("react.profiler"),C=G("react.provider"),I=G("react.context"),M=G("react.forward_ref"),A=G("react.suspense"),E=G("react.suspense_list"),N=G("react.memo"),P=G("react.lazy"),D=G("react.block"),G("react.scope"),L=G("react.opaque.id"),B=G("react.debug_trace_mode"),R=G("react.offscreen"),V=G("react.legacy_hidden")}var F,q="function"===typeof Symbol&&Symbol.iterator;function j(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=q&&e[q]||e["@@iterator"])?e:null}function z(e){if(void 0===F)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);F=t&&t[1]||""}return"\n"+F+e}var H=!1;function U(e,t){if(!e||H)return"";H=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var i=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){i=u}e.call(t.prototype)}else{try{throw Error()}catch(u){i=u}e()}}catch(u){if(u&&i&&"string"===typeof u.stack){for(var n=u.stack.split("\n"),a=i.stack.split("\n"),s=n.length-1,o=a.length-1;1<=s&&0<=o&&n[s]!==a[o];)o--;for(;1<=s&&0<=o;s--,o--)if(n[s]!==a[o]){if(1!==s||1!==o)do{if(s--,0>--o||n[s]!==a[o])return"\n"+n[s].replace(" at new "," at ")}while(1<=s&&0<=o);break}}}finally{H=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?z(e):""}function W(e){switch(e.tag){case 5:return z(e.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return e=U(e.type,!1);case 11:return e=U(e.type.render,!1);case 22:return e=U(e.type._render,!1);case 1:return e=U(e.type,!0);default:return""}}function K(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case S:return"Fragment";case _:return"Portal";case T:return"Profiler";case O:return"StrictMode";case A:return"Suspense";case E:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case I:return(e.displayName||"Context")+".Consumer";case C:return(e._context.displayName||"Context")+".Provider";case M:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case N:return K(e.type);case D:return K(e._render);case P:t=e._payload,e=e._init;try{return K(e(t))}catch(r){}}return null}function X(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function Y(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Z(e){e._valueTracker||(e._valueTracker=function(e){var t=Y(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof r&&"function"===typeof r.get&&"function"===typeof r.set){var n=r.get,a=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return n.call(this)},set:function(e){i=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return i},setValue:function(e){i=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Q(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),i="";return e&&(i=Y(e)?e.checked?"true":"false":e.value),(e=i)!==r&&(t.setValue(e),!0)}function $(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function J(e,t){var r=t.checked;return n({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=r?r:e._wrapperState.initialChecked})}function ee(e,t){var r=null==t.defaultValue?"":t.defaultValue,i=null!=t.checked?t.checked:t.defaultChecked;r=X(null!=t.value?t.value:r),e._wrapperState={initialChecked:i,initialValue:r,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function te(e,t){null!=(t=t.checked)&&x(e,"checked",t,!1)}function re(e,t){te(e,t);var r=X(t.value),i=t.type;if(null!=r)"number"===i?(0===r&&""===e.value||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if("submit"===i||"reset"===i)return void e.removeAttribute("value");t.hasOwnProperty("value")?ne(e,t.type,r):t.hasOwnProperty("defaultValue")&&ne(e,t.type,X(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function ie(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!("submit"!==i&&"reset"!==i||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}""!==(r=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==r&&(e.name=r)}function ne(e,t,r){"number"===t&&$(e.ownerDocument)===e||(null==r?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}function ae(e,t){return e=n({children:void 0},t),(t=function(e){var t="";return i.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function se(e,t,r,i){if(e=e.options,t){t={};for(var n=0;n<r.length;n++)t["$"+r[n]]=!0;for(r=0;r<e.length;r++)n=t.hasOwnProperty("$"+e[r].value),e[r].selected!==n&&(e[r].selected=n),n&&i&&(e[r].defaultSelected=!0)}else{for(r=""+X(r),t=null,n=0;n<e.length;n++){if(e[n].value===r)return e[n].selected=!0,void(i&&(e[n].defaultSelected=!0));null!==t||e[n].disabled||(t=e[n])}null!==t&&(t.selected=!0)}}function oe(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return n({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ue(e,t){var r=t.value;if(null==r){if(r=t.children,t=t.defaultValue,null!=r){if(null!=t)throw Error(s(92));if(Array.isArray(r)){if(!(1>=r.length))throw Error(s(93));r=r[0]}t=r}null==t&&(t=""),r=t}e._wrapperState={initialValue:X(r)}}function ce(e,t){var r=X(t.value),i=X(t.defaultValue);null!=r&&((r=""+r)!==e.value&&(e.value=r),null==t.defaultValue&&e.defaultValue!==r&&(e.defaultValue=r)),null!=i&&(e.defaultValue=""+i)}function de(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var he="http://www.w3.org/1999/xhtml",le="http://www.w3.org/2000/svg";function fe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pe(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?fe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ve,me,ge=(me=function(e,t){if(e.namespaceURI!==le||"innerHTML"in e)e.innerHTML=t;else{for((ve=ve||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ve.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,r,i){MSApp.execUnsafeLocalFunction((function(){return me(e,t)}))}:me);function ye(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&3===r.nodeType)return void(r.nodeValue=t)}e.textContent=t}var be={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},xe=["Webkit","ms","Moz","O"];function ke(e,t,r){return null==t||"boolean"===typeof t||""===t?"":r||"number"!==typeof t||0===t||be.hasOwnProperty(e)&&be[e]?(""+t).trim():t+"px"}function we(e,t){for(var r in e=e.style,t)if(t.hasOwnProperty(r)){var i=0===r.indexOf("--"),n=ke(r,t[r],i);"float"===r&&(r="cssFloat"),i?e.setProperty(r,n):e[r]=n}}Object.keys(be).forEach((function(e){xe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),be[t]=be[e]}))}));var _e=n({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Se(e,t){if(t){if(_e[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function Oe(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Te(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ce=null,Ie=null,Me=null;function Ae(e){if(e=Ji(e)){if("function"!==typeof Ce)throw Error(s(280));var t=e.stateNode;t&&(t=tn(t),Ce(e.stateNode,e.type,t))}}function Ee(e){Ie?Me?Me.push(e):Me=[e]:Ie=e}function Ne(){if(Ie){var e=Ie,t=Me;if(Me=Ie=null,Ae(e),t)for(e=0;e<t.length;e++)Ae(t[e])}}function Pe(e,t){return e(t)}function De(e,t,r,i,n){return e(t,r,i,n)}function Le(){}var Be=Pe,Re=!1,Ve=!1;function Ge(){null===Ie&&null===Me||(Le(),Ne())}function Fe(e,t){var r=e.stateNode;if(null===r)return null;var i=tn(r);if(null===i)return null;r=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(i=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!i;break e;default:e=!1}if(e)return null;if(r&&"function"!==typeof r)throw Error(s(231,t,typeof r));return r}var qe=!1;if(h)try{var je={};Object.defineProperty(je,"passive",{get:function(){qe=!0}}),window.addEventListener("test",je,je),window.removeEventListener("test",je,je)}catch(me){qe=!1}function ze(e,t,r,i,n,a,s,o,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(r,c)}catch(d){this.onError(d)}}var He=!1,Ue=null,We=!1,Ke=null,Xe={onError:function(e){He=!0,Ue=e}};function Ye(e,t,r,i,n,a,s,o,u){He=!1,Ue=null,ze.apply(Xe,arguments)}function Ze(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(1026&(t=e).flags)&&(r=t.return),e=t.return}while(e)}return 3===t.tag?r:null}function Qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function $e(e){if(Ze(e)!==e)throw Error(s(188))}function Je(e){if(!(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ze(e)))throw Error(s(188));return t!==e?null:e}for(var r=e,i=t;;){var n=r.return;if(null===n)break;var a=n.alternate;if(null===a){if(null!==(i=n.return)){r=i;continue}break}if(n.child===a.child){for(a=n.child;a;){if(a===r)return $e(n),e;if(a===i)return $e(n),t;a=a.sibling}throw Error(s(188))}if(r.return!==i.return)r=n,i=a;else{for(var o=!1,u=n.child;u;){if(u===r){o=!0,r=n,i=a;break}if(u===i){o=!0,i=n,r=a;break}u=u.sibling}if(!o){for(u=a.child;u;){if(u===r){o=!0,r=a,i=n;break}if(u===i){o=!0,i=a,r=n;break}u=u.sibling}if(!o)throw Error(s(189))}}if(r.alternate!==i)throw Error(s(190))}if(3!==r.tag)throw Error(s(188));return r.stateNode.current===r?e:t}(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function et(e,t){for(var r=e.alternate;null!==t;){if(t===e||t===r)return!0;t=t.return}return!1}var tt,rt,it,nt,at=!1,st=[],ot=null,ut=null,ct=null,dt=new Map,ht=new Map,lt=[],ft="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function pt(e,t,r,i,n){return{blockedOn:e,domEventName:t,eventSystemFlags:16|r,nativeEvent:n,targetContainers:[i]}}function vt(e,t){switch(e){case"focusin":case"focusout":ot=null;break;case"dragenter":case"dragleave":ut=null;break;case"mouseover":case"mouseout":ct=null;break;case"pointerover":case"pointerout":dt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ht.delete(t.pointerId)}}function mt(e,t,r,i,n,a){return null===e||e.nativeEvent!==a?(e=pt(t,r,i,n,a),null!==t&&(null!==(t=Ji(t))&&rt(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,null!==n&&-1===t.indexOf(n)&&t.push(n),e)}function gt(e){var t=$i(e.target);if(null!==t){var r=Ze(t);if(null!==r)if(13===(t=r.tag)){if(null!==(t=Qe(r)))return e.blockedOn=t,void nt(e.lanePriority,(function(){a.unstable_runWithPriority(e.priority,(function(){it(r)}))}))}else if(3===t&&r.stateNode.hydrate)return void(e.blockedOn=3===r.tag?r.stateNode.containerInfo:null)}e.blockedOn=null}function yt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var r=Jt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==r)return null!==(t=Ji(r))&&rt(t),e.blockedOn=r,!1;t.shift()}return!0}function bt(e,t,r){yt(e)&&r.delete(t)}function xt(){for(at=!1;0<st.length;){var e=st[0];if(null!==e.blockedOn){null!==(e=Ji(e.blockedOn))&&tt(e);break}for(var t=e.targetContainers;0<t.length;){var r=Jt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==r){e.blockedOn=r;break}t.shift()}null===e.blockedOn&&st.shift()}null!==ot&&yt(ot)&&(ot=null),null!==ut&&yt(ut)&&(ut=null),null!==ct&&yt(ct)&&(ct=null),dt.forEach(bt),ht.forEach(bt)}function kt(e,t){e.blockedOn===t&&(e.blockedOn=null,at||(at=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,xt)))}function wt(e){function t(t){return kt(t,e)}if(0<st.length){kt(st[0],e);for(var r=1;r<st.length;r++){var i=st[r];i.blockedOn===e&&(i.blockedOn=null)}}for(null!==ot&&kt(ot,e),null!==ut&&kt(ut,e),null!==ct&&kt(ct,e),dt.forEach(t),ht.forEach(t),r=0;r<lt.length;r++)(i=lt[r]).blockedOn===e&&(i.blockedOn=null);for(;0<lt.length&&null===(r=lt[0]).blockedOn;)gt(r),null===r.blockedOn&&lt.shift()}function _t(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var St={animationend:_t("Animation","AnimationEnd"),animationiteration:_t("Animation","AnimationIteration"),animationstart:_t("Animation","AnimationStart"),transitionend:_t("Transition","TransitionEnd")},Ot={},Tt={};function Ct(e){if(Ot[e])return Ot[e];if(!St[e])return e;var t,r=St[e];for(t in r)if(r.hasOwnProperty(t)&&t in Tt)return Ot[e]=r[t];return e}h&&(Tt=document.createElement("div").style,"AnimationEvent"in window||(delete St.animationend.animation,delete St.animationiteration.animation,delete St.animationstart.animation),"TransitionEvent"in window||delete St.transitionend.transition);var It=Ct("animationend"),Mt=Ct("animationiteration"),At=Ct("animationstart"),Et=Ct("transitionend"),Nt=new Map,Pt=new Map,Dt=["abort","abort",It,"animationEnd",Mt,"animationIteration",At,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Et,"transitionEnd","waiting","waiting"];function Lt(e,t){for(var r=0;r<e.length;r+=2){var i=e[r],n=e[r+1];n="on"+(n[0].toUpperCase()+n.slice(1)),Pt.set(i,t),Nt.set(i,n),c(n,[i])}}(0,a.unstable_now)();var Bt=8;function Rt(e){if(0!==(1&e))return Bt=15,1;if(0!==(2&e))return Bt=14,2;if(0!==(4&e))return Bt=13,4;var t=24&e;return 0!==t?(Bt=12,t):0!==(32&e)?(Bt=11,32):0!==(t=192&e)?(Bt=10,t):0!==(256&e)?(Bt=9,256):0!==(t=3584&e)?(Bt=8,t):0!==(4096&e)?(Bt=7,4096):0!==(t=4186112&e)?(Bt=6,t):0!==(t=62914560&e)?(Bt=5,t):67108864&e?(Bt=4,67108864):0!==(134217728&e)?(Bt=3,134217728):0!==(t=805306368&e)?(Bt=2,t):0!==(1073741824&e)?(Bt=1,1073741824):(Bt=8,e)}function Vt(e,t){var r=e.pendingLanes;if(0===r)return Bt=0;var i=0,n=0,a=e.expiredLanes,s=e.suspendedLanes,o=e.pingedLanes;if(0!==a)i=a,n=Bt=15;else if(0!==(a=134217727&r)){var u=a&~s;0!==u?(i=Rt(u),n=Bt):0!==(o&=a)&&(i=Rt(o),n=Bt)}else 0!==(a=r&~s)?(i=Rt(a),n=Bt):0!==o&&(i=Rt(o),n=Bt);if(0===i)return 0;if(i=r&((0>(i=31-Ht(i))?0:1<<i)<<1)-1,0!==t&&t!==i&&0===(t&s)){if(Rt(t),n<=Bt)return t;Bt=n}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=i;0<t;)n=1<<(r=31-Ht(t)),i|=e[r],t&=~n;return i}function Gt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function Ft(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=qt(24&~t))?Ft(10,t):e;case 10:return 0===(e=qt(192&~t))?Ft(8,t):e;case 8:return 0===(e=qt(3584&~t))&&(0===(e=qt(4186112&~t))&&(e=512)),e;case 2:return 0===(t=qt(805306368&~t))&&(t=268435456),t}throw Error(s(358,e))}function qt(e){return e&-e}function jt(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function zt(e,t,r){e.pendingLanes|=t;var i=t-1;e.suspendedLanes&=i,e.pingedLanes&=i,(e=e.eventTimes)[t=31-Ht(t)]=r}var Ht=Math.clz32?Math.clz32:function(e){return 0===e?32:31-(Ut(e)/Wt|0)|0},Ut=Math.log,Wt=Math.LN2;var Kt=a.unstable_UserBlockingPriority,Xt=a.unstable_runWithPriority,Yt=!0;function Zt(e,t,r,i){Re||Le();var n=$t,a=Re;Re=!0;try{De(n,e,t,r,i)}finally{(Re=a)||Ge()}}function Qt(e,t,r,i){Xt(Kt,$t.bind(null,e,t,r,i))}function $t(e,t,r,i){var n;if(Yt)if((n=0===(4&t))&&0<st.length&&-1<ft.indexOf(e))e=pt(null,e,t,r,i),st.push(e);else{var a=Jt(e,t,r,i);if(null===a)n&&vt(e,i);else{if(n){if(-1<ft.indexOf(e))return e=pt(a,e,t,r,i),void st.push(e);if(function(e,t,r,i,n){switch(t){case"focusin":return ot=mt(ot,e,t,r,i,n),!0;case"dragenter":return ut=mt(ut,e,t,r,i,n),!0;case"mouseover":return ct=mt(ct,e,t,r,i,n),!0;case"pointerover":var a=n.pointerId;return dt.set(a,mt(dt.get(a)||null,e,t,r,i,n)),!0;case"gotpointercapture":return a=n.pointerId,ht.set(a,mt(ht.get(a)||null,e,t,r,i,n)),!0}return!1}(a,e,t,r,i))return;vt(e,i)}Ei(e,t,i,null,r)}}}function Jt(e,t,r,i){var n=Te(i);if(null!==(n=$i(n))){var a=Ze(n);if(null===a)n=null;else{var s=a.tag;if(13===s){if(null!==(n=Qe(a)))return n;n=null}else if(3===s){if(a.stateNode.hydrate)return 3===a.tag?a.stateNode.containerInfo:null;n=null}else a!==n&&(n=null)}}return Ei(e,t,i,n,r),null}var er=null,tr=null,rr=null;function ir(){if(rr)return rr;var e,t,r=tr,i=r.length,n="value"in er?er.value:er.textContent,a=n.length;for(e=0;e<i&&r[e]===n[e];e++);var s=i-e;for(t=1;t<=s&&r[i-t]===n[a-t];t++);return rr=n.slice(e,1<t?1-t:void 0)}function nr(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function ar(){return!0}function sr(){return!1}function or(e){function t(t,r,i,n,a){for(var s in this._reactName=t,this._targetInst=i,this.type=r,this.nativeEvent=n,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(s)&&(t=e[s],this[s]=t?t(n):n[s]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?ar:sr,this.isPropagationStopped=sr,this}return n(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=ar)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=ar)},persist:function(){},isPersistent:ar}),t}var ur,cr,dr,hr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},lr=or(hr),fr=n({},hr,{view:0,detail:0}),pr=or(fr),vr=n({},fr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tr,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==dr&&(dr&&"mousemove"===e.type?(ur=e.screenX-dr.screenX,cr=e.screenY-dr.screenY):cr=ur=0,dr=e),ur)},movementY:function(e){return"movementY"in e?e.movementY:cr}}),mr=or(vr),gr=or(n({},vr,{dataTransfer:0})),yr=or(n({},fr,{relatedTarget:0})),br=or(n({},hr,{animationName:0,elapsedTime:0,pseudoElement:0})),xr=or(n({},hr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),kr=or(n({},hr,{data:0})),wr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_r={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Or(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sr[e])&&!!t[e]}function Tr(){return Or}var Cr=or(n({},fr,{key:function(e){if(e.key){var t=wr[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=nr(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?_r[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tr,charCode:function(e){return"keypress"===e.type?nr(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?nr(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),Ir=or(n({},vr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Mr=or(n({},fr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tr})),Ar=or(n({},hr,{propertyName:0,elapsedTime:0,pseudoElement:0})),Er=or(n({},vr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),Nr=[9,13,27,32],Pr=h&&"CompositionEvent"in window,Dr=null;h&&"documentMode"in document&&(Dr=document.documentMode);var Lr=h&&"TextEvent"in window&&!Dr,Br=h&&(!Pr||Dr&&8<Dr&&11>=Dr),Rr=String.fromCharCode(32),Vr=!1;function Gr(e,t){switch(e){case"keyup":return-1!==Nr.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Fr(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var qr=!1;var jr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!jr[e.type]:"textarea"===t}function Hr(e,t,r,i){Ee(i),0<(t=Pi(t,"onChange")).length&&(r=new lr("onChange","change",null,r,i),e.push({event:r,listeners:t}))}var Ur=null,Wr=null;function Kr(e){Oi(e,0)}function Xr(e){if(Q(en(e)))return e}function Yr(e,t){if("change"===e)return t}var Zr=!1;if(h){var Qr;if(h){var $r="oninput"in document;if(!$r){var Jr=document.createElement("div");Jr.setAttribute("oninput","return;"),$r="function"===typeof Jr.oninput}Qr=$r}else Qr=!1;Zr=Qr&&(!document.documentMode||9<document.documentMode)}function ei(){Ur&&(Ur.detachEvent("onpropertychange",ti),Wr=Ur=null)}function ti(e){if("value"===e.propertyName&&Xr(Wr)){var t=[];if(Hr(t,Wr,e,Te(e)),e=Kr,Re)e(t);else{Re=!0;try{Pe(e,t)}finally{Re=!1,Ge()}}}}function ri(e,t,r){"focusin"===e?(ei(),Wr=r,(Ur=t).attachEvent("onpropertychange",ti)):"focusout"===e&&ei()}function ii(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Xr(Wr)}function ni(e,t){if("click"===e)return Xr(t)}function ai(e,t){if("input"===e||"change"===e)return Xr(t)}var si="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},oi=Object.prototype.hasOwnProperty;function ui(e,t){if(si(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var r=Object.keys(e),i=Object.keys(t);if(r.length!==i.length)return!1;for(i=0;i<r.length;i++)if(!oi.call(t,r[i])||!si(e[r[i]],t[r[i]]))return!1;return!0}function ci(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function di(e,t){var r,i=ci(e);for(e=0;i;){if(3===i.nodeType){if(r=e+i.textContent.length,e<=t&&r>=t)return{node:i,offset:t-e};e=r}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=ci(i)}}function hi(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hi(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function li(){for(var e=window,t=$();t instanceof e.HTMLIFrameElement;){try{var r="string"===typeof t.contentWindow.location.href}catch(i){r=!1}if(!r)break;t=$((e=t.contentWindow).document)}return t}function fi(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var pi=h&&"documentMode"in document&&11>=document.documentMode,vi=null,mi=null,gi=null,yi=!1;function bi(e,t,r){var i=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;yi||null==vi||vi!==$(i)||("selectionStart"in(i=vi)&&fi(i)?i={start:i.selectionStart,end:i.selectionEnd}:i={anchorNode:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset},gi&&ui(gi,i)||(gi=i,0<(i=Pi(mi,"onSelect")).length&&(t=new lr("onSelect","select",null,t,r),e.push({event:t,listeners:i}),t.target=vi)))}Lt("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Lt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Lt(Dt,2);for(var xi="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),ki=0;ki<xi.length;ki++)Pt.set(xi[ki],0);d("onMouseEnter",["mouseout","mouseover"]),d("onMouseLeave",["mouseout","mouseover"]),d("onPointerEnter",["pointerout","pointerover"]),d("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var wi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_i=new Set("cancel close invalid load scroll toggle".split(" ").concat(wi));function Si(e,t,r){var i=e.type||"unknown-event";e.currentTarget=r,function(e,t,r,i,n,a,o,u,c){if(Ye.apply(this,arguments),He){if(!He)throw Error(s(198));var d=Ue;He=!1,Ue=null,We||(We=!0,Ke=d)}}(i,t,void 0,e),e.currentTarget=null}function Oi(e,t){t=0!==(4&t);for(var r=0;r<e.length;r++){var i=e[r],n=i.event;i=i.listeners;e:{var a=void 0;if(t)for(var s=i.length-1;0<=s;s--){var o=i[s],u=o.instance,c=o.currentTarget;if(o=o.listener,u!==a&&n.isPropagationStopped())break e;Si(n,o,c),a=u}else for(s=0;s<i.length;s++){if(u=(o=i[s]).instance,c=o.currentTarget,o=o.listener,u!==a&&n.isPropagationStopped())break e;Si(n,o,c),a=u}}}if(We)throw e=Ke,We=!1,Ke=null,e}function Ti(e,t){var r=rn(t),i=e+"__bubble";r.has(i)||(Ai(t,e,2,!1),r.add(i))}var Ci="_reactListening"+Math.random().toString(36).slice(2);function Ii(e){e[Ci]||(e[Ci]=!0,o.forEach((function(t){_i.has(t)||Mi(t,!1,e,null),Mi(t,!0,e,null)})))}function Mi(e,t,r,i){var n=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,a=r;if("selectionchange"===e&&9!==r.nodeType&&(a=r.ownerDocument),null!==i&&!t&&_i.has(e)){if("scroll"!==e)return;n|=2,a=i}var s=rn(a),o=e+"__"+(t?"capture":"bubble");s.has(o)||(t&&(n|=4),Ai(a,e,n,t),s.add(o))}function Ai(e,t,r,i){var n=Pt.get(t);switch(void 0===n?2:n){case 0:n=Zt;break;case 1:n=Qt;break;default:n=$t}r=n.bind(null,t,r,e),n=void 0,!qe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(n=!0),i?void 0!==n?e.addEventListener(t,r,{capture:!0,passive:n}):e.addEventListener(t,r,!0):void 0!==n?e.addEventListener(t,r,{passive:n}):e.addEventListener(t,r,!1)}function Ei(e,t,r,i,n){var a=i;if(0===(1&t)&&0===(2&t)&&null!==i)e:for(;;){if(null===i)return;var s=i.tag;if(3===s||4===s){var o=i.stateNode.containerInfo;if(o===n||8===o.nodeType&&o.parentNode===n)break;if(4===s)for(s=i.return;null!==s;){var u=s.tag;if((3===u||4===u)&&((u=s.stateNode.containerInfo)===n||8===u.nodeType&&u.parentNode===n))return;s=s.return}for(;null!==o;){if(null===(s=$i(o)))return;if(5===(u=s.tag)||6===u){i=a=s;continue e}o=o.parentNode}}i=i.return}!function(e,t,r){if(Ve)return e(t,r);Ve=!0;try{Be(e,t,r)}finally{Ve=!1,Ge()}}((function(){var i=a,n=Te(r),s=[];e:{var o=Nt.get(e);if(void 0!==o){var u=lr,c=e;switch(e){case"keypress":if(0===nr(r))break e;case"keydown":case"keyup":u=Cr;break;case"focusin":c="focus",u=yr;break;case"focusout":c="blur",u=yr;break;case"beforeblur":case"afterblur":u=yr;break;case"click":if(2===r.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=mr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=gr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=Mr;break;case It:case Mt:case At:u=br;break;case Et:u=Ar;break;case"scroll":u=pr;break;case"wheel":u=Er;break;case"copy":case"cut":case"paste":u=xr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=Ir}var d=0!==(4&t),h=!d&&"scroll"===e,l=d?null!==o?o+"Capture":null:o;d=[];for(var f,p=i;null!==p;){var v=(f=p).stateNode;if(5===f.tag&&null!==v&&(f=v,null!==l&&(null!=(v=Fe(p,l))&&d.push(Ni(p,v,f)))),h)break;p=p.return}0<d.length&&(o=new u(o,c,null,r,n),s.push({event:o,listeners:d}))}}if(0===(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||0!==(16&t)||!(c=r.relatedTarget||r.fromElement)||!$i(c)&&!c[Zi])&&(u||o)&&(o=n.window===n?n:(o=n.ownerDocument)?o.defaultView||o.parentWindow:window,u?(u=i,null!==(c=(c=r.relatedTarget||r.toElement)?$i(c):null)&&(c!==(h=Ze(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(u=null,c=i),u!==c)){if(d=mr,v="onMouseLeave",l="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(d=Ir,v="onPointerLeave",l="onPointerEnter",p="pointer"),h=null==u?o:en(u),f=null==c?o:en(c),(o=new d(v,p+"leave",u,r,n)).target=h,o.relatedTarget=f,v=null,$i(n)===i&&((d=new d(l,p+"enter",c,r,n)).target=f,d.relatedTarget=h,v=d),h=v,u&&c)e:{for(l=c,p=0,f=d=u;f;f=Di(f))p++;for(f=0,v=l;v;v=Di(v))f++;for(;0<p-f;)d=Di(d),p--;for(;0<f-p;)l=Di(l),f--;for(;p--;){if(d===l||null!==l&&d===l.alternate)break e;d=Di(d),l=Di(l)}d=null}else d=null;null!==u&&Li(s,o,u,d,!1),null!==c&&null!==h&&Li(s,h,c,d,!0)}if("select"===(u=(o=i?en(i):window).nodeName&&o.nodeName.toLowerCase())||"input"===u&&"file"===o.type)var m=Yr;else if(zr(o))if(Zr)m=ai;else{m=ii;var g=ri}else(u=o.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(m=ni);switch(m&&(m=m(e,i))?Hr(s,m,r,n):(g&&g(e,o,i),"focusout"===e&&(g=o._wrapperState)&&g.controlled&&"number"===o.type&&ne(o,"number",o.value)),g=i?en(i):window,e){case"focusin":(zr(g)||"true"===g.contentEditable)&&(vi=g,mi=i,gi=null);break;case"focusout":gi=mi=vi=null;break;case"mousedown":yi=!0;break;case"contextmenu":case"mouseup":case"dragend":yi=!1,bi(s,r,n);break;case"selectionchange":if(pi)break;case"keydown":case"keyup":bi(s,r,n)}var y;if(Pr)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else qr?Gr(e,r)&&(b="onCompositionEnd"):"keydown"===e&&229===r.keyCode&&(b="onCompositionStart");b&&(Br&&"ko"!==r.locale&&(qr||"onCompositionStart"!==b?"onCompositionEnd"===b&&qr&&(y=ir()):(tr="value"in(er=n)?er.value:er.textContent,qr=!0)),0<(g=Pi(i,b)).length&&(b=new kr(b,e,null,r,n),s.push({event:b,listeners:g}),y?b.data=y:null!==(y=Fr(r))&&(b.data=y))),(y=Lr?function(e,t){switch(e){case"compositionend":return Fr(t);case"keypress":return 32!==t.which?null:(Vr=!0,Rr);case"textInput":return(e=t.data)===Rr&&Vr?null:e;default:return null}}(e,r):function(e,t){if(qr)return"compositionend"===e||!Pr&&Gr(e,t)?(e=ir(),rr=tr=er=null,qr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Br&&"ko"!==t.locale?null:t.data;default:return null}}(e,r))&&(0<(i=Pi(i,"onBeforeInput")).length&&(n=new kr("onBeforeInput","beforeinput",null,r,n),s.push({event:n,listeners:i}),n.data=y))}Oi(s,t)}))}function Ni(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Pi(e,t){for(var r=t+"Capture",i=[];null!==e;){var n=e,a=n.stateNode;5===n.tag&&null!==a&&(n=a,null!=(a=Fe(e,r))&&i.unshift(Ni(e,a,n)),null!=(a=Fe(e,t))&&i.push(Ni(e,a,n))),e=e.return}return i}function Di(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Li(e,t,r,i,n){for(var a=t._reactName,s=[];null!==r&&r!==i;){var o=r,u=o.alternate,c=o.stateNode;if(null!==u&&u===i)break;5===o.tag&&null!==c&&(o=c,n?null!=(u=Fe(r,a))&&s.unshift(Ni(r,u,o)):n||null!=(u=Fe(r,a))&&s.push(Ni(r,u,o))),r=r.return}0!==s.length&&e.push({event:t,listeners:s})}function Bi(){}var Ri=null,Vi=null;function Gi(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function Fi(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var qi="function"===typeof setTimeout?setTimeout:void 0,ji="function"===typeof clearTimeout?clearTimeout:void 0;function zi(e){1===e.nodeType?e.textContent="":9===e.nodeType&&(null!=(e=e.body)&&(e.textContent=""))}function Hi(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var r=e.data;if("$"===r||"$!"===r||"$?"===r){if(0===t)return e;t--}else"/$"===r&&t++}e=e.previousSibling}return null}var Wi=0;var Ki=Math.random().toString(36).slice(2),Xi="__reactFiber$"+Ki,Yi="__reactProps$"+Ki,Zi="__reactContainer$"+Ki,Qi="__reactEvents$"+Ki;function $i(e){var t=e[Xi];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Zi]||r[Xi]){if(r=t.alternate,null!==t.child||null!==r&&null!==r.child)for(e=Ui(e);null!==e;){if(r=e[Xi])return r;e=Ui(e)}return t}r=(e=r).parentNode}return null}function Ji(e){return!(e=e[Xi]||e[Zi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function en(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function tn(e){return e[Yi]||null}function rn(e){var t=e[Qi];return void 0===t&&(t=e[Qi]=new Set),t}var nn=[],an=-1;function sn(e){return{current:e}}function on(e){0>an||(e.current=nn[an],nn[an]=null,an--)}function un(e,t){an++,nn[an]=e.current,e.current=t}var cn={},dn=sn(cn),hn=sn(!1),ln=cn;function fn(e,t){var r=e.type.contextTypes;if(!r)return cn;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var n,a={};for(n in r)a[n]=t[n];return i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function pn(e){return null!==(e=e.childContextTypes)&&void 0!==e}function vn(){on(hn),on(dn)}function mn(e,t,r){if(dn.current!==cn)throw Error(s(168));un(dn,t),un(hn,r)}function gn(e,t,r){var i=e.stateNode;if(e=t.childContextTypes,"function"!==typeof i.getChildContext)return r;for(var a in i=i.getChildContext())if(!(a in e))throw Error(s(108,K(t)||"Unknown",a));return n({},r,i)}function yn(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||cn,ln=dn.current,un(dn,e),un(hn,hn.current),!0}function bn(e,t,r){var i=e.stateNode;if(!i)throw Error(s(169));r?(e=gn(e,t,ln),i.__reactInternalMemoizedMergedChildContext=e,on(hn),on(dn),un(dn,e)):on(hn),un(hn,r)}var xn=null,kn=null,wn=a.unstable_runWithPriority,_n=a.unstable_scheduleCallback,Sn=a.unstable_cancelCallback,On=a.unstable_shouldYield,Tn=a.unstable_requestPaint,Cn=a.unstable_now,In=a.unstable_getCurrentPriorityLevel,Mn=a.unstable_ImmediatePriority,An=a.unstable_UserBlockingPriority,En=a.unstable_NormalPriority,Nn=a.unstable_LowPriority,Pn=a.unstable_IdlePriority,Dn={},Ln=void 0!==Tn?Tn:function(){},Bn=null,Rn=null,Vn=!1,Gn=Cn(),Fn=1e4>Gn?Cn:function(){return Cn()-Gn};function qn(){switch(In()){case Mn:return 99;case An:return 98;case En:return 97;case Nn:return 96;case Pn:return 95;default:throw Error(s(332))}}function jn(e){switch(e){case 99:return Mn;case 98:return An;case 97:return En;case 96:return Nn;case 95:return Pn;default:throw Error(s(332))}}function zn(e,t){return e=jn(e),wn(e,t)}function Hn(e,t,r){return e=jn(e),_n(e,t,r)}function Un(){if(null!==Rn){var e=Rn;Rn=null,Sn(e)}Wn()}function Wn(){if(!Vn&&null!==Bn){Vn=!0;var e=0;try{var t=Bn;zn(99,(function(){for(;e<t.length;e++){var r=t[e];do{r=r(!0)}while(null!==r)}})),Bn=null}catch(r){throw null!==Bn&&(Bn=Bn.slice(e+1)),_n(Mn,Un),r}finally{Vn=!1}}}var Kn=k.ReactCurrentBatchConfig;function Xn(e,t){if(e&&e.defaultProps){for(var r in t=n({},t),e=e.defaultProps)void 0===t[r]&&(t[r]=e[r]);return t}return t}var Yn=sn(null),Zn=null,Qn=null,$n=null;function Jn(){$n=Qn=Zn=null}function ea(e){var t=Yn.current;on(Yn),e.type._context._currentValue=t}function ta(e,t){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)===t){if(null===r||(r.childLanes&t)===t)break;r.childLanes|=t}else e.childLanes|=t,null!==r&&(r.childLanes|=t);e=e.return}}function ra(e,t){Zn=e,$n=Qn=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Ps=!0),e.firstContext=null)}function ia(e,t){if($n!==e&&!1!==t&&0!==t)if("number"===typeof t&&1073741823!==t||($n=e,t=1073741823),t={context:e,observedBits:t,next:null},null===Qn){if(null===Zn)throw Error(s(308));Qn=t,Zn.dependencies={lanes:0,firstContext:t,responders:null}}else Qn=Qn.next=t;return e._currentValue}var na=!1;function aa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function sa(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function oa(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ua(e,t){if(null!==(e=e.updateQueue)){var r=(e=e.shared).pending;null===r?t.next=t:(t.next=r.next,r.next=t),e.pending=t}}function ca(e,t){var r=e.updateQueue,i=e.alternate;if(null!==i&&r===(i=i.updateQueue)){var n=null,a=null;if(null!==(r=r.firstBaseUpdate)){do{var s={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};null===a?n=a=s:a=a.next=s,r=r.next}while(null!==r);null===a?n=a=t:a=a.next=t}else n=a=t;return r={baseState:i.baseState,firstBaseUpdate:n,lastBaseUpdate:a,shared:i.shared,effects:i.effects},void(e.updateQueue=r)}null===(e=r.lastBaseUpdate)?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function da(e,t,r,i){var a=e.updateQueue;na=!1;var s=a.firstBaseUpdate,o=a.lastBaseUpdate,u=a.shared.pending;if(null!==u){a.shared.pending=null;var c=u,d=c.next;c.next=null,null===o?s=d:o.next=d,o=c;var h=e.alternate;if(null!==h){var l=(h=h.updateQueue).lastBaseUpdate;l!==o&&(null===l?h.firstBaseUpdate=d:l.next=d,h.lastBaseUpdate=c)}}if(null!==s){for(l=a.baseState,o=0,h=d=c=null;;){u=s.lane;var f=s.eventTime;if((i&u)===u){null!==h&&(h=h.next={eventTime:f,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=e,v=s;switch(u=t,f=r,v.tag){case 1:if("function"===typeof(p=v.payload)){l=p.call(f,l,u);break e}l=p;break e;case 3:p.flags=-4097&p.flags|64;case 0:if(null===(u="function"===typeof(p=v.payload)?p.call(f,l,u):p)||void 0===u)break e;l=n({},l,u);break e;case 2:na=!0}}null!==s.callback&&(e.flags|=32,null===(u=a.effects)?a.effects=[s]:u.push(s))}else f={eventTime:f,lane:u,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===h?(d=h=f,c=l):h=h.next=f,o|=u;if(null===(s=s.next)){if(null===(u=a.shared.pending))break;s=u.next,u.next=null,a.lastBaseUpdate=u,a.shared.pending=null}}null===h&&(c=l),a.baseState=c,a.firstBaseUpdate=d,a.lastBaseUpdate=h,Vo|=o,e.lanes=o,e.memoizedState=l}}function ha(e,t,r){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var i=e[t],n=i.callback;if(null!==n){if(i.callback=null,i=r,"function"!==typeof n)throw Error(s(191,n));n.call(i)}}}var la=(new i.Component).refs;function fa(e,t,r,i){r=null===(r=r(i,t=e.memoizedState))||void 0===r?t:n({},t,r),e.memoizedState=r,0===e.lanes&&(e.updateQueue.baseState=r)}var pa={isMounted:function(e){return!!(e=e._reactInternals)&&Ze(e)===e},enqueueSetState:function(e,t,r){e=e._reactInternals;var i=cu(),n=du(e),a=oa(i,n);a.payload=t,void 0!==r&&null!==r&&(a.callback=r),ua(e,a),hu(e,n,i)},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var i=cu(),n=du(e),a=oa(i,n);a.tag=1,a.payload=t,void 0!==r&&null!==r&&(a.callback=r),ua(e,a),hu(e,n,i)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=cu(),i=du(e),n=oa(r,i);n.tag=2,void 0!==t&&null!==t&&(n.callback=t),ua(e,n),hu(e,i,r)}};function va(e,t,r,i,n,a,s){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(i,a,s):!t.prototype||!t.prototype.isPureReactComponent||(!ui(r,i)||!ui(n,a))}function ma(e,t,r){var i=!1,n=cn,a=t.contextType;return"object"===typeof a&&null!==a?a=ia(a):(n=pn(t)?ln:dn.current,a=(i=null!==(i=t.contextTypes)&&void 0!==i)?fn(e,n):cn),t=new t(r,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=pa,e.stateNode=t,t._reactInternals=e,i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=a),t}function ga(e,t,r,i){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(r,i),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(r,i),t.state!==e&&pa.enqueueReplaceState(t,t.state,null)}function ya(e,t,r,i){var n=e.stateNode;n.props=r,n.state=e.memoizedState,n.refs=la,aa(e);var a=t.contextType;"object"===typeof a&&null!==a?n.context=ia(a):(a=pn(t)?ln:dn.current,n.context=fn(e,a)),da(e,r,n,i),n.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(fa(e,t,a,r),n.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof n.getSnapshotBeforeUpdate||"function"!==typeof n.UNSAFE_componentWillMount&&"function"!==typeof n.componentWillMount||(t=n.state,"function"===typeof n.componentWillMount&&n.componentWillMount(),"function"===typeof n.UNSAFE_componentWillMount&&n.UNSAFE_componentWillMount(),t!==n.state&&pa.enqueueReplaceState(n,n.state,null),da(e,r,n,i),n.state=e.memoizedState),"function"===typeof n.componentDidMount&&(e.flags|=4)}var ba=Array.isArray;function xa(e,t,r){if(null!==(e=r.ref)&&"function"!==typeof e&&"object"!==typeof e){if(r._owner){if(r=r._owner){if(1!==r.tag)throw Error(s(309));var i=r.stateNode}if(!i)throw Error(s(147,e));var n=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===n?t.ref:((t=function(e){var t=i.refs;t===la&&(t=i.refs={}),null===e?delete t[n]:t[n]=e})._stringRef=n,t)}if("string"!==typeof e)throw Error(s(284));if(!r._owner)throw Error(s(290,e))}return e}function ka(e,t){if("textarea"!==e.type)throw Error(s(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function wa(e){function t(t,r){if(e){var i=t.lastEffect;null!==i?(i.nextEffect=r,t.lastEffect=r):t.firstEffect=t.lastEffect=r,r.nextEffect=null,r.flags=8}}function r(r,i){if(!e)return null;for(;null!==i;)t(r,i),i=i.sibling;return null}function i(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function n(e,t){return(e=zu(e,t)).index=0,e.sibling=null,e}function a(t,r,i){return t.index=i,e?null!==(i=t.alternate)?(i=i.index)<r?(t.flags=2,r):i:(t.flags=2,r):r}function o(t){return e&&null===t.alternate&&(t.flags=2),t}function u(e,t,r,i){return null===t||6!==t.tag?((t=Ku(r,e.mode,i)).return=e,t):((t=n(t,r)).return=e,t)}function c(e,t,r,i){return null!==t&&t.elementType===r.type?((i=n(t,r.props)).ref=xa(e,t,r),i.return=e,i):((i=Hu(r.type,r.key,r.props,null,e.mode,i)).ref=xa(e,t,r),i.return=e,i)}function d(e,t,r,i){return null===t||4!==t.tag||t.stateNode.containerInfo!==r.containerInfo||t.stateNode.implementation!==r.implementation?((t=Xu(r,e.mode,i)).return=e,t):((t=n(t,r.children||[])).return=e,t)}function h(e,t,r,i,a){return null===t||7!==t.tag?((t=Uu(r,e.mode,i,a)).return=e,t):((t=n(t,r)).return=e,t)}function l(e,t,r){if("string"===typeof t||"number"===typeof t)return(t=Ku(""+t,e.mode,r)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(r=Hu(t.type,t.key,t.props,null,e.mode,r)).ref=xa(e,null,t),r.return=e,r;case _:return(t=Xu(t,e.mode,r)).return=e,t}if(ba(t)||j(t))return(t=Uu(t,e.mode,r,null)).return=e,t;ka(e,t)}return null}function f(e,t,r,i){var n=null!==t?t.key:null;if("string"===typeof r||"number"===typeof r)return null!==n?null:u(e,t,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return r.key===n?r.type===S?h(e,t,r.props.children,i,n):c(e,t,r,i):null;case _:return r.key===n?d(e,t,r,i):null}if(ba(r)||j(r))return null!==n?null:h(e,t,r,i,null);ka(e,r)}return null}function p(e,t,r,i,n){if("string"===typeof i||"number"===typeof i)return u(t,e=e.get(r)||null,""+i,n);if("object"===typeof i&&null!==i){switch(i.$$typeof){case w:return e=e.get(null===i.key?r:i.key)||null,i.type===S?h(t,e,i.props.children,n,i.key):c(t,e,i,n);case _:return d(t,e=e.get(null===i.key?r:i.key)||null,i,n)}if(ba(i)||j(i))return h(t,e=e.get(r)||null,i,n,null);ka(t,i)}return null}function v(n,s,o,u){for(var c=null,d=null,h=s,v=s=0,m=null;null!==h&&v<o.length;v++){h.index>v?(m=h,h=null):m=h.sibling;var g=f(n,h,o[v],u);if(null===g){null===h&&(h=m);break}e&&h&&null===g.alternate&&t(n,h),s=a(g,s,v),null===d?c=g:d.sibling=g,d=g,h=m}if(v===o.length)return r(n,h),c;if(null===h){for(;v<o.length;v++)null!==(h=l(n,o[v],u))&&(s=a(h,s,v),null===d?c=h:d.sibling=h,d=h);return c}for(h=i(n,h);v<o.length;v++)null!==(m=p(h,n,v,o[v],u))&&(e&&null!==m.alternate&&h.delete(null===m.key?v:m.key),s=a(m,s,v),null===d?c=m:d.sibling=m,d=m);return e&&h.forEach((function(e){return t(n,e)})),c}function m(n,o,u,c){var d=j(u);if("function"!==typeof d)throw Error(s(150));if(null==(u=d.call(u)))throw Error(s(151));for(var h=d=null,v=o,m=o=0,g=null,y=u.next();null!==v&&!y.done;m++,y=u.next()){v.index>m?(g=v,v=null):g=v.sibling;var b=f(n,v,y.value,c);if(null===b){null===v&&(v=g);break}e&&v&&null===b.alternate&&t(n,v),o=a(b,o,m),null===h?d=b:h.sibling=b,h=b,v=g}if(y.done)return r(n,v),d;if(null===v){for(;!y.done;m++,y=u.next())null!==(y=l(n,y.value,c))&&(o=a(y,o,m),null===h?d=y:h.sibling=y,h=y);return d}for(v=i(n,v);!y.done;m++,y=u.next())null!==(y=p(v,n,m,y.value,c))&&(e&&null!==y.alternate&&v.delete(null===y.key?m:y.key),o=a(y,o,m),null===h?d=y:h.sibling=y,h=y);return e&&v.forEach((function(e){return t(n,e)})),d}return function(e,i,a,u){var c="object"===typeof a&&null!==a&&a.type===S&&null===a.key;c&&(a=a.props.children);var d="object"===typeof a&&null!==a;if(d)switch(a.$$typeof){case w:e:{for(d=a.key,c=i;null!==c;){if(c.key===d){switch(c.tag){case 7:if(a.type===S){r(e,c.sibling),(i=n(c,a.props.children)).return=e,e=i;break e}break;default:if(c.elementType===a.type){r(e,c.sibling),(i=n(c,a.props)).ref=xa(e,c,a),i.return=e,e=i;break e}}r(e,c);break}t(e,c),c=c.sibling}a.type===S?((i=Uu(a.props.children,e.mode,u,a.key)).return=e,e=i):((u=Hu(a.type,a.key,a.props,null,e.mode,u)).ref=xa(e,i,a),u.return=e,e=u)}return o(e);case _:e:{for(c=a.key;null!==i;){if(i.key===c){if(4===i.tag&&i.stateNode.containerInfo===a.containerInfo&&i.stateNode.implementation===a.implementation){r(e,i.sibling),(i=n(i,a.children||[])).return=e,e=i;break e}r(e,i);break}t(e,i),i=i.sibling}(i=Xu(a,e.mode,u)).return=e,e=i}return o(e)}if("string"===typeof a||"number"===typeof a)return a=""+a,null!==i&&6===i.tag?(r(e,i.sibling),(i=n(i,a)).return=e,e=i):(r(e,i),(i=Ku(a,e.mode,u)).return=e,e=i),o(e);if(ba(a))return v(e,i,a,u);if(j(a))return m(e,i,a,u);if(d&&ka(e,a),"undefined"===typeof a&&!c)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(s(152,K(e.type)||"Component"))}return r(e,i)}}var _a=wa(!0),Sa=wa(!1),Oa={},Ta=sn(Oa),Ca=sn(Oa),Ia=sn(Oa);function Ma(e){if(e===Oa)throw Error(s(174));return e}function Aa(e,t){switch(un(Ia,t),un(Ca,e),un(Ta,Oa),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:pe(null,"");break;default:t=pe(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}on(Ta),un(Ta,t)}function Ea(){on(Ta),on(Ca),on(Ia)}function Na(e){Ma(Ia.current);var t=Ma(Ta.current),r=pe(t,e.type);t!==r&&(un(Ca,e),un(Ta,r))}function Pa(e){Ca.current===e&&(on(Ta),on(Ca))}var Da=sn(0);function La(e){for(var t=e;null!==t;){if(13===t.tag){var r=t.memoizedState;if(null!==r&&(null===(r=r.dehydrated)||"$?"===r.data||"$!"===r.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ba=null,Ra=null,Va=!1;function Ga(e,t){var r=qu(5,null,null,0);r.elementType="DELETED",r.type="DELETED",r.stateNode=t,r.return=e,r.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=r,e.lastEffect=r):e.firstEffect=e.lastEffect=r}function Fa(e,t){switch(e.tag){case 5:var r=e.type;return null!==(t=1!==t.nodeType||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);case 13:default:return!1}}function qa(e){if(Va){var t=Ra;if(t){var r=t;if(!Fa(e,t)){if(!(t=Hi(r.nextSibling))||!Fa(e,t))return e.flags=-1025&e.flags|2,Va=!1,void(Ba=e);Ga(Ba,r)}Ba=e,Ra=Hi(t.firstChild)}else e.flags=-1025&e.flags|2,Va=!1,Ba=e}}function ja(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Ba=e}function za(e){if(e!==Ba)return!1;if(!Va)return ja(e),Va=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!Fi(t,e.memoizedProps))for(t=Ra;t;)Ga(e,t),t=Hi(t.nextSibling);if(ja(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var r=e.data;if("/$"===r){if(0===t){Ra=Hi(e.nextSibling);break e}t--}else"$"!==r&&"$!"!==r&&"$?"!==r||t++}e=e.nextSibling}Ra=null}}else Ra=Ba?Hi(e.stateNode.nextSibling):null;return!0}function Ha(){Ra=Ba=null,Va=!1}var Ua=[];function Wa(){for(var e=0;e<Ua.length;e++)Ua[e]._workInProgressVersionPrimary=null;Ua.length=0}var Ka=k.ReactCurrentDispatcher,Xa=k.ReactCurrentBatchConfig,Ya=0,Za=null,Qa=null,$a=null,Ja=!1,es=!1;function ts(){throw Error(s(321))}function rs(e,t){if(null===t)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!si(e[r],t[r]))return!1;return!0}function is(e,t,r,i,n,a){if(Ya=a,Za=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ka.current=null===e||null===e.memoizedState?Ms:As,e=r(i,n),es){a=0;do{if(es=!1,!(25>a))throw Error(s(301));a+=1,$a=Qa=null,t.updateQueue=null,Ka.current=Es,e=r(i,n)}while(es)}if(Ka.current=Is,t=null!==Qa&&null!==Qa.next,Ya=0,$a=Qa=Za=null,Ja=!1,t)throw Error(s(300));return e}function ns(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===$a?Za.memoizedState=$a=e:$a=$a.next=e,$a}function as(){if(null===Qa){var e=Za.alternate;e=null!==e?e.memoizedState:null}else e=Qa.next;var t=null===$a?Za.memoizedState:$a.next;if(null!==t)$a=t,Qa=e;else{if(null===e)throw Error(s(310));e={memoizedState:(Qa=e).memoizedState,baseState:Qa.baseState,baseQueue:Qa.baseQueue,queue:Qa.queue,next:null},null===$a?Za.memoizedState=$a=e:$a=$a.next=e}return $a}function ss(e,t){return"function"===typeof t?t(e):t}function os(e){var t=as(),r=t.queue;if(null===r)throw Error(s(311));r.lastRenderedReducer=e;var i=Qa,n=i.baseQueue,a=r.pending;if(null!==a){if(null!==n){var o=n.next;n.next=a.next,a.next=o}i.baseQueue=n=a,r.pending=null}if(null!==n){n=n.next,i=i.baseState;var u=o=a=null,c=n;do{var d=c.lane;if((Ya&d)===d)null!==u&&(u=u.next={lane:0,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null}),i=c.eagerReducer===e?c.eagerState:e(i,c.action);else{var h={lane:d,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null};null===u?(o=u=h,a=i):u=u.next=h,Za.lanes|=d,Vo|=d}c=c.next}while(null!==c&&c!==n);null===u?a=i:u.next=o,si(i,t.memoizedState)||(Ps=!0),t.memoizedState=i,t.baseState=a,t.baseQueue=u,r.lastRenderedState=i}return[t.memoizedState,r.dispatch]}function us(e){var t=as(),r=t.queue;if(null===r)throw Error(s(311));r.lastRenderedReducer=e;var i=r.dispatch,n=r.pending,a=t.memoizedState;if(null!==n){r.pending=null;var o=n=n.next;do{a=e(a,o.action),o=o.next}while(o!==n);si(a,t.memoizedState)||(Ps=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),r.lastRenderedState=a}return[a,i]}function cs(e,t,r){var i=t._getVersion;i=i(t._source);var n=t._workInProgressVersionPrimary;if(null!==n?e=n===i:(e=e.mutableReadLanes,(e=(Ya&e)===e)&&(t._workInProgressVersionPrimary=i,Ua.push(t))),e)return r(t._source);throw Ua.push(t),Error(s(350))}function ds(e,t,r,i){var n=Ao;if(null===n)throw Error(s(349));var a=t._getVersion,o=a(t._source),u=Ka.current,c=u.useState((function(){return cs(n,t,r)})),d=c[1],h=c[0];c=$a;var l=e.memoizedState,f=l.refs,p=f.getSnapshot,v=l.source;l=l.subscribe;var m=Za;return e.memoizedState={refs:f,source:t,subscribe:i},u.useEffect((function(){f.getSnapshot=r,f.setSnapshot=d;var e=a(t._source);if(!si(o,e)){e=r(t._source),si(h,e)||(d(e),e=du(m),n.mutableReadLanes|=e&n.pendingLanes),e=n.mutableReadLanes,n.entangledLanes|=e;for(var i=n.entanglements,s=e;0<s;){var u=31-Ht(s),c=1<<u;i[u]|=e,s&=~c}}}),[r,t,i]),u.useEffect((function(){return i(t._source,(function(){var e=f.getSnapshot,r=f.setSnapshot;try{r(e(t._source));var i=du(m);n.mutableReadLanes|=i&n.pendingLanes}catch(a){r((function(){throw a}))}}))}),[t,i]),si(p,r)&&si(v,t)&&si(l,i)||((e={pending:null,dispatch:null,lastRenderedReducer:ss,lastRenderedState:h}).dispatch=d=Cs.bind(null,Za,e),c.queue=e,c.baseQueue=null,h=cs(n,t,r),c.memoizedState=c.baseState=h),h}function hs(e,t,r){return ds(as(),e,t,r)}function ls(e){var t=ns();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:ss,lastRenderedState:e}).dispatch=Cs.bind(null,Za,e),[t.memoizedState,e]}function fs(e,t,r,i){return e={tag:e,create:t,destroy:r,deps:i,next:null},null===(t=Za.updateQueue)?(t={lastEffect:null},Za.updateQueue=t,t.lastEffect=e.next=e):null===(r=t.lastEffect)?t.lastEffect=e.next=e:(i=r.next,r.next=e,e.next=i,t.lastEffect=e),e}function ps(e){return e={current:e},ns().memoizedState=e}function vs(){return as().memoizedState}function ms(e,t,r,i){var n=ns();Za.flags|=e,n.memoizedState=fs(1|t,r,void 0,void 0===i?null:i)}function gs(e,t,r,i){var n=as();i=void 0===i?null:i;var a=void 0;if(null!==Qa){var s=Qa.memoizedState;if(a=s.destroy,null!==i&&rs(i,s.deps))return void fs(t,r,a,i)}Za.flags|=e,n.memoizedState=fs(1|t,r,a,i)}function ys(e,t){return ms(516,4,e,t)}function bs(e,t){return gs(516,4,e,t)}function xs(e,t){return gs(4,2,e,t)}function ks(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function ws(e,t,r){return r=null!==r&&void 0!==r?r.concat([e]):null,gs(4,2,ks.bind(null,t,e),r)}function _s(){}function Ss(e,t){var r=as();t=void 0===t?null:t;var i=r.memoizedState;return null!==i&&null!==t&&rs(t,i[1])?i[0]:(r.memoizedState=[e,t],e)}function Os(e,t){var r=as();t=void 0===t?null:t;var i=r.memoizedState;return null!==i&&null!==t&&rs(t,i[1])?i[0]:(e=e(),r.memoizedState=[e,t],e)}function Ts(e,t){var r=qn();zn(98>r?98:r,(function(){e(!0)})),zn(97<r?97:r,(function(){var r=Xa.transition;Xa.transition=1;try{e(!1),t()}finally{Xa.transition=r}}))}function Cs(e,t,r){var i=cu(),n=du(e),a={lane:n,action:r,eagerReducer:null,eagerState:null,next:null},s=t.pending;if(null===s?a.next=a:(a.next=s.next,s.next=a),t.pending=a,s=e.alternate,e===Za||null!==s&&s===Za)es=Ja=!0;else{if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var o=t.lastRenderedState,u=s(o,r);if(a.eagerReducer=s,a.eagerState=u,si(u,o))return}catch(c){}hu(e,n,i)}}var Is={readContext:ia,useCallback:ts,useContext:ts,useEffect:ts,useImperativeHandle:ts,useLayoutEffect:ts,useMemo:ts,useReducer:ts,useRef:ts,useState:ts,useDebugValue:ts,useDeferredValue:ts,useTransition:ts,useMutableSource:ts,useOpaqueIdentifier:ts,unstable_isNewReconciler:!1},Ms={readContext:ia,useCallback:function(e,t){return ns().memoizedState=[e,void 0===t?null:t],e},useContext:ia,useEffect:ys,useImperativeHandle:function(e,t,r){return r=null!==r&&void 0!==r?r.concat([e]):null,ms(4,2,ks.bind(null,t,e),r)},useLayoutEffect:function(e,t){return ms(4,2,e,t)},useMemo:function(e,t){var r=ns();return t=void 0===t?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var i=ns();return t=void 0!==r?r(t):t,i.memoizedState=i.baseState=t,e=(e=i.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=Cs.bind(null,Za,e),[i.memoizedState,e]},useRef:ps,useState:ls,useDebugValue:_s,useDeferredValue:function(e){var t=ls(e),r=t[0],i=t[1];return ys((function(){var t=Xa.transition;Xa.transition=1;try{i(e)}finally{Xa.transition=t}}),[e]),r},useTransition:function(){var e=ls(!1),t=e[0];return ps(e=Ts.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,r){var i=ns();return i.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:r},ds(i,e,t,r)},useOpaqueIdentifier:function(){if(Va){var e=!1,t=function(e){return{$$typeof:L,toString:e,valueOf:e}}((function(){throw e||(e=!0,r("r:"+(Wi++).toString(36))),Error(s(355))})),r=ls(t)[1];return 0===(2&Za.mode)&&(Za.flags|=516,fs(5,(function(){r("r:"+(Wi++).toString(36))}),void 0,null)),t}return ls(t="r:"+(Wi++).toString(36)),t},unstable_isNewReconciler:!1},As={readContext:ia,useCallback:Ss,useContext:ia,useEffect:bs,useImperativeHandle:ws,useLayoutEffect:xs,useMemo:Os,useReducer:os,useRef:vs,useState:function(){return os(ss)},useDebugValue:_s,useDeferredValue:function(e){var t=os(ss),r=t[0],i=t[1];return bs((function(){var t=Xa.transition;Xa.transition=1;try{i(e)}finally{Xa.transition=t}}),[e]),r},useTransition:function(){var e=os(ss)[0];return[vs().current,e]},useMutableSource:hs,useOpaqueIdentifier:function(){return os(ss)[0]},unstable_isNewReconciler:!1},Es={readContext:ia,useCallback:Ss,useContext:ia,useEffect:bs,useImperativeHandle:ws,useLayoutEffect:xs,useMemo:Os,useReducer:us,useRef:vs,useState:function(){return us(ss)},useDebugValue:_s,useDeferredValue:function(e){var t=us(ss),r=t[0],i=t[1];return bs((function(){var t=Xa.transition;Xa.transition=1;try{i(e)}finally{Xa.transition=t}}),[e]),r},useTransition:function(){var e=us(ss)[0];return[vs().current,e]},useMutableSource:hs,useOpaqueIdentifier:function(){return us(ss)[0]},unstable_isNewReconciler:!1},Ns=k.ReactCurrentOwner,Ps=!1;function Ds(e,t,r,i){t.child=null===e?Sa(t,null,r,i):_a(t,e.child,r,i)}function Ls(e,t,r,i,n){r=r.render;var a=t.ref;return ra(t,n),i=is(e,t,r,i,a,n),null===e||Ps?(t.flags|=1,Ds(e,t,i,n),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~n,to(e,t,n))}function Bs(e,t,r,i,n,a){if(null===e){var s=r.type;return"function"!==typeof s||ju(s)||void 0!==s.defaultProps||null!==r.compare||void 0!==r.defaultProps?((e=Hu(r.type,null,i,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Rs(e,t,s,i,n,a))}return s=e.child,0===(n&a)&&(n=s.memoizedProps,(r=null!==(r=r.compare)?r:ui)(n,i)&&e.ref===t.ref)?to(e,t,a):(t.flags|=1,(e=zu(s,i)).ref=t.ref,e.return=t,t.child=e)}function Rs(e,t,r,i,n,a){if(null!==e&&ui(e.memoizedProps,i)&&e.ref===t.ref){if(Ps=!1,0===(a&n))return t.lanes=e.lanes,to(e,t,a);0!==(16384&e.flags)&&(Ps=!0)}return Fs(e,t,r,i,a)}function Vs(e,t,r){var i=t.pendingProps,n=i.children,a=null!==e?e.memoizedState:null;if("hidden"===i.mode||"unstable-defer-without-hiding"===i.mode)if(0===(4&t.mode))t.memoizedState={baseLanes:0},bu(t,r);else{if(0===(1073741824&r))return e=null!==a?a.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},bu(t,e),null;t.memoizedState={baseLanes:0},bu(t,null!==a?a.baseLanes:r)}else null!==a?(i=a.baseLanes|r,t.memoizedState=null):i=r,bu(t,i);return Ds(e,t,n,r),t.child}function Gs(e,t){var r=t.ref;(null===e&&null!==r||null!==e&&e.ref!==r)&&(t.flags|=128)}function Fs(e,t,r,i,n){var a=pn(r)?ln:dn.current;return a=fn(t,a),ra(t,n),r=is(e,t,r,i,a,n),null===e||Ps?(t.flags|=1,Ds(e,t,r,n),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~n,to(e,t,n))}function qs(e,t,r,i,n){if(pn(r)){var a=!0;yn(t)}else a=!1;if(ra(t,n),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),ma(t,r,i),ya(t,r,i,n),i=!0;else if(null===e){var s=t.stateNode,o=t.memoizedProps;s.props=o;var u=s.context,c=r.contextType;"object"===typeof c&&null!==c?c=ia(c):c=fn(t,c=pn(r)?ln:dn.current);var d=r.getDerivedStateFromProps,h="function"===typeof d||"function"===typeof s.getSnapshotBeforeUpdate;h||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(o!==i||u!==c)&&ga(t,s,i,c),na=!1;var l=t.memoizedState;s.state=l,da(t,i,s,n),u=t.memoizedState,o!==i||l!==u||hn.current||na?("function"===typeof d&&(fa(t,r,d,i),u=t.memoizedState),(o=na||va(t,r,o,i,l,u,c))?(h||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(t.flags|=4)):("function"===typeof s.componentDidMount&&(t.flags|=4),t.memoizedProps=i,t.memoizedState=u),s.props=i,s.state=u,s.context=c,i=o):("function"===typeof s.componentDidMount&&(t.flags|=4),i=!1)}else{s=t.stateNode,sa(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:Xn(t.type,o),s.props=c,h=t.pendingProps,l=s.context,"object"===typeof(u=r.contextType)&&null!==u?u=ia(u):u=fn(t,u=pn(r)?ln:dn.current);var f=r.getDerivedStateFromProps;(d="function"===typeof f||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(o!==h||l!==u)&&ga(t,s,i,u),na=!1,l=t.memoizedState,s.state=l,da(t,i,s,n);var p=t.memoizedState;o!==h||l!==p||hn.current||na?("function"===typeof f&&(fa(t,r,f,i),p=t.memoizedState),(c=na||va(t,r,c,i,l,p,u))?(d||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(i,p,u),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(i,p,u)),"function"===typeof s.componentDidUpdate&&(t.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!==typeof s.componentDidUpdate||o===e.memoizedProps&&l===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||o===e.memoizedProps&&l===e.memoizedState||(t.flags|=256),t.memoizedProps=i,t.memoizedState=p),s.props=i,s.state=p,s.context=u,i=c):("function"!==typeof s.componentDidUpdate||o===e.memoizedProps&&l===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||o===e.memoizedProps&&l===e.memoizedState||(t.flags|=256),i=!1)}return js(e,t,r,i,a,n)}function js(e,t,r,i,n,a){Gs(e,t);var s=0!==(64&t.flags);if(!i&&!s)return n&&bn(t,r,!1),to(e,t,a);i=t.stateNode,Ns.current=t;var o=s&&"function"!==typeof r.getDerivedStateFromError?null:i.render();return t.flags|=1,null!==e&&s?(t.child=_a(t,e.child,null,a),t.child=_a(t,null,o,a)):Ds(e,t,o,a),t.memoizedState=i.state,n&&bn(t,r,!0),t.child}function zs(e){var t=e.stateNode;t.pendingContext?mn(0,t.pendingContext,t.pendingContext!==t.context):t.context&&mn(0,t.context,!1),Aa(e,t.containerInfo)}var Hs,Us,Ws,Ks={dehydrated:null,retryLane:0};function Xs(e,t,r){var i,n=t.pendingProps,a=Da.current,s=!1;return(i=0!==(64&t.flags))||(i=(null===e||null!==e.memoizedState)&&0!==(2&a)),i?(s=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===n.fallback||!0===n.unstable_avoidThisFallback||(a|=1),un(Da,1&a),null===e?(void 0!==n.fallback&&qa(t),e=n.children,a=n.fallback,s?(e=Ys(t,e,a,r),t.child.memoizedState={baseLanes:r},t.memoizedState=Ks,e):"number"===typeof n.unstable_expectedLoadTime?(e=Ys(t,e,a,r),t.child.memoizedState={baseLanes:r},t.memoizedState=Ks,t.lanes=33554432,e):((r=Wu({mode:"visible",children:e},t.mode,r,null)).return=t,t.child=r)):(e.memoizedState,s?(n=Qs(e,t,n.children,n.fallback,r),s=t.child,a=e.child.memoizedState,s.memoizedState=null===a?{baseLanes:r}:{baseLanes:a.baseLanes|r},s.childLanes=e.childLanes&~r,t.memoizedState=Ks,n):(r=Zs(e,t,n.children,r),t.memoizedState=null,r))}function Ys(e,t,r,i){var n=e.mode,a=e.child;return t={mode:"hidden",children:t},0===(2&n)&&null!==a?(a.childLanes=0,a.pendingProps=t):a=Wu(t,n,0,null),r=Uu(r,n,i,null),a.return=e,r.return=e,a.sibling=r,e.child=a,r}function Zs(e,t,r,i){var n=e.child;return e=n.sibling,r=zu(n,{mode:"visible",children:r}),0===(2&t.mode)&&(r.lanes=i),r.return=t,r.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=r}function Qs(e,t,r,i,n){var a=t.mode,s=e.child;e=s.sibling;var o={mode:"hidden",children:r};return 0===(2&a)&&t.child!==s?((r=t.child).childLanes=0,r.pendingProps=o,null!==(s=r.lastEffect)?(t.firstEffect=r.firstEffect,t.lastEffect=s,s.nextEffect=null):t.firstEffect=t.lastEffect=null):r=zu(s,o),null!==e?i=zu(e,i):(i=Uu(i,a,n,null)).flags|=2,i.return=t,r.return=t,r.sibling=i,t.child=r,i}function $s(e,t){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),ta(e.return,t)}function Js(e,t,r,i,n,a){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:r,tailMode:n,lastEffect:a}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=r,s.tailMode=n,s.lastEffect=a)}function eo(e,t,r){var i=t.pendingProps,n=i.revealOrder,a=i.tail;if(Ds(e,t,i.children,r),0!==(2&(i=Da.current)))i=1&i|2,t.flags|=64;else{if(null!==e&&0!==(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&$s(e,r);else if(19===e.tag)$s(e,r);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(un(Da,i),0===(2&t.mode))t.memoizedState=null;else switch(n){case"forwards":for(r=t.child,n=null;null!==r;)null!==(e=r.alternate)&&null===La(e)&&(n=r),r=r.sibling;null===(r=n)?(n=t.child,t.child=null):(n=r.sibling,r.sibling=null),Js(t,!1,n,r,a,t.lastEffect);break;case"backwards":for(r=null,n=t.child,t.child=null;null!==n;){if(null!==(e=n.alternate)&&null===La(e)){t.child=n;break}e=n.sibling,n.sibling=r,r=n,n=e}Js(t,!0,r,null,a,t.lastEffect);break;case"together":Js(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function to(e,t,r){if(null!==e&&(t.dependencies=e.dependencies),Vo|=t.lanes,0!==(r&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(r=zu(e=t.child,e.pendingProps),t.child=r,r.return=t;null!==e.sibling;)e=e.sibling,(r=r.sibling=zu(e,e.pendingProps)).return=t;r.sibling=null}return t.child}return null}function ro(e,t){if(!Va)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;null!==t;)null!==t.alternate&&(r=t),t=t.sibling;null===r?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var i=null;null!==r;)null!==r.alternate&&(i=r),r=r.sibling;null===i?t||null===e.tail?e.tail=null:e.tail.sibling=null:i.sibling=null}}function io(e,t,r){var i=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return pn(t.type)&&vn(),null;case 3:return Ea(),on(hn),on(dn),Wa(),(i=t.stateNode).pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),null!==e&&null!==e.child||(za(t)?t.flags|=4:i.hydrate||(t.flags|=256)),null;case 5:Pa(t);var a=Ma(Ia.current);if(r=t.type,null!==e&&null!=t.stateNode)Us(e,t,r,i),e.ref!==t.ref&&(t.flags|=128);else{if(!i){if(null===t.stateNode)throw Error(s(166));return null}if(e=Ma(Ta.current),za(t)){i=t.stateNode,r=t.type;var o=t.memoizedProps;switch(i[Xi]=t,i[Yi]=o,r){case"dialog":Ti("cancel",i),Ti("close",i);break;case"iframe":case"object":case"embed":Ti("load",i);break;case"video":case"audio":for(e=0;e<wi.length;e++)Ti(wi[e],i);break;case"source":Ti("error",i);break;case"img":case"image":case"link":Ti("error",i),Ti("load",i);break;case"details":Ti("toggle",i);break;case"input":ee(i,o),Ti("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},Ti("invalid",i);break;case"textarea":ue(i,o),Ti("invalid",i)}for(var c in Se(r,o),e=null,o)o.hasOwnProperty(c)&&(a=o[c],"children"===c?"string"===typeof a?i.textContent!==a&&(e=["children",a]):"number"===typeof a&&i.textContent!==""+a&&(e=["children",""+a]):u.hasOwnProperty(c)&&null!=a&&"onScroll"===c&&Ti("scroll",i));switch(r){case"input":Z(i),ie(i,o,!0);break;case"textarea":Z(i),de(i);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(i.onclick=Bi)}i=e,t.updateQueue=i,null!==i&&(t.flags|=4)}else{switch(c=9===a.nodeType?a:a.ownerDocument,e===he&&(e=fe(r)),e===he?"script"===r?((e=c.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof i.is?e=c.createElement(r,{is:i.is}):(e=c.createElement(r),"select"===r&&(c=e,i.multiple?c.multiple=!0:i.size&&(c.size=i.size))):e=c.createElementNS(e,r),e[Xi]=t,e[Yi]=i,Hs(e,t),t.stateNode=e,c=Oe(r,i),r){case"dialog":Ti("cancel",e),Ti("close",e),a=i;break;case"iframe":case"object":case"embed":Ti("load",e),a=i;break;case"video":case"audio":for(a=0;a<wi.length;a++)Ti(wi[a],e);a=i;break;case"source":Ti("error",e),a=i;break;case"img":case"image":case"link":Ti("error",e),Ti("load",e),a=i;break;case"details":Ti("toggle",e),a=i;break;case"input":ee(e,i),a=J(e,i),Ti("invalid",e);break;case"option":a=ae(e,i);break;case"select":e._wrapperState={wasMultiple:!!i.multiple},a=n({},i,{value:void 0}),Ti("invalid",e);break;case"textarea":ue(e,i),a=oe(e,i),Ti("invalid",e);break;default:a=i}Se(r,a);var d=a;for(o in d)if(d.hasOwnProperty(o)){var h=d[o];"style"===o?we(e,h):"dangerouslySetInnerHTML"===o?null!=(h=h?h.__html:void 0)&&ge(e,h):"children"===o?"string"===typeof h?("textarea"!==r||""!==h)&&ye(e,h):"number"===typeof h&&ye(e,""+h):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(u.hasOwnProperty(o)?null!=h&&"onScroll"===o&&Ti("scroll",e):null!=h&&x(e,o,h,c))}switch(r){case"input":Z(e),ie(e,i,!1);break;case"textarea":Z(e),de(e);break;case"option":null!=i.value&&e.setAttribute("value",""+X(i.value));break;case"select":e.multiple=!!i.multiple,null!=(o=i.value)?se(e,!!i.multiple,o,!1):null!=i.defaultValue&&se(e,!!i.multiple,i.defaultValue,!0);break;default:"function"===typeof a.onClick&&(e.onclick=Bi)}Gi(r,i)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)Ws(0,t,e.memoizedProps,i);else{if("string"!==typeof i&&null===t.stateNode)throw Error(s(166));r=Ma(Ia.current),Ma(Ta.current),za(t)?(i=t.stateNode,r=t.memoizedProps,i[Xi]=t,i.nodeValue!==r&&(t.flags|=4)):((i=(9===r.nodeType?r:r.ownerDocument).createTextNode(i))[Xi]=t,t.stateNode=i)}return null;case 13:return on(Da),i=t.memoizedState,0!==(64&t.flags)?(t.lanes=r,t):(i=null!==i,r=!1,null===e?void 0!==t.memoizedProps.fallback&&za(t):r=null!==e.memoizedState,i&&!r&&0!==(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!==(1&Da.current)?0===Lo&&(Lo=3):(0!==Lo&&3!==Lo||(Lo=4),null===Ao||0===(134217727&Vo)&&0===(134217727&Go)||vu(Ao,No))),(i||r)&&(t.flags|=4),null);case 4:return Ea(),null===e&&Ii(t.stateNode.containerInfo),null;case 10:return ea(t),null;case 17:return pn(t.type)&&vn(),null;case 19:if(on(Da),null===(i=t.memoizedState))return null;if(o=0!==(64&t.flags),null===(c=i.rendering))if(o)ro(i,!1);else{if(0!==Lo||null!==e&&0!==(64&e.flags))for(e=t.child;null!==e;){if(null!==(c=La(e))){for(t.flags|=64,ro(i,!1),null!==(o=c.updateQueue)&&(t.updateQueue=o,t.flags|=4),null===i.lastEffect&&(t.firstEffect=null),t.lastEffect=i.lastEffect,i=r,r=t.child;null!==r;)e=i,(o=r).flags&=2,o.nextEffect=null,o.firstEffect=null,o.lastEffect=null,null===(c=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=c.childLanes,o.lanes=c.lanes,o.child=c.child,o.memoizedProps=c.memoizedProps,o.memoizedState=c.memoizedState,o.updateQueue=c.updateQueue,o.type=c.type,e=c.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return un(Da,1&Da.current|2),t.child}e=e.sibling}null!==i.tail&&Fn()>zo&&(t.flags|=64,o=!0,ro(i,!1),t.lanes=33554432)}else{if(!o)if(null!==(e=La(c))){if(t.flags|=64,o=!0,null!==(r=e.updateQueue)&&(t.updateQueue=r,t.flags|=4),ro(i,!0),null===i.tail&&"hidden"===i.tailMode&&!c.alternate&&!Va)return null!==(t=t.lastEffect=i.lastEffect)&&(t.nextEffect=null),null}else 2*Fn()-i.renderingStartTime>zo&&1073741824!==r&&(t.flags|=64,o=!0,ro(i,!1),t.lanes=33554432);i.isBackwards?(c.sibling=t.child,t.child=c):(null!==(r=i.last)?r.sibling=c:t.child=c,i.last=c)}return null!==i.tail?(r=i.tail,i.rendering=r,i.tail=r.sibling,i.lastEffect=t.lastEffect,i.renderingStartTime=Fn(),r.sibling=null,t=Da.current,un(Da,o?1&t|2:1&t),r):null;case 23:case 24:return xu(),null!==e&&null!==e.memoizedState!==(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==i.mode&&(t.flags|=4),null}throw Error(s(156,t.tag))}function no(e){switch(e.tag){case 1:pn(e.type)&&vn();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(Ea(),on(hn),on(dn),Wa(),0!==(64&(t=e.flags)))throw Error(s(285));return e.flags=-4097&t|64,e;case 5:return Pa(e),null;case 13:return on(Da),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return on(Da),null;case 4:return Ea(),null;case 10:return ea(e),null;case 23:case 24:return xu(),null;default:return null}}function ao(e,t){try{var r="",i=t;do{r+=W(i),i=i.return}while(i);var n=r}catch(a){n="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:n}}function so(e,t){try{console.error(t.value)}catch(r){setTimeout((function(){throw r}))}}Hs=function(e,t){for(var r=t.child;null!==r;){if(5===r.tag||6===r.tag)e.appendChild(r.stateNode);else if(4!==r.tag&&null!==r.child){r.child.return=r,r=r.child;continue}if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}},Us=function(e,t,r,i){var a=e.memoizedProps;if(a!==i){e=t.stateNode,Ma(Ta.current);var s,o=null;switch(r){case"input":a=J(e,a),i=J(e,i),o=[];break;case"option":a=ae(e,a),i=ae(e,i),o=[];break;case"select":a=n({},a,{value:void 0}),i=n({},i,{value:void 0}),o=[];break;case"textarea":a=oe(e,a),i=oe(e,i),o=[];break;default:"function"!==typeof a.onClick&&"function"===typeof i.onClick&&(e.onclick=Bi)}for(h in Se(r,i),r=null,a)if(!i.hasOwnProperty(h)&&a.hasOwnProperty(h)&&null!=a[h])if("style"===h){var c=a[h];for(s in c)c.hasOwnProperty(s)&&(r||(r={}),r[s]="")}else"dangerouslySetInnerHTML"!==h&&"children"!==h&&"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&"autoFocus"!==h&&(u.hasOwnProperty(h)?o||(o=[]):(o=o||[]).push(h,null));for(h in i){var d=i[h];if(c=null!=a?a[h]:void 0,i.hasOwnProperty(h)&&d!==c&&(null!=d||null!=c))if("style"===h)if(c){for(s in c)!c.hasOwnProperty(s)||d&&d.hasOwnProperty(s)||(r||(r={}),r[s]="");for(s in d)d.hasOwnProperty(s)&&c[s]!==d[s]&&(r||(r={}),r[s]=d[s])}else r||(o||(o=[]),o.push(h,r)),r=d;else"dangerouslySetInnerHTML"===h?(d=d?d.__html:void 0,c=c?c.__html:void 0,null!=d&&c!==d&&(o=o||[]).push(h,d)):"children"===h?"string"!==typeof d&&"number"!==typeof d||(o=o||[]).push(h,""+d):"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&(u.hasOwnProperty(h)?(null!=d&&"onScroll"===h&&Ti("scroll",e),o||c===d||(o=[])):"object"===typeof d&&null!==d&&d.$$typeof===L?d.toString():(o=o||[]).push(h,d))}r&&(o=o||[]).push("style",r);var h=o;(t.updateQueue=h)&&(t.flags|=4)}},Ws=function(e,t,r,i){r!==i&&(t.flags|=4)};var oo="function"===typeof WeakMap?WeakMap:Map;function uo(e,t,r){(r=oa(-1,r)).tag=3,r.payload={element:null};var i=t.value;return r.callback=function(){Ko||(Ko=!0,Xo=i),so(0,t)},r}function co(e,t,r){(r=oa(-1,r)).tag=3;var i=e.type.getDerivedStateFromError;if("function"===typeof i){var n=t.value;r.payload=function(){return so(0,t),i(n)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(r.callback=function(){"function"!==typeof i&&(null===Yo?Yo=new Set([this]):Yo.add(this),so(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),r}var ho="function"===typeof WeakSet?WeakSet:Set;function lo(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(r){Ru(e,r)}else t.current=null}function fo(e,t){switch(t.tag){case 0:case 11:case 15:case 22:return;case 1:if(256&t.flags&&null!==e){var r=e.memoizedProps,i=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?r:Xn(t.type,r),i),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(256&t.flags&&zi(t.stateNode.containerInfo));case 5:case 6:case 4:case 17:return}throw Error(s(163))}function po(e,t,r){switch(r.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=r.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(3===(3&e.tag)){var i=e.create;e.destroy=i()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=r.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var n=e;i=n.next,0!==(4&(n=n.tag))&&0!==(1&n)&&(Du(r,e),Pu(r,e)),e=i}while(e!==t)}return;case 1:return e=r.stateNode,4&r.flags&&(null===t?e.componentDidMount():(i=r.elementType===r.type?t.memoizedProps:Xn(r.type,t.memoizedProps),e.componentDidUpdate(i,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=r.updateQueue)&&ha(r,t,e));case 3:if(null!==(t=r.updateQueue)){if(e=null,null!==r.child)switch(r.child.tag){case 5:e=r.child.stateNode;break;case 1:e=r.child.stateNode}ha(r,t,e)}return;case 5:return e=r.stateNode,void(null===t&&4&r.flags&&Gi(r.type,r.memoizedProps)&&e.focus());case 6:case 4:case 12:return;case 13:return void(null===r.memoizedState&&(r=r.alternate,null!==r&&(r=r.memoizedState,null!==r&&(r=r.dehydrated,null!==r&&wt(r)))));case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(s(163))}function vo(e,t){for(var r=e;;){if(5===r.tag){var i=r.stateNode;if(t)"function"===typeof(i=i.style).setProperty?i.setProperty("display","none","important"):i.display="none";else{i=r.stateNode;var n=r.memoizedProps.style;n=void 0!==n&&null!==n&&n.hasOwnProperty("display")?n.display:null,i.style.display=ke("display",n)}}else if(6===r.tag)r.stateNode.nodeValue=t?"":r.memoizedProps;else if((23!==r.tag&&24!==r.tag||null===r.memoizedState||r===e)&&null!==r.child){r.child.return=r,r=r.child;continue}if(r===e)break;for(;null===r.sibling;){if(null===r.return||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}}function mo(e,t){if(kn&&"function"===typeof kn.onCommitFiberUnmount)try{kn.onCommitFiberUnmount(xn,t)}catch(a){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var r=e=e.next;do{var i=r,n=i.destroy;if(i=i.tag,void 0!==n)if(0!==(4&i))Du(t,r);else{i=t;try{n()}catch(a){Ru(i,a)}}r=r.next}while(r!==e)}break;case 1:if(lo(t),"function"===typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(a){Ru(t,a)}break;case 5:lo(t);break;case 4:wo(e,t)}}function go(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function yo(e){return 5===e.tag||3===e.tag||4===e.tag}function bo(e){e:{for(var t=e.return;null!==t;){if(yo(t))break e;t=t.return}throw Error(s(160))}var r=t;switch(t=r.stateNode,r.tag){case 5:var i=!1;break;case 3:case 4:t=t.containerInfo,i=!0;break;default:throw Error(s(161))}16&r.flags&&(ye(t,""),r.flags&=-17);e:t:for(r=e;;){for(;null===r.sibling;){if(null===r.return||yo(r.return)){r=null;break e}r=r.return}for(r.sibling.return=r.return,r=r.sibling;5!==r.tag&&6!==r.tag&&18!==r.tag;){if(2&r.flags)continue t;if(null===r.child||4===r.tag)continue t;r.child.return=r,r=r.child}if(!(2&r.flags)){r=r.stateNode;break e}}i?xo(e,r,t):ko(e,r,t)}function xo(e,t,r){var i=e.tag,n=5===i||6===i;if(n)e=n?e.stateNode:e.stateNode.instance,t?8===r.nodeType?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(8===r.nodeType?(t=r.parentNode).insertBefore(e,r):(t=r).appendChild(e),null!==(r=r._reactRootContainer)&&void 0!==r||null!==t.onclick||(t.onclick=Bi));else if(4!==i&&null!==(e=e.child))for(xo(e,t,r),e=e.sibling;null!==e;)xo(e,t,r),e=e.sibling}function ko(e,t,r){var i=e.tag,n=5===i||6===i;if(n)e=n?e.stateNode:e.stateNode.instance,t?r.insertBefore(e,t):r.appendChild(e);else if(4!==i&&null!==(e=e.child))for(ko(e,t,r),e=e.sibling;null!==e;)ko(e,t,r),e=e.sibling}function wo(e,t){for(var r,i,n=t,a=!1;;){if(!a){a=n.return;e:for(;;){if(null===a)throw Error(s(160));switch(r=a.stateNode,a.tag){case 5:i=!1;break e;case 3:case 4:r=r.containerInfo,i=!0;break e}a=a.return}a=!0}if(5===n.tag||6===n.tag){e:for(var o=e,u=n,c=u;;)if(mo(o,c),null!==c.child&&4!==c.tag)c.child.return=c,c=c.child;else{if(c===u)break e;for(;null===c.sibling;){if(null===c.return||c.return===u)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}i?(o=r,u=n.stateNode,8===o.nodeType?o.parentNode.removeChild(u):o.removeChild(u)):r.removeChild(n.stateNode)}else if(4===n.tag){if(null!==n.child){r=n.stateNode.containerInfo,i=!0,n.child.return=n,n=n.child;continue}}else if(mo(e,n),null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;4===(n=n.return).tag&&(a=!1)}n.sibling.return=n.return,n=n.sibling}}function _o(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{3===(3&i.tag)&&(e=i.destroy,i.destroy=void 0,void 0!==e&&e()),i=i.next}while(i!==r)}return;case 1:return;case 5:if(null!=(r=t.stateNode)){i=t.memoizedProps;var n=null!==e?e.memoizedProps:i;e=t.type;var a=t.updateQueue;if(t.updateQueue=null,null!==a){for(r[Yi]=i,"input"===e&&"radio"===i.type&&null!=i.name&&te(r,i),Oe(e,n),t=Oe(e,i),n=0;n<a.length;n+=2){var o=a[n],u=a[n+1];"style"===o?we(r,u):"dangerouslySetInnerHTML"===o?ge(r,u):"children"===o?ye(r,u):x(r,o,u,t)}switch(e){case"input":re(r,i);break;case"textarea":ce(r,i);break;case"select":e=r._wrapperState.wasMultiple,r._wrapperState.wasMultiple=!!i.multiple,null!=(a=i.value)?se(r,!!i.multiple,a,!1):e!==!!i.multiple&&(null!=i.defaultValue?se(r,!!i.multiple,i.defaultValue,!0):se(r,!!i.multiple,i.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(s(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((r=t.stateNode).hydrate&&(r.hydrate=!1,wt(r.containerInfo)));case 12:return;case 13:return null!==t.memoizedState&&(jo=Fn(),vo(t.child,!0)),void So(t);case 19:return void So(t);case 17:return;case 23:case 24:return void vo(t,null!==t.memoizedState)}throw Error(s(163))}function So(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var r=e.stateNode;null===r&&(r=e.stateNode=new ho),t.forEach((function(t){var i=Gu.bind(null,e,t);r.has(t)||(r.add(t),t.then(i,i))}))}}function Oo(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&(null!==(t=t.memoizedState)&&null===t.dehydrated)}var To=Math.ceil,Co=k.ReactCurrentDispatcher,Io=k.ReactCurrentOwner,Mo=0,Ao=null,Eo=null,No=0,Po=0,Do=sn(0),Lo=0,Bo=null,Ro=0,Vo=0,Go=0,Fo=0,qo=null,jo=0,zo=1/0;function Ho(){zo=Fn()+500}var Uo,Wo=null,Ko=!1,Xo=null,Yo=null,Zo=!1,Qo=null,$o=90,Jo=[],eu=[],tu=null,ru=0,iu=null,nu=-1,au=0,su=0,ou=null,uu=!1;function cu(){return 0!==(48&Mo)?Fn():-1!==nu?nu:nu=Fn()}function du(e){if(0===(2&(e=e.mode)))return 1;if(0===(4&e))return 99===qn()?1:2;if(0===au&&(au=Ro),0!==Kn.transition){0!==su&&(su=null!==qo?qo.pendingLanes:0),e=au;var t=4186112&~su;return 0===(t&=-t)&&(0===(t=(e=4186112&~e)&-e)&&(t=8192)),t}return e=qn(),0!==(4&Mo)&&98===e?e=Ft(12,au):e=Ft(e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),au),e}function hu(e,t,r){if(50<ru)throw ru=0,iu=null,Error(s(185));if(null===(e=lu(e,t)))return null;zt(e,t,r),e===Ao&&(Go|=t,4===Lo&&vu(e,No));var i=qn();1===t?0!==(8&Mo)&&0===(48&Mo)?mu(e):(fu(e,r),0===Mo&&(Ho(),Un())):(0===(4&Mo)||98!==i&&99!==i||(null===tu?tu=new Set([e]):tu.add(e)),fu(e,r)),qo=e}function lu(e,t){e.lanes|=t;var r=e.alternate;for(null!==r&&(r.lanes|=t),r=e,e=e.return;null!==e;)e.childLanes|=t,null!==(r=e.alternate)&&(r.childLanes|=t),r=e,e=e.return;return 3===r.tag?r.stateNode:null}function fu(e,t){for(var r=e.callbackNode,i=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,o=e.pendingLanes;0<o;){var u=31-Ht(o),c=1<<u,d=a[u];if(-1===d){if(0===(c&i)||0!==(c&n)){d=t,Rt(c);var h=Bt;a[u]=10<=h?d+250:6<=h?d+5e3:-1}}else d<=t&&(e.expiredLanes|=c);o&=~c}if(i=Vt(e,e===Ao?No:0),t=Bt,0===i)null!==r&&(r!==Dn&&Sn(r),e.callbackNode=null,e.callbackPriority=0);else{if(null!==r){if(e.callbackPriority===t)return;r!==Dn&&Sn(r)}15===t?(r=mu.bind(null,e),null===Bn?(Bn=[r],Rn=_n(Mn,Wn)):Bn.push(r),r=Dn):14===t?r=Hn(99,mu.bind(null,e)):r=Hn(r=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(s(358,e))}}(t),pu.bind(null,e)),e.callbackPriority=t,e.callbackNode=r}}function pu(e){if(nu=-1,su=au=0,0!==(48&Mo))throw Error(s(327));var t=e.callbackNode;if(Nu()&&e.callbackNode!==t)return null;var r=Vt(e,e===Ao?No:0);if(0===r)return null;var i=r,n=Mo;Mo|=16;var a=_u();for(Ao===e&&No===i||(Ho(),ku(e,i));;)try{Tu();break}catch(u){wu(e,u)}if(Jn(),Co.current=a,Mo=n,null!==Eo?i=0:(Ao=null,No=0,i=Lo),0!==(Ro&Go))ku(e,0);else if(0!==i){if(2===i&&(Mo|=64,e.hydrate&&(e.hydrate=!1,zi(e.containerInfo)),0!==(r=Gt(e))&&(i=Su(e,r))),1===i)throw t=Bo,ku(e,0),vu(e,r),fu(e,Fn()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=r,i){case 0:case 1:throw Error(s(345));case 2:Mu(e);break;case 3:if(vu(e,r),(62914560&r)===r&&10<(i=jo+500-Fn())){if(0!==Vt(e,0))break;if(((n=e.suspendedLanes)&r)!==r){cu(),e.pingedLanes|=e.suspendedLanes&n;break}e.timeoutHandle=qi(Mu.bind(null,e),i);break}Mu(e);break;case 4:if(vu(e,r),(4186112&r)===r)break;for(i=e.eventTimes,n=-1;0<r;){var o=31-Ht(r);a=1<<o,(o=i[o])>n&&(n=o),r&=~a}if(r=n,10<(r=(120>(r=Fn()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*To(r/1960))-r)){e.timeoutHandle=qi(Mu.bind(null,e),r);break}Mu(e);break;case 5:Mu(e);break;default:throw Error(s(329))}}return fu(e,Fn()),e.callbackNode===t?pu.bind(null,e):null}function vu(e,t){for(t&=~Fo,t&=~Go,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Ht(t),i=1<<r;e[r]=-1,t&=~i}}function mu(e){if(0!==(48&Mo))throw Error(s(327));if(Nu(),e===Ao&&0!==(e.expiredLanes&No)){var t=No,r=Su(e,t);0!==(Ro&Go)&&(r=Su(e,t=Vt(e,t)))}else r=Su(e,t=Vt(e,0));if(0!==e.tag&&2===r&&(Mo|=64,e.hydrate&&(e.hydrate=!1,zi(e.containerInfo)),0!==(t=Gt(e))&&(r=Su(e,t))),1===r)throw r=Bo,ku(e,0),vu(e,t),fu(e,Fn()),r;return e.finishedWork=e.current.alternate,e.finishedLanes=t,Mu(e),fu(e,Fn()),null}function gu(e,t){var r=Mo;Mo|=1;try{return e(t)}finally{0===(Mo=r)&&(Ho(),Un())}}function yu(e,t){var r=Mo;Mo&=-2,Mo|=8;try{return e(t)}finally{0===(Mo=r)&&(Ho(),Un())}}function bu(e,t){un(Do,Po),Po|=t,Ro|=t}function xu(){Po=Do.current,on(Do)}function ku(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(-1!==r&&(e.timeoutHandle=-1,ji(r)),null!==Eo)for(r=Eo.return;null!==r;){var i=r;switch(i.tag){case 1:null!==(i=i.type.childContextTypes)&&void 0!==i&&vn();break;case 3:Ea(),on(hn),on(dn),Wa();break;case 5:Pa(i);break;case 4:Ea();break;case 13:case 19:on(Da);break;case 10:ea(i);break;case 23:case 24:xu()}r=r.return}Ao=e,Eo=zu(e.current,null),No=Po=Ro=t,Lo=0,Bo=null,Fo=Go=Vo=0}function wu(e,t){for(;;){var r=Eo;try{if(Jn(),Ka.current=Is,Ja){for(var i=Za.memoizedState;null!==i;){var n=i.queue;null!==n&&(n.pending=null),i=i.next}Ja=!1}if(Ya=0,$a=Qa=Za=null,es=!1,Io.current=null,null===r||null===r.return){Lo=1,Bo=t,Eo=null;break}e:{var a=e,s=r.return,o=r,u=t;if(t=No,o.flags|=2048,o.firstEffect=o.lastEffect=null,null!==u&&"object"===typeof u&&"function"===typeof u.then){var c=u;if(0===(2&o.mode)){var d=o.alternate;d?(o.updateQueue=d.updateQueue,o.memoizedState=d.memoizedState,o.lanes=d.lanes):(o.updateQueue=null,o.memoizedState=null)}var h=0!==(1&Da.current),l=s;do{var f;if(f=13===l.tag){var p=l.memoizedState;if(null!==p)f=null!==p.dehydrated;else{var v=l.memoizedProps;f=void 0!==v.fallback&&(!0!==v.unstable_avoidThisFallback||!h)}}if(f){var m=l.updateQueue;if(null===m){var g=new Set;g.add(c),l.updateQueue=g}else m.add(c);if(0===(2&l.mode)){if(l.flags|=64,o.flags|=16384,o.flags&=-2981,1===o.tag)if(null===o.alternate)o.tag=17;else{var y=oa(-1,1);y.tag=2,ua(o,y)}o.lanes|=1;break e}u=void 0,o=t;var b=a.pingCache;if(null===b?(b=a.pingCache=new oo,u=new Set,b.set(c,u)):void 0===(u=b.get(c))&&(u=new Set,b.set(c,u)),!u.has(o)){u.add(o);var x=Vu.bind(null,a,c,o);c.then(x,x)}l.flags|=4096,l.lanes=t;break e}l=l.return}while(null!==l);u=Error((K(o.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==Lo&&(Lo=2),u=ao(u,o),l=s;do{switch(l.tag){case 3:a=u,l.flags|=4096,t&=-t,l.lanes|=t,ca(l,uo(0,a,t));break e;case 1:a=u;var k=l.type,w=l.stateNode;if(0===(64&l.flags)&&("function"===typeof k.getDerivedStateFromError||null!==w&&"function"===typeof w.componentDidCatch&&(null===Yo||!Yo.has(w)))){l.flags|=4096,t&=-t,l.lanes|=t,ca(l,co(l,a,t));break e}}l=l.return}while(null!==l)}Iu(r)}catch(_){t=_,Eo===r&&null!==r&&(Eo=r=r.return);continue}break}}function _u(){var e=Co.current;return Co.current=Is,null===e?Is:e}function Su(e,t){var r=Mo;Mo|=16;var i=_u();for(Ao===e&&No===t||ku(e,t);;)try{Ou();break}catch(n){wu(e,n)}if(Jn(),Mo=r,Co.current=i,null!==Eo)throw Error(s(261));return Ao=null,No=0,Lo}function Ou(){for(;null!==Eo;)Cu(Eo)}function Tu(){for(;null!==Eo&&!On();)Cu(Eo)}function Cu(e){var t=Uo(e.alternate,e,Po);e.memoizedProps=e.pendingProps,null===t?Iu(e):Eo=t,Io.current=null}function Iu(e){var t=e;do{var r=t.alternate;if(e=t.return,0===(2048&t.flags)){if(null!==(r=io(r,t,Po)))return void(Eo=r);if(24!==(r=t).tag&&23!==r.tag||null===r.memoizedState||0!==(1073741824&Po)||0===(4&r.mode)){for(var i=0,n=r.child;null!==n;)i|=n.lanes|n.childLanes,n=n.sibling;r.childLanes=i}null!==e&&0===(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(r=no(t)))return r.flags&=2047,void(Eo=r);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(Eo=t);Eo=t=e}while(null!==t);0===Lo&&(Lo=5)}function Mu(e){var t=qn();return zn(99,Au.bind(null,e,t)),null}function Au(e,t){do{Nu()}while(null!==Qo);if(0!==(48&Mo))throw Error(s(327));var r=e.finishedWork;if(null===r)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(s(177));e.callbackNode=null;var i=r.lanes|r.childLanes,n=i,a=e.pendingLanes&~n;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=n,e.mutableReadLanes&=n,e.entangledLanes&=n,n=e.entanglements;for(var o=e.eventTimes,u=e.expirationTimes;0<a;){var c=31-Ht(a),d=1<<c;n[c]=0,o[c]=-1,u[c]=-1,a&=~d}if(null!==tu&&0===(24&i)&&tu.has(e)&&tu.delete(e),e===Ao&&(Eo=Ao=null,No=0),1<r.flags?null!==r.lastEffect?(r.lastEffect.nextEffect=r,i=r.firstEffect):i=r:i=r.firstEffect,null!==i){if(n=Mo,Mo|=32,Io.current=null,Ri=Yt,fi(o=li())){if("selectionStart"in o)u={start:o.selectionStart,end:o.selectionEnd};else e:if(u=(u=o.ownerDocument)&&u.defaultView||window,(d=u.getSelection&&u.getSelection())&&0!==d.rangeCount){u=d.anchorNode,a=d.anchorOffset,c=d.focusNode,d=d.focusOffset;try{u.nodeType,c.nodeType}catch(T){u=null;break e}var h=0,l=-1,f=-1,p=0,v=0,m=o,g=null;t:for(;;){for(var y;m!==u||0!==a&&3!==m.nodeType||(l=h+a),m!==c||0!==d&&3!==m.nodeType||(f=h+d),3===m.nodeType&&(h+=m.nodeValue.length),null!==(y=m.firstChild);)g=m,m=y;for(;;){if(m===o)break t;if(g===u&&++p===a&&(l=h),g===c&&++v===d&&(f=h),null!==(y=m.nextSibling))break;g=(m=g).parentNode}m=y}u=-1===l||-1===f?null:{start:l,end:f}}else u=null;u=u||{start:0,end:0}}else u=null;Vi={focusedElem:o,selectionRange:u},Yt=!1,ou=null,uu=!1,Wo=i;do{try{Eu()}catch(T){if(null===Wo)throw Error(s(330));Ru(Wo,T),Wo=Wo.nextEffect}}while(null!==Wo);ou=null,Wo=i;do{try{for(o=e;null!==Wo;){var b=Wo.flags;if(16&b&&ye(Wo.stateNode,""),128&b){var x=Wo.alternate;if(null!==x){var k=x.ref;null!==k&&("function"===typeof k?k(null):k.current=null)}}switch(1038&b){case 2:bo(Wo),Wo.flags&=-3;break;case 6:bo(Wo),Wo.flags&=-3,_o(Wo.alternate,Wo);break;case 1024:Wo.flags&=-1025;break;case 1028:Wo.flags&=-1025,_o(Wo.alternate,Wo);break;case 4:_o(Wo.alternate,Wo);break;case 8:wo(o,u=Wo);var w=u.alternate;go(u),null!==w&&go(w)}Wo=Wo.nextEffect}}catch(T){if(null===Wo)throw Error(s(330));Ru(Wo,T),Wo=Wo.nextEffect}}while(null!==Wo);if(k=Vi,x=li(),b=k.focusedElem,o=k.selectionRange,x!==b&&b&&b.ownerDocument&&hi(b.ownerDocument.documentElement,b)){null!==o&&fi(b)&&(x=o.start,void 0===(k=o.end)&&(k=x),"selectionStart"in b?(b.selectionStart=x,b.selectionEnd=Math.min(k,b.value.length)):(k=(x=b.ownerDocument||document)&&x.defaultView||window).getSelection&&(k=k.getSelection(),u=b.textContent.length,w=Math.min(o.start,u),o=void 0===o.end?w:Math.min(o.end,u),!k.extend&&w>o&&(u=o,o=w,w=u),u=di(b,w),a=di(b,o),u&&a&&(1!==k.rangeCount||k.anchorNode!==u.node||k.anchorOffset!==u.offset||k.focusNode!==a.node||k.focusOffset!==a.offset)&&((x=x.createRange()).setStart(u.node,u.offset),k.removeAllRanges(),w>o?(k.addRange(x),k.extend(a.node,a.offset)):(x.setEnd(a.node,a.offset),k.addRange(x))))),x=[];for(k=b;k=k.parentNode;)1===k.nodeType&&x.push({element:k,left:k.scrollLeft,top:k.scrollTop});for("function"===typeof b.focus&&b.focus(),b=0;b<x.length;b++)(k=x[b]).element.scrollLeft=k.left,k.element.scrollTop=k.top}Yt=!!Ri,Vi=Ri=null,e.current=r,Wo=i;do{try{for(b=e;null!==Wo;){var _=Wo.flags;if(36&_&&po(b,Wo.alternate,Wo),128&_){x=void 0;var S=Wo.ref;if(null!==S){var O=Wo.stateNode;switch(Wo.tag){case 5:x=O;break;default:x=O}"function"===typeof S?S(x):S.current=x}}Wo=Wo.nextEffect}}catch(T){if(null===Wo)throw Error(s(330));Ru(Wo,T),Wo=Wo.nextEffect}}while(null!==Wo);Wo=null,Ln(),Mo=n}else e.current=r;if(Zo)Zo=!1,Qo=e,$o=t;else for(Wo=i;null!==Wo;)t=Wo.nextEffect,Wo.nextEffect=null,8&Wo.flags&&((_=Wo).sibling=null,_.stateNode=null),Wo=t;if(0===(i=e.pendingLanes)&&(Yo=null),1===i?e===iu?ru++:(ru=0,iu=e):ru=0,r=r.stateNode,kn&&"function"===typeof kn.onCommitFiberRoot)try{kn.onCommitFiberRoot(xn,r,void 0,64===(64&r.current.flags))}catch(T){}if(fu(e,Fn()),Ko)throw Ko=!1,e=Xo,Xo=null,e;return 0!==(8&Mo)||Un(),null}function Eu(){for(;null!==Wo;){var e=Wo.alternate;uu||null===ou||(0!==(8&Wo.flags)?et(Wo,ou)&&(uu=!0):13===Wo.tag&&Oo(e,Wo)&&et(Wo,ou)&&(uu=!0));var t=Wo.flags;0!==(256&t)&&fo(e,Wo),0===(512&t)||Zo||(Zo=!0,Hn(97,(function(){return Nu(),null}))),Wo=Wo.nextEffect}}function Nu(){if(90!==$o){var e=97<$o?97:$o;return $o=90,zn(e,Lu)}return!1}function Pu(e,t){Jo.push(t,e),Zo||(Zo=!0,Hn(97,(function(){return Nu(),null})))}function Du(e,t){eu.push(t,e),Zo||(Zo=!0,Hn(97,(function(){return Nu(),null})))}function Lu(){if(null===Qo)return!1;var e=Qo;if(Qo=null,0!==(48&Mo))throw Error(s(331));var t=Mo;Mo|=32;var r=eu;eu=[];for(var i=0;i<r.length;i+=2){var n=r[i],a=r[i+1],o=n.destroy;if(n.destroy=void 0,"function"===typeof o)try{o()}catch(c){if(null===a)throw Error(s(330));Ru(a,c)}}for(r=Jo,Jo=[],i=0;i<r.length;i+=2){n=r[i],a=r[i+1];try{var u=n.create;n.destroy=u()}catch(c){if(null===a)throw Error(s(330));Ru(a,c)}}for(u=e.current.firstEffect;null!==u;)e=u.nextEffect,u.nextEffect=null,8&u.flags&&(u.sibling=null,u.stateNode=null),u=e;return Mo=t,Un(),!0}function Bu(e,t,r){ua(e,t=uo(0,t=ao(r,t),1)),t=cu(),null!==(e=lu(e,1))&&(zt(e,1,t),fu(e,t))}function Ru(e,t){if(3===e.tag)Bu(e,e,t);else for(var r=e.return;null!==r;){if(3===r.tag){Bu(r,e,t);break}if(1===r.tag){var i=r.stateNode;if("function"===typeof r.type.getDerivedStateFromError||"function"===typeof i.componentDidCatch&&(null===Yo||!Yo.has(i))){var n=co(r,e=ao(t,e),1);if(ua(r,n),n=cu(),null!==(r=lu(r,1)))zt(r,1,n),fu(r,n);else if("function"===typeof i.componentDidCatch&&(null===Yo||!Yo.has(i)))try{i.componentDidCatch(t,e)}catch(a){}break}}r=r.return}}function Vu(e,t,r){var i=e.pingCache;null!==i&&i.delete(t),t=cu(),e.pingedLanes|=e.suspendedLanes&r,Ao===e&&(No&r)===r&&(4===Lo||3===Lo&&(62914560&No)===No&&500>Fn()-jo?ku(e,0):Fo|=r),fu(e,t)}function Gu(e,t){var r=e.stateNode;null!==r&&r.delete(t),0===(t=0)&&(0===(2&(t=e.mode))?t=1:0===(4&t)?t=99===qn()?1:2:(0===au&&(au=Ro),0===(t=qt(62914560&~au))&&(t=4194304))),r=cu(),null!==(e=lu(e,t))&&(zt(e,t,r),fu(e,r))}function Fu(e,t,r,i){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function qu(e,t,r,i){return new Fu(e,t,r,i)}function ju(e){return!(!(e=e.prototype)||!e.isReactComponent)}function zu(e,t){var r=e.alternate;return null===r?((r=qu(e.tag,t,e.key,e.mode)).elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.nextEffect=null,r.firstEffect=null,r.lastEffect=null),r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Hu(e,t,r,i,n,a){var o=2;if(i=e,"function"===typeof e)ju(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case S:return Uu(r.children,n,a,t);case B:o=8,n|=16;break;case O:o=8,n|=1;break;case T:return(e=qu(12,r,t,8|n)).elementType=T,e.type=T,e.lanes=a,e;case A:return(e=qu(13,r,t,n)).type=A,e.elementType=A,e.lanes=a,e;case E:return(e=qu(19,r,t,n)).elementType=E,e.lanes=a,e;case R:return Wu(r,n,a,t);case V:return(e=qu(24,r,t,n)).elementType=V,e.lanes=a,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case C:o=10;break e;case I:o=9;break e;case M:o=11;break e;case N:o=14;break e;case P:o=16,i=null;break e;case D:o=22;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=qu(o,r,t,n)).elementType=e,t.type=i,t.lanes=a,t}function Uu(e,t,r,i){return(e=qu(7,e,i,t)).lanes=r,e}function Wu(e,t,r,i){return(e=qu(23,e,i,t)).elementType=R,e.lanes=r,e}function Ku(e,t,r){return(e=qu(6,e,null,t)).lanes=r,e}function Xu(e,t,r){return(t=qu(4,null!==e.children?e.children:[],e.key,t)).lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Yu(e,t,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=r,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=jt(0),this.expirationTimes=jt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=jt(0),this.mutableSourceEagerHydrationData=null}function Zu(e,t,r){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==i?null:""+i,children:e,containerInfo:t,implementation:r}}function Qu(e,t,r,i){var n=t.current,a=cu(),o=du(n);e:if(r){t:{if(Ze(r=r._reactInternals)!==r||1!==r.tag)throw Error(s(170));var u=r;do{switch(u.tag){case 3:u=u.stateNode.context;break t;case 1:if(pn(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break t}}u=u.return}while(null!==u);throw Error(s(171))}if(1===r.tag){var c=r.type;if(pn(c)){r=gn(r,c,u);break e}}r=u}else r=cn;return null===t.context?t.context=r:t.pendingContext=r,(t=oa(a,o)).payload={element:e},null!==(i=void 0===i?null:i)&&(t.callback=i),ua(n,t),hu(n,o,a),o}function $u(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 5:default:return e.child.stateNode}}function Ju(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var r=e.retryLane;e.retryLane=0!==r&&r<t?r:t}}function ec(e,t){Ju(e,t),(e=e.alternate)&&Ju(e,t)}function tc(e,t,r){var i=null!=r&&null!=r.hydrationOptions&&r.hydrationOptions.mutableSources||null;if(r=new Yu(e,t,null!=r&&!0===r.hydrate),t=qu(3,null,null,2===t?7:1===t?3:0),r.current=t,t.stateNode=r,aa(t),e[Zi]=r.current,Ii(8===e.nodeType?e.parentNode:e),i)for(e=0;e<i.length;e++){var n=(t=i[e])._getVersion;n=n(t._source),null==r.mutableSourceEagerHydrationData?r.mutableSourceEagerHydrationData=[t,n]:r.mutableSourceEagerHydrationData.push(t,n)}this._internalRoot=r}function rc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function ic(e,t,r,i,n){var a=r._reactRootContainer;if(a){var s=a._internalRoot;if("function"===typeof n){var o=n;n=function(){var e=$u(s);o.call(e)}}Qu(t,s,e,n)}else{if(a=r._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var r;r=e.lastChild;)e.removeChild(r);return new tc(e,0,t?{hydrate:!0}:void 0)}(r,i),s=a._internalRoot,"function"===typeof n){var u=n;n=function(){var e=$u(s);u.call(e)}}yu((function(){Qu(t,s,e,n)}))}return $u(s)}function nc(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!rc(t))throw Error(s(200));return Zu(e,t,null,r)}Uo=function(e,t,r){var i=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||hn.current)Ps=!0;else{if(0===(r&i)){switch(Ps=!1,t.tag){case 3:zs(t),Ha();break;case 5:Na(t);break;case 1:pn(t.type)&&yn(t);break;case 4:Aa(t,t.stateNode.containerInfo);break;case 10:i=t.memoizedProps.value;var n=t.type._context;un(Yn,n._currentValue),n._currentValue=i;break;case 13:if(null!==t.memoizedState)return 0!==(r&t.child.childLanes)?Xs(e,t,r):(un(Da,1&Da.current),null!==(t=to(e,t,r))?t.sibling:null);un(Da,1&Da.current);break;case 19:if(i=0!==(r&t.childLanes),0!==(64&e.flags)){if(i)return eo(e,t,r);t.flags|=64}if(null!==(n=t.memoizedState)&&(n.rendering=null,n.tail=null,n.lastEffect=null),un(Da,Da.current),i)break;return null;case 23:case 24:return t.lanes=0,Vs(e,t,r)}return to(e,t,r)}Ps=0!==(16384&e.flags)}else Ps=!1;switch(t.lanes=0,t.tag){case 2:if(i=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,n=fn(t,dn.current),ra(t,r),n=is(null,t,i,e,n,r),t.flags|=1,"object"===typeof n&&null!==n&&"function"===typeof n.render&&void 0===n.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,pn(i)){var a=!0;yn(t)}else a=!1;t.memoizedState=null!==n.state&&void 0!==n.state?n.state:null,aa(t);var o=i.getDerivedStateFromProps;"function"===typeof o&&fa(t,i,o,e),n.updater=pa,t.stateNode=n,n._reactInternals=t,ya(t,i,e,r),t=js(null,t,i,!0,a,r)}else t.tag=0,Ds(null,t,n,r),t=t.child;return t;case 16:n=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,n=(a=n._init)(n._payload),t.type=n,a=t.tag=function(e){if("function"===typeof e)return ju(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===M)return 11;if(e===N)return 14}return 2}(n),e=Xn(n,e),a){case 0:t=Fs(null,t,n,e,r);break e;case 1:t=qs(null,t,n,e,r);break e;case 11:t=Ls(null,t,n,e,r);break e;case 14:t=Bs(null,t,n,Xn(n.type,e),i,r);break e}throw Error(s(306,n,""))}return t;case 0:return i=t.type,n=t.pendingProps,Fs(e,t,i,n=t.elementType===i?n:Xn(i,n),r);case 1:return i=t.type,n=t.pendingProps,qs(e,t,i,n=t.elementType===i?n:Xn(i,n),r);case 3:if(zs(t),i=t.updateQueue,null===e||null===i)throw Error(s(282));if(i=t.pendingProps,n=null!==(n=t.memoizedState)?n.element:null,sa(e,t),da(t,i,null,r),(i=t.memoizedState.element)===n)Ha(),t=to(e,t,r);else{if((a=(n=t.stateNode).hydrate)&&(Ra=Hi(t.stateNode.containerInfo.firstChild),Ba=t,a=Va=!0),a){if(null!=(e=n.mutableSourceEagerHydrationData))for(n=0;n<e.length;n+=2)(a=e[n])._workInProgressVersionPrimary=e[n+1],Ua.push(a);for(r=Sa(t,null,i,r),t.child=r;r;)r.flags=-3&r.flags|1024,r=r.sibling}else Ds(e,t,i,r),Ha();t=t.child}return t;case 5:return Na(t),null===e&&qa(t),i=t.type,n=t.pendingProps,a=null!==e?e.memoizedProps:null,o=n.children,Fi(i,n)?o=null:null!==a&&Fi(i,a)&&(t.flags|=16),Gs(e,t),Ds(e,t,o,r),t.child;case 6:return null===e&&qa(t),null;case 13:return Xs(e,t,r);case 4:return Aa(t,t.stateNode.containerInfo),i=t.pendingProps,null===e?t.child=_a(t,null,i,r):Ds(e,t,i,r),t.child;case 11:return i=t.type,n=t.pendingProps,Ls(e,t,i,n=t.elementType===i?n:Xn(i,n),r);case 7:return Ds(e,t,t.pendingProps,r),t.child;case 8:case 12:return Ds(e,t,t.pendingProps.children,r),t.child;case 10:e:{i=t.type._context,n=t.pendingProps,o=t.memoizedProps,a=n.value;var u=t.type._context;if(un(Yn,u._currentValue),u._currentValue=a,null!==o)if(u=o.value,0===(a=si(u,a)?0:0|("function"===typeof i._calculateChangedBits?i._calculateChangedBits(u,a):1073741823))){if(o.children===n.children&&!hn.current){t=to(e,t,r);break e}}else for(null!==(u=t.child)&&(u.return=t);null!==u;){var c=u.dependencies;if(null!==c){o=u.child;for(var d=c.firstContext;null!==d;){if(d.context===i&&0!==(d.observedBits&a)){1===u.tag&&((d=oa(-1,r&-r)).tag=2,ua(u,d)),u.lanes|=r,null!==(d=u.alternate)&&(d.lanes|=r),ta(u.return,r),c.lanes|=r;break}d=d.next}}else o=10===u.tag&&u.type===t.type?null:u.child;if(null!==o)o.return=u;else for(o=u;null!==o;){if(o===t){o=null;break}if(null!==(u=o.sibling)){u.return=o.return,o=u;break}o=o.return}u=o}Ds(e,t,n.children,r),t=t.child}return t;case 9:return n=t.type,i=(a=t.pendingProps).children,ra(t,r),i=i(n=ia(n,a.unstable_observedBits)),t.flags|=1,Ds(e,t,i,r),t.child;case 14:return a=Xn(n=t.type,t.pendingProps),Bs(e,t,n,a=Xn(n.type,a),i,r);case 15:return Rs(e,t,t.type,t.pendingProps,i,r);case 17:return i=t.type,n=t.pendingProps,n=t.elementType===i?n:Xn(i,n),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,pn(i)?(e=!0,yn(t)):e=!1,ra(t,r),ma(t,i,n),ya(t,i,n,r),js(null,t,i,!0,e,r);case 19:return eo(e,t,r);case 23:case 24:return Vs(e,t,r)}throw Error(s(156,t.tag))},tc.prototype.render=function(e){Qu(e,this._internalRoot,null,null)},tc.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;Qu(null,e,null,(function(){t[Zi]=null}))},tt=function(e){13===e.tag&&(hu(e,4,cu()),ec(e,4))},rt=function(e){13===e.tag&&(hu(e,67108864,cu()),ec(e,67108864))},it=function(e){if(13===e.tag){var t=cu(),r=du(e);hu(e,r,t),ec(e,r)}},nt=function(e,t){return t()},Ce=function(e,t,r){switch(t){case"input":if(re(e,r),t=r.name,"radio"===r.type&&null!=t){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var i=r[t];if(i!==e&&i.form===e.form){var n=tn(i);if(!n)throw Error(s(90));Q(i),re(i,n)}}}break;case"textarea":ce(e,r);break;case"select":null!=(t=r.value)&&se(e,!!r.multiple,t,!1)}},Pe=gu,De=function(e,t,r,i,n){var a=Mo;Mo|=4;try{return zn(98,e.bind(null,t,r,i,n))}finally{0===(Mo=a)&&(Ho(),Un())}},Le=function(){0===(49&Mo)&&(function(){if(null!==tu){var e=tu;tu=null,e.forEach((function(e){e.expiredLanes|=24&e.pendingLanes,fu(e,Fn())}))}Un()}(),Nu())},Be=function(e,t){var r=Mo;Mo|=2;try{return e(t)}finally{0===(Mo=r)&&(Ho(),Un())}};var ac={Events:[Ji,en,tn,Ee,Ne,Nu,{current:!1}]},sc={findFiberByHostInstance:$i,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},oc={bundleType:sc.bundleType,version:sc.version,rendererPackageName:sc.rendererPackageName,rendererConfig:sc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:k.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Je(e))?null:e.stateNode},findFiberByHostInstance:sc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var uc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!uc.isDisabled&&uc.supportsFiber)try{xn=uc.inject(oc),kn=uc}catch(me){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ac,t.createPortal=nc,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw Error(s(268,Object.keys(e)))}return e=null===(e=Je(t))?null:e.stateNode},t.flushSync=function(e,t){var r=Mo;if(0!==(48&r))return e(t);Mo|=1;try{if(e)return zn(99,e.bind(null,t))}finally{Mo=r,Un()}},t.hydrate=function(e,t,r){if(!rc(t))throw Error(s(200));return ic(null,e,t,!0,r)},t.render=function(e,t,r){if(!rc(t))throw Error(s(200));return ic(null,e,t,!1,r)},t.unmountComponentAtNode=function(e){if(!rc(e))throw Error(s(40));return!!e._reactRootContainer&&(yu((function(){ic(null,null,e,!1,(function(){e._reactRootContainer=null,e[Zi]=null}))})),!0)},t.unstable_batchedUpdates=gu,t.unstable_createPortal=function(e,t){return nc(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,r,i){if(!rc(r))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return ic(e,t,r,!1,i)},t.version="17.0.2"},function(e,t,r){"use strict";e.exports=r(191)},function(e,t,r){"use strict";var i,n,a,s;if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,c=u.now();t.unstable_now=function(){return u.now()-c}}if("undefined"===typeof window||"function"!==typeof MessageChannel){var d=null,h=null,l=function e(){if(null!==d)try{var r=t.unstable_now();d(!0,r),d=null}catch(i){throw setTimeout(e,0),i}};i=function(e){null!==d?setTimeout(i,0,e):(d=e,setTimeout(l,0))},n=function(e,t){h=setTimeout(e,t)},a=function(){clearTimeout(h)},t.unstable_shouldYield=function(){return!1},s=t.unstable_forceFrameRate=function(){}}else{var f=window.setTimeout,p=window.clearTimeout;if("undefined"!==typeof console){var v=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!==typeof v&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var m=!1,g=null,y=-1,b=5,x=0;t.unstable_shouldYield=function(){return t.unstable_now()>=x},s=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<e?Math.floor(1e3/e):5};var k=new MessageChannel,w=k.port2;k.port1.onmessage=function(){if(null!==g){var e=t.unstable_now();x=e+b;try{g(!0,e)?w.postMessage(null):(m=!1,g=null)}catch(r){throw w.postMessage(null),r}}else m=!1},i=function(e){g=e,m||(m=!0,w.postMessage(null))},n=function(e,r){y=f((function(){e(t.unstable_now())}),r)},a=function(){p(y),y=-1}}function _(e,t){var r=e.length;e.push(t);e:for(;;){var i=r-1>>>1,n=e[i];if(!(void 0!==n&&0<T(n,t)))break e;e[i]=t,e[r]=n,r=i}}function S(e){return void 0===(e=e[0])?null:e}function O(e){var t=e[0];if(void 0!==t){var r=e.pop();if(r!==t){e[0]=r;e:for(var i=0,n=e.length;i<n;){var a=2*(i+1)-1,s=e[a],o=a+1,u=e[o];if(void 0!==s&&0>T(s,r))void 0!==u&&0>T(u,s)?(e[i]=u,e[o]=r,i=o):(e[i]=s,e[a]=r,i=a);else{if(!(void 0!==u&&0>T(u,r)))break e;e[i]=u,e[o]=r,i=o}}}return t}return null}function T(e,t){var r=e.sortIndex-t.sortIndex;return 0!==r?r:e.id-t.id}var C=[],I=[],M=1,A=null,E=3,N=!1,P=!1,D=!1;function L(e){for(var t=S(I);null!==t;){if(null===t.callback)O(I);else{if(!(t.startTime<=e))break;O(I),t.sortIndex=t.expirationTime,_(C,t)}t=S(I)}}function B(e){if(D=!1,L(e),!P)if(null!==S(C))P=!0,i(R);else{var t=S(I);null!==t&&n(B,t.startTime-e)}}function R(e,r){P=!1,D&&(D=!1,a()),N=!0;var i=E;try{for(L(r),A=S(C);null!==A&&(!(A.expirationTime>r)||e&&!t.unstable_shouldYield());){var s=A.callback;if("function"===typeof s){A.callback=null,E=A.priorityLevel;var o=s(A.expirationTime<=r);r=t.unstable_now(),"function"===typeof o?A.callback=o:A===S(C)&&O(C),L(r)}else O(C);A=S(C)}if(null!==A)var u=!0;else{var c=S(I);null!==c&&n(B,c.startTime-r),u=!1}return u}finally{A=null,E=i,N=!1}}var V=s;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){P||N||(P=!0,i(R))},t.unstable_getCurrentPriorityLevel=function(){return E},t.unstable_getFirstCallbackNode=function(){return S(C)},t.unstable_next=function(e){switch(E){case 1:case 2:case 3:var t=3;break;default:t=E}var r=E;E=t;try{return e()}finally{E=r}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=V,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var r=E;E=e;try{return t()}finally{E=r}},t.unstable_scheduleCallback=function(e,r,s){var o=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?o+s:o:s=o,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:M++,callback:r,priorityLevel:e,startTime:s,expirationTime:u=s+u,sortIndex:-1},s>o?(e.sortIndex=s,_(I,e),null===S(C)&&e===S(I)&&(D?a():D=!0,n(B,s-o))):(e.sortIndex=u,_(C,e),P||N||(P=!0,i(R))),e},t.unstable_wrapCallback=function(e){var t=E;return function(){var r=E;E=t;try{return e.apply(this,arguments)}finally{E=r}}}},,,function(e,t,r){},function(e,t){e.exports=function(e){if(Array.isArray(e))return e}},function(e,t){e.exports=function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var r=[],i=!0,n=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(i=(s=o.next()).done)&&(r.push(s.value),!t||r.length!==t);i=!0);}catch(u){n=!0,a=u}finally{try{i||null==o.return||o.return()}finally{if(n)throw a}}return r}}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(e,t,r){"use strict";(function(t){var i="undefined"!==typeof window,n="undefined"!==typeof t&&"undefined"!==typeof t.versions&&"undefined"!==typeof t.versions.electron,a="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope,s="undefined"!==typeof t&&"win32"===t.platform,o=!(i||a),u="undefined"===typeof fetch?r(199)().fetch:fetch;e.exports={isBrowser:i,isElectron:n,isWebWorker:a,isNode:o,isWindows:s,defaultFetch:u}}).call(this,r(46))},function(e,t,r){"use strict";var i=r(200);function n(e){var t=function(t,r){return"string"===typeof t&&"//"===t.slice(0,2)?e("https:"+t,r):e(t,r)};return t.http=e.http,t.https=e.https,t}e.exports=function(e){return e&&e.Promise&&(i.Promise=e.Promise),{fetch:n(i),Headers:i.Headers,Request:i.Request,Response:i.Response}}},function(e,t,r){"use strict";(function(i,n){var a=r(137),s=r(138),o=r(1),u=r(2);Object.defineProperty(t,"__esModule",{value:!0});var c=Symbol("buffer"),d=Symbol("type"),h=function(){function e(){o(this,e),this[d]="";var t=arguments[0],r=arguments[1],n=[];if(t)for(var a=t,s=Number(a.length),u=0;u<s;u++){var h=a[u],l=void 0;l=h instanceof i?h:ArrayBuffer.isView(h)?i.from(h.buffer,h.byteOffset,h.byteLength):h instanceof ArrayBuffer?i.from(h):h instanceof e?h[c]:i.from("string"===typeof h?h:String(h)),n.push(l)}this[c]=i.concat(n);var f=r&&void 0!==r.type&&String(r.type).toLowerCase();f&&!/[^\u0020-\u007E]/.test(f)&&(this[d]=f)}return u(e,[{key:"size",get:function(){return this[c].length}},{key:"type",get:function(){return this[d]}},{key:"slice",value:function(){var t,r,i=this.size,n=arguments[0],a=arguments[1];t=void 0===n?0:n<0?Math.max(i+n,0):Math.min(n,i),r=void 0===a?i:a<0?Math.max(i+a,0):Math.min(a,i);var s=Math.max(r-t,0),o=this[c],u=o.slice(t,t+s),d=new e([],{type:arguments[2]});return d[c]=u,d}}]),e}();function l(e,t,r){Error.call(this,e),this.message=e,this.type=t,r&&(this.code=this.errno=r.code),Error.captureStackTrace(this,this.constructor)}Object.defineProperties(h.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}}),Object.defineProperty(h.prototype,Symbol.toStringTag,{value:"Blob",writable:!1,enumerable:!1,configurable:!0}),l.prototype=Object.create(Error.prototype),l.prototype.constructor=l,l.prototype.name="FetchError";var f=r(84),p=r(84).PassThrough,v=Symbol("Body internals");function m(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.size,a=void 0===n?0:n,s=r.timeout,o=void 0===s?0:s;null==e?e=null:"string"===typeof e||y(e)||e instanceof h||i.isBuffer(e)||"[object ArrayBuffer]"===Object.prototype.toString.call(e)||e instanceof f||(e=String(e)),this[v]={body:e,disturbed:!1,error:null},this.size=a,this.timeout=o,e instanceof f&&e.on("error",(function(e){t[v].error=new l("Invalid response body while trying to fetch ".concat(t.url,": ").concat(e.message),"system",e)}))}function g(){var e=this;if(this[v].disturbed)return m.Promise.reject(new TypeError("body used already for: ".concat(this.url)));if(this[v].disturbed=!0,this[v].error)return m.Promise.reject(this[v].error);if(null===this.body)return m.Promise.resolve(i.alloc(0));if("string"===typeof this.body)return m.Promise.resolve(i.from(this.body));if(this.body instanceof h)return m.Promise.resolve(this.body[c]);if(i.isBuffer(this.body))return m.Promise.resolve(this.body);if("[object ArrayBuffer]"===Object.prototype.toString.call(this.body))return m.Promise.resolve(i.from(this.body));if(!(this.body instanceof f))return m.Promise.resolve(i.alloc(0));var t=[],r=0,n=!1;return new m.Promise((function(a,s){var o;e.timeout&&(o=setTimeout((function(){n=!0,s(new l("Response timeout while trying to fetch ".concat(e.url," (over ").concat(e.timeout,"ms)"),"body-timeout"))}),e.timeout)),e.body.on("error",(function(t){s(new l("Invalid response body while trying to fetch ".concat(e.url,": ").concat(t.message),"system",t))})),e.body.on("data",(function(i){if(!n&&null!==i){if(e.size&&r+i.length>e.size)return n=!0,void s(new l("content size at ".concat(e.url," over limit: ").concat(e.size),"max-size"));r+=i.length,t.push(i)}})),e.body.on("end",(function(){if(!n){clearTimeout(o);try{a(i.concat(t))}catch(r){s(new l("Could not create Buffer from response body for ".concat(e.url,": ").concat(r.message),"system",r))}}}))}))}function y(e){return"object"===typeof e&&"function"===typeof e.append&&"function"===typeof e.delete&&"function"===typeof e.get&&"function"===typeof e.getAll&&"function"===typeof e.has&&"function"===typeof e.set&&("URLSearchParams"===e.constructor.name||"[object URLSearchParams]"===Object.prototype.toString.call(e)||"function"===typeof e.sort)}function b(e){var t,r,i=e.body;if(e.bodyUsed)throw new Error("cannot clone body after it is used");return i instanceof f&&"function"!==typeof i.getBoundary&&(t=new p,r=new p,i.pipe(t),i.pipe(r),e[v].body=t,i=r),i}function x(e){var t=e.body;return null===t?null:"string"===typeof t?"text/plain;charset=UTF-8":y(t)?"application/x-www-form-urlencoded;charset=UTF-8":t instanceof h?t.type||null:i.isBuffer(t)||"[object ArrayBuffer]"===Object.prototype.toString.call(t)?null:"function"===typeof t.getBoundary?"multipart/form-data;boundary=".concat(t.getBoundary()):null}function k(e){var t=e.body;return null===t?0:"string"===typeof t?i.byteLength(t):y(t)?i.byteLength(String(t)):t instanceof h?t.size:i.isBuffer(t)?t.length:"[object ArrayBuffer]"===Object.prototype.toString.call(t)?t.byteLength:t&&"function"===typeof t.getLengthSync&&(t._lengthRetrievers&&0==t._lengthRetrievers.length||t.hasKnownLength&&t.hasKnownLength())?t.getLengthSync():null}m.prototype={get body(){return this[v].body},get bodyUsed(){return this[v].disturbed},arrayBuffer:function(){return g.call(this).then((function(e){return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}))},blob:function(){var e=this.headers&&this.headers.get("content-type")||"";return g.call(this).then((function(t){return Object.assign(new h([],{type:e.toLowerCase()}),s({},c,t))}))},json:function(){var e=this;return g.call(this).then((function(t){try{return JSON.parse(t.toString())}catch(r){return m.Promise.reject(new l("invalid json response body at ".concat(e.url," reason: ").concat(r.message),"invalid-json"))}}))},text:function(){return g.call(this).then((function(e){return e.toString()}))},buffer:function(){return g.call(this)},textConverted:function(){var e=this;return g.call(this).then((function(t){return function(e,t){if("function"!==typeof convert)throw new Error("The package `encoding` must be installed to use the textConverted() function");var r,i,n=t.get("content-type"),a="utf-8";n&&(r=/charset=([^;]*)/i.exec(n));i=e.slice(0,1024).toString(),!r&&i&&(r=/<meta.+?charset=(['"])(.+?)\1/i.exec(i));!r&&i&&(r=/<meta[\s]+?http-equiv=(['"])content-type\1[\s]+?content=(['"])(.+?)\2/i.exec(i))&&(r=/charset=(.*)/i.exec(r.pop()));!r&&i&&(r=/<\?xml.+?encoding=(['"])(.+?)\1/i.exec(i));r&&("gb2312"!==(a=r.pop())&&"gbk"!==a||(a="gb18030"));return convert(e,"UTF-8",a).toString()}(t,e.headers)}))}},Object.defineProperties(m.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0}}),m.mixIn=function(e){var t,r=a(Object.getOwnPropertyNames(m.prototype));try{for(r.s();!(t=r.n()).done;){var i=t.value;if(!(i in e)){var n=Object.getOwnPropertyDescriptor(m.prototype,i);Object.defineProperty(e,i,n)}}}catch(s){r.e(s)}finally{r.f()}},m.Promise=n.Promise;var w=/[^\^_`a-zA-Z\-0-9!#$%&'*+.|~]/,_=/[^\t\x20-\x7e\x80-\xff]/;function S(e){if(e="".concat(e),w.test(e))throw new TypeError("".concat(e," is not a legal HTTP header name"))}function O(e){if(e="".concat(e),_.test(e))throw new TypeError("".concat(e," is not a legal HTTP header value"))}function T(e,t){for(var r in t=t.toLowerCase(),e)if(r.toLowerCase()===t)return r}var C=Symbol("map"),I=function(){function e(){o(this,e);var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;if(this[C]=Object.create(null),t instanceof e)for(var r=t.raw(),i=Object.keys(r),n=0,s=i;n<s.length;n++){var u,c=s[n],d=a(r[c]);try{for(d.s();!(u=d.n()).done;){var h=u.value;this.append(c,h)}}catch(S){d.e(S)}finally{d.f()}}else if(null==t);else{if("object"!==typeof t)throw new TypeError("Provided initializer must be an object");var l=t[Symbol.iterator];if(null!=l){if("function"!==typeof l)throw new TypeError("Header pairs must be iterable");var f,p=[],v=a(t);try{for(v.s();!(f=v.n()).done;){var m=f.value;if("object"!==typeof m||"function"!==typeof m[Symbol.iterator])throw new TypeError("Each header pair must be iterable");p.push(Array.from(m))}}catch(S){v.e(S)}finally{v.f()}for(var g=0,y=p;g<y.length;g++){var b=y[g];if(2!==b.length)throw new TypeError("Each header pair must be a name/value tuple");this.append(b[0],b[1])}}else for(var x=0,k=Object.keys(t);x<k.length;x++){var w=k[x],_=t[w];this.append(w,_)}}}return u(e,[{key:"get",value:function(e){S(e="".concat(e));var t=T(this[C],e);return void 0===t?null:this[C][t].join(", ")}},{key:"forEach",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=M(this),i=0;i<r.length;){var n=r[i],a=n[0],s=n[1];e.call(t,s,a,this),r=M(this),i++}}},{key:"set",value:function(e,t){e="".concat(e),t="".concat(t),S(e),O(t);var r=T(this[C],e);this[C][void 0!==r?r:e]=[t]}},{key:"append",value:function(e,t){e="".concat(e),t="".concat(t),S(e),O(t);var r=T(this[C],e);void 0!==r?this[C][r].push(t):this[C][e]=[t]}},{key:"has",value:function(e){return S(e="".concat(e)),void 0!==T(this[C],e)}},{key:"delete",value:function(e){S(e="".concat(e));var t=T(this[C],e);void 0!==t&&delete this[C][t]}},{key:"raw",value:function(){return this[C]}},{key:"keys",value:function(){return E(this,"key")}},{key:"values",value:function(){return E(this,"value")}},{key:Symbol.iterator,value:function(){return E(this,"key+value")}}]),e}();function M(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"key+value",r=Object.keys(e[C]).sort();return r.map("key"===t?function(e){return e.toLowerCase()}:"value"===t?function(t){return e[C][t].join(", ")}:function(t){return[t.toLowerCase(),e[C][t].join(", ")]})}I.prototype.entries=I.prototype[Symbol.iterator],Object.defineProperty(I.prototype,Symbol.toStringTag,{value:"Headers",writable:!1,enumerable:!1,configurable:!0}),Object.defineProperties(I.prototype,{get:{enumerable:!0},forEach:{enumerable:!0},set:{enumerable:!0},append:{enumerable:!0},has:{enumerable:!0},delete:{enumerable:!0},keys:{enumerable:!0},values:{enumerable:!0},entries:{enumerable:!0}});var A=Symbol("internal");function E(e,t){var r=Object.create(N);return r[A]={target:e,kind:t,index:0},r}var N=Object.setPrototypeOf({next:function(){if(!this||Object.getPrototypeOf(this)!==N)throw new TypeError("Value of `this` is not a HeadersIterator");var e=this[A],t=e.target,r=e.kind,i=e.index,n=M(t,r);return i>=n.length?{value:void 0,done:!0}:(this[A].index=i+1,{value:n[i],done:!1})}},Object.getPrototypeOf(Object.getPrototypeOf([][Symbol.iterator]())));function P(e){var t=Object.assign({__proto__:null},e[C]),r=T(e[C],"Host");return void 0!==r&&(t[r]=t[r][0]),t}Object.defineProperty(N,Symbol.toStringTag,{value:"HeadersIterator",writable:!1,enumerable:!1,configurable:!0});var D=r(123).STATUS_CODES,L=Symbol("Response internals"),B=function(){function e(){o(this,e);var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};m.call(this,t,r);var i=r.status||200;this[L]={url:r.url,status:i,statusText:r.statusText||D[i],headers:new I(r.headers)}}return u(e,[{key:"url",get:function(){return this[L].url}},{key:"status",get:function(){return this[L].status}},{key:"ok",get:function(){return this[L].status>=200&&this[L].status<300}},{key:"statusText",get:function(){return this[L].statusText}},{key:"headers",get:function(){return this[L].headers}},{key:"clone",value:function(){return new e(b(this),{url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok})}}]),e}();m.mixIn(B.prototype),Object.defineProperties(B.prototype,{url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}}),Object.defineProperty(B.prototype,Symbol.toStringTag,{value:"Response",writable:!1,enumerable:!1,configurable:!0});var R=r(86),V=R.format,G=R.parse,F=Symbol("Request internals");function q(e){return"object"===typeof e&&"object"===typeof e[F]}var j=function(){function e(t){o(this,e);var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};q(t)?r=G(t.url):(r=t&&t.href?G(t.href):G("".concat(t)),t={});var n=i.method||t.method||"GET";if(n=n.toUpperCase(),(null!=i.body||q(t)&&null!==t.body)&&("GET"===n||"HEAD"===n))throw new TypeError("Request with GET/HEAD method cannot have body");var a=null!=i.body?i.body:q(t)&&null!==t.body?b(t):null;m.call(this,a,{timeout:i.timeout||t.timeout||0,size:i.size||t.size||0});var s=new I(i.headers||t.headers||{});if(null!=i.body){var u=x(this);null===u||s.has("Content-Type")||s.append("Content-Type",u)}this[F]={method:n,redirect:i.redirect||t.redirect||"follow",headers:s,parsedURL:r},this.follow=void 0!==i.follow?i.follow:void 0!==t.follow?t.follow:20,this.compress=void 0!==i.compress?i.compress:void 0===t.compress||t.compress,this.counter=i.counter||t.counter||0,this.agent=i.agent||t.agent}return u(e,[{key:"method",get:function(){return this[F].method}},{key:"url",get:function(){return V(this[F].parsedURL)}},{key:"headers",get:function(){return this[F].headers}},{key:"redirect",get:function(){return this[F].redirect}},{key:"clone",value:function(){return new e(this)}}]),e}();m.mixIn(j.prototype),Object.defineProperty(j.prototype,Symbol.toStringTag,{value:"Request",writable:!1,enumerable:!1,configurable:!0}),Object.defineProperties(j.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0}});var z=r(123),H=r(224),U=r(84).PassThrough,W=r(86).resolve,K=r(225);function X(e,t){if(!X.Promise)throw new Error("native promise missing, set fetch.Promise to your favorite alternative");return m.Promise=X.Promise,new X.Promise((function(r,n){var s,o=new j(e,t),u=function(e){var t=e[F].parsedURL,r=new I(e[F].headers);if(r.has("Accept")||r.set("Accept","*/*"),!t.protocol||!t.hostname)throw new TypeError("Only absolute URLs are supported");if(!/^https?:$/.test(t.protocol))throw new TypeError("Only HTTP(S) protocols are supported");var i=null;if(null==e.body&&/^(POST|PUT)$/i.test(e.method)&&(i="0"),null!=e.body){var n=k(e);"number"===typeof n&&(i=String(n))}return i&&r.set("Content-Length",i),r.has("User-Agent")||r.set("User-Agent","node-fetch/1.0 (+https://github.com/bitinn/node-fetch)"),e.compress&&r.set("Accept-Encoding","gzip,deflate"),r.has("Connection")||e.agent||r.set("Connection","close"),Object.assign({},t,{method:e.method,headers:P(r),agent:e.agent})}(o),d=(0,("https:"===u.protocol?H:z).request)(u);function f(){d.abort(),clearTimeout(s)}o.timeout&&d.once("socket",(function(e){s=setTimeout((function(){n(new l("network timeout at: ".concat(o.url),"request-timeout")),f()}),o.timeout)})),d.on("error",(function(e){n(new l("request to ".concat(o.url," failed, reason: ").concat(e.message),"system",e)),f()})),d.on("response",(function(e){clearTimeout(s);var t=function(e){for(var t=new I,r=0,i=Object.keys(e);r<i.length;r++){var n=i[r];if(!w.test(n))if(Array.isArray(e[n])){var s,o=a(e[n]);try{for(o.s();!(s=o.n()).done;){var u=s.value;_.test(u)||(void 0===t[C][n]?t[C][n]=[u]:t[C][n].push(u))}}catch(c){o.e(c)}finally{o.f()}}else _.test(e[n])||(t[C][n]=[e[n]])}return t}(e.headers);if(X.isRedirect(e.statusCode)){var i=t.get("Location"),u=null===i?null:W(o.url,i);switch(o.redirect){case"error":return n(new l("redirect mode is set to error: ".concat(o.url),"no-redirect")),void f();case"manual":null!==u&&t.set("Location",u);break;case"follow":if(null===u)break;if(o.counter>=o.follow)return n(new l("maximum redirect reached at: ".concat(o.url),"max-redirect")),void f();var c={headers:new I(o.headers),follow:o.follow,counter:o.counter+1,agent:o.agent,compress:o.compress,method:o.method,body:o.body};return 303!==e.statusCode&&o.body&&null===k(o)?(n(new l("Cannot follow redirect with body being a readable stream","unsupported-redirect")),void f()):(303!==e.statusCode&&(301!==e.statusCode&&302!==e.statusCode||"POST"!==o.method)||(c.method="GET",c.body=void 0,c.headers.delete("content-length")),r(X(new j(u,c))),void f())}}var d=e.pipe(new U),h={url:o.url,status:e.statusCode,statusText:e.statusMessage,headers:t,size:o.size,timeout:o.timeout},p=t.get("Content-Encoding");if(o.compress&&"HEAD"!==o.method&&null!==p&&204!==e.statusCode&&304!==e.statusCode){var v={flush:K.Z_SYNC_FLUSH,finishFlush:K.Z_SYNC_FLUSH};if("gzip"==p||"x-gzip"==p)return d=d.pipe(K.createGunzip(v)),void r(new B(d,h));if("deflate"!=p&&"x-deflate"!=p)r(new B(d,h));else e.pipe(new U).once("data",(function(e){d=8===(15&e[0])?d.pipe(K.createInflate()):d.pipe(K.createInflateRaw()),r(new B(d,h))}))}else r(new B(d,h))})),function(e,t){var r=t.body;null===r?e.end():"string"===typeof r?(e.write(r),e.end()):y(r)?(e.write(i.from(String(r))),e.end()):r instanceof h?(e.write(r[c]),e.end()):i.isBuffer(r)?(e.write(r),e.end()):"[object ArrayBuffer]"===Object.prototype.toString.call(r)?(e.write(i.from(r)),e.end()):r.pipe(e)}(d,o)}))}X.isRedirect=function(e){return 301===e||302===e||303===e||307===e||308===e},X.default=X,X.Promise=n.Promise,X.http=z,X.https=H,e.exports=t=X,t.Headers=I,t.Request=j,t.Response=B,t.FetchError=l}).call(this,r(32).Buffer,r(35))},function(e,t,r){"use strict";t.byteLength=function(e){var t=c(e),r=t[0],i=t[1];return 3*(r+i)/4-i},t.toByteArray=function(e){var t,r,i=c(e),s=i[0],o=i[1],u=new a(function(e,t,r){return 3*(t+r)/4-r}(0,s,o)),d=0,h=o>0?s-4:s;for(r=0;r<h;r+=4)t=n[e.charCodeAt(r)]<<18|n[e.charCodeAt(r+1)]<<12|n[e.charCodeAt(r+2)]<<6|n[e.charCodeAt(r+3)],u[d++]=t>>16&255,u[d++]=t>>8&255,u[d++]=255&t;2===o&&(t=n[e.charCodeAt(r)]<<2|n[e.charCodeAt(r+1)]>>4,u[d++]=255&t);1===o&&(t=n[e.charCodeAt(r)]<<10|n[e.charCodeAt(r+1)]<<4|n[e.charCodeAt(r+2)]>>2,u[d++]=t>>8&255,u[d++]=255&t);return u},t.fromByteArray=function(e){for(var t,r=e.length,n=r%3,a=[],s=16383,o=0,u=r-n;o<u;o+=s)a.push(d(e,o,o+s>u?u:o+s));1===n?(t=e[r-1],a.push(i[t>>2]+i[t<<4&63]+"==")):2===n&&(t=(e[r-2]<<8)+e[r-1],a.push(i[t>>10]+i[t>>4&63]+i[t<<2&63]+"="));return a.join("")};for(var i=[],n=[],a="undefined"!==typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,u=s.length;o<u;++o)i[o]=s[o],n[s.charCodeAt(o)]=o;function c(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function d(e,t,r){for(var n,a,s=[],o=t;o<r;o+=3)n=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),s.push(i[(a=n)>>18&63]+i[a>>12&63]+i[a>>6&63]+i[63&a]);return s.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,r,i,n){var a,s,o=8*n-i-1,u=(1<<o)-1,c=u>>1,d=-7,h=r?n-1:0,l=r?-1:1,f=e[t+h];for(h+=l,a=f&(1<<-d)-1,f>>=-d,d+=o;d>0;a=256*a+e[t+h],h+=l,d-=8);for(s=a&(1<<-d)-1,a>>=-d,d+=i;d>0;s=256*s+e[t+h],h+=l,d-=8);if(0===a)a=1-c;else{if(a===u)return s?NaN:1/0*(f?-1:1);s+=Math.pow(2,i),a-=c}return(f?-1:1)*s*Math.pow(2,a-i)},t.write=function(e,t,r,i,n,a){var s,o,u,c=8*a-n-1,d=(1<<c)-1,h=d>>1,l=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,f=i?0:a-1,p=i?1:-1,v=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(o=isNaN(t)?1:0,s=d):(s=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-s))<1&&(s--,u*=2),(t+=s+h>=1?l/u:l*Math.pow(2,1-h))*u>=2&&(s++,u/=2),s+h>=d?(o=0,s=d):s+h>=1?(o=(t*u-1)*Math.pow(2,n),s+=h):(o=t*Math.pow(2,h-1)*Math.pow(2,n),s=0));n>=8;e[r+f]=255&o,f+=p,o/=256,n-=8);for(s=s<<n|o,c+=n;c>0;e[r+f]=255&s,f+=p,s/=256,c-=8);e[r+f-p]|=128*v}},,function(e,t,r){"use strict";var i=r(121).Buffer,n=r(205);e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r},e.prototype.concat=function(e){if(0===this.length)return i.alloc(0);if(1===this.length)return this.head.data;for(var t,r,n,a=i.allocUnsafe(e>>>0),s=this.head,o=0;s;)t=s.data,r=a,n=o,t.copy(r,n),o+=s.data.length,s=s.next;return a},e}(),n&&n.inspect&&n.inspect.custom&&(e.exports.prototype[n.inspect.custom]=function(){var e=n.inspect({length:this.length});return this.constructor.name+" "+e})},,function(e,t,r){(function(e){var i="undefined"!==typeof e&&e||"undefined"!==typeof self&&self||window,n=Function.prototype.apply;function a(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new a(n.call(setTimeout,i,arguments),clearTimeout)},t.setInterval=function(){return new a(n.call(setInterval,i,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},a.prototype.unref=a.prototype.ref=function(){},a.prototype.close=function(){this._clearFn.call(i,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},r(207),t.setImmediate="undefined"!==typeof self&&self.setImmediate||"undefined"!==typeof e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!==typeof self&&self.clearImmediate||"undefined"!==typeof e&&e.clearImmediate||this&&this.clearImmediate}).call(this,r(35))},function(e,t,r){(function(e,t){!function(e,r){"use strict";if(!e.setImmediate){var i,n=1,a={},s=!1,o=e.document,u=Object.getPrototypeOf&&Object.getPrototypeOf(e);u=u&&u.setTimeout?u:e,"[object process]"==={}.toString.call(e.process)?i=function(e){t.nextTick((function(){d(e)}))}:function(){if(e.postMessage&&!e.importScripts){var t=!0,r=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=r,t}}()?function(){var t="setImmediate$"+Math.random()+"$",r=function(r){r.source===e&&"string"===typeof r.data&&0===r.data.indexOf(t)&&d(+r.data.slice(t.length))};e.addEventListener?e.addEventListener("message",r,!1):e.attachEvent("onmessage",r),i=function(r){e.postMessage(t+r,"*")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){d(e.data)},i=function(t){e.port2.postMessage(t)}}():o&&"onreadystatechange"in o.createElement("script")?function(){var e=o.documentElement;i=function(t){var r=o.createElement("script");r.onreadystatechange=function(){d(t),r.onreadystatechange=null,e.removeChild(r),r=null},e.appendChild(r)}}():i=function(e){setTimeout(d,0,e)},u.setImmediate=function(e){"function"!==typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),r=0;r<t.length;r++)t[r]=arguments[r+1];var s={callback:e,args:t};return a[n]=s,i(n),n++},u.clearImmediate=c}function c(e){delete a[e]}function d(e){if(s)setTimeout(d,0,e);else{var t=a[e];if(t){s=!0;try{!function(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(void 0,r)}}(t)}finally{c(e),s=!1}}}}}("undefined"===typeof self?"undefined"===typeof e?this:e:self)}).call(this,r(35),r(46))},function(e,t,r){(function(t){function r(e){try{if(!t.localStorage)return!1}catch(i){return!1}var r=t.localStorage[e];return null!=r&&"true"===String(r).toLowerCase()}e.exports=function(e,t){if(r("noDeprecation"))return e;var i=!1;return function(){if(!i){if(r("throwDeprecation"))throw new Error(t);r("traceDeprecation")?console.trace(t):console.warn(t),i=!0}return e.apply(this,arguments)}}}).call(this,r(35))},function(e,t,r){var i=r(32),n=i.Buffer;function a(e,t){for(var r in e)t[r]=e[r]}function s(e,t,r){return n(e,t,r)}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?e.exports=i:(a(i,t),t.Buffer=s),s.prototype=Object.create(n.prototype),a(n,s),s.from=function(e,t,r){if("number"===typeof e)throw new TypeError("Argument must not be a number");return n(e,t,r)},s.alloc=function(e,t,r){if("number"!==typeof e)throw new TypeError("Argument must be a number");var i=n(e);return void 0!==t?"string"===typeof r?i.fill(t,r):i.fill(t):i.fill(0),i},s.allocUnsafe=function(e){if("number"!==typeof e)throw new TypeError("Argument must be a number");return n(e)},s.allocUnsafeSlow=function(e){if("number"!==typeof e)throw new TypeError("Argument must be a number");return i.SlowBuffer(e)}},function(e,t,r){"use strict";e.exports=a;var i=r(143),n=Object.create(r(75));function a(e){if(!(this instanceof a))return new a(e);i.call(this,e)}n.inherits=r(56),n.inherits(a,i),a.prototype._transform=function(e,t,r){r(null,e)}},function(e,t,r){e.exports=r(122)},function(e,t,r){e.exports=r(63)},function(e,t,r){e.exports=r(74).Transform},function(e,t,r){e.exports=r(74).PassThrough},function(e,t,r){(function(t,i,n){var a=r(144),s=r(56),o=r(145),u=r(74),c=r(216),d=o.IncomingMessage,h=o.readyStates;var l=e.exports=function(e){var r,i=this;u.Writable.call(i),i._opts=e,i._body=[],i._headers={},e.auth&&i.setHeader("Authorization","Basic "+new t(e.auth).toString("base64")),Object.keys(e.headers).forEach((function(t){i.setHeader(t,e.headers[t])}));var n=!0;if("disable-fetch"===e.mode||"requestTimeout"in e&&!a.abortController)n=!1,r=!0;else if("prefer-streaming"===e.mode)r=!1;else if("allow-wrong-content-type"===e.mode)r=!a.overrideMimeType;else{if(e.mode&&"default"!==e.mode&&"prefer-fast"!==e.mode)throw new Error("Invalid value for opts.mode");r=!0}i._mode=function(e,t){return a.fetch&&t?"fetch":a.mozchunkedarraybuffer?"moz-chunked-arraybuffer":a.msstream?"ms-stream":a.arraybuffer&&e?"arraybuffer":a.vbArray&&e?"text:vbarray":"text"}(r,n),i._fetchTimer=null,i.on("finish",(function(){i._onFinish()}))};s(l,u.Writable),l.prototype.setHeader=function(e,t){var r=e.toLowerCase();-1===f.indexOf(r)&&(this._headers[r]={name:e,value:t})},l.prototype.getHeader=function(e){var t=this._headers[e.toLowerCase()];return t?t.value:null},l.prototype.removeHeader=function(e){delete this._headers[e.toLowerCase()]},l.prototype._onFinish=function(){var e=this;if(!e._destroyed){var r=e._opts,s=e._headers,o=null;"GET"!==r.method&&"HEAD"!==r.method&&(o=a.arraybuffer?c(t.concat(e._body)):a.blobConstructor?new i.Blob(e._body.map((function(e){return c(e)})),{type:(s["content-type"]||{}).value||""}):t.concat(e._body).toString());var u=[];if(Object.keys(s).forEach((function(e){var t=s[e].name,r=s[e].value;Array.isArray(r)?r.forEach((function(e){u.push([t,e])})):u.push([t,r])})),"fetch"===e._mode){var d=null;if(a.abortController){var l=new AbortController;d=l.signal,e._fetchAbortController=l,"requestTimeout"in r&&0!==r.requestTimeout&&(e._fetchTimer=i.setTimeout((function(){e.emit("requestTimeout"),e._fetchAbortController&&e._fetchAbortController.abort()}),r.requestTimeout))}i.fetch(e._opts.url,{method:e._opts.method,headers:u,body:o||void 0,mode:"cors",credentials:r.withCredentials?"include":"same-origin",signal:d}).then((function(t){e._fetchResponse=t,e._connect()}),(function(t){i.clearTimeout(e._fetchTimer),e._destroyed||e.emit("error",t)}))}else{var f=e._xhr=new i.XMLHttpRequest;try{f.open(e._opts.method,e._opts.url,!0)}catch(p){return void n.nextTick((function(){e.emit("error",p)}))}"responseType"in f&&(f.responseType=e._mode.split(":")[0]),"withCredentials"in f&&(f.withCredentials=!!r.withCredentials),"text"===e._mode&&"overrideMimeType"in f&&f.overrideMimeType("text/plain; charset=x-user-defined"),"requestTimeout"in r&&(f.timeout=r.requestTimeout,f.ontimeout=function(){e.emit("requestTimeout")}),u.forEach((function(e){f.setRequestHeader(e[0],e[1])})),e._response=null,f.onreadystatechange=function(){switch(f.readyState){case h.LOADING:case h.DONE:e._onXHRProgress()}},"moz-chunked-arraybuffer"===e._mode&&(f.onprogress=function(){e._onXHRProgress()}),f.onerror=function(){e._destroyed||e.emit("error",new Error("XHR error"))};try{f.send(o)}catch(p){return void n.nextTick((function(){e.emit("error",p)}))}}}},l.prototype._onXHRProgress=function(){var e=this;(function(e){try{var t=e.status;return null!==t&&0!==t}catch(r){return!1}})(e._xhr)&&!e._destroyed&&(e._response||e._connect(),e._response._onXHRProgress())},l.prototype._connect=function(){var e=this;e._destroyed||(e._response=new d(e._xhr,e._fetchResponse,e._mode,e._fetchTimer),e._response.on("error",(function(t){e.emit("error",t)})),e.emit("response",e._response))},l.prototype._write=function(e,t,r){this._body.push(e),r()},l.prototype.abort=l.prototype.destroy=function(){var e=this;e._destroyed=!0,i.clearTimeout(e._fetchTimer),e._response&&(e._response._destroyed=!0),e._xhr?e._xhr.abort():e._fetchAbortController&&e._fetchAbortController.abort()},l.prototype.end=function(e,t,r){"function"===typeof e&&(r=e,e=void 0),u.Writable.prototype.end.call(this,e,t,r)},l.prototype.flushHeaders=function(){},l.prototype.setTimeout=function(){},l.prototype.setNoDelay=function(){},l.prototype.setSocketKeepAlive=function(){};var f=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","via"]}).call(this,r(32).Buffer,r(35),r(46))},function(e,t,r){var i=r(32).Buffer;e.exports=function(e){if(e instanceof Uint8Array){if(0===e.byteOffset&&e.byteLength===e.buffer.byteLength)return e.buffer;if("function"===typeof e.buffer.slice)return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}if(i.isBuffer(e)){for(var t=new Uint8Array(e.length),r=e.length,n=0;n<r;n++)t[n]=e[n];return t.buffer}throw new Error("Argument must be a Buffer")}},function(e,t){e.exports=function(){for(var e={},t=0;t<arguments.length;t++){var i=arguments[t];for(var n in i)r.call(i,n)&&(e[n]=i[n])}return e};var r=Object.prototype.hasOwnProperty},function(e,t){e.exports={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}},function(e,t,r){(function(e,i){var n;!function(a){t&&t.nodeType,e&&e.nodeType;var s="object"==typeof i&&i;s.global!==s&&s.window!==s&&s.self;var o,u=2147483647,c=36,d=/^xn--/,h=/[^\x20-\x7E]/,l=/[\x2E\u3002\uFF0E\uFF61]/g,f={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},p=Math.floor,v=String.fromCharCode;function m(e){throw new RangeError(f[e])}function g(e,t){for(var r=e.length,i=[];r--;)i[r]=t(e[r]);return i}function y(e,t){var r=e.split("@"),i="";return r.length>1&&(i=r[0]+"@",e=r[1]),i+g((e=e.replace(l,".")).split("."),t).join(".")}function b(e){for(var t,r,i=[],n=0,a=e.length;n<a;)(t=e.charCodeAt(n++))>=55296&&t<=56319&&n<a?56320==(64512&(r=e.charCodeAt(n++)))?i.push(((1023&t)<<10)+(1023&r)+65536):(i.push(t),n--):i.push(t);return i}function x(e){return g(e,(function(e){var t="";return e>65535&&(t+=v((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=v(e)})).join("")}function k(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function w(e,t,r){var i=0;for(e=r?p(e/700):e>>1,e+=p(e/t);e>455;i+=c)e=p(e/35);return p(i+36*e/(e+38))}function _(e){var t,r,i,n,a,s,o,d,h,l,f,v=[],g=e.length,y=0,b=128,k=72;for((r=e.lastIndexOf("-"))<0&&(r=0),i=0;i<r;++i)e.charCodeAt(i)>=128&&m("not-basic"),v.push(e.charCodeAt(i));for(n=r>0?r+1:0;n<g;){for(a=y,s=1,o=c;n>=g&&m("invalid-input"),((d=(f=e.charCodeAt(n++))-48<10?f-22:f-65<26?f-65:f-97<26?f-97:c)>=c||d>p((u-y)/s))&&m("overflow"),y+=d*s,!(d<(h=o<=k?1:o>=k+26?26:o-k));o+=c)s>p(u/(l=c-h))&&m("overflow"),s*=l;k=w(y-a,t=v.length+1,0==a),p(y/t)>u-b&&m("overflow"),b+=p(y/t),y%=t,v.splice(y++,0,b)}return x(v)}function S(e){var t,r,i,n,a,s,o,d,h,l,f,g,y,x,_,S=[];for(g=(e=b(e)).length,t=128,r=0,a=72,s=0;s<g;++s)(f=e[s])<128&&S.push(v(f));for(i=n=S.length,n&&S.push("-");i<g;){for(o=u,s=0;s<g;++s)(f=e[s])>=t&&f<o&&(o=f);for(o-t>p((u-r)/(y=i+1))&&m("overflow"),r+=(o-t)*y,t=o,s=0;s<g;++s)if((f=e[s])<t&&++r>u&&m("overflow"),f==t){for(d=r,h=c;!(d<(l=h<=a?1:h>=a+26?26:h-a));h+=c)_=d-l,x=c-l,S.push(v(k(l+_%x,0))),d=p(_/x);S.push(v(k(d,0))),a=w(r,y,i==n),r=0,++i}++r,++t}return S.join("")}o={version:"1.4.1",ucs2:{decode:b,encode:x},decode:_,encode:S,toASCII:function(e){return y(e,(function(e){return h.test(e)?"xn--"+S(e):e}))},toUnicode:function(e){return y(e,(function(e){return d.test(e)?_(e.slice(4).toLowerCase()):e}))}},void 0===(n=function(){return o}.call(t,r,t,e))||(e.exports=n)}()}).call(this,r(87)(e),r(35))},function(e,t,r){"use strict";e.exports={isString:function(e){return"string"===typeof e},isObject:function(e){return"object"===typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},function(e,t,r){"use strict";t.decode=t.parse=r(222),t.encode=t.stringify=r(223)},function(e,t,r){"use strict";function i(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,r,a){t=t||"&",r=r||"=";var s={};if("string"!==typeof e||0===e.length)return s;var o=/\+/g;e=e.split(t);var u=1e3;a&&"number"===typeof a.maxKeys&&(u=a.maxKeys);var c=e.length;u>0&&c>u&&(c=u);for(var d=0;d<c;++d){var h,l,f,p,v=e[d].replace(o,"%20"),m=v.indexOf(r);m>=0?(h=v.substr(0,m),l=v.substr(m+1)):(h=v,l=""),f=decodeURIComponent(h),p=decodeURIComponent(l),i(s,f)?n(s[f])?s[f].push(p):s[f]=[s[f],p]:s[f]=p}return s};var n=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},function(e,t,r){"use strict";var i=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,r,o){return t=t||"&",r=r||"=",null===e&&(e=void 0),"object"===typeof e?a(s(e),(function(s){var o=encodeURIComponent(i(s))+r;return n(e[s])?a(e[s],(function(e){return o+encodeURIComponent(i(e))})).join(t):o+encodeURIComponent(i(e[s]))})).join(t):o?encodeURIComponent(i(o))+r+encodeURIComponent(i(e)):""};var n=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function a(e,t){if(e.map)return e.map(t);for(var r=[],i=0;i<e.length;i++)r.push(t(e[i],i));return r}var s=Object.keys||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t}},function(e,t,r){var i=r(123),n=r(86),a=e.exports;for(var s in i)i.hasOwnProperty(s)&&(a[s]=i[s]);function o(e){if("string"===typeof e&&(e=n.parse(e)),e.protocol||(e.protocol="https:"),"https:"!==e.protocol)throw new Error('Protocol "'+e.protocol+'" not supported. Expected "https:"');return e}a.request=function(e,t){return e=o(e),i.request.call(this,e,t)},a.get=function(e,t){return e=o(e),i.get.call(this,e,t)}},function(e,t,r){"use strict";(function(e){var i=r(32).Buffer,n=r(84).Transform,a=r(226),s=r(146),o=r(124).ok,u=r(32).kMaxLength,c="Cannot create final Buffer. It would be larger than 0x"+u.toString(16)+" bytes";a.Z_MIN_WINDOWBITS=8,a.Z_MAX_WINDOWBITS=15,a.Z_DEFAULT_WINDOWBITS=15,a.Z_MIN_CHUNK=64,a.Z_MAX_CHUNK=1/0,a.Z_DEFAULT_CHUNK=16384,a.Z_MIN_MEMLEVEL=1,a.Z_MAX_MEMLEVEL=9,a.Z_DEFAULT_MEMLEVEL=8,a.Z_MIN_LEVEL=-1,a.Z_MAX_LEVEL=9,a.Z_DEFAULT_LEVEL=a.Z_DEFAULT_COMPRESSION;for(var d=Object.keys(a),h=0;h<d.length;h++){var l=d[h];l.match(/^Z/)&&Object.defineProperty(t,l,{enumerable:!0,value:a[l],writable:!1})}for(var f={Z_OK:a.Z_OK,Z_STREAM_END:a.Z_STREAM_END,Z_NEED_DICT:a.Z_NEED_DICT,Z_ERRNO:a.Z_ERRNO,Z_STREAM_ERROR:a.Z_STREAM_ERROR,Z_DATA_ERROR:a.Z_DATA_ERROR,Z_MEM_ERROR:a.Z_MEM_ERROR,Z_BUF_ERROR:a.Z_BUF_ERROR,Z_VERSION_ERROR:a.Z_VERSION_ERROR},p=Object.keys(f),v=0;v<p.length;v++){var m=p[v];f[f[m]]=m}function g(e,t,r){var n=[],a=0;function s(){for(var t;null!==(t=e.read());)n.push(t),a+=t.length;e.once("readable",s)}function o(){var t,s=null;a>=u?s=new RangeError(c):t=i.concat(n,a),n=[],e.close(),r(s,t)}e.on("error",(function(t){e.removeListener("end",o),e.removeListener("readable",s),r(t)})),e.on("end",o),e.end(t),s()}function y(e,t){if("string"===typeof t&&(t=i.from(t)),!i.isBuffer(t))throw new TypeError("Not a string or buffer");var r=e._finishFlushFlag;return e._processChunk(t,r)}function b(e){if(!(this instanceof b))return new b(e);C.call(this,e,a.DEFLATE)}function x(e){if(!(this instanceof x))return new x(e);C.call(this,e,a.INFLATE)}function k(e){if(!(this instanceof k))return new k(e);C.call(this,e,a.GZIP)}function w(e){if(!(this instanceof w))return new w(e);C.call(this,e,a.GUNZIP)}function _(e){if(!(this instanceof _))return new _(e);C.call(this,e,a.DEFLATERAW)}function S(e){if(!(this instanceof S))return new S(e);C.call(this,e,a.INFLATERAW)}function O(e){if(!(this instanceof O))return new O(e);C.call(this,e,a.UNZIP)}function T(e){return e===a.Z_NO_FLUSH||e===a.Z_PARTIAL_FLUSH||e===a.Z_SYNC_FLUSH||e===a.Z_FULL_FLUSH||e===a.Z_FINISH||e===a.Z_BLOCK}function C(e,r){var s=this;if(this._opts=e=e||{},this._chunkSize=e.chunkSize||t.Z_DEFAULT_CHUNK,n.call(this,e),e.flush&&!T(e.flush))throw new Error("Invalid flush flag: "+e.flush);if(e.finishFlush&&!T(e.finishFlush))throw new Error("Invalid flush flag: "+e.finishFlush);if(this._flushFlag=e.flush||a.Z_NO_FLUSH,this._finishFlushFlag="undefined"!==typeof e.finishFlush?e.finishFlush:a.Z_FINISH,e.chunkSize&&(e.chunkSize<t.Z_MIN_CHUNK||e.chunkSize>t.Z_MAX_CHUNK))throw new Error("Invalid chunk size: "+e.chunkSize);if(e.windowBits&&(e.windowBits<t.Z_MIN_WINDOWBITS||e.windowBits>t.Z_MAX_WINDOWBITS))throw new Error("Invalid windowBits: "+e.windowBits);if(e.level&&(e.level<t.Z_MIN_LEVEL||e.level>t.Z_MAX_LEVEL))throw new Error("Invalid compression level: "+e.level);if(e.memLevel&&(e.memLevel<t.Z_MIN_MEMLEVEL||e.memLevel>t.Z_MAX_MEMLEVEL))throw new Error("Invalid memLevel: "+e.memLevel);if(e.strategy&&e.strategy!=t.Z_FILTERED&&e.strategy!=t.Z_HUFFMAN_ONLY&&e.strategy!=t.Z_RLE&&e.strategy!=t.Z_FIXED&&e.strategy!=t.Z_DEFAULT_STRATEGY)throw new Error("Invalid strategy: "+e.strategy);if(e.dictionary&&!i.isBuffer(e.dictionary))throw new Error("Invalid dictionary: it should be a Buffer instance");this._handle=new a.Zlib(r);var o=this;this._hadError=!1,this._handle.onerror=function(e,r){I(o),o._hadError=!0;var i=new Error(e);i.errno=r,i.code=t.codes[r],o.emit("error",i)};var u=t.Z_DEFAULT_COMPRESSION;"number"===typeof e.level&&(u=e.level);var c=t.Z_DEFAULT_STRATEGY;"number"===typeof e.strategy&&(c=e.strategy),this._handle.init(e.windowBits||t.Z_DEFAULT_WINDOWBITS,u,e.memLevel||t.Z_DEFAULT_MEMLEVEL,c,e.dictionary),this._buffer=i.allocUnsafe(this._chunkSize),this._offset=0,this._level=u,this._strategy=c,this.once("end",this.close),Object.defineProperty(this,"_closed",{get:function(){return!s._handle},configurable:!0,enumerable:!0})}function I(t,r){r&&e.nextTick(r),t._handle&&(t._handle.close(),t._handle=null)}function M(e){e.emit("close")}Object.defineProperty(t,"codes",{enumerable:!0,value:Object.freeze(f),writable:!1}),t.Deflate=b,t.Inflate=x,t.Gzip=k,t.Gunzip=w,t.DeflateRaw=_,t.InflateRaw=S,t.Unzip=O,t.createDeflate=function(e){return new b(e)},t.createInflate=function(e){return new x(e)},t.createDeflateRaw=function(e){return new _(e)},t.createInflateRaw=function(e){return new S(e)},t.createGzip=function(e){return new k(e)},t.createGunzip=function(e){return new w(e)},t.createUnzip=function(e){return new O(e)},t.deflate=function(e,t,r){return"function"===typeof t&&(r=t,t={}),g(new b(t),e,r)},t.deflateSync=function(e,t){return y(new b(t),e)},t.gzip=function(e,t,r){return"function"===typeof t&&(r=t,t={}),g(new k(t),e,r)},t.gzipSync=function(e,t){return y(new k(t),e)},t.deflateRaw=function(e,t,r){return"function"===typeof t&&(r=t,t={}),g(new _(t),e,r)},t.deflateRawSync=function(e,t){return y(new _(t),e)},t.unzip=function(e,t,r){return"function"===typeof t&&(r=t,t={}),g(new O(t),e,r)},t.unzipSync=function(e,t){return y(new O(t),e)},t.inflate=function(e,t,r){return"function"===typeof t&&(r=t,t={}),g(new x(t),e,r)},t.inflateSync=function(e,t){return y(new x(t),e)},t.gunzip=function(e,t,r){return"function"===typeof t&&(r=t,t={}),g(new w(t),e,r)},t.gunzipSync=function(e,t){return y(new w(t),e)},t.inflateRaw=function(e,t,r){return"function"===typeof t&&(r=t,t={}),g(new S(t),e,r)},t.inflateRawSync=function(e,t){return y(new S(t),e)},s.inherits(C,n),C.prototype.params=function(r,i,n){if(r<t.Z_MIN_LEVEL||r>t.Z_MAX_LEVEL)throw new RangeError("Invalid compression level: "+r);if(i!=t.Z_FILTERED&&i!=t.Z_HUFFMAN_ONLY&&i!=t.Z_RLE&&i!=t.Z_FIXED&&i!=t.Z_DEFAULT_STRATEGY)throw new TypeError("Invalid strategy: "+i);if(this._level!==r||this._strategy!==i){var s=this;this.flush(a.Z_SYNC_FLUSH,(function(){o(s._handle,"zlib binding closed"),s._handle.params(r,i),s._hadError||(s._level=r,s._strategy=i,n&&n())}))}else e.nextTick(n)},C.prototype.reset=function(){return o(this._handle,"zlib binding closed"),this._handle.reset()},C.prototype._flush=function(e){this._transform(i.alloc(0),"",e)},C.prototype.flush=function(t,r){var n=this,s=this._writableState;("function"===typeof t||void 0===t&&!r)&&(r=t,t=a.Z_FULL_FLUSH),s.ended?r&&e.nextTick(r):s.ending?r&&this.once("end",r):s.needDrain?r&&this.once("drain",(function(){return n.flush(t,r)})):(this._flushFlag=t,this.write(i.alloc(0),"",r))},C.prototype.close=function(t){I(this,t),e.nextTick(M,this)},C.prototype._transform=function(e,t,r){var n,s=this._writableState,o=(s.ending||s.ended)&&(!e||s.length===e.length);return null===e||i.isBuffer(e)?this._handle?(o?n=this._finishFlushFlag:(n=this._flushFlag,e.length>=s.length&&(this._flushFlag=this._opts.flush||a.Z_NO_FLUSH)),void this._processChunk(e,n,r)):r(new Error("zlib binding closed")):r(new Error("invalid input"))},C.prototype._processChunk=function(e,t,r){var n=e&&e.length,a=this._chunkSize-this._offset,s=0,d=this,h="function"===typeof r;if(!h){var l,f=[],p=0;this.on("error",(function(e){l=e})),o(this._handle,"zlib binding closed");do{var v=this._handle.writeSync(t,e,s,n,this._buffer,this._offset,a)}while(!this._hadError&&y(v[0],v[1]));if(this._hadError)throw l;if(p>=u)throw I(this),new RangeError(c);var m=i.concat(f,p);return I(this),m}o(this._handle,"zlib binding closed");var g=this._handle.write(t,e,s,n,this._buffer,this._offset,a);function y(u,c){if(this&&(this.buffer=null,this.callback=null),!d._hadError){var l=a-c;if(o(l>=0,"have should not go down"),l>0){var v=d._buffer.slice(d._offset,d._offset+l);d._offset+=l,h?d.push(v):(f.push(v),p+=v.length)}if((0===c||d._offset>=d._chunkSize)&&(a=d._chunkSize,d._offset=0,d._buffer=i.allocUnsafe(d._chunkSize)),0===c){if(s+=n-u,n=u,!h)return!0;var m=d._handle.write(t,e,s,n,d._buffer,d._offset,d._chunkSize);return m.callback=y,void(m.buffer=e)}if(!h)return!1;r()}}g.buffer=e,g.callback=y},s.inherits(b,C),s.inherits(x,C),s.inherits(k,C),s.inherits(w,C),s.inherits(_,C),s.inherits(S,C),s.inherits(O,C)}).call(this,r(46))},function(e,t,r){"use strict";(function(e,i){var n=r(124),a=r(229),s=r(230),o=r(233),u=r(236);for(var c in u)t[c]=u[c];t.NONE=0,t.DEFLATE=1,t.INFLATE=2,t.GZIP=3,t.GUNZIP=4,t.DEFLATERAW=5,t.INFLATERAW=6,t.UNZIP=7;function d(e){if("number"!==typeof e||e<t.DEFLATE||e>t.UNZIP)throw new TypeError("Bad argument");this.dictionary=null,this.err=0,this.flush=0,this.init_done=!1,this.level=0,this.memLevel=0,this.mode=e,this.strategy=0,this.windowBits=0,this.write_in_progress=!1,this.pending_close=!1,this.gzip_id_bytes_read=0}d.prototype.close=function(){this.write_in_progress?this.pending_close=!0:(this.pending_close=!1,n(this.init_done,"close before init"),n(this.mode<=t.UNZIP),this.mode===t.DEFLATE||this.mode===t.GZIP||this.mode===t.DEFLATERAW?s.deflateEnd(this.strm):this.mode!==t.INFLATE&&this.mode!==t.GUNZIP&&this.mode!==t.INFLATERAW&&this.mode!==t.UNZIP||o.inflateEnd(this.strm),this.mode=t.NONE,this.dictionary=null)},d.prototype.write=function(e,t,r,i,n,a,s){return this._write(!0,e,t,r,i,n,a,s)},d.prototype.writeSync=function(e,t,r,i,n,a,s){return this._write(!1,e,t,r,i,n,a,s)},d.prototype._write=function(r,a,s,o,u,c,d,h){if(n.equal(arguments.length,8),n(this.init_done,"write before init"),n(this.mode!==t.NONE,"already finalized"),n.equal(!1,this.write_in_progress,"write already in progress"),n.equal(!1,this.pending_close,"close is pending"),this.write_in_progress=!0,n.equal(!1,void 0===a,"must provide flush value"),this.write_in_progress=!0,a!==t.Z_NO_FLUSH&&a!==t.Z_PARTIAL_FLUSH&&a!==t.Z_SYNC_FLUSH&&a!==t.Z_FULL_FLUSH&&a!==t.Z_FINISH&&a!==t.Z_BLOCK)throw new Error("Invalid flush value");if(null==s&&(s=e.alloc(0),u=0,o=0),this.strm.avail_in=u,this.strm.input=s,this.strm.next_in=o,this.strm.avail_out=h,this.strm.output=c,this.strm.next_out=d,this.flush=a,!r)return this._process(),this._checkError()?this._afterSync():void 0;var l=this;return i.nextTick((function(){l._process(),l._after()})),this},d.prototype._afterSync=function(){var e=this.strm.avail_out,t=this.strm.avail_in;return this.write_in_progress=!1,[t,e]},d.prototype._process=function(){var e=null;switch(this.mode){case t.DEFLATE:case t.GZIP:case t.DEFLATERAW:this.err=s.deflate(this.strm,this.flush);break;case t.UNZIP:switch(this.strm.avail_in>0&&(e=this.strm.next_in),this.gzip_id_bytes_read){case 0:if(null===e)break;if(31!==this.strm.input[e]){this.mode=t.INFLATE;break}if(this.gzip_id_bytes_read=1,e++,1===this.strm.avail_in)break;case 1:if(null===e)break;139===this.strm.input[e]?(this.gzip_id_bytes_read=2,this.mode=t.GUNZIP):this.mode=t.INFLATE;break;default:throw new Error("invalid number of gzip magic number bytes read")}case t.INFLATE:case t.GUNZIP:case t.INFLATERAW:for(this.err=o.inflate(this.strm,this.flush),this.err===t.Z_NEED_DICT&&this.dictionary&&(this.err=o.inflateSetDictionary(this.strm,this.dictionary),this.err===t.Z_OK?this.err=o.inflate(this.strm,this.flush):this.err===t.Z_DATA_ERROR&&(this.err=t.Z_NEED_DICT));this.strm.avail_in>0&&this.mode===t.GUNZIP&&this.err===t.Z_STREAM_END&&0!==this.strm.next_in[0];)this.reset(),this.err=o.inflate(this.strm,this.flush);break;default:throw new Error("Unknown mode "+this.mode)}},d.prototype._checkError=function(){switch(this.err){case t.Z_OK:case t.Z_BUF_ERROR:if(0!==this.strm.avail_out&&this.flush===t.Z_FINISH)return this._error("unexpected end of file"),!1;break;case t.Z_STREAM_END:break;case t.Z_NEED_DICT:return null==this.dictionary?this._error("Missing dictionary"):this._error("Bad dictionary"),!1;default:return this._error("Zlib error"),!1}return!0},d.prototype._after=function(){if(this._checkError()){var e=this.strm.avail_out,t=this.strm.avail_in;this.write_in_progress=!1,this.callback(t,e),this.pending_close&&this.close()}},d.prototype._error=function(e){this.strm.msg&&(e=this.strm.msg),this.onerror(e,this.err),this.write_in_progress=!1,this.pending_close&&this.close()},d.prototype.init=function(e,r,i,a,s){n(4===arguments.length||5===arguments.length,"init(windowBits, level, memLevel, strategy, [dictionary])"),n(e>=8&&e<=15,"invalid windowBits"),n(r>=-1&&r<=9,"invalid compression level"),n(i>=1&&i<=9,"invalid memlevel"),n(a===t.Z_FILTERED||a===t.Z_HUFFMAN_ONLY||a===t.Z_RLE||a===t.Z_FIXED||a===t.Z_DEFAULT_STRATEGY,"invalid strategy"),this._init(r,e,i,a,s),this._setDictionary()},d.prototype.params=function(){throw new Error("deflateParams Not supported")},d.prototype.reset=function(){this._reset(),this._setDictionary()},d.prototype._init=function(e,r,i,n,u){switch(this.level=e,this.windowBits=r,this.memLevel=i,this.strategy=n,this.flush=t.Z_NO_FLUSH,this.err=t.Z_OK,this.mode!==t.GZIP&&this.mode!==t.GUNZIP||(this.windowBits+=16),this.mode===t.UNZIP&&(this.windowBits+=32),this.mode!==t.DEFLATERAW&&this.mode!==t.INFLATERAW||(this.windowBits=-1*this.windowBits),this.strm=new a,this.mode){case t.DEFLATE:case t.GZIP:case t.DEFLATERAW:this.err=s.deflateInit2(this.strm,this.level,t.Z_DEFLATED,this.windowBits,this.memLevel,this.strategy);break;case t.INFLATE:case t.GUNZIP:case t.INFLATERAW:case t.UNZIP:this.err=o.inflateInit2(this.strm,this.windowBits);break;default:throw new Error("Unknown mode "+this.mode)}this.err!==t.Z_OK&&this._error("Init error"),this.dictionary=u,this.write_in_progress=!1,this.init_done=!0},d.prototype._setDictionary=function(){if(null!=this.dictionary){switch(this.err=t.Z_OK,this.mode){case t.DEFLATE:case t.DEFLATERAW:this.err=s.deflateSetDictionary(this.strm,this.dictionary)}this.err!==t.Z_OK&&this._error("Failed to set dictionary")}},d.prototype._reset=function(){switch(this.err=t.Z_OK,this.mode){case t.DEFLATE:case t.DEFLATERAW:case t.GZIP:this.err=s.deflateReset(this.strm);break;case t.INFLATE:case t.INFLATERAW:case t.GUNZIP:this.err=o.inflateReset(this.strm)}this.err!==t.Z_OK&&this._error("Failed to reset stream")},t.Zlib=d}).call(this,r(32).Buffer,r(46))},function(e,t){e.exports=function(e){return e&&"object"===typeof e&&"function"===typeof e.copy&&"function"===typeof e.fill&&"function"===typeof e.readUInt8}},function(e,t){"function"===typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},function(e,t,r){"use strict";e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},function(e,t,r){"use strict";var i,n=r(88),a=r(231),s=r(147),o=r(148),u=r(232),c=-2,d=258,h=262,l=103,f=113,p=666;function v(e,t){return e.msg=u[t],t}function m(e){return(e<<1)-(e>4?9:0)}function g(e){for(var t=e.length;--t>=0;)e[t]=0}function y(e){var t=e.state,r=t.pending;r>e.avail_out&&(r=e.avail_out),0!==r&&(n.arraySet(e.output,t.pending_buf,t.pending_out,r,e.next_out),e.next_out+=r,t.pending_out+=r,e.total_out+=r,e.avail_out-=r,t.pending-=r,0===t.pending&&(t.pending_out=0))}function b(e,t){a._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,y(e.strm)}function x(e,t){e.pending_buf[e.pending++]=t}function k(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function w(e,t,r,i){var a=e.avail_in;return a>i&&(a=i),0===a?0:(e.avail_in-=a,n.arraySet(t,e.input,e.next_in,a,r),1===e.state.wrap?e.adler=s(e.adler,t,a,r):2===e.state.wrap&&(e.adler=o(e.adler,t,a,r)),e.next_in+=a,e.total_in+=a,a)}function _(e,t){var r,i,n=e.max_chain_length,a=e.strstart,s=e.prev_length,o=e.nice_match,u=e.strstart>e.w_size-h?e.strstart-(e.w_size-h):0,c=e.window,l=e.w_mask,f=e.prev,p=e.strstart+d,v=c[a+s-1],m=c[a+s];e.prev_length>=e.good_match&&(n>>=2),o>e.lookahead&&(o=e.lookahead);do{if(c[(r=t)+s]===m&&c[r+s-1]===v&&c[r]===c[a]&&c[++r]===c[a+1]){a+=2,r++;do{}while(c[++a]===c[++r]&&c[++a]===c[++r]&&c[++a]===c[++r]&&c[++a]===c[++r]&&c[++a]===c[++r]&&c[++a]===c[++r]&&c[++a]===c[++r]&&c[++a]===c[++r]&&a<p);if(i=d-(p-a),a=p-d,i>s){if(e.match_start=t,s=i,i>=o)break;v=c[a+s-1],m=c[a+s]}}}while((t=f[t&l])>u&&0!==--n);return s<=e.lookahead?s:e.lookahead}function S(e){var t,r,i,a,s,o=e.w_size;do{if(a=e.window_size-e.lookahead-e.strstart,e.strstart>=o+(o-h)){n.arraySet(e.window,e.window,o,o,0),e.match_start-=o,e.strstart-=o,e.block_start-=o,t=r=e.hash_size;do{i=e.head[--t],e.head[t]=i>=o?i-o:0}while(--r);t=r=o;do{i=e.prev[--t],e.prev[t]=i>=o?i-o:0}while(--r);a+=o}if(0===e.strm.avail_in)break;if(r=w(e.strm,e.window,e.strstart+e.lookahead,a),e.lookahead+=r,e.lookahead+e.insert>=3)for(s=e.strstart-e.insert,e.ins_h=e.window[s],e.ins_h=(e.ins_h<<e.hash_shift^e.window[s+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[s+3-1])&e.hash_mask,e.prev[s&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=s,s++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<h&&0!==e.strm.avail_in)}function O(e,t){for(var r,i;;){if(e.lookahead<h){if(S(e),e.lookahead<h&&0===t)return 1;if(0===e.lookahead)break}if(r=0,e.lookahead>=3&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==r&&e.strstart-r<=e.w_size-h&&(e.match_length=_(e,r)),e.match_length>=3)if(i=a._tr_tally(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do{e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!==--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else i=a._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(i&&(b(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,4===t?(b(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(b(e,!1),0===e.strm.avail_out)?1:2}function T(e,t){for(var r,i,n;;){if(e.lookahead<h){if(S(e),e.lookahead<h&&0===t)return 1;if(0===e.lookahead)break}if(r=0,e.lookahead>=3&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==r&&e.prev_length<e.max_lazy_match&&e.strstart-r<=e.w_size-h&&(e.match_length=_(e,r),e.match_length<=5&&(1===e.strategy||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){n=e.strstart+e.lookahead-3,i=a._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=n&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!==--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,i&&(b(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if((i=a._tr_tally(e,0,e.window[e.strstart-1]))&&b(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(i=a._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,4===t?(b(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(b(e,!1),0===e.strm.avail_out)?1:2}function C(e,t,r,i,n){this.good_length=e,this.max_lazy=t,this.nice_length=r,this.max_chain=i,this.func=n}function I(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new n.Buf16(1146),this.dyn_dtree=new n.Buf16(122),this.bl_tree=new n.Buf16(78),g(this.dyn_ltree),g(this.dyn_dtree),g(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new n.Buf16(16),this.heap=new n.Buf16(573),g(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new n.Buf16(573),g(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function M(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=2,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?42:f,e.adler=2===t.wrap?0:1,t.last_flush=0,a._tr_init(t),0):v(e,c)}function A(e){var t,r=M(e);return 0===r&&((t=e.state).window_size=2*t.w_size,g(t.head),t.max_lazy_match=i[t.level].max_lazy,t.good_match=i[t.level].good_length,t.nice_match=i[t.level].nice_length,t.max_chain_length=i[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=2,t.match_available=0,t.ins_h=0),r}function E(e,t,r,i,a,s){if(!e)return c;var o=1;if(-1===t&&(t=6),i<0?(o=0,i=-i):i>15&&(o=2,i-=16),a<1||a>9||8!==r||i<8||i>15||t<0||t>9||s<0||s>4)return v(e,c);8===i&&(i=9);var u=new I;return e.state=u,u.strm=e,u.wrap=o,u.gzhead=null,u.w_bits=i,u.w_size=1<<u.w_bits,u.w_mask=u.w_size-1,u.hash_bits=a+7,u.hash_size=1<<u.hash_bits,u.hash_mask=u.hash_size-1,u.hash_shift=~~((u.hash_bits+3-1)/3),u.window=new n.Buf8(2*u.w_size),u.head=new n.Buf16(u.hash_size),u.prev=new n.Buf16(u.w_size),u.lit_bufsize=1<<a+6,u.pending_buf_size=4*u.lit_bufsize,u.pending_buf=new n.Buf8(u.pending_buf_size),u.d_buf=1*u.lit_bufsize,u.l_buf=3*u.lit_bufsize,u.level=t,u.strategy=s,u.method=r,A(e)}i=[new C(0,0,0,0,(function(e,t){var r=65535;for(r>e.pending_buf_size-5&&(r=e.pending_buf_size-5);;){if(e.lookahead<=1){if(S(e),0===e.lookahead&&0===t)return 1;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var i=e.block_start+r;if((0===e.strstart||e.strstart>=i)&&(e.lookahead=e.strstart-i,e.strstart=i,b(e,!1),0===e.strm.avail_out))return 1;if(e.strstart-e.block_start>=e.w_size-h&&(b(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(b(e,!0),0===e.strm.avail_out?3:4):(e.strstart>e.block_start&&(b(e,!1),e.strm.avail_out),1)})),new C(4,4,8,4,O),new C(4,5,16,8,O),new C(4,6,32,32,O),new C(4,4,16,16,T),new C(8,16,32,32,T),new C(8,16,128,128,T),new C(8,32,128,256,T),new C(32,128,258,1024,T),new C(32,258,258,4096,T)],t.deflateInit=function(e,t){return E(e,t,8,15,8,0)},t.deflateInit2=E,t.deflateReset=A,t.deflateResetKeep=M,t.deflateSetHeader=function(e,t){return e&&e.state?2!==e.state.wrap?c:(e.state.gzhead=t,0):c},t.deflate=function(e,t){var r,n,s,u;if(!e||!e.state||t>5||t<0)return e?v(e,c):c;if(n=e.state,!e.output||!e.input&&0!==e.avail_in||n.status===p&&4!==t)return v(e,0===e.avail_out?-5:c);if(n.strm=e,r=n.last_flush,n.last_flush=t,42===n.status)if(2===n.wrap)e.adler=0,x(n,31),x(n,139),x(n,8),n.gzhead?(x(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),x(n,255&n.gzhead.time),x(n,n.gzhead.time>>8&255),x(n,n.gzhead.time>>16&255),x(n,n.gzhead.time>>24&255),x(n,9===n.level?2:n.strategy>=2||n.level<2?4:0),x(n,255&n.gzhead.os),n.gzhead.extra&&n.gzhead.extra.length&&(x(n,255&n.gzhead.extra.length),x(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(e.adler=o(e.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=69):(x(n,0),x(n,0),x(n,0),x(n,0),x(n,0),x(n,9===n.level?2:n.strategy>=2||n.level<2?4:0),x(n,3),n.status=f);else{var h=8+(n.w_bits-8<<4)<<8;h|=(n.strategy>=2||n.level<2?0:n.level<6?1:6===n.level?2:3)<<6,0!==n.strstart&&(h|=32),h+=31-h%31,n.status=f,k(n,h),0!==n.strstart&&(k(n,e.adler>>>16),k(n,65535&e.adler)),e.adler=1}if(69===n.status)if(n.gzhead.extra){for(s=n.pending;n.gzindex<(65535&n.gzhead.extra.length)&&(n.pending!==n.pending_buf_size||(n.gzhead.hcrc&&n.pending>s&&(e.adler=o(e.adler,n.pending_buf,n.pending-s,s)),y(e),s=n.pending,n.pending!==n.pending_buf_size));)x(n,255&n.gzhead.extra[n.gzindex]),n.gzindex++;n.gzhead.hcrc&&n.pending>s&&(e.adler=o(e.adler,n.pending_buf,n.pending-s,s)),n.gzindex===n.gzhead.extra.length&&(n.gzindex=0,n.status=73)}else n.status=73;if(73===n.status)if(n.gzhead.name){s=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>s&&(e.adler=o(e.adler,n.pending_buf,n.pending-s,s)),y(e),s=n.pending,n.pending===n.pending_buf_size)){u=1;break}u=n.gzindex<n.gzhead.name.length?255&n.gzhead.name.charCodeAt(n.gzindex++):0,x(n,u)}while(0!==u);n.gzhead.hcrc&&n.pending>s&&(e.adler=o(e.adler,n.pending_buf,n.pending-s,s)),0===u&&(n.gzindex=0,n.status=91)}else n.status=91;if(91===n.status)if(n.gzhead.comment){s=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>s&&(e.adler=o(e.adler,n.pending_buf,n.pending-s,s)),y(e),s=n.pending,n.pending===n.pending_buf_size)){u=1;break}u=n.gzindex<n.gzhead.comment.length?255&n.gzhead.comment.charCodeAt(n.gzindex++):0,x(n,u)}while(0!==u);n.gzhead.hcrc&&n.pending>s&&(e.adler=o(e.adler,n.pending_buf,n.pending-s,s)),0===u&&(n.status=l)}else n.status=l;if(n.status===l&&(n.gzhead.hcrc?(n.pending+2>n.pending_buf_size&&y(e),n.pending+2<=n.pending_buf_size&&(x(n,255&e.adler),x(n,e.adler>>8&255),e.adler=0,n.status=f)):n.status=f),0!==n.pending){if(y(e),0===e.avail_out)return n.last_flush=-1,0}else if(0===e.avail_in&&m(t)<=m(r)&&4!==t)return v(e,-5);if(n.status===p&&0!==e.avail_in)return v(e,-5);if(0!==e.avail_in||0!==n.lookahead||0!==t&&n.status!==p){var w=2===n.strategy?function(e,t){for(var r;;){if(0===e.lookahead&&(S(e),0===e.lookahead)){if(0===t)return 1;break}if(e.match_length=0,r=a._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,r&&(b(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(b(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(b(e,!1),0===e.strm.avail_out)?1:2}(n,t):3===n.strategy?function(e,t){for(var r,i,n,s,o=e.window;;){if(e.lookahead<=d){if(S(e),e.lookahead<=d&&0===t)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(i=o[n=e.strstart-1])===o[++n]&&i===o[++n]&&i===o[++n]){s=e.strstart+d;do{}while(i===o[++n]&&i===o[++n]&&i===o[++n]&&i===o[++n]&&i===o[++n]&&i===o[++n]&&i===o[++n]&&i===o[++n]&&n<s);e.match_length=d-(s-n),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(r=a._tr_tally(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(r=a._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),r&&(b(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(b(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(b(e,!1),0===e.strm.avail_out)?1:2}(n,t):i[n.level].func(n,t);if(3!==w&&4!==w||(n.status=p),1===w||3===w)return 0===e.avail_out&&(n.last_flush=-1),0;if(2===w&&(1===t?a._tr_align(n):5!==t&&(a._tr_stored_block(n,0,0,!1),3===t&&(g(n.head),0===n.lookahead&&(n.strstart=0,n.block_start=0,n.insert=0))),y(e),0===e.avail_out))return n.last_flush=-1,0}return 4!==t?0:n.wrap<=0?1:(2===n.wrap?(x(n,255&e.adler),x(n,e.adler>>8&255),x(n,e.adler>>16&255),x(n,e.adler>>24&255),x(n,255&e.total_in),x(n,e.total_in>>8&255),x(n,e.total_in>>16&255),x(n,e.total_in>>24&255)):(k(n,e.adler>>>16),k(n,65535&e.adler)),y(e),n.wrap>0&&(n.wrap=-n.wrap),0!==n.pending?0:1)},t.deflateEnd=function(e){var t;return e&&e.state?42!==(t=e.state.status)&&69!==t&&73!==t&&91!==t&&t!==l&&t!==f&&t!==p?v(e,c):(e.state=null,t===f?v(e,-3):0):c},t.deflateSetDictionary=function(e,t){var r,i,a,o,u,d,h,l,f=t.length;if(!e||!e.state)return c;if(2===(o=(r=e.state).wrap)||1===o&&42!==r.status||r.lookahead)return c;for(1===o&&(e.adler=s(e.adler,t,f,0)),r.wrap=0,f>=r.w_size&&(0===o&&(g(r.head),r.strstart=0,r.block_start=0,r.insert=0),l=new n.Buf8(r.w_size),n.arraySet(l,t,f-r.w_size,r.w_size,0),t=l,f=r.w_size),u=e.avail_in,d=e.next_in,h=e.input,e.avail_in=f,e.next_in=0,e.input=t,S(r);r.lookahead>=3;){i=r.strstart,a=r.lookahead-2;do{r.ins_h=(r.ins_h<<r.hash_shift^r.window[i+3-1])&r.hash_mask,r.prev[i&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=i,i++}while(--a);r.strstart=i,r.lookahead=2,S(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=2,r.match_available=0,e.next_in=d,e.input=h,e.avail_in=u,r.wrap=o,0},t.deflateInfo="pako deflate (from Nodeca project)"},function(e,t,r){"use strict";var i=r(88);function n(e){for(var t=e.length;--t>=0;)e[t]=0}var a=256,s=286,o=30,u=15,c=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],d=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],h=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],l=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],f=new Array(576);n(f);var p=new Array(60);n(p);var v=new Array(512);n(v);var m=new Array(256);n(m);var g=new Array(29);n(g);var y,b,x,k=new Array(o);function w(e,t,r,i,n){this.static_tree=e,this.extra_bits=t,this.extra_base=r,this.elems=i,this.max_length=n,this.has_stree=e&&e.length}function _(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function S(e){return e<256?v[e]:v[256+(e>>>7)]}function O(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function T(e,t,r){e.bi_valid>16-r?(e.bi_buf|=t<<e.bi_valid&65535,O(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=r-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=r)}function C(e,t,r){T(e,r[2*t],r[2*t+1])}function I(e,t){var r=0;do{r|=1&e,e>>>=1,r<<=1}while(--t>0);return r>>>1}function M(e,t,r){var i,n,a=new Array(16),s=0;for(i=1;i<=u;i++)a[i]=s=s+r[i-1]<<1;for(n=0;n<=t;n++){var o=e[2*n+1];0!==o&&(e[2*n]=I(a[o]++,o))}}function A(e){var t;for(t=0;t<s;t++)e.dyn_ltree[2*t]=0;for(t=0;t<o;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function E(e){e.bi_valid>8?O(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function N(e,t,r,i){var n=2*t,a=2*r;return e[n]<e[a]||e[n]===e[a]&&i[t]<=i[r]}function P(e,t,r){for(var i=e.heap[r],n=r<<1;n<=e.heap_len&&(n<e.heap_len&&N(t,e.heap[n+1],e.heap[n],e.depth)&&n++,!N(t,i,e.heap[n],e.depth));)e.heap[r]=e.heap[n],r=n,n<<=1;e.heap[r]=i}function D(e,t,r){var i,n,s,o,u=0;if(0!==e.last_lit)do{i=e.pending_buf[e.d_buf+2*u]<<8|e.pending_buf[e.d_buf+2*u+1],n=e.pending_buf[e.l_buf+u],u++,0===i?C(e,n,t):(C(e,(s=m[n])+a+1,t),0!==(o=c[s])&&T(e,n-=g[s],o),C(e,s=S(--i),r),0!==(o=d[s])&&T(e,i-=k[s],o))}while(u<e.last_lit);C(e,256,t)}function L(e,t){var r,i,n,a=t.dyn_tree,s=t.stat_desc.static_tree,o=t.stat_desc.has_stree,c=t.stat_desc.elems,d=-1;for(e.heap_len=0,e.heap_max=573,r=0;r<c;r++)0!==a[2*r]?(e.heap[++e.heap_len]=d=r,e.depth[r]=0):a[2*r+1]=0;for(;e.heap_len<2;)a[2*(n=e.heap[++e.heap_len]=d<2?++d:0)]=1,e.depth[n]=0,e.opt_len--,o&&(e.static_len-=s[2*n+1]);for(t.max_code=d,r=e.heap_len>>1;r>=1;r--)P(e,a,r);n=c;do{r=e.heap[1],e.heap[1]=e.heap[e.heap_len--],P(e,a,1),i=e.heap[1],e.heap[--e.heap_max]=r,e.heap[--e.heap_max]=i,a[2*n]=a[2*r]+a[2*i],e.depth[n]=(e.depth[r]>=e.depth[i]?e.depth[r]:e.depth[i])+1,a[2*r+1]=a[2*i+1]=n,e.heap[1]=n++,P(e,a,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],function(e,t){var r,i,n,a,s,o,c=t.dyn_tree,d=t.max_code,h=t.stat_desc.static_tree,l=t.stat_desc.has_stree,f=t.stat_desc.extra_bits,p=t.stat_desc.extra_base,v=t.stat_desc.max_length,m=0;for(a=0;a<=u;a++)e.bl_count[a]=0;for(c[2*e.heap[e.heap_max]+1]=0,r=e.heap_max+1;r<573;r++)(a=c[2*c[2*(i=e.heap[r])+1]+1]+1)>v&&(a=v,m++),c[2*i+1]=a,i>d||(e.bl_count[a]++,s=0,i>=p&&(s=f[i-p]),o=c[2*i],e.opt_len+=o*(a+s),l&&(e.static_len+=o*(h[2*i+1]+s)));if(0!==m){do{for(a=v-1;0===e.bl_count[a];)a--;e.bl_count[a]--,e.bl_count[a+1]+=2,e.bl_count[v]--,m-=2}while(m>0);for(a=v;0!==a;a--)for(i=e.bl_count[a];0!==i;)(n=e.heap[--r])>d||(c[2*n+1]!==a&&(e.opt_len+=(a-c[2*n+1])*c[2*n],c[2*n+1]=a),i--)}}(e,t),M(a,d,e.bl_count)}function B(e,t,r){var i,n,a=-1,s=t[1],o=0,u=7,c=4;for(0===s&&(u=138,c=3),t[2*(r+1)+1]=65535,i=0;i<=r;i++)n=s,s=t[2*(i+1)+1],++o<u&&n===s||(o<c?e.bl_tree[2*n]+=o:0!==n?(n!==a&&e.bl_tree[2*n]++,e.bl_tree[32]++):o<=10?e.bl_tree[34]++:e.bl_tree[36]++,o=0,a=n,0===s?(u=138,c=3):n===s?(u=6,c=3):(u=7,c=4))}function R(e,t,r){var i,n,a=-1,s=t[1],o=0,u=7,c=4;for(0===s&&(u=138,c=3),i=0;i<=r;i++)if(n=s,s=t[2*(i+1)+1],!(++o<u&&n===s)){if(o<c)do{C(e,n,e.bl_tree)}while(0!==--o);else 0!==n?(n!==a&&(C(e,n,e.bl_tree),o--),C(e,16,e.bl_tree),T(e,o-3,2)):o<=10?(C(e,17,e.bl_tree),T(e,o-3,3)):(C(e,18,e.bl_tree),T(e,o-11,7));o=0,a=n,0===s?(u=138,c=3):n===s?(u=6,c=3):(u=7,c=4)}}n(k);var V=!1;function G(e,t,r,n){T(e,0+(n?1:0),3),function(e,t,r,n){E(e),n&&(O(e,r),O(e,~r)),i.arraySet(e.pending_buf,e.window,t,r,e.pending),e.pending+=r}(e,t,r,!0)}t._tr_init=function(e){V||(!function(){var e,t,r,i,n,a=new Array(16);for(r=0,i=0;i<28;i++)for(g[i]=r,e=0;e<1<<c[i];e++)m[r++]=i;for(m[r-1]=i,n=0,i=0;i<16;i++)for(k[i]=n,e=0;e<1<<d[i];e++)v[n++]=i;for(n>>=7;i<o;i++)for(k[i]=n<<7,e=0;e<1<<d[i]-7;e++)v[256+n++]=i;for(t=0;t<=u;t++)a[t]=0;for(e=0;e<=143;)f[2*e+1]=8,e++,a[8]++;for(;e<=255;)f[2*e+1]=9,e++,a[9]++;for(;e<=279;)f[2*e+1]=7,e++,a[7]++;for(;e<=287;)f[2*e+1]=8,e++,a[8]++;for(M(f,287,a),e=0;e<o;e++)p[2*e+1]=5,p[2*e]=I(e,5);y=new w(f,c,257,s,u),b=new w(p,d,0,o,u),x=new w(new Array(0),h,0,19,7)}(),V=!0),e.l_desc=new _(e.dyn_ltree,y),e.d_desc=new _(e.dyn_dtree,b),e.bl_desc=new _(e.bl_tree,x),e.bi_buf=0,e.bi_valid=0,A(e)},t._tr_stored_block=G,t._tr_flush_block=function(e,t,r,i){var n,s,o=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=function(e){var t,r=4093624447;for(t=0;t<=31;t++,r>>>=1)if(1&r&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<a;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0}(e)),L(e,e.l_desc),L(e,e.d_desc),o=function(e){var t;for(B(e,e.dyn_ltree,e.l_desc.max_code),B(e,e.dyn_dtree,e.d_desc.max_code),L(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*l[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),n=e.opt_len+3+7>>>3,(s=e.static_len+3+7>>>3)<=n&&(n=s)):n=s=r+5,r+4<=n&&-1!==t?G(e,t,r,i):4===e.strategy||s===n?(T(e,2+(i?1:0),3),D(e,f,p)):(T(e,4+(i?1:0),3),function(e,t,r,i){var n;for(T(e,t-257,5),T(e,r-1,5),T(e,i-4,4),n=0;n<i;n++)T(e,e.bl_tree[2*l[n]+1],3);R(e,e.dyn_ltree,t-1),R(e,e.dyn_dtree,r-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,o+1),D(e,e.dyn_ltree,e.dyn_dtree)),A(e),i&&E(e)},t._tr_tally=function(e,t,r){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&r,e.last_lit++,0===t?e.dyn_ltree[2*r]++:(e.matches++,t--,e.dyn_ltree[2*(m[r]+a+1)]++,e.dyn_dtree[2*S(t)]++),e.last_lit===e.lit_bufsize-1},t._tr_align=function(e){T(e,2,3),C(e,256,f),function(e){16===e.bi_valid?(O(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(e)}},function(e,t,r){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},function(e,t,r){"use strict";var i=r(88),n=r(147),a=r(148),s=r(234),o=r(235),u=-2,c=12,d=30;function h(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function l(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function f(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=1,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new i.Buf32(852),t.distcode=t.distdyn=new i.Buf32(592),t.sane=1,t.back=-1,0):u}function p(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,f(e)):u}function v(e,t){var r,i;return e&&e.state?(i=e.state,t<0?(r=0,t=-t):(r=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?u:(null!==i.window&&i.wbits!==t&&(i.window=null),i.wrap=r,i.wbits=t,p(e))):u}function m(e,t){var r,i;return e?(i=new l,e.state=i,i.window=null,0!==(r=v(e,t))&&(e.state=null),r):u}var g,y,b=!0;function x(e){if(b){var t;for(g=new i.Buf32(512),y=new i.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(o(1,e.lens,0,288,g,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;o(2,e.lens,0,32,y,0,e.work,{bits:5}),b=!1}e.lencode=g,e.lenbits=9,e.distcode=y,e.distbits=5}function k(e,t,r,n){var a,s=e.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new i.Buf8(s.wsize)),n>=s.wsize?(i.arraySet(s.window,t,r-s.wsize,s.wsize,0),s.wnext=0,s.whave=s.wsize):((a=s.wsize-s.wnext)>n&&(a=n),i.arraySet(s.window,t,r-n,a,s.wnext),(n-=a)?(i.arraySet(s.window,t,r-n,n,0),s.wnext=n,s.whave=s.wsize):(s.wnext+=a,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=a))),0}t.inflateReset=p,t.inflateReset2=v,t.inflateResetKeep=f,t.inflateInit=function(e){return m(e,15)},t.inflateInit2=m,t.inflate=function(e,t){var r,l,f,p,v,m,g,y,b,w,_,S,O,T,C,I,M,A,E,N,P,D,L,B,R=0,V=new i.Buf8(4),G=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return u;(r=e.state).mode===c&&(r.mode=13),v=e.next_out,f=e.output,g=e.avail_out,p=e.next_in,l=e.input,m=e.avail_in,y=r.hold,b=r.bits,w=m,_=g,D=0;e:for(;;)switch(r.mode){case 1:if(0===r.wrap){r.mode=13;break}for(;b<16;){if(0===m)break e;m--,y+=l[p++]<<b,b+=8}if(2&r.wrap&&35615===y){r.check=0,V[0]=255&y,V[1]=y>>>8&255,r.check=a(r.check,V,2,0),y=0,b=0,r.mode=2;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&y)<<8)+(y>>8))%31){e.msg="incorrect header check",r.mode=d;break}if(8!==(15&y)){e.msg="unknown compression method",r.mode=d;break}if(b-=4,P=8+(15&(y>>>=4)),0===r.wbits)r.wbits=P;else if(P>r.wbits){e.msg="invalid window size",r.mode=d;break}r.dmax=1<<P,e.adler=r.check=1,r.mode=512&y?10:c,y=0,b=0;break;case 2:for(;b<16;){if(0===m)break e;m--,y+=l[p++]<<b,b+=8}if(r.flags=y,8!==(255&r.flags)){e.msg="unknown compression method",r.mode=d;break}if(57344&r.flags){e.msg="unknown header flags set",r.mode=d;break}r.head&&(r.head.text=y>>8&1),512&r.flags&&(V[0]=255&y,V[1]=y>>>8&255,r.check=a(r.check,V,2,0)),y=0,b=0,r.mode=3;case 3:for(;b<32;){if(0===m)break e;m--,y+=l[p++]<<b,b+=8}r.head&&(r.head.time=y),512&r.flags&&(V[0]=255&y,V[1]=y>>>8&255,V[2]=y>>>16&255,V[3]=y>>>24&255,r.check=a(r.check,V,4,0)),y=0,b=0,r.mode=4;case 4:for(;b<16;){if(0===m)break e;m--,y+=l[p++]<<b,b+=8}r.head&&(r.head.xflags=255&y,r.head.os=y>>8),512&r.flags&&(V[0]=255&y,V[1]=y>>>8&255,r.check=a(r.check,V,2,0)),y=0,b=0,r.mode=5;case 5:if(1024&r.flags){for(;b<16;){if(0===m)break e;m--,y+=l[p++]<<b,b+=8}r.length=y,r.head&&(r.head.extra_len=y),512&r.flags&&(V[0]=255&y,V[1]=y>>>8&255,r.check=a(r.check,V,2,0)),y=0,b=0}else r.head&&(r.head.extra=null);r.mode=6;case 6:if(1024&r.flags&&((S=r.length)>m&&(S=m),S&&(r.head&&(P=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),i.arraySet(r.head.extra,l,p,S,P)),512&r.flags&&(r.check=a(r.check,l,S,p)),m-=S,p+=S,r.length-=S),r.length))break e;r.length=0,r.mode=7;case 7:if(2048&r.flags){if(0===m)break e;S=0;do{P=l[p+S++],r.head&&P&&r.length<65536&&(r.head.name+=String.fromCharCode(P))}while(P&&S<m);if(512&r.flags&&(r.check=a(r.check,l,S,p)),m-=S,p+=S,P)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=8;case 8:if(4096&r.flags){if(0===m)break e;S=0;do{P=l[p+S++],r.head&&P&&r.length<65536&&(r.head.comment+=String.fromCharCode(P))}while(P&&S<m);if(512&r.flags&&(r.check=a(r.check,l,S,p)),m-=S,p+=S,P)break e}else r.head&&(r.head.comment=null);r.mode=9;case 9:if(512&r.flags){for(;b<16;){if(0===m)break e;m--,y+=l[p++]<<b,b+=8}if(y!==(65535&r.check)){e.msg="header crc mismatch",r.mode=d;break}y=0,b=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=c;break;case 10:for(;b<32;){if(0===m)break e;m--,y+=l[p++]<<b,b+=8}e.adler=r.check=h(y),y=0,b=0,r.mode=11;case 11:if(0===r.havedict)return e.next_out=v,e.avail_out=g,e.next_in=p,e.avail_in=m,r.hold=y,r.bits=b,2;e.adler=r.check=1,r.mode=c;case c:if(5===t||6===t)break e;case 13:if(r.last){y>>>=7&b,b-=7&b,r.mode=27;break}for(;b<3;){if(0===m)break e;m--,y+=l[p++]<<b,b+=8}switch(r.last=1&y,b-=1,3&(y>>>=1)){case 0:r.mode=14;break;case 1:if(x(r),r.mode=20,6===t){y>>>=2,b-=2;break e}break;case 2:r.mode=17;break;case 3:e.msg="invalid block type",r.mode=d}y>>>=2,b-=2;break;case 14:for(y>>>=7&b,b-=7&b;b<32;){if(0===m)break e;m--,y+=l[p++]<<b,b+=8}if((65535&y)!==(y>>>16^65535)){e.msg="invalid stored block lengths",r.mode=d;break}if(r.length=65535&y,y=0,b=0,r.mode=15,6===t)break e;case 15:r.mode=16;case 16:if(S=r.length){if(S>m&&(S=m),S>g&&(S=g),0===S)break e;i.arraySet(f,l,p,S,v),m-=S,p+=S,g-=S,v+=S,r.length-=S;break}r.mode=c;break;case 17:for(;b<14;){if(0===m)break e;m--,y+=l[p++]<<b,b+=8}if(r.nlen=257+(31&y),y>>>=5,b-=5,r.ndist=1+(31&y),y>>>=5,b-=5,r.ncode=4+(15&y),y>>>=4,b-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=d;break}r.have=0,r.mode=18;case 18:for(;r.have<r.ncode;){for(;b<3;){if(0===m)break e;m--,y+=l[p++]<<b,b+=8}r.lens[G[r.have++]]=7&y,y>>>=3,b-=3}for(;r.have<19;)r.lens[G[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,L={bits:r.lenbits},D=o(0,r.lens,0,19,r.lencode,0,r.work,L),r.lenbits=L.bits,D){e.msg="invalid code lengths set",r.mode=d;break}r.have=0,r.mode=19;case 19:for(;r.have<r.nlen+r.ndist;){for(;I=(R=r.lencode[y&(1<<r.lenbits)-1])>>>16&255,M=65535&R,!((C=R>>>24)<=b);){if(0===m)break e;m--,y+=l[p++]<<b,b+=8}if(M<16)y>>>=C,b-=C,r.lens[r.have++]=M;else{if(16===M){for(B=C+2;b<B;){if(0===m)break e;m--,y+=l[p++]<<b,b+=8}if(y>>>=C,b-=C,0===r.have){e.msg="invalid bit length repeat",r.mode=d;break}P=r.lens[r.have-1],S=3+(3&y),y>>>=2,b-=2}else if(17===M){for(B=C+3;b<B;){if(0===m)break e;m--,y+=l[p++]<<b,b+=8}b-=C,P=0,S=3+(7&(y>>>=C)),y>>>=3,b-=3}else{for(B=C+7;b<B;){if(0===m)break e;m--,y+=l[p++]<<b,b+=8}b-=C,P=0,S=11+(127&(y>>>=C)),y>>>=7,b-=7}if(r.have+S>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=d;break}for(;S--;)r.lens[r.have++]=P}}if(r.mode===d)break;if(0===r.lens[256]){e.msg="invalid code -- missing end-of-block",r.mode=d;break}if(r.lenbits=9,L={bits:r.lenbits},D=o(1,r.lens,0,r.nlen,r.lencode,0,r.work,L),r.lenbits=L.bits,D){e.msg="invalid literal/lengths set",r.mode=d;break}if(r.distbits=6,r.distcode=r.distdyn,L={bits:r.distbits},D=o(2,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,L),r.distbits=L.bits,D){e.msg="invalid distances set",r.mode=d;break}if(r.mode=20,6===t)break e;case 20:r.mode=21;case 21:if(m>=6&&g>=258){e.next_out=v,e.avail_out=g,e.next_in=p,e.avail_in=m,r.hold=y,r.bits=b,s(e,_),v=e.next_out,f=e.output,g=e.avail_out,p=e.next_in,l=e.input,m=e.avail_in,y=r.hold,b=r.bits,r.mode===c&&(r.back=-1);break}for(r.back=0;I=(R=r.lencode[y&(1<<r.lenbits)-1])>>>16&255,M=65535&R,!((C=R>>>24)<=b);){if(0===m)break e;m--,y+=l[p++]<<b,b+=8}if(I&&0===(240&I)){for(A=C,E=I,N=M;I=(R=r.lencode[N+((y&(1<<A+E)-1)>>A)])>>>16&255,M=65535&R,!(A+(C=R>>>24)<=b);){if(0===m)break e;m--,y+=l[p++]<<b,b+=8}y>>>=A,b-=A,r.back+=A}if(y>>>=C,b-=C,r.back+=C,r.length=M,0===I){r.mode=26;break}if(32&I){r.back=-1,r.mode=c;break}if(64&I){e.msg="invalid literal/length code",r.mode=d;break}r.extra=15&I,r.mode=22;case 22:if(r.extra){for(B=r.extra;b<B;){if(0===m)break e;m--,y+=l[p++]<<b,b+=8}r.length+=y&(1<<r.extra)-1,y>>>=r.extra,b-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=23;case 23:for(;I=(R=r.distcode[y&(1<<r.distbits)-1])>>>16&255,M=65535&R,!((C=R>>>24)<=b);){if(0===m)break e;m--,y+=l[p++]<<b,b+=8}if(0===(240&I)){for(A=C,E=I,N=M;I=(R=r.distcode[N+((y&(1<<A+E)-1)>>A)])>>>16&255,M=65535&R,!(A+(C=R>>>24)<=b);){if(0===m)break e;m--,y+=l[p++]<<b,b+=8}y>>>=A,b-=A,r.back+=A}if(y>>>=C,b-=C,r.back+=C,64&I){e.msg="invalid distance code",r.mode=d;break}r.offset=M,r.extra=15&I,r.mode=24;case 24:if(r.extra){for(B=r.extra;b<B;){if(0===m)break e;m--,y+=l[p++]<<b,b+=8}r.offset+=y&(1<<r.extra)-1,y>>>=r.extra,b-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=d;break}r.mode=25;case 25:if(0===g)break e;if(S=_-g,r.offset>S){if((S=r.offset-S)>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=d;break}S>r.wnext?(S-=r.wnext,O=r.wsize-S):O=r.wnext-S,S>r.length&&(S=r.length),T=r.window}else T=f,O=v-r.offset,S=r.length;S>g&&(S=g),g-=S,r.length-=S;do{f[v++]=T[O++]}while(--S);0===r.length&&(r.mode=21);break;case 26:if(0===g)break e;f[v++]=r.length,g--,r.mode=21;break;case 27:if(r.wrap){for(;b<32;){if(0===m)break e;m--,y|=l[p++]<<b,b+=8}if(_-=g,e.total_out+=_,r.total+=_,_&&(e.adler=r.check=r.flags?a(r.check,f,_,v-_):n(r.check,f,_,v-_)),_=g,(r.flags?y:h(y))!==r.check){e.msg="incorrect data check",r.mode=d;break}y=0,b=0}r.mode=28;case 28:if(r.wrap&&r.flags){for(;b<32;){if(0===m)break e;m--,y+=l[p++]<<b,b+=8}if(y!==(4294967295&r.total)){e.msg="incorrect length check",r.mode=d;break}y=0,b=0}r.mode=29;case 29:D=1;break e;case d:D=-3;break e;case 31:return-4;case 32:default:return u}return e.next_out=v,e.avail_out=g,e.next_in=p,e.avail_in=m,r.hold=y,r.bits=b,(r.wsize||_!==e.avail_out&&r.mode<d&&(r.mode<27||4!==t))&&k(e,e.output,e.next_out,_-e.avail_out)?(r.mode=31,-4):(w-=e.avail_in,_-=e.avail_out,e.total_in+=w,e.total_out+=_,r.total+=_,r.wrap&&_&&(e.adler=r.check=r.flags?a(r.check,f,_,e.next_out-_):n(r.check,f,_,e.next_out-_)),e.data_type=r.bits+(r.last?64:0)+(r.mode===c?128:0)+(20===r.mode||15===r.mode?256:0),(0===w&&0===_||4===t)&&0===D&&(D=-5),D)},t.inflateEnd=function(e){if(!e||!e.state)return u;var t=e.state;return t.window&&(t.window=null),e.state=null,0},t.inflateGetHeader=function(e,t){var r;return e&&e.state?0===(2&(r=e.state).wrap)?u:(r.head=t,t.done=!1,0):u},t.inflateSetDictionary=function(e,t){var r,i=t.length;return e&&e.state?0!==(r=e.state).wrap&&11!==r.mode?u:11===r.mode&&n(1,t,i,0)!==r.check?-3:k(e,t,i,i)?(r.mode=31,-4):(r.havedict=1,0):u},t.inflateInfo="pako inflate (from Nodeca project)"},function(e,t,r){"use strict";e.exports=function(e,t){var r,i,n,a,s,o,u,c,d,h,l,f,p,v,m,g,y,b,x,k,w,_,S,O,T;r=e.state,i=e.next_in,O=e.input,n=i+(e.avail_in-5),a=e.next_out,T=e.output,s=a-(t-e.avail_out),o=a+(e.avail_out-257),u=r.dmax,c=r.wsize,d=r.whave,h=r.wnext,l=r.window,f=r.hold,p=r.bits,v=r.lencode,m=r.distcode,g=(1<<r.lenbits)-1,y=(1<<r.distbits)-1;e:do{p<15&&(f+=O[i++]<<p,p+=8,f+=O[i++]<<p,p+=8),b=v[f&g];t:for(;;){if(f>>>=x=b>>>24,p-=x,0===(x=b>>>16&255))T[a++]=65535&b;else{if(!(16&x)){if(0===(64&x)){b=v[(65535&b)+(f&(1<<x)-1)];continue t}if(32&x){r.mode=12;break e}e.msg="invalid literal/length code",r.mode=30;break e}k=65535&b,(x&=15)&&(p<x&&(f+=O[i++]<<p,p+=8),k+=f&(1<<x)-1,f>>>=x,p-=x),p<15&&(f+=O[i++]<<p,p+=8,f+=O[i++]<<p,p+=8),b=m[f&y];r:for(;;){if(f>>>=x=b>>>24,p-=x,!(16&(x=b>>>16&255))){if(0===(64&x)){b=m[(65535&b)+(f&(1<<x)-1)];continue r}e.msg="invalid distance code",r.mode=30;break e}if(w=65535&b,p<(x&=15)&&(f+=O[i++]<<p,(p+=8)<x&&(f+=O[i++]<<p,p+=8)),(w+=f&(1<<x)-1)>u){e.msg="invalid distance too far back",r.mode=30;break e}if(f>>>=x,p-=x,w>(x=a-s)){if((x=w-x)>d&&r.sane){e.msg="invalid distance too far back",r.mode=30;break e}if(_=0,S=l,0===h){if(_+=c-x,x<k){k-=x;do{T[a++]=l[_++]}while(--x);_=a-w,S=T}}else if(h<x){if(_+=c+h-x,(x-=h)<k){k-=x;do{T[a++]=l[_++]}while(--x);if(_=0,h<k){k-=x=h;do{T[a++]=l[_++]}while(--x);_=a-w,S=T}}}else if(_+=h-x,x<k){k-=x;do{T[a++]=l[_++]}while(--x);_=a-w,S=T}for(;k>2;)T[a++]=S[_++],T[a++]=S[_++],T[a++]=S[_++],k-=3;k&&(T[a++]=S[_++],k>1&&(T[a++]=S[_++]))}else{_=a-w;do{T[a++]=T[_++],T[a++]=T[_++],T[a++]=T[_++],k-=3}while(k>2);k&&(T[a++]=T[_++],k>1&&(T[a++]=T[_++]))}break}}break}}while(i<n&&a<o);i-=k=p>>3,f&=(1<<(p-=k<<3))-1,e.next_in=i,e.next_out=a,e.avail_in=i<n?n-i+5:5-(i-n),e.avail_out=a<o?o-a+257:257-(a-o),r.hold=f,r.bits=p}},function(e,t,r){"use strict";var i=r(88),n=15,a=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],s=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],o=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],u=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(e,t,r,c,d,h,l,f){var p,v,m,g,y,b,x,k,w,_=f.bits,S=0,O=0,T=0,C=0,I=0,M=0,A=0,E=0,N=0,P=0,D=null,L=0,B=new i.Buf16(16),R=new i.Buf16(16),V=null,G=0;for(S=0;S<=n;S++)B[S]=0;for(O=0;O<c;O++)B[t[r+O]]++;for(I=_,C=n;C>=1&&0===B[C];C--);if(I>C&&(I=C),0===C)return d[h++]=20971520,d[h++]=20971520,f.bits=1,0;for(T=1;T<C&&0===B[T];T++);for(I<T&&(I=T),E=1,S=1;S<=n;S++)if(E<<=1,(E-=B[S])<0)return-1;if(E>0&&(0===e||1!==C))return-1;for(R[1]=0,S=1;S<n;S++)R[S+1]=R[S]+B[S];for(O=0;O<c;O++)0!==t[r+O]&&(l[R[t[r+O]]++]=O);if(0===e?(D=V=l,b=19):1===e?(D=a,L-=257,V=s,G-=257,b=256):(D=o,V=u,b=-1),P=0,O=0,S=T,y=h,M=I,A=0,m=-1,g=(N=1<<I)-1,1===e&&N>852||2===e&&N>592)return 1;for(;;){x=S-A,l[O]<b?(k=0,w=l[O]):l[O]>b?(k=V[G+l[O]],w=D[L+l[O]]):(k=96,w=0),p=1<<S-A,T=v=1<<M;do{d[y+(P>>A)+(v-=p)]=x<<24|k<<16|w|0}while(0!==v);for(p=1<<S-1;P&p;)p>>=1;if(0!==p?(P&=p-1,P+=p):P=0,O++,0===--B[S]){if(S===C)break;S=t[r+l[O]]}if(S>I&&(P&g)!==m){for(0===A&&(A=I),y+=T,E=1<<(M=S-A);M+A<C&&!((E-=B[M+A])<=0);)M++,E<<=1;if(N+=1<<M,1===e&&N>852||2===e&&N>592)return 1;d[m=P&g]=I<<24|M<<16|y-h|0}}return 0!==P&&(d[y+P]=S-A<<24|64<<16|0),f.bits=I,0}},function(e,t,r){"use strict";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(e,t,r){"use strict";var i=r(137),n=r(149),a=(n.isObject,n.isNumber),s=n.isDictionary,o=n.isArray,u=Object.keys,c=function(e){return o(e)?e:Object.values(e)},d=function(e){return new Set(c(e))},h=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Object.assign.apply(Object,[{}].concat(t))},l=function(e){return o(e)?Array.from(e):h(e)};e.exports={keys:u,values:c,extend:h,clone:l,index:d,ordered:function(e){return e},unique:function(e){return Array.from(d(e))},arrayConcat:function(e,t){return e.concat(t)},inArray:function(e,t){return t.includes(e)},toArray:function(e){return Object.values(e)},isEmpty:function(e){return!e||(Array.isArray(e)?e:Object.keys(e)).length<1},keysort:function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=i(u(e).sort());try{for(n.s();!(t=n.n()).done;){var a=t.value;r[a]=e[a]}}catch(s){n.e(s)}finally{n.f()}return r},indexBy:function(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=i(c(e));try{for(a.s();!(r=a.n()).done;){var s=r.value;t in s&&(n[s[t]]=s)}}catch(o){a.e(o)}finally{a.f()}return n},groupBy:function(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=i(c(e));try{for(a.s();!(r=a.n()).done;){var s=r.value;if(t in s){var o=s[t];n[o]=n[o]||[],n[o].push(s)}}}catch(u){a.e(u)}finally{a.f()}return n},filterBy:function(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],s=i(c(e));try{for(s.s();!(r=s.n()).done;){var o=r.value;o[t]===n&&a.push(o)}}catch(u){s.e(u)}finally{s.f()}return a},sortBy:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:r?-1:1;return e.sort((function(e,r){return e[t]<r[t]?-i:e[t]>r[t]?i:0}))},flatten:function e(t){var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=i(t);try{for(a.s();!(r=a.n()).done;){var s=r.value;o(s)?e(s,n):n.push(s)}}catch(u){a.e(u)}finally{a.f()}return n},pluck:function(e,t){return c(e).filter((function(e){return t in e})).map((function(e){return e[t]}))},omit:function(e){if(!Array.isArray(e)){for(var t=l(e),r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];for(var s=0,u=n;s<u.length;s++){var c=u[s];if(o(c)){var d,h=i(c);try{for(h.s();!(d=h.n()).done;){var f=d.value;delete t[f]}}catch(p){h.e(p)}finally{h.f()}}else delete t[c]}return t}return e},sum:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t.filter(a);return i.length>0?i.reduce((function(e,t){return e+t}),0):void 0},deepExtend:function e(){for(var t=void 0,r=arguments.length,i=new Array(r),n=0;n<r;n++)i[n]=arguments[n];for(var a=0,o=i;a<o.length;a++){var u=o[a];if(s(u))for(var c in s(t)||(t={}),u)t[c]=e(t[c],u[c]);else t=u}return t}}},function(e,t,r){var i=r(239),n=r(240),a=r(118),s=r(241);e.exports=function(e){return i(e)||n(e)||a(e)||s()}},function(e,t,r){var i=r(134);e.exports=function(e){if(Array.isArray(e))return i(e)}},function(e,t){e.exports=function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(e,t,r){"use strict";var i=r(243),n=r(244),a=r(151);e.exports={formats:a,parse:n,stringify:i}},function(e,t,r){"use strict";var i=r(150),n=r(151),a=Object.prototype.hasOwnProperty,s={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},o=Array.isArray,u=Array.prototype.push,c=function(e,t){u.apply(e,o(t)?t:[t])},d=Date.prototype.toISOString,h={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:i.encode,encodeValuesOnly:!1,formatter:n.formatters[n.default],indices:!1,serializeDate:function(e){return d.call(e)},skipNulls:!1,strictNullHandling:!1},l=function e(t,r,n,a,s,u,d,l,f,p,v,m,g){var y=t;if("function"===typeof d?y=d(r,y):y instanceof Date?y=p(y):"comma"===n&&o(y)&&(y=y.join(",")),null===y){if(a)return u&&!m?u(r,h.encoder,g):r;y=""}if("string"===typeof y||"number"===typeof y||"boolean"===typeof y||i.isBuffer(y))return u?[v(m?r:u(r,h.encoder,g))+"="+v(u(y,h.encoder,g))]:[v(r)+"="+v(String(y))];var b,x=[];if("undefined"===typeof y)return x;if(o(d))b=d;else{var k=Object.keys(y);b=l?k.sort(l):k}for(var w=0;w<b.length;++w){var _=b[w];s&&null===y[_]||(o(y)?c(x,e(y[_],"function"===typeof n?n(r,_):r,n,a,s,u,d,l,f,p,v,m,g)):c(x,e(y[_],r+(f?"."+_:"["+_+"]"),n,a,s,u,d,l,f,p,v,m,g)))}return x};e.exports=function(e,t){var r,i=e,u=function(e){if(!e)return h;if(null!==e.encoder&&void 0!==e.encoder&&"function"!==typeof e.encoder)throw new TypeError("Encoder has to be a function.");var t=e.charset||h.charset;if("undefined"!==typeof e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=n.default;if("undefined"!==typeof e.format){if(!a.call(n.formatters,e.format))throw new TypeError("Unknown format option provided.");r=e.format}var i=n.formatters[r],s=h.filter;return("function"===typeof e.filter||o(e.filter))&&(s=e.filter),{addQueryPrefix:"boolean"===typeof e.addQueryPrefix?e.addQueryPrefix:h.addQueryPrefix,allowDots:"undefined"===typeof e.allowDots?h.allowDots:!!e.allowDots,charset:t,charsetSentinel:"boolean"===typeof e.charsetSentinel?e.charsetSentinel:h.charsetSentinel,delimiter:"undefined"===typeof e.delimiter?h.delimiter:e.delimiter,encode:"boolean"===typeof e.encode?e.encode:h.encode,encoder:"function"===typeof e.encoder?e.encoder:h.encoder,encodeValuesOnly:"boolean"===typeof e.encodeValuesOnly?e.encodeValuesOnly:h.encodeValuesOnly,filter:s,formatter:i,serializeDate:"function"===typeof e.serializeDate?e.serializeDate:h.serializeDate,skipNulls:"boolean"===typeof e.skipNulls?e.skipNulls:h.skipNulls,sort:"function"===typeof e.sort?e.sort:null,strictNullHandling:"boolean"===typeof e.strictNullHandling?e.strictNullHandling:h.strictNullHandling}}(t);"function"===typeof u.filter?i=(0,u.filter)("",i):o(u.filter)&&(r=u.filter);var d,f=[];if("object"!==typeof i||null===i)return"";d=t&&t.arrayFormat in s?t.arrayFormat:t&&"indices"in t?t.indices?"indices":"repeat":"indices";var p=s[d];r||(r=Object.keys(i)),u.sort&&r.sort(u.sort);for(var v=0;v<r.length;++v){var m=r[v];u.skipNulls&&null===i[m]||c(f,l(i[m],m,p,u.strictNullHandling,u.skipNulls,u.encode?u.encoder:null,u.filter,u.sort,u.allowDots,u.serializeDate,u.formatter,u.encodeValuesOnly,u.charset))}var g=f.join(u.delimiter),y=!0===u.addQueryPrefix?"?":"";return u.charsetSentinel&&("iso-8859-1"===u.charset?y+="utf8=%26%2310003%3B&":y+="utf8=%E2%9C%93&"),g.length>0?y+g:""}},function(e,t,r){"use strict";var i=r(150),n=Object.prototype.hasOwnProperty,a={allowDots:!1,allowPrototypes:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:i.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},s=function(e){return e.replace(/&#(\d+);/g,(function(e,t){return String.fromCharCode(parseInt(t,10))}))},o=function(e,t,r){if(e){var i=r.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,a=/(\[[^[\]]*])/g,s=/(\[[^[\]]*])/.exec(i),o=s?i.slice(0,s.index):i,u=[];if(o){if(!r.plainObjects&&n.call(Object.prototype,o)&&!r.allowPrototypes)return;u.push(o)}for(var c=0;null!==(s=a.exec(i))&&c<r.depth;){if(c+=1,!r.plainObjects&&n.call(Object.prototype,s[1].slice(1,-1))&&!r.allowPrototypes)return;u.push(s[1])}return s&&u.push("["+i.slice(s.index)+"]"),function(e,t,r){for(var i=t,n=e.length-1;n>=0;--n){var a,s=e[n];if("[]"===s&&r.parseArrays)a=[].concat(i);else{a=r.plainObjects?Object.create(null):{};var o="["===s.charAt(0)&&"]"===s.charAt(s.length-1)?s.slice(1,-1):s,u=parseInt(o,10);r.parseArrays||""!==o?!isNaN(u)&&s!==o&&String(u)===o&&u>=0&&r.parseArrays&&u<=r.arrayLimit?(a=[])[u]=i:a[o]=i:a={0:i}}i=a}return i}(u,t,r)}};e.exports=function(e,t){var r=function(e){if(!e)return a;if(null!==e.decoder&&void 0!==e.decoder&&"function"!==typeof e.decoder)throw new TypeError("Decoder has to be a function.");if("undefined"!==typeof e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new Error("The charset option must be either utf-8, iso-8859-1, or undefined");var t="undefined"===typeof e.charset?a.charset:e.charset;return{allowDots:"undefined"===typeof e.allowDots?a.allowDots:!!e.allowDots,allowPrototypes:"boolean"===typeof e.allowPrototypes?e.allowPrototypes:a.allowPrototypes,arrayLimit:"number"===typeof e.arrayLimit?e.arrayLimit:a.arrayLimit,charset:t,charsetSentinel:"boolean"===typeof e.charsetSentinel?e.charsetSentinel:a.charsetSentinel,comma:"boolean"===typeof e.comma?e.comma:a.comma,decoder:"function"===typeof e.decoder?e.decoder:a.decoder,delimiter:"string"===typeof e.delimiter||i.isRegExp(e.delimiter)?e.delimiter:a.delimiter,depth:"number"===typeof e.depth?e.depth:a.depth,ignoreQueryPrefix:!0===e.ignoreQueryPrefix,interpretNumericEntities:"boolean"===typeof e.interpretNumericEntities?e.interpretNumericEntities:a.interpretNumericEntities,parameterLimit:"number"===typeof e.parameterLimit?e.parameterLimit:a.parameterLimit,parseArrays:!1!==e.parseArrays,plainObjects:"boolean"===typeof e.plainObjects?e.plainObjects:a.plainObjects,strictNullHandling:"boolean"===typeof e.strictNullHandling?e.strictNullHandling:a.strictNullHandling}}(t);if(""===e||null===e||"undefined"===typeof e)return r.plainObjects?Object.create(null):{};for(var u="string"===typeof e?function(e,t){var r,o={},u=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,c=t.parameterLimit===1/0?void 0:t.parameterLimit,d=u.split(t.delimiter,c),h=-1,l=t.charset;if(t.charsetSentinel)for(r=0;r<d.length;++r)0===d[r].indexOf("utf8=")&&("utf8=%E2%9C%93"===d[r]?l="utf-8":"utf8=%26%2310003%3B"===d[r]&&(l="iso-8859-1"),h=r,r=d.length);for(r=0;r<d.length;++r)if(r!==h){var f,p,v=d[r],m=v.indexOf("]="),g=-1===m?v.indexOf("="):m+1;-1===g?(f=t.decoder(v,a.decoder,l),p=t.strictNullHandling?null:""):(f=t.decoder(v.slice(0,g),a.decoder,l),p=t.decoder(v.slice(g+1),a.decoder,l)),p&&t.interpretNumericEntities&&"iso-8859-1"===l&&(p=s(p)),p&&t.comma&&p.indexOf(",")>-1&&(p=p.split(",")),n.call(o,f)?o[f]=i.combine(o[f],p):o[f]=p}return o}(e,r):e,c=r.plainObjects?Object.create(null):{},d=Object.keys(u),h=0;h<d.length;++h){var l=d[h],f=o(l,u[l],r);c=i.merge(c,f,r)}return i.compact(c)}},function(e,t,r){"use strict";var i=r(77),n=r(119).capitalize,a=r(76),s=a.stringToBase64,o=a.urlencodeBase64,u=r(246),c=r(76),d=c.binaryToBase58,h=c.byteArrayToWordArray,l=r(50),f=l.ec,p=l.eddsa,v=(r(10).ArgumentsRequired,r(36)),m=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"md5",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"hex",a={};"keccak"===t&&(t="SHA3",a.outputLength=256);var s=i[t.toUpperCase()](e,a);return"binary"===r?s:s.toString(i.enc[n(r)])},g=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"sha256",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"hex",s=i["Hmac"+r.toUpperCase()](e,t);if(a){var o="binary"===a?"Latin1":n(a);return s.toString(i.enc[n(o)])}return s};function y(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"RS256",i={RS256:"pkcs1-sha256",RS512:"pkcs1-sha512"};if(!(r in i))throw new ExchangeError(r+" is not a supported rsa signing algorithm.");var n=i[r],a=new u(t,{environment:"browser",signingScheme:n});return a.sign(e,"base64","binary")}e.exports={hash:m,hmac:g,jwt:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"HS256",i={HS256:"sha256",HS384:"sha384",HS512:"sha512"},n=o(s(JSON.stringify({alg:r,typ:"JWT"}))),a=o(s(JSON.stringify(e))),u=[n,a].join("."),c=r.slice(0,2),d=i[r],h=void 0;return"HS"===c?h=o(g(u,t,d,"base64")):"RS"===c&&(h=o(y(u,t,r))),[u,h].join(".")},totp:function(e){var t=function(e){return parseInt(e,16)},r=function(e,t){return(t+e).slice(-t.length)};return function(e){e=e.replace(" ","");var n,a=Math.round((new Date).getTime()/1e3),s=r(((n=Math.floor(a/30))<15.5?"0":"")+Math.round(n).toString(16),"0000000000000000"),o=g(i.enc.Hex.parse(s),i.enc.Hex.parse(function(e){for(var t="",i="",n=0;n<e.length;n++){var a="ABCDEFGHIJKLMNOPQRSTUVWXYZ234567".indexOf(e.charAt(n).toUpperCase());t+=r(a.toString(2),"00000")}for(var s=0;s+4<=t.length;s+=4){var o=t.substr(s,4);i+=parseInt(o,2).toString(16)}return i}(e)),"sha1","hex"),u=t(o.substring(o.length-1)),c=(t(o.substr(2*u,8))&t("7fffffff"))+"";return c=c.substr(c.length-6,6)}(e)},rsa:y,ecdsa:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"p256",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,n=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=e;void 0!==i&&(a=m(e,i,"hex"));for(var s=new f(r),o=s.sign(a,t,"hex",{canonical:!0}),u=new v("0"),c=new v("1").shln(248).sub(new v("1"));n&&(o.r.gt(s.nh)||o.r.lte(c)||o.s.lte(c));)o=s.sign(a,t,"hex",{canonical:!0,extraEntropy:u.toArray("le",32)}),u=u.add(new v("1"));return{r:o.r.toString(16).padStart(64,"0"),s:o.s.toString(16).padStart(64,"0"),v:o.recoveryParam}},eddsa:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"ed25519",i=new p(r),n=i.signModified(e,t);return d(h(n.toBytes()))}}},function(e,t,r){(function(t){var i=r(247),n=r(47)._,a=r(153),s=r(250);e.exports=function(){var e={browser:["md5","ripemd160","sha1","sha256","sha512"]},r="pkcs1",o="pkcs1",u={private:"pkcs1-private-pem","private-der":"pkcs1-private-der",public:"pkcs8-public-pem","public-der":"pkcs8-public-der"};function c(e,a,s){if(!(this instanceof c))return new c(e,a,s);n.isObject(a)&&(s=a,a=void 0),this.$options={signingScheme:o,signingSchemeOptions:{hash:"sha256",saltLength:null},encryptionScheme:r,encryptionSchemeOptions:{hash:"sha1",label:null},environment:"browser",rsaUtils:this},this.keyPair=new i.Key,this.$cache={},t.isBuffer(e)||n.isString(e)?this.importKey(e,a):n.isObject(e)&&this.generateKeyPair(e.b,e.e),this.setOptions(s)}return c.prototype.setOptions=function(t){if((t=t||{}).environment&&(this.$options.environment=t.environment),t.signingScheme){if(n.isString(t.signingScheme)){var i=t.signingScheme.toLowerCase().split("-");1==i.length?e.node.indexOf(i[0])>-1?(this.$options.signingSchemeOptions={hash:i[0]},this.$options.signingScheme=o):(this.$options.signingScheme=i[0],this.$options.signingSchemeOptions={hash:null}):(this.$options.signingSchemeOptions={hash:i[1]},this.$options.signingScheme=i[0])}else n.isObject(t.signingScheme)&&(this.$options.signingScheme=t.signingScheme.scheme||o,this.$options.signingSchemeOptions=n.omit(t.signingScheme,"scheme"));if(!a.isSignature(this.$options.signingScheme))throw Error("Unsupported signing scheme");if(this.$options.signingSchemeOptions.hash&&-1===e[this.$options.environment].indexOf(this.$options.signingSchemeOptions.hash))throw Error("Unsupported hashing algorithm for "+this.$options.environment+" environment")}if(t.encryptionScheme){if(n.isString(t.encryptionScheme)?(this.$options.encryptionScheme=t.encryptionScheme.toLowerCase(),this.$options.encryptionSchemeOptions={}):n.isObject(t.encryptionScheme)&&(this.$options.encryptionScheme=t.encryptionScheme.scheme||r,this.$options.encryptionSchemeOptions=n.omit(t.encryptionScheme,"scheme")),!a.isEncryption(this.$options.encryptionScheme))throw Error("Unsupported encryption scheme");if(this.$options.encryptionSchemeOptions.hash&&-1===e[this.$options.environment].indexOf(this.$options.encryptionSchemeOptions.hash))throw Error("Unsupported hashing algorithm for "+this.$options.environment+" environment")}this.keyPair.setOptions(this.$options)},c.prototype.importKey=function(e,t){if(!e)throw Error("Empty key given");if(t&&(t=u[t]||t),!s.detectAndImport(this.keyPair,e,t)&&void 0===t)throw Error("Key format must be specified");return this.$cache={},this},c.prototype.isPrivate=function(){return this.keyPair.isPrivate()},c.prototype.isPublic=function(e){return this.keyPair.isPublic(e)},c.prototype.isEmpty=function(e){return!(this.keyPair.n||this.keyPair.e||this.keyPair.d)},c.prototype.sign=function(e,t,r){if(!this.isPrivate())throw Error("This is not private key");var i=this.keyPair.sign(this.$getDataForEncrypt(e,r));return t&&"buffer"!=t&&(i=i.toString(t)),i},c.prototype.$getDataForEncrypt=function(e,r){if(n.isString(e)||n.isNumber(e))return t.from(""+e,r||"utf8");if(t.isBuffer(e))return e;if(n.isObject(e))return t.from(JSON.stringify(e));throw Error("Unexpected data type")},c}()}).call(this,r(32).Buffer)},function(e,t,r){var i=r(47)._,n=r(152),a=r(47),s=r(153);e.exports.Key=function(){function e(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}return e.prototype.setOptions=function(e){var t=s[e.signingScheme],r=s[e.encryptionScheme];t===r?this.signingScheme=this.encryptionScheme=r.makeScheme(this,e):(this.encryptionScheme=r.makeScheme(this,e),this.signingScheme=t.makeScheme(this,e))},e.prototype.setPrivate=function(e,t,r,s,o,u,c,d){if(!(e&&t&&r&&e.length>0&&(i.isNumber(t)||t.length>0)&&r.length>0))throw Error("Invalid RSA private key");this.n=new n(e),this.e=i.isNumber(t)?t:a.get32IntFromBuffer(t,0),this.d=new n(r),s&&o&&u&&c&&d&&(this.p=new n(s),this.q=new n(o),this.dmp1=new n(u),this.dmq1=new n(c),this.coeff=new n(d)),this.$$recalculateCache()},e.prototype.$doPrivate=function(e){if(this.p||this.q)return e.modPow(this.d,this.n);for(var t=e.mod(this.p).modPow(this.dmp1,this.p),r=e.mod(this.q).modPow(this.dmq1,this.q);t.compareTo(r)<0;)t=t.add(this.p);return t.subtract(r).multiply(this.coeff).mod(this.p).multiply(this.q).add(r)},e.prototype.sign=function(e){return this.signingScheme.sign.apply(this.signingScheme,arguments)},e.prototype.isPrivate=function(){return this.n&&this.e&&this.d||!1},Object.defineProperty(e.prototype,"keySize",{get:function(){return this.cache.keyBitLength}}),Object.defineProperty(e.prototype,"encryptedDataLength",{get:function(){return this.cache.keyByteLength}}),Object.defineProperty(e.prototype,"maxMessageLength",{get:function(){return this.encryptionScheme.maxMessageLength()}}),e.prototype.$$recalculateCache=function(){this.cache=this.cache||{},this.cache.keyBitLength=this.n.bitLength(),this.cache.keyByteLength=this.cache.keyBitLength+6>>3},e}()},function(e,t,r){(function(t){var i=r(152),n=r(77),a=3;r(249);var s={md2:t.from("3020300c06082a864886f70d020205000410","hex"),md5:t.from("3020300c06082a864886f70d020505000410","hex"),sha1:t.from("3021300906052b0e03021a05000414","hex"),sha224:t.from("302d300d06096086480165030402040500041c","hex"),sha256:t.from("3031300d060960864801650304020105000420","hex"),sha384:t.from("3041300d060960864801650304020205000430","hex"),sha512:t.from("3051300d060960864801650304020305000440","hex"),ripemd160:t.from("3021300906052b2403020105000414","hex"),rmd160:t.from("3021300906052b2403020105000414","hex")},o={ripemd160:"rmd160"};function u(e,t){var r=[];return t>0&&r.push(e>>>24),t>1&&r.push(e>>>16&255),t>2&&r.push(e>>>8&255),t>3&&r.push(255&e),r}e.exports={isEncryption:!0,isSignature:!0},e.exports.makeScheme=function(e,r){function c(e,t){this.key=e,this.options=t}return c.prototype.maxMessageLength=function(){return this.options.encryptionSchemeOptions&&this.options.encryptionSchemeOptions.padding==a?this.key.encryptedDataLength:this.key.encryptedDataLength-11},c.prototype.encUnPad=function(e,t){t=t||{};var r=0;if(this.options.encryptionSchemeOptions&&this.options.encryptionSchemeOptions.padding==a)return"function"==typeof e.lastIndexOf?e.slice(e.lastIndexOf("\0")+1,e.length):e.slice(String.prototype.lastIndexOf.call(e,"\0")+1,e.length);if(e.length<4)return null;if(1===t.type){if(0!==e[0]&&1!==e[1])return null;for(r=3;0!==e[r];)if(255!=e[r]||++r>=e.length)return null}else{if(0!==e[0]&&2!==e[1])return null;for(r=3;0!==e[r];)if(++r>=e.length)return null}return e.slice(r+1,e.length)},c.prototype.sign=function(e){var r=this.options.signingSchemeOptions.hash||"sha256";if("browser"===this.options.environment){var a=function(e){var r=void 0;if(!e.hasOwnProperty("sigBytes")||!e.hasOwnProperty("words"))throw Error("Argument not a wordArray");r=e.sigBytes,e=e.words;var i=[],n=[],a=0;for(;r>0;)r-=(n=u(e[a],Math.min(4,r))).length,i.push(n),a++;return new t.from([].concat.apply([],i),"hex")}(n[(r=o[r]||r).toUpperCase()](e.toString())),s=this.pkcs1pad(a,r);return this.key.$doPrivate(new i(s)).toBuffer(this.key.encryptedDataLength)}throw new Error("CCXT only supports browser mode :P")},c.prototype.pkcs1pad=function(e,r){var i=s[r];if(!i)throw Error("Unsupported hash algorithm");var n=t.concat([i,e]);if(n.length+10>this.key.encryptedDataLength)throw Error("Key is too short for signing algorithm ("+r+")");var a=t.alloc(this.key.encryptedDataLength-n.length-1);return a.fill(255,0,a.length-1),a[0]=1,a[a.length-1]=0,t.concat([a,n])},new c(e,r)}}).call(this,r(32).Buffer)},function(e){e.exports=JSON.parse('{"O_RDONLY":0,"O_WRONLY":1,"O_RDWR":2,"S_IFMT":61440,"S_IFREG":32768,"S_IFDIR":16384,"S_IFCHR":8192,"S_IFBLK":24576,"S_IFIFO":4096,"S_IFLNK":40960,"S_IFSOCK":49152,"O_CREAT":512,"O_EXCL":2048,"O_NOCTTY":131072,"O_TRUNC":1024,"O_APPEND":8,"O_DIRECTORY":1048576,"O_NOFOLLOW":256,"O_SYNC":128,"O_SYMLINK":2097152,"O_NONBLOCK":4,"S_IRWXU":448,"S_IRUSR":256,"S_IWUSR":128,"S_IXUSR":64,"S_IRWXG":56,"S_IRGRP":32,"S_IWGRP":16,"S_IXGRP":8,"S_IRWXO":7,"S_IROTH":4,"S_IWOTH":2,"S_IXOTH":1,"E2BIG":7,"EACCES":13,"EADDRINUSE":48,"EADDRNOTAVAIL":49,"EAFNOSUPPORT":47,"EAGAIN":35,"EALREADY":37,"EBADF":9,"EBADMSG":94,"EBUSY":16,"ECANCELED":89,"ECHILD":10,"ECONNABORTED":53,"ECONNREFUSED":61,"ECONNRESET":54,"EDEADLK":11,"EDESTADDRREQ":39,"EDOM":33,"EDQUOT":69,"EEXIST":17,"EFAULT":14,"EFBIG":27,"EHOSTUNREACH":65,"EIDRM":90,"EILSEQ":92,"EINPROGRESS":36,"EINTR":4,"EINVAL":22,"EIO":5,"EISCONN":56,"EISDIR":21,"ELOOP":62,"EMFILE":24,"EMLINK":31,"EMSGSIZE":40,"EMULTIHOP":95,"ENAMETOOLONG":63,"ENETDOWN":50,"ENETRESET":52,"ENETUNREACH":51,"ENFILE":23,"ENOBUFS":55,"ENODATA":96,"ENODEV":19,"ENOENT":2,"ENOEXEC":8,"ENOLCK":77,"ENOLINK":97,"ENOMEM":12,"ENOMSG":91,"ENOPROTOOPT":42,"ENOSPC":28,"ENOSR":98,"ENOSTR":99,"ENOSYS":78,"ENOTCONN":57,"ENOTDIR":20,"ENOTEMPTY":66,"ENOTSOCK":38,"ENOTSUP":45,"ENOTTY":25,"ENXIO":6,"EOPNOTSUPP":102,"EOVERFLOW":84,"EPERM":1,"EPIPE":32,"EPROTO":100,"EPROTONOSUPPORT":43,"EPROTOTYPE":41,"ERANGE":34,"EROFS":30,"ESPIPE":29,"ESRCH":3,"ESTALE":70,"ETIME":101,"ETIMEDOUT":60,"ETXTBSY":26,"EWOULDBLOCK":35,"EXDEV":18,"SIGHUP":1,"SIGINT":2,"SIGQUIT":3,"SIGILL":4,"SIGTRAP":5,"SIGABRT":6,"SIGIOT":6,"SIGBUS":10,"SIGFPE":8,"SIGKILL":9,"SIGUSR1":30,"SIGSEGV":11,"SIGUSR2":31,"SIGPIPE":13,"SIGALRM":14,"SIGTERM":15,"SIGCHLD":20,"SIGCONT":19,"SIGSTOP":17,"SIGTSTP":18,"SIGTTIN":21,"SIGTTOU":22,"SIGURG":16,"SIGXCPU":24,"SIGXFSZ":25,"SIGVTALRM":26,"SIGPROF":27,"SIGWINCH":28,"SIGIO":23,"SIGSYS":12,"SSL_OP_ALL":2147486719,"SSL_OP_ALLOW_UNSAFE_LEGACY_RENEGOTIATION":262144,"SSL_OP_CIPHER_SERVER_PREFERENCE":4194304,"SSL_OP_CISCO_ANYCONNECT":32768,"SSL_OP_COOKIE_EXCHANGE":8192,"SSL_OP_CRYPTOPRO_TLSEXT_BUG":2147483648,"SSL_OP_DONT_INSERT_EMPTY_FRAGMENTS":2048,"SSL_OP_EPHEMERAL_RSA":0,"SSL_OP_LEGACY_SERVER_CONNECT":4,"SSL_OP_MICROSOFT_BIG_SSLV3_BUFFER":32,"SSL_OP_MICROSOFT_SESS_ID_BUG":1,"SSL_OP_MSIE_SSLV2_RSA_PADDING":0,"SSL_OP_NETSCAPE_CA_DN_BUG":536870912,"SSL_OP_NETSCAPE_CHALLENGE_BUG":2,"SSL_OP_NETSCAPE_DEMO_CIPHER_CHANGE_BUG":1073741824,"SSL_OP_NETSCAPE_REUSE_CIPHER_CHANGE_BUG":8,"SSL_OP_NO_COMPRESSION":131072,"SSL_OP_NO_QUERY_MTU":4096,"SSL_OP_NO_SESSION_RESUMPTION_ON_RENEGOTIATION":65536,"SSL_OP_NO_SSLv2":16777216,"SSL_OP_NO_SSLv3":33554432,"SSL_OP_NO_TICKET":16384,"SSL_OP_NO_TLSv1":67108864,"SSL_OP_NO_TLSv1_1":268435456,"SSL_OP_NO_TLSv1_2":134217728,"SSL_OP_PKCS1_CHECK_1":0,"SSL_OP_PKCS1_CHECK_2":0,"SSL_OP_SINGLE_DH_USE":1048576,"SSL_OP_SINGLE_ECDH_USE":524288,"SSL_OP_SSLEAY_080_CLIENT_DH_BUG":128,"SSL_OP_SSLREF2_REUSE_CERT_TYPE_BUG":0,"SSL_OP_TLS_BLOCK_PADDING_BUG":512,"SSL_OP_TLS_D5_BUG":256,"SSL_OP_TLS_ROLLBACK_BUG":8388608,"ENGINE_METHOD_DSA":2,"ENGINE_METHOD_DH":4,"ENGINE_METHOD_RAND":8,"ENGINE_METHOD_ECDH":16,"ENGINE_METHOD_ECDSA":32,"ENGINE_METHOD_CIPHERS":64,"ENGINE_METHOD_DIGESTS":128,"ENGINE_METHOD_STORE":256,"ENGINE_METHOD_PKEY_METHS":512,"ENGINE_METHOD_PKEY_ASN1_METHS":1024,"ENGINE_METHOD_ALL":65535,"ENGINE_METHOD_NONE":0,"DH_CHECK_P_NOT_SAFE_PRIME":2,"DH_CHECK_P_NOT_PRIME":1,"DH_UNABLE_TO_CHECK_GENERATOR":4,"DH_NOT_SUITABLE_GENERATOR":8,"NPN_ENABLED":1,"RSA_PKCS1_PADDING":1,"RSA_SSLV23_PADDING":2,"RSA_NO_PADDING":3,"RSA_PKCS1_OAEP_PADDING":4,"RSA_X931_PADDING":5,"RSA_PKCS1_PSS_PADDING":6,"POINT_CONVERSION_COMPRESSED":2,"POINT_CONVERSION_UNCOMPRESSED":4,"POINT_CONVERSION_HYBRID":6,"F_OK":0,"R_OK":4,"W_OK":2,"X_OK":1,"UV_UDP_REUSEADDR":4}')},function(e,t,r){r(47)._;e.exports={pkcs1:r(251),pkcs8:r(254),components:r(255),detectAndImport:function(t,r,i){if(void 0===i){for(var n in e.exports)if("function"===typeof e.exports[n].autoImport&&e.exports[n].autoImport(t,r))return!0}else if(i){var a=formatParse(i);if(!e.exports[a.scheme])throw Error("Unsupported key format");"private"===a.keyType?e.exports[a.scheme].privateImport(t,r,a.keyOpt):e.exports[a.scheme].publicImport(t,r,a.keyOpt)}return!1}}},function(e,t,r){(function(t){var i=r(154).Ber,n=r(47)._,a=r(47),s="-----BEGIN RSA PRIVATE KEY-----",o="-----END RSA PRIVATE KEY-----",u="-----BEGIN RSA PUBLIC KEY-----",c="-----END RSA PUBLIC KEY-----";e.exports={privateExport:function(e,t){t=t||{};var r=e.n.toBuffer(),n=e.d.toBuffer(),u=e.p.toBuffer(),c=e.q.toBuffer(),d=e.dmp1.toBuffer(),h=e.dmq1.toBuffer(),l=e.coeff.toBuffer(),f=r.length+n.length+u.length+c.length+d.length+h.length+l.length+512,p=new i.Writer({size:f});return p.startSequence(),p.writeInt(0),p.writeBuffer(r,2),p.writeInt(e.e),p.writeBuffer(n,2),p.writeBuffer(u,2),p.writeBuffer(c,2),p.writeBuffer(d,2),p.writeBuffer(h,2),p.writeBuffer(l,2),p.endSequence(),"der"===t.type?p.buffer:s+"\n"+a.linebrk(p.buffer.toString("base64"),64)+"\n"+o},privateImport:function(e,r,u){var c;if("der"!==(u=u||{}).type){if(t.isBuffer(r)&&(r=r.toString("utf8")),!n.isString(r))throw Error("Unsupported key format");var d=a.trimSurroundingText(r,s,o).replace(/\s+|\n\r|\n|\r$/gm,"");c=t.from(d,"base64")}else{if(!t.isBuffer(r))throw Error("Unsupported key format");c=r}var h=new i.Reader(c);h.readSequence(),h.readString(2,!0),e.setPrivate(h.readString(2,!0),h.readString(2,!0),h.readString(2,!0),h.readString(2,!0),h.readString(2,!0),h.readString(2,!0),h.readString(2,!0),h.readString(2,!0))},publicExport:function(e,t){t=t||{};var r=e.n.toBuffer(),n=r.length+512,s=new i.Writer({size:n});return s.startSequence(),s.writeBuffer(r,2),s.writeInt(e.e),s.endSequence(),"der"===t.type?s.buffer:u+"\n"+a.linebrk(s.buffer.toString("base64"),64)+"\n"+c},publicImport:function(e,r,s){var o;if("der"!==(s=s||{}).type){if(t.isBuffer(r)&&(r=r.toString("utf8")),n.isString(r)){var d=a.trimSurroundingText(r,u,c).replace(/\s+|\n\r|\n|\r$/gm,"");o=t.from(d,"base64")}}else{if(!t.isBuffer(r))throw Error("Unsupported key format");o=r}var h=new i.Reader(o);h.readSequence(),e.setPublic(h.readString(2,!0),h.readString(2,!0))},autoImport:function(t,r){return/^[\S\s]*-----BEGIN RSA PRIVATE KEY-----\s*(?=(([A-Za-z0-9+/=]+\s*)+))\1-----END RSA PRIVATE KEY-----[\S\s]*$/g.test(r)?(e.exports.privateImport(t,r),!0):!!/^[\S\s]*-----BEGIN RSA PUBLIC KEY-----\s*(?=(([A-Za-z0-9+/=]+\s*)+))\1-----END RSA PUBLIC KEY-----[\S\s]*$/g.test(r)&&(e.exports.publicImport(t,r),!0)}}}).call(this,r(32).Buffer)},function(e,t,r){var i=r(155),n=r(156),a=r(253);for(var s in e.exports={Reader:a},n)n.hasOwnProperty(s)&&(e.exports[s]=n[s]);for(var o in i)i.hasOwnProperty(o)&&(e.exports[o]=i[o])},function(e,t,r){(function(t){var i=r(124),n=r(156),a=r(155).newInvalidAsn1Error;function s(e){if(!e||!t.isBuffer(e))throw new TypeError("data must be a node Buffer");this._buf=e,this._size=e.length,this._len=0,this._offset=0}Object.defineProperty(s.prototype,"length",{enumerable:!0,get:function(){return this._len}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){return this._offset}}),Object.defineProperty(s.prototype,"remain",{get:function(){return this._size-this._offset}}),Object.defineProperty(s.prototype,"buffer",{get:function(){return this._buf.slice(this._offset)}}),s.prototype.readByte=function(e){if(this._size-this._offset<1)return null;var t=255&this._buf[this._offset];return e||(this._offset+=1),t},s.prototype.peek=function(){return this.readByte(!0)},s.prototype.readLength=function(e){if(void 0===e&&(e=this._offset),e>=this._size)return null;var t=255&this._buf[e++];if(null===t)return null;if(128===(128&t)){if(0===(t&=127))throw a("Indefinite length not supported");if(t>4)throw a("encoding too long");if(this._size-e<t)return null;this._len=0;for(var r=0;r<t;r++)this._len=(this._len<<8)+(255&this._buf[e++])}else this._len=t;return e},s.prototype.readSequence=function(e){var t=this.peek();if(null===t)return null;if(void 0!==e&&e!==t)throw a("Expected 0x"+e.toString(16)+": got 0x"+t.toString(16));var r=this.readLength(this._offset+1);return null===r?null:(this._offset=r,t)},s.prototype.readInt=function(){return this._readTag(n.Integer)},s.prototype.readBoolean=function(){return 0!==this._readTag(n.Boolean)},s.prototype.readEnumeration=function(){return this._readTag(n.Enumeration)},s.prototype.readString=function(e,r){e||(e=n.OctetString);var i=this.peek();if(null===i)return null;if(i!==e)throw a("Expected 0x"+e.toString(16)+": got 0x"+i.toString(16));var s=this.readLength(this._offset+1);if(null===s)return null;if(this.length>this._size-s)return null;if(this._offset=s,0===this.length)return r?t.alloc(0):"";var o=this._buf.slice(this._offset,this._offset+this.length);return this._offset+=this.length,r?o:o.toString("utf8")},s.prototype.readOID=function(e){e||(e=n.OID);var t=this.readString(e,!0);if(null===t)return null;for(var r=[],i=0,a=0;a<t.length;a++){var s=255&t[a];i<<=7,i+=127&s,0===(128&s)&&(r.push(i),i=0)}return i=r.shift(),r.unshift(i%40),r.unshift(i/40>>0),r.join(".")},s.prototype._readTag=function(e){i.ok(void 0!==e);var t=this.peek();if(null===t)return null;if(t!==e)throw a("Expected 0x"+e.toString(16)+": got 0x"+t.toString(16));var r=this.readLength(this._offset+1);if(null===r)return null;if(this.length>4)throw a("Integer too long: "+this.length);if(this.length>this._size-r)return null;this._offset=r;for(var n=this._buf[this._offset],s=0,o=0;o<this.length;o++)s<<=8,s|=255&this._buf[this._offset++];return 128===(128&n)&&4!==o&&(s-=1<<8*o),s>>0},e.exports=s}).call(this,r(32).Buffer)},function(e,t,r){(function(t){var i=r(154).Ber,n=r(47)._,a="1.2.840.113549.1.1.1",s=r(47),o="-----BEGIN PRIVATE KEY-----",u="-----END PRIVATE KEY-----",c="-----BEGIN PUBLIC KEY-----",d="-----END PUBLIC KEY-----";e.exports={privateExport:function(e,t){t=t||{};var r=e.n.toBuffer(),n=e.d.toBuffer(),c=e.p.toBuffer(),d=e.q.toBuffer(),h=e.dmp1.toBuffer(),l=e.dmq1.toBuffer(),f=e.coeff.toBuffer(),p=r.length+n.length+c.length+d.length+h.length+l.length+f.length+512,v=new i.Writer({size:p});v.startSequence(),v.writeInt(0),v.writeBuffer(r,2),v.writeInt(e.e),v.writeBuffer(n,2),v.writeBuffer(c,2),v.writeBuffer(d,2),v.writeBuffer(h,2),v.writeBuffer(l,2),v.writeBuffer(f,2),v.endSequence();var m=new i.Writer({size:p});return m.startSequence(),m.writeInt(0),m.startSequence(),m.writeOID(a),m.writeNull(),m.endSequence(),m.writeBuffer(v.buffer,4),m.endSequence(),"der"===t.type?m.buffer:o+"\n"+s.linebrk(m.buffer.toString("base64"),64)+"\n"+u},privateImport:function(e,r,c){var d;if("der"!==(c=c||{}).type){if(t.isBuffer(r)&&(r=r.toString("utf8")),!n.isString(r))throw Error("Unsupported key format");var h=s.trimSurroundingText(r,o,u).replace("-----END PRIVATE KEY-----","").replace(/\s+|\n\r|\n|\r$/gm,"");d=t.from(h,"base64")}else{if(!t.isBuffer(r))throw Error("Unsupported key format");d=r}var l=new i.Reader(d);if(l.readSequence(),l.readInt(0),new i.Reader(l.readString(48,!0)).readOID(6,!0)!==a)throw Error("Invalid Public key format");var f=new i.Reader(l.readString(4,!0));f.readSequence(),f.readString(2,!0),e.setPrivate(f.readString(2,!0),f.readString(2,!0),f.readString(2,!0),f.readString(2,!0),f.readString(2,!0),f.readString(2,!0),f.readString(2,!0),f.readString(2,!0))},publicExport:function(e,t){t=t||{};var r=e.n.toBuffer(),n=r.length+512,o=new i.Writer({size:n});o.writeByte(0),o.startSequence(),o.writeBuffer(r,2),o.writeInt(e.e),o.endSequence();var u=new i.Writer({size:n});return u.startSequence(),u.startSequence(),u.writeOID(a),u.writeNull(),u.endSequence(),u.writeBuffer(o.buffer,3),u.endSequence(),"der"===t.type?u.buffer:c+"\n"+s.linebrk(u.buffer.toString("base64"),64)+"\n"+d},publicImport:function(e,r,o){var u;if("der"!==(o=o||{}).type){if(t.isBuffer(r)&&(r=r.toString("utf8")),n.isString(r)){var h=s.trimSurroundingText(r,c,d).replace(/\s+|\n\r|\n|\r$/gm,"");u=t.from(h,"base64")}}else{if(!t.isBuffer(r))throw Error("Unsupported key format");u=r}var l=new i.Reader(u);if(l.readSequence(),new i.Reader(l.readString(48,!0)).readOID(6,!0)!==a)throw Error("Invalid Public key format");var f=new i.Reader(l.readString(3,!0));f.readByte(),f.readSequence(),e.setPublic(f.readString(2,!0),f.readString(2,!0))},autoImport:function(t,r){return/^[\S\s]*-----BEGIN PRIVATE KEY-----\s*(?=(([A-Za-z0-9+/=]+\s*)+))\1-----END PRIVATE KEY-----[\S\s]*$/g.test(r)?(e.exports.privateImport(t,r),!0):!!/^[\S\s]*-----BEGIN PUBLIC KEY-----\s*(?=(([A-Za-z0-9+/=]+\s*)+))\1-----END PUBLIC KEY-----[\S\s]*$/g.test(r)&&(e.exports.publicImport(t,r),!0)}}}).call(this,r(32).Buffer)},function(e,t,r){r(47)._,r(47);e.exports={privateExport:function(e,t){return{n:e.n.toBuffer(),e:e.e,d:e.d.toBuffer(),p:e.p.toBuffer(),q:e.q.toBuffer(),dmp1:e.dmp1.toBuffer(),dmq1:e.dmq1.toBuffer(),coeff:e.coeff.toBuffer()}},privateImport:function(e,t,r){if(!(t.n&&t.e&&t.d&&t.p&&t.q&&t.dmp1&&t.dmq1&&t.coeff))throw Error("Invalid key data");e.setPrivate(t.n,t.e,t.d,t.p,t.q,t.dmp1,t.dmq1,t.coeff)},publicExport:function(e,t){return{n:e.n.toBuffer(),e:e.e}},publicImport:function(e,t,r){if(!t.n||!t.e)throw Error("Invalid key data");e.setPublic(t.n,t.e)},autoImport:function(t,r){return!(!r.n||!r.e)&&(r.d&&r.p&&r.q&&r.dmp1&&r.dmq1&&r.coeff?(e.exports.privateImport(t,r),!0):(e.exports.publicImport(t,r),!0))}}},function(e,t,r){"use strict";var i=r(36),n=r(50).utils,a=n.getNAF,s=n.getJSF,o=n.assert;function u(e,t){this.type=e,this.p=new i(t.p,16),this.red=t.prime?i.red(t.prime):i.mont(this.p),this.zero=new i(0).toRed(this.red),this.one=new i(1).toRed(this.red),this.two=new i(2).toRed(this.red),this.n=t.n&&new i(t.n,16),this.g=t.g&&this.pointFromJSON(t.g,t.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4);var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}function c(e,t){this.curve=e,this.type=t,this.precomputed=null}e.exports=u,u.prototype.point=function(){throw new Error("Not implemented")},u.prototype.validate=function(){throw new Error("Not implemented")},u.prototype._fixedNafMul=function(e,t){o(e.precomputed);var r=e._getDoubles(),i=a(t,1),n=(1<<r.step+1)-(r.step%2===0?2:1);n/=3;for(var s=[],u=0;u<i.length;u+=r.step){var c=0;for(t=u+r.step-1;t>=u;t--)c=(c<<1)+i[t];s.push(c)}for(var d=this.jpoint(null,null,null),h=this.jpoint(null,null,null),l=n;l>0;l--){for(u=0;u<s.length;u++){(c=s[u])===l?h=h.mixedAdd(r.points[u]):c===-l&&(h=h.mixedAdd(r.points[u].neg()))}d=d.add(h)}return d.toP()},u.prototype._wnafMul=function(e,t){var r=4,i=e._getNAFPoints(r);r=i.wnd;for(var n=i.points,s=a(t,r),u=this.jpoint(null,null,null),c=s.length-1;c>=0;c--){for(t=0;c>=0&&0===s[c];c--)t++;if(c>=0&&t++,u=u.dblp(t),c<0)break;var d=s[c];o(0!==d),u="affine"===e.type?d>0?u.mixedAdd(n[d-1>>1]):u.mixedAdd(n[-d-1>>1].neg()):d>0?u.add(n[d-1>>1]):u.add(n[-d-1>>1].neg())}return"affine"===e.type?u.toP():u},u.prototype._wnafMulAdd=function(e,t,r,i,n){for(var o=this._wnafT1,u=this._wnafT2,c=this._wnafT3,d=0,h=0;h<i;h++){var l=(O=t[h])._getNAFPoints(e);o[h]=l.wnd,u[h]=l.points}for(h=i-1;h>=1;h-=2){var f=h-1,p=h;if(1===o[f]&&1===o[p]){var v=[t[f],null,null,t[p]];0===t[f].y.cmp(t[p].y)?(v[1]=t[f].add(t[p]),v[2]=t[f].toJ().mixedAdd(t[p].neg())):0===t[f].y.cmp(t[p].y.redNeg())?(v[1]=t[f].toJ().mixedAdd(t[p]),v[2]=t[f].add(t[p].neg())):(v[1]=t[f].toJ().mixedAdd(t[p]),v[2]=t[f].toJ().mixedAdd(t[p].neg()));var m=[-3,-1,-5,-7,0,7,5,1,3],g=s(r[f],r[p]);d=Math.max(g[0].length,d),c[f]=new Array(d),c[p]=new Array(d);for(var y=0;y<d;y++){var b=0|g[0][y],x=0|g[1][y];c[f][y]=m[3*(b+1)+(x+1)],c[p][y]=0,u[f]=v}}else c[f]=a(r[f],o[f]),c[p]=a(r[p],o[p]),d=Math.max(c[f].length,d),d=Math.max(c[p].length,d)}var k=this.jpoint(null,null,null),w=this._wnafT4;for(h=d;h>=0;h--){for(var _=0;h>=0;){var S=!0;for(y=0;y<i;y++)w[y]=0|c[y][h],0!==w[y]&&(S=!1);if(!S)break;_++,h--}if(h>=0&&_++,k=k.dblp(_),h<0)break;for(y=0;y<i;y++){var O,T=w[y];0!==T&&(T>0?O=u[y][T-1>>1]:T<0&&(O=u[y][-T-1>>1].neg()),k="affine"===O.type?k.mixedAdd(O):k.add(O))}}for(h=0;h<i;h++)u[h]=null;return n?k:k.toP()},u.BasePoint=c,c.prototype.eq=function(){throw new Error("Not implemented")},c.prototype.validate=function(){return this.curve.validate(this)},u.prototype.decodePoint=function(e,t){e=n.toArray(e,t);var r=this.p.byteLength();if((4===e[0]||6===e[0]||7===e[0])&&e.length-1===2*r)return 6===e[0]?o(e[e.length-1]%2===0):7===e[0]&&o(e[e.length-1]%2===1),this.point(e.slice(1,1+r),e.slice(1+r,1+2*r));if((2===e[0]||3===e[0])&&e.length-1===r)return this.pointFromX(e.slice(1,1+r),3===e[0]);throw new Error("Unknown point format")},c.prototype.encodeCompressed=function(e){return this.encode(e,!0)},c.prototype._encode=function(e){var t=this.curve.p.byteLength(),r=this.getX().toArray("be",t);return e?[this.getY().isEven()?2:3].concat(r):[4].concat(r,this.getY().toArray("be",t))},c.prototype.encode=function(e,t){return n.encode(this._encode(t),e)},c.prototype.precompute=function(e){if(this.precomputed)return this;var t={doubles:null,naf:null,beta:null};return t.naf=this._getNAFPoints(8),t.doubles=this._getDoubles(4,e),t.beta=this._getBeta(),this.precomputed=t,this},c.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var t=this.precomputed.doubles;return!!t&&t.points.length>=Math.ceil((e.bitLength()+1)/t.step)},c.prototype._getDoubles=function(e,t){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var r=[this],i=this,n=0;n<t;n+=e){for(var a=0;a<e;a++)i=i.dbl();r.push(i)}return{step:e,points:r}},c.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var t=[this],r=(1<<e)-1,i=1===r?null:this.dbl(),n=1;n<r;n++)t[n]=t[n-1].add(i);return{wnd:e,points:t}},c.prototype._getBeta=function(){return null},c.prototype.dblp=function(e){for(var t=this,r=0;r<e;r++)t=t.dbl();return t}},function(e,t,r){"use strict";var i=r(89),n=r(50),a=r(36),s=n.inherits,o=i.base,u=n.utils.assert;function c(e){o.call(this,"short",e),this.a=new a(e.a,16).toRed(this.red),this.b=new a(e.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(e),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}function d(e,t,r,i){o.BasePoint.call(this,e,"affine"),null===t&&null===r?(this.x=null,this.y=null,this.inf=!0):(this.x=new a(t,16),this.y=new a(r,16),i&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function h(e,t,r,i){o.BasePoint.call(this,e,"jacobian"),null===t&&null===r&&null===i?(this.x=this.curve.one,this.y=this.curve.one,this.z=new a(0)):(this.x=new a(t,16),this.y=new a(r,16),this.z=new a(i,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}s(c,o),e.exports=c,c.prototype._getEndomorphism=function(e){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var t,r;if(e.beta)t=new a(e.beta,16).toRed(this.red);else{var i=this._getEndoRoots(this.p);t=(t=i[0].cmp(i[1])<0?i[0]:i[1]).toRed(this.red)}if(e.lambda)r=new a(e.lambda,16);else{var n=this._getEndoRoots(this.n);0===this.g.mul(n[0]).x.cmp(this.g.x.redMul(t))?r=n[0]:(r=n[1],u(0===this.g.mul(r).x.cmp(this.g.x.redMul(t))))}return{beta:t,lambda:r,basis:e.basis?e.basis.map((function(e){return{a:new a(e.a,16),b:new a(e.b,16)}})):this._getEndoBasis(r)}}},c.prototype._getEndoRoots=function(e){var t=e===this.p?this.red:a.mont(e),r=new a(2).toRed(t).redInvm(),i=r.redNeg(),n=new a(3).toRed(t).redNeg().redSqrt().redMul(r);return[i.redAdd(n).fromRed(),i.redSub(n).fromRed()]},c.prototype._getEndoBasis=function(e){for(var t,r,i,n,s,o,u,c,d,h=this.n.ushrn(Math.floor(this.n.bitLength()/2)),l=e,f=this.n.clone(),p=new a(1),v=new a(0),m=new a(0),g=new a(1),y=0;0!==l.cmpn(0);){var b=f.div(l);c=f.sub(b.mul(l)),d=m.sub(b.mul(p));var x=g.sub(b.mul(v));if(!i&&c.cmp(h)<0)t=u.neg(),r=p,i=c.neg(),n=d;else if(i&&2===++y)break;u=c,f=l,l=c,m=p,p=d,g=v,v=x}s=c.neg(),o=d;var k=i.sqr().add(n.sqr());return s.sqr().add(o.sqr()).cmp(k)>=0&&(s=t,o=r),i.negative&&(i=i.neg(),n=n.neg()),s.negative&&(s=s.neg(),o=o.neg()),[{a:i,b:n},{a:s,b:o}]},c.prototype._endoSplit=function(e){var t=this.endo.basis,r=t[0],i=t[1],n=i.b.mul(e).divRound(this.n),a=r.b.neg().mul(e).divRound(this.n),s=n.mul(r.a),o=a.mul(i.a),u=n.mul(r.b),c=a.mul(i.b);return{k1:e.sub(s).sub(o),k2:u.add(c).neg()}},c.prototype.pointFromX=function(e,t){(e=new a(e,16)).red||(e=e.toRed(this.red));var r=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),i=r.redSqrt();if(0!==i.redSqr().redSub(r).cmp(this.zero))throw new Error("invalid point");var n=i.fromRed().isOdd();return(t&&!n||!t&&n)&&(i=i.redNeg()),this.point(e,i)},c.prototype.validate=function(e){if(e.inf)return!0;var t=e.x,r=e.y,i=this.a.redMul(t),n=t.redSqr().redMul(t).redIAdd(i).redIAdd(this.b);return 0===r.redSqr().redISub(n).cmpn(0)},c.prototype._endoWnafMulAdd=function(e,t,r){for(var i=this._endoWnafT1,n=this._endoWnafT2,a=0;a<e.length;a++){var s=this._endoSplit(t[a]),o=e[a],u=o._getBeta();s.k1.negative&&(s.k1.ineg(),o=o.neg(!0)),s.k2.negative&&(s.k2.ineg(),u=u.neg(!0)),i[2*a]=o,i[2*a+1]=u,n[2*a]=s.k1,n[2*a+1]=s.k2}for(var c=this._wnafMulAdd(1,i,n,2*a,r),d=0;d<2*a;d++)i[d]=null,n[d]=null;return c},s(d,o.BasePoint),c.prototype.point=function(e,t,r){return new d(this,e,t,r)},c.prototype.pointFromJSON=function(e,t){return d.fromJSON(this,e,t)},d.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var t=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var r=this.curve,i=function(e){return r.point(e.x.redMul(r.endo.beta),e.y)};e.beta=t,t.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(i)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(i)}}}return t}},d.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},d.fromJSON=function(e,t,r){"string"===typeof t&&(t=JSON.parse(t));var i=e.point(t[0],t[1],r);if(!t[2])return i;function n(t){return e.point(t[0],t[1],r)}var a=t[2];return i.precomputed={beta:null,doubles:a.doubles&&{step:a.doubles.step,points:[i].concat(a.doubles.points.map(n))},naf:a.naf&&{wnd:a.naf.wnd,points:[i].concat(a.naf.points.map(n))}},i},d.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},d.prototype.isInfinity=function(){return this.inf},d.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(0===this.x.cmp(e.x))return this.curve.point(null,null);var t=this.y.redSub(e.y);0!==t.cmpn(0)&&(t=t.redMul(this.x.redSub(e.x).redInvm()));var r=t.redSqr().redISub(this.x).redISub(e.x),i=t.redMul(this.x.redSub(r)).redISub(this.y);return this.curve.point(r,i)},d.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(0===e.cmpn(0))return this.curve.point(null,null);var t=this.curve.a,r=this.x.redSqr(),i=e.redInvm(),n=r.redAdd(r).redIAdd(r).redIAdd(t).redMul(i),a=n.redSqr().redISub(this.x.redAdd(this.x)),s=n.redMul(this.x.redSub(a)).redISub(this.y);return this.curve.point(a,s)},d.prototype.getX=function(){return this.x.fromRed()},d.prototype.getY=function(){return this.y.fromRed()},d.prototype.mul=function(e){return e=new a(e,16),this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)},d.prototype.mulAdd=function(e,t,r){var i=[this,t],n=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(i,n):this.curve._wnafMulAdd(1,i,n,2)},d.prototype.jmulAdd=function(e,t,r){var i=[this,t],n=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(i,n,!0):this.curve._wnafMulAdd(1,i,n,2,!0)},d.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||0===this.x.cmp(e.x)&&0===this.y.cmp(e.y))},d.prototype.neg=function(e){if(this.inf)return this;var t=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var r=this.precomputed,i=function(e){return e.neg()};t.precomputed={naf:r.naf&&{wnd:r.naf.wnd,points:r.naf.points.map(i)},doubles:r.doubles&&{step:r.doubles.step,points:r.doubles.points.map(i)}}}return t},d.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},s(h,o.BasePoint),c.prototype.jpoint=function(e,t,r){return new h(this,e,t,r)},h.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),t=e.redSqr(),r=this.x.redMul(t),i=this.y.redMul(t).redMul(e);return this.curve.point(r,i)},h.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},h.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.z.redSqr(),r=this.z.redSqr(),i=this.x.redMul(t),n=e.x.redMul(r),a=this.y.redMul(t.redMul(e.z)),s=e.y.redMul(r.redMul(this.z)),o=i.redSub(n),u=a.redSub(s);if(0===o.cmpn(0))return 0!==u.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var c=o.redSqr(),d=c.redMul(o),h=i.redMul(c),l=u.redSqr().redIAdd(d).redISub(h).redISub(h),f=u.redMul(h.redISub(l)).redISub(a.redMul(d)),p=this.z.redMul(e.z).redMul(o);return this.curve.jpoint(l,f,p)},h.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var t=this.z.redSqr(),r=this.x,i=e.x.redMul(t),n=this.y,a=e.y.redMul(t).redMul(this.z),s=r.redSub(i),o=n.redSub(a);if(0===s.cmpn(0))return 0!==o.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var u=s.redSqr(),c=u.redMul(s),d=r.redMul(u),h=o.redSqr().redIAdd(c).redISub(d).redISub(d),l=o.redMul(d.redISub(h)).redISub(n.redMul(c)),f=this.z.redMul(s);return this.curve.jpoint(h,l,f)},h.prototype.dblp=function(e){if(0===e)return this;if(this.isInfinity())return this;if(!e)return this.dbl();if(this.curve.zeroA||this.curve.threeA){for(var t=this,r=0;r<e;r++)t=t.dbl();return t}var i=this.curve.a,n=this.curve.tinv,a=this.x,s=this.y,o=this.z,u=o.redSqr().redSqr(),c=s.redAdd(s);for(r=0;r<e;r++){var d=a.redSqr(),h=c.redSqr(),l=h.redSqr(),f=d.redAdd(d).redIAdd(d).redIAdd(i.redMul(u)),p=a.redMul(h),v=f.redSqr().redISub(p.redAdd(p)),m=p.redISub(v),g=f.redMul(m);g=g.redIAdd(g).redISub(l);var y=c.redMul(o);r+1<e&&(u=u.redMul(l)),a=v,o=y,c=g}return this.curve.jpoint(a,c.redMul(n),o)},h.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},h.prototype._zeroDbl=function(){var e,t,r;if(this.zOne){var i=this.x.redSqr(),n=this.y.redSqr(),a=n.redSqr(),s=this.x.redAdd(n).redSqr().redISub(i).redISub(a);s=s.redIAdd(s);var o=i.redAdd(i).redIAdd(i),u=o.redSqr().redISub(s).redISub(s),c=a.redIAdd(a);c=(c=c.redIAdd(c)).redIAdd(c),e=u,t=o.redMul(s.redISub(u)).redISub(c),r=this.y.redAdd(this.y)}else{var d=this.x.redSqr(),h=this.y.redSqr(),l=h.redSqr(),f=this.x.redAdd(h).redSqr().redISub(d).redISub(l);f=f.redIAdd(f);var p=d.redAdd(d).redIAdd(d),v=p.redSqr(),m=l.redIAdd(l);m=(m=m.redIAdd(m)).redIAdd(m),e=v.redISub(f).redISub(f),t=p.redMul(f.redISub(e)).redISub(m),r=(r=this.y.redMul(this.z)).redIAdd(r)}return this.curve.jpoint(e,t,r)},h.prototype._threeDbl=function(){var e,t,r;if(this.zOne){var i=this.x.redSqr(),n=this.y.redSqr(),a=n.redSqr(),s=this.x.redAdd(n).redSqr().redISub(i).redISub(a);s=s.redIAdd(s);var o=i.redAdd(i).redIAdd(i).redIAdd(this.curve.a),u=o.redSqr().redISub(s).redISub(s);e=u;var c=a.redIAdd(a);c=(c=c.redIAdd(c)).redIAdd(c),t=o.redMul(s.redISub(u)).redISub(c),r=this.y.redAdd(this.y)}else{var d=this.z.redSqr(),h=this.y.redSqr(),l=this.x.redMul(h),f=this.x.redSub(d).redMul(this.x.redAdd(d));f=f.redAdd(f).redIAdd(f);var p=l.redIAdd(l),v=(p=p.redIAdd(p)).redAdd(p);e=f.redSqr().redISub(v),r=this.y.redAdd(this.z).redSqr().redISub(h).redISub(d);var m=h.redSqr();m=(m=(m=m.redIAdd(m)).redIAdd(m)).redIAdd(m),t=f.redMul(p.redISub(e)).redISub(m)}return this.curve.jpoint(e,t,r)},h.prototype._dbl=function(){var e=this.curve.a,t=this.x,r=this.y,i=this.z,n=i.redSqr().redSqr(),a=t.redSqr(),s=r.redSqr(),o=a.redAdd(a).redIAdd(a).redIAdd(e.redMul(n)),u=t.redAdd(t),c=(u=u.redIAdd(u)).redMul(s),d=o.redSqr().redISub(c.redAdd(c)),h=c.redISub(d),l=s.redSqr();l=(l=(l=l.redIAdd(l)).redIAdd(l)).redIAdd(l);var f=o.redMul(h).redISub(l),p=r.redAdd(r).redMul(i);return this.curve.jpoint(d,f,p)},h.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),t=this.y.redSqr(),r=this.z.redSqr(),i=t.redSqr(),n=e.redAdd(e).redIAdd(e),a=n.redSqr(),s=this.x.redAdd(t).redSqr().redISub(e).redISub(i),o=(s=(s=(s=s.redIAdd(s)).redAdd(s).redIAdd(s)).redISub(a)).redSqr(),u=i.redIAdd(i);u=(u=(u=u.redIAdd(u)).redIAdd(u)).redIAdd(u);var c=n.redIAdd(s).redSqr().redISub(a).redISub(o).redISub(u),d=t.redMul(c);d=(d=d.redIAdd(d)).redIAdd(d);var h=this.x.redMul(o).redISub(d);h=(h=h.redIAdd(h)).redIAdd(h);var l=this.y.redMul(c.redMul(u.redISub(c)).redISub(s.redMul(o)));l=(l=(l=l.redIAdd(l)).redIAdd(l)).redIAdd(l);var f=this.z.redAdd(s).redSqr().redISub(r).redISub(o);return this.curve.jpoint(h,l,f)},h.prototype.mul=function(e,t){return e=new a(e,t),this.curve._wnafMul(this,e)},h.prototype.eq=function(e){if("affine"===e.type)return this.eq(e.toJ());if(this===e)return!0;var t=this.z.redSqr(),r=e.z.redSqr();if(0!==this.x.redMul(r).redISub(e.x.redMul(t)).cmpn(0))return!1;var i=t.redMul(this.z),n=r.redMul(e.z);return 0===this.y.redMul(n).redISub(e.y.redMul(i)).cmpn(0)},h.prototype.eqXToP=function(e){var t=this.z.redSqr(),r=e.toRed(this.curve.red).redMul(t);if(0===this.x.cmp(r))return!0;for(var i=e.clone(),n=this.curve.redN.redMul(t);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(r.redIAdd(n),0===this.x.cmp(r))return!0}return!1},h.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},h.prototype.isInfinity=function(){return 0===this.z.cmpn(0)}},function(e,t,r){"use strict";var i=r(89),n=r(36),a=r(50).inherits,s=i.base,o=r(50).utils;function u(e){s.call(this,"mont",e),this.a=new n(e.a,16).toRed(this.red),this.b=new n(e.b,16).toRed(this.red),this.i4=new n(4).toRed(this.red).redInvm(),this.two=new n(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}function c(e,t,r){s.BasePoint.call(this,e,"projective"),null===t&&null===r?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new n(t,16),this.z=new n(r,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}a(u,s),e.exports=u,u.prototype.validate=function(e){var t=e.normalize().x,r=t.redSqr(),i=r.redMul(t).redAdd(r.redMul(this.a)).redAdd(t);return 0===i.redSqrt().redSqr().cmp(i)},a(c,s.BasePoint),u.prototype.decodePoint=function(e,t){return this.point(o.toArray(e,t),1)},u.prototype.point=function(e,t){return new c(this,e,t)},u.prototype.pointFromJSON=function(e){return c.fromJSON(this,e)},c.prototype.precompute=function(){},c.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},c.fromJSON=function(e,t){return new c(e,t[0],t[1]||e.one)},c.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},c.prototype.isInfinity=function(){return 0===this.z.cmpn(0)},c.prototype.dbl=function(){var e=this.x.redAdd(this.z).redSqr(),t=this.x.redSub(this.z).redSqr(),r=e.redSub(t),i=e.redMul(t),n=r.redMul(t.redAdd(this.curve.a24.redMul(r)));return this.curve.point(i,n)},c.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},c.prototype.diffAdd=function(e,t){var r=this.x.redAdd(this.z),i=this.x.redSub(this.z),n=e.x.redAdd(e.z),a=e.x.redSub(e.z).redMul(r),s=n.redMul(i),o=t.z.redMul(a.redAdd(s).redSqr()),u=t.x.redMul(a.redISub(s).redSqr());return this.curve.point(o,u)},c.prototype.mul=function(e){for(var t=e.clone(),r=this,i=this.curve.point(null,null),n=[];0!==t.cmpn(0);t.iushrn(1))n.push(t.andln(1));for(var a=n.length-1;a>=0;a--)0===n[a]?(r=r.diffAdd(i,this),i=i.dbl()):(i=r.diffAdd(i,this),r=r.dbl());return i},c.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},c.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},c.prototype.eq=function(e){return 0===this.getX().cmp(e.getX())},c.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},c.prototype.getX=function(){return this.normalize(),this.x.fromRed()}},function(e,t,r){"use strict";var i=r(89),n=r(50),a=r(36),s=n.inherits,o=i.base,u=n.utils.assert;function c(e){this.twisted=1!==(0|e.a),this.mOneA=this.twisted&&-1===(0|e.a),this.extended=this.mOneA,o.call(this,"edwards",e),this.a=new a(e.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new a(e.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new a(e.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),u(!this.twisted||0===this.c.fromRed().cmpn(1)),this.oneC=1===(0|e.c)}function d(e,t,r,i,n){o.BasePoint.call(this,e,"projective"),null===t&&null===r&&null===i?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new a(t,16),this.y=new a(r,16),this.z=i?new a(i,16):this.curve.one,this.t=n&&new a(n,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}s(c,o),e.exports=c,c.prototype._mulA=function(e){return this.mOneA?e.redNeg():this.a.redMul(e)},c.prototype._mulC=function(e){return this.oneC?e:this.c.redMul(e)},c.prototype.jpoint=function(e,t,r,i){return this.point(e,t,r,i)},c.prototype.pointFromX=function(e,t){(e=new a(e,16)).red||(e=e.toRed(this.red));var r=e.redSqr(),i=this.c2.redSub(this.a.redMul(r)),n=this.one.redSub(this.c2.redMul(this.d).redMul(r)),s=i.redMul(n.redInvm()),o=s.redSqrt();if(0!==o.redSqr().redSub(s).cmp(this.zero))throw new Error("invalid point");var u=o.fromRed().isOdd();return(t&&!u||!t&&u)&&(o=o.redNeg()),this.point(e,o)},c.prototype.pointFromY=function(e,t){(e=new a(e,16)).red||(e=e.toRed(this.red));var r=e.redSqr(),i=r.redSub(this.one),n=r.redMul(this.d).redAdd(this.one),s=i.redMul(n.redInvm());if(0===s.cmp(this.zero)){if(t)throw new Error("invalid point");return this.point(this.zero,e)}var o=s.redSqrt();if(0!==o.redSqr().redSub(s).cmp(this.zero))throw new Error("invalid point");return o.isOdd()!==t&&(o=o.redNeg()),this.point(o,e)},c.prototype.validate=function(e){if(e.isInfinity())return!0;e.normalize();var t=e.x.redSqr(),r=e.y.redSqr(),i=t.redMul(this.a).redAdd(r),n=this.c2.redMul(this.one.redAdd(this.d.redMul(t).redMul(r)));return 0===i.cmp(n)},s(d,o.BasePoint),c.prototype.pointFromJSON=function(e){return d.fromJSON(this,e)},c.prototype.point=function(e,t,r,i){return new d(this,e,t,r,i)},d.fromJSON=function(e,t){return new d(e,t[0],t[1],t[2])},d.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},d.prototype.isInfinity=function(){return 0===this.x.cmpn(0)&&0===this.y.cmp(this.z)},d.prototype._extDbl=function(){var e=this.x.redSqr(),t=this.y.redSqr(),r=this.z.redSqr();r=r.redIAdd(r);var i=this.curve._mulA(e),n=this.x.redAdd(this.y).redSqr().redISub(e).redISub(t),a=i.redAdd(t),s=a.redSub(r),o=i.redSub(t),u=n.redMul(s),c=a.redMul(o),d=n.redMul(o),h=s.redMul(a);return this.curve.point(u,c,h,d)},d.prototype._projDbl=function(){var e,t,r,i=this.x.redAdd(this.y).redSqr(),n=this.x.redSqr(),a=this.y.redSqr();if(this.curve.twisted){var s=(c=this.curve._mulA(n)).redAdd(a);if(this.zOne)e=i.redSub(n).redSub(a).redMul(s.redSub(this.curve.two)),t=s.redMul(c.redSub(a)),r=s.redSqr().redSub(s).redSub(s);else{var o=this.z.redSqr(),u=s.redSub(o).redISub(o);e=i.redSub(n).redISub(a).redMul(u),t=s.redMul(c.redSub(a)),r=s.redMul(u)}}else{var c=n.redAdd(a);o=this.curve._mulC(this.c.redMul(this.z)).redSqr(),u=c.redSub(o).redSub(o);e=this.curve._mulC(i.redISub(c)).redMul(u),t=this.curve._mulC(c).redMul(n.redISub(a)),r=c.redMul(u)}return this.curve.point(e,t,r)},d.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},d.prototype._extAdd=function(e){var t=this.y.redSub(this.x).redMul(e.y.redSub(e.x)),r=this.y.redAdd(this.x).redMul(e.y.redAdd(e.x)),i=this.t.redMul(this.curve.dd).redMul(e.t),n=this.z.redMul(e.z.redAdd(e.z)),a=r.redSub(t),s=n.redSub(i),o=n.redAdd(i),u=r.redAdd(t),c=a.redMul(s),d=o.redMul(u),h=a.redMul(u),l=s.redMul(o);return this.curve.point(c,d,l,h)},d.prototype._projAdd=function(e){var t,r,i=this.z.redMul(e.z),n=i.redSqr(),a=this.x.redMul(e.x),s=this.y.redMul(e.y),o=this.curve.d.redMul(a).redMul(s),u=n.redSub(o),c=n.redAdd(o),d=this.x.redAdd(this.y).redMul(e.x.redAdd(e.y)).redISub(a).redISub(s),h=i.redMul(u).redMul(d);return this.curve.twisted?(t=i.redMul(c).redMul(s.redSub(this.curve._mulA(a))),r=u.redMul(c)):(t=i.redMul(c).redMul(s.redSub(a)),r=this.curve._mulC(u).redMul(c)),this.curve.point(h,t,r)},d.prototype.add=function(e){return this.isInfinity()?e:e.isInfinity()?this:this.curve.extended?this._extAdd(e):this._projAdd(e)},d.prototype.mul=function(e){return this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve._wnafMul(this,e)},d.prototype.mulAdd=function(e,t,r){return this.curve._wnafMulAdd(1,[this,t],[e,r],2,!1)},d.prototype.jmulAdd=function(e,t,r){return this.curve._wnafMulAdd(1,[this,t],[e,r],2,!0)},d.prototype.normalize=function(){if(this.zOne)return this;var e=this.z.redInvm();return this.x=this.x.redMul(e),this.y=this.y.redMul(e),this.t&&(this.t=this.t.redMul(e)),this.z=this.curve.one,this.zOne=!0,this},d.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},d.prototype.getX=function(){return this.normalize(),this.x.fromRed()},d.prototype.getY=function(){return this.normalize(),this.y.fromRed()},d.prototype.eq=function(e){return this===e||0===this.getX().cmp(e.getX())&&0===this.getY().cmp(e.getY())},d.prototype.eqXToP=function(e){var t=e.toRed(this.curve.red).redMul(this.z);if(0===this.x.cmp(t))return!0;for(var r=e.clone(),i=this.curve.redN.redMul(this.z);;){if(r.iadd(this.curve.n),r.cmp(this.curve.p)>=0)return!1;if(t.redIAdd(i),0===this.x.cmp(t))return!0}return!1},d.prototype.toP=d.prototype.normalize,d.prototype.mixedAdd=d.prototype.add},function(e,t){e.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}},function(e,t,r){"use strict";var i=r(36),n=r(262),a=r(50),s=a.utils.assert,o=r(263),u=r(264);function c(e){if(!(this instanceof c))return new c(e);"string"===typeof e&&(s(a.curves.hasOwnProperty(e),"Unknown curve "+e),e=a.curves[e]),e instanceof a.curves.PresetCurve&&(e={curve:e}),this.curve=e.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=e.curve.g,this.g.precompute(e.curve.n.bitLength()+1),this.hash=e.hash||e.curve.hash}e.exports=c,c.prototype.keyPair=function(e){return new o(this,e)},c.prototype.keyFromPrivate=function(e,t){return o.fromPrivate(this,e,t)},c.prototype.keyFromPublic=function(e,t){return o.fromPublic(this,e,t)},c.prototype.genKeyPair=function(e){e||(e={});for(var t=new n({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||null,entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),r=this.n.byteLength(),a=this.n.sub(new i(2));;){var s=new i(t.generate(r));if(!(s.cmp(a)>0))return s.iaddn(1),this.keyFromPrivate(s)}},c.prototype._truncateToN=function(e,t){var r=8*e.byteLength()-this.n.bitLength();return r>0&&(e=e.ushrn(r)),!t&&e.cmp(this.n)>=0?e.sub(this.n):e},c.prototype.sign=function(e,t,r,a){"object"===typeof r&&(a=r,r=null),a||(a={}),t=this.keyFromPrivate(t,r),e=this._truncateToN(new i(e,16));for(var s=this.n.byteLength(),o=t.getPrivate().toArray("be",s),c=e.toArray("be",s),d=new n({hash:this.hash,entropy:a.extraEntropy?o.concat(a.extraEntropy):o,nonce:c,pers:a.pers,persEnc:a.persEnc||"utf8"}),h=this.n.sub(new i(1)),l=0;;l++){var f=a.k?a.k(l):new i(d.generate(this.n.byteLength()));if(!((f=this._truncateToN(f,!0)).cmpn(1)<=0||f.cmp(h)>=0)){var p=this.g.mul(f);if(!p.isInfinity()){var v=p.getX(),m=v.umod(this.n);if(0!==m.cmpn(0)){var g=f.invm(this.n).mul(m.mul(t.getPrivate()).iadd(e));if(0!==(g=g.umod(this.n)).cmpn(0)){var y=(p.getY().isOdd()?1:0)|(0!==v.cmp(m)?2:0);return a.canonical&&g.cmp(this.nh)>0&&(g=this.n.sub(g),y^=1),new u({r:m,s:g,recoveryParam:y})}}}}}},c.prototype.verify=function(e,t,r,n){e=this._truncateToN(new i(e,16)),r=this.keyFromPublic(r,n);var a=(t=new u(t,"hex")).r,s=t.s;if(a.cmpn(1)<0||a.cmp(this.n)>=0)return!1;if(s.cmpn(1)<0||s.cmp(this.n)>=0)return!1;var o,c=s.invm(this.n),d=c.mul(e).umod(this.n),h=c.mul(a).umod(this.n);return this.curve._maxwellTrick?!(o=this.g.jmulAdd(d,r.getPublic(),h)).isInfinity()&&o.eqXToP(a):!(o=this.g.mulAdd(d,r.getPublic(),h)).isInfinity()&&0===o.getX().umod(this.n).cmp(a)},c.prototype.recoverPubKey=function(e,t,r,n){s((3&r)===r,"The recovery param is more than two bits"),t=new u(t,n);var a=this.n,o=new i(e),c=t.r,d=t.s,h=1&r,l=r>>1;if(c.cmp(this.curve.p.umod(this.curve.n))>=0&&l)throw new Error("Unable to find sencond key candinate");c=l?this.curve.pointFromX(c.add(this.curve.n),h):this.curve.pointFromX(c,h);var f=t.r.invm(a),p=a.sub(o).mul(f).umod(a),v=d.mul(f).umod(a);return this.g.mulAdd(p,c,v)},c.prototype.getKeyRecoveryParam=function(e,t,r,i){if(null!==(t=new u(t,i)).recoveryParam)return t.recoveryParam;for(var n=0;n<4;n++){var a;try{a=this.recoverPubKey(e,t,n)}catch(e){continue}if(a.eq(r))return n}throw new Error("Unable to find valid recovery factor")}},function(e,t,r){"use strict";var i=r(77),n=r(67).assert,a=r(67),s=r(76).byteArrayToWordArray,o=i.enc.Utf8.parse("\x01"),u=i.enc.Utf8.parse("\0");function c(e){if(!(this instanceof c))return new c(e);this.hash=e.hash,this.predResist=!!e.predResist,this.outLen=this.hash.slice(3,6),this.minEntropy=e.minEntropy||192,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var t=e.entropy,r=e.nonce;n(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(t,r,[])}e.exports=c,c.prototype._init=function(e,t,r){var n=e.concat(t).concat(r);this.K=new i.lib.WordArray.init,this.V=new i.lib.WordArray.init;this.V.words=Array(this.outLen/32).fill(16843009),this.V.sigBytes=32,this._update(n),this._reseed=1,this.reseedInterval=281474976710656},c.prototype._hmac=function(){return new i.lib.WordArray.init},c.prototype._update=function(e){var t=this._hmac();t.concat(this.V),t.concat(u),e&&t.concat(s(e)),this.K=i["Hmac"+this.hash](t,this.K),this.V=i["Hmac"+this.hash](this.V,this.K),e&&((t=this._hmac()).concat(this.V),t.concat(o),t.concat(s(e)),this.K=i["Hmac"+this.hash](t,this.K),this.V=i["Hmac"+this.hash](this.V,this.K))},c.prototype.reseed=function(e,t,r,i){"string"!==typeof t&&(r,r=t,t=null),n(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(r||[])),this._reseed=1},c.prototype.generate=function(e,t,r,n){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!==typeof t&&(r,r=t,t=null),r&&(r=i.enc.Utf8.parse(r),this._update(r));for(var s=new i.lib.WordArray.init;s.sigBytes<e;)this.V=i["Hmac"+this.hash](this.V,this.K),s.concat(this.V);return this._update(r),this._reseed++,a.wordArrayToBuffer(s)}},function(e,t,r){"use strict";var i=r(36),n=r(50).utils.assert;function a(e,t){this.ec=e,this.priv=null,this.pub=null,t.priv&&this._importPrivate(t.priv,t.privEnc),t.pub&&this._importPublic(t.pub,t.pubEnc)}e.exports=a,a.fromPublic=function(e,t,r){return t instanceof a?t:new a(e,{pub:t,pubEnc:r})},a.fromPrivate=function(e,t,r){return t instanceof a?t:new a(e,{priv:t,privEnc:r})},a.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},a.prototype.getPublic=function(e,t){return"string"===typeof e&&(t=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),t?this.pub.encode(t,e):this.pub},a.prototype.getPrivate=function(e){return"hex"===e?this.priv.toString(16,2):this.priv},a.prototype._importPrivate=function(e,t){this.priv=new i(e,t||16),this.priv=this.priv.umod(this.ec.curve.n)},a.prototype._importPublic=function(e,t){if(e.x||e.y)return"mont"===this.ec.curve.type?n(e.x,"Need x coordinate"):"short"!==this.ec.curve.type&&"edwards"!==this.ec.curve.type||n(e.x&&e.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(e.x,e.y));this.pub=this.ec.curve.decodePoint(e,t)},a.prototype.derive=function(e){return e.mul(this.priv).getX()},a.prototype.sign=function(e,t,r){return this.ec.sign(e,this,t,r)},a.prototype.verify=function(e,t){return this.ec.verify(e,t,this)},a.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}},function(e,t,r){"use strict";var i=r(36),n=r(50).utils.assert;e.exports=function e(t,r){if(t instanceof e)return t;n(t.r&&t.s,"Signature without r or s"),this.r=new i(t.r,16),this.s=new i(t.s,16),void 0===t.recoveryParam?this.recoveryParam=null:this.recoveryParam=t.recoveryParam}},function(e,t,r){"use strict";var i=r(157),n=r(67),a=n.assert,s=n.parseBytes,o=r(266),u=r(267),c=r(36),d=r(76).byteArrayToWordArray,h=r(77);function l(e){if(a("ed25519"===e,"only tested with ed25519 so far"),!(this instanceof l))return new l(e);var t=i[e].curve;this.curve=t,this.g=t.g,this.g.precompute(t.n.bitLength()+1),this.pointClass=t.point().constructor,this.encodingLength=Math.ceil(t.n.bitLength()/8)}e.exports=l,l.prototype.sign=function(e,t){e=s(e);var r=this.keyFromSecret(t),i=this.hashInt(r.secret(),e),n=this.g.mul(i),a=this.encodePoint(n),o=this.hashInt(a,r.pubBytes(),e);o=o.mul(r.priv());var u=i.add(o).umod(this.curve.n);return this.makeSignature({R:n,S:u,Rencoded:a})},l.prototype.signModified=function(e,t){e=s(e);var r=this.keyFromSecret(t),i=new c(r.secret(),16,"le"),n=this.encodePoint(this.g.mul(i)),a=128&n[31],o=this.hashInt(r.secret(),e),u=this.g.mul(o),d=this.encodePoint(u),h=this.hashInt(d,n,e);h=h.mul(i);var l=o.add(h).umod(this.curve.n),f=l.toArray("le");return f[31]|=a,this.makeSignature({R:u,S:l,Rencoded:d,Sencoded:f})},l.prototype.verify=function(e,t,r){e=s(e),t=this.makeSignature(t);var i=this.keyFromPublic(r),n=this.hashInt(t.Rencoded(),i.pubBytes(),e),a=this.g.mul(t.S());return t.R().add(i.pub().mul(n)).eq(a)},l.prototype.hashInt=function(){var e=Array.from(arguments).reduce((function(e,t){return e.concat(t)}));e=d(e);var t=h.SHA512(e).toString(h.enc.Hex);return n.intFromLE(t).umod(this.curve.n)},l.prototype.keyFromPublic=function(e){return o.fromPublic(this,e)},l.prototype.keyFromSecret=function(e){return o.fromSecret(this,e)},l.prototype.makeSignature=function(e){return e instanceof u?e:new u(this,e)},l.prototype.encodePoint=function(e){var t=e.getY().toArray("le",this.encodingLength);return t[this.encodingLength-1]|=e.getX().isOdd()?128:0,t},l.prototype.decodePoint=function(e){var t=(e=n.parseBytes(e)).length-1,r=e.slice(0,t).concat(-129&e[t]),i=0!==(128&e[t]),a=n.intFromLE(r);return this.curve.pointFromY(a,i)},l.prototype.encodeInt=function(e){return e.toArray("le",this.encodingLength)},l.prototype.decodeInt=function(e){return n.intFromLE(e)},l.prototype.isPoint=function(e){return e instanceof this.pointClass}},function(e,t,r){"use strict";var i=r(67),n=i.assert,a=i.parseBytes,s=i.cachedProperty;function o(e,t){this.eddsa=e,this._secret=a(t.secret),e.isPoint(t.pub)?this._pub=t.pub:this._pubBytes=a(t.pub)}o.fromPublic=function(e,t){return t instanceof o?t:new o(e,{pub:t})},o.fromSecret=function(e,t){return t instanceof o?t:new o(e,{secret:t})},o.prototype.secret=function(){return this._secret},s(o,"pubBytes",(function(){return this.eddsa.encodePoint(this.pub())})),s(o,"pub",(function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())})),s(o,"privBytes",(function(){var e=this.eddsa,t=this.hash(),r=e.encodingLength-1,i=t.slice(0,e.encodingLength);return i[0]&=248,i[r]&=127,i[r]|=64,i})),s(o,"priv",(function(){return this.eddsa.decodeInt(this.privBytes())})),s(o,"hash",(function(){return this.eddsa.hash().update(this.secret()).digest()})),s(o,"messagePrefix",(function(){return this.hash().slice(this.eddsa.encodingLength)})),o.prototype.sign=function(e){return n(this._secret,"KeyPair can only verify"),this.eddsa.sign(e,this)},o.prototype.signModified=function(e){return n(this._secret,"KeyPair can only verify"),this.eddsa.signModified(e,this)},o.prototype.verify=function(e,t){return this.eddsa.verify(e,t,this)},o.prototype.getSecret=function(e){return n(this._secret,"KeyPair is public only"),i.encode(this.secret(),e)},o.prototype.getPublic=function(e){return i.encode(this.pubBytes(),e)},e.exports=o},function(e,t,r){"use strict";var i=r(36),n=r(67),a=n.assert,s=n.cachedProperty,o=n.parseBytes;function u(e,t){this.eddsa=e,"object"!==typeof t&&(t=o(t)),Array.isArray(t)&&(t={R:t.slice(0,e.encodingLength),S:t.slice(e.encodingLength)}),a(t.R&&t.S,"Signature without R or S"),e.isPoint(t.R)&&(this._R=t.R),t.S instanceof i&&(this._S=t.S),this._Rencoded=Array.isArray(t.R)?t.R:t.Rencoded,this._Sencoded=Array.isArray(t.S)?t.S:t.Sencoded}s(u,"S",(function(){return this.eddsa.decodeInt(this.Sencoded())})),s(u,"R",(function(){return this.eddsa.decodePoint(this.Rencoded())})),s(u,"Rencoded",(function(){return this.eddsa.encodePoint(this.R())})),s(u,"Sencoded",(function(){return this.eddsa.encodeInt(this.S())})),u.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},u.prototype.toHex=function(){return n.encode(this.toBytes(),"hex").toUpperCase()},e.exports=u},function(e,t,r){var i=r(269),n=r(158);e.exports=function(e,t){return!t||"object"!==i(t)&&"function"!==typeof t?n(e):t}},function(e,t){function r(t){return"function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?e.exports=r=function(e){return typeof e}:e.exports=r=function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(t)}e.exports=r},function(e,t,r){"use strict";e.exports={BaseError:{ExchangeError:{AuthenticationError:{PermissionDenied:{},AccountSuspended:{}},ArgumentsRequired:{},BadRequest:{BadSymbol:{}},BadResponse:{NullResponse:{}},InsufficientFunds:{},InvalidAddress:{AddressPending:{}},InvalidOrder:{OrderNotFound:{},OrderNotCached:{},CancelPending:{},OrderImmediatelyFillable:{},OrderNotFillable:{},DuplicateOrderId:{}},NotSupported:{}},NetworkError:{DDoSProtection:{RateLimitExceeded:{}},ExchangeNotAvailable:{OnMaintenance:{}},InvalidNonce:{},RequestTimeout:{}}}}},function(e,t,r){var i=r(3),n=r(125),a=r(272),s=r(273);function o(t){var r="function"===typeof Map?new Map:void 0;return e.exports=o=function(e){if(null===e||!a(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof r){if(r.has(e))return r.get(e);r.set(e,t)}function t(){return s(e,arguments,i(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n(t,e)},o(t)}e.exports=o},function(e,t){e.exports=function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}},function(e,t,r){var i=r(125),n=r(159);function a(t,r,s){return n()?e.exports=a=Reflect.construct:e.exports=a=function(e,t,r){var n=[null];n.push.apply(n,t);var a=new(Function.bind.apply(e,n));return r&&i(a,r.prototype),a},a.apply(null,arguments)}e.exports=a},function(e,t,r){"use strict";var i=r(7),n=r(8),a=r(160),s=a.sleep,o=a.now;e.exports={throttle:function e(t){var r=o(),a=void 0!==t.numTokens?t.numTokens:t.capacity,u=!1,c=[];return Object.assign((function(e,d){if(c.length>t.maxCapacity)throw new Error("Backlog is over max capacity of "+t.maxCapacity);return new Promise(function(){var h=n(i.mark((function n(h,l){var f,p,v,m,g;return i.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(i.prev=0,c.push({cost:d,resolve:h,reject:l}),u){i.next=15;break}u=!0;case 4:if(!(c.length>0)){i.next=14;break}return(t.capacity?a>0:a>=0)&&c.length>0&&(f=c[0],p=f.cost,v=f.resolve,f.reject,p=p||t.defaultCost,a>=Math.min(p,t.capacity)&&(a-=p,c.shift(),v())),m=o(),g=m-r,r=m,a=Math.min(t.capacity,a+g*(1/e)),i.next=12,s(t.delay);case 12:i.next=4;break;case 14:u=!1;case 15:i.next=20;break;case 17:i.prev=17,i.t0=i.catch(0),l(i.t0);case 20:case"end":return i.stop()}}),n,null,[[0,17]])})));return function(e,t){return h.apply(this,arguments)}}())}),t,{configure:function(r){return e(Object.assign({},t,r))}})}}},function(e,t,r){"use strict";var i=r(21),n=r(18),a=n.ROUND_UP,s=n.ROUND_DOWN,o=r(10).NotSupported,u=function(e){var t=e.slice(0,-1),r=e.slice(-1),i=void 0;if("y"===r)i=31536e3;else if("M"===r)i=2592e3;else if("w"===r)i=604800;else if("d"===r)i=86400;else if("h"===r)i=3600;else if("m"===r)i=60;else{if("s"!==r)throw new o("timeframe unit "+r+" is not supported");i=1}return t*i};e.exports={aggregate:function(e){for(var t={},r=0;r<e.length;r++){var n=i(e[r],2),a=n[0],s=n[1];s>0&&(t[a]=(t[a]||0)+s)}return Object.keys(t).map((function(e){return[parseFloat(e),parseFloat(t[e])]}))},parseTimeframe:u,roundTimeframe:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s,i=1e3*u(e),n=t%i;return t-n+(r===a?i:0)},buildOHLCVC:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"1m",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1/0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0,n=1e3*u(t),a=[],s=[0,1,2,3,4,5,6],o=s[0],c=s[2],d=s[3],h=s[4],l=s[5],f=s[6],p=Math.min(e.length-1,i),v=0;v<=p;v++){var m=e[v];if(!(m.timestamp<r)){var g=Math.floor(m.timestamp/n)*n,y=a.length-1;-1===y||g>=a[y][o]+n?a.push([g,m.price,m.price,m.price,m.price,m.amount,1]):(a[y][c]=Math.max(a[y][c],m.price),a[y][d]=Math.min(a[y][d],m.price),a[y][h]=m.price,a[y][l]+=m.amount,a[y][f]++)}}return a},ROUND_UP:a,ROUND_DOWN:s,implodeParams:function(e,t){if(!Array.isArray(t))for(var r=Object.keys(t),i=0;i<r.length;i++){var n=r[i];Array.isArray(t[n])||(e=e.replace("{"+n+"}",t[n]))}return e},extractParams:function(e){for(var t=/{([\w-]+)}/g,r=[],i=t.exec(e);i;)r.push(i[1]),i=t.exec(e);return r},vwap:function(e,t){return void 0!==e&&void 0!==t&&e>0?t/e:void 0}}},function(e,t,r){"use strict";var i=r(7),n=r(8),a=r(1),s=r(2),o=r(6),u=r(3),c=r(4),d=r(5),h=r(11),l=r(10),f=l.ArgumentsRequired,p=l.AuthenticationError,v=l.ExchangeError,m=l.ExchangeNotAvailable,g=l.OrderNotFound,y=l.InvalidOrder,b=l.CancelPending,x=l.RateLimitExceeded,k=l.InsufficientFunds,w=l.BadRequest,_=l.BadSymbol,S=l.PermissionDenied,O=r(18).TICK_SIZE,T=r(12);e.exports=function(e){c(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(u(r.prototype),"describe",this).call(this),{id:"aax",name:"AAX",countries:["MT"],enableRateLimit:!0,rateLimit:500,version:"v2",hostname:"aaxpro.com",certified:!0,has:{cancelAllOrders:!0,cancelOrder:!0,createOrder:!0,editOrder:!0,fetchBalance:!0,fetchCanceledOrders:!0,fetchClosedOrders:!0,fetchDepositAddress:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchStatus:!0,fetchTicker:"emulated",fetchTickers:!0,fetchTrades:!0},timeframes:{"1m":"1m","5m":"5m","15m":"15m","30m":"30m","1h":"1h","2h":"2h","4h":"4h","12h":"12h","1d":"1d","3d":"3d","1w":"1w"},urls:{logo:"https://user-images.githubusercontent.com/1294454/104140087-a27f2580-53c0-11eb-87c1-5d9e81208fe9.jpg",test:{v1:"https://api.testnet.{hostname}/marketdata/v1",public:"https://api.testnet.{hostname}",private:"https://api.testnet.{hostname}"},api:{v1:"https://api.{hostname}/marketdata/v1",public:"https://api.{hostname}",private:"https://api.{hostname}"},www:"https://www.aaxpro.com",doc:"https://www.aaxpro.com/apidoc/index.html",fees:"https://www.aaxpro.com/en-US/fees/",referral:"https://www.aaxpro.com/invite/sign-up?inviteCode=JXGm5Fy7R2MB"},api:{v1:{get:["getHistMarketData"]},public:{get:["announcement/maintenance","instruments","market/orderbook","futures/position/openInterest","market/tickers","market/candles","market/history/candles","market/trades","market/markPrice","futures/funding/predictedFunding/{symbol}","futures/funding/prevFundingRate/{symbol}","market/candles/index"]},private:{get:["user/info","account/balances","account/deposit/address","spot/trades","spot/openOrders","spot/orders","futures/position","futures/position/closed","futures/trades","futures/openOrders","futures/orders","futures/funding/predictedFundingFee/{symbol}"],post:["account/transfer","spot/orders","spot/orders/cancelAllOnTimeout","futures/orders","futures/orders/cancelAllOnTimeout","futures/position/sltp","futures/position/close","futures/position/leverage","futures/position/margin"],put:["spot/orders","futures/orders"],delete:["spot/orders/cancel/{orderID}","spot/orders/cancel/all","futures/orders/cancel/{orderID}","futures/orders/cancel/all"]}},fees:{trading:{tierBased:!1,percentage:!0,maker:6e-4,taker:.001},funding:{tierBased:!1,percentage:!0,withdraw:{}}},commonCurrencies:{XBT:"XBT"},exceptions:{exact:{2002:k,2003:g,10003:w,10006:p,10007:p,11007:p,20001:k,20009:y,3e4:g,30001:y,30004:y,30005:y,30006:y,30007:y,30008:y,30009:y,30010:y,30011:b,30012:w,30013:_,30014:g,30015:y,30016:v,30017:y,30018:y,30019:y,30020:y,30021:y,30022:y,30023:y,30024:y,30025:y,30026:y,30027:y,30028:_,30029:y,30030:y,30031:y,30032:y,30033:y,30034:x,30035:x,30036:m,30037:y,30038:v,30039:k,30040:y,30041:y,30042:y,30043:y,30044:w,30045:y,30046:y,30047:y,30048:y,30049:y,30050:y,40004:w,40009:x,40102:p,40103:p,40303:S,41001:w,41002:w,42001:m,50001:v,50002:v},broad:{}},precisionMode:O,options:{defaultType:"spot"}})}},{key:"fetchStatus",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:{},e.next=3,this.publicGetAnnouncementMaintenance(t);case 3:return r=e.sent,n=this.safeValue(r,"data",{}),a=this.milliseconds(),s=this.parse8601(this.safeString(n,"startTime")),o=this.parse8601(this.safeString(n,"endTime")),u={updated:this.safeInteger(r,"ts",a)},void 0!==o&&(c=void 0===s||a<s,d=a>o||c,u.eta=o,u.status=d?"ok":"maintenance"),this.status=this.extend(this.status,u),e.abrupt("return",this.status);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p,v,m,g,y,b,x,k,w,_,S,O,T=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=T.length>0&&void 0!==T[0]?T[0]:{},e.next=3,this.publicGetInstruments(t);case 3:for(r=e.sent,n=this.safeValue(r,"data"),a=[],s=0;s<n.length;s++)o=n[s],u=this.safeString(o,"symbol"),c=this.safeString(o,"base"),d=this.safeString(o,"quote"),h=this.safeCurrencyCode(c),l=this.safeCurrencyCode(d),f=this.safeString(o,"status"),p="enable"===f,v=this.safeNumber(o,"takerFee"),m=this.safeNumber(o,"makerFee"),g=this.safeString(o,"type"),y=void 0,b=void 0,x=void 0,k="spot"===g,w="futures"===g,void 0!==(_=this.safeStringLower(o,"settleType"))&&(y="inverse"===_,b="vanilla"===_,x="quanto"===_),S=u,"spot"===g&&(S=h+"/"+l),O={amount:this.safeNumber(o,"lotSize"),price:this.safeNumber(o,"tickSize")},a.push({id:u,symbol:S,base:h,quote:l,baseId:c,quoteId:d,type:g,spot:k,futures:w,inverse:y,linear:b,quanto:x,precision:O,info:o,active:p,taker:v,maker:m,percentage:!1,tierBased:!0,limits:{amount:{min:this.safeString(o,"minQuantity"),max:this.safeString(o,"maxQuantity")},price:{min:this.safeString(o,"minPrice"),max:this.safeString(o,"maxPrice")},cost:{min:void 0,max:void 0}}});return e.abrupt("return",a);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeInteger(e,"t"),i=this.safeString(e,"s"),n=this.safeSymbol(i,t),a=this.safeNumber(e,"c"),s=this.safeNumber(e,"o"),o=void 0,u=void 0,c=void 0;void 0!==a&&void 0!==s&&(o=a-s,s>0&&(u=o/s*100),c=this.sum(a,s)/2);var d=this.safeNumber(e,"v");return{symbol:n,timestamp:r,datetime:this.iso8601(r),high:this.safeNumber(e,"h"),low:this.safeNumber(e,"l"),bid:void 0,bidVolume:void 0,ask:void 0,askVolume:void 0,vwap:void 0,open:s,close:a,last:a,previousClose:void 0,change:o,percentage:u,average:c,baseVolume:void 0,quoteVolume:d,info:e}}},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:{},e.next=3,this.fetchTickers(void 0,r);case 3:if(n=e.sent,!(t in n)){e.next=6;break}return e.abrupt("return",n[t]);case 6:throw new _(this.id+" fetchTicker() symbol "+t+" ticker not found");case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetMarketTickers(r);case 6:for(n=e.sent,a=this.safeValue(n,"tickers",[]),s=[],o=this.safeInteger(n,"t"),u=0;u<a.length;u++)c=this.parseTicker(this.extend(a[u],{t:o})),s.push(c);return e.abrupt("return",this.filterByArray(s,"symbol",t));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:{},e.next=4,this.loadMarkets();case 4:if(a=this.market(t),void 0!==r){e.next=9;break}r=20,e.next=11;break;case 9:if(20===r||50===r){e.next=11;break}throw new w(this.id+" fetchOrderBook() limit argument must be undefined, 20 or 50");case 11:return s={symbol:a.id,level:r},e.next=14,this.publicGetMarketOrderbook(this.extend(s,n));case 14:return o=e.sent,u=this.safeInteger(o,"t"),e.abrupt("return",this.parseOrderBook(o,u));case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeInteger(e,"t");void 0===r&&(r=this.parse8601(this.safeString(e,"createTime")));var i=this.safeString2(e,"tid","tradeID"),n=void 0,a=this.safeString(e,"symbol");void 0!==(t=this.safeMarket(a,t))&&(n=t.symbol);var s=this.safeString2(e,"p","filledPrice"),o=this.safeString2(e,"q","filledQty"),u=this.safeString(e,"orderID"),c=this.safeValue(e,"taker"),d=void 0;void 0!==c&&(d=c?"taker":"maker");var h=this.safeString(e,"side");"1"===h?h="buy":"2"===h&&(h="sell"),void 0===h&&(h="-"===s[0]?"sell":"buy"),s=T.stringAbs(s);var l=this.parseNumber(s),f=this.parseNumber(o),p=this.parseNumber(T.stringMul(s,o)),v=this.parseOrderType(this.safeString(e,"orderType")),m=void 0,g=this.safeNumber(e,"commission");if(void 0!==g){var y=void 0;void 0!==t&&("buy"===h?y=t.base:"sell"===h&&(y=t.quote)),m={currency:y,cost:g}}return{info:e,id:i,timestamp:r,datetime:this.iso8601(r),symbol:n,type:v,side:h,order:u,takerOrMaker:d,price:l,amount:f,cost:p,fee:m}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,c.length>3&&void 0!==c[3]?c[3]:{},e.next=5,this.loadMarkets();case 5:return a=this.market(t),n=void 0===n?2e3:n,n=Math.min(n,2e3),s={symbol:a.id,limit:n},e.next=11,this.publicGetMarketTrades(s);case 11:return o=e.sent,u=this.safeValue(o,"trades",[]),e.abrupt("return",this.parseTrades(u,a,r,n));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){return[this.safeTimestamp(e,5),this.safeNumber(e,0),this.safeNumber(e,1),this.safeNumber(e,2),this.safeNumber(e,3),this.safeNumber(e,4)]}},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=p.length>1&&void 0!==p[1]?p[1]:"1h",n=p.length>2&&void 0!==p[2]?p[2]:void 0,a=p.length>3&&void 0!==p[3]?p[3]:void 0,s=p.length>4&&void 0!==p[4]?p[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),u={symbol:o.id,timeFrame:this.timeframes[r]},a=void 0===a?500:a,c=this.parseTimeframe(r),void 0===n?(d=this.seconds(),u.start=d-c*a,u.end=d):(h=parseInt(n/1e3),u.start=h,u.end=this.sum(h,c*a)),e.next=13,this.publicGetMarketHistoryCandles(this.extend(u,s));case 13:return l=e.sent,f=this.safeValue(l,"data",[]),e.abrupt("return",this.parseOHLCVs(f,o,r,n,a));case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p,v,m=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=m.length>0&&void 0!==m[0]?m[0]:{},e.next=3,this.loadMarkets();case 3:return r=this.safeString2(this.options,"fetchBalance","defaultType","spot"),n=this.safeString(t,"type",r),a={spot:"SPTP",future:"FUTP",otc:"F2CP",saving:"VLTP"},s=this.safeString(a,n,n),o={purseType:s},t=this.omit(t,"type"),e.next=11,this.privateGetAccountBalances(this.extend(o,t));case 11:for(u=e.sent,c=this.safeValue(u,"data"),d={info:u},h=0;h<c.length;h++)l=c[h],this.safeString(l,"purseType")===s&&(f=this.safeString(l,"currency"),p=this.safeCurrencyCode(f),(v=this.account()).free=this.safeString(l,"available"),v.used=this.safeString(l,"unavailable"),d[p]=v);return e.abrupt("return",this.parseBalance(d,!1));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,u,c,d,h,l,p,v,m,g,y,b=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=b.length>4&&void 0!==b[4]?b[4]:void 0,o=b.length>5&&void 0!==b[5]?b[5]:{},u=r.toUpperCase(),c=n.toUpperCase(),e.next=6,this.loadMarkets();case 6:if(d=this.market(t),h={symbol:d.id,orderQty:this.amountToPrecision(t,a),side:c},void 0!==(l=this.safeString(o,"timeInForce"))&&(h.timeInForce=l,o=this.omit(o,"timeInForce")),void 0!==(p=this.safeString2(o,"clOrdID","clientOrderId"))&&(h.clOrdID=p,o=this.omit(o,["clOrdID","clientOrderId"])),void 0!==(v=this.safeNumber(o,"stopPrice"))){e.next=18;break}if("STOP-LIMIT"!==u&&"STOP"!==u){e.next=16;break}throw new f(this.id+" createOrder() requires a stopPrice parameter for "+u+" orders");case 16:e.next=21;break;case 18:"LIMIT"===u?u="STOP-LIMIT":"MARKET"===u&&(u="STOP"),h.stopPrice=this.priceToPrecision(t,v),o=this.omit(o,"stopPrice");case 21:return"LIMIT"!==u&&"STOP-LIMIT"!==u||(h.price=this.priceToPrecision(t,s)),h.orderType=u,m=void 0,d.spot?m="privatePostSpotOrders":d.futures&&(m="privatePostFuturesOrders"),e.next=27,this[m](this.extend(h,o));case 27:return g=e.sent,y=this.safeValue(g,"data",{}),e.abrupt("return",this.parseOrder(y,d));case 30:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"editOrder",value:function(){var e=n(i.mark((function e(t,r,n,a,s){var o,u,c,d,h,l,f,p,v=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=v.length>5&&void 0!==v[5]?v[5]:void 0,u=v.length>6&&void 0!==v[6]?v[6]:{},e.next=4,this.loadMarkets();case 4:return c=this.market(r),d={orderID:t},void 0!==(h=this.safeNumber(u,"stopPrice"))&&(d.stopPrice=this.priceToPrecision(r,h),u=this.omit(u,"stopPrice")),void 0!==o&&(d.price=this.priceToPrecision(r,o)),void 0!==s&&(d.orderQty=this.amountToPrecision(r,s)),l=void 0,c.spot?l="privatePutSpotOrders":c.futures&&(l="privatePutFuturesOrders"),e.next=14,this[l](this.extend(d,u));case 14:return f=e.sent,p=this.safeValue(f,"data",{}),e.abrupt("return",this.parseOrder(p,c));case 17:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n,a){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>1&&void 0!==l[1]?l[1]:void 0,n=l.length>2&&void 0!==l[2]?l[2]:{},e.next=4,this.loadMarkets();case 4:return a={orderID:t},s=void 0,o=this.safeString2(this.options,"cancelOrder","defaultType","spot"),u=this.safeString(n,"type",o),n=this.omit(n,"type"),c=void 0,void 0!==r&&(c=this.market(r),u=c.type),"spot"===u?s="privateDeleteSpotOrdersCancelOrderID":"futures"===u&&(s="privateDeleteFuturesOrdersCancelOrderID"),e.next=14,this[s](this.extend(a,n));case 14:return d=e.sent,h=this.safeValue(d,"data",{}),e.abrupt("return",this.parseOrder(h,c));case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cancelAllOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:{},void 0!==t){e.next=4;break}throw new f(this.id+" cancelAllOrders() requires a symbol argument");case 4:return e.next=6,this.loadMarkets();case 6:return n=this.market(t),a={symbol:n.id},s=void 0,n.spot?s="privateDeleteSpotOrdersCancelAll":n.futures&&(s="privateDeleteFuturesOrdersCancelAll"),e.next=12,this[s](this.extend(a,r));case 12:return o=e.sent,e.abrupt("return",o);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:{},e.next=4,this.loadMarkets();case 4:return a=this.safeString2(this.options,"fetchOrder","defaultType","spot"),n.type=this.safeString(n,"type",a),s={},void 0===(o=this.safeString2(n,"clOrdID","clientOrderId"))?s.orderID=t:(s.clOrdID=o,n=this.omit(n,["clOrdID","clientOrderId"])),e.next=11,this.fetchOrders(r,void 0,void 0,this.extend(s,n));case 11:if(u=e.sent,void 0!==(c=this.safeValue(u,0))){e.next=19;break}if(void 0!==o){e.next=18;break}throw new g(this.id+" fetchOrder() could not find order id "+t);case 18:throw new g(this.id+" fetchOrder() could not find order clientOrderID "+o);case 19:return e.abrupt("return",c);case 20:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p,v=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=v.length>0&&void 0!==v[0]?v[0]:void 0,r=v.length>1&&void 0!==v[1]?v[1]:void 0,n=v.length>2&&void 0!==v[2]?v[2]:void 0,a=v.length>3&&void 0!==v[3]?v[3]:{},e.next=6,this.loadMarkets();case 6:return s={},o=this.safeString2(this.options,"fetchOpenOrders","defaultType","spot"),u=this.safeString(a,"type",o),a=this.omit(a,"type"),c=void 0,void 0!==t&&(c=this.market(t),s.symbol=c.id,u=c.type),void 0!==(d=this.safeString2(a,"clOrdID","clientOrderId"))&&(s.clOrdID=d,a=this.omit(a,["clOrdID","clientOrderId"])),h=void 0,"spot"===u?h="privateGetSpotOpenOrders":"futures"===u&&(h="privateGetFuturesOpenOrders"),void 0!==n&&(s.pageSize=n),e.next=19,this[h](this.extend(s,a));case 19:return l=e.sent,f=this.safeValue(l,"data",{}),p=this.safeValue(f,"list",[]),e.abrupt("return",this.parseOrders(p,c,r,n));case 23:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:void 0,a=o.length>3&&void 0!==o[3]?o[3]:{},s={orderStatus:"2"},e.next=7,this.fetchOrders(t,r,n,this.extend(s,a));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchCanceledOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:void 0,a=o.length>3&&void 0!==o[3]?o[3]:{},s={orderStatus:"3"},e.next=7,this.fetchOrders(t,r,n,this.extend(s,a));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p,v=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=v.length>0&&void 0!==v[0]?v[0]:void 0,r=v.length>1&&void 0!==v[1]?v[1]:void 0,n=v.length>2&&void 0!==v[2]?v[2]:void 0,a=v.length>3&&void 0!==v[3]?v[3]:{},e.next=6,this.loadMarkets();case 6:return s={},o=void 0,u=this.safeString2(this.options,"fetchOrders","defaultType","spot"),c=this.safeString(a,"type",u),a=this.omit(a,"type"),d=void 0,void 0!==t&&(d=this.market(t),s.symbol=d.id,c=d.type),"spot"===c?o="privateGetSpotOrders":"futures"===c&&(o="privateGetFuturesOrders"),void 0!==(h=this.safeString2(a,"clOrdID","clientOrderId"))&&(s.clOrdID=h,a=this.omit(a,["clOrdID","clientOrderId"])),void 0!==n&&(s.pageSize=n),void 0!==r&&(s.startDate=this.ymd(r)),e.next=20,this[o](this.extend(s,a));case 20:return l=e.sent,f=this.safeValue(l,"data",{}),p=this.safeValue(f,"list",[]),e.abrupt("return",this.parseOrders(p,d,r,n));case 24:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({0:"open",1:"open",2:"open",3:"closed",4:"canceled",5:"canceled",6:"rejected",10:"expired",11:"rejected"},e,e)}},{key:"parseOrderType",value:function(e){return this.safeString({1:"market",2:"limit",3:"stop",4:"stop-limit",7:"stop-loss",8:"take-profit"},e,e)}},{key:"parseTimeInForce",value:function(e){return this.safeString({1:"GTC",3:"IOC",4:"FOK"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeValue(e,"createTime");"string"===typeof r&&(r=this.parse8601(r));var i=this.parseOrderStatus(this.safeString(e,"orderStatus")),n=this.parseOrderType(this.safeString(e,"orderType")),a=this.safeString(e,"side");"1"===a?a="buy":"2"===a&&(a="sell");var s=this.safeString(e,"orderID"),o=this.safeString(e,"clOrdID"),u=this.safeString(e,"symbol"),c=(t=this.safeMarket(u,t)).symbol,d=this.safeNumber(e,"price"),h=this.safeNumber(e,"stopPrice"),l=this.parseTimeInForce(this.safeString(e,"timeInForce")),f=this.safeString(e,"execInst"),p="Post-Only"===f,v=this.safeNumber(e,"avgPrice"),m=this.safeNumber(e,"orderQty"),g=this.safeNumber(e,"cumQty"),y=this.safeNumber(e,"leavesQty");0===g&&0===y&&(y=void 0);var b=void 0,x=void 0;void 0!==g&&(void 0!==d&&(b=g*d),g>0&&"string"===typeof(x=this.safeValue(e,"transactTime"))&&(x=this.parse8601(x)));var k=void 0,w=this.safeNumber(e,"commission");if(void 0!==w){var _=void 0;void 0!==t&&("buy"===a?_=t.base:"sell"===a&&(_=t.quote)),k={currency:_,cost:w}}return{id:s,info:e,clientOrderId:o,timestamp:r,datetime:this.iso8601(r),lastTradeTimestamp:x,status:i,symbol:c,type:n,timeInForce:l,postOnly:p,side:a,price:d,stopPrice:h,average:v,amount:m,filled:g,remaining:y,cost:b,trades:void 0,fee:k}}},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.length>0&&void 0!==p[0]?p[0]:void 0,r=p.length>1&&void 0!==p[1]?p[1]:void 0,n=p.length>2&&void 0!==p[2]?p[2]:void 0,a=p.length>3&&void 0!==p[3]?p[3]:{},e.next=6,this.loadMarkets();case 6:return s={},o=void 0,u=this.safeString2(this.options,"fetchMyTrades","defaultType","spot"),c=this.safeString(a,"type",u),a=this.omit(a,"type"),d=void 0,void 0!==t&&(d=this.market(t),s.symbol=d.id,c=d.type),"spot"===c?o="privateGetSpotTrades":"futures"===c&&(o="privateGetFuturesTrades"),void 0!==n&&(s.pageSize=n),void 0!==r&&(s.startDate=this.ymd(r)),e.next=18,this[o](this.extend(s,a));case 18:return h=e.sent,l=this.safeValue(h,"data",{}),f=this.safeValue(l,"list",[]),e.abrupt("return",this.parseTrades(f,d,r,n));case 22:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchDepositAddress",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.currency(t),a={currency:n.id},e.next=7,this.privateGetAccountDepositAddress(this.extend(a,r));case 7:return s=e.sent,o=this.safeValue(s,"data",{}),e.abrupt("return",this.parseDepositAddress(o,n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseDepositAddress",value:function(e){var t=this.safeString(e,"address"),r=this.safeString(e,"tag"),i=this.safeString(e,"currency"),n=this.safeCurrencyCode(i);return{info:e,code:n,address:t,tag:r}}},{key:"nonce",value:function(){return this.milliseconds()}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s="/"+this.implodeParams(e,i),o=this.omit(i,this.extractParams(e));if("v1"===t)Object.keys(o).length&&(s+="?"+this.urlencode(o));else if(s="/"+this.version+s,"public"===t)Object.keys(o).length&&(s+="?"+this.urlencode(o));else if("private"===t){this.checkRequiredCredentials();var u=this.nonce().toString();n={"X-ACCESS-KEY":this.apiKey,"X-ACCESS-NONCE":u};var c=u+":"+r;"GET"===r?(Object.keys(o).length&&(s+="?"+this.urlencode(o)),c+=s):(n["Content-Type"]="application/json",c+=s+(a=this.json(o)));var d=this.hmac(this.encode(c),this.encode(this.secret));n["X-ACCESS-SIGN"]=d}return{url:s=this.implodeParams(this.urls.api[t],{hostname:this.hostname})+s,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,u){if(void 0!==s){var c=this.safeString(s,"code");if(void 0!==c&&"1"!==c){var d=this.id+" "+this.json(s);this.throwExactlyMatchedException(this.exceptions.exact,c,d),this.throwBroadlyMatchedException(this.exceptions.broad,a,d)}}}}]),r}(h)},function(e,t,r){var i=r(3);e.exports=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=i(e)););return e}},function(e,t,r){"use strict";var i=r(7),n=r(8),a=r(1),s=r(2),o=r(6),u=r(3),c=r(4),d=r(5),h=r(11),l=r(10),f=l.ArgumentsRequired,p=l.ExchangeError,v=l.BadSymbol,m=l.InvalidOrder,g=l.PermissionDenied,y=l.InvalidAddress,b=l.AuthenticationError,x=l.InvalidNonce,k=l.BadRequest,w=l.InsufficientFunds,_=l.OrderNotFound,S=r(18).TRUNCATE,O=r(12);e.exports=function(e){c(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(u(r.prototype),"describe",this).call(this),{id:"aofex",name:"AOFEX",countries:["GB"],rateLimit:1e3,hostname:"openapi.aofex.com",has:{fetchMarkets:!0,fetchCurrencies:!1,fetchOrderBook:!0,fetchTrades:!0,fetchTicker:!0,fetchTickers:!0,fetchOHLCV:!0,fetchBalance:!0,createOrder:!0,cancelOrder:!0,cancelAllOrders:!0,fetchOpenOrders:!0,fetchClosedOrders:!0,fetchClosedOrder:!0,fetchOrderTrades:!0,fetchTradingFee:!0},timeframes:{"1m":"1min","5m":"5min","15m":"15min","30m":"30min","1h":"1hour","6h":"6hour","12h":"12hour","1d":"1day","1w":"1week"},urls:{logo:"https://user-images.githubusercontent.com/51840849/77670271-056d1080-6f97-11ea-9ac2-4268e9ed0c1f.jpg",api:{public:"https://{hostname}/openApi",private:"https://{hostname}/openApi"},www:"https://aofex.com",doc:"https://aofex.zendesk.com/hc/en-us/sections/360005576574-API",fees:"https://aofex.zendesk.com/hc/en-us/articles/360025814934-Fees-on-AOFEX",referral:"https://aofex.com/#/register?key=9763840"},api:{public:{get:["market/symbols","market/trade","market/depth","market/kline","market/precision","market/24kline","market/gears_depth","market/detail"]},private:{get:["entrust/currentList","entrust/historyList","entrust/rate","wallet/list","entrust/detail"],post:["entrust/add","entrust/cancel"]}},fees:{trading:{maker:.0019,taker:.002}},exceptions:{exact:{20001:p,20401:g,20500:p,20501:v,20502:p,20503:p,20504:w,20505:k,20506:b,20507:p,20508:y,20509:w,20510:m,20511:m,20512:m,20513:m,20514:m,20515:m,20516:m,20517:m,50518:m,20519:x,20520:x,20521:k,20522:p,20523:b,20524:g,20525:b,20526:g,20527:g,20528:g,20529:b,20530:g},broad:{}},options:{fetchBalance:{show_all:"0"}},commonCurrencies:{CPC:"Consensus Planet Coin"}})}},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p,v,m,g,y,b,x=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=x.length>0&&void 0!==x[0]?x[0]:{},e.next=3,this.publicGetMarketSymbols(t);case 3:return r=e.sent,e.next=6,this.publicGetMarketPrecision();case 6:for(n=e.sent,n=this.safeValue(n,"result",{}),r=this.safeValue(r,"result",[]),a=[],s=0;s<r.length;s++)o=r[s],u=this.safeString(o,"symbol"),c=this.safeString(o,"base_currency"),d=this.safeString(o,"quote_currency"),h=this.safeCurrencyCode(c),l=this.safeCurrencyCode(d),f=h+"/"+l,p=this.safeInteger(o,"id"),v=this.safeValue(n,u,{}),m=this.safeString(o,"maker_fee"),g=this.safeString(o,"taker_fee"),y=this.parseNumber(O.stringDiv(m,"1000")),b=this.parseNumber(O.stringDiv(g,"1000")),a.push({id:u,numericId:p,symbol:f,baseId:c,quoteId:d,base:h,quote:l,active:void 0,maker:y,taker:b,precision:{amount:this.safeInteger(v,"amount"),price:this.safeInteger(v,"price")},limits:{amount:{min:this.safeNumber(o,"min_size"),max:this.safeNumber(o,"max_size")},price:{min:this.safeNumber(o,"min_price"),max:this.safeNumber(o,"max_price")},cost:{min:void 0,max:void 0}},info:o});return e.abrupt("return",a);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){return[this.safeTimestamp(e,"id"),this.safeNumber(e,"open"),this.safeNumber(e,"high"),this.safeNumber(e,"low"),this.safeNumber(e,"close"),this.safeNumber(e,"amount")]}},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>1&&void 0!==l[1]?l[1]:"1m",n=l.length>2&&void 0!==l[2]?l[2]:void 0,a=l.length>3&&void 0!==l[3]?l[3]:void 0,s=l.length>4&&void 0!==l[4]?l[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),void 0===a&&(a=150),u={symbol:o.id,period:this.timeframes[r],size:a},e.next=11,this.publicGetMarketKline(this.extend(u,s));case 11:return c=e.sent,d=this.safeValue(c,"result",{}),h=this.safeValue(d,"data",[]),e.abrupt("return",this.parseOHLCVs(h,o,n,a));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.length>0&&void 0!==p[0]?p[0]:{},e.next=3,this.loadMarkets();case 3:return r=this.safeValue(this.options,"fetchBalance",{}),n=this.safeValue(r,"show_all","0"),a={show_all:n},e.next=8,this.privateGetWalletList(this.extend(a,t));case 8:for(s=e.sent,o={info:s},u=this.safeValue(s,"result",[]),c=0;c<u.length;c++)d=u[c],h=this.safeString(d,"currency"),l=this.safeCurrencyCode(h),(f=this.account()).free=this.safeString(d,"available"),f.used=this.safeString(d,"frozen"),o[l]=f;return e.abrupt("return",this.parseBalance(o,!1));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTradingFee",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={symbol:n.id},e.next=7,this.privateGetEntrustRate(this.extend(a,r));case 7:return s=e.sent,o=this.safeValue(s,"result",{}),e.abrupt("return",{info:s,symbol:t,maker:this.safeNumber(o,"fromFee"),taker:this.safeNumber(o,"toFee")});case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u.length>1&&void 0!==u[1]?u[1]:void 0,r=u.length>2&&void 0!==u[2]?u[2]:{},e.next=4,this.loadMarkets();case 4:return n={symbol:this.marketId(t)},e.next=7,this.publicGetMarketDepth(this.extend(n,r));case 7:return a=e.sent,s=this.safeValue(a,"result",{}),o=this.safeInteger(s,"ts"),e.abrupt("return",this.parseOrderBook(s,o));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeTimestamp(e,"id"),i=void 0;t&&(i=t.symbol);var n=this.safeNumber(e,"open"),a=this.safeNumber(e,"close"),s=void 0;s=void 0!==i?parseFloat(this.priceToPrecision(i,a-n)):a-n;var o=this.sum(a,n)/2,u=s/n*100,c=this.safeNumber(e,"amount"),d=this.safeNumber(e,"vol"),h=this.vwap(c,d);return void 0!==h&&(h=parseFloat(this.priceToPrecision(i,h))),{symbol:i,timestamp:r,datetime:this.iso8601(r),high:this.safeNumber(e,"high"),low:this.safeNumber(e,"low"),bid:void 0,bidVolume:void 0,ask:void 0,askVolume:void 0,vwap:h,open:n,close:a,last:a,previousClose:void 0,change:s,percentage:u,average:o,baseVolume:c,quoteVolume:d,info:e}}},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.length>0&&void 0!==p[0]?p[0]:void 0,r=p.length>1&&void 0!==p[1]?p[1]:{},e.next=4,this.loadMarkets();case 4:return n={},void 0!==t&&(a=this.marketIds(t),n.symbol=a.join(",")),e.next=8,this.publicGetMarket24kline(this.extend(n,r));case 8:for(s=e.sent,o=this.safeValue(s,"result",[]),u={},c=0;c<o.length;c++)d=this.safeString(o[c],"symbol"),h=this.safeMarket(d,void 0,"-"),l=h.symbol,f=this.safeValue(o[c],"data",{}),u[l]=this.parseTicker(f,h);return e.abrupt("return",this.filterByArray(u,"symbol",t));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={symbol:n.id},e.next=7,this.publicGetMarketDetail(this.extend(a,r));case 7:return s=e.sent,o=this.safeValue(s,"result",{}),e.abrupt("return",this.parseTicker(o,n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),i=this.parse8601(this.safeString(e,"ctime")),n=this.safeTimestamp(e,"ts",i)-288e5,a=void 0;void 0===a&&void 0!==t&&(a=t.symbol);var s=this.safeString(e,"direction"),o=this.safeString(e,"price"),u=this.safeString2(e,"amount","number"),c=this.parseNumber(o),d=this.parseNumber(u),h=this.safeNumber(e,"total_price");void 0===h&&(h=this.parseNumber(O.stringMul(o,u)));var l=this.safeNumber(e,"fee"),f=void 0;if(void 0!==l){var p=void 0;void 0!==t&&("buy"===s?p=t.base:"sell"===s&&(p=t.quote)),f={cost:l,currency:p}}return{id:r,info:e,timestamp:n,datetime:this.iso8601(n),symbol:a,order:void 0,type:void 0,side:s,takerOrMaker:void 0,price:c,amount:d,cost:h,fee:f}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={symbol:s.id},e.next=9,this.publicGetMarketTrade(this.extend(o,a));case 9:return u=e.sent,c=this.safeValue(u,"result",{}),d=this.safeValue(c,"data",[]),e.abrupt("return",this.parseTrades(d,s,r,n));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({1:"open",2:"open",3:"closed",4:"canceled",5:"canceled",6:"canceled"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"order_sn"),i=this.safeString(e,"status"),n=this.parseOrderStatus(i),a=this.safeString(e,"symbol");t=this.safeMarket(a,t,"-");var s=this.parse8601(this.safeString(e,"ctime"));void 0!==s&&(s-=288e5);var o=this.safeString(e,"type"),u="2"===o?"limit":"market",c=this.safeString(e,"side"),d=void 0,h=void 0,l=void 0,f=void 0,p=this.safeNumber(e,"number"),v=this.safeNumber(e,"total_price");"limit"===u?(l=p,h=this.safeNumber(e,"price")):(f=this.safeNumber(e,"deal_price"),l="buy"===c?this.safeNumber(e,"deal_number"):p);for(var m=this.safeValue(e,"trades",[]),g=0;g<m.length;g++)m[g].direction=c;var y=this.parseTrades(m,t,void 0,void 0,{symbol:t.symbol,order:r,type:u});"limit"===u?d=v:"buy"===c&&(d=p);var b=void 0;return"limit"===u&&"3"===i&&(b=l),this.safeOrder({info:e,id:r,clientOrderId:void 0,timestamp:s,datetime:this.iso8601(s),lastTradeTimestamp:void 0,status:n,symbol:t.symbol,type:u,timeInForce:void 0,postOnly:void 0,side:c,price:h,stopPrice:void 0,cost:d,average:f,amount:l,filled:b,remaining:void 0,trades:y,fee:void 0})}},{key:"fetchClosedOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.length>1&&void 0!==c[1]?c[1]:void 0,r=c.length>2&&void 0!==c[2]?c[2]:{},e.next=4,this.loadMarkets();case 4:return n={order_sn:t},e.next=7,this.privateGetEntrustDetail(this.extend(n,r));case 7:return a=e.sent,s=this.safeValue(a,"result",{}),o=this.safeValue(s,"trades",[]),(u=this.safeValue(s,"entrust",{})).trades=o,e.abrupt("return",this.parseOrder(u));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrderTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>1&&void 0!==s[1]?s[1]:void 0,s.length>2&&void 0!==s[2]?s[2]:void 0,s.length>3&&void 0!==s[3]?s[3]:void 0,n=s.length>4&&void 0!==s[4]?s[4]:{},e.next=6,this.fetchClosedOrder(t,r,n);case 6:return a=e.sent,e.abrupt("return",this.safeValue(a,"trades",[]));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrdersWithMethod",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:void 0,s=h.length>4&&void 0!==h[4]?h[4]:{},e.next=6,this.loadMarkets();case 6:return o={direct:"prev"},u=void 0,void 0!==r&&(u=this.market(r),o.symbol=u.id),void 0!==a&&(o.limit=a),e.next=12,this[t](this.extend(o,s));case 12:return c=e.sent,d=this.safeValue(c,"result",[]),e.abrupt("return",this.parseOrders(d,u,n,a));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:void 0,n=s.length>2&&void 0!==s[2]?s[2]:void 0,a=s.length>3&&void 0!==s[3]?s[3]:{},e.next=6,this.fetchOrdersWithMethod("privateGetEntrustCurrentList",t,r,n,a);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:void 0,n=s.length>2&&void 0!==s[2]?s[2]:void 0,a=s.length>3&&void 0!==s[3]?s[3]:{},e.next=6,this.fetchOrdersWithMethod("privateGetEntrustHistoryList",t,r,n,a);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,u,c,d,h,l,f,p,v,g,y,b=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=b.length>4&&void 0!==b[4]?b[4]:void 0,o=b.length>5&&void 0!==b[5]?b[5]:{},e.next=4,this.loadMarkets();case 4:if(u=this.market(t),c=n+"-"+r,d={symbol:u.id,type:c},"limit"!==r){e.next=12;break}d.amount=this.amountToPrecision(t,a),d.price=this.priceToPrecision(t,s),e.next=27;break;case 12:if("market"!==r){e.next=27;break}if("buy"!==n){e.next=26;break}if(h=this.safeValue(this.options,"createMarketBuyOrderRequiresPrice",!0),l=a,!h){e.next=22;break}if(void 0===s){e.next=21;break}l=a*s,e.next=22;break;case 21:throw new m(this.id+" createOrder() requires the price argument with market buy orders to calculate total order cost (amount to spend), where cost = amount * price. Supply a price argument to createOrder() call if you want the cost to be calculated for you from price and amount, or, alternatively, add .options['createMarketBuyOrderRequiresPrice'] = false and supply the total cost value in the 'amount' argument");case 22:f=u.precision.price,d.amount=this.decimalToPrecision(l,S,f,this.precisionMode),e.next=27;break;case 26:d.amount=this.amountToPrecision(t,a);case 27:return e.next=29,this.privatePostEntrustAdd(this.extend(d,o));case 29:return p=e.sent,v=this.safeValue(p,"result",{}),g=this.parseOrder(v,u),y=this.milliseconds(),e.abrupt("return",this.extend(g,{timestamp:y,datetime:this.iso8601(y),amount:a,price:s,type:r,side:n}));case 34:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:{},e.next=4,this.loadMarkets();case 4:return a={order_ids:t},e.next=7,this.privatePostEntrustCancel(this.extend(a,n));case 7:if(s=e.sent,o=this.safeValue(s,"result",{}),u=this.safeValue(o,"success",[]),this.inArray(t,u)){e.next=12;break}throw new _(this.id+" order id "+t+" not found in successfully canceled orders: "+this.json(s));case 12:return c=void 0,e.abrupt("return",{info:s,id:t,timestamp:c,datetime:this.iso8601(c),lastTradeTimestamp:void 0,status:"canceled",symbol:r,type:void 0,side:void 0,price:void 0,cost:void 0,average:void 0,amount:void 0,filled:void 0,remaining:void 0,trades:void 0,fee:void 0,clientOrderId:void 0});case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cancelAllOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:{},void 0!==t){e.next=4;break}throw new f(this.id+" cancelAllOrders() requires a symbol argument");case 4:return e.next=6,this.loadMarkets();case 6:return n=this.market(t),a={symbol:n.id},e.next=10,this.privatePostEntrustCancel(this.extend(a,r));case 10:return s=e.sent,e.abrupt("return",s);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"nonce",value:function(){return this.milliseconds()}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.implodeParams(this.urls.api[t],{hostname:this.hostname})+"/"+e,o=Object.keys(i),u=o.length;if("public"===t)u>0&&(s+="?"+this.urlencode(i));else{var c=this.nonce().toString(),d=this.uuid(),h=d.slice(0,5),l=c+"_"+h,f={};f[this.apiKey]=this.apiKey,f[this.secret]=this.secret,f[l]=l;for(var p=0;p<u;p++){var v=o[p];f[v]=v+"="+i[v]}var m=this.keysort(f),g="";o=Object.keys(m);for(var y=0;y<o.length;y++){var b=o[y];g+=m[b]}var x=this.hash(this.encode(g),"sha1");n={Nonce:l,Token:this.apiKey,Signature:x},"POST"===r?(n["Content-Type"]="application/x-www-form-urlencoded",u>0&&(a=this.urlencode(i))):u>0&&(s+="?"+this.urlencode(i))}return{url:s,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,u){if(void 0!==s){var c=this.safeString(s,"errno");if(void 0!==c&&"0"!==c){var d=this.safeString(s,"errmsg"),h=this.id+" "+a;throw this.throwExactlyMatchedException(this.exceptions.exact,c,h),this.throwBroadlyMatchedException(this.exceptions.broad,d,h),new p(h)}}}}]),r}(h)},function(e,t,r){"use strict";var i=r(21),n=r(7),a=r(8),s=r(1),o=r(2),u=r(6),c=r(3),d=r(4),h=r(5),l=r(11),f=r(10),p=f.ArgumentsRequired,v=f.AuthenticationError,m=f.ExchangeError,g=f.InsufficientFunds,y=f.InvalidOrder,b=f.BadSymbol,x=f.PermissionDenied,k=f.BadRequest,w=r(18).TICK_SIZE,_=r(12);e.exports=function(e){d(r,e);var t=h(r);function r(){return s(this,r),t.apply(this,arguments)}return o(r,[{key:"describe",value:function(){return this.deepExtend(u(c(r.prototype),"describe",this).call(this),{id:"ascendex",name:"AscendEX",countries:["SG","CN"],rateLimit:500,has:{CORS:!1,fetchMarkets:!0,fetchCurrencies:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTickers:!0,fetchOHLCV:!0,fetchTrades:!0,fetchAccounts:!0,fetchBalance:!0,createOrder:!0,cancelOrder:!0,cancelAllOrders:!0,fetchDepositAddress:!0,fetchTransactions:!0,fetchDeposits:!0,fetchWithdrawals:!0,fetchOrder:!0,fetchOrders:!0,fetchOpenOrders:!0,fetchClosedOrders:!0},timeframes:{"1m":"1","5m":"5","15m":"15","30m":"30","1h":"60","2h":"120","4h":"240","6h":"360","12h":"720","1d":"1d","1w":"1w","1M":"1m"},version:"v1",urls:{logo:"https://user-images.githubusercontent.com/1294454/112027508-47984600-8b48-11eb-9e17-d26459cc36c6.jpg",api:"https://ascendex.com",test:"https://bitmax-test.io",www:"https://ascendex.com",doc:["https://bitmax-exchange.github.io/bitmax-pro-api/#bitmax-pro-api-documentation"],fees:"https://ascendex.com/en/feerate/transactionfee-traderate",referral:"https://bitmax.io/#/register?inviteCode=EL6BXBQM"},api:{public:{get:["assets","products","ticker","barhist/info","barhist","depth","trades","cash/assets","cash/products","margin/assets","margin/products","futures/collateral","futures/contracts","futures/ref-px","futures/market-data","futures/funding-rates"]},accountCategory:{get:["balance","order/open","order/status","order/hist/current","risk"],post:["order","order/batch"],delete:["order","order/all","order/batch"]},accountGroup:{get:["cash/balance","margin/balance","margin/risk","transfer","futures/collateral-balance","futures/position","futures/risk","futures/funding-payments","order/hist"],post:["futures/transfer/deposit","futures/transfer/withdraw"]},private:{get:["info","wallet/transactions","wallet/deposit/address"]}},fees:{trading:{feeSide:"get",tierBased:!0,percentage:!0,taker:.002,maker:.002}},precisionMode:w,options:{"account-category":"cash","account-group":void 0,fetchClosedOrders:{method:"accountGroupGetOrderHist"}},exceptions:{exact:{1900:k,2100:v,5002:b,6001:b,6010:g,60060:y,600503:y,100001:k,100002:k,100003:k,100004:k,100005:k,100006:k,100007:k,100008:b,100009:v,100010:k,100011:k,100012:k,100013:k,100101:m,150001:k,200001:v,200002:m,200003:m,200004:m,200005:m,200006:m,200007:m,200008:m,200009:m,200010:v,200011:m,200012:m,200013:m,200014:x,200015:x,300001:y,300002:y,300003:y,300004:y,300005:y,300006:y,300007:y,300008:y,300009:y,300011:g,300012:b,300013:y,300020:y,300021:y,300031:y,310001:g,310002:y,310003:y,310004:b,310005:y,510001:m,900001:m},broad:{}},commonCurrencies:{BOND:"BONDED",BTCBEAR:"BEAR",BTCBULL:"BULL"}})}},{key:"getAccount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.safeValue(e,"account",this.options.account);return t.toLowerCase().capitalize()}},{key:"fetchCurrencies",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,u,c,d,h,l,f,p,v,m,g,y,b,x,k,w,_,S=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=S.length>0&&void 0!==S[0]?S[0]:{},e.next=3,this.publicGetAssets(t);case 3:return r=e.sent,e.next=6,this.publicGetMarginAssets(t);case 6:return i=e.sent,e.next=9,this.publicGetCashAssets(t);case 9:for(a=e.sent,s=this.safeValue(r,"data",[]),o=this.safeValue(i,"data",[]),u=this.safeValue(a,"data",[]),c=this.indexBy(s,"assetCode"),d=this.indexBy(o,"assetCode"),h=this.indexBy(u,"assetCode"),l=this.deepExtend(c,d,h),f=Object.keys(l),p={},v=0;v<f.length;v++)m=f[v],g=l[m],y=this.safeCurrencyCode(m),b=this.safeInteger2(g,"precisionScale","nativeScale"),x=this.safeNumber2(g,"withdrawFee","withdrawalFee"),k=this.safeString2(g,"status","statusCode"),w="Normal"===k,_="borrowAssetCode"in g,p[y]={id:m,code:y,info:g,type:void 0,margin:_,name:this.safeString(g,"assetName"),active:w,fee:x,precision:b,limits:{amount:{min:Math.pow(10,-b),max:void 0},withdraw:{min:this.safeNumber(g,"minWithdrawalAmt"),max:void 0}}};return e.abrupt("return",p);case 21:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMarkets",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,u,c,d,h,l,f,p,v,m,g,y,b,x,k,w,_,S,O,T,C,I,M=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=M.length>0&&void 0!==M[0]?M[0]:{},e.next=3,this.publicGetProducts(t);case 3:return r=e.sent,e.next=6,this.publicGetCashProducts(t);case 6:return i=e.sent,e.next=9,this.publicGetFuturesContracts(t);case 9:for(a=e.sent,s=this.safeValue(r,"data",[]),o=this.indexBy(s,"symbol"),u=this.safeValue(i,"data",[]),c=this.safeValue(a,"data",[]),d=this.arrayConcat(u,c),h=this.indexBy(d,"symbol"),l=this.deepExtend(o,h),f=Object.keys(l),p=[],v=0;v<f.length;v++)m=f[v],g=l[m],y=this.safeString(g,"baseAsset"),b=this.safeString(g,"quoteAsset"),x=this.safeCurrencyCode(y),k=this.safeCurrencyCode(b),w={amount:this.safeNumber(g,"lotSize"),price:this.safeNumber(g,"tickSize")},_=this.safeString(g,"status"),S="Normal"===_,T="spot"===(O="useLot"in g?"spot":"future"),I=m,(C="future"===O)||(I=x+"/"+k),p.push({id:m,symbol:I,base:x,quote:k,baseId:y,quoteId:b,info:g,type:O,spot:T,future:C,active:S,precision:w,limits:{amount:{min:this.safeNumber(g,"minQty"),max:this.safeNumber(g,"maxQty")},price:{min:this.safeNumber(g,"tickSize"),max:void 0},cost:{min:this.safeNumber(g,"minNotional"),max:this.safeNumber(g,"maxNotional")}}});return e.abrupt("return",p);case 21:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchAccounts",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=s.length>0&&void 0!==s[0]?s[0]:{},r=this.safeString(this.options,"account-group"),i=void 0,void 0!==r){e.next=10;break}return e.next=6,this.privateGetInfo(t);case 6:i=e.sent,a=this.safeValue(i,"data",{}),r=this.safeString(a,"accountGroup"),this.options["account-group"]=r;case 10:return e.abrupt("return",[{id:r,type:void 0,currency:void 0,info:i}]);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,u,c,d,h,l,f,p,v,m,g=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=g.length>0&&void 0!==g[0]?g[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.loadAccounts();case 5:return r=this.safeString(this.options,"account-category","cash"),i=this.safeValue(this.options,"fetchBalance",{}),a=this.safeString(i,"account-category",r),a=this.safeString(t,"account-category",a),t=this.omit(t,"account-category"),s=this.safeValue(this.accounts,0,{}),o=this.safeString(s,"id"),u={"account-group":o},c="accountCategoryGetBalance","futures"===a?c="accountGroupGetFuturesCollateralBalance":u["account-category"]=a,e.next=17,this[c](this.extend(u,t));case 17:for(d=e.sent,h={info:d},l=this.safeValue(d,"data",[]),f=0;f<l.length;f++)p=l[f],v=this.safeCurrencyCode(this.safeString(p,"asset")),(m=this.account()).free=this.safeString(p,"availableBalance"),m.total=this.safeString(p,"totalBalance"),h[v]=m;return e.abrupt("return",this.parseBalance(h,!1));case 22:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,u,c,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h.length>1&&void 0!==h[1]?h[1]:void 0,r=h.length>2&&void 0!==h[2]?h[2]:{},e.next=4,this.loadMarkets();case 4:return i=this.market(t),a={symbol:i.id},e.next=8,this.publicGetDepth(this.extend(a,r));case 8:return s=e.sent,o=this.safeValue(s,"data",{}),u=this.safeValue(o,"data",{}),c=this.safeInteger(u,"ts"),(d=this.parseOrderBook(u,c)).nonce=this.safeInteger(u,"seqnum"),e.abrupt("return",d);case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0,n=this.safeString(e,"symbol"),a=void 0;if(n in this.markets_by_id)t=this.markets_by_id[n];else if(void 0!==n){var s=this.safeString(e,"type");if("spot"===s){var o=n.split("/"),u=i(o,2),c=u[0],d=u[1],h=this.safeCurrencyCode(c),l=this.safeCurrencyCode(d);a=h+"/"+l}}void 0===a&&void 0!==t&&(a=t.symbol);var f=this.safeNumber(e,"close"),p=this.safeValue(e,"bid",[]),v=this.safeValue(e,"ask",[]),m=this.safeNumber(e,"open"),g=void 0,y=void 0,b=void 0;return void 0!==m&&void 0!==f&&(g=f-m,m>0&&(y=g/m*100),b=this.sum(m,f)/2),{symbol:a,timestamp:r,datetime:this.iso8601(r),high:this.safeNumber(e,"high"),low:this.safeNumber(e,"low"),bid:this.safeNumber(p,0),bidVolume:this.safeNumber(p,1),ask:this.safeNumber(v,0),askVolume:this.safeNumber(v,1),vwap:void 0,open:m,close:f,last:f,previousClose:void 0,change:g,percentage:y,average:b,baseVolume:this.safeNumber(e,"volume"),quoteVolume:void 0,info:e}}},{key:"fetchTicker",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:{},e.next=3,this.loadMarkets();case 3:return i=this.market(t),a={symbol:i.id},e.next=7,this.publicGetTicker(this.extend(a,r));case 7:return s=e.sent,o=this.safeValue(s,"data",{}),e.abrupt("return",this.parseTicker(o,i));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTickers",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:{},e.next=4,this.loadMarkets();case 4:return i={},void 0!==t&&(a=this.marketIds(t),i.symbol=a.join(",")),e.next=8,this.publicGetTicker(this.extend(i,r));case 8:return s=e.sent,o=this.safeValue(s,"data",[]),e.abrupt("return",this.parseTickers(o,t));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){var t=this.safeValue(e,"data",{});return[this.safeInteger(t,"ts"),this.safeNumber(t,"o"),this.safeNumber(t,"h"),this.safeNumber(t,"l"),this.safeNumber(t,"c"),this.safeNumber(t,"v")]}},{key:"fetchOHLCV",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,u,c,d,h,l,f,p=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=p.length>1&&void 0!==p[1]?p[1]:"1m",i=p.length>2&&void 0!==p[2]?p[2]:void 0,a=p.length>3&&void 0!==p[3]?p[3]:void 0,s=p.length>4&&void 0!==p[4]?p[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),u={symbol:o.id,interval:this.timeframes[r]},c=this.parseTimeframe(r),d=this.safeValue(this.options,"fetchOHLCV",{}),h=this.safeInteger(d,"limit",500),void 0!==i?(u.from=i,a=void 0===a?h:Math.min(a,h),u.to=this.sum(i,a*c*1e3,1)):void 0!==a&&(u.n=a),e.next=14,this.publicGetBarhist(this.extend(u,s));case 14:return l=e.sent,f=this.safeValue(l,"data",[]),e.abrupt("return",this.parseOHLCVs(f,o,r,i,a));case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeInteger(e,"ts"),i=this.safeString2(e,"price","p"),n=this.safeString(e,"q"),a=this.parseNumber(i),s=this.parseNumber(n),o=this.parseNumber(_.stringMul(i,n)),u=this.safeValue(e,"bm",!1),c=u?"maker":"taker",d=u?"buy":"sell",h=void 0;return void 0===h&&void 0!==t&&(h=t.symbol),{info:e,timestamp:r,datetime:this.iso8601(r),symbol:h,id:void 0,order:void 0,type:void 0,takerOrMaker:c,side:d,price:a,amount:s,cost:o,fee:void 0}}},{key:"fetchTrades",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,u,c,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:void 0,i=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={symbol:s.id},void 0!==i&&(o.n=i),e.next=10,this.publicGetTrades(this.extend(o,a));case 10:return u=e.sent,c=this.safeValue(u,"data",[]),d=this.safeValue(c,"data",[]),e.abrupt("return",this.parseTrades(d,s,r,i));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({PendingNew:"open",New:"open",PartiallyFilled:"open",Filled:"closed",Canceled:"canceled",Rejected:"rejected"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.parseOrderStatus(this.safeString(e,"status")),i=this.safeString(e,"symbol"),n=this.safeSymbol(i,t,"/"),a=this.safeInteger2(e,"timestamp","sendingTime"),s=this.safeInteger(e,"lastExecTime"),o=this.safeNumber(e,"price"),u=this.safeNumber(e,"orderQty"),c=this.safeNumber(e,"avgPx"),d=this.safeNumber2(e,"cumFilledQty","cumQty"),h=this.safeString(e,"orderId"),l=this.safeString(e,"id");void 0!==l&&l.length<1&&(l=void 0);var f=this.safeStringLower(e,"orderType"),p=this.safeStringLower(e,"side"),v=this.safeNumber(e,"cumFee"),m=void 0;if(void 0!==v){var g=this.safeString(e,"feeAsset"),y=this.safeCurrencyCode(g);m={cost:v,currency:y}}var b=this.safeNumber(e,"stopPrice");return this.safeOrder({info:e,id:h,clientOrderId:void 0,timestamp:a,datetime:this.iso8601(a),lastTradeTimestamp:s,symbol:n,type:f,timeInForce:void 0,postOnly:void 0,side:p,price:o,stopPrice:b,amount:u,cost:void 0,average:c,filled:d,remaining:void 0,status:r,fee:m,trades:void 0})}},{key:"createOrder",value:function(){var e=a(n.mark((function e(t,r,i,a){var s,o,u,c,d,h,l,f,p,v,m,g,b,x,k=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=k.length>4&&void 0!==k[4]?k[4]:void 0,o=k.length>5&&void 0!==k[5]?k[5]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.loadAccounts();case 6:if(u=this.market(t),c=this.safeString(this.options,"account-category","cash"),d=this.safeValue(this.options,"createOrder",{}),h=this.safeString(d,"account-category",c),h=this.safeString(o,"account-category",h),o=this.omit(o,"account-category"),l=this.safeValue(this.accounts,0,{}),f=this.safeValue(l,"id"),p=this.safeString2(o,"clientOrderId","id"),v={"account-group":f,"account-category":h,symbol:u.id,time:this.milliseconds(),orderQty:this.amountToPrecision(t,a),orderType:r,side:i},void 0!==p&&(v.id=p,o=this.omit(o,["clientOrderId","id"])),"limit"!==r&&"stop_limit"!==r||(v.orderPrice=this.priceToPrecision(t,s)),"stop_limit"!==r&&"stop_market"!==r){e.next=26;break}if(void 0!==(m=this.safeNumber(o,"stopPrice"))){e.next=24;break}throw new y(this.id+" createOrder() requires a stopPrice parameter for "+r+" orders");case 24:v.stopPrice=this.priceToPrecision(t,m),o=this.omit(o,"stopPrice");case 26:return e.next=28,this.accountCategoryPostOrder(this.extend(v,o));case 28:return g=e.sent,b=this.safeValue(g,"data",{}),x=this.safeValue(b,"info",{}),e.abrupt("return",this.parseOrder(x,u));case 32:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,u,c,d,h,l=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l.length>1&&void 0!==l[1]?l[1]:void 0,r=l.length>2&&void 0!==l[2]?l[2]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.loadAccounts();case 6:return i=this.safeString(this.options,"account-category","cash"),a=this.safeValue(this.options,"fetchOrder",{}),s=this.safeString(a,"account-category",i),s=this.safeString(r,"account-category",s),r=this.omit(r,"account-category"),o=this.safeValue(this.accounts,0,{}),u=this.safeValue(o,"id"),c={"account-group":u,"account-category":s,orderId:t},e.next=16,this.accountCategoryGetOrderStatus(this.extend(c,r));case 16:return d=e.sent,h=this.safeValue(d,"data",{}),e.abrupt("return",this.parseOrder(h));case 19:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,u,c,d,h,l,f,p,v,m,g,y=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=y.length>0&&void 0!==y[0]?y[0]:void 0,r=y.length>1&&void 0!==y[1]?y[1]:void 0,i=y.length>2&&void 0!==y[2]?y[2]:void 0,a=y.length>3&&void 0!==y[3]?y[3]:{},e.next=6,this.loadMarkets();case 6:return e.next=8,this.loadAccounts();case 8:return s=void 0,void 0!==t&&(s=this.market(t)),o=this.safeString(this.options,"account-category","cash"),u=this.safeValue(this.options,"fetchOpenOrders",{}),c=this.safeString(u,"account-category",o),c=this.safeString(a,"account-category",c),a=this.omit(a,"account-category"),d=this.safeValue(this.accounts,0,{}),h=this.safeValue(d,"id"),l={"account-group":h,"account-category":c},e.next=20,this.accountCategoryGetOrderOpen(this.extend(l,a));case 20:if(f=e.sent,p=this.safeValue(f,"data",[]),"futures"!==c){e.next=24;break}return e.abrupt("return",this.parseOrders(p,s,r,i));case 24:for(v=[],m=0;m<p.length;m++)g=this.parseOrder(p[m],s),v.push(g);return e.abrupt("return",this.filterBySymbolSinceLimit(v,t,r,i));case 27:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,u,c,d,h,l,f,p,v,m=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=m.length>0&&void 0!==m[0]?m[0]:void 0,r=m.length>1&&void 0!==m[1]?m[1]:void 0,i=m.length>2&&void 0!==m[2]?m[2]:void 0,a=m.length>3&&void 0!==m[3]?m[3]:{},e.next=6,this.loadMarkets();case 6:return e.next=8,this.loadAccounts();case 8:return s=void 0,void 0!==t&&(s=this.market(t)),o=this.safeString(this.options,"account-category"),u=this.safeValue(this.options,"fetchClosedOrders",{}),c=this.safeString(u,"account-category",o),c=this.safeString(a,"account-category",c),a=this.omit(a,"account-category"),d=this.safeValue(this.accounts,0,{}),h=this.safeValue(d,"id"),l={"account-group":h},void 0!==t&&(s=this.market(t),l.symbol=s.id),"accountGroupGetOrderHist"===(f=this.safeValue(u,"method","accountGroupGetOrderHist"))?void 0!==c&&(l.category=c):l["account-category"]=c,void 0!==r&&(l.startTime=r),void 0!==i&&(l.pageSize=i),e.next=25,this[f](this.extend(l,a));case 25:return p=e.sent,v=this.safeValue(p,"data"),Array.isArray(v)||(v=this.safeValue(v,"data",[])),e.abrupt("return",this.parseOrders(v,s,r,i));case 30:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,u,c,d,h,l,f,v,m,g=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=g.length>1&&void 0!==g[1]?g[1]:void 0,i=g.length>2&&void 0!==g[2]?g[2]:{},void 0!==r){e.next=4;break}throw new p(this.id+" cancelOrder() requires a symbol argument");case 4:return e.next=6,this.loadMarkets();case 6:return e.next=8,this.loadAccounts();case 8:return a=this.market(r),s=this.safeString(this.options,"account-category","cash"),o=this.safeValue(this.options,"cancelOrder",{}),u=this.safeString(o,"account-category",s),u=this.safeString(i,"account-category",u),i=this.omit(i,"account-category"),c=this.safeValue(this.accounts,0,{}),d=this.safeValue(c,"id"),h=this.safeString2(i,"clientOrderId","id"),l={"account-group":d,"account-category":u,symbol:a.id,time:this.milliseconds(),id:"foobar"},void 0===h?l.orderId=t:(l.id=h,i=this.omit(i,["clientOrderId","id"])),e.next=21,this.accountCategoryDeleteOrder(this.extend(l,i));case 21:return f=e.sent,v=this.safeValue(f,"data",{}),m=this.safeValue(v,"info",{}),e.abrupt("return",this.parseOrder(m,a));case 25:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cancelAllOrders",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,u,c,d,h,l=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:void 0,r=l.length>1&&void 0!==l[1]?l[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.loadAccounts();case 6:return i=this.safeString(this.options,"account-category","cash"),a=this.safeValue(this.options,"cancelAllOrders",{}),s=this.safeString(a,"account-category",i),s=this.safeString(r,"account-category",s),r=this.omit(r,"account-category"),o=this.safeValue(this.accounts,0,{}),u=this.safeValue(o,"id"),c={"account-group":u,"account-category":s,time:this.milliseconds()},d=void 0,void 0!==t&&(d=this.market(t),c.symbol=d.id),e.next=18,this.accountCategoryDeleteOrderAll(this.extend(c,r));case 18:return h=e.sent,e.abrupt("return",h);case 20:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseDepositAddress",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"address"),i=this.safeString(e,"tagId"),n=this.safeString(e,i);this.checkAddress(r);var a=void 0===t?void 0:t.code;return{currency:a,address:r,tag:n,info:e}}},{key:"fetchDepositAddress",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,u,c,d,h,l,f,v,m,g=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=g.length>1&&void 0!==g[1]?g[1]:{},e.next=3,this.loadMarkets();case 3:return i=this.currency(t),a=this.safeString(r,"chainName"),r=this.omit(r,"chainName"),s={asset:i.id},e.next=9,this.privateGetWalletDepositAddress(this.extend(s,r));case 9:if(o=e.sent,u=this.safeValue(o,"data",{}),c=this.safeValue(u,"address",[]),d=c.length,h=void 0,!(d>1)){e.next=23;break}if(l=this.indexBy(c,"chainName"),void 0!==a){e.next=20;break}throw f=Object.keys(l),v=f.join(", "),new p(this.id+" fetchDepositAddress returned more than one address, a chainName parameter is required, one of "+v);case 20:h=this.safeValue(l,a,{}),e.next=24;break;case 23:h=this.safeValue(c,0,{});case 24:return m=this.parseDepositAddress(h,i),e.abrupt("return",this.extend(m,{info:o}));case 26:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchDeposits",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,i=o.length>2&&void 0!==o[2]?o[2]:void 0,a=o.length>3&&void 0!==o[3]?o[3]:{},s={txType:"deposit"},e.next=7,this.fetchTransactions(t,r,i,this.extend(s,a));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchWithdrawals",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,i=o.length>2&&void 0!==o[2]?o[2]:void 0,a=o.length>3&&void 0!==o[3]?o[3]:{},s={txType:"withdrawal"},e.next=7,this.fetchTransactions(t,r,i,this.extend(s,a));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTransactions",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,u,c,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:void 0,i=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:{},e.next=6,this.loadMarkets();case 6:return s={},o=void 0,void 0!==t&&(o=this.currency(t),s.asset=o.id),void 0!==r&&(s.startTs=r),void 0!==i&&(s.pageSize=i),e.next=13,this.privateGetWalletTransactions(this.extend(s,a));case 13:return u=e.sent,c=this.safeValue(u,"data",{}),d=this.safeValue(c,"data",[]),e.abrupt("return",this.parseTransactions(d,o,r,i));case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTransactionStatus",value:function(e){return this.safeString({reviewing:"pending",pending:"pending",confirmed:"ok",rejected:"rejected"},e,e)}},{key:"parseTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"requestId"),i=this.safeNumber(e,"amount"),n=this.safeValue(e,"destAddress",{}),a=this.safeString(n,"address"),s=this.safeString(n,"destTag"),o=this.safeString(e,"networkTransactionId"),u=this.safeString(e,"transactionType"),c=this.safeInteger(e,"time"),d=this.safeString(e,"asset"),h=this.safeCurrencyCode(d,t),l=this.parseTransactionStatus(this.safeString(e,"status")),f=this.safeNumber(e,"commission");return{info:e,id:r,currency:h,amount:i,address:a,addressTo:a,addressFrom:void 0,tag:s,tagTo:s,tagFrom:void 0,status:l,type:u,updated:void 0,txid:o,timestamp:c,datetime:this.iso8601(c),fee:{currency:h,cost:f}}}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s="",o=i,u="accountCategory"===t;(u||"accountGroup"===t)&&(s+=this.implodeParams("/{account-group}",i),o=this.omit(i,"account-group"));var c=this.implodeParams(e,o);if(s+="/api/pro/"+this.version,u&&(s+=this.implodeParams("/{account-category}",o),o=this.omit(o,"account-category")),s+="/"+c,o=this.omit(o,this.extractParams(e)),"public"===t)Object.keys(o).length&&(s+="?"+this.urlencode(o));else{this.checkRequiredCredentials();var d=this.milliseconds().toString(),h=d+"+"+c,l=this.hmac(this.encode(h),this.encode(this.secret),"sha256","base64");n={"x-auth-key":this.apiKey,"x-auth-timestamp":d,"x-auth-signature":l},"GET"===r?Object.keys(o).length&&(s+="?"+this.urlencode(o)):(n["Content-Type"]="application/json",a=this.json(o))}return{url:s=this.urls.api+s,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,u){if(void 0!==s){var c=this.safeString(s,"code"),d=this.safeString(s,"message");if(void 0!==c&&"0"!==c||void 0!==d){var h=this.id+" "+a;throw this.throwExactlyMatchedException(this.exceptions.exact,c,h),this.throwExactlyMatchedException(this.exceptions.exact,d,h),this.throwBroadlyMatchedException(this.exceptions.broad,d,h),new m(h)}}}}]),r}(l)},function(e,t,r){"use strict";var i=r(1),n=r(2),a=r(6),s=r(3),o=r(4),u=r(5),c=r(126);e.exports=function(e){o(r,e);var t=u(r);function r(){return i(this,r),t.apply(this,arguments)}return n(r,[{key:"describe",value:function(){return this.deepExtend(a(s(r.prototype),"describe",this).call(this),{id:"bequant",name:"Bequant",countries:["MT"],pro:!0,urls:{logo:"https://user-images.githubusercontent.com/1294454/55248342-a75dfe00-525a-11e9-8aa2-05e9dca943c6.jpg",api:{public:"https://api.bequant.io",private:"https://api.bequant.io"},www:"https://bequant.io",doc:["https://api.bequant.io/"],fees:["https://bequant.io/fees-and-limits"],referral:"https://bequant.io"}})}}]),r}(c)},function(e,t,r){"use strict";var i=r(7),n=r(8),a=r(1),s=r(2),o=r(6),u=r(3),c=r(4),d=r(5),h=r(11),l=r(10),f=l.ExchangeError,p=l.AccountSuspended,v=l.ArgumentsRequired,m=l.AuthenticationError,g=l.DDoSProtection,y=l.ExchangeNotAvailable,b=l.InvalidOrder,x=l.OrderNotFound,k=l.PermissionDenied,w=l.InsufficientFunds,_=l.BadSymbol,S=l.RateLimitExceeded,O=l.BadRequest,T=r(12);e.exports=function(e){c(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(u(r.prototype),"describe",this).call(this),{id:"bibox",name:"Bibox",countries:["CN","US","KR"],version:"v1",hostname:"bibox365.com",has:{cancelOrder:!0,CORS:!1,createMarketOrder:!1,createOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchCurrencies:!0,fetchDeposits:!0,fetchDepositAddress:!0,fetchFundingFees:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,fetchWithdrawals:!0,publicAPI:!1,withdraw:!0},timeframes:{"1m":"1min","5m":"5min","15m":"15min","30m":"30min","1h":"1hour","2h":"2hour","4h":"4hour","6h":"6hour","12h":"12hour","1d":"day","1w":"week"},urls:{logo:"https://user-images.githubusercontent.com/51840849/77257418-3262b000-6c85-11ea-8fb8-20bdf20b3592.jpg",api:"https://api.{hostname}",www:"https://www.bibox365.com",doc:["https://biboxcom.github.io/en/"],fees:"https://bibox.zendesk.com/hc/en-us/articles/360002336133",referral:"https://w2.bibox365.com/login/register?invite_code=05Kj3I"},api:{public:{post:["mdata"],get:["cquery","mdata","cdata"]},private:{post:["cquery","ctrade","user","orderpending","transfer"]},v2private:{post:["assets/transfer/spot"]}},fees:{trading:{tierBased:!1,percentage:!0,taker:.001,maker:8e-4},funding:{tierBased:!1,percentage:!1,withdraw:{},deposit:{}}},exceptions:{2011:p,2015:m,2021:w,2027:w,2033:x,2065:b,2066:b,2067:b,2068:b,2078:b,2085:b,2091:S,2092:b,3e3:O,3002:O,3012:m,3016:_,3024:k,3025:m,4e3:y,4003:g},commonCurrencies:{BOX:"DefiBox",BPT:"BlockPool Token",KEY:"Bihu",MTC:"MTC Mesh Network",PAI:"PCHAIN",TERN:"Ternio-ERC20"},options:{fetchCurrencies:"fetch_currencies_public"}})}},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p,v,m,g=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=g.length>0&&void 0!==g[0]?g[0]:{},r={cmd:"marketAll"},e.next=4,this.publicGetMdata(this.extend(r,t));case 4:for(n=e.sent,a=this.safeValue(n,"result"),s=[],o=0;o<a.length;o++)u=a[o],c=this.safeInteger(u,"id"),d=this.safeString(u,"coin_symbol"),h=this.safeString(u,"currency_symbol"),l=this.safeCurrencyCode(d),f=this.safeCurrencyCode(h),p=l+"/"+f,v=d+"_"+h,m={amount:4,price:8},s.push({id:v,numericId:c,symbol:p,base:l,quote:f,baseId:d,quoteId:h,active:!0,info:u,precision:m,limits:{amount:{min:Math.pow(10,-m.amount),max:void 0},price:{min:Math.pow(10,-m.price),max:void 0}}});return e.abrupt("return",s);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeInteger(e,"timestamp"),i=void 0;if(void 0!==t)i=t.symbol;else{var n=this.safeString(e,"coin_symbol"),a=this.safeString(e,"currency_symbol"),s=this.safeCurrencyCode(n),o=this.safeCurrencyCode(a);i=s+"/"+o}var u=this.safeNumber(e,"last"),c=this.safeNumber(e,"change"),d=this.safeNumber2(e,"vol","vol24H"),h=void 0;void 0!==u&&void 0!==c&&(h=u-c);var l=this.safeString(e,"percent");return void 0!==l&&(l=l.replace("%",""),l=parseFloat(l)),{symbol:i,timestamp:r,datetime:this.iso8601(r),high:this.safeNumber(e,"high"),low:this.safeNumber(e,"low"),bid:this.safeNumber(e,"buy"),bidVolume:void 0,ask:this.safeNumber(e,"sell"),askVolume:void 0,vwap:void 0,open:h,close:u,last:u,previousClose:void 0,change:c,percentage:l,average:void 0,baseVolume:d,quoteVolume:this.safeNumber(e,"amount"),info:e}}},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={cmd:"ticker",pair:n.id},e.next=7,this.publicGetMdata(this.extend(a,r));case 7:return s=e.sent,e.abrupt("return",this.parseTicker(s.result,n));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:{},n={cmd:"marketAll"},e.next=5,this.publicGetMdata(this.extend(n,r));case 5:return a=e.sent,s=this.parseTickers(a.result,t),o=this.indexBy(s,"symbol"),e.abrupt("return",this.filterByArray(o,"symbol",t));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeInteger2(e,"time","createdAt"),i=this.safeInteger2(e,"side","order_side");i=1===i?"buy":"sell";var n=void 0;if(void 0===t){var a=this.safeString(e,"pair");if(void 0===a){var s=this.safeString(e,"coin_symbol"),o=this.safeString(e,"currency_symbol");void 0!==s&&void 0!==o&&(a=s+"_"+o)}a in this.markets_by_id&&(t=this.markets_by_id[a])}void 0!==t&&(n=t.symbol);var u=void 0,c=this.safeNumber(e,"fee"),d=this.safeString(e,"fee_symbol");void 0!==d&&(d=d in this.currencies_by_id?this.currencies_by_id[d].code:this.safeCurrencyCode(d));var h=void 0,l=this.safeString(e,"price"),f=this.safeString(e,"amount"),p=this.parseNumber(l),v=this.parseNumber(f),m=this.parseNumber(T.stringMul(l,f));void 0!==c&&(u={cost:-c,currency:d,rate:h});var g=this.safeString(e,"id");return{info:e,id:g,order:void 0,timestamp:r,datetime:this.iso8601(r),symbol:n,type:"limit",takerOrMaker:void 0,side:i,price:p,amount:v,cost:m,fee:u}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={cmd:"deals",pair:s.id},void 0!==n&&(o.size=n),e.next=10,this.publicGetMdata(this.extend(o,a));case 10:return u=e.sent,e.abrupt("return",this.parseTrades(u.result,s,r,n));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:{},e.next=4,this.loadMarkets();case 4:return a=this.market(t),s={cmd:"depth",pair:a.id},void 0!==r&&(s.size=r),e.next=9,this.publicGetMdata(this.extend(s,n));case 9:return o=e.sent,e.abrupt("return",this.parseOrderBook(o.result,this.safeNumber(o.result,"update_time"),"bids","asks","price","volume"));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){return[this.safeInteger(e,"time"),this.safeNumber(e,"open"),this.safeNumber(e,"high"),this.safeNumber(e,"low"),this.safeNumber(e,"close"),this.safeNumber(e,"vol")]}},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:"1m",n=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:1e3,s=h.length>4&&void 0!==h[4]?h[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),u={cmd:"kline",pair:o.id,period:this.timeframes[r],size:a},e.next=10,this.publicGetMdata(this.extend(u,s));case 10:return c=e.sent,d=this.safeValue(c,"result",[]),e.abrupt("return",this.parseOHLCVs(d,o,r,n,a));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchCurrencies",value:function(){var e=n(i.mark((function e(){var t,r,n=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},r=this.safeString(this.options,"fetchCurrencies","fetch_currencies_public"),e.next=4,this[r](t);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchCurrenciesPublic",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p,v,m=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=m.length>0&&void 0!==m[0]?m[0]:{},r={cmd:"currencies"},e.next=4,this.publicGetCdata(this.extend(r,t));case 4:for(n=e.sent,a=this.safeValue(n,"result"),s={},o=0;o<a.length;o++)u=a[o],c=this.safeString(u,"symbol"),d=this.safeString(u,"name"),h=this.safeCurrencyCode(c),l=this.safeInteger(u,"valid_decimals"),f=this.safeValue(u,"enable_deposit"),p=this.safeValue(u,"enable_withdraw"),v=f&&p,s[h]={id:c,code:h,info:u,name:d,active:v,fee:void 0,precision:l,limits:{amount:{min:Math.pow(10,-l),max:void 0},withdraw:{min:this.safeNumber(u,"withdraw_min"),max:void 0}}};return e.abrupt("return",s);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchCurrenciesPrivate",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p,v,g=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=g.length>0&&void 0!==g[0]?g[0]:{},this.apiKey&&this.secret){e.next=3;break}throw new m(this.id+" fetchCurrencies is an authenticated endpoint, therefore it requires 'apiKey' and 'secret' credentials. If you don't need currency details, set exchange.has['fetchCurrencies'] = false before calling its methods.");case 3:return r={cmd:"transfer/coinList",body:{}},e.next=6,this.privatePostTransfer(this.extend(r,t));case 6:for(n=e.sent,a=this.safeValue(n,"result"),s={},o=0;o<a.length;o++)u=a[o],c=this.safeString(u,"symbol"),d=u.name,h=this.safeCurrencyCode(c),l=8,f=this.safeValue(u,"enable_deposit"),p=this.safeValue(u,"enable_withdraw"),v=f&&p,s[h]={id:c,code:h,info:u,name:d,active:v,fee:void 0,precision:l,limits:{amount:{min:Math.pow(10,-l),max:Math.pow(10,l)},withdraw:{min:void 0,max:Math.pow(10,l)}}};return e.abrupt("return",s);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p,v=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=v.length>0&&void 0!==v[0]?v[0]:{},e.next=3,this.loadMarkets();case 3:return r=this.safeString(t,"type","assets"),t=this.omit(t,"type"),n={cmd:"transfer/"+r,body:this.extend({select:1},t)},e.next=8,this.privatePostTransfer(n);case 8:a=e.sent,s=this.safeValue(a,"result"),o={info:s},u=void 0,u="assets_list"in s?this.indexBy(s.assets_list,"coin_symbol"):s,c=Object.keys(u);for(d=0;d<c.length;d++)h=c[d],(l=h.toUpperCase()).indexOf("TOTAL_")>=0&&(l=l.slice(6)),l in this.currencies_by_id&&(l=this.currencies_by_id[l].code),f=this.account(),"string"===typeof(p=u[h])?(f.free=p,f.total=p):(f.free=this.safeString(p,"balance"),f.used=this.safeString(p,"freeze")),o[l]=f;return e.abrupt("return",this.parseBalance(o,!1));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchDeposits",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:{},e.next=6,this.loadMarkets();case 6:return s=void 0,o={page:1},void 0!==t&&(s=this.currency(t),o.symbol=s.id),o.size=void 0!==n?n:100,e.next=12,this.privatePostTransfer({cmd:"transfer/transferInList",body:this.extend(o,a)});case 12:for(u=e.sent,c=this.safeValue(u.result,"items",[]),d=0;d<c.length;d++)c[d].type="deposit";return e.abrupt("return",this.parseTransactions(c,s,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchWithdrawals",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:{},e.next=6,this.loadMarkets();case 6:return s=void 0,o={page:1},void 0!==t&&(s=this.currency(t),o.symbol=s.id),o.size=void 0!==n?n:100,e.next=12,this.privatePostTransfer({cmd:"transfer/transferOutList",body:this.extend(o,a)});case 12:for(u=e.sent,c=this.safeValue(u.result,"items",[]),d=0;d<c.length;d++)c[d].type="withdrawal";return e.abrupt("return",this.parseTransactions(c,s,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),i=this.safeString(e,"to_address"),n=this.safeString(e,"coin_symbol"),a=this.safeCurrencyCode(n,t),s=this.safeString(e,"createdAt"),o=this.safeString(e,"addr_remark"),u=this.safeString(e,"type"),c=this.parseTransactionStatusByType(this.safeString(e,"status"),u),d=this.safeNumber(e,"amount"),h=this.safeNumber(e,"fee");"deposit"===u&&(h=0,o=void 0);var l={cost:h,currency:a};return{info:e,id:r,txid:void 0,timestamp:s,datetime:this.iso8601(s),address:i,tag:o,type:u,amount:d,currency:a,status:c,updated:void 0,fee:l}}},{key:"parseTransactionStatusByType",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r={deposit:{1:"pending",2:"ok"},withdrawal:{0:"pending",3:"ok"}};return this.safeString(this.safeValue(r,t,{}),e,e)}},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,u,c,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=f.length>4&&void 0!==f[4]?f[4]:void 0,o=f.length>5&&void 0!==f[5]?f[5]:{},e.next=4,this.loadMarkets();case 4:return u=this.market(t),c="limit"===r?2:1,d="buy"===n?1:2,h={cmd:"orderpending/trade",body:this.extend({pair:u.id,account_type:0,order_type:c,order_side:d,pay_bix:0,amount:a,price:s},o)},e.next=10,this.privatePostOrderpending(h);case 10:return l=e.sent,e.abrupt("return",{info:l,id:this.safeString(l,"result")});case 12:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},n={cmd:"orderpending/cancelTrade",body:this.extend({orders_id:t},r)},e.next=5,this.privatePostOrderpending(n);case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.length>1&&void 0!==o[1]?o[1]:void 0,r=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return n={cmd:"orderpending/order",body:this.extend({id:t.toString(),account_type:0},r)},e.next=7,this.privatePostOrderpending(n);case 7:if(a=e.sent,s=this.safeValue(a,"result"),!this.isEmpty(s)){e.next=11;break}throw new x(this.id+" order "+t+" not found");case 11:return e.abrupt("return",this.parseOrder(s));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0;if(void 0===t){var i=void 0,n=this.safeString(e,"coin_symbol"),a=this.safeString(e,"currency_symbol");void 0!==n&&void 0!==a&&(i=n+"_"+a),i in this.markets_by_id&&(t=this.markets_by_id[i])}void 0!==t&&(r=t.symbol);var s=this.safeString(e,"order_type"),o="1"===s?"market":"limit",u=this.safeInteger(e,"createdAt"),c=this.safeNumber(e,"price"),d=this.safeNumber(e,"deal_price"),h=this.safeNumber(e,"deal_amount"),l=this.safeNumber(e,"amount"),f=this.safeNumber2(e,"deal_money","money"),p=this.safeString(e,"order_side"),v="1"===p?"buy":"sell",m=this.parseOrderStatus(this.safeString(e,"status")),g=this.safeString(e,"id"),y=this.safeNumber(e,"fee"),b=void 0;return void 0!==y&&(b={cost:y,currency:void 0}),this.safeOrder({info:e,id:g,clientOrderId:void 0,timestamp:u,datetime:this.iso8601(u),lastTradeTimestamp:void 0,symbol:r,type:o,timeInForce:void 0,postOnly:void 0,side:v,price:c,stopPrice:void 0,amount:l,cost:f,average:d,filled:h,remaining:void 0,status:m,fee:b,trades:void 0})}},{key:"parseOrderStatus",value:function(e){return this.safeString({1:"open",2:"open",3:"closed",4:"canceled",5:"canceled",6:"canceled"},e,e)}},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:void 0,r=l.length>1&&void 0!==l[1]?l[1]:void 0,n=l.length>2&&void 0!==l[2]?l[2]:void 0,a=l.length>3&&void 0!==l[3]?l[3]:{},e.next=6,this.loadMarkets();case 6:return s=void 0,o=void 0,void 0!==t&&(s=this.market(t),o=s.id),u=n||200,c={cmd:"orderpending/orderPendingList",body:this.extend({pair:o,account_type:0,page:1,size:u},a)},e.next=13,this.privatePostOrderpending(c);case 13:return d=e.sent,h=this.safeValue(d.result,"items",[]),e.abrupt("return",this.parseOrders(h,s,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:200,a=d.length>3&&void 0!==d[3]?d[3]:{},void 0!==t){e.next=6;break}throw new v(this.id+" fetchClosedOrders() requires a `symbol` argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.market(t),o={cmd:"orderpending/pendingHistoryList",body:this.extend({pair:s.id,account_type:0,page:1,size:n},a)},e.next=12,this.privatePostOrderpending(o);case 12:return u=e.sent,c=this.safeValue(u.result,"items",[]),e.abrupt("return",this.parseOrders(c,s,r,n));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:{},void 0!==t){e.next=6;break}throw new v(this.id+" fetchMyTrades() requires a `symbol` argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.market(t),o=n||200,u={cmd:"orderpending/orderHistoryList",body:this.extend({pair:s.id,account_type:0,page:1,size:o,coin_symbol:s.baseId,currency_symbol:s.quoteId},a)},e.next=13,this.privatePostOrderpending(u);case 13:return c=e.sent,d=this.safeValue(c.result,"items",[]),e.abrupt("return",this.parseTrades(d,s,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchDepositAddress",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.currency(t),a={cmd:"transfer/transferIn",body:this.extend({coin_symbol:n.id},r)},e.next=7,this.privatePostTransfer(a);case 7:return s=e.sent,o=this.safeString(s,"result"),u=o,c=void 0,this.isJsonEncodedObject(o)&&(d=JSON.parse(o),u=this.safeString(d,"account"),c=this.safeString(d,"memo")),e.abrupt("return",{currency:t,address:u,tag:c,info:s});case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"withdraw",value:function(){var e=n(i.mark((function e(t,r,n){var a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=d.length>3&&void 0!==d[3]?d[3]:void 0,s=d.length>4&&void 0!==d[4]?d[4]:{},this.checkAddress(n),e.next=5,this.loadMarkets();case 5:if(o=this.currency(t),void 0!==this.password){e.next=9;break}if("trade_pwd"in s){e.next=9;break}throw new f(this.id+" withdraw() requires this.password set on the exchange instance or a trade_pwd parameter");case 9:if("totp_code"in s){e.next=11;break}throw new f(this.id+" withdraw() requires a totp_code parameter for 2FA authentication");case 11:return u={trade_pwd:this.password,coin_symbol:o.id,amount:r,addr:n},void 0!==a&&(u.address_remark=a),e.next=15,this.privatePostTransfer({cmd:"transfer/transferOut",body:this.extend(u,s)});case 15:return c=e.sent,e.abrupt("return",{info:c,id:void 0});case 17:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"fetchFundingFees",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:{},e.next=4,this.loadMarkets();case 4:n={},a={},void 0===t&&(t=Object.keys(this.currencies)),s=0;case 8:if(!(s<t.length)){e.next=20;break}return o=t[s],u=this.currency(o),c={cmd:"transfer/coinConfig",body:this.extend({coin_symbol:u.id},r)},e.next=14,this.privatePostTransfer(c);case 14:d=e.sent,a[o]=d,n[o]=this.safeNumber(d.result,"withdraw_fee");case 17:s++,e.next=8;break;case 20:return e.abrupt("return",{info:a,withdraw:n,deposit:{}});case 21:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,a=this.implodeParams(this.urls.api,{hostname:this.hostname})+"/"+this.version+"/"+e,s=this.json([i]);if("public"===t)"GET"!==r?n={cmds:s}:Object.keys(i).length&&(a+="?"+this.urlencode(i));else if("v2private"===t){this.checkRequiredCredentials(),a=this.implodeParams(this.urls.api,{hostname:this.hostname})+"/v2/"+e;var o=this.json(i);n={body:o,apikey:this.apiKey,sign:this.hmac(this.encode(o),this.encode(this.secret),"md5")}}else this.checkRequiredCredentials(),n={cmds:s,apikey:this.apiKey,sign:this.hmac(this.encode(s),this.encode(this.secret),"md5")};return void 0!==n&&(n=this.json(n,{convertArraysToObjects:!0})),{url:a,method:r,body:n,headers:{"Content-Type":"application/json"}}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,u){if(void 0!==s){if("error"in s){if("code"in s.error){var c=this.safeString(s.error,"code"),d=this.id+" "+a;throw this.throwExactlyMatchedException(this.exceptions,c,d),new f(d)}throw new f(this.id+" "+a)}if(!("result"in s))throw new f(this.id+" "+a)}}},{key:"request",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:"public",n=c.length>2&&void 0!==c[2]?c[2]:"GET",a=c.length>3&&void 0!==c[3]?c[3]:{},s=c.length>4&&void 0!==c[4]?c[4]:void 0,o=c.length>5&&void 0!==c[5]?c[5]:void 0,e.next=7,this.fetch2(t,r,n,a,s,o);case 7:if(u=e.sent,"GET"!==n){e.next=12;break}return e.abrupt("return",u);case 12:return e.abrupt("return",u.result[0]);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(h)},function(e,t,r){"use strict";var i=r(7),n=r(8),a=r(1),s=r(2),o=r(6),u=r(3),c=r(4),d=r(5),h=r(11),l=r(10),f=l.ExchangeError,p=l.ArgumentsRequired,v=l.AuthenticationError,m=l.OrderNotFound,g=l.InsufficientFunds,y=l.PermissionDenied,b=l.BadRequest,x=l.RateLimitExceeded,k=l.InvalidOrder,w=r(12);e.exports=function(e){c(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(u(r.prototype),"describe",this).call(this),{id:"bigone",name:"BigONE",countries:["CN"],version:"v3",rateLimit:1200,has:{cancelAllOrders:!0,cancelOrder:!0,createOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchDepositAddress:!0,fetchDeposits:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrders:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTickers:!0,fetchTime:!0,fetchTrades:!0,fetchWithdrawals:!0,withdraw:!0},timeframes:{"1m":"min1","5m":"min5","15m":"min15","30m":"min30","1h":"hour1","3h":"hour3","4h":"hour4","6h":"hour6","12h":"hour12","1d":"day1","1w":"week1","1M":"month1"},hostname:"big.one",urls:{logo:"https://user-images.githubusercontent.com/1294454/69354403-1d532180-0c91-11ea-88ed-44c06cefdf87.jpg",api:{public:"https://{hostname}/api/v3",private:"https://{hostname}/api/v3/viewer"},www:"https://big.one",doc:"https://open.big.one/docs/api.html",fees:"https://bigone.zendesk.com/hc/en-us/articles/115001933374-BigONE-Fee-Policy",referral:"https://b1.run/users/new?code=D3LLBVFT"},api:{public:{get:["ping","asset_pairs","asset_pairs/{asset_pair_name}/depth","asset_pairs/{asset_pair_name}/trades","asset_pairs/{asset_pair_name}/ticker","asset_pairs/{asset_pair_name}/candles","asset_pairs/tickers"]},private:{get:["accounts","fund/accounts","assets/{asset_symbol}/address","orders","orders/{id}","orders/multi","trades","withdrawals","deposits"],post:["orders","orders/{id}/cancel","orders/cancel","withdrawals","transfer"]}},fees:{trading:{maker:.001,taker:.001},funding:{withdraw:{BTC:.001,ETH:.005,EOS:.01,ZEC:.003,LTC:.01,QTUM:.01,ETC:.01,GAS:0,BTS:1,GXS:.1,BITCNY:19}}},exceptions:{exact:{10001:b,10005:f,"Amount's scale must greater than AssetPair's base scale":k,10007:b,10011:f,10013:m,10014:g,10403:y,10429:x,40004:v,40103:v,40104:v,40301:y,40302:f,40601:f,40602:f,40603:g,40120:k,40121:k},broad:{}},commonCurrencies:{MBN:"Mobilian Coin",ONE:"BigONE Token"}})}},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p,v,m,g,y,b,x=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=x.length>0&&void 0!==x[0]?x[0]:{},e.next=3,this.publicGetAssetPairs(t);case 3:for(r=e.sent,n=this.safeValue(r,"data",[]),a=[],s=0;s<n.length;s++)o=n[s],u=this.safeString(o,"name"),c=this.safeString(o,"id"),d=this.safeValue(o,"base_asset",{}),h=this.safeValue(o,"quote_asset",{}),l=this.safeString(d,"symbol"),f=this.safeString(h,"symbol"),p=this.safeCurrencyCode(l),v=this.safeCurrencyCode(f),m=p+"/"+v,g={amount:this.safeInteger(o,"base_scale"),price:this.safeInteger(o,"quote_scale")},y=this.safeInteger(o,"min_quote_value"),b={id:u,uuid:c,symbol:m,base:p,quote:v,baseId:l,quoteId:f,active:!0,precision:g,limits:{amount:{min:Math.pow(10,-g.amount),max:void 0},price:{min:Math.pow(10,-g.price),max:void 0},cost:{min:y,max:void 0}},info:o},a.push(b);return e.abrupt("return",a);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadMarkets",value:function(){var e=n(i.mark((function e(){var t,n,a,s,c,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]&&f[0],n=f.length>1&&void 0!==f[1]?f[1]:{},e.next=4,o(u(r.prototype),"loadMarkets",this).call(this,t,n);case 4:if(a=e.sent,void 0===(s=this.safeValue(this.options,"marketsByUuid"))||t){for(s={},c=0;c<this.symbols.length;c++)d=this.symbols[c],h=this.markets[d],l=this.safeString(h,"uuid"),s[l]=h;this.options.marketsByUuid=s}return e.abrupt("return",a);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"asset_pair_name"),i=this.safeSymbol(r,t,"-"),n=void 0,a=this.safeNumber(e,"close"),s=this.safeValue(e,"bid",{}),o=this.safeValue(e,"ask",{});return{symbol:i,timestamp:n,datetime:this.iso8601(n),high:this.safeNumber(e,"high"),low:this.safeNumber(e,"low"),bid:this.safeNumber(s,"price"),bidVolume:this.safeNumber(s,"quantity"),ask:this.safeNumber(o,"price"),askVolume:this.safeNumber(o,"quantity"),vwap:void 0,open:this.safeNumber(e,"open"),close:a,last:a,previousClose:void 0,change:this.safeNumber(e,"daily_change"),percentage:void 0,average:void 0,baseVolume:this.safeNumber(e,"volume"),quoteVolume:void 0,info:e}}},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={asset_pair_name:n.id},e.next=7,this.publicGetAssetPairsAssetPairNameTicker(this.extend(a,r));case 7:return s=e.sent,o=this.safeValue(s,"data",{}),e.abrupt("return",this.parseTicker(o,n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:void 0,r=l.length>1&&void 0!==l[1]?l[1]:{},e.next=4,this.loadMarkets();case 4:return n={},void 0!==t&&(a=this.marketIds(t),n.pair_names=a.join(",")),e.next=8,this.publicGetAssetPairsTickers(this.extend(n,r));case 8:for(s=e.sent,o=this.safeValue(s,"data",[]),u={},c=0;c<o.length;c++)d=this.parseTicker(o[c]),h=d.symbol,u[h]=d;return e.abrupt("return",this.filterByArray(u,"symbol",t));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTime",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:{},e.next=3,this.publicGetPing(t);case 3:return r=e.sent,n=this.safeValue(r,"data",{}),a=this.safeInteger(n,"timestamp"),e.abrupt("return",parseInt(a/1e6));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:{},e.next=4,this.loadMarkets();case 4:return a=this.market(t),s={asset_pair_name:a.id},void 0!==r&&(s.limit=r),e.next=9,this.publicGetAssetPairsAssetPairNameDepth(this.extend(s,n));case 9:return o=e.sent,u=this.safeValue(o,"data",{}),e.abrupt("return",this.parseOrderBook(u,void 0,"bids","asks","price","quantity"));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.parse8601(this.safeString2(e,"created_at","inserted_at")),i=this.safeString(e,"price"),n=this.safeString(e,"amount"),a=this.parseNumber(i),s=this.parseNumber(n),o=this.parseNumber(w.stringMul(i,n)),u=this.safeString(e,"asset_pair_name"),c=this.safeSymbol(u,t,"-"),d=this.safeString(e,"side"),h=this.safeString(e,"taker_side"),l=void 0;void 0!==h&&void 0!==d&&"SELF_TRADING"!==d&&(l=h===d?"taker":"maker"),void 0===d?d="ASK"===h?"sell":"buy":"BID"===d?d="buy":"ASK"===d&&(d="sell");var f=this.safeString(e,"maker_order_id"),p=this.safeString(e,"taker_order_id"),v=void 0;void 0!==f?v=void 0!==p?[f,p]:f:void 0!==p&&(v=p);var m=this.safeString(e,"id"),g={id:m,timestamp:r,datetime:this.iso8601(r),symbol:c,order:v,type:"limit",side:d,takerOrMaker:l,price:a,amount:s,cost:parseFloat(o),info:e},y=void 0,b=void 0;void 0!==t&&void 0!==l?"buy"===d?"maker"===l?(y=t.base,b=t.quote):(y=t.quote,b=t.base):"maker"===l?(y=t.quote,b=t.base):(y=t.base,b=t.quote):"SELF_TRADING"===d&&("BID"===h?(y=t.quote,b=t.base):"ASK"===h&&(y=t.base,b=t.quote));var x=this.safeNumber(e,"maker_fee"),k=this.safeNumber(e,"taker_fee");return void 0!==x?void 0!==k?g.fees=[{cost:x,currency:y},{cost:k,currency:b}]:g.fee={cost:x,currency:y}:g.fee=void 0!==k?{cost:k,currency:b}:void 0,g}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={asset_pair_name:s.id},e.next=9,this.publicGetAssetPairsAssetPairNameTrades(this.extend(o,a));case 9:return u=e.sent,c=this.safeValue(u,"data",[]),e.abrupt("return",this.parseTrades(c,s,r,n));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){return[this.parse8601(this.safeString(e,"time")),this.safeNumber(e,"open"),this.safeNumber(e,"high"),this.safeNumber(e,"low"),this.safeNumber(e,"close"),this.safeNumber(e,"volume")]}},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>1&&void 0!==l[1]?l[1]:"1m",n=l.length>2&&void 0!==l[2]?l[2]:void 0,a=l.length>3&&void 0!==l[3]?l[3]:void 0,s=l.length>4&&void 0!==l[4]?l[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),void 0===a&&(a=100),u={asset_pair_name:o.id,period:this.timeframes[r],limit:a},void 0!==n&&(c=this.sum(n,a*this.parseTimeframe(r)*1e3),u.time=this.iso8601(c)),e.next=12,this.publicGetAssetPairsAssetPairNameCandles(this.extend(u,s));case 12:return d=e.sent,h=this.safeValue(d,"data",[]),e.abrupt("return",this.parseOHLCVs(h,o,r,n,a));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:{},e.next=3,this.loadMarkets();case 3:return r=this.safeString(t,"type",""),t=this.omit(t,"type"),n="privateGet"+this.capitalize(r)+"Accounts",e.next=8,this[n](t);case 8:for(a=e.sent,s={info:a},o=this.safeValue(a,"data",[]),u=0;u<o.length;u++)c=o[u],d=this.safeString(c,"asset_symbol"),h=this.safeCurrencyCode(d),(l=this.account()).total=this.safeString(c,"balance"),l.used=this.safeString(c,"locked_balance"),s[h]=l;return e.abrupt("return",this.parseBalance(s,!1));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),i=this.safeString(e,"asset_pair_name"),n=this.safeSymbol(i,t,"-"),a=this.parse8601(this.safeString(e,"created_at")),s=this.safeNumber(e,"price"),o=this.safeNumber(e,"amount"),u=this.safeNumber(e,"filled_amount"),c=this.parseOrderStatus(this.safeString(e,"state")),d=this.safeString(e,"side");d="BID"===d?"buy":"sell";var h=this.parse8601(this.safeString(e,"updated_at")),l=this.safeNumber(e,"avg_deal_price");return this.safeOrder({info:e,id:r,clientOrderId:void 0,timestamp:a,datetime:this.iso8601(a),lastTradeTimestamp:h,symbol:n,type:void 0,timeInForce:void 0,postOnly:void 0,side:d,price:s,stopPrice:void 0,amount:o,cost:void 0,average:l,filled:u,remaining:void 0,status:c,fee:void 0,trades:void 0})}},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,u,c,d,h,l,f,v,m,g=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=g.length>4&&void 0!==g[4]?g[4]:void 0,o=g.length>5&&void 0!==g[5]?g[5]:{},e.next=4,this.loadMarkets();case 4:if(u=this.market(t),n="buy"===n?"BID":"ASK",c=r.toUpperCase(),d={asset_pair_name:u.id,side:n,amount:this.amountToPrecision(t,a),type:c},"LIMIT"!==c){e.next=12;break}d.price=this.priceToPrecision(t,s),e.next=21;break;case 12:if(l="STOP_MARKET"===c,!(h="STOP_LIMIT"===c)&&!l){e.next=20;break}if(void 0!==(f=this.safeNumber2(o,"stop_price","stopPrice"))){e.next=18;break}throw new p(this.id+" createOrder() requires a stop_price parameter");case 18:d.stop_price=this.priceToPrecision(t,f),o=this.omit(o,["stop_price","stopPrice"]);case 20:h&&(d.price=this.priceToPrecision(t,s));case 21:return e.next=23,this.privatePostOrders(this.extend(d,o));case 23:return v=e.sent,m=this.safeValue(v,"data"),e.abrupt("return",this.parseOrder(m,u));case 26:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.length>1&&void 0!==o[1]?o[1]:void 0,r=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return n={id:t},e.next=7,this.privatePostOrdersIdCancel(this.extend(n,r));case 7:return a=e.sent,s=this.safeValue(a,"data"),e.abrupt("return",this.parseOrder(s));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cancelAllOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=4,this.loadMarkets();case 4:return n=this.market(t),a={asset_pair_name:n.id},e.next=8,this.privatePostOrdersCancel(this.extend(a,r));case 8:return s=e.sent,e.abrupt("return",s);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.length>1&&void 0!==o[1]?o[1]:void 0,r=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return n={id:t},e.next=7,this.privateGetOrdersId(this.extend(n,r));case 7:return a=e.sent,s=this.safeValue(a,"data",{}),e.abrupt("return",this.parseOrder(s));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},void 0!==t){e.next=6;break}throw new p(this.id+" fetchOrders() requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.market(t),o={asset_pair_name:s.id},void 0!==n&&(o.limit=n),e.next=13,this.privateGetOrders(this.extend(o,a));case 13:return u=e.sent,c=this.safeValue(u,"data",[]),e.abrupt("return",this.parseOrders(c,s,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:if(void 0!==t){e.next=8;break}throw new p(this.id+" fetchMyTrades() requires a symbol argument");case 8:return s=this.market(t),o={asset_pair_name:s.id},void 0!==n&&(o.limit=n),e.next=13,this.privateGetTrades(this.extend(o,a));case 13:return u=e.sent,c=this.safeValue(u,"data",[]),e.abrupt("return",this.parseTrades(c,s,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({PENDING:"open",FILLED:"closed",CANCELLED:"canceled"},e)}},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:void 0,a=o.length>3&&void 0!==o[3]?o[3]:{},s={state:"PENDING"},e.next=7,this.fetchOrders(t,r,n,this.extend(s,a));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:void 0,a=o.length>3&&void 0!==o[3]?o[3]:{},s={state:"FILLED"},e.next=7,this.fetchOrders(t,r,n,this.extend(s,a));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"nonce",value:function(){return 1e3*this.microseconds()}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.omit(i,this.extractParams(e)),o=this.implodeParams(this.urls.api[t],{hostname:this.hostname}),u=o+"/"+this.implodeParams(e,i);if("public"===t)Object.keys(s).length&&(u+="?"+this.urlencode(s));else{this.checkRequiredCredentials();var c=this.nonce().toString(),d={type:"OpenAPIV2",sub:this.apiKey,nonce:c},h=this.jwt(d,this.encode(this.secret));n={Authorization:"Bearer "+h},"GET"===r?Object.keys(s).length&&(u+="?"+this.urlencode(s)):"POST"===r&&(n["Content-Type"]="application/json",a=this.json(s))}return{url:u,method:r,body:a,headers:n}}},{key:"fetchDepositAddress",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.currency(t),a={asset_symbol:n.id},e.next=7,this.privateGetAssetsAssetSymbolAddress(this.extend(a,r));case 7:if(s=e.sent,o=this.safeValue(s,"data",[]),!(o.length<1)){e.next=12;break}throw new f(this.id+"fetchDepositAddress() returned empty address response");case 12:return u=o[0],c=this.safeString(u,"value"),d=this.safeString(u,"memo"),this.checkAddress(c),e.abrupt("return",{currency:t,address:c,tag:d,info:s});case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTransactionStatus",value:function(e){return this.safeString({WITHHOLD:"ok",UNCONFIRMED:"pending",CONFIRMED:"ok"},e,e)}},{key:"parseTransaction",value:function(e){var t=this.safeString(e,"asset_symbol"),r=this.safeCurrencyCode(t),i=this.safeInteger(e,"id"),n=this.safeNumber(e,"amount"),a=this.parseTransactionStatus(this.safeString(e,"state")),s=this.parse8601(this.safeString(e,"inserted_at")),o=this.parse8601(this.safeString2(e,"updated_at","completed_at")),u=this.safeString(e,"txid"),c=this.safeString(e,"target_address"),d=this.safeString(e,"memo"),h="customer_id"in e?"deposit":"withdrawal";return{info:e,id:i,txid:u,timestamp:s,datetime:this.iso8601(s),addressFrom:void 0,address:void 0,addressTo:c,tagFrom:void 0,tag:d,tagTo:void 0,type:h,amount:n,currency:r,status:a,updated:o,fee:void 0}}},{key:"fetchDeposits",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return s={},o=void 0,void 0!==t&&(o=this.currency(t),s.asset_symbol=o.id),void 0!==n&&(s.limit=n),e.next=12,this.privateGetDeposits(this.extend(s,a));case 12:return u=e.sent,c=this.safeValue(u,"data",[]),e.abrupt("return",this.parseTransactions(c,t,r,n));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchWithdrawals",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return s={},o=void 0,void 0!==t&&(o=this.currency(t),s.asset_symbol=o.id),void 0!==n&&(s.limit=n),e.next=12,this.privateGetWithdrawals(this.extend(s,a));case 12:return u=e.sent,c=this.safeValue(u,"data",[]),e.abrupt("return",this.parseTransactions(c,t,r,n));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"withdraw",value:function(){var e=n(i.mark((function e(t,r,n){var a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.length>3&&void 0!==h[3]?h[3]:void 0,s=h.length>4&&void 0!==h[4]?h[4]:{},e.next=4,this.loadMarkets();case 4:return o=this.currency(t),u={symbol:o.id,target_address:n,amount:this.currencyToPrecision(t,r)},void 0!==a&&(u.memo=a),e.next=9,this.privatePostWithdrawals(this.extend(u,s));case 9:return c=e.sent,d=this.safeValue(c,"data",{}),e.abrupt("return",this.parseTransaction(d,o));case 12:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,u){if(void 0!==s){var c=this.safeString(s,"code"),d=this.safeString(s,"message");if("0"!==c){var h=this.id+" "+a;throw this.throwExactlyMatchedException(this.exceptions.exact,d,h),this.throwExactlyMatchedException(this.exceptions.exact,c,h),this.throwBroadlyMatchedException(this.exceptions.broad,d,h),new f(h)}}}}]),r}(h)},function(e,t,r){"use strict";var i=r(7),n=r(8),a=r(1),s=r(2),o=r(6),u=r(3),c=r(4),d=r(5),h=r(161);e.exports=function(e){c(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(u(r.prototype),"describe",this).call(this),{id:"binanceus",name:"Binance US",countries:["US"],certified:!1,pro:!0,urls:{logo:"https://user-images.githubusercontent.com/1294454/65177307-217b7c80-da5f-11e9-876e-0b748ba0a358.jpg",api:{web:"https://www.binance.us",wapi:"https://api.binance.us/wapi/v3",public:"https://api.binance.us/api/v1",private:"https://api.binance.us/api/v3",v3:"https://api.binance.us/api/v3",v1:"https://api.binance.us/api/v1"},www:"https://www.binance.us",referral:"https://www.binance.us/?ref=35005074",doc:"https://github.com/binance-us/binance-official-api-docs",fees:"https://www.binance.us/en/fee/schedule"},fees:{trading:{tierBased:!0,percentage:!0,taker:.001,maker:.001}},options:{quoteOrderQty:!1}})}},{key:"fetchCurrencies",value:function(){var e=n(i.mark((function e(){var t=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.length>0&&void 0!==t[0]?t[0]:{},e.abrupt("return",void 0);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),r}(h)},function(e,t,r){"use strict";var i=r(7),n=r(8),a=r(1),s=r(2),o=r(6),u=r(3),c=r(4),d=r(5),h=r(11),l=r(10),f=l.ArgumentsRequired,p=l.ExchangeError,v=l.InvalidNonce,m=l.AuthenticationError,g=l.PermissionDenied,y=r(12);e.exports=function(e){c(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(u(r.prototype),"describe",this).call(this),{id:"bit2c",name:"Bit2C",countries:["IL"],rateLimit:3e3,has:{cancelOrder:!0,CORS:!1,createOrder:!0,fetchBalance:!0,fetchMyTrades:!0,fetchOpenOrders:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTrades:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/27766119-3593220e-5ece-11e7-8b3a-5a041f6bcc3f.jpg",api:"https://bit2c.co.il",www:"https://www.bit2c.co.il",referral:"https://bit2c.co.il/Aff/63bfed10-e359-420c-ab5a-ad368dab0baf",doc:["https://www.bit2c.co.il/home/api","https://github.com/OferE/bit2c"]},api:{public:{get:["Exchanges/{pair}/Ticker","Exchanges/{pair}/orderbook","Exchanges/{pair}/trades","Exchanges/{pair}/lasttrades"]},private:{post:["Merchant/CreateCheckout","Order/AddCoinFundsRequest","Order/AddFund","Order/AddOrder","Order/AddOrderMarketPriceBuy","Order/AddOrderMarketPriceSell","Order/CancelOrder","Order/AddCoinFundsRequest","Order/AddStopOrder","Payment/GetMyId","Payment/Send","Payment/Pay"],get:["Account/Balance","Account/Balance/v2","Order/MyOrders","Order/GetById","Order/AccountHistory","Order/OrderHistory"]}},markets:{"BTC/NIS":{id:"BtcNis",symbol:"BTC/NIS",base:"BTC",quote:"NIS",baseId:"Btc",quoteId:"Nis"},"ETH/NIS":{id:"EthNis",symbol:"ETH/NIS",base:"ETH",quote:"NIS",baseId:"Eth",quoteId:"Nis"},"BCH/NIS":{id:"BchabcNis",symbol:"BCH/NIS",base:"BCH",quote:"NIS",baseId:"Bchabc",quoteId:"Nis"},"LTC/NIS":{id:"LtcNis",symbol:"LTC/NIS",base:"LTC",quote:"NIS",baseId:"Ltc",quoteId:"Nis"},"ETC/NIS":{id:"EtcNis",symbol:"ETC/NIS",base:"ETC",quote:"NIS",baseId:"Etc",quoteId:"Nis"},"BTG/NIS":{id:"BtgNis",symbol:"BTG/NIS",base:"BTG",quote:"NIS",baseId:"Btg",quoteId:"Nis"},"BSV/NIS":{id:"BchsvNis",symbol:"BSV/NIS",base:"BSV",quote:"NIS",baseId:"Bchsv",quoteId:"Nis"},"GRIN/NIS":{id:"GrinNis",symbol:"GRIN/NIS",base:"GRIN",quote:"NIS",baseId:"Grin",quoteId:"Nis"}},fees:{trading:{maker:.005,taker:.005}},options:{fetchTradesMethod:"public_get_exchanges_pair_trades"},exceptions:{exact:{"Please provide valid APIkey":m},broad:{"Please provide valid nonce":v,"please approve new terms of use on site":g}}})}},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetAccountBalanceV2(t);case 5:for(r=e.sent,n={info:r},a=Object.keys(this.currencies),s=0;s<a.length;s++)o=a[s],u=this.account(),c=this.currencyId(o),(d=c.toUpperCase())in r&&(u.free=this.safeString(r,"AVAILABLE_"+d),u.total=this.safeString(r,d)),n[o]=u;return e.abrupt("return",this.parseBalance(n,!1));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.loadMarkets();case 4:return n={pair:this.marketId(t)},e.next=7,this.publicGetExchangesPairOrderbook(this.extend(n,r));case 7:return a=e.sent,e.abrupt("return",this.parseOrderBook(a));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:{},e.next=3,this.loadMarkets();case 3:return n={pair:this.marketId(t)},e.next=6,this.publicGetExchangesPairTicker(this.extend(n,r));case 6:return a=e.sent,s=this.milliseconds(),o=this.safeNumber(a,"av"),u=this.safeNumber(a,"a"),c=void 0,void 0!==u&&void 0!==o&&(c=u*o),d=this.safeNumber(a,"ll"),e.abrupt("return",{symbol:t,timestamp:s,datetime:this.iso8601(s),high:void 0,low:void 0,bid:this.safeNumber(a,"h"),bidVolume:void 0,ask:this.safeNumber(a,"l"),askVolume:void 0,vwap:void 0,open:void 0,close:d,last:d,previousClose:void 0,change:void 0,percentage:void 0,average:o,baseVolume:u,quoteVolume:c,info:a});case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o=this.options.fetchTradesMethod,u={pair:s.id},void 0!==r&&(u.date=parseInt(r)),void 0!==n&&(u.limit=n),e.next=12,this[o](this.extend(u,a));case 12:if("string"!==typeof(c=e.sent)){e.next=15;break}throw new p(c);case 15:return e.abrupt("return",this.parseTrades(c,s,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=h.length>4&&void 0!==h[4]?h[4]:void 0,o=h.length>5&&void 0!==h[5]?h[5]:{},e.next=4,this.loadMarkets();case 4:return u="privatePostOrderAddOrder",c={Amount:a,Pair:this.marketId(t)},"market"===r?u+="MarketPrice"+this.capitalize(n):(c.Price=s,c.Total=a*s,c.IsBid="buy"===n),e.next=9,this[u](this.extend(c,o));case 9:return d=e.sent,e.abrupt("return",{info:d,id:d.NewOrder.id});case 11:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:{},n={id:t},e.next=5,this.privatePostOrderCancelOrder(this.extend(n,r));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=l.length>0&&void 0!==l[0]?l[0]:void 0,r=l.length>1&&void 0!==l[1]?l[1]:void 0,n=l.length>2&&void 0!==l[2]?l[2]:void 0,a=l.length>3&&void 0!==l[3]?l[3]:{},void 0!==t){e.next=6;break}throw new f(this.id+" fetchOpenOrders() requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.market(t),o={pair:s.id},e.next=12,this.privateGetOrderMyOrders(this.extend(o,a));case 12:return u=e.sent,c=this.safeValue(u,s.id,{}),d=this.safeValue(c,"ask",[]),h=this.safeValue(c,"bid",[]),e.abrupt("return",this.parseOrders(this.arrayConcat(d,h),s,r,n));case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeInteger(e,"created"),i=this.safeNumber(e,"price"),n=this.safeNumber(e,"amount"),a=void 0;void 0!==t&&(a=t.symbol);var s=this.safeValue(e,"type");0===s?s="buy":1===s&&(s="sell");var o=this.safeString(e,"id"),u=this.safeString(e,"status");return this.safeOrder({id:o,clientOrderId:void 0,timestamp:r,datetime:this.iso8601(r),lastTradeTimestamp:void 0,status:u,symbol:a,type:void 0,timeInForce:void 0,postOnly:void 0,side:s,price:i,stopPrice:void 0,amount:n,filled:void 0,remaining:void 0,cost:void 0,trades:void 0,fee:void 0,info:e,average:void 0})}},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:void 0,r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},e.next=6,this.loadMarkets();case 6:return s=void 0,o={},void 0!==n&&(o.take=n),o.take=n,void 0!==r&&(o.toTime=this.ymd(this.milliseconds(),"."),o.fromTime=this.ymd(r,".")),void 0!==t&&(s=this.market(t),o.pair=s.id),e.next=14,this.privateGetOrderOrderHistory(this.extend(o,a));case 14:return u=e.sent,e.abrupt("return",this.parseTrades(u,s,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0,i=void 0,n=void 0,a=void 0,s=void 0,o=void 0,u=void 0,c=this.safeString(e,"reference");if(void 0!==c){r=this.safeTimestamp(e,"ticks"),n=this.safeString(e,"price"),a=this.safeString(e,"firstAmount");var d=c.split("|");if(void 0===t){var h=this.safeString(e,"pair");h in this.markets_by_id[h]?t=this.markets_by_id[h]:d[0]in this.markets_by_id&&(t=this.markets_by_id[d[0]])}s=d[1],i=d[2],0===(u=this.safeInteger(e,"action"))?u="buy":1===u&&(u="sell"),o=this.safeNumber(e,"feeAmount")}else r=this.safeTimestamp(e,"date"),i=this.safeString(e,"tid"),n=this.safeString(e,"price"),a=this.safeString(e,"amount"),void 0!==(u=this.safeValue(e,"isBid"))&&(u=u?"buy":"sell");var l=void 0;void 0!==t&&(l=t.symbol);var f=this.parseNumber(n),p=this.parseNumber(a),v=this.parseNumber(y.stringMul(n,a));return{info:e,id:i,timestamp:r,datetime:this.iso8601(r),symbol:l,order:s,type:void 0,side:u,takerOrMaker:void 0,price:f,amount:p,cost:v,fee:{cost:o,currency:"NIS",rate:void 0}}}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.urls.api+"/"+this.implodeParams(e,i);if("public"===t)s+=".json";else{this.checkRequiredCredentials();var o=this.nonce(),u=this.extend({nonce:o},i),c=this.urlencode(u);"GET"===r?Object.keys(u).length&&(s+="?"+c):a=c;var d=this.hmac(this.encode(c),this.encode(this.secret),"sha512","base64");n={"Content-Type":"application/x-www-form-urlencoded",key:this.apiKey,sign:d}}return{url:s,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,u){if(void 0!==s){var c=this.safeString(s,"error");if(void 0!==c){var d=this.id+" "+a;throw this.throwExactlyMatchedException(this.exceptions.exact,c,d),this.throwBroadlyMatchedException(this.exceptions.broad,c,d),new p(d)}}}}]),r}(h)},function(e,t,r){"use strict";var i=r(7),n=r(8),a=r(1),s=r(2),o=r(6),u=r(3),c=r(4),d=r(5),h=r(11),l=r(10),f=l.ExchangeError,p=l.AuthenticationError,v=l.InvalidNonce,m=l.InsufficientFunds,g=l.InvalidOrder,y=l.OrderNotFound,b=l.PermissionDenied,x=r(12);e.exports=function(e){c(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(u(r.prototype),"describe",this).call(this),{id:"bitbank",name:"bitbank",countries:["JP"],version:"v1",has:{cancelOrder:!0,createOrder:!0,fetchBalance:!0,fetchDepositAddress:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTrades:!0,withdraw:!0},timeframes:{"1m":"1min","5m":"5min","15m":"15min","30m":"30min","1h":"1hour","4h":"4hour","8h":"8hour","12h":"12hour","1d":"1day","1w":"1week"},hostname:"bitbank.cc",urls:{logo:"https://user-images.githubusercontent.com/1294454/37808081-b87f2d9c-2e59-11e8-894d-c1900b7584fe.jpg",api:{public:"https://public.{hostname}",private:"https://api.{hostname}",markets:"https://api.{hostname}"},www:"https://bitbank.cc/",doc:"https://docs.bitbank.cc/",fees:"https://bitbank.cc/docs/fees/"},api:{public:{get:["{pair}/ticker","{pair}/depth","{pair}/transactions","{pair}/transactions/{yyyymmdd}","{pair}/candlestick/{candletype}/{yyyymmdd}"]},private:{get:["user/assets","user/spot/order","user/spot/active_orders","user/spot/trade_history","user/withdrawal_account"],post:["user/spot/order","user/spot/cancel_order","user/spot/cancel_orders","user/spot/orders_info","user/request_withdrawal"]},markets:{get:["spot/pairs"]}},exceptions:{20001:p,20002:p,20003:p,20005:p,20004:v,40020:g,40021:g,40025:f,40013:y,40014:y,50008:b,50009:y,50010:y,60001:m,60005:g}})}},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p,v,m,g,y,b,k,w,_,S,O=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=O.length>0&&void 0!==O[0]?O[0]:{},e.next=3,this.marketsGetSpotPairs(t);case 3:for(r=e.sent,n=this.safeValue(r,"data"),a=this.safeValue(n,"pairs",[]),s=[],o=0;o<a.length;o++)u=a[o],c=this.safeString(u,"name"),d=this.safeString(u,"base_asset"),h=this.safeString(u,"quote_asset"),l=this.safeCurrencyCode(d),f=this.safeCurrencyCode(h),p=l+"/"+f,v=this.safeNumber(u,"maker_fee_rate_quote"),m=this.safeNumber(u,"taker_fee_rate_quote"),g=this.safeString(u,"price_digits"),y=void 0===g?void 0:"1e-"+g,b={price:parseInt(g),amount:this.safeInteger(u,"amount_digits")},k=this.safeValue(u,"is_enabled"),w=this.safeString(u,"unit_amount"),_=x.stringMul(w,y),S={amount:{min:this.safeNumber(u,"unit_amount"),max:this.safeNumber(u,"limit_max_amount")},price:{min:this.parseNumber(y),max:void 0},cost:{min:this.parseNumber(_),max:void 0}},s.push({info:u,id:c,symbol:p,baseId:d,quoteId:h,base:l,quote:f,precision:b,limits:S,active:k,maker:v,taker:m});return e.abrupt("return",s);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0;void 0!==t&&(r=t.symbol);var i=this.safeInteger(e,"timestamp"),n=this.safeNumber(e,"last");return{symbol:r,timestamp:i,datetime:this.iso8601(i),high:this.safeNumber(e,"high"),low:this.safeNumber(e,"low"),bid:this.safeNumber(e,"buy"),bidVolume:void 0,ask:this.safeNumber(e,"sell"),askVolume:void 0,vwap:void 0,open:void 0,close:n,last:n,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeNumber(e,"vol"),quoteVolume:void 0,info:e}}},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={pair:n.id},e.next=7,this.publicGetPairTicker(this.extend(a,r));case 7:return s=e.sent,o=this.safeValue(s,"data",{}),e.abrupt("return",this.parseTicker(o,n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u.length>1&&void 0!==u[1]?u[1]:void 0,r=u.length>2&&void 0!==u[2]?u[2]:{},e.next=4,this.loadMarkets();case 4:return n={pair:this.marketId(t)},e.next=7,this.publicGetPairDepth(this.extend(n,r));case 7:return a=e.sent,s=this.safeValue(a,"data",{}),o=this.safeInteger(s,"timestamp"),e.abrupt("return",this.parseOrderBook(s,o));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeInteger(e,"executed_at"),i=void 0,n=void 0;void 0!==t&&(i=t.symbol,n=t.quote);var a=this.safeString(e,"price"),s=this.safeString(e,"amount"),o=this.parseNumber(a),u=this.parseNumber(s),c=this.parseNumber(x.stringMul(a,s)),d=this.safeString2(e,"transaction_id","trade_id"),h=this.safeString(e,"maker_taker"),l=void 0,f=this.safeNumber(e,"fee_amount_quote");void 0!==f&&(l={currency:n,cost:f});var p=this.safeString(e,"order_id"),v=this.safeString(e,"type"),m=this.safeString(e,"side");return{timestamp:r,datetime:this.iso8601(r),symbol:i,id:d,order:p,type:v,side:m,takerOrMaker:h,price:o,amount:u,cost:c,fee:l,info:e}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={pair:s.id},e.next=9,this.publicGetPairTransactions(this.extend(o,a));case 9:return u=e.sent,c=this.safeValue(u,"data",{}),d=this.safeValue(c,"transactions",[]),e.abrupt("return",this.parseTrades(d,s,r,n));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){return[this.safeInteger(e,5),this.safeNumber(e,0),this.safeNumber(e,1),this.safeNumber(e,2),this.safeNumber(e,3),this.safeNumber(e,4)]}},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d,h,l,f,p,v=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=v.length>1&&void 0!==v[1]?v[1]:"5m",n=v.length>2&&void 0!==v[2]?v[2]:void 0,a=v.length>3&&void 0!==v[3]?v[3]:void 0,s=v.length>4&&void 0!==v[4]?v[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),u=this.milliseconds(),u=(u=this.ymd(u)).split("-"),c={pair:o.id,candletype:this.timeframes[r],yyyymmdd:u.join("")},e.next=13,this.publicGetPairCandlestickCandletypeYyyymmdd(this.extend(c,s));case 13:return d=e.sent,h=this.safeValue(d,"data",{}),l=this.safeValue(h,"candlestick",[]),f=this.safeValue(l,0,{}),p=this.safeValue(f,"ohlcv",[]),e.abrupt("return",this.parseOHLCVs(p,o,r,n,a));case 19:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetUserAssets(t);case 5:for(r=e.sent,n={info:r},a=this.safeValue(r,"data",{}),s=this.safeValue(a,"assets",[]),o=0;o<s.length;o++)u=s[o],c=this.safeString(u,"asset"),d=this.safeCurrencyCode(c),(h=this.account()).free=this.safeString(u,"free_amount"),h.used=this.safeString(u,"locked_amount"),h.total=this.safeString(u,"onhand_amount"),n[d]=h;return e.abrupt("return",this.parseBalance(n,!1));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({UNFILLED:"open",PARTIALLY_FILLED:"open",FULLY_FILLED:"closed",CANCELED_UNFILLED:"canceled",CANCELED_PARTIALLY_FILLED:"canceled"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"order_id"),i=this.safeString(e,"pair"),n=void 0;i&&!t&&i in this.marketsById&&(t=this.marketsById[i]),void 0!==t&&(n=t.symbol);var a=this.safeInteger(e,"ordered_at"),s=this.safeNumber(e,"price"),o=this.safeNumber(e,"start_amount"),u=this.safeNumber(e,"executed_amount"),c=this.safeNumber(e,"remaining_amount"),d=this.safeNumber(e,"average_price"),h=this.parseOrderStatus(this.safeString(e,"status")),l=this.safeStringLower(e,"type"),f=this.safeStringLower(e,"side");return this.safeOrder({id:r,clientOrderId:void 0,datetime:this.iso8601(a),timestamp:a,lastTradeTimestamp:void 0,status:h,symbol:n,type:l,timeInForce:void 0,postOnly:void 0,side:f,price:s,stopPrice:void 0,cost:void 0,average:d,amount:o,filled:u,remaining:c,trades:void 0,fee:void 0,info:e})}},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,u,c,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=l.length>4&&void 0!==l[4]?l[4]:void 0,o=l.length>5&&void 0!==l[5]?l[5]:{},e.next=4,this.loadMarkets();case 4:if(u=this.market(t),void 0!==s){e.next=7;break}throw new g(this.id+" createOrder() requires a price argument for both market and limit orders");case 7:return c={pair:u.id,amount:this.amountToPrecision(t,a),price:this.priceToPrecision(t,s),side:n,type:r},e.next=10,this.privatePostUserSpotOrder(this.extend(c,o));case 10:return d=e.sent,h=this.safeValue(d,"data"),e.abrupt("return",this.parseOrder(h,u));case 13:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:{},e.next=4,this.loadMarkets();case 4:return a=this.market(r),s={order_id:t,pair:a.id},e.next=8,this.privatePostUserSpotCancelOrder(this.extend(s,n));case 8:return o=e.sent,u=this.safeValue(o,"data"),e.abrupt("return",u);case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:{},e.next=4,this.loadMarkets();case 4:return a=this.market(r),s={order_id:t,pair:a.id},e.next=8,this.privateGetUserSpotOrder(this.extend(s,n));case 8:return o=e.sent,u=this.safeValue(o,"data"),e.abrupt("return",this.parseOrder(u,a));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:{},e.next=6,this.loadMarkets();case 6:return s=this.market(t),o={pair:s.id},void 0!==n&&(o.count=n),void 0!==r&&(o.since=parseInt(r/1e3)),e.next=12,this.privateGetUserSpotActiveOrders(this.extend(o,a));case 12:return u=e.sent,c=this.safeValue(u,"data",{}),d=this.safeValue(c,"orders",[]),e.abrupt("return",this.parseOrders(d,s,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:{},e.next=6,this.loadMarkets();case 6:return s=void 0,void 0!==t&&(s=this.market(t)),o={},void 0!==s&&(o.pair=s.id),void 0!==n&&(o.count=n),void 0!==r&&(o.since=parseInt(r/1e3)),e.next=14,this.privateGetUserSpotTradeHistory(this.extend(o,a));case 14:return u=e.sent,c=this.safeValue(u,"data",{}),d=this.safeValue(c,"trades",[]),e.abrupt("return",this.parseTrades(d,s,r,n));case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchDepositAddress",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.currency(t),a={asset:n.id},e.next=7,this.privateGetUserWithdrawalAccount(this.extend(a,r));case 7:return s=e.sent,o=this.safeValue(s,"data",{}),u=this.safeValue(o,"accounts",[]),c=this.safeValue(u,0,{}),d=this.safeString(c,"address"),e.abrupt("return",{currency:n,address:d,tag:void 0,info:s});case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"withdraw",value:function(){var e=n(i.mark((function e(t,r,n){var a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h.length>3&&void 0!==h[3]?h[3]:void 0,"uuid"in(a=h.length>4&&void 0!==h[4]?h[4]:{})){e.next=4;break}throw new f(this.id+" uuid is required for withdrawal");case 4:return e.next=6,this.loadMarkets();case 6:return s=this.currency(t),o={asset:s.id,amount:r},e.next=10,this.privatePostUserRequestWithdrawal(this.extend(o,a));case 10:return u=e.sent,c=this.safeValue(u,"data",{}),d=this.safeString(c,"txid"),e.abrupt("return",{info:u,id:d});case 14:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"nonce",value:function(){return this.milliseconds()}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.omit(i,this.extractParams(e)),o=this.implodeParams(this.urls.api[t],{hostname:this.hostname})+"/";if("public"===t||"markets"===t)o+=this.implodeParams(e,i),Object.keys(s).length&&(o+="?"+this.urlencode(s));else{this.checkRequiredCredentials();var u=this.nonce().toString(),c=u;o+=this.version+"/"+this.implodeParams(e,i),"POST"===r?c+=a=this.json(s):(c+="/"+this.version+"/"+e,Object.keys(s).length&&(o+="?"+(s=this.urlencode(s)),c+="?"+s)),n={"Content-Type":"application/json","ACCESS-KEY":this.apiKey,"ACCESS-NONCE":u,"ACCESS-SIGNATURE":this.hmac(this.encode(c),this.encode(this.secret))}}return{url:o,method:r,body:a,headers:n}}},{key:"request",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d,h,l,p,v,m,g=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=g.length>1&&void 0!==g[1]?g[1]:"public",n=g.length>2&&void 0!==g[2]?g[2]:"GET",a=g.length>3&&void 0!==g[3]?g[3]:{},s=g.length>4&&void 0!==g[4]?g[4]:void 0,o=g.length>5&&void 0!==g[5]?g[5]:void 0,e.next=7,this.fetch2(t,r,n,a,s,o);case 7:if(u=e.sent,c=this.safeInteger(u,"success"),d=this.safeValue(u,"data"),c&&d){e.next=21;break}if(h={1e4:"URL does not exist",10001:"A system error occurred. Please contact support",10002:"Invalid JSON format. Please check the contents of transmission",10003:"A system error occurred. Please contact support",10005:"A timeout error occurred. Please wait for a while and try again",20001:"API authentication failed",20002:"Illegal API key",20003:"API key does not exist",20004:"API Nonce does not exist",20005:"API signature does not exist",20011:"Two-step verification failed",20014:"SMS authentication failed",30001:"Please specify the order quantity",30006:"Please specify the order ID",30007:"Please specify the order ID array",30009:"Please specify the stock",30012:"Please specify the order price",30013:"Trade Please specify either",30015:"Please specify the order type",30016:"Please specify asset name",30019:"Please specify uuid",30039:"Please specify the amount to be withdrawn",40001:"The order quantity is invalid",40006:"Count value is invalid",40007:"End time is invalid",40008:"end_id Value is invalid",40009:"The from_id value is invalid",40013:"The order ID is invalid",40014:"The order ID array is invalid",40015:"Too many specified orders",40017:"Incorrect issue name",40020:"The order price is invalid",40021:"The trading classification is invalid",40022:"Start date is invalid",40024:"The order type is invalid",40025:"Incorrect asset name",40028:"uuid is invalid",40048:"The amount of withdrawal is illegal",50003:"Currently, this account is in a state where you can not perform the operation you specified. Please contact support",50004:"Currently, this account is temporarily registered. Please try again after registering your account",50005:"Currently, this account is locked. Please contact support",50006:"Currently, this account is locked. Please contact support",50008:"User identification has not been completed",50009:"Your order does not exist",50010:"Can not cancel specified order",50011:"API not found",60001:"The number of possessions is insufficient",60002:"It exceeds the quantity upper limit of the tender buying order",60003:"The specified quantity exceeds the limit",60004:"The specified quantity is below the threshold",60005:"The specified price is above the limit",60006:"The specified price is below the lower limit",70001:"A system error occurred. Please contact support",70002:"A system error occurred. Please contact support",70003:"A system error occurred. Please contact support",70004:"We are unable to accept orders as the transaction is currently suspended",70005:"Order can not be accepted because purchase order is currently suspended",70006:"We can not accept orders because we are currently unsubscribed ",70009:"We are currently temporarily restricting orders to be carried out. Please use the limit order.",70010:"We are temporarily raising the minimum order quantity as the system load is now rising."},l=this.exceptions,p=this.safeString(d,"code"),v=this.safeString(h,p,"Error"),void 0===(m=this.safeValue(l,p))){e.next=20;break}throw new m(v);case 20:throw new f(this.id+" "+this.json(u));case 21:return e.abrupt("return",u);case 22:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(h)},function(e,t,r){"use strict";var i=r(7),n=r(8),a=r(1),s=r(2),o=r(6),u=r(3),c=r(4),d=r(5),h=r(11),l=r(10),f=l.InvalidNonce,p=l.InsufficientFunds,v=l.AuthenticationError,m=l.InvalidOrder,g=l.ExchangeError,y=l.OrderNotFound,b=l.AccountSuspended,x=l.BadSymbol,k=l.OrderImmediatelyFillable,w=l.RateLimitExceeded,_=l.OnMaintenance,S=l.PermissionDenied,O=r(12);e.exports=function(e){c(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(u(r.prototype),"describe",this).call(this),{id:"bitbay",name:"BitBay",countries:["MT","EU"],rateLimit:1e3,has:{cancelOrder:!0,CORS:!0,createOrder:!0,fetchBalance:!0,fetchLedger:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTrades:!0,withdraw:!0},timeframes:{"1m":"60","3m":"180","5m":"300","15m":"900","30m":"1800","1h":"3600","2h":"7200","4h":"14400","6h":"21600","12h":"43200","1d":"86400","3d":"259200","1w":"604800"},hostname:"bitbay.net",urls:{referral:"https://auth.bitbay.net/ref/jHlbB4mIkdS1",logo:"https://user-images.githubusercontent.com/1294454/27766132-978a7bd8-5ece-11e7-9540-bc96d1e9bbb8.jpg",www:"https://bitbay.net",api:{public:"https://{hostname}/API/Public",private:"https://{hostname}/API/Trading/tradingApi.php",v1_01Public:"https://api.{hostname}/rest",v1_01Private:"https://api.{hostname}/rest"},doc:["https://bitbay.net/public-api","https://bitbay.net/en/private-api","https://bitbay.net/account/tab-api","https://github.com/BitBayNet/API","https://docs.bitbay.net/v1.0.1-en/reference"],support:"https://support.bitbay.net",fees:"https://bitbay.net/en/fees"},api:{public:{get:["{id}/all","{id}/market","{id}/orderbook","{id}/ticker","{id}/trades"]},private:{post:["info","trade","cancel","orderbook","orders","transfer","withdraw","history","transactions"]},v1_01Public:{get:["trading/ticker","trading/ticker/{symbol}","trading/stats","trading/orderbook/{symbol}","trading/transactions/{symbol}","trading/candle/history/{symbol}/{resolution}"]},v1_01Private:{get:["payments/withdrawal/{detailId}","payments/deposit/{detailId}","trading/offer","trading/config/{symbol}","trading/history/transactions","balances/BITBAY/history","balances/BITBAY/balance","fiat_cantor/rate/{baseId}/{quoteId}","fiat_cantor/history"],post:["trading/offer/{symbol}","trading/config/{symbol}","balances/BITBAY/balance","balances/BITBAY/balance/transfer/{source}/{destination}","fiat_cantor/exchange"],delete:["trading/offer/{symbol}/{id}/{side}/{price}"],put:["balances/BITBAY/balance/{id}"]}},fees:{trading:{maker:0,taker:.001,percentage:!0,tierBased:!1},fiat:{maker:.003,taker:.0043,percentage:!0,tierBased:!0,tiers:{taker:[[.0043,0],[.0042,1250],[.0041,3750],[.004,7500],[.0039,1e4],[.0038,15e3],[.0037,2e4],[.0036,25e3],[.0035,37500],[.0034,5e4],[.0033,75e3],[.0032,1e5],[.0031,15e4],[.003,2e5],[.0029,25e4],[.0028,375e3],[.0027,5e5],[.0026,625e3],[.0025,875e3]],maker:[[.003,0],[.0029,1250],[.0028,3750],[.0028,7500],[.0027,1e4],[.0026,15e3],[.0025,2e4],[.0025,25e3],[.0024,37500],[.0023,5e4],[.0023,75e3],[.0022,1e5],[.0021,15e4],[.0021,2e5],[.002,25e4],[.0019,375e3],[.0018,5e5],[.0018,625e3],[.0017,875e3]]}},funding:{withdraw:{BTC:9e-4,LTC:.005,ETH:.00126,LSK:.2,BCH:6e-4,GAME:.005,DASH:.001,BTG:8e-4,PLN:4,EUR:1.5}}},options:{fiatCurrencies:["EUR","USD","GBP","PLN"]},exceptions:{400:g,401:m,402:m,403:m,404:m,405:m,406:p,408:m,501:v,502:v,503:f,504:g,505:v,506:b,509:g,510:x,FUNDS_NOT_SUFFICIENT:p,OFFER_FUNDS_NOT_EXCEEDING_MINIMUMS:m,OFFER_NOT_FOUND:y,OFFER_WOULD_HAVE_BEEN_PARTIALLY_FILLED:k,ACTION_LIMIT_EXCEEDED:w,UNDER_MAINTENANCE:_,REQUEST_TIMESTAMP_TOO_OLD:f,PERMISSIONS_NOT_SUFFICIENT:S},commonCurrencies:{GGC:"Global Game Coin"}})}},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p,v,m,g,y,b,x,k,w,_,S=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=S.length>0&&void 0!==S[0]?S[0]:{},e.next=3,this.v1_01PublicGetTradingTicker(t);case 3:for(r=e.sent,n=this.safeValue(this.options,"fiatCurrencies",[]),a=[],s=this.safeValue(r,"items"),o=Object.keys(s),u=0;u<o.length;u++)c=o[u],d=s[c],h=this.safeValue(d,"market",{}),l=this.safeValue(h,"first",{}),f=this.safeValue(h,"second",{}),p=this.safeString(l,"currency"),v=this.safeString(f,"currency"),m=p+v,g=this.safeCurrencyCode(p),y=this.safeCurrencyCode(v),b=g+"/"+y,x={amount:this.safeInteger(l,"scale"),price:this.safeInteger(f,"scale")},k=this.safeValue(this.fees,"trading",{}),(this.inArray(g,n)||this.inArray(y,n))&&(k=this.safeValue(this.fees,"fiat",{})),w=this.safeNumber(k,"maker"),_=this.safeNumber(k,"taker"),a.push({id:m,symbol:b,base:g,quote:y,baseId:p,quoteId:v,precision:x,active:void 0,maker:w,taker:_,limits:{amount:{min:this.safeNumber(l,"minOffer"),max:void 0},price:{min:void 0,max:void 0},cost:{min:this.safeNumber(f,"minOffer"),max:void 0}},info:d});return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u.length>0&&void 0!==u[0]?u[0]:void 0,t=u.length>1&&void 0!==u[1]?u[1]:void 0,r=u.length>2&&void 0!==u[2]?u[2]:void 0,n=u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.loadMarkets();case 6:return a={},e.next=9,this.v1_01PrivateGetTradingOffer(this.extend(a,n));case 9:return s=e.sent,o=this.safeValue(s,"items",[]),e.abrupt("return",this.parseOrders(o,void 0,t,r,{status:"open"}));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"market"),i=this.safeSymbol(r,t,"-"),n=this.safeInteger(e,"time"),a=this.safeNumber(e,"startAmount"),s=this.safeNumber(e,"currentAmount"),o=this.safeValue(e,"postOnly");return this.safeOrder({id:this.safeString(e,"id"),clientOrderId:void 0,info:e,timestamp:n,datetime:this.iso8601(n),lastTradeTimestamp:void 0,status:void 0,symbol:i,type:this.safeString(e,"mode"),timeInForce:void 0,postOnly:o,side:this.safeStringLower(e,"offerType"),price:this.safeNumber(e,"rate"),stopPrice:void 0,amount:a,cost:void 0,filled:void 0,remaining:s,average:void 0,fee:void 0,trades:void 0})}},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:void 0,r=l.length>1&&void 0!==l[1]?l[1]:void 0,n=l.length>2&&void 0!==l[2]?l[2]:void 0,a=l.length>3&&void 0!==l[3]?l[3]:{},e.next=6,this.loadMarkets();case 6:return s={},t&&(o=[this.marketId(t)],s.markets=o),u={query:this.json(this.extend(s,a))},e.next=11,this.v1_01PrivateGetTradingHistoryTransactions(u);case 11:if(c=e.sent,d=this.safeValue(c,"items"),h=this.parseTrades(d,void 0,r,n),void 0!==t){e.next=16;break}return e.abrupt("return",h);case 16:return e.abrupt("return",this.filterBySymbol(h,t));case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.v1_01PrivateGetBalancesBITBAYBalance(t);case 5:if(r=e.sent,void 0!==(n=this.safeValue(r,"balances"))){e.next=9;break}throw new g(this.id+" empty balance response "+this.json(r));case 9:for(a={info:r},s=0;s<n.length;s++)o=n[s],u=this.safeString(o,"currency"),c=this.safeCurrencyCode(u),(d=this.account()).used=this.safeString(o,"lockedFunds"),d.free=this.safeString(o,"availableFunds"),a[c]=d;return e.abrupt("return",this.parseBalance(a,!1));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.loadMarkets();case 4:return n={id:this.marketId(t)},e.next=7,this.publicGetIdOrderbook(this.extend(n,r));case 7:return a=e.sent,e.abrupt("return",this.parseOrderBook(a));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:{},e.next=3,this.loadMarkets();case 3:return n={id:this.marketId(t)},e.next=6,this.publicGetIdTicker(this.extend(n,r));case 6:return a=e.sent,s=this.milliseconds(),o=this.safeNumber(a,"volume"),u=this.safeNumber(a,"vwap"),c=void 0,void 0!==o&&void 0!==u&&(c=o*u),d=this.safeNumber(a,"last"),e.abrupt("return",{symbol:t,timestamp:s,datetime:this.iso8601(s),high:this.safeNumber(a,"max"),low:this.safeNumber(a,"min"),bid:this.safeNumber(a,"bid"),bidVolume:void 0,ask:this.safeNumber(a,"ask"),askVolume:void 0,vwap:u,open:void 0,close:d,last:d,previousClose:void 0,change:void 0,percentage:void 0,average:this.safeNumber(a,"average"),baseVolume:o,quoteVolume:c,info:a});case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchLedger",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:{},s=[],void 0!==t&&(o=this.currency(t),s.push(o.id)),u={balanceCurrencies:s},void 0!==r&&(u.fromTime=r),void 0!==n&&(u.limit=n),u=this.extend(u,a),e.next=12,this.v1_01PrivateGetBalancesBITBAYHistory({query:this.json(u)});case 12:return c=e.sent,d=c.items,e.abrupt("return",this.parseLedger(d,void 0,r,n));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseLedgerEntry",value:function(e){var t=this.safeInteger(e,"time"),r=this.safeValue(e,"balance",{}),i=this.safeString(r,"currency"),n=this.safeCurrencyCode(i),a=this.safeValue(e,"change",{}),s=this.safeNumber(a,"total"),o="in";s<0&&(o="out",s=-s);var u=this.safeString(e,"historyId"),c=this.safeString(e,"detailId"),d=this.parseLedgerEntryType(this.safeString(e,"type")),h=this.safeValue(e,"fundsBefore",{}),l=this.safeNumber(h,"total"),f=this.safeValue(e,"fundsAfter",{}),p=this.safeNumber(f,"total");return{info:e,id:u,direction:o,account:void 0,referenceId:c,referenceAccount:void 0,type:d,currency:n,amount:s,before:l,after:p,status:"ok",timestamp:t,datetime:this.iso8601(t),fee:void 0}}},{key:"parseLedgerEntryType",value:function(e){return this.safeString({ADD_FUNDS:"transaction",BITCOIN_GOLD_FORK:"transaction",CREATE_BALANCE:"transaction",FUNDS_MIGRATION:"transaction",WITHDRAWAL_LOCK_FUNDS:"transaction",WITHDRAWAL_SUBTRACT_FUNDS:"transaction",WITHDRAWAL_UNLOCK_FUNDS:"transaction",TRANSACTION_COMMISSION_OUTCOME:"fee",TRANSACTION_COMMISSION_RETURN:"fee",TRANSACTION_OFFER_ABORTED_RETURN:"trade",TRANSACTION_OFFER_COMPLETED_RETURN:"trade",TRANSACTION_POST_INCOME:"trade",TRANSACTION_POST_OUTCOME:"trade",TRANSACTION_PRE_LOCKING:"trade"},e,e)}},{key:"parseOHLCV",value:function(e){var t=this.safeValue(e,1,{});return[this.safeInteger(e,0),this.safeNumber(t,"o"),this.safeNumber(t,"h"),this.safeNumber(t,"l"),this.safeNumber(t,"c"),this.safeNumber(t,"v")]}},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=p.length>1&&void 0!==p[1]?p[1]:"1m",n=p.length>2&&void 0!==p[2]?p[2]:void 0,a=p.length>3&&void 0!==p[3]?p[3]:void 0,s=p.length>4&&void 0!==p[4]?p[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),u=o.baseId+"-"+o.quoteId,c={symbol:u,resolution:this.timeframes[r]},void 0===a&&(a=100),d=this.parseTimeframe(r),h=a*d*1e3,void 0===n?(c.to=this.milliseconds(),c.from=c.to-h):(c.from=parseInt(n),c.to=this.sum(c.from,h)),e.next=15,this.v1_01PublicGetTradingCandleHistorySymbolResolution(this.extend(c,s));case 15:return l=e.sent,f=this.safeValue(l,"items",[]),e.abrupt("return",this.parseOHLCVs(f,o,r,n,a));case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeInteger2(e,"time","t"),i=this.safeString(e,"userAction"),n="Buy"===i?"buy":"sell",a=this.safeValue(e,"wasTaker"),s=void 0;void 0!==a&&(s=a?"taker":"maker");var o=this.safeString2(e,"rate","r"),u=this.safeString2(e,"amount","a"),c=this.parseNumber(o),d=this.parseNumber(u),h=this.parseNumber(O.stringMul(o,u)),l=this.safeNumber(e,"commissionValue"),f=this.safeString(e,"market"),p=(t=this.safeMarket(f,t,"-")).symbol,v=void 0;if(void 0!==l){var m="buy"===n?t.base:t.quote;v={currency:m,cost:l}}var g=this.safeString(e,"offerId"),y=void 0;return void 0!==g&&(y=g?"limit":"market"),{id:this.safeString(e,"id"),order:g,timestamp:r,datetime:this.iso8601(r),symbol:p,type:y,side:n,price:c,amount:d,cost:h,takerOrMaker:s,fee:v,info:e}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o=s.baseId+"-"+s.quoteId,u={symbol:o},void 0!==r&&(u.fromTime=r-1),void 0!==n&&(u.limit=n),e.next=12,this.v1_01PublicGetTradingTransactionsSymbol(this.extend(u,a));case 12:return c=e.sent,d=this.safeValue(c,"items"),e.abrupt("return",this.parseTrades(d,s,r,n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,u,c,d,h,l,f,p,v,m,g,y,b,x,k,w=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=w.length>4&&void 0!==w[4]?w[4]:void 0,o=w.length>5&&void 0!==w[5]?w[5]:{},e.next=4,this.loadMarkets();case 4:return u=this.market(t),c=u.baseId+"-"+u.quoteId,d={symbol:c,offerType:n,amount:a,mode:r},"limit"===r&&(d.rate=s,s=parseFloat(s)),a=parseFloat(a),e.next=11,this.v1_01PrivatePostTradingOfferSymbol(this.extend(d,o));case 11:if(h=e.sent,l=this.milliseconds(),f=this.safeString(h,"offerId"),p=this.safeValue(h,"completed",!1),v=p?"closed":"open",m=0,g=void 0,y=this.safeValue(h,"transactions"),b=void 0,void 0!==y)for(b=this.parseTrades(y,u,void 0,void 0,{timestamp:l,datetime:this.iso8601(l),symbol:t,side:n,type:r,orderId:f}),g=0,x=0;x<b.length;x++)m=this.sum(m,b[x].amount),g=this.sum(g,b[x].cost);return k=a-m,e.abrupt("return",{id:f,info:h,timestamp:l,datetime:this.iso8601(l),lastTradeTimestamp:void 0,status:v,symbol:t,type:r,side:n,price:s,amount:a,cost:g,filled:m,remaining:k,average:void 0,fee:void 0,trades:b,clientOrderId:void 0});case 23:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:{},void 0!==(a=this.safeString(n,"side"))){e.next=5;break}throw new g(this.id+' cancelOrder() requires a `side` parameter ("buy" or "sell")');case 5:if(void 0!==(s=this.safeValue(n,"price"))){e.next=8;break}throw new g(this.id+" cancelOrder() requires a `price` parameter (float or string)");case 8:return e.next=10,this.loadMarkets();case 10:return o=this.market(r),u=o.baseId+"-"+o.quoteId,c={symbol:u,id:t,side:a,price:s},e.abrupt("return",this.v1_01PrivateDeleteTradingOfferSymbolIdSidePrice(this.extend(c,n)));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"isFiat",value:function(e){return this.safeValue({USD:!0,EUR:!0,PLN:!0},e,!1)}},{key:"withdraw",value:function(){var e=n(i.mark((function e(t,r,n){var a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.length>3&&void 0!==h[3]?h[3]:void 0,s=h.length>4&&void 0!==h[4]?h[4]:{},this.checkAddress(n),e.next=5,this.loadMarkets();case 5:return o=void 0,u=this.currency(t),c={currency:u.id,quantity:r},this.isFiat(t)?o="privatePostWithdraw":(o="privatePostTransfer",void 0!==a&&(n+="?dt="+a.toString()),c.address=n),e.next=11,this[o](this.extend(c,s));case 11:return d=e.sent,e.abrupt("return",{info:d,id:void 0});case 13:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.implodeParams(this.urls.api[t],{hostname:this.hostname});if("public"===t){var o=this.omit(i,this.extractParams(e));s+="/"+this.implodeParams(e,i)+".json",Object.keys(o).length&&(s+="?"+this.urlencode(o))}else if("v1_01Public"===t){var u=this.omit(i,this.extractParams(e));s+="/"+this.implodeParams(e,i),Object.keys(u).length&&(s+="?"+this.urlencode(u))}else if("v1_01Private"===t){this.checkRequiredCredentials();var c=this.omit(i,this.extractParams(e));s+="/"+this.implodeParams(e,i);var d=this.milliseconds().toString(),h=void 0;"POST"!==r?(Object.keys(c).length&&(s+="?"+this.urlencode(c)),h=this.apiKey+d):void 0===a&&(a=this.json(c),h=this.apiKey+d+a),n={"Request-Timestamp":d,"Operation-Id":this.uuid(),"API-Key":this.apiKey,"API-Hash":this.hmac(this.encode(h),this.encode(this.secret),"sha512"),"Content-Type":"application/json"}}else this.checkRequiredCredentials(),a=this.urlencode(this.extend({method:e,moment:this.nonce()},i)),n={"Content-Type":"application/x-www-form-urlencoded","API-Key":this.apiKey,"API-Hash":this.hmac(this.encode(a),this.encode(this.secret),"sha512")};return{url:s,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,u){if(void 0!==s){if("code"in s){var c=this.safeString(s,"code"),d=this.id+" "+a;throw this.throwExactlyMatchedException(this.exceptions,c,d),new g(d)}if("status"in s&&"Fail"===this.safeString(s,"status")){for(var h=this.safeValue(s,"errors"),l=this.id+" "+a,f=0;f<h.length;f++){var p=h[f];this.throwExactlyMatchedException(this.exceptions,p,l)}throw new g(l)}}}}]),r}(h)},function(e,t,r){"use strict";var i=r(1),n=r(2),a=r(6),s=r(3),o=r(4),u=r(5),c=r(126);e.exports=function(e){o(r,e);var t=u(r);function r(){return i(this,r),t.apply(this,arguments)}return n(r,[{key:"describe",value:function(){return this.deepExtend(a(s(r.prototype),"describe",this).call(this),{id:"bitcoincom",name:"bitcoin.com",countries:["KN"],urls:{logo:"https://user-images.githubusercontent.com/1294454/97296144-514fa300-1861-11eb-952b-3d55d492200b.jpg",api:{public:"https://api.exchange.bitcoin.com",private:"https://api.exchange.bitcoin.com"},www:"https://exchange.bitcoin.com",doc:"https://api.exchange.bitcoin.com/api/2/explore",fees:"https://exchange.bitcoin.com/fees-and-limits",referral:"https://exchange.bitcoin.com/referral/da948b21d6c92d69"},fees:{trading:{maker:.0015,taker:.002}}})}}]),r}(c)},function(e,t,r){"use strict";var i=r(7),n=r(8),a=r(1),s=r(2),o=r(6),u=r(3),c=r(4),d=r(5),h=r(162),l=r(10),f=l.ExchangeError,p=l.InvalidAddress,v=l.ArgumentsRequired,m=l.InsufficientFunds,g=l.AuthenticationError,y=l.OrderNotFound,b=l.InvalidOrder,x=l.BadRequest,k=l.InvalidNonce,w=l.BadSymbol,_=l.OnMaintenance,S=l.NotSupported,O=r(12);e.exports=function(e){c(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(u(r.prototype),"describe",this).call(this),{id:"bitfinex2",name:"Bitfinex",countries:["VG"],version:"v2",certified:!1,pro:!1,has:{CORS:!1,cancelAllOrders:!0,cancelOrder:!0,createDepositAddress:!0,createLimitOrder:!0,createMarketOrder:!0,createOrder:!0,deposit:!1,editOrder:!1,fetchBalance:!0,fetchClosedOrder:!0,fetchClosedOrders:!1,fetchCurrencies:!0,fetchDepositAddress:!0,fetchFundingFees:!1,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrder:!0,fetchOpenOrders:!0,fetchOrder:!1,fetchOrderTrades:!0,fetchStatus:!0,fetchTickers:!0,fetchTradingFee:!1,fetchTradingFees:!1,fetchTransactions:!0,withdraw:!0},timeframes:{"1m":"1m","5m":"5m","15m":"15m","30m":"30m","1h":"1h","3h":"3h","4h":"4h","6h":"6h","12h":"12h","1d":"1D","1w":"7D","2w":"14D","1M":"1M"},rateLimit:1500,urls:{logo:"https://user-images.githubusercontent.com/1294454/27766244-e328a50c-5ed2-11e7-947b-041416579bb3.jpg",api:{v1:"https://api.bitfinex.com",public:"https://api-pub.bitfinex.com",private:"https://api.bitfinex.com"},www:"https://www.bitfinex.com",doc:["https://docs.bitfinex.com/v2/docs/","https://github.com/bitfinexcom/bitfinex-api-node"],fees:"https://www.bitfinex.com/fees"},api:{v1:{get:["symbols","symbols_details"]},public:{get:["conf/{config}","conf/pub:{action}:{object}","conf/pub:{action}:{object}:{detail}","conf/pub:map:{object}","conf/pub:map:{object}:{detail}","conf/pub:map:currency:{detail}","conf/pub:map:currency:sym","conf/pub:map:currency:label","conf/pub:map:currency:unit","conf/pub:map:currency:undl","conf/pub:map:currency:pool","conf/pub:map:currency:explorer","conf/pub:map:currency:tx:fee","conf/pub:map:tx:method","conf/pub:list:{object}","conf/pub:list:{object}:{detail}","conf/pub:list:currency","conf/pub:list:pair:exchange","conf/pub:list:pair:margin","conf/pub:list:pair:futures","conf/pub:list:competitions","conf/pub:info:{object}","conf/pub:info:{object}:{detail}","conf/pub:info:pair","conf/pub:info:tx:status","conf/pub:fees","platform/status","tickers","ticker/{symbol}","trades/{symbol}/hist","book/{symbol}/{precision}","book/{symbol}/P0","book/{symbol}/P1","book/{symbol}/P2","book/{symbol}/P3","book/{symbol}/R0","stats1/{key}:{size}:{symbol}:{side}/{section}","stats1/{key}:{size}:{symbol}:{side}/last","stats1/{key}:{size}:{symbol}:{side}/hist","stats1/{key}:{size}:{symbol}/{section}","stats1/{key}:{size}:{symbol}/last","stats1/{key}:{size}:{symbol}/hist","stats1/{key}:{size}:{symbol}:long/last","stats1/{key}:{size}:{symbol}:long/hist","stats1/{key}:{size}:{symbol}:short/last","stats1/{key}:{size}:{symbol}:short/hist","candles/trade:{timeframe}:{symbol}/{section}","candles/trade:{timeframe}:{symbol}/last","candles/trade:{timeframe}:{symbol}/hist","status/{type}","status/deriv","liquidations/hist","rankings/{key}:{timeframe}:{symbol}/{section}","rankings/{key}:{timeframe}:{symbol}/hist"],post:["calc/trade/avg","calc/fx"]},private:{post:["auth/r/wallets","auth/r/wallets/hist","auth/r/orders","auth/r/orders/{symbol}","auth/w/order/submit","auth/w/order/update","auth/w/order/cancel","auth/w/order/multi","auth/w/order/cancel/multi","auth/r/orders/{symbol}/hist","auth/r/orders/hist","auth/r/order/{symbol}:{id}/trades","auth/r/trades/{symbol}/hist","auth/r/trades/hist","auth/r/ledgers/{currency}/hist","auth/r/ledgers/hist","auth/r/info/margin/{key}","auth/r/info/margin/base","auth/r/info/margin/sym_all","auth/r/positions","auth/w/position/claim","auth/r/positions/hist","auth/r/positions/audit","auth/r/positions/snap","auth/w/deriv/collateral/set","auth/w/deriv/collateral/limits","auth/r/funding/offers","auth/r/funding/offers/{symbol}","auth/w/funding/offer/submit","auth/w/funding/offer/cancel","auth/w/funding/offer/cancel/all","auth/w/funding/close","auth/w/funding/auto","auth/w/funding/keep","auth/r/funding/offers/{symbol}/hist","auth/r/funding/offers/hist","auth/r/funding/loans","auth/r/funding/loans/hist","auth/r/funding/loans/{symbol}","auth/r/funding/loans/{symbol}/hist","auth/r/funding/credits","auth/r/funding/credits/hist","auth/r/funding/credits/{symbol}","auth/r/funding/credits/{symbol}/hist","auth/r/funding/trades/{symbol}/hist","auth/r/funding/trades/hist","auth/r/info/funding/{key}","auth/r/info/user","auth/r/logins/hist","auth/w/transfer","auth/w/deposit/address","auth/w/deposit/invoice","auth/w/withdraw","auth/r/movements/{currency}/hist","auth/r/movements/hist","auth/r/alerts","auth/w/alert/set","auth/w/alert/price:{symbol}:{price}/del","auth/w/alert/{type}:{symbol}:{price}/del","auth/calc/order/avail","auth/w/settings/set","auth/r/settings","auth/w/settings/del"]}},fees:{trading:{maker:.001,taker:.002},funding:{withdraw:{BTC:4e-4,BCH:1e-4,ETH:.00135,EOS:0,LTC:.001,OMG:.15097,IOT:0,NEO:0,ETC:.01,XRP:.02,ETP:.01,ZEC:.001,BTG:0,DASH:.01,XMR:1e-4,QTM:.01,EDO:.23687,DAT:9.8858,AVT:1.1251,SAN:.35977,USDT:5,SPK:16.971,BAT:1.1209,GNT:2.8789,SNT:9.0848,QASH:1.726,YYW:7.9464}}},options:{precision:"R0",exchangeTypes:{"EXCHANGE MARKET":"market","EXCHANGE LIMIT":"limit"},orderTypes:{market:"EXCHANGE MARKET",limit:"EXCHANGE LIMIT"},fiat:{USD:"USD",EUR:"EUR",JPY:"JPY",GBP:"GBP"},v2AccountsByType:{spot:"exchange",exchange:"exchange",funding:"funding",margin:"margin",derivatives:"margin"}},exceptions:{exact:{10020:x,10100:g,10114:k,20060:_},broad:{address:p,"available balance is only":m,"not enough exchange balance":m,"Order not found":y,"symbol: invalid":w,"Invalid order":b}}})}},{key:"isFiat",value:function(e){return e in this.options.fiat}},{key:"getCurrencyId",value:function(e){return"f"+e}},{key:"fetchStatus",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:{},e.next=3,this.publicGetPlatformStatus(t);case 3:return r=e.sent,n=this.safeValue(r,0),a=1===n?"ok":"maintenance",this.status=this.extend(this.status,{status:a,updated:this.milliseconds()}),e.abrupt("return",this.status);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p,v,m,g,y,b,x,k,w,_,S=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=S.length>0&&void 0!==S[0]?S[0]:{},e.next=3,this.publicGetConfPubListPairFutures(t);case 3:return r=e.sent,e.next=6,this.v1GetSymbolsDetails(t);case 6:for(n=e.sent,a=this.safeValue(r,0,[]),s=[],o=0;o<n.length;o++)u=n[o],c=this.safeStringUpper(u,"pair"),d=!0,this.inArray(c,a)&&(d=!1),h=!d,l=d?"spot":"futures",f=void 0,p=void 0,c.indexOf(":")>=0?(v=c.split(":"),f=v[0],p=v[1]):(f=c.slice(0,3),p=c.slice(3,6)),m=this.safeCurrencyCode(f),g=this.safeCurrencyCode(p),y=m+"/"+g,c="t"+c,f=this.getCurrencyId(f),p=this.getCurrencyId(p),b={price:this.safeInteger(u,"price_precision"),amount:8},x=this.safeString(u,"minimum_order_size"),k=this.safeString(u,"maximum_order_size"),(w={amount:{min:this.parseNumber(x),max:this.parseNumber(k)},price:{min:this.parseNumber("1e-8"),max:void 0}}).cost={min:this.parseNumber(O.stringMul(x,k)),max:void 0},_=this.safeValue(u,"margin"),s.push({id:c,symbol:y,base:m,quote:g,baseId:f,quoteId:p,active:!0,precision:b,limits:w,info:u,type:l,swap:!1,spot:d,margin:_,futures:h});return e.abrupt("return",s);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchCurrencies",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p,v,m,g,y,b,x,k,w=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=w.length>0&&void 0!==w[0]?w[0]:{},r=["pub:list:currency","pub:map:currency:sym","pub:map:currency:label","pub:map:currency:unit","pub:map:currency:undl","pub:map:currency:pool","pub:map:currency:explorer","pub:map:currency:tx:fee"].join(","),n={config:r},e.next=6,this.publicGetConfConfig(this.extend(n,t));case 6:for(a=e.sent,s={sym:this.indexBy(this.safeValue(a,1,[]),0),label:this.indexBy(this.safeValue(a,2,[]),0),unit:this.indexBy(this.safeValue(a,3,[]),0),undl:this.indexBy(this.safeValue(a,4,[]),0),pool:this.indexBy(this.safeValue(a,5,[]),0),explorer:this.indexBy(this.safeValue(a,6,[]),0),fees:this.indexBy(this.safeValue(a,7,[]),0)},o=this.safeValue(a,0,[]),u={},c=0;c<o.length;c++)d=o[c],h=this.safeCurrencyCode(d),l=this.safeValue(s.label,d,[]),f=this.safeString(l,1),p=this.safeValue(s.pool,d,[]),v=this.safeString(p,1),m=this.safeValue(s.fees,d,[]),g=this.safeValue(m,1,[]),y=this.safeNumber(g,1),b=this.safeValue(s.undl,d,[]),x=8,k="f"+d,u[h]={id:k,code:h,info:[d,l,p,m,b],type:v,name:f,active:!0,fee:y,precision:x,limits:{amount:{min:1/Math.pow(10,x),max:void 0},withdraw:{min:y,max:void 0}}};return e.abrupt("return",u);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,p,v,m,g,y,b,x,k=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=k.length>0&&void 0!==k[0]?k[0]:{},e.next=3,this.loadMarkets();case 3:if(r=this.safeValue(this.options,"v2AccountsByType",{}),n=this.safeString(t,"type","exchange"),void 0!==(a=this.safeString(r,n))){e.next=9;break}throw s=Object.keys(r),new f(this.id+" fetchBalance type parameter must be one of "+s.join(", "));case 9:return o="derivatives"===n,u=this.omit(t,"type"),e.next=13,this.privatePostAuthRWallets(u);case 13:for(c=e.sent,d={info:c},h=0;h<c.length;h++)l=c[h],p=this.safeString(l,0),v=this.safeStringLower(l,1,""),m=v.length-2,g="f0"===v.slice(m),y=!o||g,a===p&&y&&(b=this.safeCurrencyCode(v),(x=this.account()).total=this.safeString(l,2),x.free=this.safeString(l,4),d[b]=x);return e.abrupt("return",this.parseBalance(d,!1));case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"transfer",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,u,c,d,h,l,p,v,m,g,y,b,x,k,w,_,S,O,T,C=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=C.length>4&&void 0!==C[4]?C[4]:{},e.next=3,this.loadMarkets();case 3:if(o=this.safeValue(this.options,"v2AccountsByType",{}),void 0!==(u=this.safeString(o,n))){e.next=8;break}throw c=Object.keys(o),new f(this.id+" transfer fromAccount must be one of "+c.join(", "));case 8:if(void 0!==(d=this.safeString(o,a))){e.next=12;break}throw h=Object.keys(o),new f(this.id+" transfer toAccount must be one of "+h.join(", "));case 12:return l=this.currency(t),p=this.convertDerivativesId(l,n),v=this.convertDerivativesId(l,a),m=this.currencyToPrecision(t,r),g={amount:m,currency:p,currency_to:v,from:u,to:d},e.next=19,this.privatePostAuthWTransfer(this.extend(g,s));case 19:if(y=e.sent,b=this.safeInteger(y,0),"error"!==this.safeString(y,0)){e.next=26;break}throw x=this.safeString(y,2,""),this.throwExactlyMatchedException(this.exceptions.exact,x,this.id+" "+x),new f(this.id+" "+x);case 26:return k=this.safeValue(y,4),w=this.safeString(k,1),_=this.safeString(k,2),S=this.safeCurrencyCode(this.safeString(k,5)),O=this.safeString(y,6),T="SUCCESS"===O?"ok":void 0,e.abrupt("return",{info:y,timestamp:b,datetime:this.iso8601(b),status:T,amount:m,code:S,fromAccount:w,toAccount:_});case 33:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"convertDerivativesId",value:function(e,t){var r=this.safeValue(e,"info"),i=this.safeString(r,0),n=this.safeValue(r,4,[]),a=void 0;if("derivatives"===t){var s=(a=this.safeString(n,0,i)).length-2;"F0"===a.slice(s)||(a+="F0")}else a="margin"!==t?this.safeString(n,1,i):i;return a}},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw r.length>1&&void 0!==r[1]?r[1]:void 0,r.length>2&&void 0!==r[2]?r[2]:{},new S(this.id+" fetchOrder is not implemented yet");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d,h,l,f,p,v,m,g=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=g.length>1&&void 0!==g[1]?g[1]:void 0,n=g.length>2&&void 0!==g[2]?g[2]:{},e.next=4,this.loadMarkets();case 4:return a=this.safeValue(this.options,"precision","R0"),s={symbol:this.marketId(t),precision:a},void 0!==r&&(s.len=r),o=this.extend(s,n),e.next=10,this.publicGetBookSymbolPrecision(o);case 10:for(u=e.sent,c=this.milliseconds(),d={bids:[],asks:[],timestamp:c,datetime:this.iso8601(c),nonce:void 0},h="R0"===o.precision?1:0,l=0;l<u.length;l++)f=u[l],p=this.safeNumber(f,h),v=this.safeNumber(f,2),m=Math.abs(v),d[v>0?"bids":"asks"].push([p,m]);return d.bids=this.sortBy(d.bids,0,!0),d.asks=this.sortBy(d.asks,0),e.abrupt("return",d);case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.milliseconds(),i=void 0;void 0!==t&&(i=t.symbol);var n=e.length,a=this.safeNumber(e,n-4);return{symbol:i,timestamp:r,datetime:this.iso8601(r),high:this.safeNumber(e,n-2),low:this.safeNumber(e,n-1),bid:this.safeNumber(e,n-10),bidVolume:void 0,ask:this.safeNumber(e,n-8),askVolume:void 0,vwap:void 0,open:void 0,close:a,last:a,previousClose:void 0,change:this.safeNumber(e,n-6),percentage:100*this.safeNumber(e,n-5),average:void 0,baseVolume:this.safeNumber(e,n-3),quoteVolume:void 0,info:e}}},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:void 0,r=f.length>1&&void 0!==f[1]?f[1]:{},e.next=4,this.loadMarkets();case 4:return n={},void 0!==t?(a=this.marketIds(t),n.symbols=a.join(",")):n.symbols="ALL",e.next=8,this.publicGetTickers(this.extend(n,r));case 8:for(s=e.sent,o={},u=0;u<s.length;u++)c=s[u],(d=c[0])in this.markets_by_id&&(h=this.markets_by_id[d],l=h.symbol,o[l]=this.parseTicker(c,h));return e.abrupt("return",this.filterByArray(o,"symbol",t));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={symbol:n.id},e.next=7,this.publicGetTickerSymbol(this.extend(a,r));case 7:return s=e.sent,e.abrupt("return",this.parseTicker(s,n));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseSymbol",value:function(e){if(void 0===e)return e;var t=void 0,r=void 0;if((e=e.replace("t","")).indexOf(":")>=0){var i=e.split(":");t=i[0],r=i[1]}else t=e.slice(0,3),r=e.slice(3,6);return this.safeCurrencyCode(t)+"/"+this.safeCurrencyCode(r)}},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=e.length,i=r>5,n=this.safeString(e,0),a=i?4:2,s=void 0,o=this.safeString(e,a),u=i?5:3,c=this.safeString(e,u);"-"===o[0]?(s="sell",o=o.slice(1)):s="buy";var d=this.parseNumber(o),h=this.parseNumber(c),l=this.parseNumber(O.stringMul(c,o)),f=void 0,p=void 0,v=void 0,m=void 0,g=void 0,y=i?2:1,b=this.safeInteger(e,y);if(i){var x=e[1];g=x in this.markets_by_id?(t=this.markets_by_id[x]).symbol:this.parseSymbol(x),f=this.safeString(e,3);var k=this.safeInteger(e,8);p=1===k?"maker":"taker";var w=this.safeString(e,9);w=O.stringNeg(w);var _=this.parseNumber(w),S=this.safeString(e,10),T=this.safeCurrencyCode(S);m={cost:_,currency:T};var C=e[6];v=this.safeString(this.options.exchangeTypes,C)}return void 0===g&&void 0!==t&&(g=t.symbol),{id:n,timestamp:b,datetime:this.iso8601(b),symbol:g,order:f,side:s,type:v,takerOrMaker:p,price:h,amount:d,cost:l,fee:m,info:e}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o="-1",u={symbol:s.id},void 0!==r&&(u.start=r,o="1"),void 0!==n&&(u.limit=n),u.sort=o,e.next=13,this.publicGetTradesSymbolHist(this.extend(u,a));case 13:return c=e.sent,d=this.sortBy(c,1),e.abrupt("return",this.parseTrades(d,s,void 0,n));case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:"1m",n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:100,s=d.length>4&&void 0!==d[4]?d[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),void 0===a&&(a=100),void 0===n&&(n=this.milliseconds()-this.parseTimeframe(r)*a*1e3),u={symbol:o.id,timeframe:this.timeframes[r],sort:1,start:n,limit:a},e.next=12,this.publicGetCandlesTradeTimeframeSymbolHist(this.extend(u,s));case 12:return c=e.sent,e.abrupt("return",this.parseOHLCVs(c,o,r,n,a));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){if(void 0===e)return e;var t=e.split(" "),r=this.safeString(t,0);return this.safeString({ACTIVE:"open",PARTIALLY:"open",EXECUTED:"closed",CANCELED:"canceled",INSUFFICIENT:"canceled",RSN_DUST:"rejected",RSN_PAUSE:"rejected"},r,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,0),i=void 0,n=this.safeString(e,3);n in this.markets_by_id?t=this.markets_by_id[n]:i=this.parseSymbol(n),void 0===i&&void 0!==t&&(i=t.symbol);var a=this.safeInteger(e,5),s=Math.abs(this.safeNumber(e,6)),o=this.safeNumber(e,7),u=Math.abs(o),c=o<0?"sell":"buy",d=this.safeString(e,8),h=this.safeString(this.safeValue(this.options,"exchangeTypes"),d),l=void 0,f=this.safeString(e,13);if(void 0!==f){var p=f.split(" @ ");l=this.parseOrderStatus(this.safeString(p,0))}var v=this.safeNumber(e,16),m=this.safeNumber(e,17),g=this.safeString(e,2);return this.safeOrder({info:e,id:r,clientOrderId:g,timestamp:a,datetime:this.iso8601(a),lastTradeTimestamp:void 0,symbol:i,type:h,timeInForce:void 0,postOnly:void 0,side:c,price:v,stopPrice:void 0,amount:u,cost:void 0,average:m,filled:void 0,remaining:s,status:l,fee:void 0,trades:void 0})}},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,u,c,d,h,l,p,m,g,y,b,x,k,w,_,S,O=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=O.length>4&&void 0!==O[4]?O[4]:void 0,o=O.length>5&&void 0!==O[5]?O[5]:{},e.next=4,this.loadMarkets();case 4:if(u=this.market(t),c=this.safeValue(this.options,"orderTypes",{}),d=this.safeStringUpper(c,r,r),a="sell"===n?-a:a,h={symbol:u.id,type:d,amount:this.numberToString(a)},"LIMIT"!==d&&"EXCHANGE LIMIT"!==d){e.next=13;break}h.price=this.numberToString(s),e.next=35;break;case 13:if("STOP"!==d&&"EXCHANGE STOP"!==d){e.next=18;break}l=this.safeNumber(o,"stopPrice",s),h.price=this.numberToString(l),e.next=35;break;case 18:if("STOP LIMIT"!==d&&"EXCHANGE STOP LIMIT"!==d){e.next=34;break}if(p=this.safeNumber(o,"price_aux_limit"),m=this.safeNumber(o,"stopPrice"),void 0!==p){e.next=29;break}if(void 0!==m){e.next=26;break}throw new v(this.id+" createOrder() requires a stopPrice parameter or a price_aux_limit parameter for a "+d+" order");case 26:h.price_aux_limit=this.numberToString(s);case 27:e.next=31;break;case 29:h.price_aux_limit=this.numberToString(p),void 0===m&&(m=s);case 31:h.price=this.numberToString(m),e.next=35;break;case 34:"TRAILING STOP"===d||"EXCHANGE TRAILING STOP"===d?(g=this.safeNumber(o,"price_trailing"),h.price_trailing=this.numberToString(g),y=this.safeNumber(o,"stopPrice",s),h.price=this.numberToString(y)):"FOK"!==d&&"EXCHANGE FOK"!==d&&"IOC"!==d&&"EXCHANGE IOC"!==d||(h.price=this.numberToString(s));case 35:return o=this.omit(o,["stopPrice","price_aux_limit","price_trailing"]),void 0!==(b=this.safeValue2(o,"cid","clientOrderId"))&&(h.cid=b,o=this.omit(o,["cid","clientOrderId"])),e.next=40,this.privatePostAuthWOrderSubmit(this.extend(h,o));case 40:if(x=e.sent,"SUCCESS"===this.safeString(x,6)){e.next=46;break}throw k=x[5],w=x[7],new f(this.id+" "+x[6]+": "+w+" (#"+k+")");case 46:return _=this.safeValue(x,4,[]),S=this.safeValue(_,0),e.abrupt("return",this.parseOrder(S,u));case 49:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelAllOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>0&&void 0!==s[0]?s[0]:void 0,t=s.length>1&&void 0!==s[1]?s[1]:{},r={all:1},e.next=5,this.privatePostAuthWOrderCancelMulti(this.extend(r,t));case 5:return n=e.sent,a=this.safeValue(n,4,[]),e.abrupt("return",this.parseOrders(a));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.length>1&&void 0!==c[1]?c[1]:void 0,r=c.length>2&&void 0!==c[2]?c[2]:{},n=this.safeValue2(r,"cid","clientOrderId"),a=void 0,void 0===n){e.next=12;break}if(void 0!==(s=this.safeValue(r,"cidDate"))){e.next=8;break}throw new b(this.id+" canceling an order by clientOrderId ('cid') requires both 'cid' and 'cid_date' ('YYYY-MM-DD')");case 8:a={cid:n,cid_date:s},r=this.omit(r,["cid","clientOrderId"]),e.next=13;break;case 12:a={id:parseInt(t)};case 13:return e.next=15,this.privatePostAuthWOrderCancel(this.extend(a,r));case 15:return o=e.sent,u=this.safeValue(o,4),e.abrupt("return",this.parseOrder(u));case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:{},a={id:[parseInt(t)]},e.next=5,this.fetchOpenOrders(r,void 0,void 0,this.extend(a,n));case 5:if(s=e.sent,void 0!==(o=this.safeValue(s,0))){e.next=9;break}throw new y(this.id+" order "+t+" not found");case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchClosedOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:{},a={id:[parseInt(t)]},e.next=5,this.fetchClosedOrders(r,void 0,void 0,this.extend(a,n));case 5:if(s=e.sent,void 0!==(o=this.safeValue(s,0))){e.next=9;break}throw new y(this.id+" order "+t+" not found");case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:void 0,r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},e.next=6,this.loadMarkets();case 6:if(s={},o=void 0,u=void 0,void 0!==t){e.next=15;break}return e.next=12,this.privatePostAuthROrders(this.extend(s,a));case 12:u=e.sent,e.next=20;break;case 15:return o=this.market(t),s.symbol=o.id,e.next=19,this.privatePostAuthROrdersSymbol(this.extend(s,a));case 19:u=e.sent;case 20:return e.abrupt("return",this.parseOrders(u,o,r,n));case 21:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:void 0,r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},e.next=6,this.loadMarkets();case 6:if(s={},o=void 0,u=void 0,void 0!==t){e.next=15;break}return e.next=12,this.privatePostAuthROrdersHist(this.extend(s,a));case 12:u=e.sent,e.next=20;break;case 15:return o=this.market(t),s.symbol=o.id,e.next=19,this.privatePostAuthROrdersSymbolHist(this.extend(s,a));case 19:u=e.sent;case 20:return void 0!==r&&(s.start=r),void 0!==n&&(s.limit=n),e.abrupt("return",this.parseOrders(u,o,r,n));case 23:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:void 0,s=h.length>4&&void 0!==h[4]?h[4]:{},void 0!==r){e.next=6;break}throw new v(this.id+" fetchOrderTrades() requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return o=this.market(r),u=parseInt(t),c={id:u,symbol:o.id},e.next=13,this.privatePostAuthROrderSymbolIdTrades(this.extend(c,s));case 13:return d=e.sent,e.abrupt("return",this.parseTrades(d,o,n,a));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return s=void 0,o={end:this.milliseconds()},void 0!==r&&(o.start=r),void 0!==n&&(o.limit=n),u="privatePostAuthRTradesHist",void 0!==t&&(s=this.market(t),o.symbol=s.id,u="privatePostAuthRTradesSymbolHist"),e.next=14,this[u](this.extend(o,a));case 14:return c=e.sent,e.abrupt("return",this.parseTrades(c,s,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createDepositAddress",value:function(){var e=n(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>1&&void 0!==s[1]?s[1]:{},e.next=3,this.loadMarkets();case 3:return n={op_renew:1},e.next=6,this.fetchDepositAddress(t,this.extend(n,r));case 6:return a=e.sent,e.abrupt("return",a);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchDepositAddress",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.getCurrencyName(t),a={method:n,wallet:"exchange",op_renew:0},e.next=7,this.privatePostAuthWDepositAddress(this.extend(a,r));case 7:return s=e.sent,o=this.safeValue(s,4,[]),u=this.safeString(o,5),c=void 0===u?this.safeString(o,4):u,d=void 0===u?void 0:this.safeString(o,4),this.checkAddress(c),e.abrupt("return",{currency:t,address:c,tag:d,info:s});case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTransactionStatus",value:function(e){return this.safeString({SUCCESS:"ok",ERROR:"failed",FAILURE:"failed",CANCELED:"canceled"},e,e)}},{key:"parseTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=e.length,i=void 0,n=void 0,a=void 0,s=void 0,o=void 0,u=void 0,c=void 0,d=void 0,h=void 0,l=void 0,f=void 0;if(r<9){var p=this.safeValue(e,4,[]);i=this.safeInteger(e,0),void 0!==t&&(a=t.code),void 0!==(h=this.safeNumber(p,8))&&(h=-h),s=this.safeNumber(p,5),u="ok",0===(o=this.safeValue(p,0))&&(o=void 0,u="failed"),c=this.safeString(p,3),d="withdrawal"}else o=this.safeString(e,0),i=this.safeInteger(e,5),n=this.safeInteger(e,6),u=this.parseTransactionStatus(this.safeString(e,9)),void 0!==(s=this.safeNumber(e,12))&&(d=s<0?"withdrawal":"deposit"),void 0!==(h=this.safeNumber(e,13))&&(h=-h),f=this.safeString(e,16),l=this.safeString(e,20);return{info:e,id:o,txid:l,timestamp:i,datetime:this.iso8601(i),addressFrom:void 0,address:f,addressTo:f,tagFrom:void 0,tag:c,tagTo:c,type:d,amount:s,currency:a,status:u,updated:n,fee:{currency:a,cost:h,rate:void 0}}}},{key:"fetchTransactions",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return s=void 0,o={},u="privatePostAuthRMovementsHist",void 0!==t&&(s=this.currency(t),o.currency=s.id,u="privatePostAuthRMovementsCurrencyHist"),void 0!==r&&(o.start=r),void 0!==n&&(o.limit=n),e.next=14,this[u](this.extend(o,a));case 14:return c=e.sent,e.abrupt("return",this.parseTransactions(c,s,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"withdraw",value:function(){var e=n(i.mark((function e(t,r,n){var a,s,o,u,c,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=f.length>3&&void 0!==f[3]?f[3]:void 0,s=f.length>4&&void 0!==f[4]?f[4]:{},this.checkAddress(n),e.next=5,this.loadMarkets();case 5:return o=this.currency(t),u=this.getCurrencyName(t),c={method:u,wallet:"exchange",amount:this.numberToString(r),address:n},void 0!==a&&(c.payment_id=a),e.next=11,this.privatePostAuthWWithdraw(this.extend(c,s));case 11:return d=e.sent,"success"!==(h=this.safeString(d,7))&&this.throwBroadlyMatchedException(this.exceptions.broad,h,h),l=this.parseTransaction(d,o),e.abrupt("return",this.extend(l,{address:n}));case 16:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"fetchPositions",value:function(){var e=n(i.mark((function e(){var t,r,n=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.length>0&&void 0!==n[0]?n[0]:void 0,t=n.length>1&&void 0!==n[1]?n[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.privatePostPositions(t);case 6:return r=e.sent,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"nonce",value:function(){return this.milliseconds()}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s="/"+this.implodeParams(e,i),o=this.omit(i,this.extractParams(e));s="v1"===t?t+s:this.version+s;var u=this.urls.api[t]+"/"+s;if("public"===t&&Object.keys(o).length&&(u+="?"+this.urlencode(o)),"private"===t){this.checkRequiredCredentials();var c=this.nonce().toString(),d="/api/"+s+c+(a=this.json(o)),h=this.hmac(this.encode(d),this.encode(this.secret),"sha384");n={"bfx-nonce":c,"bfx-apikey":this.apiKey,"bfx-signature":h,"Content-Type":"application/json"}}return{url:u,method:r,body:a,headers:n}}},{key:"request",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:"public",n=c.length>2&&void 0!==c[2]?c[2]:"GET",a=c.length>3&&void 0!==c[3]?c[3]:{},s=c.length>4&&void 0!==c[4]?c[4]:void 0,o=c.length>5&&void 0!==c[5]?c[5]:void 0,e.next=7,this.fetch2(t,r,n,a,s,o);case 7:if(!(u=e.sent)){e.next=16;break}if(!("message"in u)){e.next=13;break}if(!(u.message.indexOf("not enough exchange balance")>=0)){e.next=12;break}throw new m(this.id+" "+this.json(u));case 12:throw new f(this.id+" "+this.json(u));case 13:return e.abrupt("return",u);case 16:if(""!==u){e.next=18;break}throw new f(this.id+" returned empty response");case 18:return e.abrupt("return",u);case 19:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,u){if(500===e){var c=this.numberToString(s[1]),d=s[2],h=this.id+" "+d;throw this.throwExactlyMatchedException(this.exceptions.exact,c,h),this.throwExactlyMatchedException(this.exceptions.exact,d,h),this.throwBroadlyMatchedException(this.exceptions.broad,d,h),new f(this.id+" "+d+" (#"+c+")")}}}]),r}(h)},function(e,t,r){"use strict";var i=r(7),n=r(8),a=r(1),s=r(2),o=r(6),u=r(3),c=r(4),d=r(5),h=r(11),l=r(10),f=l.ExchangeError,p=l.ArgumentsRequired,v=l.OrderNotFound,m=r(12);e.exports=function(e){c(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(u(r.prototype),"describe",this).call(this),{id:"bitflyer",name:"bitFlyer",countries:["JP"],version:"v1",rateLimit:1e3,hostname:"bitflyer.com",has:{cancelOrder:!0,CORS:!1,createOrder:!0,fetchBalance:!0,fetchClosedOrders:"emulated",fetchMarkets:!0,fetchMyTrades:!0,fetchOpenOrders:"emulated",fetchOrder:"emulated",fetchOrderBook:!0,fetchOrders:!0,fetchTicker:!0,fetchTrades:!0,withdraw:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/28051642-56154182-660e-11e7-9b0d-6042d1e6edd8.jpg",api:"https://api.{hostname}",www:"https://bitflyer.com",doc:"https://lightning.bitflyer.com/docs?lang=en"},api:{public:{get:["getmarkets/usa","getmarkets/eu","getmarkets","getboard","getticker","getexecutions","gethealth","getboardstate","getchats"]},private:{get:["getpermissions","getbalance","getbalancehistory","getcollateral","getcollateralhistory","getcollateralaccounts","getaddresses","getcoinins","getcoinouts","getbankaccounts","getdeposits","getwithdrawals","getchildorders","getparentorders","getparentorder","getexecutions","getpositions","gettradingcommission"],post:["sendcoin","withdraw","sendchildorder","cancelchildorder","sendparentorder","cancelparentorder","cancelallchildorders"]}},fees:{trading:{maker:.002,taker:.002},"BTC/JPY":{maker:.0015,taker:.0015}}})}},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p,v,m,g,y,b,x,k,w,_,S=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=S.length>0&&void 0!==S[0]?S[0]:{},e.next=3,this.publicGetGetmarkets(t);case 3:return r=e.sent,e.next=6,this.publicGetGetmarketsUsa(t);case 6:return n=e.sent,e.next=9,this.publicGetGetmarketsEu(t);case 9:for(a=e.sent,s=this.arrayConcat(r,n),s=this.arrayConcat(s,a),o=[],u=0;u<s.length;u++)c=s[u],d=this.safeString(c,"product_code"),h=d.split("_"),l=void 0,f=void 0,p=void 0,v=void 0,1===(m=h.length)?(l=d.slice(0,3),f=d.slice(3,6)):2===m?(l=h[0],f=h[1]):(l=h[1],f=h[2]),p=this.safeCurrencyCode(l),v=this.safeCurrencyCode(f),g=2===m?p+"/"+v:d,y=this.safeValue(this.fees,g,this.fees.trading),b=this.safeValue(y,"maker",this.fees.trading.maker),x=this.safeValue(y,"taker",this.fees.trading.taker),k=!0,w=!1,_="spot",("alias"in c||"FX"===h[0])&&(_="future",w=!0,k=!1,b=0,x=0),o.push({id:d,symbol:g,base:p,quote:v,baseId:l,quoteId:f,maker:b,taker:x,type:_,spot:k,future:w,info:c});return e.abrupt("return",o);case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetGetbalance(t);case 5:for(r=e.sent,n={info:r},a=0;a<r.length;a++)s=r[a],o=this.safeString(s,"currency_code"),u=this.safeCurrencyCode(o),(c=this.account()).total=this.safeString(s,"amount"),c.free=this.safeString(s,"available"),n[u]=c;return e.abrupt("return",this.parseBalance(n,!1));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.loadMarkets();case 4:return n={product_code:this.marketId(t)},e.next=7,this.publicGetGetboard(this.extend(n,r));case 7:return a=e.sent,e.abrupt("return",this.parseOrderBook(a,void 0,"bids","asks","price","size"));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:{},e.next=3,this.loadMarkets();case 3:return n={product_code:this.marketId(t)},e.next=6,this.publicGetGetticker(this.extend(n,r));case 6:return a=e.sent,s=this.parse8601(this.safeString(a,"timestamp")),o=this.safeNumber(a,"ltp"),e.abrupt("return",{symbol:t,timestamp:s,datetime:this.iso8601(s),high:void 0,low:void 0,bid:this.safeNumber(a,"best_bid"),bidVolume:void 0,ask:this.safeNumber(a,"best_ask"),askVolume:void 0,vwap:void 0,open:void 0,close:o,last:o,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeNumber(a,"volume_by_product"),quoteVolume:void 0,info:a});case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeStringLower(e,"side");void 0!==r&&r.length<1&&(r=void 0);var i=void 0;if(void 0!==r){var n=r+"_child_order_acceptance_id";n in e&&(i=e[n])}void 0===i&&(i=this.safeString(e,"child_order_acceptance_id"));var a=this.parse8601(this.safeString(e,"exec_date")),s=this.safeString(e,"price"),o=this.safeString(e,"size"),u=this.parseNumber(s),c=this.parseNumber(o),d=this.parseNumber(m.stringMul(s,o)),h=this.safeString(e,"id"),l=void 0;return void 0!==t&&(l=t.symbol),{id:h,info:e,timestamp:a,datetime:this.iso8601(a),symbol:l,order:i,type:void 0,side:r,takerOrMaker:void 0,price:u,amount:c,cost:d,fee:void 0}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={product_code:s.id},e.next=9,this.publicGetGetexecutions(this.extend(o,a));case 9:return u=e.sent,e.abrupt("return",this.parseTrades(u,s,r,n));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=h.length>4&&void 0!==h[4]?h[4]:void 0,o=h.length>5&&void 0!==h[5]?h[5]:{},e.next=4,this.loadMarkets();case 4:return u={product_code:this.marketId(t),child_order_type:r.toUpperCase(),side:n.toUpperCase(),price:s,size:a},e.next=7,this.privatePostSendchildorder(this.extend(u,o));case 7:return c=e.sent,d=this.safeString(c,"child_order_acceptance_id"),e.abrupt("return",{info:c,id:d});case 10:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.length>1&&void 0!==s[1]?s[1]:void 0,n=s.length>2&&void 0!==s[2]?s[2]:{},void 0!==r){e.next=4;break}throw new p(this.id+" cancelOrder() requires a `symbol` argument");case 4:return e.next=6,this.loadMarkets();case 6:return a={product_code:this.marketId(r),child_order_acceptance_id:t},e.next=9,this.privatePostCancelchildorder(this.extend(a,n));case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({ACTIVE:"open",COMPLETED:"closed",CANCELED:"canceled",EXPIRED:"canceled",REJECTED:"canceled"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.parse8601(this.safeString(e,"child_order_date")),i=this.safeNumber(e,"size"),n=this.safeNumber(e,"outstanding_size"),a=this.safeNumber(e,"executed_size"),s=this.safeNumber(e,"price"),o=this.parseOrderStatus(this.safeString(e,"child_order_state")),u=this.safeStringLower(e,"child_order_type"),c=this.safeStringLower(e,"side"),d=this.safeString(e,"product_code"),h=this.safeSymbol(d,t),l=void 0,f=this.safeNumber(e,"total_commission");void 0!==f&&(l={cost:f,currency:void 0,rate:void 0});var p=this.safeString(e,"child_order_acceptance_id");return this.safeOrder({id:p,clientOrderId:void 0,info:e,timestamp:r,datetime:this.iso8601(r),lastTradeTimestamp:void 0,status:o,symbol:h,type:u,timeInForce:void 0,postOnly:void 0,side:c,price:s,stopPrice:void 0,cost:void 0,amount:i,filled:a,remaining:n,fee:l,average:void 0,trades:void 0})}},{key:"fetchOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:100,a=d.length>3&&void 0!==d[3]?d[3]:{},void 0!==t){e.next=6;break}throw new p(this.id+" fetchOrders() requires a `symbol` argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.market(t),o={product_code:s.id,count:n},e.next=12,this.privateGetGetchildorders(this.extend(o,a));case 12:return u=e.sent,c=this.parseOrders(u,s,r,n),void 0!==t&&(c=this.filterBy(c,"symbol",t)),e.abrupt("return",c);case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:100,a=o.length>3&&void 0!==o[3]?o[3]:{},s={child_order_state:"ACTIVE"},e.next=7,this.fetchOrders(t,r,n,this.extend(s,a));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:100,a=o.length>3&&void 0!==o[3]?o[3]:{},s={child_order_state:"COMPLETED"},e.next=7,this.fetchOrders(t,r,n,this.extend(s,a));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.length>1&&void 0!==s[1]?s[1]:void 0,s.length>2&&void 0!==s[2]?s[2]:{},void 0!==r){e.next=4;break}throw new p(this.id+" fetchOrder() requires a `symbol` argument");case 4:return e.next=6,this.fetchOrders(r);case 6:if(n=e.sent,a=this.indexBy(n,"id"),!(t in a)){e.next=10;break}return e.abrupt("return",a[t]);case 10:throw new v(this.id+" No order found with id "+t);case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=c.length>0&&void 0!==c[0]?c[0]:void 0,r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},void 0!==t){e.next=6;break}throw new p(this.id+" fetchMyTrades() requires a `symbol` argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.market(t),o={product_code:s.id},void 0!==n&&(o.count=n),e.next=13,this.privateGetGetexecutions(this.extend(o,a));case 13:return u=e.sent,e.abrupt("return",this.parseTrades(u,s,r,n));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchPositions",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:{},void 0!==t){e.next=4;break}throw new p(this.id+" fetchPositions() requires a `symbols` argument, exactly one symbol in an array");case 4:return e.next=6,this.loadMarkets();case 6:return n={product_code:this.marketIds(t)},e.next=9,this.privateGetpositions(this.extend(n,r));case 9:return a=e.sent,e.abrupt("return",a);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"withdraw",value:function(){var e=n(i.mark((function e(t,r,n){var a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d.length>3&&void 0!==d[3]?d[3]:void 0,a=d.length>4&&void 0!==d[4]?d[4]:{},this.checkAddress(n),e.next=5,this.loadMarkets();case 5:if("JPY"===t||"USD"===t||"EUR"===t){e.next=7;break}throw new f(this.id+" allows withdrawing JPY, USD, EUR only, "+t+" is not supported");case 7:return s=this.currency(t),o={currency_code:s.id,amount:r},e.next=11,this.privatePostWithdraw(this.extend(o,a));case 11:return u=e.sent,c=this.safeString(u,"message_id"),e.abrupt("return",{info:u,id:c});case 14:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s="/"+this.version+"/";"private"===t&&(s+="me/"),s+=e,"GET"===r&&Object.keys(i).length&&(s+="?"+this.urlencode(i));var o=this.implodeParams(this.urls.api,{hostname:this.hostname}),u=o+s;if("private"===t){this.checkRequiredCredentials();var c=this.nonce().toString(),d=[c,r,s].join("");Object.keys(i).length&&"GET"!==r&&(d+=a=this.json(i)),n={"ACCESS-KEY":this.apiKey,"ACCESS-TIMESTAMP":c,"ACCESS-SIGN":this.hmac(this.encode(d),this.encode(this.secret)),"Content-Type":"application/json"}}return{url:u,method:r,body:a,headers:n}}}]),r}(h)},function(e,t,r){"use strict";var i=r(7),n=r(8),a=r(1),s=r(2),o=r(6),u=r(3),c=r(4),d=r(5),h=r(11),l=r(10),f=l.ExchangeError,p=l.AuthenticationError,v=l.OrderNotFound,m=l.InsufficientFunds,g=l.DDoSProtection,y=l.PermissionDenied,b=l.BadSymbol,x=r(12);e.exports=function(e){c(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(u(r.prototype),"describe",this).call(this),{id:"bitforex",name:"Bitforex",countries:["CN"],version:"v1",has:{cancelOrder:!0,createOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchMarkets:!0,fetchMyTrades:!1,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!1,fetchTicker:!0,fetchTickers:!1,fetchTrades:!0},timeframes:{"1m":"1min","5m":"5min","15m":"15min","30m":"30min","1h":"1hour","2h":"2hour","4h":"4hour","12h":"12hour","1d":"1day","1w":"1week","1M":"1month"},urls:{logo:"https://user-images.githubusercontent.com/51840849/87295553-1160ec00-c50e-11ea-8ea0-df79276a9646.jpg",api:"https://api.bitforex.com",www:"https://www.bitforex.com",doc:"https://github.com/githubdev2020/API_Doc_en/wiki",fees:"https://help.bitforex.com/en_us/?cat=13",referral:"https://www.bitforex.com/en/invitationRegister?inviterId=1867438"},api:{public:{get:["api/v1/market/symbols","api/v1/market/ticker","api/v1/market/depth","api/v1/market/trades","api/v1/market/kline"]},private:{post:["api/v1/fund/mainAccount","api/v1/fund/allAccount","api/v1/trade/placeOrder","api/v1/trade/placeMultiOrder","api/v1/trade/cancelOrder","api/v1/trade/orderInfo","api/v1/trade/orderInfos"]}},fees:{trading:{tierBased:!1,percentage:!0,maker:.001,taker:.001},funding:{tierBased:!1,percentage:!0,deposit:{},withdraw:{BTC:5e-4,ETH:.01,BCH:1e-4,LTC:.001,ETC:.005,USDT:5,CMCT:30,AION:3,LVT:0,DATA:40,RHP:50,NEO:0,AIDOC:10,BQT:2,R:2,DPY:.8,GTC:40,AGI:30,DENT:100,SAN:1,SPANK:8,AID:5,OMG:.1,BFT:5,SHOW:150,TRX:20,ABYSS:10,THM:25,ZIL:20,PPT:.2,WTC:.4,LRC:7,BNT:1,CTXC:1,MITH:20,TRUE:4,LYM:10,VEE:100,AUTO:200,REN:50,TIO:2.5,NGC:1.5,PST:10,CRE:200,IPC:5,PTT:1e3,XMCT:20,ATMI:40,TERN:40,XLM:.01,ODE:15,FTM:100,RTE:100,DCC:100,IMT:500,GOT:3,EGT:500,DACC:1e3,UBEX:500,ABL:100,OLT:100,DAV:40,THRT:10,RMESH:3,UPP:20,SDT:0,SHR:10,MTV:3,ESS:100,MET:3,TTC:20,LXT:10,XCLP:100,LUK:100,UBC:100,DTX:10,BEAT:20,DEED:2,BGX:3e3,PRL:20,ELY:50,CARD:300,SQR:15,VRA:400,BWX:3500,MAS:75,FLP:.6,UNC:300,CRNC:15,MFG:70,ZXC:70,TRT:30,ZIX:35,XRA:10,AMO:1600,IPG:3,uDoo:50,URB:30,ARCONA:3,CRAD:5,NOBS:1e3,ADF:2,ELF:5,LX:20,PATH:15,SILK:120,SKYFT:50,EDN:50,ADE:50,EDR:10,TIME:.25,SPRK:20,QTUM:.01,BF:5,ZPR:100,HYB:10,CAN:30,CEL:10,ATS:50,KCASH:1,ACT:.01,MT:300,DXT:30,WAB:4e3,HYDRO:400,LQD:5,OPTC:200,EQUAD:80,LATX:50,LEDU:100,RIT:70,ACDC:500,FSN:2}}},commonCurrencies:{CREDIT:"TerraCredit",HBC:"Hybrid Bank Cash",IQ:"IQ.Cash",UOS:"UOS Network"},exceptions:{4004:v,1013:p,1016:p,1017:y,1019:b,3002:m,10204:g}})}},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p,v,m,g,y=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=y.length>0&&void 0!==y[0]?y[0]:{},e.next=3,this.publicGetApiV1MarketSymbols(t);case 3:for(r=e.sent,n=r.data,a=[],s=0;s<n.length;s++)o=n[s],u=this.safeString(o,"symbol"),c=u.split("-"),d=c[2],h=c[1],l=this.safeCurrencyCode(d),f=this.safeCurrencyCode(h),p=l+"/"+f,v=!0,m={amount:this.safeInteger(o,"amountPrecision"),price:this.safeInteger(o,"pricePrecision")},g={amount:{min:this.safeNumber(o,"minOrderAmount"),max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0}},a.push({id:u,symbol:p,base:l,quote:f,baseId:d,quoteId:h,active:v,precision:m,limits:g,info:o});return e.abrupt("return",a);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0;void 0!==t&&(r=t.symbol);var i=this.safeInteger(e,"time"),n=this.safeString(e,"tid"),a=void 0,s=this.safeString(e,"price"),o=this.safeString(e,"amount"),u=this.parseNumber(s),c=this.parseNumber(o),d=this.parseNumber(x.stringMul(s,o)),h=this.safeInteger(e,"direction"),l=this.parseSide(h);return{info:e,id:n,timestamp:i,datetime:this.iso8601(i),symbol:r,type:void 0,side:l,price:u,amount:c,cost:d,order:a,fee:void 0,takerOrMaker:void 0}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},e.next=5,this.loadMarkets();case 5:return s={symbol:this.marketId(t)},void 0!==n&&(s.size=n),o=this.market(t),e.next=10,this.publicGetApiV1MarketTrades(this.extend(s,a));case 10:return u=e.sent,e.abrupt("return",this.parseTrades(u.data,o,r,n));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privatePostApiV1FundAllAccount(t);case 5:for(r=e.sent,n=r.data,a={info:r},s=0;s<n.length;s++)o=n[s],u=this.safeString(o,"currency"),c=this.safeCurrencyCode(u),(d=this.account()).used=this.safeString(o,"frozen"),d.free=this.safeString(o,"active"),d.total=this.safeString(o,"fix"),a[c]=d;return e.abrupt("return",this.parseBalance(a,!1));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.markets[t],a={symbol:n.id},e.next=7,this.publicGetApiV1MarketTicker(this.extend(a,r));case 7:return s=e.sent,o=s.data,u=this.safeInteger(o,"date"),e.abrupt("return",{symbol:t,timestamp:u,datetime:this.iso8601(u),high:this.safeNumber(o,"high"),low:this.safeNumber(o,"low"),bid:this.safeNumber(o,"buy"),bidVolume:void 0,ask:this.safeNumber(o,"sell"),askVolume:void 0,vwap:void 0,open:void 0,close:this.safeNumber(o,"last"),last:this.safeNumber(o,"last"),previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeNumber(o,"vol"),quoteVolume:void 0,info:s});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){return[this.safeInteger(e,"time"),this.safeNumber(e,"open"),this.safeNumber(e,"high"),this.safeNumber(e,"low"),this.safeNumber(e,"close"),this.safeNumber(e,"vol")]}},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:"1m",n=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:void 0,s=h.length>4&&void 0!==h[4]?h[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),u={symbol:o.id,ktype:this.timeframes[r]},void 0!==a&&(u.size=a),e.next=11,this.publicGetApiV1MarketKline(this.extend(u,s));case 11:return c=e.sent,d=this.safeValue(c,"data",[]),e.abrupt("return",this.parseOHLCVs(d,o,r,n,a));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:{},e.next=4,this.loadMarkets();case 4:return a=this.marketId(t),s={symbol:a},void 0!==r&&(s.size=r),e.next=9,this.publicGetApiV1MarketDepth(this.extend(s,n));case 9:return o=e.sent,u=this.safeValue(o,"data"),c=this.safeInteger(o,"time"),e.abrupt("return",this.parseOrderBook(u,c,"bids","asks","price","amount"));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){var t={0:"open",1:"open",2:"closed",3:"canceled",4:"canceled"};return e in t?t[e]:e}},{key:"parseSide",value:function(e){return 1===e?"buy":2===e?"sell":void 0}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"orderId"),i=this.safeNumber(e,"createTime"),n=this.safeNumber(e,"lastTime"),a=t.symbol,s=this.safeInteger(e,"tradeType"),o=this.parseSide(s),u=void 0,c=this.safeNumber(e,"orderPrice"),d=this.safeNumber(e,"avgPrice"),h=this.safeNumber(e,"orderAmount"),l=this.safeNumber(e,"dealAmount"),f=this.parseOrderStatus(this.safeString(e,"orderState")),p="buy"===o?"base":"quote",v=t[p],m={cost:this.safeNumber(e,"tradeFee"),currency:v};return this.safeOrder({info:e,id:r,clientOrderId:void 0,timestamp:i,datetime:this.iso8601(i),lastTradeTimestamp:n,symbol:a,type:u,timeInForce:void 0,postOnly:void 0,side:o,price:c,stopPrice:void 0,cost:void 0,average:d,amount:h,filled:l,remaining:void 0,status:f,fee:m,trades:void 0})}},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:{},e.next=4,this.loadMarkets();case 4:return a=this.market(r),s={symbol:this.marketId(r),orderId:t},e.next=8,this.privatePostApiV1TradeOrderInfo(this.extend(s,n));case 8:return o=e.sent,u=this.parseOrder(o.data,a),e.abrupt("return",u);case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:void 0,r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},e.next=6,this.loadMarkets();case 6:return s=this.market(t),o={symbol:this.marketId(t),state:0},e.next=10,this.privatePostApiV1TradeOrderInfos(this.extend(o,a));case 10:return u=e.sent,e.abrupt("return",this.parseOrders(u.data,s,r,n));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:void 0,r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},e.next=6,this.loadMarkets();case 6:return s=this.market(t),o={symbol:this.marketId(t),state:1},e.next=10,this.privatePostApiV1TradeOrderInfos(this.extend(o,a));case 10:return u=e.sent,e.abrupt("return",this.parseOrders(u.data,s,r,n));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,u,c,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=l.length>4&&void 0!==l[4]?l[4]:void 0,o=l.length>5&&void 0!==l[5]?l[5]:{},e.next=4,this.loadMarkets();case 4:return u=void 0,"buy"===n?u=1:"sell"===n&&(u=2),c={symbol:this.marketId(t),price:s,amount:a,tradeType:u},e.next=9,this.privatePostApiV1TradePlaceOrder(this.extend(c,o));case 9:return d=e.sent,h=d.data,e.abrupt("return",{info:d,id:this.safeString(h,"orderId")});case 12:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:{},e.next=4,this.loadMarkets();case 4:return a={orderId:t},void 0!==r&&(a.symbol=this.marketId(r)),e.next=8,this.privatePostApiV1TradeCancelOrder(this.extend(a,n));case 8:return s=e.sent,o=s.success,u={info:s,success:o},e.abrupt("return",u);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.urls.api+"/"+this.implodeParams(e,i),o=this.omit(i,this.extractParams(e));if("public"===t)Object.keys(o).length&&(s+="?"+this.urlencode(o));else{this.checkRequiredCredentials();var u=this.urlencode({accessKey:this.apiKey});o.nonce=this.milliseconds(),Object.keys(o).length&&(u+="&"+this.urlencode(this.keysort(o)));var c="/"+e+"?"+u,d=this.hmac(this.encode(c),this.encode(this.secret));a=u+"&signData="+d,n={"Content-Type":"application/x-www-form-urlencoded"}}return{url:s,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,u){if("string"===typeof a&&("{"===a[0]||"["===a[0])){var c=this.id+" "+a,d=this.safeValue(s,"success");if(void 0!==d&&!d){var h=this.safeString(s,"code");throw this.throwExactlyMatchedException(this.exceptions,h,c),new f(c)}}}}]),r}(h)},function(e,t,r){"use strict";var i=r(21),n=r(7),a=r(8),s=r(1),o=r(2),u=r(6),c=r(3),d=r(4),h=r(5),l=r(11),f=r(10),p=f.ExchangeError,v=f.ExchangeNotAvailable,m=f.OnMaintenance,g=f.ArgumentsRequired,y=f.BadRequest,b=f.AccountSuspended,x=f.InvalidAddress,k=f.PermissionDenied,w=f.DDoSProtection,_=f.InsufficientFunds,S=f.InvalidNonce,O=f.CancelPending,T=f.InvalidOrder,C=f.OrderNotFound,I=f.AuthenticationError,M=f.RequestTimeout,A=f.NotSupported,E=f.BadSymbol,N=f.RateLimitExceeded,P=r(18).TICK_SIZE,D=r(12);e.exports=function(e){d(r,e);var t=h(r);function r(){return s(this,r),t.apply(this,arguments)}return o(r,[{key:"describe",value:function(){return this.deepExtend(u(c(r.prototype),"describe",this).call(this),{id:"bitget",name:"Bitget",countries:["SG"],version:"v3",rateLimit:1e3,has:{cancelOrder:!0,cancelOrders:!0,CORS:!1,createOrder:!0,fetchAccounts:!0,fetchBalance:!0,fetchCurrencies:!0,fetchDeposits:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOpenOrders:!0,fetchClosedOrders:!0,fetchOrderTrades:!0,fetchTicker:!0,fetchTickers:!0,fetchTime:!0,fetchTrades:!0,fetchWithdrawals:!0},timeframes:{"1m":"1m","5m":"5m","15m":"15m","30m":"30m","1h":"1h","2h":"2h","4h":"4h","6h":"6h","12h":"12h","1d":"1d","1w":"1w"},hostname:"bitget.com",urls:{logo:"https://user-images.githubusercontent.com/51840849/88317935-a8a21c80-cd22-11ea-8e2b-4b9fac5975eb.jpg",api:{data:"https://api.{hostname}",api:"https://api.{hostname}",capi:"https://capi.{hostname}",swap:"https://capi.{hostname}"},www:"https://www.bitget.com",doc:["https://bitgetlimited.github.io/apidoc/en/swap","https://bitgetlimited.github.io/apidoc/en/spot"],fees:"https://www.bitget.cc/zh-CN/rate?tab=1",test:{rest:"https://testnet.bitget.com"},referral:"https://www.bitget.com/expressly?languageType=0&channelCode=ccxt&vipCode=tg9j"},api:{data:{get:["market/history/kline","market/detail/merged","market/tickers","market/allticker","market/depth","market/trade","market/history/trade","market/detail","common/symbols","common/currencys","common/timestamp"]},api:{get:["account/accounts","accounts/{account_id}/balance","order/orders","order/orders/openOrders","order/orders/history","order/deposit_withdraw"],post:["order/orders/place","order/orders/{order_id}/submitcancel","order/orders/batchcancel","order/orders/{order_id}","order/orders/{order_id}/matchresults","order/matchresults"]},capi:{get:["market/time","market/contracts","market/depth","market/tickers","market/ticker","market/trades","market/candles","market/index","market/open_count","market/open_interest","market/price_limit","market/funding_time","market/mark_price","market/open_count","market/historyFundRate"]},swap:{get:["account/accounts","account/account","account/settings","position/allPosition","position/singlePosition","position/holds","order/detail","order/orders","order/fills","order/current","order/currentPlan","order/history","order/historyPlan","trace/closeTrack","trace/currentTrack","trace/historyTrack"],post:["account/leverage","account/adjustMargin","account/modifyAutoAppendMargin","order/placeOrder","order/batchOrders","order/cancel_order","order/cancel_batch_orders","order/plan_order","order/cancel_plan","position/changeHoldModel"]}},fees:{spot:{taker:.002,maker:.002},swap:{taker:6e-4,maker:4e-4}},requiredCredentials:{apiKey:!0,secret:!0,password:!0},exceptions:{exact:{1:p,"failure to get a peer from the ring-balancer":v,4010:k,4001:p,4002:p,30001:I,30002:I,30003:I,30004:I,30005:S,30006:I,30007:y,30008:M,30009:p,30010:I,30011:k,30012:I,30013:I,30014:w,30015:I,30016:p,30017:p,30018:p,30019:v,30020:y,30021:y,30022:k,30023:y,30024:E,30025:y,30026:w,30027:I,30028:k,30029:b,30030:p,30031:y,30032:E,30033:y,30034:p,30035:p,30036:p,30037:v,30038:m,32001:b,32002:k,32003:O,32004:p,32005:T,32006:T,32007:T,32008:T,32009:T,32010:p,32011:p,32012:p,32013:p,32014:p,32015:p,32016:p,32017:p,32018:p,32019:p,32020:p,32021:p,32022:p,32023:p,32024:p,32025:p,32026:p,32027:p,32028:b,32029:p,32030:T,32031:g,32038:I,32040:p,32044:p,32045:p,32046:p,32047:p,32048:T,32049:p,32050:T,32051:T,32052:p,32053:p,32057:p,32054:p,32055:T,32056:p,32058:p,32059:T,32060:T,32061:T,32062:T,32063:T,32064:p,32065:p,32066:p,32067:p,32068:p,32069:p,32070:p,32071:p,32072:p,32073:p,32074:p,32075:p,32076:p,32077:p,32078:p,32079:p,32080:p,32083:p,33001:k,33002:b,33003:_,33004:p,33005:p,33006:p,33007:p,33008:_,33009:p,33010:p,33011:p,33012:p,33013:T,33014:C,33015:T,33016:p,33017:_,33018:p,33020:p,33021:y,33022:T,33023:p,33024:T,33025:T,33026:p,33027:T,33028:T,33029:T,33034:p,33035:p,33036:p,33037:p,33038:p,33039:p,33040:p,33041:p,33042:p,33043:p,33044:p,33045:p,33046:p,33047:p,33048:p,33049:p,33050:p,33051:p,33059:y,33060:y,33061:p,33062:p,33063:p,33064:p,33065:p,21009:p,34001:k,34002:x,34003:p,34004:p,34005:p,34006:p,34007:p,34008:_,34009:p,34010:p,34011:p,34012:p,34013:p,34014:p,34015:p,34016:k,34017:b,34018:I,34019:k,34020:k,34021:x,34022:p,34023:k,34026:p,34036:p,34037:p,34038:p,34039:p,35001:p,35002:p,35003:p,35004:p,35005:I,35008:T,35010:T,35012:T,35014:T,35015:T,35017:p,35019:T,35020:T,35021:T,35022:p,35024:p,35025:_,35026:p,35029:C,35030:T,35031:T,35032:p,35037:p,35039:p,35040:T,35044:p,35046:_,35047:_,35048:p,35049:T,35050:T,35052:_,35053:p,35055:_,35057:p,35058:p,35059:y,35060:y,35061:y,35062:T,35063:T,35064:T,35066:T,35067:T,35068:T,35069:T,35070:T,35071:T,35072:T,35073:T,35074:T,35075:T,35076:T,35077:T,35078:T,35079:T,35080:T,35081:T,35082:T,35083:T,35084:T,35085:T,35086:T,35087:T,35088:T,35089:T,35090:p,35091:p,35092:p,35093:p,35094:p,35095:y,35096:p,35097:p,35098:p,35099:p,36001:y,36002:y,36005:p,36101:I,36102:k,36103:b,36104:k,36105:k,36106:b,36107:k,36108:_,36109:k,36201:k,36202:k,36203:T,36204:p,36205:y,36206:y,36207:T,36208:T,36209:T,36210:T,36211:T,36212:T,36213:T,36214:p,36216:C,36217:T,36218:T,36219:T,36220:T,36221:T,36222:T,36223:T,36224:T,36225:T,36226:T,36227:T,36228:T,36229:T,36230:T,400:y,401:I,403:k,404:y,405:y,415:y,429:w,500:v,1001:N,1002:p,1003:p,40001:I,40002:I,40003:I,40004:S,40005:S,40006:I,40007:y,40008:S,40009:I,40010:I,40011:I,40012:I,40013:p,40014:k,40015:p,40016:k,40017:p,40018:k,40102:y,40103:y,40104:p,40105:p,40106:p,40107:p,40108:T,40109:C,40200:m,40201:T,40202:p,40203:y,40204:y,40205:y,40206:y,40207:y,40208:y,40209:y,40300:p,40301:k,40302:y,40303:y,40304:y,40305:y,40306:p,40308:m,40309:E,40400:p,40401:p,40402:y,40403:y,40404:y,40405:y,40406:y,40407:p,40408:p,40409:p,40500:T,40501:p,40502:p,40503:p,40504:p,40505:p,40506:I,40507:I,40508:p,40509:p,40600:p,40601:p,40602:p,40603:p,40604:v,40605:p,40606:p,40607:p,40608:p,40609:p,40700:y,40701:p,40702:p,40703:p,40704:p,40705:y,40706:T,40707:y,40708:y,40709:p,40710:p,40711:_,40712:_,40713:p,40714:p,"invalid sign":I,"invalid currency":E,"invalid symbol":E,"invalid period":y,"invalid user":p,"invalid amount":T,"invalid type":T,"invalid orderId":T,"invalid record":p,"invalid accountId":y,"invalid address":y,"accesskey not null":I,"illegal accesskey":I,"sign not null":I,"req_time is too much difference from server time":S,"permissions not right":k,"illegal sign invalid":I,"user locked":b,"Request Frequency Is Too High":N,"more than a daily rate of cash":y,"more than the maximum daily withdrawal amount":y,"need to bind email or mobile":p,"user forbid":k,"User Prohibited Cash Withdrawal":k,"Cash Withdrawal Is Less Than The Minimum Value":y,"Cash Withdrawal Is More Than The Maximum Value":y,"the account with in 24 hours ban coin":k,"order cancel fail":y,"base symbol error":E,"base date error":p,"api signature not valid":I,"gateway internal error":p,"audit failed":p,"order queryorder invalid":y,"market no need price":T,"limit need price":T,"userid not equal to account_id":p,"your balance is low":_,"address invalid cointype":p,"system exception":p,50003:p,50004:E,50006:k,50007:k,50008:M,50009:N,50010:p,50014:T,50015:T,50016:T,50017:T,50018:T,50019:T,50020:_,50021:T,50026:T,"invalid order query time":p,"invalid start time":y,"invalid end time":y,20003:p,"01001":p},broad:{"invalid size, valid range":p}},precisionMode:P,options:{createMarketBuyOrderRequiresPrice:!0,fetchMarkets:["spot","swap"],parseOHLCV:{volume:{spot:"amount",swap:5}},defaultType:"spot",accountId:void 0,timeframes:{spot:{"1m":"1min","5m":"5min","15m":"15min","30m":"30min","1h":"60min","2h":"120min","4h":"240min","6h":"360min","12h":"720min","1d":"1day","1w":"1week"},swap:{"1m":"60","5m":"300","15m":"900","30m":"1800","1h":"3600","2h":"7200","4h":"14400","6h":"21600","12h":"43200","1d":"86400","1w":"604800"}}}})}},{key:"fetchTime",value:function(){var e=a(n.mark((function e(){var t,r,i=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},e.next=3,this.dataGetCommonTimestamp(t);case 3:return r=e.sent,e.abrupt("return",this.safeInteger(r,"data"));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMarkets",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=o.length>0&&void 0!==o[0]?o[0]:{},(r=this.safeValue(this.options,"fetchMarkets")).length||(r=[this.options.defaultType]),i=[],a=0;case 5:if(!(a<r.length)){e.next=13;break}return e.next=8,this.fetchMarketsByType(r[a],t);case 8:s=e.sent,i=this.arrayConcat(i,s);case 10:a++,e.next=5;break;case 13:return e.abrupt("return",i);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseMarkets",value:function(e){for(var t=[],r=0;r<e.length;r++)t.push(this.parseMarket(e[r]));return t}},{key:"parseMarket",value:function(e){var t=this.safeString(e,"symbol"),r="spot",i=!0,n=!1,a=this.safeString2(e,"base_currency","coin"),s=this.safeString(e,"quote_currency");void 0!==this.safeNumber(e,"contract_val")&&(r="swap",i=!1,n=!0);var o=this.safeCurrencyCode(a),u=this.safeCurrencyCode(s),c=t.toUpperCase();i&&(c=o+"/"+u);var d=this.safeString(e,"tick_size"),h=this.safeString(e,"size_increment"),l={amount:parseFloat("1e-"+h),price:parseFloat("1e-"+d)},f=this.safeNumber2(e,"min_size","base_min_size"),p=this.safeString(e,"status"),v=void 0;void 0!==p&&(v="1"===p);var m=this.safeValue2(this.fees,r,"trading",{});return this.extend(m,{id:t,symbol:c,base:o,quote:u,baseId:a,quoteId:s,info:e,type:r,spot:i,swap:n,active:v,precision:l,limits:{amount:{min:f,max:void 0},price:{min:l.price,max:void 0},cost:{min:l.price,max:void 0}}})}},{key:"fetchMarketsByType",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=o.length>1&&void 0!==o[1]?o[1]:{},"spot"!==t){e.next=9;break}return e.next=4,this.dataGetCommonSymbols(r);case 4:return i=e.sent,a=this.safeValue(i,"data",[]),e.abrupt("return",this.parseMarkets(a));case 9:if("swap"!==t){e.next=16;break}return e.next=12,this.capiGetMarketContracts(r);case 12:return s=e.sent,e.abrupt("return",this.parseMarkets(s));case 16:throw new A(this.id+" fetchMarketsByType does not support market type "+t);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchCurrencies",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,u,c=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:{},e.next=3,this.dataGetCommonCurrencys(t);case 3:for(r=e.sent,i={},a=this.safeValue(r,"data",[]),s=0;s<a.length;s++)o=a[s],u=this.safeCurrencyCode(o),i[u]={id:o,code:u,info:o,type:void 0,name:void 0,active:void 0,fee:void 0,precision:void 0,limits:{amount:{min:void 0,max:void 0},withdraw:{min:void 0,max:void 0}}};return e.abrupt("return",i);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,u,c,d,h,l,f=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=f.length>1&&void 0!==f[1]?f[1]:void 0,i=f.length>2&&void 0!==f[2]?f[2]:{},e.next=4,this.loadMarkets();case 4:return a=this.market(t),s={symbol:a.id},o=void 0,a.spot?(o="dataGetMarketDepth",s.type="step0"):a.swap&&(o="capiGetMarketDepth",s.limit=void 0===r?100:r),e.next=10,this[o](this.extend(s,i));case 10:return u=e.sent,c=this.safeValue(u,"data",u),d=this.safeInteger2(c,"timestamp","ts"),h=this.safeInteger(c,"id"),(l=this.parseOrderBook(c,d)).nonce=h,e.abrupt("return",l);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeInteger2(e,"timestamp","id"),n=void 0,a=this.safeString2(e,"instrument_id","symbol");if(a in this.markets_by_id)n=(t=this.markets_by_id[a]).symbol;else if(void 0!==a){var s=a.split("_"),o=s.length;if(2===o){var u=i(s,2),c=u[0],d=u[1],h=this.safeCurrencyCode(c),l=this.safeCurrencyCode(d);n=h+"/"+l}else n=a}void 0===n&&void 0!==t&&(n=t.symbol);var f=this.safeNumber2(e,"last","close"),p=this.safeNumber(e,"open"),v=void 0,m=void 0,g=this.safeValue(e,"bid");void 0===g?g=this.safeNumber(e,"best_bid"):(v=this.safeNumber(g,1),g=this.safeNumber(g,0));var y=this.safeValue(e,"ask");void 0===y?y=this.safeNumber(e,"best_ask"):(m=this.safeNumber(y,1),y=this.safeNumber(y,0));var b=this.safeNumber2(e,"amount","volume_24h"),x=this.safeNumber(e,"vol"),k=this.vwap(b,x),w=void 0,_=void 0,S=void 0;return void 0!==f&&void 0!==p&&(_=(w=f-p)/p*100,S=this.sum(p,f)/2),{symbol:n,timestamp:r,datetime:this.iso8601(r),high:this.safeNumber2(e,"high","high_24h"),low:this.safeNumber2(e,"low","low_24h"),bid:g,bidVolume:v,ask:y,askVolume:m,vwap:k,open:p,close:f,last:f,previousClose:void 0,change:w,percentage:_,average:S,baseVolume:b,quoteVolume:x,info:e}}},{key:"fetchTicker",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,u,c=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:{},e.next=3,this.loadMarkets();case 3:return i=this.market(t),a=void 0,i.spot?a="dataGetMarketDetailMerged":i.swap&&(a="capiGetMarketTicker"),s={symbol:i.id},e.next=9,this[a](this.extend(s,r));case 9:return o=e.sent,u=this.safeValue(o,"data",o),e.abrupt("return",this.parseTicker(u,i));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTickersByType",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,u,c,d,h,l,f=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=f.length>1&&void 0!==f[1]?f[1]:void 0,i=f.length>2&&void 0!==f[2]?f[2]:{},e.next=4,this.loadMarkets();case 4:return a=void 0,"spot"===t?a="dataGetMarketTickers":"swap"===t&&(a="capiGetMarketTickers"),e.next=8,this[a](i);case 8:for(s=e.sent,o=this.safeValue(s,"data",s),u=void 0,Array.isArray(s)||(u=this.safeInteger(s,"ts")),c={},d=0;d<o.length;d++)h=this.parseTicker(this.extend({timestamp:u},o[d])),l=h.symbol,c[l]=h;return e.abrupt("return",this.filterByArray(c,"symbol",r));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTickers",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:{},i=this.safeString2(this.options,"fetchTickers","defaultType"),a=this.safeString(r,"type",i),e.next=6,this.fetchTickersByType(a,t,this.omit(r,"type"));case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0,n=this.safeString(e,"symbol"),a=void 0,s=void 0;if(n in this.markets_by_id)r=(t=this.markets_by_id[n]).symbol,a=t.base,s=t.quote;else if(void 0!==n){var o=n.split("_"),u=o.length;if(2===u){var c=i(o,2),d=c[0],h=c[1];r=(a=this.safeCurrencyCode(d))+"/"+(s=this.safeCurrencyCode(h))}else r=n.toUpperCase()}void 0===r&&void 0!==t&&(r=t.symbol,a=t.base,s=t.quote);var l=this.safeInteger(e,"created_at");l=this.safeInteger2(e,"timestamp","ts",l);var f=this.safeString(e,"price"),p=this.safeString2(e,"filled_amount","order_qty");p=this.safeString2(e,"size","amount",p);var v=this.parseNumber(f),m=this.parseNumber(p),g=this.parseNumber(D.stringMul(f,p)),y=this.safeString2(e,"exec_type","liquidity");"M"===y?y="maker":"T"===y&&(y="taker");var b=this.safeString(e,"type"),x=void 0,k=void 0;void 0!==b?(x=this.safeString(e,"type"),k=this.parseOrderType(x),x=this.parseOrderSide(x)):(x=this.safeString2(e,"side","direction"),k=this.parseOrderType(x),x=this.parseOrderSide(x));var w=this.safeString(e,"fee");w=void 0===w?this.safeString(e,"filled_fees"):D.stringNeg(w);var _=this.parseNumber(w),S=void 0;if(void 0!==_){var O="buy"===x?a:s;S={cost:_,currency:O}}var T=this.safeString(e,"order_id"),C=this.safeString2(e,"trade_id","id");return{info:e,timestamp:l,datetime:this.iso8601(l),symbol:r,id:C,order:T,type:k,takerOrMaker:y,side:x,price:v,amount:m,cost:g,fee:S}}},{key:"fetchTrades",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,u,c,d,h,l=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>1&&void 0!==l[1]?l[1]:void 0,i=l.length>2&&void 0!==l[2]?l[2]:void 0,a=l.length>3&&void 0!==l[3]?l[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={symbol:s.id},u=void 0,s.spot?u="dataGetMarketHistoryTrade":s.swap&&(u="capiGetMarketTrades"),s.spot?void 0!==r&&(o.size=r):s.swap&&(void 0===r&&(r=100),o.limit=r),e.next=12,this[u](this.extend(o,a));case 12:return c=e.sent,d=void 0,Array.isArray(c)?d=c:(h=this.safeValue(c,"data",{}),d=this.safeValue2(h,"data",[])),e.abrupt("return",this.parseTrades(d,s,i,r));case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeValue(this.options,"parseOHLCV",{}),i=this.safeValue(r,"volume",{});if(Array.isArray(e)){var n=this.safeString(i,t.type,"amount");return[this.safeInteger(e,0),this.safeNumber(e,1),this.safeNumber(e,2),this.safeNumber(e,3),this.safeNumber(e,4),this.safeNumber(e,n)]}var a=this.safeValue(i,t.type,6);return[this.safeInteger(e,"id"),this.safeNumber(e,"open"),this.safeNumber(e,"high"),this.safeNumber(e,"low"),this.safeNumber(e,"close"),this.safeNumber(e,a)]}},{key:"fetchOHLCV",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,u,c,d,h,l,f,p,v,m,g,y=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=y.length>1&&void 0!==y[1]?y[1]:"1m",i=y.length>2&&void 0!==y[2]?y[2]:void 0,a=y.length>3&&void 0!==y[3]?y[3]:void 0,s=y.length>4&&void 0!==y[4]?y[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),u={symbol:o.id},c=void 0,d=o.type,h=this.safeValue(this.options,"timeframes",{}),l=this.safeValue(h,d,{}),f=this.safeValue(l,this.timeframes[r]),o.spot?(c="dataGetMarketHistoryKline",u.period=f,void 0!==a&&(u.size=a)):o.swap&&(p=this.parseTimeframe(r),c="capiGetMarketCandles",u.granularity=f,v=this.milliseconds(),void 0===i?(void 0===a&&(a=1e3),u.start=this.iso8601(v-a*p*1e3),u.end=this.iso8601(v)):(u.start=this.iso8601(i),u.end=void 0===a?this.iso8601(v):this.iso8601(this.sum(i,a*p*1e3)))),e.next=16,this[c](this.extend(u,s));case 16:return m=e.sent,g=m,Array.isArray(m)||(g=this.safeValue(m,"data",[])),e.abrupt("return",this.parseOHLCVs(g,o,r,i,a));case 20:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseSpotBalance",value:function(e){for(var t={info:e},r=this.safeValue(e,"data"),i=this.safeValue(r,"list"),n=0;n<i.length;n++){var a=i[n],s=this.safeString(a,"currency"),o=this.safeCurrencyCode(s);if(!(o in t)){var u=this.account();t[o]=u}var c=this.safeValue(a,"type");if("trade"===c)t[o].free=this.safeString(a,"balance");else if("frozen"===c||"lock"===c){var d=this.safeString(t[o],"used");t[o].used=D.stringAdd(d,this.safeString(a,"balance"))}}return this.parseBalance(t,!1)}},{key:"parseSwapBalance",value:function(e){for(var t={},r=0;r<e.length;r++){var i=e[r],n=this.safeString(i,"symbol"),a=n;n in this.markets_by_id&&(a=this.markets_by_id[n].symbol);var s=this.account();s.total=this.safeString(i,"equity"),s.free=this.safeString(i,"total_avail_balance"),t[a]=s}return this.parseBalance(t,!1)}},{key:"fetchAccounts",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,u,c,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:{},r={method:"accounts"},e.next=4,this.apiGetAccountAccounts(this.extend(r,t));case 4:for(i=e.sent,a=this.safeValue(i,"data",[]),s=[],o=0;o<a.length;o++)u=a[o],c=this.safeString(u,"id"),d=this.safeStringLower(u,"type"),s.push({id:c,type:d,currency:void 0,info:u});return e.abrupt("return",s);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"findAccountByType",value:function(){var e=a(n.mark((function e(t){var r,i;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadMarkets();case 2:return e.next=4,this.loadAccounts();case 4:if(r=this.groupBy(this.accounts,"type"),void 0!==(i=this.safeValue(r,t))){e.next=8;break}throw new p(this.id+" findAccountByType() could not find an accountId with type '"+t+"', specify the 'accountId' parameter instead");case 8:if(!(i.length>1)){e.next=11;break}throw new p(this.id+" findAccountByType() found more than one accountId with type '"+t+"', specify the 'accountId' parameter instead");case 11:return e.abrupt("return",i[0]);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getAccountId",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadMarkets();case 2:return e.next=4,this.loadAccounts();case 4:if(r=this.safeString(this.options,"accountId"),void 0===(i=this.safeString(t,"accountId",r))){e.next=8;break}return e.abrupt("return",i);case 8:if(a=this.safeString(this.options,"defaultType","margin"),s=this.safeString(t,"type",a),t=this.omit(t,"type"),void 0!==s){e.next=13;break}throw new g(this.id+" getAccountId() requires an 'accountId' parameter");case 13:return e.next=15,this.findAccountByType(s);case 15:return o=e.sent,e.abrupt("return",o.id);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,u,c=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.loadAccounts();case 5:if(r=this.safeString2(this.options,"fetchBalance","defaultType"),void 0!==(i=this.safeString(t,"type",r))){e.next=9;break}throw new g(this.id+" fetchBalance() requires a 'type' parameter, one of 'spot', 'swap'");case 9:if(a=void 0,s=this.omit(t,"type"),"spot"!==i){e.next=20;break}return e.next=14,this.getAccountId(t);case 14:o=e.sent,a="apiGetAccountsAccountIdBalance",s.account_id=o,s.method="balance",e.next=21;break;case 20:"swap"===i&&(a="swapGetAccountAccounts");case 21:return e.next=23,this[a](s);case 23:return u=e.sent,e.abrupt("return",this.parseBalanceByType(i,u));case 25:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseBalanceByType",value:function(e,t){if("spot"===e)return this.parseSpotBalance(t);if("swap"===e)return this.parseSwapBalance(t);throw new A(this.id+" fetchBalance does not support the '"+e+"' type (the type must be one of 'account', 'spot', 'margin', 'futures', 'swap')")}},{key:"parseOrderStatus",value:function(e){return this.safeString({submitted:"open","partial-filled":"open","partial-canceled":"canceled",filled:"closed",canceled:"canceled","-2":"failed","-1":"canceled",0:"open",1:"open",2:"closed",3:"open",4:"canceled"},e,e)}},{key:"parseOrderSide",value:function(e){return this.safeString({"buy-market":"buy","sell-market":"sell","buy-limit":"buy","sell-limit":"sell",1:"long",2:"short",3:"long",4:"short"},e,e)}},{key:"parseOrderType",value:function(e){return this.safeString({"buy-market":"market","sell-market":"market","buy-limit":"limit","sell-limit":"limit",1:"open",2:"open",3:"close",4:"close"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"order_id");r=this.safeString2(e,"id","data",r);var i=this.safeInteger2(e,"created_at","createTime"),n=this.safeString(e,"type"),a=this.parseOrderSide(n);n=this.parseOrderType(n);var s=void 0,o=this.safeString(e,"symbol");void 0!==o&&(o in this.markets_by_id?t=this.markets_by_id[o]:s=o.toUpperCase()),void 0===s&&void 0!==t&&(s=t.symbol);var u=this.safeNumber2(e,"amount","size"),c=this.safeNumber2(e,"filled_amount","filled_qty"),d=this.safeNumber(e,"filled_cash_amount"),h=this.safeNumber(e,"price"),l=this.safeNumber(e,"price_avg"),f=this.parseOrderStatus(this.safeString2(e,"state","status")),p=this.safeNumber2(e,"filled_fees","fee"),v=void 0;if(void 0!==p){var m=void 0;v={cost:p,currency:m}}var g=this.safeString(e,"client_oid");return this.safeOrder({info:e,id:r,clientOrderId:g,timestamp:i,datetime:this.iso8601(i),lastTradeTimestamp:void 0,symbol:s,type:n,timeInForce:void 0,postOnly:void 0,side:a,price:h,stopPrice:void 0,average:l,cost:d,amount:u,filled:c,remaining:void 0,status:f,fee:v,trades:void 0})}},{key:"createOrder",value:function(){var e=a(n.mark((function e(t,r,i,a){var s,o,u,c,d,h,l,f,p,v,m=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=m.length>4&&void 0!==m[4]?m[4]:void 0,o=m.length>5&&void 0!==m[5]?m[5]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.loadAccounts();case 6:if(u=this.market(t),c={symbol:u.id},d=this.safeString2(o,"client_oid","clientOrderId",this.uuid()),o=this.omit(o,["client_oid","clientOrderId"]),h=void 0,!u.spot){e.next=44;break}return e.next=14,this.getAccountId({type:u.type});case 14:if(l=e.sent,h="apiPostOrderOrdersPlace",c.account_id=l,c.method="place",c.type=i+"-"+r,"limit"!==r){e.next=24;break}c.amount=this.amountToPrecision(t,a),c.price=this.priceToPrecision(t,s),e.next=42;break;case 24:if("market"!==r){e.next=42;break}if("buy"!==i){e.next=41;break}if(f=this.safeNumber(o,"amount"),!this.safeValue(this.options,"createMarketBuyOrderRequiresPrice",!0)){e.next=37;break}if(void 0===s){e.next=33;break}void 0===f&&(f=a*s),e.next=35;break;case 33:if(void 0!==f){e.next=35;break}throw new T(this.id+" createOrder() requires the price argument with market buy orders to calculate total order cost (amount to spend), where cost = amount * price. Supply a price argument to createOrder() call if you want the cost to be calculated for you from price and amount, or, alternatively, add .options['createMarketBuyOrderRequiresPrice'] = false and supply the total cost value in the 'amount' argument or in the 'amount' extra parameter (the exchange-specific behaviour)");case 35:e.next=38;break;case 37:f=void 0===f?a:f;case 38:c.amount=this.costToPrecision(t,f),e.next=42;break;case 41:"sell"===i&&(c.amount=this.amountToPrecision(t,a));case 42:e.next=54;break;case 44:if(!u.swap){e.next=54;break}if(c.order_type="0",c.client_oid=d,void 0!==(p=this.safeString(o,"type"))){e.next=50;break}throw new g(this.id+" createOrder() requires a type parameter, '1' = open long, '2' = open short, '3' = close long, '4' = close short for "+u.type+" orders");case 50:c.size=this.amountToPrecision(t,a),c.type=p,"limit"===r?(c.match_price="0",c.price=this.priceToPrecision(t,s)):"market"===r&&(c.match_price="1"),h="swapPostOrderPlaceOrder";case 54:return e.next=56,this[h](this.extend(c,o));case 56:return v=e.sent,e.abrupt("return",this.parseOrder(v,u));case 58:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,u,c,d,h,l=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>1&&void 0!==l[1]?l[1]:void 0,i=l.length>2&&void 0!==l[2]?l[2]:{},e.next=4,this.loadMarkets();case 4:if(a=void 0,s=void 0,void 0!==r){e.next=14;break}if(o=this.safeString2(this.options,"cancelOrder","defaultType"),"spot"!==this.safeString(i,"type",o)){e.next=12;break}if(void 0!==r){e.next=12;break}throw new g(this.id+" cancelOrder() requires a symbol argument for spot orders");case 12:e.next=16;break;case 14:a=this.market(r),s=a.type;case 16:return u=this.omit(i,"type"),c=void 0,d={},"spot"===s?(c="apiPostOrderOrdersOrderIdSubmitcancel",d.order_id=t,d.method="submitcancel"):"swap"===s&&(c="swapPostOrderCancelOrder",d.orderId=t,d.symbol=a.id),e.next=22,this[c](this.extend(d,u));case 22:return h=e.sent,e.abrupt("return",this.parseOrder(h,a));case 24:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cancelOrders",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,u,c,d,h,l=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=l.length>1&&void 0!==l[1]?l[1]:void 0,i=l.length>2&&void 0!==l[2]?l[2]:{},void 0!==r){e.next=4;break}throw new g(this.id+" cancelOrders() requires a symbol argument");case 4:return e.next=6,this.loadMarkets();case 6:if(a=this.market(r),void 0!==(s=this.safeString(i,"type",a.type))){e.next=10;break}throw new g(this.id+" cancelOrders() requires a type parameter (one of 'spot', 'swap').");case 10:return i=this.omit(i,"type"),o={},u=void 0,"spot"===s?(u="apiPostOrderOrdersBatchcancel",o.method="batchcancel",c=this.json(t),d=c.split('"'),o.order_ids=d.join("")):"swap"===s&&(u="swapPostOrderCancelBatchOrders",o.symbol=a.id,o.ids=t),e.next=16,this[u](this.extend(o,i));case 16:return h=e.sent,e.abrupt("return",h);case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,u,c,d,h,l,f=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=f.length>1&&void 0!==f[1]?f[1]:void 0,i=f.length>2&&void 0!==f[2]?f[2]:{},void 0!==r){e.next=4;break}throw new g(this.id+" fetchOrder() requires a symbol argument");case 4:return e.next=6,this.loadMarkets();case 6:if(a=this.market(r),void 0!==(s=this.safeString(i,"type",a.type))){e.next=10;break}throw new g(this.id+" fetchOrder() requires a type parameter (one of 'spot', 'swap').");case 10:return o=void 0,u={},"spot"===s?(void 0!==(c=this.safeString(i,"client_oid"))?(o="apiPostOrderOrdersClientOid",u.client_oid=c):(o="apiPostOrderOrdersOrderId",u.order_id=t),u.method="getOrder"):"swap"===s&&(o="swapGetOrderDetail",u.symbol=a.id,u.orderId=t),d=this.omit(i,"type"),e.next=16,this[o](this.extend(u,d));case 16:return h=e.sent,l=this.safeValue(h,"data",h),e.abrupt("return",this.parseOrder(l,a));case 19:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,u,c,d,h,l=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=l.length>0&&void 0!==l[0]?l[0]:void 0,l.length>1&&void 0!==l[1]?l[1]:void 0,r=l.length>2&&void 0!==l[2]?l[2]:void 0,i=l.length>3&&void 0!==l[3]?l[3]:{},void 0!==t){e.next=6;break}throw new g(this.id+" fetchOpenOrders() requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return a=this.market(t),s=this.safeString(i,"type",a.type),o={symbol:a.id},u=void 0,"spot"===s?(u="apiGetOrderOrdersOpenOrders",o.method="openOrders",void 0===r&&(o.size=r)):"swap"===s&&(u="swapGetOrderOrders",o.status="3",o.from="1",o.to="1",void 0===r&&(o.limit=100)),c=this.omit(i,"type"),e.next=16,this[u](this.extend(o,c));case 16:return d=e.sent,h=d,Array.isArray(d)||(h=this.safeValue(d,"data",[])),e.abrupt("return",this.parseOrders(h,a,void 0,r));case 20:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,u,c,d,h,l,f=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.length>0&&void 0!==f[0]?f[0]:void 0,r=f.length>1&&void 0!==f[1]?f[1]:void 0,i=f.length>2&&void 0!==f[2]?f[2]:void 0,a=f.length>3&&void 0!==f[3]?f[3]:{},void 0!==t){e.next=6;break}throw new g(this.id+" fetchClosedOrders() requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.market(t),o=this.safeString(a,"type",s.type),u={symbol:s.id},c=void 0,"spot"===o?(c="apiGetOrderOrdersHistory",void 0!==r&&(u.start_time=r),u.method="openOrders",void 0===i&&(u.size=i)):"swap"===o&&(c="swapGetOrderOrders",u.status="2",u.from="1",u.to="1",void 0===i&&(u.limit=100)),d=this.omit(a,"type"),e.next=16,this[c](this.extend(u,d));case 16:return h=e.sent,l=h,Array.isArray(h)||(l=this.safeValue(h,"data",[])),e.abrupt("return",this.parseOrders(l,s,void 0,i));case 20:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchDeposits",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,u,c,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,i=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},void 0!==t){e.next=6;break}throw new g(this.id+" fetchDeposits() requires a currency code argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.currency(t),o={currency:s.id,method:"deposit_withdraw",type:"deposit",size:12},e.next=12,this.apiGetOrderDepositWithdraw(this.extend(o,a));case 12:return u=e.sent,c=this.safeValue(u,"data",[]),e.abrupt("return",this.parseTransactions(c,s,r,i,a));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchWithdrawals",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,u,c,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,i=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},void 0!==t){e.next=6;break}throw new g(this.id+" fetchWithdrawals() requires a currency code argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.currency(t),o={currency:s.id,method:"deposit_withdraw",type:"withdraw",size:12},e.next=12,this.apiGetOrderDepositWithdraw(this.extend(o,a));case 12:return u=e.sent,c=this.safeValue(u,"data",[]),e.abrupt("return",this.parseTransactions(c,s,r,i,a));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTransactionStatus",value:function(e){return this.safeString({WaitForOperation:"pending",OperationLock:"pending",OperationSuccess:"ok",Cancel:"canceled",Sure:"ok",Fail:"failed",WaitForChainSure:"ok",WAIT_0:"pending",WAIT_1:"pending",DATA_CHANGE:"pending",SUCCESS:"ok"},e,e)}},{key:"parseTransaction",value:function(e){var t=this.safeString(e,"id"),r=this.safeString(e,"address"),i=this.safeString(e,"address_tag"),n=void 0,a=i,s=void 0,o=r,u=this.safeString(e,"type");"withdraw"===u?u="withdrawal":"deposit"===u&&(u="deposit");var c=this.safeString(e,"currency"),d=this.safeCurrencyCode(c),h=this.safeNumber(e,"amount"),l=this.parseTransactionStatus(this.safeString(e,"state")),f=this.safeString(e,"tx_hash"),p=this.safeInteger(e,"created_at"),v=this.safeInteger(e,"updated_at"),m=this.safeNumber(e,"fee"),g=void 0;return void 0!==m&&(g={currency:d,cost:m}),{info:e,id:t,currency:d,amount:h,addressFrom:s,addressTo:o,address:r,tagFrom:n,tagTo:a,tag:i,status:l,type:u,updated:v,txid:f,timestamp:p,datetime:this.iso8601(p),fee:g}}},{key:"fetchMyTrades",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,u,c,d,h,l,f=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.length>0&&void 0!==f[0]?f[0]:void 0,r=f.length>1&&void 0!==f[1]?f[1]:void 0,i=f.length>2&&void 0!==f[2]?f[2]:void 0,a=f.length>3&&void 0!==f[3]?f[3]:{},void 0!==t){e.next=6;break}throw new g(this.id+" fetchMyTrades() requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:if(s=this.market(t),o=this.safeString(a,"type",s.type),u=this.omit(a,"type"),"swap"!==o){e.next=13;break}throw new g(this.id+" fetchMyTrades() is not supported for "+o+" type");case 13:return c={symbol:s.id,method:"matchresults"},void 0!==r&&(c.start_date=this.ymd(r),d=this.sum(r,1728e5),c.end_date=this.ymd(d)),void 0!==i&&(c.size=i),e.next=18,this.apiPostOrderMatchresults(this.extend(c,u));case 18:return h=e.sent,l=this.safeValue(h,"data",[]),e.abrupt("return",this.parseTrades(l,s,r,i));case 21:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderTrades",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,u,c,d,h,l,f=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=f.length>1&&void 0!==f[1]?f[1]:void 0,i=f.length>2&&void 0!==f[2]?f[2]:void 0,a=f.length>3&&void 0!==f[3]?f[3]:void 0,s=f.length>4&&void 0!==f[4]?f[4]:{},void 0!==r){e.next=6;break}throw new g(this.id+" fetchOrderTrades() requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return o=this.market(r),u=this.safeString(s,"type",o.type),s=this.omit(s,"type"),c=void 0,d={},"spot"===u?(d.order_id=t,d.method="matchresults",c="apiPostOrderOrdersOrderIdMatchresults"):"swap"===u&&(d.orderId=t,d.symbol=o.id,c="swapGetOrderFills"),e.next=16,this[c](this.extend(d,s));case 16:return h=e.sent,l=h,Array.isArray(l)||(l=this.safeValue(h,"data",[])),e.next=21,this.parseTrades(l,o,i,a);case 21:return e.abrupt("return",e.sent);case 22:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchPosition",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return i=this.market(t),a={symbol:i.id},e.next=7,this.swapGetPositionSinglePosition(this.extend(a,r));case 7:return s=e.sent,e.abrupt("return",s);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchPositions",value:function(){var e=a(n.mark((function e(){var t,r,i=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i.length>0&&void 0!==i[0]?i[0]:void 0,t=i.length>1&&void 0!==i[1]?i[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.swapGetPositionAllPosition(t);case 6:return r=e.sent,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s="/"+this.implodeParams(e,i);s="capi"===t||"swap"===t?"/api/swap/"+this.version+s:"/"+t+"/v1"+s;var o=this.omit(i,this.extractParams(e)),u=this.implodeParams(this.urls.api[t],{hostname:this.hostname})+s;if("data"===t||"capi"===t)Object.keys(o).length&&(u+="?"+this.urlencode(o));else if("swap"===t){this.checkRequiredCredentials();var c=this.milliseconds().toString(),d=c+r+s;if("POST"===r)d+=a=this.json(i);else if(Object.keys(i).length){var h=this.urlencode(this.keysort(i));u+="?"+h,d+="?"+h}var l=this.hmac(this.encode(d),this.encode(this.secret),"sha256","base64");n={"ACCESS-KEY":this.apiKey,"ACCESS-SIGN":l,"ACCESS-TIMESTAMP":c,"ACCESS-PASSPHRASE":this.password},"POST"===r&&(n["Content-Type"]="application/json")}else if("api"===t){var f=this.milliseconds().toString(),p="";o=this.keysort(o),p=this.rawencode(o);var v=this.hash(this.encode(this.secret),"sha1"),m=p,g=this.hmac(this.encode(p),this.encode(v),"md5");p.length>0&&(m+="&"),m+="sign="+g+"&req_time="+f+"&accesskey="+this.apiKey,"GET"===r?Object.keys(o).length&&(u+="?"+m):"POST"===r&&(u+="?sign="+g+"&req_time="+f+"&accesskey="+this.apiKey,a=p,n={"Content-Type":"application/x-www-form-urlencoded"})}return{url:u,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,u){if(s){var c=this.safeString(s,"err_msg"),d=this.safeString2(s,"code","err_code"),h=this.id+" "+a,l=void 0!==c&&""!==c;l&&(this.throwExactlyMatchedException(this.exceptions.exact,c,h),this.throwBroadlyMatchedException(this.exceptions.broad,c,h));var f=void 0!==d&&"00000"!==d;if(f&&this.throwExactlyMatchedException(this.exceptions.exact,d,h),f||l)throw new p(h)}}}]),r}(l)},function(e,t,r){"use strict";var i=r(7),n=r(8),a=r(1),s=r(2),o=r(6),u=r(3),c=r(4),d=r(5),h=r(11),l=r(10),f=l.ExchangeError,p=l.ExchangeNotAvailable,v=l.AuthenticationError,m=l.BadRequest,g=l.PermissionDenied,y=l.InvalidAddress,b=l.ArgumentsRequired,x=l.InvalidOrder,k=r(18),w=k.DECIMAL_PLACES,_=k.SIGNIFICANT_DIGITS,S=k.TRUNCATE,O=r(12);e.exports=function(e){c(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(u(r.prototype),"describe",this).call(this),{id:"bithumb",name:"Bithumb",countries:["KR"],rateLimit:500,has:{cancelOrder:!0,CORS:!0,createMarketOrder:!0,createOrder:!0,fetchBalance:!0,fetchMarkets:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,withdraw:!0},hostname:"bithumb.com",urls:{logo:"https://user-images.githubusercontent.com/1294454/30597177-ea800172-9d5e-11e7-804c-b9d4fa9b56b0.jpg",api:{public:"https://api.{hostname}/public",private:"https://api.{hostname}"},www:"https://www.bithumb.com",doc:"https://apidocs.bithumb.com",fees:"https://en.bithumb.com/customer_support/info_fee"},api:{public:{get:["ticker/{currency}","ticker/all","ticker/ALL_BTC","ticker/ALL_KRW","orderbook/{currency}","orderbook/all","transaction_history/{currency}","transaction_history/all","candlestick/{currency}/{interval}"]},private:{post:["info/account","info/balance","info/wallet_address","info/ticker","info/orders","info/user_transactions","info/order_detail","trade/place","trade/cancel","trade/btc_withdrawal","trade/krw_deposit","trade/krw_withdrawal","trade/market_buy","trade/market_sell"]}},fees:{trading:{maker:.0025,taker:.0025}},precisionMode:_,exceptions:{"Bad Request(SSL)":m,"Bad Request(Bad Method)":m,"Bad Request.(Auth Data)":v,"Not Member":v,"Invalid Apikey":v,"Method Not Allowed.(Access IP)":g,"Method Not Allowed.(BTC Adress)":y,"Method Not Allowed.(Access)":g,"Database Fail":p,"Invalid Parameter":m,5600:f,"Unknown Error":f,"After May 23th, recent_transactions is no longer, hence users will not be able to connect to recent_transactions":f},timeframes:{"1m":"1m","3m":"3m","5m":"5m","10m":"10m","30m":"30m","1h":"1h","6h":"6h","12h":"12h","1d":"24h"},options:{quoteCurrencies:{BTC:{precision:{price:8}},KRW:{}}}})}},{key:"amountToPrecision",value:function(e,t){return this.decimalToPrecision(t,S,this.markets[e].precision.amount,w)}},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p,v,m,g,y,b,x=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=x.length>0&&void 0!==x[0]?x[0]:{},r=[],n=this.safeValue(this.options,"quoteCurrencies",{}),a=Object.keys(n),s=0;case 5:if(!(s<a.length)){e.next=32;break}return o=a[s],u=this.safeValue(n,o,{}),c="publicGetTickerALL"+o,e.next=11,this[c](t);case 11:d=e.sent,h=this.safeValue(d,"data"),l=Object.keys(h),f=0;case 15:if(!(f<l.length)){e.next=29;break}if("date"!==(p=l[f])){e.next=19;break}return e.abrupt("continue",26);case 19:v=h[p],m=this.safeCurrencyCode(p),g=p+"/"+o,y=!0,Array.isArray(v)&&0===v.length&&(y=!1),b=this.deepExtend({id:p,symbol:g,base:m,quote:o,info:v,active:y,precision:{amount:4,price:4},limits:{amount:{min:void 0,max:void 0},price:{min:void 0,max:void 0},cost:{min:500,max:5e9}},baseId:void 0,quoteId:void 0},u),r.push(b);case 26:f++,e.next=15;break;case 29:s++,e.next=5;break;case 32:return e.abrupt("return",r);case 33:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:{},e.next=3,this.loadMarkets();case 3:return r={currency:"ALL"},e.next=6,this.privatePostInfoBalance(this.extend(r,t));case 6:for(n=e.sent,a={info:n},s=this.safeValue(n,"data"),o=Object.keys(this.currencies),u=0;u<o.length;u++)c=o[u],d=this.account(),h=this.currency(c),l=this.safeStringLower(h,"id"),d.total=this.safeString(s,"total_"+l),d.used=this.safeString(s,"in_use_"+l),d.free=this.safeString(s,"available_"+l),a[c]=d;return e.abrupt("return",this.parseBalance(a,!1));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:{},e.next=4,this.loadMarkets();case 4:return a=this.market(t),s={currency:a.base},void 0!==r&&(s.count=r),e.next=9,this.publicGetOrderbookCurrency(this.extend(s,n));case 9:return o=e.sent,u=this.safeValue(o,"data",{}),c=this.safeInteger(u,"timestamp"),e.abrupt("return",this.parseOrderBook(u,c,"bids","asks","price","quantity"));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeInteger(e,"date"),i=void 0;void 0!==t&&(i=t.symbol);var n=this.safeNumber(e,"opening_price"),a=this.safeNumber(e,"closing_price"),s=void 0,o=void 0,u=void 0;void 0!==a&&void 0!==n&&(s=a-n,n>0&&(o=s/n*100),u=this.sum(n,a)/2);var c=this.safeNumber(e,"units_traded_24H"),d=this.safeNumber(e,"acc_trade_value_24H"),h=this.vwap(c,d);return{symbol:i,timestamp:r,datetime:this.iso8601(r),high:this.safeNumber(e,"max_price"),low:this.safeNumber(e,"min_price"),bid:this.safeNumber(e,"buy_price"),bidVolume:void 0,ask:this.safeNumber(e,"sell_price"),askVolume:void 0,vwap:h,open:n,close:a,last:a,previousClose:void 0,change:s,percentage:o,average:u,baseVolume:c,quoteVolume:d,info:e}}},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p,v=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=v.length>0&&void 0!==v[0]?v[0]:void 0,r=v.length>1&&void 0!==v[1]?v[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetTickerAll(r);case 6:for(n=e.sent,a={},s=this.safeValue(n,"data",{}),o=this.safeInteger(s,"date"),u=this.omit(s,"date"),c=Object.keys(u),d=0;d<c.length;d++)h=c[d],l=h,f=void 0,h in this.markets_by_id&&(f=this.markets_by_id[h],l=f.symbol),p=u[h],Array.isArray(p)||(p.date=o,a[l]=this.parseTicker(p,f));return e.abrupt("return",this.filterByArray(a,"symbol",t));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={currency:n.base},e.next=7,this.publicGetTickerCurrency(this.extend(a,r));case 7:return s=e.sent,o=this.safeValue(s,"data",{}),e.abrupt("return",this.parseTicker(o,n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){return[this.safeInteger(e,0),this.safeNumber(e,1),this.safeNumber(e,3),this.safeNumber(e,4),this.safeNumber(e,2),this.safeNumber(e,5)]}},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:"1m",n=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:void 0,s=h.length>4&&void 0!==h[4]?h[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),u={currency:o.base,interval:this.timeframes[r]},e.next=10,this.publicGetCandlestickCurrencyInterval(this.extend(u,s));case 10:return c=e.sent,d=this.safeValue(c,"data",[]),e.abrupt("return",this.parseOHLCVs(d,o,r,n,a));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0,i=this.safeString(e,"transaction_date");if(void 0!==i){var n=i.split(" "),a=n.length;if(a>1){var s=n[0],o=n[1];o.length<8&&(o="0"+o),r=this.parse8601(s+" "+o)}else r=this.safeIntegerProduct(e,"transaction_date",.001)}void 0!==r&&(r-=324e5);var u=void 0,c=this.safeString(e,"type");c="ask"===c?"sell":"buy";var d=this.safeString(e,"cont_no"),h=void 0;void 0!==t&&(h=t.symbol);var l=this.safeString(e,"price"),f=this.safeString2(e,"units_traded","units"),p=this.parseNumber(l),v=this.parseNumber(f),m=this.safeNumber(e,"total");void 0===m&&(m=this.parseNumber(O.stringMul(l,f)));var g=void 0,y=this.safeNumber(e,"fee");if(void 0!==y){var b=this.safeString(e,"fee_currency"),x=this.commonCurrencyCode(b);g={cost:y,currency:x}}return{id:d,info:e,timestamp:r,datetime:this.iso8601(r),symbol:h,order:void 0,type:u,side:c,takerOrMaker:void 0,price:p,amount:v,cost:m,fee:g}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={currency:s.base},void 0===n&&(o.count=n),e.next=10,this.publicGetTransactionHistoryCurrency(this.extend(o,a));case 10:return u=e.sent,c=this.safeValue(u,"data",[]),e.abrupt("return",this.parseTrades(c,s,r,n));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,u,c,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=f.length>4&&void 0!==f[4]?f[4]:void 0,o=f.length>5&&void 0!==f[5]?f[5]:{},e.next=4,this.loadMarkets();case 4:return u=this.market(t),c={order_currency:u.id,payment_currency:u.quote,units:a},d="privatePostTradePlace","limit"===r?(c.price=s,c.type="buy"===n?"bid":"ask"):d="privatePostTradeMarket"+this.capitalize(n),e.next=10,this[d](this.extend(c,o));case 10:if(h=e.sent,void 0!==(l=this.safeString(h,"order_id"))){e.next=14;break}throw new x(this.id+" createOrder() did not return an order id");case 14:return e.abrupt("return",{info:h,symbol:t,type:r,side:n,id:l});case 15:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:{},void 0!==r){e.next=4;break}throw new b(this.id+" fetchOrder() requires a symbol argument");case 4:return e.next=6,this.loadMarkets();case 6:return a=this.market(r),s={order_id:t,count:1,order_currency:a.base,payment_currency:a.quote},e.next=10,this.privatePostInfoOrderDetail(this.extend(s,n));case 10:return o=e.sent,u=this.safeValue(o,"data"),e.abrupt("return",this.parseOrder(this.extend(u,{order_id:t}),a));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({Pending:"open",Completed:"closed",Cancel:"canceled"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeIntegerProduct(e,"order_date",.001),i=this.safeValue2(e,"type","side"),n="bid"===i?"buy":"sell",a=this.parseOrderStatus(this.safeString(e,"order_status")),s=this.safeNumber2(e,"order_price","price"),o="limit";0===s&&(s=void 0,o="market");var u=this.safeNumber2(e,"order_qty","units"),c=this.safeNumber(e,"units_remaining");void 0===c&&("closed"===a?c=0:"canceled"!==a&&(c=u));var d=void 0,h=this.safeString(e,"order_currency"),l=this.safeString(e,"payment_currency"),f=this.safeCurrencyCode(h),p=this.safeCurrencyCode(l);void 0!==f&&void 0!==p&&(d=f+"/"+p),void 0===d&&void 0!==t&&(d=t.symbol);var v=this.safeString(e,"order_id"),m=this.safeValue(e,"contract",[]),g=this.parseTrades(m,t,void 0,void 0,{side:n,symbol:d,order:v});return this.safeOrder({info:e,id:v,clientOrderId:void 0,timestamp:r,datetime:this.iso8601(r),lastTradeTimestamp:void 0,symbol:d,type:o,timeInForce:void 0,postOnly:void 0,side:n,price:s,stopPrice:void 0,amount:u,cost:void 0,average:void 0,filled:void 0,remaining:c,status:a,fee:void 0,trades:g})}},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},void 0!==t){e.next=6;break}throw new b(this.id+" fetchOpenOrders() requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.market(t),void 0===n&&(n=100),o={count:n,order_currency:s.base,payment_currency:s.quote},void 0!==r&&(o.after=r),e.next=14,this.privatePostInfoOrders(this.extend(o,a));case 14:return u=e.sent,c=this.safeValue(u,"data",[]),e.abrupt("return",this.parseOrders(c,s,r,n));case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:{},"side"in n){e.next=5;break}throw new b(this.id+" cancelOrder() requires a `symbol` argument and a `side` parameter (sell or buy)");case 5:if(void 0!==r){e.next=7;break}throw new b(this.id+" cancelOrder() requires a `symbol` argument and a `side` parameter (sell or buy)");case 7:return a=this.market(r),s="buy"===n.side?"bid":"ask",n=this.omit(n,["side","currency"]),o={order_id:t,type:s,order_currency:a.base,payment_currency:a.quote},e.next=13,this.privatePostTradeCancel(this.extend(o,n));case 13:return e.abrupt("return",e.sent);case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cancelUnifiedOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r={side:e.side};return this.cancelOrder(e.id,e.symbol,this.extend(r,t))}},{key:"withdraw",value:function(){var e=n(i.mark((function e(t,r,n){var a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.length>3&&void 0!==h[3]?h[3]:void 0,s=h.length>4&&void 0!==h[4]?h[4]:{},this.checkAddress(n),e.next=5,this.loadMarkets();case 5:if(o=this.currency(t),u={units:r,address:n,currency:o.id},"XRP"!==o&&"XMR"!==o&&"EOS"!==o&&"STEEM"!==o){e.next=14;break}if(c=this.safeString(s,"destination"),void 0!==a||void 0!==c){e.next=13;break}throw new b(this.id+" "+t+" withdraw() requires a tag argument or an extra destination param");case 13:void 0!==a&&(u.destination=a);case 14:return e.next=16,this.privatePostTradeBtcWithdrawal(this.extend(u,s));case 16:return d=e.sent,e.abrupt("return",{info:d,id:void 0});case 18:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"nonce",value:function(){return this.milliseconds()}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s="/"+this.implodeParams(e,i),o=this.implodeParams(this.urls.api[t],{hostname:this.hostname})+s,u=this.omit(i,this.extractParams(e));if("public"===t)Object.keys(u).length&&(o+="?"+this.urlencode(u));else{this.checkRequiredCredentials(),a=this.urlencode(this.extend({endpoint:s},u));var c=this.nonce().toString(),d=s+"\0"+a+"\0"+c,h=this.hmac(this.encode(d),this.encode(this.secret),"sha512"),l=this.decode(this.stringToBase64(h));n={Accept:"application/json","Content-Type":"application/x-www-form-urlencoded","Api-Key":this.apiKey,"Api-Sign":l,"Api-Nonce":c}}return{url:o,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,u){if(void 0!==s&&"status"in s){var c=this.safeString(s,"status"),d=this.safeString(s,"message");if(void 0!==c){if("0000"===c)return;var h=this.id+" "+a;throw this.throwExactlyMatchedException(this.exceptions,c,h),this.throwExactlyMatchedException(this.exceptions,d,h),new f(h)}}}},{key:"request",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:"public",n=c.length>2&&void 0!==c[2]?c[2]:"GET",a=c.length>3&&void 0!==c[3]?c[3]:{},s=c.length>4&&void 0!==c[4]?c[4]:void 0,o=c.length>5&&void 0!==c[5]?c[5]:void 0,e.next=7,this.fetch2(t,r,n,a,s,o);case 7:if(!("status"in(u=e.sent))){e.next=12;break}if("0000"!==u.status){e.next=11;break}return e.abrupt("return",u);case 11:throw new f(this.id+" "+this.json(u));case 12:return e.abrupt("return",u);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(h)},function(e,t,r){"use strict";var i=r(1),n=r(2),a=r(6),s=r(3),o=r(4),u=r(5),c=r(163);e.exports=function(e){o(r,e);var t=u(r);function r(){return i(this,r),t.apply(this,arguments)}return n(r,[{key:"describe",value:function(){return this.deepExtend(a(s(r.prototype),"describe",this).call(this),{id:"bitkk",name:"bitkk",comment:"a Chinese ZB clone",urls:{api:{public:"http://api.bitkk.com/data",private:"https://trade.bitkk.com/api"},www:"https://www.bitkk.com",doc:"https://www.bitkk.com/i/developer",fees:"https://www.bitkk.com/i/rate"},commonCurrencies:{BCH:"BCHOLD"}})}}]),r}(c)},function(e,t,r){"use strict";var i=r(7),n=r(8),a=r(1),s=r(2),o=r(6),u=r(3),c=r(4),d=r(5),h=r(11),l=r(10),f=l.AuthenticationError,p=l.ExchangeNotAvailable,v=l.AccountSuspended,m=l.PermissionDenied,g=l.RateLimitExceeded,y=l.InvalidNonce,b=l.InvalidAddress,x=l.ArgumentsRequired,k=l.ExchangeError,w=l.InvalidOrder,_=l.InsufficientFunds,S=l.BadRequest,O=l.OrderNotFound,T=l.BadSymbol,C=l.NotSupported,I=r(18),M=I.ROUND,A=I.TICK_SIZE,E=I.TRUNCATE;e.exports=function(e){c(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(u(r.prototype),"describe",this).call(this),{id:"bitmart",name:"BitMart",countries:["US","CN","HK","KR"],rateLimit:1e3,version:"v1",has:{cancelAllOrders:!0,cancelOrder:!0,cancelOrders:!0,createOrder:!0,fetchBalance:!0,fetchCanceledOrders:!0,fetchClosedOrders:!0,fetchCurrencies:!0,fetchDepositAddress:!0,fetchDeposits:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchOrderTrades:!0,fetchTicker:!0,fetchTickers:!0,fetchTime:!0,fetchStatus:!0,fetchTrades:!0,fetchWithdrawals:!0,withdraw:!0},hostname:"bitmart.com",urls:{logo:"https://user-images.githubusercontent.com/1294454/61835713-a2662f80-ae85-11e9-9d00-6442919701fd.jpg",api:"https://api-cloud.{hostname}",www:"https://www.bitmart.com/",doc:"https://developer-pro.bitmart.com/",referral:"http://www.bitmart.com/?r=rQCFLh",fees:"https://www.bitmart.com/fee/en"},requiredCredentials:{apiKey:!0,secret:!0,uid:!0},api:{public:{system:{get:["time","service"]},account:{get:["currencies"]},spot:{get:["currencies","symbols","symbols/details","ticker","steps","symbols/kline","symbols/book","symbols/trades"]},contract:{get:["contracts","pnls","indexes","tickers","quote","indexquote","trades","depth","fundingrate"]}},private:{account:{get:["wallet","deposit/address","withdraw/charge","deposit-withdraw/history","deposit-withdraw/detail"],post:["withdraw/apply"]},spot:{get:["wallet","order_detail","orders","trades"],post:["submit_order","cancel_order","cancel_orders"]},contract:{get:["userOrders","userOrderInfo","userTrades","orderTrades","accounts","userPositions","userLiqRecords","positionFee"],post:["batchOrders","submitOrder","cancelOrders","marginOper"]}}},timeframes:{"1m":1,"3m":3,"5m":5,"15m":15,"30m":30,"45m":45,"1h":60,"2h":120,"3h":180,"4h":240,"1d":1440,"1w":10080,"1M":43200},fees:{trading:{tierBased:!0,percentage:!0,taker:.0025,maker:.0025,tiers:{taker:[[0,.002],[10,.0018],[50,.0016],[250,.14/100],[1e3,.0012],[5e3,.001],[25e3,8e-4],[5e4,6e-4]],maker:[[0,.001],[10,9e-4],[50,8e-4],[250,.07/100],[1e3,6e-4],[5e3,5e-4],[25e3,4e-4],[5e4,3e-4]]}}},precisionMode:A,exceptions:{exact:{3e4:k,30001:f,30002:f,30003:v,30004:f,30005:f,30006:f,30007:f,30008:f,30010:m,30011:f,30012:f,30013:g,30014:p,6e4:S,60001:S,60002:S,60003:k,60004:k,60005:k,60006:k,60007:b,60008:_,60009:k,60010:k,60011:b,60012:k,60020:m,60021:m,60022:m,60030:S,60031:S,60050:k,60051:k,5e4:S,50001:T,50002:S,50003:S,50004:S,50005:O,50006:w,50007:w,50008:w,50009:w,50010:w,50011:w,50012:w,50013:w,50014:S,50015:S,50016:S,50017:S,50018:S,50019:S,50020:_,50021:S,50022:p,50023:T,53e3:v,57001:S,58001:S,59001:k,59002:k,40001:k,40002:k,40003:k,40004:k,40005:k,40006:m,40007:S,40008:y,40009:S,40010:S,40011:S,40012:k,40013:k,40014:T,40015:T,40016:w,40017:w,40018:w,40019:k,40020:w,40021:k,40022:k,40023:k,40024:k,40025:k,40026:k,40027:_,40028:m,40029:w,40030:w,40031:w,40032:w,40033:w,40034:T},broad:{}},commonCurrencies:{COT:"Community Coin",CPC:"CPCoin",ONE:"Menlo One",PLA:"Plair"},options:{defaultType:"spot",fetchBalance:{type:"spot"},createMarketBuyOrderRequiresPrice:!0}})}},{key:"fetchTime",value:function(){var e=n(i.mark((function e(){var t,r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},e.next=3,this.publicSystemGetTime(t);case 3:return r=e.sent,n=this.safeValue(r,"data",{}),e.abrupt("return",this.safeInteger(n,"server_time"));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchStatus",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:{},r=this.safeValue(this.options,"fetchBalance",{}),n=this.safeString(this.options,"defaultType"),a=this.safeString(r,"type",n),a=this.safeString(t,"type",a),t=this.omit(t,"type"),e.next=8,this.publicSystemGetService(t);case 8:return s=e.sent,o=this.safeValue(s,"data",{}),u=this.safeValue(o,"service",[]),c=this.indexBy(u,"service_type"),"swap"!==a&&"future"!==a||(a="contract"),d=this.safeValue(c,a),h=void 0,l=void 0,void 0!==d&&(2===this.safeInteger(d,"status")?h="ok":(h="maintenance",l=this.safeInteger(d,"end_time"))),this.status=this.extend(this.status,{status:h,updated:this.milliseconds(),eta:l}),e.abrupt("return",this.status);case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchSpotMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p,v,m,g,y,b,x,k,w=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=w.length>0&&void 0!==w[0]?w[0]:{},e.next=3,this.publicSpotGetSymbolsDetails(t);case 3:for(r=e.sent,n=this.safeValue(r,"data",{}),a=this.safeValue(n,"symbols",[]),s=[],o=0;o<a.length;o++)u=a[o],c=this.safeString(u,"symbol"),d=this.safeInteger(u,"symbol_id"),h=this.safeString(u,"base_currency"),l=this.safeString(u,"quote_currency"),f=this.safeCurrencyCode(h),p=this.safeCurrencyCode(l),v=f+"/"+p,m=this.safeInteger(u,"price_max_precision"),g={amount:this.safeNumber(u,"base_min_size"),price:parseFloat(this.decimalToPrecision(Math.pow(10,-m),M,10))},y=this.safeNumber(u,"min_buy_amount"),b=this.safeNumber(u,"min_sell_amount"),x=Math.max(y,b),k={amount:{min:this.safeNumber(u,"base_min_size"),max:this.safeNumber(u,"base_max_size")},price:{min:void 0,max:void 0},cost:{min:x,max:void 0}},s.push({id:c,numericId:d,symbol:v,base:f,quote:p,baseId:h,quoteId:l,type:"spot",spot:!0,future:!1,swap:!1,precision:g,limits:k,info:u,active:void 0});return e.abrupt("return",s);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchContractMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p,v,m,g,y,b,x,k,w,_,S,O,T,C,I=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=I.length>0&&void 0!==I[0]?I[0]:{},e.next=3,this.publicContractGetContracts(t);case 3:for(r=e.sent,n=this.safeValue(r,"data",{}),a=this.safeValue(n,"contracts",[]),s=[],o=0;o<a.length;o++)u=a[o],c=this.safeValue(u,"contract",{}),d=this.safeString(c,"contract_id"),h=this.safeInteger(c,"contract_id"),l=this.safeString(c,"base_coin"),f=this.safeString(c,"quote_coin"),p=this.safeCurrencyCode(l),v=this.safeCurrencyCode(f),m=this.safeString(c,"name"),g=this.safeNumber(c,"vol_unit"),y=this.safeNumber(c,"price_unit"),b={amount:g,price:y},x={amount:{min:this.safeNumber(c,"min_vol"),max:this.safeNumber(c,"max_vol")},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0}},k=this.safeValue(c,"contract_type"),w=!1,_=!1,S="contract",1===k?(S="swap",_=!0):2===k&&(S="future",w=!0),O=this.safeValue(u,"fee_config",{}),T=this.safeNumber(O,"maker_fee"),C=this.safeNumber(O,"taker_fee"),s.push({id:d,numericId:h,symbol:m,base:p,quote:v,baseId:l,quoteId:f,maker:T,taker:C,type:S,spot:!1,future:w,swap:_,precision:b,limits:x,info:u,active:void 0});return e.abrupt("return",s);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>0&&void 0!==a[0]?a[0]:{},e.next=3,this.fetchSpotMarkets();case 3:return t=e.sent,e.next=6,this.fetchContractMarkets();case 6:return r=e.sent,n=this.arrayConcat(t,r),e.abrupt("return",n);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeTimestamp(e,"timestamp",this.milliseconds()),i=this.safeString2(e,"symbol","contract_id"),n=this.safeSymbol(i,t,"_"),a=this.safeNumber2(e,"close_24h","last_price"),s=this.safeNumber(e,"fluctuation","rise_fall_rate");void 0!==s&&(s*=100);var o=this.safeNumber2(e,"base_volume_24h","base_coin_volume"),u=this.safeNumber2(e,"quote_volume_24h","quote_coin_volume"),c=this.vwap(o,u),d=this.safeNumber2(e,"open_24h","open"),h=void 0;void 0!==a&&void 0!==d&&(h=this.sum(a,d)/2),h=this.safeNumber(e,"avg_price",h);var l=this.safeValue(e,"depth_price",e);return{symbol:n,timestamp:r,datetime:this.iso8601(r),high:this.safeNumber2(e,"high","high_24h"),low:this.safeNumber2(e,"low","low_24h"),bid:this.safeNumber(l,"best_bid","bid_price"),bidVolume:this.safeNumber(e,"best_bid_size"),ask:this.safeNumber(l,"best_ask","ask_price"),askVolume:this.safeNumber(e,"best_ask_size"),vwap:c,open:this.safeNumber(e,"open_24h"),close:a,last:a,previousClose:void 0,change:void 0,percentage:s,average:h,baseVolume:o,quoteVolume:u,info:e}}},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>1&&void 0!==l[1]?l[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={},s=void 0,n.swap||n.future?(s="publicContractGetTickers",a.contractID=n.id):n.spot&&(s="publicSpotGetTicker",a.symbol=n.id),e.next=9,this[s](this.extend(a,r));case 9:return o=e.sent,u=this.safeValue(o,"data",{}),c=this.safeValue(u,"tickers",[]),d=this.indexBy(c,"symbol"),h=this.safeValue(d,n.id),e.abrupt("return",this.parseTicker(h,n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.length>0&&void 0!==p[0]?p[0]:void 0,r=p.length>1&&void 0!==p[1]?p[1]:{},e.next=4,this.loadMarkets();case 4:return n=this.safeString(this.options,"defaultType","spot"),a=this.safeString(r,"type",n),r=this.omit(r,"type"),s=void 0,"swap"===a||"future"===a?s="publicContractGetTickers":"spot"===a&&(s="publicSpotGetTicker"),e.next=11,this[s](r);case 11:for(o=e.sent,u=this.safeValue(o,"data",{}),c=this.safeValue(u,"tickers",[]),d={},h=0;h<c.length;h++)l=this.parseTicker(c[h]),f=l.symbol,d[f]=l;return e.abrupt("return",this.filterByArray(d,"symbol",t));case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchCurrencies",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p,v=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=v.length>0&&void 0!==v[0]?v[0]:{},e.next=3,this.publicAccountGetCurrencies(t);case 3:for(r=e.sent,n=this.safeValue(r,"data",{}),a=this.safeValue(n,"currencies",[]),s={},o=0;o<a.length;o++)u=a[o],c=this.safeString(u,"currency"),d=this.safeCurrencyCode(c),h=this.safeString(u,"name"),l=this.safeValue(u,"withdraw_enabled"),f=this.safeValue(u,"deposit_enabled"),p=l&&f,s[d]={id:c,code:d,name:h,info:u,active:p,fee:void 0,precision:void 0,limits:{amount:{min:void 0,max:void 0},withdraw:{min:void 0,max:void 0}}};return e.abrupt("return",s);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:{},e.next=4,this.loadMarkets();case 4:return a=this.market(t),s={},o=void 0,a.spot?(o="publicSpotGetSymbolsBook",s.symbol=a.id):(a.swap||a.future)&&(o="publicContractGetDepth",s.contractID=a.id,void 0!==r&&(s.count=r)),e.next=10,this[o](this.extend(s,n));case 10:if(u=e.sent,c=this.safeValue(u,"data",{}),!a.spot){e.next=16;break}return e.abrupt("return",this.parseOrderBook(c,void 0,"buys","sells","price","amount"));case 16:if(!a.swap&&!a.future){e.next=18;break}return e.abrupt("return",this.parseOrderBook(c,void 0,"buys","sells","price","vol"));case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString2(e,"trade_id","detail_id"),i=this.safeInteger2(e,"order_time","create_time");void 0===i&&(i=this.parse8601(this.safeString(e,"created_at")));var n=void 0,a=this.safeInteger(e,"way"),s=this.safeStringLower2(e,"type","side");void 0===s&&void 0!==a&&(s=a<5?"buy":"sell");var o=void 0,u=this.safeString(e,"exec_type");void 0!==u&&(o="M"===u?"maker":"taker");var c=this.safeNumber2(e,"price","deal_price");c=this.safeNumber(e,"price_avg",c);var d=this.safeNumber2(e,"amount","deal_vol");d=this.safeNumber(e,"size",d);var h=this.safeNumber2(e,"count","notional");void 0===h&&void 0!==c&&void 0!==d&&(h=d*c);var l=this.safeInteger(e,"order_id"),f=this.safeString2(e,"contract_id","symbol"),p=this.safeSymbol(f,t,"_"),v=this.safeNumber(e,"fees"),m=void 0;if(void 0!==v){var g=this.safeString(e,"fee_coin_name"),y=this.safeCurrencyCode(g);void 0===y&&void 0!==t&&(y="buy"===s?t.base:t.quote),m={cost:v,currency:y}}return{info:e,id:r,order:l,timestamp:i,datetime:this.iso8601(i),symbol:p,type:n,side:s,price:c,amount:d,cost:h,takerOrMaker:o,fee:m}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>1&&void 0!==l[1]?l[1]:void 0,n=l.length>2&&void 0!==l[2]?l[2]:void 0,a=l.length>3&&void 0!==l[3]?l[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={symbol:s.id},u=void 0,s.spot?(o.symbol=s.id,u="publicSpotGetSymbolsTrades"):(s.swap||s.future)&&(u="publicContractGetTrades",o.contractID=s.id),e.next=11,this[u](this.extend(o,a));case 11:return c=e.sent,d=this.safeValue(c,"data",{}),h=this.safeValue(d,"trades",[]),e.abrupt("return",this.parseTrades(h,s,r,n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){return[this.safeTimestamp(e,"timestamp"),this.safeNumber(e,"open"),this.safeNumber(e,"high"),this.safeNumber(e,"low"),this.safeNumber(e,"close"),this.safeNumber(e,"volume")]}},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d,h,l,f,p,v,m,g,y,b,x,k,w,_,S,O=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=O.length>1&&void 0!==O[1]?O[1]:"1m",n=O.length>2&&void 0!==O[2]?O[2]:void 0,a=O.length>3&&void 0!==O[3]?O[3]:void 0,s=O.length>4&&void 0!==O[4]?O[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),u=o.type,c=void 0,d={},h=this.parseTimeframe(r),"spot"===u?(c="publicSpotGetSymbolsKline",d.symbol=o.id,d.step=this.timeframes[r],l=500,void 0===a&&(a=l),a=Math.min(l,a),void 0===n?(f=parseInt(this.milliseconds()/1e3),p=f-a*h,d.from=p,d.to=f):(v=parseInt(n/1e3),m=this.sum(v,a*h),d.from=v,d.to=m)):"swap"!==u&&"future"!==u||(c="publicContractGetQuote",d.contractID=o.id,g=500,void 0===a&&(a=g),void 0===n?(y=parseInt(this.milliseconds()/1e3),b=y-a*h,d.startTime=b,d.endTime=y):(x=parseInt(n/1e3),k=this.sum(x,a*h),d.startTime=x,d.endTime=k),d.unit=this.timeframes[r],d.resolution="M"),e.next=14,this[c](this.extend(d,s));case 14:if(w=e.sent,_=this.safeValue(w,"data",{}),!Array.isArray(_)){e.next=20;break}return e.abrupt("return",this.parseOHLCVs(_,o,r,n,a));case 20:return S=this.safeValue(_,"klines",[]),e.abrupt("return",this.parseOHLCVs(S,o,r,n,a));case 22:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=l.length>0&&void 0!==l[0]?l[0]:void 0,r=l.length>1&&void 0!==l[1]?l[1]:void 0,n=l.length>2&&void 0!==l[2]?l[2]:void 0,a=l.length>3&&void 0!==l[3]?l[3]:{},void 0!==t){e.next=6;break}throw new x(this.id+" fetchMyTrades() requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.market(t),o=void 0,u={},s.spot?(u.symbol=s.id,u.offset=1,void 0===n&&(n=100),u.limit=n,o="privateSpotGetTrades"):(s.swap||s.future)&&(u.contractID=s.id,void 0!==n&&(u.size=n),o="privateContractGetUserTrades"),e.next=14,this[o](this.extend(u,a));case 14:return c=e.sent,d=this.safeValue(c,"data",{}),h=this.safeValue(d,"trades",[]),e.abrupt("return",this.parseTrades(h,s,r,n));case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=f.length>1&&void 0!==f[1]?f[1]:void 0,n=f.length>2&&void 0!==f[2]?f[2]:void 0,a=f.length>3&&void 0!==f[3]?f[3]:void 0,s=f.length>4&&void 0!==f[4]?f[4]:{},void 0!==r){e.next=6;break}throw new x(this.id+" fetchOrderTrades() requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return o=this.market(r),u=void 0,c={},o.spot?(c.symbol=o.id,c.order_id=t,u="privateSpotGetTrades"):(o.swap||o.future)&&(c.contractID=o.id,c.orderID=t,u="privateContractGetOrderTrades"),e.next=14,this[u](this.extend(c,s));case 14:return d=e.sent,h=this.safeValue(d,"data",{}),l=this.safeValue(h,"trades",[]),e.abrupt("return",this.parseTrades(l,o,n,a));case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p,v,m=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=m.length>0&&void 0!==m[0]?m[0]:{},e.next=3,this.loadMarkets();case 3:return r=void 0,n=this.safeValue(this.options,"fetchBalance",{}),a=this.safeString(this.options,"defaultType","spot"),s=this.safeString(n,"type",a),s=this.safeString(t,"type",s),t=this.omit(t,"type"),"spot"===s?r="privateSpotGetWallet":"account"===s?r="privateAccountGetWallet":"swap"!==s&&"future"!==s&&"contract"!==s||(r="privateContractGetAccounts"),e.next=12,this[r](t);case 12:for(o=e.sent,u=this.safeValue(o,"data",{}),c=this.safeValue2(u,"wallet","accounts",[]),d={info:o},h=0;h<c.length;h++)l=c[h],f=this.safeString2(l,"id","currency"),f=this.safeString(l,"coind_code",f),p=this.safeCurrencyCode(f),(v=this.account()).free=this.safeString2(l,"available","available_vol"),v.used=this.safeString2(l,"frozen","freeze_vol"),d[p]=v;return e.abrupt("return",this.parseBalance(d,!1));case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0;"string"===typeof e&&(r=e,e={}),r=this.safeString(e,"order_id",r);var i=this.parse8601(this.safeString(e,"created_at"));i=this.safeInteger(e,"create_time",i);var n=this.safeString2(e,"symbol","contract_id"),a=this.safeSymbol(n,t,"_"),s=void 0;void 0!==t&&(s=this.parseOrderStatusByType(t.type,this.safeString(e,"status")));var o=this.safeNumber(e,"price"),u=this.safeNumber2(e,"price_avg","done_avg_price"),c=this.safeNumber2(e,"size","vol"),d=this.safeNumber2(e,"filled_size","done_vol"),h=this.safeString(e,"side");h=this.safeString(e,"way",h);var l=this.safeInteger(e,"category"),f=this.safeString(e,"type");return 1===l?f="limit":2===l&&(f="market"),"market"===f&&(0===o&&(o=void 0),0===u&&(u=void 0)),this.safeOrder({id:r,clientOrderId:void 0,info:e,timestamp:i,datetime:this.iso8601(i),lastTradeTimestamp:void 0,symbol:a,type:f,timeInForce:void 0,postOnly:void 0,side:h,price:o,stopPrice:void 0,amount:c,cost:void 0,average:u,filled:d,remaining:void 0,status:s,fee:void 0,trades:void 0})}},{key:"parseOrderStatusByType",value:function(e,t){var r=this.safeValue({spot:{1:"failed",2:"open",3:"failed",4:"open",5:"open",6:"closed",7:"canceling",8:"canceled"},swap:{1:"open",2:"open",4:"closed"}},e,{});return this.safeString(r,t,t)}},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,u,c,d,h,l,f,p,v=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=v.length>4&&void 0!==v[4]?v[4]:void 0,o=v.length>5&&void 0!==v[5]?v[5]:{},e.next=4,this.loadMarkets();case 4:if(u=this.market(t),c={},d=void 0,!u.spot){e.next=38;break}if(c.symbol=u.id,c.side=n,c.type=r,d="privateSpotPostSubmitOrder","limit"!==r){e.next=17;break}c.size=this.amountToPrecision(t,a),c.price=this.priceToPrecision(t,s),e.next=36;break;case 17:if("market"!==r){e.next=36;break}if("buy"!==n){e.next=35;break}if(h=this.safeNumber(o,"notional"),!this.safeValue(this.options,"createMarketBuyOrderRequiresPrice",!0)){e.next=30;break}if(void 0===s){e.next=26;break}void 0===h&&(h=a*s),e.next=28;break;case 26:if(void 0!==h){e.next=28;break}throw new w(this.id+" createOrder() requires the price argument with market buy orders to calculate total order cost (amount to spend), where cost = amount * price. Supply a price argument to createOrder() call if you want the cost to be calculated for you from price and amount, or, alternatively, add .options['createMarketBuyOrderRequiresPrice'] = false and supply the total cost value in the 'amount' argument or in the 'notional' extra parameter (the exchange-specific behaviour)");case 28:e.next=31;break;case 30:h=void 0===h?a:h;case 31:l=u.precision.price,c.notional=this.decimalToPrecision(h,E,l,this.precisionMode),e.next=36;break;case 35:"sell"===n&&(c.size=this.amountToPrecision(t,a));case 36:e.next=39;break;case 38:(u.swap||u.future)&&(d="privateContractPostSubmitOrder",c.contractID=u.id,"limit"===r?c.category=1:"market"===r&&(c.category=2),c.way=n,c.custom_id=this.nonce(),c.open_type=1,c.leverage=1,c.price=this.priceToPrecision(t,s),c.vol=this.amountToPrecision(t,a));case 39:return e.next=41,this[d](this.extend(c,o));case 41:return f=e.sent,p=this.safeValue(f,"data",{}),e.abrupt("return",this.parseOrder(p,u));case 44:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=l.length>1&&void 0!==l[1]?l[1]:void 0,n=l.length>2&&void 0!==l[2]?l[2]:{},void 0!==r){e.next=4;break}throw new x(this.id+" cancelOrder() requires a symbol argument");case 4:return e.next=6,this.loadMarkets();case 6:return a=this.market(r),s={},o=void 0,a.spot?(o="privateSpotPostCancelOrder",s.order_id=parseInt(t),s.symbol=a.id):(a.swap||a.future)&&(o="privateContractPostCancelOrders",s.contractID=a.id,s.orders=[parseInt(t)]),e.next=12,this[o](this.extend(s,n));case 12:if(u=e.sent,!0!==(c=this.safeValue(u,"data"))){e.next=16;break}return e.abrupt("return",this.parseOrder(t,a));case 16:if(void 0===(d=this.safeValue(c,"succeed"))){e.next=23;break}if(void 0!==(t=this.safeString(d,0))){e.next=21;break}throw new w(this.id+" cancelOrder() failed to cancel "+r+" order id "+t);case 21:e.next=26;break;case 23:if(this.safeValue(c,"result")){e.next=26;break}throw new w(this.id+" cancelOrder() "+r+" order id "+t+" is filled or canceled");case 26:return h=this.parseOrder(t,a),e.abrupt("return",this.extend(h,{id:t}));case 28:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cancelAllOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:{},void 0!==t){e.next=4;break}throw new x(this.id+" cancelAllOrders() requires a symbol argument");case 4:if(void 0!==(n=this.safeString(r,"side"))){e.next=7;break}throw new x(this.id+" cancelAllOrders() requires a `side` parameter ('buy' or 'sell')");case 7:return e.next=9,this.loadMarkets();case 9:if((a=this.market(t)).spot){e.next=12;break}throw new C(this.id+" cancelAllOrders() does not support "+a.type+" orders, only spot orders are accepted");case 12:return s={symbol:a.id,side:n},e.next=15,this.privateSpotPostCancelOrders(this.extend(s,r));case 15:return o=e.sent,e.abrupt("return",o);case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"cancelOrders",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:{},void 0!==r){e.next=4;break}throw new x(this.id+" canelOrders() requires a symbol argument");case 4:return e.next=6,this.loadMarkets();case 6:if((a=this.market(r)).spot){e.next=9;break}throw new C(this.id+" cancelOrders() does not support "+a.type+" orders, only contract orders are accepted");case 9:for(s=[],o=0;o<t.length;o++)s.push(parseInt(t[o]));return u={orders:s},e.next=14,this.privateContractPostCancelOrders(this.extend(u,n));case 14:return c=e.sent,e.abrupt("return",c);case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrdersByStatus",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=f.length>1&&void 0!==f[1]?f[1]:void 0,n=f.length>2&&void 0!==f[2]?f[2]:void 0,a=f.length>3&&void 0!==f[3]?f[3]:void 0,s=f.length>4&&void 0!==f[4]?f[4]:{},void 0!==r){e.next=6;break}throw new x(this.id+" fetchOrdersByStatus() requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return o=this.market(r),u={},c=void 0,o.spot?(c="privateSpotGetOrders",u.symbol=o.id,u.offset=1,u.limit=100,u.status="open"===t?9:"closed"===t?6:t):(o.swap||o.future)&&(c="privateContractGetUserOrders",u.contractID=o.id,void 0!==a&&(u.size=a),u.status="open"===t?3:"closed"===t?4:t),e.next=14,this[c](this.extend(u,s));case 14:return d=e.sent,h=this.safeValue(d,"data",{}),l=this.safeValue(h,"orders",[]),e.abrupt("return",this.parseOrders(l,o,n,a));case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:void 0,n=s.length>2&&void 0!==s[2]?s[2]:void 0,a=s.length>3&&void 0!==s[3]?s[3]:{},e.next=6,this.fetchOrdersByStatus("open",t,r,n,a);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:void 0,n=s.length>2&&void 0!==s[2]?s[2]:void 0,a=s.length>3&&void 0!==s[3]?s[3]:{},e.next=6,this.fetchOrdersByStatus("closed",t,r,n,a);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:void 0,a=o.length>3&&void 0!==o[3]?o[3]:{},void 0!==t){e.next=6;break}throw new x(this.id+" fetchOrders() requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:if((s=this.market(t)).swap||s.future){e.next=11;break}throw new C(this.id+" fetchOrders does not support "+s.type+" markets, only contracts are supported");case 11:return e.next=13,this.fetchOrdersByStatus(0,t,r,n,a);case 13:return e.abrupt("return",e.sent);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=l.length>1&&void 0!==l[1]?l[1]:void 0,n=l.length>2&&void 0!==l[2]?l[2]:{},void 0!==r){e.next=4;break}throw new x(this.id+" fetchOrder() requires a symbol argument");case 4:return e.next=6,this.loadMarkets();case 6:return a={},s=this.market(r),o=void 0,"string"!==typeof t&&(t=t.toString()),s.spot?(a.symbol=s.id,a.order_id=t,o="privateSpotGetOrderDetail"):(s.swap||s.future)&&(a.contractID=s.id,a.orderID=t,o="privateContractGetUserOrderInfo"),e.next=13,this[o](this.extend(a,n));case 13:if(u=e.sent,!("orders"in(c=this.safeValue(u,"data")))){e.next=23;break}if(d=this.safeValue(c,"orders",[]),void 0!==(h=this.safeValue(d,0))){e.next=20;break}throw new O(this.id+" fetchOrder() could not find "+r+" order id "+t);case 20:return e.abrupt("return",this.parseOrder(h,s));case 23:return e.abrupt("return",this.parseOrder(c,s));case 24:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchDepositAddress",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.currency(t),a={currency:n.id},e.next=7,this.privateAccountGetDepositAddress(this.extend(a,r));case 7:return s=e.sent,o=this.safeValue(s,"data",{}),u=this.safeString(o,"address"),c=this.safeString(o,"address_memo"),this.checkAddress(u),e.abrupt("return",{currency:t,address:u,tag:c,info:s});case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"withdraw",value:function(){var e=n(i.mark((function e(t,r,n){var a,s,o,u,c,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=l.length>3&&void 0!==l[3]?l[3]:void 0,s=l.length>4&&void 0!==l[4]?l[4]:{},this.checkAddress(n),e.next=5,this.loadMarkets();case 5:return o=this.currency(t),u={currency:o.id,amount:r,destination:"To Digital Address",address:n},void 0!==a&&(u.address_memo=a),e.next=10,this.privateAccountPostWithdrawApply(this.extend(u,s));case 10:return c=e.sent,d=this.safeValue(c,"data"),h=this.parseTransaction(d,o),e.abrupt("return",this.extend(h,{code:t,address:n,tag:a}));case 14:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"fetchTransactionsByType",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>1&&void 0!==l[1]?l[1]:void 0,n=l.length>2&&void 0!==l[2]?l[2]:void 0,a=l.length>3&&void 0!==l[3]?l[3]:void 0,s=l.length>4&&void 0!==l[4]?l[4]:{},e.next=6,this.loadMarkets();case 6:return void 0===a&&(a=50),o={operation_type:t,offset:1,limit:a},u=void 0,void 0!==r&&(u=this.currenc(r),o.currency=u.id),e.next=12,this.privateAccountGetDepositWithdrawHistory(this.extend(o,s));case 12:return c=e.sent,d=this.safeValue(c,"data",{}),h=this.safeValue(d,"records",[]),e.abrupt("return",this.parseTransactions(h,u,n,a));case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchDeposits",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:void 0,n=s.length>2&&void 0!==s[2]?s[2]:void 0,a=s.length>3&&void 0!==s[3]?s[3]:{},e.next=6,this.fetchTransactionsByType("deposit",t,r,n,a);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchWithdrawals",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:void 0,n=s.length>2&&void 0!==s[2]?s[2]:void 0,a=s.length>3&&void 0!==s[3]?s[3]:{},e.next=6,this.fetchTransactionsByType("withdraw",t,r,n,a);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTransactionStatus",value:function(e){return this.safeString({0:"pending",1:"pending",2:"pending",3:"ok",4:"canceled",5:"failed"},e,e)}},{key:"parseTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0,i=this.safeString(e,"withdraw_id"),n=this.safeString(e,"deposit_id"),a=void 0;void 0!==i&&""!==i?(a="withdraw",r=i):void 0!==n&&""!==n&&(a="deposit",r=n);var s=this.safeNumber(e,"arrival_amount"),o=this.safeInteger(e,"tapply_timeime"),u=this.safeString(e,"currency"),c=this.safeCurrencyCode(u,t),d=this.parseTransactionStatus(this.safeString(e,"status")),h=this.safeNumber(e,"fee"),l=void 0;void 0!==h&&(l={cost:h,currency:c});var f=this.safeString(e,"tx_id");""===f&&(f=void 0);var p=this.safeString(e,"address"),v=this.safeString(e,"address_memo");return{info:e,id:r,currency:c,amount:s,address:p,addressFrom:void 0,addressTo:void 0,tag:v,tagFrom:void 0,tagTo:void 0,status:d,type:a,updated:void 0,txid:f,timestamp:o,datetime:this.iso8601(o),fee:l}}},{key:"nonce",value:function(){return this.milliseconds()}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.implodeParams(this.urls.api,{hostname:this.hostname}),o=this.safeString(t,0),u=this.safeString(t,1),c=s+"/"+u;"system"!==u&&(c+="/"+this.version),"contract"===u&&(c+="/ifcontract"),c+="/"+this.implodeParams(e,i);var d=this.omit(i,this.extractParams(e));if("system"===u)Object.keys(d).length&&(c+="?"+this.urlencode(d));else if("public"===o)Object.keys(d).length&&(c+="?"+this.urlencode(d));else if("private"===o){this.checkRequiredCredentials();var h=this.milliseconds().toString(),l="";n={"X-BM-KEY":this.apiKey,"X-BM-TIMESTAMP":h},"POST"===r||"PUT"===r?(n["Content-Type"]="application/json",l=a=this.json(d)):Object.keys(d).length&&(c+="?"+(l=this.urlencode(d)));var f=h+"#"+this.uid+"#"+l,p=this.hmac(this.encode(f),this.encode(this.secret));n["X-BM-SIGN"]=p}return{url:c,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,u){if(void 0!==s){var c=this.safeString(s,"message"),d=this.safeString(s,"code");if(void 0!==d&&"1000"!==d||void 0!==c&&"OK"!==c){var h=this.id+" "+a;throw this.throwExactlyMatchedException(this.exceptions.exact,d,h),this.throwBroadlyMatchedException(this.exceptions.broad,d,h),this.throwExactlyMatchedException(this.exceptions.exact,c,h),this.throwBroadlyMatchedException(this.exceptions.broad,c,h),new k(h)}}}}]),r}(h)},function(e,t,r){"use strict";var i=r(7),n=r(8),a=r(1),s=r(2),o=r(6),u=r(3),c=r(4),d=r(5),h=r(11),l=r(18).TICK_SIZE,f=r(10),p=f.AuthenticationError,v=f.BadRequest,m=f.DDoSProtection,g=f.ExchangeError,y=f.ExchangeNotAvailable,b=f.InsufficientFunds,x=f.InvalidOrder,k=f.OrderNotFound,w=f.PermissionDenied,_=f.ArgumentsRequired,S=r(12);e.exports=function(e){c(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(u(r.prototype),"describe",this).call(this),{id:"bitmex",name:"BitMEX",countries:["SC"],version:"v1",userAgent:void 0,rateLimit:2e3,pro:!0,has:{cancelAllOrders:!0,cancelOrder:!0,CORS:!1,createOrder:!0,editOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchLedger:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,fetchTransactions:"emulated",withdraw:!0},timeframes:{"1m":"1m","5m":"5m","1h":"1h","1d":"1d"},urls:{test:{public:"https://testnet.bitmex.com",private:"https://testnet.bitmex.com"},logo:"https://user-images.githubusercontent.com/1294454/27766319-f653c6e6-5ed4-11e7-933d-f0bc3699ae8f.jpg",api:{public:"https://www.bitmex.com",private:"https://www.bitmex.com"},www:"https://www.bitmex.com",doc:["https://www.bitmex.com/app/apiOverview","https://github.com/BitMEX/api-connectors/tree/master/official-http"],fees:"https://www.bitmex.com/app/fees",referral:"https://www.bitmex.com/register/upZpOX"},api:{public:{get:["announcement","announcement/urgent","funding","instrument","instrument/active","instrument/activeAndIndices","instrument/activeIntervals","instrument/compositeIndex","instrument/indices","insurance","leaderboard","liquidation","orderBook","orderBook/L2","quote","quote/bucketed","schema","schema/websocketHelp","settlement","stats","stats/history","trade","trade/bucketed"]},private:{get:["apiKey","chat","chat/channels","chat/connected","execution","execution/tradeHistory","notification","order","position","user","user/affiliateStatus","user/checkReferralCode","user/commission","user/depositAddress","user/executionHistory","user/margin","user/minWithdrawalFee","user/wallet","user/walletHistory","user/walletSummary"],post:["apiKey","apiKey/disable","apiKey/enable","chat","order","order/bulk","order/cancelAllAfter","order/closePosition","position/isolate","position/leverage","position/riskLimit","position/transferMargin","user/cancelWithdrawal","user/confirmEmail","user/confirmEnableTFA","user/confirmWithdrawal","user/disableTFA","user/logout","user/logoutAll","user/preferences","user/requestEnableTFA","user/requestWithdrawal"],put:["order","order/bulk","user"],delete:["apiKey","order","order/all"]}},exceptions:{exact:{"Invalid API Key.":p,"This key is disabled.":w,"Access Denied":w,"Duplicate clOrdID":x,"orderQty is invalid":x,"Invalid price":x,"Invalid stopPx for ordType":x},broad:{"Signature not valid":p,overloaded:y,"Account has insufficient Available Balance":b,"Service unavailable":y,"Server Error":g,"Unable to cancel order due to existing state":x}},precisionMode:l,options:{"api-expires":5,fetchOHLCVOpenTimestamp:!0}})}},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p,v,m,g,y,b,x,k,w,_,S,O=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=O.length>0&&void 0!==O[0]?O[0]:{},e.next=3,this.publicGetInstrumentActiveAndIndices(t);case 3:for(r=e.sent,n=[],a=0;a<r.length;a++)s=r[a],o="Unlisted"!==s.state,u=s.symbol,c=s.underlying,d=s.quoteCurrency,h=c+d,l=this.safeCurrencyCode(c),f=this.safeCurrencyCode(d),p=u===h,v=this.safeString2(s,"positionCurrency","quoteCurrency"),m=void 0,g=!1,y=!1,b=this.safeCurrencyCode(v),x=u,p?(m="swap",x=l+"/"+f):u.indexOf("B_")>=0?(y=!0,m="prediction"):(g=!0,m="future"),k={amount:void 0,price:void 0},w=this.safeNumber(s,"lotSize"),_=this.safeNumber(s,"tickSize"),void 0!==w&&(k.amount=w),void 0!==_&&(k.price=_),(S={amount:{min:void 0,max:void 0},price:{min:_,max:this.safeNumber(s,"maxPrice")},cost:{min:void 0,max:void 0}})[b===f?"cost":"amount"]={min:w,max:this.safeNumber(s,"maxOrderQty")},n.push({id:u,symbol:x,base:l,quote:f,baseId:c,quoteId:d,active:o,precision:k,limits:S,taker:this.safeNumber(s,"takerFee"),maker:this.safeNumber(s,"makerFee"),type:m,spot:!1,swap:p,future:g,prediction:y,info:s});return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseBalanceResponse",value:function(e){for(var t={info:e},r=0;r<e.length;r++){var i=e[r],n=this.safeString(i,"currency"),a=this.safeCurrencyCode(n),s=this.account(),o=this.safeString(i,"availableMargin"),u=this.safeString(i,"marginBalance");"BTC"===a&&(o=S.stringDiv(o,"1e8"),u=S.stringDiv(u,"1e8")),s.free=o,s.total=u,t[a]=s}return this.parseBalance(t,!1)}},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},e.next=3,this.loadMarkets();case 3:return r={currency:"all"},e.next=6,this.privateGetUserMargin(this.extend(r,t));case 6:return n=e.sent,e.abrupt("return",this.parseBalanceResponse(n));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=p.length>1&&void 0!==p[1]?p[1]:void 0,n=p.length>2&&void 0!==p[2]?p[2]:{},e.next=4,this.loadMarkets();case 4:return a=this.market(t),s={symbol:a.id},void 0!==r&&(s.depth=r),e.next=9,this.publicGetOrderBookL2(this.extend(s,n));case 9:for(o=e.sent,u={bids:[],asks:[],timestamp:void 0,datetime:void 0,nonce:void 0},c=0;c<o.length;c++)d=o[c],h="Sell"===d.side?"asks":"bids",l=this.safeNumber(d,"size"),void 0!==(f=this.safeNumber(d,"price"))&&u[h].push([f,l]);return u.bids=this.sortBy(u.bids,0,!0),u.asks=this.sortBy(u.asks,0),e.abrupt("return",u);case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:{},a={filter:{orderID:t}},e.next=5,this.fetchOrders(r,void 0,void 0,this.deepExtend(a,n));case 5:if(s=e.sent,1!==s.length){e.next=9;break}return e.abrupt("return",s[0]);case 9:throw new k(this.id+": The order "+t+" not found.");case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:void 0,r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},e.next=6,this.loadMarkets();case 6:return s=void 0,o={},void 0!==t&&(s=this.market(t),o.symbol=s.id),void 0!==r&&(o.startTime=this.iso8601(r)),void 0!==n&&(o.count=n),"filter"in(o=this.deepExtend(o,a))&&(o.filter=this.json(o.filter)),e.next=15,this.privateGetOrder(o);case 15:return u=e.sent,e.abrupt("return",this.parseOrders(u,s,r,n));case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:void 0,a=o.length>3&&void 0!==o[3]?o[3]:{},s={filter:{open:!0}},e.next=7,this.fetchOrders(t,r,n,this.deepExtend(s,a));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:void 0,a=o.length>3&&void 0!==o[3]?o[3]:{},e.next=6,this.fetchOrders(t,r,n,a);case 6:return s=e.sent,e.abrupt("return",this.filterBy(s,"status","closed"));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:void 0,r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},e.next=6,this.loadMarkets();case 6:return s=void 0,o={},void 0!==t&&(s=this.market(t),o.symbol=s.id),void 0!==r&&(o.startTime=this.iso8601(r)),void 0!==n&&(o.count=n),"filter"in(o=this.deepExtend(o,a))&&(o.filter=this.json(o.filter)),e.next=15,this.privateGetExecutionTradeHistory(o);case 15:return u=e.sent,e.abrupt("return",this.parseTrades(u,s,r,n));case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseLedgerEntryType",value:function(e){return this.safeString({Withdrawal:"transaction",RealisedPNL:"margin",UnrealisedPNL:"margin",Deposit:"transaction",Transfer:"transfer",AffiliatePayout:"referral"},e,e)}},{key:"parseLedgerEntry",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"transactID"),i=this.safeString(e,"account"),n=this.safeString(e,"tx"),a=void 0,s=this.parseLedgerEntryType(this.safeString(e,"transactType")),o=this.safeString(e,"currency"),u=this.safeCurrencyCode(o,t),c=this.safeNumber(e,"amount");void 0!==c&&(c/=1e8);var d=this.parse8601(this.safeString(e,"transactTime"));void 0===d&&(d=0);var h=this.safeNumber(e,"fee",0);void 0!==h&&(h/=1e8);var l={cost:h,currency:u},f=this.safeNumber(e,"walletBalance");void 0!==f&&(f/=1e8);var p=this.sum(f,-c),v=void 0;c<0?(v="out",c=Math.abs(c)):v="in";var m=this.parseTransactionStatus(this.safeString(e,"transactStatus"));return{id:r,info:e,timestamp:d,datetime:this.iso8601(d),direction:v,account:i,referenceId:n,referenceAccount:a,type:s,currency:u,amount:c,before:p,after:f,status:m,fee:l}}},{key:"fetchLedger",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:void 0,r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},e.next=6,this.loadMarkets();case 6:return s=void 0,void 0!==t&&(s=this.currency(t)),o={},void 0!==n&&(o.count=n),e.next=12,this.privateGetUserWalletHistory(this.extend(o,a));case 12:return u=e.sent,e.abrupt("return",this.parseLedger(u,s,r,n));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTransactions",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return s={},void 0!==n&&(s.count=n),e.next=10,this.privateGetUserWalletHistory(this.extend(s,a));case 10:return o=e.sent,u=this.filterByArray(o,"transactType",["Withdrawal","Deposit"],!1),c=void 0,void 0!==t&&(c=this.currency(t)),e.abrupt("return",this.parseTransactions(u,c,r,n));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTransactionStatus",value:function(e){return this.safeString({Canceled:"canceled",Completed:"ok",Pending:"pending"},e,e)}},{key:"parseTransaction",value:function(e){var t=this.safeString(e,"transactID"),r=this.parse8601(this.safeString(e,"transactTime")),i=this.parse8601(this.safeString(e,"timestamp")),n=this.safeStringLower(e,"transactType"),a=void 0,s=void 0,o=void 0;"withdrawal"===n&&(a=this.safeString(e,"address"),s=this.safeString(e,"tx"),o=a);var u=this.safeInteger(e,"amount");void 0!==u&&(u=Math.abs(u)/1e7);var c=this.safeInteger(e,"fee");void 0!==c&&(c/=1e7);var d={cost:c,currency:"BTC"},h=this.safeString(e,"transactStatus");return void 0!==h&&(h=this.parseTransactionStatus(h)),{info:e,id:t,txid:void 0,timestamp:r,datetime:this.iso8601(r),addressFrom:s,address:a,addressTo:o,tagFrom:void 0,tag:void 0,tagTo:void 0,type:n,amount:u,currency:"BTC",status:h,updated:i,comment:void 0,fee:d}}},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>1&&void 0!==s[1]?s[1]:{},e.next=3,this.loadMarkets();case 3:if(this.market(t).active){e.next=6;break}throw new g(this.id+": symbol "+t+" is delisted");case 6:return e.next=8,this.fetchTickers([t],r);case 8:if(n=e.sent,void 0!==(a=this.safeValue(n,t))){e.next=12;break}throw new g(this.id+" ticker symbol "+t+" not found");case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:void 0,r=c.length>1&&void 0!==c[1]?c[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetInstrumentActiveAndIndices(r);case 6:for(n=e.sent,a={},s=0;s<n.length;s++)o=this.parseTicker(n[s]),void 0!==(u=this.safeString(o,"symbol"))&&(a[u]=o);return e.abrupt("return",this.filterByArray(a,"symbol",t));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0,i=this.safeString(e,"symbol");void 0!==(t=this.safeValue(this.markets_by_id,i,t))&&(r=t.symbol);var n=this.parse8601(this.safeString(e,"timestamp")),a=this.safeNumber(e,"prevPrice24h"),s=this.safeNumber(e,"lastPrice"),o=void 0,u=void 0;return void 0!==s&&void 0!==a&&(o=s-a,a>0&&(u=o/a*100)),{symbol:r,timestamp:n,datetime:this.iso8601(n),high:this.safeNumber(e,"highPrice"),low:this.safeNumber(e,"lowPrice"),bid:this.safeNumber(e,"bidPrice"),bidVolume:void 0,ask:this.safeNumber(e,"askPrice"),askVolume:void 0,vwap:this.safeNumber(e,"vwap"),open:a,close:s,last:s,previousClose:void 0,change:o,percentage:u,average:this.sum(a,s)/2,baseVolume:this.safeNumber(e,"homeNotional24h"),quoteVolume:this.safeNumber(e,"foreignNotional24h"),info:e}}},{key:"parseOHLCV",value:function(e){return[this.parse8601(this.safeString(e,"timestamp")),this.safeNumber(e,"open"),this.safeNumber(e,"high"),this.safeNumber(e,"low"),this.safeNumber(e,"close"),this.safeNumber(e,"volume")]}},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d,h,l,f,p,v,m=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=m.length>1&&void 0!==m[1]?m[1]:"1m",n=m.length>2&&void 0!==m[2]?m[2]:void 0,a=m.length>3&&void 0!==m[3]?m[3]:void 0,s=m.length>4&&void 0!==m[4]?m[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),u={symbol:o.id,binSize:this.timeframes[r],partial:!0},void 0!==a&&(u.count=a),c=1e3*this.parseTimeframe(r),d=this.safeValue(this.options,"fetchOHLCVOpenTimestamp",!0),void 0!==n?(h=n,d&&(h=this.sum(h,c)),l=this.ymdhms(h),u.startTime=l):u.reverse=!0,e.next=14,this.publicGetTradeBucketed(this.extend(u,s));case 14:if(f=e.sent,p=this.parseOHLCVs(f,o,r,n,a),d)for(v=0;v<p.length;v++)p[v][0]=p[v][0]-c;return e.abrupt("return",p);case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.parse8601(this.safeString(e,"timestamp")),i=this.safeNumber2(e,"avgPx","price"),n=this.safeNumber2(e,"size","lastQty"),a=this.safeString(e,"trdMatchID"),s=this.safeString(e,"orderID"),o=this.safeStringLower(e,"side"),u=this.safeNumber(e,"execCost");void 0!==u&&(u=Math.abs(u)/1e8);var c=void 0;if("execComm"in e){var d=this.safeNumber(e,"execComm");d/=1e8;var h=this.safeString(e,"settlCurrency"),l=this.safeCurrencyCode(h),f=this.safeNumber(e,"commission");c={cost:d,currency:l,rate:f}}var p=void 0;void 0!==c&&(p=c.cost<0?"maker":"taker");var v=this.safeString(e,"symbol"),m=this.safeSymbol(v,t),g=this.safeStringLower(e,"ordType");return{info:e,timestamp:r,datetime:this.iso8601(r),symbol:m,id:a,order:s,type:g,takerOrMaker:p,side:o,price:i,cost:u,amount:n,fee:c}}},{key:"parseOrderStatus",value:function(e){return this.safeString({New:"open",PartiallyFilled:"open",Filled:"closed",DoneForDay:"open",Canceled:"canceled",PendingCancel:"open",PendingNew:"open",Rejected:"rejected",Expired:"expired",Stopped:"open",Untriggered:"open",Triggered:"open"},e,e)}},{key:"parseTimeInForce",value:function(e){return this.safeString({Day:"Day",GoodTillCancel:"GTC",ImmediateOrCancel:"IOC",FillOrKill:"FOK"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.parseOrderStatus(this.safeString(e,"ordStatus")),i=this.safeString(e,"symbol"),n=this.safeSymbol(i,t),a=this.parse8601(this.safeString(e,"timestamp")),s=this.parse8601(this.safeString(e,"transactTime")),o=this.safeNumber(e,"price"),u=this.safeNumber(e,"orderQty"),c=this.safeNumber(e,"cumQty",0),d=this.safeNumber(e,"avgPx"),h=this.safeString(e,"orderID"),l=this.safeStringLower(e,"ordType"),f=this.safeStringLower(e,"side"),p=this.safeString(e,"clOrdID"),v=this.parseTimeInForce(this.safeString(e,"timeInForce")),m=this.safeNumber(e,"stopPx"),g=this.safeString(e,"execInst"),y="ParticipateDoNotInitiate"===g;return this.safeOrder({info:e,id:h,clientOrderId:p,timestamp:a,datetime:this.iso8601(a),lastTradeTimestamp:s,symbol:n,type:l,timeInForce:v,postOnly:y,side:f,price:o,stopPrice:m,amount:u,cost:void 0,average:d,filled:c,remaining:void 0,status:r,fee:void 0,trades:void 0})}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={symbol:s.id},void 0!==r?o.startTime=this.iso8601(r):o.reverse=!0,void 0!==n&&(o.count=n),e.next=11,this.publicGetTrade(this.extend(o,a));case 11:return u=e.sent,e.abrupt("return",this.parseTrades(u,s,r,n));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,u,c,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=p.length>4&&void 0!==p[4]?p[4]:void 0,o=p.length>5&&void 0!==p[5]?p[5]:{},e.next=4,this.loadMarkets();case 4:if(u=this.market(t),c=this.capitalize(r),d={symbol:u.id,side:this.capitalize(n),orderQty:parseFloat(this.amountToPrecision(t,a)),ordType:c},"Stop"!==c&&"StopLimit"!==c&&"MarketIfTouched"!==c&&"LimitIfTouched"!==c){e.next=15;break}if(void 0!==(h=this.safeNumber2(o,"stopPx","stopPrice"))){e.next=13;break}throw new _(this.id+" createOrder() requires a stopPx or stopPrice parameter for the "+c+" order type");case 13:d.stopPx=parseFloat(this.priceToPrecision(t,h)),o=this.omit(o,["stopPx","stopPrice"]);case 15:return"Limit"!==c&&"StopLimit"!==c&&"LimitIfTouched"!==c||(d.price=parseFloat(this.priceToPrecision(t,s))),void 0!==(l=this.safeString2(o,"clOrdID","clientOrderId"))&&(d.clOrdID=l,o=this.omit(o,["clOrdID","clientOrderId"])),e.next=20,this.privatePostOrder(this.extend(d,o));case 20:return f=e.sent,e.abrupt("return",this.parseOrder(f,u));case 22:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"editOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,u,c,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=f.length>4&&void 0!==f[4]?f[4]:void 0,o=f.length>5&&void 0!==f[5]?f[5]:void 0,u=f.length>6&&void 0!==f[6]?f[6]:{},e.next=5,this.loadMarkets();case 5:return c={},void 0!==(d=this.safeString2(u,"origClOrdID","clientOrderId"))?(c.origClOrdID=d,void 0!==(h=this.safeString(u,"clOrdID","clientOrderId"))&&(c.clOrdID=h),u=this.omit(u,["origClOrdID","clOrdID","clientOrderId"])):c.orderID=t,void 0!==s&&(c.orderQty=s),void 0!==o&&(c.price=o),e.next=12,this.privatePutOrder(this.extend(c,u));case 12:return l=e.sent,e.abrupt("return",this.parseOrder(l));case 14:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.length>1&&void 0!==c[1]?c[1]:void 0,r=c.length>2&&void 0!==c[2]?c[2]:{},e.next=4,this.loadMarkets();case 4:return n=this.safeString2(r,"clOrdID","clientOrderId"),a={},void 0===n?a.orderID=t:(a.clOrdID=n,r=this.omit(r,["clOrdID","clientOrderId"])),e.next=9,this.privateDeleteOrder(this.extend(a,r));case 9:if(s=e.sent,o=this.safeValue(s,0,{}),void 0===(u=this.safeString(o,"error"))){e.next=15;break}if(!(u.indexOf("Unable to cancel order due to existing state")>=0)){e.next=15;break}throw new k(this.id+" cancelOrder() failed: "+u);case 15:return e.abrupt("return",this.parseOrder(o));case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cancelAllOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=4,this.loadMarkets();case 4:return n={},a=void 0,void 0!==t&&(a=this.market(t),n.symbol=a.id),e.next=9,this.privateDeleteOrderAll(this.extend(n,r));case 9:return s=e.sent,e.abrupt("return",this.parseOrders(s,a));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchPositions",value:function(){var e=n(i.mark((function e(){var t,r,n=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.length>0&&void 0!==n[0]?n[0]:void 0,t=n.length>1&&void 0!==n[1]?n[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.privateGetPosition(t);case 6:return r=e.sent,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isFiat",value:function(e){return"EUR"===e||"PLN"===e}},{key:"withdraw",value:function(){var e=n(i.mark((function e(t,r,n){var a,s,o,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u.length>3&&void 0!==u[3]?u[3]:void 0,a=u.length>4&&void 0!==u[4]?u[4]:{},this.checkAddress(n),e.next=5,this.loadMarkets();case 5:if("BTC"===t){e.next=7;break}throw new g(this.id+" supoprts BTC withdrawals only, other currencies coming soon...");case 7:return s={currency:"XBt",amount:r,address:n},e.next=10,this.privatePostUserRequestWithdrawal(this.extend(s,a));case 10:return o=e.sent,e.abrupt("return",{info:o,id:this.safeString(o,"transactID")});case 12:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,u){if(void 0!==s){if(429===e)throw new m(this.id+" "+a);if(e>=400){var c=this.safeValue(s,"error",{}),d=this.safeString(c,"message"),h=this.id+" "+a;if(this.throwExactlyMatchedException(this.exceptions.exact,d,h),this.throwBroadlyMatchedException(this.exceptions.broad,d,h),400===e)throw new v(h);throw new g(h)}}}},{key:"nonce",value:function(){return this.milliseconds()}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s="/api/"+this.version+"/"+e;if("GET"===r)Object.keys(i).length&&(s+="?"+this.urlencode(i));else{var o=this.safeString(i,"_format");void 0!==o&&(s+="?"+this.urlencode({_format:o}),i=this.omit(i,"_format"))}var u=this.urls.api[t]+s;if(this.apiKey&&this.secret){var c=r+s,d=this.safeInteger(this.options,"api-expires");n={"Content-Type":"application/json","api-key":this.apiKey},c+=d=(d=this.sum(this.seconds(),d)).toString(),n["api-expires"]=d,"POST"!==r&&"PUT"!==r&&"DELETE"!==r||Object.keys(i).length&&(c+=a=this.json(i)),n["api-signature"]=this.hmac(this.encode(c),this.encode(this.secret))}return{url:u,method:r,body:a,headers:n}}}]),r}(h)},function(e,t,r){"use strict";var i=r(21),n=r(7),a=r(8),s=r(1),o=r(2),u=r(6),c=r(3),d=r(4),h=r(5),l=r(11),f=r(10),p=f.AuthenticationError,v=f.ExchangeError,m=f.PermissionDenied,g=f.BadRequest,y=f.ArgumentsRequired,b=f.OrderNotFound,x=f.InsufficientFunds,k=f.ExchangeNotAvailable,w=f.DDoSProtection,_=f.InvalidAddress,S=f.InvalidOrder;e.exports=function(e){d(r,e);var t=h(r);function r(){return s(this,r),t.apply(this,arguments)}return o(r,[{key:"describe",value:function(){return this.deepExtend(u(c(r.prototype),"describe",this).call(this),{id:"bitpanda",name:"Bitpanda Pro",countries:["AT"],rateLimit:300,version:"v1",has:{CORS:!1,publicAPI:!0,privateAPI:!0,cancelAllOrders:!0,cancelOrder:!0,cancelOrders:!0,createDepositAddress:!0,createOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchCurrencies:!0,fetchDeposits:!0,fetchDepositAddress:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrderTrades:!0,fetchTime:!0,fetchTrades:!0,fetchTradingFees:!0,fetchTicker:!0,fetchTickers:!0,fetchWithdrawals:!0,withdraw:!0},timeframes:{"1m":"1/MINUTES","5m":"5/MINUTES","15m":"15/MINUTES","30m":"30/MINUTES","1h":"1/HOURS","4h":"4/HOURS","1d":"1/DAYS","1w":"1/WEEKS","1M":"1/MONTHS"},urls:{logo:"https://user-images.githubusercontent.com/51840849/87591171-9a377d80-c6f0-11ea-94ac-97a126eac3bc.jpg",api:{public:"https://api.exchange.bitpanda.com/public",private:"https://api.exchange.bitpanda.com/public"},www:"https://www.bitpanda.com/en/pro",doc:["https://developers.bitpanda.com/exchange/"],fees:"https://www.bitpanda.com/en/pro/fees"},api:{public:{get:["currencies","candlesticks/{instrument_code}","fees","instruments","order-book/{instrument_code}","market-ticker","market-ticker/{instrument_code}","price-ticks/{instrument_code}","time"]},private:{get:["account/balances","account/deposit/crypto/{currency_code}","account/deposit/fiat/EUR","account/deposits","account/deposits/bitpanda","account/withdrawals","account/withdrawals/bitpanda","account/fees","account/orders","account/orders/{order_id}","account/orders/{order_id}/trades","account/trades","account/trades/{trade_id}","account/trading-volume"],post:["account/deposit/crypto","account/withdraw/crypto","account/withdraw/fiat","account/fees","account/orders"],delete:["account/orders","account/orders/{order_id}","account/orders/client/{client_id}"]}},fees:{trading:{tierBased:!0,percentage:!0,taker:.0015,maker:.001,tiers:[{taker:[[0,.0015],[100,.0013],[250,.0013],[1e3,.001],[5e3,9e-4],[1e4,75e-5],[2e4,65e-5]],maker:[[0,.001],[100,.001],[250,9e-4],[1e3,75e-5],[5e3,6e-4],[1e4,5e-4],[2e4,5e-4]]}]}},requiredCredentials:{apiKey:!0,secret:!1},exceptions:{exact:{INVALID_CLIENT_UUID:S,ORDER_NOT_FOUND:b,ONLY_ONE_ERC20_ADDRESS_ALLOWED:_,DEPOSIT_ADDRESS_NOT_USED:_,INVALID_CREDENTIALS:p,MISSING_CREDENTIALS:p,INVALID_APIKEY:p,INVALID_SCOPES:p,INVALID_SUBJECT:p,INVALID_ISSUER:p,INVALID_AUDIENCE:p,INVALID_DEVICE_ID:p,INVALID_IP_RESTRICTION:p,APIKEY_REVOKED:p,APIKEY_EXPIRED:p,SYNCHRONIZER_TOKEN_MISMATCH:p,SESSION_EXPIRED:p,INTERNAL_ERROR:p,CLIENT_IP_BLOCKED:m,MISSING_PERMISSION:m,ILLEGAL_CHARS:g,UNSUPPORTED_MEDIA_TYPE:g,ACCOUNT_HISTORY_TIME_RANGE_TOO_BIG:g,CANDLESTICKS_TIME_RANGE_TOO_BIG:g,INVALID_INSTRUMENT_CODE:g,INVALID_ORDER_TYPE:g,INVALID_UNIT:g,INVALID_PERIOD:g,INVALID_TIME:g,INVALID_DATE:g,INVALID_CURRENCY:g,INVALID_AMOUNT:g,INVALID_PRICE:g,INVALID_LIMIT:g,INVALID_QUERY:g,INVALID_CURSOR:g,INVALID_ACCOUNT_ID:g,INVALID_SIDE:S,INVALID_ACCOUNT_HISTORY_FROM_TIME:g,INVALID_ACCOUNT_HISTORY_MAX_PAGE_SIZE:g,INVALID_ACCOUNT_HISTORY_TIME_PERIOD:g,INVALID_ACCOUNT_HISTORY_TO_TIME:g,INVALID_CANDLESTICKS_GRANULARITY:g,INVALID_CANDLESTICKS_UNIT:g,INVALID_ORDER_BOOK_DEPTH:g,INVALID_ORDER_BOOK_LEVEL:g,INVALID_PAGE_CURSOR:g,INVALID_TIME_RANGE:g,INVALID_TRADE_ID:g,INVALID_UI_ACCOUNT_SETTINGS:g,NEGATIVE_AMOUNT:S,NEGATIVE_PRICE:S,MIN_SIZE_NOT_SATISFIED:S,BAD_AMOUNT_PRECISION:S,BAD_PRICE_PRECISION:S,BAD_TRIGGER_PRICE_PRECISION:S,MAX_OPEN_ORDERS_EXCEEDED:g,MISSING_PRICE:S,MISSING_ORDER_TYPE:S,MISSING_SIDE:S,MISSING_CANDLESTICKS_PERIOD_PARAM:y,MISSING_CANDLESTICKS_UNIT_PARAM:y,MISSING_FROM_PARAM:y,MISSING_INSTRUMENT_CODE:y,MISSING_ORDER_ID:S,MISSING_TO_PARAM:y,MISSING_TRADE_ID:y,INVALID_ORDER_ID:b,NOT_FOUND:b,INSUFFICIENT_LIQUIDITY:x,INSUFFICIENT_FUNDS:x,NO_TRADING:k,SERVICE_UNAVAILABLE:k,GATEWAY_TIMEOUT:k,RATELIMIT:w,CF_RATELIMIT:w,INTERNAL_SERVER_ERROR:v},broad:{}},commonCurrencies:{MIOTA:"IOTA"},options:{fetchTradingFees:{method:"fetchPrivateTradingFees"},fiat:["EUR","CHF"]}})}},{key:"fetchTime",value:function(){var e=a(n.mark((function e(){var t,r,i=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},e.next=3,this.publicGetTime(t);case 3:return r=e.sent,e.abrupt("return",this.safeInteger(r,"epoch_millis"));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchCurrencies",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,u,c=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:{},e.next=3,this.publicGetCurrencies(t);case 3:for(r=e.sent,i={},a=0;a<r.length;a++)s=r[a],o=this.safeString(s,"code"),u=this.safeCurrencyCode(o),i[u]={id:o,code:u,name:void 0,info:s,active:void 0,fee:void 0,precision:this.safeInteger(s,"precision"),limits:{amount:{min:void 0,max:void 0},withdraw:{min:void 0,max:void 0}}};return e.abrupt("return",i);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMarkets",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,u,c,d,h,l,f,p,v,m,g,y,b=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=b.length>0&&void 0!==b[0]?b[0]:{},e.next=3,this.publicGetInstruments(t);case 3:for(r=e.sent,i=[],a=0;a<r.length;a++)s=r[a],o=this.safeValue(s,"base",{}),u=this.safeValue(s,"quote",{}),c=this.safeString(o,"code"),d=this.safeString(u,"code"),h=c+"_"+d,l=this.safeCurrencyCode(c),f=this.safeCurrencyCode(d),p=l+"/"+f,v={amount:this.safeInteger(s,"amount_precision"),price:this.safeInteger(s,"market_precision")},m={amount:{min:void 0,max:void 0},price:{min:void 0,max:void 0},cost:{min:this.safeNumber(s,"min_size"),max:void 0}},g=this.safeString(s,"state"),y="ACTIVE"===g,i.push({id:h,symbol:p,base:l,quote:f,baseId:c,quoteId:d,precision:v,limits:m,info:s,active:y});return e.abrupt("return",i);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTradingFees",value:function(){var e=a(n.mark((function e(){var t,r,i,a=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},r=this.safeString(t,"method"),t=this.omit(t,"method"),void 0===r&&(i=this.safeValue(this.options,"fetchTradingFees",{}),r=this.safeString(i,"method","fetchPrivateTradingFees")),e.next=6,this[r](t);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchPublicTradingFees",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,u,c,d,h,l,f,p,v,m,g,y,b,x=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=x.length>0&&void 0!==x[0]?x[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.publicGetFees(t);case 5:for(r=e.sent,i=this.indexBy(r,"fee_group_id"),a=this.safeValue(this.options,"fee_group_id","default"),s=this.safeValue(i,a,{}),o=this.safeValue(s,"fee_tiers"),u={},c=0;c<this.symbols.length;c++){for(d=this.symbols[c],h={info:s,symbol:d,maker:void 0,taker:void 0,percentage:!0,tierBased:!0},l=[],f=[],p=0;p<o.length;p++)v=o[p],m=this.safeNumber(v,"volume"),g=this.safeNumber(v,"taker_fee"),y=this.safeNumber(v,"maker_fee"),g/=100,y/=100,l.push([m,g]),f.push([m,y]),0===p&&(h.taker=g,h.maker=y);b={taker:l,maker:f},h.tiers=b,u[d]=h}return e.abrupt("return",u);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchPrivateTradingFees",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,u,c,d,h,l,f,p,v=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=v.length>0&&void 0!==v[0]?v[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetAccountFees(t);case 5:for(r=e.sent,i=this.safeValue(r,"active_fee_tier",{}),a={info:r,maker:this.safeNumber(i,"maker_fee"),taker:this.safeNumber(i,"taker_fee"),percentage:!0,tierBased:!0},s=this.safeValue(r,"fee_tiers"),o=[],u=[],c=0;c<s.length;c++)d=s[c],h=this.safeNumber(d,"volume"),l=this.safeNumber(d,"taker_fee"),f=this.safeNumber(d,"maker_fee"),l/=100,f/=100,o.push([h,l]),u.push([h,f]);return p={taker:o,maker:u},a.tiers=p,e.abrupt("return",a);case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.parse8601(this.safeString(e,"time")),i=this.safeString(e,"instrument_code"),n=this.safeSymbol(i,t,"_"),a=this.safeNumber(e,"last_price"),s=this.safeNumber(e,"price_change_percentage"),o=this.safeNumber(e,"price_change"),u=void 0,c=void 0;void 0!==a&&void 0!==o&&(u=a-o,c=this.sum(a,u)/2);var d=this.safeNumber(e,"base_volume"),h=this.safeNumber(e,"quote_volume"),l=this.vwap(d,h);return{symbol:n,timestamp:r,datetime:this.iso8601(r),high:this.safeNumber(e,"high"),low:this.safeNumber(e,"low"),bid:this.safeNumber(e,"best_bid"),bidVolume:void 0,ask:this.safeNumber(e,"best_ask"),askVolume:void 0,vwap:l,open:u,close:a,last:a,previousClose:void 0,change:o,percentage:s,average:c,baseVolume:d,quoteVolume:h,info:e}}},{key:"fetchTicker",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return i=this.market(t),a={instrument_code:i.id},e.next=7,this.publicGetMarketTickerInstrumentCode(this.extend(a,r));case 7:return s=e.sent,e.abrupt("return",this.parseTicker(s,i));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTickers",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,u,c=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:void 0,r=c.length>1&&void 0!==c[1]?c[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetMarketTicker(r);case 6:for(i=e.sent,a={},s=0;s<i.length;s++)o=this.parseTicker(i[s]),u=o.symbol,a[u]=o;return e.abrupt("return",this.filterByArray(a,"symbol",t));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,i=u.length>2&&void 0!==u[2]?u[2]:{},e.next=4,this.loadMarkets();case 4:return a={instrument_code:this.marketId(t)},void 0!==r&&(a.depth=r),e.next=8,this.publicGetOrderBookInstrumentCode(this.extend(a,i));case 8:return s=e.sent,o=this.parse8601(this.safeString(s,"time")),e.abrupt("return",this.parseOrderBook(s,o,"bids","asks","price","amount"));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){var t=this.safeValue(e,"granularity"),r=this.safeString(t,"unit"),i=this.safeString(t,"period"),n={MINUTES:"m",HOURS:"h",DAYS:"d",WEEKS:"w",MONTHS:"M"},a=this.safeString(n,r),s=i+a,o=this.parseTimeframe(s),u=1e3*o,c=this.parse8601(this.safeString(e,"time")),d=u*parseInt(c/u),h=this.safeValue(this.options,"fetchOHLCV",{}),l=this.safeString(h,"volume","total_amount");return[d,this.safeNumber(e,"open"),this.safeNumber(e,"high"),this.safeNumber(e,"low"),this.safeNumber(e,"close"),this.safeNumber(e,l)]}},{key:"fetchOHLCV",value:function(){var e=a(n.mark((function e(t){var r,a,s,o,u,c,d,h,l,f,p,v,m,g,y,b=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=b.length>1&&void 0!==b[1]?b[1]:"1m",a=b.length>2&&void 0!==b[2]?b[2]:void 0,s=b.length>3&&void 0!==b[3]?b[3]:void 0,o=b.length>4&&void 0!==b[4]?b[4]:{},e.next=6,this.loadMarkets();case 6:return u=this.market(t),c=this.safeString(this.timeframes,r),d=c.split("/"),h=i(d,2),l=h[0],f=h[1],p=this.parseTimeframe(r),v=1e3*p,void 0===s&&(s=1500),m={instrument_code:u.id,period:l,unit:f},void 0===a?(g=this.milliseconds(),m.to=this.iso8601(g),m.from=this.iso8601(g-s*v)):(m.from=this.iso8601(a),m.to=this.iso8601(this.sum(a,s*v))),e.next=16,this.publicGetCandlesticksInstrumentCode(this.extend(m,o));case 16:return y=e.sent,e.abrupt("return",this.parseOHLCVs(y,u,r,a,s));case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeValue(e,"fee",{});e=this.safeValue(e,"trade",e);var i=this.safeInteger(e,"trade_timestamp");void 0===i&&(i=this.parse8601(this.safeString(e,"time")));var n=this.safeStringLower2(e,"side","taker_side"),a=this.safeNumber(e,"price"),s=this.safeNumber(e,"amount"),o=this.safeNumber(e,"volume");void 0===o&&void 0!==s&&void 0!==a&&(o=s*a);var u=this.safeString(e,"instrument_code"),c=this.safeSymbol(u,t,"_"),d=this.safeNumber(r,"fee_amount"),h=void 0,l=void 0;if(void 0!==d){var f=this.safeString(r,"fee_currency"),p=this.safeCurrencyCode(f),v=this.safeNumber(r,"fee_percentage");l={cost:d,currency:p,rate:v},h=this.safeStringLower(r,"fee_type")}return{id:this.safeString2(e,"trade_id","sequence"),order:this.safeString(e,"order_id"),timestamp:i,datetime:this.iso8601(i),symbol:c,type:void 0,side:n,price:a,amount:s,cost:o,takerOrMaker:h,fee:l,info:e}}},{key:"fetchTrades",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,u,c=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,i=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={instrument_code:s.id},void 0!==r&&(o.from=this.iso8601(r),o.to=this.iso8601(this.sum(r,144e5))),e.next=10,this.publicGetPriceTicksInstrumentCode(this.extend(o,a));case 10:return u=e.sent,e.abrupt("return",this.parseTrades(u,s,r,i));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,u,c,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetAccountBalances(t);case 5:for(r=e.sent,i=this.safeValue(r,"balances",[]),a={info:r},s=0;s<i.length;s++)o=i[s],u=this.safeString(o,"currency_code"),c=this.safeCurrencyCode(u),(d=this.account()).free=this.safeString(o,"available"),d.used=this.safeString(o,"locked"),a[c]=d;return e.abrupt("return",this.parseBalance(a,!1));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseDepositAddress",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0;void 0!==t&&(r=t.code);var i=this.safeString(e,"address"),n=this.safeString(e,"destination_tag");return this.checkAddress(i),{currency:r,address:i,tag:n,info:e}}},{key:"createDepositAddress",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return i=this.currency(t),a={currency:i.id},e.next=7,this.privatePostAccountDepositCrypto(this.extend(a,r));case 7:return s=e.sent,e.abrupt("return",this.parseDepositAddress(s,i));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchDepositAddress",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return i=this.currency(t),a={currency_code:i.id},e.next=7,this.privateGetAccountDepositCryptoCurrencyCode(this.extend(a,r));case 7:return s=e.sent,e.abrupt("return",this.parseDepositAddress(s,i));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchDeposits",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,u,c,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,i=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:if(s={},o=void 0,void 0!==t&&(o=this.currency(t),s.currency_code=o.id),void 0!==i&&(s.max_page_size=i),void 0===r){e.next=15;break}if(void 0!==this.safeString(a,"to")){e.next=14;break}throw new y(this.id+' fetchDeposits() requires a "to" iso8601 string param with the since argument is specified');case 14:s.from=this.iso8601(r);case 15:return e.next=17,this.privateGetAccountDeposits(this.extend(s,a));case 17:return u=e.sent,c=this.safeValue(u,"deposit_history",[]),e.abrupt("return",this.parseTransactions(c,o,r,i,{type:"deposit"}));case 20:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchWithdrawals",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,u,c,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,i=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:if(s={},o=void 0,void 0!==t&&(o=this.currency(t),s.currency_code=o.id),void 0!==i&&(s.max_page_size=i),void 0===r){e.next=15;break}if(void 0!==this.safeString(a,"to")){e.next=14;break}throw new y(this.id+' fetchWithdrawals() requires a "to" iso8601 string param with the since argument is specified');case 14:s.from=this.iso8601(r);case 15:return e.next=17,this.privateGetAccountWithdrawals(this.extend(s,a));case 17:return u=e.sent,c=this.safeValue(u,"withdrawal_history",[]),e.abrupt("return",this.parseTransactions(c,o,r,i,{type:"withdrawal"}));case 20:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"withdraw",value:function(){var e=a(n.mark((function e(t,r,i){var a,s,o,u,c,d,h,l,f,p=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=p.length>3&&void 0!==p[3]?p[3]:void 0,s=p.length>4&&void 0!==p[4]?p[4]:{},this.checkAddress(i),e.next=5,this.loadMarkets();case 5:if(o=this.currency(t),u={currency:t,amount:this.currencyToPrecision(t,r)},c=this.safeValue(this.options,"fiat",[]),d=this.inArray(t,c),h=d?"privatePostAccountWithdrawFiat":"privatePostAccountWithdrawCrypto",!d){e.next=16;break}if(void 0!==this.safeString(s,"payout_account_id")){e.next=14;break}throw y(this.id+" withdraw() requires a payout_account_id param for fiat "+t+" withdrawals");case 14:e.next=19;break;case 16:l={address:i},void 0!==a&&(l.destination_tag=a),u.recipient=l;case 19:return e.next=21,this[h](this.extend(u,s));case 21:return f=e.sent,e.abrupt("return",this.parseTransaction(f,o));case 23:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"parseTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"transaction_id"),i=this.safeNumber(e,"amount"),n=this.parse8601(this.safeString(e,"time")),a=this.safeString(e,"currency");t=this.safeCurrency(a,t);var s="ok",o=this.safeNumber2(e,"fee_amount","fee"),u=void 0,c=this.safeString(e,"recipient"),d=this.safeString(e,"destination_tag");if(void 0!==o){var h=this.safeString(e,"fee_currency",a),l=this.safeCurrencyCode(h);u={cost:o,currency:l}}return{info:e,id:r,currency:t.code,amount:i,address:c,addressFrom:void 0,addressTo:c,tag:d,tagFrom:void 0,tagTo:d,status:s,type:void 0,updated:void 0,txid:this.safeString(e,"blockchain_transaction_id"),timestamp:n,datetime:this.iso8601(n),fee:u}}},{key:"parseOrderStatus",value:function(e){return this.safeString({FILLED:"open",FILLED_FULLY:"closed",FILLED_CLOSED:"canceled",FILLED_REJECTED:"rejected",OPEN:"open",REJECTED:"rejected",CLOSED:"canceled",FAILED:"failed",STOP_TRIGGERED:"triggered"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeValue(e,"order",e),i=this.safeString(r,"order_id"),n=this.safeString(r,"client_id"),a=this.parse8601(this.safeString(r,"time")),s=this.parseOrderStatus(this.safeString(r,"status")),o=this.parseOrderStatus(s),u=this.safeString(r,"instrument_code"),c=this.safeSymbol(u,t,"_"),d=this.safeNumber(r,"price"),h=this.safeNumber(r,"amount"),l=this.safeString(r,"filled_amount"),f=this.parseNumber(l),p=this.safeStringLower(r,"side"),v=this.safeStringLower(r,"type"),m=this.parseTimeInForce(this.safeString(r,"time_in_force")),g=this.safeNumber(r,"trigger_price"),y=this.safeValue(r,"is_post_only"),b=this.safeValue(e,"trades",[]),x=this.parseTrades(b,t,void 0,void 0,{type:v});return this.safeOrder({id:i,clientOrderId:n,info:e,timestamp:a,datetime:this.iso8601(a),lastTradeTimestamp:void 0,symbol:c,type:v,timeInForce:m,postOnly:y,side:p,price:d,stopPrice:g,amount:h,cost:void 0,average:void 0,filled:f,remaining:void 0,status:o,trades:x})}},{key:"parseTimeInForce",value:function(e){return this.safeString({GOOD_TILL_CANCELLED:"GTC",GOOD_TILL_TIME:"GTT",IMMEDIATE_OR_CANCELLED:"IOC",FILL_OR_KILL:"FOK"},e,e)}},{key:"createOrder",value:function(){var e=a(n.mark((function e(t,r,i,a){var s,o,u,c,d,h,l,f,p,v=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=v.length>4&&void 0!==v[4]?v[4]:void 0,o=v.length>5&&void 0!==v[5]?v[5]:{},e.next=4,this.loadMarkets();case 4:if(u=this.market(t),c=r.toUpperCase(),d={instrument_code:u.id,type:c,side:i.toUpperCase(),amount:this.amountToPrecision(t,a)},h=!1,"LIMIT"!==c&&"STOP"!==c||(h=!0),"STOP"!==c){e.next=15;break}if(void 0!==(l=this.safeNumber(o,"trigger_price"))){e.next=13;break}throw new y(this.id+" createOrder() requires a trigger_price param for "+r+" orders");case 13:d.trigger_price=this.priceToPrecision(t,l),o=this.omit(o,"trigger_price");case 15:return h&&(d.price=this.priceToPrecision(t,s)),void 0!==(f=this.safeString2(o,"clientOrderId","client_id"))&&(d.client_id=f,o=this.omit(o,["clientOrderId","client_id"])),e.next=20,this.privatePostAccountOrders(this.extend(d,o));case 20:return p=e.sent,e.abrupt("return",this.parseOrder(p,u));case 22:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u.length>1&&void 0!==u[1]?u[1]:void 0,r=u.length>2&&void 0!==u[2]?u[2]:{},e.next=4,this.loadMarkets();case 4:return i=this.safeString2(r,"clientOrderId","client_id"),r=this.omit(r,["clientOrderId","client_id"]),a="privateDeleteAccountOrdersOrderId",s={},void 0!==i?(a="privateDeleteAccountOrdersClientClientId",s.client_id=i):s.order_id=t,e.next=11,this[a](this.extend(s,r));case 11:return o=e.sent,e.abrupt("return",o);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cancelAllOrders",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=4,this.loadMarkets();case 4:return i={},void 0!==t&&(a=this.market(t),i.instrument_code=a.id),e.next=8,this.privateDeleteAccountOrders(this.extend(i,r));case 8:return s=e.sent,e.abrupt("return",s);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"cancelOrders",value:function(){var e=a(n.mark((function e(t){var r,i,a,s=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.loadMarkets();case 4:return i={ids:t.join(",")},e.next=7,this.privateDeleteAccountOrders(this.extend(i,r));case 7:return a=e.sent,e.abrupt("return",a);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=a(n.mark((function e(t){var r,i,a,s=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.loadMarkets();case 4:return i={order_id:t},e.next=7,this.privateGetAccountOrdersOrderId(this.extend(i,r));case 7:return a=e.sent,e.abrupt("return",this.parseOrder(a));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,u,c,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,i=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:if(s={},o=void 0,void 0!==t&&(o=this.market(t),s.instrument_code=o.id),void 0===r){e.next=14;break}if(void 0!==this.safeString(a,"to")){e.next=13;break}throw new y(this.id+' fetchOrders() requires a "to" iso8601 string param with the since argument is specified, max range is 100 days');case 13:s.from=this.iso8601(r);case 14:return void 0!==i&&(s.max_page_size=i),e.next=17,this.privateGetAccountOrders(this.extend(s,a));case 17:return u=e.sent,c=this.safeValue(u,"order_history",[]),e.abrupt("return",this.parseOrders(c,o,r,i));case 20:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,i=o.length>2&&void 0!==o[2]?o[2]:void 0,a=o.length>3&&void 0!==o[3]?o[3]:{},s={with_cancelled_and_rejected:!0},e.next=7,this.fetchOpenOrders(t,r,i,this.extend(s,a));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderTrades",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,u,c,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:void 0,i=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:void 0,s=h.length>4&&void 0!==h[4]?h[4]:{},e.next=6,this.loadMarkets();case 6:return o={order_id:t},void 0!==a&&(o.max_page_size=a),e.next=10,this.privateGetAccountOrdersOrderIdTrades(this.extend(o,s));case 10:return u=e.sent,c=this.safeValue(u,"trade_history",[]),d=void 0,void 0!==r&&(d=this.market(r)),e.abrupt("return",this.parseTrades(c,d,i,a));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,u,c,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,i=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:if(s={},o=void 0,void 0!==t&&(o=this.market(t),s.instrument_code=o.id),void 0===r){e.next=14;break}if(void 0!==this.safeString(a,"to")){e.next=13;break}throw new y(this.id+' fetchMyTrades() requires a "to" iso8601 string param with the since argument is specified, max range is 100 days');case 13:s.from=this.iso8601(r);case 14:return void 0!==i&&(s.max_page_size=i),e.next=17,this.privateGetAccountTrades(this.extend(s,a));case 17:return u=e.sent,c=this.safeValue(u,"trade_history",[]),e.abrupt("return",this.parseTrades(c,o,r,i));case 20:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.urls.api[t]+"/"+this.version+"/"+this.implodeParams(e,i),o=this.omit(i,this.extractParams(e));return"public"===t?Object.keys(o).length&&(s+="?"+this.urlencode(o)):"private"===t&&(this.checkRequiredCredentials(),n={Accept:"application/json",Authorization:"Bearer "+this.apiKey},"POST"===r?(a=this.json(o),n["Content-Type"]="application/json"):Object.keys(o).length&&(s+="?"+this.urlencode(o))),{url:s,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,u){if(void 0!==s){var c=this.safeString(s,"error");if(void 0!==c){var d=this.id+" "+a;throw this.throwExactlyMatchedException(this.exceptions.exact,c,d),this.throwBroadlyMatchedException(this.exceptions.broad,c,d),new v(d)}}}}]),r}(l)},function(e,t,r){"use strict";var i=r(7),n=r(21),a=r(8),s=r(1),o=r(2),u=r(6),c=r(3),d=r(4),h=r(5),l=r(11),f=r(10),p=f.ExchangeError,v=f.InvalidNonce,m=f.AuthenticationError,g=f.OrderNotFound,y=r(18).TICK_SIZE,b=r(12);e.exports=function(e){d(r,e);var t=h(r);function r(){return s(this,r),t.apply(this,arguments)}return o(r,[{key:"describe",value:function(){return this.deepExtend(u(c(r.prototype),"describe",this).call(this),{id:"bitso",name:"Bitso",countries:["MX"],rateLimit:2e3,version:"v3",has:{cancelOrder:!0,CORS:!1,createOrder:!0,fetchBalance:!0,fetchDepositAddress:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrderTrades:!0,fetchTicker:!0,fetchTrades:!0,withdraw:!0},urls:{logo:"https://user-images.githubusercontent.com/51840849/87295554-11f98280-c50e-11ea-80d6-15b3bafa8cbf.jpg",api:"https://api.bitso.com",www:"https://bitso.com",doc:"https://bitso.com/api_info",fees:"https://bitso.com/fees",referral:"https://bitso.com/?ref=itej"},precisionMode:y,options:{precision:{XRP:1e-6,MXN:.01,TUSD:.01},defaultPrecision:1e-8},api:{public:{get:["available_books","ticker","order_book","trades"]},private:{get:["account_status","balance","fees","fundings","fundings/{fid}","funding_destination","kyc_documents","ledger","ledger/trades","ledger/fees","ledger/fundings","ledger/withdrawals","mx_bank_codes","open_orders","order_trades/{oid}","orders/{oid}","user_trades","user_trades/{tid}","withdrawals/","withdrawals/{wid}"],post:["bitcoin_withdrawal","debit_card_withdrawal","ether_withdrawal","ripple_withdrawal","bcash_withdrawal","litecoin_withdrawal","orders","phone_number","phone_verification","phone_withdrawal","spei_withdrawal","ripple_withdrawal","bcash_withdrawal","litecoin_withdrawal"],delete:["orders/{oid}","orders/all"]}},exceptions:{"0201":m,104:v}})}},{key:"fetchMarkets",value:function(){var e=a(i.mark((function e(){var t,r,a,s,o,u,c,d,h,l,f,p,v,m,g,y,x,k,w,_,S,O,T,C,I,M,A,E,N,P,D,L,B,R,V=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=V.length>0&&void 0!==V[0]?V[0]:{},e.next=3,this.publicGetAvailableBooks(t);case 3:for(r=e.sent,a=this.safeValue(r,"payload"),s=[],o=0;o<a.length;o++){for(u=a[o],c=this.safeString(u,"book"),d=c.split("_"),h=n(d,2),l=h[0],f=h[1],p=l.toUpperCase(),v=f.toUpperCase(),p=this.safeCurrencyCode(p),v=this.safeCurrencyCode(v),m=p+"/"+v,g={amount:{min:this.safeNumber(u,"minimum_amount"),max:this.safeNumber(u,"maximum_amount")},price:{min:this.safeNumber(u,"minimum_price"),max:this.safeNumber(u,"maximum_price")},cost:{min:this.safeNumber(u,"minimum_value"),max:this.safeNumber(u,"maximum_value")}},y=this.safeNumber(this.options.precision,v,this.options.defaultPrecision),x=this.safeNumber(u,"tick_size",y),k={amount:this.safeNumber(this.options.precision,p,this.options.defaultPrecision),price:x},w=this.safeValue(u,"fees",{}),_=this.safeValue(w,"flat_rate",{}),S=this.safeString(_,"maker"),O=this.safeString(_,"taker"),T=this.parseNumber(b.stringDiv(S,"100")),C=this.parseNumber(b.stringDiv(O,"100")),I=this.safeValue(w,"structure",[]),M={taker:C,maker:T,percentage:!0,tierBased:!0},A=[],E=[],N=0;N<I.length;N++)P=I[N],D=this.safeNumber(P,"volume"),L=this.safeNumber(P,"taker"),B=this.safeNumber(P,"maker"),A.push([D,L]),E.push([D,B]),0===N&&(M.taker=L,M.maker=B);R={taker:A,maker:E},M.tiers=R,s.push(this.extend({id:c,symbol:m,base:p,quote:v,baseId:l,quoteId:f,info:u,limits:g,precision:k,active:void 0},M))}return e.abrupt("return",s);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=a(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetBalance(t);case 5:for(r=e.sent,n=this.safeValue(r.payload,"balances"),a={info:r},s=0;s<n.length;s++)o=n[s],u=this.safeString(o,"currency"),c=this.safeCurrencyCode(u),(d=this.account()).free=this.safeString(o,"available"),d.used=this.safeString(o,"locked"),d.total=this.safeString(o,"total"),a[c]=d;return e.abrupt("return",this.parseBalance(a,!1));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=a(i.mark((function e(t){var r,n,a,s,o,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u.length>1&&void 0!==u[1]?u[1]:void 0,r=u.length>2&&void 0!==u[2]?u[2]:{},e.next=4,this.loadMarkets();case 4:return n={book:this.marketId(t)},e.next=7,this.publicGetOrderBook(this.extend(n,r));case 7:return a=e.sent,s=this.safeValue(a,"payload"),o=this.parse8601(this.safeString(s,"updated_at")),e.abrupt("return",this.parseOrderBook(s,o,"bids","asks","price","amount"));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=a(i.mark((function e(t){var r,n,a,s,o,u,c,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>1&&void 0!==l[1]?l[1]:{},e.next=3,this.loadMarkets();case 3:return n={book:this.marketId(t)},e.next=6,this.publicGetTicker(this.extend(n,r));case 6:return a=e.sent,s=this.safeValue(a,"payload"),o=this.parse8601(this.safeString(s,"created_at")),u=this.safeNumber(s,"vwap"),c=this.safeNumber(s,"volume"),d=void 0,void 0!==c&&void 0!==u&&(d=c*u),h=this.safeNumber(s,"last"),e.abrupt("return",{symbol:t,timestamp:o,datetime:this.iso8601(o),high:this.safeNumber(s,"high"),low:this.safeNumber(s,"low"),bid:this.safeNumber(s,"bid"),bidVolume:void 0,ask:this.safeNumber(s,"ask"),askVolume:void 0,vwap:u,open:void 0,close:h,last:h,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:c,quoteVolume:d,info:s});case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.parse8601(this.safeString(e,"created_at")),i=this.safeString(e,"book"),n=this.safeSymbol(i,t,"_"),a=this.safeString2(e,"side","maker_side"),s=this.safeNumber2(e,"amount","major");void 0!==s&&(s=Math.abs(s));var o=void 0,u=this.safeNumber(e,"fees_amount");if(void 0!==u){var c=this.safeString(e,"fees_currency"),d=this.safeCurrencyCode(c);o={cost:u,currency:d}}var h=this.safeNumber(e,"minor");void 0!==h&&(h=Math.abs(h));var l=this.safeNumber(e,"price"),f=this.safeString(e,"oid"),p=this.safeString(e,"tid");return{id:p,info:e,timestamp:r,datetime:this.iso8601(r),symbol:n,order:f,type:void 0,side:a,takerOrMaker:void 0,price:l,amount:s,cost:h,fee:o}}},{key:"fetchTrades",value:function(){var e=a(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={book:s.id},e.next=9,this.publicGetTrades(this.extend(o,a));case 9:return u=e.sent,e.abrupt("return",this.parseTrades(u.payload,s,r,n));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=a(i.mark((function e(){var t,r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:25,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:if(s=this.market(t),o="marker"in a,void 0===r||o){e.next=10;break}throw new p(this.id+" fetchMyTrades does not support fetching trades starting from a timestamp with the `since` argument, use the `marker` extra param to filter starting from an integer trade id");case 10:return o&&(a=this.extend(a,{marker:parseInt(a.marker)})),u={book:s.id,limit:n},e.next=14,this.privateGetUserTrades(this.extend(u,a));case 14:return c=e.sent,e.abrupt("return",this.parseTrades(c.payload,s,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=a(i.mark((function e(t,r,n,a){var s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=h.length>4&&void 0!==h[4]?h[4]:void 0,o=h.length>5&&void 0!==h[5]?h[5]:{},e.next=4,this.loadMarkets();case 4:return u={book:this.marketId(t),side:n,type:r,major:this.amountToPrecision(t,a)},"limit"===r&&(u.price=this.priceToPrecision(t,s)),e.next=8,this.privatePostOrders(this.extend(u,o));case 8:return c=e.sent,d=this.safeString(c.payload,"oid"),e.abrupt("return",{info:c,id:d});case 11:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=a(i.mark((function e(t){var r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:{},e.next=4,this.loadMarkets();case 4:return n={oid:t},e.next=7,this.privateDeleteOrdersOid(this.extend(n,r));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({"partial-fill":"open",completed:"closed"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"oid"),i=this.safeString(e,"side"),n=this.parseOrderStatus(this.safeString(e,"status")),a=this.safeString(e,"book"),s=this.safeSymbol(a,t,"_"),o=this.safeString(e,"type"),u=this.parse8601(this.safeString(e,"created_at")),c=this.safeNumber(e,"price"),d=this.safeNumber(e,"original_amount"),h=this.safeNumber(e,"unfilled_amount"),l=this.safeString(e,"client_id");return this.safeOrder({info:e,id:r,clientOrderId:l,timestamp:u,datetime:this.iso8601(u),lastTradeTimestamp:void 0,symbol:s,type:o,timeInForce:void 0,postOnly:void 0,side:i,price:c,stopPrice:void 0,amount:d,cost:void 0,remaining:h,filled:void 0,status:n,fee:void 0,average:void 0,trades:void 0})}},{key:"fetchOpenOrders",value:function(){var e=a(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:25,a=h.length>3&&void 0!==h[3]?h[3]:{},e.next=6,this.loadMarkets();case 6:if(s=this.market(t),o="marker"in a,void 0===r||o){e.next=10;break}throw new p(this.id+" fetchOpenOrders does not support fetching orders starting from a timestamp with the `since` argument, use the `marker` extra param to filter starting from an integer trade id");case 10:return o&&(a=this.extend(a,{marker:parseInt(a.marker)})),u={book:s.id,limit:n},e.next=14,this.privateGetOpenOrders(this.extend(u,a));case 14:return c=e.sent,d=this.parseOrders(c.payload,s,r,n),e.abrupt("return",d);case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=a(i.mark((function e(t){var r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,a.length>2&&void 0!==a[2]?a[2]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.privateGetOrdersOid({oid:t});case 6:if(r=e.sent,n=this.safeValue(r,"payload"),!Array.isArray(n)){e.next=12;break}if(1!==r.payload.length){e.next=12;break}return e.abrupt("return",this.parseOrder(n[0]));case 12:throw new g(this.id+": The order "+t+" not found.");case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrderTrades",value:function(){var e=a(i.mark((function e(t){var r,n,a,s,o,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,u.length>2&&void 0!==u[2]?u[2]:void 0,u.length>3&&void 0!==u[3]?u[3]:void 0,n=u.length>4&&void 0!==u[4]?u[4]:{},e.next=6,this.loadMarkets();case 6:return a=this.market(r),s={oid:t},e.next=10,this.privateGetOrderTradesOid(this.extend(s,n));case 10:return o=e.sent,e.abrupt("return",this.parseTrades(o.payload,a));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchDepositAddress",value:function(){var e=a(i.mark((function e(t){var r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.currency(t),a={fund_currency:n.id},e.next=7,this.privateGetFundingDestination(this.extend(a,r));case 7:return s=e.sent,o=this.safeString(s.payload,"account_identifier"),u=void 0,o.indexOf("?dt=")>=0&&(c=o.split("?dt="),o=this.safeString(c,0),u=this.safeString(c,1)),this.checkAddress(o),e.abrupt("return",{currency:t,address:o,tag:u,info:s});case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"withdraw",value:function(){var e=a(i.mark((function e(t,r,n){var a,s,o,u,c,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=l.length>3&&void 0!==l[3]?l[3]:void 0,s=l.length>4&&void 0!==l[4]?l[4]:{},this.checkAddress(n),e.next=5,this.loadMarkets();case 5:if(void 0!==(u=t in(o={BTC:"Bitcoin",ETH:"Ether",XRP:"Ripple",BCH:"Bcash",LTC:"Litecoin"})?o[t]:void 0)){e.next=9;break}throw new p(this.id+" not valid withdraw coin: "+t);case 9:return c={amount:r,address:n,destination_tag:a},d="privatePost"+u+"Withdrawal",e.next=13,this[d](this.extend(c,s));case 13:return h=e.sent,e.abrupt("return",{info:h,id:this.safeString(h.payload,"wid")});case 15:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s="/"+this.version+"/"+this.implodeParams(e,i),o=this.omit(i,this.extractParams(e));"GET"===r&&Object.keys(o).length&&(s+="?"+this.urlencode(o));var u=this.urls.api+s;if("private"===t){this.checkRequiredCredentials();var c=this.nonce().toString(),d=[c,r,s].join("");"GET"!==r&&Object.keys(o).length&&(d+=a=this.json(o));var h=this.hmac(this.encode(d),this.encode(this.secret)),l=this.apiKey+":"+c+":"+h;n={Authorization:"Bitso "+l,"Content-Type":"application/json"}}return{url:u,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,u){if(void 0!==s&&"success"in s){var c=this.safeValue(s,"success",!1);if("string"===typeof c&&(c="true"===c||"1"===c),!c){var d=this.id+" "+this.json(s),h=this.safeValue(s,"error");if(void 0===h)throw new p(d);var l=this.safeString(h,"code");throw this.throwExactlyMatchedException(this.exceptions,l,d),new p(d)}}}},{key:"request",value:function(){var e=a(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:"public",n=c.length>2&&void 0!==c[2]?c[2]:"GET",a=c.length>3&&void 0!==c[3]?c[3]:{},s=c.length>4&&void 0!==c[4]?c[4]:void 0,o=c.length>5&&void 0!==c[5]?c[5]:void 0,e.next=7,this.fetch2(t,r,n,a,s,o);case 7:if(!("success"in(u=e.sent))){e.next=11;break}if(!u.success){e.next=11;break}return e.abrupt("return",u);case 11:throw new p(this.id+" "+this.json(u));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(l)},function(e,t,r){"use strict";var i=r(7),n=r(21),a=r(8),s=r(1),o=r(2),u=r(6),c=r(3),d=r(4),h=r(5),l=r(11),f=r(10),p=f.AuthenticationError,v=f.ExchangeError,m=f.NotSupported,g=f.PermissionDenied,y=f.InvalidNonce,b=f.OrderNotFound,x=f.InsufficientFunds,k=f.InvalidAddress,w=f.InvalidOrder,_=f.ArgumentsRequired,S=f.OnMaintenance,O=f.ExchangeNotAvailable;e.exports=function(e){d(r,e);var t=h(r);function r(){return s(this,r),t.apply(this,arguments)}return o(r,[{key:"describe",value:function(){return this.deepExtend(u(c(r.prototype),"describe",this).call(this),{id:"bitstamp",name:"Bitstamp",countries:["GB"],rateLimit:1e3,version:"v2",userAgent:this.userAgents.chrome,pro:!0,has:{CORS:!0,cancelOrder:!0,createOrder:!0,fetchBalance:!0,fetchDepositAddress:!0,fetchMarkets:!0,fetchCurrencies:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTrades:!0,fetchTransactions:!0,fetchWithdrawals:!0,withdraw:!0,fetchTradingFee:!0,fetchTradingFees:!0,fetchFundingFees:!0,fetchFees:!0,fetchLedger:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/27786377-8c8ab57e-5fe9-11e7-8ea4-2b05b6bcceec.jpg",api:{public:"https://www.bitstamp.net/api",private:"https://www.bitstamp.net/api",v1:"https://www.bitstamp.net/api"},www:"https://www.bitstamp.net",doc:"https://www.bitstamp.net/api"},timeframes:{"1m":"60","3m":"180","5m":"300","15m":"900","30m":"1800","1h":"3600","2h":"7200","4h":"14400","6h":"21600","12h":"43200","1d":"86400","1w":"259200"},requiredCredentials:{apiKey:!0,secret:!0,uid:!0},api:{public:{get:["ohlc/{pair}/","order_book/{pair}/","ticker_hour/{pair}/","ticker/{pair}/","transactions/{pair}/","trading-pairs-info/"]},private:{post:["balance/","balance/{pair}/","bch_withdrawal/","bch_address/","user_transactions/","user_transactions/{pair}/","open_orders/all/","open_orders/{pair}/","order_status/","cancel_order/","buy/{pair}/","buy/market/{pair}/","buy/instant/{pair}/","sell/{pair}/","sell/market/{pair}/","sell/instant/{pair}/","ltc_withdrawal/","ltc_address/","eth_withdrawal/","eth_address/","xrp_withdrawal/","xrp_address/","xlm_withdrawal/","xlm_address/","pax_withdrawal/","pax_address/","link_withdrawal/","link_address/","usdc_withdrawal/","usdc_address/","omg_withdrawal/","omg_address/","dai_withdrawal/","dai_address/","knc_withdrawal/","knc_address/","mkr_withdrawal/","mkr_address/","zrx_withdrawal/","zrx_address/","gusd_withdrawal/","gusd_address/","transfer-to-main/","transfer-from-main/","withdrawal-requests/","withdrawal/open/","withdrawal/status/","withdrawal/cancel/","liquidation_address/new/","liquidation_address/info/"]},v1:{post:["bitcoin_deposit_address/","unconfirmed_btc/","bitcoin_withdrawal/","ripple_withdrawal/","ripple_address/"]}},fees:{trading:{tierBased:!0,percentage:!0,taker:.005,maker:.005,tiers:{taker:[[0,.005],[2e4,.0025],[1e5,.0024],[2e5,.0022],[4e5,.002],[6e5,.0015],[1e6,.14/100],[2e6,.0013],[4e6,.0012],[2e7,.0011],[5e7,.001],[1e8,.07/100],[5e8,5e-4],[2e9,3e-4],[6e9,1e-4],[1e10,5e-5],[10000000001,0]],maker:[[0,.005],[2e4,.0025],[1e5,.0024],[2e5,.0022],[4e5,.002],[6e5,.0015],[1e6,.14/100],[2e6,.0013],[4e6,.0012],[2e7,.0011],[5e7,.001],[1e8,.07/100],[5e8,5e-4],[2e9,3e-4],[6e9,1e-4],[1e10,5e-5],[10000000001,0]]}},funding:{tierBased:!1,percentage:!1,withdraw:{BTC:5e-4,BCH:1e-4,LTC:.001,ETH:.001,XRP:.02,XLM:.005,PAX:.5,USD:25,EUR:3},deposit:{BTC:0,BCH:0,LTC:0,ETH:0,XRP:0,XLM:0,PAX:0,USD:7.5,EUR:0}}},exceptions:{exact:{"No permission found":g,"API key not found":p,"IP address not allowed":g,"Invalid nonce":y,"Invalid signature":p,"Authentication failed":p,"Missing key, signature and nonce parameters":p,"Your account is frozen":g,"Please update your profile with your FATCA information, before using API.":g,"Order not found":b,"Price is more than 20% below market price.":w,"Bitstamp.net is under scheduled maintenance.":S,"Order could not be placed.":O},broad:{"Minimum order size is":w,"Check your account balance for details.":x,"Ensure this value has at least":k}}})}},{key:"fetchMarkets",value:function(){var e=a(i.mark((function e(){var t,r,a,s,o,u,c,d,h,l,f,p,v,m,g,y,b,x,k,w,_,S,O,T,C,I=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=I.length>0&&void 0!==I[0]?I[0]:{},e.next=3,this.fetchMarketsFromCache(t);case 3:for(r=e.sent,a=[],s=0;s<r.length;s++)o=r[s],u=this.safeString(o,"name"),c=u.split("/"),d=n(c,2),h=d[0],l=d[1],f=h.toLowerCase(),p=l.toLowerCase(),h=this.safeCurrencyCode(h),l=this.safeCurrencyCode(l),v=h+"/"+l,m=f+"_"+p,g=this.safeString(o,"url_symbol"),y=this.safeString(o,"base_decimals"),b=this.safeString(o,"counter_decimals"),x=void 0===y?void 0:"1e-"+y,k=void 0===b?void 0:"1e-"+b,w={amount:parseInt(y),price:parseInt(b)},_=this.safeString(o,"minimum_order"),S=_.split(" "),O=S[0],T=this.safeString(o,"trading"),C="Enabled"===T,a.push({id:g,symbol:v,base:h,quote:l,baseId:f,quoteId:p,symbolId:m,info:o,active:C,precision:w,limits:{amount:{min:this.parseNumber(x),max:void 0},price:{min:this.parseNumber(k),max:void 0},cost:{min:this.parseNumber(O),max:void 0}}});return e.abrupt("return",a);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"constructCurrencyObject",value:function(e,t,r,i,n,a){var s="crypto",o=this.describe();return this.isFiat(t)&&(s="fiat"),{id:e,code:t,info:a,type:s,name:r,active:!0,fee:this.safeNumber(o.fees.funding.withdraw,t),precision:i,limits:{amount:{min:Math.pow(10,-i),max:void 0},price:{min:Math.pow(10,-i),max:void 0},cost:{min:n,max:void 0},withdraw:{min:void 0,max:void 0}}}}},{key:"fetchMarketsFromCache",value:function(){var e=a(i.mark((function e(){var t,r,n,a,s,o,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.length>0&&void 0!==u[0]?u[0]:{},r=this.safeValue(this.options,"fetchMarkets",{}),n=this.safeInteger(r,"timestamp"),a=this.safeInteger(r,"expires",1e3),s=this.milliseconds(),!(void 0===n||s-n>a)){e.next=10;break}return e.next=8,this.publicGetTradingPairsInfo(t);case 8:o=e.sent,this.options.fetchMarkets=this.extend(r,{response:o,timestamp:s});case 10:return e.abrupt("return",this.safeValue(this.options.fetchMarkets,"response"));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchCurrencies",value:function(){var e=a(i.mark((function e(){var t,r,a,s,o,u,c,d,h,l,f,p,v,m,g,y,b,x,k,w,_,S,O=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=O.length>0&&void 0!==O[0]?O[0]:{},e.next=3,this.fetchMarketsFromCache(t);case 3:for(r=e.sent,a={},s=0;s<r.length;s++)o=r[s],u=this.safeString(o,"name"),c=u.split("/"),d=n(c,2),h=d[0],l=d[1],f=h.toLowerCase(),p=l.toLowerCase(),h=this.safeCurrencyCode(h),l=this.safeCurrencyCode(l),v=this.safeString(o,"description"),m=v.split(" / "),g=n(m,2),y=g[0],b=g[1],x=this.safeString(o,"minimum_order"),k=x.split(" "),w=k[0],h in a||(_=this.safeInteger(o,"base_decimals"),a[h]=this.constructCurrencyObject(f,h,y,_,void 0,o)),l in a||(S=this.safeInteger(o,"counter_decimals"),a[l]=this.constructCurrencyObject(p,l,b,S,parseFloat(w),o));return e.abrupt("return",a);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=a(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.length>1&&void 0!==c[1]?c[1]:void 0,r=c.length>2&&void 0!==c[2]?c[2]:{},e.next=4,this.loadMarkets();case 4:return n={pair:this.marketId(t)},e.next=7,this.publicGetOrderBookPair(this.extend(n,r));case 7:return a=e.sent,s=this.safeInteger(a,"microtimestamp"),o=parseInt(s/1e3),(u=this.parseOrderBook(a,o)).nonce=s,e.abrupt("return",u);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=a(i.mark((function e(t){var r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:{},e.next=3,this.loadMarkets();case 3:return n={pair:this.marketId(t)},e.next=6,this.publicGetTickerPair(this.extend(n,r));case 6:return a=e.sent,s=this.safeTimestamp(a,"timestamp"),o=this.safeNumber(a,"vwap"),u=this.safeNumber(a,"volume"),c=void 0,void 0!==u&&void 0!==o&&(c=u*o),d=this.safeNumber(a,"last"),e.abrupt("return",{symbol:t,timestamp:s,datetime:this.iso8601(s),high:this.safeNumber(a,"high"),low:this.safeNumber(a,"low"),bid:this.safeNumber(a,"bid"),bidVolume:void 0,ask:this.safeNumber(a,"ask"),askVolume:void 0,vwap:o,open:this.safeNumber(a,"open"),close:d,last:d,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:u,quoteVolume:c,info:a});case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getCurrencyIdFromTransaction",value:function(e){var t=this.safeStringLower(e,"currency");if(void 0!==t)return t;e=this.omit(e,["fee","price","datetime","type","status","id"]);for(var r=Object.keys(e),i=0;i<r.length;i++){var n=r[i];if(n.indexOf("_")<0){var a=this.safeNumber(e,n);if(void 0!==a&&0!==a)return n}}}},{key:"getMarketFromTrade",value:function(e){e=this.omit(e,["fee","price","datetime","tid","type","order_id","side"]);var t=Object.keys(e),r=t.length;if(r>2)throw new v(this.id+" getMarketFromTrade too many keys: "+this.json(t)+" in the trade: "+this.json(e));if(2===r){var i=t[0]+t[1];if(i in this.markets_by_id)return this.markets_by_id[i];if((i=t[1]+t[0])in this.markets_by_id)return this.markets_by_id[i]}}},{key:"getMarketFromTrades",value:function(e){var t=this.indexBy(e,"symbol"),r=Object.keys(t);if(1===r.length)return this.markets[r[0]]}},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString2(e,"id","tid"),i=void 0,n=void 0,a=this.safeNumber(e,"price"),s=this.safeNumber(e,"amount"),o=this.safeString(e,"order_id"),u=void 0,c=this.safeNumber(e,"cost");if(void 0===t){for(var d=Object.keys(e),h=0;h<d.length;h++)if(d[h].indexOf("_")>=0){var l=d[h].replace("_","");l in this.markets_by_id&&(t=this.markets_by_id[l])}void 0===t&&(t=this.getMarketFromTrade(e))}var f=this.safeNumber(e,"fee"),p=void 0;void 0!==t&&(a=this.safeNumber(e,t.symbolId,a),s=this.safeNumber(e,t.baseId,s),c=this.safeNumber(e,t.quoteId,c),p=t.quote,i=t.symbol);var v=this.safeString2(e,"date","datetime");void 0!==v&&(v.indexOf(" ")>=0?v=this.parse8601(v):(v=parseInt(v),v*=1e3)),"id"in e?void 0!==s&&(s<0?(n="sell",s=-s):n="buy"):"1"===(n=this.safeString(e,"type"))?n="sell":"0"===n&&(n="buy"),void 0===c&&void 0!==a&&void 0!==s&&(c=a*s),void 0!==c&&(c=Math.abs(c));var m=void 0;return void 0!==f&&(m={cost:f,currency:p}),{id:r,info:e,timestamp:v,datetime:this.iso8601(v),symbol:i,order:o,type:u,side:n,takerOrMaker:void 0,price:a,amount:s,cost:c,fee:m}}},{key:"parseTradingFee",value:function(e,t){var r=this.market(t),i=this.safeNumber(e,r.id+"_fee");return{symbol:t,maker:i,taker:i}}},{key:"fetchTrades",value:function(){var e=a(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={pair:s.id,time:"hour"},e.next=9,this.publicGetTransactionsPair(this.extend(o,a));case 9:return u=e.sent,e.abrupt("return",this.parseTrades(u,s,r,n));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){return[this.safeTimestamp(e,"timestamp"),this.safeNumber(e,"open"),this.safeNumber(e,"high"),this.safeNumber(e,"low"),this.safeNumber(e,"close"),this.safeNumber(e,"volume")]}},{key:"fetchOHLCV",value:function(){var e=a(i.mark((function e(t){var r,n,a,s,o,u,c,d,h,l,f,p,v=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=v.length>1&&void 0!==v[1]?v[1]:"1m",n=v.length>2&&void 0!==v[2]?v[2]:void 0,a=v.length>3&&void 0!==v[3]?v[3]:void 0,s=v.length>4&&void 0!==v[4]?v[4]:{},e.next=6,this.loadMarkets();case 6:if(o=this.market(t),u={pair:o.id,step:this.timeframes[r]},c=this.parseTimeframe(r),void 0!==a){e.next=21;break}if(void 0!==n){e.next=14;break}throw new _(this.id+" fetchOHLCV() requires a since argument or a limit argument");case 14:a=1e3,d=parseInt(n/1e3),u.start=d,u.end=this.sum(d,a*c),u.limit=a;case 19:e.next=23;break;case 21:void 0!==n&&(h=parseInt(n/1e3),u.start=h,u.end=this.sum(h,a*c)),u.limit=Math.min(a,1e3);case 23:return e.next=25,this.publicGetOhlcPair(this.extend(u,s));case 25:return l=e.sent,f=this.safeValue(l,"data",{}),p=this.safeValue(f,"ohlc",[]),e.abrupt("return",this.parseOHLCVs(p,o,r,n,a));case 29:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=a(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privatePostBalance(t);case 5:for(r=e.sent,n={info:r},a=Object.keys(this.currencies),s=0;s<a.length;s++)o=a[s],u=this.currency(o),c=u.id,(d=this.account()).free=this.safeString(r,c+"_available"),d.used=this.safeString(r,c+"_reserved"),d.total=this.safeString(r,c+"_balance"),n[o]=d;return e.abrupt("return",this.parseBalance(n,!1));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTradingFee",value:function(){var e=a(i.mark((function e(t){var r,n,a,s,o,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:{},e.next=3,this.loadMarkets();case 3:return n={},a="privatePostBalance",s=void 0,void 0!==t&&(s=this.market(t),n.pair=s.id,a+="Pair"),e.next=9,this[a](this.extend(n,r));case 9:return o=e.sent,e.abrupt("return",{info:o,symbol:t,maker:o.fee,taker:o.fee});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"praseTradingFees",value:function(e){for(var t={info:e},r=Object.keys(this.markets),i=0;i<r.length;i++){var n=r[i],a=this.parseTradingFee(e,n);t[n]=a}return t}},{key:"fetchTradingFees",value:function(){var e=a(i.mark((function e(){var t,r,n=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privatePostBalance(t);case 5:return r=e.sent,e.abrupt("return",this.praseTradingFees(r));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseFundingFees",value:function(e){for(var t={},r=Object.keys(e),i=0;i<r.length;i++){var n=r[i];if(n.indexOf("_withdrawal_fee")>=0){var a=n.split("_")[0];t[this.safeCurrencyCode(a)]=this.safeNumber(e,n)}}return{info:e,withdraw:t,deposit:{}}}},{key:"fetchFundingFees",value:function(){var e=a(i.mark((function e(){var t,r,n=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privatePostBalance(t);case 5:return r=e.sent,e.abrupt("return",this.parseFundingFees(r));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchFees",value:function(){var e=a(i.mark((function e(){var t,r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privatePostBalance(t);case 5:return r=e.sent,delete(n=this.praseTradingFees(r)).info,delete(a=this.parseFundingFees(r)).info,e.abrupt("return",{info:r,trading:n,funding:a});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=a(i.mark((function e(t,r,n,a){var s,o,u,c,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=f.length>4&&void 0!==f[4]?f[4]:void 0,o=f.length>5&&void 0!==f[5]?f[5]:{},e.next=4,this.loadMarkets();case 4:return u=this.market(t),c="privatePost"+this.capitalize(n),d={pair:u.id,amount:this.amountToPrecision(t,a)},"market"===r?c+="Market":"instant"===r?c+="Instant":d.price=this.priceToPrecision(t,s),c+="Pair",e.next=11,this[c](this.extend(d,o));case 11:return h=e.sent,l=this.parseOrder(h,u),e.abrupt("return",this.extend(l,{type:r}));case 14:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=a(i.mark((function e(t){var r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:{},e.next=4,this.loadMarkets();case 4:return n={id:t},e.next=7,this.privatePostCancelOrder(this.extend(n,r));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({"In Queue":"open",Open:"open",Finished:"closed",Canceled:"canceled"},e,e)}},{key:"fetchOrderStatus",value:function(){var e=a(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.loadMarkets();case 4:return n={id:t},e.next=7,this.privatePostOrderStatus(this.extend(n,r));case 7:return a=e.sent,e.abrupt("return",this.parseOrderStatus(this.safeString(a,"status")));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=a(i.mark((function e(t){var r,n,a,s,o,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:{},e.next=4,this.loadMarkets();case 4:return a=void 0,void 0!==r&&(a=this.market(r)),s={id:t},e.next=9,this.privatePostOrderStatus(this.extend(s,n));case 9:return o=e.sent,e.abrupt("return",this.parseOrder(o,a));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=a(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:{},e.next=6,this.loadMarkets();case 6:return s={},o="privatePostUserTransactions",u=void 0,void 0!==t&&(u=this.market(t),s.pair=u.id,o+="Pair"),void 0!==n&&(s.limit=n),e.next=13,this[o](this.extend(s,a));case 13:return c=e.sent,d=this.filterBy(c,"type","2"),e.abrupt("return",this.parseTrades(d,u,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTransactions",value:function(){var e=a(i.mark((function e(){var t,r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return s={},void 0!==n&&(s.limit=n),e.next=10,this.privatePostUserTransactions(this.extend(s,a));case 10:return o=e.sent,u=void 0,void 0!==t&&(u=this.currency(t)),c=this.filterByArray(o,"type",["0","1"],!1),e.abrupt("return",this.parseTransactions(c,u,r,n));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchWithdrawals",value:function(){var e=a(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.length>0&&void 0!==o[0]?o[0]:void 0,t=o.length>1&&void 0!==o[1]?o[1]:void 0,r=o.length>2&&void 0!==o[2]?o[2]:void 0,n=o.length>3&&void 0!==o[3]?o[3]:{},e.next=6,this.loadMarkets();case 6:return(a={}).timedelta=void 0!==t?this.milliseconds()-t:5e7,e.next=10,this.privatePostWithdrawalRequests(this.extend(a,n));case 10:return s=e.sent,e.abrupt("return",this.parseTransactions(s,void 0,t,r));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.parse8601(this.safeString(e,"datetime")),i=this.safeString(e,"id"),n=this.getCurrencyIdFromTransaction(e),a=this.safeCurrencyCode(n,t),s=this.safeNumber(e,"fee"),o=void 0,u=void 0;"amount"in e?u=this.safeNumber(e,"amount"):void 0!==t?(u=this.safeNumber(e,t.id,u),o=t.code):void 0!==a&&void 0!==n&&(u=this.safeNumber(e,n,u),o=a),void 0!==u&&(u=Math.abs(u));var c="ok";"status"in e&&(c=this.parseTransactionStatus(this.safeString(e,"status")));var d=void 0;if("type"in e){var h=this.safeString(e,"type");"0"===h?d="deposit":"1"===h&&(d="withdrawal")}else d="withdrawal";var l=this.safeString(e,"transaction_id"),f=void 0,p=this.safeString(e,"address");if(void 0!==p){var v=p.split("?dt="),m=v.length;m>1&&(p=v[0],f=v[1])}var g=void 0,y=p,b=void 0,x=f,k=void 0;return void 0!==s&&(k={currency:o,cost:s,rate:void 0}),{info:e,id:i,txid:l,timestamp:r,datetime:this.iso8601(r),addressFrom:g,addressTo:y,address:p,tagFrom:b,tagTo:x,tag:f,type:d,amount:u,currency:a,status:c,updated:void 0,fee:k}}},{key:"parseTransactionStatus",value:function(e){return this.safeString({0:"pending",1:"pending",2:"ok",3:"canceled",4:"failed"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),i=this.safeString(e,"type");void 0!==i&&(i="1"===i?"sell":"buy");var n=this.parse8601(this.safeString(e,"datetime")),a=this.safeStringLower(e,"currency_pair"),s=this.safeSymbol(a,t,"/"),o=this.parseOrderStatus(this.safeString(e,"status")),u=this.safeNumber(e,"amount"),c=this.safeValue(e,"transactions",[]),d=this.parseTrades(c,t),h=d.length;h&&(s=d[0].symbol);var l=this.safeNumber(e,"price");return this.safeOrder({id:r,clientOrderId:void 0,datetime:this.iso8601(n),timestamp:n,lastTradeTimestamp:void 0,status:o,symbol:s,type:void 0,timeInForce:void 0,postOnly:void 0,side:i,price:l,stopPrice:void 0,cost:void 0,amount:u,filled:void 0,remaining:void 0,trades:d,fee:void 0,info:e,average:void 0})}},{key:"parseLedgerEntryType",value:function(e){return this.safeString({0:"transaction",1:"transaction",2:"trade",14:"transfer"},e,e)}},{key:"parseLedgerEntry",value:function(e){var t=this.parseLedgerEntryType(this.safeString(e,"type"));if("trade"===t){for(var r=this.parseTrade(e),i=void 0,n=Object.keys(e),a=0;a<n.length;a++)if(n[a].indexOf("_")>=0){var s=n[a].replace("_","");s in this.markets_by_id&&(i=this.markets_by_id[s])}void 0===i&&(i=this.getMarketFromTrade(e));var o="buy"===r.side?"in":"out";return{id:r.id,info:e,timestamp:r.timestamp,datetime:r.datetime,direction:o,account:void 0,referenceId:r.order,referenceAccount:void 0,type:t,currency:i.base,amount:r.amount,before:void 0,after:void 0,status:"ok",fee:r.fee}}var u=this.parseTransaction(e),c=void 0;if("amount"in e){var d=this.safeNumber(e,"amount");c=d>0?"in":"out"}else if("currency"in u&&void 0!==u.currency){var h=this.currencyId(u.currency),l=this.safeNumber(e,h);c=l>0?"in":"out"}return{id:u.id,info:e,timestamp:u.timestamp,datetime:u.datetime,direction:c,account:void 0,referenceId:u.txid,referenceAccount:void 0,type:t,currency:u.currency,amount:u.amount,before:void 0,after:void 0,status:u.status,fee:u.fee}}},{key:"fetchLedger",value:function(){var e=a(i.mark((function e(){var t,r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:void 0,r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},e.next=6,this.loadMarkets();case 6:return s={},void 0!==n&&(s.limit=n),e.next=10,this.privatePostUserTransactions(this.extend(s,a));case 10:return o=e.sent,u=void 0,void 0!==t&&(u=this.currency(t)),e.abrupt("return",this.parseLedger(o,u,r,n));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=a(i.mark((function e(){var t,r,n,a,s,o,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},s=void 0,e.next=7,this.loadMarkets();case 7:return void 0!==t&&(s=this.market(t)),e.next=10,this.privatePostOpenOrdersAll(a);case 10:return o=e.sent,e.abrupt("return",this.parseOrders(o,s,r,n,{status:"open",type:"limit"}));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getCurrencyName",value:function(e){return"BTC"===e?"bitcoin":e.toLowerCase()}},{key:"isFiat",value:function(e){return"USD"===e||"EUR"===e||"GBP"===e}},{key:"fetchDepositAddress",value:function(){var e=a(i.mark((function e(t){var r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=d.length>1&&void 0!==d[1]?d[1]:{},!this.isFiat(t)){e.next=3;break}throw new m(this.id+" fiat fetchDepositAddress() for "+t+" is not supported!");case 3:return n=this.getCurrencyName(t),s=(a="BTC"===t)?"v1":"private",s+="Post"+this.capitalize(n),s+=a?"Deposit":"",s+="Address",e.next=11,this[s](r);case 11:return o=e.sent,a&&(o=JSON.parse(o)),u=a?o:this.safeString(o,"address"),c=a?void 0:this.safeString2(o,"memo_id","destination_tag"),this.checkAddress(u),e.abrupt("return",{currency:t,address:u,tag:c,info:o});case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"withdraw",value:function(){var e=a(i.mark((function e(t,r,n){var a,s,o,u,c,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=l.length>3&&void 0!==l[3]?l[3]:void 0,s=l.length>4&&void 0!==l[4]?l[4]:{},e.next=4,this.loadMarkets();case 4:return this.checkAddress(n),o={amount:r},u=void 0,this.isFiat(t)?(u="privatePostWithdrawalOpen",d=this.currency(t),o.iban=n,o.account_currency=d.id):(c=this.getCurrencyName(t),u="BTC"===t?"v1":"private",u+="Post"+this.capitalize(c)+"Withdrawal","XRP"===t&&void 0!==a&&(o.destination_tag=a),o.address=n),e.next=10,this[u](this.extend(o,s));case 10:return h=e.sent,e.abrupt("return",{info:h,id:h.id});case 12:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"nonce",value:function(){return this.milliseconds()}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.urls.api[t]+"/";"v1"!==t&&(s+=this.version+"/"),s+=this.implodeParams(e,i);var o=this.omit(i,this.extractParams(e));if("public"===t)Object.keys(o).length&&(s+="?"+this.urlencode(o));else{this.checkRequiredCredentials();var u=this.safeValue(this.options,"auth","v2");if("v1"===u||"v1"===t){var c=this.nonce().toString(),d=c+this.uid+this.apiKey,h=this.encode(this.hmac(this.encode(d),this.encode(this.secret)));o=this.extend({key:this.apiKey,signature:h.toUpperCase(),nonce:c},o),a=this.urlencode(o),n={"Content-Type":"application/x-www-form-urlencoded"}}else{var l="BITSTAMP "+this.apiKey,f=this.uuid(),p=this.milliseconds().toString(),v="v2",m="";n={"X-Auth":l,"X-Auth-Nonce":f,"X-Auth-Timestamp":p,"X-Auth-Version":v},"POST"===r&&(Object.keys(o).length?(a=this.urlencode(o),m="application/x-www-form-urlencoded",n["Content-Type"]=m):(a=this.urlencode({foo:"bar"}),m="application/x-www-form-urlencoded",n["Content-Type"]=m));var g=a||"",y=l+r+s.replace("https://","")+m+f+p+v+g,b=this.hmac(this.encode(y),this.encode(this.secret));n["X-Auth-Signature"]=b}}return{url:s,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,u){if(void 0!==s){var c=this.safeString(s,"status"),d=this.safeValue(s,"error");if("error"===c||void 0!==d){var h=[];if("string"===typeof d)h.push(d);else if(void 0!==d)for(var l=Object.keys(d),f=0;f<l.length;f++){var m=l[f],g=this.safeValue(d,m);Array.isArray(g)?h=this.arrayConcat(h,g):h.push(g)}var y=this.safeValue(s,"reason",{});if("string"===typeof y)h.push(y);else for(var b=this.safeValue(y,"__all__",[]),x=0;x<b.length;x++)h.push(b[x]);if("API0005"===this.safeString(s,"code"))throw new p(this.id+" invalid signature, use the uid for the main account if you have subaccounts");for(var k=this.id+" "+a,w=0;w<h.length;w++){var _=h[w];this.throwExactlyMatchedException(this.exceptions.exact,_,k),this.throwBroadlyMatchedException(this.exceptions.broad,_,k)}throw new v(k)}}}}]),r}(l)},function(e,t,r){"use strict";var i=r(7),n=r(8),a=r(1),s=r(2),o=r(6),u=r(3),c=r(4),d=r(5),h=r(11),l=r(10),f=l.BadSymbol,p=l.ExchangeError,v=l.NotSupported,m=r(12);e.exports=function(e){c(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(u(r.prototype),"describe",this).call(this),{id:"bitstamp1",name:"Bitstamp",countries:["GB"],rateLimit:1e3,version:"v1",has:{cancelOrder:!0,CORS:!0,createOrder:!0,fetchBalance:!0,fetchMyTrades:!0,fetchOrder:!1,fetchOrderBook:!0,fetchTicker:!0,fetchTrades:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/27786377-8c8ab57e-5fe9-11e7-8ea4-2b05b6bcceec.jpg",api:"https://www.bitstamp.net/api",www:"https://www.bitstamp.net",doc:"https://www.bitstamp.net/api"},requiredCredentials:{apiKey:!0,secret:!0,uid:!0},api:{public:{get:["ticker","ticker_hour","order_book","transactions","eur_usd"]},private:{post:["balance","user_transactions","open_orders","order_status","cancel_order","cancel_all_orders","buy","sell","bitcoin_deposit_address","unconfirmed_btc","ripple_withdrawal","ripple_address","withdrawal_requests","bitcoin_withdrawal"]}},markets:{"BTC/USD":{id:"btcusd",symbol:"BTC/USD",base:"BTC",quote:"USD",baseId:"btc",quoteId:"usd",maker:.005,taker:.005},"BTC/EUR":{id:"btceur",symbol:"BTC/EUR",base:"BTC",quote:"EUR",baseId:"btc",quoteId:"eur",maker:.005,taker:.005},"EUR/USD":{id:"eurusd",symbol:"EUR/USD",base:"EUR",quote:"USD",baseId:"eur",quoteId:"usd",maker:.005,taker:.005},"XRP/USD":{id:"xrpusd",symbol:"XRP/USD",base:"XRP",quote:"USD",baseId:"xrp",quoteId:"usd",maker:.005,taker:.005},"XRP/EUR":{id:"xrpeur",symbol:"XRP/EUR",base:"XRP",quote:"EUR",baseId:"xrp",quoteId:"eur",maker:.005,taker:.005},"XRP/BTC":{id:"xrpbtc",symbol:"XRP/BTC",base:"XRP",quote:"BTC",baseId:"xrp",quoteId:"btc",maker:.005,taker:.005},"LTC/USD":{id:"ltcusd",symbol:"LTC/USD",base:"LTC",quote:"USD",baseId:"ltc",quoteId:"usd",maker:.005,taker:.005},"LTC/EUR":{id:"ltceur",symbol:"LTC/EUR",base:"LTC",quote:"EUR",baseId:"ltc",quoteId:"eur",maker:.005,taker:.005},"LTC/BTC":{id:"ltcbtc",symbol:"LTC/BTC",base:"LTC",quote:"BTC",baseId:"ltc",quoteId:"btc",maker:.005,taker:.005},"ETH/USD":{id:"ethusd",symbol:"ETH/USD",base:"ETH",quote:"USD",baseId:"eth",quoteId:"usd",maker:.005,taker:.005},"ETH/EUR":{id:"etheur",symbol:"ETH/EUR",base:"ETH",quote:"EUR",baseId:"eth",quoteId:"eur",maker:.005,taker:.005},"ETH/BTC":{id:"ethbtc",symbol:"ETH/BTC",base:"ETH",quote:"BTC",baseId:"eth",quoteId:"btc",maker:.005,taker:.005}}})}},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},"BTC/USD"===t){e.next=4;break}throw new p(this.id+" "+this.version+" fetchOrderBook doesn't support "+t+", use it for BTC/USD only");case 4:return e.next=6,this.loadMarkets();case 6:return e.next=8,this.publicGetOrderBook(r);case 8:return n=e.sent,a=this.safeTimestamp(n,"timestamp"),e.abrupt("return",this.parseOrderBook(n,a));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=d.length>1&&void 0!==d[1]?d[1]:{},"BTC/USD"===t){e.next=3;break}throw new p(this.id+" "+this.version+" fetchTicker doesn't support "+t+", use it for BTC/USD only");case 3:return e.next=5,this.loadMarkets();case 5:return e.next=7,this.publicGetTicker(r);case 7:return n=e.sent,a=this.safeTimestamp(n,"timestamp"),s=this.safeNumber(n,"vwap"),o=this.safeNumber(n,"volume"),u=void 0,void 0!==o&&void 0!==s&&(u=o*s),c=this.safeNumber(n,"last"),e.abrupt("return",{symbol:t,timestamp:a,datetime:this.iso8601(a),high:this.safeNumber(n,"high"),low:this.safeNumber(n,"low"),bid:this.safeNumber(n,"bid"),bidVolume:void 0,ask:this.safeNumber(n,"ask"),askVolume:void 0,vwap:s,open:this.safeNumber(n,"open"),close:c,last:c,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:o,quoteVolume:u,info:n});case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeTimestamp2(e,"date","datetime"),i=0===e.type?"buy":"sell",n=this.safeString(e,"order_id");"currency_pair"in e&&e.currency_pair in this.markets_by_id&&(t=this.markets_by_id[e.currency_pair]);var a=this.safeString(e,"tid"),s=this.safeString(e,"price"),o=this.safeString(e,"amount"),u=this.parseNumber(s),c=this.parseNumber(o),d=this.parseNumber(m.stringMul(s,o)),h=void 0;return void 0!==t&&(h=t.symbol),{id:a,info:e,timestamp:r,datetime:this.iso8601(r),symbol:h,order:n,type:void 0,side:i,takerOrMaker:void 0,price:u,amount:c,cost:d,fee:void 0}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},"BTC/USD"===t){e.next=5;break}throw new f(this.id+" "+this.version+" fetchTrades doesn't support "+t+", use it for BTC/USD only");case 5:return e.next=7,this.loadMarkets();case 7:return s=this.market(t),o={time:"minute"},e.next=11,this.publicGetTransactions(this.extend(o,a));case 11:return u=e.sent,e.abrupt("return",this.parseTrades(u,s,r,n));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:{},e.next=3,this.privatePostBalance(t);case 3:for(r=e.sent,n={info:r},a=Object.keys(this.currencies),s=0;s<a.length;s++)o=a[s],u=this.currency(o),c=u.id,(d=this.account()).free=this.safeString(r,c+"_available"),d.used=this.safeString(r,c+"_reserved"),d.total=this.safeString(r,c+"_balance"),n[o]=d;return e.abrupt("return",this.parseBalance(n,!1));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,u,c,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=l.length>4&&void 0!==l[4]?l[4]:void 0,o=l.length>5&&void 0!==l[5]?l[5]:{},"limit"===r){e.next=4;break}throw new p(this.id+" "+this.version+" accepts limit orders only");case 4:if("BTC/USD"===t){e.next=6;break}throw new p(this.id+" v1 supports BTC/USD orders only");case 6:return e.next=8,this.loadMarkets();case 8:return u="privatePost"+this.capitalize(n),c={amount:a,price:s},e.next=12,this[u](this.extend(c,o));case 12:return d=e.sent,h=this.safeString(d,"id"),e.abrupt("return",{info:d,id:h});case 15:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.length>1&&void 0!==r[1]?r[1]:void 0,r.length>2&&void 0!==r[2]?r[2]:{},e.next=4,this.privatePostCancelOrder({id:t});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({"In Queue":"open",Open:"open",Finished:"closed",Canceled:"canceled"},e,e)}},{key:"fetchOrderStatus",value:function(){var e=n(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.loadMarkets();case 4:return n={id:t},e.next=7,this.privatePostOrderStatus(this.extend(n,r));case 7:return a=e.sent,e.abrupt("return",this.parseOrderStatus(a));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return s=void 0,void 0!==t&&(s=this.market(t)),o=s?s.id:"all",u={id:o},e.next=12,this.privatePostOpenOrdersId(this.extend(u,a));case 12:return c=e.sent,e.abrupt("return",this.parseTrades(c,s,r,n));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw r.length>1&&void 0!==r[1]?r[1]:void 0,r.length>2&&void 0!==r[2]?r[2]:{},new v(this.id+" fetchOrder is not implemented yet");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.urls.api+"/"+this.implodeParams(e,i),o=this.omit(i,this.extractParams(e));if("public"===t)Object.keys(o).length&&(s+="?"+this.urlencode(o));else{this.checkRequiredCredentials();var u=this.nonce().toString(),c=u+this.uid+this.apiKey,d=this.encode(this.hmac(this.encode(c),this.encode(this.secret)));o=this.extend({key:this.apiKey,signature:d.toUpperCase(),nonce:u},o),a=this.urlencode(o),n={"Content-Type":"application/x-www-form-urlencoded"}}return{url:s,method:r,body:a,headers:n}}},{key:"request",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:"public",n=c.length>2&&void 0!==c[2]?c[2]:"GET",a=c.length>3&&void 0!==c[3]?c[3]:{},s=c.length>4&&void 0!==c[4]?c[4]:void 0,o=c.length>5&&void 0!==c[5]?c[5]:void 0,e.next=7,this.fetch2(t,r,n,a,s,o);case 7:if(!("status"in(u=e.sent))){e.next=11;break}if("error"!==u.status){e.next=11;break}throw new p(this.id+" "+this.json(u));case 11:return e.abrupt("return",u);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(h)},function(e,t,r){"use strict";var i=r(7),n=r(8),a=r(1),s=r(2),o=r(6),u=r(3),c=r(4),d=r(5),h=r(11),l=r(10),f=l.BadSymbol,p=l.ExchangeError,v=l.ExchangeNotAvailable,m=l.AuthenticationError,g=l.InvalidOrder,y=l.InsufficientFunds,b=l.OrderNotFound,x=l.DDoSProtection,k=l.PermissionDenied,w=l.AddressPending,_=l.OnMaintenance,S=l.BadRequest,O=l.InvalidAddress,T=r(18),C=T.TRUNCATE,I=T.DECIMAL_PLACES,M=r(12);e.exports=function(e){c(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(u(r.prototype),"describe",this).call(this),{id:"bittrex",name:"Bittrex",countries:["US"],version:"v3",rateLimit:1500,certified:!0,pro:!0,has:{CORS:!1,cancelAllOrders:!0,cancelOrder:!0,createDepositAddress:!0,createMarketOrder:!0,createOrder:!0,fetchBalance:!0,fetchDeposits:!0,fetchDepositAddress:!0,fetchClosedOrders:!0,fetchCurrencies:!0,fetchMarkets:!0,fetchMyTrades:"emulated",fetchOHLCV:!0,fetchOrder:!0,fetchOrderTrades:!0,fetchOrderBook:!0,fetchOpenOrders:!0,fetchTicker:!0,fetchTickers:!0,fetchTime:!0,fetchTrades:!0,fetchTransactions:!1,fetchWithdrawals:!0,withdraw:!0},timeframes:{"1m":"MINUTE_1","5m":"MINUTE_5","1h":"HOUR_1","1d":"DAY_1"},hostname:"bittrex.com",urls:{logo:"https://user-images.githubusercontent.com/51840849/87153921-edf53180-c2c0-11ea-96b9-f2a9a95a455b.jpg",api:{public:"https://api.bittrex.com",private:"https://api.bittrex.com"},www:"https://bittrex.com",doc:["https://bittrex.github.io/api/v3"],fees:["https://bittrex.zendesk.com/hc/en-us/articles/115003684371-BITTREX-SERVICE-FEES-AND-WITHDRAWAL-LIMITATIONS","https://bittrex.zendesk.com/hc/en-us/articles/115000199651-What-fees-does-Bittrex-charge-"],referral:"https://bittrex.com/Account/Register?referralCode=1ZE-G0G-M3B"},api:{public:{get:["ping","currencies","currencies/{symbol}","markets","markets/tickers","markets/summaries","markets/{marketSymbol}","markets/{marketSymbol}/summary","markets/{marketSymbol}/orderbook","markets/{marketSymbol}/trades","markets/{marketSymbol}/ticker","markets/{marketSymbol}/candles/{candleInterval}/recent","markets/{marketSymbol}/candles/{candleInterval}/historical/{year}/{month}/{day}","markets/{marketSymbol}/candles/{candleInterval}/historical/{year}/{month}","markets/{marketSymbol}/candles/{candleInterval}/historical/{year}"]},private:{get:["account","account/volume","addresses","addresses/{currencySymbol}","balances","balances/{currencySymbol}","deposits/open","deposits/closed","deposits/ByTxId/{txId}","deposits/{depositId}","orders/closed","orders/open","orders/{orderId}","orders/{orderId}/executions","ping","subaccounts/{subaccountId}","subaccounts","withdrawals/open","withdrawals/closed","withdrawals/ByTxId/{txId}","withdrawals/{withdrawalId}","withdrawals/whitelistAddresses","conditional-orders/{conditionalOrderId}","conditional-orders/closed","conditional-orders/open","transfers/sent","transfers/received","transfers/{transferId}"],post:["addresses","orders","subaccounts","withdrawals","conditional-orders","transfers"],delete:["orders/open","orders/{orderId}","withdrawals/{withdrawalId}","conditional-orders/{conditionalOrderId}"]}},fees:{trading:{tierBased:!0,percentage:!0,maker:.0035,taker:.0035},funding:{tierBased:!1,percentage:!1}},exceptions:{exact:{BAD_REQUEST:S,STARTDATE_OUT_OF_RANGE:S,APISIGN_NOT_PROVIDED:m,INVALID_SIGNATURE:m,INVALID_CURRENCY:p,INVALID_PERMISSION:m,INSUFFICIENT_FUNDS:y,INVALID_CEILING_MARKET_BUY:g,INVALID_FIAT_ACCOUNT:g,INVALID_ORDER_TYPE:g,QUANTITY_NOT_PROVIDED:g,MIN_TRADE_REQUIREMENT_NOT_MET:g,ORDER_NOT_OPEN:b,INVALID_ORDER:g,UUID_INVALID:b,RATE_NOT_PROVIDED:g,INVALID_MARKET:f,WHITELIST_VIOLATION_IP:k,DUST_TRADE_DISALLOWED_MIN_VALUE:g,RESTRICTED_MARKET:f,"We are down for scheduled maintenance, but we\u2019ll be back up shortly.":_},broad:{throttled:x,problem:v}},options:{fetchTicker:{method:"publicGetMarketsMarketSymbolTicker"},fetchTickers:{method:"publicGetMarketsTickers"},parseOrderStatus:!1,hasAlreadyAuthenticatedSuccessfully:!1,tag:{NXT:!0,CRYPTO_NOTE_PAYMENTID:!0,BITSHAREX:!0,RIPPLE:!0,NEM:!0,STELLAR:!0,STEEM:!0},subaccountId:void 0,fetchClosedOrdersFilterBySince:!0},commonCurrencies:{REPV2:"REP"}})}},{key:"costToPrecision",value:function(e,t){return this.decimalToPrecision(t,C,this.markets[e].precision.price,I)}},{key:"feeToPrecision",value:function(e,t){return this.decimalToPrecision(t,C,this.markets[e].precision.price,I)}},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p,v,m,g=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=g.length>0&&void 0!==g[0]?g[0]:{},e.next=3,this.publicGetMarkets(t);case 3:for(r=e.sent,n=[],a=0;a<r.length;a++)s=r[a],o=this.safeString(s,"baseCurrencySymbol"),u=this.safeString(s,"quoteCurrencySymbol"),c=this.safeString(s,"symbol"),d=this.safeCurrencyCode(o),h=this.safeCurrencyCode(u),l=d+"/"+h,f=this.safeInteger(s,"precision",8),p={amount:8,price:f},v=this.safeString(s,"status"),m="ONLINE"===v,n.push({id:c,symbol:l,base:d,quote:h,baseId:o,quoteId:u,active:m,info:s,precision:p,limits:{amount:{min:this.safeNumber(s,"minTradeSize"),max:void 0},price:{min:1/Math.pow(10,p.price),max:void 0},cost:{min:void 0,max:void 0}}});return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetBalances(t);case 5:for(r=e.sent,n={info:r},a=this.indexBy(r,"currencySymbol"),s=Object.keys(a),o=0;o<s.length;o++)u=s[o],c=this.safeCurrencyCode(u),d=this.account(),h=a[u],d.free=this.safeString(h,"available"),d.total=this.safeString(h,"total"),n[c]=d;return e.abrupt("return",this.parseBalance(n,!1));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:{},e.next=4,this.loadMarkets();case 4:if(a={marketSymbol:this.marketId(t)},void 0===r){e.next=9;break}if(1===r||25===r||500===r){e.next=8;break}throw new S(this.id+" fetchOrderBook() limit argument must be undefined, 1, 25 or 500, default is 25");case 8:a.depth=r;case 9:return e.next=11,this.publicGetMarketsMarketSymbolOrderbook(this.extend(a,n));case 11:return s=e.sent,o=this.safeInteger(this.last_response_headers,"Sequence"),(u=this.parseOrderBook(s,void 0,"bid","ask","rate","quantity")).nonce=o,e.abrupt("return",u);case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchCurrencies",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:{},e.next=3,this.publicGetCurrencies(t);case 3:for(r=e.sent,n={},a=0;a<r.length;a++)s=r[a],o=this.safeString(s,"symbol"),u=this.safeCurrencyCode(o),c=8,d=this.safeNumber(s,"txFee"),h=this.safeString(s,"status"),n[u]={id:o,code:u,address:this.safeString(s,"baseAddress"),info:s,type:this.safeString(s,"coinType"),name:this.safeString(s,"name"),active:"ONLINE"===h,fee:d,precision:c,limits:{amount:{min:1/Math.pow(10,c),max:void 0},withdraw:{min:d,max:void 0}}};return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.parse8601(this.safeString(e,"updatedAt")),i=this.safeString(e,"symbol"),n=this.safeSymbol(i,t,"-"),a=this.safeNumber(e,"percentChange"),s=this.safeNumber(e,"lastTradeRate");return{symbol:n,timestamp:r,datetime:this.iso8601(r),high:this.safeNumber(e,"high"),low:this.safeNumber(e,"low"),bid:this.safeNumber(e,"bidRate"),bidVolume:void 0,ask:this.safeNumber(e,"askRate"),askVolume:void 0,vwap:void 0,open:void 0,close:s,last:s,previousClose:void 0,change:void 0,percentage:a,average:void 0,baseVolume:this.safeNumber(e,"volume"),quoteVolume:this.safeNumber(e,"quoteVolume"),info:e}}},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:{},e.next=4,this.loadMarkets();case 4:return n=this.safeValue(this.options,"fetchTickers",{}),a=this.safeString(n,"method","publicGetMarketsTickers"),s=this.safeString(r,"method",a),r=this.omit(r,"method"),e.next=10,this[s](r);case 10:for(o=e.sent,u=[],c=0;c<o.length;c++)d=this.parseTicker(o[c]),u.push(d);return e.abrupt("return",this.filterByArray(u,"symbol",t));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={marketSymbol:n.id},s=this.safeValue(this.options,"fetchTicker",{}),o=this.safeString(s,"method","publicGetMarketsMarketSymbolTicker"),u=this.safeString(r,"method",o),r=this.omit(r,"method"),e.next=11,this[u](this.extend(a,r));case 11:return c=e.sent,e.abrupt("return",this.parseTicker(c,n));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.parse8601(this.safeString(e,"executedAt")),i=this.safeString(e,"id"),n=this.safeString(e,"orderId"),a=this.safeString(e,"marketSymbol");t=this.safeMarket(a,t,"-");var s=this.safeString(e,"rate"),o=this.safeString(e,"quantity"),u=this.parseNumber(s),c=this.parseNumber(o),d=this.parseNumber(M.stringMul(s,o)),h=void 0,l=this.safeValue(e,"isTaker");void 0!==l&&(h=l?"taker":"maker");var f=void 0,p=this.safeNumber(e,"commission");void 0!==p&&(f={cost:p,currency:t.quote});var v=this.safeStringLower(e,"takerSide");return{info:e,timestamp:r,datetime:this.iso8601(r),symbol:t.symbol,id:i,order:n,takerOrMaker:h,type:void 0,side:v,price:u,amount:c,cost:d,fee:f}}},{key:"fetchTime",value:function(){var e=n(i.mark((function e(){var t,r,n=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},e.next=3,this.publicGetPing(t);case 3:return r=e.sent,e.abrupt("return",this.safeInteger(r,"serverTime"));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={marketSymbol:this.marketId(t)},e.next=9,this.publicGetMarketsMarketSymbolTrades(this.extend(o,a));case 9:return u=e.sent,e.abrupt("return",this.parseTrades(u,s,r,n));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){return[this.parse8601(this.safeString(e,"startsAt")),this.safeNumber(e,"open"),this.safeNumber(e,"high"),this.safeNumber(e,"low"),this.safeNumber(e,"close"),this.safeNumber(e,"volume")]}},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d,h,l,f,p,v,m,g,y,b=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=b.length>1&&void 0!==b[1]?b[1]:"1m",n=b.length>2&&void 0!==b[2]?b[2]:void 0,a=b.length>3&&void 0!==b[3]?b[3]:void 0,s=b.length>4&&void 0!==b[4]?b[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),u=o.baseId+"-"+o.quoteId,c={candleInterval:this.timeframes[r],marketSymbol:u},d="publicGetMarketsMarketSymbolCandlesCandleIntervalRecent",void 0!==n&&(h=this.milliseconds(),l=Math.abs(h-n),f=this.ymd(n),p=f.split("-"),v=this.safeInteger(p,0),m=this.safeInteger(p,1),g=this.safeInteger(p,2),"1d"===r?l>316224e5&&(d="publicGetMarketsMarketSymbolCandlesCandleIntervalHistoricalYear",c.year=v):"1h"===r?l>26784e5&&(d="publicGetMarketsMarketSymbolCandlesCandleIntervalHistoricalYearMonth",c.year=v,c.month=m):l>864e5&&(d="publicGetMarketsMarketSymbolCandlesCandleIntervalHistoricalYearMonthDay",c.year=v,c.month=m,c.day=g)),e.next=13,this[d](this.extend(c,s));case 13:return y=e.sent,e.abrupt("return",this.parseOHLCVs(y,o,r,n,a));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:void 0,r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},e.next=6,this.loadMarkets();case 6:return s={},o=void 0,void 0!==t&&(o=this.market(t),s.marketSymbol=o.id),e.next=11,this.privateGetOrdersOpen(this.extend(s,a));case 11:return u=e.sent,e.abrupt("return",this.parseOrders(u,o,r,n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:void 0,s=d.length>4&&void 0!==d[4]?d[4]:{},e.next=6,this.loadMarkets();case 6:return o={orderId:t},e.next=9,this.privateGetOrdersOrderIdExecutions(this.extend(o,s));case 9:return u=e.sent,c=void 0,void 0!==r&&(c=this.market(r)),e.abrupt("return",this.parseTrades(u,c,n,a));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,u,c,d,h,l,f,p,v,m=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=m.length>4&&void 0!==m[4]?m[4]:void 0,o=m.length>5&&void 0!==m[5]?m[5]:{},e.next=4,this.loadMarkets();case 4:return u=this.market(t),c=r.toUpperCase(),d=u.baseId+"-"+u.quoteId,h={marketSymbol:d,direction:n.toUpperCase(),type:c},f="CEILING_MARKET"===c,(l="CEILING_LIMIT"===c)||f?(p=void 0,l?(h.limit=this.priceToPrecision(t,s),p=this.safeNumber2(o,"ceiling","cost",a)):f&&void 0===(p=this.safeNumber2(o,"ceiling","cost"))&&(p=void 0===s?a:a*s),o=this.omit(o,["ceiling","cost"]),h.ceiling=this.costToPrecision(t,p),h.timeInForce="IMMEDIATE_OR_CANCEL"):(h.quantity=this.amountToPrecision(t,a),"LIMIT"===c?(h.limit=this.priceToPrecision(t,s),h.timeInForce="GOOD_TIL_CANCELLED"):h.timeInForce="IMMEDIATE_OR_CANCEL"),e.next=14,this.privatePostOrders(this.extend(h,o));case 14:return v=e.sent,e.abrupt("return",this.parseOrder(v,u));case 16:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.loadMarkets();case 4:return n={orderId:t},e.next=7,this.privateDeleteOrdersOrderId(this.extend(n,r));case 7:return a=e.sent,e.abrupt("return",this.extend(this.parseOrder(a),{id:t,info:a,status:"canceled"}));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cancelAllOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:{},e.next=4,this.loadMarkets();case 4:return n={},a=void 0,void 0!==t&&(a=this.market(t),n.marketSymbol=a.id),e.next=9,this.privateDeleteOrdersOpen(this.extend(n,r));case 9:for(s=e.sent,o=[],u=0;u<s.length;u++)c=this.safeValue(s[u],"result",{}),o.push(c);return e.abrupt("return",this.parseOrders(o,a));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchDeposits",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,u.length>1&&void 0!==u[1]?u[1]:void 0,r=u.length>2&&void 0!==u[2]?u[2]:void 0,n=u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.loadMarkets();case 6:return a={},s=void 0,void 0!==t&&(s=this.currency(t),a.currencySymbol=s.id),e.next=11,this.privateGetDepositsClosed(this.extend(a,n));case 11:return o=e.sent,e.abrupt("return",this.parseTransactions(o,s,void 0,r));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchWithdrawals",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:void 0,r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},e.next=6,this.loadMarkets();case 6:return s={},o=void 0,void 0!==t&&(o=this.currency(t),s.currencySymbol=o.id),e.next=11,this.privateGetWithdrawalsClosed(this.extend(s,a));case 11:return u=e.sent,e.abrupt("return",this.parseTransactions(u,o,r,n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),i=this.safeNumber(e,"quantity"),n=this.safeString(e,"cryptoAddress"),a=this.safeString(e,"txId"),s=this.parse8601(this.safeString(e,"updatedAt")),o=this.parse8601(this.safeString(e,"createdAt")),u=o||s,c=void 0===o?"deposit":"withdrawal",d=this.safeString(e,"currencySymbol"),h=this.safeCurrencyCode(d,t),l="pending";if("deposit"===c)l="ok";else{var f=this.safeString(e,"status");"ERROR_INVALID_ADDRESS"===f?l="failed":"CANCELLED"===f?l="canceled":"PENDING"===f?l="pending":("COMPLETED"===f||"AUTHORIZED"===f&&void 0!==a)&&(l="ok")}var p=this.safeNumber(e,"txCost");return void 0===p&&"deposit"===c&&(p=0),{info:e,id:r,currency:h,amount:i,address:n,tag:void 0,status:l,type:c,updated:s,txid:a,timestamp:u,datetime:this.iso8601(u),fee:{currency:h,cost:p}}}},{key:"parseTimeInForce",value:function(e){return this.safeString({GOOD_TIL_CANCELLED:"GTC",IMMEDIATE_OR_CANCEL:"IOC",FILL_OR_KILL:"FOK",POST_ONLY_GOOD_TIL_CANCELLED:"PO"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"marketSymbol"),i=(t=this.safeMarket(r,t,"-")).symbol,n=t.quote,a=this.safeStringLower(e,"direction"),s=this.safeString(e,"createdAt"),o=this.safeString(e,"updatedAt"),u=this.safeString(e,"closedAt"),c=void 0;void 0!==u?c=this.parse8601(u):o&&(c=this.parse8601(o));var d=this.parse8601(s),h=this.safeStringLower(e,"type"),l=this.safeNumber(e,"quantity"),f=this.safeNumber(e,"limit"),p=this.safeNumber(e,"fillQuantity"),v=this.safeNumber(e,"commission"),m=this.safeNumber(e,"proceeds"),g=this.safeStringLower(e,"status"),y=this.parseTimeInForce(this.safeString(e,"timeInForce")),b="PO"===y;return this.safeOrder({id:this.safeString(e,"id"),clientOrderId:void 0,timestamp:d,datetime:this.iso8601(d),lastTradeTimestamp:c,symbol:i,type:h,timeInForce:y,postOnly:b,side:a,price:f,stopPrice:void 0,cost:m,average:void 0,amount:l,filled:p,remaining:void 0,status:g,fee:{cost:v,currency:n},info:e,trades:void 0})}},{key:"parseOrders",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return this.options.fetchClosedOrdersFilterBySince?o(u(r.prototype),"parseOrders",this).call(this,e,t,i,n,a):o(u(r.prototype),"parseOrders",this).call(this,e,t,void 0,n,a)}},{key:"parseOrderStatus",value:function(e){return this.safeString({CLOSED:"closed",OPEN:"open",CANCELLED:"canceled",CANCELED:"canceled"},e,e)}},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.loadMarkets();case 4:return n=void 0,e.prev=5,a={orderId:t},e.next=9,this.privateGetOrdersOrderId(this.extend(a,r));case 9:n=e.sent,e.next=19;break;case 12:if(e.prev=12,e.t0=e.catch(5),!this.last_json_response){e.next=18;break}if("UUID_INVALID"!==this.safeString(this.last_json_response,"message")){e.next=18;break}throw new b(this.id+" fetchOrder() error: "+this.last_http_response);case 18:throw e.t0;case 19:return e.abrupt("return",this.parseOrder(n));case 20:case"end":return e.stop()}}),e,this,[[5,12]])})));return function(t){return e.apply(this,arguments)}}()},{key:"orderToTrade",value:function(e){var t=this.safeInteger2(e,"lastTradeTimestamp","timestamp");return{id:this.safeString(e,"id"),side:this.safeString(e,"side"),order:this.safeString(e,"id"),type:this.safeString(e,"type"),price:this.safeNumber(e,"average"),amount:this.safeNumber(e,"filled"),cost:this.safeNumber(e,"cost"),symbol:this.safeString(e,"symbol"),timestamp:t,datetime:this.iso8601(t),fee:this.safeValue(e,"fee"),info:e,takerOrMaker:void 0}}},{key:"ordersToTrades",value:function(e){for(var t=[],r=0;r<e.length;r++)t.push(this.orderToTrade(e[r]));return t}},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:{},e.next=6,this.loadMarkets();case 6:return s={},void 0!==n&&(s.pageSize=n),void 0!==r&&(s.startDate=this.ymdhms(r,"T")+"Z"),o=void 0,void 0!==t&&(o=this.market(t),s.marketSymbol=o.base+"-"+o.quote),e.next=13,this.privateGetOrdersClosed(this.extend(s,a));case 13:return u=e.sent,c=this.parseOrders(u,o),d=this.ordersToTrades(c),e.abrupt("return",this.filterBySymbolSinceLimit(d,t,r,n));case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:void 0,r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},e.next=6,this.loadMarkets();case 6:return s={},void 0!==n&&(s.pageSize=n),void 0!==r&&(s.startDate=this.ymdhms(r,"T")+"Z"),o=void 0,void 0!==t&&(o=this.market(t),s.marketSymbol=o.base+"-"+o.quote),e.next=13,this.privateGetOrdersClosed(this.extend(s,a));case 13:return u=e.sent,e.abrupt("return",this.parseOrders(u,o,r,n));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createDepositAddress",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.currency(t),a={currencySymbol:n.id},e.next=7,this.privatePostAddresses(this.extend(a,r));case 7:if(s=e.sent,o=this.safeString(s,"cryptoAddress"),u=this.safeString(s,"status"),o&&"REQUESTED"!==u){e.next=12;break}throw new w(this.id+" the address for "+t+" is being generated (pending, not ready yet, retry again later)");case 12:return void 0===(c=this.safeString(s,"cryptoAddressTag"))&&n.type in this.options.tag&&(c=o,o=n.address),this.checkAddress(o),e.abrupt("return",{currency:t,address:o,tag:c,info:s});case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchDepositAddress",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.currency(t),a={currencySymbol:n.id},e.next=7,this.privateGetAddressesCurrencySymbol(this.extend(a,r));case 7:if(s=e.sent,o=this.safeString(s,"cryptoAddress"),u=this.safeString(s,"status"),o&&"REQUESTED"!==u){e.next=12;break}throw new w(this.id+" the address for "+t+" is being generated (pending, not ready yet, retry again later)");case 12:return void 0===(c=this.safeString(s,"cryptoAddressTag"))&&n.type in this.options.tag&&(c=o,o=n.address),this.checkAddress(o),e.abrupt("return",{currency:t,address:o,tag:c,info:s});case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"withdraw",value:function(){var e=n(i.mark((function e(t,r,n){var a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.length>3&&void 0!==h[3]?h[3]:void 0,s=h.length>4&&void 0!==h[4]?h[4]:{},this.checkAddress(n),e.next=5,this.loadMarkets();case 5:return o=this.currency(t),u={currencySymbol:o.id,quantity:r,cryptoAddress:n},void 0!==a&&(u.cryptoAddressTag=a),e.next=10,this.privatePostWithdrawals(this.extend(u,s));case 10:return c=e.sent,d=this.safeString(c,"id"),e.abrupt("return",{info:c,id:d});case 13:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"v3",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.implodeParams(this.urls.api[t],{hostname:this.hostname})+"/";if("private"===t){s+=this.version+"/",this.checkRequiredCredentials(),s+=this.implodeParams(e,i),i=this.omit(i,this.extractParams(e));var o="";"POST"===r?o=a=this.json(i):Object.keys(i).length&&(s+="?"+this.rawencode(i));var u=this.hash(this.encode(o),"sha512","hex"),c=this.milliseconds().toString(),d=c+s+r+u,h=this.safeValue(this.options,"subaccountId");void 0!==h&&(d+=h);var l=this.hmac(this.encode(d),this.encode(this.secret),"sha512");n={"Api-Key":this.apiKey,"Api-Timestamp":c,"Api-Content-Hash":u,"Api-Signature":l},void 0!==h&&(n["Api-Subaccount-Id"]=h),"POST"===r&&(n["Content-Type"]="application/json")}else"public"===t&&(s+=this.version+"/"),s+=this.implodeParams(e,i),i=this.omit(i,this.extractParams(e)),Object.keys(i).length&&(s+="?"+this.urlencode(i));return{url:s,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,u){if(void 0!==s&&"{"===a[0]){var c=this.id+" "+a,d=this.safeValue(s,"success");if(void 0===d){var h=this.safeString(s,"code");if(void 0!==h&&(this.throwExactlyMatchedException(this.exceptions.exact,h,c),this.throwBroadlyMatchedException(this.exceptions.broad,h,c)),"NOT_FOUND"===h&&r.indexOf("addresses")>=0)throw new O(c);return}if("string"===typeof d&&(d="true"===d),!d){var l=this.safeString(s,"message");if("APIKEY_INVALID"===l)throw this.options.hasAlreadyAuthenticatedSuccessfully?new x(c):new m(c);if("INVALID_ORDER"===l){if(r.indexOf("cancel")>=0){var f=r.split("?");if(f.length>1){for(var v=f[1].split("&"),g=v.length,y=void 0,k=0;k<g;k++){var w=v[k].split("=");if("uuid"===w[0]){y=w[1];break}}throw new b(void 0!==y?this.id+" cancelOrder "+y+" "+this.json(s):this.id+" cancelOrder "+this.json(s))}}}throw this.throwExactlyMatchedException(this.exceptions.exact,l,c),void 0!==l&&this.throwBroadlyMatchedException(this.exceptions.broad,l,c),new p(c)}}}}]),r}(h)},function(e,t,r){"use strict";var i=r(7),n=r(8),a=r(1),s=r(2),o=r(6),u=r(3),c=r(4),d=r(5),h=r(11),l=r(10),f=l.ExchangeError,p=l.BadSymbol,v=l.AuthenticationError,m=l.InsufficientFunds,g=l.InvalidOrder,y=l.ArgumentsRequired,b=l.OrderNotFound,x=l.InvalidAddress,k=l.BadRequest,w=l.RateLimitExceeded,_=l.PermissionDenied,S=l.ExchangeNotAvailable,O=l.AccountSuspended,T=l.OnMaintenance,C=r(18),I=C.SIGNIFICANT_DIGITS,M=C.DECIMAL_PLACES,A=C.TRUNCATE,E=C.ROUND,N=r(12);e.exports=function(e){c(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(u(r.prototype),"describe",this).call(this),{id:"bitvavo",name:"Bitvavo",countries:["NL"],rateLimit:500,version:"v2",certified:!0,pro:!0,has:{CORS:!1,publicAPI:!0,privateAPI:!0,cancelAllOrders:!0,cancelOrder:!0,createOrder:!0,editOrder:!0,fetchBalance:!0,fetchCurrencies:!0,fetchDepositAddress:!0,fetchDeposits:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrders:!0,fetchOrderBook:!0,fetchMarkets:!0,fetchTicker:!0,fetchTickers:!0,fetchTime:!0,fetchTrades:!0,fetchWithdrawals:!0,withdraw:!0},timeframes:{"1m":"1m","5m":"5m","15m":"15m","30m":"30m","1h":"1h","2h":"2h","4h":"4h","6h":"6h","8h":"8h","12h":"12h","1d":"1d"},urls:{logo:"https://user-images.githubusercontent.com/1294454/83165440-2f1cf200-a116-11ea-9046-a255d09fb2ed.jpg",api:{public:"https://api.bitvavo.com",private:"https://api.bitvavo.com"},www:"https://bitvavo.com/",doc:"https://docs.bitvavo.com/",fees:"https://bitvavo.com/en/fees",referral:"https://bitvavo.com/?a=24F34952F7"},api:{public:{get:["time","markets","assets","{market}/book","{market}/trades","{market}/candles","ticker/price","ticker/book","ticker/24h"]},private:{get:["order","orders","ordersOpen","trades","balance","deposit","depositHistory","withdrawalHistory"],post:["order","withdrawal"],put:["order"],delete:["order","orders"]}},fees:{trading:{tierBased:!0,percentage:!0,taker:.0025,maker:.002,tiers:{taker:[[0,.0025],[5e4,.0024],[1e5,.0022],[25e4,.002],[5e5,.0018],[1e6,.0016],[25e5,.0014],[5e6,.0012],[1e7,.001]],maker:[[0,.002],[5e4,.0015],[1e5,.001],[25e4,6e-4],[5e5,3e-4],[1e6,1e-4],[25e5,-1e-4],[5e6,-3e-4],[1e7,-5e-4]]}}},requiredCredentials:{apiKey:!0,secret:!0},exceptions:{exact:{101:f,102:k,103:w,104:w,105:_,107:S,108:S,109:S,110:k,200:k,201:k,202:k,203:p,204:k,205:k,206:k,210:g,211:g,212:g,213:g,214:g,215:g,216:m,217:g,230:f,231:f,232:k,233:g,234:g,235:f,236:k,240:b,300:v,301:v,302:v,303:v,304:v,305:v,306:v,307:_,308:v,309:v,310:_,311:_,312:_,315:k,317:O,400:f,401:f,402:_,403:_,404:T,405:f,406:k,407:f,408:m,409:x,410:f,411:k,412:x,413:x,414:f},broad:{"start parameter is invalid":k,"symbol parameter is invalid":p,"amount parameter is invalid":g,"orderId parameter is invalid":g}},options:{"BITVAVO-ACCESS-WINDOW":1e4,fetchCurrencies:{expires:1e3}},precisionMode:I,commonCurrencies:{MIOTA:"IOTA"}})}},{key:"currencyToPrecision",value:function(e,t){return this.decimalToPrecision(t,0,this.currencies[e].precision)}},{key:"amountToPrecision",value:function(e,t){return this.decimalToPrecision(t,A,this.markets[e].precision.amount,M)}},{key:"priceToPrecision",value:function(e,t){return t=this.decimalToPrecision(t,E,this.markets[e].precision.price,this.precisionMode),this.decimalToPrecision(t,A,8,M)}},{key:"fetchTime",value:function(){var e=n(i.mark((function e(){var t,r,n=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},e.next=3,this.publicGetTime(t);case 3:return r=e.sent,e.abrupt("return",this.safeInteger(r,"time"));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p,v,m,g,y,b,x=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=x.length>0&&void 0!==x[0]?x[0]:{},e.next=3,this.publicGetMarkets(t);case 3:return r=e.sent,e.next=6,this.fetchCurrenciesFromCache(t);case 6:for(n=e.sent,a=this.indexBy(n,"symbol"),s=[],o=0;o<r.length;o++)u=r[o],c=this.safeString(u,"market"),d=this.safeString(u,"base"),h=this.safeString(u,"quote"),l=this.safeCurrencyCode(d),f=this.safeCurrencyCode(h),p=l+"/"+f,v=this.safeString(u,"status"),m="trading"===v,g=this.safeValue(a,d),y=void 0,void 0!==g&&(y=this.safeInteger(g,"decimals",8)),b={price:this.safeInteger(u,"pricePrecision"),amount:y},s.push({id:c,symbol:p,base:l,quote:f,baseId:d,quoteId:h,info:u,active:m,precision:b,limits:{amount:{min:this.safeNumber(u,"minOrderInBaseAsset"),max:void 0},price:{min:void 0,max:void 0},cost:{min:this.safeNumber(u,"minOrderInQuoteAsset"),max:void 0}}});return e.abrupt("return",s);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchCurrenciesFromCache",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.length>0&&void 0!==u[0]?u[0]:{},r=this.safeValue(this.options,"fetchCurrencies",{}),n=this.safeInteger(r,"timestamp"),a=this.safeInteger(r,"expires",1e3),s=this.milliseconds(),!(void 0===n||s-n>a)){e.next=10;break}return e.next=8,this.publicGetAssets(t);case 8:o=e.sent,this.options.fetchCurrencies=this.extend(r,{response:o,timestamp:s});case 10:return e.abrupt("return",this.safeValue(this.options.fetchCurrencies,"response"));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchCurrencies",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p,v,m=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=m.length>0&&void 0!==m[0]?m[0]:{},e.next=3,this.fetchCurrenciesFromCache(t);case 3:for(r=e.sent,n={},a=0;a<r.length;a++)s=r[a],o=this.safeString(s,"symbol"),u=this.safeCurrencyCode(o),c=this.safeValue(s,"depositStatus"),d="OK"===c,h=this.safeValue(s,"withdrawalStatus"),l="OK"===h,f=d&&l,p=this.safeString(s,"name"),v=this.safeInteger(s,"decimals",8),n[u]={id:o,info:s,code:u,name:p,active:f,fee:this.safeNumber(s,"withdrawalFee"),precision:v,limits:{amount:{min:void 0,max:void 0},withdraw:{min:this.safeNumber(s,"withdrawalMinAmount"),max:void 0}}};return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={market:n.id},e.next=7,this.publicGetTicker24h(this.extend(a,r));case 7:return s=e.sent,e.abrupt("return",this.parseTicker(s,n));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"market"),i=this.safeSymbol(r,t,"-"),n=this.safeInteger(e,"timestamp"),a=this.safeNumber(e,"last"),s=this.safeNumber(e,"volume"),o=this.safeNumber(e,"volumeQuote"),u=this.vwap(s,o),c=void 0,d=void 0,h=void 0,l=this.safeNumber(e,"open");void 0!==l&&void 0!==a&&(c=a-l,l>0&&(d=c/l*100),h=this.sum(l,a)/2);var f={symbol:i,timestamp:n,datetime:this.iso8601(n),high:this.safeNumber(e,"high"),low:this.safeNumber(e,"low"),bid:this.safeNumber(e,"bid"),bidVolume:this.safeNumber(e,"bidSize"),ask:this.safeNumber(e,"ask"),askVolume:this.safeNumber(e,"askSize"),vwap:u,open:l,close:a,last:a,previousClose:void 0,change:c,percentage:d,average:h,baseVolume:s,quoteVolume:o,info:e};return f}},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:void 0,r=a.length>1&&void 0!==a[1]?a[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetTicker24h(r);case 6:return n=e.sent,e.abrupt("return",this.parseTickers(n,t));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={market:s.id},void 0!==n&&(o.limit=n),void 0!==r&&(o.start=r),e.next=11,this.publicGetMarketTrades(this.extend(o,a));case 11:return u=e.sent,e.abrupt("return",this.parseTrades(u,s,r,n));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"price"),i=this.safeString(e,"amount"),n=this.parseNumber(r),a=this.parseNumber(i),s=this.parseNumber(N.stringMul(r,i)),o=this.safeInteger(e,"timestamp"),u=this.safeString(e,"side"),c=this.safeString2(e,"id","fillId"),d=this.safeInteger(e,"market"),h=this.safeSymbol(d,t,"-"),l=this.safeValue(e,"taker"),f=void 0;void 0!==l&&(f=l?"taker":"maker");var p=this.safeNumber(e,"fee"),v=void 0;if(void 0!==p){var m=this.safeString(e,"feeCurrency"),g=this.safeCurrencyCode(m);v={cost:p,currency:g}}var y=this.safeString(e,"orderId");return{info:e,id:c,symbol:h,timestamp:o,datetime:this.iso8601(o),order:y,type:void 0,side:u,takerOrMaker:f,price:n,amount:a,cost:s,fee:v}}},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:{},e.next=4,this.loadMarkets();case 4:return a={market:this.marketId(t)},void 0!==r&&(a.depth=r),e.next=8,this.publicGetMarketBook(this.extend(a,n));case 8:return s=e.sent,(o=this.parseOrderBook(s)).nonce=this.safeInteger(s,"nonce"),e.abrupt("return",o);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){return[this.safeInteger(e,0),this.safeNumber(e,1),this.safeNumber(e,2),this.safeNumber(e,3),this.safeNumber(e,4),this.safeNumber(e,5)]}},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:"1m",n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:void 0,s=d.length>4&&void 0!==d[4]?d[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),u={market:o.id,interval:this.timeframes[r]},void 0!==n&&(u.start=n),void 0!==a&&(u.limit=a),e.next=12,this.publicGetMarketCandles(this.extend(u,s));case 12:return c=e.sent,e.abrupt("return",this.parseOHLCVs(c,o,r,n,a));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetBalance(t);case 5:for(r=e.sent,n={info:r},a=0;a<r.length;a++)s=r[a],o=this.safeString(s,"symbol"),u=this.safeCurrencyCode(o),(c=this.account()).free=this.safeString(s,"available"),c.used=this.safeString(s,"inOrder"),n[u]=c;return e.abrupt("return",this.parseBalance(n,!1));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchDepositAddress",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.currency(t),a={symbol:n.id},e.next=7,this.privateGetDeposit(this.extend(a,r));case 7:return s=e.sent,o=this.safeString(s,"address"),u=this.safeString(s,"paymentId"),this.checkAddress(o),e.abrupt("return",{currency:t,address:o,tag:u,info:s});case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,u,c,d,h,l,f,p,v,m=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=m.length>4&&void 0!==m[4]?m[4]:void 0,o=m.length>5&&void 0!==m[5]?m[5]:{},e.next=4,this.loadMarkets();case 4:if(u=this.market(t),c={market:u.id,side:n,orderType:r},d="stopLossLimit"===r||"takeProfitLimit"===r,h="stopLoss"===r||"takeProfit"===r,"market"!==r){e.next=15;break}l=void 0,void 0!==(l=void 0!==s?a*s:this.safeNumber2(o,"cost","amountQuote"))?(f=u.precision.price,c.amountQuote=this.decimalToPrecision(l,A,f,this.precisionMode)):c.amount=this.amountToPrecision(t,a),o=this.omit(o,["cost","amountQuote"]),e.next=38;break;case 15:if("limit"!==r){e.next=20;break}c.price=this.priceToPrecision(t,s),c.amount=this.amountToPrecision(t,a),e.next=38;break;case 20:if(!h&&!d){e.next=38;break}if(void 0!==(p=this.safeNumber2(o,"stopPrice","triggerAmount"))){e.next=33;break}if(!d){e.next=27;break}throw new y(this.id+" createOrder requires a stopPrice parameter for a "+r+" order");case 27:if(!h){e.next=33;break}if(void 0!==s){e.next=32;break}throw new y(this.id+" createOrder requires a price argument or a stopPrice parameter for a "+r+" order");case 32:p=s;case 33:d&&(c.price=this.priceToPrecision(t,s)),o=this.omit(o,["stopPrice","triggerAmount"]),c.triggerAmount=this.priceToPrecision(t,p),c.triggerType="price",c.amount=this.amountToPrecision(t,a);case 38:return e.next=40,this.privatePostOrder(this.extend(c,o));case 40:return v=e.sent,e.abrupt("return",this.parseOrder(v,u));case 42:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"editOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,u,c,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=f.length>4&&void 0!==f[4]?f[4]:void 0,o=f.length>5&&void 0!==f[5]?f[5]:void 0,u=f.length>6&&void 0!==f[6]?f[6]:{},e.next=5,this.loadMarkets();case 5:if(c=this.market(r),d={},h=this.safeNumber(u,"amountRemaining"),u=this.omit(u,"amountRemaining"),void 0!==o&&(d.price=this.priceToPrecision(r,o)),void 0!==s&&(d.amount=this.amountToPrecision(r,s)),void 0!==h&&(d.amountRemaining=this.amountToPrecision(r,h)),d=this.extend(d,u),!Object.keys(d).length){e.next=22;break}return d.orderId=t,d.market=c.id,e.next=18,this.privatePutOrder(this.extend(d,u));case 18:return l=e.sent,e.abrupt("return",this.parseOrder(l,c));case 22:throw new y(this.id+" editOrder() requires an amount argument, or a price argument, or non-empty params");case 23:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:{},void 0!==r){e.next=4;break}throw new y(this.id+" cancelOrder() requires a symbol argument");case 4:return e.next=6,this.loadMarkets();case 6:return a=this.market(r),s={orderId:t,market:a.id},e.next=10,this.privateDeleteOrder(this.extend(s,n));case 10:return o=e.sent,e.abrupt("return",this.parseOrder(o,a));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cancelAllOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=4,this.loadMarkets();case 4:return n={},a=void 0,void 0!==t&&(a=this.market(t),n.market=a.id),e.next=9,this.privateDeleteOrders(this.extend(n,r));case 9:return s=e.sent,e.abrupt("return",this.parseOrders(s,a));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:{},void 0!==r){e.next=4;break}throw new y(this.id+" fetchOrder() requires a symbol argument");case 4:return e.next=6,this.loadMarkets();case 6:return a=this.market(r),s={orderId:t,market:a.id},e.next=10,this.privateGetOrder(this.extend(s,n));case 10:return o=e.sent,e.abrupt("return",this.parseOrder(o,a));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=c.length>0&&void 0!==c[0]?c[0]:void 0,r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},void 0!==t){e.next=6;break}throw new y(this.id+" fetchOrders() requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.market(t),o={market:s.id},void 0!==r&&(o.start=r),void 0!==n&&(o.limit=n),e.next=14,this.privateGetOrders(this.extend(o,a));case 14:return u=e.sent,e.abrupt("return",this.parseOrders(u,s,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:void 0,r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},e.next=6,this.loadMarkets();case 6:return s={},o=void 0,void 0!==t&&(o=this.market(t),s.market=o.id),e.next=11,this.privateGetOrdersOpen(this.extend(s,a));case 11:return u=e.sent,e.abrupt("return",this.parseOrders(u,o,r,n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({new:"open",canceled:"canceled",canceledAuction:"canceled",canceledSelfTradePrevention:"canceled",canceledIOC:"canceled",canceledFOK:"canceled",canceledMarketProtection:"canceled",canceledPostOnly:"canceled",filled:"closed",partiallyFilled:"open",expired:"canceled",rejected:"canceled",awaitingTrigger:"open"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"orderId"),i=this.safeInteger(e,"created"),n=this.safeString(e,"market"),a=this.safeSymbol(n,t,"-"),s=this.parseOrderStatus(this.safeString(e,"status")),o=this.safeString(e,"side"),u=this.safeString(e,"orderType"),c=this.safeNumber(e,"price"),d=this.safeNumber(e,"amount"),h=this.safeNumber(e,"amountRemaining"),l=this.safeNumber(e,"filledAmount"),f=this.safeNumber(e,"filledAmountQuote"),p=void 0,v=this.safeNumber(e,"feePaid");if(void 0!==v){var m=this.safeString(e,"feeCurrency"),g=this.safeCurrencyCode(m);p={cost:v,currency:g}}var y=this.safeValue(e,"fills",[]),b=this.parseTrades(y,t,void 0,void 0,{symbol:a,order:r,side:o,type:u}),x=this.safeString(e,"timeInForce"),k=this.safeValue(e,"postOnly"),w=this.safeNumber(e,"triggerPrice");return this.safeOrder({info:e,id:r,clientOrderId:void 0,timestamp:i,datetime:this.iso8601(i),lastTradeTimestamp:void 0,symbol:a,type:u,timeInForce:x,postOnly:k,side:o,price:c,stopPrice:w,amount:d,cost:f,average:void 0,filled:l,remaining:h,status:s,fee:p,trades:b})}},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=c.length>0&&void 0!==c[0]?c[0]:void 0,r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},void 0!==t){e.next=6;break}throw new y(this.id+" fetchMyTrades() requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.market(t),o={market:s.id},void 0!==r&&(o.start=r),void 0!==n&&(o.limit=n),e.next=14,this.privateGetTrades(this.extend(o,a));case 14:return u=e.sent,e.abrupt("return",this.parseTrades(u,s,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"withdraw",value:function(){var e=n(i.mark((function e(t,r,n){var a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=d.length>3&&void 0!==d[3]?d[3]:void 0,s=d.length>4&&void 0!==d[4]?d[4]:{},this.checkAddress(n),e.next=5,this.loadMarkets();case 5:return o=this.currency(t),u={symbol:o.id,amount:this.currencyToPrecision(t,r),address:n},void 0!==a&&(u.paymentId=a),e.next=10,this.privatePostWithdrawal(this.extend(u,s));case 10:return c=e.sent,e.abrupt("return",this.parseTransaction(c,o));case 12:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"fetchWithdrawals",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:void 0,r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},e.next=6,this.loadMarkets();case 6:return s={},o=void 0,void 0!==t&&(o=this.currency(t),s.symbol=o.id),void 0!==r&&(s.start=r),void 0!==n&&(s.limit=n),e.next=13,this.privateGetWithdrawalHistory(this.extend(s,a));case 13:return u=e.sent,e.abrupt("return",this.parseTransactions(u,o,r,n));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchDeposits",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:void 0,r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},e.next=6,this.loadMarkets();case 6:return s={},o=void 0,void 0!==t&&(o=this.currency(t),s.symbol=o.id),void 0!==r&&(s.start=r),void 0!==n&&(s.limit=n),e.next=13,this.privateGetDepositHistory(this.extend(s,a));case 13:return u=e.sent,e.abrupt("return",this.parseTransactions(u,o,r,n));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTransactionStatus",value:function(e){return this.safeString({awaiting_processing:"pending",awaiting_email_confirmation:"pending",awaiting_bitvavo_inspection:"pending",approved:"pending",sending:"pending",in_mempool:"pending",processed:"pending",completed:"ok",canceled:"canceled"},e,e)}},{key:"parseTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0,i=this.safeInteger(e,"timestamp"),n=this.safeString(e,"symbol"),a=this.safeCurrencyCode(n,t),s=this.parseTransactionStatus(this.safeString(e,"status")),o=this.safeNumber(e,"amount"),u=this.safeString(e,"address"),c=this.safeString(e,"txId"),d=void 0,h=this.safeNumber(e,"fee");void 0!==h&&(d={cost:h,currency:a});var l=void 0;l="success"in e?"withdrawal":void 0===s?"deposit":"withdrawal";var f=this.safeString(e,"paymentId");return{info:e,id:r,txid:c,timestamp:i,datetime:this.iso8601(i),addressFrom:void 0,address:u,addressTo:u,tagFrom:void 0,tag:f,tagTo:f,type:l,amount:o,currency:a,status:s,updated:void 0,fee:d}}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.omit(i,this.extractParams(e)),o="/"+this.version+"/"+this.implodeParams(e,i),u="GET"===r||"DELETE"===r;if(u&&Object.keys(s).length&&(o+="?"+this.urlencode(s)),"private"===t){this.checkRequiredCredentials();var c="";u||Object.keys(s).length&&(c=a=this.json(s));var d=this.milliseconds().toString(),h=d+r+o+c,l=this.hmac(this.encode(h),this.encode(this.secret)),f=this.safeString(this.options,"BITVAVO-ACCESS-WINDOW","10000");n={"BITVAVO-ACCESS-KEY":this.apiKey,"BITVAVO-ACCESS-SIGNATURE":l,"BITVAVO-ACCESS-TIMESTAMP":d,"BITVAVO-ACCESS-WINDOW":f},u||(n["Content-Type"]="application/json")}return{url:o=this.urls.api[t]+o,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,u){if(void 0!==s){var c=this.safeString(s,"errorCode"),d=this.safeString(s,"error");if(void 0!==c){var h=this.id+" "+a;throw this.throwBroadlyMatchedException(this.exceptions.broad,d,h),this.throwExactlyMatchedException(this.exceptions.exact,c,h),new f(h)}}}}]),r}(h)},function(e,t,r){"use strict";var i=r(21),n=r(7),a=r(8),s=r(1),o=r(2),u=r(6),c=r(3),d=r(4),h=r(5),l=r(11),f=r(10),p=f.ExchangeError,v=f.ArgumentsRequired,m=f.ExchangeNotAvailable,g=f.PermissionDenied,y=f.InvalidOrder,b=f.AuthenticationError,x=f.InsufficientFunds,k=f.OrderNotFound,w=f.DDoSProtection,_=f.OnMaintenance,S=f.RateLimitExceeded,O=r(12);e.exports=function(e){d(r,e);var t=h(r);function r(){return s(this,r),t.apply(this,arguments)}return o(r,[{key:"describe",value:function(){return this.deepExtend(u(c(r.prototype),"describe",this).call(this),{id:"bitz",name:"Bit-Z",countries:["HK"],rateLimit:2e3,version:"v2",userAgent:this.userAgents.chrome,has:{cancelOrder:!0,cancelOrders:!0,createOrder:!0,createMarketOrder:!1,fetchBalance:!0,fetchDeposits:!0,fetchClosedOrders:!0,fetchMarkets:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchTicker:!0,fetchTickers:!0,fetchTime:!0,fetchTrades:!0,fetchTransactions:!1,fetchWithdrawals:!0,withdraw:!0},timeframes:{"1m":"1min","5m":"5min","15m":"15min","30m":"30min","1h":"60min","4h":"4hour","1d":"1day","5d":"5day","1w":"1week","1M":"1mon"},hostname:"apiv2.bitz.com",urls:{logo:"https://user-images.githubusercontent.com/51840849/87443304-fec5e000-c5fd-11ea-98f8-ba8e67f7eaff.jpg",api:{market:"https://{hostname}",trade:"https://{hostname}",assets:"https://{hostname}"},www:"https://www.bitz.com",doc:"https://apidocv2.bitz.plus/en/",fees:"https://www.bitz.com/fee?type=1",referral:"https://u.bitz.com/register?invite_code=1429193"},api:{market:{get:["ticker","depth","order","tickerall","kline","symbolList","getServerTime","currencyRate","currencyCoinRate","coinRate","getContractCoin","getContractKline","getContractOrderBook","getContractTradesHistory","getContractTickers"]},trade:{post:["addEntrustSheet","cancelEntrustSheet","cancelAllEntrustSheet","coinOut","getUserHistoryEntrustSheet","getUserNowEntrustSheet","getEntrustSheetInfo","depositOrWithdraw","getCoinAddress","getCoinAddressList","marketTrade","addEntrustSheetBatch"]},assets:{post:["getUserAssets"]},contract:{post:["addContractTrade","cancelContractTrade","getContractActivePositions","getContractAccountInfo","getContractMyPositions","getContractOrderResult","getContractTradeResult","getContractOrder","getContractMyHistoryTrade","getContractMyTrades"]}},fees:{trading:{maker:.002,taker:.002},funding:{withdraw:{BTC:"0.5%",DKKT:"0.5%",ETH:.01,USDT:"0.5%",LTC:"0.5%",FCT:"0.5%",LSK:"0.5%",HXI:"0.8%",ZEC:"0.5%",DOGE:"0.5%",MZC:"0.5%",ETC:"0.5%",GXS:"0.5%",XPM:"0.5%",PPC:"0.5%",BLK:"0.5%",XAS:"0.5%",HSR:"0.5%",NULS:5,VOISE:350,PAY:1.5,EOS:.6,YBCT:35,OMG:.3,OTN:.4,BTX:"0.5%",QTUM:"0.5%",DASH:"0.5%",GAME:"0.5%",BCH:"0.5%",GNT:9,SSS:1500,ARK:"0.5%",PART:"0.5%",LEO:"0.5%",DGB:"0.5%",ZSC:130,VIU:350,BTG:"0.5%",ARN:10,VTC:"0.5%",BCD:"0.5%",TRX:200,HWC:"0.5%",UNIT:"0.5%",OXY:"0.5%",MCO:.35,SBTC:"0.5%",BCX:"0.5%",ETF:"0.5%",PYLNT:.4,XRB:"0.5%",ETP:"0.5%"}}},precision:{amount:8,price:8},options:{fetchOHLCVVolume:!0,fetchOHLCVWarning:!0,lastNonceTimestamp:0},commonCurrencies:{BOX:"BOX Token",LEO:"LeoCoin",XRB:"NANO",PXC:"Pixiecoin",VTC:"VoteCoin",TTC:"TimesChain"},exceptions:{"-102":p,"-103":b,"-104":m,"-105":b,"-106":m,"-109":b,"-110":w,"-111":g,"-112":_,"-114":S,"-117":b,"-100015":b,"-100044":p,"-100101":p,"-100201":p,"-100301":p,"-100401":p,"-100302":p,"-100303":p,"-200003":b,"-200005":g,"-200025":m,"-200027":y,"-200028":y,"-200029":y,"-200030":y,"-200031":x,"-200032":p,"-200033":p,"-200034":k,"-200035":k,"-200037":y,"-200038":p,"-200055":k,"-300069":b,"-300101":p,"-300102":y,"-300103":b,"-301001":m}})}},{key:"fetchMarkets",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,u,c,d,h,l,f,p,v,m,g=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=g.length>0&&void 0!==g[0]?g[0]:{},e.next=3,this.marketGetSymbolList(t);case 3:for(r=e.sent,i=this.safeValue(r,"data"),a=Object.keys(i),s=[],o=0;o<a.length;o++)u=a[o],c=i[u],d=this.safeString(c,"id"),h=this.safeString(c,"coinFrom"),l=this.safeString(c,"coinTo"),f=h.toUpperCase(),p=l.toUpperCase(),f=this.safeCurrencyCode(f),p=this.safeCurrencyCode(p),v=f+"/"+p,m={amount:this.safeInteger(c,"numberFloat"),price:this.safeInteger(c,"priceFloat")},s.push({info:c,id:u,numericId:d,symbol:v,base:f,quote:p,baseId:h,quoteId:l,active:!0,precision:m,limits:{amount:{min:this.safeNumber(c,"minTrade"),max:this.safeNumber(c,"maxTrade")},price:{min:Math.pow(10,-m.price),max:void 0},cost:{min:void 0,max:void 0}}});return e.abrupt("return",s);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,u,c,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.assetsPostGetUserAssets(t);case 5:for(r=e.sent,i=this.safeValue(r.data,"info"),a={info:r},s=0;s<i.length;s++)o=i[s],u=this.safeString(o,"name"),c=this.safeCurrencyCode(u),(d=this.account()).used=this.safeString(o,"lock"),d.total=this.safeString(o,"num"),d.free=this.safeString(o,"over"),a[c]=d;return e.abrupt("return",this.parseBalance(a,!1));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0,i=this.safeString(e,"symbol"),n=this.safeSymbol(i,t,"_"),a=this.safeNumber(e,"now"),s=this.safeNumber(e,"open"),o=void 0,u=void 0;return void 0!==a&&void 0!==s&&(o=a-s,u=this.sum(a,s)/2),{symbol:n,timestamp:r,datetime:this.iso8601(r),high:this.safeNumber(e,"high"),low:this.safeNumber(e,"low"),bid:this.safeNumber(e,"bidPrice"),bidVolume:this.safeNumber(e,"bidQty"),ask:this.safeNumber(e,"askPrice"),askVolume:this.safeNumber(e,"askQty"),vwap:void 0,open:s,close:a,last:a,previousClose:void 0,change:o,percentage:this.safeNumber(e,"priceChange24h"),average:u,baseVolume:this.safeNumber(e,"volume"),quoteVolume:this.safeNumber(e,"quoteVolume"),info:e}}},{key:"parseMicrotime",value:function(e){if(void 0===e)return e;var t=e.split(" "),r=parseFloat(t[0]),i=parseInt(t[1]),n=this.sum(i,r);return parseInt(1e3*n)}},{key:"fetchTicker",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,u,c=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:{},e.next=3,this.loadMarkets();case 3:return i=this.market(t),a={symbol:i.id},e.next=7,this.marketGetTicker(this.extend(a,r));case 7:return s=e.sent,o=this.parseTicker(s.data,i),u=this.parseMicrotime(this.safeString(s,"microtime")),e.abrupt("return",this.extend(o,{timestamp:u,datetime:this.iso8601(u)}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTickers",value:function(){var e=a(n.mark((function e(){var t,r,a,s,o,u,c,d,h,l,f,p,v,m,g,y,b,x,k,w,_=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=_.length>0&&void 0!==_[0]?_[0]:void 0,r=_.length>1&&void 0!==_[1]?_[1]:{},e.next=4,this.loadMarkets();case 4:return a={},void 0!==t&&(s=this.marketIds(t),a.symbols=s.join(",")),e.next=8,this.marketGetTickerall(this.extend(a,r));case 8:for(o=e.sent,u=this.safeValue(o,"data"),c=this.parseMicrotime(this.safeString(o,"microtime")),d={},h=Object.keys(u),l=0;l<h.length;l++)f=h[l],p=u[f],v=void 0,f in this.markets_by_id&&(v=this.markets_by_id[f]),p=this.parseTicker(u[f],v),void 0===(m=p.symbol)&&(void 0!==v?m=v.symbol:(g=f.split("_"),y=i(g,2),b=y[0],x=y[1],k=this.safeCurrencyCode(b),w=this.safeCurrencyCode(x),m=k+"/"+w)),void 0!==m&&(d[m]=this.extend(p,{timestamp:c,datetime:this.iso8601(c)}));return e.abrupt("return",this.filterByArray(d,"symbol",t));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTime",value:function(){var e=a(n.mark((function e(){var t,r,i=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},e.next=3,this.marketGetGetServerTime(t);case 3:return r=e.sent,e.abrupt("return",this.safeTimestamp(r,"time"));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u.length>1&&void 0!==u[1]?u[1]:void 0,r=u.length>2&&void 0!==u[2]?u[2]:{},e.next=4,this.loadMarkets();case 4:return i={symbol:this.marketId(t)},e.next=7,this.marketGetDepth(this.extend(i,r));case 7:return a=e.sent,s=this.safeValue(a,"data"),o=this.parseMicrotime(this.safeString(a,"microtime")),e.abrupt("return",this.parseOrderBook(s,o));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),i=this.safeTimestamp(e,"T"),n=void 0;void 0!==t&&(n=t.symbol);var a=this.safeString(e,"p"),s=this.safeString(e,"n"),o=this.parseNumber(a),u=this.parseNumber(s),c=this.parseNumber(O.stringMul(a,s)),d=this.safeString(e,"s");return{timestamp:i,datetime:this.iso8601(i),symbol:n,id:r,order:void 0,type:"limit",side:d,takerOrMaker:void 0,price:o,amount:u,cost:c,fee:void 0,info:e}}},{key:"fetchTrades",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,u,c=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,i=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={symbol:s.id},e.next=9,this.marketGetOrder(this.extend(o,a));case 9:return u=e.sent,e.abrupt("return",this.parseTrades(u.data,s,r,i));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){return[this.safeInteger(e,"time"),this.safeNumber(e,"open"),this.safeNumber(e,"high"),this.safeNumber(e,"low"),this.safeNumber(e,"close"),this.safeNumber(e,"volume")]}},{key:"fetchOHLCV",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,u,c,d,h,l,f=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=f.length>1&&void 0!==f[1]?f[1]:"1m",i=f.length>2&&void 0!==f[2]?f[2]:void 0,a=f.length>3&&void 0!==f[3]?f[3]:void 0,s=f.length>4&&void 0!==f[4]?f[4]:{},e.next=6,this.loadMarkets();case 6:if(o=1e3*this.parseTimeframe(r),u=this.market(t),c={symbol:u.id,resolution:this.timeframes[r]},void 0===a){e.next=14;break}c.size=Math.min(a,300),void 0!==i&&(c.to=this.sum(i,a*o*1e3)),e.next=16;break;case 14:if(void 0===i){e.next=16;break}throw new v(this.id+" fetchOHLCV() requires a limit argument if the since argument is specified");case 16:return e.next=18,this.marketGetKline(this.extend(c,s));case 18:return d=e.sent,h=this.safeValue(d,"data",{}),l=this.safeValue(h,"bars",[]),e.abrupt("return",this.parseOHLCVs(l,u,r,i,a));case 22:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({0:"open",1:"open",2:"closed",3:"canceled"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),i=void 0;if(void 0===t){var n=this.safeString(e,"coinFrom"),a=this.safeString(e,"coinTo");if(void 0!==n&&void 0!==a){var s=n+"_"+a;if(s in this.markets_by_id)t=this.safeValue(this.markets_by_id,s);else{var o=this.safeCurrencyCode(n),u=this.safeCurrencyCode(a);i=o+"/"+u}}}void 0!==t&&(i=t.symbol);var c=this.safeString(e,"flag");void 0!==c&&(c="sale"===c?"sell":"buy");var d=this.safeNumber(e,"price"),h=this.safeNumber(e,"number"),l=this.safeNumber(e,"numberOver"),f=this.safeNumber(e,"numberDeal"),p=this.safeInteger(e,"timestamp");void 0===p&&(p=this.safeTimestamp(e,"created"));var v=this.safeNumber(e,"orderTotalPrice"),m=this.parseOrderStatus(this.safeString(e,"status"));return this.safeOrder({id:r,clientOrderId:void 0,datetime:this.iso8601(p),timestamp:p,lastTradeTimestamp:void 0,status:m,symbol:i,type:"limit",timeInForce:void 0,postOnly:void 0,side:c,price:d,stopPrice:void 0,cost:v,amount:h,filled:f,remaining:l,trades:void 0,fee:void 0,info:e,average:void 0})}},{key:"createOrder",value:function(){var e=a(n.mark((function e(t,r,i,a){var s,o,u,c,d,h,l,f,v=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=v.length>4&&void 0!==v[4]?v[4]:void 0,o=v.length>5&&void 0!==v[5]?v[5]:{},e.next=4,this.loadMarkets();case 4:if("limit"===r){e.next=6;break}throw new p(this.id+" createOrder allows limit orders only");case 6:if(u=this.market(t),c="buy"===i?"1":"2",this.password){e.next=10;break}throw new p(this.id+' createOrder() requires you to set exchange.password = "YOUR_TRADING_PASSWORD" (a trade password is NOT THE SAME as your login password)');case 10:return d={symbol:u.id,type:c,price:this.priceToPrecision(t,s),number:this.amountToPrecision(t,a),tradePwd:this.password},e.next=13,this.tradePostAddEntrustSheet(this.extend(d,o));case 13:return h=e.sent,l=this.parseMicrotime(this.safeString(h,"microtime")),f=this.extend({timestamp:l},h.data),e.abrupt("return",this.parseOrder(f,u));case 17:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=a(n.mark((function e(t){var r,i,a,s=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.loadMarkets();case 4:return i={entrustSheetId:t},e.next=7,this.tradePostCancelEntrustSheet(this.extend(i,r));case 7:return a=e.sent,e.abrupt("return",a);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cancelOrders",value:function(){var e=a(n.mark((function e(t){var r,i,a,s=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.loadMarkets();case 4:return i={ids:t.join(",")},e.next=7,this.tradePostCancelEntrustSheet(this.extend(i,r));case 7:return a=e.sent,e.abrupt("return",a);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=a(n.mark((function e(t){var r,i,a,s=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.loadMarkets();case 4:return i={entrustSheetId:t},e.next=7,this.tradePostGetEntrustSheetInfo(this.extend(i,r));case 7:return a=e.sent,e.abrupt("return",this.parseOrder(a.data));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrdersWithMethod",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,u,c,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=h.length>1&&void 0!==h[1]?h[1]:void 0,i=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:void 0,s=h.length>4&&void 0!==h[4]?h[4]:{},void 0!==r){e.next=6;break}throw new v(this.id+" fetchOpenOrders() requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return o=this.market(r),u={coinFrom:o.baseId,coinTo:o.quoteId},void 0!==a&&(u.page=1,u.pageSize=a),void 0!==i&&(u.startTime=parseInt(i/1e3)),e.next=14,this[t](this.extend(u,s));case 14:return c=e.sent,d=this.safeValue(c.data,"data",[]),e.abrupt("return",this.parseOrders(d,void 0,i,a));case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrders",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:void 0,i=s.length>2&&void 0!==s[2]?s[2]:void 0,a=s.length>3&&void 0!==s[3]?s[3]:{},e.next=6,this.fetchOrdersWithMethod("tradePostGetUserHistoryEntrustSheet",t,r,i,a);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:void 0,i=s.length>2&&void 0!==s[2]?s[2]:void 0,a=s.length>3&&void 0!==s[3]?s[3]:{},e.next=6,this.fetchOrdersWithMethod("tradePostGetUserNowEntrustSheet",t,r,i,a);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:void 0,i=s.length>2&&void 0!==s[2]?s[2]:void 0,a=s.length>3&&void 0!==s[3]?s[3]:{},e.next=6,this.fetchOrdersWithMethod("tradePostGetUserHistoryEntrustSheet",t,r,i,a);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTransactionStatus",value:function(e){return this.safeString({1:"pending",2:"pending",3:"pending",4:"ok",5:"canceled"},e,e)}},{key:"parseTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeInteger(e,"updated");0===r&&(r=void 0);var i=this.safeString(e,"coin"),n=this.safeCurrencyCode(i,t),a=this.safeStringLower(e,"type"),s=this.parseTransactionStatus(this.safeString(e,"status")),o=void 0,u=this.safeNumber(e,"network_fee");return void 0!==u&&(o={cost:u,code:n}),{id:this.safeString(e,"id"),txid:this.safeString(e,"txid"),timestamp:r,datetime:this.iso8601(r),address:this.safeString(e,"wallet"),tag:this.safeString(e,"memo"),type:a,amount:this.safeNumber(e,"number"),currency:n,status:s,updated:r,fee:o,info:e}}},{key:"parseTransactionsByType",value:function(e,t){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=[],s=0;s<t.length;s++){var o=this.parseTransaction(this.extend({type:e},t[s]));a.push(o)}return this.filterByCurrencySinceLimit(a,r,i,n)}},{key:"parseTransactionType",value:function(e){return this.safeInteger({deposit:1,withdrawal:2},e,e)}},{key:"fetchDeposits",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:void 0,i=s.length>2&&void 0!==s[2]?s[2]:void 0,a=s.length>3&&void 0!==s[3]?s[3]:{},e.next=6,this.fetchTransactionsForType("deposit",t,r,i,a);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchWithdrawals",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:void 0,i=s.length>2&&void 0!==s[2]?s[2]:void 0,a=s.length>3&&void 0!==s[3]?s[3]:{},e.next=6,this.fetchTransactionsForType("withdrawal",t,r,i,a);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTransactionsForType",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,u,c,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=h.length>1&&void 0!==h[1]?h[1]:void 0,i=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:void 0,s=h.length>4&&void 0!==h[4]?h[4]:{},void 0!==r){e.next=6;break}throw new v(this.id+" fetchTransactions() requires a currency `code` argument");case 6:return e.next=8,this.loadMarkets();case 8:return o=this.currency(r),u={coin:o.id,type:this.parseTransactionType(t)},void 0!==i&&(u.startTime=parseInt(i/1e3).toString()),void 0!==a&&(u.page=1,u.pageSize=a),e.next=14,this.tradePostDepositOrWithdraw(this.extend(u,s));case 14:return c=e.sent,d=this.safeValue(c.data,"data",[]),e.abrupt("return",this.parseTransactionsByType(t,d,r,i,a));case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"withdraw",value:function(){var e=a(n.mark((function e(t,r,i){var a,s,o,u,c,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.length>3&&void 0!==h[3]?h[3]:void 0,s=h.length>4&&void 0!==h[4]?h[4]:{},this.checkAddress(i),e.next=5,this.loadMarkets();case 5:return o=this.currency(t),u={coin:o.id,number:this.currencyToPrecision(t,r),address:i},void 0!==a&&(u.memo=a),e.next=10,this.tradePostCoinOut(this.extend(u,s));case 10:return c=e.sent,d=this.safeValue(c,"data",{}),e.abrupt("return",this.parseTransaction(d,o));case 13:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"nonce",value:function(){var e=this.seconds();return e>this.options.lastNonceTimestamp&&(this.options.lastNonceTimestamp=e,this.options.lastNonce=1e5),this.options.lastNonce=this.sum(this.options.lastNonce,1),this.options.lastNonce}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"market",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.implodeParams(this.urls.api[t],{hostname:this.hostname}),o=s+"/"+this.capitalize(t)+"/"+e,u=void 0;return"market"===t?(u=this.urlencode(i)).length&&(o+="?"+u):(this.checkRequiredCredentials(),a=this.rawencode(this.keysort(this.extend({apiKey:this.apiKey,timeStamp:this.seconds(),nonce:this.nonce()},i))),a+="&sign="+this.hash(this.encode(a+this.secret)),n={"Content-type":"application/x-www-form-urlencoded"}),{url:o,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,u){if(void 0!==s){var c=this.safeString(s,"status");if(void 0!==c){var d=this.id+" "+a;if("200"===c){var h=this.safeInteger(s,"data");if(void 0!==h)throw this.throwExactlyMatchedException(this.exceptions,h,d),new p(d);return}throw this.throwExactlyMatchedException(this.exceptions,c,d),new p(d)}}}}]),r}(l)},function(e,t,r){"use strict";var i=r(7),n=r(8),a=r(1),s=r(2),o=r(6),u=r(3),c=r(4),d=r(5),h=r(11),l=r(12);e.exports=function(e){c(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(u(r.prototype),"describe",this).call(this),{id:"bl3p",name:"BL3P",countries:["NL","EU"],rateLimit:1e3,version:"1",comment:"An exchange market by BitonicNL",has:{CORS:!1,cancelOrder:!0,createOrder:!0,fetchBalance:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTrades:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/28501752-60c21b82-6feb-11e7-818b-055ee6d0e754.jpg",api:"https://api.bl3p.eu",www:"https://bl3p.eu",doc:["https://github.com/BitonicNL/bl3p-api/tree/master/docs","https://bl3p.eu/api","https://bitonic.nl/en/api"]},api:{public:{get:["{market}/ticker","{market}/orderbook","{market}/trades"]},private:{post:["{market}/money/depth/full","{market}/money/order/add","{market}/money/order/cancel","{market}/money/order/result","{market}/money/orders","{market}/money/orders/history","{market}/money/trades/fetch","GENMKT/money/info","GENMKT/money/deposit_address","GENMKT/money/new_deposit_address","GENMKT/money/wallet/history","GENMKT/money/withdraw"]}},markets:{"BTC/EUR":{id:"BTCEUR",symbol:"BTC/EUR",base:"BTC",quote:"EUR",baseId:"BTC",quoteId:"EUR",maker:.0025,taker:.0025},"LTC/EUR":{id:"LTCEUR",symbol:"LTC/EUR",base:"LTC",quote:"EUR",baseId:"LTC",quoteId:"EUR",maker:.0025,taker:.0025}}})}},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p,v,m=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=m.length>0&&void 0!==m[0]?m[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privatePostGENMKTMoneyInfo(t);case 5:for(r=e.sent,n=this.safeValue(r,"data",{}),a=this.safeValue(n,"wallets"),s={info:n},o=Object.keys(this.currencies),u=0;u<o.length;u++)c=o[u],d=this.currency(c),h=d.id,l=this.safeValue(a,h,{}),f=this.safeValue(l,"available",{}),p=this.safeValue(l,"balance",{}),(v=this.account()).free=this.safeString(f,"value"),v.total=this.safeString(p,"value"),s[c]=v;return e.abrupt("return",this.parseBalance(s,!1));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseBidAsk",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=this.safeNumber(e,t),n=this.safeNumber(e,r);return[i/1e5,n/1e8]}},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u.length>1&&void 0!==u[1]?u[1]:void 0,r=u.length>2&&void 0!==u[2]?u[2]:{},n=this.market(t),a={market:n.id},e.next=6,this.publicGetMarketOrderbook(this.extend(a,r));case 6:return s=e.sent,o=this.safeValue(s,"data"),e.abrupt("return",this.parseOrderBook(o,void 0,"bids","asks","price_int","amount_int"));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:{},n={market:this.marketId(t)},e.next=4,this.publicGetMarketTicker(this.extend(n,r));case 4:return a=e.sent,s=this.safeTimestamp(a,"timestamp"),o=this.safeNumber(a,"last"),e.abrupt("return",{symbol:t,timestamp:s,datetime:this.iso8601(s),high:this.safeNumber(a,"high"),low:this.safeNumber(a,"low"),bid:this.safeNumber(a,"bid"),bidVolume:void 0,ask:this.safeNumber(a,"ask"),askVolume:void 0,vwap:void 0,open:void 0,close:o,last:o,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeNumber(a.volume,"24h"),quoteVolume:void 0,info:a});case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"trade_id"),i=this.safeInteger(e,"date"),n=this.safeString(e,"price_int");n=l.stringDiv(n,"100000");var a=this.safeString(e,"amount_int");a=l.stringDiv(a,"100000000");var s=this.parseNumber(n),o=this.parseNumber(a),u=this.parseNumber(l.stringMul(n,a)),c=void 0;return void 0!==t&&(c=t.symbol),{id:r,info:e,timestamp:i,datetime:this.iso8601(i),symbol:c,type:void 0,side:void 0,order:void 0,takerOrMaker:void 0,price:s,amount:o,cost:u,fee:void 0}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},s=this.market(t),e.next=6,this.publicGetMarketTrades(this.extend({market:s.id},a));case 6:return o=e.sent,u=this.parseTrades(o.data.trades,s,r,n),e.abrupt("return",u);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,u,c,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=l.length>4&&void 0!==l[4]?l[4]:void 0,o=l.length>5&&void 0!==l[5]?l[5]:{},u=this.market(t),c={market:u.id,amount_int:parseInt(1e8*a),fee_currency:u.quote,type:"buy"===n?"bid":"ask"},"limit"===r&&(c.price_int=parseInt(1e5*s)),e.next=7,this.privatePostMarketMoneyOrderAdd(this.extend(c,o));case 7:return d=e.sent,h=this.safeString(d.data,"order_id"),e.abrupt("return",{info:d,id:h});case 10:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:{},n={order_id:t},e.next=5,this.privatePostMarketMoneyOrderCancel(this.extend(n,r));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.implodeParams(e,i),o=this.urls.api+"/"+this.version+"/"+s,u=this.omit(i,this.extractParams(e));if("public"===t)Object.keys(u).length&&(o+="?"+this.urlencode(u));else{this.checkRequiredCredentials();var c=this.nonce();a=this.urlencode(this.extend({nonce:c},u));var d=this.base64ToBinary(this.secret),h=s+"\0"+a,l=this.hmac(this.encode(h),d,"sha512","base64");n={"Content-Type":"application/x-www-form-urlencoded","Rest-Key":this.apiKey,"Rest-Sign":l}}return{url:o,method:r,body:a,headers:n}}}]),r}(h)},function(e,t,r){"use strict";var i=r(7),n=r(8),a=r(1),s=r(2),o=r(6),u=r(3),c=r(4),d=r(5),h=r(11),l=r(10),f=l.ExchangeError,p=l.InvalidOrder,v=l.AuthenticationError,m=l.InsufficientFunds,g=l.BadRequest;e.exports=function(e){c(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(u(r.prototype),"describe",this).call(this),{id:"bleutrade",name:"Bleutrade",countries:["BR"],rateLimit:1e3,certified:!1,has:{cancelOrder:!0,CORS:!0,createLimitOrder:!1,createMarketOrder:!1,createOrder:!0,editOrder:!1,fetchBalance:!0,fetchClosedOrders:!0,fetchCurrencies:!0,fetchDepositAddress:!0,fetchDeposits:!0,fetchLedger:!0,fetchMarkets:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrderBook:!0,fetchOrders:!1,fetchOrderTrades:!1,fetchTicker:!0,fetchTickers:!0,fetchTrades:!1,fetchWithdrawals:!0,withdraw:!1},timeframes:{"1h":"1h","4h":"4h","8h":"8h","1d":"1d","1w":"1w"},hostname:"bleutrade.com",urls:{logo:"https://user-images.githubusercontent.com/1294454/30303000-b602dbe6-976d-11e7-956d-36c5049c01e7.jpg",api:{v3Private:"https://{hostname}/api/v3/private",v3Public:"https://{hostname}/api/v3/public"},www:"https://bleutrade.com",doc:["https://app.swaggerhub.com/apis-docs/bleu/white-label/3.0.0"],fees:"https://bleutrade.com/fees/"},api:{v3Public:{get:["getassets","getmarkets","getticker","getmarketsummary","getmarketsummaries","getorderbook","getmarkethistory","getcandles"]},v3Private:{get:["statement"],post:["getbalance","getbalances","buylimit","selllimit","buylimitami","selllimitami","buystoplimit","sellstoplimit","ordercancel","getopenorders","getcloseorders","getdeposithistory","getdepositaddress","getmytransactions","withdraw","directtransfer","getwithdrawhistory","getlimits"]}},commonCurrencies:{EPC:"Epacoin"},exceptions:{exact:{ERR_INSUFICIENT_BALANCE:m,ERR_LOW_VOLUME:g,"Invalid form":g},broad:{"Order is not open":p,"Invalid Account / Api KEY / Api Secret":v}},fees:{trading:{tierBased:!1,percentage:!0,taker:.0025,maker:.0025}},options:{parseOrderStatus:!0}})}},{key:"fetchCurrencies",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:{},e.next=3,this.v3PublicGetGetassets(t);case 3:for(r=e.sent,n=r.result,a={},s=0;s<n.length;s++)o=n[s],u=this.safeString(o,"Asset"),c=this.safeCurrencyCode(u),a[c]={id:u,code:c,name:this.safeString(o,"AssetLong"),active:this.safeValue(o,"IsActive")&&!this.safeValue(o,"MaintenanceMode"),fee:this.safeNumber(o,"WithdrawTxFee"),precision:this.safeNumber(o,"DecimalPlaces"),info:o,limits:this.limits};return e.abrupt("return",a);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p,v,m=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=m.length>0&&void 0!==m[0]?m[0]:{},e.next=3,this.v3PublicGetGetmarkets(t);case 3:for(r=e.sent,n=[],a=this.safeValue(r,"result"),s=0;s<a.length;s++)o=a[s],u=this.safeString(o,"MarketName"),c=this.safeString(o,"MarketAsset"),d=this.safeString(o,"BaseAsset"),h=this.safeCurrencyCode(c),l=this.safeCurrencyCode(d),f=h+"/"+l,p={amount:8,price:8},v=this.safeValue(o,"IsActive",!1),n.push({id:u,symbol:f,base:h,quote:l,baseId:c,quoteId:d,active:v,info:o,precision:p,maker:this.fees.trading.maker,taker:this.fees.trading.taker,limits:{amount:{min:this.safeNumber(o,"MinTradeSize"),max:void 0},price:{min:Math.pow(10,-p.price),max:void 0}}});return e.abrupt("return",n);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:{},e.next=4,this.loadMarkets();case 4:return a={market:this.marketId(t),type:"ALL"},void 0!==r&&(a.depth=r),e.next=8,this.v3PublicGetGetorderbook(this.extend(a,n));case 8:if(s=e.sent,o=this.safeValue(s,"result")){e.next=12;break}throw new f(this.id+" no orderbook data in "+this.json(s));case 12:return e.abrupt("return",this.parseOrderBook(o,void 0,"buy","sell","Rate","Quantity"));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={market:n.id},e.next=7,this.v3PublicGetGetmarketsummary(this.extend(a,r));case 7:return s=e.sent,o=this.safeValue(s,"result",{}),e.abrupt("return",this.parseTicker(o,n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:void 0,r=c.length>1&&void 0!==c[1]?c[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.v3PublicGetGetmarketsummaries(r);case 6:for(n=e.sent,a=this.safeValue(n,"result"),s=[],o=0;o<a.length;o++)u=this.parseTicker(a[o]),s.push(u);return e.abrupt("return",this.filterByArray(s,"symbol",t));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.parse8601(this.safeString(e,"TimeStamp")),i=this.safeString(e,"MarketName"),n=this.safeSymbol(i,t,"_"),a=this.safeNumber(e,"PrevDay"),s=this.safeNumber(e,"Last"),o=void 0,u=void 0;return void 0!==s&&void 0!==a&&(o=s-a,a>0&&(u=o/a*100)),{symbol:n,timestamp:r,datetime:this.iso8601(r),high:this.safeNumber(e,"High"),low:this.safeNumber(e,"Low"),bid:this.safeNumber(e,"Bid"),bidVolume:void 0,ask:this.safeNumber(e,"Ask"),askVolume:void 0,vwap:void 0,open:a,close:s,last:s,previousClose:void 0,change:o,percentage:u,average:void 0,baseVolume:this.safeNumber(e,"Volume"),quoteVolume:this.safeNumber(e,"BaseVolume"),info:e}}},{key:"parseOHLCV",value:function(e){return[this.parse8601(e.TimeStamp+"+00:00"),this.safeNumber(e,"Open"),this.safeNumber(e,"High"),this.safeNumber(e,"Low"),this.safeNumber(e,"Close"),this.safeNumber(e,"Volume")]}},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:"15m",n=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:void 0,s=h.length>4&&void 0!==h[4]?h[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),u={period:this.timeframes[r],market:o.id,count:a},e.next=10,this.v3PublicGetGetcandles(this.extend(u,s));case 10:return c=e.sent,d=this.safeValue(c,"result",[]),e.abrupt("return",this.parseOHLCVs(d,o,r,n,a));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=d.length>4&&void 0!==d[4]?d[4]:void 0,o=d.length>5&&void 0!==d[5]?d[5]:{},"limit"===r){e.next=4;break}throw new p(this.id+" allows limit orders only");case 4:return e.next=6,this.loadMarkets();case 6:if(u={rate:this.priceToPrecision(t,s),quantity:this.amountToPrecision(t,a),tradeType:"buy"===n?"1":"0",market:this.marketId(t)},c=void 0,"buy"!==n){e.next=14;break}return e.next=11,this.v3PrivatePostBuylimit(this.extend(u,o));case 11:c=e.sent,e.next=17;break;case 14:return e.next=16,this.v3PrivatePostSelllimit(this.extend(u,o));case 16:c=e.sent;case 17:return e.abrupt("return",{info:c,id:this.safeString(c,"result")});case 18:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},n={orderid:t},e.next=5,this.v3PrivatePostOrdercancel(this.extend(n,r));case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return s=void 0,o={},void 0!==t&&(s=this.market(t),o.market=s.id),e.next=11,this.v3PrivatePostGetopenorders(this.extend(o,a));case 11:return u=e.sent,c=this.safeValue(u,"result",[]),e.abrupt("return",this.parseOrders(c,s,r,n));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.v3PrivatePostGetbalances(t);case 5:for(r=e.sent,n={info:r},a=r.result,s=0;s<a.length;s++)o=a[s],u=this.safeString(o,"Asset"),c=this.safeCurrencyCode(u),(d=this.account()).free=this.safeString(o,"Available"),d.total=this.safeString(o,"Balance"),n[c]=d;return e.abrupt("return",this.parseBalance(n,!1));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return s={},o=void 0,void 0!==t&&(o=this.market(t),s.market=o.id),e.next=11,this.v3PrivatePostGetcloseorders(this.extend(s,a));case 11:return u=e.sent,c=this.safeValue(u,"result",[]),e.abrupt("return",this.parseOrders(c,o,r,n));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTransactionsWithMethod",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:void 0,s=c.length>4&&void 0!==c[4]?c[4]:{},e.next=6,this.loadMarkets();case 6:return e.next=8,this[t](s);case 8:return o=e.sent,u=this.safeValue(o,"result",[]),e.abrupt("return",this.parseTransactions(u,r,n,a));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchDeposits",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:void 0,n=s.length>2&&void 0!==s[2]?s[2]:void 0,a=s.length>3&&void 0!==s[3]?s[3]:{},e.next=6,this.fetchTransactionsWithMethod("v3PrivatePostGetdeposithistory",t,r,n,a);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchWithdrawals",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:void 0,n=s.length>2&&void 0!==s[2]?s[2]:void 0,a=s.length>3&&void 0!==s[3]?s[3]:{},e.next=6,this.fetchTransactionsWithMethod("v3PrivatePostGetwithdrawhistory",t,r,n,a);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchDepositAddress",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.currency(t),a={asset:n.id},e.next=7,this.v3PrivatePostGetdepositaddress(this.extend(a,r));case 7:return s=e.sent,o=s.result,u=this.safeString(o,"DepositAddress"),e.abrupt("return",{currency:t,address:this.checkAddress(u),info:o});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseLedgerEntryType",value:function(e){return this.safeString({TRADE:"trade",WITHDRAW:"transaction"},e,e)}},{key:"parseLedgerEntry",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeCurrencyCode(this.safeString(e,"CoinSymbol"),t),i=this.safeString(e,"Description"),n=this.parseLedgerEntryType(this.safeString(e,"Type")),a=void 0,s=void 0,o="trade"===n?", ":"; ",u=i.split(o),c=0;c<u.length;c++){var d=u[c];if(0===d.indexOf("fee")){d=d.replace("fee ","");var h=parseFloat(d);h<0&&(h=-h),s={cost:h,currency:r}}else 0===d.indexOf("order id")&&(a=d.replace("order id ",""))}var l=this.parse8601(this.safeString(e,"TimeStamp")),f=this.safeNumber(e,"Amount"),p=void 0;void 0!==f&&(p="in",f<0&&(p="out",f=-f));var v=this.safeString(e,"ID");return{id:v,info:e,timestamp:l,datetime:this.iso8601(l),direction:p,account:void 0,referenceId:a,referenceAccount:void 0,type:n,currency:r,amount:f,before:void 0,after:void 0,status:"ok",fee:s}}},{key:"fetchLedger",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:void 0,r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},e.next=6,this.loadMarkets();case 6:return s={},e.next=9,this.v3PrivatePostGetmytransactions(this.extend(s,a));case 9:return o=e.sent,u=o.result,e.abrupt("return",this.parseLedger(u,t,r,n));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"Type").toLowerCase(),i=this.parseOrderStatus(this.safeString(e,"Status")),n=this.safeString(e,"Exchange"),a=this.safeSymbol(n,t,"_"),s=void 0;"Created"in e&&(s=this.parse8601(e.Created+"+00:00"));var o=this.safeNumber(e,"Price"),u=this.safeNumber(e,"Quantity"),c=this.safeNumber(e,"QuantityRemaining"),d=this.safeNumber(e,"PricePerUnit"),h=this.safeString(e,"OrderID");return this.safeOrder({info:e,id:h,clientOrderId:void 0,timestamp:s,datetime:this.iso8601(s),lastTradeTimestamp:void 0,symbol:a,type:"limit",timeInForce:void 0,postOnly:void 0,side:r,price:o,stopPrice:void 0,cost:void 0,average:d,amount:u,filled:void 0,remaining:c,status:i,fee:void 0,trades:void 0})}},{key:"parseOrderStatus",value:function(e){return this.safeString({OK:"closed",OPEN:"open",CANCELED:"canceled"},e,e)}},{key:"parseTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"ID"),i=this.safeNumber(e,"Amount"),n="deposit";i<0&&(i=Math.abs(i),n="withdrawal");var a=this.safeString(e,"Asset"),s=this.safeCurrencyCode(a,t),o=this.safeString(e,"Label"),u=this.parse8601(this.safeString(e,"Timestamp")),c=this.safeString(e,"TransactionID"),d=void 0,h=void 0,l=o.split(";");3===l.length?(i=parseFloat(l[0]),d=l[1],h=parseFloat(l[2])):d=o;var f=void 0;void 0!==h&&(f={currency:s,cost:h});var p="ok";return"CANCELED"===c&&(c=void 0,p="canceled"),{info:e,timestamp:u,datetime:this.iso8601(u),id:r,currency:s,amount:i,address:d,tag:void 0,status:p,type:n,updated:void 0,txid:c,fee:f}}},{key:"nonce",value:function(){return this.milliseconds()}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.implodeParams(this.urls.api[t],{hostname:this.hostname})+"/";if("v3Private"===t){this.checkRequiredCredentials();var o={apikey:this.apiKey,nonce:this.nonce()};s+=e+"?"+this.urlencode(this.extend(o,i));var u=this.hmac(this.encode(s),this.encode(this.secret),"sha512");n={apisign:u}}else s+=e+"?"+this.urlencode(i);return{url:s,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,u){if(void 0!==s){var c=this.safeValue(s,"success");if(void 0===c)throw new f(this.id+": malformed response: "+this.json(s));if(!c){var d=this.id+" "+a,h=this.safeString(s,"result");void 0!==h&&(this.throwBroadlyMatchedException(this.exceptions.broad,h,d),this.throwExactlyMatchedException(this.exceptions.exact,h,d));var l=this.safeString(s,"message");throw this.throwBroadlyMatchedException(this.exceptions.broad,l,d),this.throwExactlyMatchedException(this.exceptions.exact,l,d),new f(d)}}}}]),r}(h)},function(e,t,r){"use strict";var i=r(21),n=r(7),a=r(8),s=r(1),o=r(2),u=r(6),c=r(3),d=r(4),h=r(5),l=r(11),f=r(10),p=f.ExchangeError,v=f.InvalidOrder,m=f.AuthenticationError,g=f.ArgumentsRequired,y=r(12);e.exports=function(e){d(r,e);var t=h(r);function r(){return s(this,r),t.apply(this,arguments)}return o(r,[{key:"describe",value:function(){return this.deepExtend(u(c(r.prototype),"describe",this).call(this),{id:"braziliex",name:"Braziliex",countries:["BR"],rateLimit:1e3,has:{cancelOrder:!0,createOrder:!0,fetchBalance:!0,fetchCurrencies:!0,fetchDepositAddress:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/34703593-c4498674-f504-11e7-8d14-ff8e44fb78c1.jpg",api:"https://braziliex.com/api/v1",www:"https://braziliex.com/",doc:"https://braziliex.com/exchange/api.php",fees:"https://braziliex.com/exchange/fees.php",referral:"https://braziliex.com/?ref=5FE61AB6F6D67DA885BC98BA27223465"},api:{public:{get:["currencies","ticker","ticker/{market}","orderbook/{market}","tradehistory/{market}"]},private:{post:["balance","complete_balance","open_orders","trade_history","deposit_address","sell","buy","cancel_order","order_status"]}},commonCurrencies:{EPC:"Epacoin",ABC:"Anti Bureaucracy Coin"},fees:{trading:{maker:.005,taker:.005}},precision:{amount:8,price:8},options:{fetchCurrencies:{expires:1e3}}})}},{key:"fetchCurrenciesFromCache",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.length>0&&void 0!==u[0]?u[0]:{},r=this.safeValue(this.options,"fetchCurrencies",{}),i=this.safeInteger(r,"timestamp"),a=this.safeInteger(r,"expires",1e3),s=this.milliseconds(),!(void 0===i||s-i>a)){e.next=10;break}return e.next=8,this.publicGetCurrencies(t);case 8:o=e.sent,this.options.fetchCurrencies=this.extend(r,{response:o,timestamp:s});case 10:return e.abrupt("return",this.safeValue(this.options.fetchCurrencies,"response"));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchCurrencies",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,u,c,d,h,l,f,p=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.length>0&&void 0!==p[0]?p[0]:{},e.next=3,this.fetchCurrenciesFromCache(t);case 3:for(r=e.sent,this.options.currencies={timestamp:this.milliseconds(),response:r},i=Object.keys(r),a={},s=0;s<i.length;s++)o=i[s],u=r[o],c=this.safeInteger(u,"decimal"),d=this.safeCurrencyCode(o),h=1===this.safeInteger(u,"active"),0!==this.safeInteger(u,"under_maintenance")&&(h=!1),l=1===this.safeInteger(u,"is_withdrawal_active"),f=1===this.safeInteger(u,"is_deposit_active"),l&&f||(h=!1),a[d]={id:o,code:d,name:u.name,active:h,precision:c,funding:{withdraw:{active:l,fee:this.safeNumber(u,"txWithdrawalFee")},deposit:{active:f,fee:this.safeNumber(u,"txDepositFee")}},limits:{amount:{min:Math.pow(10,-c),max:Math.pow(10,c)},withdraw:{min:this.safeNumber(u,"MinWithdrawal"),max:Math.pow(10,c)},deposit:{min:this.safeNumber(u,"minDeposit"),max:void 0}},info:u};return e.abrupt("return",a);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMarkets",value:function(){var e=a(n.mark((function e(){var t,r,a,s,o,u,c,d,h,l,f,p,v,m,g,y,b,x,k,w,_,S,O,T,C=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=C.length>0&&void 0!==C[0]?C[0]:{},e.next=3,this.fetchCurrenciesFromCache(t);case 3:return r=e.sent,e.next=6,this.publicGetTicker();case 6:for(a=e.sent,s=Object.keys(a),o=[],u=0;u<s.length;u++)c=s[u],d=a[c],h=c.split("_"),l=i(h,2),f=l[0],p=l[1],v=f.toUpperCase(),m=p.toUpperCase(),g=this.safeCurrencyCode(v),y=this.safeCurrencyCode(m),b=g+"/"+y,x=this.safeValue(r,f,{}),k=this.safeValue(r,p,{}),w=this.safeInteger(k,"is_fiat",0),_=void 0,_=w?this.safeNumber(x,"minAmountTradeFIAT"):this.safeNumber(x,"minAmountTrade"+m),S=this.safeInteger(d,"active"),O=1===S,T={amount:8,price:8},o.push({id:c,symbol:b,base:g,quote:y,baseId:f,quoteId:p,active:O,precision:T,limits:{amount:{min:Math.pow(10,-T.amount),max:Math.pow(10,T.amount)},price:{min:Math.pow(10,-T.price),max:Math.pow(10,T.price)},cost:{min:_,max:void 0}},info:d});return e.abrupt("return",o);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0;void 0!==t&&(r=t.symbol);var i=this.milliseconds(),n=this.safeNumber(e,"last");return{symbol:r,timestamp:i,datetime:this.iso8601(i),high:this.safeNumber(e,"highestBid24"),low:this.safeNumber(e,"lowestAsk24"),bid:this.safeNumber(e,"highestBid"),bidVolume:void 0,ask:this.safeNumber(e,"lowestAsk"),askVolume:void 0,vwap:void 0,open:void 0,close:n,last:n,previousClose:void 0,change:this.safeNumber(e,"percentChange"),percentage:void 0,average:void 0,baseVolume:this.safeNumber(e,"baseVolume24"),quoteVolume:this.safeNumber(e,"quoteVolume24"),info:e}}},{key:"fetchTicker",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return i=this.market(t),a={market:i.id},e.next=7,this.publicGetTickerMarket(this.extend(a,r));case 7:return s=e.sent,e.abrupt("return",this.parseTicker(s,i));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTickers",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,u,c,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetTicker(r);case 6:for(i=e.sent,a={},s=Object.keys(i),o=0;o<s.length;o++)u=s[o],c=this.safeMarket(u),d=c.symbol,a[d]=this.parseTicker(i[u],c);return e.abrupt("return",this.filterByArray(a,"symbol",t));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=a(n.mark((function e(t){var r,i,a,s=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.loadMarkets();case 4:return i={market:this.marketId(t)},e.next=7,this.publicGetOrderbookMarket(this.extend(i,r));case 7:return a=e.sent,e.abrupt("return",this.parseOrderBook(a,void 0,"bids","asks","price","amount"));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.parse8601(this.safeString2(e,"date_exec","date")),i=this.safeString(e,"price"),n=this.safeString(e,"amount"),a=this.parseNumber(i),s=this.parseNumber(n),o=void 0;void 0!==t&&(o=t.symbol);var u=this.safeNumber(e,"total");void 0===u&&(u=this.parseNumber(y.stringMul(i,n)));var c=this.safeString(e,"order_number"),d="limit",h=this.safeString(e,"type"),l=this.safeString(e,"_id");return{id:l,info:e,timestamp:r,datetime:this.iso8601(r),symbol:o,order:c,type:d,side:h,takerOrMaker:void 0,price:a,amount:s,cost:u,fee:void 0}}},{key:"fetchTrades",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,u,c=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,i=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={market:s.id},e.next=9,this.publicGetTradehistoryMarket(this.extend(o,a));case 9:return u=e.sent,e.abrupt("return",this.parseTrades(u,s,r,i));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,u,c,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privatePostCompleteBalance(t);case 5:for(r=e.sent,i={info:r},a=Object.keys(r),s=0;s<a.length;s++)o=a[s],u=r[o],c=this.safeCurrencyCode(o),(d=this.account()).free=this.safeString(u,"available"),d.total=this.safeString(u,"total"),i[c]=d;return e.abrupt("return",this.parseBalance(i,!1));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"market"),i=this.safeSymbol(r,t,"_"),n=this.safeInteger(e,"timestamp");void 0===n&&(n=this.parse8601(this.safeString(e,"date")));var a=this.safeNumber(e,"price"),s=this.safeNumber(e,"total"),o=this.safeNumber(e,"amount"),u=this.safeNumber(e,"progress"),c=o*u,d=this.safeString(e,"order_number"),h=this.safeValue(e,"fee"),l=1===u?"closed":"open",f=this.safeString(e,"type");return this.safeOrder({id:d,clientOrderId:void 0,datetime:this.iso8601(n),timestamp:n,lastTradeTimestamp:void 0,status:l,symbol:i,type:"limit",timeInForce:void 0,postOnly:void 0,side:f,price:a,stopPrice:void 0,cost:s,amount:o,filled:c,remaining:void 0,trades:void 0,fee:h,info:e,average:void 0})}},{key:"createOrder",value:function(){var e=a(n.mark((function e(t,r,i,a){var s,o,u,c,d,h,l,f,p,m,g,y,b,x=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=x.length>4&&void 0!==x[4]?x[4]:void 0,o=x.length>5&&void 0!==x[5]?x[5]:{},e.next=4,this.loadMarkets();case 4:return u=this.market(t),c="privatePost"+this.capitalize(i),d={market:u.id,price:s,amount:a},e.next=9,this[c](this.extend(d,o));case 9:if(h=e.sent,1===this.safeInteger(h,"success")){e.next=13;break}throw new v(this.id+" "+this.json(h));case 13:return l=this.safeString(h,"message"),f=(f=l.split(" / ")).slice(1),p=f[5].split(" "),m=f[2].split(" "),g=f[3].split(" "),y=f[4].split(" "),b=this.parseOrder({timestamp:this.milliseconds(),order_number:h.order_number,type:this.safeStringLower(f,0),market:f[0].toLowerCase(),amount:this.safeString(m,1),price:this.safeString(g,1),total:this.safeString(y,1),fee:{cost:this.safeNumber(p,1),currency:this.safeString(p,2)},progress:"0.0",info:h},u),e.abrupt("return",b);case 22:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:void 0,i=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return a=this.market(r),s={order_number:t,market:a.id},e.next=8,this.privatePostCancelOrder(this.extend(s,i));case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=u.length>1&&void 0!==u[1]?u[1]:void 0,i=u.length>2&&void 0!==u[2]?u[2]:{},void 0!==r){e.next=4;break}throw new g(this.id+" fetchOrder() requires a symbol argument");case 4:return e.next=6,this.loadMarkets();case 6:return a=this.market(r),s={order_number:t,market:a.id},e.next=10,this.privatePostOrderStatus(this.extend(s,i));case 10:return o=e.sent,e.abrupt("return",this.parseOrder(o,a));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,u,c,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,i=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return s=this.market(t),o={market:s.id},e.next=10,this.privatePostOpenOrders(this.extend(o,a));case 10:return u=e.sent,c=this.safeValue(u,"order_open",[]),e.abrupt("return",this.parseOrders(c,s,r,i));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,u,c,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,i=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return s=this.market(t),o={market:s.id},e.next=10,this.privatePostTradeHistory(this.extend(o,a));case 10:return u=e.sent,c=this.safeValue(u,"trade_history",[]),e.abrupt("return",this.parseTrades(c,s,r,i));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchDepositAddress",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,u,c=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:{},e.next=3,this.loadMarkets();case 3:return i=this.currency(t),a={currency:i.id},e.next=7,this.privatePostDepositAddress(this.extend(a,r));case 7:return s=e.sent,o=this.safeString(s,"deposit_address"),this.checkAddress(o),u=this.safeString(s,"payment_id"),e.abrupt("return",{currency:t,address:o,tag:u,info:s});case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.urls.api+"/"+t,o=this.omit(i,this.extractParams(e));if("public"===t)s+="/"+this.implodeParams(e,i),Object.keys(o).length&&(s+="?"+this.urlencode(o));else{this.checkRequiredCredentials(),o=this.extend({command:e,nonce:this.nonce()},o),a=this.urlencode(o);var u=this.hmac(this.encode(a),this.encode(this.secret),"sha512");n={"Content-type":"application/x-www-form-urlencoded",Key:this.apiKey,Sign:u}}return{url:s,method:r,body:a,headers:n}}},{key:"request",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,u,c,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:"public",i=d.length>2&&void 0!==d[2]?d[2]:"GET",a=d.length>3&&void 0!==d[3]?d[3]:{},s=d.length>4&&void 0!==d[4]?d[4]:void 0,o=d.length>5&&void 0!==d[5]?d[5]:void 0,e.next=7,this.fetch2(t,r,i,a,s,o);case 7:if(!("string"===typeof(u=e.sent)&&u.length<1)){e.next=10;break}throw new p(this.id+" returned empty response");case 10:if(!("success"in u)){e.next=17;break}if(0!==this.safeInteger(u,"success")){e.next=17;break}if("Invalid APIKey"!==(c=this.safeString(u,"message"))){e.next=16;break}throw new m(c);case 16:throw new p(c);case 17:return e.abrupt("return",u);case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(l)},function(e,t,r){"use strict";var i=r(7),n=r(8),a=r(1),s=r(2),o=r(6),u=r(3),c=r(4),d=r(5),h=r(11),l=r(10),f=l.ExchangeError,p=l.AuthenticationError,v=l.DDoSProtection,m=l.InvalidOrder,g=l.InsufficientFunds,y=r(12);e.exports=function(e){c(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(u(r.prototype),"describe",this).call(this),{id:"btcalpha",name:"BTC-Alpha",countries:["US"],version:"v1",has:{cancelOrder:!0,createOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchTicker:!1,fetchTrades:!0},timeframes:{"1m":"1","5m":"5","15m":"15","30m":"30","1h":"60","4h":"240","1d":"D"},urls:{logo:"https://user-images.githubusercontent.com/1294454/42625213-dabaa5da-85cf-11e8-8f99-aa8f8f7699f0.jpg",api:"https://btc-alpha.com/api",www:"https://btc-alpha.com",doc:"https://btc-alpha.github.io/api-docs",fees:"https://btc-alpha.com/fees/",referral:"https://btc-alpha.com/?r=123788"},api:{public:{get:["currencies/","pairs/","orderbook/{pair_name}/","exchanges/","charts/{pair}/{type}/chart/"]},private:{get:["wallets/","orders/own/","order/{id}/","exchanges/own/","deposits/","withdraws/"],post:["order/","order-cancel/"]}},fees:{trading:{maker:.002,taker:.002},funding:{withdraw:{BTC:.00135,LTC:.0035,XMR:.018,ZEC:.002,ETH:.01,ETC:.01,SIB:1.5,CCRB:4,PZM:.05,ITI:.05,DCY:5,R:5,ATB:.05,BRIA:.05,KZC:.05,HWC:1,SPA:1,SMS:.001,REC:.01,SUP:1,BQ:100,GDS:.1,EVN:300,TRKC:.01,UNI:1,STN:1,BCH:void 0,QBIC:.5}}},commonCurrencies:{CBC:"Cashbery"},exceptions:{exact:{},broad:{"Out of balance":g}}})}},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.length>0&&void 0!==p[0]?p[0]:{},e.next=3,this.publicGetPairs(t);case 3:for(r=e.sent,n=[],a=0;a<r.length;a++)s=r[a],o=this.safeString(s,"name"),u=this.safeString(s,"currency1"),c=this.safeString(s,"currency2"),d=this.safeCurrencyCode(u),h=this.safeCurrencyCode(c),l=d+"/"+h,f={amount:8,price:this.safeInteger(s,"price_precision")},n.push({id:o,symbol:l,base:d,quote:h,active:!0,precision:f,limits:{amount:{min:this.safeNumber(s,"minimum_order_size"),max:this.safeNumber(s,"maximum_order_size")},price:{min:Math.pow(10,-f.price),max:Math.pow(10,f.price)},cost:{min:void 0,max:void 0}},info:s,baseId:void 0,quoteId:void 0});return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return a={pair_name:this.marketId(t)},r&&(a.limit_sell=r,a.limit_buy=r),e.next=8,this.publicGetOrderbookPairName(this.extend(a,n));case 8:return s=e.sent,e.abrupt("return",this.parseOrderBook(s,void 0,"buy","sell","price","amount"));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseBidsAsks",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=[],n=0;n<e.length;n++){var a=e[n];a&&i.push(this.parseBidAsk(a,t,r))}return i}},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0;void 0===t&&(t=this.safeValue(this.marketsById,e.pair)),void 0!==t&&(r=t.symbol);var i=this.safeTimestamp(e,"timestamp"),n=this.safeString(e,"price"),a=this.safeString(e,"amount"),s=this.parseNumber(n),o=this.parseNumber(a),u=this.parseNumber(y.stringMul(n,a)),c=this.safeString2(e,"id","tid"),d=this.safeString2(e,"my_side","side"),h=this.safeString(e,"o_id");return{id:c,info:e,timestamp:i,datetime:this.iso8601(i),symbol:r,order:h,type:"limit",side:d,takerOrMaker:void 0,price:s,amount:o,cost:u,fee:void 0}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},e.next=5,this.loadMarkets();case 5:return s=void 0,o={},void 0!==t&&(s=this.market(t),o.pair=s.id),void 0!==n&&(o.limit=n),e.next=11,this.publicGetExchanges(this.extend(o,a));case 11:return u=e.sent,e.abrupt("return",this.parseTrades(u,s,r,n));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){return[this.safeTimestamp(e,"time"),this.safeNumber(e,"open"),this.safeNumber(e,"high"),this.safeNumber(e,"low"),this.safeNumber(e,"close"),this.safeNumber(e,"volume")]}},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:"5m",n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:void 0,s=d.length>4&&void 0!==d[4]?d[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),u={pair:o.id,type:this.timeframes[r]},void 0!==a&&(u.limit=a),void 0!==n&&(u.since=parseInt(n/1e3)),e.next=12,this.publicGetChartsPairTypeChart(this.extend(u,s));case 12:return c=e.sent,e.abrupt("return",this.parseOHLCVs(c,o,r,n,a));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetWallets(t);case 5:for(r=e.sent,n={info:r},a=0;a<r.length;a++)s=r[a],o=this.safeString(s,"currency"),u=this.safeCurrencyCode(o),(c=this.account()).used=this.safeString(s,"reserve"),c.total=this.safeString(s,"balance"),n[u]=c;return e.abrupt("return",this.parseBalance(n,!1));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({1:"open",2:"canceled",3:"closed"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0;void 0===t&&(t=this.safeValue(this.marketsById,e.pair)),void 0!==t&&(r=t.symbol);var i=this.safeTimestamp(e,"date"),n=this.safeNumber(e,"price"),a=this.safeNumber(e,"amount"),s=this.parseOrderStatus(this.safeString(e,"status")),o=this.safeString2(e,"oid","id"),u=this.safeValue(e,"trades",[]);u=this.parseTrades(u,t);var c=this.safeString2(e,"my_side","type"),d=void 0,h=u.length;if(h>0){d=0;for(var l=0;l<h;l++)d=this.sum(d,u[l].amount)}var f=void 0;return void 0!==a&&a>0&&void 0!==d&&(f=Math.max(0,a-d)),{id:o,clientOrderId:void 0,datetime:this.iso8601(i),timestamp:i,status:s,symbol:r,type:"limit",timeInForce:void 0,postOnly:void 0,side:c,price:n,stopPrice:void 0,cost:void 0,amount:a,filled:d,remaining:f,trades:u,fee:void 0,info:e,lastTradeTimestamp:void 0,average:void 0}}},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,u,c,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=l.length>4&&void 0!==l[4]?l[4]:void 0,o=l.length>5&&void 0!==l[5]?l[5]:{},e.next=4,this.loadMarkets();case 4:return u=this.market(t),c={pair:u.id,type:n,amount:a,price:this.priceToPrecision(t,s)},e.next=8,this.privatePostOrder(this.extend(c,o));case 8:if((d=e.sent).success){e.next=11;break}throw new m(this.id+" "+this.json(d));case 11:return h=this.parseOrder(d,u),a=h.amount>0?h.amount:a,e.abrupt("return",this.extend(h,{amount:a}));case 14:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},n={order:t},e.next=5,this.privatePostOrderCancel(this.extend(n,r));case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.loadMarkets();case 4:return n={id:t},e.next=7,this.privateGetOrderId(this.extend(n,r));case 7:return a=e.sent,e.abrupt("return",this.parseOrder(a));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:void 0,r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},e.next=6,this.loadMarkets();case 6:return s={},o=void 0,void 0!==t&&(o=this.market(t),s.pair=o.id),void 0!==n&&(s.limit=n),e.next=12,this.privateGetOrdersOwn(this.extend(s,a));case 12:return u=e.sent,e.abrupt("return",this.parseOrders(u,o,r,n));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:void 0,a=o.length>3&&void 0!==o[3]?o[3]:{},s={status:"1"},e.next=7,this.fetchOrders(t,r,n,this.extend(s,a));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:void 0,a=o.length>3&&void 0!==o[3]?o[3]:{},s={status:"3"},e.next=7,this.fetchOrders(t,r,n,this.extend(s,a));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:void 0,r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},e.next=6,this.loadMarkets();case 6:return s={},void 0!==t&&(o=this.market(t),s.pair=o.id),void 0!==n&&(s.limit=n),e.next=11,this.privateGetExchangesOwn(this.extend(s,a));case 11:return u=e.sent,e.abrupt("return",this.parseTrades(u,void 0,r,n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"nonce",value:function(){return this.milliseconds()}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.urlencode(this.keysort(this.omit(i,this.extractParams(e)))),o=this.urls.api+"/";if("charts/{pair}/{type}/chart/"!==e&&(o+="v1/"),o+=this.implodeParams(e,i),n={Accept:"application/json"},"public"===t)s.length&&(o+="?"+s);else{this.checkRequiredCredentials();var u=this.apiKey;"POST"===r?(n["Content-Type"]="application/x-www-form-urlencoded",u+=a=s):s.length&&(o+="?"+s),n["X-KEY"]=this.apiKey,n["X-SIGN"]=this.hmac(this.encode(u),this.encode(this.secret)),n["X-NONCE"]=this.nonce().toString()}return{url:o,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,u){if(void 0!==s){var c=this.safeString(s,"error"),d=this.id+" "+a;if(void 0!==c&&(this.throwExactlyMatchedException(this.exceptions.exact,c,d),this.throwBroadlyMatchedException(this.exceptions.broad,c,d)),401===e||403===e)throw new p(d);if(429===e)throw new v(d);if(!(e<400))throw new f(d)}}}]),r}(h)},function(e,t,r){"use strict";var i=r(7),n=r(8),a=r(1),s=r(2),o=r(6),u=r(3),c=r(4),d=r(5),h=r(11),l=r(10),f=l.ExchangeError,p=l.InsufficientFunds,v=l.InvalidOrder,m=l.AuthenticationError,g=l.PermissionDenied,y=l.InvalidNonce,b=l.OrderNotFound,x=l.DDoSProtection,k=r(12);e.exports=function(e){c(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(u(r.prototype),"describe",this).call(this),{id:"btcbox",name:"BtcBox",countries:["JP"],rateLimit:1e3,version:"v1",has:{cancelOrder:!0,CORS:!1,createOrder:!0,fetchBalance:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchTicker:!0,fetchTickers:!1,fetchTrades:!0},urls:{logo:"https://user-images.githubusercontent.com/51840849/87327317-98c55400-c53c-11ea-9a11-81f7d951cc74.jpg",api:"https://www.btcbox.co.jp/api",www:"https://www.btcbox.co.jp/",doc:"https://blog.btcbox.jp/en/archives/8762",fees:"https://support.btcbox.co.jp/hc/en-us/articles/360001235694-Fees-introduction"},api:{public:{get:["depth","orders","ticker"]},private:{post:["balance","trade_add","trade_cancel","trade_list","trade_view","wallet"]}},markets:{"BTC/JPY":{id:"btc",symbol:"BTC/JPY",base:"BTC",quote:"JPY",baseId:"btc",quoteId:"jpy",taker:5e-4,maker:5e-4},"ETH/JPY":{id:"eth",symbol:"ETH/JPY",base:"ETH",quote:"JPY",baseId:"eth",quoteId:"jpy",taker:.001,maker:.001},"LTC/JPY":{id:"ltc",symbol:"LTC/JPY",base:"LTC",quote:"JPY",baseId:"ltc",quoteId:"jpy",taker:.001,maker:.001},"BCH/JPY":{id:"bch",symbol:"BCH/JPY",base:"BCH",quote:"JPY",baseId:"bch",quoteId:"jpy",taker:.001,maker:.001}},exceptions:{104:m,105:g,106:y,107:v,200:p,201:v,202:v,203:b,401:b,402:x}})}},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privatePostBalance(t);case 5:for(r=e.sent,n={info:r},a=Object.keys(this.currencies),s=0;s<a.length;s++)o=a[s],u=this.currency(o),c=u.id,(d=c+"_balance")in r&&(h=this.account(),l=c+"_lock",h.free=this.safeString(r,d),h.used=this.safeString(r,l),n[o]=h);return e.abrupt("return",this.parseBalance(n,!1));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.length>1&&void 0!==o[1]?o[1]:void 0,r=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return n=this.market(t),a={},this.symbols.length>1&&(a.coin=n.baseId),e.next=10,this.publicGetDepth(this.extend(a,r));case 10:return s=e.sent,e.abrupt("return",this.parseOrderBook(s));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.milliseconds(),i=void 0;void 0!==t&&(i=t.symbol);var n=this.safeNumber(e,"last");return{symbol:i,timestamp:r,datetime:this.iso8601(r),high:this.safeNumber(e,"high"),low:this.safeNumber(e,"low"),bid:this.safeNumber(e,"buy"),bidVolume:void 0,ask:this.safeNumber(e,"sell"),askVolume:void 0,vwap:void 0,open:void 0,close:n,last:n,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeNumber(e,"vol"),quoteVolume:this.safeNumber(e,"volume"),info:e}}},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={},this.symbols.length>1&&(a.coin=n.baseId),e.next=9,this.publicGetTicker(this.extend(a,r));case 9:return s=e.sent,e.abrupt("return",this.parseTicker(s,n));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeTimestamp(e,"date"),i=void 0;void 0!==t&&(i=t.symbol);var n=this.safeString(e,"tid"),a=this.safeString(e,"price"),s=this.safeString(e,"amount"),o=this.parseNumber(a),u=this.parseNumber(s),c=this.parseNumber(k.stringMul(a,s)),d=void 0,h=this.safeString(e,"type");return{info:e,id:n,order:void 0,timestamp:r,datetime:this.iso8601(r),symbol:i,type:d,side:h,takerOrMaker:void 0,price:o,amount:u,cost:c,fee:void 0}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={},this.symbols.length>1&&(o.coin=s.baseId),e.next=11,this.publicGetOrders(this.extend(o,a));case 11:return u=e.sent,e.abrupt("return",this.parseTrades(u,s,r,n));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=h.length>4&&void 0!==h[4]?h[4]:void 0,o=h.length>5&&void 0!==h[5]?h[5]:{},e.next=4,this.loadMarkets();case 4:return u=this.market(t),c={amount:a,price:s,type:n,coin:u.baseId},e.next=8,this.privatePostTradeAdd(this.extend(c,o));case 8:return d=e.sent,e.abrupt("return",this.parseOrder(d,u));case 10:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:{},e.next=4,this.loadMarkets();case 4:return void 0===r&&(r="BTC/JPY"),a=this.market(r),s={id:t,coin:a.baseId},e.next=9,this.privatePostTradeCancel(this.extend(s,n));case 9:return o=e.sent,e.abrupt("return",this.parseOrder(o,a));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({part:"open",all:"closed",cancelled:"canceled",closed:"closed",no:"closed"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),i=this.safeString(e,"datetime"),n=void 0;void 0!==i&&(n=this.parse8601(e.datetime+"+09:00"));var a=this.safeNumber(e,"amount_original"),s=this.safeNumber(e,"amount_outstanding"),o=this.safeNumber(e,"price"),u=this.parseOrderStatus(this.safeString(e,"status"));void 0===u&&void 0!==s&&0===s&&(u="closed");var c=void 0,d=void 0;void 0!==t&&(d=t.symbol);var h=this.safeString(e,"type");return this.safeOrder({id:r,clientOrderId:void 0,timestamp:n,datetime:this.iso8601(n),lastTradeTimestamp:void 0,amount:a,remaining:s,filled:void 0,side:h,type:void 0,timeInForce:void 0,postOnly:void 0,status:u,symbol:d,price:o,stopPrice:void 0,cost:void 0,trades:c,fee:void 0,info:e,average:void 0})}},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:{},e.next=4,this.loadMarkets();case 4:return void 0===r&&(r="BTC/JPY"),a=this.market(r),s=this.extend({id:t,coin:a.baseId},n),e.next=9,this.privatePostTradeView(this.extend(s,n));case 9:return o=e.sent,e.abrupt("return",this.parseOrder(o,a));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrdersByType",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>1&&void 0!==l[1]?l[1]:void 0,n=l.length>2&&void 0!==l[2]?l[2]:void 0,a=l.length>3&&void 0!==l[3]?l[3]:void 0,s=l.length>4&&void 0!==l[4]?l[4]:{},e.next=6,this.loadMarkets();case 6:return void 0===r&&(r="BTC/JPY"),o=this.market(r),u={type:t,coin:o.baseId},e.next=11,this.privatePostTradeList(this.extend(u,s));case 11:if(c=e.sent,d=this.parseOrders(c,o,n,a),"open"===t)for(h=0;h<d.length;h++)d[h].status="open";return e.abrupt("return",d);case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:void 0,n=s.length>2&&void 0!==s[2]?s[2]:void 0,a=s.length>3&&void 0!==s[3]?s[3]:{},e.next=6,this.fetchOrdersByType("all",t,r,n,a);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:void 0,n=s.length>2&&void 0!==s[2]?s[2]:void 0,a=s.length>3&&void 0!==s[3]?s[3]:{},e.next=6,this.fetchOrdersByType("open",t,r,n,a);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"nonce",value:function(){return this.milliseconds()}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.urls.api+"/"+this.version+"/"+e;if("public"===t)Object.keys(i).length&&(s+="?"+this.urlencode(i));else{this.checkRequiredCredentials();var o=this.nonce().toString(),u=this.extend({key:this.apiKey,nonce:o},i),c=this.urlencode(u),d=this.hash(this.encode(this.secret));u.signature=this.hmac(this.encode(c),this.encode(d)),a=this.urlencode(u),n={"Content-Type":"application/x-www-form-urlencoded"}}return{url:s,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,u){if(void 0!==s&&!(e>=400)){var c=this.safeValue(s,"result");if(void 0!==c&&!0!==c){var d=this.safeValue(s,"code"),h=this.id+" "+a;throw this.throwExactlyMatchedException(this.exceptions,d,h),new f(h)}}}},{key:"request",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:"public",n=c.length>2&&void 0!==c[2]?c[2]:"GET",a=c.length>3&&void 0!==c[3]?c[3]:{},s=c.length>4&&void 0!==c[4]?c[4]:void 0,o=c.length>5&&void 0!==c[5]?c[5]:void 0,e.next=7,this.fetch2(t,r,n,a,s,o);case 7:if("string"!==typeof(u=e.sent)){e.next=13;break}if(u=this.strip(u),this.isJsonEncodedObject(u)){e.next=12;break}throw new f(this.id+" "+u);case 12:u=JSON.parse(u);case 13:return e.abrupt("return",u);case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(h)},function(e,t,r){"use strict";var i=r(21),n=r(7),a=r(8),s=r(1),o=r(2),u=r(6),c=r(3),d=r(4),h=r(5),l=r(11),f=r(10),p=f.ArgumentsRequired,v=f.ExchangeError,m=f.OrderNotFound,g=f.InvalidOrder,y=f.InsufficientFunds,b=f.DDoSProtection,x=f.BadRequest,k=r(12);e.exports=function(e){d(r,e);var t=h(r);function r(){return s(this,r),t.apply(this,arguments)}return o(r,[{key:"describe",value:function(){return this.deepExtend(u(c(r.prototype),"describe",this).call(this),{id:"btcmarkets",name:"BTC Markets",countries:["AU"],rateLimit:1e3,version:"v3",has:{cancelOrder:!0,cancelOrders:!0,CORS:!1,createOrder:!0,fetchBalance:!0,fetchClosedOrders:"emulated",fetchDeposits:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchTicker:!0,fetchTime:!0,fetchTrades:!0,fetchTransactions:!0,fetchWithdrawals:!0},urls:{logo:"https://user-images.githubusercontent.com/51840849/89731817-b3fb8480-da52-11ea-817f-783b08aaf32b.jpg",api:{public:"https://api.btcmarkets.net",private:"https://api.btcmarkets.net"},www:"https://btcmarkets.net",doc:["https://api.btcmarkets.net/doc/v3","https://github.com/BTCMarkets/API"]},api:{public:{get:["markets","markets/{marketId}/ticker","markets/{marketId}/trades","markets/{marketId}/orderbook","markets/{marketId}/candles","markets/tickers","markets/orderbooks","time"]},private:{get:["orders","orders/{id}","batchorders/{ids}","trades","trades/{id}","withdrawals","withdrawals/{id}","deposits","deposits/{id}","transfers","transfers/{id}","addresses","withdrawal-fees","assets","accounts/me/trading-fees","accounts/me/withdrawal-limits","accounts/me/balances","accounts/me/transactions","reports/{id}"],post:["orders","batchorders","withdrawals","reports"],delete:["orders","orders/{id}","batchorders/{ids}"],put:["orders/{id}"]}},timeframes:{"1m":"1m","1h":"1h","1d":"1d"},exceptions:{3:g,6:b,InsufficientFund:y,InvalidPrice:g,InvalidAmount:g,MissingArgument:g,OrderAlreadyCancelled:g,OrderNotFound:m,OrderStatusIsFinal:g,InvalidPaginationParameter:x},fees:{percentage:!0,tierBased:!0,maker:-5e-4,taker:.002},options:{fees:{AUD:{maker:.0085,taker:.0085}}}})}},{key:"fetchTransactionsWithMethod",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,u,c,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,i=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:void 0,s=d.length>4&&void 0!==d[4]?d[4]:{},e.next=6,this.loadMarkets();case 6:return o={},void 0!==a&&(o.limit=a),void 0!==i&&(o.after=i),u=void 0,void 0!==r&&(u=this.currency(r)),e.next=13,this[t](this.extend(o,s));case 13:return c=e.sent,e.abrupt("return",this.parseTransactions(c,u,i,a));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTransactions",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:void 0,i=s.length>2&&void 0!==s[2]?s[2]:void 0,a=s.length>3&&void 0!==s[3]?s[3]:{},e.next=6,this.fetchTransactionsWithMethod("privateGetTransfers",t,r,i,a);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchDeposits",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:void 0,i=s.length>2&&void 0!==s[2]?s[2]:void 0,a=s.length>3&&void 0!==s[3]?s[3]:{},e.next=6,this.fetchTransactionsWithMethod("privateGetDeposits",t,r,i,a);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchWithdrawals",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:void 0,i=s.length>2&&void 0!==s[2]?s[2]:void 0,a=s.length>3&&void 0!==s[3]?s[3]:{},e.next=6,this.fetchTransactionsWithMethod("privateGetWithdrawals",t,r,i,a);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTransactionStatus",value:function(e){return this.safeString({Complete:"ok"},e,e)}},{key:"parseTransactionType",value:function(e){return this.safeString({Withdraw:"withdrawal",Deposit:"deposit"},e,e)}},{key:"parseTransaction",value:function(e){var t=this.parse8601(this.safeString(e,"creationTime")),r=this.parse8601(this.safeString(e,"lastUpdate")),i=this.parseTransactionType(this.safeStringLower(e,"type"));"withdraw"===i&&(i="withdrawal");var n=this.safeValue(e,"paymentDetail",{}),a=this.safeString(n,"txId"),s=this.safeString(n,"address"),o=void 0;if(void 0!==s){var u=s.split("?dt="),c=u.length;c>1&&(s=u[0],o=u[1])}var d=s,h=o,l=void 0,f=void 0,p=this.safeNumber(e,"fee"),v=this.parseTransactionStatus(this.safeString(e,"status")),m=this.safeString(e,"assetName"),g=this.safeCurrencyCode(m),y=this.safeNumber(e,"amount");return p&&(y-=p),{id:this.safeString(e,"id"),txid:a,timestamp:t,datetime:this.iso8601(t),address:s,addressTo:d,addressFrom:l,tag:o,tagTo:h,tagFrom:f,type:i,amount:y,currency:g,status:v,updated:r,fee:{currency:g,cost:p},info:e}}},{key:"fetchMarkets",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,u,c,d,h,l,f,p,v,m,g,y,b,x,k=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=k.length>0&&void 0!==k[0]?k[0]:{},e.next=3,this.publicGetMarkets(t);case 3:for(r=e.sent,i=[],a=0;a<r.length;a++)s=r[a],o=this.safeString(s,"baseAssetName"),u=this.safeString(s,"quoteAssetName"),c=this.safeString(s,"marketId"),d=this.safeCurrencyCode(o),h=this.safeCurrencyCode(u),l=d+"/"+h,f=this.safeValue(this.safeValue(this.options,"fees",{}),h,this.fees),p=this.safeNumber(s,"priceDecimals"),v=this.safeNumber(s,"amountDecimals"),m=this.safeNumber(s,"minOrderAmount"),g=this.safeNumber(s,"maxOrderAmount"),y=void 0,"AUD"===h&&(y=Math.pow(10,-p)),b={amount:v,price:p},x={amount:{min:m,max:g},price:{min:y,max:void 0},cost:{min:void 0,max:void 0}},i.push({info:s,id:c,symbol:l,base:d,quote:h,baseId:o,quoteId:u,active:void 0,maker:f.maker,taker:f.taker,limits:x,precision:b});return e.abrupt("return",i);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTime",value:function(){var e=a(n.mark((function e(){var t,r,i=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},e.next=3,this.publicGetTime(t);case 3:return r=e.sent,e.abrupt("return",this.parse8601(this.safeString(r,"timestamp")));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,u,c,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetAccountsMeBalances(t);case 5:for(r=e.sent,i={info:r},a=0;a<r.length;a++)s=r[a],o=this.safeString(s,"assetName"),u=this.safeCurrencyCode(o),(c=this.account()).used=this.safeString(s,"locked"),c.total=this.safeString(s,"balance"),i[u]=c;return e.abrupt("return",this.parseBalance(i,!1));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){return[this.parse8601(this.safeString(e,0)),this.safeNumber(e,1),this.safeNumber(e,2),this.safeNumber(e,3),this.safeNumber(e,4),this.safeNumber(e,5)]}},{key:"fetchOHLCV",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,u,c,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:"1m",i=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:void 0,s=d.length>4&&void 0!==d[4]?d[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),u={marketId:o.id,timeWindow:this.timeframes[r]},void 0!==i&&(u.from=this.iso8601(i)),void 0!==a&&(u.limit=a),e.next=12,this.publicGetMarketsMarketIdCandles(this.extend(u,s));case 12:return c=e.sent,e.abrupt("return",this.parseOHLCVs(c,o,r,i,a));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,u,c=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.length>1&&void 0!==c[1]?c[1]:void 0,r=c.length>2&&void 0!==c[2]?c[2]:{},e.next=4,this.loadMarkets();case 4:return i=this.market(t),a={marketId:i.id},e.next=8,this.publicGetMarketsMarketIdOrderbook(this.extend(a,r));case 8:return s=e.sent,o=this.safeIntegerProduct(s,"snapshotId",.001),(u=this.parseOrderBook(s,o)).nonce=this.safeInteger(s,"snapshotId"),e.abrupt("return",u);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0,n=this.safeString(e,"marketId");if(void 0!==n)if(n in this.markets_by_id)t=this.markets_by_id[n];else{var a=n.split("-"),s=i(a,2),o=s[0],u=s[1],c=this.safeCurrencyCode(o),d=this.safeCurrencyCode(u);r=c+"/"+d}void 0===r&&void 0!==t&&(r=t.symbol);var h=this.parse8601(this.safeString(e,"timestamp")),l=this.safeNumber(e,"lastPrice"),f=this.safeNumber(e,"volume24h"),p=this.safeNumber(e,"volumeQte24h"),v=this.vwap(f,p),m=this.safeNumber(e,"price24h"),g=this.safeNumber(e,"pricePct24h");return{symbol:r,timestamp:h,datetime:this.iso8601(h),high:this.safeNumber(e,"high24h"),low:this.safeNumber(e,"low"),bid:this.safeNumber(e,"bestBid"),bidVolume:void 0,ask:this.safeNumber(e,"bestAsk"),askVolume:void 0,vwap:v,open:void 0,close:l,last:l,previousClose:void 0,change:m,percentage:g,average:void 0,baseVolume:f,quoteVolume:p,info:e}}},{key:"fetchTicker",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return i=this.market(t),a={marketId:i.id},e.next=7,this.publicGetMarketsMarketIdTicker(this.extend(a,r));case 7:return s=e.sent,e.abrupt("return",this.parseTicker(s,i));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTicker2",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return i=this.market(t),a={id:i.id},e.next=7,this.publicGetMarketIdTick(this.extend(a,r));case 7:return s=e.sent,e.abrupt("return",this.parseTicker(s,i));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.parse8601(this.safeString(e,"timestamp")),n=this.safeString(e,"marketId"),a=void 0,s=void 0,o=void 0;if(void 0!==n)if(n in this.markets_by_id)t=this.markets_by_id[n];else{var u=n.split("-"),c=i(u,2),d=c[0],h=c[1];a=(s=this.safeCurrencyCode(d))+"/"+(o=this.safeCurrencyCode(h))}void 0===a&&void 0!==t&&(a=t.symbol,s=t.base,o=t.quote);var l=void 0;l="AUD"===o?o:s;var f=this.safeString(e,"side");"Bid"===f?f="buy":"Ask"===f&&(f="sell");var p=this.safeString(e,"id"),v=this.safeString(e,"price"),m=this.safeString(e,"amount"),g=this.parseNumber(v),y=this.parseNumber(m),b=this.parseNumber(k.stringMul(v,m)),x=this.safeString(e,"orderId"),w=void 0,_=this.safeNumber(e,"fee");void 0!==_&&(w={cost:_,currency:l});var S=this.safeStringLower(e,"liquidityType");return{info:e,id:p,timestamp:r,datetime:this.iso8601(r),order:x,symbol:a,type:void 0,side:f,price:g,amount:y,cost:b,takerOrMaker:S,fee:w}}},{key:"fetchTrades",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,u,c=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,i=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={marketId:s.id},e.next=9,this.publicGetMarketsMarketIdTrades(this.extend(o,a));case 9:return u=e.sent,e.abrupt("return",this.parseTrades(u,s,r,i));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=a(n.mark((function e(t,r,i,a){var s,o,u,c,d,h,l,f,v,m,g,y=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=y.length>4&&void 0!==y[4]?y[4]:void 0,o=y.length>5&&void 0!==y[5]?y[5]:{},e.next=4,this.loadMarkets();case 4:if(u=this.market(t),c={marketId:u.id,amount:this.amountToPrecision(t,a),side:"buy"===i?"Bid":"Ask"},d=r.toLowerCase(),h=this.safeValue(this.options,"orderTypes",{limit:"Limit",market:"Market",stop:"Stop","stop limit":"Stop Limit","take profit":"Take Profit"}),c.type=this.safeString(h,d,r),l=!1,f=!1,"limit"===d?l=!0:"stop limit"===d?(f=!0,l=!0):("take profit"===d||"stop"===d)&&(f=!0),!l){e.next=18;break}if(void 0!==s){e.next=17;break}throw new p(this.id+" createOrder() requires a price argument for a "+r+"order");case 17:c.price=this.priceToPrecision(t,s);case 18:if(!f){e.next=26;break}if(v=this.safeNumber(o,"triggerPrice"),o=this.omit(o,"triggerPrice"),void 0!==v){e.next=25;break}throw new p(this.id+" createOrder() requires a triggerPrice parameter for a "+r+"order");case 25:c.triggerPrice=this.priceToPrecision(t,v);case 26:return void 0!==(m=this.safeString(o,"clientOrderId"))&&(c.clientOrderId=m),o=this.omit(o,"clientOrderId"),e.next=31,this.privatePostOrders(this.extend(c,o));case 31:return g=e.sent,e.abrupt("return",this.parseOrder(g,u));case 33:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrders",value:function(){var e=a(n.mark((function e(t){var r,i,a,s=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.loadMarkets();case 4:for(i=0;i<t.length;i++)t[i]=parseInt(t[i]);return a={ids:t},e.next=8,this.privateDeleteBatchordersIds(this.extend(a,r));case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=a(n.mark((function e(t){var r,i,a=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:{},e.next=4,this.loadMarkets();case 4:return i={id:t},e.next=7,this.privateDeleteOrdersId(this.extend(i,r));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"calculateFee",value:function(e,t,r,i,n){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"taker",s=this.markets[e],o=s[a],u=void 0,c=void 0;return"AUD"===s.quote?(u=s.quote,c=parseFloat(this.costToPrecision(e,i*n))):(u=s.base,c=parseFloat(this.amountToPrecision(e,i))),{type:a,currency:u,rate:o,cost:parseFloat(this.feeToPrecision(e,o*c))}}},{key:"parseOrderStatus",value:function(e){return this.safeString({Accepted:"open",Placed:"open","Partially Matched":"open","Fully Matched":"closed",Cancelled:"canceled","Partially Cancelled":"canceled",Failed:"rejected"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.parse8601(this.safeString(e,"creationTime")),n=this.safeString(e,"marketId"),a=void 0;if(void 0!==n)if(n in this.markets_by_id)t=this.markets_by_id[n];else{var s=n.split("-"),o=i(s,2),u=o[0],c=o[1],d=this.safeCurrencyCode(u),h=this.safeCurrencyCode(c);a=d+"/"+h}void 0===a&&void 0!==t&&(a=t.symbol);var l=this.safeString(e,"side");"Bid"===l?l="buy":"Ask"===l&&(l="sell");var f=this.safeStringLower(e,"type"),p=this.safeNumber(e,"price"),v=this.safeNumber(e,"amount"),m=this.safeNumber(e,"openAmount"),g=this.parseOrderStatus(this.safeString(e,"status")),y=this.safeString(e,"orderId"),b=this.safeString(e,"clientOrderId"),x=this.safeString(e,"timeInForce"),k=this.safeNumber(e,"triggerPrice"),w=this.safeValue(e,"postOnly");return this.safeOrder({info:e,id:y,clientOrderId:b,timestamp:r,datetime:this.iso8601(r),lastTradeTimestamp:void 0,symbol:a,type:f,timeInForce:x,postOnly:w,side:l,price:p,stopPrice:k,cost:void 0,amount:v,filled:void 0,remaining:m,average:void 0,status:g,trades:void 0,fee:void 0})}},{key:"fetchOrder",value:function(){var e=a(n.mark((function e(t){var r,i,a,s=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.loadMarkets();case 4:return i={id:t},e.next=7,this.privateGetOrdersId(this.extend(i,r));case 7:return a=e.sent,e.abrupt("return",this.parseOrder(a));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrders",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,u,c=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:void 0,r=c.length>1&&void 0!==c[1]?c[1]:void 0,i=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},e.next=6,this.loadMarkets();case 6:return s={status:"all"},o=void 0,void 0!==t&&(o=this.market(t),s.marketId=o.id),void 0!==r&&(s.after=r),void 0!==i&&(s.limit=i),e.next=13,this.privateGetOrders(this.extend(s,a));case 13:return u=e.sent,e.abrupt("return",this.parseOrders(u,o,r,i));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,i=o.length>2&&void 0!==o[2]?o[2]:void 0,a=o.length>3&&void 0!==o[3]?o[3]:{},s={status:"open"},e.next=7,this.fetchOrders(t,r,i,this.extend(s,a));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,i=o.length>2&&void 0!==o[2]?o[2]:void 0,a=o.length>3&&void 0!==o[3]?o[3]:{},e.next=6,this.fetchOrders(t,r,i,a);case 6:return s=e.sent,e.abrupt("return",this.filterBy(s,"status","closed"));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,u,c=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:void 0,r=c.length>1&&void 0!==c[1]?c[1]:void 0,i=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},e.next=6,this.loadMarkets();case 6:return s={},o=void 0,void 0!==t&&(o=this.market(t),s.marketId=o.id),void 0!==r&&(s.after=r),void 0!==i&&(s.limit=i),e.next=13,this.privateGetTrades(this.extend(s,a));case 13:return u=e.sent,e.abrupt("return",this.parseTrades(u,o,r,i));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"lookupSymbolFromMarketId",value:function(e){var t=void 0,r=void 0;if(void 0!==e)if(e in this.markets_by_id)t=this.markets_by_id[e];else{var n=e.split("-"),a=i(n,2),s=a[0],o=a[1];r=this.safeCurrencyCode(s)+"/"+this.safeCurrencyCode(o)}return void 0===r&&void 0!==t&&(r=t.symbol),r}},{key:"nonce",value:function(){return this.milliseconds()}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s="/"+this.version+"/"+this.implodeParams(e,i),o=this.keysort(this.omit(i,this.extractParams(e)));if("private"===t){this.checkRequiredCredentials();var u=this.nonce().toString(),c=this.base64ToBinary(this.encode(this.secret)),d=r+s+u;"GET"===r||"DELETE"===r?Object.keys(o).length&&(s+="?"+this.urlencode(o)):d+=a=this.json(o);var h=this.hmac(this.encode(d),c,"sha512","base64");n={Accept:"application/json","Accept-Charset":"UTF-8","Content-Type":"application/json","BM-AUTH-APIKEY":this.apiKey,"BM-AUTH-TIMESTAMP":u,"BM-AUTH-SIGNATURE":h}}else"public"===t&&Object.keys(o).length&&(s+="?"+this.urlencode(o));var l=this.urls.api[t]+s;return{url:l,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,u){if(void 0!==s){if("success"in s&&!s.success){var c=this.safeString(s,"errorCode"),d=this.id+" "+a;throw this.throwExactlyMatchedException(this.exceptions,c,d),new v(d)}if(e>=400){var h=this.safeString(s,"code"),l=this.safeString(s,"message"),f=this.id+" "+a;throw this.throwExactlyMatchedException(this.exceptions,h,f),this.throwExactlyMatchedException(this.exceptions,l,f),new v(f)}}}}]),r}(l)},function(e,t,r){"use strict";var i=r(7),n=r(8),a=r(1),s=r(2),o=r(6),u=r(3),c=r(4),d=r(5),h=r(11),l=r(10),f=l.ExchangeError,p=l.ArgumentsRequired,v=r(12);e.exports=function(e){c(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(u(r.prototype),"describe",this).call(this),{id:"btctradeua",name:"BTC Trade UA",countries:["UA"],rateLimit:3e3,has:{cancelOrder:!0,CORS:!1,createMarketOrder:!1,createOrder:!0,fetchBalance:!0,fetchOpenOrders:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTrades:!0,signIn:!0},urls:{referral:"https://btc-trade.com.ua/registration/22689",logo:"https://user-images.githubusercontent.com/1294454/27941483-79fc7350-62d9-11e7-9f61-ac47f28fcd96.jpg",api:"https://btc-trade.com.ua/api",www:"https://btc-trade.com.ua",doc:"https://docs.google.com/document/d/1ocYA0yMy_RXd561sfG3qEPZ80kyll36HUxvCRe5GbhE/edit"},api:{public:{get:["deals/{symbol}","trades/sell/{symbol}","trades/buy/{symbol}","japan_stat/high/{symbol}"]},private:{post:["auth","ask/{symbol}","balance","bid/{symbol}","buy/{symbol}","my_orders/{symbol}","order/status/{id}","remove/order/{id}","sell/{symbol}"]}},markets:{"BCH/UAH":{id:"bch_uah",symbol:"BCH/UAH",base:"BCH",quote:"UAH",baseId:"bch",quoteId:"uah"},"BTC/UAH":{id:"btc_uah",symbol:"BTC/UAH",base:"BTC",quote:"UAH",baseId:"btc",quoteId:"uah",precision:{price:1},limits:{amount:{min:1e-10}}},"DASH/BTC":{id:"dash_btc",symbol:"DASH/BTC",base:"DASH",quote:"BTC",baseId:"dash",quoteId:"btc"},"DASH/UAH":{id:"dash_uah",symbol:"DASH/UAH",base:"DASH",quote:"UAH",baseId:"dash",quoteId:"uah"},"DOGE/BTC":{id:"doge_btc",symbol:"DOGE/BTC",base:"DOGE",quote:"BTC",baseId:"doge",quoteId:"btc"},"DOGE/UAH":{id:"doge_uah",symbol:"DOGE/UAH",base:"DOGE",quote:"UAH",baseId:"doge",quoteId:"uah"},"ETH/UAH":{id:"eth_uah",symbol:"ETH/UAH",base:"ETH",quote:"UAH",baseId:"eth",quoteId:"uah"},"ITI/UAH":{id:"iti_uah",symbol:"ITI/UAH",base:"ITI",quote:"UAH",baseId:"iti",quoteId:"uah"},"KRB/UAH":{id:"krb_uah",symbol:"KRB/UAH",base:"KRB",quote:"UAH",baseId:"krb",quoteId:"uah"},"LTC/BTC":{id:"ltc_btc",symbol:"LTC/BTC",base:"LTC",quote:"BTC",baseId:"ltc",quoteId:"btc"},"LTC/UAH":{id:"ltc_uah",symbol:"LTC/UAH",base:"LTC",quote:"UAH",baseId:"ltc",quoteId:"uah"},"NVC/BTC":{id:"nvc_btc",symbol:"NVC/BTC",base:"NVC",quote:"BTC",baseId:"nvc",quoteId:"btc"},"NVC/UAH":{id:"nvc_uah",symbol:"NVC/UAH",base:"NVC",quote:"UAH",baseId:"nvc",quoteId:"uah"},"PPC/BTC":{id:"ppc_btc",symbol:"PPC/BTC",base:"PPC",quote:"BTC",baseId:"ppc",quoteId:"btc"},"SIB/UAH":{id:"sib_uah",symbol:"SIB/UAH",base:"SIB",quote:"UAH",baseId:"sib",quoteId:"uah"},"XMR/UAH":{id:"xmr_uah",symbol:"XMR/UAH",base:"XMR",quote:"UAH",baseId:"xmr",quoteId:"uah"},"ZEC/UAH":{id:"zec_uah",symbol:"ZEC/UAH",base:"ZEC",quote:"UAH",baseId:"zec",quoteId:"uah"}},fees:{trading:{maker:.001,taker:.001},funding:{withdraw:{BTC:6e-4,LTC:.01,NVC:.01,DOGE:10}}}})}},{key:"signIn",value:function(){var e=n(i.mark((function e(){var t,r=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:{},e.next=3,this.privatePostAuth(t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privatePostBalance(t);case 5:for(r=e.sent,n={info:r},a=this.safeValue(r,"accounts"),s=0;s<a.length;s++)o=a[s],u=this.safeString(o,"currency"),c=this.safeCurrencyCode(u),(d=this.account()).total=this.safeString(o,"balance"),n[c]=d;return e.abrupt("return",this.parseBalance(n,!1));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.length>1&&void 0!==c[1]?c[1]:void 0,r=c.length>2&&void 0!==c[2]?c[2]:{},e.next=4,this.loadMarkets();case 4:return n=this.market(t),a={symbol:n.id},e.next=8,this.publicGetTradesBuySymbol(this.extend(a,r));case 8:return s=e.sent,e.next=11,this.publicGetTradesSellSymbol(this.extend(a,r));case 11:return o=e.sent,u={bids:[],asks:[]},s&&"list"in s&&(u.bids=s.list),o&&"list"in o&&(u.asks=o.list),e.abrupt("return",this.parseOrderBook(u,void 0,"bids","asks","price","currency_trade"));case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=p.length>1&&void 0!==p[1]?p[1]:{},e.next=3,this.loadMarkets();case 3:return n={symbol:this.marketId(t)},e.next=6,this.publicGetJapanStatHighSymbol(this.extend(n,r));case 6:if(a=e.sent,s=this.safeValue(a,"trades"),o=this.milliseconds(),u={symbol:t,timestamp:o,datetime:this.iso8601(o),high:void 0,low:void 0,bid:void 0,bidVolume:void 0,ask:void 0,askVolume:void 0,vwap:void 0,open:void 0,close:void 0,last:void 0,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:void 0,quoteVolume:void 0,info:s},(c=s.length)>0){for(d=Math.max(c-48,0),h=d;h<s.length;h++)l=s[h],void 0===u.open&&(u.open=l[1]),(void 0===u.high||u.high<l[2])&&(u.high=l[2]),(void 0===u.low||u.low>l[3])&&(u.low=l[3]),void 0===u.baseVolume?u.baseVolume=-l[5]:u.baseVolume-=l[5];f=c-1,u.last=s[f][4],u.close=u.last,u.baseVolume=-1*u.baseVolume}return e.abrupt("return",u);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"convertCyrillicMonthNameToString",value:function(e){return this.safeString({"\u044f\u043d\u0432\u0430\u0440\u044f":"01","\u0444\u0435\u0432\u0440\u0430\u043b\u044f":"02","\u043c\u0430\u0440\u0442\u0430":"03","\u0430\u043f\u0440\u0435\u043b\u044f":"04","\u043c\u0430\u044f":"05","\u0438\u044e\u043d\u044f":"06","\u0438\u044e\u043b\u044f":"07","\u0430\u0432\u0433\u0443\u0441\u0442\u0430":"08","\u0441\u0435\u043d\u0442\u044f\u0431\u0440\u044f":"09","\u043e\u043a\u0442\u044f\u0431\u0440\u044f":"10","\u043d\u043e\u044f\u0431\u0440\u044f":"11","\u0434\u0435\u043a\u0430\u0431\u0440\u044f":"12"},e)}},{key:"parseCyrillicDatetime",value:function(e){var t=e.split(" "),r=t[0],i=this.convertCyrillicMonthNameToString(t[1]);if(!i)throw new f(this.id+" parseTrade() undefined month name: "+e);var n=t[2],a=t[4];7===a.length&&(a="0"+a),1===r.length&&(r="0"+r);var s=[n,i,r].join("-")+"T"+a,o=this.parse8601(s),u=[i,r].join("");return(u=parseInt(u))<325||u>1028?o-72e5:o-108e5}},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.parseCyrillicDatetime(this.safeString(e,"pub_date")),i=this.safeString(e,"id"),n="limit",a=this.safeString(e,"type"),s=this.safeString(e,"price"),o=this.safeString(e,"amnt_trade"),u=this.parseNumber(s),c=this.parseNumber(o),d=this.parseNumber(v.stringMul(s,o)),h=void 0;return void 0!==t&&(h=t.symbol),{id:i,info:e,timestamp:r,datetime:this.iso8601(r),symbol:h,type:n,side:a,order:void 0,takerOrMaker:void 0,price:u,amount:c,cost:d,fee:void 0}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={symbol:s.id},e.next=9,this.publicGetDealsSymbol(this.extend(o,a));case 9:for(u=e.sent,c=[],d=0;d<u.length;d++)u[d].id%2&&c.push(u[d]);return e.abrupt("return",this.parseTrades(c,s,r,n));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=h.length>4&&void 0!==h[4]?h[4]:void 0,o=h.length>5&&void 0!==h[5]?h[5]:{},"market"!==r){e.next=4;break}throw new f(this.id+" allows limit orders only");case 4:return e.next=6,this.loadMarkets();case 6:return u=this.market(t),c="privatePost"+this.capitalize(n)+"Id",d={count:a,currency1:u.quoteId,currency:u.baseId,price:s},e.abrupt("return",this[c](this.extend(d,o)));case 10:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:{},n={id:t},e.next=5,this.privatePostRemoveOrderId(this.extend(n,r));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.milliseconds(),i=void 0;return void 0!==t&&(i=t.symbol),{id:this.safeString(e,"id"),clientOrderId:void 0,timestamp:r,datetime:this.iso8601(r),lastTradeTimestamp:void 0,status:"open",symbol:i,type:void 0,timeInForce:void 0,postOnly:void 0,side:this.safeString(e,"type"),price:this.safeNumber(e,"price"),stopPrice:void 0,amount:this.safeNumber(e,"amnt_trade"),filled:0,remaining:this.safeNumber(e,"amnt_trade"),trades:void 0,info:e,cost:void 0,average:void 0,fee:void 0}}},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},void 0!==t){e.next=6;break}throw new p(this.id+" fetchOpenOrders() requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.market(t),o={symbol:s.id},e.next=12,this.privatePostMyOrdersSymbol(this.extend(o,a));case 12:return u=e.sent,c=this.safeValue(u,"your_open_orders"),e.abrupt("return",this.parseOrders(c,s,r,n));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"nonce",value:function(){return this.milliseconds()}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.urls.api+"/"+this.implodeParams(e,i),o=this.omit(i,this.extractParams(e));if("public"===t)Object.keys(o).length&&(s+=this.implodeParams(e,o));else{this.checkRequiredCredentials();var u=this.nonce(),c=(a=this.urlencode(this.extend({out_order_id:u,nonce:u},o)))+this.secret;n={"public-key":this.apiKey,"api-sign":this.hash(this.encode(c),"sha256"),"Content-Type":"application/x-www-form-urlencoded"}}return{url:s,method:r,body:a,headers:n}}}]),r}(h)},function(e,t,r){"use strict";var i=r(7),n=r(8),a=r(1),s=r(2),o=r(6),u=r(3),c=r(4),d=r(5),h=r(11),l=r(10).ExchangeError;e.exports=function(e){c(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(u(r.prototype),"describe",this).call(this),{id:"btcturk",name:"BTCTurk",countries:["TR"],rateLimit:1e3,has:{cancelOrder:!0,CORS:!0,createOrder:!0,fetchBalance:!0,fetchMarkets:!0,fetchOHLCV:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0},timeframes:{"1d":"1d"},urls:{logo:"https://user-images.githubusercontent.com/51840849/87153926-efbef500-c2c0-11ea-9842-05b63612c4b9.jpg",api:"https://www.btcturk.com/api",www:"https://www.btcturk.com",doc:"https://github.com/BTCTrader/broker-api-docs"},api:{public:{get:["ohlcdata","orderbook","ticker","trades"]},private:{get:["balance","openOrders","userTransactions"],post:["exchange","cancelOrder"]}},fees:{trading:{maker:.00236,taker:.003*1.18}}})}},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p,v=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=v.length>0&&void 0!==v[0]?v[0]:{},e.next=3,this.publicGetTicker(t);case 3:for(r=e.sent,n=[],a=0;a<r.length;a++)s=r[a],o=this.safeString(s,"pair"),u=o.slice(0,3),c=o.slice(3,6),d=this.safeCurrencyCode(u),h=this.safeCurrencyCode(c),u=u.toLowerCase(),c=c.toLowerCase(),l=d+"/"+h,f={amount:8,price:8},p=!0,n.push({id:o,symbol:l,base:d,quote:h,baseId:u,quoteId:c,active:p,info:s,precision:f,limits:{amount:{min:Math.pow(10,-f.amount),max:void 0},price:{min:Math.pow(10,-f.price),max:void 0},cost:{min:void 0,max:void 0}}});return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetBalance(t);case 5:for(r=e.sent,n={info:r},a=Object.keys(this.currencies),s=0;s<a.length;s++)o=a[s],u=this.currencies[o],c=u.id+"_available",d=u.id+"_balance",h=u.id+"_reserved",c in r&&((l=this.account()).free=this.safeString(r,c),l.total=this.safeString(r,d),l.used=this.safeString(r,h),n[o]=l);return e.abrupt("return",this.parseBalance(n,!1));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u.length>1&&void 0!==u[1]?u[1]:void 0,r=u.length>2&&void 0!==u[2]?u[2]:{},e.next=4,this.loadMarkets();case 4:return n=this.market(t),a={pairSymbol:n.id},e.next=8,this.publicGetOrderbook(this.extend(a,r));case 8:return s=e.sent,o=this.safeTimestamp(s,"timestamp"),e.abrupt("return",this.parseOrderBook(s,o));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0;t&&(r=t.symbol);var i=this.safeTimestamp(e,"timestamp"),n=this.safeNumber(e,"last");return{symbol:r,timestamp:i,datetime:this.iso8601(i),high:this.safeNumber(e,"high"),low:this.safeNumber(e,"low"),bid:this.safeNumber(e,"bid"),bidVolume:void 0,ask:this.safeNumber(e,"ask"),askVolume:void 0,vwap:void 0,open:this.safeNumber(e,"open"),close:n,last:n,previousClose:void 0,change:void 0,percentage:void 0,average:this.safeNumber(e,"average"),baseVolume:this.safeNumber(e,"volume"),quoteVolume:void 0,info:e}}},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetTicker(r);case 6:for(n=e.sent,a={},s=0;s<n.length;s++)o=n[s],u=this.safeString(o,"pair"),c=u,d=void 0,u in this.markets_by_id&&(d=this.markets_by_id[c],c=d.symbol),a[c]=this.parseTicker(o,d);return e.abrupt("return",this.filterByArray(a,"symbol",t));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>1&&void 0!==s[1]?s[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),e.next=6,this.fetchTickers(r);case 6:return a=e.sent,e.abrupt("return",this.safeValue2(a,n.id,t));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeTimestamp(e,"date"),i=this.safeString(e,"tid"),n=this.safeNumber(e,"price"),a=this.safeNumber(e,"amount"),s=void 0;void 0!==a&&void 0!==n&&(s=a*n);var o=void 0;return void 0!==t&&(o=t.symbol),{id:i,info:e,timestamp:r,datetime:this.iso8601(r),symbol:o,type:void 0,side:void 0,order:void 0,takerOrMaker:void 0,price:n,amount:a,cost:s,fee:void 0}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={pairSymbol:s.id},e.next=9,this.publicGetTrades(this.extend(o,a));case 9:return u=e.sent,e.abrupt("return",this.parseTrades(u,s,r,n));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){return[this.parse8601(this.safeString(e,"Time")),this.safeNumber(e,"Open"),this.safeNumber(e,"High"),this.safeNumber(e,"Low"),this.safeNumber(e,"Close"),this.safeNumber(e,"Volume")]}},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:"1d",n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:void 0,s=d.length>4&&void 0!==d[4]?d[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),u={},void 0!==a&&(u.last=a),e.next=11,this.publicGetOhlcdata(this.extend(u,s));case 11:return c=e.sent,e.abrupt("return",this.parseOHLCVs(c,o,r,n,a));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=h.length>4&&void 0!==h[4]?h[4]:void 0,o=h.length>5&&void 0!==h[5]?h[5]:{},e.next=4,this.loadMarkets();case 4:if(u={PairSymbol:this.marketId(t),OrderType:"buy"===n?0:1,OrderMethod:"market"===r?1:0},"market"!==r){e.next=10;break}if("Total"in o){e.next=8;break}throw new l(this.id+' createOrder() requires the "Total" extra parameter for market orders (amount and price are both ignored)');case 8:e.next=12;break;case 10:u.Price=s,u.Amount=a;case 12:return e.next=14,this.privatePostExchange(this.extend(u,o));case 14:return c=e.sent,d=this.safeString(c,"id"),e.abrupt("return",{info:c,id:d});case 17:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:{},n={id:t},e.next=5,this.privatePostCancelOrder(this.extend(n,r));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"nonce",value:function(){return this.milliseconds()}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0;if("btctrader"===this.id)throw new l(this.id+" is an abstract base API for BTCExchange, BTCTurk");var s=this.urls.api+"/"+e;if("public"===t)Object.keys(i).length&&(s+="?"+this.urlencode(i));else{this.checkRequiredCredentials();var o=this.nonce().toString();a=this.urlencode(i);var u=this.base64ToBinary(this.secret),c=this.apiKey+o;n={"X-PCK":this.apiKey,"X-Stamp":o,"X-Signature":this.hmac(this.encode(c),u,"sha256","base64"),"Content-Type":"application/x-www-form-urlencoded"}}return{url:s,method:r,body:a,headers:n}}}]),r}(h)},function(e,t,r){"use strict";var i=r(7),n=r(8),a=r(1),s=r(2),o=r(6),u=r(3),c=r(4),d=r(5),h=r(11),l=r(10),f=l.AddressPending,p=l.AuthenticationError,v=l.ExchangeError,m=l.NotSupported,g=l.PermissionDenied,y=l.ArgumentsRequired,b=r(12);e.exports=function(e){c(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(u(r.prototype),"describe",this).call(this),{id:"buda",name:"Buda",countries:["AR","CL","CO","PE"],rateLimit:1e3,version:"v2",has:{cancelOrder:!0,CORS:!1,createDepositAddress:!0,createOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchCurrencies:!0,fetchDepositAddress:!0,fetchDeposits:!0,fetchFundingFees:!0,fetchMarkets:!0,fetchMyTrades:!1,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchTrades:!0,fetchTicker:!0,fetchWithdrawals:!0,withdraw:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/47380619-8a029200-d706-11e8-91e0-8a391fe48de3.jpg",api:"https://www.buda.com/api",www:"https://www.buda.com",doc:"https://api.buda.com",fees:"https://www.buda.com/comisiones"},status:{status:"error",updated:void 0,eta:void 0,url:void 0},api:{public:{get:["pairs","markets","currencies","markets/{market}","markets/{market}/ticker","markets/{market}/volume","markets/{market}/order_book","markets/{market}/trades","currencies/{currency}/fees/deposit","currencies/{currency}/fees/withdrawal","tv/history"],post:["markets/{market}/quotations"]},private:{get:["balances","balances/{currency}","currencies/{currency}/balances","orders","orders/{id}","markets/{market}/orders","deposits","currencies/{currency}/deposits","withdrawals","currencies/{currency}/withdrawals","currencies/{currency}/receive_addresses","currencies/{currency}/receive_addresses/{id}"],post:["markets/{market}/orders","currencies/{currency}/deposits","currencies/{currency}/withdrawals","currencies/{currency}/simulated_withdrawals","currencies/{currency}/receive_addresses"],put:["orders/{id}"]}},timeframes:{"1m":"1","5m":"5","30m":"30","1h":"60","2h":"120","1d":"D","1w":"W"},fees:{trading:{tierBased:!0,percentage:!0,taker:.008,maker:.004,tiers:{taker:[[0,.008],[2e3,.007],[2e4,.006],[1e5,.005],[5e5,.004],[25e5,.003],[125e5,.002]],maker:[[0,.004],[2e3,.0035],[2e4,.003],[1e5,.0025],[5e5,.002],[25e5,.0015],[125e5,.001]]}}},exceptions:{not_authorized:p,forbidden:g,invalid_record:v,not_found:v,parameter_missing:v,bad_parameter:v}})}},{key:"fetchCurrencyInfo",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=o.length>1&&void 0!==o[1]?o[1]:void 0){e.next=6;break}return e.next=4,this.publicGetCurrencies();case 4:n=e.sent,r=this.safeValue(n,"currencies");case 6:a=0;case 7:if(!(a<r.length)){e.next=14;break}if((s=r[a]).id!==t){e.next=11;break}return e.abrupt("return",s);case 11:a++,e.next=7;break;case 14:return e.abrupt("return",void 0);case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p,v,m,g,y,b,x=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=x.length>0&&void 0!==x[0]?x[0]:{},e.next=3,this.publicGetMarkets(t);case 3:return r=e.sent,n=this.safeValue(r,"markets"),e.next=7,this.publicGetCurrencies();case 7:a=e.sent,s=this.safeValue(a,"currencies"),o=[],u=0;case 11:if(!(u<n.length)){e.next=32;break}return c=n[u],d=this.safeString(c,"id"),h=this.safeString(c,"base_currency"),l=this.safeString(c,"quote_currency"),f=this.safeCurrencyCode(h),p=this.safeCurrencyCode(l),e.next=20,this.fetchCurrencyInfo(h,s);case 20:return v=e.sent,e.next=23,this.fetchCurrencyInfo(l,s);case 23:m=e.sent,g=f+"/"+p,y={amount:v.input_decimals,price:m.input_decimals},(b={amount:{min:parseFloat(c.minimum_order_amount[0]),max:void 0},price:{min:Math.pow(10,-y.price),max:void 0}}).cost={min:b.amount.min*b.price.min,max:void 0},o.push({id:d,symbol:g,base:f,quote:p,baseId:h,quoteId:l,active:!0,precision:y,limits:b,info:c});case 29:u++,e.next=11;break;case 32:return e.abrupt("return",o);case 33:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchCurrencies",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h.length>0&&void 0!==h[0]?h[0]:{},e.next=3,this.publicGetCurrencies();case 3:t=e.sent,r=t.currencies,n={},a=0;case 7:if(!(a<r.length)){e.next=19;break}if((s=r[a]).managed){e.next=11;break}return e.abrupt("continue",16);case 11:o=this.safeString(s,"id"),u=this.safeCurrencyCode(o),c=this.safeNumber(s,"input_decimals"),d=Math.pow(10,-c),n[u]={id:o,code:u,info:s,name:void 0,active:!0,fee:void 0,precision:c,limits:{amount:{min:d,max:void 0},deposit:{min:parseFloat(s.deposit_minimum[0]),max:void 0},withdraw:{min:parseFloat(s.withdrawal_minimum[0])}}};case 16:a++,e.next=7;break;case 19:return e.abrupt("return",n);case 20:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchFundingFees",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:void 0,l.length>1&&void 0!==l[1]?l[1]:{},e.next=4,this.loadMarkets();case 4:r={},n={},a={},void 0===t&&(t=Object.keys(this.currencies)),s=0;case 9:if(!(s<t.length)){e.next=25;break}return o=t[s],u=this.currency(o),c={currency:u.id},e.next=15,this.publicGetCurrenciesCurrencyFeesWithdrawal(c);case 15:return d=e.sent,e.next=18,this.publicGetCurrenciesCurrencyFeesDeposit(c);case 18:h=e.sent,r[o]=this.parseFundingFee(d.fee),n[o]=this.parseFundingFee(h.fee),a[o]={withdraw:d,deposit:h};case 22:s++,e.next=9;break;case 25:return e.abrupt("return",{withdraw:r,deposit:n,info:a});case 26:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseFundingFee",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return void 0===t&&(t=e.name),"withdrawal"===t&&(t="withdraw"),{type:t,currency:e.base[1],rate:e.percent,cost:parseFloat(e.base[0])}}},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={market:n.id},e.next=7,this.publicGetMarketsMarketTicker(this.extend(a,r));case 7:return s=e.sent,o=this.safeValue(s,"ticker"),e.abrupt("return",this.parseTicker(o,n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.milliseconds(),i=void 0;void 0!==t&&(i=t.symbol);var n=parseFloat(e.last_price[0]),a=parseFloat(e.price_variation_24h),s=parseFloat(this.priceToPrecision(i,n/(a+1))),o=n-s,u=this.sum(n,s)/2;return{symbol:i,timestamp:r,datetime:this.iso8601(r),high:void 0,low:void 0,bid:parseFloat(e.max_bid[0]),bidVolume:void 0,ask:parseFloat(e.min_ask[0]),askVolume:void 0,vwap:void 0,open:s,close:n,last:n,previousClose:s,change:o,percentage:100*a,average:u,baseVolume:parseFloat(e.volume[0]),quoteVolume:void 0,info:e}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={market:s.id},void 0!==n&&(o.limit=n),e.next=10,this.publicGetMarketsMarketTrades(this.extend(o,a));case 10:return u=e.sent,e.abrupt("return",this.parseTrades(u.trades.entries,s,r,n));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0,i=void 0,n=void 0,a=void 0,s=void 0,o=void 0,u=void 0,c=void 0,d=void 0;t&&(d=t.symbol),Array.isArray(e)&&(r=this.safeInteger(e,0),a=this.safeString(e,1),s=this.safeString(e,2),i=this.safeString(e,3),o=this.safeString(e,4));var h=this.parseNumber(a),l=this.parseNumber(s),f=this.parseNumber(b.stringMul(a,s));return{id:o,order:u,info:e,timestamp:r,datetime:this.iso8601(r),symbol:d,type:n,side:i,takerOrMaker:void 0,price:h,amount:l,cost:f,fee:c}}},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u.length>1&&void 0!==u[1]?u[1]:void 0,r=u.length>2&&void 0!==u[2]?u[2]:{},e.next=4,this.loadMarkets();case 4:return n=this.market(t),a={market:n.id},e.next=8,this.publicGetMarketsMarketOrderBook(this.extend(a,r));case 8:return s=e.sent,o=this.safeValue(s,"order_book"),e.abrupt("return",this.parseOrderBook(o));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:"1m",n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:void 0,s=d.length>4&&void 0!==d[4]?d[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),void 0===n&&(n=this.milliseconds()-864e5),u={symbol:o.id,resolution:this.timeframes[r],from:n/1e3,to:this.seconds()},e.next=11,this.publicGetTvHistory(this.extend(u,s));case 11:return c=e.sent,e.abrupt("return",this.parseTradingViewOHLCV(c,o,r,n,a));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetBalances(t);case 5:for(r=e.sent,n={info:r},a=this.safeValue(r,"balances"),s=0;s<a.length;s++)o=a[s],u=this.safeString(o,"id"),c=this.safeCurrencyCode(u),(d=this.account()).free=this.safeString(o.available_amount,0),d.total=this.safeString(o.amount,0),n[c]=d;return e.abrupt("return",this.parseBalance(n,!1));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.length>1&&void 0!==o[1]?o[1]:void 0,r=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return n={id:parseInt(t)},e.next=7,this.privateGetOrdersId(this.extend(n,r));case 7:return a=e.sent,s=this.safeValue(a,"order"),e.abrupt("return",this.parseOrder(s));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return s=void 0,void 0!==t&&(s=this.market(t)),o={market:s.id,per:n},e.next=11,this.privateGetMarketsMarketOrders(this.extend(o,a));case 11:return u=e.sent,c=this.safeValue(u,"orders"),e.abrupt("return",this.parseOrders(c,s,r,n));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:void 0,a=o.length>3&&void 0!==o[3]?o[3]:{},s={state:"pending"},e.next=7,this.fetchOrders(t,r,n,this.extend(s,a));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:void 0,a=o.length>3&&void 0!==o[3]?o[3]:{},s={state:"traded"},e.next=7,this.fetchOrders(t,r,n,this.extend(s,a));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=h.length>4&&void 0!==h[4]?h[4]:void 0,o=h.length>5&&void 0!==h[5]?h[5]:{},e.next=4,this.loadMarkets();case 4:return n="buy"===n?"Bid":"Ask",u={market:this.marketId(t),price_type:r,type:n,amount:this.amountToPrecision(t,a)},"limit"===r&&(u.limit=this.priceToPrecision(t,s)),e.next=9,this.privatePostMarketsMarketOrders(this.extend(u,o));case 9:return c=e.sent,d=this.safeValue(c,"order"),e.abrupt("return",this.parseOrder(d));case 12:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.length>1&&void 0!==o[1]?o[1]:void 0,r=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return n={id:parseInt(t),state:"canceling"},e.next=7,this.privatePutOrdersId(this.extend(n,r));case 7:return a=e.sent,s=this.safeValue(a,"order"),e.abrupt("return",this.parseOrder(s));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({traded:"closed",received:"open",canceling:"canceled"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),i=this.parse8601(this.safeString(e,"created_at")),n=this.safeString(e,"market_id"),a=this.safeSymbol(n,t,"-"),s=this.safeString(e,"price_type"),o=this.safeStringLower(e,"type"),u=this.parseOrderStatus(this.safeString(e,"state")),c=this.safeValue(e,"original_amount",[]),d=this.safeNumber(c,0),h=this.safeValue(e,"amount",[]),l=this.safeNumber(h,0),f=this.safeValue(e,"traded_amount",[]),p=this.safeNumber(f,0),v=this.safeValue(e,"totalExchanged",[]),m=this.safeNumber(v,0),g=this.safeValue(e,"limit",[]),y=this.safeNumber(g,0);void 0===y&&void 0!==g&&(y=g);var b=this.safeValue(e,"paid_fee",[]),x=this.safeNumber(b,0),k=void 0;if(void 0!==x){var w=this.safeString(b,1),_=this.safeCurrencyCode(w);k={cost:x,code:_}}return this.safeOrder({info:e,id:r,clientOrderId:void 0,datetime:this.iso8601(i),timestamp:i,lastTradeTimestamp:void 0,status:u,symbol:a,type:s,timeInForce:void 0,postOnly:void 0,side:o,price:y,stopPrice:void 0,average:void 0,cost:m,amount:d,filled:p,remaining:l,trades:void 0,fee:k})}},{key:"isFiat",value:function(e){return this.safeValue({ARS:!0,CLP:!0,COP:!0,PEN:!0},e,!1)}},{key:"fetchDepositAddress",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d,h,l,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=p.length>1&&void 0!==p[1]?p[1]:{},e.next=3,this.loadMarkets();case 3:if(n=this.currency(t),!this.isFiat(t)){e.next=6;break}throw new m(this.id+" fetchDepositAddress() for fiat "+t+" is not supported");case 6:return a={currency:n.id},e.next=9,this.privateGetCurrenciesCurrencyReceiveAddresses(this.extend(a,r));case 9:for(s=e.sent,o=this.safeValue(s,"receive_addresses"),u=[],c=1;c<o.length;c++)(d=o[c]).ready&&(h=d.address,this.checkAddress(h),u.push(h));if(!(u.length<1)){e.next=16;break}throw new f(this.id+": there are no addresses ready for receiving "+t+", retry again later)");case 16:return l=u[0],e.abrupt("return",{currency:t,address:l,tag:void 0,info:o});case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createDepositAddress",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:{},e.next=3,this.loadMarkets();case 3:if(n=this.currency(t),!this.isFiat(t)){e.next=6;break}throw new m(this.id+": fiat fetchDepositAddress() for "+t+" is not supported");case 6:return a={currency:n.id},e.next=9,this.privatePostCurrenciesCurrencyReceiveAddresses(this.extend(a,r));case 9:return s=e.sent,o=this.safeString(s.receive_address,"address"),e.abrupt("return",{currency:t,address:o,tag:void 0,info:s});case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTransactionStatus",value:function(e){return this.safeString({rejected:"failed",confirmed:"ok",anulled:"canceled",retained:"canceled",pending_confirmation:"pending"},e,e)}},{key:"parseTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),i=this.parse8601(this.safeString(e,"created_at")),n=this.safeString(e,"currency"),a=this.safeCurrencyCode(n,t),s=parseFloat(e.amount[0]),o=parseFloat(e.fee[0]),u=e.fee[1],c=this.parseTransactionStatus(this.safeString(e,"state")),d="deposit_data"in e?"deposit":"withdrawal",h=this.safeValue(e,d+"_data",{}),l=this.safeValue(h,"target_address"),f=this.safeString(h,"tx_hash"),p=this.parse8601(this.safeString(h,"updated_at"));return{info:e,id:r,txid:f,timestamp:i,datetime:this.iso8601(i),address:l,type:d,amount:s,currency:a,status:c,updated:p,fee:{cost:o,rate:u}}}},{key:"fetchDeposits",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:if(void 0!==t){e.next=8;break}throw new y(this.id+": fetchDeposits() requires a currency code argument");case 8:return s=this.currency(t),o={currency:s.id,per:n},e.next=12,this.privateGetCurrenciesCurrencyDeposits(this.extend(o,a));case 12:return u=e.sent,c=this.safeValue(u,"deposits"),e.abrupt("return",this.parseTransactions(c,s,r,n));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchWithdrawals",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:if(void 0!==t){e.next=8;break}throw new y(this.id+": fetchDeposits() requires a currency code argument");case 8:return s=this.currency(t),o={currency:s.id,per:n},e.next=12,this.privateGetCurrenciesCurrencyWithdrawals(this.extend(o,a));case 12:return u=e.sent,c=this.safeValue(u,"withdrawals"),e.abrupt("return",this.parseTransactions(c,s,r,n));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"withdraw",value:function(){var e=n(i.mark((function e(t,r,n){var a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d.length>3&&void 0!==d[3]?d[3]:void 0,a=d.length>4&&void 0!==d[4]?d[4]:{},this.checkAddress(n),e.next=5,this.loadMarkets();case 5:return s=this.currency(t),o={currency:s.id,amount:r,withdrawal_data:{target_address:n}},e.next=9,this.privatePostCurrenciesCurrencyWithdrawals(this.extend(o,a));case 9:return u=e.sent,c=this.safeValue(u,"withdrawal"),e.abrupt("return",this.parseTransaction(c));case 12:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"nonce",value:function(){return this.microseconds()}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.implodeParams(e,i),o=this.omit(i,this.extractParams(e));Object.keys(o).length&&("GET"===r?s+="?"+this.urlencode(o):a=this.json(o));var u=this.urls.api+"/"+this.version+"/"+s;if("private"===t){this.checkRequiredCredentials();var c=this.nonce().toString(),d=[r,"/api/"+this.version+"/"+s];if(a){var h=this.stringToBase64(a);d.push(this.decode(h))}d.push(c);var l=d.join(" "),f=this.hmac(this.encode(l),this.encode(this.secret),"sha384");n={"X-SBTC-APIKEY":this.apiKey,"X-SBTC-SIGNATURE":f,"X-SBTC-NONCE":c,"Content-Type":"application/json"}}return{url:u,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,u){if(void 0!==s&&e>=400){var c=this.safeString(s,"code"),d=this.safeString(s,"message",a),h=this.id+" "+d;if(void 0!==c)throw this.throwExactlyMatchedException(this.exceptions,c,h),new v(h)}}}]),r}(h)},function(e,t,r){"use strict";var i=r(7),n=r(21),a=r(8),s=r(1),o=r(2),u=r(6),c=r(3),d=r(4),h=r(5),l=r(11),f=r(10),p=f.RateLimitExceeded,v=f.BadSymbol,m=f.OrderNotFound,g=f.ExchangeError,y=f.AuthenticationError,b=f.ArgumentsRequired,x=f.ExchangeNotAvailable,k=r(12);e.exports=function(e){d(r,e);var t=h(r);function r(){return s(this,r),t.apply(this,arguments)}return o(r,[{key:"describe",value:function(){return this.deepExtend(u(c(r.prototype),"describe",this).call(this),{id:"bw",name:"BW",countries:["CN"],rateLimit:1500,version:"v1",has:{cancelAllOrders:!1,cancelOrder:!0,cancelOrders:!1,CORS:!1,createDepositAddress:!1,createLimitOrder:!0,createMarketOrder:!1,createOrder:!0,deposit:!1,editOrder:!1,fetchBalance:!0,fetchBidsAsks:!1,fetchClosedOrders:!0,fetchCurrencies:!0,fetchDepositAddress:!0,fetchDeposits:!0,fetchFundingFees:!1,fetchL2OrderBook:!1,fetchLedger:!1,fetchMarkets:!0,fetchMyTrades:!1,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrderBooks:!1,fetchOrders:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,fetchTradingFee:!1,fetchTradingFees:!1,fetchTradingLimits:!1,fetchTransactions:!1,fetchWithdrawals:!0,privateAPI:!1,publicAPI:!1,withdraw:!1},timeframes:{"1m":"1M","5m":"5M","15m":"15M","30m":"30M","1h":"1H","1w":"1W"},hostname:"bw.com",urls:{logo:"https://user-images.githubusercontent.com/1294454/69436317-31128c80-0d52-11ea-91d1-eb7bb5818812.jpg",api:"https://www.{hostname}",www:"https://www.bw.com",doc:"https://github.com/bw-exchange/api_docs_en/wiki",fees:"https://www.bw.com/feesRate",referral:"https://www.bw.com/regGetCommission/N3JuT1R3bWxKTE0"},requiredCredentials:{apiKey:!0,secret:!0},fees:{trading:{tierBased:!1,percentage:!0,taker:.002,maker:.002},funding:{}},exceptions:{exact:{999:y,1e3:x,2012:m,5017:v,10001:p}},api:{public:{get:["api/data/v1/klines","api/data/v1/ticker","api/data/v1/tickers","api/data/v1/trades","api/data/v1/entrusts","exchange/config/controller/website/marketcontroller/getByWebId","exchange/config/controller/website/currencycontroller/getCurrencyList"]},private:{get:["exchange/entrust/controller/website/EntrustController/getEntrustById","exchange/entrust/controller/website/EntrustController/getUserEntrustRecordFromCacheWithPage","exchange/entrust/controller/website/EntrustController/getUserEntrustList","exchange/fund/controller/website/fundwebsitecontroller/getwithdrawaddress","exchange/fund/controller/website/fundwebsitecontroller/getpayoutcoinrecord","exchange/entrust/controller/website/EntrustController/getUserEntrustList"],post:["exchange/fund/controller/website/fundcontroller/getPayinAddress","exchange/fund/controller/website/fundcontroller/getPayinCoinRecord","exchange/fund/controller/website/fundcontroller/findbypage","exchange/entrust/controller/website/EntrustController/addEntrust","exchange/entrust/controller/website/EntrustController/cancelEntrust"]}}})}},{key:"fetchMarkets",value:function(){var e=a(i.mark((function e(){var t,r,a,s,o,u,c,d,h,l,f,p,v,m,g,y,b,x,k,w,_,S=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=S.length>0&&void 0!==S[0]?S[0]:{},e.next=3,this.publicGetExchangeConfigControllerWebsiteMarketcontrollerGetByWebId(t);case 3:for(r=e.sent,a=this.safeValue(r,"datas",[]),s=[],o=0;o<a.length;o++)u=a[o],c=this.safeString(u,"marketId"),d=parseInt(c),h=this.safeStringUpper(u,"name"),l=h.split("_"),f=n(l,2),p=f[0],v=f[1],p=this.safeCurrencyCode(p),v=this.safeCurrencyCode(v),m=this.safeString(u,"sellerCurrencyId"),g=this.safeString(u,"buyerCurrencyId"),y=parseInt(m),b=parseInt(g),x=p+"/"+v,k=this.safeInteger(u,"state"),w=1===k,_=this.safeNumber(u,"defaultFee"),s.push({id:c,active:w,numericId:d,symbol:x,base:p,quote:v,baseId:m,quoteId:g,baseNumericId:y,quoteNumericId:b,maker:_,taker:_,info:u,precision:{amount:this.safeInteger(u,"amountDecimal"),price:this.safeInteger(u,"priceDecimal")},limits:{amount:{min:this.safeNumber(u,"minAmount"),max:void 0},price:{min:0,max:void 0},cost:{min:0,max:void 0}}});return e.abrupt("return",s);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchCurrencies",value:function(){var e=a(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:{},e.next=3,this.publicGetExchangeConfigControllerWebsiteCurrencycontrollerGetCurrencyList(t);case 3:for(r=e.sent,n=this.safeValue(r,"datas",[]),a={},s=0;s<n.length;s++)o=n[s],u=this.safeString(o,"currencyId"),c=this.safeCurrencyCode(this.safeStringUpper(o,"name")),d=this.safeInteger(o,"state"),h=1===d,a[c]={id:u,code:c,info:o,name:c,active:h,fee:this.safeNumber(o,"drawFee"),precision:void 0,limits:{amount:{min:this.safeNumber(o,"limitAmount",0),max:void 0},withdraw:{min:void 0,max:this.safeNumber(o,"onceDrawLimit")}}};return e.abrupt("return",a);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,0),i=this.safeSymbol(r,t),n=this.milliseconds(),a=parseFloat(this.safeValue(e,1)),s=this.safeValue(e,"bid",{}),o=this.safeValue(e,"ask",{});return{symbol:i,timestamp:n,datetime:this.iso8601(n),high:parseFloat(this.safeValue(e,2)),low:parseFloat(this.safeValue(e,3)),bid:parseFloat(this.safeValue(e,7)),bidVolume:this.safeNumber(s,"quantity"),ask:parseFloat(this.safeValue(e,8)),askVolume:this.safeNumber(o,"quantity"),vwap:void 0,open:void 0,close:a,last:a,previousClose:void 0,change:parseFloat(this.safeValue(e,5)),percentage:void 0,average:void 0,baseVolume:parseFloat(this.safeValue(e,4)),quoteVolume:parseFloat(this.safeValue(e,9)),info:e}}},{key:"fetchTicker",value:function(){var e=a(i.mark((function e(t){var r,n,a,s,o,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={marketId:n.id},e.next=7,this.publicGetApiDataV1Ticker(this.extend(a,r));case 7:return s=e.sent,o=this.safeValue(s,"datas",[]),e.abrupt("return",this.parseTicker(o,n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTickers",value:function(){var e=a(i.mark((function e(){var t,r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetApiDataV1Tickers(r);case 6:for(n=e.sent,a=this.safeValue(n,"datas",[]),s={},o=0;o<a.length;o++)u=this.parseTicker(a[o]),c=u.symbol,(void 0===t||this.inArray(c,t))&&(s[c]=u);return e.abrupt("return",this.filterByArray(s,"symbol",t));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=a(i.mark((function e(t){var r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:{},e.next=4,this.loadMarkets();case 4:return a=this.market(t),s={marketId:a.id},void 0!==r&&(s.dataSize=r),e.next=9,this.publicGetApiDataV1Entrusts(this.extend(s,n));case 9:return o=e.sent,u=this.safeValue(o,"datas",[]),c=this.safeTimestamp(u,"timestamp"),e.abrupt("return",this.parseOrderBook(u,c));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeTimestamp(e,2),i=this.safeString(e,5),a=this.safeString(e,6),s=this.parseNumber(i),o=this.parseNumber(a),u=this.parseNumber(k.stringMul(i,a)),c=this.safeString(e,1),d=void 0;if(void 0!==c)if(c in this.markets_by_id)t=this.markets_by_id[c];else{var h=this.safeString(e,3),l=h.split("_"),f=n(l,2),p=f[0],v=f[1],m=this.safeCurrencyCode(p),g=this.safeCurrencyCode(v);d=m+"/"+g}void 0===d&&void 0!==t&&(d=t.symbol);var y=this.safeString(e,4),b="ask"===y?"sell":"buy";return{id:void 0,timestamp:r,datetime:this.iso8601(r),symbol:d,order:void 0,type:"limit",side:b,takerOrMaker:void 0,price:s,amount:o,cost:u,fee:void 0,info:e}}},{key:"fetchTrades",value:function(){var e=a(i.mark((function e(t){var r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={marketId:s.id},void 0!==n&&(o.dataSize=n),e.next=10,this.publicGetApiDataV1Trades(this.extend(o,a));case 10:return u=e.sent,c=this.safeValue(u,"datas",[]),e.abrupt("return",this.parseTrades(c,s,r,n));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){return[this.safeTimestamp(e,3),this.safeNumber(e,4),this.safeNumber(e,5),this.safeNumber(e,6),this.safeNumber(e,7),this.safeNumber(e,8)]}},{key:"fetchOHLCV",value:function(){var e=a(i.mark((function e(t){var r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:"1m",n=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:void 0,s=h.length>4&&void 0!==h[4]?h[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),u={marketId:o.id,type:this.timeframes[r],dataSize:500},void 0!==a&&(u.dataSize=a),e.next=11,this.publicGetApiDataV1Klines(this.extend(u,s));case 11:return c=e.sent,d=this.safeValue(c,"datas",[]),e.abrupt("return",this.parseOHLCVs(d,o,r,n,a));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=a(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privatePostExchangeFundControllerWebsiteFundcontrollerFindbypage(t);case 5:for(r=e.sent,n=this.safeValue(r,"datas",{}),a=this.safeValue(n,"list",[]),s={info:r},o=0;o<a.length;o++)u=a[o],c=this.safeString(u,"currencyTypeId"),d=this.safeCurrencyCode(c),(h=this.account()).free=this.safeString(u,"amount"),h.used=this.safeString(u,"freeze"),s[d]=h;return e.abrupt("return",this.parseBalance(s,!1));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=a(i.mark((function e(t,r,n,a){var s,o,u,c,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=f.length>4&&void 0!==f[4]?f[4]:void 0,o=f.length>5&&void 0!==f[5]?f[5]:{},void 0!==s){e.next=4;break}throw new g(this.id+" allows limit orders only");case 4:return e.next=6,this.loadMarkets();case 6:return u=this.market(t),c={amount:this.amountToPrecision(t,a),price:this.priceToPrecision(t,s),type:"buy"===n?1:0,rangeType:0,marketId:u.id},e.next=10,this.privatePostExchangeEntrustControllerWebsiteEntrustControllerAddEntrust(this.extend(c,o));case 10:return d=e.sent,h=this.safeValue(d,"datas"),l=this.safeString(h,"entrustId"),e.abrupt("return",{id:l,info:d,timestamp:void 0,datetime:void 0,lastTradeTimestamp:void 0,symbol:t,type:r,side:n,price:s,amount:a,cost:void 0,average:void 0,filled:void 0,remaining:void 0,status:"open",fee:void 0,trades:void 0,clientOrderId:void 0});case 14:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({"-3":"canceled","-2":"canceled","-1":"canceled",0:"open",1:"canceled",2:"closed",3:"open",4:"canceled"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"marketId"),i=this.safeSymbol(r,t),n=this.safeInteger(e,"createTime"),a=this.safeString(e,"type");"0"===a?a="sell":"1"===a&&(a="buy");var s=this.safeNumber(e,"amount"),o=this.safeNumber(e,"price"),u=this.safeNumber(e,"completeAmount"),c=this.safeNumber2(e,"availabelAmount","availableAmount"),d=this.safeNumber(e,"totalMoney"),h=this.parseOrderStatus(this.safeString(e,"status"));return this.safeOrder({info:e,id:this.safeString(e,"entrustId"),clientOrderId:void 0,timestamp:n,datetime:this.iso8601(n),lastTradeTimestamp:void 0,symbol:i,type:"limit",timeInForce:void 0,postOnly:void 0,side:a,price:o,stopPrice:void 0,amount:s,cost:d,average:void 0,filled:u,remaining:c,status:h,fee:void 0,trades:void 0})}},{key:"fetchOrder",value:function(){var e=a(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:{},void 0!==r){e.next=4;break}throw new b(this.id+" fetchOrder() requires a symbol argument");case 4:return e.next=6,this.loadMarkets();case 6:return a=this.market(r),s={marketId:a.id,entrustId:t},e.next=10,this.privateGetExchangeEntrustControllerWebsiteEntrustControllerGetEntrustById(this.extend(s,n));case 10:return o=e.sent,u=this.safeValue(o,"datas",{}),e.abrupt("return",this.parseOrder(u,a));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=a(i.mark((function e(t){var r,n,a,s,o,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:{},void 0!==r){e.next=4;break}throw new b(this.id+" cancelOrder() requires a symbol argument");case 4:return e.next=6,this.loadMarkets();case 6:return a=this.market(r),s={marketId:a.id,entrustId:t},e.next=10,this.privatePostExchangeEntrustControllerWebsiteEntrustControllerCancelEntrust(this.extend(s,n));case 10:return o=e.sent,e.abrupt("return",{info:o,id:t});case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=a(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:{},void 0!==t){e.next=6;break}throw new b(this.id+" fetchOpenOrders() requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.market(t),o={marketId:s.id},void 0!==n&&(o.pageSize=n),e.next=13,this.privateGetExchangeEntrustControllerWebsiteEntrustControllerGetUserEntrustRecordFromCacheWithPage(this.extend(o,a));case 13:return u=e.sent,c=this.safeValue(u,"datas",{}),d=this.safeValue(c,"entrustList",[]),e.abrupt("return",this.parseOrders(d,s,r,n));case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=a(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:{},void 0!==t){e.next=6;break}throw new b(this.id+" fetchClosedOrders() requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.market(t),o={marketId:s.id},void 0!==n&&(o.pageSize=n),void 0!==r&&(o.startDateTime=r),e.next=14,this.privateGetExchangeEntrustControllerWebsiteEntrustControllerGetUserEntrustList(this.extend(o,a));case 14:return u=e.sent,c=this.safeValue(u,"datas",{}),d=this.safeValue(c,"entrustList",[]),e.abrupt("return",this.parseOrders(d,s,r,n));case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrders",value:function(){var e=a(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:{},void 0!==t){e.next=6;break}throw new b(this.id+" fetchOpenOrders() requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.market(t),o={marketId:s.id},void 0!==r&&(o.startDateTime=r),void 0!==n&&(o.pageSize=n),e.next=14,this.privateGetExchangeEntrustControllerWebsiteEntrustControllerGetUserEntrustList(this.extend(o,a));case 14:return u=e.sent,c=this.safeValue(u,"datas",{}),d=this.safeValue(c,"entrustList",[]),e.abrupt("return",this.parseOrders(d,s,r,n));case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.implodeParams(this.urls.api,{hostname:this.hostname})+"/"+e;if("GET"===r?Object.keys(i).length&&(s+="?"+this.urlencode(i)):a=this.json(i),"private"===t){var o=this.milliseconds().toString(),u="";if("GET"===r)for(var c=this.keysort(i),d=Object.keys(c),h=0;h<d.length;h++){var l=d[h];u+=l+c[l].toString()}else u=a;var f=this.apiKey+o+u+this.secret,p=this.hash(this.encode(f),"md5");n||(n={}),n.Apiid=this.apiKey,n.Timestamp=o,n.Sign=p}return{url:s,method:r,body:a,headers:n}}},{key:"fetchDepositAddress",value:function(){var e=a(i.mark((function e(t){var r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.currency(t),a={currencyTypeName:n.name},e.next=7,this.privatePostExchangeFundControllerWebsiteFundcontrollerGetPayinAddress(this.extend(a,r));case 7:return s=e.sent,o=this.safeValue(s,"datas",{}),u=this.safeString(o,"address"),c=this.safeString(o,"memo"),this.checkAddress(u),e.abrupt("return",{currency:t,address:this.checkAddress(u),tag:c,info:s});case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTransactionStatus",value:function(e){return this.safeString({"-1":"canceled",0:"pending",1:"ok"},e,e)}},{key:"parseTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"depositId","withdrawalId"),i=this.safeString2(e,"depositAddress","withdrawalAddress"),n=this.safeString2(e,"currencyId","currencyTypeId"),a=void 0;n in this.currencies_by_id&&(t=this.currencies_by_id[n]),void 0===a&&void 0!==t&&(a=t.code);var s="depositId"in e?"deposit":"withdrawal",o=this.safeNumber2(e,"actuallyAmount","amount"),u=this.parseTransactionStatus(this.safeString2(e,"verifyStatus","state")),c=this.safeInteger(e,"createTime"),d=this.safeString(e,"txId"),h=void 0,l=this.safeNumber(e,"fees");return void 0!==l&&(h={cost:l,currency:a}),{info:e,id:r,txid:d,timestamp:c,datetime:this.iso8601(c),addressFrom:void 0,address:i,addressTo:void 0,tagFrom:void 0,tag:void 0,tagTo:void 0,type:s,amount:o,currency:a,status:u,updated:void 0,fee:h}}},{key:"fetchDeposits",value:function(){var e=a(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:{},void 0!==t){e.next=6;break}throw new b(this.id+" fetchDeposits() requires a currency code argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.currency(t),o={currencyTypeName:s.name},void 0!==n&&(o.pageSize=n),e.next=13,this.privatePostExchangeFundControllerWebsiteFundcontrollerGetPayinCoinRecord(this.extend(o,a));case 13:return u=e.sent,c=this.safeValue(u,"datas",{}),d=this.safeValue(c,"list",[]),e.abrupt("return",this.parseTransactions(d,t,r,n));case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchWithdrawals",value:function(){var e=a(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:{},void 0!==t){e.next=6;break}throw new b(this.id+" fetchWithdrawals() requires a currency code argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.currency(t),o={currencyId:s.id},void 0!==n&&(o.pageSize=n),e.next=13,this.privateGetExchangeFundControllerWebsiteFundwebsitecontrollerGetpayoutcoinrecord(this.extend(o,a));case 13:return u=e.sent,c=this.safeValue(u,"datas",{}),d=this.safeValue(c,"list",[]),e.abrupt("return",this.parseTransactions(d,t,r,n));case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,u){if(s){var c=this.safeValue(s,"resMsg"),d=this.safeString(c,"code");if("1"!==d){var h=this.id+" "+this.json(s);throw this.throwExactlyMatchedException(this.exceptions.exact,d,h),new g(h)}}}}]),r}(l)},function(e,t,r){"use strict";var i=r(7),n=r(8),a=r(1),s=r(2),o=r(6),u=r(3),c=r(4),d=r(5),h=r(11),l=r(18).TICK_SIZE,f=r(10),p=f.AuthenticationError,v=f.ExchangeError,m=f.ArgumentsRequired,g=f.PermissionDenied,y=f.InvalidOrder,b=f.OrderNotFound,x=f.InsufficientFunds,k=f.BadRequest,w=f.RateLimitExceeded,_=f.InvalidNonce,S=r(12);e.exports=function(e){c(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(u(r.prototype),"describe",this).call(this),{id:"bybit",name:"Bybit",countries:["VG"],version:"v2",userAgent:void 0,rateLimit:100,hostname:"bybit.com",has:{cancelOrder:!0,CORS:!0,cancelAllOrders:!0,createOrder:!0,editOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchDeposits:!0,fetchLedger:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchOrderTrades:!0,fetchTicker:!0,fetchTickers:!0,fetchTime:!0,fetchTrades:!0,fetchTransactions:!1,fetchWithdrawals:!0,fetchPositions:!0},timeframes:{"1m":"1","3m":"3","5m":"5","15m":"15","30m":"30","1h":"60","2h":"120","4h":"240","6h":"360","12h":"720","1d":"D","1w":"W","1M":"M","1y":"Y"},urls:{test:"https://api-testnet.{hostname}",logo:"https://user-images.githubusercontent.com/51840849/76547799-daff5b80-649e-11ea-87fb-3be9bac08954.jpg",api:"https://api.{hostname}",www:"https://www.bybit.com",doc:["https://bybit-exchange.github.io/docs/inverse/","https://bybit-exchange.github.io/docs/linear/","https://github.com/bybit-exchange"],fees:"https://help.bybit.com/hc/en-us/articles/360039261154",referral:"https://www.bybit.com/app/register?ref=X7Prm"},api:{futures:{private:{get:["position/list","order/list","order","stop-order/list","stop-order","execution/list","trade/closed-pnl/list"],post:["order/create","order/cancel","order/cancelAll","order/replace","stop-order/create","stop-order/cancel","stop-order/cancelAll","stop-order/replace","position/change-position-margin","position/trading-stop","position/leverage/save","position/switch-mode","position/switch-isolated"]}},v2:{public:{get:["orderBook/L2","kline/list","tickers","trading-records","symbols","liq-records","mark-price-kline","index-price-kline","premium-index-kline","open-interest","big-deal","account-ratio","time","announcement"]},private:{get:["order/list","order","stop-order/list","stop-order","position/list","execution/list","trade/closed-pnl/list","funding/prev-funding-rate","funding/prev-funding","funding/predicted-funding","account/api-key","account/lcp","wallet/balance","wallet/fund/records","wallet/withdraw/list","exchange-order/list"],post:["order/create","order/cancel","order/cancelAll","order/replace","stop-order/create","stop-order/cancel","stop-order/cancelAll","stop-order/replace","position/change-position-margin","position/trading-stop","position/leverage/save"]}},public:{linear:{get:["kline","recent-trading-records","funding/prev-funding-rate","mark-price-kline","index-price-kline","premium-index-kline","risk-limit"]}},private:{linear:{get:["order/list","order/search","stop-order/list","stop-order/search","position/list","trade/execution/list","trade/closed-pnl/list","funding/predicted-funding","funding/prev-funding"],post:["order/create","order/cancel","order/cancel-all","order/replace","stop-order/create","stop-order/cancel","stop-order/cancel-all","stop-order/replace","position/set-auto-add-margin","position/switch-isolated","tpsl/switch-mode","position/add-margin","position/set-leverage","position/trading-stop"]}},openapi:{wallet:{get:["risk-limit/list"],post:["risk-limit"]}}},httpExceptions:{403:w},exceptions:{exact:{10001:k,10002:_,10003:p,10004:p,10005:g,10006:w,10007:p,10010:g,10017:k,20001:b,20003:y,20004:y,20005:y,20006:y,20007:y,20008:y,20009:y,20010:y,20011:y,20012:y,20013:y,20014:y,20015:y,20016:y,20017:y,20018:y,20019:y,20020:y,20021:y,20022:k,20023:k,20031:k,20070:k,20071:k,20084:k,30001:k,30003:y,30004:y,30005:y,30007:y,30008:y,30009:v,30010:x,30011:g,30012:g,30013:g,30014:y,30015:y,30016:v,30017:y,30018:y,30019:y,30020:y,30021:y,30022:y,30023:y,30024:y,30025:y,30026:y,30027:y,30028:y,30029:y,30030:y,30031:x,30032:y,30033:w,30034:b,30035:w,30036:v,30037:y,30041:v,30042:x,30043:g,30044:g,30045:g,30049:x,30050:v,30051:v,30052:v,30054:v,30057:v,30063:v,30067:x,30068:v,34026:v},broad:{"unknown orderInfo":b,"invalid api_key":p}},precisionMode:l,options:{marketTypes:{"BTC/USDT":"linear","BCH/USDT":"linear","ETH/USDT":"linear","LTC/USDT":"linear","XTZ/USDT":"linear","LINK/USDT":"linear","ADA/USDT":"linear","DOT/USDT":"linear","UNI/USDT":"linear"},defaultType:"linear",code:"BTC",cancelAllOrders:{},recvWindow:5e3,timeDifference:0,adjustForTimeDifference:!1},fees:{trading:{tierBased:!1,percentage:!0,taker:75e-5,maker:-25e-5},funding:{tierBased:!1,percentage:!1,withdraw:{},deposit:{}}}})}},{key:"nonce",value:function(){return this.milliseconds()-this.options.timeDifference}},{key:"loadTimeDifference",value:function(){var e=n(i.mark((function e(){var t,r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},e.next=3,this.fetchTime(t);case 3:return r=e.sent,n=this.milliseconds(),this.options.timeDifference=n-r,e.abrupt("return",this.options.timeDifference);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTime",value:function(){var e=n(i.mark((function e(){var t,r,n=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},e.next=3,this.v2PublicGetTime(t);case 3:return r=e.sent,e.abrupt("return",this.safeTimestamp(r,"time_now"));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p,v,m,g,y,b,x,k,w,_=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=_.length>0&&void 0!==_[0]?_[0]:{},!this.options.adjustForTimeDifference){e.next=4;break}return e.next=4,this.loadTimeDifference();case 4:return e.next=6,this.v2PublicGetSymbols(t);case 6:for(r=e.sent,n=this.safeValue(r,"result",[]),a=this.safeValue(this.options,"fetchMarkets",{}),s=this.safeValue(a,"linear",{USDT:!0}),o=[],u=0;u<n.length;u++)c=n[u],d=this.safeString2(c,"name","symbol"),h=this.safeString(c,"base_currency"),l=this.safeString(c,"quote_currency"),f=this.safeCurrencyCode(h),p=this.safeCurrencyCode(l),m=!(v=p in s),g=f+"/"+p,f+p!==d&&(g=d),y=this.safeValue(c,"lot_size_filter",{}),b=this.safeValue(c,"price_filter",{}),x={amount:this.safeNumber(y,"qty_step"),price:this.safeNumber(b,"tick_size")},k=this.safeString(c,"status"),w=void 0,void 0!==k&&(w="Trading"===k),o.push({id:d,symbol:g,base:f,quote:p,active:w,precision:x,taker:this.safeNumber(c,"taker_fee"),maker:this.safeNumber(c,"maker_fee"),type:"future",spot:!1,future:!0,option:!1,linear:v,inverse:m,limits:{amount:{min:this.safeNumber(y,"min_trading_qty"),max:this.safeNumber(y,"max_trading_qty")},price:{min:this.safeNumber(b,"min_price"),max:this.safeNumber(b,"max_price")},cost:{min:void 0,max:void 0}},info:c});return e.abrupt("return",o);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0,i=this.safeString(e,"symbol"),n=this.safeSymbol(i,t),a=this.safeNumber(e,"last_price"),s=this.safeNumber(e,"prev_price_24h"),o=this.safeNumber(e,"price_24h_pcnt");void 0!==o&&(o*=100);var u=void 0,c=void 0;void 0!==a&&void 0!==s&&(u=a-s,c=this.sum(s,a)/2);var d=this.safeNumber(e,"turnover_24h"),h=this.safeNumber(e,"volume_24h"),l=this.vwap(d,h);return{symbol:n,timestamp:r,datetime:this.iso8601(r),high:this.safeNumber(e,"high_price_24h"),low:this.safeNumber(e,"low_price_24h"),bid:this.safeNumber(e,"bid_price"),bidVolume:void 0,ask:this.safeNumber(e,"ask_price"),askVolume:void 0,vwap:l,open:s,close:a,last:a,previousClose:void 0,change:u,percentage:o,average:c,baseVolume:d,quoteVolume:h,info:e}}},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={symbol:n.id},e.next=7,this.v2PublicGetTickers(this.extend(a,r));case 7:return s=e.sent,o=this.safeValue(s,"result",[]),u=this.safeValue(o,0),c=this.safeTimestamp(s,"time_now"),(d=this.parseTicker(u,n)).timestamp=c,d.datetime=this.iso8601(c),e.abrupt("return",d);case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.v2PublicGetTickers(r);case 6:for(n=e.sent,a=this.safeValue(n,"result",[]),s={},o=0;o<a.length;o++)u=this.parseTicker(a[o]),c=u.symbol,s[c]=u;return e.abrupt("return",this.filterByArray(s,"symbol",t));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){return[this.safeTimestamp2(e,"open_time","start_at"),this.safeNumber(e,"open"),this.safeNumber(e,"high"),this.safeNumber(e,"low"),this.safeNumber(e,"close"),this.safeNumber2(e,"turnover","volume")]}},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d,h,l,f,p,v,g=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=g.length>1&&void 0!==g[1]?g[1]:"1m",n=g.length>2&&void 0!==g[2]?g[2]:void 0,a=g.length>3&&void 0!==g[3]?g[3]:void 0,s=g.length>4&&void 0!==g[4]?g[4]:{},e.next=6,this.loadMarkets();case 6:if(o=this.market(t),u={symbol:o.id,interval:this.timeframes[r]},c=this.parseTimeframe(r),d=this.seconds(),void 0!==n){e.next=18;break}if(void 0!==a){e.next=15;break}throw new m(this.id+" fetchOHLCV() requires a since argument or a limit argument");case 15:u.from=d-a*c;case 16:e.next=19;break;case 18:u.from=parseInt(n/1e3);case 19:return void 0!==a&&(u.limit=a),h=this.safeValue(this.options,"marketTypes",{}),l=this.safeString(h,t),f="linear"===l?"publicLinearGetKline":"v2PublicGetKlineList",e.next=25,this[f](this.extend(u,s));case 25:return p=e.sent,v=this.safeValue(p,"result",{}),e.abrupt("return",this.parseOHLCVs(v,o,r,n,a));case 28:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString2(e,"id","exec_id"),i=this.safeString(e,"symbol"),n=(t=this.safeMarket(i,t)).symbol,a=this.safeString2(e,"qty","exec_qty"),s=this.safeString2(e,"exec_price","price"),o=this.safeNumber(e,"exec_value"),u=this.parseNumber(a),c=this.parseNumber(s);void 0===o&&(o=this.parseNumber(S.stringMul(s,a)));var d=this.parse8601(this.safeString(e,"time"));void 0===d&&(d=this.safeInteger(e,"trade_time_ms"));var h=this.safeStringLower(e,"side"),l=this.safeString(e,"last_liquidity_ind"),f="AddedLiquidity"===l?"maker":"taker",p=this.safeNumber(e,"exec_fee"),v=void 0;if(void 0!==p){var m=t.inverse?t.base:t.quote;v={cost:p,currency:m,rate:this.safeNumber(e,"fee_rate")}}return{id:r,info:e,timestamp:d,datetime:this.iso8601(d),symbol:n,order:this.safeString(e,"order_id"),type:this.safeStringLower(e,"order_type"),side:h,takerOrMaker:f,price:c,amount:u,cost:o,fee:v}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=f.length>1&&void 0!==f[1]?f[1]:void 0,n=f.length>2&&void 0!==f[2]?f[2]:void 0,a=f.length>3&&void 0!==f[3]?f[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={symbol:s.id},void 0!==n&&(o.count=n),u=this.safeValue(this.options,"marketTypes",{}),c=this.safeString(u,t),d="linear"===c?"publicLinearGetRecentTradingRecords":"v2PublicGetTradingRecords",e.next=13,this[d](this.extend(o,a));case 13:return h=e.sent,l=this.safeValue(h,"result",{}),e.abrupt("return",this.parseTrades(l,s,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrderBook",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"price",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"size",n=[],a=[],s=0;s<e.length;s++){var o=e[s],u=this.safeString(o,"side");if("Buy"===u)n.push(this.parseBidAsk(o,r,i));else{if("Sell"!==u)throw new v(this.id+" parseOrderBook encountered an unrecognized bidask format: "+this.json(o));a.push(this.parseBidAsk(o,r,i))}}return{bids:this.sortBy(n,0,!0),asks:this.sortBy(a,0),timestamp:t,datetime:this.iso8601(t),nonce:void 0}}},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.length>1&&void 0!==c[1]?c[1]:void 0,r=c.length>2&&void 0!==c[2]?c[2]:{},e.next=4,this.loadMarkets();case 4:return n=this.market(t),a={symbol:n.id},e.next=8,this.v2PublicGetOrderBookL2(this.extend(a,r));case 8:return s=e.sent,o=this.safeValue(s,"result",[]),u=this.safeTimestamp(s,"time_now"),e.abrupt("return",this.parseOrderBook(o,u,"Buy","Sell","price","size"));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p,v,m=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=m.length>0&&void 0!==m[0]?m[0]:{},e.next=3,this.loadMarkets();case 3:return r={},n=this.safeString(t,"coin"),a=this.safeString(t,"code"),void 0!==n?r.coin=n:void 0!==a&&(s=this.currency(a),r.coin=s.id),e.next=9,this.v2PrivateGetWalletBalance(this.extend(r,t));case 9:for(o=e.sent,u={info:o},c=this.safeValue(o,"result",{}),d=Object.keys(c),h=0;h<d.length;h++)l=d[h],f=c[l],p=this.safeCurrencyCode(l),(v=this.account()).free=this.safeString(f,"available_balance"),v.used=this.safeString(f,"used_margin"),v.total=this.safeString(f,"equity"),u[p]=v;return e.abrupt("return",this.parseBalance(u,!1));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({Created:"open",Rejected:"rejected",New:"open",PartiallyFilled:"open",Filled:"closed",Cancelled:"canceled",PendingCancel:"canceling",Active:"open",Untriggered:"open",Triggered:"closed",Deactivated:"canceled"},e,e)}},{key:"parseTimeInForce",value:function(e){return this.safeString({GoodTillCancel:"GTC",ImmediateOrCancel:"IOC",FillOrKill:"FOK",PostOnly:"PO"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"symbol"),i=(t=this.safeMarket(r,t)).symbol,n=void 0,a=this.parse8601(this.safeString(e,"created_at")),s=this.safeString2(e,"order_id","stop_order_id"),o=this.safeStringLower(e,"order_type"),u=this.safeNumber(e,"price");0===u&&(u=void 0);var c=this.safeNumber(e,"average_price"),d=this.safeNumber(e,"qty"),h=this.safeNumber(e,"cum_exec_value"),l=this.safeNumber(e,"cum_exec_qty"),f=this.safeNumber(e,"leaves_qty"),p=this.safeValue(this.options,"marketTypes",{}),v=this.safeString(p,i);void 0!==t&&(n="linear"===v?t.quote:t.base);var m=this.safeTimestamp(e,"last_exec_time");0===m&&(m=void 0);var g=this.parseOrderStatus(this.safeString2(e,"order_status","stop_order_status")),y=this.safeStringLower(e,"side"),b=this.safeNumber(e,"cum_exec_fee"),x=void 0;void 0!==b&&(x={cost:b=Math.abs(b),currency:n});var k=this.safeString(e,"order_link_id");void 0!==k&&k.length<1&&(k=void 0);var w=this.parseTimeInForce(this.safeString(e,"time_in_force")),_=this.safeNumber(e,"stop_px"),S="PO"===w;return this.safeOrder({info:e,id:s,clientOrderId:k,timestamp:a,datetime:this.iso8601(a),lastTradeTimestamp:m,symbol:i,type:o,timeInForce:w,postOnly:S,side:y,price:u,stopPrice:_,amount:d,cost:h,average:c,filled:l,remaining:f,status:g,fee:x,trades:void 0})}},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=l.length>1&&void 0!==l[1]?l[1]:void 0,n=l.length>2&&void 0!==l[2]?l[2]:{},void 0!==r){e.next=4;break}throw new m(this.id+" fetchOrder() requires a symbol argument");case 4:return e.next=6,this.loadMarkets();case 6:return a=this.market(r),s={symbol:a.id},o=this.safeValue(this.options,"marketTypes",{}),u=this.safeString(o,r),c="linear"===u?"privateLinearGetOrderSearch":"v2PrivateGetOrder",void 0===this.safeString(n,"stop_order_id")?void 0===this.safeString(n,"order_link_id")&&(s.order_id=t):c="linear"===u?"privateLinearGetStopOrderSearch":"v2PrivateGetStopOrder",e.next=15,this[c](this.extend(s,n));case 15:return d=e.sent,h=this.safeValue(d,"result"),e.abrupt("return",this.parseOrder(h,a));case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,u,c,d,h,l,f,p,v,g,y,b,x,k=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=k.length>4&&void 0!==k[4]?k[4]:void 0,o=k.length>5&&void 0!==k[5]?k[5]:{},e.next=4,this.loadMarkets();case 4:if(u=this.market(t),c=this.amountToPrecision(t,a),c=u.inverse?parseInt(c):parseFloat(c),d={side:this.capitalize(n),symbol:u.id,order_type:this.capitalize(r),qty:c,time_in_force:"GoodTillCancel"},h=!1,"limit"===r&&(h=!0),!h){e.next=16;break}if(void 0===s){e.next=15;break}d.price=parseFloat(this.priceToPrecision(t,s)),e.next=16;break;case 15:throw new m(this.id+" createOrder() requires a price argument for a "+r+" order");case 16:if(void 0!==(l=this.safeString2(o,"order_link_id","clientOrderId"))&&(d.order_link_id=l,o=this.omit(o,["order_link_id","clientOrderId"])),f=this.safeValue2(o,"stop_px","stopPrice"),p=this.safeValue(o,"base_price"),v=this.safeValue(this.options,"marketTypes",{}),g=this.safeString(v,t),y="linear"===g?"privateLinearPostOrderCreate":"v2PrivatePostOrderCreate","linear"===g&&(y="privateLinearPostOrderCreate",d.reduce_only=!1,d.close_on_trigger=!1),void 0===f){e.next=35;break}if(void 0!==p){e.next=29;break}throw new m(this.id+" createOrder() requires both the stop_px and base_price params for a conditional "+r+" order");case 29:y="linear"===g?"privateLinearPostStopOrderCreate":"v2PrivatePostStopOrderCreate",d.stop_px=parseFloat(this.priceToPrecision(t,f)),d.base_price=parseFloat(this.priceToPrecision(t,p)),o=this.omit(o,["stop_px","stopPrice","base_price"]);case 33:e.next=37;break;case 35:if(void 0===p){e.next=37;break}throw new m(this.id+" createOrder() requires both the stop_px and base_price params for a conditional "+r+" order");case 37:return e.next=39,this[y](this.extend(d,o));case 39:return b=e.sent,x=this.safeValue(b,"result"),e.abrupt("return",this.parseOrder(x,u));case 42:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"editOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,u,c,d,h,l,f,p,v,g,y,b=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=b.length>4&&void 0!==b[4]?b[4]:void 0,o=b.length>5&&void 0!==b[5]?b[5]:void 0,u=b.length>6&&void 0!==b[6]?b[6]:{},void 0!==r){e.next=5;break}throw new m(this.id+" editOrder() requires an symbol argument");case 5:return c=this.safeValue(this.options,"marketTypes",{}),d=this.safeString(c,r),e.next=9,this.loadMarkets();case 9:return h=this.market(r),l={symbol:h.id},f="linear"===d?"privateLinearPostOrderReplace":"v2PrivatePostOrderReplace",void 0!==(p=this.safeString(u,"stop_order_id"))?(f="linear"===d?"privateLinearPostStopOrderReplace":"v2PrivatePostStopOrderReplace",l.stop_order_id=p,u=this.omit(u,["stop_order_id"])):l.order_id=t,void 0!==s&&(v=this.amountToPrecision(r,s),v=h.inverse?parseInt(v):parseFloat(v),l.p_r_qty=v),void 0!==o&&(l.p_r_price=parseFloat(this.priceToPrecision(r,o))),e.next=18,this[f](this.extend(l,u));case 18:return g=e.sent,y=this.safeValue(g,"result",{}),e.abrupt("return",{info:g,id:this.safeString2(y,"order_id","stop_order_id"),order_id:this.safeString(y,"order_id"),stop_order_id:this.safeString(y,"stop_order_id")});case 21:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=l.length>1&&void 0!==l[1]?l[1]:void 0,n=l.length>2&&void 0!==l[2]?l[2]:{},void 0!==r){e.next=4;break}throw new m(this.id+" cancelOrder() requires a symbol argument");case 4:return e.next=6,this.loadMarkets();case 6:return a=this.market(r),s={symbol:a.id},o=this.safeValue(this.options,"marketTypes",{}),u=this.safeValue(o,r),c="linear"===u?"privateLinearPostOrderCancel":"v2PrivatePostOrderCancel",void 0===this.safeString(n,"stop_order_id")?void 0===this.safeString(n,"order_link_id")&&(s.order_id=t):c="linear"===u?"privateLinearPostStopOrderCancel":"v2PrivatePostStopOrderCancel",e.next=15,this[c](this.extend(s,n));case 15:return d=e.sent,h=this.safeValue(d,"result",{}),e.abrupt("return",this.parseOrder(h,a));case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cancelAllOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.length>0&&void 0!==f[0]?f[0]:void 0,r=f.length>1&&void 0!==f[1]?f[1]:{},void 0!==t){e.next=4;break}throw new m(this.id+" cancelAllOrders() requires a symbol argument");case 4:return e.next=6,this.loadMarkets();case 6:return n=this.market(t),a={symbol:n.id},s=this.safeValue(this.options,"cancelAllOrders",{}),o=this.safeValue(this.options,"marketTypes",{}),u=this.safeString(o,t),c="linear"===u?"privateLinearPostOrderCancelAll":"v2PrivatePostOrderCancelAll",d=this.safeString(s,"method",c),e.next=15,this[d](this.extend(a,r));case 15:return h=e.sent,l=this.safeValue(h,"result",[]),e.abrupt("return",this.parseOrders(l,n));case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p,v,m,g,y=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=y.length>0&&void 0!==y[0]?y[0]:void 0,r=y.length>1&&void 0!==y[1]?y[1]:void 0,n=y.length>2&&void 0!==y[2]?y[2]:void 0,a=y.length>3&&void 0!==y[3]?y[3]:{},e.next=6,this.loadMarkets();case 6:return s={},o=void 0,void 0!==t&&(o=this.market(t),s.symbol=o.id),void 0!==n&&(s.limit=n),u=this.safeValue(this.options,"fetchOrders",{}),c=this.safeValue(this.options,"marketTypes",{}),d=this.safeString(c,t),h="linear"===d?"privateLinearGetOrderList":"v2PrivateGetOrderList",l=a,("stop_order_id"in a||"stop_order_status"in a)&&(void 0!==(f=this.safeValue(a,"stopOrderStatus"))&&(Array.isArray(f)&&(f=f.join(",")),s.stop_order_status=f,l=this.omit(a,"stop_order_status")),h="linear"===d?"privateLinearGetStopOrderList":"v2PrivateGetStopOrderList"),p=this.safeString(u,"method",h),e.next=19,this[p](this.extend(s,l));case 19:return v=e.sent,m=this.safeValue(v,"result",{}),g=this.safeValue(m,"data",[]),e.abrupt("return",this.parseOrders(g,o,r,n));case 23:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:{},s=["Rejected","Filled","Cancelled"],o=this.safeValue(this.options,"fetchClosedOrders",{}),u=this.safeValue(o,"order_status",s),Array.isArray(u)&&(u=u.join(",")),c={},void 0===(d=this.safeValue(a,"stop_order_status"))?c.order_status=u:c.stop_order_status=d,e.next=13,this.fetchOrders(t,r,n,this.extend(c,a));case 13:return e.abrupt("return",e.sent);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:{},s=["Created","New","PartiallyFilled","PendingCancel"],o=this.safeValue(this.options,"fetchOpenOrders",{}),u=this.safeValue(o,"order_status",s),Array.isArray(u)&&(u=u.join(",")),c={},void 0===(d=this.safeValue(a,"stop_order_status"))?c.order_status=u:c.stop_order_status=d,e.next=13,this.fetchOrders(t,r,n,this.extend(c,a));case 13:return e.abrupt("return",e.sent);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:void 0,s=u.length>4&&void 0!==u[4]?u[4]:{},o={order_id:t},e.next=7,this.fetchMyTrades(r,n,a,this.extend(o,s));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p,v=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=v.length>0&&void 0!==v[0]?v[0]:void 0,r=v.length>1&&void 0!==v[1]?v[1]:void 0,n=v.length>2&&void 0!==v[2]?v[2]:void 0,a=v.length>3&&void 0!==v[3]?v[3]:{},e.next=6,this.loadMarkets();case 6:if(s={},o=void 0,void 0!==t){e.next=18;break}if(void 0!==(u=this.safeString(a,"order_id"))){e.next=14;break}throw new m(this.id+" fetchMyTrades() requires a symbol argument or an order_id param");case 14:s.order_id=u,a=this.omit(a,"order_id");case 16:e.next=20;break;case 18:o=this.market(t),s.symbol=o.id;case 20:return void 0!==r&&(s.start_time=r),void 0!==n&&(s.limit=n),c=this.safeValue(this.options,"marketTypes",{}),d=this.safeString(c,t),h="linear"===d?"privateLinearGetTradeExecutionList":"v2PrivateGetExecutionList",e.next=27,this[h](this.extend(s,a));case 27:return l=e.sent,f=this.safeValue(l,"result",{}),p=this.safeValue2(f,"trade_list","data",[]),e.abrupt("return",this.parseTrades(p,o,r,n));case 31:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchDeposits",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:{},e.next=6,this.loadMarkets();case 6:return s={wallet_fund_type:"Deposit"},o=void 0,void 0!==t&&(o=this.currency(t),s.coin=o.id),void 0!==r&&(s.start_date=this.ymd(r)),void 0!==n&&(s.limit=n),e.next=13,this.v2PrivateGetWalletFundRecords(this.extend(s,a));case 13:return u=e.sent,c=this.safeValue(u,"result",{}),d=this.safeValue(c,"data",[]),e.abrupt("return",this.parseTransactions(d,o,r,n));case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchWithdrawals",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:{},e.next=6,this.loadMarkets();case 6:return s={},o=void 0,void 0!==t&&(o=this.currency(t),s.coin=o.id),void 0!==r&&(s.start_date=this.ymd(r)),void 0!==n&&(s.limit=n),e.next=13,this.v2PrivateGetWalletWithdrawList(this.extend(s,a));case 13:return u=e.sent,c=this.safeValue(u,"result",{}),d=this.safeValue(c,"data",[]),e.abrupt("return",this.parseTransactions(d,o,r,n,a));case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTransactionStatus",value:function(e){return this.safeString({ToBeConfirmed:"pending",UnderReview:"pending",Pending:"pending",Success:"ok",CancelByUser:"canceled",Reject:"rejected",Expire:"expired"},e,e)}},{key:"parseTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"coin"),i=this.safeCurrencyCode(r,t),n=this.parse8601(this.safeString2(e,"submited_at","exec_time")),a=this.parse8601(this.safeString(e,"updated_at")),s=this.parseTransactionStatus(this.safeString(e,"status")),o=this.safeString(e,"address"),u=this.safeNumber(e,"fee"),c=this.safeStringLower(e,"type"),d=void 0;return void 0!==u&&(d={cost:u,currency:i}),{info:e,id:this.safeString(e,"id"),txid:this.safeString(e,"tx_id"),timestamp:n,datetime:this.iso8601(n),address:o,addressTo:void 0,addressFrom:void 0,tag:void 0,tagTo:void 0,tagFrom:void 0,type:c,amount:this.safeNumber(e,"amount"),currency:i,status:s,updated:a,fee:d}}},{key:"fetchLedger",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:{},e.next=6,this.loadMarkets();case 6:return s={},o=void 0,void 0!==t&&(o=this.currency(t),s.coin=o.id),void 0!==r&&(s.start_date=this.ymd(r)),void 0!==n&&(s.limit=n),e.next=13,this.v2PrivateGetWalletFundRecords(this.extend(s,a));case 13:return u=e.sent,c=this.safeValue(u,"result",{}),d=this.safeValue(c,"data",[]),e.abrupt("return",this.parseLedger(d,o,r,n));case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseLedgerEntry",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"coin"),i=this.safeCurrencyCode(r,t),n=this.safeNumber(e,"amount"),a=this.safeNumber(e,"wallet_balance"),s=n<0?"out":"in",o=void 0;if(void 0!==a&&void 0!==n){var u="out"===s?n:-n;o=this.sum(a,u)}var c=this.parse8601(this.safeString(e,"exec_time")),d=this.parseLedgerEntryType(this.safeString(e,"type")),h=this.safeString(e,"id"),l=this.safeString(e,"tx_id");return{id:h,currency:i,account:this.safeString(e,"wallet_id"),referenceAccount:void 0,referenceId:l,status:void 0,amount:n,before:o,after:a,fee:void 0,direction:s,timestamp:c,datetime:this.iso8601(c),type:d,info:e}}},{key:"parseLedgerEntryType",value:function(e){return this.safeString({Deposit:"transaction",Withdraw:"transaction",RealisedPNL:"trade",Commission:"fee",Refund:"cashback",Prize:"prize",ExchangeOrderWithdraw:"transaction",ExchangeOrderDeposit:"transaction"},e,e)}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.implodeParams(this.urls.api,{hostname:this.hostname}),o=this.safeString(t,0),u=this.safeString(t,1),c="/"+o+"/"+u+"/"+e;if("public"===u)Object.keys(i).length&&(c+="?"+this.rawencode(i));else if("public"===o)Object.keys(i).length&&(c+="?"+this.rawencode(i));else{this.checkRequiredCredentials();var d=this.nonce(),h=this.extend(i,{api_key:this.apiKey,recv_window:this.options.recvWindow,timestamp:d}),l=this.keysort(h),f=this.rawencode(l),p=this.hmac(this.encode(f),this.encode(this.secret));"POST"===r?(a=this.json(this.extend(h,{sign:p})),n={"Content-Type":"application/json"}):c+="?"+this.urlencode(l)+"&sign="+p}return{url:s+=c,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,u){if(s){var c=this.safeString(s,"ret_code");if("0"!==c){var d=this.id+" "+a;throw this.throwExactlyMatchedException(this.exceptions.exact,c,d),this.throwBroadlyMatchedException(this.exceptions.broad,a,d),new v(d)}}}},{key:"fetchPositions",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:{},e.next=4,this.loadMarkets();case 4:if(n={},!Array.isArray(t)){e.next=10;break}if(1===t.length){e.next=9;break}throw new m(this.id+" fetchPositions takes exactly one symbol");case 9:n.symbol=this.marketId(t[0]);case 10:if(a=this.safeString(this.options,"defaultType","linear"),s=this.safeString(r,"type",a),r=this.omit(r,"type"),o=void 0,"linear"!==s){e.next=20;break}return e.next=17,this.privateLinearGetPositionList(this.extend(n,r));case 17:o=e.sent,e.next=30;break;case 20:if("inverse"!==s){e.next=26;break}return e.next=23,this.v2PrivateGetPositionList(this.extend(n,r));case 23:o=e.sent,e.next=30;break;case 26:if("inverseFuture"!==s){e.next=30;break}return e.next=29,this.futuresPrivateGetPositionList(this.extend(n,r));case 29:o=e.sent;case 30:return e.abrupt("return",this.safeValue(o,"result"));case 31:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),r}(h)},function(e,t,r){"use strict";var i=r(7),n=r(8),a=r(1),s=r(2),o=r(6),u=r(3),c=r(4),d=r(5),h=r(11),l=r(10),f=l.ExchangeError,p=l.ArgumentsRequired,v=l.BadRequest,m=l.AuthenticationError,g=l.DDoSProtection,y=l.BadResponse,b=r(18),x=b.TRUNCATE,k=b.NO_PADDING,w=b.DECIMAL_PLACES;e.exports=function(e){c(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(u(r.prototype),"describe",this).call(this),{id:"bytetrade",name:"ByteTrade",countries:["HK"],rateLimit:500,requiresWeb3:!0,certified:!0,has:{cancelOrder:!0,CORS:!1,createOrder:!0,fetchBalance:!0,fetchBidsAsks:!0,fetchClosedOrders:!0,fetchCurrencies:!0,fetchDepositAddress:!0,fetchDeposits:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,fetchWithdrawals:!0,withdraw:!0},timeframes:{"1m":"1m","5m":"5m","15m":"15m","30m":"30m","1h":"1h","4h":"4h","1d":"1d","5d":"5d","1w":"1w","1M":"1M"},urls:{test:{market:"https://api-v2-test.byte-trade.com",public:"https://api-v2-test.byte-trade.com"},logo:"https://user-images.githubusercontent.com/1294454/67288762-2f04a600-f4e6-11e9-9fd6-c60641919491.jpg",api:{market:"https://api-v2.byte-trade.com",public:"https://api-v2.byte-trade.com"},www:"https://www.byte-trade.com",doc:"https://docs.byte-trade.com/#description"},api:{market:{get:["klines","depth","trades","tickers"]},public:{get:["symbols","currencies","balance","orders/open","orders/closed","orders/all","orders","orders/trades","depositaddress","withdrawals","deposits","transfers"],post:["transaction/createorder","transaction/cancelorder","transaction/withdraw","transaction/transfer"]}},fees:{trading:{taker:8e-4,maker:8e-4}},commonCurrencies:{1:"ByteTrade",44:"ByteHub",48:"Blocktonic",133:"TerraCredit"},exceptions:{"vertify error":m,"verify error":m,"transaction already in network":v,"invalid argument":v}})}},{key:"fetchCurrencies",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p,v,m,g=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=g.length>0&&void 0!==g[0]?g[0]:{},e.next=3,this.publicGetCurrencies(t);case 3:for(r=e.sent,n={},a=0;a<r.length;a++)s=r[a],o=this.safeString(s,"code"),u=void 0,u=o in this.commonCurrencies?this.commonCurrencies[o]:this.safeString(s,"name"),c=this.safeString(s,"fullname"),d=this.safeValue(s,"active"),h=this.safeValue(s,"limits"),l=this.safeValue(h,"deposit"),f=this.safeInteger(s,"basePrecision"),-1===(p=this.safeNumber(l,"max"))&&(p=void 0),v=this.safeValue(h,"withdraw"),-1===(m=this.safeNumber(v,"max"))&&(m=void 0),n[u]={id:o,code:u,name:c,active:d,precision:f,fee:void 0,limits:{amount:{min:void 0,max:void 0},deposit:{min:this.safeNumber(l,"min"),max:p},withdraw:{min:this.safeNumber(v,"min"),max:m}},info:s};return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p,v,m,g,y,b,x,k,w=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=w.length>0&&void 0!==w[0]?w[0]:{},e.next=3,this.publicGetSymbols(t);case 3:for(r=e.sent,n=[],a=0;a<r.length;a++)s=r[a],o=this.safeString(s,"symbol"),u=this.safeString(s,"baseName"),c=this.safeString(s,"quoteName"),d=this.safeString(s,"base"),h=this.safeString(s,"quote"),l=u.split("@"+d)[0],f=c.split("@"+h)[0],"126"===h&&(f="ZAR"),p=l+"/"+f,d in this.commonCurrencies&&(u=this.commonCurrencies[d]),h in this.commonCurrencies&&(c=this.commonCurrencies[h]),v=u+"/"+c,m=this.safeValue(s,"limits",{}),g=this.safeValue(m,"amount",{}),y=this.safeValue(m,"price",{}),b=this.safeValue(s,"precision",{}),x=this.safeString(s,"active"),k={id:o,symbol:v,base:u,quote:c,baseId:d,quoteId:h,info:s,active:x,precision:{amount:this.safeInteger(b,"amount"),price:this.safeInteger(b,"price")},normalSymbol:p,limits:{amount:{min:this.safeNumber(g,"min"),max:this.safeNumber(g,"max")},price:{min:this.safeNumber(y,"min"),max:this.safeNumber(y,"max")},cost:{min:void 0,max:void 0}}},n.push(k);return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("userid"in(t=h.length>0&&void 0!==h[0]?h[0]:{})||void 0!==this.apiKey){e.next=3;break}throw new p(this.id+" fetchDeposits() requires this.apiKey or userid argument");case 3:return e.next=5,this.loadMarkets();case 5:return r={userid:this.apiKey},e.next=8,this.publicGetBalance(this.extend(r,t));case 8:for(n=e.sent,a={info:n},s=0;s<n.length;s++)o=n[s],u=this.safeString(o,"code"),c=this.safeCurrencyCode(u,void 0),(d=this.account()).free=this.safeString(o,"free"),d.used=this.safeString(o,"used"),a[c]=d;return e.abrupt("return",this.parseBalance(a,!1));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:{},e.next=4,this.loadMarkets();case 4:return a=this.market(t),s={symbol:a.id},void 0!==r&&(s.limit=r),e.next=9,this.marketGetDepth(this.extend(s,n));case 9:return o=e.sent,u=this.safeValue(o,"timestamp"),c=this.parseOrderBook(o,u),e.abrupt("return",c);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeInteger(e,"timestamp"),i=void 0,n=this.safeString(e,"symbol");if(n in this.markets_by_id)t=this.markets_by_id[n];else{var a=this.safeString(e,"base"),s=this.safeString(e,"quote");if(void 0!==a&&void 0!==s){var o=this.safeCurrencyCode(a),u=this.safeCurrencyCode(s);i=o+"/"+u}}return void 0===i&&void 0!==t&&(i=t.symbol),{symbol:i,timestamp:r,datetime:this.iso8601(r),high:this.safeNumber(e,"high"),low:this.safeNumber(e,"low"),bid:void 0,bidVolume:void 0,ask:void 0,askVolume:void 0,vwap:this.safeNumber(e,"weightedAvgPrice"),open:this.safeNumber(e,"open"),close:this.safeNumber(e,"close"),last:this.safeNumber(e,"last"),previousClose:void 0,change:this.safeNumber(e,"change"),percentage:this.safeNumber(e,"percentage"),average:void 0,baseVolume:this.safeNumber(e,"baseVolume"),quoteVolume:this.safeNumber(e,"quoteVolume"),info:e}}},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={symbol:n.id},e.next=7,this.marketGetTickers(this.extend(a,r));case 7:if(s=e.sent,!Array.isArray(s)){e.next=13;break}if(void 0!==(o=this.safeValue(s,0))){e.next=12;break}throw new y(this.id+" fetchTicker() returned an empty response");case 12:return e.abrupt("return",this.parseTicker(o,n));case 13:return e.abrupt("return",this.parseTicker(s,n));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchBidsAsks",value:function(){var e=n(i.mark((function e(){var t,r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:void 0,r=a.length>1&&void 0!==a[1]?a[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.marketGetDepth(r);case 6:return n=e.sent,e.abrupt("return",this.parseTickers(n,t));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:void 0,r=a.length>1&&void 0!==a[1]?a[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.marketGetTickers(r);case 6:return n=e.sent,e.abrupt("return",this.parseTickers(n,t));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){return[this.safeInteger(e,0),this.safeNumber(e,1),this.safeNumber(e,2),this.safeNumber(e,3),this.safeNumber(e,4),this.safeNumber(e,5)]}},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:"1m",n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:void 0,s=d.length>4&&void 0!==d[4]?d[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),u={symbol:o.id,timeframe:this.timeframes[r]},void 0!==n&&(u.since=n),void 0!==a&&(u.limit=a),e.next=12,this.marketGetKlines(this.extend(u,s));case 12:return c=e.sent,e.abrupt("return",this.parseOHLCVs(c,o,r,n,a));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeInteger(e,"timestamp"),i=this.safeNumber(e,"price"),n=this.safeNumber(e,"amount"),a=this.safeNumber(e,"cost"),s=this.safeString(e,"id"),o=this.safeString(e,"type"),u=this.safeString(e,"takerOrMaker"),c=this.safeString(e,"side"),d=this.iso8601(r),h=this.safeString(e,"order"),l=this.safeValue(e,"fee"),f=void 0;if(void 0===t){var p=this.safeString(e,"symbol");t=this.safeValue(this.markets_by_id,p)}return void 0!==t&&(f=t.symbol),{info:e,timestamp:r,datetime:d,symbol:f,id:s,order:h,type:o,takerOrMaker:u,side:c,price:i,amount:n,cost:a,fee:l}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={symbol:s.id},void 0!==r&&(o.since=r),void 0!==n&&(o.limit=n),e.next=11,this.marketGetTrades(this.extend(o,a));case 11:return u=e.sent,e.abrupt("return",this.parseTrades(u,s,r,n));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"status"),i=void 0,n=this.safeString(e,"symbol");if(n in this.markets_by_id)t=this.markets_by_id[n];else{var a=this.safeString(e,"base"),s=this.safeString(e,"quote");if(void 0!==a&&void 0!==s){var o=this.safeCurrencyCode(a),u=this.safeCurrencyCode(s);i=o+"/"+u}}void 0===i&&void 0!==t&&(i=t.symbol);var c=this.safeInteger(e,"timestamp"),d=this.safeString(e,"datetime"),h=this.safeInteger(e,"lastTradeTimestamp"),l=this.safeNumber(e,"price"),f=this.safeNumber(e,"amount"),p=this.safeNumber(e,"filled"),v=this.safeNumber(e,"remaining"),m=this.safeNumber(e,"cost"),g=this.safeNumber(e,"average"),y=this.safeString(e,"id"),b=this.safeString(e,"type"),x=this.safeString(e,"side"),k=this.safeValue(e,"fee");return{info:e,id:y,clientOrderId:void 0,timestamp:c,datetime:d,lastTradeTimestamp:h,symbol:i,type:b,timeInForce:void 0,postOnly:void 0,side:x,price:l,stopPrice:void 0,amount:f,cost:m,average:g,filled:p,remaining:v,status:r,fee:k,trades:void 0}}},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,u,c,d,h,l,f,v,m,g,y,b,x,k,w,_,S,O,T,C,I,M,A,E,N,P,D,L,B,R,V,G,F,q,j,z,H,U,W,K,X,Y,Z,Q,$,J=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=J.length>4&&void 0!==J[4]?J[4]:void 0,o=J.length>5&&void 0!==J[5]?J[5]:{},this.checkRequiredDependencies(),void 0!==this.apiKey){e.next=5;break}throw new p("createOrder() requires this.apiKey or userid in params");case 5:return e.next=7,this.loadMarkets();case 7:return u=this.market(t),c=void 0,d=void 0,c="sell"===n?1:2,"limit"===r?d=1:(d=2,s=0),h=u.normalSymbol,l=u.baseId,f=this.currency(u.base),v=this.amountToPrecision(t,a),m=this.toWei(v,f.precision),g=u.quoteId,y=this.currency(u.quote),b=this.priceToPrecision(t,s),x=this.toWei(b,y.precision),k=this.milliseconds(),w=this.milliseconds(),_=(_=this.iso8601(k)).split(".")[0],S=(S=this.iso8601(w)).split(".")[0],O="Sagittarius",T=this.safeString(o,"dappId",O),C=this.safeString(this.options,"fee","300000000000000"),I=this.safeString(o,"totalFeeRate",8),M=this.safeString(o,"chainFeeRate",1),A=this.safeString(o,"fee",C),E=this.integerPow("2","64"),N=[this.numberToBE(1,32),this.numberToLE(Math.floor(k/1e3),4),this.numberToLE(1,1),this.numberToLE(Math.floor(w/1e3),4),this.numberToLE(1,1),this.numberToLE(32,1),this.numberToLE(0,8),this.numberToLE(A,8),this.numberToLE(this.apiKey.length,1),this.stringToBinary(this.encode(this.apiKey)),this.numberToLE(c,1),this.numberToLE(d,1),this.numberToLE(h.length,1),this.stringToBinary(this.encode(h)),this.numberToLE(this.integerDivide(m,E),8),this.numberToLE(this.integerModulo(m,E),8),this.numberToLE(this.integerDivide(x,E),8),this.numberToLE(this.integerModulo(x,E),8),this.numberToLE(0,2),this.numberToLE(Math.floor(k/1e3),4),this.numberToLE(Math.floor(w/1e3),4),this.numberToLE(1,1),this.numberToLE(parseInt(M),2),this.numberToLE(1,1),this.numberToLE(parseInt(I),2),this.numberToLE(parseInt(g),4),this.numberToLE(parseInt(l),4),this.numberToLE(0,1),this.numberToLE(1,1),this.numberToLE(T.length,1),this.stringToBinary(this.encode(T)),this.numberToLE(0,1)],P=[this.numberToLE(Math.floor(k/1e3),4),this.numberToLE(1,1),this.numberToLE(Math.floor(w/1e3),4),this.numberToLE(1,1),this.numberToLE(32,1),this.numberToLE(0,8),this.numberToLE(A,8),this.numberToLE(this.apiKey.length,1),this.stringToBinary(this.encode(this.apiKey)),this.numberToLE(c,1),this.numberToLE(d,1),this.numberToLE(h.length,1),this.stringToBinary(this.encode(h)),this.numberToLE(this.integerDivide(m,E),8),this.numberToLE(this.integerModulo(m,E),8),this.numberToLE(this.integerDivide(x,E),8),this.numberToLE(this.integerModulo(x,E),8),this.numberToLE(0,2),this.numberToLE(Math.floor(k/1e3),4),this.numberToLE(Math.floor(w/1e3),4),this.numberToLE(1,1),this.numberToLE(parseInt(M),2),this.numberToLE(1,1),this.numberToLE(parseInt(I),2),this.numberToLE(parseInt(g),4),this.numberToLE(parseInt(l),4),this.numberToLE(0,1),this.numberToLE(1,1),this.numberToLE(T.length,1),this.stringToBinary(this.encode(T)),this.numberToLE(0,1)],D=this.binaryConcatArray(P),L=this.hash(D,"sha256","hex"),B=L.slice(0,40),R=[this.numberToLE(B.length,1),this.stringToBinary(this.encode(B)),this.numberToBE(0,4)],V=this.binaryConcatArray(R),G=this.hash(V,"sha256","hex"),F=G.slice(0,40),q=this.binaryConcatArray(N),j=this.hash(q,"sha256","hex"),z=this.ecdsa(j,this.secret,"secp256k1",void 0,!0),H=this.binaryToBase16(this.numberToLE(this.sum(z.v,31),1)),U=H+z.r+z.s,W={now:_,expiration:S,fee:A,creator:this.apiKey,side:c,order_type:d,market_name:h,amount:m,price:x,use_btt_as_fee:!1,money_id:parseInt(g),stock_id:parseInt(l),custom_no_btt_fee_rate:parseInt(I),custom_btt_fee_rate:parseInt(M)},K={timestamp:_,expiration:S,operations:[[32,W]],validate_type:0,dapp:T,signatures:[U]},X={trObj:this.json(K)},e.next=53,this.publicPostTransactionCreateorder(X);case 53:return Y=e.sent,Z=this.milliseconds(),Q=this.safe_string(Y,"code"),$="0"===Q?"open":"failed",e.abrupt("return",{info:Y,id:F,timestamp:Z,datetime:this.iso8601(Z),lastTradeTimestamp:void 0,status:$,symbol:void 0,type:void 0,side:void 0,price:void 0,amount:void 0,filled:void 0,remaining:void 0,cost:void 0,trades:void 0,fee:void 0,clientOrderId:void 0,average:void 0});case 58:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=u.length>1&&void 0!==u[1]?u[1]:void 0,"userid"in(n=u.length>2&&void 0!==u[2]?u[2]:{})||void 0!==this.apiKey){e.next=4;break}throw new p("fetchOrder() requires this.apiKey or userid argument");case 4:return e.next=6,this.loadMarkets();case 6:return a={userid:this.apiKey},s=void 0,void 0!==r&&(s=this.markets[r],a.symbol=s.id),a.id=t,e.next=12,this.publicGetOrders(this.extend(a,n));case 12:return o=e.sent,e.abrupt("return",this.parseOrder(o,s));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=c.length>0&&void 0!==c[0]?c[0]:void 0,r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,"userid"in(a=c.length>3&&void 0!==c[3]?c[3]:{})||void 0!==this.apiKey){e.next=6;break}throw new p("fetchOpenOrders() requires this.apiKey or userid argument");case 6:return e.next=8,this.loadMarkets();case 8:return s={userid:this.apiKey},o=void 0,void 0!==t&&(o=this.market(t),s.symbol=o.id),void 0!==n&&(s.limit=n),e.next=14,this.publicGetOrdersOpen(this.extend(s,a));case 14:return u=e.sent,e.abrupt("return",this.parseOrders(u,o,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=c.length>0&&void 0!==c[0]?c[0]:void 0,r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,"userid"in(a=c.length>3&&void 0!==c[3]?c[3]:{})||void 0!==this.apiKey){e.next=6;break}throw new p("fetchClosedOrders() requires this.apiKey or userid argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=void 0,o={userid:this.apiKey},void 0!==t&&(s=this.market(t),o.symbol=s.id),void 0!==n&&(o.limit=n),e.next=14,this.publicGetOrdersClosed(this.extend(o,a));case 14:return u=e.sent,e.abrupt("return",this.parseOrders(u,s,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=c.length>0&&void 0!==c[0]?c[0]:void 0,r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,"userid"in(a=c.length>3&&void 0!==c[3]?c[3]:{})||void 0!==this.apiKey){e.next=6;break}throw new p("fetchOrders() requires this.apiKey or userid argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=void 0,o={userid:this.apiKey},void 0!==t&&(s=this.market(t),o.symbol=s.id),void 0!==n&&(o.limit=n),e.next=14,this.publicGetOrdersAll(this.extend(o,a));case 14:return u=e.sent,e.abrupt("return",this.parseOrders(u,s,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d,h,l,f,v,m,g,y,b,x,k,w,_,S,O,T,C,I,M,A=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=A.length>1&&void 0!==A[1]?A[1]:void 0,n=A.length>2&&void 0!==A[2]?A[2]:{},void 0!==this.apiKey){e.next=4;break}throw new p("cancelOrder() requires hasAlreadyAuthenticatedSuccessfully");case 4:if(void 0!==r){e.next=6;break}throw new p(this.id+" cancelOrder() requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return a=this.market(r),s=a.baseId,o=a.quoteId,u=a.normalSymbol,c="300000000000000",d=this.milliseconds(),h=0,l=(l=this.iso8601(d)).split(".")[0],f=(f=this.iso8601(h)).split(".")[0],v="Sagittarius",m=this.safeString(n,"dappId",v),g=[this.numberToBE(1,32),this.numberToLE(Math.floor(d/1e3),4),this.numberToLE(1,1),this.numberToLE(h,4),this.numberToLE(1,1),this.numberToLE(33,1),this.numberToLE(0,8),this.numberToLE(c,8),this.numberToLE(this.apiKey.length,1),this.stringToBinary(this.encode(this.apiKey)),this.numberToLE(u.length,1),this.stringToBinary(this.encode(u)),this.base16ToBinary(t),this.numberToLE(parseInt(o),4),this.numberToLE(parseInt(s),4),this.numberToLE(0,1),this.numberToLE(1,1),this.numberToLE(m.length,1),this.stringToBinary(this.encode(m)),this.numberToLE(0,1)],y=this.binaryConcatArray(g),b=this.hash(y,"sha256","hex"),x=this.ecdsa(b,this.secret,"secp256k1",void 0,!0),k=this.binaryToBase16(this.numberToLE(this.sum(x.v,31),1)),w=k+x.r+x.s,_={fee:c,creator:this.apiKey,order_id:t,market_name:u,money_id:parseInt(o),stock_id:parseInt(s)},S={timestamp:l,expiration:f,operations:[[33,_]],validate_type:0,dapp:m,signatures:[w]},O={trObj:this.json(S)},e.next=32,this.publicPostTransactionCancelorder(O);case 32:return T=e.sent,C=this.milliseconds(),I=this.safe_string(T,"code"),M="0"===I?"canceled":"failed",e.abrupt("return",{info:T,id:void 0,timestamp:C,datetime:this.iso8601(C),lastTradeTimestamp:void 0,status:M,symbol:void 0,type:void 0,side:void 0,price:void 0,amount:void 0,filled:void 0,remaining:void 0,cost:void 0,trades:void 0,fee:void 0,clientOrderId:void 0,average:void 0});case 37:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"transfer",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,u,c,d,h,l,f,v,m,g,y,b,_,S,O,T,C,I,M,A,E,N,P,D,L,B,R=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=R.length>4&&void 0!==R[4]?R[4]:{},this.checkRequiredDependencies(),void 0!==this.apiKey){e.next=4;break}throw new p("transfer() requires this.apiKey");case 4:return e.next=6,this.loadMarkets();case 6:return o=this.currency(t),u=this.decimalToPrecision(r,x,o.info.basePrecision-o.info.transferPrecision,w,k),c=this.toWei(u,o.precision),d=parseInt(o.id),h=this.milliseconds(),l=h,f=(f=this.iso8601(h)).split(".")[0],v=(v=this.iso8601(l)).split(".")[0],m="300000000000000",g="Sagittarius",y=this.safeString(s,"message",""),b=this.safeString(s,"dappId",g),_=this.integerPow("2","64"),S=[this.numberToBE(1,32),this.numberToLE(Math.floor(h/1e3),4),this.numberToLE(1,1),this.numberToLE(Math.floor(l/1e3),4),this.numberToLE(1,1),this.numberToLE(28,1),this.numberToLE(0,8),this.numberToLE(m,8),this.numberToLE(this.apiKey.length,1),this.stringToBinary(this.encode(this.apiKey)),this.numberToLE(a.length,1),this.stringToBinary(this.encode(a)),this.numberToLE(d,4),this.numberToLE(this.integerDivide(c,_),8),this.numberToLE(this.integerModulo(c,_),8),this.numberToLE(1,1),this.numberToLE(y.length,1),this.stringToBinary(this.encode(y)),this.numberToLE(0,1),this.numberToLE(1,1),this.numberToLE(b.length,1),this.stringToBinary(this.encode(b)),this.numberToLE(0,1)],O=this.binaryConcatArray(S),T=this.hash(O,"sha256","hex"),C=this.ecdsa(T,this.secret,"secp256k1",void 0,!0),I=this.binaryToBase16(this.numberToLE(this.sum(C.v,31),1)),M=I+C.r+C.s,A={fee:"300000000000000",from:this.apiKey,to:a,asset_type:parseInt(o.id),amount:c.toString(),message:y},E={timestamp:f,expiration:v,operations:[[28,A]],validate_type:0,dapp:b,signatures:[M]},N={trObj:this.json(E)},e.next=32,this.publicPostTransactionTransfer(N);case 32:return P=e.sent,D=this.milliseconds(),L=this.safe_string(P,"code"),B="",B="0"===L?"submit success":"submit fail",e.abrupt("return",{info:P,id:"",timestamp:D,datetime:this.iso8601(D),lastTradeTimestamp:void 0,status:B,symbol:void 0,type:void 0,side:void 0,price:void 0,amount:void 0,filled:void 0,remaining:void 0,cost:void 0,fee:void 0,clientOrderId:void 0,average:void 0,trades:void 0});case 38:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=c.length>0&&void 0!==c[0]?c[0]:void 0,r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,"userid"in(a=c.length>3&&void 0!==c[3]?c[3]:{})||void 0!==this.apiKey){e.next=6;break}throw new p("fetchMyTrades() requires this.apiKey or userid argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.market(t),o={userid:this.apiKey},void 0!==t&&(o.symbol=s.id),void 0!==n&&(o.limit=n),e.next=14,this.publicGetOrdersTrades(this.extend(o,a));case 14:return u=e.sent,e.abrupt("return",this.parseTrades(u,s,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchDeposits",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:void 0,r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},e.next=6,this.loadMarkets();case 6:if("userid"in a||void 0!==this.apiKey){e.next=8;break}throw new p("fetchDeposits() requires this.apiKey or userid argument");case 8:return s=void 0,o={userid:this.apiKey},void 0!==t&&(s=this.currency(t),o.currency=s.id),void 0!==r&&(o.since=r),void 0!==n&&(o.limit=n),e.next=15,this.publicGetDeposits(this.extend(o,a));case 15:return u=e.sent,e.abrupt("return",this.parseTransactions(u,s,r,n));case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchWithdrawals",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:void 0,r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},e.next=6,this.loadMarkets();case 6:if("userid"in a||void 0!==this.apiKey){e.next=8;break}throw new p("fetchWithdrawals() requires this.apiKey or userid argument");case 8:return s=void 0,o={userid:this.apiKey},void 0!==t&&(s=this.currency(t),o.currency=s.id),void 0!==r&&(o.since=r),void 0!==n&&(o.limit=n),e.next=15,this.publicGetWithdrawals(this.extend(o,a));case 15:return u=e.sent,e.abrupt("return",this.parseTransactions(u,s,r,n));case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTransactionStatus",value:function(e){return this.safeString({DEPOSIT_FAILED:"failed",FEE_SEND_FAILED:"failed",FEE_FAILED:"failed",PAY_SEND_FAILED:"failed",PAY_FAILED:"failed",BTT_FAILED:"failed",WITHDDRAW_FAILED:"failed",USER_FAILED:"failed",FEE_EXECUED:"pending",PAY_EXECUED:"pending",WITHDDRAW_EXECUTED:"pending",USER_EXECUED:"pending",BTT_SUCCED:"ok"},e,e)}},{key:"parseTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),i=this.safeString(e,"address"),n=this.safeString(e,"tag");void 0!==n&&n.length<1&&(n=void 0);var a=this.safeValue(e,"txid"),s=this.safeString(e,"code"),o=this.safeCurrencyCode(s,t),u=this.safeInteger(e,"timestamp"),c=this.safeString(e,"datetime"),d=this.safeString(e,"type"),h=this.parseTransactionStatus(this.safeString(e,"status")),l=this.safeNumber(e,"amount"),f=this.safeValue(e,"fee"),p=this.safeNumber(f,"cost"),v=this.safeString(f,"code"),m=this.safeCurrencyCode(v,t),g={cost:p,currency:m};return{info:e,id:r,txid:a,timestamp:u,datetime:c,address:i,tag:n,type:d,amount:l,currency:o,status:h,updated:void 0,fee:g}}},{key:"fetchDepositAddress",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:{},e.next=3,this.loadMarkets();case 3:if("userid"in r||void 0!==this.apiKey){e.next=5;break}throw new p("fetchDepositAddress() requires this.apiKey or userid argument");case 5:return n=this.currency(t),a={userid:this.apiKey,code:n.id},e.next=9,this.publicGetDepositaddress(a);case 9:return s=e.sent,o=this.safeString(s[0],"address"),u=this.safeString(s[0],"tag"),c=this.safeString(s[0],"chainType"),this.checkAddress(o),e.abrupt("return",{currency:t,address:o,tag:u,chainType:c,info:s});case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"withdraw",value:function(){var e=n(i.mark((function e(t,r,n){var a,s,o,u,c,d,h,l,f,v,m,g,y,b,_,S,O,T,C,I,M,A,E,N,P,D,L,B,R,V,G,F=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return F.length>3&&void 0!==F[3]?F[3]:void 0,a=F.length>4&&void 0!==F[4]?F[4]:{},this.checkRequiredDependencies(),this.checkAddress(n),e.next=6,this.loadMarkets();case 6:if(void 0!==this.apiKey){e.next=8;break}throw new p(this.id+" withdraw() requires this.apiKey");case 8:return e.next=10,this.fetchDepositAddress(t);case 10:return s=e.sent,o=this.safeString(s,"chainType"),u=this.safeString(s.info[0],"chainId"),c="",c="eos"===o?n:this.safeString(s,"address"),d=18,"ethereum"!==o&&"etc"!==o&&"eos"!==o&&"cmt"!==o&&"naka"!==o&&(d=26),h=this.milliseconds(),l=0,f=(f=this.iso8601(h)).split(".")[0],v=(v=this.iso8601(l)).split(".")[0],m="Sagittarius",g=this.safeString(a,"dappId",m),y="300000000000000",b=this.currency(t),_=b.id,S=this.decimalToPrecision(r,x,b.info.basePrecision-b.info.transferPrecision,w,k),O=this.toWei(S,b.info.externalPrecision),T=this.integerPow("2","64"),C=0,I=[],26===d?(C=b.info.fee,I=[this.numberToBE(1,32),this.numberToLE(Math.floor(h/1e3),4),this.numberToLE(1,1),this.numberToLE(Math.floor(l/1e3),4),this.numberToLE(1,1),this.numberToLE(d,1),this.numberToLE(0,8),this.numberToLE(y,8),this.numberToLE(this.apiKey.length,1),this.stringToBinary(this.encode(this.apiKey)),this.numberToLE(n.length,1),this.stringToBinary(this.encode(n)),this.numberToLE(parseInt(_),4),this.numberToLE(this.integerDivide(O,T),8),this.numberToLE(this.integerModulo(O,T),8),this.numberToLE(1,1),this.numberToLE(this.integerDivide(C,T),8),this.numberToLE(this.integerModulo(C,T),8),this.numberToLE(0,1),this.numberToLE(1,1),this.numberToLE(g.length,1),this.stringToBinary(this.encode(g)),this.numberToLE(0,1)]):I=[this.numberToBE(1,32),this.numberToLE(Math.floor(h/1e3),4),this.numberToLE(1,1),this.numberToLE(Math.floor(l/1e3),4),this.numberToLE(1,1),this.numberToLE(d,1),this.numberToLE(0,8),this.numberToLE(y,8),this.numberToLE(this.apiKey.length,1),this.stringToBinary(this.encode(this.apiKey)),this.numberToLE(Math.floor(h/1e3),4),this.numberToLE(1,1),this.numberToLE(4,1),this.numberToLE(0,8),this.numberToLE(y,8),this.numberToLE(this.apiKey.length,1),this.stringToBinary(this.encode(this.apiKey)),this.numberToLE(c.length,1),this.stringToBinary(this.encode(c)),this.numberToLE(parseInt(_),4),this.numberToLE(this.integerDivide(O,T),8),this.numberToLE(this.integerModulo(O,T),8),this.numberToLE(0,1),this.numberToLE(1,1),this.numberToLE(g.length,1),this.stringToBinary(this.encode(g)),this.numberToLE(0,1)],M=this.binaryConcatArray(I),A=this.hash(M,"sha256","hex"),E=this.ecdsa(A,this.secret,"secp256k1",void 0,!0),N=this.binaryToBase16(this.numberToLE(this.sum(E.v,31),1)),P=N+E.r+E.s,D=void 0,L=void 0,B=void 0,R=this.safeString(b.info,"chainContractAddress"),26===d?(B={fee:y,from:this.apiKey,to_external_address:n,asset_type:parseInt(_),amount:O,asset_fee:C},D={timestamp:f,expiration:v,operations:[[d,B]],validate_type:0,dapp:g,signatures:[P]},L={chainType:u,trObj:this.json(D),chainContractAddress:R}):(B={fee:y,from:this.apiKey,to_external_address:c,asset_type:parseInt(_),amount:O,asset_fee:C},V={fee:y,proposaler:this.apiKey,expiration_time:f,proposed_ops:[{op:[4,B]}]},D={timestamp:f,expiration:v,operations:[[d,V]],validate_type:0,dapp:g,signatures:[P]},L="eos"===o?{chainType:u,toExternalAddress:"noneed",trObj:this.json(D),chainContractAddress:R}:{chainType:u,toExternalAddress:n,trObj:this.json(D),chainContractAddress:R}),e.next=46,this.publicPostTransactionWithdraw(L);case 46:return G=e.sent,e.abrupt("return",{info:G,id:this.safeString(G,"id")});case 48:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.urls.api[t];return s+="/"+e,Object.keys(i).length&&(s+="?"+this.urlencode(i)),{url:s,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,u){if(503===e)throw new g(this.id+" "+e.toString()+" "+t+" "+a);if(void 0!==s&&("code"in s&&"1"===this.safeString(s,"code"))){var c=this.safeString(s,"msg"),d=this.id+" "+a;throw this.throwExactlyMatchedException(this.exceptions,c,d),new f(d)}}}]),r}(h)},function(e,t,r){"use strict";var i=r(1),n=r(2),a=r(6),s=r(3),o=r(4),u=r(5),c=r(127);e.exports=function(e){o(r,e);var t=u(r);function r(){return i(this,r),t.apply(this,arguments)}return n(r,[{key:"describe",value:function(){return this.deepExtend(a(s(r.prototype),"describe",this).call(this),{id:"cdax",name:"CDAX",countries:["RU"],hostname:"cdax.io",pro:!1,urls:{logo:"https://user-images.githubusercontent.com/1294454/102157692-fd406280-3e90-11eb-8d46-4511b617cd17.jpg",api:{market:"https://{hostname}/api",public:"https://{hostname}/api",private:"https://{hostname}/api",v2Public:"https://{hostname}/api",v2Private:"https://{hostname}/api"},www:"https://cdax.io",referral:"https://cdax.io/invite?invite_code=esc74",doc:"https://github.com/cloudapidoc/API_Docs",fees:"https://cdax.io/about/fee"}})}}]),r}(c)},function(e,t,r){"use strict";var i=r(7),n=r(8),a=r(1),s=r(2),o=r(6),u=r(3),c=r(4),d=r(5),h=r(11),l=r(10),f=l.ExchangeError,p=l.ArgumentsRequired,v=l.AuthenticationError,m=l.NullResponse,g=l.InvalidOrder,y=l.NotSupported,b=l.InsufficientFunds,x=l.InvalidNonce,k=l.OrderNotFound,w=l.RateLimitExceeded,_=l.DDoSProtection,S=r(12);e.exports=function(e){c(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(u(r.prototype),"describe",this).call(this),{id:"cex",name:"CEX.IO",countries:["GB","EU","CY","RU"],rateLimit:1500,has:{cancelOrder:!0,CORS:!1,createOrder:!0,editOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchCurrencies:!0,fetchDepositAddress:!0,fetchMarkets:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0},timeframes:{"1m":"1m"},urls:{logo:"https://user-images.githubusercontent.com/1294454/27766442-8ddc33b0-5ed8-11e7-8b98-f786aef0f3c9.jpg",api:"https://cex.io/api",www:"https://cex.io",doc:"https://cex.io/cex-api",fees:["https://cex.io/fee-schedule","https://cex.io/limits-commissions"],referral:"https://cex.io/r/0/up105393824/0/"},requiredCredentials:{apiKey:!0,secret:!0,uid:!0},api:{public:{get:["currency_profile","currency_limits/","last_price/{pair}/","last_prices/{currencies}/","ohlcv/hd/{yyyymmdd}/{pair}","order_book/{pair}/","ticker/{pair}/","tickers/{currencies}/","trade_history/{pair}/"],post:["convert/{pair}","price_stats/{pair}"]},private:{post:["active_orders_status/","archived_orders/{pair}/","balance/","cancel_order/","cancel_orders/{pair}/","cancel_replace_order/{pair}/","close_position/{pair}/","get_address/","get_myfee/","get_order/","get_order_tx/","open_orders/{pair}/","open_orders/","open_position/{pair}/","open_positions/{pair}/","place_order/{pair}/"]}},fees:{trading:{maker:.0016,taker:.0025},funding:{withdraw:{BTC:.001,ETH:.01,BCH:.001,DASH:.01,BTG:.001,ZEC:.001,XRP:.02},deposit:{BTC:0,ETH:0,BCH:0,DASH:0,BTG:0,ZEC:0,XRP:0,XLM:0}}},exceptions:{exact:{},broad:{"Insufficient funds":b,"Nonce must be incremented":x,"Invalid Order":g,"Order not found":k,"limit exceeded":w,"Invalid API key":v,"There was an error while placing your order":g,"Sorry, too many clients already":_}},options:{fetchOHLCVWarning:!0,createMarketBuyOrderRequiresPrice:!0,order:{status:{c:"canceled",d:"closed",cd:"canceled",a:"open"}}}})}},{key:"fetchCurrenciesFromCache",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.length>0&&void 0!==u[0]?u[0]:{},r=this.safeValue(this.options,"fetchCurrencies",{}),n=this.safeInteger(r,"timestamp"),a=this.safeInteger(r,"expires",1e3),s=this.milliseconds(),!(void 0===n||s-n>a)){e.next=10;break}return e.next=8,this.publicGetCurrencyProfile(t);case 8:o=e.sent,this.options.fetchCurrencies=this.extend(r,{response:o,timestamp:s});case 10:return e.abrupt("return",this.safeValue(this.options.fetchCurrencies,"response"));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchCurrencies",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:{},e.next=3,this.fetchCurrenciesFromCache(t);case 3:for(r=e.sent,this.options.currencies={timestamp:this.milliseconds(),response:r},n=this.safeValue(r,"data",[]),a=this.safeValue(n,"symbols",[]),s={},o=0;o<a.length;o++)u=a[o],c=this.safeString(u,"code"),d=this.safeCurrencyCode(c),h=this.safeInteger(u,"precision"),l=!0,s[d]={id:c,code:d,name:c,active:l,precision:h,fee:void 0,limits:{amount:{min:this.safeNumber(u,"minimumCurrencyAmount"),max:void 0},withdraw:{min:this.safeNumber(u,"minimalWithdrawalAmount"),max:void 0}},info:u};return e.abrupt("return",s);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p,v,m,g,y,b,x,k,w,_,S,O,T,C=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=C.length>0&&void 0!==C[0]?C[0]:{},e.next=3,this.fetchCurrenciesFromCache(t);case 3:return r=e.sent,n=this.safeValue(r,"data",{}),a=this.safeValue(n,"symbols",[]),s=this.indexBy(a,"code"),o=this.safeValue(n,"pairs",[]),e.next=10,this.publicGetCurrencyLimits(t);case 10:for(u=e.sent,c=[],d=this.safeValue(u.data,"pairs"),h=0;h<d.length;h++){for(l=d[h],f=this.safeString(l,"symbol1"),p=this.safeString(l,"symbol2"),v=f+"/"+p,m=this.safeCurrencyCode(f),g=this.safeCurrencyCode(p),y=m+"/"+g,b=this.safeValue(s,f,{}),x=this.safeValue(s,p,{}),k=this.safeInteger(x,"precision",8),w=0;w<o.length;w++)(_=o[w]).symbol1===f&&_.symbol2===p&&(k=this.safeInteger(_,"pricePrecision",k));S=this.safeInteger(b,"precision",8),O=this.safeInteger(b,"scale",0),T={amount:S-O,price:k},c.push({id:v,info:l,symbol:y,base:m,quote:g,baseId:f,quoteId:p,precision:T,limits:{amount:{min:this.safeNumber(l,"minLotSize"),max:this.safeNumber(l,"maxLotSize")},price:{min:this.safeNumber(l,"minPrice"),max:this.safeNumber(l,"maxPrice")},cost:{min:this.safeNumber(l,"minLotSizeS2"),max:void 0}},active:void 0})}return e.abrupt("return",c);case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privatePostBalance(t);case 5:for(r=e.sent,n={info:r},a=["username","timestamp"],s=this.omit(r,a),o=Object.keys(s),u=0;u<o.length;u++)c=o[u],d=this.safeValue(s,c,{}),(h=this.account()).free=this.safeString(d,"available"),h.used=this.safeString(d,"orders","0"),l=this.safeCurrencyCode(c),n[l]=h;return e.abrupt("return",this.parseBalance(n,!1));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:{},e.next=4,this.loadMarkets();case 4:return a={pair:this.marketId(t)},void 0!==r&&(a.depth=r),e.next=8,this.publicGetOrderBookPair(this.extend(a,n));case 8:return s=e.sent,o=this.safeTimestamp(s,"timestamp"),e.abrupt("return",this.parseOrderBook(s,o));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){return[this.safeTimestamp(e,0),this.safeNumber(e,1),this.safeNumber(e,2),this.safeNumber(e,3),this.safeNumber(e,4),this.safeNumber(e,5)]}},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d,h,l,p,v=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=v.length>1&&void 0!==v[1]?v[1]:"1m",n=v.length>2&&void 0!==v[2]?v[2]:void 0,a=v.length>3&&void 0!==v[3]?v[3]:void 0,s=v.length>4&&void 0!==v[4]?v[4]:{},e.next=6,this.loadMarkets();case 6:if(o=this.market(t),void 0!==n){e.next=11;break}n=this.milliseconds()-864e5,e.next=13;break;case 11:if(!this.options.fetchOHLCVWarning){e.next=13;break}throw new f(this.id+" fetchOHLCV warning: CEX can return historical candles for a certain date only, this might produce an empty or null reply. Set exchange.options['fetchOHLCVWarning'] = false or add ({ 'options': { 'fetchOHLCVWarning': false }}) to constructor params to suppress this warning message.");case 13:return u=(u=(u=this.ymd(n)).split("-")).join(""),c={pair:o.id,yyyymmdd:u},e.prev=17,e.next=20,this.publicGetOhlcvHdYyyymmddPair(this.extend(c,s));case 20:return d=e.sent,h="data"+this.timeframes[r],l=this.safeString(d,h),p=JSON.parse(l),e.abrupt("return",this.parseOHLCVs(p,o,r,n,a));case 27:if(e.prev=27,e.t0=e.catch(17),!(e.t0 instanceof m)){e.next=31;break}return e.abrupt("return",[]);case 31:case"end":return e.stop()}}),e,this,[[17,27]])})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeTimestamp(e,"timestamp"),i=this.safeNumber(e,"volume"),n=this.safeNumber(e,"high"),a=this.safeNumber(e,"low"),s=this.safeNumber(e,"bid"),o=this.safeNumber(e,"ask"),u=this.safeNumber(e,"last"),c=void 0;return t&&(c=t.symbol),{symbol:c,timestamp:r,datetime:this.iso8601(r),high:n,low:a,bid:s,bidVolume:void 0,ask:o,askVolume:void 0,vwap:void 0,open:void 0,close:u,last:u,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:i,quoteVolume:void 0,info:e}}},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:void 0,r=f.length>1&&void 0!==f[1]?f[1]:{},e.next=4,this.loadMarkets();case 4:return n=Object.keys(this.currencies),a={currencies:n.join("/")},e.next=8,this.publicGetTickersCurrencies(this.extend(a,r));case 8:for(s=e.sent,o=s.data,u={},c=0;c<o.length;c++)d=o[c],h=d.pair.replace(":","/"),l=this.markets[h],u[h]=this.parseTicker(d,l);return e.abrupt("return",this.filterByArray(u,"symbol",t));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={pair:n.id},e.next=7,this.publicGetTickerPair(this.extend(a,r));case 7:return s=e.sent,e.abrupt("return",this.parseTicker(s,n));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeTimestamp(e,"date"),i=this.safeString(e,"tid"),n=void 0,a=this.safeString(e,"type"),s=this.safeString(e,"price"),o=this.safeString(e,"amount"),u=this.parseNumber(s),c=this.parseNumber(o),d=this.parseNumber(S.stringMul(s,o)),h=void 0;return void 0!==t&&(h=t.symbol),{info:e,id:i,timestamp:r,datetime:this.iso8601(r),symbol:h,type:n,side:a,order:void 0,takerOrMaker:void 0,price:u,amount:c,cost:d,fee:void 0}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={pair:s.id},e.next=9,this.publicGetTradeHistoryPair(this.extend(o,a));case 9:return u=e.sent,e.abrupt("return",this.parseTrades(u,s,r,n));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,u,c,d,h,l,f,p,v,m=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=m.length>4&&void 0!==m[4]?m[4]:void 0,o=m.length>5&&void 0!==m[5]?m[5]:{},"market"!==r||"buy"!==n){e.next=9;break}if(!this.options.createMarketBuyOrderRequiresPrice){e.next=9;break}if(void 0!==s){e.next=8;break}throw new g(this.id+" createOrder() requires the price argument with market buy orders to calculate total order cost (amount to spend), where cost = amount * price. Supply a price argument to createOrder() call if you want the cost to be calculated for you from price and amount, or, alternatively, add .options['createMarketBuyOrderRequiresPrice'] = false to supply the cost in the amount argument (the exchange-specific behaviour)");case 8:a*=s;case 9:return e.next=11,this.loadMarkets();case 11:return u={pair:this.marketId(t),type:n,amount:a},"limit"===r?u.price=s:u.order_type=r,e.next=15,this.privatePostPlaceOrderPair(this.extend(u,o));case 15:return c=e.sent,d=this.safeNumber(c,"amount"),h=this.safeNumber(c,"pending"),l=this.safeValue(c,"time"),f=this.safeValue(c,"complete"),p=f?"closed":"open",v=void 0,void 0!==d&&void 0!==h&&(v=Math.max(d-h,0)),e.abrupt("return",{id:this.safeString(c,"id"),info:c,clientOrderId:void 0,timestamp:l,datetime:this.iso8601(l),lastTradeTimestamp:void 0,type:r,side:this.safeString(c,"type"),symbol:t,status:p,price:this.safeNumber(c,"price"),amount:d,cost:void 0,average:void 0,remaining:h,filled:v,fee:void 0,trades:void 0});case 24:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:{},e.next=4,this.loadMarkets();case 4:return n={id:t},e.next=7,this.privatePostCancelOrder(this.extend(n,r));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeValue(e,"time");r="string"===typeof r&&r.indexOf("T")>=0?this.parse8601(r):parseInt(r);var i=void 0;if(void 0===t){var n=this.safeString(e,"symbol1"),a=this.safeString(e,"symbol2"),s=this.safeCurrencyCode(n),o=this.safeCurrencyCode(a);(i=s+"/"+o)in this.markets&&(t=this.market(i))}var u=this.parseOrderStatus(this.safeString(e,"status")),c=this.safeNumber(e,"price"),d=this.safeNumber(e,"amount");void 0!==d&&(d=Math.abs(d));var h=this.safeNumber2(e,"pending","remains"),l=d-h,f=void 0,p=void 0;if(void 0!==t){i=t.symbol;var v=this.safeNumber(e,"ta:"+t.quote),m=this.safeNumber(e,"tta:"+t.quote);p=this.sum(v,m);var g="fa:"+t.base,y="tfa:"+t.base,b="fa:"+t.quote,x="tfa:"+t.quote,k=this.safeNumber(e,"tradingFeeMaker");if(k||(k=this.safeNumber(e,"tradingFeeTaker",k)),k&&(k/=100),g in e||y in e){var w=this.safeNumber2(e,g,y);f={currency:t.base,rate:k,cost:w}}else if(b in e||x in e){var _=this.safeNumber2(e,b,x);f={currency:t.quote,rate:k,cost:_}}}p||(p=c*l);var S=e.type,O=void 0,T=e.id;if("vtx"in e){O=[];for(var C=0;C<e.vtx.length;C++){var I=e.vtx[C],M=this.safeString(I,"type");if("cancel"!==M){var A=this.safeNumber(I,"price");if(void 0!==A&&"costsNothing"!==M){var E=this.parse8601(this.safeString(I,"time")),N=this.safeNumber(I,"amount"),P=this.safeNumber(I,"fee_amount"),D=N<0?-N:N,L=void 0;"sell"===M?(L=D,D=this.sum(P,L)/A):L=D*A,O.push({id:this.safeString(I,"id"),timestamp:E,datetime:this.iso8601(E),order:T,symbol:i,price:A,amount:D,cost:L,side:M,fee:{cost:P,currency:t.quote},info:I,type:void 0,takerOrMaker:void 0})}}}}return{id:T,clientOrderId:void 0,datetime:this.iso8601(r),timestamp:r,lastTradeTimestamp:void 0,status:u,symbol:i,type:void 0===c?"market":"limit",timeInForce:void 0,postOnly:void 0,side:S,price:c,stopPrice:void 0,cost:p,amount:d,filled:l,remaining:h,trades:O,fee:f,info:e,average:void 0}}},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:{},e.next=6,this.loadMarkets();case 6:return s={},o="privatePostOpenOrders",u=void 0,void 0!==t&&(u=this.market(t),s.pair=u.id,o+="Pair"),e.next=12,this[o](this.extend(s,a));case 12:for(c=e.sent,d=0;d<c.length;d++)c[d]=this.extend(c[d],{status:"open"});return e.abrupt("return",this.parseOrders(c,u,r,n));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:if(s="privatePostArchivedOrdersPair",void 0!==t){e.next=9;break}throw new p(this.id+" fetchClosedOrders() requires a symbol argument");case 9:return o=this.market(t),u={pair:o.id},e.next=13,this[s](this.extend(u,a));case 13:return c=e.sent,e.abrupt("return",this.parseOrders(c,o,r,n));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.length>1&&void 0!==o[1]?o[1]:void 0,r=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return n={id:t.toString()},e.next=7,this.privatePostGetOrderTx(this.extend(n,r));case 7:return a=e.sent,s=this.safeValue(a,"data",{}),e.abrupt("return",this.parseOrder(s));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p,v,m,g,y,b,x,k,w,_,S,O,T,C,I,M,A,E,N,P,D,L,B,R=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=R.length>0&&void 0!==R[0]?R[0]:void 0,r=R.length>1&&void 0!==R[1]?R[1]:void 0,n=R.length>2&&void 0!==R[2]?R[2]:void 0,a=R.length>3&&void 0!==R[3]?R[3]:{},e.next=6,this.loadMarkets();case 6:return s=this.market(t),o={limit:n,pair:s.id,dateFrom:r},e.next=10,this.privatePostArchivedOrdersPair(this.extend(o,a));case 10:for(u=e.sent,c=[],d=0;d<u.length;d++)h=u[d],l=this.parseOrderStatus(this.safeString(h,"status")),f=this.safeString(h,"symbol1"),p=this.safeString(h,"symbol2"),v=this.safeCurrencyCode(f),m=this.safeCurrencyCode(p),g=v+"/"+m,y=this.safeString(h,"type"),b=this.safeNumber(h,"a:"+f+":cds"),x=this.safeNumber(h,"a:"+p+":cds"),k=this.safeNumber(h,"f:"+p+":cds"),w=this.safeNumber(h,"amount"),_=this.safeNumber(h,"price"),S=this.safeNumber(h,"remains"),O=w-S,T=void 0,C=void 0,I=void 0,M=void 0,_?(A=this.safeNumber(h,"ta:"+p,0),E=this.safeNumber(h,"tta:"+p,0),N=this.safeNumber(h,"fa:"+p,0),P=this.safeNumber(h,"tfa:"+p,0),C="sell"===y?this.sum(this.sum(A,E),this.sum(N,P)):this.sum(A,E)-this.sum(N,P),M="limit",T=w,I=C/O):(M="market",I=(T=b)/(C=x)),D=this.safeString(h,"time"),L=this.safeString(h,"lastTxTime"),B=this.parse8601(D),c.push({id:this.safeString(h,"id"),timestamp:B,datetime:this.iso8601(B),lastUpdated:this.parse8601(L),status:l,symbol:g,side:y,price:_,amount:T,average:I,type:M,filled:O,cost:C,remaining:S,fee:{cost:k,currency:m},info:h});return e.abrupt("return",c);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString(this.options.order.status,e,e)}},{key:"editOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,u,c,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=l.length>4&&void 0!==l[4]?l[4]:void 0,o=l.length>5&&void 0!==l[5]?l[5]:void 0,u=l.length>6&&void 0!==l[6]?l[6]:{},void 0!==s){e.next=5;break}throw new p(this.id+" editOrder() requires a amount argument");case 5:if(void 0!==o){e.next=7;break}throw new p(this.id+" editOrder() requires a price argument");case 7:return e.next=9,this.loadMarkets();case 9:return c=this.market(r),d={pair:c.id,type:a,amount:s,price:o,order_id:t},e.next=13,this.privatePostCancelReplaceOrderPair(this.extend(d,u));case 13:return h=e.sent,e.abrupt("return",this.parseOrder(h,c));case 15:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"fetchDepositAddress",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=u.length>1&&void 0!==u[1]?u[1]:{},"XRP"!==t&&"XLM"!==t){e.next=3;break}throw new y(this.id+" fetchDepositAddress does not support XRP and XLM addresses yet (awaiting docs from CEX.io)");case 3:return e.next=5,this.loadMarkets();case 5:return n=this.currency(t),a={currency:n.id},e.next=9,this.privatePostGetAddress(this.extend(a,r));case 9:return s=e.sent,o=this.safeString(s,"data"),this.checkAddress(o),e.abrupt("return",{currency:t,address:o,tag:void 0,info:s});case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"nonce",value:function(){return this.milliseconds()}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.urls.api+"/"+this.implodeParams(e,i),o=this.omit(i,this.extractParams(e));if("public"===t)Object.keys(o).length&&(s+="?"+this.urlencode(o));else{this.checkRequiredCredentials();var u=this.nonce().toString(),c=u+this.uid+this.apiKey,d=this.hmac(this.encode(c),this.encode(this.secret));a=this.json(this.extend({key:this.apiKey,signature:d.toUpperCase(),nonce:u},o)),n={"Content-Type":"application/json"}}return{url:s,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,u){if(Array.isArray(s))return s;if("true"!==a){if(void 0===s)throw new m(this.id+" returned "+this.json(s));if((!("e"in s)||!("ok"in s)||"ok"!==s.ok)&&"error"in s){var c=this.safeString(s,"error"),d=this.id+" "+a;throw this.throwExactlyMatchedException(this.exceptions.exact,c,d),this.throwBroadlyMatchedException(this.exceptions.broad,c,d),new f(d)}}}}]),r}(h)},function(e,t,r){"use strict";var i=r(7),n=r(8),a=r(1),s=r(2),o=r(6),u=r(3),c=r(4),d=r(5),h=r(11),l=r(10),f=l.ExchangeError,p=l.ArgumentsRequired,v=l.AuthenticationError,m=l.RateLimitExceeded,g=l.InvalidNonce,y=r(12);e.exports=function(e){c(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(u(r.prototype),"describe",this).call(this),{id:"coinbase",name:"Coinbase",countries:["US"],rateLimit:400,version:"v2",userAgent:this.userAgents.chrome,headers:{"CB-VERSION":"2018-05-30"},has:{CORS:!0,cancelOrder:!1,createDepositAddress:!0,createOrder:!1,deposit:!1,fetchBalance:!0,fetchClosedOrders:!1,fetchCurrencies:!0,fetchDepositAddress:!1,fetchMarkets:!0,fetchMyTrades:!1,fetchOHLCV:!1,fetchOpenOrders:!1,fetchOrder:!1,fetchOrderBook:!1,fetchL2OrderBook:!1,fetchLedger:!0,fetchOrders:!1,fetchTicker:!0,fetchTickers:!1,fetchTime:!0,fetchBidsAsks:!1,fetchTrades:!1,withdraw:!1,fetchTransactions:!1,fetchDeposits:!0,fetchWithdrawals:!0,fetchMySells:!0,fetchMyBuys:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/40811661-b6eceae2-653a-11e8-829e-10bfadb078cf.jpg",api:"https://api.coinbase.com",www:"https://www.coinbase.com",doc:"https://developers.coinbase.com/api/v2",fees:"https://support.coinbase.com/customer/portal/articles/2109597-buy-sell-bank-transfer-fees",referral:"https://www.coinbase.com/join/58cbe25a355148797479dbd2"},requiredCredentials:{apiKey:!0,secret:!0},api:{public:{get:["currencies","time","exchange-rates","users/{user_id}","prices/{symbol}/buy","prices/{symbol}/sell","prices/{symbol}/spot"]},private:{get:["accounts","accounts/{account_id}","accounts/{account_id}/addresses","accounts/{account_id}/addresses/{address_id}","accounts/{account_id}/addresses/{address_id}/transactions","accounts/{account_id}/transactions","accounts/{account_id}/transactions/{transaction_id}","accounts/{account_id}/buys","accounts/{account_id}/buys/{buy_id}","accounts/{account_id}/sells","accounts/{account_id}/sells/{sell_id}","accounts/{account_id}/deposits","accounts/{account_id}/deposits/{deposit_id}","accounts/{account_id}/withdrawals","accounts/{account_id}/withdrawals/{withdrawal_id}","payment-methods","payment-methods/{payment_method_id}","user","user/auth"],post:["accounts","accounts/{account_id}/primary","accounts/{account_id}/addresses","accounts/{account_id}/transactions","accounts/{account_id}/transactions/{transaction_id}/complete","accounts/{account_id}/transactions/{transaction_id}/resend","accounts/{account_id}/buys","accounts/{account_id}/buys/{buy_id}/commit","accounts/{account_id}/sells","accounts/{account_id}/sells/{sell_id}/commit","accounts/{account_id}/deposists","accounts/{account_id}/deposists/{deposit_id}/commit","accounts/{account_id}/withdrawals","accounts/{account_id}/withdrawals/{withdrawal_id}/commit"],put:["accounts/{account_id}","user"],delete:["accounts/{id}","accounts/{account_id}/transactions/{transaction_id}"]}},exceptions:{exact:{two_factor_required:v,param_required:f,validation_error:f,invalid_request:f,personal_details_required:v,identity_verification_required:v,jumio_verification_required:v,jumio_face_match_verification_required:v,unverified_email:v,authentication_error:v,invalid_token:v,revoked_token:v,expired_token:v,invalid_scope:v,not_found:f,rate_limit_exceeded:m,internal_server_error:f},broad:{"request timestamp expired":g}},commonCurrencies:{CGLD:"CELO"},options:{fetchCurrencies:{expires:5e3},accounts:["wallet","fiat"]}})}},{key:"fetchTime",value:function(){var e=n(i.mark((function e(){var t,r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},e.next=3,this.publicGetTime(t);case 3:return r=e.sent,n=this.safeValue(r,"data",{}),e.abrupt("return",this.safeTimestamp(n,"epoch"));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchAccounts",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:{},e.next=3,this.loadMarkets();case 3:return r={limit:100},e.next=6,this.privateGetAccounts(this.extend(r,t));case 6:for(n=e.sent,a=this.safeValue(n,"data",[]),s=[],o=0;o<a.length;o++)u=a[o],c=this.safeValue(u,"currency",{}),d=this.safeString(c,"code"),h=this.safeCurrencyCode(d),s.push({id:this.safeString(u,"id"),type:this.safeString(u,"type"),code:h,info:u});return e.abrupt("return",s);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createDepositAddress",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=l.length>1&&void 0!==l[1]?l[1]:{},n=this.safeString(r,"account_id"),r=this.omit(r,"account_id"),void 0!==n){e.next=15;break}return e.next=6,this.loadAccounts();case 6:a=0;case 7:if(!(a<this.accounts.length)){e.next=15;break}if((s=this.accounts[a]).code!==t||"wallet"!==s.type){e.next=12;break}return n=s.id,e.abrupt("break",15);case 12:a++,e.next=7;break;case 15:if(void 0!==n){e.next=17;break}throw new f(this.id+" createDepositAddress could not find the account with matching currency code, specify an `account_id` extra param");case 17:return o={account_id:n},e.next=20,this.privatePostAccountsAccountIdAddresses(this.extend(o,r));case 20:return u=e.sent,c=this.safeValue(u,"data",{}),d=this.safeString(c,"destination_tag"),h=this.safeString(c,"address"),e.abrupt("return",{currency:t,tag:d,address:h,info:u});case 25:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchMySells",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u.length>0&&void 0!==u[0]?u[0]:void 0,t=u.length>1&&void 0!==u[1]?u[1]:void 0,r=u.length>2&&void 0!==u[2]?u[2]:void 0,n=u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.prepareAccountRequest(r,n);case 6:return a=e.sent,e.next=9,this.loadMarkets();case 9:return s=this.omit(n,["account_id","accountId"]),e.next=12,this.privateGetAccountsAccountIdSells(this.extend(a,s));case 12:return o=e.sent,e.abrupt("return",this.parseTrades(o.data,void 0,t,r));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMyBuys",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u.length>0&&void 0!==u[0]?u[0]:void 0,t=u.length>1&&void 0!==u[1]?u[1]:void 0,r=u.length>2&&void 0!==u[2]?u[2]:void 0,n=u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.prepareAccountRequest(r,n);case 6:return a=e.sent,e.next=9,this.loadMarkets();case 9:return s=this.omit(n,["account_id","accountId"]),e.next=12,this.privateGetAccountsAccountIdBuys(this.extend(a,s));case 12:return o=e.sent,e.abrupt("return",this.parseTrades(o.data,void 0,t,r));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTransactionsWithMethod",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:void 0,s=d.length>4&&void 0!==d[4]?d[4]:{},e.next=6,this.prepareAccountRequestWithCurrencyCode(r,a,s);case 6:return o=e.sent,e.next=9,this.loadMarkets();case 9:return u=this.omit(s,["account_id","accountId"]),e.next=12,this[t](this.extend(o,u));case 12:return c=e.sent,e.abrupt("return",this.parseTransactions(c.data,void 0,n,a));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchWithdrawals",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:void 0,n=s.length>2&&void 0!==s[2]?s[2]:void 0,a=s.length>3&&void 0!==s[3]?s[3]:{},e.next=6,this.fetchTransactionsWithMethod("privateGetAccountsAccountIdWithdrawals",t,r,n,a);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchDeposits",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:void 0,n=s.length>2&&void 0!==s[2]?s[2]:void 0,a=s.length>3&&void 0!==s[3]?s[3]:{},e.next=6,this.fetchTransactionsWithMethod("privateGetAccountsAccountIdDeposits",t,r,n,a);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTransactionStatus",value:function(e){return this.safeString({created:"pending",completed:"ok",canceled:"canceled"},e,e)}},{key:"parseTransaction",value:function(e){var t=this.safeValue(e,"subtotal",{}),r=this.safeValue(e,"fee",{}),i=this.safeString(e,"id"),n=this.parse8601(this.safeValue(e,"created_at")),a=this.parse8601(this.safeValue(e,"updated_at")),s=this.safeString(e,"resource"),o=this.safeNumber(t,"amount"),u=this.safeString(t,"currency"),c=this.safeCurrencyCode(u),d=this.safeNumber(r,"amount"),h=this.safeString(r,"currency"),l=this.safeCurrencyCode(h),f={cost:d,currency:l},p=this.parseTransactionStatus(this.safeString(e,"status"));if(void 0===p){var v=this.safeValue(e,"committed");p=v?"ok":"pending"}return{info:e,id:i,txid:i,timestamp:n,datetime:this.iso8601(n),address:void 0,tag:void 0,type:s,amount:o,currency:c,status:p,updated:a,fee:f}}},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0,i=this.safeValue(e,"total",{}),n=this.safeValue(e,"amount",{}),a=this.safeValue(e,"subtotal",{}),s=this.safeValue(e,"fee",{}),o=this.safeString(e,"id"),u=this.parse8601(this.safeValue(e,"created_at"));if(void 0===t){var c=this.safeString(n,"currency"),d=this.safeString(i,"currency");if(void 0!==c&&void 0!==d){var h=this.safeCurrencyCode(c),l=this.safeCurrencyCode(d);r=h+"/"+l}}var f=void 0,p=this.safeString(e,"resource"),v=void 0,m=this.safeString(a,"amount"),g=this.safeString(n,"amount"),b=this.parseNumber(m),x=this.parseNumber(g),k=this.parseNumber(y.stringDiv(m,g)),w=this.safeNumber(s,"amount"),_=this.safeString(s,"currency"),S=this.safeCurrencyCode(_),O={cost:w,currency:S};return{info:e,id:o,order:f,timestamp:u,datetime:this.iso8601(u),symbol:r,type:v,side:p,takerOrMaker:void 0,price:k,amount:x,cost:b,fee:O}}},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p,v,m,g,y,b,x=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=x.length>0&&void 0!==x[0]?x[0]:{},e.next=3,this.fetchCurrenciesFromCache(t);case 3:for(r=e.sent,n=this.safeValue(r,"currencies",{}),a=this.safeValue(r,"exchangeRates",{}),s=this.safeValue(n,"data",[]),o=this.indexBy(s,"id"),u=this.safeValue(this.safeValue(a,"data",{}),"rates",{}),c=Object.keys(u),d=[],h=0;h<c.length;h++)if(l=c[h],f=this.safeCurrencyCode(l),"crypto"===(l in o?"fiat":"crypto"))for(p=0;p<s.length;p++)v=s[p],m=this.safeString(v,"id"),g=this.safeCurrencyCode(m),y=f+"/"+g,b=l+"-"+m,d.push({id:b,symbol:y,base:f,quote:g,baseId:l,quoteId:m,active:void 0,info:v,precision:{amount:void 0,price:void 0},limits:{amount:{min:void 0,max:void 0},price:{min:void 0,max:void 0},cost:{min:this.safeNumber(v,"min_size"),max:void 0}}});return e.abrupt("return",d);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchCurrenciesFromCache",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=c.length>0&&void 0!==c[0]?c[0]:{},r=this.safeValue(this.options,"fetchCurrencies",{}),n=this.safeInteger(r,"timestamp"),a=this.safeInteger(r,"expires",1e3),s=this.milliseconds(),!(void 0===n||s-n>a)){e.next=13;break}return e.next=8,this.publicGetCurrencies(t);case 8:return o=e.sent,e.next=11,this.publicGetExchangeRates(t);case 11:u=e.sent,this.options.fetchCurrencies=this.extend(r,{currencies:o,exchangeRates:u,timestamp:s});case 13:return e.abrupt("return",this.safeValue(this.options,"fetchCurrencies",{}));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchCurrencies",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p,v,m,g,y=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=y.length>0&&void 0!==y[0]?y[0]:{},e.next=3,this.fetchCurrenciesFromCache(t);case 3:for(r=e.sent,n=this.safeValue(r,"currencies",{}),a=this.safeValue(r,"exchangeRates",{}),s=this.safeValue(n,"data",[]),o=this.indexBy(s,"id"),u=this.safeValue(this.safeValue(a,"data",{}),"rates",{}),c=Object.keys(u),d={},h=0;h<c.length;h++)l=c[h],f=l in o?"fiat":"crypto",p=this.safeValue(o,l,{}),v=this.safeString(p,"id",l),m=this.safeString(p,"name"),g=this.safeCurrencyCode(v),d[g]={id:v,code:g,info:p,type:f,name:m,active:!0,fee:void 0,precision:void 0,limits:{amount:{min:this.safeNumber(p,"min_size"),max:void 0},withdraw:{min:void 0,max:void 0}}};return e.abrupt("return",d);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=f.length>1&&void 0!==f[1]?f[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.seconds(),a=this.market(t),s=this.extend({symbol:a.id},r),e.next=8,this.publicGetPricesSymbolBuy(s);case 8:return o=e.sent,e.next=11,this.publicGetPricesSymbolSell(s);case 11:return u=e.sent,e.next=14,this.publicGetPricesSymbolSpot(s);case 14:return c=e.sent,d=this.safeNumber(o.data,"amount"),h=this.safeNumber(u.data,"amount"),l=this.safeNumber(c.data,"amount"),e.abrupt("return",{symbol:t,timestamp:n,datetime:this.iso8601(n),bid:h,ask:d,last:l,high:void 0,low:void 0,bidVolume:void 0,askVolume:void 0,vwap:void 0,open:void 0,close:l,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:void 0,quoteVolume:void 0,info:{buy:o,sell:u,spot:c}});case 19:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p,v,m=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=m.length>0&&void 0!==m[0]?m[0]:{},e.next=3,this.loadMarkets();case 3:return r={limit:100},e.next=6,this.privateGetAccounts(this.extend(r,t));case 6:for(n=e.sent,a=this.safeValue(n,"data"),s=this.safeValue(t,"type",this.options.accounts),o={info:n},u=0;u<a.length;u++)c=a[u],this.inArray(c.type,s)&&(d=this.safeString(c.balance,"currency"),h=this.safeCurrencyCode(d),l=this.safeNumber(c.balance,"amount"),f=l,p=void 0,h in o?(o[h].free=this.sum(o[h].free,l),o[h].total=this.sum(o[h].total,l)):(v={free:f,used:p,total:l},o[h]=v));return e.abrupt("return",this.parseBalance(o));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchLedger",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return s=void 0,void 0!==t&&(s=this.currency(t)),e.next=10,this.prepareAccountRequestWithCurrencyCode(t,n,a);case 10:return o=e.sent,u=this.omit(a,["account_id","accountId"]),e.next=14,this.privateGetAccountsAccountIdTransactions(this.extend(o,u));case 14:return c=e.sent,e.abrupt("return",this.parseLedger(c.data,s,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseLedgerEntryStatus",value:function(e){return this.safeString({completed:"ok"},e,e)}},{key:"parseLedgerEntryType",value:function(e){return this.safeString({buy:"trade",sell:"trade",fiat_deposit:"transaction",fiat_withdrawal:"transaction",exchange_deposit:"transaction",exchange_withdrawal:"transaction",send:"transaction",pro_deposit:"transaction",pro_withdrawal:"transaction"},e,e)}},{key:"parseLedgerEntry",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeValue(e,"amount",{}),i=this.safeNumber(r,"amount"),n=void 0;i<0?(n="out",i=-i):n="in";var a=this.safeString(r,"currency"),s=this.safeCurrencyCode(a,t),o=void 0,u=this.safeValue(e,"network",{}),c=this.safeValue(u,"transaction_fee");if(void 0!==c){var d=this.safeString(c,"currency"),h=this.safeCurrencyCode(d,t),l=this.safeNumber(c,"amount");o={cost:l,currency:h}}var f=this.parse8601(this.safeValue(e,"created_at")),p=this.safeString(e,"id"),v=this.parseLedgerEntryType(this.safeString(e,"type")),m=this.parseLedgerEntryStatus(this.safeString(e,"status")),g=this.safeString(e,"resource_path"),y=void 0;if(void 0!==g){var b=g.split("/"),x=b.length;x>3&&(y=b[3])}return{info:e,id:p,timestamp:f,datetime:this.iso8601(f),direction:n,account:y,referenceId:void 0,referenceAccount:void 0,type:v,currency:s,amount:i,before:void 0,after:void 0,status:m,fee:o}}},{key:"findAccountId",value:function(){var e=n(i.mark((function e(t){var r,n;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadMarkets();case 2:return e.next=4,this.loadAccounts();case 4:r=0;case 5:if(!(r<this.accounts.length)){e.next=12;break}if((n=this.accounts[r]).code!==t){e.next=9;break}return e.abrupt("return",n.id);case 9:r++,e.next=5;break;case 12:return e.abrupt("return",void 0);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"prepareAccountRequest",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.safeString2(t,"account_id","accountId");if(void 0===r)throw new p(this.id+" method requires an account_id (or accountId) parameter");var i={account_id:r};return void 0!==e&&(i.limit=e),i}},{key:"prepareAccountRequestWithCurrencyCode",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:{},void 0!==(a=this.safeString2(n,"account_id","accountId"))){e.next=12;break}if(void 0!==t){e.next=7;break}throw new p(this.id+" method requires an account_id (or accountId) parameter OR a currency code argument");case 7:return e.next=9,this.findAccountId(t);case 9:if(void 0!==(a=e.sent)){e.next=12;break}throw new f(this.id+" could not find account id for "+t);case 12:return s={account_id:a},void 0!==r&&(s.limit=r),e.abrupt("return",s);case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s="/"+this.version+"/"+this.implodeParams(e,i),o=this.omit(i,this.extractParams(e));"GET"===r&&Object.keys(o).length&&(s+="?"+this.urlencode(o));var u=this.urls.api+s;if("private"===t){this.checkRequiredCredentials();var c=this.nonce().toString(),d="";"GET"!==r&&Object.keys(o).length&&(d=a=this.json(o));var h=c+r+s+d,l=this.hmac(this.encode(h),this.encode(this.secret));n={"CB-ACCESS-KEY":this.apiKey,"CB-ACCESS-SIGN":l,"CB-ACCESS-TIMESTAMP":c,"Content-Type":"application/json"}}return{url:u,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,u){if(void 0!==s){var c=this.id+" "+a,d=this.safeString(s,"error");if(void 0!==d){var h=this.safeString(s,"error_description");throw this.throwExactlyMatchedException(this.exceptions.exact,d,c),this.throwBroadlyMatchedException(this.exceptions.broad,h,c),new f(c)}var l=this.safeValue(s,"errors");if(void 0!==l)if(Array.isArray(l))if(l.length>0){d=this.safeString(l[0],"id");var p=this.safeString(l[0],"message");if(void 0!==d)throw this.throwExactlyMatchedException(this.exceptions.exact,d,c),this.throwBroadlyMatchedException(this.exceptions.broad,p,c),new f(c)}if(void 0===this.safeValue(s,"data"))throw new f(this.id+" failed due to a malformed response "+this.json(s))}}}]),r}(h)},function(e,t,r){"use strict";var i=r(1),n=r(2),a=r(6),s=r(3),o=r(4),u=r(5),c=r(164);e.exports=function(e){o(r,e);var t=u(r);function r(){return i(this,r),t.apply(this,arguments)}return n(r,[{key:"describe",value:function(){return this.deepExtend(a(s(r.prototype),"describe",this).call(this),{id:"coinbaseprime",name:"Coinbase Prime",pro:!0,hostname:"prime.coinbase.com",urls:{test:{public:"https://api-public.sandbox.prime.coinbase.com",private:"https://api-public.sandbox.prime.coinbase.com"},logo:"https://user-images.githubusercontent.com/1294454/44539184-29f26e00-a70c-11e8-868f-e907fc236a7c.jpg",api:{public:"https://api.{hostname}",private:"https://api.{hostname}"},www:"https://prime.coinbase.com",doc:"https://docs.prime.coinbase.com",fees:"https://support.prime.coinbase.com/customer/en/portal/articles/2945629-fees?b_id=17475"}})}}]),r}(c)},function(e,t,r){"use strict";var i=r(7),n=r(8),a=r(1),s=r(2),o=r(6),u=r(3),c=r(4),d=r(5),h=r(11),l=r(10),f=l.BadSymbol,p=l.ExchangeError,v=r(12);e.exports=function(e){c(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(u(r.prototype),"describe",this).call(this),{id:"coincheck",name:"coincheck",countries:["JP","ID"],rateLimit:1500,has:{cancelOrder:!0,CORS:!1,createOrder:!0,fetchBalance:!0,fetchMyTrades:!0,fetchOrderBook:!0,fetchOpenOrders:!0,fetchTicker:!0,fetchTrades:!0},urls:{logo:"https://user-images.githubusercontent.com/51840849/87182088-1d6d6380-c2ec-11ea-9c64-8ab9f9b289f5.jpg",api:"https://coincheck.com/api",www:"https://coincheck.com",doc:"https://coincheck.com/documents/exchange/api",fees:["https://coincheck.com/exchange/fee","https://coincheck.com/info/fee"]},api:{public:{get:["exchange/orders/rate","order_books","rate/{pair}","ticker","trades"]},private:{get:["accounts","accounts/balance","accounts/leverage_balance","bank_accounts","deposit_money","exchange/orders/opens","exchange/orders/transactions","exchange/orders/transactions_pagination","exchange/leverage/positions","lending/borrows/matches","send_money","withdraws"],post:["bank_accounts","deposit_money/{id}/fast","exchange/orders","exchange/transfers/to_leverage","exchange/transfers/from_leverage","lending/borrows","lending/borrows/{id}/repay","send_money","withdraws"],delete:["bank_accounts/{id}","exchange/orders/{id}","withdraws/{id}"]}},markets:{"BTC/JPY":{id:"btc_jpy",symbol:"BTC/JPY",base:"BTC",quote:"JPY",baseId:"btc",quoteId:"jpy"},"ETC/JPY":{id:"etc_jpy",symbol:"ETC/JPY",base:"ETC",quote:"JPY",baseId:"etc",quoteId:"jpy"},"FCT/JPY":{id:"fct_jpy",symbol:"FCT/JPY",base:"FCT",quote:"JPY",baseId:"fct",quoteId:"jpy"},"MONA/JPY":{id:"mona_jpy",symbol:"MONA/JPY",base:"MONA",quote:"JPY",baseId:"mona",quoteId:"jpy"},"ETC/BTC":{id:"etc_btc",symbol:"ETC/BTC",base:"ETC",quote:"BTC",baseId:"etc",quoteId:"btc"}},fees:{trading:{tierBased:!1,percentage:!0,maker:0,taker:0}}})}},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetAccountsBalance(t);case 5:for(r=e.sent,n={info:r},a=Object.keys(this.currencies),s=0;s<a.length;s++)o=a[s],(u=this.currencyId(o))in r&&(c=this.account(),d=u+"_reserved",c.free=this.safeString(r,u),c.used=this.safeString(r,d),n[o]=c);return e.abrupt("return",this.parseBalance(n,!1));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:void 0,r=l.length>1&&void 0!==l[1]?l[1]:void 0,n=l.length>2&&void 0!==l[2]?l[2]:void 0,a=l.length>3&&void 0!==l[3]?l[3]:{},e.next=6,this.loadMarkets();case 6:return s=void 0,void 0!==t&&(s=this.market(t)),e.next=10,this.privateGetExchangeOrdersOpens(a);case 10:for(o=e.sent,u=this.safeValue(o,"orders",[]),c=this.parseOrders(u,s,r,n),d=[],h=0;h<c.length;h++)d.push(this.extend(c[h],{status:"open"}));return e.abrupt("return",d);case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),i=this.safeString(e,"order_type"),n=this.parse8601(this.safeString(e,"created_at")),a=this.safeNumber(e,"pending_amount"),s=this.safeNumber(e,"pending_amount"),o=this.safeNumber(e,"rate"),u=void 0,c=this.safeString(e,"pair"),d=this.safeSymbol(c,t,"_");return this.safeOrder({id:r,clientOrderId:void 0,timestamp:n,datetime:this.iso8601(n),lastTradeTimestamp:void 0,amount:a,remaining:s,filled:void 0,side:i,type:void 0,timeInForce:void 0,postOnly:void 0,status:u,symbol:d,price:o,stopPrice:void 0,cost:void 0,fee:void 0,info:e,average:void 0,trades:void 0})}},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.length>1&&void 0!==o[1]?o[1]:void 0,r=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return n=this.market(t),a={pair:n.id},e.next=8,this.publicGetOrderBooks(this.extend(a,r));case 8:return s=e.sent,e.abrupt("return",this.parseOrderBook(s));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=c.length>1&&void 0!==c[1]?c[1]:{},"BTC/JPY"===t){e.next=3;break}throw new f(this.id+" fetchTicker () supports BTC/JPY only");case 3:return e.next=5,this.loadMarkets();case 5:return n=this.market(t),a={pair:n.id},e.next=9,this.publicGetTicker(this.extend(a,r));case 9:return s=e.sent,o=this.safeTimestamp(s,"timestamp"),u=this.safeNumber(s,"last"),e.abrupt("return",{symbol:t,timestamp:o,datetime:this.iso8601(o),high:this.safeNumber(s,"high"),low:this.safeNumber(s,"low"),bid:this.safeNumber(s,"bid"),bidVolume:void 0,ask:this.safeNumber(s,"ask"),askVolume:void 0,vwap:void 0,open:void 0,close:u,last:u,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeNumber(s,"volume"),quoteVolume:void 0,info:s});case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.parse8601(this.safeString(e,"created_at")),i=this.safeString(e,"id"),n=this.safeString(e,"rate"),a=this.safeString(e,"pair");t=this.safeValue(this.markets_by_id,a,t);var s=void 0,o=void 0,u=void 0;if(void 0!==a)if(a in this.markets_by_id)o=(t=this.markets_by_id[a]).baseId,u=t.quoteId,s=t.symbol;else{var c=a.split("_");o=c[0],u=c[1];var d=this.safeCurrencyCode(o),h=this.safeCurrencyCode(u);s=d+"/"+h}void 0===s&&void 0!==t&&(s=t.symbol);var l=void 0,f=void 0,p=void 0,m=void 0,g=void 0,y=void 0;if("liquidity"in e){"T"===this.safeString(e,"liquidity")?l="taker":"M"===this.safeString(e,"liquidity")&&(l="maker");var b=this.safeValue(e,"funds",{});f=this.safeString(b,o),p=this.safeNumber(b,u),g={currency:this.safeString(e,"fee_currency"),cost:this.safeNumber(e,"fee")},m=this.safeString(e,"side"),y=this.safeString(e,"order_id")}else f=this.safeString(e,"amount"),m=this.safeString(e,"order_type");var x=this.parseNumber(n),k=this.parseNumber(f);return void 0===p&&(p=this.parseNumber(v.stringMul(n,f))),{id:i,info:e,datetime:this.iso8601(r),timestamp:r,symbol:s,type:void 0,side:m,order:y,takerOrMaker:l,price:x,amount:k,cost:p,fee:g}}},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:void 0,r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},e.next=6,this.loadMarkets();case 6:return s=this.market(t),e.next=9,this.privateGetExchangeOrdersTransactions(this.extend({},a));case 9:return o=e.sent,u=this.safeValue(o,"transactions",[]),e.abrupt("return",this.parseTrades(u,s,r,n));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={pair:s.id},void 0!==n&&(o.limit=n),e.next=10,this.publicGetTrades(this.extend(o,a));case 10:return u=e.sent,c=this.safeValue(u,"data",[]),e.abrupt("return",this.parseTrades(c,s,r,n));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,u,c,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=l.length>4&&void 0!==l[4]?l[4]:void 0,o=l.length>5&&void 0!==l[5]?l[5]:{},e.next=4,this.loadMarkets();case 4:return u={pair:this.marketId(t)},"market"===r?(c=r+"_"+n,u.order_type=c,u[("buy"===n?c+"_":"")+"amount"]=a):(u.order_type=n,u.rate=s,u.amount=a),e.next=8,this.privatePostExchangeOrders(this.extend(u,o));case 8:return d=e.sent,h=this.safeString(d,"id"),e.abrupt("return",{info:d,id:h});case 11:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:{},n={id:t},e.next=5,this.privateDeleteExchangeOrdersId(this.extend(n,r));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"nonce",value:function(){return this.milliseconds()}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.urls.api+"/"+this.implodeParams(e,i),o=this.omit(i,this.extractParams(e));if("public"===t)Object.keys(o).length&&(s+="?"+this.urlencode(o));else{this.checkRequiredCredentials();var u=this.nonce().toString(),c="";"GET"===r?Object.keys(o).length&&(s+="?"+this.urlencode(this.keysort(o))):Object.keys(o).length&&(c=a=this.urlencode(this.keysort(o)));var d=u+s+c;n={"Content-Type":"application/x-www-form-urlencoded","ACCESS-KEY":this.apiKey,"ACCESS-NONCE":u,"ACCESS-SIGNATURE":this.hmac(this.encode(d),this.encode(this.secret))}}return{url:s,method:r,body:a,headers:n}}},{key:"request",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:"public",n=c.length>2&&void 0!==c[2]?c[2]:"GET",a=c.length>3&&void 0!==c[3]?c[3]:{},s=c.length>4&&void 0!==c[4]?c[4]:void 0,o=c.length>5&&void 0!==c[5]?c[5]:void 0,e.next=7,this.fetch2(t,r,n,a,s,o);case 7:if(u=e.sent,"public"!==r){e.next=10;break}return e.abrupt("return",u);case 10:if(!("success"in u)){e.next=13;break}if(!u.success){e.next=13;break}return e.abrupt("return",u);case 13:throw new p(this.id+" "+this.json(u));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(h)},function(e,t,r){"use strict";var i=r(21),n=r(7),a=r(8),s=r(1),o=r(2),u=r(6),c=r(3),d=r(4),h=r(5),l=r(11),f=r(10),p=f.ExchangeError,v=f.AuthenticationError,m=f.InvalidNonce,g=f.InsufficientFunds,y=f.InvalidOrder,b=f.OrderNotFound,x=f.DDoSProtection,k=r(12);e.exports=function(e){d(r,e);var t=h(r);function r(){return s(this,r),t.apply(this,arguments)}return o(r,[{key:"describe",value:function(){return this.deepExtend(u(c(r.prototype),"describe",this).call(this),{id:"coinegg",name:"CoinEgg",countries:["CN","UK"],has:{cancelOrder:!0,createOrder:!0,fetchBalance:!0,fetchMarkets:!0,fetchMyTrades:!1,fetchOpenOrders:"emulated",fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchTicker:!0,fetchTickers:!1,fetchTrades:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/36770310-adfa764e-1c5a-11e8-8e09-449daac3d2fb.jpg",api:{web:"https://trade.coinegg.com/web",rest:"https://api.coinegg.com/api/v1"},www:"https://www.coinegg.com",doc:"https://www.coinegg.com/explain.api.html",fees:"https://www.coinegg.com/fee.html",referral:"https://www.coinegg.com/user/register?invite=523218"},api:{web:{get:["symbol/ticker?right_coin={quote}","{quote}/trends","{quote}/{base}/order","{quote}/{base}/trades","{quote}/{base}/depth.js"]},public:{get:["ticker/region/{quote}","depth/region/{quote}","orders/region/{quote}"]},private:{post:["balance","trade_add/region/{quote}","trade_cancel/region/{quote}","trade_view/region/{quote}","trade_list/region/{quote}"]}},fees:{trading:{maker:.001,taker:.001},funding:{withdraw:{BTC:.008,BCH:.002,LTC:.001,ETH:.01,ETC:.01,NEO:0,QTUM:"1%",XRP:"1%",DOGE:"1%",LSK:"1%",XAS:"1%",BTS:"1%",GAME:"1%",GOOC:"1%",NXT:"1%",IFC:"1%",DNC:"1%",BLK:"1%",VRC:"1%",XPM:"1%",VTC:"1%",TFC:"1%",PLC:"1%",EAC:"1%",PPC:"1%",FZ:"1%",ZET:"1%",RSS:"1%",PGC:"1%",SKT:"1%",JBC:"1%",RIO:"1%",LKC:"1%",ZCC:"1%",MCC:"1%",QEC:"1%",MET:"1%",YTC:"1%",HLB:"1%",MRYC:"1%",MTC:"1%",KTC:0}}},exceptions:{103:v,104:v,105:v,106:m,200:g,201:y,202:y,203:b,402:x},errorMessages:{100:"Required parameters can not be empty",101:"Illegal parameter",102:"coin does not exist",103:"Key does not exist",104:"Signature does not match",105:"Insufficient permissions",106:"Request expired(nonce error)",200:"Lack of balance",201:"Too small for the number of trading",202:"Price must be in 0 - 1000000",203:"Order does not exist",204:"Pending order amount must be above 0.001 BTC",205:"Restrict pending order prices",206:"Decimal place error",401:"System error",402:"Requests are too frequent",403:"Non-open API",404:"IP restriction does not request the resource",405:"Currency transactions are temporarily closed"},options:{quoteIds:["btc","eth","usc","usdt"]},commonCurrencies:{JBC:"JubaoCoin",SBTC:"Super Bitcoin"}})}},{key:"fetchMarkets",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,u,c,d,h,l,f,p,v,m=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m.length>0&&void 0!==m[0]?m[0]:{},t=this.options.quoteIds,r=[],i=0;case 4:if(!(i<t.length)){e.next=14;break}return a=t[i],e.next=8,this.webGetSymbolTickerRightCoinQuote({quote:a});case 8:for(s=e.sent,o=this.safeValue(s,"data",[]),u=0;u<o.length;u++)c=o[u],d=c.symbol,h=d.split("_")[0],l=h.toUpperCase(),f=a.toUpperCase(),l=this.safeCurrencyCode(l),f=this.safeCurrencyCode(f),p=l+"/"+f,v={amount:8,price:8},r.push({id:d,symbol:p,base:l,quote:f,baseId:h,quoteId:a,active:!0,precision:v,limits:{amount:{min:Math.pow(10,-v.amount),max:Math.pow(10,v.amount)},price:{min:Math.pow(10,-v.price),max:Math.pow(10,v.price)},cost:{min:void 0,max:void 0}},info:c});case 11:i++,e.next=4;break;case 14:return e.abrupt("return",r);case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=t.symbol,i=this.milliseconds(),n=this.safeNumber(e,"last"),a=this.safeNumber(e,"change"),s=void 0,o=void 0,u=void 0;if(void 0!==a){var c=a/100;o=n-(s=n/this.sum(1,c)),u=this.sum(n,s)/2}return{symbol:r,timestamp:i,datetime:this.iso8601(i),high:this.safeNumber(e,"high"),low:this.safeNumber(e,"low"),bid:this.safeNumber(e,"buy"),bidVolume:void 0,ask:this.safeNumber(e,"sell"),askVolume:void 0,vwap:void 0,open:s,close:n,last:n,previousClose:void 0,change:o,percentage:a,average:u,baseVolume:this.safeNumber(e,"vol"),quoteVolume:this.safeNumber(e,"quoteVol"),info:e}}},{key:"fetchTicker",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return i=this.market(t),a={coin:i.baseId,quote:i.quoteId},e.next=7,this.publicGetTickerRegionQuote(this.extend(a,r));case 7:return s=e.sent,e.abrupt("return",this.parseTicker(s,i));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.length>1&&void 0!==o[1]?o[1]:void 0,r=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return i=this.market(t),a={coin:i.baseId,quote:i.quoteId},e.next=8,this.publicGetDepthRegionQuote(this.extend(a,r));case 8:return s=e.sent,e.abrupt("return",this.parseOrderBook(s));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeTimestamp(e,"date"),i=this.safeString(e,"price"),n=this.safeString(e,"amount"),a=this.parseNumber(i),s=this.parseNumber(n),o=this.parseNumber(k.stringMul(i,n)),u=t.symbol,c="limit",d=this.safeString(e,"type"),h=this.safeString(e,"tid");return{id:h,info:e,timestamp:r,datetime:this.iso8601(r),symbol:u,order:void 0,type:c,side:d,takerOrMaker:void 0,price:a,amount:s,cost:o,fee:void 0}}},{key:"fetchTrades",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,u,c=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,i=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={coin:s.baseId,quote:s.quoteId},e.next=9,this.publicGetOrdersRegionQuote(this.extend(o,a));case 9:return u=e.sent,e.abrupt("return",this.parseTrades(u,s,r,i));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=a(n.mark((function e(){var t,r,a,s,o,u,c,d,h,l,f,p,v,m,g=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=g.length>0&&void 0!==g[0]?g[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privatePostBalance(t);case 5:for(r=e.sent,a={info:r},s=this.safeValue(r,"data",{}),o=this.omit(s,"uid"),u=Object.keys(o),c=0;c<u.length;c++)d=u[c],h=d.split("_"),l=i(h,2),f=l[0],p=l[1],(v=this.safeCurrencyCode(f))in a||(a[v]=this.account()),m="lock"===p?"used":"free",a[v][m]=this.safeString(o,d);return e.abrupt("return",this.parseBalance(a,!1));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0;void 0!==t&&(r=t.symbol);var i=this.parse8601(this.safeString(e,"datetime")),n=this.safeNumber(e,"price"),a=this.safeNumber(e,"amount_original"),s=this.safeNumber(e,"amount_outstanding"),o=this.safeString(e,"status");o="cancelled"===o?"canceled":s?"open":"closed";var u=this.safeValue(e,"info",e),c="limit",d=this.safeString(e,"type"),h=this.safeString(e,"id");return this.safeOrder({id:h,clientOrderId:void 0,datetime:this.iso8601(i),timestamp:i,lastTradeTimestamp:void 0,status:o,symbol:r,type:c,timeInForce:void 0,postOnly:void 0,side:d,price:n,stopPrice:void 0,cost:void 0,amount:a,filled:void 0,remaining:s,trades:void 0,fee:void 0,info:u,average:void 0})}},{key:"createOrder",value:function(){var e=a(n.mark((function e(t,r,i,a){var s,o,u,c,d,h,l,f=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=f.length>4&&void 0!==f[4]?f[4]:void 0,o=f.length>5&&void 0!==f[5]?f[5]:{},e.next=4,this.loadMarkets();case 4:return u=this.market(t),c={coin:u.baseId,quote:u.quoteId,type:i,amount:a,price:s},e.next=8,this.privatePostTradeAddRegionQuote(this.extend(c,o));case 8:return d=e.sent,h=this.safeString(d,"id"),l=this.parseOrder({id:h,datetime:this.ymdhms(this.milliseconds()),amount_original:a,amount_outstanding:a,price:s,type:i,info:d},u),e.abrupt("return",l);case 12:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:void 0,i=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return a=this.market(r),s={id:t,coin:a.baseId,quote:a.quoteId},e.next=8,this.privatePostTradeCancelRegionQuote(this.extend(s,i));case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,u,c=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,i=c.length>2&&void 0!==c[2]?c[2]:{},e.next=4,this.loadMarkets();case 4:return a=this.market(r),s={id:t,coin:a.baseId,quote:a.quoteId},e.next=8,this.privatePostTradeViewRegionQuote(this.extend(s,i));case 8:return o=e.sent,u=this.safeValue(o,"data"),e.abrupt("return",this.parseOrder(u,a));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrders",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,u,c,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,i=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return s=this.market(t),o={coin:s.baseId,quote:s.quoteId},void 0!==r&&(o.since=r/1e3),e.next=11,this.privatePostTradeListRegionQuote(this.extend(o,a));case 11:return u=e.sent,c=this.safeValue(u,"data",[]),e.abrupt("return",this.parseOrders(c,s,r,i));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,i=o.length>2&&void 0!==o[2]?o[2]:void 0,a=o.length>3&&void 0!==o[3]?o[3]:{},s={type:"open"},e.next=7,this.fetchOrders(t,r,i,this.extend(s,a));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"nonce",value:function(){return this.milliseconds()}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s="rest";"web"===t&&(s=t);var o=this.urls.api[s]+"/"+this.implodeParams(e,i),u=this.omit(i,this.extractParams(e));if("public"===t||"web"===t)Object.keys(u).length&&(o+="?"+this.urlencode(u));else{this.checkRequiredCredentials(),u=this.urlencode(this.extend({key:this.apiKey,nonce:this.nonce()},u));var c=this.hash(this.encode(this.secret)),d=this.hmac(this.encode(u),this.encode(c));u+="&signature="+d,"GET"===r?o+="?"+u:(n={"Content-type":"application/x-www-form-urlencoded"},a=u)}return{url:o,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,u){if(void 0!==s){var c=this.safeValue(s,"result");if(void 0!==c&&!0!==c){var d=this.safeString(s,"code"),h=this.errorMessages,l=this.safeString(h,d,"Unknown Error"),f=this.id+" "+l;throw this.throwExactlyMatchedException(this.exceptions,d,f),new p(this.id+" "+l)}}}}]),r}(l)},function(e,t,r){"use strict";var i=r(7),n=r(8),a=r(1),s=r(2),o=r(6),u=r(3),c=r(4),d=r(5),h=r(11),l=r(10),f=l.ExchangeError,p=l.ArgumentsRequired,v=l.InsufficientFunds,m=l.OrderNotFound,g=l.InvalidOrder,y=l.AuthenticationError,b=r(12);e.exports=function(e){c(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(u(r.prototype),"describe",this).call(this),{id:"coinex",name:"CoinEx",version:"v1",countries:["CN"],rateLimit:1e3,has:{cancelOrder:!0,createOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchDeposits:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,fetchWithdrawals:!0,withdraw:!0},timeframes:{"1m":"1min","3m":"3min","5m":"5min","15m":"15min","30m":"30min","1h":"1hour","2h":"2hour","4h":"4hour","6h":"6hour","12h":"12hour","1d":"1day","3d":"3day","1w":"1week"},urls:{logo:"https://user-images.githubusercontent.com/51840849/87182089-1e05fa00-c2ec-11ea-8da9-cc73b45abbbc.jpg",api:"https://api.coinex.com",www:"https://www.coinex.com",doc:"https://github.com/coinexcom/coinex_exchange_api/wiki",fees:"https://www.coinex.com/fees",referral:"https://www.coinex.com/register?refer_code=yw5fz"},api:{public:{get:["common/currency/rate","common/asset/config","market/info","market/list","market/ticker","market/ticker/all","market/depth","market/deals","market/kline"]},private:{get:["balance/coin/deposit","balance/coin/withdraw","balance/info","future/account","future/config","future/limitprice","future/loan/history","future/market","margin/account","margin/config","margin/loan/history","margin/market","order","order/deals","order/finished","order/finished/{id}","order/pending","order/status","order/status/batch","order/user/deals","sub_account/balance","sub_account/transfer/history"],post:["balance/coin/withdraw","future/flat","future/loan","future/transfer","margin/flat","margin/loan","margin/transfer","order/batchlimit","order/ioc","order/limit","order/market","sub_account/transfer"],delete:["balance/coin/withdraw","order/pending/batch","order/pending"]}},fees:{trading:{maker:.001,taker:.001},funding:{withdraw:{BCH:0,BTC:.001,LTC:.001,ETH:.001,ZEC:1e-4,DASH:1e-4}}},limits:{amount:{min:.001,max:void 0}},precision:{amount:8,price:8},options:{createMarketBuyOrderRequiresPrice:!0}})}},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p,v,m,g,y,b=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=b.length>0&&void 0!==b[0]?b[0]:{},e.next=3,this.publicGetMarketInfo(t);case 3:for(r=e.sent,n=this.safeValue(r,"data",{}),a=[],s=Object.keys(n),o=0;o<s.length;o++)u=s[o],c=n[u],d=this.safeString(c,"name"),h=this.safeString(c,"trading_name"),l=h,f=this.safeString(c,"pricing_name"),p=this.safeCurrencyCode(l),v=this.safeCurrencyCode(f),m=p+"/"+v,h===d&&(m=d),g={amount:this.safeInteger(c,"trading_decimal"),price:this.safeInteger(c,"pricing_decimal")},y=void 0,a.push({id:d,symbol:m,base:p,quote:v,baseId:l,quoteId:f,active:y,taker:this.safeNumber(c,"taker_fee_rate"),maker:this.safeNumber(c,"maker_fee_rate"),info:c,precision:g,limits:{amount:{min:this.safeNumber(c,"min_amount"),max:void 0},price:{min:Math.pow(10,-g.price),max:void 0}}});return e.abrupt("return",a);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeInteger(e,"date"),i=void 0;void 0!==t&&(i=t.symbol),e=this.safeValue(e,"ticker",{});var n=this.safeNumber(e,"last");return{symbol:i,timestamp:r,datetime:this.iso8601(r),high:this.safeNumber(e,"high"),low:this.safeNumber(e,"low"),bid:this.safeNumber(e,"buy"),bidVolume:void 0,ask:this.safeNumber(e,"sell"),askVolume:void 0,vwap:void 0,open:void 0,close:n,last:n,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeNumber2(e,"vol","volume"),quoteVolume:void 0,info:e}}},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={market:n.id},e.next=7,this.publicGetMarketTicker(this.extend(a,r));case 7:return s=e.sent,e.abrupt("return",this.parseTicker(s.data,n));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p,v=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=v.length>0&&void 0!==v[0]?v[0]:void 0,r=v.length>1&&void 0!==v[1]?v[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetMarketTickerAll(r);case 6:for(n=e.sent,a=this.safeValue(n,"data"),s=this.safeInteger(a,"date"),o=this.safeValue(a,"ticker"),u=Object.keys(o),c={},d=0;d<u.length;d++)h=u[d],l=this.safeMarket(h),f=l.symbol,(p=this.parseTicker({date:s,ticker:o[h]},l)).symbol=f,c[f]=p;return e.abrupt("return",this.filterByArray(c,"symbol",t));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:20,n=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return void 0===r&&(r=20),a={market:this.marketId(t),merge:"0.0000000001",limit:r.toString()},e.next=8,this.publicGetMarketDepth(this.extend(a,n));case 8:return s=e.sent,e.abrupt("return",this.parseOrderBook(s.data));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeTimestamp(e,"create_time");void 0===r&&(r=this.safeInteger(e,"date_ms"));var i=this.safeString(e,"id"),n=this.safeString(e,"order_id"),a=this.safeString(e,"price"),s=this.safeString(e,"amount"),o=this.parseNumber(a),u=this.parseNumber(s),c=this.safeString(e,"market"),d=this.safeSymbol(c,t),h=this.safeNumber(e,"deal_money");void 0===h&&(h=this.parseNumber(b.stringMul(a,s)));var l=void 0,f=this.safeNumber(e,"fee");if(void 0!==f){var p=this.safeString(e,"fee_asset"),v=this.safeCurrencyCode(p);l={cost:f,currency:v}}var m=this.safeString(e,"role"),g=this.safeString(e,"type");return{info:e,timestamp:r,datetime:this.iso8601(r),symbol:d,id:i,order:n,type:void 0,side:g,takerOrMaker:m,price:o,amount:u,cost:h,fee:l}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={market:s.id},e.next=9,this.publicGetMarketDeals(this.extend(o,a));case 9:return u=e.sent,e.abrupt("return",this.parseTrades(u.data,s,r,n));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){return[this.safeTimestamp(e,0),this.safeNumber(e,1),this.safeNumber(e,3),this.safeNumber(e,4),this.safeNumber(e,2),this.safeNumber(e,5)]}},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:"5m",n=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:void 0,s=h.length>4&&void 0!==h[4]?h[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),u={market:o.id,type:this.timeframes[r]},void 0!==a&&(u.limit=a),e.next=11,this.publicGetMarketKline(this.extend(u,s));case 11:return c=e.sent,d=this.safeValue(c,"data",[]),e.abrupt("return",this.parseOHLCVs(d,o,r,n,a));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetBalanceInfo(t);case 5:for(r=e.sent,n={info:r},a=this.safeValue(r,"data"),s=Object.keys(a),o=0;o<s.length;o++)u=s[o],c=this.safeCurrencyCode(u),d=this.safeValue(a,u,{}),(h=this.account()).free=this.safeString(d,"available"),h.used=this.safeString(d,"frozen"),n[c]=h;return e.abrupt("return",this.parseBalance(n,!1));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({not_deal:"open",part_deal:"open",done:"closed",cancel:"canceled"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeTimestamp(e,"create_time"),i=this.safeNumber(e,"price"),n=this.safeNumber(e,"deal_money"),a=this.safeNumber(e,"amount"),s=this.safeNumber(e,"deal_amount"),o=this.safeNumber(e,"avg_price"),u=void 0,c=this.safeString(e,"market");t=this.safeMarket(c,t);var d=this.safeString(e,"fee_asset"),h=this.safeCurrencyCode(d);void 0!==t&&(u=t.symbol,void 0===h&&(h=t.quote));var l=this.safeNumber(e,"left"),f=this.parseOrderStatus(this.safeString(e,"status")),p=this.safeString(e,"order_type"),v=this.safeString(e,"type");return this.safeOrder({id:this.safeString(e,"id"),clientOrderId:void 0,datetime:this.iso8601(r),timestamp:r,lastTradeTimestamp:void 0,status:f,symbol:u,type:p,timeInForce:void 0,postOnly:void 0,side:v,price:i,stopPrice:void 0,cost:n,average:o,amount:a,filled:s,remaining:l,trades:void 0,fee:{currency:h,cost:this.safeNumber(e,"deal_fee")},info:e})}},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,u,c,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=f.length>4&&void 0!==f[4]?f[4]:void 0,o=f.length>5&&void 0!==f[5]?f[5]:{},e.next=4,this.loadMarkets();case 4:if(u="privatePostOrder"+this.capitalize(r),c=this.market(t),d={market:c.id,type:n},a=parseFloat(a),"market"!==r||"buy"!==n){e.next=21;break}if(!this.options.createMarketBuyOrderRequiresPrice){e.next=18;break}if(void 0!==s){e.next=14;break}throw new g(this.id+" createOrder() requires the price argument with market buy orders to calculate total order cost (amount to spend), where cost = amount * price. Supply a price argument to createOrder() call if you want the cost to be calculated for you from price and amount, or, alternatively, add .options['createMarketBuyOrderRequiresPrice'] = false to supply the cost in the amount argument (the exchange-specific behaviour)");case 14:s=parseFloat(s),d.amount=this.costToPrecision(t,a*s);case 16:e.next=19;break;case 18:d.amount=this.costToPrecision(t,a);case 19:e.next=22;break;case 21:d.amount=this.amountToPrecision(t,a);case 22:return"limit"!==r&&"ioc"!==r||(d.price=this.priceToPrecision(t,s)),e.next=25,this[u](this.extend(d,o));case 25:return h=e.sent,l=this.safeValue(h,"data"),e.abrupt("return",this.parseOrder(l,c));case 28:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:{},e.next=4,this.loadMarkets();case 4:return a=this.market(r),s={id:t,market:a.id},e.next=8,this.privateDeleteOrderPending(this.extend(s,n));case 8:return o=e.sent,u=this.safeValue(o,"data"),e.abrupt("return",this.parseOrder(u,a));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:{},void 0!==r){e.next=4;break}throw new p(this.id+" fetchOrder() requires a symbol argument");case 4:return e.next=6,this.loadMarkets();case 6:return a=this.market(r),s={id:t,market:a.id},e.next=10,this.privateGetOrder(this.extend(s,n));case 10:return o=e.sent,u=this.safeValue(o,"data"),e.abrupt("return",this.parseOrder(u,a));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrdersByStatus",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=f.length>1&&void 0!==f[1]?f[1]:void 0,n=f.length>2&&void 0!==f[2]?f[2]:void 0,a=f.length>3&&void 0!==f[3]?f[3]:void 0,s=f.length>4&&void 0!==f[4]?f[4]:{},e.next=6,this.loadMarkets();case 6:return void 0===a&&(a=100),o={page:1,limit:a},u=void 0,void 0!==r&&(u=this.market(r),o.market=u.id),c="privateGetOrder"+this.capitalize(t),e.next=13,this[c](this.extend(o,s));case 13:return d=e.sent,h=this.safeValue(d,"data"),l=this.safeValue(h,"data",[]),e.abrupt("return",this.parseOrders(l,u,n,a));case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:void 0,n=s.length>2&&void 0!==s[2]?s[2]:void 0,a=s.length>3&&void 0!==s[3]?s[3]:{},e.next=6,this.fetchOrdersByStatus("pending",t,r,n,a);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:void 0,n=s.length>2&&void 0!==s[2]?s[2]:void 0,a=s.length>3&&void 0!==s[3]?s[3]:{},e.next=6,this.fetchOrdersByStatus("finished",t,r,n,a);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:{},e.next=6,this.loadMarkets();case 6:return void 0===n&&(n=100),s={page:1,limit:n},o=void 0,void 0!==t&&(o=this.market(t),s.market=o.id),e.next=12,this.privateGetOrderUserDeals(this.extend(s,a));case 12:return u=e.sent,c=this.safeValue(u,"data"),d=this.safeValue(c,"data",[]),e.abrupt("return",this.parseTrades(d,o,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"withdraw",value:function(){var e=n(i.mark((function e(t,r,n){var a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.length>3&&void 0!==h[3]?h[3]:void 0,s=h.length>4&&void 0!==h[4]?h[4]:{},this.checkAddress(n),e.next=5,this.loadMarkets();case 5:return o=this.currency(t),a&&(n=n+":"+a),u={coin_type:o.id,coin_address:n,actual_amount:parseFloat(r),transfer_method:"onchain"},e.next=10,this.privatePostBalanceCoinWithdraw(this.extend(u,s));case 10:return c=e.sent,d=this.safeValue(c,"data",{}),e.abrupt("return",this.parseTransaction(d,o));case 13:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"parseTransactionStatus",value:function(e){return this.safeString({audit:"pending",pass:"pending",processing:"pending",confirming:"pending",not_pass:"failed",cancel:"canceled",finish:"ok",fail:"failed"},e,e)}},{key:"parseTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString2(e,"coin_withdraw_id","coin_deposit_id"),i=this.safeString(e,"coin_address"),n=this.safeString(e,"remark");void 0!==n&&n.length<1&&(n=void 0);var a=this.safeValue(e,"tx_id");void 0!==a&&a.length<1&&(a=void 0);var s=this.safeString(e,"coin_type"),o=this.safeCurrencyCode(s,t),u=this.safeTimestamp(e,"create_time"),c="coin_withdraw_id"in e?"withdraw":"deposit",d=this.parseTransactionStatus(this.safeString(e,"status")),h=this.safeNumber(e,"amount"),l=this.safeNumber(e,"tx_fee");"deposit"===c&&(l=0);var f={cost:l,currency:o};return void 0!==h&&(h-=l),{info:e,id:r,txid:a,timestamp:u,datetime:this.iso8601(u),address:i,tag:n,type:c,amount:h,currency:o,status:d,updated:void 0,fee:f}}},{key:"fetchWithdrawals",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},void 0!==t){e.next=6;break}throw new p(this.id+" fetchWithdrawals() requires a currency code argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.currency(t),o={coin_type:s.id},void 0!==n&&(o.Limit=n),e.next=13,this.privateGetBalanceCoinWithdraw(this.extend(o,a));case 13:return u=e.sent,c=this.safeValue(u,"data"),Array.isArray(c)||(c=this.safeValue(c,"data",[])),e.abrupt("return",this.parseTransactions(c,s,r,n));case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchDeposits",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},void 0!==t){e.next=6;break}throw new p(this.id+" fetchDeposits() requires a currency code argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.currency(t),o={coin_type:s.id},void 0!==n&&(o.Limit=n),e.next=13,this.privateGetBalanceCoinDeposit(this.extend(o,a));case 13:return u=e.sent,c=this.safeValue(u,"data"),Array.isArray(c)||(c=this.safeValue(c,"data",[])),e.abrupt("return",this.parseTransactions(c,s,r,n));case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"nonce",value:function(){return this.milliseconds()}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0;e=this.implodeParams(e,i);var s=this.urls.api+"/"+this.version+"/"+e,o=this.omit(i,this.extractParams(e));if("public"===t)Object.keys(o).length&&(s+="?"+this.urlencode(o));else{this.checkRequiredCredentials();var u=this.nonce();o=this.extend({access_id:this.apiKey,tonce:u.toString()},o),o=this.keysort(o);var c=this.rawencode(o),d=this.hash(this.encode(c+"&secret_key="+this.secret));n={Authorization:d.toUpperCase(),"Content-Type":"application/json"},"GET"===r||"DELETE"===r?s+="?"+c:a=this.json(o)}return{url:s,method:r,body:a,headers:n}}},{key:"request",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d,h,l,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=p.length>1&&void 0!==p[1]?p[1]:"public",n=p.length>2&&void 0!==p[2]?p[2]:"GET",a=p.length>3&&void 0!==p[3]?p[3]:{},s=p.length>4&&void 0!==p[4]?p[4]:void 0,o=p.length>5&&void 0!==p[5]?p[5]:void 0,e.next=7,this.fetch2(t,r,n,a,s,o);case 7:if(u=e.sent,c=this.safeString(u,"code"),d=this.safeValue(u,"data"),h=this.safeString(u,"message"),"0"===c&&void 0!==d&&("Ok"===h||d)){e.next=15;break}throw l={24:y,25:y,107:v,600:m,601:g,602:g,606:g},new(this.safeValue(l,c,f))(u.message);case 15:return e.abrupt("return",u);case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(h)},function(e,t,r){"use strict";var i=r(7),n=r(21),a=r(8),s=r(1),o=r(2),u=r(6),c=r(3),d=r(4),h=r(5),l=r(11),f=r(10),p=f.ExchangeError,v=f.AuthenticationError,m=f.RateLimitExceeded,g=f.ArgumentsRequired,y=r(12);e.exports=function(e){d(r,e);var t=h(r);function r(){return s(this,r),t.apply(this,arguments)}return o(r,[{key:"describe",value:function(){return this.deepExtend(u(c(r.prototype),"describe",this).call(this),{id:"coinfalcon",name:"CoinFalcon",countries:["GB"],rateLimit:1e3,version:"v1",has:{cancelOrder:!0,createOrder:!0,fetchBalance:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/41822275-ed982188-77f5-11e8-92bb-496bcd14ca52.jpg",api:"https://coinfalcon.com",www:"https://coinfalcon.com",doc:"https://docs.coinfalcon.com",fees:"https://coinfalcon.com/fees",referral:"https://coinfalcon.com/?ref=CFJSVGTUPASB"},api:{public:{get:["markets","markets/{market}/orders","markets/{market}/trades"]},private:{get:["user/accounts","user/orders","user/orders/{id}","user/trades"],post:["user/orders"],delete:["user/orders/{id}"]}},fees:{trading:{tierBased:!0,maker:0,taker:.002}},precision:{amount:8,price:8}})}},{key:"fetchMarkets",value:function(){var e=a(i.mark((function e(){var t,r,a,s,o,u,c,d,h,l,f,p,v,m,g=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=g.length>0&&void 0!==g[0]?g[0]:{},e.next=3,this.publicGetMarkets(t);case 3:for(r=e.sent,a=this.safeValue(r,"data"),s=[],o=0;o<a.length;o++)u=a[o],c=u.name.split("-"),d=n(c,2),h=d[0],l=d[1],f=this.safeCurrencyCode(h),p=this.safeCurrencyCode(l),v=f+"/"+p,m={amount:this.safeInteger(u,"size_precision"),price:this.safeInteger(u,"price_precision")},s.push({id:u.name,symbol:v,base:f,quote:p,baseId:h,quoteId:l,active:!0,precision:m,limits:{amount:{min:Math.pow(10,-m.amount),max:void 0},price:{min:Math.pow(10,-m.price),max:void 0},cost:{min:void 0,max:void 0}},info:u});return e.abrupt("return",s);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"name"),i=this.safeSymbol(r,t,"-"),n=this.milliseconds(),a=parseFloat(e.last_price);return{symbol:i,timestamp:n,datetime:this.iso8601(n),high:void 0,low:void 0,bid:void 0,bidVolume:void 0,ask:void 0,askVolume:void 0,vwap:void 0,open:void 0,close:a,last:a,previousClose:void 0,change:this.safeNumber(e,"change_in_24h"),percentage:void 0,average:void 0,baseVolume:void 0,quoteVolume:this.safeNumber(e,"volume"),info:e}}},{key:"fetchTicker",value:function(){var e=a(i.mark((function e(t){var r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.fetchTickers(r);case 5:return n=e.sent,e.abrupt("return",n[t]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTickers",value:function(){var e=a(i.mark((function e(){var t,r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetMarkets(r);case 6:for(n=e.sent,a=this.safeValue(n,"data"),s={},o=0;o<a.length;o++)u=this.parseTicker(a[o]),c=u.symbol,s[c]=u;return e.abrupt("return",this.filterByArray(s,"symbol",t));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=a(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.length>1&&void 0!==o[1]?o[1]:void 0,r=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return n={market:this.marketId(t),level:"3"},e.next=7,this.publicGetMarketsMarketOrders(this.extend(n,r));case 7:return a=e.sent,s=this.safeValue(a,"data",{}),e.abrupt("return",this.parseOrderBook(s,void 0,"bids","asks","price","size"));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.parse8601(this.safeString(e,"created_at")),i=this.safeString(e,"price"),n=this.safeString(e,"size"),a=this.parseNumber(i),s=this.parseNumber(n),o=this.parseNumber(y.stringMul(i,n)),u=t.symbol,c=this.safeString(e,"id"),d=this.safeString(e,"side"),h=this.safeString(e,"order_id"),l=void 0,f=this.safeNumber(e,"fee");if(void 0!==f){var p=this.safeString(e,"fee_currency_code");l={cost:f,currency:this.safeCurrencyCode(p)}}return{info:e,timestamp:r,datetime:this.iso8601(r),symbol:u,id:c,order:h,type:void 0,side:d,takerOrMaker:void 0,price:a,amount:s,cost:o,fee:l}}},{key:"fetchMyTrades",value:function(){var e=a(i.mark((function e(){var t,r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},void 0!==t){e.next=6;break}throw new g(this.id+" fetchMyTrades() requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.market(t),o={market:s.id},void 0!==r&&(o.start_time=this.iso8601(r)),void 0!==n&&(o.limit=n),e.next=14,this.privateGetUserTrades(this.extend(o,a));case 14:return u=e.sent,c=this.safeValue(u,"data",[]),e.abrupt("return",this.parseTrades(c,s,r,n));case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTrades",value:function(){var e=a(i.mark((function e(t){var r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={market:s.id},void 0!==r&&(o.since=this.iso8601(r)),e.next=10,this.publicGetMarketsMarketTrades(this.extend(o,a));case 10:return u=e.sent,c=this.safeValue(u,"data",[]),e.abrupt("return",this.parseTrades(c,s,r,n));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=a(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetUserAccounts(t);case 5:for(r=e.sent,n={info:r},a=this.safeValue(r,"data"),s=0;s<a.length;s++)o=a[s],u=this.safeString(o,"currency_code"),c=this.safeCurrencyCode(u),(d=this.account()).free=this.safeString(o,"available_balance"),d.used=this.safeString(o,"hold_balance"),d.total=this.safeString(o,"balance"),n[c]=d;return e.abrupt("return",this.parseBalance(n,!1));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({fulfilled:"closed",canceled:"canceled",pending:"open",open:"open",partially_filled:"open"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"market"),i=this.safeSymbol(r,t,"-"),n=this.parse8601(this.safeString(e,"created_at")),a=this.safeNumber(e,"price"),s=this.safeNumber(e,"size"),o=this.safeNumber(e,"size_filled"),u=this.parseOrderStatus(this.safeString(e,"status")),c=this.safeString(e,"operation_type");void 0!==c&&(c=(c=c.split("_"))[0]);var d=this.safeString(e,"order_type"),h=this.safeValue(e,"post_only");return this.safeOrder({id:this.safeString(e,"id"),clientOrderId:void 0,datetime:this.iso8601(n),timestamp:n,status:u,symbol:i,type:c,timeInForce:void 0,postOnly:h,side:d,price:a,stopPrice:void 0,cost:void 0,amount:s,filled:o,remaining:void 0,trades:void 0,fee:void 0,info:e,lastTradeTimestamp:void 0,average:void 0})}},{key:"createOrder",value:function(){var e=a(i.mark((function e(t,r,n,a){var s,o,u,c,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=l.length>4&&void 0!==l[4]?l[4]:void 0,o=l.length>5&&void 0!==l[5]?l[5]:{},e.next=4,this.loadMarkets();case 4:return u=this.market(t),c={market:u.id,size:this.amountToPrecision(t,a),order_type:n},"limit"===r&&(s=this.priceToPrecision(t,s),c.price=s.toString()),c.operation_type=r+"_order",e.next=10,this.privatePostUserOrders(this.extend(c,o));case 10:return d=e.sent,h=this.safeValue(d,"data",{}),e.abrupt("return",this.parseOrder(h,u));case 13:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=a(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:{},e.next=4,this.loadMarkets();case 4:return a={id:t},e.next=7,this.privateDeleteUserOrdersId(this.extend(a,n));case 7:return s=e.sent,o=this.market(r),u=this.safeValue(s,"data",{}),e.abrupt("return",this.parseOrder(u,o));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=a(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.length>1&&void 0!==o[1]?o[1]:void 0,r=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return n={id:t},e.next=7,this.privateGetUserOrdersId(this.extend(n,r));case 7:return a=e.sent,s=this.safeValue(a,"data",{}),e.abrupt("return",this.parseOrder(s));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=a(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:{},e.next=6,this.loadMarkets();case 6:return s={},o=void 0,void 0!==t&&(o=this.market(t),s.market=o.id),void 0!==r&&(s.since_time=this.iso8601(r)),e.next=12,this.privateGetUserOrders(this.extend(s,a));case 12:return u=e.sent,c=this.safeValue(u,"data",[]),d=this.filterByArray(c,"status",["pending","open","partially_filled"],!1),e.abrupt("return",this.parseOrders(d,o,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"nonce",value:function(){return this.milliseconds()}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s="/api/"+this.version+"/"+this.implodeParams(e,i),o=this.omit(i,this.extractParams(e));if("public"===t)Object.keys(o).length&&(s+="?"+this.urlencode(o));else{this.checkRequiredCredentials(),"GET"===r?Object.keys(o).length&&(s+="?"+this.urlencode(o)):a=this.json(o);var u=this.seconds().toString(),c=[u,r,s].join("|");a&&(c+="|"+a);var d=this.hmac(this.encode(c),this.encode(this.secret));n={"CF-API-KEY":this.apiKey,"CF-API-TIMESTAMP":u,"CF-API-SIGNATURE":d,"Content-Type":"application/json"}}var h=this.urls.api+s;return{url:h,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,u){if(!(e<400))throw new(this.safeValue({401:v,429:m},e,p))(a)}}]),r}(l)},function(e,t,r){"use strict";var i=r(7),n=r(8),a=r(1),s=r(2),o=r(6),u=r(3),c=r(4),d=r(5),h=r(11),l=r(10),f=l.InsufficientFunds,p=l.ExchangeError,v=l.InvalidNonce,m=l.InvalidOrder,g=l.ArgumentsRequired,y=r(12);e.exports=function(e){c(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(u(r.prototype),"describe",this).call(this),{id:"coinfloor",name:"coinfloor",rateLimit:1e3,countries:["UK"],has:{cancelOrder:!0,CORS:!1,createOrder:!0,fetchBalance:!0,fetchLedger:!0,fetchOpenOrders:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTrades:!0},urls:{logo:"https://user-images.githubusercontent.com/51840849/87153925-ef265e80-c2c0-11ea-91b5-020c804b90e0.jpg",api:"https://webapi.coinfloor.co.uk/v2/bist",www:"https://www.coinfloor.co.uk",doc:["https://github.com/coinfloor/api","https://www.coinfloor.co.uk/api"]},requiredCredentials:{apiKey:!0,secret:!1,password:!0,uid:!0},api:{public:{get:["{id}/ticker/","{id}/order_book/","{id}/transactions/"]},private:{post:["{id}/balance/","{id}/user_transactions/","{id}/open_orders/","{symbol}/cancel_order/","{id}/buy/","{id}/sell/","{id}/buy_market/","{id}/sell_market/","{id}/estimate_sell_market/","{id}/estimate_buy_market/"]}},markets:{"BTC/GBP":{id:"XBT/GBP",symbol:"BTC/GBP",base:"BTC",quote:"GBP",baseId:"XBT",quoteId:"GBP",precision:{price:0,amount:4}},"BTC/EUR":{id:"XBT/EUR",symbol:"BTC/EUR",base:"BTC",quote:"EUR",baseId:"XBT",quoteId:"EUR",precision:{price:0,amount:4}}},exceptions:{exact:{"You have insufficient funds.":f,"Tonce is out of sequence.":v}}})}},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:{},e.next=3,this.loadMarkets();case 3:if(r=void 0,n=t,void 0!==this.safeString(t,"symbol")&&(r=this.market(t.symbol),n=this.omit(t,"symbol")),(a=this.safeString(t,"id"))in this.markets_by_id&&(r=this.markets_by_id[a]),void 0!==r){e.next=11;break}throw new g(this.id+" fetchBalance() requires a symbol param");case 11:return s={id:r.id},e.next=14,this.privatePostIdBalance(this.extend(s,n));case 14:return o=e.sent,u={info:o},c=r.base,d=r.quote,h=this.safeStringLower(r,"baseId"),l=this.safeStringLower(r,"quoteId"),u[c]={free:this.safeNumber(o,h+"_available"),used:this.safeNumber(o,h+"_reserved"),total:this.safeNumber(o,h+"_balance")},u[d]={free:this.safeNumber(o,l+"_available"),used:this.safeNumber(o,l+"_reserved"),total:this.safeNumber(o,l+"_balance")},e.abrupt("return",this.parseBalance(u));case 23:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.loadMarkets();case 4:return n={id:this.marketId(t)},e.next=7,this.publicGetIdOrderBook(this.extend(n,r));case 7:return a=e.sent,e.abrupt("return",this.parseOrderBook(a));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.milliseconds(),i=void 0;void 0!==t&&(i=t.symbol);var n=this.safeNumber(e,"vwap"),a=this.safeNumber(e,"volume"),s=void 0;void 0!==n&&(s=a*n);var o=this.safeNumber(e,"last");return{symbol:i,timestamp:r,datetime:this.iso8601(r),high:this.safeNumber(e,"high"),low:this.safeNumber(e,"low"),bid:this.safeNumber(e,"bid"),bidVolume:void 0,ask:this.safeNumber(e,"ask"),askVolume:void 0,vwap:n,open:void 0,close:o,last:o,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:a,quoteVolume:s,info:e}}},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={id:n.id},e.next=7,this.publicGetIdTicker(this.extend(a,r));case 7:return s=e.sent,e.abrupt("return",this.parseTicker(s,n));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeTimestamp(e,"date"),i=this.safeString(e,"tid"),n=this.safeString(e,"price"),a=this.safeString(e,"amount"),s=this.parseNumber(n),o=this.parseNumber(a),u=this.parseNumber(y.stringMul(n,a)),c=void 0;return void 0!==t&&(c=t.symbol),{info:e,id:i,order:void 0,timestamp:r,datetime:this.iso8601(r),symbol:c,type:void 0,side:void 0,takerOrMaker:void 0,price:s,amount:o,cost:u,fee:void 0}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={id:s.id},e.next=9,this.publicGetIdTransactions(this.extend(o,a));case 9:return u=e.sent,e.abrupt("return",this.parseTrades(u,s,r,n));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchLedger",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:void 0,r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},e.next=6,this.loadMarkets();case 6:if(s=void 0,void 0===t){e.next=11;break}if(void 0!==(s=this.market(t))){e.next=11;break}throw new g(this.id+" fetchTransactions() requires a code argument (a market symbol)");case 11:return o={id:s.id,limit:n},e.next=14,this.privatePostIdUserTransactions(this.extend(o,a));case 14:return u=e.sent,e.abrupt("return",this.parseLedger(u,void 0,r,void 0));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseLedgerEntryStatus",value:function(e){return this.safeString({completed:"ok"},e,e)}},{key:"parseLedgerEntryType",value:function(e){return this.safeString({0:"transaction",1:"transaction",2:"trade"},e,e)}},{key:"parseLedgerEntry",value:function(e){for(var t=Object.keys(e),r=void 0,i=void 0,n=void 0,a=void 0,s=0;s<t.length;s++){var o=t[s];if(o.indexOf("_")>0){var u=o.split("_"),c=u.length;if(2===c){var d=this.safeNumber(e,u[0]),h=this.safeNumber(e,u[1]);void 0!==d&&void 0!==h&&(r=u[0],i=u[1],n=d,a=h)}}}var l=this.safeCurrencyCode(r),f=this.safeCurrencyCode(i),p=this.parseLedgerEntryType(this.safeString(e,"type")),v=this.safeString(e,"id"),m=this.parse8601(this.safeString(e,"datetime")),g=void 0,y=this.safeNumber(e,"fee"),b={id:void 0,timestamp:m,datetime:this.iso8601(m),amount:void 0,direction:void 0,currency:void 0,type:p,referenceId:v,referenceAccount:void 0,before:void 0,after:void 0,status:"ok",fee:g,info:e};if("trade"===p)return void 0!==y&&(g={cost:y,currency:f}),[this.extend(b,{currency:l,amount:Math.abs(n),direction:n>0?"in":"out"}),this.extend(b,{currency:f,amount:Math.abs(a),direction:a>0?"in":"out",fee:g})];var x=0===n?a:n,k=0===n?f:l,w=x>0?"in":"out";return void 0!==y&&(g={cost:y,currency:k}),this.extend(b,{currency:k,amount:Math.abs(x),direction:w,fee:g})}},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,u,c,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=l.length>4&&void 0!==l[4]?l[4]:void 0,o=l.length>5&&void 0!==l[5]?l[5]:{},e.next=4,this.loadMarkets();case 4:return u={id:this.marketId(t)},c="privatePostId"+this.capitalize(n),"market"===r?(u.quantity=a,c+="Market"):(u.price=s,u.amount=a),e.next=9,this[c](this.extend(u,o));case 9:return d=e.sent,h=this.parse8601(this.safeString(d,"datetime")),e.abrupt("return",{id:this.safeString(d,"id"),clientOrderId:void 0,datetime:this.iso8601(h),timestamp:h,type:r,price:this.safeNumber(d,"price"),remaining:this.safeNumber(d,"amount"),info:d});case 12:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=o.length>1&&void 0!==o[1]?o[1]:void 0,o.length>2&&void 0!==o[2]?o[2]:{},void 0!==r){e.next=4;break}throw new g(this.id+" cancelOrder() requires a symbol argument");case 4:return e.next=6,this.loadMarkets();case 6:return n=this.market(r),a={symbol:n.id,id:t},e.next=10,this.privatePostSymbolCancelOrder(a);case 10:if("false"!==(s=e.sent)){e.next=13;break}throw new m(this.id+" cancel was rejected");case 13:return e.abrupt("return",s);case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.parse8601(this.safeString(e,"datetime")),i=this.safeNumber(e,"price"),n=this.safeNumber(e,"amount"),a=void 0,s=this.safeString(e,"status"),o=this.safeString(e,"type");"0"===o?a="buy":"1"===o&&(a="sell");var u=void 0;void 0!==t&&(u=t.symbol);var c=this.safeString(e,"id");return this.safeOrder({info:e,id:c,clientOrderId:void 0,datetime:this.iso8601(r),timestamp:r,lastTradeTimestamp:void 0,status:s,symbol:u,type:"limit",timeInForce:void 0,postOnly:void 0,side:a,price:i,stopPrice:void 0,amount:void 0,filled:void 0,remaining:n,cost:void 0,fee:void 0,average:void 0,trades:void 0})}},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=c.length>0&&void 0!==c[0]?c[0]:void 0,r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},void 0!==t){e.next=6;break}throw new g(this.id+" fetchOpenOrders() requires a symbol param");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.market(t),o={id:s.id},e.next=12,this.privatePostIdOpenOrders(this.extend(o,a));case 12:return u=e.sent,e.abrupt("return",this.parseOrders(u,s,r,n,{status:"open"}));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,u){if(!(e<400)&&void 0!==s){var c=this.safeString(s,"error_msg"),d=this.id+" "+a;throw this.throwExactlyMatchedException(this.exceptions.exact,c,d),new p(d)}}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.urls.api+"/"+this.implodeParams(e,i),o=this.omit(i,this.extractParams(e));if("public"===t)Object.keys(o).length&&(s+="?"+this.urlencode(o));else{this.checkRequiredCredentials();var u=this.nonce();a=this.urlencode(this.extend({nonce:u},o));var c=this.uid+"/"+this.apiKey+":"+this.password,d=this.decode(this.stringToBase64(c));n={"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+d}}return{url:s,method:r,body:a,headers:n}}}]),r}(h)},function(e,t,r){"use strict";var i=r(7),n=r(21),a=r(8),s=r(1),o=r(2),u=r(6),c=r(3),d=r(4),h=r(5),l=r(11),f=r(10).ExchangeError,p=r(12);e.exports=function(e){d(r,e);var t=h(r);function r(){return s(this,r),t.apply(this,arguments)}return o(r,[{key:"describe",value:function(){return this.deepExtend(u(c(r.prototype),"describe",this).call(this),{id:"coingi",name:"Coingi",rateLimit:1e3,countries:["PA","BG","CN","US"],has:{cancelOrder:!0,CORS:!1,createOrder:!0,fetchBalance:!0,fetchMarkets:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0},urls:{referral:"https://www.coingi.com/?r=XTPPMC",logo:"https://user-images.githubusercontent.com/1294454/28619707-5c9232a8-7212-11e7-86d6-98fe5d15cc6e.jpg",api:{www:"https://coingi.com",current:"https://api.coingi.com",user:"https://api.coingi.com"},www:"https://coingi.com",doc:"https://coingi.docs.apiary.io"},api:{www:{get:[""]},current:{get:["order-book/{pair}/{askCount}/{bidCount}/{depth}","transactions/{pair}/{maxCount}","24hour-rolling-aggregation"]},user:{post:["balance","add-order","cancel-order","orders","transactions","create-crypto-withdrawal"]}},fees:{trading:{tierBased:!1,percentage:!0,taker:.002,maker:.002},funding:{tierBased:!1,percentage:!1,withdraw:{BTC:.001,LTC:.01,DOGE:2,PPC:.02,VTC:.2,NMC:2,DASH:.002,USD:10,EUR:10},deposit:{BTC:0,LTC:0,DOGE:0,PPC:0,VTC:0,NMC:0,DASH:0,USD:5,EUR:1}}}})}},{key:"fetchMarkets",value:function(){var e=a(i.mark((function e(){var t,r,a,s,o,u,c,d,h,l,f,p,v,m,g,y,b,x=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=x.length>0&&void 0!==x[0]?x[0]:{},e.next=3,this.wwwGet(t);case 3:for(r=e.sent,a=r.split('do=currencyPairSelector-selectCurrencyPair" class="active">'),s=a[1].split('<div class="currency-pair-label">'),o=[],u=1;u<s.length;u++)c=s[u],d=c.split("</div>"),h=(h=(h=d[0]).replace("/","-")).toLowerCase(),l=h.split("-"),f=n(l,2),p=f[0],v=f[1],m=p.toUpperCase(),g=v.toUpperCase(),m=this.safeCurrencyCode(m),g=this.safeCurrencyCode(g),y=m+"/"+g,b={amount:8,price:8},o.push({id:h,symbol:y,base:m,quote:g,baseId:p,quoteId:v,info:h,active:!0,precision:b,limits:{amount:{min:Math.pow(10,-b.amount),max:Math.pow(10,b.amount)},price:{min:Math.pow(10,-b.price),max:void 0},cost:{min:0,max:void 0}}});return e.abrupt("return",o);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=a(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,v,m,g,y,b=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=b.length>0&&void 0!==b[0]?b[0]:{},e.next=3,this.loadMarkets();case 3:for(r=[],n=Object.keys(this.currencies),a=0;a<n.length;a++)s=n[a],r.push(s.toLowerCase());return o={currencies:r.join(",")},e.next=9,this.userPostBalance(this.extend(o,t));case 9:for(u=e.sent,c={info:u},d=0;d<u.length;d++)h=u[d],l=this.safeString(h.currency,"name"),f=this.safeCurrencyCode(l),(v=this.account()).free=this.safeString(h,"available"),m=this.safeString(h,"blocked"),g=this.safeString(h,"inOrders"),y=this.safeString(h,"withdrawing"),v.used=p.stringAdd(p.stringAdd(m,g),y),c[f]=v;return e.abrupt("return",this.parseBalance(c,!1));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=a(i.mark((function e(t){var r,n,a,s,o,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:512,n=u.length>2&&void 0!==u[2]?u[2]:{},e.next=4,this.loadMarkets();case 4:return a=this.market(t),s={pair:a.id,depth:32,askCount:r,bidCount:r},e.next=8,this.currentGetOrderBookPairAskCountBidCountDepth(this.extend(s,n));case 8:return o=e.sent,e.abrupt("return",this.parseOrderBook(o,void 0,"bids","asks","price","baseAmount"));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.milliseconds(),i=void 0;return void 0!==t&&(i=t.symbol),{symbol:i,timestamp:r,datetime:this.iso8601(r),high:this.safeNumber(e,"high"),low:this.safeNumber(e,"low"),bid:this.safeNumber(e,"highestBid"),bidVolume:void 0,ask:this.safeNumber(e,"lowestAsk"),askVolume:void 0,vwap:void 0,open:void 0,close:void 0,last:void 0,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeNumber(e,"baseVolume"),quoteVolume:this.safeNumber(e,"counterVolume"),info:e}}},{key:"fetchTickers",value:function(){var e=a(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:void 0,r=l.length>1&&void 0!==l[1]?l[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.currentGet24hourRollingAggregation(r);case 6:for(n=e.sent,a={},s=0;s<n.length;s++)o=n[s],u=o.currencyPair.base.toUpperCase(),c=o.currencyPair.counter.toUpperCase(),h=void 0,(d=u+"/"+c)in this.markets&&(h=this.markets[d]),a[d]=this.parseTicker(o,h);return e.abrupt("return",this.filterByArray(a,"symbol",t));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=a(i.mark((function e(t){var r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.fetchTickers(void 0,r);case 5:if(n=e.sent,!(t in n)){e.next=8;break}return e.abrupt("return",n[t]);case 8:throw new f(this.id+" return did not contain "+t);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"price"),i=this.safeString(e,"amount"),n=this.parseNumber(r),a=this.parseNumber(i),s=this.parseNumber(p.stringMul(r,i)),o=this.safeInteger(e,"timestamp"),u=this.safeString(e,"id"),c=this.safeString(e,"currencyPair"),d=this.safeSymbol(c,t);return{id:u,info:e,timestamp:o,datetime:this.iso8601(o),symbol:d,type:void 0,side:void 0,order:void 0,takerOrMaker:void 0,price:n,amount:a,cost:s,fee:void 0}}},{key:"fetchTrades",value:function(){var e=a(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={pair:s.id,maxCount:128},e.next=9,this.currentGetTransactionsPairMaxCount(this.extend(o,a));case 9:return u=e.sent,e.abrupt("return",this.parseTrades(u,s,r,n));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=a(i.mark((function e(t,r,n,a){var s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=d.length>4&&void 0!==d[4]?d[4]:void 0,o=d.length>5&&void 0!==d[5]?d[5]:{},e.next=4,this.loadMarkets();case 4:return u={currencyPair:this.marketId(t),volume:a,price:s,orderType:"buy"===n?0:1},e.next=7,this.userPostAddOrder(this.extend(u,o));case 7:return c=e.sent,e.abrupt("return",{info:c,id:c.result});case 9:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=a(i.mark((function e(t){var r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:{},e.next=4,this.loadMarkets();case 4:return n={orderId:t},e.next=7,this.userPostCancelOrder(this.extend(n,r));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"current",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.urls.api[t];"www"!==t&&(s+="/"+t+"/"+this.implodeParams(e,i));var o=this.omit(i,this.extractParams(e));if("current"===t)Object.keys(o).length&&(s+="?"+this.urlencode(o));else if("user"===t){this.checkRequiredCredentials();var u=this.nonce(),c=this.extend({token:this.apiKey,nonce:u},o),d=u.toString()+"$"+this.apiKey;c.signature=this.hmac(this.encode(d),this.encode(this.secret)),a=this.json(c),n={"Content-Type":"application/json"}}return{url:s,method:r,body:a,headers:n}}},{key:"request",value:function(){var e=a(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:"current",n=c.length>2&&void 0!==c[2]?c[2]:"GET",a=c.length>3&&void 0!==c[3]?c[3]:{},s=c.length>4&&void 0!==c[4]?c[4]:void 0,o=c.length>5&&void 0!==c[5]?c[5]:void 0,e.next=7,this.fetch2(t,r,n,a,s,o);case 7:if("string"===typeof(u=e.sent)){e.next=11;break}if(!("errors"in u)){e.next=11;break}throw new f(this.id+" "+this.json(u));case 11:return e.abrupt("return",u);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(l)},function(e,t,r){"use strict";var i=r(7),n=r(8),a=r(1),s=r(2),o=r(6),u=r(3),c=r(4),d=r(5),h=r(11),l=r(10).ExchangeError;e.exports=function(e){c(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(u(r.prototype),"describe",this).call(this),{id:"coinmarketcap",name:"CoinMarketCap",rateLimit:1e4,version:"v1",countries:["US"],has:{cancelOrder:!1,CORS:!0,createLimitOrder:!1,createMarketOrder:!1,createOrder:!1,editOrder:!1,privateAPI:!1,fetchBalance:!1,fetchCurrencies:!0,fetchL2OrderBook:!1,fetchMarkets:!0,fetchOHLCV:!1,fetchOrderBook:!1,fetchTicker:!0,fetchTickers:!0,fetchTrades:!1},urls:{logo:"https://user-images.githubusercontent.com/51840849/87182086-1cd4cd00-c2ec-11ea-9ec4-d0cf2a2abf62.jpg",api:{public:"https://api.coinmarketcap.com",files:"https://files.coinmarketcap.com",charts:"https://graph.coinmarketcap.com"},www:"https://coinmarketcap.com",doc:"https://coinmarketcap.com/api"},requiredCredentials:{apiKey:!1,secret:!1},api:{files:{get:["generated/stats/global.json"]},graphs:{get:["currencies/{name}/"]},public:{get:["ticker/","ticker/{id}/","global/"]}},currencyCodes:["AUD","BRL","CAD","CHF","CNY","EUR","GBP","HKD","IDR","INR","JPY","KRW","MXN","RUB","USD","BTC","ETH","LTC"]})}},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw r.length>1&&void 0!==r[1]?r[1]:void 0,r.length>2&&void 0!==r[2]?r[2]:{},new l("Fetching order books is not supported by the API of "+this.id);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"currencyCode",value:function(e,t){return this.safeValue({ACChain:"ACChain",AdCoin:"AdCoin",BatCoin:"BatCoin","BigONE Token":"BigONE Token",Bitgem:"Bitgem",BlazeCoin:"BlazeCoin",BlockCAT:"BlockCAT","Blocktrade Token":"Blocktrade Token","BOX Token":"BOX Token",Catcoin:"Catcoin",CanYaCoin:"CanYaCoin",CryptoBossCoin:"CryptoBossCoin",Comet:"Comet",CPChain:"CPChain",CrowdCoin:"CrowdCoin",Cryptaur:"Cryptaur",Cubits:"Cubits","DAO.Casino":"DAO.Casino",DefiBox:"DefiBox","E-Dinar Coin":"E-Dinar Coin",EDRcoin:"EDRcoin",ENTCash:"ENTCash",FairCoin:"FairCoin","Fabric Token":"Fabric Token",GHOSTPRISM:"GHOSTPRISM","Global Tour Coin":"Global Tour Coin",GuccioneCoin:"GuccioneCoin",HarmonyCoin:"HarmonyCoin","Harvest Masternode Coin":"Harvest Masternode Coin","HOT Token":"HOT Token","Hydro Protocol":"Hydro Protocol",Huncoin:"Huncoin",iCoin:"iCoin","Infinity Economics":"Infinity Economics","IQ.cash":"IQ.cash","KingN Coin":"KingN Coin",LiteBitcoin:"LiteBitcoin",Maggie:"Maggie","Menlo One":"Menlo One","Mobilian Coin":"Mobilian Coin",Monarch:"Monarch","MTC Mesh Network":"MTC Mesh Network",IOTA:"IOTA",NetCoin:"NetCoin",PCHAIN:"PCHAIN",Penta:"Penta",Plair:"Plair",PlayChip:"PlayChip",Polcoin:"Polcoin",PutinCoin:"PutinCoin",Rcoin:"Rcoin",SBTCT:"SiamBitcoin","Super Bitcoin":"Super Bitcoin",TerraCredit:"TerraCredit",Themis:"Themis","UNI COIN":"UNI COIN","UNICORN Token":"UNICORN Token",Universe:"Universe"},t,e)}},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p,v,m=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=m.length>0&&void 0!==m[0]?m[0]:{},r={limit:0},e.next=4,this.publicGetTicker(this.extend(r,t));case 4:for(n=e.sent,a=[],s=0;s<n.length;s++)for(o=n[s],u=this.currencyCodes,c=0;c<u.length;c++)d=u[c],h=d.toLowerCase(),l=o.id,f=this.currencyCode(o.symbol,o.name),p=f+"/"+d,v=l+"/"+h,a.push({id:v,symbol:p,base:f,quote:d,baseId:l,quoteId:h,info:o,active:void 0,precision:this.precision,limits:this.limits});return e.abrupt("return",a);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchGlobal",value:function(){var e=n(i.mark((function e(){var t,r,n=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:"USD",e.next=3,this.loadMarkets();case 3:return r={},t&&(r.convert=t),e.next=7,this.publicGetGlobal(r);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeTimestamp(e,"last_updated");void 0===r&&(r=this.milliseconds());var i=this.safeNumber(e,"percent_change_24h"),n=void 0,a=void 0,s=void 0;if(void 0!==t){a=t.symbol;var o="price_"+t.quoteId;n=this.safeNumber(e,o);var u="24h_volume_"+t.quoteId;s=this.safeNumber(e,u)}return{symbol:a,timestamp:r,datetime:this.iso8601(r),high:void 0,low:void 0,bid:void 0,bidVolume:void 0,ask:void 0,askVolume:void 0,vwap:void 0,open:void 0,close:n,last:n,previousClose:void 0,change:void 0,percentage:i,average:void 0,baseVolume:void 0,quoteVolume:s,info:e}}},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:"USD",r=f.length>1&&void 0!==f[1]?f[1]:{},e.next=4,this.loadMarkets();case 4:return n={limit:1e4},t&&(n.convert=t),e.next=8,this.publicGetTicker(this.extend(n,r));case 8:for(a=e.sent,s={},o=0;o<a.length;o++)u=a[o],c=t.toLowerCase(),d=u.id+"/"+c,h=d,l=void 0,d in this.markets_by_id&&(l=this.markets_by_id[d],h=l.symbol),s[h]=this.parseTicker(u,l);return e.abrupt("return",s);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={convert:n.quote,id:n.baseId},e.next=7,this.publicGetTickerId(this.extend(a,r));case 7:return s=e.sent,o=s[0],e.abrupt("return",this.parseTicker(o,n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchCurrencies",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:{},r={limit:0},e.next=4,this.publicGetTicker(this.extend(r,t));case 4:for(n=e.sent,a={},s=0;s<n.length;s++)o=n[s],u=this.safeString(o,"symbol"),c=this.safeString(o,"name"),d=8,h=this.currencyCode(u,c),a[h]={id:u,code:h,info:o,name:c,active:!0,fee:void 0,precision:d,limits:{amount:{min:Math.pow(10,-d),max:Math.pow(10,d)},price:{min:Math.pow(10,-d),max:Math.pow(10,d)},cost:{min:void 0,max:void 0},withdraw:{min:void 0,max:void 0}}};return e.abrupt("return",a);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.urls.api[t]+"/"+this.version+"/"+this.implodeParams(e,i),o=this.omit(i,this.extractParams(e));return Object.keys(o).length&&(s+="?"+this.urlencode(o)),{url:s,method:r,body:a,headers:n}}},{key:"request",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:"public",n=c.length>2&&void 0!==c[2]?c[2]:"GET",a=c.length>3&&void 0!==c[3]?c[3]:{},s=c.length>4&&void 0!==c[4]?c[4]:void 0,o=c.length>5&&void 0!==c[5]?c[5]:void 0,e.next=7,this.fetch2(t,r,n,a,s,o);case 7:if(!("error"in(u=e.sent))){e.next=11;break}if(!u.error){e.next=11;break}throw new l(this.id+" "+this.json(u));case 11:return e.abrupt("return",u);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(h)},function(e,t,r){"use strict";var i=r(7),n=r(8),a=r(1),s=r(2),o=r(6),u=r(3),c=r(4),d=r(5),h=r(11),l=r(10),f=l.ExchangeError,p=l.ArgumentsRequired,v=l.InvalidOrder,m=l.OrderNotFound,g=l.RateLimitExceeded,y=l.InsufficientFunds,b=r(12);e.exports=function(e){c(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(u(r.prototype),"describe",this).call(this),{id:"coinmate",name:"CoinMate",countries:["GB","CZ","EU"],rateLimit:1e3,has:{cancelOrder:!0,CORS:!0,createOrder:!0,fetchBalance:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchTicker:!0,fetchTrades:!0,fetchTransactions:!0},urls:{logo:"https://user-images.githubusercontent.com/51840849/87460806-1c9f3f00-c616-11ea-8c46-a77018a8f3f4.jpg",api:"https://coinmate.io/api",www:"https://coinmate.io",fees:"https://coinmate.io/fees",doc:["https://coinmate.docs.apiary.io","https://coinmate.io/developers"],referral:"https://coinmate.io?referral=YTFkM1RsOWFObVpmY1ZjMGREQmpTRnBsWjJJNVp3PT0"},requiredCredentials:{apiKey:!0,secret:!0,uid:!0},api:{public:{get:["orderBook","ticker","transactions","tradingPairs"]},private:{post:["balances","bitcoinCashWithdrawal","bitcoinCashDepositAddresses","bitcoinDepositAddresses","bitcoinWithdrawal","bitcoinWithdrawalFees","buyInstant","buyLimit","cancelOrder","cancelOrderWithInfo","createVoucher","dashDepositAddresses","dashWithdrawal","ethereumWithdrawal","ethereumDepositAddresses","litecoinWithdrawal","litecoinDepositAddresses","openOrders","order","orderHistory","orderById","pusherAuth","redeemVoucher","replaceByBuyLimit","replaceByBuyInstant","replaceBySellLimit","replaceBySellInstant","rippleDepositAddresses","rippleWithdrawal","sellInstant","sellLimit","transactionHistory","traderFees","tradeHistory","transfer","transferHistory","unconfirmedBitcoinDeposits","unconfirmedBitcoinCashDeposits","unconfirmedDashDeposits","unconfirmedEthereumDeposits","unconfirmedLitecoinDeposits","unconfirmedRippleDeposits"]}},fees:{trading:{tierBased:!0,percentage:!0,maker:.0012,taker:.0025,tiers:{taker:[[0,.0025],[1e4,.0023],[1e5,.0021],[25e4,.002],[5e5,.0015],[1e6,.0013],[3e6,.001],[15e6,5e-4]],maker:[[0,.0012],[1e4,.0011],[1e6,.001],[25e4,8e-4],[5e5,5e-4],[1e6,3e-4],[3e6,2e-4],[15e6,0]]}},promotional:{trading:{maker:5e-4,taker:.0015,tiers:{taker:[[0,.0015],[1e4,.14/100],[1e5,.0013],[25e4,.0012],[5e5,.0011],[1e6,.001],[3e6,8e-4],[15e6,5e-4]],maker:[[0,5e-4],[1e4,4e-4],[1e6,3e-4],[25e4,2e-4],[5e5,0],[1e6,0],[3e6,0],[15e6,0]]}}}},options:{promotionalMarkets:["ETH/EUR","ETH/CZK","ETH/BTC","XRP/EUR","XRP/CZK","XRP/BTC","DASH/EUR","DASH/CZK","DASH/BTC","BCH/EUR","BCH/CZK","BCH/BTC"]},exceptions:{exact:{"No order with given ID":m},broad:{"Not enough account balance available":y,"Incorrect order ID":v,"Minimum Order Size ":v,"TOO MANY REQUESTS":g}}})}},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p,v,m,g=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=g.length>0&&void 0!==g[0]?g[0]:{},e.next=3,this.publicGetTradingPairs(t);case 3:for(r=e.sent,n=this.safeValue(r,"data"),a=[],s=0;s<n.length;s++)o=n[s],u=this.safeString(o,"name"),c=this.safeString(o,"firstCurrency"),d=this.safeString(o,"secondCurrency"),h=this.safeCurrencyCode(c),l=this.safeCurrencyCode(d),f=h+"/"+l,p=this.safeValue(this.options,"promotionalMarkets",[]),v=this.safeValue(this.fees,"trading"),this.inArray(f,p)&&(m=this.safeValue(this.fees,"promotional",{}),v=this.safeValue(m,"trading",v)),a.push({id:u,symbol:f,base:h,quote:l,baseId:c,quoteId:d,active:void 0,maker:v.maker,taker:v.taker,info:o,precision:{price:this.safeInteger(o,"priceDecimals"),amount:this.safeInteger(o,"lotDecimals")},limits:{amount:{min:this.safeNumber(o,"minAmount"),max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0}}});return e.abrupt("return",a);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privatePostBalances(t);case 5:for(r=e.sent,n=this.safeValue(r,"data"),a={info:r},s=Object.keys(n),o=0;o<s.length;o++)u=s[o],c=this.safeCurrencyCode(u),d=this.safeValue(n,u),(h=this.account()).free=this.safeString(d,"available"),h.used=this.safeString(d,"reserved"),h.total=this.safeString(d,"balance"),a[c]=h;return e.abrupt("return",this.parseBalance(a,!1));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u.length>1&&void 0!==u[1]?u[1]:void 0,r=u.length>2&&void 0!==u[2]?u[2]:{},e.next=4,this.loadMarkets();case 4:return n={currencyPair:this.marketId(t),groupByPriceLimit:"False"},e.next=7,this.publicGetOrderBook(this.extend(n,r));case 7:return a=e.sent,s=a.data,o=this.safeTimestamp(s,"timestamp"),e.abrupt("return",this.parseOrderBook(s,o,"bids","asks","price","amount"));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:{},e.next=3,this.loadMarkets();case 3:return n={currencyPair:this.marketId(t)},e.next=6,this.publicGetTicker(this.extend(n,r));case 6:return a=e.sent,s=this.safeValue(a,"data"),o=this.safeTimestamp(s,"timestamp"),u=this.safeNumber(s,"last"),e.abrupt("return",{symbol:t,timestamp:o,datetime:this.iso8601(o),high:this.safeNumber(s,"high"),low:this.safeNumber(s,"low"),bid:this.safeNumber(s,"bid"),bidVolume:void 0,ask:this.safeNumber(s,"ask"),vwap:void 0,askVolume:void 0,open:void 0,close:u,last:u,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeNumber(s,"amount"),quoteVolume:void 0,info:s});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTransactions",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:void 0,r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},e.next=6,this.loadMarkets();case 6:return s={limit:1e3},void 0!==n&&(s.limit=n),void 0!==r&&(s.timestampFrom=r),void 0!==t&&(s.currency=this.currencyId(t)),e.next=12,this.privatePostTransferHistory(this.extend(s,a));case 12:return o=e.sent,u=o.data,e.abrupt("return",this.parseTransactions(u,void 0,r,n));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTransactionStatus",value:function(e){return this.safeString({COMPLETED:"ok"},e,e)}},{key:"parseTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeInteger(e,"timestamp"),i=this.safeNumber(e,"amount"),n=this.safeNumber(e,"fee"),a=this.safeString(e,"txid"),s=this.safeString(e,"destination"),o=this.safeString(e,"destinationTag"),u=this.safeString(e,"amountCurrency"),c=this.safeCurrencyCode(u,t),d=this.safeStringLower(e,"transferType"),h=this.parseTransactionStatus(this.safeString(e,"transferStatus")),l=this.safeString(e,"transactionId");return{id:l,timestamp:r,datetime:this.iso8601(r),currency:c,amount:i,type:d,txid:a,address:s,tag:o,status:h,fee:{cost:n,currency:c},info:e}}},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return void 0===n&&(n=1e3),s={limit:n},void 0!==t&&(o=this.market(t),s.currencyPair=o.id),void 0!==r&&(s.timestampFrom=r),e.next=12,this.privatePostTradeHistory(this.extend(s,a));case 12:return u=e.sent,c=u.data,e.abrupt("return",this.parseTrades(c,void 0,r,n));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"currencyPair");t=this.safeMarket(r,t,"_");var i=this.safeString(e,"price"),n=this.safeString(e,"amount"),a=this.parseNumber(i),s=this.parseNumber(n),o=this.parseNumber(b.stringMul(i,n)),u=this.safeStringLower2(e,"type","tradeType"),c=this.safeStringLower(e,"orderType"),d=this.safeString(e,"orderId"),h=this.safeString(e,"transactionId"),l=this.safeInteger2(e,"timestamp","createdTimestamp"),f=void 0,p=this.safeNumber(e,"fee");void 0!==p&&(f={cost:p,currency:t.quote});var v=this.safeString(e,"feeType");return v="MAKER"===v?"maker":"taker",{id:h,info:e,timestamp:l,datetime:this.iso8601(l),symbol:t.symbol,type:c,side:u,order:d,takerOrMaker:v,price:a,amount:s,cost:o,fee:f}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={currencyPair:s.id,minutesIntoHistory:10},e.next=9,this.publicGetTransactions(this.extend(o,a));case 9:return u=e.sent,c=this.safeValue(u,"data",[]),e.abrupt("return",this.parseTrades(c,s,r,n));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.length>0&&void 0!==o[0]?o[0]:void 0,t=o.length>1&&void 0!==o[1]?o[1]:void 0,r=o.length>2&&void 0!==o[2]?o[2]:void 0,n=o.length>3&&void 0!==o[3]?o[3]:{},e.next=6,this.privatePostOpenOrders(this.extend({},n));case 6:return a=e.sent,s={status:"open"},e.abrupt("return",this.parseOrders(a.data,void 0,t,r,s));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=c.length>0&&void 0!==c[0]?c[0]:void 0,r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},void 0!==t){e.next=6;break}throw new p(this.id+" fetchOrders() requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.market(t),o={currencyPair:s.id},void 0!==n&&(o.limit=n),e.next=13,this.privatePostOrderHistory(this.extend(o,a));case 13:return u=e.sent,e.abrupt("return",this.parseOrders(u.data,s,r,n));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({FILLED:"closed",CANCELLED:"canceled",PARTIALLY_FILLED:"open",OPEN:"open"},e,e)}},{key:"parseOrderType",value:function(e){return this.safeString({LIMIT:"limit",MARKET:"market"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),i=this.safeInteger(e,"timestamp"),n=this.safeStringLower(e,"type"),a=this.safeNumber(e,"price"),s=this.safeNumber(e,"originalAmount"),o=this.safeNumber(e,"remainingAmount");void 0===o&&(o=this.safeNumber(e,"amount"));var u=this.parseOrderStatus(this.safeString(e,"status")),c=this.parseOrderType(this.safeString(e,"orderTradeType")),d=this.safeNumber(e,"avgPrice"),h=this.safeString(e,"currencyPair"),l=this.safeSymbol(h,t,"_"),f=this.safeString(e,"clientOrderId"),p=this.safeNumber(e,"stopPrice");return this.safeOrder({id:r,clientOrderId:f,timestamp:i,datetime:this.iso8601(i),lastTradeTimestamp:void 0,symbol:l,type:c,timeInForce:void 0,postOnly:void 0,side:n,price:a,stopPrice:p,amount:s,cost:void 0,average:d,filled:void 0,remaining:o,status:u,trades:void 0,info:e,fee:void 0})}},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,u,c,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=l.length>4&&void 0!==l[4]?l[4]:void 0,o=l.length>5&&void 0!==l[5]?l[5]:{},e.next=4,this.loadMarkets();case 4:return u="privatePost"+this.capitalize(n),c={currencyPair:this.marketId(t)},"market"===r?("buy"===n?c.total=this.amountToPrecision(t,a):c.amount=this.amountToPrecision(t,a),u+="Instant"):(c.amount=this.amountToPrecision(t,a),c.price=this.priceToPrecision(t,s),u+=this.capitalize(r)),e.next=9,this[u](this.extend(c,o));case 9:return d=e.sent,h=this.safeString(d,"data"),e.abrupt("return",{info:d,id:h});case 12:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:{},e.next=4,this.loadMarkets();case 4:return a={orderId:t},s=void 0,r&&(s=this.market(r)),e.next=9,this.privatePostOrderById(this.extend(a,n));case 9:return o=e.sent,u=this.safeValue(o,"data"),e.abrupt("return",this.parseOrder(u,s));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},n={orderId:t},e.next=5,this.privatePostCancelOrderWithInfo(this.extend(n,r));case 5:return a=e.sent,e.abrupt("return",{info:a});case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"nonce",value:function(){return this.milliseconds()}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.urls.api+"/"+e;if("public"===t)Object.keys(i).length&&(s+="?"+this.urlencode(i));else{this.checkRequiredCredentials();var o=this.nonce().toString(),u=o+this.uid+this.apiKey,c=this.hmac(this.encode(u),this.encode(this.secret));a=this.urlencode(this.extend({clientId:this.uid,nonce:o,publicKey:this.apiKey,signature:c.toUpperCase()},i)),n={"Content-Type":"application/x-www-form-urlencoded"}}return{url:s,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,u){if(void 0!==s&&"error"in s&&s.error){var c=this.safeString(s,"errorMessage"),d=this.id+" "+c;throw this.throwExactlyMatchedException(this.exceptions.exact,c,d),this.throwBroadlyMatchedException(this.exceptions.broad,c,d),new f(this.id+" "+this.json(s))}if(e>400){if(a){var h=this.id+" "+a;throw this.throwExactlyMatchedException(this.exceptions.exact,a,h),this.throwBroadlyMatchedException(this.exceptions.broad,a,h),new f(h)}throw new f(this.id+" "+a)}}}]),r}(h)},function(e,t,r){"use strict";var i=r(7),n=r(8),a=r(1),s=r(2),o=r(6),u=r(3),c=r(4),d=r(5),h=r(11),l=r(10),f=l.BadSymbol,p=l.BadRequest,v=l.ExchangeError,m=l.ArgumentsRequired,g=l.OrderNotFound,y=l.OnMaintenance,b=r(12);e.exports=function(e){c(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(u(r.prototype),"describe",this).call(this),{id:"coinone",name:"CoinOne",countries:["KR"],rateLimit:667,version:"v2",has:{cancelOrder:!0,CORS:!1,createMarketOrder:!1,createOrder:!0,fetchBalance:!0,fetchCurrencies:!1,fetchMarkets:!0,fetchMyTrades:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,fetchClosedOrders:!1},urls:{logo:"https://user-images.githubusercontent.com/1294454/38003300-adc12fba-323f-11e8-8525-725f53c4a659.jpg",api:"https://api.coinone.co.kr",www:"https://coinone.co.kr",doc:"https://doc.coinone.co.kr"},requiredCredentials:{apiKey:!0,secret:!0},api:{public:{get:["orderbook/","trades/","ticker/"]},private:{post:["account/btc_deposit_address/","account/balance/","account/daily_balance/","account/user_info/","account/virtual_account/","order/cancel_all/","order/cancel/","order/limit_buy/","order/limit_sell/","order/complete_orders/","order/limit_orders/","order/order_info/","transaction/auth_number/","transaction/history/","transaction/krw/history/","transaction/btc/","transaction/coin/"]}},fees:{trading:{tierBased:!1,percentage:!0,taker:.002,maker:.002}},precision:{price:4,amount:4,cost:8},exceptions:{405:y,104:g,108:f,107:p}})}},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l.length>0&&void 0!==l[0]?l[0]:{},t={currency:"all"},e.next=4,this.publicGetTicker(t);case 4:r=e.sent,n=[],a="krw",s=this.safeCurrencyCode(a),o=Object.keys(r),u=0;case 10:if(!(u<o.length)){e.next=21;break}if(c=o[u],d=this.safeValue(r,c,{}),void 0!==this.safeValue(d,"currency")){e.next=16;break}return e.abrupt("continue",18);case 16:h=this.safeCurrencyCode(c),n.push({id:c,symbol:h+"/"+s,base:h,quote:s,baseId:c,quoteId:a,active:!0});case 18:u++,e.next=10;break;case 21:return e.abrupt("return",n);case 22:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privatePostAccountBalance(t);case 5:for(r=e.sent,n={info:r},a=this.omit(r,["errorCode","result","normalWallets"]),s=Object.keys(a),o=0;o<s.length;o++)u=s[o],c=a[u],d=this.safeCurrencyCode(u),(h=this.account()).free=this.safeString(c,"avail"),h.total=this.safeString(c,"balance"),n[d]=h;return e.abrupt("return",this.parseBalance(n,!1));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u.length>1&&void 0!==u[1]?u[1]:void 0,r=u.length>2&&void 0!==u[2]?u[2]:{},e.next=4,this.loadMarkets();case 4:return n=this.market(t),a={currency:n.id,format:"json"},e.next=8,this.publicGetOrderbook(this.extend(a,r));case 8:return s=e.sent,o=this.safeTimestamp(s,"timestamp"),e.abrupt("return",this.parseOrderBook(s,o,"bid","ask","price","qty"));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.length>0&&void 0!==p[0]?p[0]:void 0,r=p.length>1&&void 0!==p[1]?p[1]:{},e.next=4,this.loadMarkets();case 4:return n={currency:"all",format:"json"},e.next=7,this.publicGetTicker(this.extend(n,r));case 7:for(a=e.sent,s={},o=Object.keys(a),u=this.safeTimestamp(a,"timestamp"),c=0;c<o.length;c++)d=o[c],h=d,l=void 0,d in this.markets_by_id&&(l=this.markets_by_id[d],h=l.symbol,f=a[d],s[h]=this.parseTicker(f,l),s[h].timestamp=u);return e.abrupt("return",this.filterByArray(s,"symbol",t));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={currency:n.id,format:"json"},e.next=7,this.publicGetTicker(this.extend(a,r));case 7:return s=e.sent,e.abrupt("return",this.parseTicker(s,n));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeTimestamp(e,"timestamp"),i=this.safeNumber(e,"first"),n=this.safeNumber(e,"last"),a=void 0;void 0!==i&&void 0!==n&&(a=this.sum(i,n)/2);var s=this.safeNumber(e,"yesterday_last"),o=void 0,u=void 0;void 0!==n&&void 0!==s&&(o=n-s,0!==s&&(u=o/s*100));var c=void 0!==t?t.symbol:void 0;return{symbol:c,timestamp:r,datetime:this.iso8601(r),high:this.safeNumber(e,"high"),low:this.safeNumber(e,"low"),bid:void 0,bidVolume:void 0,ask:void 0,askVolume:void 0,vwap:void 0,open:i,close:n,last:n,previousClose:s,change:o,percentage:u,average:a,baseVolume:this.safeNumber(e,"volume"),quoteVolume:void 0,info:e}}},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeTimestamp(e,"timestamp"),i=void 0!==t?t.symbol:void 0,n=this.safeString(e,"is_ask"),a=this.safeString(e,"type");void 0!==n?"1"===n?a="sell":"0"===n&&(a="buy"):"ask"===a?a="sell":"bid"===a&&(a="buy");var s=this.safeString(e,"price"),o=this.safeString(e,"qty"),u=this.parseNumber(s),c=this.parseNumber(o),d=this.parseNumber(b.stringMul(s,o)),h=this.safeString(e,"orderId"),l=this.safeNumber(e,"fee"),f=void 0;if(void 0!==l){l=Math.abs(l);var p=this.safeNumber(e,"feeRate");p=Math.abs(p);var v=void 0;void 0!==t&&(v="sell"===a?t.quote:t.base),f={cost:l,currency:v,rate:p}}return{id:this.safeString(e,"id"),info:e,timestamp:r,datetime:this.iso8601(r),order:h,symbol:i,type:void 0,side:a,takerOrMaker:void 0,price:u,amount:c,cost:d,fee:f}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={currency:s.id,format:"json"},e.next=9,this.publicGetTrades(this.extend(o,a));case 9:return u=e.sent,c=this.safeValue(u,"completeOrders",[]),e.abrupt("return",this.parseTrades(c,s,r,n));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=h.length>4&&void 0!==h[4]?h[4]:void 0,o=h.length>5&&void 0!==h[5]?h[5]:{},"limit"===r){e.next=4;break}throw new v(this.id+" allows limit orders only");case 4:return e.next=6,this.loadMarkets();case 6:return u={price:s,currency:this.marketId(t),qty:a},c="privatePostOrder"+this.capitalize(r)+this.capitalize(n),e.next=10,this[c](this.extend(u,o));case 10:return d=e.sent,e.abrupt("return",this.parseOrder(d));case 12:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:{},void 0!==r){e.next=4;break}throw new m(this.id+" fetchOrder() requires a symbol argument");case 4:return e.next=6,this.loadMarkets();case 6:return a=this.market(r),s={order_id:t,currency:a.id},e.next=10,this.privatePostOrderOrderInfo(this.extend(s,n));case 10:return o=e.sent,(u=this.safeValue(o,"info",{})).status=this.safeString(u,"status"),e.abrupt("return",this.parseOrder(u,a));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({live:"open",partially_filled:"open",filled:"closed"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"orderId"),i=this.safeNumber(e,"price"),n=this.safeTimestamp(e,"timestamp"),a=this.safeString(e,"type");"ask"===a?a="sell":"bid"===a&&(a="buy");var s=this.safeNumber(e,"remainQty"),o=this.safeNumber(e,"qty"),u=this.safeString(e,"status");"live"===u&&void 0!==s&&void 0!==o&&s<o&&(u="canceled"),u=this.parseOrderStatus(u);var c=void 0,d=void 0,h=void 0,l=this.safeStringLower(e,"currency");void 0!==l&&(l in this.markets_by_id?t=this.markets_by_id[l]:c=(d=this.safeCurrencyCode(l))+"/"+(h="KRW")),void 0===c&&void 0!==t&&(c=t.symbol,d=t.base,h=t.quote);var f=void 0,p=this.safeNumber(e,"fee");if(void 0!==p){var v="sell"===a?h:d;f={cost:p,rate:this.safeNumber(e,"feeRate"),currency:v}}return this.safeOrder({info:e,id:r,clientOrderId:void 0,timestamp:n,datetime:this.iso8601(n),lastTradeTimestamp:void 0,symbol:c,type:"limit",timeInForce:void 0,postOnly:void 0,side:a,price:i,stopPrice:void 0,cost:void 0,average:void 0,amount:o,filled:void 0,remaining:o,status:u,fee:f,trades:void 0})}},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},void 0!==t){e.next=6;break}throw new v(this.id+" allows fetching closed orders with a specific symbol");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.market(t),o={currency:s.id},e.next=12,this.privatePostOrderLimitOrders(this.extend(o,a));case 12:return u=e.sent,c=this.safeValue(u,"limitOrders",[]),e.abrupt("return",this.parseOrders(c,s,r,n));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},void 0!==t){e.next=6;break}throw new m(this.id+" fetchMyTrades() requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.market(t),o={currency:s.id},e.next=12,this.privatePostOrderCompleteOrders(this.extend(o,a));case 12:return u=e.sent,c=this.safeValue(u,"completeOrders",[]),e.abrupt("return",this.parseTrades(c,s,r,n));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:{},void 0!==r){e.next=4;break}throw new m(this.id+" cancelOrder() requires a symbol argument. To cancel the order, pass a symbol argument and {'price': 12345, 'qty': 1.2345, 'is_ask': 0} in the params argument of cancelOrder.");case 4:if(a=this.safeNumber(n,"price"),s=this.safeNumber(n,"qty"),o=this.safeInteger(n,"is_ask"),void 0!==a&&void 0!==s&&void 0!==o){e.next=9;break}throw new m(this.id+" cancelOrder() requires {'price': 12345, 'qty': 1.2345, 'is_ask': 0} in the params argument.");case 9:return e.next=11,this.loadMarkets();case 11:return u={order_id:t,price:a,qty:s,is_ask:o,currency:this.marketId(r)},e.next=14,this.privatePostOrderCancel(this.extend(u,n));case 14:return c=e.sent,e.abrupt("return",c);case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.implodeParams(e,i),o=this.omit(i,this.extractParams(e)),u=this.urls.api+"/";if("public"===t)u+=s,Object.keys(o).length&&(u+="?"+this.urlencode(o));else{this.checkRequiredCredentials(),u+=this.version+"/"+s;var c=this.nonce().toString(),d=this.json(this.extend({access_token:this.apiKey,nonce:c},i)),h=this.stringToBase64(d);a=this.decode(h);var l=this.secret.toUpperCase(),f=this.hmac(h,this.encode(l),"sha512");n={"Content-Type":"application/json","X-COINONE-PAYLOAD":h,"X-COINONE-SIGNATURE":f}}return{url:u,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,u){if(void 0!==s){if(!("result"in s))throw new v(this.id+" "+a);if("success"!==s.result){var c=this.safeString(s,"errorCode"),d=this.id+" "+a;throw this.throwExactlyMatchedException(this.exceptions,c,d),new v(d)}}}}]),r}(h)},function(e,t,r){"use strict";var i=r(7),n=r(8),a=r(1),s=r(2),o=r(6),u=r(3),c=r(4),d=r(5),h=r(11),l=r(10),f=l.ExchangeError,p=l.ArgumentsRequired,v=l.AuthenticationError,m=r(12);e.exports=function(e){c(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(u(r.prototype),"describe",this).call(this),{id:"coinspot",name:"CoinSpot",countries:["AU"],rateLimit:1e3,has:{cancelOrder:!1,CORS:!1,createMarketOrder:!1,createOrder:!0,fetchBalance:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTrades:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/28208429-3cacdf9a-6896-11e7-854e-4c79a772a30f.jpg",api:{public:"https://www.coinspot.com.au/pubapi",private:"https://www.coinspot.com.au/api"},www:"https://www.coinspot.com.au",doc:"https://www.coinspot.com.au/api",referral:"https://www.coinspot.com.au/register?code=PJURCU"},api:{public:{get:["latest"]},private:{post:["orders","orders/history","my/coin/deposit","my/coin/send","quote/buy","quote/sell","my/balances","my/orders","my/buy","my/sell","my/buy/cancel","my/sell/cancel","ro/my/balances","ro/my/balances/{cointype}","ro/my/deposits","ro/my/withdrawals","ro/my/transactions","ro/my/transactions/{cointype}","ro/my/transactions/open","ro/my/transactions/{cointype}/open","ro/my/sendreceive","ro/my/affiliatepayments","ro/my/referralpayments"]}},markets:{"BTC/AUD":{id:"btc",symbol:"BTC/AUD",base:"BTC",quote:"AUD",baseId:"btc",quoteId:"aud"},"ETH/AUD":{id:"eth",symbol:"ETH/AUD",base:"ETH",quote:"AUD",baseId:"eth",quoteId:"aud"},"XRP/AUD":{id:"xrp",symbol:"XRP/AUD",base:"XRP",quote:"AUD",baseId:"xrp",quoteId:"aud"},"LTC/AUD":{id:"ltc",symbol:"LTC/AUD",base:"LTC",quote:"AUD",baseId:"ltc",quoteId:"aud"},"DOGE/AUD":{id:"doge",symbol:"DOGE/AUD",base:"DOGE",quote:"AUD",baseId:"doge",quoteId:"aud"},"RFOX/AUD":{id:"rfox",symbol:"RFOX/AUD",base:"RFOX",quote:"AUD",baseId:"rfox",quoteId:"aud"},"POWR/AUD":{id:"powr",symbol:"POWR/AUD",base:"POWR",quote:"AUD",baseId:"powr",quoteId:"aud"},"NEO/AUD":{id:"neo",symbol:"NEO/AUD",base:"NEO",quote:"AUD",baseId:"neo",quoteId:"aud"},"TRX/AUD":{id:"trx",symbol:"TRX/AUD",base:"TRX",quote:"AUD",baseId:"trx",quoteId:"aud"},"EOS/AUD":{id:"eos",symbol:"EOS/AUD",base:"EOS",quote:"AUD",baseId:"eos",quoteId:"aud"},"XLM/AUD":{id:"xlm",symbol:"XLM/AUD",base:"XLM",quote:"AUD",baseId:"xlm",quoteId:"aud"},"RHOC/AUD":{id:"rhoc",symbol:"RHOC/AUD",base:"RHOC",quote:"AUD",baseId:"rhoc",quoteId:"aud"},"GAS/AUD":{id:"gas",symbol:"GAS/AUD",base:"GAS",quote:"AUD",baseId:"gas",quoteId:"aud"}},commonCurrencies:{DRK:"DASH"},options:{fetchBalance:"private_post_my_balances"}})}},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p,v,m,g,y,b,x=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=x.length>0&&void 0!==x[0]?x[0]:{},e.next=3,this.loadMarkets();case 3:return r=this.safeString(this.options,"fetchBalance","private_post_my_balances"),e.next=6,this[r](t);case 6:if(n=e.sent,a={info:n},s=this.safeValue2(n,"balance","balances"),Array.isArray(s))for(o=0;o<s.length;o++)for(u=s[o],c=Object.keys(u),d=0;d<c.length;d++)h=c[d],l=u[h],f=this.safeCurrencyCode(h),(p=this.account()).total=this.safeString(l,"balance"),a[f]=p;else for(v=Object.keys(s),m=0;m<v.length;m++)g=v[m],y=this.safeCurrencyCode(g),(b=this.account()).total=this.safeString(s,g),a[y]=b;return e.abrupt("return",this.parseBalance(a,!1));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.length>1&&void 0!==o[1]?o[1]:void 0,r=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return n=this.market(t),a={cointype:n.id},e.next=8,this.privatePostOrders(this.extend(a,r));case 8:return s=e.sent,e.abrupt("return",this.parseOrderBook(s,void 0,"buyorders","sellorders","rate","amount"));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.publicGetLatest(r);case 5:return n=e.sent,a=(a=this.marketId(t)).toLowerCase(),s=n.prices[a],o=this.milliseconds(),u=this.safeNumber(s,"last"),e.abrupt("return",{symbol:t,timestamp:o,datetime:this.iso8601(o),high:void 0,low:void 0,bid:this.safeNumber(s,"bid"),bidVolume:void 0,ask:this.safeNumber(s,"ask"),askVolume:void 0,vwap:void 0,open:void 0,close:u,last:u,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:void 0,quoteVolume:void 0,info:s});case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={cointype:s.id},e.next=9,this.privatePostOrdersHistory(this.extend(o,a));case 9:return u=e.sent,c=this.safeValue(u,"orders",[]),e.abrupt("return",this.parseTrades(c,s,r,n));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"rate"),i=this.safeString(e,"amount"),n=this.parseNumber(r),a=this.parseNumber(i),s=this.safeNumber(e,"total");void 0===s&&(s=this.parseNumber(m.stringMul(r,i)));var o=this.safeInteger(e,"solddate"),u=this.safeString(e,"market"),c=this.safeSymbol(u,t,"/");return{info:e,id:void 0,symbol:c,timestamp:o,datetime:this.iso8601(o),order:void 0,type:void 0,side:void 0,takerOrMaker:void 0,price:n,amount:a,cost:s,fee:void 0}}},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=d.length>4&&void 0!==d[4]?d[4]:void 0,o=d.length>5&&void 0!==d[5]?d[5]:{},e.next=4,this.loadMarkets();case 4:if(u="privatePostMy"+this.capitalize(n),"market"!==r){e.next=7;break}throw new f(this.id+" allows limit orders only");case 7:return c={cointype:this.marketId(t),amount:a,rate:s},e.next=10,this[u](this.extend(c,o));case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o.length>1&&void 0!==o[1]?o[1]:void 0,r=o.length>2&&void 0!==o[2]?o[2]:{},"buy"===(n=this.safeString(r,"side"))||"sell"===n){e.next=5;break}throw new p(this.id+' cancelOrder() requires a side parameter, "buy" or "sell"');case 5:return r=this.omit(r,"side"),a="privatePostMy"+this.capitalize(n)+"Cancel",s={id:t},e.next=10,this[a](this.extend(s,r));case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0;if(!this.apiKey)throw new v(this.id+" requires apiKey for all requests");var s=this.urls.api[t]+"/"+e;if("private"===t){this.checkRequiredCredentials();var o=this.nonce();a=this.json(this.extend({nonce:o},i)),n={"Content-Type":"application/json",key:this.apiKey,sign:this.hmac(this.encode(a),this.encode(this.secret),"sha512")}}return{url:s,method:r,body:a,headers:n}}}]),r}(h)},function(e,t,r){"use strict";var i=r(7),n=r(8),a=r(1),s=r(2),o=r(6),u=r(3),c=r(4),d=r(5),h=r(11),l=r(10),f=l.ExchangeError,p=l.BadRequest,v=l.InvalidNonce,m=l.RequestTimeout,g=l.ExchangeNotAvailable,y=l.InsufficientFunds,b=l.OrderNotFound,x=l.InvalidOrder,k=l.DDoSProtection,w=l.AuthenticationError,_=l.BadSymbol,S=r(18).TICK_SIZE,O=r(12);e.exports=function(e){c(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(u(r.prototype),"describe",this).call(this),{id:"crex24",name:"CREX24",countries:["EE"],rateLimit:500,version:"v2",has:{cancelAllOrders:!0,cancelOrder:!0,CORS:!1,createOrder:!0,editOrder:!0,fetchBalance:!0,fetchBidsAsks:!0,fetchClosedOrders:!0,fetchCurrencies:!0,fetchDepositAddress:!0,fetchDeposits:!0,fetchFundingFees:!1,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchOrderTrades:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,fetchTradingFee:!1,fetchTradingFees:!1,fetchTransactions:!0,fetchWithdrawals:!0,withdraw:!0},timeframes:{"1m":"1m","3m":"3m","5m":"5m","15m":"15m","30m":"30m","1h":"1h","4h":"4h","1d":"1d","1w":"1w","1M":"1mo"},urls:{logo:"https://user-images.githubusercontent.com/1294454/47813922-6f12cc00-dd5d-11e8-97c6-70f957712d47.jpg",api:"https://api.crex24.com",www:"https://crex24.com",referral:"https://crex24.com/?refid=slxsjsjtil8xexl9hksr",doc:"https://docs.crex24.com/trade-api/v2",fees:"https://crex24.com/fees"},api:{public:{get:["currencies","instruments","tickers","recentTrades","orderBook","ohlcv"]},trading:{get:["orderStatus","orderTrades","activeOrders","orderHistory","tradeHistory","tradeFee","moneyTransferStatus"],post:["placeOrder","modifyOrder","cancelOrdersById","cancelOrdersByInstrument","cancelAllOrders"]},account:{get:["balance","depositAddress","moneyTransfers","moneyTransferStatus","previewWithdrawal"],post:["withdraw"]}},precisionMode:S,fees:{trading:{tierBased:!0,percentage:!0,taker:.001,maker:-1e-4},funding:{tierBased:!1,percentage:!1,withdraw:{},deposit:{}}},commonCurrencies:{BCC:"BCH",BIT:"BitMoney",BULL:"BuySell",CREDIT:"TerraCredit",EPS:"Epanus",GHOST:"GHOSTPRISM",IQ:"IQ.Cash",PUT:"PutinCoin",SBTC:"SBTCT",UNI:"Universe",YOYO:"YOYOW"},options:{fetchOrdersMethod:"tradingGetOrderHistory",fetchClosedOrdersMethod:"tradingGetOrderHistory",fetchTickersMethod:"publicGetTicker24hr",defaultTimeInForce:"GTC",hasAlreadyAuthenticatedSuccessfully:!1,warnOnFetchOpenOrdersWithoutSymbol:!0,parseOrderToPrecision:!1,newOrderRespType:"RESULT"},exceptions:{exact:{"Parameter 'filter' contains invalid value.":p,"Mandatory parameter 'instrument' is missing.":p,"The value of parameter 'till' must be greater than or equal to the value of parameter 'from'.":p,"Failed to verify request signature.":w,"Nonce error. Make sure that the value passed in the 'X-CREX24-API-NONCE' header is greater in each consecutive request than in the previous one for the corresponding API-Key provided in 'X-CREX24-API-KEY' header.":v,"Market orders are not supported by the instrument currently.":x,"Parameter 'instrument' contains invalid value.":_},broad:{"try again later":g,"API Key":w,"Insufficient funds":y,"has been delisted.":_,"is currently suspended.":_,"Mandatory parameter":p}}})}},{key:"nonce",value:function(){return this.milliseconds()}},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p,v,m,g,y=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=y.length>0&&void 0!==y[0]?y[0]:{},e.next=3,this.publicGetInstruments(t);case 3:for(r=e.sent,n=[],a=0;a<r.length;a++)s=r[a],o=this.safeString(s,"symbol"),u=this.safeString(s,"baseCurrency"),c=this.safeString(s,"quoteCurrency"),d=this.safeCurrencyCode(u),h=this.safeCurrencyCode(c),l=d+"/"+h,f=this.safeNumber(s,"tickSize"),p=this.safeNumber(s,"minPrice"),v=this.safeNumber(s,"minVolume"),m={amount:v,price:f},g="active"===s.state,n.push({id:o,symbol:l,base:d,quote:h,baseId:u,quoteId:c,info:s,active:g,precision:m,limits:{amount:{min:v,max:void 0},price:{min:p,max:void 0},cost:{min:void 0,max:void 0}}});return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchCurrencies",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.length>0&&void 0!==p[0]?p[0]:{},e.next=3,this.publicGetCurrencies(t);case 3:for(r=e.sent,n={},a=0;a<r.length;a++)s=r[a],o=this.safeString(s,"symbol"),u=this.safeCurrencyCode(o),c=this.safeInteger(s,"withdrawalPrecision"),d=Math.pow(10,-c),h=this.safeValue(s,"BaseAddress"),l=s.depositsAllowed&&s.withdrawalsAllowed&&!s.isDelisted,f=s.isFiat?"fiat":"crypto",n[u]={id:o,code:u,address:h,info:s,type:f,name:this.safeString(s,"name"),active:l,fee:this.safeNumber(s,"flatWithdrawalFee"),precision:d,limits:{amount:{min:Math.pow(10,-d),max:Math.pow(10,d)},deposit:{min:this.safeNumber(s,"minDeposit"),max:void 0},withdraw:{min:this.safeNumber(s,"minWithdrawal"),max:this.safeNumber(s,"maxWithdrawal")}}};return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:{},e.next=3,this.loadMarkets();case 3:return r={},e.next=6,this.accountGetBalance(this.extend(r,t));case 6:for(n=e.sent,a={info:n},s=0;s<n.length;s++)o=n[s],u=this.safeString(o,"currency"),c=this.safeCurrencyCode(u),(d=this.account()).free=this.safeString(o,"available"),d.used=this.safeString(o,"reserved"),a[c]=d;return e.abrupt("return",this.parseBalance(a,!1));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:{},e.next=4,this.loadMarkets();case 4:return a=this.market(t),s={instrument:a.id},void 0!==r&&(s.limit=r),e.next=9,this.publicGetOrderBook(this.extend(s,n));case 9:return o=e.sent,e.abrupt("return",this.parseOrderBook(o,void 0,"buyLevels","sellLevels","price","volume"));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.parse8601(this.safeString(e,"timestamp")),i=this.safeString(e,"instrument"),n=this.safeSymbol(i,t,"-"),a=this.safeNumber(e,"last");return{symbol:n,timestamp:r,datetime:this.iso8601(r),high:this.safeNumber(e,"high"),low:this.safeNumber(e,"low"),bid:this.safeNumber(e,"bid"),bidVolume:void 0,ask:this.safeNumber(e,"ask"),askVolume:void 0,vwap:void 0,open:void 0,close:a,last:a,previousClose:void 0,change:void 0,percentage:this.safeNumber(e,"percentChange"),average:void 0,baseVolume:this.safeNumber(e,"baseVolume"),quoteVolume:this.safeNumber(e,"quoteVolume"),info:e}}},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={instrument:n.id},e.next=7,this.publicGetTickers(this.extend(a,r));case 7:if(s=e.sent,!(s.length<1)){e.next=11;break}throw new f(this.id+" fetchTicker could not load quotes for symbol "+t);case 11:return e.abrupt("return",this.parseTicker(s[0],n));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=4,this.loadMarkets();case 4:return n={},void 0!==t&&(a=this.marketIds(t),n.instrument=a.join(",")),e.next=8,this.publicGetTickers(this.extend(n,r));case 8:return s=e.sent,e.abrupt("return",this.parseTickers(s,t));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.parse8601(this.safeString(e,"timestamp")),i=this.safeString(e,"price"),n=this.safeString(e,"volume"),a=this.parseNumber(i),s=this.parseNumber(n),o=this.parseNumber(O.stringMul(i,n)),u=this.safeString(e,"id"),c=this.safeString(e,"side"),d=this.safeString(e,"orderId"),h=this.safeString(e,"instrument"),l=this.safeSymbol(h,t,"-"),f=void 0,p=this.safeString(e,"feeCurrency"),v=this.safeCurrencyCode(p),m=this.safeNumber(e,"fee");void 0!==m&&(f={cost:m,currency:v});var g=void 0;return{info:e,timestamp:r,datetime:this.iso8601(r),symbol:l,id:u,order:d,type:void 0,takerOrMaker:g,side:c,price:a,cost:o,amount:s,fee:f}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={instrument:s.id},void 0!==n&&(o.limit=n),e.next=10,this.publicGetRecentTrades(this.extend(o,a));case 10:return u=e.sent,e.abrupt("return",this.parseTrades(u,s,r,n));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){return[this.parse8601(this.safeString(e,"timestamp")),this.safeNumber(e,"open"),this.safeNumber(e,"high"),this.safeNumber(e,"low"),this.safeNumber(e,"close"),this.safeNumber(e,"volume")]}},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:"1m",n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:void 0,s=d.length>4&&void 0!==d[4]?d[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),u={granularity:this.timeframes[r],instrument:o.id},void 0!==a&&(u.limit=a),e.next=11,this.publicGetOhlcv(this.extend(u,s));case 11:return c=e.sent,e.abrupt("return",this.parseOHLCVs(c,o,r,n,a));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){var t={submitting:"open",unfilledActive:"open",partiallyFilledActive:"open",filled:"closed",partiallyFilledCancelled:"canceled",unfilledCancelled:"canceled"};return e in t?t[e]:e}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.parseOrderStatus(this.safeString(e,"status")),i=this.safeString(e,"instrument"),n=this.safeSymbol(i,t,"-"),a=this.parse8601(this.safeString(e,"timestamp")),s=this.safeNumber(e,"price"),o=this.safeNumber(e,"volume"),u=this.safeNumber(e,"remainingVolume"),c=this.parse8601(this.safeString(e,"lastUpdate")),d=this.safeString(e,"id"),h=this.safeString(e,"type"),l=this.safeString(e,"side"),f=void 0,p=void 0,v=void 0,m=this.safeString(e,"timeInForce"),g=this.safeNumber(e,"stopPrice");return this.safeOrder({info:e,id:d,clientOrderId:void 0,timestamp:a,datetime:this.iso8601(a),lastTradeTimestamp:c,symbol:n,type:h,timeInForce:m,side:l,price:s,stopPrice:g,amount:o,cost:void 0,average:v,filled:void 0,remaining:u,status:r,fee:f,trades:p})}},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,u,c,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=p.length>4&&void 0!==p[4]?p[4]:void 0,o=p.length>5&&void 0!==p[5]?p[5]:{},e.next=4,this.loadMarkets();case 4:if(u=this.market(t),c={instrument:u.id,volume:this.amountToPrecision(t,a),type:r,side:n},d=!1,h=!1,"limit"===r?d=!0:"stopLimit"===r&&(d=!0,h=!0),!d){e.next=13;break}if(void 0!==s){e.next=12;break}throw new x(this.id+" createOrder() requires a price argument for a "+r+" order");case 12:c.price=this.priceToPrecision(t,s);case 13:if(!h){e.next=21;break}if(void 0!==(l=this.safeNumber(o,"stopPrice"))){e.next=19;break}throw new x(this.id+" createOrder() requires a stopPrice extra param for a "+r+" order");case 19:c.stopPrice=this.priceToPrecision(t,l);case 20:o=this.omit(o,"stopPrice");case 21:return e.next=23,this.tradingPostPlaceOrder(this.extend(c,o));case 23:return f=e.sent,e.abrupt("return",this.parseOrder(f,u));case 25:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.loadMarkets();case 4:return n={id:t},e.next=7,this.tradingGetOrderStatus(this.extend(n,r));case 7:if(a=e.sent,!(a.length<1)){e.next=11;break}throw new b(this.id+" fetchOrder could not fetch order id "+t);case 11:return e.abrupt("return",this.parseOrder(a[0]));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return s={},void 0!==r&&(s.from=this.ymdhms(r,"T")),void 0!==n&&(s.limit=n),void 0!==t&&(o=this.market(t),s.instrument=o.id),u=this.safeString(this.options,"fetchOrdersMethod","tradingGetOrderHistory"),e.next=13,this[u](this.extend(s,a));case 13:return c=e.sent,e.abrupt("return",this.parseOrders(c));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrdersByIds",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.loadMarkets();case 6:return s={id:t.join(",")},e.next=9,this.tradingGetOrderStatus(this.extend(s,a));case 9:return o=e.sent,e.abrupt("return",this.parseOrders(o,void 0,r,n));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:void 0,r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},e.next=6,this.loadMarkets();case 6:return s=void 0,o={},void 0!==t&&(s=this.market(t),o.instrument=s.id),e.next=11,this.tradingGetActiveOrders(this.extend(o,a));case 11:return u=e.sent,e.abrupt("return",this.parseOrders(u,s,r,n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return s=void 0,o={},void 0!==t&&(s=this.market(t),o.instrument=s.id),void 0!==r&&(o.from=this.ymdhms(r,"T")),void 0!==n&&(o.limit=n),u=this.safeString(this.options,"fetchClosedOrdersMethod","tradingGetOrderHistory"),e.next=14,this[u](this.extend(o,a));case 14:return c=e.sent,e.abrupt("return",this.parseOrders(c,s,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.loadMarkets();case 4:return n={ids:[parseInt(t)]},e.next=7,this.tradingPostCancelOrdersById(this.extend(n,r));case 7:return a=e.sent,e.abrupt("return",this.parseOrder(a));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cancelAllOrders",value:function(){var e=n(i.mark((function e(){var t,r,n=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.length>0&&void 0!==n[0]?n[0]:void 0,t=n.length>1&&void 0!==n[1]?n[1]:{},e.next=4,this.tradingPostCancelAllOrders(t);case 4:return r=e.sent,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:void 0,r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},e.next=6,this.loadMarkets();case 6:return s=void 0,o={},void 0!==t&&(s=this.market(t),o.instrument=s.id),void 0!==r&&(o.from=this.ymdhms(r,"T")),void 0!==n&&(o.limit=n),e.next=13,this.tradingGetTradeHistory(this.extend(o,a));case 13:return u=e.sent,e.abrupt("return",this.parseTrades(u,s,r,n));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTransactions",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:void 0,r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},e.next=6,this.loadMarkets();case 6:return s=void 0,o={},void 0!==t&&(s=this.currency(t),o.currency=s.id),void 0!==r&&(o.from=this.ymd(r,"T")),e.next=12,this.accountGetMoneyTransfers(this.extend(o,a));case 12:return u=e.sent,e.abrupt("return",this.parseTransactions(u,s,r,n));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchDeposits",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:void 0,a=o.length>3&&void 0!==o[3]?o[3]:{},s={type:"deposit"},e.abrupt("return",this.fetchTransactions(t,r,n,this.extend(s,a)));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchWithdrawals",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:void 0,a=o.length>3&&void 0!==o[3]?o[3]:{},s={type:"withdrawal"},e.abrupt("return",this.fetchTransactions(t,r,n,this.extend(s,a)));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTransactionStatus",value:function(e){return this.safeString({pending:"pending",success:"ok",failed:"failed"},e,e)}},{key:"parseTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),i=this.safeString(e,"address"),n=this.safeString(e,"paymentId"),a=this.safeValue(e,"txId"),s=this.safeString(e,"currency"),o=this.safeCurrencyCode(s,t),u=this.safeString(e,"type"),c=this.parse8601(this.safeString(e,"createdAt")),d=this.parse8601(this.safeString(e,"processedAt")),h=this.parseTransactionStatus(this.safeString(e,"status")),l=this.safeNumber(e,"amount"),f=this.safeNumber(e,"fee"),p={cost:f,currency:o};return{info:e,id:r,txid:a,timestamp:c,datetime:this.iso8601(c),address:i,tag:n,type:u,amount:l,currency:o,status:h,updated:d,fee:p}}},{key:"fetchDepositAddress",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.currency(t),a={currency:n.id},e.next=7,this.accountGetDepositAddress(this.extend(a,r));case 7:return s=e.sent,o=this.safeString(s,"address"),u=this.safeString(s,"paymentId"),e.abrupt("return",{currency:t,address:this.checkAddress(o),tag:u,info:s});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"withdraw",value:function(){var e=n(i.mark((function e(t,r,n){var a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=d.length>3&&void 0!==d[3]?d[3]:void 0,s=d.length>4&&void 0!==d[4]?d[4]:{},this.checkAddress(n),e.next=5,this.loadMarkets();case 5:return o=this.currency(t),u={currency:o.id,address:n,amount:parseFloat(this.currencyToPrecision(t,r)),feeCurrency:o.id},void 0!==a&&(u.paymentId=a),e.next=10,this.accountPostWithdraw(this.extend(u,s));case 10:return c=e.sent,e.abrupt("return",this.parseTransaction(c));case 12:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s="/"+this.version+"/"+t+"/"+this.implodeParams(e,i),o=this.omit(i,this.extractParams(e));"GET"===r&&Object.keys(o).length&&(s+="?"+this.urlencode(o));var u=this.urls.api+s;if("trading"===t||"account"===t){this.checkRequiredCredentials();var c=this.nonce().toString(),d=this.base64ToBinary(this.secret),h=s+c;n={"X-CREX24-API-KEY":this.apiKey,"X-CREX24-API-NONCE":c},"POST"===r&&(n["Content-Type"]="application/json",h+=a=this.json(i)),n["X-CREX24-API-SIGN"]=this.hmac(this.encode(h),d,"sha512","base64")}return{url:u,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,u){if(this.isJsonEncodedObject(a)&&!(e>=200&&e<300)){var c=this.safeString(s,"errorDescription"),d=this.id+" "+a;if(this.throwExactlyMatchedException(this.exceptions.exact,c,d),this.throwBroadlyMatchedException(this.exceptions.broad,c,d),400===e)throw new p(d);if(401===e)throw new w(d);if(403===e)throw new w(d);if(429===e)throw new k(d);if(500===e)throw new f(d);if(503===e)throw new g(d);if(504===e)throw new m(d);throw new f(d)}}}]),r}(h)},function(e,t,r){"use strict";var i=r(7),n=r(8),a=r(1),s=r(2),o=r(6),u=r(3),c=r(4),d=r(5),h=r(11),l=r(10),f=l.ExchangeError,p=l.ArgumentsRequired,v=l.ExchangeNotAvailable,m=l.InsufficientFunds,g=l.OrderNotFound,y=l.InvalidOrder,b=l.DDoSProtection,x=l.InvalidNonce,k=l.AuthenticationError,w=l.BadRequest,_=r(18).TICK_SIZE,S=r(12);e.exports=function(e){c(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(u(r.prototype),"describe",this).call(this),{id:"currencycom",name:"Currency.com",countries:["BY"],rateLimit:500,certified:!0,pro:!0,version:"v1",has:{cancelOrder:!0,CORS:!1,createOrder:!0,fetchAccounts:!0,fetchBalance:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTickers:!0,fetchTime:!0,fetchTradingFees:!0,fetchTrades:!0},timeframes:{"1m":"1m","3m":"3m","5m":"5m","15m":"15m","30m":"30m","1h":"1h","4h":"4h","1d":"1d","1w":"1w"},urls:{logo:"https://user-images.githubusercontent.com/1294454/83718672-36745c00-a63e-11ea-81a9-677b1f789a4d.jpg",api:{public:"https://api-adapter.backend.currency.com/api",private:"https://api-adapter.backend.currency.com/api"},www:"https://www.currency.com",referral:"https://currency.com/trading/signup?c=362jaimv&pid=referral",doc:["https://currency.com/api"],fees:"https://currency.com/fees-charges"},api:{public:{get:["time","exchangeInfo","depth","aggTrades","klines","ticker/24hr"]},private:{get:["leverageSettings","openOrders","tradingPositions","account","myTrades"],post:["order","updateTradingPosition","updateTradingOrder","closeTradingPosition"],delete:["order"]}},fees:{trading:{feeSide:"get",tierBased:!1,percentage:!0,taker:.002,maker:.002}},precisionMode:_,options:{defaultTimeInForce:"GTC",warnOnFetchOpenOrdersWithoutSymbol:!0,recvWindow:5e3,timeDifference:0,adjustForTimeDifference:!1,parseOrderToPrecision:!1,newOrderRespType:{market:"FULL",limit:"RESULT",stop:"RESULT"}},exceptions:{broad:{"FIELD_VALIDATION_ERROR Cancel is available only for LIMIT order":y,"API key does not exist":k,"Order would trigger immediately.":y,"Account has insufficient balance for requested action.":m,"Rest API trading is not enabled.":v},exact:{"-1000":v,"-1013":y,"-1021":x,"-1022":k,"-1100":y,"-1104":f,"-1025":k,"-1128":w,"-2010":f,"-2011":g,"-2013":g,"-2014":k,"-2015":k}},commonCurrencies:{IQ:"iQIYI"}})}},{key:"nonce",value:function(){return this.milliseconds()-this.options.timeDifference}},{key:"fetchTime",value:function(){var e=n(i.mark((function e(){var t,r,n=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},e.next=3,this.publicGetTime(t);case 3:return r=e.sent,e.abrupt("return",this.safeInteger(r,"serverTime"));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadTimeDifference",value:function(){var e=n(i.mark((function e(){var t,r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},e.next=3,this.publicGetTime(t);case 3:return r=e.sent,n=this.milliseconds(),this.options.timeDifference=parseInt(n-r.serverTime),e.abrupt("return",this.options.timeDifference);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p,v,m,g,y,b,x,k,w,_,S,O,T,C,I,M=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=M.length>0&&void 0!==M[0]?M[0]:{},e.next=3,this.publicGetExchangeInfo(t);case 3:if(r=e.sent,!this.options.adjustForTimeDifference){e.next=7;break}return e.next=7,this.loadTimeDifference();case 7:for(n=this.safeValue(r,"symbols"),a=[],s=0;s<n.length;s++)o=n[s],u=this.safeString(o,"symbol"),c=this.safeString(o,"baseAsset"),d=this.safeString(o,"quoteAsset"),h=this.safeCurrencyCode(c),l=this.safeCurrencyCode(d),f=h+"/"+l,u.indexOf("/")>=0&&(f=u),p=this.safeValue(o,"filters",[]),v=this.indexBy(p,"filterType"),m={amount:1/Math.pow(1,this.safeInteger(o,"baseAssetPrecision")),price:this.safeNumber(o,"tickSize")},g=this.safeString(o,"status"),y="TRADING"===g,"leverage"===(b=this.safeStringLower(o,"marketType"))&&(b="margin"),x={id:u,symbol:f,base:h,quote:l,baseId:c,quoteId:d,type:b,spot:"spot"===b,margin:"margin"===b,info:o,active:y,precision:m,limits:{amount:{min:Math.pow(10,-m.amount),max:void 0},price:{min:void 0,max:void 0},cost:{min:-Math.log10(m.amount),max:void 0}}},k=this.safeNumber2(o,"exchangeFee","tradingFee"),w=this.safeNumber(o,"makerFee",k),_=this.safeNumber(o,"takerFee",k),void 0!==w&&(x.maker=w/100),void 0!==_&&(x.taker=_/100),"PRICE_FILTER"in v&&(S=this.safeValue(v,"PRICE_FILTER",{}),x.precision.price=this.safeNumber(S,"tickSize"),x.limits.price={min:this.safeNumber(S,"minPrice"),max:void 0},void 0!==(O=this.safeNumber(S,"maxPrice"))&&O>0&&(x.limits.price.max=O)),"LOT_SIZE"in v&&(T=this.safeValue(v,"LOT_SIZE",{}),x.precision.amount=this.safeNumber(T,"stepSize"),x.limits.amount={min:this.safeNumber(T,"minQty"),max:this.safeNumber(T,"maxQty")}),"MARKET_LOT_SIZE"in v&&(C=this.safeValue(v,"MARKET_LOT_SIZE",{}),x.limits.market={min:this.safeNumber(C,"minQty"),max:this.safeNumber(C,"maxQty")}),"MIN_NOTIONAL"in v&&(I=this.safeValue(v,"MIN_NOTIONAL",{}),x.limits.cost.min=this.safeNumber(I,"minNotional")),a.push(x);return e.abrupt("return",a);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchAccounts",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:{},e.next=3,this.privateGetAccount(t);case 3:for(r=e.sent,n=this.safeValue(r,"balances",[]),a=[],s=0;s<n.length;s++)o=n[s],u=this.safeInteger(o,"accountId"),c=this.safeString(o,"asset"),d=this.safeCurrencyCode(c),a.push({id:u,type:void 0,currency:d,info:r});return e.abrupt("return",a);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTradingFees",value:function(){var e=n(i.mark((function e(){var t,r,n=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetAccount(t);case 5:return r=e.sent,e.abrupt("return",{info:r,maker:this.safeNumber(r,"makerCommission"),taker:this.safeNumber(r,"takerCommission")});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseBalanceResponse",value:function(e){for(var t={info:e},r=this.safeValue(e,"balances",[]),i=0;i<r.length;i++){var n=r[i],a=this.safeString(n,"asset"),s=this.safeCurrencyCode(a),o=this.account();o.free=this.safeString(n,"free"),o.used=this.safeString(n,"locked"),t[s]=o}return this.parseBalance(t,!1)}},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetAccount(t);case 5:return r=e.sent,e.abrupt("return",this.parseBalanceResponse(r));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:{},e.next=4,this.loadMarkets();case 4:return a=this.market(t),s={symbol:a.id},void 0!==r&&(s.limit=r),e.next=9,this.publicGetDepth(this.extend(s,n));case 9:return o=e.sent,(u=this.parseOrderBook(o)).nonce=this.safeInteger(o,"lastUpdateId"),e.abrupt("return",u);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeInteger(e,"closeTime"),i=this.safeString(e,"symbol"),n=this.safeSymbol(i,t),a=this.safeNumber(e,"lastPrice"),s=this.safeNumber(e,"openPrice"),o=void 0;return void 0!==s&&void 0!==a&&(o=this.sum(s,a)/2),{symbol:n,timestamp:r,datetime:this.iso8601(r),high:this.safeNumber(e,"highPrice"),low:this.safeNumber(e,"lowPrice"),bid:this.safeNumber(e,"bidPrice"),bidVolume:this.safeNumber(e,"bidQty"),ask:this.safeNumber(e,"askPrice"),askVolume:this.safeNumber(e,"askQty"),vwap:this.safeNumber(e,"weightedAvgPrice"),open:s,close:a,last:a,previousClose:this.safeNumber(e,"prevClosePrice"),change:this.safeNumber(e,"priceChange"),percentage:this.safeNumber(e,"priceChangePercent"),average:o,baseVolume:this.safeNumber(e,"volume"),quoteVolume:this.safeNumber(e,"quoteVolume"),info:e}}},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={symbol:n.id},e.next=7,this.publicGetTicker24hr(this.extend(a,r));case 7:return s=e.sent,e.abrupt("return",this.parseTicker(s,n));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:void 0,r=a.length>1&&void 0!==a[1]?a[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetTicker24hr(r);case 6:return n=e.sent,e.abrupt("return",this.parseTickers(n,t));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){return[this.safeInteger(e,0),this.safeNumber(e,1),this.safeNumber(e,2),this.safeNumber(e,3),this.safeNumber(e,4),this.safeNumber(e,5)]}},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:"1m",n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:void 0,s=d.length>4&&void 0!==d[4]?d[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),u={symbol:o.id,interval:this.timeframes[r]},void 0!==n&&(u.startTime=n),void 0!==a&&(u.limit=a),e.next=12,this.publicGetKlines(this.extend(u,s));case 12:return c=e.sent,e.abrupt("return",this.parseOHLCVs(c,o,r,n,a));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeInteger2(e,"T","time"),i=this.safeString2(e,"p","price"),n=this.safeString2(e,"q","qty"),a=this.parseNumber(i),s=this.parseNumber(n),o=this.parseNumber(S.stringMul(i,n)),u=this.safeString2(e,"a","id"),c=void 0,d=this.safeString(e,"orderId");"m"in e?c=e.m?"sell":"buy":"isBuyerMaker"in e?c=e.isBuyerMaker?"sell":"buy":"isBuyer"in e&&(c=e.isBuyer?"buy":"sell");var h=void 0;"commission"in e&&(h={cost:this.safeNumber(e,"commission"),currency:this.safeCurrencyCode(this.safeString(e,"commissionAsset"))});var l=void 0;"isMaker"in e&&(l=e.isMaker?"maker":"taker");var f=this.safeString(e,"symbol"),p=this.safeSymbol(f,t);return{info:e,timestamp:r,datetime:this.iso8601(r),symbol:p,id:u,order:d,type:void 0,takerOrMaker:l,side:c,price:a,amount:s,cost:o,fee:h}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={symbol:s.id},void 0!==n&&(o.limit=n),e.next=10,this.publicGetAggTrades(this.extend(o,a));case 10:return u=e.sent,e.abrupt("return",this.parseTrades(u,s,r,n));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({NEW:"open",PARTIALLY_FILLED:"open",FILLED:"closed",CANCELED:"canceled",PENDING_CANCEL:"canceling",REJECTED:"rejected",EXPIRED:"expired"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.parseOrderStatus(this.safeString(e,"status")),i=this.safeString(e,"symbol"),n=this.safeSymbol(i,t,"/"),a=void 0;"time"in e?a=this.safeInteger(e,"time"):"transactTime"in e&&(a=this.safeInteger(e,"transactTime"));var s=this.safeNumber(e,"price"),o=this.safeNumber(e,"origQty"),u=this.safeNumber(e,"executedQty"),c=void 0,d=this.safeNumber(e,"cummulativeQuoteQty"),h=this.safeString(e,"orderId"),l=this.safeStringLower(e,"type"),f=this.safeStringLower(e,"side"),p=void 0,v=this.safeValue(e,"fills");void 0!==v&&(p=this.parseTrades(v,t));var m=this.safeString(e,"timeInForce");return this.safeOrder({info:e,id:h,timestamp:a,datetime:this.iso8601(a),lastTradeTimestamp:void 0,symbol:n,type:l,timeInForce:m,side:f,price:s,stopPrice:void 0,amount:o,cost:d,average:void 0,filled:u,remaining:c,status:r,fee:void 0,trades:p})}},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,u,c,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=f.length>4&&void 0!==f[4]?f[4]:void 0,o=f.length>5&&void 0!==f[5]?f[5]:{},e.next=4,this.loadMarkets();case 4:if(u=this.market(t),void 0,!u.margin){e.next=10;break}if(void 0!==this.safeInteger(o,"accountId")){e.next=10;break}throw new p(this.id+" createOrder() requires an accountId parameter for "+u.type+" market "+t);case 10:return c=r.toUpperCase(),d=this.safeValue(this.options.newOrderRespType,r,"RESULT"),h={symbol:u.id,quantity:this.amountToPrecision(t,a),type:c,side:n.toUpperCase(),newOrderRespType:d},"LIMIT"===c?(h.price=this.priceToPrecision(t,s),h.timeInForce=this.options.defaultTimeInForce):"STOP"===c&&(h.price=this.priceToPrecision(t,s)),e.next=16,this.privatePostOrder(this.extend(h,o));case 16:return l=e.sent,e.abrupt("return",this.parseOrder(l,u));case 18:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:void 0,r=l.length>1&&void 0!==l[1]?l[1]:void 0,n=l.length>2&&void 0!==l[2]?l[2]:void 0,a=l.length>3&&void 0!==l[3]?l[3]:{},e.next=6,this.loadMarkets();case 6:if(s=void 0,o={},void 0===t){e.next=13;break}s=this.market(t),o.symbol=s.id,e.next=18;break;case 13:if(!this.options.warnOnFetchOpenOrdersWithoutSymbol){e.next=18;break}throw u=this.symbols,c=u.length,d=parseInt(c/2),new f(this.id+" fetchOpenOrders() WARNING: fetching open orders without specifying a symbol is rate-limited to one call per "+d.toString()+" seconds. Do not call this method frequently to avoid ban. Set "+this.id+'.options["warnOnFetchOpenOrdersWithoutSymbol"] = false to suppress this warning message.');case 18:return e.next=20,this.privateGetOpenOrders(this.extend(o,a));case 20:return h=e.sent,e.abrupt("return",this.parseOrders(h,s,r,n));case 22:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:{},void 0!==r){e.next=4;break}throw new p(this.id+" cancelOrder() requires a symbol argument");case 4:return e.next=6,this.loadMarkets();case 6:return a=this.market(r),s=this.safeValue(n,"origClientOrderId"),o={symbol:a.id},void 0===s?o.orderId=t:o.origClientOrderId=s,e.next=12,this.privateDeleteOrder(this.extend(o,n));case 12:return u=e.sent,e.abrupt("return",this.parseOrder(u,a));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=c.length>0&&void 0!==c[0]?c[0]:void 0,r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},void 0!==t){e.next=6;break}throw new p(this.id+" fetchMyTrades() requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.market(t),o={symbol:s.id},void 0!==n&&(o.limit=n),e.next=13,this.privateGetMyTrades(this.extend(o,a));case 13:return u=e.sent,e.abrupt("return",this.parseTrades(u,s,r,n));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.urls.api[t]+"/"+this.version+"/"+e;if("historicalTrades"===e&&(n={"X-MBX-APIKEY":this.apiKey}),"private"===t){this.checkRequiredCredentials();var o=this.urlencode(this.extend({timestamp:this.nonce(),recvWindow:this.options.recvWindow},i)),u=this.hmac(this.encode(o),this.encode(this.secret));o+="&signature="+u,n={"X-MBX-APIKEY":this.apiKey},"GET"===r||"DELETE"===r?s+="?"+o:(a=o,n["Content-Type"]="application/x-www-form-urlencoded")}else Object.keys(i).length&&(s+="?"+this.urlencode(i));return{url:s,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,u){if(418===e||429===e)throw new b(this.id+" "+e.toString()+" "+t+" "+a);if(e>=400){if(a.indexOf("Price * QTY is zero or less")>=0)throw new y(this.id+" order cost = amount * price is zero or less "+a);if(a.indexOf("LOT_SIZE")>=0)throw new y(this.id+" order amount should be evenly divisible by lot size "+a);if(a.indexOf("PRICE_FILTER")>=0)throw new y(this.id+" order price is invalid, i.e. exceeds allowed price precision, exceeds min price or max price limits or is invalid float value in general, use this.priceToPrecision (symbol, amount) "+a)}if(void 0!==s){var c=this.safeString(s,"code");if(void 0!==c&&"0"!==c){var d=this.id+" "+this.json(s);this.throwExactlyMatchedException(this.exceptions.exact,c,d);var h=this.safeString(s,"msg");throw this.throwBroadlyMatchedException(this.exceptions.broad,h,d),new f(d)}}}}]),r}(h)},function(e,t,r){"use strict";var i=r(7),n=r(8),a=r(1),s=r(2),o=r(6),u=r(3),c=r(4),d=r(5),h=r(11),l=r(10),f=l.ExchangeError,p=l.InsufficientFunds,v=l.BadRequest,m=l.BadSymbol,g=l.InvalidOrder,y=l.AuthenticationError,b=l.ArgumentsRequired,x=l.OrderNotFound,k=l.ExchangeNotAvailable,w=r(18).TICK_SIZE,_=r(12);e.exports=function(e){c(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(u(r.prototype),"describe",this).call(this),{id:"delta",name:"Delta Exchange",countries:["VC"],rateLimit:300,version:"v2",has:{cancelAllOrders:!0,cancelOrder:!0,createOrder:!0,editOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchDepositAddress:!0,fetchCurrencies:!0,fetchLedger:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrderBook:!0,fetchStatus:!0,fetchTicker:!0,fetchTickers:!0,fetchTime:!0,fetchTrades:!0},timeframes:{"1m":"1m","3m":"3m","5m":"5m","15m":"15m","30m":"30m","1h":"1h","2h":"2h","4h":"4h","6h":"6h","1d":"1d","7d":"7d","1w":"1w","2w":"2w","1M":"30d"},urls:{logo:"https://user-images.githubusercontent.com/1294454/99450025-3be60a00-2931-11eb-9302-f4fd8d8589aa.jpg",test:{public:"https://testnet-api.delta.exchange",private:"https://testnet-api.delta.exchange"},api:{public:"https://api.delta.exchange",private:"https://api.delta.exchange"},www:"https://www.delta.exchange",doc:["https://docs.delta.exchange"],fees:"https://www.delta.exchange/fees",referral:"https://www.delta.exchange/app/signup/?code=IULYNB"},api:{public:{get:["assets","settings","indices","products","tickers","tickers/{symbol}","l2orderbook/{symbol}","trades/{symbol}","history/candles","history/sparklines"]},private:{get:["orders","orders/leverage","positions","positions/margined","orders/history","fills","fills/history/download/csv","wallet/balances","wallet/transactions","wallet/transactions/download","deposits/address"],post:["orders","orders/batch","orders/leverage","positions/change_margin"],put:["orders","orders/batch"],delete:["orders","orders/all","orders/batch"]}},fees:{trading:{tierBased:!0,percentage:!0,taker:.0015,maker:.001,tiers:{taker:[[0,.0015],[100,.0013],[250,.0013],[1e3,.001],[5e3,9e-4],[1e4,75e-5],[2e4,65e-5]],maker:[[0,.001],[100,.001],[250,9e-4],[1e3,75e-5],[5e3,6e-4],[1e4,5e-4],[2e4,5e-4]]}}},precisionMode:w,requiredCredentials:{apiKey:!0,secret:!1},exceptions:{exact:{insufficient_margin:p,order_size_exceed_available:g,risk_limits_breached:v,invalid_contract:m,immediate_liquidation:g,out_of_bankruptcy:g,self_matching_disrupted_post_only:g,immediate_execution_post_only:g,bad_schema:v,invalid_api_key:y,invalid_signature:y,open_order_not_found:x,unavailable:k},broad:{}}})}},{key:"fetchTime",value:function(){var e=n(i.mark((function e(){var t,r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},e.next=3,this.publicGetSettings(t);case 3:return r=e.sent,n=this.safeValue(r,"result",{}),e.abrupt("return",this.safeIntegerProduct(n,"server_time",.001));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchStatus",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:{},e.next=3,this.publicGetSettings(t);case 3:return r=e.sent,n=this.safeValue(r,"result",{}),a=this.safeValue(n,"under_maintenance"),s="true"===a?"maintenance":"ok",o=this.safeIntegerProduct(n,"server_time",.001),this.status=this.extend(this.status,{status:s,updated:o}),e.abrupt("return",this.status);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchCurrencies",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p,v,m=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=m.length>0&&void 0!==m[0]?m[0]:{},e.next=3,this.publicGetAssets(t);case 3:for(r=e.sent,n=this.safeValue(r,"result",[]),a={},s=0;s<n.length;s++)o=n[s],u=this.safeString(o,"symbol"),c=this.safeInteger(o,"id"),d=this.safeCurrencyCode(u),h=this.safeString(o,"deposit_status"),l=this.safeString(o,"withdrawal_status"),f="enabled"===l,p="enabled"===h&&f,v=this.safeInteger(o,"precision"),a[d]={id:u,numericId:c,code:d,name:this.safeString(o,"name"),info:o,active:p,fee:this.safeNumber(o,"base_withdrawal_fee"),precision:1/Math.pow(10,v),limits:{amount:{min:void 0,max:void 0},withdraw:{min:this.safeNumber(o,"min_withdrawal_amount"),max:void 0}}};return e.abrupt("return",a);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadMarkets",value:function(){var e=n(i.mark((function e(){var t,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]&&s[0],n=s.length>1&&void 0!==s[1]?s[1]:{},e.next=4,o(u(r.prototype),"loadMarkets",this).call(this,t,n);case 4:return a=e.sent,(void 0===this.safeValue(this.options,"currenciesByNumericId")||t)&&(this.options.currenciesByNumericId=this.indexBy(this.currencies,"numericId")),(void 0===this.safeValue(this.options,"marketsByNumericId")||t)&&(this.options.marketsByNumericId=this.indexBy(this.markets,"numericId")),e.abrupt("return",a);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p,v,m,g,y,b,x,k,w,_,S,O,T,C=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=C.length>0&&void 0!==C[0]?C[0]:{},e.next=3,this.publicGetProducts(t);case 3:for(r=e.sent,n=this.safeValue(r,"result",[]),a=[],s=0;s<n.length;s++)o=n[s],u=this.safeString(o,"contract_type"),c=this.safeValue(o,"quoting_asset",{}),d=this.safeValue(o,"underlying_asset",{}),h=this.safeString(d,"symbol"),l=this.safeString(c,"symbol"),f=this.safeString(o,"symbol"),p=this.safeInteger(o,"id"),v=this.safeCurrencyCode(h),m=this.safeCurrencyCode(l),g=f,y=!1,b=!1,x=!1,"perpetual_futures"===u?(u="swap",y=!0,b=!1,x=!1,f.indexOf("_")<0&&(g=v+"/"+m)):"call_options"===u||"put_options"===u||"move_options"===u?(u="option",y=!1,x=!0,b=!1):"futures"===u&&(u="future",y=!1,x=!1,b=!0),k={amount:1,price:this.safeNumber(o,"tick_size")},w={amount:{min:1,max:this.safeNumber(o,"position_size_limit")},price:{min:k.price,max:void 0},cost:{min:this.safeNumber(o,"min_size"),max:void 0}},_=this.safeString(o,"state"),S="live"===_,O=this.safeNumber(o,"maker_commission_rate"),T=this.safeNumber(o,"taker_commission_rate"),a.push({id:f,numericId:p,symbol:g,base:v,quote:m,baseId:h,quoteId:l,type:u,option:x,swap:y,future:b,maker:O,taker:T,precision:k,limits:w,info:o,active:S});return e.abrupt("return",a);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeIntegerProduct(e,"timestamp",.001),i=this.safeString(e,"symbol"),n=this.safeSymbol(i,t),a=this.safeNumber(e,"close"),s=this.safeNumber(e,"open"),o=void 0,u=void 0,c=void 0;void 0!==s&&void 0!==a&&(o=a-s,u=this.sum(a,s)/2,0!==s&&(c=o/s*100));var d=this.safeNumber(e,"volume"),h=this.safeNumber(e,"turnover"),l=this.vwap(d,h);return{symbol:n,timestamp:r,datetime:this.iso8601(r),high:this.safeNumber(e,"high"),low:this.safeNumber(e,"low"),bid:void 0,bidVolume:void 0,ask:void 0,askVolume:void 0,vwap:l,open:s,close:a,last:a,previousClose:void 0,change:o,percentage:c,average:u,baseVolume:d,quoteVolume:h,info:e}}},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={symbol:n.id},e.next=7,this.publicGetTickersSymbol(this.extend(a,r));case 7:return s=e.sent,o=this.safeValue(s,"result",{}),e.abrupt("return",this.parseTicker(o,n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetTickers(r);case 6:for(n=e.sent,a=this.safeValue(n,"result",[]),s={},o=0;o<a.length;o++)u=this.parseTicker(a[o]),c=u.symbol,s[c]=u;return e.abrupt("return",this.filterByArray(s,"symbol",t));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:{},e.next=4,this.loadMarkets();case 4:return a={symbol:this.marketId(t)},void 0!==r&&(a.depth=r),e.next=8,this.publicGetL2orderbookSymbol(this.extend(a,n));case 8:return s=e.sent,o=this.safeValue(s,"result",{}),e.abrupt("return",this.parseOrderBook(o,void 0,"buy","sell","price","size"));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),i=this.safeString(e,"order_id"),n=this.parse8601(this.safeString(e,"created_at"));n=this.safeIntegerProduct(e,"timestamp",.001,n);var a=this.safeString(e,"price"),s=this.safeString(e,"size"),o=this.parseNumber(a),u=this.parseNumber(s),c=this.parseNumber(_.stringMul(a,s)),d=this.safeValue(e,"product",{}),h=this.safeString(d,"symbol"),l=this.safeSymbol(h,t),f=this.safeString(e,"seller_role"),p=this.safeString(e,"side");void 0===p&&("taker"===f?p="sell":"maker"===f&&(p="buy"));var v=this.safeString(e,"role"),m=this.safeValue(e,"meta_data",{}),g=this.safeString(m,"order_type");void 0!==g&&(g=g.replace("_order",""));var y=this.safeNumber(e,"commission"),b=void 0;if(void 0!==y){var x=this.safeValue(d,"settling_asset",{}),k=this.safeString(x,"symbol"),w=this.safeCurrencyCode(k);b={cost:y,currency:w}}return{id:r,order:i,timestamp:n,datetime:this.iso8601(n),symbol:l,type:g,side:p,price:o,amount:u,cost:c,takerOrMaker:v,fee:b,info:e}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={symbol:s.id},e.next=9,this.publicGetTradesSymbol(this.extend(o,a));case 9:return u=e.sent,c=this.safeValue(u,"result",[]),e.abrupt("return",this.parseTrades(c,s,r,n));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){return[this.safeTimestamp(e,"time"),this.safeNumber(e,"open"),this.safeNumber(e,"high"),this.safeNumber(e,"low"),this.safeNumber(e,"close"),this.safeNumber(e,"volume")]}},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=p.length>1&&void 0!==p[1]?p[1]:"1m",n=p.length>2&&void 0!==p[2]?p[2]:void 0,a=p.length>3&&void 0!==p[3]?p[3]:void 0,s=p.length>4&&void 0!==p[4]?p[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),u={symbol:o.id,resolution:this.timeframes[r]},c=this.parseTimeframe(r),a=a||2e3,void 0===n?(d=this.seconds(),u.end=d,u.start=d-a*c):(h=parseInt(n/1e3),u.start=h,u.end=this.sum(h,a*c)),e.next=13,this.publicGetHistoryCandles(this.extend(u,s));case 13:return l=e.sent,f=this.safeValue(l,"result",[]),e.abrupt("return",this.parseOHLCVs(f,o,r,n,a));case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetWalletBalances(t);case 5:for(r=e.sent,n=this.safeValue(r,"result",[]),a={info:r},s=this.safeValue(this.options,"currenciesByNumericId",{}),o=0;o<n.length;o++)u=n[o],c=this.safeString(u,"asset_id"),d=this.safeValue(s,c),h=void 0===d?c:d.code,(l=this.account()).total=this.safeString(u,"balance"),l.free=this.safeString(u,"available_balance"),a[h]=l;return e.abrupt("return",this.parseBalance(a,!1));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchPosition",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={product_id:n.numericId},e.next=7,this.privateGetPositions(this.extend(a,r));case 7:return s=e.sent,o=this.safeValue(s,"result",{}),e.abrupt("return",o);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchPositions",value:function(){var e=n(i.mark((function e(){var t,r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>0&&void 0!==a[0]?a[0]:void 0,t=a.length>1&&void 0!==a[1]?a[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.privateGetPositionsMargined(t);case 6:return r=e.sent,n=this.safeValue(r,"result",[]),e.abrupt("return",n);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({open:"open",pending:"open",closed:"closed",cancelled:"canceled"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),i=this.safeString(e,"client_order_id"),n=this.parse8601(this.safeString(e,"created_at")),a=this.safeString(e,"product_id"),s=this.safeValue(this.options,"marketsByNumericId",{}),o=void 0===(t=this.safeValue(s,a,t))?a:t.symbol,u=this.parseOrderStatus(this.safeString(e,"state")),c=this.safeString(e,"side"),d=this.safeString(e,"order_type");d=d.replace("_order","");var h=this.safeNumber(e,"limit_price"),l=this.safeNumber(e,"size"),f=this.safeNumber(e,"unfilled_size"),p=this.safeNumber(e,"average_fill_price"),v=void 0,m=this.safeNumber(e,"paid_commission");if(void 0!==m){var g=void 0;if(void 0!==t){var y=this.safeValue(t.info,"settling_asset",{}),b=this.safeString(y,"symbol");g=this.safeCurrencyCode(b)}v={cost:m,currency:g}}return this.safeOrder({info:e,id:r,clientOrderId:i,timestamp:n,datetime:this.iso8601(n),lastTradeTimestamp:void 0,symbol:o,type:d,side:c,price:h,amount:l,cost:void 0,average:p,filled:void 0,remaining:f,status:u,fee:v,trades:void 0})}},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,u,c,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=p.length>4&&void 0!==p[4]?p[4]:void 0,o=p.length>5&&void 0!==p[5]?p[5]:{},e.next=4,this.loadMarkets();case 4:return u=r+"_order",c=this.market(t),d={product_id:c.numericId,size:this.amountToPrecision(t,a),side:n,order_type:u},"limit"===r&&(d.limit_price=this.priceToPrecision(t,s)),h=this.safeString2(o,"clientOrderId","client_order_id"),o=this.omit(o,["clientOrderId","client_order_id"]),void 0!==h&&(d.client_order_id=h),e.next=13,this.privatePostOrders(this.extend(d,o));case 13:return l=e.sent,f=this.safeValue(l,"result",{}),e.abrupt("return",this.parseOrder(f,c));case 16:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"editOrder",value:function(){var e=n(i.mark((function e(t,r,n,a,s){var o,u,c,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=f.length>5&&void 0!==f[5]?f[5]:void 0,u=f.length>6&&void 0!==f[6]?f[6]:{},e.next=4,this.loadMarkets();case 4:return c=this.market(r),d={id:parseInt(t),product_id:c.numericId},void 0!==s&&(d.size=parseInt(this.amountToPrecision(r,s))),void 0!==o&&(d.limit_price=this.priceToPrecision(r,o)),e.next=10,this.privatePutOrders(this.extend(d,u));case 10:return h=e.sent,l=this.safeValue(h,"result"),e.abrupt("return",this.parseOrder(l,c));case 13:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n,a){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:{},void 0!==r){e.next=4;break}throw new b(this.id+" cancelOrder() requires a symbol argument");case 4:return e.next=6,this.loadMarkets();case 6:return a=this.market(r),s={id:parseInt(t),product_id:a.numericId},e.next=10,this.privateDeleteOrders(this.extend(s,n));case 10:return o=e.sent,u=this.safeValue(o,"result"),e.abrupt("return",this.parseOrder(u,a));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cancelAllOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:{},void 0!==t){e.next=4;break}throw new b(this.id+" cancelAllOrders() requires a symbol argument");case 4:return e.next=6,this.loadMarkets();case 6:return n=this.market(t),a={product_id:n.numericId},s=this.privateDeleteOrdersAll(this.extend(a,r)),e.abrupt("return",s);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:void 0,n=s.length>2&&void 0!==s[2]?s[2]:void 0,a=s.length>3&&void 0!==s[3]?s[3]:{},e.next=6,this.fetchOrdersWithMethod("privateGetOrders",t,r,n,a);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:void 0,n=s.length>2&&void 0!==s[2]?s[2]:void 0,a=s.length>3&&void 0!==s[3]?s[3]:{},e.next=6,this.fetchOrdersWithMethod("privateGetOrdersHistory",t,r,n,a);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrdersWithMethod",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:void 0,s=h.length>4&&void 0!==h[4]?h[4]:{},e.next=6,this.loadMarkets();case 6:return o={},u=void 0,void 0!==r&&(u=this.market(r),o.product_ids=u.numericId),void 0!==n&&(o.start_time=n.toString()+"000"),void 0!==a&&(o.page_size=a),e.next=13,this[t](this.extend(o,s));case 13:return c=e.sent,d=this.safeValue(c,"result",[]),e.abrupt("return",this.parseOrders(d,u,n,a));case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return s={},o=void 0,void 0!==t&&(o=this.market(t),s.product_ids=o.numericId),void 0!==r&&(s.start_time=r.toString()+"000"),void 0!==n&&(s.page_size=n),e.next=13,this.privateGetFills(this.extend(s,a));case 13:return u=e.sent,c=this.safeValue(u,"result",[]),e.abrupt("return",this.parseTrades(c,o,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchLedger",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return s={},o=void 0,void 0!==t&&(o=this.currency(t),s.asset_id=o.numericId),void 0!==n&&(s.page_size=n),e.next=12,this.privateGetWalletTransactions(this.extend(s,a));case 12:return u=e.sent,c=this.safeValue(u,"result",[]),e.abrupt("return",this.parseLedger(c,o,r,n));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseLedgerEntryType",value:function(e){return this.safeString({pnl:"pnl",deposit:"transaction",withdrawal:"transaction",commission:"fee",conversion:"trade",referral_bonus:"referral",commission_rebate:"rebate"},e,e)}},{key:"parseLedgerEntry",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"uuid"),i=void 0,n=void 0,a=this.safeValue(e,"meta_data",{}),s=this.safeString(a,"transaction_id"),o=void 0,u=this.safeString(e,"transaction_type");"deposit"===u||"commission_rebate"===u||"referral_bonus"===u||"pnl"===u||"withdrawal_cancellation"===u||"promo_credit"===u?i="in":"withdrawal"!==u&&"commission"!==u&&"conversion"!==u&&"perpetual_futures_funding"!==u||(i="out"),u=this.parseLedgerEntryType(u);var c=this.safeInteger(e,"asset_id"),d=this.safeValue(this.options,"currenciesByNumericId"),h=void 0===(t=this.safeValue(d,c,t))?void 0:t.code,l=this.safeNumber(e,"amount"),f=this.parse8601(this.safeString(e,"created_at")),p=this.safeNumber(e,"balance"),v=Math.max(0,p-l),m="ok";return{info:e,id:r,direction:i,account:n,referenceId:s,referenceAccount:o,type:u,currency:h,amount:l,before:v,after:p,status:m,timestamp:f,datetime:this.iso8601(f),fee:void 0}}},{key:"fetchDepositAddress",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.currency(t),a={asset_symbol:n.id},e.next=7,this.privateGetDepositsAddress(this.extend(a,r));case 7:return s=e.sent,o=this.safeValue(s,"result",{}),u=this.safeString(o,"address"),this.checkAddress(u),e.abrupt("return",{currency:t,address:u,tag:void 0,info:s});case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s="/"+this.version+"/"+this.implodeParams(e,i),o=this.urls.api[t]+s,u=this.omit(i,this.extractParams(e));if("public"===t)Object.keys(u).length&&(o+="?"+this.urlencode(u));else if("private"===t){this.checkRequiredCredentials();var c=this.seconds().toString();n={"api-key":this.apiKey,timestamp:c};var d=r+c+s;if("GET"===r||"DELETE"===r){if(Object.keys(u).length){var h="?"+this.urlencode(u);d+=h,o+=h}}else d+=a=this.json(u),n["Content-Type"]="application/json";var l=this.hmac(this.encode(d),this.encode(this.secret));n.signature=l}return{url:o,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,u){if(void 0!==s){var c=this.safeValue(s,"error",{}),d=this.safeString(c,"code");if(void 0!==d){var h=this.id+" "+a;throw this.throwExactlyMatchedException(this.exceptions.exact,d,h),this.throwBroadlyMatchedException(this.exceptions.broad,d,h),new f(h)}}}}]),r}(h)},function(e,t,r){"use strict";var i=r(7),n=r(8),a=r(1),s=r(2),o=r(6),u=r(3),c=r(4),d=r(5),h=r(11),l=r(18).TICK_SIZE,f=r(10),p=f.AuthenticationError,v=f.ExchangeError,m=f.ArgumentsRequired,g=f.PermissionDenied,y=f.InvalidOrder,b=f.OrderNotFound,x=f.DDoSProtection,k=f.NotSupported,w=f.ExchangeNotAvailable,_=f.InsufficientFunds,S=f.BadRequest,O=f.InvalidAddress,T=f.OnMaintenance,C=r(12);e.exports=function(e){c(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(u(r.prototype),"describe",this).call(this),{id:"deribit",name:"Deribit",countries:["NL"],version:"v2",userAgent:void 0,rateLimit:500,has:{cancelAllOrders:!0,cancelOrder:!0,CORS:!0,createDepositAddress:!0,createOrder:!0,editOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchDepositAddress:!0,fetchDeposits:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!1,fetchOrderTrades:!0,fetchStatus:!0,fetchTicker:!0,fetchTickers:!0,fetchTime:!0,fetchTrades:!0,fetchTransactions:!1,fetchWithdrawals:!0,withdraw:!0},timeframes:{"1m":"1","3m":"3","5m":"5","10m":"10","15m":"15","30m":"30","1h":"60","2h":"120","3h":"180","6h":"360","12h":"720","1d":"1D"},urls:{test:"https://test.deribit.com",logo:"https://user-images.githubusercontent.com/1294454/41933112-9e2dd65a-798b-11e8-8440-5bab2959fcb8.jpg",api:"https://www.deribit.com",www:"https://www.deribit.com",doc:["https://docs.deribit.com/v2","https://github.com/deribit"],fees:"https://www.deribit.com/pages/information/fees",referral:"https://www.deribit.com/reg-1189.4038"},api:{public:{get:["auth","exchange_token","fork_token","set_heartbeat","disable_heartbeat","get_time","hello","test","subscribe","unsubscribe","get_announcements","get_book_summary_by_currency","get_book_summary_by_instrument","get_contract_size","get_currencies","get_funding_chart_data","get_funding_rate_history","get_funding_rate_value","get_historical_volatility","get_index","get_instruments","get_last_settlements_by_currency","get_last_settlements_by_instrument","get_last_trades_by_currency","get_last_trades_by_currency_and_time","get_last_trades_by_instrument","get_last_trades_by_instrument_and_time","get_order_book","get_trade_volumes","get_tradingview_chart_data","ticker"]},private:{get:["logout","enable_cancel_on_disconnect","disable_cancel_on_disconnect","get_cancel_on_disconnect","subscribe","unsubscribe","change_api_key_name","change_scope_in_api_key","change_subaccount_name","create_api_key","create_subaccount","disable_api_key","disable_tfa_for_subaccount","enable_api_key","get_account_summary","get_email_language","get_new_announcements","get_position","get_positions","get_subaccounts","list_api_keys","remove_api_key","reset_api_key","set_announcement_as_read","set_api_key_as_default","set_email_for_subaccount","set_email_language","set_password_for_subaccount","toggle_notifications_from_subaccount","toggle_subaccount_login","execute_block_trade","get_block_trade","get_last_block_trades_by_currency","invalidate_block_trade_signature","verify_block_trade","buy","sell","edit","cancel","cancel_all","cancel_all_by_currency","cancel_all_by_instrument","cancel_by_label","close_position","get_margins","get_open_orders_by_currency","get_open_orders_by_instrument","get_order_history_by_currency","get_order_history_by_instrument","get_order_margin_by_ids","get_order_state","get_stop_order_history","get_user_trades_by_currency","get_user_trades_by_currency_and_time","get_user_trades_by_instrument","get_user_trades_by_instrument_and_time","get_user_trades_by_order","get_settlement_history_by_instrument","get_settlement_history_by_currency","cancel_transfer_by_id","cancel_withdrawal","create_deposit_address","get_current_deposit_address","get_deposits","get_transfers","get_withdrawals","submit_transfer_to_subaccount","submit_transfer_to_user","withdraw"]}},exceptions:{9999:g,1e4:p,10001:v,10002:y,10003:y,10004:b,10005:y,10006:y,10007:y,10008:y,10009:_,10010:b,10011:y,10012:y,10013:g,10014:g,10015:g,10016:g,10017:g,10018:g,10019:g,10020:v,10021:y,10022:y,10023:y,10024:y,10025:y,10026:y,10027:y,10028:x,10029:b,10030:v,10031:v,10032:y,10033:k,10034:y,10035:y,10036:y,10040:w,10041:T,10043:y,10044:y,10045:y,10046:y,10047:x,10048:v,11008:y,11029:S,11030:v,11031:v,11035:x,11036:y,11037:S,11038:y,11039:y,11041:y,11042:g,11043:S,11044:y,11045:S,11046:S,11047:S,11048:v,11049:S,11050:S,11051:T,11052:v,11053:v,11090:O,11091:O,11092:O,11093:x,11094:v,11095:v,11096:v,12e3:p,12001:x,12002:v,12998:p,12003:p,12004:p,12005:p,12100:v,12999:p,13e3:p,13001:p,13002:g,13003:p,13004:p,13005:p,13006:p,13007:p,13008:v,13009:p,13010:S,13011:S,13012:g,13013:S,13014:S,13015:S,13016:S,13017:v,13018:v,13019:v,13020:v,13021:g,13025:v,"-32602":S,"-32601":S,"-32700":S,"-32000":S},precisionMode:l,options:{code:"BTC",fetchBalance:{code:"BTC"}}})}},{key:"fetchTime",value:function(){var e=n(i.mark((function e(){var t,r,n=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},e.next=3,this.publicGetGetTime(t);case 3:return r=e.sent,e.abrupt("return",this.safeInteger(r,"result"));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"codeFromOptions",value:function(e){var t=this.safeValue(this.options,"code","BTC"),r=this.safeValue(this.options,e,{});return this.safeValue(r,"code",t)}},{key:"fetchStatus",value:function(){var e=n(i.mark((function e(){var t,r,n=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},r={},e.next=4,this.publicGetTest(this.extend(r,t));case 4:return this.status=this.extend(this.status,{status:"ok",updated:this.milliseconds()}),e.abrupt("return",this.status);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p,v,m,g,y,b,x,k,w,_,S,O=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=O.length>0&&void 0!==O[0]?O[0]:{},e.next=3,this.publicGetGetCurrencies(t);case 3:r=e.sent,n=this.safeValue(r,"result",[]),a=[],s=0;case 7:if(!(s<n.length)){e.next=18;break}return o=this.safeString(n[s],"currency"),u={currency:o},e.next=12,this.publicGetGetInstruments(this.extend(u,t));case 12:for(c=e.sent,d=this.safeValue(c,"result",[]),h=0;h<d.length;h++)l=d[h],f=this.safeString(l,"instrument_name"),p=this.safeString(l,"base_currency"),v=this.safeString(l,"quote_currency"),m=this.safeCurrencyCode(p),g=this.safeCurrencyCode(v),y=this.safeString(l,"kind"),b="future"===y,x="option"===y,k=this.safeValue(l,"is_active"),w=this.safeNumber(l,"min_trade_amount"),_=this.safeNumber(l,"tick_size"),S={amount:w,price:_},a.push({id:f,symbol:f,base:m,quote:g,active:k,precision:S,taker:this.safeNumber(l,"taker_commission"),maker:this.safeNumber(l,"maker_commission"),limits:{amount:{min:w,max:void 0},price:{min:_,max:void 0},cost:{min:void 0,max:void 0}},type:y,spot:!1,future:b,option:x,info:l});case 15:s++,e.next=7;break;case 18:return e.abrupt("return",a);case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:{},e.next=3,this.loadMarkets();case 3:return r=this.codeFromOptions("fetchBalance"),n=this.currency(r),a={currency:n.id},e.next=8,this.privateGetGetAccountSummary(this.extend(a,t));case 8:return s=e.sent,o={info:s},u=this.safeValue(s,"result",{}),c=this.safeString(u,"currency"),d=this.safeCurrencyCode(c),(h=this.account()).free=this.safeString(u,"availableFunds"),h.used=this.safeString(u,"maintenanceMargin"),h.total=this.safeString(u,"equity"),o[d]=h,e.abrupt("return",this.parseBalance(o,!1));case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createDepositAddress",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.currency(t),a={currency:n.id},e.next=7,this.privateGetCreateDepositAddress(this.extend(a,r));case 7:return s=e.sent,o=this.safeValue(s,"result",{}),u=this.safeString(o,"address"),this.checkAddress(u),e.abrupt("return",{currency:t,address:u,tag:void 0,info:s});case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchDepositAddress",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.currency(t),a={currency:n.id},e.next=7,this.privateGetGetCurrentDepositAddress(this.extend(a,r));case 7:return s=e.sent,o=this.safeValue(s,"result",{}),u=this.safeString(o,"address"),this.checkAddress(u),e.abrupt("return",{currency:t,address:u,tag:void 0,info:s});case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeInteger2(e,"timestamp","creation_timestamp"),i=this.safeString(e,"instrument_name"),n=this.safeSymbol(i,t),a=this.safeNumber2(e,"last_price","last"),s=this.safeValue(e,"stats",e);return{symbol:n,timestamp:r,datetime:this.iso8601(r),high:this.safeNumber2(s,"high","max_price"),low:this.safeNumber2(s,"low","min_price"),bid:this.safeNumber2(e,"best_bid_price","bid_price"),bidVolume:this.safeNumber(e,"best_bid_amount"),ask:this.safeNumber2(e,"best_ask_price","ask_price"),askVolume:this.safeNumber(e,"best_ask_amount"),vwap:void 0,open:void 0,close:a,last:a,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:void 0,quoteVolume:this.safeNumber(s,"volume"),info:e}}},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={instrument_name:n.id},e.next=7,this.publicGetTicker(this.extend(a,r));case 7:return s=e.sent,o=this.safeValue(s,"result"),e.abrupt("return",this.parseTicker(o,n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:void 0,r=f.length>1&&void 0!==f[1]?f[1]:{},e.next=4,this.loadMarkets();case 4:return n=this.codeFromOptions("fetchTickers"),a=this.currency(n),s={currency:a.id},e.next=9,this.publicGetGetBookSummaryByCurrency(this.extend(s,r));case 9:for(o=e.sent,u=this.safeValue(o,"result",[]),c={},d=0;d<u.length;d++)h=this.parseTicker(u[d]),l=h.symbol,c[l]=h;return e.abrupt("return",this.filterByArray(c,"symbol",t));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=p.length>1&&void 0!==p[1]?p[1]:"1m",n=p.length>2&&void 0!==p[2]?p[2]:void 0,a=p.length>3&&void 0!==p[3]?p[3]:void 0,s=p.length>4&&void 0!==p[4]?p[4]:{},e.next=6,this.loadMarkets();case 6:if(o=this.market(t),u={instrument_name:o.id,resolution:this.timeframes[r]},c=this.parseTimeframe(r),d=this.milliseconds(),void 0!==n){e.next=19;break}if(void 0!==a){e.next=15;break}throw new m(this.id+" fetchOHLCV() requires a since argument or a limit argument");case 15:u.start_timestamp=d-(a-1)*c*1e3,u.end_timestamp=d;case 17:e.next=21;break;case 19:u.start_timestamp=n,u.end_timestamp=void 0===a?d:this.sum(n,a*c*1e3);case 21:return e.next=23,this.publicGetGetTradingviewChartData(this.extend(u,s));case 23:return h=e.sent,l=this.safeValue(h,"result",{}),f=this.convertTradingViewToOHLCV(l,"ticks","open","high","low","close","volume",!0),e.abrupt("return",this.parseOHLCVs(f,o,r,n,a));case 27:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"trade_id"),i=this.safeString(e,"instrument_name"),n=this.safeSymbol(i,t),a=this.safeInteger(e,"timestamp"),s=this.safeString(e,"direction"),o=this.safeString(e,"price"),u=this.safeString(e,"amount"),c=this.parseNumber(o),d=this.parseNumber(u),h=this.parseNumber(C.stringMul(o,u)),l=this.safeString(e,"liquidity"),f=void 0;void 0!==l&&(f="M"===l?"maker":"taker");var p=this.safeNumber(e,"fee"),v=void 0;if(void 0!==p){var m=this.safeString(e,"fee_currency"),g=this.safeCurrencyCode(m);v={cost:p,currency:g}}return{id:r,info:e,timestamp:a,datetime:this.iso8601(a),symbol:n,order:this.safeString(e,"order_id"),type:this.safeString(e,"order_type"),side:s,takerOrMaker:f,price:c,amount:d,cost:h,fee:v}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>1&&void 0!==l[1]?l[1]:void 0,n=l.length>2&&void 0!==l[2]?l[2]:void 0,a=l.length>3&&void 0!==l[3]?l[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={instrument_name:s.id,include_old:!0},u=void 0===r?"publicGetGetLastTradesByInstrument":"publicGetGetLastTradesByInstrumentAndTime",void 0!==r&&(o.start_timestamp=r),void 0!==n&&(o.count=n),e.next=12,this[u](this.extend(o,a));case 12:return c=e.sent,d=this.safeValue(c,"result",{}),h=this.safeValue(d,"trades",[]),e.abrupt("return",this.parseTrades(h,s,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>1&&void 0!==l[1]?l[1]:void 0,n=l.length>2&&void 0!==l[2]?l[2]:{},e.next=4,this.loadMarkets();case 4:return a=this.market(t),s={instrument_name:a.id},void 0!==r&&(s.depth=r),e.next=9,this.publicGetGetOrderBook(this.extend(s,n));case 9:return o=e.sent,u=this.safeValue(o,"result",{}),c=this.safeInteger(u,"timestamp"),d=this.safeInteger(u,"change_id"),(h=this.parseOrderBook(u,c)).nonce=d,e.abrupt("return",h);case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({open:"open",cancelled:"canceled",filled:"closed",rejected:"rejected",untriggered:"open"},e,e)}},{key:"parseTimeInForce",value:function(e){return this.safeString({good_til_cancelled:"GTC",fill_or_kill:"FOK",immediate_or_cancel:"IOC"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeInteger(e,"creation_timestamp"),i=this.safeInteger(e,"last_update_timestamp"),n=this.safeString(e,"order_id"),a=this.safeNumber(e,"price"),s=this.safeNumber(e,"average_price"),o=this.safeNumber(e,"amount"),u=this.safeNumber(e,"filled_amount"),c=void 0;void 0!==u&&u>0&&(c=i);var d=this.parseOrderStatus(this.safeString(e,"order_state")),h=this.safeString(e,"instrument_name");t=this.safeMarket(h,t);var l=this.safeStringLower(e,"direction"),f=this.safeNumber(e,"commission"),p=void 0;void 0!==f&&(p={cost:f=Math.abs(f),currency:t.base});var v=this.safeString(e,"order_type"),m=this.safeValue(e,"trades");void 0!==m&&(m=this.parseTrades(m,t));var g=this.parseTimeInForce(this.safeString(e,"time_in_force")),y=this.safeValue(e,"stop_price"),b=this.safeValue(e,"post_only");return this.safeOrder({info:e,id:n,clientOrderId:void 0,timestamp:r,datetime:this.iso8601(r),lastTradeTimestamp:c,symbol:t.symbol,type:v,timeInForce:g,postOnly:b,side:l,price:a,stopPrice:y,amount:o,cost:void 0,average:s,filled:u,remaining:void 0,status:d,fee:p,trades:m})}},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.length>1&&void 0!==o[1]?o[1]:void 0,r=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return n={order_id:t},e.next=7,this.privateGetGetOrderState(this.extend(n,r));case 7:return a=e.sent,s=this.safeValue(a,"result"),e.abrupt("return",this.parseOrder(s));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,u,c,d,h,l,f,p,v,g,y,b=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=b.length>4&&void 0!==b[4]?b[4]:void 0,o=b.length>5&&void 0!==b[5]?b[5]:{},e.next=4,this.loadMarkets();case 4:if(u=this.market(t),c={instrument_name:u.id,amount:this.amountToPrecision(t,a),type:r},d=!1,h=!1,"limit"===r?d=!0:"stop_limit"===r&&(d=!0,h=!0),!d){e.next=15;break}if(void 0===s){e.next=14;break}c.price=this.priceToPrecision(t,s),e.next=15;break;case 14:throw new m(this.id+" createOrder() requires a price argument for a "+r+" order");case 15:if(!h){e.next=23;break}if(void 0!==(l=this.safeNumber2(o,"stop_price","stopPrice"))){e.next=21;break}throw new m(this.id+" createOrder() requires a stop_price or stopPrice param for a "+r+" order");case 21:c.stop_price=this.priceToPrecision(t,l);case 22:o=this.omit(o,["stop_price","stopPrice"]);case 23:return f="privateGet"+this.capitalize(n),e.next=26,this[f](this.extend(c,o));case 26:return p=e.sent,v=this.safeValue(p,"result",{}),g=this.safeValue(v,"order"),y=this.safeValue(v,"trades",[]),g.trades=y,e.abrupt("return",this.parseOrder(g,u));case 32:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"editOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,u,c,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=p.length>4&&void 0!==p[4]?p[4]:void 0,o=p.length>5&&void 0!==p[5]?p[5]:void 0,u=p.length>6&&void 0!==p[6]?p[6]:{},void 0!==s){e.next=5;break}throw new m(this.id+" editOrder() requires an amount argument");case 5:if(void 0!==o){e.next=7;break}throw new m(this.id+" editOrder() requires a price argument");case 7:return e.next=9,this.loadMarkets();case 9:return c={order_id:t,amount:this.amountToPrecision(r,s),price:this.priceToPrecision(r,o)},e.next=12,this.privateGetEdit(this.extend(c,u));case 12:return d=e.sent,h=this.safeValue(d,"result",{}),l=this.safeValue(h,"order"),f=this.safeValue(h,"trades",[]),l.trades=f,e.abrupt("return",this.parseOrder(l));case 18:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.length>1&&void 0!==o[1]?o[1]:void 0,r=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return n={order_id:t},e.next=7,this.privateGetCancel(this.extend(n,r));case 7:return a=e.sent,s=this.safeValue(a,"result",{}),e.abrupt("return",this.parseOrder(s));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cancelAllOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:{},e.next=4,this.loadMarkets();case 4:return n={},a=void 0,void 0===t?a="privateGetCancelAll":(a="privateGetCancelAllByInstrument",s=this.market(t),n.instrument_name=s.id),e.next=9,this[a](this.extend(n,r));case 9:return o=e.sent,e.abrupt("return",o);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:void 0,r=f.length>1&&void 0!==f[1]?f[1]:void 0,n=f.length>2&&void 0!==f[2]?f[2]:void 0,a=f.length>3&&void 0!==f[3]?f[3]:{},e.next=6,this.loadMarkets();case 6:return s={},o=void 0,u=void 0,void 0===t?(c=this.codeFromOptions("fetchOpenOrders"),d=this.currency(c),s.currency=d.id,u="privateGetGetOpenOrdersByCurrency"):(o=this.market(t),s.instrument_name=o.id,u="privateGetGetOpenOrdersByInstrument"),e.next=12,this[u](this.extend(s,a));case 12:return h=e.sent,l=this.safeValue(h,"result",[]),e.abrupt("return",this.parseOrders(l,o,r,n));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:void 0,r=f.length>1&&void 0!==f[1]?f[1]:void 0,n=f.length>2&&void 0!==f[2]?f[2]:void 0,a=f.length>3&&void 0!==f[3]?f[3]:{},e.next=6,this.loadMarkets();case 6:return s={},o=void 0,u=void 0,void 0===t?(c=this.codeFromOptions("fetchClosedOrders"),d=this.currency(c),s.currency=d.id,u="privateGetGetOrderHistoryByCurrency"):(o=this.market(t),s.instrument_name=o.id,u="privateGetGetOrderHistoryByInstrument"),e.next=12,this[u](this.extend(s,a));case 12:return h=e.sent,l=this.safeValue(h,"result",[]),e.abrupt("return",this.parseOrders(l,o,r,n));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d.length>1&&void 0!==d[1]?d[1]:void 0,r=d.length>2&&void 0!==d[2]?d[2]:void 0,n=d.length>3&&void 0!==d[3]?d[3]:void 0,a=d.length>4&&void 0!==d[4]?d[4]:{},e.next=6,this.loadMarkets();case 6:return s={order_id:t},e.next=9,this.privateGetGetUserTradesByOrder(this.extend(s,a));case 9:return o=e.sent,u=this.safeValue(o,"result",{}),c=this.safeValue(u,"trades",[]),e.abrupt("return",this.parseTrades(c,void 0,r,n));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.length>0&&void 0!==p[0]?p[0]:void 0,r=p.length>1&&void 0!==p[1]?p[1]:void 0,n=p.length>2&&void 0!==p[2]?p[2]:void 0,a=p.length>3&&void 0!==p[3]?p[3]:{},e.next=6,this.loadMarkets();case 6:return s={include_old:!0},o=void 0,u=void 0,void 0===t?(c=this.codeFromOptions("fetchMyTrades"),d=this.currency(c),s.currency=d.id,void 0===r?u="privateGetGetUserTradesByCurrency":(u="privateGetGetUserTradesByCurrencyAndTime",s.start_timestamp=r)):(o=this.market(t),s.instrument_name=o.id,void 0===r?u="privateGetGetUserTradesByInstrument":(u="privateGetGetUserTradesByInstrumentAndTime",s.start_timestamp=r)),void 0!==n&&(s.count=n),e.next=13,this[u](this.extend(s,a));case 13:return h=e.sent,l=this.safeValue(h,"result",{}),f=this.safeValue(l,"trades",[]),e.abrupt("return",this.parseTrades(f,o,r,n));case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchDeposits",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:{},void 0!==t){e.next=6;break}throw new m(this.id+" fetchDeposits() requires a currency code argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.currency(t),o={currency:s.id},void 0!==n&&(o.count=n),e.next=13,this.privateGetGetDeposits(this.extend(o,a));case 13:return u=e.sent,c=this.safeValue(u,"result",{}),d=this.safeValue(c,"data",[]),e.abrupt("return",this.parseTransactions(d,s,r,n,a));case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchWithdrawals",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:{},void 0!==t){e.next=6;break}throw new m(this.id+" fetchWithdrawals() requires a currency code argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.currency(t),o={currency:s.id},void 0!==n&&(o.count=n),e.next=13,this.privateGetGetWithdrawals(this.extend(o,a));case 13:return u=e.sent,c=this.safeValue(u,"result",{}),d=this.safeValue(c,"data",[]),e.abrupt("return",this.parseTransactions(d,s,r,n,a));case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTransactionStatus",value:function(e){return this.safeString({completed:"ok",unconfirmed:"pending"},e,e)}},{key:"parseTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"currency"),i=this.safeCurrencyCode(r,t),n=this.safeInteger2(e,"created_timestamp","received_timestamp"),a=this.safeInteger(e,"updated_timestamp"),s=this.parseTransactionStatus(this.safeString(e,"state")),o=this.safeString(e,"address"),u=this.safeNumber(e,"fee"),c="deposit",d=void 0;return void 0!==u&&(c="withdrawal",d={cost:u,currency:i}),{info:e,id:this.safeString(e,"id"),txid:this.safeString(e,"transaction_id"),timestamp:n,datetime:this.iso8601(n),address:o,addressTo:o,addressFrom:void 0,tag:void 0,tagTo:void 0,tagFrom:void 0,type:c,amount:this.safeNumber(e,"amount"),currency:i,status:s,updated:a,fee:d}}},{key:"fetchPosition",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={instrument_name:n.id},e.next=7,this.privateGetGetPosition(this.extend(a,r));case 7:return s=e.sent,o=this.safeValue(s,"result"),e.abrupt("return",o);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchPositions",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u.length>0&&void 0!==u[0]?u[0]:void 0,t=u.length>1&&void 0!==u[1]?u[1]:{},e.next=4,this.loadMarkets();case 4:return r=this.codeFromOptions("fetchPositions"),n=this.currency(r),a={currency:n.id},e.next=9,this.privateGetGetPositions(this.extend(a,t));case 9:return s=e.sent,o=this.safeValue(s,"result",[]),e.abrupt("return",o);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"withdraw",value:function(){var e=n(i.mark((function e(t,r,n){var a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.length>3&&void 0!==c[3]?c[3]:void 0,a=c.length>4&&void 0!==c[4]?c[4]:{},this.checkAddress(n),e.next=5,this.loadMarkets();case 5:return s=this.currency(t),o={currency:s.id,address:n,amount:r},void 0!==this.twofa&&(o.tfa=this.oath()),e.next=10,this.privateGetWithdraw(this.extend(o,a));case 10:return u=e.sent,e.abrupt("return",{info:u,id:this.safeString(u,"id")});case 12:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"nonce",value:function(){return this.milliseconds()}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s="/api/"+this.version+"/"+t+"/"+e;if("public"===t&&Object.keys(i).length&&(s+="?"+this.urlencode(i)),"private"===t){this.checkRequiredCredentials();var o=this.nonce().toString(),u=this.milliseconds().toString(),c="";Object.keys(i).length&&(s+="?"+this.urlencode(i));var d=r+"\n"+s+"\n"+c+"\n",h=u+"\n"+o+"\n"+d,l=this.hmac(this.encode(h),this.encode(this.secret),"sha256");n={Authorization:"deri-hmac-sha256 id="+this.apiKey+",ts="+u+",sig="+l+",nonce="+o}}var f=this.urls.api+s;return{url:f,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,u){if(s){var c=this.safeValue(s,"error");if(void 0!==c){var d=this.safeString(c,"code"),h=this.id+" "+a;throw this.throwExactlyMatchedException(this.exceptions,d,h),new v(h)}}}}]),r}(h)},function(e,t,r){"use strict";var i=r(21),n=r(7),a=r(8),s=r(1),o=r(2),u=r(6),c=r(3),d=r(4),h=r(5),l=r(11),f=r(10),p=f.AccountSuspended,v=f.BadRequest,m=f.BadResponse,g=f.NetworkError,y=f.DDoSProtection,b=f.AuthenticationError,x=f.PermissionDenied,k=f.ExchangeError,w=f.InsufficientFunds,_=f.InvalidOrder,S=f.InvalidNonce,O=f.OrderNotFound,T=f.InvalidAddress,C=f.RateLimitExceeded,I=f.BadSymbol,M=r(12);e.exports=function(e){d(r,e);var t=h(r);function r(){return s(this,r),t.apply(this,arguments)}return o(r,[{key:"describe",value:function(){return this.deepExtend(u(c(r.prototype),"describe",this).call(this),{id:"digifinex",name:"DigiFinex",countries:["SG"],version:"v3",rateLimit:900,has:{cancelOrder:!0,cancelOrders:!0,createOrder:!0,fetchBalance:!0,fetchCurrencies:!0,fetchDepositAddress:!0,fetchDeposits:!0,fetchLedger:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchStatus:!0,fetchTicker:!0,fetchTickers:!0,fetchTime:!0,fetchTrades:!0,fetchWithdrawals:!0,withdraw:!0},timeframes:{"1m":"1","5m":"5","15m":"15","30m":"30","1h":"60","4h":"240","12h":"720","1d":"1D","1w":"1W"},urls:{logo:"https://user-images.githubusercontent.com/51840849/87443315-01283a00-c5fe-11ea-8628-c2a0feaf07ac.jpg",api:"https://openapi.digifinex.com",www:"https://www.digifinex.com",doc:["https://docs.digifinex.com"],fees:"https://digifinex.zendesk.com/hc/en-us/articles/360000328422-Fee-Structure-on-DigiFinex",referral:"https://www.digifinex.com/en-ww/from/DhOzBg?channelCode=ljaUPp"},api:{public:{get:["{market}/symbols","kline","margin/currencies","margin/symbols","markets","order_book","ping","spot/symbols","time","trades","trades/symbols","ticker","currencies"]},private:{get:["{market}/financelog","{market}/mytrades","{market}/order","{market}\u200b/order\u200b/detail","{market}/order/current","{market}/order/history","margin/assets","margin/financelog","margin/mytrades","margin/order","margin/order/current","margin/order/history","margin/positions","otc/financelog","spot/assets","spot/financelog","spot/mytrades","spot/order","spot/order/current","spot/order/history","deposit/address","deposit/history","withdraw/history"],post:["{market}/order/cancel","{market}/order/new","{market}\u200b/order\u200b/batch_new","margin/order/cancel","margin/order/new","margin/position/close","spot/order/cancel","spot/order/new","transfer","withdraw/new","withdraw/cancel"]}},fees:{trading:{tierBased:!1,percentage:!0,maker:.002,taker:.002}},exceptions:{exact:{10001:[v,"Wrong request method, please check it's a GET ot POST request"],10002:[b,"Invalid ApiKey"],10003:[b,"Sign doesn't match"],10004:[v,"Illegal request parameters"],10005:[y,"Request frequency exceeds the limit"],10006:[x,"Unauthorized to execute this request"],10007:[x,"IP address Unauthorized"],10008:[S,"Timestamp for this request is invalid, timestamp must within 1 minute"],10009:[g,"Unexist endpoint, please check endpoint URL"],10011:[p,"ApiKey expired. Please go to client side to re-create an ApiKey"],20001:[x,"Trade is not open for this trading pair"],20002:[x,"Trade of this trading pair is suspended"],20003:[_,"Invalid price or amount"],20007:[_,"Price precision error"],20008:[_,"Amount precision error"],20009:[_,"Amount is less than the minimum requirement"],20010:[_,"Cash Amount is less than the minimum requirement"],20011:[w,"Insufficient balance"],20012:[v,"Invalid trade type, valid value: buy/sell)"],20013:[_,"No order info found"],20014:[v,"Invalid date, Valid format: 2018-07-25)"],20015:[v,"Date exceeds the limit"],20018:[x,"Your trading rights have been banned by the system"],20019:[v,'Wrong trading pair symbol. Correct format:"usdt_btc". Quote asset is in the front'],20020:[y,"You have violated the API operation trading rules and temporarily forbid trading. At present, we have certain restrictions on the user's transaction rate and withdrawal rate."],5e4:[k,"Exception error"],20021:[v,"Invalid currency"],20022:[v,"The ending timestamp must be larger than the starting timestamp"],20023:[v,"Invalid transfer type"],20024:[v,"Invalid amount"],20025:[v,"This currency is not transferable at the moment"],20026:[w,"Transfer amount exceed your balance"],20027:[x,"Abnormal account status"],20028:[x,"Blacklist for transfer"],20029:[x,"Transfer amount exceed your daily limit"],20030:[v,"You have no position on this trading pair"],20032:[x,"Withdrawal limited"],20033:[v,"Wrong Withdrawal ID"],20034:[x,"Withdrawal service of this crypto has been closed"],20035:[x,"Withdrawal limit"],20036:[k,"Withdrawal cancellation failed"],20037:[T,"The withdrawal address, Tag or chain type is not included in the withdrawal management list"],20038:[T,"The withdrawal address is not on the white list"],20039:[k,"Can't be canceled in current status"],20040:[C,"Withdraw too frequently; limitation: 3 times a minute, 100 times a day"],20041:[x,"Beyond the daily withdrawal limit"],20042:[I,"Current trading pair does not support API trading"]},broad:{}},options:{defaultType:"spot",types:["spot","margin","otc"]},commonCurrencies:{BHT:"Black House Test",EPS:"Epanus",MBN:"Mobilian Coin",TEL:"TEL666"}})}},{key:"fetchCurrencies",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,u,c,d,h,l,f,p=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.length>0&&void 0!==p[0]?p[0]:{},e.next=3,this.publicGetCurrencies(t);case 3:for(r=e.sent,i=this.safeValue(r,"data",[]),a={},s=0;s<i.length;s++)o=i[s],u=this.safeString(o,"currency"),c=this.safeCurrencyCode(u),d=this.safeValue(o,"deposit_status",1),h=this.safeValue(o,"withdraw_status",1),l=d&&h,f=this.safeNumber(o,"withdraw_fee_rate"),c in a?Array.isArray(a[c].info)?a[c].info.push(o):a[c].info=[a[c].info,o]:a[c]={id:u,code:c,info:o,type:void 0,name:void 0,active:l,fee:f,precision:8,limits:{amount:{min:void 0,max:void 0},withdraw:{min:this.safeNumber(o,"min_withdraw_amount"),max:void 0}}};return e.abrupt("return",a);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMarkets",value:function(){var e=a(n.mark((function e(){var t,r,i,a=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},r=this.safeValue(this.options,"fetchMarkets",{}),i=this.safeString(r,"method","fetch_markets_v2"),e.next=5,this[i](t);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMarketsV2",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,u,c,d,h,l,f,p,v,m,g,y,b,x,k=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=k.length>0&&void 0!==k[0]?k[0]:{},e.next=3,this.publicGetTradesSymbols(t);case 3:for(r=e.sent,i=this.safeValue(r,"symbol_list",[]),a=[],s=0;s<i.length;s++)o=i[s],u=this.safeString(o,"symbol"),c=this.safeString(o,"base_asset"),d=this.safeString(o,"quote_asset"),h=this.safeCurrencyCode(c),l=this.safeCurrencyCode(d),f=h+"/"+l,p={amount:this.safeInteger(o,"amount_precision"),price:this.safeInteger(o,"price_precision")},v={amount:{min:this.safeNumber(o,"minimum_amount"),max:void 0},price:{min:void 0,max:void 0},cost:{min:this.safeNumber(o,"minimum_value"),max:void 0}},m=this.safeInteger(o,"is_allow",1),g=!!m,b="spot"===(y="spot"),x="margin"===y,a.push({id:u,symbol:f,base:h,quote:l,baseId:c,quoteId:d,active:g,type:y,spot:b,margin:x,precision:p,limits:v,info:o});return e.abrupt("return",a);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMarketsV1",value:function(){var e=a(n.mark((function e(){var t,r,a,s,o,u,c,d,h,l,f,p,v,m,g,y,b,x=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=x.length>0&&void 0!==x[0]?x[0]:{},e.next=3,this.publicGetMarkets(t);case 3:for(r=e.sent,a=this.safeValue(r,"data",[]),s=[],o=0;o<a.length;o++)u=a[o],c=this.safeString(u,"market"),d=c.split("_"),h=i(d,2),l=h[0],f=h[1],p=this.safeCurrencyCode(l),v=this.safeCurrencyCode(f),m=p+"/"+v,g={amount:this.safeInteger(u,"volume_precision"),price:this.safeInteger(u,"price_precision")},y={amount:{min:this.safeNumber(u,"min_volume"),max:void 0},price:{min:void 0,max:void 0},cost:{min:this.safeNumber(u,"min_amount"),max:void 0}},b=void 0,s.push({id:c,symbol:m,base:p,quote:v,baseId:l,quoteId:f,active:b,precision:g,limits:y,info:u});return e.abrupt("return",s);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,u,c,d,h,l,f,p=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.length>0&&void 0!==p[0]?p[0]:{},r=this.safeString(this.options,"defaultType","spot"),i=this.safeString(t,"type",r),t=this.omit(t,"type"),a="privateGet"+this.capitalize(i)+"Assets",e.next=7,this[a](t);case 7:for(s=e.sent,o=this.safeValue(s,"list",[]),u={info:s},c=0;c<o.length;c++)d=o[c],h=this.safeString(d,"currency"),l=this.safeCurrencyCode(h),(f=this.account()).used=this.safeString(d,"frozen"),f.free=this.safeString(d,"free"),f.total=this.safeString(d,"total"),u[l]=f;return e.abrupt("return",this.parseBalance(u,!1));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,u,c=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,i=c.length>2&&void 0!==c[2]?c[2]:{},e.next=4,this.loadMarkets();case 4:return a=this.market(t),s={symbol:a.id},void 0!==r&&(s.limit=r),e.next=9,this.publicGetOrderBook(this.extend(s,i));case 9:return o=e.sent,u=this.safeTimestamp(o,"date"),e.abrupt("return",this.parseOrderBook(o,u));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTickers",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,u,c,d,h,l=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:void 0,r=l.length>1&&void 0!==l[1]?l[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetTicker(r);case 6:for(i=e.sent,a={},s=this.safeValue(i,"ticker",[]),o=this.safeInteger(i,"date"),u=0;u<s.length;u++)c=this.extend({date:o},s[u]),d=this.parseTicker(c),h=d.symbol,a[h]=d;return e.abrupt("return",this.filterByArray(a,"symbol",t));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,u,c,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:{},e.next=3,this.loadMarkets();case 3:return i=this.market(t),a={symbol:i.id},e.next=7,this.publicGetTicker(this.extend(a,r));case 7:return s=e.sent,o=this.safeInteger(s,"date"),u=this.safeValue(s,"ticker",[]),c=this.safeValue(u,0,{}),d=this.extend({date:o},c),e.abrupt("return",this.parseTicker(d,i));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeStringUpper(e,"symbol"),i=this.safeSymbol(r,t,"_"),n=this.safeTimestamp(e,"date"),a=this.safeNumber(e,"last"),s=this.safeNumber(e,"change");return{symbol:i,timestamp:n,datetime:this.iso8601(n),high:this.safeNumber(e,"high"),low:this.safeNumber(e,"low"),bid:this.safeNumber(e,"buy"),bidVolume:void 0,ask:this.safeNumber(e,"sell"),askVolume:void 0,vwap:void 0,open:void 0,close:a,last:a,previousClose:void 0,change:void 0,percentage:s,average:void 0,baseVolume:this.safeNumber(e,"vol"),quoteVolume:this.safeNumber(e,"base_vol"),info:e}}},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),i=this.safeString(e,"order_id"),n=this.safeTimestamp2(e,"date","timestamp"),a=this.safeString2(e,"type","side"),s=this.safeString(e,"price"),o=this.safeString(e,"amount"),u=this.parseNumber(s),c=this.parseNumber(o),d=this.parseNumber(M.stringMul(s,o)),h=this.safeString(e,"symbol"),l=this.safeSymbol(h,t,"_"),f=this.safeValue(e,"is_maker"),p=this.safeNumber(e,"fee"),v=void 0;if(void 0!==p){var m=this.safeString(e,"fee_currency"),g=this.safeCurrencyCode(m);v={cost:p,currency:g}}return{id:r,info:e,timestamp:n,datetime:this.iso8601(n),symbol:l,type:void 0,order:i,side:a,price:u,amount:c,cost:d,takerOrMaker:f,fee:v}}},{key:"fetchTime",value:function(){var e=a(n.mark((function e(){var t,r,i=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},e.next=3,this.publicGetTime(t);case 3:return r=e.sent,e.abrupt("return",this.safeTimestamp(r,"server_time"));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchStatus",value:function(){var e=a(n.mark((function e(){var t,r=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:{},e.next=3,this.publicGetPing(t);case 3:return this.status=this.extend(this.status,{status:"ok",updated:this.milliseconds()}),e.abrupt("return",this.status);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTrades",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,u,c,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,i=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={symbol:s.id},void 0!==i&&(o.limit=i),e.next=10,this.publicGetTrades(this.extend(o,a));case 10:return u=e.sent,c=this.safeValue(u,"data",[]),e.abrupt("return",this.parseTrades(c,s,r,i));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){return[this.safeTimestamp(e,0),this.safeNumber(e,5),this.safeNumber(e,3),this.safeNumber(e,4),this.safeNumber(e,2),this.safeNumber(e,1)]}},{key:"fetchOHLCV",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,u,c,d,h,l,f,p,v=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=v.length>1&&void 0!==v[1]?v[1]:"1m",i=v.length>2&&void 0!==v[2]?v[2]:void 0,a=v.length>3&&void 0!==v[3]?v[3]:void 0,s=v.length>4&&void 0!==v[4]?v[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),u={symbol:o.id,period:this.timeframes[r]},void 0!==i?(c=parseInt(i/1e3),u.start_time=c,void 0!==a&&(d=this.parseTimeframe(r),u.end_time=this.sum(c,a*d))):void 0!==a&&(h=this.seconds(),l=this.parseTimeframe(r),u.startTime=this.sum(h,-a*l)),e.next=11,this.publicGetKline(this.extend(u,s));case 11:return f=e.sent,p=this.safeValue(f,"data",[]),e.abrupt("return",this.parseOHLCVs(p,o,r,i,a));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=a(n.mark((function e(t,r,i,a){var s,o,u,c,d,h,l,f,p,v=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=v.length>4&&void 0!==v[4]?v[4]:void 0,o=v.length>5&&void 0!==v[5]?v[5]:{},e.next=4,this.loadMarkets();case 4:return u=this.market(t),c=this.safeString(this.options,"defaultType","spot"),d=this.safeString(o,"type",c),o=this.omit(o,"type"),h={market:d,symbol:u.id,amount:this.amountToPrecision(t,a)},l="","market"===r?l="_market":h.price=this.priceToPrecision(t,s),h.type=i+l,e.next=14,this.privatePostMarketOrderNew(this.extend(h,o));case 14:return f=e.sent,p=this.parseOrder(f,u),e.abrupt("return",this.extend(p,{symbol:t,side:i,type:r,amount:a,price:s}));case 17:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,u,c=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.length>1&&void 0!==c[1]?c[1]:void 0,r=c.length>2&&void 0!==c[2]?c[2]:{},e.next=4,this.loadMarkets();case 4:return i=this.safeString(this.options,"defaultType","spot"),a=this.safeString(r,"type",i),r=this.omit(r,"type"),s={market:a,order_id:t},e.next=10,this.privatePostMarketOrderCancel(this.extend(s,r));case 10:if(o=e.sent,u=this.safeValue(o,"success",[]),1===u.length){e.next=15;break}throw new O(this.id+" cancelOrder "+t+" not found");case 15:return e.abrupt("return",o);case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cancelOrders",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,u,c=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.length>1&&void 0!==c[1]?c[1]:void 0,r=c.length>2&&void 0!==c[2]?c[2]:{},e.next=4,this.loadMarkets();case 4:return i=this.safeString(this.options,"defaultType","spot"),a=this.safeString(r,"type",i),r=this.omit(r,"type"),s={market:a,order_id:t.join(",")},e.next=10,this.privatePostCancelOrder(this.extend(s,r));case 10:if(o=e.sent,u=this.safeValue(o,"success",[]),!(u.length<1)){e.next=15;break}throw new O(this.id+" cancelOrders error");case 15:return e.abrupt("return",o);case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({0:"open",1:"open",2:"closed",3:"canceled",4:"canceled"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"order_id"),i=this.safeTimestamp(e,"created_date"),n=this.safeTimestamp(e,"finished_date"),a=this.safeString(e,"type"),s=void 0;if(void 0!==a){var o=a.split("_"),u=o.length;u>1?(a=o[0],s=o[1]):s="limit"}var c=this.parseOrderStatus(this.safeString(e,"status")),d=this.safeString(e,"symbol"),h=this.safeSymbol(d,t,"_"),l=this.safeNumber(e,"amount"),f=this.safeNumber(e,"executed_amount"),p=this.safeNumber(e,"price"),v=this.safeNumber(e,"avg_price");return this.safeOrder({info:e,id:r,clientOrderId:void 0,timestamp:i,datetime:this.iso8601(i),lastTradeTimestamp:n,symbol:h,type:s,timeInForce:void 0,postOnly:void 0,side:a,price:p,stopPrice:void 0,amount:l,filled:f,remaining:void 0,cost:void 0,average:v,status:c,fee:void 0,trades:void 0})}},{key:"fetchOpenOrders",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,u,c,d,h,l=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:void 0,r=l.length>1&&void 0!==l[1]?l[1]:void 0,i=l.length>2&&void 0!==l[2]?l[2]:void 0,a=l.length>3&&void 0!==l[3]?l[3]:{},s=this.safeString(this.options,"defaultType","spot"),o=this.safeString(a,"type",s),a=this.omit(a,"type"),e.next=9,this.loadMarkets();case 9:return u=void 0,c={market:o},void 0!==t&&(u=this.market(t),c.symbol=u.id),e.next=14,this.privateGetMarketOrderCurrent(this.extend(c,a));case 14:return d=e.sent,h=this.safeValue(d,"data",[]),e.abrupt("return",this.parseOrders(h,u,r,i));case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrders",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,u,c,d,h,l=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:void 0,r=l.length>1&&void 0!==l[1]?l[1]:void 0,i=l.length>2&&void 0!==l[2]?l[2]:void 0,a=l.length>3&&void 0!==l[3]?l[3]:{},s=this.safeString(this.options,"defaultType","spot"),o=this.safeString(a,"type",s),a=this.omit(a,"type"),e.next=9,this.loadMarkets();case 9:return u=void 0,c={market:o},void 0!==t&&(u=this.market(t),c.symbol=u.id),void 0!==r&&(c.start_time=parseInt(r/1e3)),void 0!==i&&(c.limit=i),e.next=16,this.privateGetMarketOrderHistory(this.extend(c,a));case 16:return d=e.sent,h=this.safeValue(d,"data",[]),e.abrupt("return",this.parseOrders(h,u,r,i));case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,u,c,d,h,l=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>1&&void 0!==l[1]?l[1]:void 0,i=l.length>2&&void 0!==l[2]?l[2]:{},a=this.safeString(this.options,"defaultType","spot"),s=this.safeString(i,"type",a),i=this.omit(i,"type"),e.next=7,this.loadMarkets();case 7:return o=void 0,void 0!==r&&(o=this.market(r)),u={market:s,order_id:t},e.next=12,this.privateGetMarketOrder(this.extend(u,i));case 12:if(c=e.sent,d=this.safeValue(c,"data",[]),void 0!==(h=this.safeValue(d,0))){e.next=17;break}throw new O(this.id+" fetchOrder() order "+t+" not found");case 17:return e.abrupt("return",this.parseOrder(h,o));case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,u,c,d,h,l=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:void 0,r=l.length>1&&void 0!==l[1]?l[1]:void 0,i=l.length>2&&void 0!==l[2]?l[2]:void 0,a=l.length>3&&void 0!==l[3]?l[3]:{},s=this.safeString(this.options,"defaultType","spot"),o=this.safeString(a,"type",s),a=this.omit(a,"type"),e.next=9,this.loadMarkets();case 9:return u=void 0,c={market:o},void 0!==t&&(u=this.market(t),c.symbol=u.id),void 0!==r&&(c.start_time=parseInt(r/1e3)),void 0!==i&&(c.limit=i),e.next=16,this.privateGetMarketMytrades(this.extend(c,a));case 16:return d=e.sent,h=this.safeValue(d,"list",[]),e.abrupt("return",this.parseTrades(h,u,r,i));case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseLedgerEntryType",value:function(e){return this.safeString({},e,e)}},{key:"parseLedgerEntry",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"num"),i=void 0,n=this.parseLedgerEntryType(this.safeString(e,"type")),a=this.safeCurrencyCode(this.safeString(e,"currency_mark"),t),s=this.safeTimestamp(e,"time"),o=void 0,u=this.safeNumber(e,"balance"),c="ok";return{info:e,id:r,direction:void 0,account:i,referenceId:void 0,referenceAccount:void 0,type:n,currency:a,amount:void 0,before:o,after:u,status:c,timestamp:s,datetime:this.iso8601(s),fee:void 0}}},{key:"fetchLedger",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,u,c,d,h,l,f=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:void 0,r=f.length>1&&void 0!==f[1]?f[1]:void 0,i=f.length>2&&void 0!==f[2]?f[2]:void 0,a=f.length>3&&void 0!==f[3]?f[3]:{},s=this.safeString(this.options,"defaultType","spot"),o=this.safeString(a,"type",s),a=this.omit(a,"type"),e.next=9,this.loadMarkets();case 9:return u={market:o},c=void 0,void 0!==t&&(c=this.currency(t),u.currency_mark=c.id),void 0!==r&&(u.start_time=parseInt(r/1e3)),void 0!==i&&(u.limit=i),e.next=16,this.privateGetMarketFinancelog(this.extend(u,a));case 16:return d=e.sent,h=this.safeValue(d,"data",{}),l=this.safeValue(h,"finance",[]),e.abrupt("return",this.parseLedger(l,c,r,i));case 20:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseDepositAddress",value:function(e){var t=this.safeString(e,"address"),r=this.safeString(e,"addressTag"),i=this.safeStringUpper(e,"currency"),n=this.safeCurrencyCode(i);return{info:e,code:n,address:t,tag:r}}},{key:"fetchDepositAddress",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,u,c,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:{},e.next=3,this.loadMarkets();case 3:return i=this.currency(t),a={currency:i.id},e.next=7,this.privateGetDepositAddress(this.extend(a,r));case 7:if(s=e.sent,o=this.safeValue(s,"data",[]),u=this.parseDepositAddresses(o),void 0!==(c=this.safeValue(u,t))){e.next=13;break}throw new T(this.id+" fetchDepositAddress did not return an address for "+t+" - create the deposit address in the user settings on the exchange website first.");case 13:return e.abrupt("return",c);case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTransactionsByType",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,u,c,d,h,l=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>1&&void 0!==l[1]?l[1]:void 0,i=l.length>2&&void 0!==l[2]?l[2]:void 0,a=l.length>3&&void 0!==l[3]?l[3]:void 0,s=l.length>4&&void 0!==l[4]?l[4]:{},e.next=6,this.loadMarkets();case 6:return o=void 0,u={},void 0!==r&&(o=this.currency(r),u.currency=o.id),void 0!==a&&(u.size=Math.min(500,a)),c="deposit"===t?"privateGetDepositHistory":"privateGetWithdrawHistory",e.next=13,this[c](this.extend(u,s));case 13:return d=e.sent,h=this.safeValue(d,"data",[]),e.abrupt("return",this.parseTransactions(h,o,i,a,{type:t}));case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchDeposits",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:void 0,i=s.length>2&&void 0!==s[2]?s[2]:void 0,a=s.length>3&&void 0!==s[3]?s[3]:{},e.next=6,this.fetchTransactionsByType("deposit",t,r,i,a);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchWithdrawals",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:void 0,i=s.length>2&&void 0!==s[2]?s[2]:void 0,a=s.length>3&&void 0!==s[3]?s[3]:{},e.next=6,this.fetchTransactionsByType("withdrawal",t,r,i,a);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTransactionStatus",value:function(e){return this.safeString({0:"pending",1:"canceled",2:"pending",3:"failed",4:"pending",5:"failed",6:"ok"},e,e)}},{key:"parseTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString2(e,"id","withdraw_id"),i=this.safeString(e,"address"),n=this.safeString(e,"memo");void 0!==n&&n.length<1&&(n=void 0);var a=this.safeString(e,"hash"),s=this.safeStringUpper(e,"currency"),o=this.safeCurrencyCode(s,t),u=this.parse8601(this.safeString(e,"created_date")),c=this.parse8601(this.safeString(e,"finished_date")),d=this.parseTransactionStatus(this.safeString(e,"state")),h=this.safeNumber(e,"amount"),l=this.safeNumber(e,"fee"),f=void 0;return void 0!==l&&(f={currency:o,cost:l}),{info:e,id:r,txid:a,timestamp:u,datetime:this.iso8601(u),address:i,addressTo:i,addressFrom:void 0,tag:n,tagTo:n,tagFrom:void 0,type:void 0,amount:h,currency:o,status:d,updated:c,fee:f}}},{key:"withdraw",value:function(){var e=a(n.mark((function e(t,r,i){var a,s,o,u,c,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=d.length>3&&void 0!==d[3]?d[3]:void 0,s=d.length>4&&void 0!==d[4]?d[4]:{},this.checkAddress(i),e.next=5,this.loadMarkets();case 5:return o=this.currency(t),u={address:i,amount:parseFloat(r),currency:o.id},void 0!==a&&(u.memo=a),e.next=10,this.privatePostWithdrawNew(this.extend(u,s));case 10:return c=e.sent,e.abrupt("return",this.parseTransaction(c,o));case 12:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.version,o=this.urls.api+"/"+s+"/"+this.implodeParams(e,i),u=this.omit(i,this.extractParams(e)),c=this.urlencode(this.keysort(u));if("private"===t){var d=this.nonce().toString(),h=c,l=this.hmac(this.encode(h),this.encode(this.secret));"GET"===r?c&&(o+="?"+c):"POST"===r&&(n={"Content-Type":"application/x-www-form-urlencoded"},c&&(a=c)),n={"ACCESS-KEY":this.apiKey,"ACCESS-SIGN":l,"ACCESS-TIMESTAMP":d}}else c&&(o+="?"+c);return{url:o,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,n,a,s,o,u,c){if(o){var d=this.safeString(o,"code");if("0"!==d&&"200"!==d){var h=this.id+" "+s;if(void 0===d)throw new m(h);var l=[k,h],f=this.safeValue(this.exceptions.exact,d,l),p=i(f,2);throw new(0,p[0])(p[1])}}}}]),r}(l)},function(e,t,r){"use strict";var i=r(7),n=r(8),a=r(1),s=r(2),o=r(6),u=r(3),c=r(4),d=r(5),h=r(11),l=r(10),f=l.ExchangeError,p=l.ArgumentsRequired,v=l.BadSymbol;e.exports=function(e){c(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(u(r.prototype),"describe",this).call(this),{id:"equos",name:"EQUOS",countries:["US","SG"],rateLimit:10,has:{CORS:!1,cancelOrder:!0,createOrder:!0,editOrder:!0,fetchBalance:!0,fetchCanceledOrders:!0,fetchClosedOrders:!0,fetchCurrencies:!0,fetchDepositAddress:!0,fetchDeposits:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchTicker:!1,fetchTrades:!0,fetchTradingFees:!0,fetchWithdrawals:!0,withdraw:!0},timeframes:{"1m":1,"5m":2,"15m":3,"1h":4,"6h":5,"1d":6,"7d":7},urls:{logo:"https://user-images.githubusercontent.com/1294454/107758499-05edd180-6d38-11eb-9e09-0b69602a7a15.jpg",test:{public:"https://testnet.equos.io/api",private:"https://testnet.equos.io/api"},api:{public:"https://equos.io/api",private:"https://equos.io/api"},www:"https://equos.io",doc:["https://developer.equos.io"],referral:"https://equos.io?referredByCode=zpa8kij4ouvBFup3"},api:{public:{get:["health","getInstruments","getInstrumentPairs","getOrderBook","getRisk","getTradeHistory","getFundingRateHistory","getChart","getExchangeInfo"]},private:{post:["logon","order","cancelOrder","cancelReplaceOrder","getOrder","getOrders","getOrderStatus","getOrderHistory","userTrades","getPositions","cancelAll","getUserHistory","getRisk","getDepositAddresses","getDepositHistory","getWithdrawRequests","sendWithdrawRequest","getTransferHistory"]}},requiredCredentials:{apiKey:!0,secret:!0,uid:!0},exceptions:{broad:{"symbol not found":v}}})}},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:{},r={verbose:!0},e.next=4,this.publicGetGetInstrumentPairs(this.extend(r,t));case 4:for(n=e.sent,a=this.safeValue(n,"instrumentPairs",[]),s=[],o=0;o<a.length;o++)u=this.parseMarket(a[o]),s.push(u);return e.abrupt("return",s);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseMarket",value:function(e){var t=this.safeString(e,"instrumentId"),r=this.safeString(e,"symbol"),i=this.safeString(e,"assetType"),n="PAIR"===i,a="PERPETUAL_SWAP"===i,s=a?"swap":"spot",o=this.safeString(e,"currency"),u=this.safeString(e,"contAmtCurr"),c=this.safeCurrencyCode(o),d=this.safeCurrencyCode(u);return{id:t,uppercaseId:r,symbol:a?r:c+"/"+d,base:c,quote:d,baseId:o,quoteId:u,type:s,spot:n,swap:a,active:1===this.safeInteger(e,"securityStatus"),precision:{amount:this.safeInteger(e,"quantity_scale"),price:this.safeInteger(e,"price_scale")},limits:{amount:{min:this.safeNumber(e,"minTradeVol"),max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0}},info:e}}},{key:"fetchCurrencies",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:{},e.next=3,this.publicGetGetInstruments(t);case 3:for(r=e.sent,n={},a=this.safeValue(r,"instruments",[]),s=0;s<a.length;s++)o=this.parseCurrency(a[s]),u=o.code,n[u]=o;return e.abrupt("return",n);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseCurrency",value:function(e){var t=this.safeString(e,0),r=this.safeString(e,1),i=this.safeCurrencyCode(r),n=this.safeInteger(e,2),a=this.safeInteger(e,3),s=Math.max(n,a),o=this.safeString(e,6),u=1===this.safeInteger(e,4);return{id:t,info:e,uppercaseId:r,code:i,name:o,precision:s,fee:this.safeNumber(e,5),active:u,limits:{amount:{min:void 0,max:void 0},withdraw:{min:void 0,max:void 0}}}}},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:"1m",n=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:void 0,s=h.length>4&&void 0!==h[4]?h[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),u={pairId:parseInt(o.id),timespan:this.timeframes[r]},void 0!==a&&(u.limit=a),e.next=11,this.publicGetGetChart(this.extend(u,s));case 11:return c=e.sent,d=this.safeValue(c,"chart",[]),e.abrupt("return",this.parseOHLCVs(d,o,r,n,a));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeInteger(e,0),i=this.convertFromScale(e[1],t.precision.price),n=this.convertFromScale(e[2],t.precision.price),a=this.convertFromScale(e[3],t.precision.price),s=this.convertFromScale(e[4],t.precision.price),o=this.convertFromScale(e[5],t.precision.amount);return[r,i,n,a,s,o]}},{key:"parseBidAsk",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;if(void 0===i)throw new p(this.id+" parseBidAsk() requires a market argument");var n=this.safeNumber(e,t),a=this.safeNumber(e,r);return[this.convertFromScale(n,i.precision.price),this.convertFromScale(a,i.precision.amount)]}},{key:"parseOrderBook",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"bids",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"asks",n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:void 0,o={timestamp:t,datetime:this.iso8601(t),nonce:void 0},u=[r,i],c=0;c<u.length;c++){for(var d=u[c],h=[],l=this.safeValue(e,d),f=0;f<l.length;f++)h.push(this.parseBidAsk(l[f],n,a,s));o[d]=h}return o[r]=this.sortBy(o[r],0,!0),o[i]=this.sortBy(o[i],0),o}},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.length>1&&void 0!==o[1]?o[1]:void 0,r=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return n=this.market(t),a={pairId:parseInt(n.id)},e.next=8,this.publicGetGetOrderBook(this.extend(a,r));case 8:return s=e.sent,e.abrupt("return",this.parseOrderBook(s,void 0,"bids","asks",0,1,n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={pairId:parseInt(s.id)},e.next=9,this.publicGetGetTradeHistory(this.extend(o,a));case 9:return u=e.sent,c=this.safeValue(u,"trades",[]),e.abrupt("return",this.parseTrades(c,s,r,n,a));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0,i=void 0,n=void 0,a=void 0,s=void 0,o=void 0,u=void 0,c=void 0,d=void 0,h=void 0;if(Array.isArray(e)){r=this.safeString(e,3),o=this.convertFromScale(this.safeInteger(e,0),t.precision.price),u=this.convertFromScale(this.safeInteger(e,1),t.precision.amount),i=this.toMilliseconds(this.safeString(e,2));var l=this.safeInteger(e,4);1===l?s="buy":2===l&&(s="sell")}else{r=this.safeString(e,"execId"),i=this.safeInteger(e,"time");var f=this.safeString(e,"symbol");h=this.safeSymbol(f,t),n=this.safeString(e,"orderId"),s=this.safeStringLower(e,"side"),a=this.parseOrderType(this.safeString(e,"ordType")),o=this.safeNumber(e,"lastPx"),u=this.safeNumber(e,"quoteQty");var p=this.safeNumber(e,"commission");if(void 0!==p){p=-p;var v=this.safeString(e,"commCurrency"),m=this.safeCurrencyCode(v);d={cost:p,currency:m}}}return void 0===h&&void 0!==t&&(h=t.symbol),void 0===c&&void 0!==u&&void 0!==o&&(c=u*o),{info:e,id:r,timestamp:i,datetime:this.iso8601(i),symbol:h,order:n,type:a,side:s,takerOrMaker:void 0,price:o,amount:u,cost:c,fee:d}}},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.length>0&&void 0!==p[0]?p[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privatePostGetPositions(t);case 5:for(r=e.sent,n=this.safeValue(r,"positions",[]),a={info:r},s=0;s<n.length;s++)o=n[s],"ASSET"===this.safeString(o,"assetType")&&(u=this.safeString(o,"symbol"),c=this.safeCurrencyCode(u),d=this.safeNumber(o,"quantity"),h=this.safeNumber(o,"availableQuantity"),l=this.safeInteger(o,"quantity_scale"),(f=this.account()).free=this.convertFromScale(h,l),f.total=this.convertFromScale(d,l),a[c]=f);return e.abrupt("return",this.parseBalance(a));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,u,c,d,h,l,f,v,m,g=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=g.length>4&&void 0!==g[4]?g[4]:void 0,o=g.length>5&&void 0!==g[5]?g[5]:{},e.next=4,this.loadMarkets();case 4:if(u=this.market(t),c="buy"===n?1:2,d=this.getScale(a),h={instrumentId:parseInt(u.id),symbol:u.uppercaseId,side:c,quantity:this.convertToScale(a,d),quantity_scale:d},"market"!==r){e.next=12;break}h.ordType=1,e.next=32;break;case 12:if("limit"!==r){e.next=17;break}h.ordType=2,h.price=this.convertToScale(s,this.getScale(s)),e.next=32;break;case 17:if(l=this.safeNumber2(o,"stopPrice","stopPx"),o=this.omit(o,["stopPrice","stopPx"]),void 0!==l){e.next=31;break}if("stop"!==r){e.next=27;break}if(void 0!==s){e.next=23;break}throw new p(this.id+" createOrder() requires a price argument or a stopPrice parameter or a stopPx parameter for "+r+" orders");case 23:h.ordType=3,h.stopPx=this.convertToScale(s,this.getScale(s)),e.next=29;break;case 27:if("stop limit"!==r){e.next=29;break}throw new p(this.id+" createOrder() requires a stopPrice parameter or a stopPx parameter for "+r+" orders");case 29:e.next=32;break;case 31:"stop"===r?(h.ordType=3,h.stopPx=this.convertToScale(l,this.getScale(l))):"stop limit"===r&&(h.ordType=4,f=this.getScale(s),v=this.getScale(l),h.price_scale=f,h.stopPx_scale=v,h.stopPx=this.convertToScale(l,v),h.price=this.convertToScale(s,f));case 32:return e.next=34,this.privatePostOrder(this.extend(h,o));case 34:return m=e.sent,e.abrupt("return",this.parseOrder(m,u));case 36:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:{},void 0!==r){e.next=4;break}throw new p(this.id+" cancelOrder() requires a symbol argument");case 4:return e.next=6,this.loadMarkets();case 6:return a=this.market(r),s={origOrderId:parseInt(t),instrumentId:parseInt(a.id)},e.next=10,this.privatePostCancelOrder(this.extend(s,n));case 10:return o=e.sent,e.abrupt("return",this.parseOrder(o,a));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"editOrder",value:function(){var e=n(i.mark((function e(t,r,n,a,s){var o,u,c,d,h,l,f,v,m,g,y=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=y.length>5&&void 0!==y[5]?y[5]:void 0,u=y.length>6&&void 0!==y[6]?y[6]:{},e.next=4,this.loadMarkets();case 4:if(c=this.market(r),d="buy"===a?1:2,h=this.getScale(s),l={origOrderId:t,instrumentId:parseInt(c.id),symbol:c.uppercaseId,side:d,quantity:this.convertToScale(s,h),quantity_scale:h},"market"!==n){e.next=12;break}l.ordType=1,e.next=32;break;case 12:if("limit"!==n){e.next=17;break}l.ordType=2,l.price=this.convertToScale(o,this.getScale(o)),e.next=32;break;case 17:if(f=this.safeNumber2(u,"stopPrice","stopPx"),u=this.omit(u,["stopPrice","stopPx"]),void 0!==f){e.next=31;break}if("stop"!==n){e.next=27;break}if(void 0!==o){e.next=23;break}throw new p(this.id+" editOrder() requires a price argument or a stopPrice parameter or a stopPx parameter for "+n+" orders");case 23:l.ordType=3,l.stopPx=this.convertToScale(o,this.getScale(o)),e.next=29;break;case 27:if("stop limit"!==n){e.next=29;break}throw new p(this.id+" editOrder() requires a stopPrice parameter or a stopPx parameter for "+n+" orders");case 29:e.next=32;break;case 31:"stop"===n?(l.ordType=3,l.stopPx=this.convertToScale(f,this.getScale(f))):"stop limit"===n&&(l.ordType=4,v=this.getScale(o),m=this.getScale(f),l.price_scale=v,l.stopPx_scale=m,l.stopPx=this.convertToScale(f,m),l.price=this.convertToScale(o,v));case 32:return e.next=34,this.privatePostOrder(this.extend(l,u));case 34:return g=e.sent,e.abrupt("return",this.parseOrder(g,c));case 36:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n,a){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.loadMarkets();case 4:return n={orderId:parseInt(t)},e.next=7,this.privatePostGetOrderStatus(this.extend(n,r));case 7:return a=e.sent,e.abrupt("return",this.parseOrder(a));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:void 0,a=o.length>3&&void 0!==o[3]?o[3]:{},s={ordStatus:"2"},e.next=7,this.fetchOrders(t,r,n,this.extend(s,a));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchCanceledOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:void 0,a=o.length>3&&void 0!==o[3]?o[3]:{},s={ordStatus:"4"},e.next=7,this.fetchOrders(t,r,n,this.extend(s,a));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return s=void 0,o={},void 0!==t&&(s=this.market(t),o.instrumentId=parseInt(s.id)),void 0!==n&&(o.limit=n),e.next=12,this.privatePostGetOrders(this.extend(o,a));case 12:return u=e.sent,c=this.safeValue(u,"orders",[]),e.abrupt("return",this.parseOrders(c,s,r,n,a));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return s={},o=void 0,void 0!==t&&(o=this.market(t),s.instrumentId=o.id),void 0!==r&&(s.startTime=r),e.next=12,this.privatePostUserTrades(this.extend(s,a));case 12:return u=e.sent,c=this.safeValue(u,"trades",[]),e.abrupt("return",this.parseTrades(c,o,r,n,a));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchDepositAddress",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.currency(t),a={instrumentId:parseInt(n.id)},e.next=7,this.privatePostGetDepositAddresses(this.extend(a,r));case 7:return s=e.sent,o=this.safeValue(s,"addresses",[]),u=this.safeValue(o,0),e.abrupt("return",this.parseDepositAddress(u,n));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseDepositAddress",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"symbol"),i=this.safeCurrencyCode(r,t),n=this.safeString(e,"address");return this.checkAddress(n),{currency:i,address:n,tag:void 0,info:e}}},{key:"fetchDeposits",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return s={},o=void 0,void 0!==t&&(o=this.currency(t),s.instrumentId=parseInt(o.id)),e.next=11,this.privatePostGetDepositHistory(this.extend(s,a));case 11:return u=e.sent,c=this.safeValue(u,"deposits",[]),e.abrupt("return",this.parseTransactions(c,o,r,n,{type:"deposit"}));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchWithdrawals",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return s={},o=void 0,void 0!==t&&(o=this.currency(t),s.instrumentId=parseInt(o.id)),e.next=11,this.privatePostGetWithdrawRequests(this.extend(s,a));case 11:return u=e.sent,c=this.safeValue(u,"addresses",[]),e.abrupt("return",this.parseTransactions(c,o,r,n,{type:"withdrawal"}));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id","transactionId"),i=this.safeString(e,"transactionUuid"),n=this.safeInteger(e,"timestamp"),a=this.safeString(e,"address");"null"===a&&(a=void 0);var s=this.safeString(e,"type"),o=this.safeNumber(e,"balance_change");if(void 0===o){o=this.safeInteger(e,"quantity");var u=this.safeInteger(e,"quantity_scale");o=this.convertFromScale(o,u)}var c=this.safeString(e,"symbol"),d=this.safeCurrencyCode(c,t),h=this.parseTransactionStatus(this.safeString(e,"status"));return{info:e,id:r,txid:i,timestamp:n,datetime:this.iso8601(n),addressFrom:void 0,address:a,addressTo:void 0,tagFrom:void 0,tag:void 0,tagTo:void 0,type:s,amount:o,currency:d,status:h,updated:void 0,comment:void 0,fee:void 0}}},{key:"parseTransactionStatus",value:function(e){return this.safeString({0:"pending",1:"ok"},e,e)}},{key:"withdraw",value:function(){var e=n(i.mark((function e(t,r,n){var a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h.length>3&&void 0!==h[3]?h[3]:void 0,a=h.length>4&&void 0!==h[4]?h[4]:{},this.checkAddress(n),e.next=5,this.loadMarkets();case 5:return s=this.currency(t),o=this.getScale(r),u=this.convertToScale(r,o),c={instrumentId:parseInt(s.id),symbol:s.uppercaseId,quantity:u,quantity_scale:o,address:n},e.next=11,this.privatePostSendWithdrawRequest(this.extend(c,a));case 11:return d=e.sent,e.abrupt("return",this.parseTransaction(d,s));case 13:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"fetchTradingFees",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:{},e.next=3,this.publicGetGetExchangeInfo(t);case 3:for(r=e.sent,n=this.safeValue(r,"spotFees",[]),a={},s={},o=0;o<n.length;o++)u=n[o],void 0!==this.safeString(u,"tier")&&(a[u.tier]=this.safeNumber(u,"taker"),s[u.tier]=this.safeNumber(u,"maker"));return e.abrupt("return",{info:n,tierBased:!0,maker:s,taker:a});case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTradingLimits",value:function(){var e=n(i.mark((function e(){var t,r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>0&&void 0!==a[0]?a[0]:void 0,t=a.length>1&&void 0!==a[1]?a[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetGetExchangeInfo(t);case 6:return r=e.sent,n=this.safeValue(r,"tradingLimits",[]),e.abrupt("return",{info:n,limits:{amount:{min:void 0,max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0}}});case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchFundingLimits",value:function(){var e=n(i.mark((function e(){var t,r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},e.next=3,this.publicGetGetExchangeInfo(t);case 3:return r=e.sent,n=this.safeValue(r,"withdrawLimits",[]),e.abrupt("return",{info:n,withdraw:void 0});case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString2(e,"orderId","id");r=this.safeString(e,"origOrderId",r);var i=this.safeString(e,"clOrdId"),n=this.parseOrderType(this.safeString(e,"ordType")),a=this.parseOrderSide(this.safeString(e,"side")),s=this.parseOrderStatus(this.safeString(e,"ordStatus")),o=this.safeString(e,"instrumentId"),u=this.safeSymbol(o,t),c=this.toMilliseconds(this.safeString(e,"timeStamp")),d=void 0,h=this.safeInteger(e,"price");0===h&&(h=void 0);var l=this.safeInteger(e,"price_scale");h=this.convertFromScale(h,l);var f=this.safeInteger(e,"quantity");0===f&&(f=void 0);var p=this.safeInteger(e,"quantity_scale");f=this.convertFromScale(f,p);var v=this.safeInteger(e,"cumQty"),m=this.safeInteger(e,"cumQty_scale");v=this.convertFromScale(v,m);var g=this.safeInteger(e,"leavesQty"),y=this.safeInteger(e,"leavesQty_scale");g=this.convertFromScale(g,y);var b=void 0,x=this.safeInteger(e,"feeInstrumentId"),k=this.safeCurrencyCode(x),w=this.safeInteger(e,"feeTotal"),_=this.safeInteger(e,"fee_scale");void 0!==w&&(w=-w,w=this.convertFromScale(w,_)),void 0!==w&&(b={currency:k,cost:w,rate:void 0});var S=this.parseTimeInForce(this.safeString(e,"timeInForce"));"0"===S&&(S=void 0);var O=this.safeInteger(e,"stopPx_scale",0),T=this.convertFromScale(this.safeInteger(e,"stopPx"),O);return this.safeOrder({info:e,id:r,clientOrderId:i,timestamp:c,datetime:this.iso8601(c),lastTradeTimestamp:d,symbol:u,type:n,timeInForce:S,postOnly:void 0,side:a,price:h,stopPrice:T,amount:f,cost:void 0,average:void 0,filled:v,remaining:g,status:s,fee:b,trades:void 0})}},{key:"parseOrderStatus",value:function(e){return this.safeString({0:"open",1:"open",2:"closed",3:"open",4:"canceled",5:"canceled",6:"canceling",7:"canceled",8:"rejected",9:"canceled",A:"open",B:"open",C:"expired",D:"open",E:"canceling",F:"open"},e,e)}},{key:"parseOrderSide",value:function(e){return this.safeString({1:"buy",2:"sell"},e,e)}},{key:"parseOrderType",value:function(e){return this.safeString({1:"market",2:"limit",3:"stop",4:"stop limit"},e,e)}},{key:"parseTimeInForce",value:function(e){return this.safeString({1:"GTC",3:"IOC",4:"FOK",5:"GTX",6:"GTD"},e,e)}},{key:"toMilliseconds",value:function(e){if(void 0===e)return e;var t=e.split("-"),r=this.safeString(t,0),i=this.safeString(t,1);if(void 0!==r&&void 0!==i&&8===r.length){var n=r.slice(0,4)+"-"+r.slice(4,6)+"-"+r.slice(6,8);return this.parse8601(n+" "+i)}}},{key:"convertFromScale",value:function(e,t){if(void 0!==e&&void 0!==t)return this.fromWei(e,t)}},{key:"getScale",value:function(e){var t=this.numberToString(e);return this.precisionFromString(t)}},{key:"convertToScale",value:function(e,t){if(void 0!==e&&void 0!==t)return parseInt(this.toWei(e,t))}},{key:"nonce",value:function(){return this.milliseconds()}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,u){if(void 0!==s){var c=this.safeString(s,"error");if(void 0!==c){var d=this.id+" "+a;throw this.throwExactlyMatchedException(this.exceptions,c,d),this.throwBroadlyMatchedException(this.exceptions,a,d),new f(this.id+" "+a)}}}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.implodeParams(e,i),o=this.omit(i,this.extractParams(e));if("public"===t)Object.keys(o).length&&(s+="?"+this.urlencode(o));else if("private"===t){var u=this.safeValue(i,"format"),c=this.safeValue(i,"type"),d={};void 0!==u&&(d.format=u),void 0!==c&&(d.type=c),Object.keys(d).length&&(s+="?"+this.urlencode(d)),i=this.omit(i,["format","type"]),this.checkRequiredCredentials();var h=this.nonce();o=this.extend(o,{userId:this.uid,nonce:h}),i.nonce=this.nonce(),a=this.json(o);var l=this.hmac(this.encode(a),this.encode(this.secret),"sha384");n={"Content-Type":"application/json",requestToken:this.apiKey,signature:l}}return{url:s=this.urls.api[t]+"/"+s,method:r,body:a,headers:n}}}]),r}(h)},function(e,t,r){"use strict";var i=r(7),n=r(8),a=r(1),s=r(2),o=r(6),u=r(3),c=r(4),d=r(5),h=r(11),l=r(10),f=l.ArgumentsRequired,p=l.InvalidOrder,v=l.ExchangeError,m=l.BadRequest,g=l.BadSymbol,y=r(18),b=y.TRUNCATE,x=y.SIGNIFICANT_DIGITS,k=r(12);e.exports=function(e){c(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(u(r.prototype),"describe",this).call(this),{id:"eterbase",name:"Eterbase",countries:["SK"],rateLimit:500,version:"v1",certified:!0,has:{CORS:!1,publicAPI:!0,privateAPI:!0,cancelOrder:!0,createOrder:!0,deposit:!1,fetchBalance:!0,fetchClosedOrders:!0,fetchCurrencies:!0,fetchDepositAddress:!1,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!1,fetchOrderTrades:!0,fetchTicker:!0,fetchTickers:!0,fetchTime:!0,fetchTrades:!0,withdraw:!0},timeframes:{"1m":"1","5m":"5","15m":"15","1h":"60","4h":"240","1d":"1440","1w":"10080"},urls:{logo:"https://user-images.githubusercontent.com/1294454/82067900-faeb0f80-96d9-11ea-9f22-0071cfcb9871.jpg",api:"https://api.eterbase.exchange",www:"https://www.eterbase.com",doc:"https://developers.eterbase.exchange",fees:"https://www.eterbase.com/exchange/fees",referral:"https://eterbase.exchange/invite/1wjjh4Pe"},api:{markets:{get:["{id}/order-book"]},public:{get:["ping","assets","markets","tickers","tickers/{id}/ticker","markets/{id}/trades","markets/{id}/ohlcv","wstoken"]},private:{get:["accounts/{id}/balances","accounts/{id}/orders","accounts/{id}/fills","orders/{id}/fills","orders/{id}"],post:["orders","accounts/{id}/withdrawals"],delete:["orders/{id}"]},feed:{get:["feed"]}},fees:{trading:{tierBased:!0,percentage:!0,taker:.35/100,maker:.35/100}},requiredCredentials:{apiKey:!0,secret:!0,uid:!0},precisionMode:x,options:{createMarketBuyOrderRequiresPrice:!0},exceptions:{exact:{"Invalid cost":p,"Invalid order ID":p,"Invalid market !":g},broad:{"Failed to convert argument":m}}})}},{key:"fetchTime",value:function(){var e=n(i.mark((function e(){var t,r,n=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},e.next=3,this.publicGetPing(t);case 3:return r=e.sent,e.abrupt("return",this.safeInteger(r,"pong"));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:{},e.next=3,this.publicGetMarkets(t);case 3:for(r=e.sent,n=[],a=0;a<r.length;a++)s=this.parseMarket(r[a]),n.push(s);return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseMarket",value:function(e){for(var t=this.safeString(e,"id"),r=this.safeString(e,"base"),i=this.safeString(e,"quote"),n=this.safeCurrencyCode(r),a=this.safeCurrencyCode(i),s=n+"/"+a,o="Trading"===this.safeString(e,"state"),u={price:this.safeInteger(e,"priceSigDigs"),amount:this.safeInteger(e,"qtySigDigs"),cost:this.safeInteger(e,"costSigDigs")},c=this.safeValue(e,"tradingRules",[]),d=void 0,h=void 0,l=void 0,f=void 0,p=0;p<c.length;p++){var v=c[p],m=this.safeString(v,"attribute"),g=this.safeString(v,"condition"),y=this.safeNumber(v,"value");"Qty"===m&&"Min"===g?d=y:"Qty"===m&&"Max"===g?h=y:"Cost"===m&&"Min"===g?l=y:"Cost"===m&&"Max"===g&&(f=y)}return{id:t,symbol:s,base:n,quote:a,baseId:r,quoteId:i,info:e,active:o,precision:u,limits:{amount:{min:d,max:h},price:{min:void 0,max:void 0},cost:{min:l,max:f}}}}},{key:"fetchCurrencies",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p,v,m=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=m.length>0&&void 0!==m[0]?m[0]:{},e.next=3,this.publicGetAssets(t);case 3:for(r=e.sent,n={},a=0;a<r.length;a++)s=r[a],o=this.safeString(s,"id"),u=this.safeInteger(s,"precisionDisplay"),c=this.safeCurrencyCode(o),d=this.safeValue(s,"depositEnabled"),h=this.safeValue(s,"withdrawalEnabled"),l=this.safeString(s,"state"),f=d&&h&&"Active"===l,p=this.safeStringLower(s,"type"),v=this.safeString(s,"name"),n[c]={id:o,info:s,code:c,type:p,name:v,active:f,fee:this.safeNumber(s,"withdrawalFee"),precision:u,limits:{amount:{min:Math.pow(10,-u),max:Math.pow(10,u)},withdraw:{min:this.safeNumber(s,"withdrawalMin"),max:this.safeNumber(s,"withdrawalMax")}}};return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"marketId"),i=this.safeSymbol(r,t),n=this.safeInteger(e,"time"),a=this.safeNumber(e,"price"),s=this.safeNumber(e,"volumeBase"),o=this.safeNumber(e,"volume"),u=this.vwap(s,o),c=this.safeNumber(e,"change"),d={symbol:i,timestamp:n,datetime:this.iso8601(n),high:this.safeNumber(e,"high"),low:this.safeNumber(e,"low"),bid:void 0,bidVolume:void 0,ask:void 0,askVolume:void 0,vwap:u,open:void 0,close:a,last:a,previousClose:void 0,change:void 0,percentage:c,average:void 0,baseVolume:s,quoteVolume:o,info:e};return d}},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={id:n.id},e.next=7,this.publicGetTickersIdTicker(this.extend(a,r));case 7:return s=e.sent,e.abrupt("return",this.parseTicker(s,n));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:{},e.next=4,this.loadMarkets();case 4:return n={},e.next=7,this.publicGetTickers(this.extend(n,r));case 7:return a=e.sent,e.abrupt("return",this.parseTickers(a,t));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e,t){var r=this.safeString(e,"price"),i=this.safeString(e,"qty"),n=this.parseNumber(r),a=this.parseNumber(i),s=void 0,o=this.safeNumber(e,"fee");if(void 0!==o){var u=this.safeString(e,"feeAsset");s={cost:o,currency:this.safeCurrencyCode(u)}}var c=this.safeNumber(e,"qty");void 0===c&&(c=this.parseNumber(k.stringMul(r,i)));var d=this.safeInteger2(e,"executedAt","filledAt"),h="1"===this.safeString(e,"side")?"buy":"sell",l=this.safeString(e,"liquidity"),f=void 0;void 0!==l&&(f="1"===l?"maker":"taker");var p=this.safeString(e,"orderId"),v=this.safeString(e,"id"),m=this.safeString(e,"marketId");return{info:e,id:v,symbol:this.safeSymbol(m,t),timestamp:d,datetime:this.iso8601(d),order:p,type:void 0,side:h,takerOrMaker:f,price:n,amount:a,cost:c,fee:s}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={id:s.id},void 0!==n&&(o.limit=n),e.next=10,this.publicGetMarketsIdTrades(this.extend(o,a));case 10:return u=e.sent,e.abrupt("return",this.parseTrades(u,s,r,n));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.length>1&&void 0!==o[1]?o[1]:void 0,r=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return n={id:this.marketId(t)},e.next=7,this.marketsGetIdOrderBook(this.extend(n,r));case 7:return a=e.sent,s=this.safeInteger(a,"timestamp"),e.abrupt("return",this.parseOrderBook(a,s));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){return[this.safeInteger(e,"time"),this.safeNumber(e,"open"),this.safeNumber(e,"high"),this.safeNumber(e,"low"),this.safeNumber(e,"close"),this.safeNumber(e,"volume")]}},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=l.length>1&&void 0!==l[1]?l[1]:"1m",n=l.length>2&&void 0!==l[2]?l[2]:void 0,a=l.length>3&&void 0!==l[3]?l[3]:void 0,s=l.length>4&&void 0!==l[4]?l[4]:{},o={interval:this.timeframes[r]},u=this.parseTimeframe(r),c=this.milliseconds(),void 0===n){e.next=12;break}o.start=n,o.end=void 0===a?c:this.sum(n,u*a*1e3),e.next=18;break;case 12:if(void 0===a){e.next=17;break}o.start=c-u*a*1e3,o.end=c,e.next=18;break;case 17:throw new f(this.id+" fetchOHLCV() requires a since argument, or a limit argument, or both");case 18:return e.next=20,this.loadMarkets();case 20:return d=this.market(t),o.id=d.id,e.next=24,this.publicGetMarketsIdOhlcv(this.extend(o,s));case 24:return h=e.sent,e.abrupt("return",this.parseOHLCVs(h,d,r,n,a));case 26:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:{},e.next=3,this.loadMarkets();case 3:return r={id:this.uid},e.next=6,this.privateGetAccountsIdBalances(this.extend(r,t));case 6:for(n=e.sent,a={info:n},s=0;s<n.length;s++)o=n[s],u=this.safeString(o,"assetId"),c=this.safeCurrencyCode(u),(d=this.account()).free=this.safeString(o,"available"),d.used=this.safeString(o,"reserved"),d.total=this.safeString(o,"balance"),a[c]=d;return e.abrupt("return",this.parseBalance(a,!1));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.loadMarkets();case 4:return n={id:t},e.next=7,this.privateGetOrdersId(this.extend(n,r));case 7:return a=e.sent,e.abrupt("return",this.parseOrder(a));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){var t={1:void 0,2:"open",3:"open",4:"closed",FILLED:"closed",USER_REQUESTED_CANCEL:"canceled",ADMINISTRATIVE_CANCEL:"canceled",NOT_ENOUGH_LIQUIDITY:"canceled",EXPIRED:"expired",ONE_CANCELS_OTHER:"canceled"};return this.safeString(t,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),i=this.safeInteger(e,"placedAt"),n=this.safeInteger(e,"marketId"),a=this.safeSymbol(n,t),s=this.parseOrderStatus(this.safeString(e,"state"));"closed"===s&&(s=this.parseOrderStatus(this.safeString(e,"closeReason")));var o=this.safeString(e,"side"),u="1"===o?"buy":"sell",c=this.safeString(e,"type"),d=void 0;d="1"===c?"market":"2"===c?"limit":"3"===c?"stopmarket":"stoplimit";var h=this.safeNumber(e,"limitPrice"),l=this.safeNumber(e,"qty"),f=this.safeNumber(e,"remainingQty"),p=void 0,v=this.safeNumber(e,"remainingCost");void 0!==v&&0===v&&(f=0),void 0!==l&&void 0!==f&&(p=Math.max(0,l-f));var m=this.safeNumber(e,"cost");"market"===d&&0===h&&void 0!==m&&void 0!==p&&m>0&&p>0&&(h=m/p);var g=void 0;void 0!==m&&p&&(g=m/p);var y=this.safeString(e,"timeInForce"),b=this.safeNumber(e,"stopPrice"),x=this.safeValue(e,"postOnly");return{info:e,id:r,clientOrderId:void 0,timestamp:i,datetime:this.iso8601(i),lastTradeTimestamp:void 0,symbol:a,type:d,timeInForce:y,postOnly:x,side:u,price:h,stopPrice:b,amount:l,cost:m,average:g,filled:p,remaining:f,status:s,fee:void 0,trades:void 0}}},{key:"fetchOrdersByState",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>1&&void 0!==l[1]?l[1]:void 0,n=l.length>2&&void 0!==l[2]?l[2]:void 0,a=l.length>3&&void 0!==l[3]?l[3]:void 0,s=l.length>4&&void 0!==l[4]?l[4]:{},o=this.milliseconds(),u=7776e6,c={id:this.uid,state:t},void 0===n?(c.from=o-u,c.to=o):(c.from=n,c.to=this.sum(n,u)),e.next=10,this.loadMarkets();case 10:return d=void 0,void 0!==r&&(d=this.market(r),c.marketId=d.id),void 0!==a&&(c.limit=a),e.next=15,this.privateGetAccountsIdOrders(this.extend(c,s));case 15:return h=e.sent,e.abrupt("return",this.parseOrders(h,d,n,a));case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:void 0,n=s.length>2&&void 0!==s[2]?s[2]:void 0,a=s.length>3&&void 0!==s[3]?s[3]:{},e.next=6,this.fetchOrdersByState("INACTIVE",t,r,n,a);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:void 0,n=s.length>2&&void 0!==s[2]?s[2]:void 0,a=s.length>3&&void 0!==s[3]?s[3]:{},e.next=6,this.fetchOrdersByState("ACTIVE",t,r,n,a);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:{},s=this.milliseconds(),o=7776e6,u={id:this.uid},void 0===r?(u.from=s-o,u.to=s):(u.from=r,u.to=this.sum(r,o)),e.next=10,this.loadMarkets();case 10:return c=void 0,void 0!==t&&(c=this.market(t),u.marketId=c.id),void 0!==n&&(u.limit=n),e.next=15,this.privateGetAccountsIdFills(this.extend(u,a));case 15:return d=e.sent,e.abrupt("return",this.parseTrades(d,c,r,n));case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,s.length>2&&void 0!==s[2]?s[2]:void 0,s.length>3&&void 0!==s[3]?s[3]:void 0,r=s.length>4&&void 0!==s[4]?s[4]:{},e.next=6,this.loadMarkets();case 6:return n={id:t},e.next=9,this.privateGetOrdersIdFills(this.extend(n,r));case 9:return a=e.sent,e.abrupt("return",this.parseTrades(a));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,u,c,d,h,l,f,v,m,g,y=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=y.length>4&&void 0!==y[4]?y[4]:void 0,o=y.length>5&&void 0!==y[5]?y[5]:{},e.next=4,this.loadMarkets();case 4:if(u=this.market(t),"MARKET"===(c=r.toUpperCase())?r=1:"LIMIT"===c?r=2:"STOPMARKET"===c?r=3:"STOPLIMIT"===c&&(r=4),d=n.toUpperCase(),n="BUY"===d?1:2,h={accountId:this.uid,marketId:u.id,type:r,side:n},l=this.safeValue2(o,"refId","clientOrderId"),f=o,void 0!==l&&(h.refId=l,f=this.omit(o,["refId","clientOrderId"])),"MARKET"!==c||"BUY"!==d){e.next=29;break}if(v=this.safeNumber(o,"cost"),!this.options.createMarketBuyOrderRequiresPrice){e.next=24;break}if(void 0!==v){e.next=22;break}if(void 0===s){e.next=21;break}v=a*s,e.next=22;break;case 21:throw new p(this.id+" createOrder() requires the price argument with market buy orders to calculate total order cost (amount to spend), where cost = amount * price. Supply a price argument to createOrder() call if you want the cost to be calculated for you from price and amount, or, alternatively, add .options['createMarketBuyOrderRequiresPrice'] = false to supply the cost in the amount argument (the exchange-specific behaviour)");case 22:e.next=25;break;case 24:v=void 0===v?a:v;case 25:m=u.precision.price,h.cost=this.decimalToPrecision(v,b,m,this.precisionMode),e.next=30;break;case 29:h.qty=this.amountToPrecision(t,a);case 30:return"LIMIT"===c&&(h.limitPrice=this.priceToPrecision(t,s)),e.next=33,this.privatePostOrders(this.extend(h,f));case 33:return g=e.sent,e.abrupt("return",this.parseOrder(g,u));case 35:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:{},n={id:t},e.next=5,this.privateDeleteOrdersId(this.extend(n,r));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"withdraw",value:function(){var e=n(i.mark((function e(t,r,n){var a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=d.length>3&&void 0!==d[3]?d[3]:void 0,s=d.length>4&&void 0!==d[4]?d[4]:{},this.checkAddress(n),e.next=5,this.loadMarkets();case 5:return o=this.currency(t),u={id:this.uid,accountId:this.uid,assetId:o.id,amount:r},void 0!==n&&(u.cryptoAddress=n,void 0!==a&&(u.memo=a)),e.next=10,this.privatePostAccountsIdWithdrawals(this.extend(u,s));case 10:return c=e.sent,e.abrupt("return",{info:c,id:this.safeString(c,"id")});case 12:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.omit(i,this.extractParams(e)),o="/";"public"===t||"private"===t?o+="api/"+this.version:"markets"===t&&(o+="api/"+t),o+="/"+this.implodeParams(e,i),"GET"===r&&Object.keys(s).length&&(o+="?"+this.urlencode(s));var u=this.urls.api+o;if("private"===t){this.checkRequiredCredentials();var c="";"GET"!==r&&Object.keys(s).length&&(c=a=this.json(s));var d="POST"===r||"PUT"===r||"PATCH"===r,h=this.rfc2616(this.milliseconds()),l="date request-line",f="date: "+h+"\n"+r+" "+o+" HTTP/1.1",p="";d&&(f+="\ndigest: "+(p="SHA-256="+this.hash(c,"sha256","base64")),l+=" digest");var v=this.hmac(this.encode(f),this.encode(this.secret),"sha256","base64"),m='hmac username="'+this.apiKey+'",algorithm="hmac-sha256",headers="'+l+'",signature="'+v+'"';n={Date:h,Authorization:m,"Content-Type":"application/json"},d&&(n.Digest=p)}return{url:u,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,u){if(void 0!==s){var c=this.safeString(s,"message");if(void 0!==c){var d=this.id+" "+a;throw this.throwExactlyMatchedException(this.exceptions.exact,c,d),this.throwBroadlyMatchedException(this.exceptions.broad,c,d),new v(d)}}}}]),r}(h)},function(e,t,r){"use strict";var i=r(21),n=r(7),a=r(8),s=r(1),o=r(2),u=r(6),c=r(3),d=r(4),h=r(5),l=r(11),f=r(10),p=f.ArgumentsRequired,v=f.ExchangeError,m=f.OrderNotFound,g=f.AuthenticationError,y=f.InsufficientFunds,b=f.InvalidOrder,x=f.InvalidNonce,k=f.NotSupported,w=f.OnMaintenance,_=f.RateLimitExceeded,S=f.BadRequest,O=f.PermissionDenied,T=r(12);e.exports=function(e){d(r,e);var t=h(r);function r(){return s(this,r),t.apply(this,arguments)}return o(r,[{key:"describe",value:function(){return this.deepExtend(u(c(r.prototype),"describe",this).call(this),{id:"exmo",name:"EXMO",countries:["ES","RU"],rateLimit:350,version:"v1.1",has:{cancelOrder:!0,CORS:!1,createOrder:!0,fetchBalance:!0,fetchCurrencies:!0,fetchDepositAddress:!0,fetchFundingFees:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:"emulated",fetchOrderBook:!0,fetchOrderBooks:!0,fetchOrderTrades:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,fetchTradingFee:!0,fetchTradingFees:!0,fetchTransactions:!0,withdraw:!0},timeframes:{"1m":"1","5m":"5","15m":"15","30m":"30","45m":"45","1h":"60","2h":"120","3h":"180","4h":"240","1d":"D","1w":"W","1M":"M"},urls:{logo:"https://user-images.githubusercontent.com/1294454/27766491-1b0ea956-5eda-11e7-9225-40d67b481b8d.jpg",api:{public:"https://api.exmo.com",private:"https://api.exmo.com",web:"https://exmo.me"},www:"https://exmo.me",referral:"https://exmo.me/?ref=131685",doc:["https://exmo.me/en/api_doc?ref=131685","https://github.com/exmo-dev/exmo_api_lib/tree/master/nodejs"],fees:"https://exmo.com/en/docs/fees"},api:{web:{get:["ctrl/feesAndLimits","en/docs/fees"]},public:{get:["currency","currency/list/extended","order_book","pair_settings","ticker","trades","candles_history","required_amount","payments/providers/crypto/list"]},private:{post:["user_info","order_create","order_cancel","stop_market_order_create","stop_market_order_cancel","user_open_orders","user_trades","user_cancelled_orders","order_trades","deposit_address","withdraw_crypt","withdraw_get_txid","excode_create","excode_load","code_check","wallet_history","wallet_operations"]}},fees:{trading:{feeSide:"get",tierBased:!1,percentage:!0,maker:.002,taker:.002},funding:{tierBased:!1,percentage:!1}},options:{useWebapiForFetchingFees:!1,feesAndLimits:{success:1,ctlr:"feesAndLimits",error:"",data:{limits:[{pair:"BTC/USD",min_q:"0.0001",max_q:"1000",min_p:"1",max_p:"30000",min_a:"1",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"BTC/RUB",min_q:"0.0001",max_q:"1000",min_p:"1",max_p:"2000000",min_a:"10",max_a:"50000000",taker:"0.4",maker:"0.4"},{pair:"BTC/EUR",min_q:"0.0001",max_q:"1000",min_p:"1",max_p:"30000",min_a:"1",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"BTC/GBP",min_q:"0.0001",max_q:"1000",min_p:"1",max_p:"30000",min_a:"1",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"BTC/UAH",min_q:"0.0001",max_q:"1000",min_p:"1",max_p:"15000000",min_a:"10",max_a:"15000000",taker:"0.4",maker:"0.4"},{pair:"BTC/PLN",min_q:"0.0001",max_q:"1000",min_p:"1",max_p:"20000000",min_a:"50",max_a:"2000000",taker:"0.4",maker:"0.4"},{pair:"BTC/TRY",min_q:"0.0001",max_q:"1000",min_p:"1",max_p:"800000",min_a:"40",max_a:"6000000",taker:"0.4",maker:"0.4"},{pair:"BTC/KZT",min_q:"0.0001",max_q:"1000",min_p:"1000",max_p:"12000000",min_a:"1000",max_a:"100000000",taker:"0.4",maker:"0.4"},{pair:"BTC/USDT",min_q:"0.0001",max_q:"1000",min_p:"0.01",max_p:"30000",min_a:"3",max_a:"500000",taker:"0",maker:"0"},{pair:"ETH/BTC",min_q:"0.001",max_q:"5000",min_p:"0.00000001",max_p:"10",min_a:"0.001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"ETH/USD",min_q:"0.001",max_q:"5000",min_p:"0.01",max_p:"100000",min_a:"3",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"ETH/RUB",min_q:"0.001",max_q:"5000",min_p:"0.01",max_p:"100000",min_a:"150",max_a:"50000000",taker:"0.4",maker:"0.4"},{pair:"XRP/BTC",min_q:"1",max_q:"5000000",min_p:"0.0000001",max_p:"1",min_a:"0.00001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"XRP/USD",min_q:"1",max_q:"5000000",min_p:"0.001",max_p:"1000",min_a:"0.001",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"XRP/RUB",min_q:"1",max_q:"5000000",min_p:"0.000001",max_p:"1000",min_a:"0.01",max_a:"50000000",taker:"0.4",maker:"0.4"},{pair:"ADA/BTC",min_q:"1",max_q:"10000000",min_p:"0.00000001",max_p:"1",min_a:"0.001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"ADA/ETH",min_q:"0.01",max_q:"10000000",min_p:"0.00000001",max_p:"10",min_a:"0.001",max_a:"5000",taker:"0.4",maker:"0.4"},{pair:"ADA/USD",min_q:"0.01",max_q:"10000000",min_p:"0.0001",max_p:"1000",min_a:"0.01",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"ALGO/EXM",min_q:"1",max_q:"1000000",min_p:"0.001",max_p:"10000",min_a:"1",max_a:"50000000",taker:"0.4",maker:"0.4"},{pair:"ALGO/BTC",min_q:"1",max_q:"1000000",min_p:"0.00000001",max_p:"1",min_a:"0.000001",max_a:"50",taker:"0.4",maker:"0.4"},{pair:"ALGO/USDT",min_q:"1",max_q:"1000000",min_p:"0.001",max_p:"1000",min_a:"1",max_a:"500000",taker:"0",maker:"0"},{pair:"ALGO/RUB",min_q:"1",max_q:"1000000",min_p:"0.000001",max_p:"10000",min_a:"1",max_a:"50000000",taker:"0.4",maker:"0.4"},{pair:"ALGO/EUR",min_q:"1",max_q:"1000000",min_p:"0.001",max_p:"1000",min_a:"1",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"ATOM/EXM",min_q:"1",max_q:"500000",min_p:"0.01",max_p:"100000",min_a:"200",max_a:"50000000",taker:"0.4",maker:"0.4"},{pair:"ATOM/BTC",min_q:"1",max_q:"500000",min_p:"0.00000001",max_p:"1",min_a:"0.001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"ATOM/USD",min_q:"1",max_q:"500000",min_p:"0.001",max_p:"1000",min_a:"0.5",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"ATOM/EUR",min_q:"1",max_q:"500000",min_p:"0.001",max_p:"1000",min_a:"0.5",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"BCH/USD",min_q:"0.003",max_q:"5000",min_p:"0.00000001",max_p:"30000",min_a:"0.0001",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"BCH/RUB",min_q:"0.003",max_q:"5000",min_p:"0.00000001",max_p:"2000000",min_a:"0.0001",max_a:"50000000",taker:"0.4",maker:"0.4"},{pair:"BCH/EUR",min_q:"0.003",max_q:"5000",min_p:"0.01",max_p:"300000",min_a:"3",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"BCH/UAH",min_q:"0.003",max_q:"5000",min_p:"0.1",max_p:"30000",min_a:"10",max_a:"15000000",taker:"0.4",maker:"0.4"},{pair:"BCH/BTC",min_q:"0.003",max_q:"5000",min_p:"0.00000001",max_p:"5",min_a:"0.0001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"BCH/ETH",min_q:"0.003",max_q:"5000",min_p:"0.0000001",max_p:"200",min_a:"0.0001",max_a:"5000",taker:"0.4",maker:"0.4"},{pair:"BCH/USDT",min_q:"0.003",max_q:"5000",min_p:"0.01",max_p:"5000",min_a:"3",max_a:"500000",taker:"0",maker:"0"},{pair:"BTG/USD",min_q:"0.01",max_q:"100000",min_p:"0.001",max_p:"1000",min_a:"3",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"BTG/BTC",min_q:"0.01",max_q:"100000",min_p:"0.00000001",max_p:"1",min_a:"0.001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"BTG/ETH",min_q:"0.01",max_q:"100000",min_p:"0.0001",max_p:"100",min_a:"0.01",max_a:"5000",taker:"0.4",maker:"0.4"},{pair:"BTT/RUB",min_q:"1",max_q:"500000000",min_p:"0.000001",max_p:"1000",min_a:"0.000001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"BTT/UAH",min_q:"1",max_q:"500000000",min_p:"0.000001",max_p:"1000",min_a:"0.000001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"BTT/BTC",min_q:"1",max_q:"500000000",min_p:"0.00000001",max_p:"0.1",min_a:"0.00001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"CRON/BTC",min_q:"1",max_q:"100000",min_p:"0.0000001",max_p:"1",min_a:"0.00001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"CRON/ETH",min_q:"1",max_q:"100000",min_p:"0.0000001",max_p:"10",min_a:"0.00001",max_a:"5000",taker:"0.4",maker:"0.4"},{pair:"CRON/USDT",min_q:"1",max_q:"100000",min_p:"0.001",max_p:"1000",min_a:"0.001",max_a:"500000",taker:"0",maker:"0"},{pair:"CRON/EXM",min_q:"1",max_q:"100000000",min_p:"0.00000001",max_p:"1000",min_a:"0.01",max_a:"100000",taker:"0.4",maker:"0.4"},{pair:"DAI/USD",min_q:"1",max_q:"500000",min_p:"0.001",max_p:"1000",min_a:"0.1",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"DAI/RUB",min_q:"1",max_q:"500000",min_p:"0.01",max_p:"100000",min_a:"0.5",max_a:"30000000",taker:"0.4",maker:"0.4"},{pair:"DAI/BTC",min_q:"1",max_q:"500000",min_p:"0.0000001",max_p:"0.1",min_a:"0.00001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"DAI/ETH",min_q:"1",max_q:"500000",min_p:"0.000001",max_p:"10",min_a:"0.0001",max_a:"5000",taker:"0.4",maker:"0.4"},{pair:"DASH/USD",min_q:"0.01",max_q:"10000",min_p:"0.01",max_p:"10000",min_a:"3",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"DASH/RUB",min_q:"0.01",max_q:"10000",min_p:"0.01",max_p:"100000",min_a:"150",max_a:"50000000",taker:"0.4",maker:"0.4"},{pair:"DASH/UAH",min_q:"0.01",max_q:"10000",min_p:"0.01",max_p:"200000",min_a:"10",max_a:"15000000",taker:"0.4",maker:"0.4"},{pair:"DASH/BTC",min_q:"0.01",max_q:"10000",min_p:"0.0001",max_p:"1",min_a:"0.001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"DASH/USDT",min_q:"0.01",max_q:"10000",min_p:"0.01",max_p:"5000",min_a:"3",max_a:"500000",taker:"0",maker:"0"},{pair:"DCR/RUB",min_q:"0.01",max_q:"50000",min_p:"0.00001",max_p:"100000",min_a:"0.5",max_a:"3000000",taker:"0.4",maker:"0.4"},{pair:"DCR/UAH",min_q:"0.01",max_q:"50000",min_p:"0.00001",max_p:"100000",min_a:"0.25",max_a:"1000000",taker:"0.4",maker:"0.4"},{pair:"DCR/BTC",min_q:"0.01",max_q:"50000",min_p:"0.00000001",max_p:"1",min_a:"0.001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"DOGE/USD",min_q:"100",max_q:"500000000",min_p:"0.0000001",max_p:"1000",min_a:"0.01",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"DOGE/BTC",min_q:"100",max_q:"500000000",min_p:"0.0000001",max_p:"1",min_a:"0.0001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"EOS/USD",min_q:"0.01",max_q:"500000",min_p:"0.01",max_p:"1000",min_a:"0.5",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"EOS/EUR",min_q:"0.01",max_q:"500000",min_p:"0.001",max_p:"1000",min_a:"0.5",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"EOS/BTC",min_q:"0.01",max_q:"500000",min_p:"0.00000001",max_p:"1",min_a:"0.001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"ETC/USD",min_q:"0.2",max_q:"100000",min_p:"0.01",max_p:"10000",min_a:"0.01",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"ETC/RUB",min_q:"0.2",max_q:"100000",min_p:"0.01",max_p:"10000",min_a:"0.01",max_a:"50000000",taker:"0.4",maker:"0.4"},{pair:"ETC/BTC",min_q:"0.2",max_q:"100000",min_p:"0.0001",max_p:"0.5",min_a:"0.001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"ETH/EUR",min_q:"0.001",max_q:"5000",min_p:"0.01",max_p:"100000",min_a:"3",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"ETH/GBP",min_q:"0.001",max_q:"5000",min_p:"0.01",max_p:"100000",min_a:"3",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"ETH/UAH",min_q:"0.001",max_q:"5000",min_p:"0.01",max_p:"1000000",min_a:"90",max_a:"15000000",taker:"0.4",maker:"0.4"},{pair:"ETH/PLN",min_q:"0.001",max_q:"5000",min_p:"0.01",max_p:"100000",min_a:"50",max_a:"2000000",taker:"0.4",maker:"0.4"},{pair:"ETH/TRY",min_q:"0.001",max_q:"5000",min_p:"0.1",max_p:"80000",min_a:"10",max_a:"6000000",taker:"0.4",maker:"0.4"},{pair:"ETH/KZT",min_q:"0.001",max_q:"5000",min_p:"4",max_p:"40000000",min_a:"3",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"ETH/USDT",min_q:"0.001",max_q:"5000",min_p:"0.01",max_p:"100000",min_a:"3",max_a:"500000",taker:"0",maker:"0"},{pair:"ETH/LTC",min_q:"0.001",max_q:"5000",min_p:"0.00000001",max_p:"100000",min_a:"0.05",max_a:"100000",taker:"0.4",maker:"0.4"},{pair:"ETZ/BTC",min_q:"1",max_q:"50000000",min_p:"0.00000001",max_p:"1",min_a:"0.0001",max_a:"10",taker:"0.4",maker:"0.4"},{pair:"ETZ/ETH",min_q:"1",max_q:"50000000",min_p:"0.00000001",max_p:"100",min_a:"0.001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"ETZ/USDT",min_q:"1",max_q:"50000000",min_p:"0.000001",max_p:"1000",min_a:"0.01",max_a:"1000",taker:"0",maker:"0"},{pair:"EXM/USDT",min_q:"1",max_q:"100000000",min_p:"0.00000001",max_p:"1000",min_a:"0.01",max_a:"100000",taker:"0",maker:"0"},{pair:"EXM/ETH",min_q:"1",max_q:"100000000",min_p:"0.00000001",max_p:"1",min_a:"0.0001",max_a:"5000",taker:"0.4",maker:"0.4"},{pair:"GAS/USD",min_q:"0.01",max_q:"500000",min_p:"0.01",max_p:"50000",min_a:"0.1",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"GAS/BTC",min_q:"0.01",max_q:"500000",min_p:"0.00000001",max_p:"1",min_a:"0.001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"GNT/BTC",min_q:"1",max_q:"10000000",min_p:"0.00000001",max_p:"1",min_a:"0.001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"GNT/ETH",min_q:"0.01",max_q:"10000000",min_p:"0.00000001",max_p:"10",min_a:"0.01",max_a:"5000",taker:"0.4",maker:"0.4"},{pair:"GUSD/USD",min_q:"1",max_q:"500000",min_p:"0.1",max_p:"10",min_a:"0.1",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"GUSD/RUB",min_q:"1",max_q:"500000",min_p:"0.01",max_p:"1000",min_a:"10",max_a:"50000000",taker:"0.4",maker:"0.4"},{pair:"GUSD/BTC",min_q:"1",max_q:"500000",min_p:"0.00000001",max_p:"1",min_a:"0.0015",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"HP/BTC",min_q:"1",max_q:"100000000",min_p:"0.00000001",max_p:"0.1",min_a:"0.00001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"HB/BTC",min_q:"10",max_q:"100000000",min_p:"0.00000001",max_p:"1",min_a:"0.000001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"LSK/USD",min_q:"0.1",max_q:"500000",min_p:"0.1",max_p:"1000",min_a:"1",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"LSK/RUB",min_q:"0.1",max_q:"500000",min_p:"0.001",max_p:"100000",min_a:"0.5",max_a:"50000000",taker:"0.4",maker:"0.4"},{pair:"LSK/BTC",min_q:"1",max_q:"500000",min_p:"0.0000001",max_p:"1",min_a:"0.0015",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"LTC/USD",min_q:"0.05",max_q:"10000",min_p:"0.01",max_p:"10000",min_a:"3",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"LTC/RUB",min_q:"0.05",max_q:"10000",min_p:"0.01",max_p:"100000",min_a:"150",max_a:"50000000",taker:"0.4",maker:"0.4"},{pair:"LTC/EUR",min_q:"0.05",max_q:"10000",min_p:"0.01",max_p:"10000",min_a:"3",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"LTC/UAH",min_q:"0.05",max_q:"10000",min_p:"0.01",max_p:"300000",min_a:"5",max_a:"18000000",taker:"0.4",maker:"0.4"},{pair:"LTC/BTC",min_q:"0.05",max_q:"10000",min_p:"0.00000001",max_p:"1",min_a:"0.001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"MKR/BTC",min_q:"0.0001",max_q:"1000",min_p:"0.0001",max_p:"100",min_a:"0.000001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"MKR/DAI",min_q:"0.0001",max_q:"1000",min_p:"0.5",max_p:"500000",min_a:"0.005",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"MNC/USD",min_q:"10",max_q:"500000000",min_p:"0.000001",max_p:"10000",min_a:"0.01",max_a:"100000",taker:"0.4",maker:"0.4"},{pair:"MNC/BTC",min_q:"10",max_q:"500000000",min_p:"0.00000001",max_p:"1",min_a:"0.000001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"MNC/ETH",min_q:"10",max_q:"500000000",min_p:"0.0000001",max_p:"10",min_a:"0.00001",max_a:"1000",taker:"0.4",maker:"0.4"},{pair:"NEO/USD",min_q:"0.01",max_q:"100000",min_p:"0.01",max_p:"50000",min_a:"0.1",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"NEO/RUB",min_q:"0.01",max_q:"100000",min_p:"0.001",max_p:"1500000",min_a:"50",max_a:"50000000",taker:"0.4",maker:"0.4"},{pair:"NEO/BTC",min_q:"0.1",max_q:"100000",min_p:"0.00000001",max_p:"1",min_a:"0.001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"OMG/USD",min_q:"0.01",max_q:"500000",min_p:"0.01",max_p:"1000",min_a:"0.5",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"OMG/BTC",min_q:"1",max_q:"500000",min_p:"0.00000001",max_p:"1",min_a:"0.001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"OMG/ETH",min_q:"0.01",max_q:"500000",min_p:"0.00000001",max_p:"10",min_a:"0.01",max_a:"5000",taker:"0.4",maker:"0.4"},{pair:"ONG/EXM",min_q:"1",max_q:"1000000",min_p:"0.01",max_p:"100000",min_a:"100",max_a:"15000000",taker:"0.4",maker:"0.4"},{pair:"ONG/BTC",min_q:"1",max_q:"1000000",min_p:"0.00000001",max_p:"1",min_a:"0.00001",max_a:"10",taker:"0.4",maker:"0.4"},{pair:"ONG/RUB",min_q:"1",max_q:"1000000",min_p:"0.01",max_p:"100000",min_a:"100",max_a:"250000",taker:"0.4",maker:"0.4"},{pair:"ONG/UAH",min_q:"1",max_q:"1000000",min_p:"0.01",max_p:"100000",min_a:"50",max_a:"6000000",taker:"0.4",maker:"0.4"},{pair:"ONT/EXM",min_q:"1",max_q:"500000",min_p:"0.01",max_p:"100000",min_a:"200",max_a:"15000000",taker:"0.4",maker:"0.4"},{pair:"ONT/BTC",min_q:"1",max_q:"500000",min_p:"0.00000001",max_p:"1",min_a:"0.00001",max_a:"10",taker:"0.4",maker:"0.4"},{pair:"ONT/RUB",min_q:"1",max_q:"500000",min_p:"0.01",max_p:"100000",min_a:"100",max_a:"6000000",taker:"0.4",maker:"0.4"},{pair:"ONT/UAH",min_q:"1",max_q:"500000",min_p:"0.01",max_p:"100000",min_a:"200",max_a:"250000",taker:"0.4",maker:"0.4"},{pair:"PTI/RUB",min_q:"1",max_q:"50000000",min_p:"0.00000001",max_p:"600000",min_a:"10",max_a:"600000",taker:"0.4",maker:"0.4"},{pair:"PTI/BTC",min_q:"1",max_q:"50000000",min_p:"0.00000001",max_p:"1",min_a:"0.000001",max_a:"10",taker:"0.4",maker:"0.4"},{pair:"PTI/EOS",min_q:"1",max_q:"50000000",min_p:"0.0000001",max_p:"5000",min_a:"0.01",max_a:"20000",taker:"0.4",maker:"0.4"},{pair:"PTI/USDT",min_q:"1",max_q:"50000000",min_p:"0.000001",max_p:"10000",min_a:"0.01",max_a:"100000",taker:"0",maker:"0"},{pair:"QTUM/USD",min_q:"0.1",max_q:"500000",min_p:"0.00000001",max_p:"10000",min_a:"0.1",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"QTUM/BTC",min_q:"0.1",max_q:"500000",min_p:"0.00000001",max_p:"1",min_a:"0.0001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"QTUM/ETH",min_q:"0.1",max_q:"500000",min_p:"0.00000001",max_p:"100",min_a:"0.001",max_a:"5000",taker:"0.4",maker:"0.4"},{pair:"ROOBEE/BTC",min_q:"1",max_q:"10000000",min_p:"0.00000001",max_p:"0.1",min_a:"0.00001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"SMART/USD",min_q:"10",max_q:"100000000",min_p:"0.000001",max_p:"1000",min_a:"1",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"SMART/RUB",min_q:"10",max_q:"100000000",min_p:"0.0001",max_p:"100000",min_a:"10",max_a:"50000000",taker:"0.4",maker:"0.4"},{pair:"SMART/EUR",min_q:"10",max_q:"100000000",min_p:"0.000001",max_p:"1000",min_a:"1",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"SMART/BTC",min_q:"10",max_q:"100000000",min_p:"0.00000001",max_p:"1",min_a:"0.00001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"TRX/USD",min_q:"1",max_q:"50000000",min_p:"0.0001",max_p:"1000",min_a:"0.01",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"TRX/EUR",min_q:"0.01",max_q:"50000000",min_p:"0.0001",max_p:"1000",min_a:"0.01",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"TRX/RUB",min_q:"1",max_q:"50000000",min_p:"0.000001",max_p:"100000",min_a:"0.1",max_a:"50000000",taker:"0.4",maker:"0.4"},{pair:"TRX/UAH",min_q:"1",max_q:"50000000",min_p:"0.000001",max_p:"100000",min_a:"0.1",max_a:"50000000",taker:"0.4",maker:"0.4"},{pair:"TRX/BTC",min_q:"1",max_q:"50000000",min_p:"0.00000001",max_p:"1",min_a:"0.001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"USDC/USD",min_q:"1",max_q:"500000",min_p:"0.0001",max_p:"1000",min_a:"3",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"USDC/BTC",min_q:"1",max_q:"500000",min_p:"0.00000001",max_p:"1",min_a:"0.0001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"USDC/ETH",min_q:"1",max_q:"500000",min_p:"0.0000001",max_p:"100",min_a:"0.001",max_a:"1000",taker:"0.4",maker:"0.4"},{pair:"USDC/USDT",min_q:"1",max_q:"500000",min_p:"0.0001",max_p:"1000",min_a:"3",max_a:"500000",taker:"0",maker:"0"},{pair:"USDT/USD",min_q:"1",max_q:"500000",min_p:"0.5",max_p:"10",min_a:"0.1",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"USDT/RUB",min_q:"1",max_q:"500000",min_p:"0.01",max_p:"1000",min_a:"10",max_a:"50000000",taker:"0.4",maker:"0.4"},{pair:"USDT/EUR",min_q:"0.01",max_q:"500000",min_p:"0.1",max_p:"10",min_a:"0.1",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"USDT/GBP",min_q:"1",max_q:"500000",min_p:"0.5",max_p:"10",min_a:"0.1",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"USDT/UAH",min_q:"0.01",max_q:"500000",min_p:"1",max_p:"3000",min_a:"2",max_a:"15000000",taker:"0.4",maker:"0.4"},{pair:"USDT/KZT",min_q:"1",max_q:"500000",min_p:"200",max_p:"4000",min_a:"0.1",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"VLX/BTC",min_q:"1",max_q:"10000000",min_p:"0.00000001",max_p:"0.1",min_a:"0.00001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"WAVES/USD",min_q:"0.5",max_q:"500000",min_p:"0.001",max_p:"3500",min_a:"0.5",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"WAVES/RUB",min_q:"0.5",max_q:"500000",min_p:"0.01",max_p:"10000",min_a:"1",max_a:"50000000",taker:"0.4",maker:"0.4"},{pair:"WAVES/BTC",min_q:"0.5",max_q:"500000",min_p:"0.000001",max_p:"1",min_a:"0.0001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"WAVES/ETH",min_q:"0.5",max_q:"500000",min_p:"0.00001",max_p:"30",min_a:"0.0035",max_a:"3500",taker:"0.4",maker:"0.4"},{pair:"XEM/USD",min_q:"10",max_q:"10000000",min_p:"0.00001",max_p:"1000",min_a:"0.1",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"XEM/EUR",min_q:"10",max_q:"10000000",min_p:"0.00001",max_p:"1000",min_a:"0.1",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"XEM/UAH",min_q:"1",max_q:"10000000",min_p:"0.0001",max_p:"30000",min_a:"10",max_a:"15000000",taker:"0.4",maker:"0.4"},{pair:"XEM/BTC",min_q:"10",max_q:"10000000",min_p:"0.0000001",max_p:"1",min_a:"0.00015",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"XLM/USD",min_q:"0.01",max_q:"5000000",min_p:"0.0001",max_p:"1000",min_a:"0.01",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"XLM/RUB",min_q:"0.01",max_q:"5000000",min_p:"0.00001",max_p:"100000",min_a:"0.1",max_a:"50000000",taker:"0.4",maker:"0.4"},{pair:"XLM/TRY",min_q:"0.01",max_q:"5000000",min_p:"0.00001",max_p:"100000",min_a:"0.1",max_a:"6000000",taker:"0.4",maker:"0.4"},{pair:"XLM/BTC",min_q:"1",max_q:"5000000",min_p:"0.00000001",max_p:"1",min_a:"0.001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"XMR/USD",min_q:"0.01",max_q:"10000",min_p:"0.001",max_p:"1000",min_a:"0.1",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"XMR/RUB",min_q:"0.01",max_q:"10000",min_p:"0.001",max_p:"600000",min_a:"10",max_a:"16000000",taker:"0.4",maker:"0.4"},{pair:"XMR/EUR",min_q:"0.01",max_q:"10000",min_p:"0.001",max_p:"1000",min_a:"0.1",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"XMR/UAH",min_q:"0.01",max_q:"10000",min_p:"0.001",max_p:"300000",min_a:"5",max_a:"16000000",taker:"0.4",maker:"0.4"},{pair:"XMR/BTC",min_q:"0.01",max_q:"10000",min_p:"0.0001",max_p:"1",min_a:"0.001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"XMR/ETH",min_q:"0.01",max_q:"10000",min_p:"0.00000001",max_p:"100",min_a:"0.001",max_a:"5000",taker:"0.4",maker:"0.4"},{pair:"XRP/EUR",min_q:"1",max_q:"5000000",min_p:"0.001",max_p:"1000",min_a:"0.001",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"XRP/GBP",min_q:"1",max_q:"5000000",min_p:"0.001",max_p:"1000",min_a:"0.001",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"XRP/TRY",min_q:"1",max_q:"5000000",min_p:"0.0001",max_p:"1000",min_a:"0.01",max_a:"6000000",taker:"0.4",maker:"0.4"},{pair:"XRP/UAH",min_q:"1",max_q:"5000000",min_p:"0.0001",max_p:"1000",min_a:"0.01",max_a:"15000000",taker:"0.4",maker:"0.4"},{pair:"XRP/USDT",min_q:"1",max_q:"5000000",min_p:"0.001",max_p:"1000",min_a:"0.001",max_a:"500000",taker:"0",maker:"0"},{pair:"XRP/ETH",min_q:"1",max_q:"5000000",min_p:"0.00000001",max_p:"10",min_a:"0.00001",max_a:"5000",taker:"0.4",maker:"0.4"},{pair:"XTZ/USD",min_q:"0.1",max_q:"100000",min_p:"0.0001",max_p:"1000",min_a:"0.1",max_a:"100000",taker:"0.4",maker:"0.4"},{pair:"XTZ/RUB",min_q:"0.1",max_q:"100000",min_p:"0.00001",max_p:"100000",min_a:"0.5",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"XTZ/BTC",min_q:"0.1",max_q:"100000",min_p:"0.00000001",max_p:"1",min_a:"0.00001",max_a:"10",taker:"0.4",maker:"0.4"},{pair:"XTZ/ETH",min_q:"0.1",max_q:"100000",min_p:"0.0000001",max_p:"10",min_a:"0.0001",max_a:"1000",taker:"0.4",maker:"0.4"},{pair:"ZEC/USD",min_q:"0.01",max_q:"10000",min_p:"0.001",max_p:"5000",min_a:"0.1",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"ZEC/RUB",min_q:"0.01",max_q:"10000",min_p:"0.001",max_p:"100000",min_a:"0.1",max_a:"50000000",taker:"0.4",maker:"0.4"},{pair:"ZEC/EUR",min_q:"0.01",max_q:"10000",min_p:"0.001",max_p:"5000",min_a:"0.1",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"ZEC/BTC",min_q:"0.01",max_q:"10000",min_p:"0.00001",max_p:"10",min_a:"0.001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"ZRX/USD",min_q:"0.01",max_q:"10000000",min_p:"0.00001",max_p:"1000",min_a:"0.1",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"ZRX/BTC",min_q:"1",max_q:"10000000",min_p:"0.00000001",max_p:"1",min_a:"0.001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"ZRX/ETH",min_q:"0.01",max_q:"10000000",min_p:"0.00000001",max_p:"10",min_a:"0.01",max_a:"5000",taker:"0.4",maker:"0.4"},{pair:"ZAG/BTC",min_q:"1",max_q:"10000000",min_p:"0.00000001",max_p:"0.1",min_a:"0.00001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"USD/RUB",min_q:"1",max_q:"500000",min_p:"0.01",max_p:"1000",min_a:"10",max_a:"50000000",taker:"0.4",maker:"0.4"},{pair:"EXM/BTC",min_q:"1",max_q:"100000000",min_p:"0.00000001",max_p:"1",min_a:"0.0000001",max_a:"1",taker:"0.4",maker:"0.4"}],fees:[{group:"crypto",title:"Cryptocurrency",items:[{prov:"EXM",dep:"0%",wd:"1 EXM"},{prov:"BTC",dep:"0%",wd:"0.0004 BTC"},{prov:"LTC",dep:"0%",wd:"0.01 LTC"},{prov:"DOGE",dep:"0%",wd:"1 Doge"},{prov:"DASH",dep:"0%",wd:"0.002 DASH"},{prov:"ETH",dep:"0%",wd:"0.003 ETH"},{prov:"WAVES",dep:"0%",wd:"0.001 WAVES"},{prov:"ZEC",dep:"0%",wd:"0.001 ZEC"},{prov:"USDT",dep:"0%",wd:""},{prov:"XMR",dep:"0%",wd:"0.001 XMR"},{prov:"XRP",dep:"0%",wd:"0.02 XRP"},{prov:"ETC",dep:"0%",wd:"0.01 ETC"},{prov:"BCH",dep:"0%",wd:"0.001 BCH"},{prov:"BTG",dep:"0%",wd:"0.001 BTG"},{prov:"EOS",dep:"0%",wd:"0.05 EOS"},{prov:"XLM",dep:"0%",wd:"0.01 XLM"},{prov:"OMG",dep:"0.1 OMG",wd:"0.5 OMG"},{prov:"TRX",dep:"0%",wd:"1 TRX"},{prov:"ADA",dep:"0%",wd:"1 ADA"},{prov:"NEO",dep:"0%",wd:"0%"},{prov:"GAS",dep:"0%",wd:"0%"},{prov:"ZRX",dep:"0%",wd:"1 ZRX"},{prov:"GNT",dep:"0%",wd:"1 GNT"},{prov:"GUSD",dep:"0%",wd:"0.5 GUSD"},{prov:"LSK",dep:"0%",wd:"0.1 LSK"},{prov:"XEM",dep:"0%",wd:"5 XEM"},{prov:"SMART",dep:"0%",wd:"0.5 SMART"},{prov:"QTUM",dep:"0%",wd:"0.01 QTUM"},{prov:"HB",dep:"0%",wd:"10 HB"},{prov:"DAI",dep:"0%",wd:"1 DAI"},{prov:"MKR",dep:"0%",wd:"0.005 MKR"},{prov:"MNC",dep:"0%",wd:"15 MNC"},{prov:"PTI",dep:"-",wd:"10 PTI"},{prov:"ETZ",dep:"0%",wd:"1 ETZ"},{prov:"USDC",dep:"0%",wd:"0.5 USDC"},{prov:"ROOBEE",dep:"0%",wd:"200 ROOBEE"},{prov:"DCR",dep:"0%",wd:"0.01 DCR"},{prov:"ZAG",dep:"0%",wd:"0%"},{prov:"BTT",dep:"0 BTT",wd:"100 BTT"},{prov:"VLX",dep:"0%",wd:"1 VLX"},{prov:"CRON",dep:"0%",wd:"5 CRON"},{prov:"ONT",dep:"0%",wd:"1 ONT"},{prov:"ONG",dep:"0%",wd:"5 ONG"},{prov:"ALGO",dep:"0%",wd:"0.01 ALGO"},{prov:"ATOM",dep:"0%",wd:"0.05 ATOM"}]},{group:"usd",title:"USD",items:[{prov:"Payeer",dep:"3.95%",wd:"-"},{prov:"EX-CODE",dep:"",wd:"0.2%"},{prov:"AdvCash",dep:"0%",wd:"2.49%"},{prov:"Visa/MasterCard (Simplex)",dep:"4.5% + 0.5 USD",wd:"-"},{prov:"Visa",dep:"3.45%",wd:"-"},{prov:"Frick Bank",dep:"0 USD",wd:"-"}]},{group:"eur",title:"EUR",items:[{prov:"Visa/MasterCard",dep:"4.5% + 0.5  EUR",wd:"-"},{prov:"EX-CODE",dep:"",wd:"0.2%"},{prov:"Visa",dep:"2.95%",wd:"-"},{prov:"Frick Internal Transfer",dep:"0 EUR",wd:"-"},{prov:"SEPA Frick Bank",dep:"0 EUR",wd:"1 EUR"},{prov:"WIRE Frick Bank",dep:"0%",wd:"20 EUR"},{prov:"SEPA Weg Ag",dep:"-",wd:"1 EUR"}]},{group:"gbp",title:"GBP",items:[{prov:"EX-CODE",dep:"",wd:"0.2%"},{prov:"WIRE Frick Bank",dep:"10 GBP",wd:"-"}]},{group:"rub",title:"RUB",items:[{prov:"Payeer",dep:"2.49%",wd:"3.49%"},{prov:"EX-CODE",dep:"",wd:"0.2%"},{prov:"Qiwi",dep:"1.49%",wd:"2.49%"},{prov:"Yandex Money",dep:"1.49%",wd:"1.95 %"},{prov:"AdvCash",dep:"0.99%",wd:"0.99%"},{prov:"Visa/MasterCard",dep:"2.99%",wd:"3.99% + 60 RUB"}]},{group:"pln",title:"PLN",items:[{prov:"EX-CODE",dep:"",wd:"0.2%"}]},{group:"try",title:"TRY",items:[{prov:"EX-CODE",dep:"",wd:"0.2%"},{prov:"Visa",dep:"3.05%",wd:"-"},{prov:"Visa/MasterCard (Simplex)",dep:"4.5% + 2 TRY",wd:"-"},{prov:"AdvCash",dep:"0%",wd:"-"}]},{group:"uah",title:"UAH",items:[{prov:"EX-CODE",dep:"",wd:"0.2%"},{prov:"Terminal",dep:"2.6%",wd:"-"},{prov:"Visa/MasterCard EasyTransfer",dep:"-",wd:"2.99%"},{prov:"Visa/MasterCard",dep:"1% + 5 UAH",wd:"-"}]},{group:"kzt",title:"KZT",items:[{prov:"Visa/MasterCard",dep:"3.5%",wd:"2.99% + 450 KZT"},{prov:"EX-CODE",dep:"",wd:"0.2%"},{prov:"AdvCash",dep:"0%",wd:"-"}]}]}}},exceptions:{exact:{40005:g,40009:x,40015:v,40016:w,40017:g,40032:O,40034:_,50052:y,50054:y,50304:m,50173:m,50277:b,50319:b,50321:b},broad:{"range period is too long":S,"invalid syntax":S,"API rate limit exceeded":_}},orders:{}})}},{key:"fetchTradingFees",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,u,c=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=c.length>0&&void 0!==c[0]?c[0]:{},!this.options.useWebapiForFetchingFees){e.next=20;break}return e.next=4,this.webGetEnDocsFees(t);case 4:if(r=e.sent,i=r.split('<td class="th_fees_2" colspan="2">'),2===i.length){e.next=9;break}throw new k(this.id+" fetchTradingFees format has changed");case 9:if(a=i[1],i=a.split("</td>"),!(i.length<2)){e.next=14;break}throw new k(this.id+" fetchTradingFees format has changed");case 14:return s=.01*parseFloat(i[0].replace("%","")),o=s,u=s,e.abrupt("return",{maker:u,taker:o});case 20:return e.abrupt("return",{maker:this.fees.trading.maker,taker:this.fees.trading.taker});case 21:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseFixedFloatValue",value:function(e){if(void 0!==e&&"-"!==e){if(""===e)return 0;var t=e.indexOf("%")>=0,r=e.split(" ")[0].replace("%",""),i=parseFloat(r);if(i>0&&t)throw new v(this.id+" parseFixedFloatValue detected an unsupported non-zero percentage-based fee "+e);return i}}},{key:"fetchFundingFees",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,u,c,d,h,l,f,p,v,m,g,y=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=y.length>0&&void 0!==y[0]?y[0]:{},r=void 0,!this.options.useWebapiForFetchingFees){e.next=8;break}return e.next=5,this.webGetCtrlFeesAndLimits(t);case 5:r=e.sent,e.next=9;break;case 8:r=this.options.feesAndLimits;case 9:for(i={},a={},s=this.safeValue(r.data,"fees"),o=this.indexBy(s,"group"),u=o.crypto.items,c=0;c<u.length;c++)d=u[c],h=this.safeCurrencyCode(this.safeString(d,"prov")),l=this.safeString(d,"wd"),f=this.safeString(d,"dep"),void 0!==l&&(i[h]=this.parseFixedFloatValue(l)),void 0!==f&&(a[h]=this.parseFixedFloatValue(f));for(p=this.toArray(this.omit(o,"crypto")),v=0;v<p.length;v++)m=this.safeCurrencyCode(this.safeString(p[v],"title")),i[m]=void 0,a[m]=void 0;return g={info:r,withdraw:i,deposit:a},this.options.fundingFees=g,e.abrupt("return",g);case 20:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchCurrencies",value:function(){var e=a(n.mark((function e(){var t,r,a,s,o,u,c,d,h,l,f,p,v,m,g,y,b,x,k,w,_,S,O,T,C,I,M,A,E,N,P,D,L=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=L.length>0&&void 0!==L[0]?L[0]:{},e.next=3,this.fetchFundingFees(t);case 3:for(r=e.sent,a=Object.keys(r.withdraw),s=this.indexBy(r.info.data.limits,"pair"),o=Object.keys(s),u={},c={},d={},h={},l={},f={},p=0;p<o.length;p++)v=o[p],m=s[v],g=v.split("/"),y=i(g,2),b=y[0],x=y[1],k=this.safeCurrencyCode(b),w=this.safeCurrencyCode(x),_=this.safeNumber(m,"max_q"),S=this.safeNumber(m,"max_p"),O=this.safeNumber(m,"max_a"),T=this.safeNumber(m,"min_q"),C=this.safeNumber(m,"min_p"),I=this.safeNumber(m,"min_a"),u[k]=Math.min(this.safeNumber(u,k,T),T),h[k]=Math.max(this.safeNumber(h,k,_),_),c[w]=Math.min(this.safeNumber(c,w,C),C),d[w]=Math.min(this.safeNumber(d,w,I),I),l[w]=Math.max(this.safeNumber(l,w,S),S),f[w]=Math.max(this.safeNumber(f,w,O),O);for(M={},A=0;A<a.length;A++)E=a[A],N=this.safeCurrencyCode(E),P=this.safeValue(r.withdraw,N),D=!0,M[N]={id:E,code:N,name:N,active:D,fee:P,precision:8,limits:{amount:{min:this.safeNumber(u,N),max:this.safeNumber(h,N)},price:{min:this.safeNumber(c,N),max:this.safeNumber(l,N)},cost:{min:this.safeNumber(d,N),max:this.safeNumber(f,N)}},info:E};return e.abrupt("return",M);case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMarkets",value:function(){var e=a(n.mark((function e(){var t,r,a,s,o,u,c,d,h,l,f,p,v,m,g,y,b,x,k=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=k.length>0&&void 0!==k[0]?k[0]:{},e.next=3,this.publicGetPairSettings(t);case 3:for(r=e.sent,a=Object.keys(r),s=[],o=0;o<a.length;o++)u=a[o],c=r[u],d=u.replace("_","/"),h=d.split("/"),l=i(h,2),f=l[0],p=l[1],v=this.safeCurrencyCode(f),m=this.safeCurrencyCode(p),g=this.safeString(c,"commission_taker_percent"),y=this.safeString(c,"commission_maker_percent"),b=this.parseNumber(T.stringDiv(g,"100")),x=this.parseNumber(T.stringDiv(y,"100")),s.push({id:u,symbol:d,base:v,quote:m,baseId:f,quoteId:p,active:!0,taker:b,maker:x,limits:{amount:{min:this.safeNumber(c,"min_quantity"),max:this.safeNumber(c,"max_quantity")},price:{min:this.safeNumber(c,"min_price"),max:this.safeNumber(c,"max_price")},cost:{min:this.safeNumber(c,"min_amount"),max:this.safeNumber(c,"max_amount")}},precision:{amount:8,price:this.safeInteger(c,"price_precision")},info:c});return e.abrupt("return",s);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOHLCV",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,u,c,d,h,l,f,v,m,g=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=g.length>1&&void 0!==g[1]?g[1]:"1m",i=g.length>2&&void 0!==g[2]?g[2]:void 0,a=g.length>3&&void 0!==g[3]?g[3]:void 0,s=g.length>4&&void 0!==g[4]?g[4]:{},e.next=6,this.loadMarkets();case 6:if(o=this.market(t),u={symbol:o.id,resolution:this.timeframes[r]},c=this.safeValue(this.options,"fetchOHLCV"),d=this.safeInteger(c,"maxLimit",3e3),h=this.parseTimeframe(r),l=this.milliseconds(),void 0!==i){e.next=23;break}if(void 0!==a){e.next=17;break}throw new p(this.id+" fetchOHLCV() requires a since argument or a limit argument");case 17:if(!(a>d)){e.next=19;break}throw new S(this.id+" fetchOHLCV will serve "+d.toString()+" candles at most");case 19:u.from=parseInt(l/1e3)-a*h-1,u.to=parseInt(l/1e3);case 21:e.next=32;break;case 23:if(u.from=parseInt(i/1e3)-1,void 0!==a){e.next=28;break}u.to=parseInt(l/1e3),e.next=32;break;case 28:if(!(a>d)){e.next=30;break}throw new S(this.id+" fetchOHLCV will serve "+d.toString()+" candles at most");case 30:f=this.sum(i,a*h*1e3),u.to=parseInt(f/1e3);case 32:return e.next=34,this.publicGetCandlesHistory(this.extend(u,s));case 34:return v=e.sent,m=this.safeValue(v,"candles",[]),e.abrupt("return",this.parseOHLCVs(m,o,r,i,a));case 37:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){return[this.safeInteger(e,"t"),this.safeNumber(e,"o"),this.safeNumber(e,"h"),this.safeNumber(e,"l"),this.safeNumber(e,"c"),this.safeNumber(e,"v")]}},{key:"fetchBalance",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,u,c,d,h,l=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privatePostUserInfo(t);case 5:for(r=e.sent,i={info:r},a=this.safeValue(r,"balances",{}),s=this.safeValue(r,"reserved",{}),o=Object.keys(a),u=0;u<o.length;u++)c=o[u],d=this.currencyId(c),h=this.account(),d in a&&(h.free=this.safeString(a,d)),d in s&&(h.used=this.safeString(s,d)),i[c]=h;return e.abrupt("return",this.parseBalance(i,!1));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,u,c=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,i=c.length>2&&void 0!==c[2]?c[2]:{},e.next=4,this.loadMarkets();case 4:return a=this.market(t),s={pair:a.id},void 0!==r&&(s.limit=r),e.next=9,this.publicGetOrderBook(this.extend(s,i));case 9:return o=e.sent,u=this.safeValue(o,a.id),e.abrupt("return",this.parseOrderBook(u,void 0,"bid","ask"));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrderBooks",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,u,c,d,h,l,f,p,m=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=m.length>0&&void 0!==m[0]?m[0]:void 0,r=m.length>1&&void 0!==m[1]?m[1]:void 0,i=m.length>2&&void 0!==m[2]?m[2]:{},e.next=5,this.loadMarkets();case 5:if(a=void 0,void 0!==t){e.next=13;break}if(!((a=this.ids.join(",")).length>2048)){e.next=11;break}throw s=this.ids.length,new v(this.id+" has "+s.toString()+" symbols exceeding max URL length, you are required to specify a list of symbols in the first argument to fetchOrderBooks");case 11:e.next=15;break;case 13:a=(a=this.marketIds(t)).join(",");case 15:return o={pair:a},void 0!==r&&(o.limit=r),e.next=19,this.publicGetOrderBook(this.extend(o,i));case 19:for(u=e.sent,c={},d=Object.keys(u),h=0;h<d.length;h++)l=d[h],f=l,l in this.markets_by_id&&(p=this.markets_by_id[l],f=p.symbol),c[f]=this.parseOrderBook(u[l],void 0,"bid","ask");return e.abrupt("return",c);case 24:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeTimestamp(e,"updated"),i=void 0;void 0!==t&&(i=t.symbol);var n=this.safeNumber(e,"last_trade");return{symbol:i,timestamp:r,datetime:this.iso8601(r),high:this.safeNumber(e,"high"),low:this.safeNumber(e,"low"),bid:this.safeNumber(e,"buy_price"),bidVolume:void 0,ask:this.safeNumber(e,"sell_price"),askVolume:void 0,vwap:void 0,open:void 0,close:n,last:n,previousClose:void 0,change:void 0,percentage:void 0,average:this.safeNumber(e,"avg"),baseVolume:this.safeNumber(e,"vol"),quoteVolume:this.safeNumber(e,"vol_curr"),info:e}}},{key:"fetchTickers",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,u,c,d,h,l=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:void 0,r=l.length>1&&void 0!==l[1]?l[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetTicker(r);case 6:for(i=e.sent,a={},s=Object.keys(i),o=0;o<s.length;o++)u=s[o],c=this.markets_by_id[u],d=c.symbol,h=i[u],a[d]=this.parseTicker(h,c);return e.abrupt("return",this.filterByArray(a,"symbol",t));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=a(n.mark((function e(t){var r,i,a,s=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>1&&void 0!==s[1]?s[1]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.publicGetTicker(r);case 5:return i=e.sent,a=this.market(t),e.abrupt("return",this.parseTicker(i[a.id],a));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeTimestamp(e,"date"),n=void 0,a=this.safeString(e,"trade_id"),s=this.safeString(e,"order_id"),o=this.safeNumber(e,"price"),u=this.safeNumber(e,"quantity"),c=this.safeNumber(e,"amount"),d=this.safeString(e,"type"),h=void 0,l=this.safeString(e,"pair");if(void 0!==l)if(l in this.markets_by_id)t=this.markets_by_id[l];else{var f=l.split("_"),p=i(f,2),v=p[0],m=p[1],g=this.safeCurrencyCode(v),y=this.safeCurrencyCode(m);n=g+"/"+y}void 0===n&&void 0!==t&&(n=t.symbol);var b=this.safeString(e,"exec_type"),x=void 0,k=this.safeNumber(e,"commission_amount");if(void 0!==k){var w=this.safeString(e,"commission_currency"),_=this.safeCurrencyCode(w),S=this.safeNumber(e,"commission_percent");void 0!==S&&(S/=1e3),x={cost:k,currency:_,rate:S}}return{id:a,info:e,timestamp:r,datetime:this.iso8601(r),symbol:n,order:s,type:h,side:d,takerOrMaker:b,price:o,amount:u,cost:c,fee:x}}},{key:"fetchTrades",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,u,c,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,i=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={pair:s.id},e.next=9,this.publicGetTrades(this.extend(o,a));case 9:return u=e.sent,c=this.safeValue(u,s.id,[]),e.abrupt("return",this.parseTrades(c,s,r,i));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=a(n.mark((function e(){var t,r,a,s,o,u,c,d,h,l,f,v,m,g,y,b,x,k,w,_,S,O,T=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=T.length>0&&void 0!==T[0]?T[0]:void 0,r=T.length>1&&void 0!==T[1]?T[1]:void 0,a=T.length>2&&void 0!==T[2]?T[2]:void 0,s=T.length>3&&void 0!==T[3]?T[3]:{},void 0!==t){e.next=6;break}throw new p(this.id+" fetchMyTrades() requires a symbol argument (a single symbol or an array)");case 6:return e.next=8,this.loadMarkets();case 8:if(o=void 0,u=void 0,!Array.isArray(t)){e.next=18;break}if(!(t.length<1)){e.next=14;break}throw new p(this.id+" fetchMyTrades() requires a non-empty symbol array");case 14:c=this.marketIds(t),o=c.join(","),e.next=20;break;case 18:u=this.market(t),o=u.id;case 20:return d={pair:o},void 0!==a&&(d.limit=a),e.next=24,this.privatePostUserTrades(this.extend(d,s));case 24:for(h=e.sent,l=[],f=Object.keys(h),v=0;v<f.length;v++)m=f[v],g=void 0,m in this.markets_by_id?(u=this.markets_by_id[m],g=u.symbol):(y=m.split("_"),b=i(y,2),x=b[0],k=b[1],w=this.safeCurrencyCode(x),_=this.safeCurrencyCode(k),g=w+"/"+_),S=h[m],O=this.parseTrades(S,u,r,a,{symbol:g}),l=this.arrayConcat(l,O);return e.abrupt("return",this.filterBySinceLimit(l,r,a));case 29:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=a(n.mark((function e(t,r,i,a){var s,o,u,c,d,h,l,f,p,v=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=v.length>4&&void 0!==v[4]?v[4]:void 0,o=v.length>5&&void 0!==v[5]?v[5]:{},e.next=4,this.loadMarkets();case 4:return u="market"===r?r+"_":"",c=this.market(t),"market"===r&&void 0===s&&(s=0),d={pair:c.id,quantity:this.amountToPrecision(t,a),type:u+i,price:this.priceToPrecision(t,s)},e.next=10,this.privatePostOrderCreate(this.extend(d,o));case 10:return h=e.sent,l=this.safeString(h,"order_id"),f=this.milliseconds(),a=parseFloat(a),s=parseFloat(s),p="open",e.abrupt("return",{id:l,info:h,timestamp:f,datetime:this.iso8601(f),lastTradeTimestamp:void 0,status:p,symbol:t,type:r,side:i,price:s,cost:s*a,amount:a,remaining:a,filled:0,fee:void 0,trades:void 0,clientOrderId:void 0,average:void 0});case 17:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=a(n.mark((function e(t){var r,i,a=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:{},e.next=4,this.loadMarkets();case 4:return i={order_id:t},e.next=7,this.privatePostOrderCancel(this.extend(i,r));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.length>1&&void 0!==o[1]?o[1]:void 0,r=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return i={order_id:t.toString()},e.next=7,this.privatePostOrderTrades(this.extend(i,r));case 7:return a=e.sent,s=this.parseOrder(a),e.abrupt("return",this.extend(s,{id:t.toString()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrderTrades",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,u,c,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:void 0,i=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:void 0,s=h.length>4&&void 0!==h[4]?h[4]:{},o=void 0,void 0!==r&&(o=this.market(r)),u={order_id:t.toString()},e.next=9,this.privatePostOrderTrades(this.extend(u,s));case 9:return c=e.sent,d=this.safeValue(c,"trades"),e.abrupt("return",this.parseTrades(d,o,i,a));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,u,c,d,h,l,f=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:void 0,r=f.length>1&&void 0!==f[1]?f[1]:void 0,i=f.length>2&&void 0!==f[2]?f[2]:void 0,a=f.length>3&&void 0!==f[3]?f[3]:{},e.next=6,this.loadMarkets();case 6:return e.next=8,this.privatePostUserOpenOrders(a);case 8:for(s=e.sent,o=Object.keys(s),u=[],c=0;c<o.length;c++)d=o[c],h=void 0,d in this.markets_by_id&&(h=this.markets_by_id[d]),l=this.parseOrders(s[d],h),u=this.arrayConcat(u,l);return e.abrupt("return",this.filterBySymbolSinceLimit(u,t,r,i));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"order_id"),i=this.safeTimestamp(e,"created"),n=void 0,a=this.safeString(e,"type");if(void 0===t){var s=void 0;"pair"in e?s=e.pair:"in_currency"in e&&"out_currency"in e&&(s="buy"===a?e.in_currency+"_"+e.out_currency:e.out_currency+"_"+e.in_currency),void 0!==s&&s in this.markets_by_id&&(t=this.markets_by_id[s])}var o=this.safeNumber(e,"quantity");if(void 0===o){var u="buy"===a?"in_amount":"out_amount";o=this.safeNumber(e,u)}var c=this.safeNumber(e,"price"),d=this.safeNumber(e,"amount"),h=0,l=[],f=this.safeValue(e,"trades",[]),p=void 0,v=void 0,m=void 0,g=f.length;if(g>0){p=0;for(var y=0;y<g;y++){var b=this.parseTrade(f[y],t);void 0===r&&(r=b.order),void 0===i&&(i=b.timestamp),i>b.timestamp&&(i=b.timestamp),h=this.sum(h,b.amount),p=this.sum(p,b.fee.cost),l.push(b)}v=l[g-1].timestamp}var x=this.safeString(e,"status"),k=void 0;void 0!==o&&(k=o-h,x=h>=o?"closed":"open"),void 0===t&&(t=this.getMarketFromTrades(l));var w=void 0;void 0!==t&&(n=t.symbol,w=t.quote),void 0===d?void 0!==c&&(d=c*h):h>0&&(void 0===m&&(m=d/h),void 0===c&&(c=d/h));var _={cost:p,currency:w};return{id:r,clientOrderId:void 0,datetime:this.iso8601(i),timestamp:i,lastTradeTimestamp:v,status:x,symbol:n,type:"limit",timeInForce:void 0,postOnly:void 0,side:a,price:c,stopPrice:void 0,cost:d,amount:o,filled:h,remaining:k,average:m,trades:l,fee:_,info:e}}},{key:"fetchDepositAddress",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,u,c=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privatePostDepositAddress(r);case 5:return i=e.sent,a=this.safeString(i,t),s=void 0,o=void 0,a&&(u=a.split(","),s=u[0],u.length>1&&(o=u[1])),this.checkAddress(s),e.abrupt("return",{currency:t,address:s,tag:o,info:i});case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getMarketFromTrades",value:function(e){var t=this.indexBy(e,"pair"),r=Object.keys(t);if(1===r.length)return this.markets[r[0]]}},{key:"withdraw",value:function(){var e=a(n.mark((function e(t,r,i){var a,s,o,u,c,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=d.length>3&&void 0!==d[3]?d[3]:void 0,s=d.length>4&&void 0!==d[4]?d[4]:{},e.next=4,this.loadMarkets();case 4:return o=this.currency(t),u={amount:r,currency:o.id,address:i},void 0!==a&&(u.invoice=a),e.next=9,this.privatePostWithdrawCrypt(this.extend(u,s));case 9:return c=e.sent,e.abrupt("return",{info:c,id:c.task_id});case 11:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"parseTransactionStatus",value:function(e){return this.safeString({transferred:"ok",paid:"ok",pending:"pending",processing:"pending"},e,e)}},{key:"parseTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeTimestamp(e,"dt"),i=this.safeNumber(e,"amount");void 0!==i&&(i=Math.abs(i));var n=this.parseTransactionStatus(this.safeString(e,"status")),a=this.safeString(e,"txid"),s=this.safeString(e,"type"),o=this.safeString(e,"curr"),u=this.safeCurrencyCode(o,t),c=void 0,d=void 0,h=void 0,l=this.safeString(e,"account");if("deposit"===s)h=l;else if("withdrawal"===s&&void 0!==(c=l)){var f=c.split(":"),p=f.length;2===p&&(c=(c=this.safeString(f,1)).replace(" ",""))}var v=void 0;if(!this.fees.funding.percentage){var m="withdrawal"===s?"withdraw":"deposit",g=this.safeNumber(this.options.fundingFees[m],u),y=this.safeString(e,"provider");"cashback"===y&&(g=0),void 0!==g&&("withdrawal"===s&&(i-=g),v={cost:g,currency:u,rate:void 0})}return{info:e,id:void 0,timestamp:r,datetime:this.iso8601(r),currency:u,amount:i,address:c,addressTo:c,addressFrom:void 0,tag:d,tagTo:d,tagFrom:void 0,status:n,type:s,updated:void 0,comment:h,txid:a,fee:v}}},{key:"fetchTransactions",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,u,c=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:void 0,r=c.length>1&&void 0!==c[1]?c[1]:void 0,i=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},e.next=6,this.loadMarkets();case 6:return s={},void 0!==r&&(s.date=parseInt(r/1e3)),o=void 0,void 0!==t&&(o=this.currency(t)),e.next=12,this.privatePostWalletHistory(this.extend(s,a));case 12:return u=e.sent,e.abrupt("return",this.parseTransactions(u.history,o,r,i));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.urls.api[t]+"/";if("web"!==t&&(s+=this.version+"/"),s+=e,"public"===t||"web"===t)Object.keys(i).length&&(s+="?"+this.urlencode(i));else if("private"===t){this.checkRequiredCredentials();var o=this.nonce();a=this.urlencode(this.extend({nonce:o},i)),n={"Content-Type":"application/x-www-form-urlencoded",Key:this.apiKey,Sign:this.hmac(this.encode(a),this.encode(this.secret),"sha512")}}return{url:s,method:r,body:a,headers:n}}},{key:"nonce",value:function(){return this.milliseconds()}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,u){if(void 0!==s&&("result"in s||"errmsg"in s)){var c=this.safeValue(s,"result",!1);if("string"===typeof c&&(c="true"===c||"1"===c),!c){var d=void 0,h=this.safeString2(s,"error","errmsg"),l=h.split(":");if(l.length>1){var f=l[0].split(" ");d=f.length>1?f[1]:f[0]}var p=this.id+" "+a;throw this.throwExactlyMatchedException(this.exceptions.exact,d,p),this.throwBroadlyMatchedException(this.exceptions.broad,h,p),new v(p)}}}}]),r}(l)},function(e,t,r){"use strict";var i=r(7),n=r(21),a=r(8),s=r(1),o=r(2),u=r(6),c=r(3),d=r(4),h=r(5),l=r(11),f=r(10),p=f.ExchangeError,v=f.AuthenticationError,m=f.ExchangeNotAvailable,g=f.ArgumentsRequired,y=r(12);e.exports=function(e){d(r,e);var t=h(r);function r(){return s(this,r),t.apply(this,arguments)}return o(r,[{key:"describe",value:function(){return this.deepExtend(u(c(r.prototype),"describe",this).call(this),{id:"exx",name:"EXX",countries:["CN"],rateLimit:100,userAgent:this.userAgents.chrome,has:{cancelOrder:!0,createOrder:!0,fetchBalance:!0,fetchMarkets:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/37770292-fbf613d0-2de4-11e8-9f79-f2dc451b8ccb.jpg",api:{public:"https://api.exx.com/data/v1",private:"https://trade.exx.com/api"},www:"https://www.exx.com/",doc:"https://www.exx.com/help/restApi",fees:"https://www.exx.com/help/rate",referral:"https://www.exx.com/r/fde4260159e53ab8a58cc9186d35501f?recommQd=1"},api:{public:{get:["markets","tickers","ticker","depth","trades"]},private:{get:["order","cancel","getOrder","getOpenOrders","getBalance"]}},fees:{trading:{maker:.001,taker:.001},funding:{withdraw:{BCC:3e-4,BCD:0,BOT:10,BTC:.001,BTG:0,BTM:25,BTS:3,EOS:1,ETC:.01,ETH:.01,ETP:.012,HPY:0,HSR:.001,INK:20,LTC:.005,MCO:.6,MONA:.01,QASH:5,QCASH:5,QTUM:.01,USDT:5}}},commonCurrencies:{DOS:"DEMOS",TV:"TIV"},exceptions:{103:v}})}},{key:"fetchMarkets",value:function(){var e=a(i.mark((function e(){var t,r,a,s,o,u,c,d,h,l,f,p,v,m,g,y,b=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=b.length>0&&void 0!==b[0]?b[0]:{},e.next=3,this.publicGetMarkets(t);case 3:for(r=e.sent,a=Object.keys(r),s=[],o=0;o<a.length;o++)u=a[o],c=r[u],d=u.split("_"),h=n(d,2),l=h[0],f=h[1],p=this.safeCurrencyCode(l),v=this.safeCurrencyCode(f),m=p+"/"+v,g=!0===c.isOpen,y={amount:parseInt(c.amountScale),price:parseInt(c.priceScale)},s.push({id:u,symbol:m,base:p,quote:v,baseId:l,quoteId:f,active:g,precision:y,limits:{amount:{min:Math.pow(10,-y.amount),max:Math.pow(10,y.amount)},price:{min:Math.pow(10,-y.price),max:Math.pow(10,y.price)},cost:{min:void 0,max:void 0}},info:c});return e.abrupt("return",s);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=t.symbol,i=this.safeInteger(e,"date");e=e.ticker;var n=this.safeNumber(e,"last");return{symbol:r,timestamp:i,datetime:this.iso8601(i),high:this.safeNumber(e,"high"),low:this.safeNumber(e,"low"),bid:this.safeNumber(e,"buy"),bidVolume:void 0,ask:this.safeNumber(e,"sell"),askVolume:void 0,vwap:void 0,open:void 0,close:n,last:n,previousClose:void 0,change:this.safeNumber(e,"riseRate"),percentage:void 0,average:void 0,baseVolume:this.safeNumber(e,"vol"),quoteVolume:void 0,info:e}}},{key:"fetchTicker",value:function(){var e=a(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={currency:n.id},e.next=7,this.publicGetTicker(this.extend(a,r));case 7:return s=e.sent,e.abrupt("return",this.parseTicker(s,n));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTickers",value:function(){var e=a(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:void 0,r=f.length>1&&void 0!==f[1]?f[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetTickers(r);case 6:n=e.sent,a={},s=this.milliseconds(),o=Object.keys(n),u=0;case 11:if(!(u<o.length)){e.next=22;break}if((c=o[u])in this.marketsById){e.next=15;break}return e.abrupt("continue",19);case 15:d=this.marketsById[c],h=d.symbol,l={date:s,ticker:n[c]},a[h]=this.parseTicker(l,d);case 19:u++,e.next=11;break;case 22:return e.abrupt("return",this.filterByArray(a,"symbol",t));case 23:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=a(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.length>1&&void 0!==o[1]?o[1]:void 0,r=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return n={currency:this.marketId(t)},e.next=7,this.publicGetDepth(this.extend(n,r));case 7:return a=e.sent,s=this.safeTimestamp(a,"timestamp"),e.abrupt("return",this.parseOrderBook(a,s));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeTimestamp(e,"date"),i=this.safeString(e,"price"),n=this.safeString(e,"amount"),a=this.parseNumber(i),s=this.parseNumber(n),o=this.parseNumber(y.stringMul(i,n)),u=void 0;void 0!==t&&(u=t.symbol);var c="limit",d=this.safeString(e,"type"),h=this.safeString(e,"tid");return{id:h,info:e,timestamp:r,datetime:this.iso8601(r),symbol:u,order:void 0,type:c,side:d,takerOrMaker:void 0,price:a,amount:s,cost:o,fee:void 0}}},{key:"fetchTrades",value:function(){var e=a(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={currency:s.id},e.next=9,this.publicGetTrades(this.extend(o,a));case 9:return u=e.sent,e.abrupt("return",this.parseTrades(u,s,r,n));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=a(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetGetBalance(t);case 5:for(r=e.sent,n={info:r},a=this.safeValue(r,"funds"),s=Object.keys(a),o=0;o<s.length;o++)u=s[o],c=a[u],d=this.safeCurrencyCode(u),(h=this.account()).free=this.safeString(c,"balance"),h.used=this.safeString(c,"freeze"),h.total=this.safeString(c,"total"),n[d]=h;return e.abrupt("return",this.parseBalance(n,!1));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=t.symbol,i=parseInt(e.trade_date),n=this.safeNumber(e,"price"),a=this.safeNumber(e,"trade_money"),s=this.safeNumber(e,"total_amount"),o=this.safeNumber(e,"trade_amount",0),u=this.safeInteger(e,"status");u=1===u?"canceled":2===u?"closed":"open";var c=void 0;return"fees"in e&&(c={cost:this.safeNumber(e,"fees"),currency:t.quote}),this.safeOrder({id:this.safeString(e,"id"),clientOrderId:void 0,datetime:this.iso8601(i),timestamp:i,lastTradeTimestamp:void 0,status:u,symbol:r,type:"limit",timeInForce:void 0,postOnly:void 0,side:e.type,price:n,stopPrice:void 0,cost:a,amount:s,filled:o,remaining:void 0,trades:void 0,fee:c,info:e,average:void 0})}},{key:"createOrder",value:function(){var e=a(i.mark((function e(t,r,n,a){var s,o,u,c,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=f.length>4&&void 0!==f[4]?f[4]:void 0,o=f.length>5&&void 0!==f[5]?f[5]:{},e.next=4,this.loadMarkets();case 4:return u=this.market(t),c={currency:u.id,type:n,price:s,amount:a},e.next=8,this.privateGetOrder(this.extend(c,o));case 8:return d=e.sent,h=this.safeString(d,"id"),l=this.parseOrder({id:h,trade_date:this.milliseconds(),total_amount:a,price:s,type:n,info:d},u),e.abrupt("return",l);case 12:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=a(i.mark((function e(t){var r,n,a,s,o,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:{},e.next=4,this.loadMarkets();case 4:return a=this.market(r),s={id:t,currency:a.id},e.next=8,this.privateGetCancel(this.extend(s,n));case 8:return o=e.sent,e.abrupt("return",o);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=a(i.mark((function e(t){var r,n,a,s,o,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:{},e.next=4,this.loadMarkets();case 4:return a=this.market(r),s={id:t,currency:a.id},e.next=8,this.privateGetGetOrder(this.extend(s,n));case 8:return o=e.sent,e.abrupt("return",this.parseOrder(o,a));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=a(i.mark((function e(){var t,r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:void 0,r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},e.next=6,this.loadMarkets();case 6:if(void 0!==t){e.next=8;break}throw new g(this.id+" fetchOpenOrders() requires a symbol argument");case 8:return s=this.market(t),o={currency:s.id},e.next=12,this.privateGetGetOpenOrders(this.extend(o,a));case 12:if(u=e.sent,Array.isArray(u)){e.next=15;break}return e.abrupt("return",[]);case 15:return e.abrupt("return",this.parseOrders(u,s,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"nonce",value:function(){return this.milliseconds()}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.urls.api[t]+"/"+e;if("public"===t)Object.keys(i).length&&(s+="?"+this.urlencode(i));else{this.checkRequiredCredentials();var o=this.urlencode(this.keysort(this.extend({accesskey:this.apiKey,nonce:this.nonce()},i))),u=this.hmac(this.encode(o),this.encode(this.secret),"sha512");s+="?"+o+"&signature="+u,n={"Content-Type":"application/x-www-form-urlencoded"}}return{url:s,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,u){if(void 0!==s){var c=this.safeString(s,"code"),d=this.safeString(s,"message"),h=this.id+" "+a;if("100"!==c){if(void 0!==c){if(this.throwExactlyMatchedException(this.exceptions,c,h),"308"===c)return;throw new p(h)}var l=this.safeValue(s,"result");if(void 0!==l&&!l)throw"\u670d\u52a1\u7aef\u5fd9\u788c"===d?new m(h):new p(h)}}}}]),r}(l)},function(e,t,r){"use strict";var i=r(1),n=r(2),a=r(6),s=r(3),o=r(4),u=r(5),c=r(165);e.exports=function(e){o(r,e);var t=u(r);function r(){return i(this,r),t.apply(this,arguments)}return n(r,[{key:"describe",value:function(){return this.deepExtend(a(s(r.prototype),"describe",this).call(this),{id:"fcoinjp",name:"FCoinJP",countries:["JP"],hostname:"fcoinjp.com",urls:{logo:"https://user-images.githubusercontent.com/1294454/54219174-08b66b00-4500-11e9-862d-f522d0fe08c6.jpg",fees:"https://fcoinjp.zendesk.com/hc/en-us/articles/360018727371",www:"https://www.fcoinjp.com",referral:void 0}})}}]),r}(c)},function(e,t,r){"use strict";var i=r(7),n=r(8),a=r(1),s=r(2),o=r(6),u=r(3),c=r(4),d=r(5),h=r(11),l=r(10).ExchangeError,f=r(12);e.exports=function(e){c(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(u(r.prototype),"describe",this).call(this),{id:"flowbtc",name:"flowBTC",countries:["BR"],version:"v1",rateLimit:1e3,has:{cancelOrder:!0,CORS:!1,createOrder:!0,fetchBalance:!0,fetchMarkets:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTrades:!0},urls:{logo:"https://user-images.githubusercontent.com/51840849/87443317-01c0d080-c5fe-11ea-95c2-9ebe1a8fafd9.jpg",api:"https://publicapi.flowbtc.com.br",www:"https://www.flowbtc.com.br",doc:"https://www.flowbtc.com.br/api.html"},requiredCredentials:{apiKey:!0,secret:!0,uid:!0},api:{public:{post:["GetTicker","GetTrades","GetTradesByDate","GetOrderBook","GetProductPairs","GetProducts"]},private:{post:["CreateAccount","GetUserInfo","SetUserInfo","GetAccountInfo","GetAccountTrades","GetDepositAddresses","Withdraw","CreateOrder","ModifyOrder","CancelOrder","CancelAllOrders","GetAccountOpenOrders","GetOrderFee"]}},fees:{trading:{tierBased:!1,percentage:!0,maker:.0025,taker:.005}}})}},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p,v=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=v.length>0&&void 0!==v[0]?v[0]:{},e.next=3,this.publicPostGetProductPairs(t);case 3:for(r=e.sent,n=this.safeValue(r,"productPairs"),a={},s=0;s<n.length;s++)o=n[s],u=this.safeString(o,"name"),c=this.safeString(o,"product1Label"),d=this.safeString(o,"product2Label"),h=this.safeCurrencyCode(c),l=this.safeCurrencyCode(d),f={amount:this.safeInteger(o,"product1DecimalPlaces"),price:this.safeInteger(o,"product2DecimalPlaces")},a[p=h+"/"+l]={id:u,symbol:p,base:h,quote:l,baseId:c,quoteId:d,precision:f,limits:{amount:{min:void 0,max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0}},info:o,active:void 0};return e.abrupt("return",a);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privatePostGetAccountInfo(t);case 5:for(r=e.sent,n=this.safeValue(r,"currencies"),a={info:r},s=0;s<n.length;s++)o=n[s],u=o.name,c=this.safeCurrencyCode(u),(d=this.account()).free=this.safeString(o,"balance"),d.total=this.safeString(o,"hold"),a[c]=d;return e.abrupt("return",this.parseBalance(a,!1));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.length>1&&void 0!==o[1]?o[1]:void 0,r=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return n=this.market(t),a={productPair:n.id},e.next=8,this.publicPostGetOrderBook(this.extend(a,r));case 8:return s=e.sent,e.abrupt("return",this.parseOrderBook(s,void 0,"bids","asks","px","qty"));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={productPair:n.id},e.next=7,this.publicPostGetTicker(this.extend(a,r));case 7:return s=e.sent,o=this.milliseconds(),u=this.safeNumber(s,"last"),e.abrupt("return",{symbol:t,timestamp:o,datetime:this.iso8601(o),high:this.safeNumber(s,"high"),low:this.safeNumber(s,"low"),bid:this.safeNumber(s,"bid"),bidVolume:void 0,ask:this.safeNumber(s,"ask"),askVolume:void 0,vwap:void 0,open:void 0,close:u,last:u,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeNumber(s,"volume24hr"),quoteVolume:this.safeNumber(s,"volume24hrProduct2"),info:s});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e,t){var r=this.safeTimestamp(e,"unixtime"),i=0===e.incomingOrderSide?"buy":"sell",n=this.safeString(e,"tid"),a=this.safeString(e,"px"),s=this.safeString(e,"qty"),o=this.parseNumber(a),u=this.parseNumber(s),c=this.parseNumber(f.stringMul(a,s));return{info:e,timestamp:r,datetime:this.iso8601(r),symbol:t.symbol,id:n,order:void 0,type:void 0,side:i,price:o,amount:u,cost:c,takerOrMaker:void 0,fee:void 0}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={ins:s.id,startIndex:-1},e.next=9,this.publicPostGetTrades(this.extend(o,a));case 9:return u=e.sent,e.abrupt("return",this.parseTrades(u.trades,s,r,n));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=h.length>4&&void 0!==h[4]?h[4]:void 0,o=h.length>5&&void 0!==h[5]?h[5]:{},e.next=4,this.loadMarkets();case 4:return u="market"===r?1:0,c={ins:this.marketId(t),side:n,orderType:u,qty:a,px:this.priceToPrecision(t,s)},e.next=8,this.privatePostCreateOrder(this.extend(c,o));case 8:return d=e.sent,e.abrupt("return",{info:d,id:d.serverOrderId});case 10:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:{},e.next=4,this.loadMarkets();case 4:if(!("ins"in r)){e.next=9;break}return n={serverOrderId:t},e.next=8,this.privatePostCancelOrder(this.extend(n,r));case 8:return e.abrupt("return",e.sent);case 9:throw new l(this.id+" cancelOrder() requires an `ins` symbol parameter for cancelling an order");case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.urls.api+"/"+this.version+"/"+e;if("public"===t)Object.keys(i).length&&(a=this.json(i));else{this.checkRequiredCredentials();var o=this.nonce(),u=o.toString()+this.uid+this.apiKey,c=this.hmac(this.encode(u),this.encode(this.secret));a=this.json(this.extend({apiKey:this.apiKey,apiNonce:o,apiSig:c.toUpperCase()},i)),n={"Content-Type":"application/json"}}return{url:s,method:r,body:a,headers:n}}},{key:"request",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:"public",n=c.length>2&&void 0!==c[2]?c[2]:"GET",a=c.length>3&&void 0!==c[3]?c[3]:{},s=c.length>4&&void 0!==c[4]?c[4]:void 0,o=c.length>5&&void 0!==c[5]?c[5]:void 0,e.next=7,this.fetch2(t,r,n,a,s,o);case 7:if(!("isAccepted"in(u=e.sent))){e.next=11;break}if(!u.isAccepted){e.next=11;break}return e.abrupt("return",u);case 11:throw new l(this.id+" "+this.json(u));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(h)},function(e,t,r){"use strict";var i=r(21),n=r(7),a=r(8),s=r(1),o=r(2),u=r(6),c=r(3),d=r(4),h=r(5),l=r(11),f=r(18).TICK_SIZE,p=r(10),v=p.ExchangeError,m=p.InvalidOrder,g=p.BadRequest,y=p.InsufficientFunds,b=p.OrderNotFound,x=p.AuthenticationError,k=p.RateLimitExceeded,w=p.ExchangeNotAvailable,_=p.CancelPending,S=p.ArgumentsRequired,O=p.PermissionDenied,T=r(12);e.exports=function(e){d(r,e);var t=h(r);function r(){return s(this,r),t.apply(this,arguments)}return o(r,[{key:"describe",value:function(){return this.deepExtend(u(c(r.prototype),"describe",this).call(this),{id:"ftx",name:"FTX",countries:["HK"],rateLimit:50,certified:!0,pro:!0,hostname:"ftx.com",urls:{logo:"https://user-images.githubusercontent.com/1294454/67149189-df896480-f2b0-11e9-8816-41593e17f9ec.jpg",www:"https://ftx.com",api:{public:"https://{hostname}",private:"https://{hostname}"},doc:"https://github.com/ftexchange/ftx",fees:"https://ftexchange.zendesk.com/hc/en-us/articles/360024479432-Fees",referral:"https://ftx.com/#a=1623029"},has:{cancelAllOrders:!0,cancelOrder:!0,createOrder:!0,editOrder:!0,fetchBalance:!0,fetchClosedOrders:!1,fetchCurrencies:!0,fetchDepositAddress:!0,fetchDeposits:!0,fetchFundingFees:!1,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,fetchTradingFees:!0,fetchWithdrawals:!0,withdraw:!0},timeframes:{"15s":"15","1m":"60","5m":"300","15m":"900","1h":"3600","4h":"14400","1d":"86400"},api:{public:{get:["coins","markets","markets/{market_name}","markets/{market_name}/orderbook","markets/{market_name}/trades","markets/{market_name}/candles","futures","futures/{future_name}","futures/{future_name}/stats","funding_rates","indexes/{index_name}/weights","expired_futures","indexes/{market_name}/candles","lt/tokens","lt/{token_name}","options/requests","options/trades","stats/24h_options_volume","options/historical_volumes/BTC","options/open_interest/BTC","options/historical_open_interest/BTC"]},private:{get:["account","positions","wallet/coins","wallet/balances","wallet/all_balances","wallet/deposit_address/{coin}","wallet/deposits","wallet/withdrawals","wallet/withdrawal_fee","wallet/airdrops","wallet/saved_addresses","orders","orders/history","orders/{order_id}","orders/by_client_id/{client_order_id}","conditional_orders","conditional_orders/{conditional_order_id}/triggers","conditional_orders/history","spot_margin/borrow_rates","spot_margin/lending_rates","spot_margin/borrow_summary","spot_margin/market_info","spot_margin/borrow_history","spot_margin/lending_history","spot_margin/offers","spot_margin/lending_info","fills","funding_payments","lt/balances","lt/creations","lt/redemptions","subaccounts","subaccounts/{nickname}/balances","otc/quotes/{quoteId}","options/my_requests","options/requests/{request_id}/quotes","options/my_quotes","options/account_info","options/positions","options/fills","staking/stakes","staking/unstake_requests","staking/balances","staking/staking_rewards"],post:["account/leverage","wallet/withdrawals","wallet/saved_addresses","orders","conditional_orders","orders/{order_id}/modify","orders/by_client_id/{client_order_id}/modify","conditional_orders/{order_id}/modify","spot_margin/offers","lt/{token_name}/create","lt/{token_name}/redeem","subaccounts","subaccounts/update_name","subaccounts/transfer","otc/quotes/{quote_id}/accept","otc/quotes","options/requests","options/requests/{request_id}/quotes","options/quotes/{quote_id}/accept","staking/unstake_requests","srm_stakes/stakes"],delete:["wallet/saved_addresses/{saved_address_id}","orders/{order_id}","orders/by_client_id/{client_order_id}","orders","conditional_orders/{order_id}","subaccounts","options/requests/{request_id}","options/quotes/{quote_id}","staking/unstake_requests/{request_id}"]}},fees:{trading:{tierBased:!0,percentage:!0,maker:2e-4,taker:.07/100,tiers:{taker:[[0,.07/100],[1e6,6e-4],[5e6,55e-5],[1e7,5e-4],[15e6,45e-5],[35e6,4e-4]],maker:[[0,2e-4],[1e6,2e-4],[5e6,15e-5],[1e7,15e-5],[15e6,1e-4],[35e6,1e-4]]}},funding:{withdraw:{}}},exceptions:{exact:{"Please slow down":k,"Size too small for provide":m,"Not logged in":x,"Not enough balances":y,InvalidPrice:m,"Size too small":m,"Missing parameter price":m,"Order not found":b,"Order already closed":m,"Trigger price too high":m,"Trigger price too low":m,"Order already queued for cancellation":_},broad:{"Account does not have enough margin for order":y,"Invalid parameter":g,"The requested URL was not found on the server":g,"No such coin":g,"No such market":g,"Do not send more than":k,"An unexpected error occurred":w,"Please retry request":w,"Please try again":w,"Only have permissions for subaccount":O}},precisionMode:f,options:{cancelOrder:{method:"privateDeleteOrdersOrderId"},fetchOpenOrders:{method:"privateGetOrders"},fetchOrders:{method:"privateGetOrdersHistory"},sign:{"ftx.com":"FTX","ftx.us":"FTXUS"}}})}},{key:"fetchCurrencies",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,u,c,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:{},e.next=3,this.publicGetCoins(t);case 3:for(r=e.sent,i=this.safeValue(r,"result",[]),a={},s=0;s<i.length;s++)o=i[s],u=this.safeString(o,"id"),c=this.safeCurrencyCode(u),d=this.safeString(o,"name"),a[c]={id:u,code:c,info:o,type:void 0,name:d,active:void 0,fee:void 0,precision:void 0,limits:{withdraw:{min:void 0,max:void 0},amount:{min:void 0,max:void 0}}};return e.abrupt("return",a);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMarkets",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,u,c,d,h,l,f,p,v,m,g,y,b=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=b.length>0&&void 0!==b[0]?b[0]:{},e.next=3,this.publicGetMarkets(t);case 3:for(r=e.sent,i=[],a=this.safeValue(r,"result",[]),s=0;s<a.length;s++)o=a[s],u=this.safeString(o,"name"),c=this.safeString2(o,"baseCurrency","underlying"),d=this.safeString(o,"quoteCurrency","USD"),h=this.safeString(o,"type"),l=this.safeCurrencyCode(c),f=this.safeCurrencyCode(d),p="future"===h?this.safeString(o,"name"):l+"/"+f,v=this.safeValue(o,"enabled"),m=this.safeNumber(o,"sizeIncrement"),g=this.safeNumber(o,"priceIncrement"),y={amount:m,price:g},i.push({id:u,symbol:p,base:l,quote:f,baseId:c,quoteId:d,type:h,future:"future"===h,spot:"spot"===h,active:v,precision:y,limits:{amount:{min:m,max:void 0},price:{min:g,max:void 0},cost:{min:void 0,max:void 0}},info:o});return e.abrupt("return",i);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0,i=this.safeString(e,"name");if(i in this.markets_by_id)t=this.markets_by_id[i];else{var n=this.safeString(e,"type");if("future"===n)r=i;else{var a=this.safeCurrencyCode(this.safeString(e,"baseCurrency")),s=this.safeCurrencyCode(this.safeString(e,"quoteCurrency"));void 0!==a&&void 0!==s&&(r=a+"/"+s)}}void 0===r&&void 0!==t&&(r=t.symbol);var o=this.safeNumber(e,"last"),u=this.safeTimestamp(e,"time",this.milliseconds());return{symbol:r,timestamp:u,datetime:this.iso8601(u),high:this.safeNumber(e,"high"),low:this.safeNumber(e,"low"),bid:this.safeNumber(e,"bid"),bidVolume:this.safeNumber(e,"bidSize"),ask:this.safeNumber(e,"ask"),askVolume:this.safeNumber(e,"askSize"),vwap:void 0,open:void 0,close:o,last:o,previousClose:void 0,change:void 0,percentage:this.safeNumber(e,"change24h"),average:void 0,baseVolume:void 0,quoteVolume:this.safeNumber(e,"quoteVolume24h"),info:e}}},{key:"fetchTicker",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:{},e.next=3,this.loadMarkets();case 3:return i=this.market(t),a={market_name:i.id},e.next=7,this.publicGetMarketsMarketName(this.extend(a,r));case 7:return s=e.sent,o=this.safeValue(s,"result",{}),e.abrupt("return",this.parseTicker(o,i));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTickers",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetMarkets(r);case 6:return i=e.sent,a=this.safeValue(i,"result",[]),e.abrupt("return",this.parseTickers(a,t));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,u,c=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,i=c.length>2&&void 0!==c[2]?c[2]:{},e.next=4,this.loadMarkets();case 4:return a=this.market(t),s={market_name:a.id},void 0!==r&&(s.depth=r),e.next=9,this.publicGetMarketsMarketNameOrderbook(this.extend(s,i));case 9:return o=e.sent,u=this.safeValue(o,"result",{}),e.abrupt("return",this.parseOrderBook(u));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){return[this.safeInteger(e,"time"),this.safeNumber(e,"open"),this.safeNumber(e,"high"),this.safeNumber(e,"low"),this.safeNumber(e,"close"),this.safeNumber(e,"volume")]}},{key:"getMarketId",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=this.getMarketParams(e,t,r);return this.safeString(i,1,e)}},{key:"getMarketParams",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=void 0,n=void 0;return n=e in this.markets?(i=this.market(e)).id:this.safeString(r,t,e),[i,n]}},{key:"fetchOHLCV",value:function(){var e=a(n.mark((function e(t){var r,a,s,o,u,c,d,h,l,f,p,v=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=v.length>1&&void 0!==v[1]?v[1]:"1m",a=v.length>2&&void 0!==v[2]?v[2]:void 0,s=v.length>3&&void 0!==v[3]?v[3]:void 0,o=v.length>4&&void 0!==v[4]?v[4]:{},e.next=6,this.loadMarkets();case 6:return u=this.getMarketParams(t,"market_name",o),c=i(u,2),d=c[0],h=c[1],l={resolution:this.timeframes[r],market_name:h},s=void 0===s?1501:s,void 0===a?(l.end_time=this.seconds(),l.limit=s,l.start_time=l.end_time-s*this.parseTimeframe(r)):(l.start_time=parseInt(a/1e3),l.limit=s,l.end_time=this.sum(l.start_time,s*this.parseTimeframe(r))),e.next=12,this.publicGetMarketsMarketNameCandles(this.extend(l,o));case 12:return f=e.sent,p=this.safeValue(f,"result",[]),e.abrupt("return",this.parseOHLCVs(p,d,r,a,s));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),i=this.safeString(e,"liquidity"),n=this.safeString(e,"market"),a=void 0;if(n in this.markets_by_id)a=(t=this.markets_by_id[n]).symbol;else{var s=this.safeCurrencyCode(this.safeString(e,"baseCurrency")),o=this.safeCurrencyCode(this.safeString(e,"quoteCurrency"));a=void 0!==s&&void 0!==o?s+"/"+o:n}var u=this.parse8601(this.safeString(e,"time")),c=this.safeString(e,"price"),d=this.safeString(e,"size"),h=this.parseNumber(c),l=this.parseNumber(d),f=this.parseNumber(T.stringMul(c,d));void 0===a&&void 0!==t&&(a=t.symbol);var p=this.safeString(e,"side"),v=void 0,m=this.safeNumber(e,"fee");if(void 0!==m){var g=this.safeString(e,"feeCurrency"),y=this.safeCurrencyCode(g);v={cost:m,currency:y,rate:this.safeNumber(e,"feeRate")}}var b=this.safeString(e,"orderId");return{info:e,timestamp:u,datetime:this.iso8601(u),symbol:a,id:r,order:b,type:void 0,takerOrMaker:i,side:p,price:h,amount:l,cost:f,fee:v}}},{key:"fetchTrades",value:function(){var e=a(n.mark((function e(t){var r,a,s,o,u,c,d,h,l,f,p=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=p.length>1&&void 0!==p[1]?p[1]:void 0,a=p.length>2&&void 0!==p[2]?p[2]:void 0,s=p.length>3&&void 0!==p[3]?p[3]:{},e.next=5,this.loadMarkets();case 5:return o=this.getMarketParams(t,"market_name",s),u=i(o,2),c=u[0],d=u[1],h={market_name:d},void 0!==r&&(h.start_time=parseInt(r/1e3),h.end_time=this.seconds()),void 0!==a&&(h.limit=a),e.next=11,this.publicGetMarketsMarketNameTrades(this.extend(h,s));case 11:return l=e.sent,f=this.safeValue(l,"result",[]),e.abrupt("return",this.parseTrades(f,c,r,a));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTradingFees",value:function(){var e=a(n.mark((function e(){var t,r,i,a=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetAccount(t);case 5:return r=e.sent,i=this.safeValue(r,"result",{}),e.abrupt("return",{info:r,maker:this.safeNumber(i,"makerFee"),taker:this.safeNumber(i,"takerFee")});case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,u,c,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetWalletBalances(t);case 5:for(r=e.sent,i={info:r},a=this.safeValue(r,"result",[]),s=0;s<a.length;s++)o=a[s],u=this.safeCurrencyCode(this.safeString(o,"coin")),(c=this.account()).free=this.safeString(o,"free"),c.total=this.safeString(o,"total"),i[u]=c;return e.abrupt("return",this.parseBalance(i,!1));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({new:"open",open:"open",closed:"closed",triggered:"closed"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),i=this.parse8601(this.safeString(e,"createdAt")),n=this.parseOrderStatus(this.safeString(e,"status")),a=this.safeNumber(e,"size"),s=this.safeNumber(e,"filledSize"),o=this.safeNumber(e,"remainingSize");0===o&&void 0!==a&&void 0!==s&&(o=Math.max(a-s,0))>0&&(n="canceled");var u=void 0,c=this.safeString(e,"market");void 0!==c&&(u=c in this.markets_by_id?(t=this.markets_by_id[c]).symbol:c),void 0===u&&void 0!==t&&(u=t.symbol);var d=this.safeString(e,"side"),h=this.safeString(e,"type"),l=this.safeNumber(e,"avgFillPrice"),f=this.safeNumber2(e,"price","triggerPrice",l),p=void 0;void 0!==s&&void 0!==f&&(p=s*f);var v=this.parse8601(this.safeString(e,"triggeredAt")),m=this.safeString(e,"clientId"),g=this.safeNumber(e,"triggerPrice"),y=this.safeValue(e,"postOnly");return{info:e,id:r,clientOrderId:m,timestamp:i,datetime:this.iso8601(i),lastTradeTimestamp:v,symbol:u,type:h,timeInForce:void 0,postOnly:y,side:d,price:f,stopPrice:g,amount:a,cost:p,average:l,filled:s,remaining:o,status:n,fee:void 0,trades:void 0}}},{key:"createOrder",value:function(){var e=a(n.mark((function e(t,r,i,a){var s,o,u,c,d,h,l,f,p,v=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=v.length>4&&void 0!==v[4]?v[4]:void 0,o=v.length>5&&void 0!==v[5]?v[5]:{},e.next=4,this.loadMarkets();case 4:if(u=this.market(t),c={market:u.id,side:i,type:r,size:parseFloat(this.amountToPrecision(t,a))},void 0!==(d=this.safeString2(o,"clientId","clientOrderId"))&&(c.clientId=d,o=this.omit(o,["clientId","clientOrderId"])),h=void 0,"limit"!==r){e.next=14;break}h="privatePostOrders",c.price=parseFloat(this.priceToPrecision(t,s)),e.next=37;break;case 14:if("market"!==r){e.next=19;break}h="privatePostOrders",c.price=null,e.next=37;break;case 19:if("stop"!==r&&"takeProfit"!==r){e.next=31;break}if(h="privatePostConditionalOrders",void 0!==(l=this.safeNumber2(o,"stopPrice","triggerPrice"))){e.next=26;break}throw new S(this.id+" createOrder () requires a stopPrice parameter or a triggerPrice parameter for "+r+" orders");case 26:o=this.omit(o,["stopPrice","triggerPrice"]),c.triggerPrice=parseFloat(this.priceToPrecision(t,l));case 28:void 0!==s&&(c.orderPrice=parseFloat(this.priceToPrecision(t,s))),e.next=37;break;case 31:if("trailingStop"!==r){e.next=36;break}h="privatePostConditionalOrders",c.trailValue=parseFloat(this.priceToPrecision(t,s)),e.next=37;break;case 36:throw new m(this.id+" createOrder () does not support order type "+r+", only limit, market, stop, trailingStop, or takeProfit orders are supported");case 37:return e.next=39,this[h](this.extend(c,o));case 39:return f=e.sent,p=this.safeValue(f,"result",[]),e.abrupt("return",this.parseOrder(p,u));case 42:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"editOrder",value:function(){var e=a(n.mark((function e(t,r,i,a,s){var o,u,c,d,h,l,f,p,v,m,g,y,b,x,k=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=k.length>5&&void 0!==k[5]?k[5]:void 0,u=k.length>6&&void 0!==k[6]?k[6]:{},e.next=4,this.loadMarkets();case 4:return c=this.market(r),d={},h=void 0,l=this.safeString2(u,"client_order_id","clientOrderId"),f=this.safeNumber(u,"triggerPrice"),p=this.safeNumber(u,"orderPrice"),v=this.safeNumber(u,"trailValue"),u=this.omit(u,["client_order_id","clientOrderId","triggerPrice","orderPrice","trailValue"]),g=void 0!==p,y=void 0!==v,(m=void 0!==f)||g||y?(h="privatePostConditionalOrdersOrderIdModify",d.order_id=t,m&&(d.triggerPrice=parseFloat(this.priceToPrecision(r,f))),g&&(d.orderPrice=parseFloat(this.priceToPrecision(r,p))),y&&(d.trailValue=parseFloat(this.priceToPrecision(r,v)))):(void 0===l?(h="privatePostOrdersOrderIdModify",d.order_id=t):(h="privatePostOrdersByClientIdClientOrderIdModify",d.client_order_id=l),void 0!==o&&(d.price=parseFloat(this.priceToPrecision(r,o)))),void 0!==s&&(d.size=parseFloat(this.amountToPrecision(r,s))),e.next=19,this[h](this.extend(d,u));case 19:return b=e.sent,x=this.safeValue(b,"result",{}),e.abrupt("return",this.parseOrder(x,c));case 22:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n,a){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,u,c,d,h,l,f=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f.length>1&&void 0!==f[1]?f[1]:void 0,r=f.length>2&&void 0!==f[2]?f[2]:{},e.next=4,this.loadMarkets();case 4:return i={},a=this.safeValue(this.options,"cancelOrder",{}),s=this.safeString(a,"method","privateDeleteOrdersOrderId"),o=this.safeString(r,"method",s),u=this.safeValue(r,"type"),void 0===(c=this.safeValue2(r,"client_order_id","clientOrderId"))?(i.order_id=parseInt(t),"stop"!==u&&"trailingStop"!==u&&"takeProfit"!==u||(o="privateDeleteConditionalOrdersOrderId")):(i.client_order_id=c,o="privateDeleteOrdersByClientIdClientOrderId"),d=this.omit(r,["method","type","client_order_id","clientOrderId"]),e.next=14,this[o](this.extend(i,d));case 14:return h=e.sent,l=this.safeValue(h,"result",{}),e.abrupt("return",l);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cancelAllOrders",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:{},e.next=4,this.loadMarkets();case 4:return i={},void 0!==(a=this.getMarketId(t,"market",r))&&(i.market=a),e.next=9,this.privateDeleteOrders(this.extend(i,r));case 9:return s=e.sent,o=this.safeValue(s,"result",{}),e.abrupt("return",o);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,u,c=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.length>1&&void 0!==c[1]?c[1]:void 0,r=c.length>2&&void 0!==c[2]?c[2]:{},e.next=4,this.loadMarkets();case 4:return i={},a=this.safeValue2(r,"client_order_id","clientOrderId"),s="privateGetOrdersOrderId",void 0===a?i.order_id=t:(i.client_order_id=a,r=this.omit(r,["client_order_id","clientOrderId"]),s="privateGetOrdersByClientIdClientOrderId"),e.next=10,this[s](this.extend(i,r));case 10:return o=e.sent,u=this.safeValue(o,"result",{}),e.abrupt("return",this.parseOrder(u));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=a(n.mark((function e(){var t,r,a,s,o,u,c,d,h,l,f,p,v,m,g,y,b=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=b.length>0&&void 0!==b[0]?b[0]:void 0,r=b.length>1&&void 0!==b[1]?b[1]:void 0,a=b.length>2&&void 0!==b[2]?b[2]:void 0,s=b.length>3&&void 0!==b[3]?b[3]:{},e.next=6,this.loadMarkets();case 6:return o={},u=this.getMarketParams(t,"market",s),c=i(u,2),d=c[0],void 0!==(h=c[1])&&(o.market=h),l=this.safeValue(this.options,"fetchOpenOrders",{}),f=this.safeString(l,"method","privateGetOrders"),p=this.safeString(s,"method",f),"stop"!==(v=this.safeValue(s,"type"))&&"trailingStop"!==v&&"takeProfit"!==v||(p="privateGetConditionalOrders"),m=this.omit(s,["method","type"]),e.next=17,this[p](this.extend(o,m));case 17:return g=e.sent,y=this.safeValue(g,"result",[]),e.abrupt("return",this.parseOrders(y,d,r,a));case 20:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrders",value:function(){var e=a(n.mark((function e(){var t,r,a,s,o,u,c,d,h,l,f,p,v,m,g,y,b=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=b.length>0&&void 0!==b[0]?b[0]:void 0,r=b.length>1&&void 0!==b[1]?b[1]:void 0,a=b.length>2&&void 0!==b[2]?b[2]:void 0,s=b.length>3&&void 0!==b[3]?b[3]:{},e.next=6,this.loadMarkets();case 6:return o={},u=this.getMarketParams(t,"market",s),c=i(u,2),d=c[0],void 0!==(h=c[1])&&(o.market=h),void 0!==a&&(o.limit=a),void 0!==r&&(o.start_time=parseInt(r/1e3)),l=this.safeValue(this.options,"fetchOrders",{}),f=this.safeString(l,"method","privateGetOrdersHistory"),p=this.safeString(s,"method",f),"stop"!==(v=this.safeValue(s,"type"))&&"trailingStop"!==v&&"takeProfit"!==v||(p="privateGetConditionalOrdersHistory"),m=this.omit(s,["method","type"]),e.next=19,this[p](this.extend(o,m));case 19:return g=e.sent,y=this.safeValue(g,"result",[]),e.abrupt("return",this.parseOrders(y,d,r,a));case 22:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=a(n.mark((function e(){var t,r,a,s,o,u,c,d,h,l,f,p=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.length>0&&void 0!==p[0]?p[0]:void 0,r=p.length>1&&void 0!==p[1]?p[1]:void 0,a=p.length>2&&void 0!==p[2]?p[2]:void 0,s=p.length>3&&void 0!==p[3]?p[3]:{},e.next=6,this.loadMarkets();case 6:return o=this.getMarketParams(t,"market",s),u=i(o,2),c=u[0],d=u[1],h={},void 0!==d&&(h.market=d),void 0!==a&&(h.limit=a),void 0!==r&&(h.start_time=parseInt(r/1e3),h.end_time=this.seconds()),e.next=13,this.privateGetFills(this.extend(h,s));case 13:return l=e.sent,f=this.safeValue(l,"result",[]),e.abrupt("return",this.parseTrades(f,c,r,a));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"withdraw",value:function(){var e=a(n.mark((function e(t,r,i){var a,s,o,u,c,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.length>3&&void 0!==h[3]?h[3]:void 0,s=h.length>4&&void 0!==h[4]?h[4]:{},e.next=4,this.loadMarkets();case 4:return this.checkAddress(i),o=this.currency(t),u={coin:o.id,size:r,address:i},void 0!==this.password&&(u.password=this.password),void 0!==a&&(u.tag=a),e.next=11,this.privatePostWalletWithdrawals(this.extend(u,s));case 11:return c=e.sent,d=this.safeValue(c,"result",{}),e.abrupt("return",this.parseTransaction(d,o));case 14:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"fetchPositions",value:function(){var e=a(n.mark((function e(){var t,r,i,a=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>0&&void 0!==a[0]?a[0]:void 0,t=a.length>1&&void 0!==a[1]?a[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.privateGetAccount(t);case 6:return r=e.sent,i=this.safeValue(r,"result",{}),e.abrupt("return",this.safeValue(i,"positions",[]));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchDepositAddress",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,u,c,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:{},e.next=3,this.loadMarkets();case 3:return i=this.currency(t),a={coin:i.id},e.next=7,this.privateGetWalletDepositAddressCoin(this.extend(a,r));case 7:return s=e.sent,o=this.safeValue(s,"result",{}),u=this.safeString(o,"address"),c=this.safeString(o,"tag"),this.checkAddress(u),e.abrupt("return",{currency:t,address:u,tag:c,info:s});case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTransactionStatus",value:function(e){return this.safeString({confirmed:"ok",complete:"ok"},e,e)}},{key:"parseTransaction",value:function(e){var t=this.safeCurrencyCode(this.safeString(e,"coin")),r=this.safeString(e,"id"),i=this.safeNumber(e,"size"),n=this.parseTransactionStatus(this.safeString(e,"status")),a=this.parse8601(this.safeString(e,"time")),s=this.safeString(e,"txid"),o=void 0,u=this.safeValue(e,"address");if("string"!==typeof u&&(o=this.safeString(u,"tag"),u=this.safeString(u,"address")),void 0===u){var c=this.safeString(e,"notes");void 0!==c&&(u=c.slice(12))}var d=this.safeNumber(e,"fee");return{info:e,id:r,txid:s,timestamp:a,datetime:this.iso8601(a),addressFrom:void 0,address:u,addressTo:u,tagFrom:void 0,tag:o,tagTo:o,type:void 0,amount:i,currency:t,status:n,updated:void 0,fee:{currency:t,cost:d,rate:void 0}}}},{key:"fetchDeposits",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,u,c=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:void 0,r=c.length>1&&void 0!==c[1]?c[1]:void 0,i=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},e.next=6,this.loadMarkets();case 6:return e.next=8,this.privateGetWalletDeposits(a);case 8:return s=e.sent,o=this.safeValue(s,"result",[]),u=void 0,void 0!==t&&(u=this.currency(t)),e.abrupt("return",this.parseTransactions(o,u,r,i,{type:"deposit"}));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchWithdrawals",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,u,c=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:void 0,r=c.length>1&&void 0!==c[1]?c[1]:void 0,i=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},e.next=6,this.loadMarkets();case 6:return e.next=8,this.privateGetWalletWithdrawals(a);case 8:return s=e.sent,o=this.safeValue(s,"result",[]),u=void 0,void 0!==t&&(u=this.currency(t)),e.abrupt("return",this.parseTransactions(o,u,r,i,{type:"withdrawal"}));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s="/api/"+this.implodeParams(e,i),o=this.omit(i,this.extractParams(e)),u=this.implodeParams(this.urls.api[t],{hostname:this.hostname}),c=u+s;if("POST"!==r&&Object.keys(o).length){var d="?"+this.urlencode(o);c+=d,s+=d}if("private"===t){this.checkRequiredCredentials();var h=this.milliseconds().toString(),l=h+r+s;n={},"POST"!==r&&"DELETE"!==r||(l+=a=this.json(o),n["Content-Type"]="application/json");var f=this.hmac(this.encode(l),this.encode(this.secret),"sha256"),p=this.safeValue(this.options,"sign",{}),v=this.safeString(p,this.hostname,"FTX"),m=v+"-KEY",g=v+"-TS",y=v+"-SIGN";n[m]=this.apiKey,n[g]=h,n[y]=f}return{url:c,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,u){if(void 0!==s&&!this.safeValue(s,"success")){var c=this.id+" "+a,d=this.safeString(s,"error");throw this.throwExactlyMatchedException(this.exceptions.exact,d,c),this.throwBroadlyMatchedException(this.exceptions.broad,d,c),new v(c)}}}]),r}(l)},function(e,t,r){"use strict";var i=r(7),n=r(8),a=r(1),s=r(2),o=r(6),u=r(3),c=r(4),d=r(5),h=r(11),l=r(10),f=l.AuthenticationError,p=l.ExchangeError,v=l.ArgumentsRequired,m=l.InvalidAddress,g=l.OrderNotFound,y=l.NotSupported,b=l.DDoSProtection,x=l.InsufficientFunds,k=l.InvalidOrder,w=r(12);e.exports=function(e){c(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(u(r.prototype),"describe",this).call(this),{id:"gateio",name:"Gate.io",countries:["CN"],version:"2",rateLimit:1e3,pro:!0,has:{cancelOrder:!0,CORS:!1,createDepositAddress:!0,createMarketOrder:!1,createOrder:!0,fetchBalance:!0,fetchClosedOrders:!1,fetchCurrencies:!0,fetchDepositAddress:!0,fetchDeposits:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchOrderTrades:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,fetchTransactions:!0,fetchWithdrawals:!0,withdraw:!0},timeframes:{"1m":60,"5m":300,"10m":600,"15m":900,"30m":1800,"1h":3600,"2h":7200,"4h":14400,"6h":21600,"12h":43200,"1d":86400,"1w":604800},urls:{logo:"https://user-images.githubusercontent.com/1294454/31784029-0313c702-b509-11e7-9ccc-bc0da6a0e435.jpg",api:{public:"https://data.gate.io/api",private:"https://data.gate.io/api"},www:"https://gate.io/",doc:"https://gate.io/api2",fees:["https://gate.io/fee","https://support.gate.io/hc/en-us/articles/115003577673"],referral:"https://www.gate.io/signup/2436035"},api:{public:{get:["candlestick2/{id}","pairs","coininfo","marketinfo","marketlist","coininfo","tickers","ticker/{id}","orderBook/{id}","trade/{id}","tradeHistory/{id}","tradeHistory/{id}/{tid}"]},private:{post:["balances","depositAddress","newAddress","depositsWithdrawals","buy","sell","cancelOrder","cancelAllOrders","getOrder","openOrders","tradeHistory","feelist","withdraw","get_sub_account_available","sub_account_transfer"]}},fees:{trading:{tierBased:!0,percentage:!0,maker:.002,taker:.002}},exceptions:{exact:{4:b,5:f,6:f,7:y,8:y,9:y,15:b,16:g,17:g,20:k,21:x},errorCodeNames:{1:"Invalid request",2:"Invalid version",3:"Invalid request",4:"Too many attempts",5:"Invalid sign",6:"Invalid sign",7:"Currency is not supported",8:"Currency is not supported",9:"Currency is not supported",10:"Verified failed",11:"Obtaining address failed",12:"Empty params",13:"Internal error, please report to administrator",14:"Invalid user",15:"Cancel order too fast, please wait 1 min and try again",16:"Invalid order id or order is already closed",17:"Invalid orderid",18:"Invalid amount",19:"Not permitted or trade is disabled",20:"Your order size is too small",21:"You don't have enough fund"}},options:{limits:{cost:{min:{BTC:1e-4,ETH:.001,USDT:1}}}},commonCurrencies:{"88MPH":"MPH",BIFI:"Bitcoin File",BOX:"DefiBox",BTCBEAR:"BEAR",BTCBULL:"BULL",MPH:"Morpher",SBTC:"Super Bitcoin",TNC:"Trinity Network Credit"}})}},{key:"fetchCurrencies",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,v,m,g,y,b,x,k,w=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=w.length>0&&void 0!==w[0]?w[0]:{},e.next=3,this.publicGetCoininfo(t);case 3:if(r=e.sent,n=this.safeValue(r,"coins")){e.next=7;break}throw new p(this.id+" fetchCurrencies got an unrecognized response");case 7:for(a={},s=0;s<n.length;s++)for(o=n[s],u=Object.keys(o),c=0;c<u.length;c++)d=u[c],h=o[d],l=this.safeCurrencyCode(d),f=this.safeValue(h,"delisted",0),v=this.safeInteger2(h,"withdraw_disabled",0),m=this.safeInteger2(h,"deposit_disabled",0),g=this.safeInteger2(h,"trade_disabled",0),y=0===v,b=0===m,x=0===g,k=0===f&&y&&b&&x,a[l]={id:d,code:l,active:k,info:h,name:void 0,fee:void 0,precision:void 0,limits:{amount:{min:void 0,max:void 0},withdraw:{min:void 0,max:void 0}}};return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,v,m,g,y,b,x,k,_,S,O,T,C,I,M,A,E,N,P=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=P.length>0&&void 0!==P[0]?P[0]:{},e.next=3,this.publicGetMarketinfo(t);case 3:if(r=e.sent,n=this.safeValue(r,"pairs")){e.next=7;break}throw new p(this.id+" fetchMarkets got an unrecognized response");case 7:for(a=[],s=0;s<n.length;s++)o=n[s],u=Object.keys(o),c=this.safeString(u,0),d=o[c],h=c.split("_"),l=h.length,f=h[0],v=h[1],l>2&&(f=h[0]+"_"+h[1],v=h[2]),m=this.safeCurrencyCode(f),g=this.safeCurrencyCode(v),y=m+"/"+g,b=this.safeString(d,"decimal_places"),x=void 0===b?void 0:"1e-"+b,k={amount:this.safeInteger(d,"amount_decimal_places"),price:parseInt(b)},_={min:this.safeNumber(d,"min_amount"),max:void 0},S={min:this.parseNumber(x),max:void 0},O=_.min*S.min,T=this.safeNumber(this.options.limits.cost.min,g,O),C={amount:_,price:S,cost:{min:T,max:void 0}},I=this.safeInteger(d,"trade_disabled"),M=!I,A=c.toUpperCase(),E=this.safeString(d,"fee"),N=w.stringDiv(E,"100"),a.push({id:c,uppercaseId:A,symbol:y,base:m,quote:g,baseId:f,quoteId:v,info:o,active:M,maker:this.parseNumber(N),taker:this.parseNumber(N),precision:k,limits:C});return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privatePostBalances(t);case 5:for(r=e.sent,n={info:r},a=this.safeValue(r,"available",{}),Array.isArray(a)&&(a={}),s=this.safeValue(r,"locked",{}),o=Object.keys(a),u=0;u<o.length;u++)c=o[u],d=this.safeCurrencyCode(c),(h=this.account()).free=this.safeString(a,c),h.used=this.safeString(s,c),n[d]=h;return e.abrupt("return",this.parseBalance(n,!1));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.loadMarkets();case 4:return n={id:this.marketId(t)},e.next=7,this.publicGetOrderBookId(this.extend(n,r));case 7:return a=e.sent,e.abrupt("return",this.parseOrderBook(a));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){return[this.safeInteger(e,0),this.safeNumber(e,5),this.safeNumber(e,3),this.safeNumber(e,4),this.safeNumber(e,2),this.safeNumber(e,1)]}},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:"1m",n=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:void 0,s=h.length>4&&void 0!==h[4]?h[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),u={id:o.id,group_sec:this.timeframes[r]},e.next=10,this.publicGetCandlestick2Id(this.extend(u,s));case 10:return c=e.sent,d=this.safeValue(c,"data",[]),e.abrupt("return",this.parseOHLCVs(d,o,r,n,a));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.milliseconds(),i=void 0;t&&(i=t.symbol);var n=this.safeNumber(e,"last"),a=this.safeNumber(e,"percentChange"),s=void 0,o=void 0,u=void 0;if(void 0!==n&&void 0!==a){var c=a/100;o=n-(s=n/this.sum(1,c)),u=this.sum(n,s)/2}return s=this.safeNumber(e,"open",s),o=this.safeNumber(e,"change",o),{symbol:i,timestamp:r,datetime:this.iso8601(r),high:this.safeNumber2(e,"high24hr","high"),low:this.safeNumber2(e,"low24hr","low"),bid:this.safeNumber(e,"highestBid"),bidVolume:void 0,ask:this.safeNumber(e,"lowestAsk"),askVolume:void 0,vwap:void 0,open:s,close:n,last:n,previousClose:void 0,change:o,percentage:a,average:u,baseVolume:this.safeNumber(e,"quoteVolume"),quoteVolume:this.safeNumber(e,"baseVolume"),info:e}}},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetTickers(r);case 6:for(n=e.sent,a={},s=Object.keys(n),o=0;o<s.length;o++)u=s[o],c=this.safeMarket(u,void 0,"_"),d=c.symbol,a[d]=this.parseTicker(n[u],c);return e.abrupt("return",this.filterByArray(a,"symbol",t));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>1&&void 0!==s[1]?s[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),e.next=6,this.publicGetTickerId(this.extend({id:n.id},r));case 6:return a=e.sent,e.abrupt("return",this.parseTicker(a,n));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeTimestamp2(e,"timestamp","time_unix");r=this.safeTimestamp(e,"time",r);var i=this.safeString2(e,"tradeID","id"),n=this.safeString2(e,"orderid","orderNumber"),a=this.safeString2(e,"rate","price"),s=this.safeString(e,"amount"),o=this.parseNumber(a),u=this.parseNumber(s),c=this.parseNumber(w.stringMul(a,s)),d=this.safeString(e,"type"),h=this.safeString(e,"role"),l=void 0;void 0!==t&&(l=t.symbol);var f=void 0,p=this.safeCurrencyCode(this.safeString(e,"fee_coin")),v=this.safeNumber(e,"point_fee");return void 0===v||0===v?void 0===(v=this.safeNumber(e,"gt_fee"))||0===v?v=this.safeNumber(e,"fee"):p=this.safeCurrencyCode("GT"):p=this.safeCurrencyCode("POINT"),void 0!==v&&(f={cost:v,currency:p}),{id:i,info:e,timestamp:r,datetime:this.iso8601(r),symbol:l,order:n,type:void 0,side:d,takerOrMaker:h,price:o,amount:u,cost:c,fee:f}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={id:s.id},u=void 0,u="tid"in a?"publicGetTradeHistoryIdTid":"publicGetTradeHistoryId",e.next=11,this[u](this.extend(o,a));case 11:return c=e.sent,e.abrupt("return",this.parseTrades(c.data,s,r,n));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>0&&void 0!==s[0]?s[0]:void 0,t=s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:void 0,n=s.length>3&&void 0!==s[3]?s[3]:{},e.next=6,this.privatePostOpenOrders(n);case 6:return a=e.sent,e.abrupt("return",this.parseOrders(a.orders,void 0,t,r));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return a={orderNumber:t,currencyPair:this.marketId(r)},e.next=7,this.privatePostGetOrder(this.extend(a,n));case 7:return s=e.sent,e.abrupt("return",this.parseOrder(s.order));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({cancelled:"canceled"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString2(e,"orderNumber","id"),i=this.safeString(e,"currencyPair"),n=this.safeSymbol(i,t,"_"),a=this.safeTimestamp2(e,"timestamp","ctime"),s=this.safeTimestamp(e,"mtime"),o=this.parseOrderStatus(this.safeString(e,"status")),u=this.safeString(e,"type");"1"===u?u="sell":"2"===u&&(u="buy");var c=this.safeNumber2(e,"initialRate","rate"),d=this.safeNumber(e,"filledRate"),h=this.safeNumber2(e,"initialAmount","amount"),l=this.safeNumber(e,"filledAmount"),f=this.safeNumber2(e,"leftAmount","left"),p=this.safeNumber(e,"feeValue"),v=this.safeString(e,"feeCurrency"),m=this.safeCurrencyCode(v),g=this.safeNumber(e,"feePercentage");return void 0!==g&&(g/=100),this.safeOrder({id:r,clientOrderId:void 0,datetime:this.iso8601(a),timestamp:a,lastTradeTimestamp:s,status:o,symbol:n,type:"limit",timeInForce:void 0,postOnly:void 0,side:u,price:c,stopPrice:void 0,cost:void 0,amount:h,filled:l,remaining:f,average:d,trades:void 0,fee:{cost:p,currency:m,rate:g},info:e})}},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,u,c,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=l.length>4&&void 0!==l[4]?l[4]:void 0,o=l.length>5&&void 0!==l[5]?l[5]:{},"market"!==r){e.next=4;break}throw new p(this.id+" allows limit orders only");case 4:return e.next=6,this.loadMarkets();case 6:return u="privatePost"+this.capitalize(n),c=this.market(t),d={currencyPair:c.id,rate:s,amount:a},e.next=11,this[u](this.extend(d,o));case 11:return h=e.sent,e.abrupt("return",this.parseOrder(this.extend({status:"open",type:n,initialAmount:a},h),c));case 13:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.length>1&&void 0!==s[1]?s[1]:void 0,n=s.length>2&&void 0!==s[2]?s[2]:{},void 0!==r){e.next=4;break}throw new v(this.id+" cancelOrder() requires symbol argument");case 4:return e.next=6,this.loadMarkets();case 6:return a={orderNumber:t,currencyPair:this.marketId(r)},e.next=9,this.privatePostCancelOrder(this.extend(a,n));case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queryDepositAddress",value:function(){var e=n(i.mark((function e(t,r){var n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=h.length>2&&void 0!==h[2]?h[2]:{},e.next=3,this.loadMarkets();case 3:return a=this.currency(r),t="privatePost"+t+"Address",s={currency:a.id},e.next=8,this[t](this.extend(s,n));case 8:if(o=e.sent,u=this.safeString(o,"addr"),c=void 0,!(void 0!==u&&u.indexOf("address")>=0)){e.next=13;break}throw new m(this.id+" queryDepositAddress "+u);case 13:return"XRP"!==r&&"HBAR"!==r&&"STEEM"!==r&&"XLM"!==r&&"EOS"!==r||(d=u.split(" "),u=d[0],c=d[1]),e.abrupt("return",{currency:r,address:u,tag:c,info:o});case 15:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"createDepositAddress",value:function(){var e=n(i.mark((function e(t){var r,n=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},e.next=3,this.queryDepositAddress("New",t,r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchDepositAddress",value:function(){var e=n(i.mark((function e(t){var r,n=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},e.next=3,this.queryDepositAddress("Deposit",t,r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.loadMarkets();case 6:return s=void 0,void 0!==t&&(s=this.market(t)),e.next=10,this.privatePostOpenOrders(a);case 10:return o=e.sent,e.abrupt("return",this.parseOrders(o.orders,s,r,n));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:void 0,s=d.length>4&&void 0!==d[4]?d[4]:{},void 0!==r){e.next=6;break}throw new v(this.id+" fetchOrderTrades() requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return o=this.market(r),u={currencyPair:o.id,orderNumber:t},e.next=12,this.privatePostTradeHistory(this.extend(u,s));case 12:return c=e.sent,e.abrupt("return",this.parseTrades(c.trades,o,n,a));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=c.length>0&&void 0!==c[0]?c[0]:void 0,r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},void 0!==t){e.next=6;break}throw new v(this.id+" fetchMyTrades() requires symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.market(t),o={currencyPair:s.id},e.next=12,this.privatePostTradeHistory(this.extend(o,a));case 12:return u=e.sent,e.abrupt("return",this.parseTrades(u.trades,s,r,n));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"withdraw",value:function(){var e=n(i.mark((function e(t,r,n){var a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=d.length>3&&void 0!==d[3]?d[3]:void 0,s=d.length>4&&void 0!==d[4]?d[4]:{},this.checkAddress(n),e.next=5,this.loadMarkets();case 5:return o=this.currency(t),u={currency:o.id,amount:r,address:n},void 0!==a&&(u.address+=" "+a),e.next=10,this.privatePostWithdraw(this.extend(u,s));case 10:return c=e.sent,e.abrupt("return",{info:c,id:this.safeString(c,"withdrawid")});case 12:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"fetchTransactionsByType",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:void 0,r=f.length>1&&void 0!==f[1]?f[1]:void 0,n=f.length>2&&void 0!==f[2]?f[2]:void 0,a=f.length>3&&void 0!==f[3]?f[3]:void 0,s=f.length>4&&void 0!==f[4]?f[4]:{},e.next=7,this.loadMarkets();case 7:return o={},void 0!==n&&(o.start=n),e.next=11,this.privatePostDepositsWithdrawals(this.extend(o,s));case 11:return u=e.sent,c=void 0,void 0===t?(d=this.safeValue(u,"deposits",[]),h=this.safeValue(u,"withdraws",[]),c=this.arrayConcat(d,h)):c=this.safeValue(u,t,[]),l=void 0,void 0!==r&&(l=this.currency(r)),e.abrupt("return",this.parseTransactions(c,l,n,a));case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTransactions",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:void 0,n=s.length>2&&void 0!==s[2]?s[2]:void 0,a=s.length>3&&void 0!==s[3]?s[3]:{},e.next=6,this.fetchTransactionsByType(void 0,t,r,n,a);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchDeposits",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:void 0,n=s.length>2&&void 0!==s[2]?s[2]:void 0,a=s.length>3&&void 0!==s[3]?s[3]:{},e.next=6,this.fetchTransactionsByType("deposits",t,r,n,a);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchWithdrawals",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:void 0,n=s.length>2&&void 0!==s[2]?s[2]:void 0,a=s.length>3&&void 0!==s[3]?s[3]:{},e.next=6,this.fetchTransactionsByType("withdraws",t,r,n,a);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"currency"),i=this.safeCurrencyCode(r,t),n=this.safeString(e,"id"),a=this.safeString(e,"txid"),s=this.safeNumber(e,"amount"),o=this.safeString(e,"address");"false"===o&&(o=void 0);var u=this.safeTimestamp(e,"timestamp"),c=this.parseTransactionStatus(this.safeString(e,"status")),d=this.parseTransactionType(n[0]),h=this.safeNumber(e,"fee"),l=void 0;return void 0!==h&&(l={currency:i,cost:h},void 0!==s&&(s-=h)),{info:e,id:n,txid:a,currency:i,amount:s,address:o,tag:void 0,status:c,type:d,timestamp:u,datetime:this.iso8601(u),fee:l}}},{key:"parseTransactionStatus",value:function(e){return this.safeString({PEND:"pending",REQUEST:"pending",DMOVE:"pending",CANCEL:"failed",DONE:"ok"},e,e)}},{key:"parseTransactionType",value:function(e){return this.safeString({d:"deposit",w:"withdrawal"},e,e)}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,u){if(void 0!==s&&"false"===this.safeString(s,"result","")){var c=this.safeString(s,"code"),d=this.safeString(s,"message",a);if(void 0!==c){var h=this.safeString(this.exceptions.errorCodeNames,c,d);this.throwExactlyMatchedException(this.exceptions.exact,c,h)}}}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s="private"===t?t+"/":"",o=this.urls.api[t]+this.version+"/1/"+s+this.implodeParams(e,i),u=this.omit(i,this.extractParams(e));if("public"===t)Object.keys(u).length&&(o+="?"+this.urlencode(u));else{this.checkRequiredCredentials();var c=this.nonce(),d={nonce:c};a=(a=this.rawencode(this.extend(d,u))).replace("+"," ");var h=this.hmac(this.encode(a),this.encode(this.secret),"sha512");n={Key:this.apiKey,Sign:h,"Content-Type":"application/x-www-form-urlencoded"}}return{url:o,method:r,body:a,headers:n}}}]),r}(h)},function(e,t,r){"use strict";var i=r(7),n=r(8),a=r(1),s=r(2),o=r(6),u=r(3),c=r(4),d=r(5),h=r(11),l=r(10),f=l.ExchangeError,p=l.ArgumentsRequired,v=l.BadRequest,m=l.OrderNotFound,g=l.InvalidOrder,y=l.InvalidNonce,b=l.InsufficientFunds,x=l.AuthenticationError,k=l.PermissionDenied,w=l.NotSupported,_=l.OnMaintenance,S=l.RateLimitExceeded,O=l.ExchangeNotAvailable,T=r(18).TICK_SIZE,C=r(12);e.exports=function(e){c(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(u(r.prototype),"describe",this).call(this),{id:"gemini",name:"Gemini",countries:["US"],rateLimit:1500,version:"v1",has:{cancelOrder:!0,CORS:!1,createDepositAddress:!0,createMarketOrder:!1,createOrder:!0,fetchBalance:!0,fetchBidsAsks:!1,fetchClosedOrders:!1,fetchDepositAddress:!1,fetchDeposits:!1,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!1,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,fetchTransactions:!0,fetchWithdrawals:!1,withdraw:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/27816857-ce7be644-6096-11e7-82d6-3c257263229c.jpg",api:{public:"https://api.gemini.com",private:"https://api.gemini.com",web:"https://docs.gemini.com"},www:"https://gemini.com/",doc:["https://docs.gemini.com/rest-api","https://docs.sandbox.gemini.com"],test:{public:"https://api.sandbox.gemini.com",private:"https://api.sandbox.gemini.com",web:"https://docs.gemini.com"},fees:["https://gemini.com/api-fee-schedule","https://gemini.com/trading-fees","https://gemini.com/transfer-fees"]},api:{web:{get:["rest-api"]},public:{get:["v1/symbols","v1/pricefeed","v1/pubticker/{symbol}","v1/book/{symbol}","v1/trades/{symbol}","v1/auction/{symbol}","v1/auction/{symbol}/history","v2/candles/{symbol}/{timeframe}","v2/ticker/{symbol}"]},private:{post:["v1/order/new","v1/order/cancel","v1/order/cancel/session","v1/order/cancel/all","v1/order/status","v1/orders","v1/mytrades","v1/notionalvolume","v1/tradevolume","v1/transfers","v1/balances","v1/deposit/{currency}/newAddress","v1/withdraw/{currency}","v1/heartbeat","v1/transfers"]}},precisionMode:T,fees:{trading:{taker:.0035,maker:.001}},httpExceptions:{400:v,403:k,404:m,406:b,429:S,500:f,502:O,503:_},timeframes:{"1m":"1m","5m":"5m","15m":"15m","30m":"30m","1h":"1hr","6h":"6hr","1d":"1day"},exceptions:{exact:{AuctionNotOpen:v,ClientOrderIdTooLong:v,ClientOrderIdMustBeString:v,ConflictingOptions:v,EndpointMismatch:v,EndpointNotFound:v,IneligibleTiming:v,InsufficientFunds:b,InvalidJson:v,InvalidNonce:y,InvalidOrderType:g,InvalidPrice:g,InvalidQuantity:g,InvalidSide:g,InvalidSignature:x,InvalidSymbol:v,InvalidTimestampInPayload:v,Maintenance:_,MarketNotOpen:g,MissingApikeyHeader:x,MissingOrderField:g,MissingRole:x,MissingPayloadHeader:x,MissingSignatureHeader:x,NoSSL:x,OptionsMustBeArray:v,OrderNotFound:m,RateLimit:S,System:f,UnsupportedOption:v},broad:{"The Gemini Exchange is currently undergoing maintenance.":_,"We are investigating technical issues with the Gemini Exchange.":O}},options:{fetchMarketsMethod:"fetch_markets_from_web",fetchTickerMethod:"fetchTickerV1"}})}},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},r=this.safeValue(this.options,"fetchMarketsMethod","fetch_markets_from_api"),e.next=4,this[r](t);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMarketsFromWeb",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p,v,m,g,y,b,x,k,_,S,O,T,C,I,M,A,E,N=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=N.length>0&&void 0!==N[0]?N[0]:{},e.next=3,this.webGetRestApi(t);case 3:if(r=e.sent,n=r.split('<h1 id="symbols-and-minimums">Symbols and minimums</h1>'),a=n.length,s=this.id+" the "+this.name+" API doc HTML markup has changed, breaking the parser of order limits and precision info for "+this.name+" markets.",2===a){e.next=9;break}throw new w(s);case 9:if(o=n[1].split("tbody>"),!(o.length<2)){e.next=13;break}throw new w(s);case 13:if(u=o[1].split("\n<tr>\n"),!((c=u.length)<2)){e.next=17;break}throw new w(s);case 17:d=[],h=1;case 19:if(!(h<c)){e.next=46;break}if(l=u[h],f=l.split("</td>\n"),!(f.length<5)){e.next=25;break}throw new w(s);case 25:p=f[0].replace("<td>",""),v=f[1].replace("<td>",""),m=v.split(" "),g=this.safeNumber(m,0),y=f[2].replace("<td>",""),b=y.split(" "),x=this.safeNumber(b,0),k=p.length-0,_=p.slice(k-3,k),S=this.safeCurrencyCode(_),O=f[3].replace("<td>",""),T=O.split(" "),C=this.safeNumber(T,0),I=p.replace(_,""),M=this.safeCurrencyCode(I),A=M+"/"+S,E=void 0,d.push({id:p,info:l,symbol:A,base:M,quote:S,baseId:I,quoteId:_,active:E,precision:{amount:x,price:C},limits:{amount:{min:g,max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0}}});case 43:h++,e.next=19;break;case 46:return e.abrupt("return",d);case 47:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMarketsFromAPI",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p,v=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=v.length>0&&void 0!==v[0]?v[0]:{},e.next=3,this.publicGetV1Symbols(t);case 3:for(r=e.sent,n=[],a=0;a<r.length;a++)s=r[a],o=s,u=s.length-0,c=s.slice(0,u-3),d=s.slice(u-3,u),h=this.safeCurrencyCode(c),l=this.safeCurrencyCode(d),f=h+"/"+l,p={amount:void 0,price:void 0},n.push({id:s,info:o,symbol:f,base:h,quote:l,baseId:c,quoteId:d,precision:p,limits:{amount:{min:void 0,max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0}},active:void 0});return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return a={symbol:this.marketId(t)},void 0!==r&&(a.limit_bids=r,a.limit_asks=r),e.next=8,this.publicGetV1BookSymbol(this.extend(a,n));case 8:return s=e.sent,e.abrupt("return",this.parseOrderBook(s,void 0,"bids","asks","price","amount"));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTickerV1",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={symbol:n.id},e.next=7,this.publicGetV1PubtickerSymbol(this.extend(a,r));case 7:return s=e.sent,e.abrupt("return",this.parseTicker(s,n));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTickerV2",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={symbol:n.id},e.next=7,this.publicGetV2TickerSymbol(this.extend(a,r));case 7:return s=e.sent,e.abrupt("return",this.parseTicker(s,n));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTickerV1AndV2",value:function(){var e=n(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>1&&void 0!==s[1]?s[1]:{},e.next=3,this.fetchTickerV1(t,r);case 3:return n=e.sent,e.next=6,this.fetchTickerV2(t,r);case 6:return a=e.sent,e.abrupt("return",this.deepExtend(n,{open:a.open,high:a.high,low:a.low,change:a.change,percentage:a.percentage,average:a.average,info:a.info}));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:{},n=this.safeValue(this.options,"fetchTickerMethod","fetchTickerV1"),e.next=4,this[n](t,r);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeValue(e,"volume",{}),i=this.safeInteger(r,"timestamp"),n=void 0,a=this.safeString(e,"pair"),s=void 0,o=void 0;if(void 0!==a)if(a in this.markets_by_id)t=this.markets_by_id[a];else{var u=a.length-0;7===u?(s=a.slice(0,4),o=a.slice(4,7)):(s=a.slice(0,3),o=a.slice(3,6)),n=this.safeCurrencyCode(s)+"/"+this.safeCurrencyCode(o)}void 0===n&&void 0!==t&&(n=t.symbol,s=t.baseId.toUpperCase(),o=t.quoteId.toUpperCase(),t.base,t.quote);var c=this.safeNumber(e,"price"),d=this.safeNumber2(e,"last","close",c),h=this.safeNumber(e,"percentChange24h"),l=void 0,f=this.safeNumber(e,"open"),p=void 0;void 0!==d&&(void 0!==f?(l=d-f,0!==f&&(h=l/f*100),p=this.sum(d,f)/2):void 0!==h&&(l=d*h,void 0===f&&(f=d-l),p=this.sum(d,f)/2));var v=this.safeNumber(r,s),m=this.safeNumber(r,o),g=this.vwap(v,m);return{symbol:n,timestamp:i,datetime:this.iso8601(i),high:this.safeNumber(e,"high"),low:this.safeNumber(e,"low"),bid:this.safeNumber(e,"bid"),bidVolume:void 0,ask:this.safeNumber(e,"ask"),askVolume:void 0,vwap:g,open:f,close:d,last:d,previousClose:void 0,change:l,percentage:h,average:p,baseVolume:v,quoteVolume:m,info:e}}},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:void 0,r=a.length>1&&void 0!==a[1]?a[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetV1Pricefeed(r);case 6:return n=e.sent,e.abrupt("return",this.parseTickers(n,t));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeInteger(e,"timestampms"),i=this.safeString(e,"tid"),n=this.safeString(e,"order_id"),a=this.safeString(e,"fee_currency"),s=this.safeCurrencyCode(a),o={cost:this.safeNumber(e,"fee_amount"),currency:s},u=this.safeString(e,"price"),c=this.safeString(e,"amount"),d=this.parseNumber(u),h=this.parseNumber(c),l=this.parseNumber(C.stringMul(u,c)),f=void 0,p=this.safeStringLower(e,"type"),v=this.safeSymbol(void 0,t);return{id:i,order:n,info:e,timestamp:r,datetime:this.iso8601(r),symbol:v,type:f,side:p,takerOrMaker:void 0,price:d,cost:l,amount:h,fee:o}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={symbol:s.id},e.next=9,this.publicGetV1TradesSymbol(this.extend(o,a));case 9:return u=e.sent,e.abrupt("return",this.parseTrades(u,s,r,n));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privatePostV1Balances(t);case 5:for(r=e.sent,n={info:r},a=0;a<r.length;a++)s=r[a],o=this.safeString(s,"currency"),u=this.safeCurrencyCode(o),(c=this.account()).free=this.safeString(s,"available"),c.total=this.safeString(s,"amount"),n[u]=c;return e.abrupt("return",this.parseBalance(n,!1));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeInteger(e,"timestampms"),i=this.safeNumber(e,"original_amount"),n=this.safeNumber(e,"remaining_amount"),a=this.safeNumber(e,"executed_amount"),s="closed";e.is_live&&(s="open"),e.is_cancelled&&(s="canceled");var o=this.safeNumber(e,"price"),u=this.safeNumber(e,"avg_execution_price"),c=this.safeString(e,"type");c="exchange limit"===c?"limit":"market buy"===c||"market sell"===c?"market":e.type;var d=void 0,h=this.safeString(e,"symbol"),l=this.safeSymbol(h,t),f=this.safeString(e,"order_id"),p=this.safeStringLower(e,"side"),v=this.safeString(e,"client_order_id");return this.safeOrder({id:f,clientOrderId:v,info:e,timestamp:r,datetime:this.iso8601(r),lastTradeTimestamp:void 0,status:s,symbol:l,type:c,timeInForce:void 0,postOnly:void 0,side:p,price:o,stopPrice:void 0,average:u,cost:void 0,amount:i,filled:a,remaining:n,fee:d,trades:void 0})}},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.loadMarkets();case 4:return n={order_id:t},e.next=7,this.privatePostV1OrderStatus(this.extend(n,r));case 7:return a=e.sent,e.abrupt("return",this.parseOrder(a));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.loadMarkets();case 6:return e.next=8,this.privatePostV1Orders(a);case 8:return s=e.sent,o=void 0,void 0!==t&&(o=this.market(t)),e.abrupt("return",this.parseOrders(s,o,r,n));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=h.length>4&&void 0!==h[4]?h[4]:void 0,o=h.length>5&&void 0!==h[5]?h[5]:{},e.next=4,this.loadMarkets();case 4:if("market"!==r){e.next=6;break}throw new f(this.id+" allows limit orders only");case 6:return u=this.nonce(),c={client_order_id:u.toString(),symbol:this.marketId(t),amount:a.toString(),price:s.toString(),side:n,type:"exchange limit"},e.next=10,this.privatePostV1OrderNew(this.extend(c,o));case 10:return d=e.sent,e.abrupt("return",{info:d,id:d.order_id});case 12:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:{},e.next=4,this.loadMarkets();case 4:return n={order_id:t},e.next=7,this.privatePostV1OrderCancel(this.extend(n,r));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=c.length>0&&void 0!==c[0]?c[0]:void 0,r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},void 0!==t){e.next=6;break}throw new p(this.id+" fetchMyTrades() requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.market(t),o={symbol:s.id},void 0!==n&&(o.limit_trades=n),void 0!==r&&(o.timestamp=parseInt(r/1e3)),e.next=14,this.privatePostV1Mytrades(this.extend(o,a));case 14:return u=e.sent,e.abrupt("return",this.parseTrades(u,s,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"withdraw",value:function(){var e=n(i.mark((function e(t,r,n){var a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.length>3&&void 0!==c[3]?c[3]:void 0,a=c.length>4&&void 0!==c[4]?c[4]:{},this.checkAddress(n),e.next=5,this.loadMarkets();case 5:return s=this.currency(t),o={currency:s.id,amount:r,address:n},e.next=9,this.privatePostV1WithdrawCurrency(this.extend(o,a));case 9:return u=e.sent,e.abrupt("return",{info:u,id:this.safeString(u,"txHash")});case 11:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"nonce",value:function(){return this.milliseconds()}},{key:"fetchTransactions",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.length>0&&void 0!==o[0]?o[0]:void 0,t=o.length>1&&void 0!==o[1]?o[1]:void 0,r=o.length>2&&void 0!==o[2]?o[2]:void 0,n=o.length>3&&void 0!==o[3]?o[3]:{},e.next=6,this.loadMarkets();case 6:return a={},void 0!==r&&(a.limit_transfers=r),void 0!==t&&(a.timestamp=t),e.next=11,this.privatePostV1Transfers(this.extend(a,n));case 11:return s=e.sent,e.abrupt("return",this.parseTransactions(s));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeInteger(e,"timestampms"),i=this.safeString(e,"currency"),n=this.safeCurrencyCode(i,t),a=this.safeString(e,"destination"),s=this.safeStringLower(e,"type"),o="pending";e.status&&(o="ok");var u=void 0,c=this.safeNumber(e,"feeAmount");return void 0!==c&&(u={cost:c,currency:n}),{info:e,id:this.safeString(e,"eid"),txid:this.safeString(e,"txHash"),timestamp:r,datetime:this.iso8601(r),address:a,tag:void 0,type:s,amount:this.safeNumber(e,"amount"),currency:n,status:o,updated:void 0,fee:u}}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s="/"+this.implodeParams(e,i),o=this.omit(i,this.extractParams(e));if("private"===t){this.checkRequiredCredentials();var u=this.nonce(),c=this.extend({request:s,nonce:u},o),d=this.json(c);d=this.stringToBase64(d);var h=this.hmac(d,this.encode(this.secret),"sha384");n={"Content-Type":"text/plain","X-GEMINI-APIKEY":this.apiKey,"X-GEMINI-PAYLOAD":this.decode(d),"X-GEMINI-SIGNATURE":h}}else Object.keys(o).length&&(s+="?"+this.urlencode(o));return{url:s=this.urls.api[t]+s,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,u){if(void 0!==s){if("error"===this.safeString(s,"result")){var c=this.safeString(s,"reason"),d=this.safeString(s,"message"),h=this.id+" "+d;throw this.throwExactlyMatchedException(this.exceptions.exact,c,h),this.throwExactlyMatchedException(this.exceptions.exact,d,h),this.throwBroadlyMatchedException(this.exceptions.broad,d,h),new f(h)}}else if("string"===typeof a){var l=this.id+" "+a;this.throwBroadlyMatchedException(this.exceptions.broad,a,l)}}},{key:"createDepositAddress",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.currency(t),a={currency:n.id},e.next=7,this.privatePostV1DepositCurrencyNewAddress(this.extend(a,r));case 7:return s=e.sent,o=this.safeString(s,"address"),this.checkAddress(o),e.abrupt("return",{currency:t,address:o,tag:void 0,info:s});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:"5m",n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:void 0,s=d.length>4&&void 0!==d[4]?d[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),u={timeframe:this.timeframes[r],symbol:o.id},e.next=10,this.publicGetV2CandlesSymbolTimeframe(this.extend(u,s));case 10:return c=e.sent,e.abrupt("return",this.parseOHLCVs(c,o,r,n,a));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(h)},function(e,t,r){"use strict";var i=r(7),n=r(8),a=r(1),s=r(2),o=r(6),u=r(3),c=r(4),d=r(5),h=r(11),l=r(10),f=l.ExchangeError,p=l.InvalidOrder,v=l.AuthenticationError,m=l.InsufficientFunds,g=l.BadSymbol,y=l.OrderNotFound,b=l.InvalidAddress,x=l.BadRequest,k=r(18).TRUNCATE,w=r(12);e.exports=function(e){c(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(u(r.prototype),"describe",this).call(this),{id:"gopax",name:"GOPAX",countries:["KR"],version:"v1",rateLimit:50,hostname:"gopax.co.kr",certified:!0,pro:!0,has:{cancelOrder:!0,createMarketOrder:!0,createOrder:!0,fetchBalance:!0,fetchCurrencies:!0,fetchDepositAddress:"emulated",fetchDepositAddresses:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchTicker:!0,fetchTickers:!0,fetchTime:!0,fetchTrades:!0,fetchTransactions:!0},timeframes:{"1m":"1","5m":"5","30m":"30","1d":"1440"},urls:{logo:"https://user-images.githubusercontent.com/1294454/102897212-ae8a5e00-4478-11eb-9bab-91507c643900.jpg",api:{public:"https://api.{hostname}",private:"https://api.{hostname}"},www:"https://www.gopax.co.kr",doc:"https://gopax.github.io/API/index.en.html",fees:"https://www.gopax.com/feeinfo"},api:{public:{get:["notices","assets","price-tick-size","trading-pairs","trading-pairs/{tradingPair}/ticker","trading-pairs/{tradingPair}/book","trading-pairs/{tradingPair}/trades","trading-pairs/{tradingPair}/stats","trading-pairs/{tradingPair}/price-tick-size","trading-pairs/stats","trading-pairs/{tradingPair}/candles","time"]},private:{get:["balances","balances/{assetName}","orders","orders/{orderId}","orders/clientOrderId/{clientOrderId}","trades","deposit-withdrawal-status","crypto-deposit-addresses","crypto-withdrawal-addresses"],post:["orders"],delete:["orders/{orderId}","orders/clientOrderId/{clientOrderId}"]}},fees:{trading:{percentage:!0,tierBased:!1,maker:4e-4,taker:4e-4}},exceptions:{broad:{ERROR_INVALID_ORDER_TYPE:p,ERROR_INVALID_AMOUNT:p,ERROR_INVALID_TRADING_PAIR:g,"No such order ID":y,"Forbidden order type":p,"the client order ID will be reusable which order has already been completed or canceled":p,ERROR_NO_SUCH_TRADING_PAIR:g,ERROR_INVALID_ORDER_SIDE:p,ERROR_NOT_HEDGE_TOKEN_USER:p,ORDER_EVENT_ERROR_NOT_ALLOWED_BID_ORDER:p,ORDER_EVENT_ERROR_INSUFFICIENT_BALANCE:m,"Invalid option combination":p,"No such client order ID":y},exact:{100:g,101:g,103:p,104:g,105:g,106:g,107:p,108:p,111:p,201:m,202:p,203:p,204:p,205:p,206:p,10004:v,10041:x,10056:x,10057:g,10059:g,10062:x,10069:y,10155:v,10166:x,10212:p,10221:y,10222:p,10223:p,10227:p,10319:x,10358:p,10359:p,10360:p,10361:p,10362:p,10363:p}},options:{createMarketBuyOrderRequiresPrice:!0}})}},{key:"fetchTime",value:function(){var e=n(i.mark((function e(){var t,r,n=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},e.next=3,this.publicGetTime(t);case 3:return r=e.sent,e.abrupt("return",this.safeInteger(r,"serverTime"));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p,v,m,g,y,b,x,k,_=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=_.length>0&&void 0!==_[0]?_[0]:{},e.next=3,this.publicGetTradingPairs(t);case 3:for(r=e.sent,n=[],a=0;a<r.length;a++)s=r[a],o=this.safeString(s,"name"),u=this.safeInteger(s,"id"),c=this.safeString(s,"baseAsset"),d=this.safeString(s,"quoteAsset"),h=this.safeCurrencyCode(c),l=this.safeCurrencyCode(d),f=h+"/"+l,p={price:this.safeInteger(s,"quoteAssetScale"),amount:this.safeInteger(s,"baseAssetScale")},v=this.safeValue(s,"restApiOrderAmountMin",{}),m=this.safeValue(v,"marketAsk",{}),g=this.safeValue(v,"marketBid",{}),y=this.safeString(s,"takerFeePercent"),b=this.safeString(s,"makerFeePercent"),x=this.parseNumber(w.stringDiv(y,"100")),k=this.parseNumber(w.stringDiv(b,"100")),n.push({id:o,info:s,numericId:u,symbol:f,base:h,quote:l,baseId:this.safeString(s,"baseAsset"),quoteId:this.safeString(s,"quoteAsset"),active:!0,taker:x,maker:k,precision:p,limits:{amount:{min:this.safeNumber(m,"amount"),max:void 0},price:{min:this.safeNumber(s,"priceMin"),max:void 0},cost:{min:this.safeNumber(g,"amount"),max:void 0}}});return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchCurrencies",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:{},e.next=3,this.publicGetAssets(t);case 3:for(r=e.sent,n={},a=0;a<r.length;a++)s=r[a],o=this.safeString(s,"id"),u=this.safeCurrencyCode(o),c=this.safeString(s,"name"),d=this.safeNumber(s,"withdrawalFee"),h=this.safeNumber(s,"scale"),n[u]={id:o,info:s,code:u,name:c,active:!0,fee:d,precision:h,limits:{amount:{min:void 0,max:void 0},withdraw:{min:this.safeNumber(s,"withdrawalAmountMin"),max:void 0}}};return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.length>1&&void 0!==c[1]?c[1]:void 0,r=c.length>2&&void 0!==c[2]?c[2]:{},e.next=4,this.loadMarkets();case 4:return n=this.market(t),a={tradingPair:n.id},e.next=8,this.publicGetTradingPairsTradingPairBook(this.extend(a,r));case 8:return s=e.sent,o=this.safeInteger(s,"sequence"),(u=this.parseOrderBook(s,void 0,"bid","ask",1,2)).nonce=o,e.abrupt("return",u);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"name"),i=this.safeSymbol(r,t,"-"),n=this.parse8601(this.safeString(e,"time")),a=this.safeNumber(e,"open"),s=this.safeNumber2(e,"price","close"),o=void 0,u=void 0,c=void 0;void 0!==s&&void 0!==a&&(c=this.sum(s,a)/2,o=s-a,a>0&&(u=o/a*100));var d=this.safeNumber(e,"volume"),h=this.safeNumber(e,"quoteVolume"),l=this.vwap(d,h);return{symbol:i,info:e,timestamp:n,datetime:this.iso8601(n),high:this.safeNumber(e,"high"),low:this.safeNumber(e,"low"),bid:this.safeNumber(e,"bid"),bidVolume:this.safeNumber(e,"bidVolume"),ask:this.safeNumber(e,"ask"),askVolume:this.safeNumber(e,"askVolume"),vwap:l,open:a,close:s,last:s,previousClose:void 0,change:o,percentage:u,average:c,baseVolume:d,quoteVolume:h}}},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={tradingPair:n.id},e.next=7,this.publicGetTradingPairsTradingPairTicker(this.extend(a,r));case 7:return s=e.sent,e.abrupt("return",this.parseTicker(s,n));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:void 0,r=a.length>1&&void 0!==a[1]?a[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetTradingPairsStats(r);case 6:return n=e.sent,e.abrupt("return",this.parseTickers(n,t));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parsePublicTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.parse8601(this.safeString(e,"time")),i=this.safeNumber(e,"price"),n=this.safeNumber(e,"amount"),a=void 0;return"symbol"in t&&(a=this.safeString(t,"symbol")),{info:e,id:this.safeString(e,"id"),timestamp:r,datetime:this.iso8601(r),symbol:a,order:void 0,type:void 0,side:this.safeString(e,"side"),takerOrMaker:void 0,price:i,amount:n,cost:i*n,fee:void 0}}},{key:"parsePrivateTrade",value:function(e){var t=this.parse8601(this.safeString(e,"timestamp")),r=this.safeString(e,"tradingPairName").replace("-","/"),i=this.safeString(e,"side"),n=this.safeNumber(e,"price"),a=this.safeNumber(e,"baseAmount"),s=r.slice(0,3);"sell"===i&&(s=r.slice(4));var o={cost:this.safeNumber(e,"fee"),currency:s,rate:void 0};return{info:e,id:this.safeString(e,"id"),timestamp:t,datetime:this.iso8601(t),symbol:r,order:this.safeInteger(e,"orderId"),type:void 0,side:i,takerOrMaker:this.safeString(e,"position"),price:n,amount:a,cost:n*a,fee:o}}},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString2(e,"id","tradeId"),i=this.safeInteger(e,"orderId"),n=this.parse8601(this.safeString2(e,"time","timestamp"));n=this.safeTimestamp(e,"occuredAt",n);var a=this.safeString(e,"tradingPairName"),s=(t=this.safeMarket(a,t,"-")).symbol,o=this.safeString(e,"side");"1"===o?o="buy":"2"===o&&(o="sell");var u=this.safeString(e,"type");"1"===u?u="limit":"2"===u&&(u="market");var c=this.safeString(e,"price"),d=this.safeString2(e,"amount","baseAmount"),h=this.parseNumber(c),l=this.parseNumber(d),f=this.safeNumber(e,"quoteAmount");void 0===f&&(f=this.parseNumber(w.stringMul(c,d)));var p=this.safeNumber(e,"fee"),v=void 0;void 0!==p&&(v={cost:p,currency:t.base});var m=this.safeString(e,"position");return{info:e,id:r,timestamp:n,datetime:this.iso8601(n),symbol:s,order:i,type:void 0,side:o,takerOrMaker:m,price:h,amount:l,cost:f,fee:v}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={tradingPair:s.id},void 0!==r&&(o.after=parseInt(r/1e3)),void 0!==n&&(o.limit=n),e.next=11,this.publicGetTradingPairsTradingPairTrades(this.extend(o,a));case 11:return u=e.sent,e.abrupt("return",this.parseTrades(u,s,r,n));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){return[this.safeInteger(e,0),this.safeNumber(e,3),this.safeNumber(e,2),this.safeNumber(e,1),this.safeNumber(e,4),this.safeNumber(e,5)]}},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>1&&void 0!==l[1]?l[1]:"1m",n=l.length>2&&void 0!==l[2]?l[2]:void 0,a=l.length>3&&void 0!==l[3]?l[3]:void 0,s=l.length>4&&void 0!==l[4]?l[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),a=void 0===a?1024:a,u={tradingPair:o.id,interval:this.timeframes[r]},c=this.parseTimeframe(r),void 0===n?(d=this.milliseconds(),u.end=d,u.start=d-a*c*1e3):(u.start=n,u.end=this.sum(n,a*c*1e3)),e.next=13,this.publicGetTradingPairsTradingPairCandles(this.extend(u,s));case 13:return h=e.sent,e.abrupt("return",this.parseOHLCVs(h,o,r,n,a));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseBalanceResponse",value:function(e){for(var t={info:e},r=0;r<e.length;r++){var i=e[r],n=this.safeString2(i,"asset","isoAlpha3"),a=this.safeCurrencyCode(n),s=this.safeString(i,"hold"),o=this.safeString(i,"pendingWithdrawal"),u=this.account();u.free=this.safeString(i,"avail"),u.used=w.stringAdd(s,o),t[a]=u}return this.parseBalance(t,!1)}},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetBalances(t);case 5:return r=e.sent,e.abrupt("return",this.parseBalanceResponse(r));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({placed:"open",cancelled:"canceled",completed:"closed",updated:"open",reserved:"open"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),i=this.safeString(e,"clientOrderId"),n=this.parse8601(this.safeString(e,"createdAt")),a=this.safeString(e,"type"),s=this.safeString(e,"side"),o=this.safeStringUpper(e,"timeInForce"),u=this.safeNumber(e,"price"),c=this.safeNumber(e,"amount"),d=this.safeNumber(e,"stopPrice"),h=this.safeNumber(e,"remaining"),l=this.safeString(e,"tradingPairName");t=this.safeMarket(l,t,"-");var f=this.parseOrderStatus(this.safeString(e,"status")),p=this.safeValue(e,"balanceChange",{}),v=this.safeNumber(p,"baseNet"),m=this.safeNumber(p,"quoteNet");void 0!==m&&(m=Math.abs(m));var g=void 0;void 0!==v&&v>0&&(g=this.parse8601(this.safeString(e,"updatedAt")));var y=void 0;if("buy"===s){var b=this.safeValue(p,"baseFee",{}),x=this.safeNumber(b,"taking"),k=this.safeNumber(b,"making");y={currency:t.base,cost:this.sum(x,k)}}else{var w=this.safeValue(p,"quoteFee",{}),_=this.safeNumber(w,"taking"),S=this.safeNumber(w,"making");y={currency:t.quote,cost:this.sum(_,S)}}var O=void 0;return void 0!==o&&(O="PO"===o),this.safeOrder({id:r,clientOrderId:i,datetime:this.iso8601(n),timestamp:n,lastTradeTimestamp:g,status:f,symbol:t.symbol,type:a,timeInForce:o,postOnly:O,side:s,price:u,stopPrice:d,average:void 0,amount:c,filled:v,remaining:h,cost:m,trades:void 0,fee:y,info:e})}},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u.length>1&&void 0!==u[1]?u[1]:void 0,r=u.length>2&&void 0!==u[2]?u[2]:{},e.next=4,this.loadMarkets();case 4:return n=void 0,a=this.safeString(r,"clientOrderId"),r=this.omit(r,"clientOrderId"),s={},void 0===a?(n="privateGetOrdersOrderId",s.orderId=t):(n="privateGetOrdersClientOrderIdClientOrderId",s.clientOrderId=a),e.next=11,this[n](this.extend(s,r));case 11:return o=e.sent,e.abrupt("return",this.parseOrder(o));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:void 0,r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},e.next=6,this.loadMarkets();case 6:return s={includePast:"true"},o=void 0,void 0!==t&&(o=this.market(t)),e.next=11,this.privateGetOrders(this.extend(s,a));case 11:return u=e.sent,e.abrupt("return",this.parseOrders(u,o,r,n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:void 0,a=o.length>3&&void 0!==o[3]?o[3]:{},s={includePast:"false"},e.next=7,this.fetchOrders(t,r,n,this.extend(s,a));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,u,c,d,h,l,f,v,m,g=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=g.length>4&&void 0!==g[4]?g[4]:void 0,o=g.length>5&&void 0!==g[5]?g[5]:{},e.next=4,this.loadMarkets();case 4:if(u=this.market(t),c={tradingPairName:u.id,side:n,type:r},"limit"!==r){e.next=11;break}c.price=this.priceToPrecision(t,s),c.amount=this.amountToPrecision(t,a),e.next=24;break;case 11:if("market"!==r){e.next=24;break}if("buy"!==n){e.next=23;break}if(d=a,!this.safeValue(this.options,"createMarketBuyOrderRequiresPrice",!0)){e.next=19;break}if(void 0!==s){e.next=18;break}throw new p(this.id+" createOrder() requires the price argument with market buy orders to calculate total order cost (amount to spend), where cost = amount * price. Supply a price argument to createOrder() call if you want the cost to be calculated for you from price and amount, or, alternatively, add .options['createMarketBuyOrderRequiresPrice'] = false and supply the total cost value in the 'amount' argument");case 18:d=s*a;case 19:h=u.precision.price,c.amount=this.decimalToPrecision(d,k,h,this.precisionMode),e.next=24;break;case 23:c.amount=this.amountToPrecision(t,a);case 24:return void 0!==(l=this.safeString(o,"clientOrderId"))&&(c.clientOrderId=l,o=this.omit(o,"clientOrderId")),void 0!==(f=this.safeNumber(o,"stopPrice"))&&(c.stopPrice=this.priceToPrecision(t,f),o=this.omit(o,"stopPrice")),void 0!==(v=this.safeStringLower(o,"timeInForce"))&&(c.timeInForce=v,o=this.omit(o,"timeInForce")),e.next=32,this.privatePostOrders(this.extend(c,o));case 32:return m=e.sent,e.abrupt("return",this.parseOrder(m,u));case 34:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.length>1&&void 0!==c[1]?c[1]:void 0,r=c.length>2&&void 0!==c[2]?c[2]:{},e.next=4,this.loadMarkets();case 4:return n={},a=this.safeString(r,"clientOrderId"),s=void 0,void 0===a?(s="privateDeleteOrdersOrderId",n.orderId=t):(s="privateDeleteOrdersClientOrderIdClientOrderId",n.clientOrderId=a,r=this.omit(r,"clientOrderId")),e.next=10,this[s](this.extend(n,r));case 10:return o=e.sent,u=this.parseOrder(o),e.abrupt("return",this.extend(u,{id:t}));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:void 0,r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},e.next=6,this.loadMarkets();case 6:return s={deepSearch:"true"},void 0!==r&&(s.after=parseInt(r/1e3)),void 0!==n&&(s.limit=n),e.next=11,this.privateGetTrades(this.extend(s,a));case 11:return o=e.sent,u=void 0,void 0!==t&&(u=this.market(t)),e.abrupt("return",this.parseTrades(o,u,r,n));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseDepositAddress",value:function(e){var t=this.safeString(e,"address"),r=this.safeString(e,"memoId"),i=this.safeString(e,"asset"),n=this.safeCurrencyCode(i);return this.checkAddress(t),{currency:n,address:t,tag:r,info:e}}},{key:"fetchDepositAddresses",value:function(){var e=n(i.mark((function e(){var t,r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:void 0,r=a.length>1&&void 0!==a[1]?a[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.privateGetCryptoDepositAddresses(r);case 6:return n=e.sent,e.abrupt("return",this.parseDepositAddresses(n,t));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchDepositAddress",value:function(){var e=n(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>1&&void 0!==s[1]?s[1]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.fetchDepositAddresses(void 0,r);case 5:if(n=e.sent,void 0!==(a=this.safeValue(n,t))){e.next=9;break}throw new b(this.id+" fetchDepositAddress() "+t+" address not found");case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTransactionStatus",value:function(e){return this.safeString({reviewing:"pending",rejected:"rejected",processing:"pending",failed:"failed",completed:"ok"},e,e)}},{key:"parseTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),i=this.safeString(e,"txId"),n=this.safeString(e,"asset"),a=this.safeCurrencyCode(n,t),s=this.safeString(e,"type");"crypto_withdrawal"===s||"fiat_withdrawal"===s?s="withdrawal":"crypto_deposit"!==s&&"fiat_deposit"!==s||(s="deposit");var o=this.safeNumber(e,"netAmount"),u=this.safeNumber(e,"feeAmount"),c=void 0;void 0!==u&&(c={cost:u,currency:a});var d=this.safeTimestamp(e,"reviewStartedAt"),h=this.safeTimestamp(e,"completedAt"),l=this.safeString(e,"sourceAddress"),f=this.safeString(e,"destinationAddress"),p=this.safeString(e,"sourceMemoId"),v=this.safeString(e,"destinationMemoId"),m=this.parseTransactionStatus(this.safeString(e,"status"));return{info:e,id:r,txid:i,timestamp:d,datetime:this.iso8601(d),addressFrom:l,address:f,addressTo:f,tagFrom:p,tag:v,tagTo:v,type:s,amount:o,currency:a,status:m,updated:h,comment:void 0,fee:c}}},{key:"fetchTransactions",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:void 0,r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},e.next=6,this.loadMarkets();case 6:return s={},void 0!==r&&(s.before=r),void 0!==n&&(s.limit=n),e.next=11,this.privateGetDepositWithdrawalStatus(this.extend(s,a));case 11:return o=e.sent,u=void 0,void 0!==t&&(u=this.currency(t)),e.abrupt("return",this.parseTransactions(o,u,r,n,a));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"nonce",value:function(){return this.milliseconds()}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s="/"+this.implodeParams(e,i),o=this.implodeParams(this.urls.api[t],{hostname:this.hostname})+s,u=this.omit(i,this.extractParams(e));if("public"===t)Object.keys(u).length&&(o+="?"+this.urlencode(u));else if("private"===t){this.checkRequiredCredentials();var c=this.nonce().toString(),d="t"+c+r+s;if(n={"api-key":this.apiKey,timestamp:c},"POST"===r)n["Content-Type"]="application/json",d+=a=this.json(i);else if("/orders"===s){if(Object.keys(u).length){var h="?"+this.urlencode(u);d+=h,o+=h}}else"GET"===r&&Object.keys(u).length&&(o+="?"+this.urlencode(u));var l=this.base64ToBinary(this.secret),f=this.hmac(this.encode(d),l,"sha512","base64");n.signature=f}return{url:o,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,u){if(void 0!==s&&!Array.isArray(s)){var c=this.safeString(s,"errorCode"),d=this.safeString(s,"errorMessage"),h=this.id+" "+a;if(void 0!==d&&this.throwBroadlyMatchedException(this.exceptions.broad,a,h),void 0!==c&&this.throwExactlyMatchedException(this.exceptions.exact,c,h),void 0!==c||void 0!==d)throw new f(h)}}}]),r}(h)},function(e,t,r){"use strict";var i=r(7),n=r(8),a=r(1),s=r(2),o=r(6),u=r(3),c=r(4),d=r(5),h=r(11),l=r(10),f=l.AuthenticationError,p=l.ExchangeError,v=l.OrderNotFound,m=l.ArgumentsRequired,g=l.BadSymbol,y=l.BadRequest,b=l.NullResponse,x=l.InvalidOrder,k=l.BadResponse,w=l.NotSupported,_=l.ExchangeNotAvailable,S=l.RequestTimeout,O=l.RateLimitExceeded,T=l.PermissionDenied,C=l.InsufficientFunds,I=l.InvalidAddress,M=r(18),A=M.TICK_SIZE,E=M.TRUNCATE,N=r(12);e.exports=function(e){c(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(u(r.prototype),"describe",this).call(this),{id:"hbtc",name:"HBTC",countries:["CN"],rateLimit:2e3,version:"v1",has:{cancelOrder:!0,CORS:!1,createOrder:!0,fetchAccounts:!0,fetchBalance:!0,fetchBidAsk:!0,fetchBidsAsks:!0,fetchClosedOrders:!0,fetchCurrencies:!1,fetchDepositAddress:!1,fetchDeposits:!0,fetchLedger:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!1,fetchTicker:!0,fetchTickers:!0,fetchTime:!0,fetchTrades:!0,fetchTradingLimits:!0,fetchWithdrawals:!0,withdraw:!0},timeframes:{"1m":"1m","3m":"3m","5m":"5m","15m":"15m","30m":"30m","1h":"1h","2h":"2h","4h":"4h","6h":"6h","8h":"8h","12h":"12h","1d":"1d","3d":"3d","1w":"1w","1M":"1M"},urls:{logo:"https://user-images.githubusercontent.com/51840849/80134449-70663300-85a7-11ea-8942-e204cdeaab5d.jpg",api:{quote:"https://api.hbtc.com/openapi/quote",contract:"https://api.hbtc.com/openapi/contract",option:"https://api.hbtc.com/openapi/option",public:"https://api.hbtc.com/openapi",private:"https://api.hbtc.com/openapi",zendesk:"https://hbtc.zendesk.com/hc/en-us"},www:"https://www.hbtc.com",referral:"https://www.hbtc.com/register/O2S8NS",doc:"https://github.com/bhexopen/BHEX-OpenApi/tree/master/doc",fees:"https://hbtc.zendesk.com/hc/zh-cn/articles/360009274694"},api:{public:{get:["ping","time","brokerInfo","getOptions"]},quote:{get:["depth","depth/merged","trades","klines","ticker/24hr","ticker/price","ticker/bookTicker","contract/index","contract/depth","contract/depth/merged","contract/trades","contract/klines","contract/ticker/24hr","option/index","option/depth","option/depth/merged","option/trades","option/klines","option/ticker/24hr"]},contract:{get:["insurance","fundingRate","openOrders","historyOrders","getOrder","myTrades","positions","account"],post:["order","modifyMargin"],delete:["order/cancel","order/batchCancel"]},option:{get:["openOrders","positions","historyOrders","myTrades","settlements","account"],post:["order"],delete:["order/cancel"]},private:{get:["order","openOrders","historyOrders","account","myTrades","depositOrders","withdrawalOrders","withdraw/detail","balance_flow"],post:["order","order/test","userDataStream","subAccount/query","transfer","user/transfer","withdraw"],put:["userDataStream"],delete:["order","userDataStream"]}},precisionMode:A,fees:{trading:{tierBased:!1,percentage:!0,maker:.001,taker:.001}},exceptions:{exact:{"-1000":p,"-1001":p,"-1002":f,"-1003":O,"-1004":y,"-1005":T,"-1006":k,"-1007":S,"-1014":x,"-1015":O,"-1016":_,"-1020":w,"-1021":y,"-1022":f,"-1100":y,"-1101":y,"-1102":y,"-1103":y,"-1104":y,"-1105":y,"-1106":y,"-1111":y,"-1112":b,"-1114":x,"-1115":x,"-1116":x,"-1117":x,"-1118":x,"-1119":x,"-1120":y,"-1121":g,"-1125":f,"-1127":y,"-1128":y,"-1130":y,"-1131":C,"-1132":x,"-1133":x,"-1134":x,"-1135":x,"-1136":x,"-1137":x,"-1138":x,"-1139":x,"-1140":x,"-1141":x,"-1142":x,"-1143":v,"-1144":x,"-1145":x,"-1146":S,"-1147":S,"-1149":x,"-1187":I,"-2010":x,"-2011":x,"-2013":v,"-2014":f,"-2015":f,"-2016":p}},options:{fetchTickers:{method:"quoteGetTicker24hr"}},commonCurrencies:{MIS:"Themis Protocol"}})}},{key:"fetchTime",value:function(){var e=n(i.mark((function e(){var t,r,n=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},e.next=3,this.publicGetTime(t);case 3:return r=e.sent,e.abrupt("return",this.safeInteger(r,"serverTime"));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseMarket",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"spot",r=this.safeValue(e,"filters",[]),i=this.safeString(e,"symbol"),n=this.safeString(e,"baseAsset"),a=this.safeString(e,"quoteAsset"),s=this.safeCurrencyCode(n),o=this.safeCurrencyCode(a),u=s+"/"+o,c=!0,d=!1,h=!1,l=!1;"future"===t?(u=i,c=!1,d=!0,l=this.safeValue(e,"inverse",!1),n=this.safeString(e,"underlying"),s=this.safeCurrencyCode(n)):"option"===t&&(u=i,c=!1,h=!0);for(var f=void 0,p=void 0,v=void 0,m=void 0,g=void 0,y=0;y<r.length;y++){var b=r[y],x=this.safeString(b,"filterType");"LOT_SIZE"===x&&(f=this.safeNumber(b,"minQty"),p=this.safeNumber(b,"maxQty")),"PRICE_FILTER"===x&&(v=this.safeNumber(b,"minPrice"),m=this.safeNumber(b,"maxPrice")),"MIN_NOTIONAL"===x&&(g=this.safeNumber(b,"minNotional"))}void 0===g&&void 0!==f&&void 0!==v&&(g=f*v);var k={price:this.safeNumber2(e,"quotePrecision","quoteAssetPrecision"),amount:this.safeNumber(e,"baseAssetPrecision")},w={amount:{min:f,max:p},price:{min:v,max:m},cost:{min:g,max:void 0}};return{id:i,symbol:u,base:s,quote:o,baseId:n,quoteId:a,active:!0,type:t,spot:c,future:d,option:h,inverse:l,precision:k,limits:w,info:e}}},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.length>0&&void 0!==p[0]?p[0]:{},e.next=3,this.publicGetBrokerInfo(t);case 3:for(r=e.sent,n=[],a=this.safeValue(r,"symbols",[]),s=0;s<a.length;s++)o=this.parseMarket(a[s],"spot"),n.push(o);for(u=this.safeValue(r,"options",[]),c=0;c<u.length;c++)d=this.parseMarket(u[c],"option"),n.push(d);for(h=this.safeValue(r,"contracts",[]),l=0;l<h.length;l++)f=this.parseMarket(h[l],"future"),n.push(f);return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:{},e.next=4,this.loadMarkets();case 4:return a=this.market(t),s={symbol:a.id},void 0!==r&&(s.limit=r),e.next=9,this.quoteGetDepth(this.extend(s,n));case 9:return o=e.sent,u=this.safeInteger(o,"time"),e.abrupt("return",this.parseOrderBook(o,u));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={symbol:n.id},e.next=7,this.quoteGetTicker24hr(this.extend(a,r));case 7:return s=e.sent,e.abrupt("return",this.parseTicker(s,n));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchBidAsk",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={symbol:n.id},e.next=7,this.quoteGetTickerBookTicker(this.extend(a,r));case 7:return s=e.sent,e.abrupt("return",this.parseTicker(s,n));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchBidsAsks",value:function(){var e=n(i.mark((function e(){var t,r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:void 0,r=a.length>1&&void 0!==a[1]?a[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.quoteGetTickerBookTicker(r);case 6:return n=e.sent,e.abrupt("return",this.parseTickers(n,t));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:{},e.next=4,this.loadMarkets();case 4:return n=this.safeValue(this.options,"fetchTickers",{}),a=this.safeString(n,"method","quoteGetTicker24hr"),s=this.safeString(n,"type","spot"),o=this.safeString(r,"type",s),u=this.omit(r,"type"),c=a,"future"===o?c="quoteGetContractTicker24hr":"option"===o&&(c="quoteGetOptionTicker24hr"),e.next=13,this[c](u);case 13:return d=e.sent,e.abrupt("return",this.parseTickers(d,t));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p,v,m,g,y,b,x,k,w=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=w.length>0&&void 0!==w[0]?w[0]:{},e.next=3,this.loadMarkets();case 3:return r=this.safeValue(this.options,"fetchBalance",{}),n=this.safeString(r,"type","spot"),a=this.safeString(t,"type",n),s=this.omit(t,"type"),o="privateGetAccount","future"===a?o="contractGetAccount":"option"===a&&(o="optionGetAccount"),e.next=11,this[o](s);case 11:if(u=e.sent,c=this.safeValue(u,"balances"),d={info:u},void 0!==c)for(h=0;h<c.length;h++)l=c[h],f=this.safeString2(l,"asset","tokenName"),p=this.safeCurrencyCode(f),(v=this.account()).free=this.safeString(l,"free"),v.used=this.safeString(l,"locked"),d[p]=v;else for(m=Object.keys(u),g=0;g<m.length;g++)y=m[g],b=this.safeCurrencyCode(y),x=u[y],(k=this.account()).free=this.safeString(x,"availableMargin"),k.total=this.safeString(x,"total"),d[b]=k;return e.abrupt("return",this.parseBalance(d,!1));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:50,a=c.length>3&&void 0!==c[3]?c[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={symbol:s.id},void 0!==n&&(o.limit=n),e.next=10,this.quoteGetTrades(this.extend(o,a));case 10:return u=e.sent,e.abrupt("return",this.parseTrades(u,s,r,n));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){return[this.safeInteger(e,0),this.safeNumber(e,1),this.safeNumber(e,2),this.safeNumber(e,3),this.safeNumber(e,4),this.safeNumber(e,5)]}},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:"1m",n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:void 0,s=d.length>4&&void 0!==d[4]?d[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),u={symbol:o.id,interval:this.timeframes[r]},void 0!==n&&(u.startTime=n),void 0!==a&&(u.limit=a),e.next=12,this.quoteGetKlines(this.extend(u,s));case 12:return c=e.sent,e.abrupt("return",this.parseOHLCVs(c,o,r,n,a));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p,v,g=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=g.length>0&&void 0!==g[0]?g[0]:void 0,r=g.length>1&&void 0!==g[1]?g[1]:void 0,n=g.length>2&&void 0!==g[2]?g[2]:void 0,a=g.length>3&&void 0!==g[3]?g[3]:{},e.next=6,this.loadMarkets();case 6:if(s=void 0,o={},u=this.safeString(this.options,"type","spot"),c=this.safeValue(this.options,"fetchMyTrades",{}),d=this.safeString(c,"type",u),h=this.safeString(a,"type",d),void 0!==t&&(s=this.market(t),o.symbol=s.id,h=s.type),l=this.omit(a,"type"),void 0!==n&&(o.limit=n),f="privateGetMyTrades","future"!==h){e.next=20;break}f="contractGetMyTrades",e.next=29;break;case 20:if("option"!==h){e.next=24;break}f="optionGetMyTrades",e.next=29;break;case 24:if(void 0!==t){e.next=26;break}throw new m(this.id+" fetchMyTrades() requires a `symbol` argument for "+h+" markets");case 26:p=this.market(t),o.symbol=p.id,void 0!==r&&(o.startTime=r);case 29:return void 0!==r&&(o.startTime=r),e.next=32,this[f](this.extend(o,l));case 32:return v=e.sent,e.abrupt("return",this.parseTrades(v,s,r,n));case 34:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,u,c,d,h,l,f,p,v,g,y,b,k,_=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=_.length>4&&void 0!==_[4]?_[4]:void 0,o=_.length>5&&void 0!==_[5]?_[5]:{},e.next=4,this.loadMarkets();case 4:if(u=this.market(t),c=n.toUpperCase(),d=r.toUpperCase(),h={symbol:u.id,side:c},l=o,f="privatePostOrder","future"!==u.type){e.next=30;break}if("BUY_OPEN"===c||"SELL_OPEN"===c||"BUY_CLOSE"===c||"SELL_CLOSE"===c){e.next=13;break}throw new w(this.id+" createOrder() does not support order side "+n+" for "+u.type+" markets, only BUY_OPEN, SELL_OPEN, BUY_CLOSE and SELL_CLOSE are supported");case 13:if("LIMIT"===d||"STOP"===d){e.next=15;break}throw new w(this.id+" createOrder() does not support order type "+r+" for "+u.type+" markets, only LIMIT and STOP are supported");case 15:if(void 0!==(p=this.safeValue(o,"clientOrderId"))){e.next=18;break}throw new m(this.id+" createOrder() requires a clientOrderId parameter for "+u.type+" markets, supply clientOrderId in the params argument");case 18:if(void 0!==(v=this.safeValue(o,"leverage"))||"BUY_OPEN"!==c&&"SELL_OPEN"!==c){e.next=21;break}throw new w(this.id+" createOrder() requires a leverage parameter for "+u.type+" markets if orderSide is BUY_OPEN or SELL_OPEN");case 21:f="contractPostOrder",void 0===(g=this.safeString(o,"priceType"))?h.price=this.priceToPrecision(t,s):(h.priceType=g,"INPUT"===g&&(h.price=this.priceToPrecision(t,s))),h.orderType=r.toUpperCase(),h.quantity=this.amountToPrecision(t,a),h.leverage=v,h.clientOrderId=p,e.next=53;break;case 30:if("option"===u.type&&(f="optionPostOrder"),void 0!==(y=this.safeValue2(o,"clientOrderId","newClientOrderId"))&&(h.newClientOrderId=y),h.type=d,"limit"!==r){e.next=39;break}h.price=this.priceToPrecision(t,s),h.quantity=this.amountToPrecision(t,a),e.next=53;break;case 39:if("market"!==r){e.next=53;break}if("buy"!==n){e.next=52;break}if(!this.safeValue(this.options,"createMarketBuyOrderRequiresPrice",!0)){e.next=48;break}if(void 0===s){e.next=47;break}a*=s,e.next=48;break;case 47:throw new x(this.id+" createOrder() requires the price argument with market buy orders to calculate total order cost (amount to spend), where cost = amount * price. Supply a price argument to createOrder() call if you want the cost to be calculated for you from price and amount, or, alternatively, add .options['createMarketBuyOrderRequiresPrice'] = false and supply the total cost value in the 'amount' argument (the exchange-specific behaviour)");case 48:b=u.precision.price,h.quantity=this.decimalToPrecision(a,E,b,this.precisionMode),e.next=53;break;case 52:h.quantity=this.amountToPrecision(t,a);case 53:return l=this.omit(l,["clientOrderId","newClientOrderId"]),e.next=56,this[f](this.extend(h,l));case 56:return k=e.sent,e.abrupt("return",this.parseOrder(k,u));case 58:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p.length>1&&void 0!==p[1]?p[1]:void 0,r=p.length>2&&void 0!==p[2]?p[2]:{},e.next=4,this.loadMarkets();case 4:if(n=this.safeValue2(r,"origClientOrderId","clientOrderId"),a={},s=this.safeString(this.options,"type","spot"),o=this.safeValue(this.options,"cancelOrder",{}),u=this.safeString(o,"type",s),c=this.safeString(r,"type",u),d=this.omit(r,"type"),void 0!==n?(a.origClientOrderId=n,d=this.omit(d,["origClientOrderId","clientOrderId"])):a.orderId=t,h="privateDeleteOrder",void 0!==(l=this.safeString(d,"orderType"))&&(c="future"),"future"!==c){e.next=22;break}if(h="contractDeleteOrderCancel",void 0!==l){e.next=19;break}throw new m(this.id+" cancelOrder() requires an orderType parameter, pass the { 'orderType': 'LIMIT' } or { 'orderType': 'STOP' } in params argument");case 19:a.orderType=l,e.next=23;break;case 22:"option"===c&&(h="optionDeleteOrderCancel");case 23:return e.next=25,this[h](this.extend(a,d));case 25:return f=e.sent,e.abrupt("return",this.parseOrder(f));case 27:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p,v=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=v.length>0&&void 0!==v[0]?v[0]:void 0,r=v.length>1&&void 0!==v[1]?v[1]:void 0,n=v.length>2&&void 0!==v[2]?v[2]:void 0,a=v.length>3&&void 0!==v[3]?v[3]:{},e.next=6,this.loadMarkets();case 6:return s=void 0,o={},u=this.safeString(this.options,"type","spot"),c=this.safeValue(this.options,"fetchOpenOrders",{}),d=this.safeString(c,"type",u),h=this.safeString(a,"type",d),void 0!==t&&(s=this.market(t),o.symbol=s.id,h=s.type),l=this.omit(a,"type"),void 0!==n&&(o.limit=n),f="privateGetOpenOrders","future"===h?f="contractGetOpenOrders":"option"===h&&(f="optionGetOpenOrders"),e.next=19,this[f](this.extend(o,l));case 19:return p=e.sent,e.abrupt("return",this.parseOrders(p,s,r,n));case 21:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p,v=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=v.length>0&&void 0!==v[0]?v[0]:void 0,r=v.length>1&&void 0!==v[1]?v[1]:void 0,n=v.length>2&&void 0!==v[2]?v[2]:void 0,a=v.length>3&&void 0!==v[3]?v[3]:{},e.next=6,this.loadMarkets();case 6:return s=void 0,o={},u=this.safeString(this.options,"type","spot"),c=this.safeValue(this.options,"fetchClosedOrders",{}),d=this.safeString(c,"type",u),h=this.safeString(a,"type",d),void 0!==t&&(s=this.market(t),o.symbol=s.id,h=s.type),l=this.omit(a,"type"),void 0!==n&&(o.limit=n),void 0!==r&&(o.startTime=r),f="privateGetHistoryOrders","future"===h?f="contractGetHistoryOrders":"option"===h&&(f="optionGetHistoryOrders"),e.next=20,this[f](this.extend(o,l));case 20:return p=e.sent,e.abrupt("return",this.parseOrders(p,s,r,n));case 22:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f.length>1&&void 0!==f[1]?f[1]:void 0,r=f.length>2&&void 0!==f[2]?f[2]:{},e.next=4,this.loadMarkets();case 4:return n=this.safeValue2(r,"origClientOrderId","clientOrderId"),a={},s=this.safeString(this.options,"type","spot"),o=this.safeValue(this.options,"fetchOrder",{}),u=this.safeString(o,"type",s),c=this.safeString(r,"type",u),d=this.omit(r,"type"),void 0!==n?(a.origClientOrderId=n,d=this.omit(d,["origClientOrderId","clientOrderId"])):a.orderId=t,h="privateGetOrder","future"===c?h="contractGetGetOrder":"option"===c&&(h="optionGetGetOrder"),e.next=16,this[h](this.extend(a,d));case 16:return l=e.sent,e.abrupt("return",this.parseOrder(l));case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchDeposits",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:void 0,r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},e.next=6,this.loadMarkets();case 6:return s=void 0,o={},void 0!==t&&(s=this.currency(t)),void 0!==r&&(o.startTime=r),void 0!==n&&(o.limit=n),e.next=13,this.privateGetDepositOrders(this.extend(o,a));case 13:return u=e.sent,e.abrupt("return",this.parseTransactions(u,s,r,n));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchWithdrawals",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:void 0,r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},e.next=6,this.loadMarkets();case 6:return s=void 0,o={},void 0!==t&&(s=this.currency(t),o.token=s.id),void 0!==r&&(o.startTime=r),void 0!==n&&(o.limit=n),e.next=13,this.privateGetWithdrawalOrders(this.extend(o,a));case 13:return u=e.sent,e.abrupt("return",this.parseTransactions(u,s,r,n));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"withdraw",value:function(){var e=n(i.mark((function e(t,r,n){var a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.length>3&&void 0!==h[3]?h[3]:void 0,s=h.length>4&&void 0!==h[4]?h[4]:{},this.checkAddress(n),e.next=5,this.loadMarkets();case 5:return o=this.currency(t),u=this.safeString(s,"clientOrderId",this.uuid()),c={clientOrderId:u,tokenId:o.id,address:n,withdrawQuantity:r},void 0!==a&&(c.addressExt=a),e.next=11,this.privatePostWithdraw(this.extend(c,s));case 11:return d=e.sent,e.abrupt("return",{info:d,id:this.safeString(d,"orderId")});case 13:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"fetchAccounts",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:{},e.next=3,this.privatePostSubAccountQuery(t);case 3:for(r=e.sent,n=[],a=0;a<r.length;a++)s=r[a],o=this.safeString(s,"accountId"),u=this.safeString(s,"accountType"),c=u,"1"===u?c="spot":"2"===u?c="option":"3"===u&&(c="future"),n.push({id:o,type:c,currency:void 0,info:s});return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchLedger",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:void 0,r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},e.next=6,this.loadMarkets();case 6:return s={accountType:1,accountIndex:0,fromFlowId:"",endFlowId:"",endTime:1588450533040},o=void 0,void 0!==t&&(o=this.currency(t),s.tokenId=o.id),void 0!==r&&(s.startTime=r),void 0!==n&&(s.limit=n),e.next=13,this.privateGetBalanceFlow(this.extend(s,a));case 13:return u=e.sent,e.abrupt("return",this.parseLedger(u,o,r,n));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseLedgerEntry",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"tokenId"),i=this.safeCurrencyCode(r,t),n=this.safeNumber(e,"change"),a=this.safeNumber(e,"total"),s=n<0?"out":"in",o=void 0;if(void 0!==a&&void 0!==n){var u="out"===s?n:-n;o=this.sum(a,u)}var c=this.safeInteger(e,"created"),d=this.parseLedgerEntryType(this.safeString(e,"flowType")),h=this.safeString(e,"id"),l=this.safeString(e,"accountId");return{id:h,currency:i,account:l,referenceAccount:void 0,referenceId:void 0,status:void 0,amount:n,before:o,after:a,fee:void 0,direction:s,timestamp:c,datetime:this.iso8601(c),type:d,info:e}}},{key:"parseLedgerEntryType",value:function(e){return this.safeString({TRADE:"trade",FEE:"fee",TRANSFER:"transfer",DEPOSIT:"transaction",MAKER_REWARD:"rebate",PNL:"pnl",SETTLEMENT:"settlement",LIQUIDATION:"liquidation",FUNDING_SETTLEMENT:"settlement",USER_ACCOUNT_TRANSFER:"transfer",OTC_BUY_COIN:"trade",OTC_SELL_COIN:"trade",OTC_FEE:"fee",OTC_TRADE:"trade",ACTIVITY_AWARD:"referral",INVITATION_REFERRAL_BONUS:"referral",REGISTER_BONUS:"referral",AIRDROP:"airdrop",MINE_REWARD:"reward"},e,e)}},{key:"parseTransactionStatus",value:function(e){return this.safeString({BROKER_AUDITING_STATUS:"pending",BROKER_REJECT_STATUS:"failed",AUDITING_STATUS:"pending",AUDIT_REJECT_STATUS:"failed",PROCESSING_STATUS:"pending",WITHDRAWAL_SUCCESS_STATUS:"ok",WITHDRAWAL_FAILURE_STATUS:"failed",BLOCK_MINING_STATUS:"ok"},e,e)}},{key:"parseTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"orderId"),i=this.safeString(e,"address"),n=this.safeString2(e,"addressExt","addressTag");void 0!==n&&n.length<1&&(n=void 0);var a=this.safeString(e,"fromAddress"),s=this.safeString(e,"fromAddressTag");void 0!==s&&s.length<1&&(s=void 0);var o=this.safeString(e,"tokenId"),u=this.safeCurrencyCode(o,t),c=this.safeInteger(e,"time"),d=this.safeString(e,"txid");""===d&&(d=void 0);var h=void 0,l=this.parseTransactionStatus(this.safeString(e,"statusCode"));void 0===l?(h="deposit",l="ok"):h="withdrawal";var f=this.safeNumber(e,"quantity"),p=this.safeNumber(e,"fee"),v=void 0;if(void 0!==p){var m=this.safeString(e,"feeTokenId"),g=this.safeCurrencyCode(m);v={currency:g,cost:p}}return{info:e,id:r,txid:d,timestamp:c,datetime:this.iso8601(c),addressFrom:a,address:i,addressTo:i,tagFrom:s,tag:n,tagTo:n,type:h,amount:f,currency:u,status:l,updated:void 0,fee:v}}},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"symbol"),i=this.safeSymbol(r,t),n=this.safeInteger(e,"time"),a=this.safeNumber(e,"openPrice"),s=this.safeNumber(e,"lastPrice"),o=void 0,u=void 0,c=void 0;void 0!==a&&void 0!==s&&(o=s-a,c=this.sum(a,s)/2,void 0!==s&&s>0&&(u=o/a*100));var d=this.safeNumber(e,"quoteVolume"),h=this.safeNumber(e,"volume"),l=this.vwap(h,d);return{symbol:i,timestamp:n,datetime:this.iso8601(n),high:this.safeNumber(e,"highPrice"),low:this.safeNumber(e,"lowPrice"),bid:this.safeNumber2(e,"bestBidPrice","bidPrice"),bidVolume:this.safeNumber(e,"bidQty"),ask:this.safeNumber2(e,"bestAskPrice","askPrice"),askVolume:this.safeNumber(e,"askQty"),vwap:l,open:a,close:s,last:s,previousClose:void 0,change:o,percentage:u,average:c,baseVolume:h,quoteVolume:d,info:e}}},{key:"parseTrade",value:function(e,t){var r=this.safeString(e,"id"),i=this.safeNumber(e,"time"),n=this.safeString(e,"orderId"),a=this.safeString(e,"price"),s=this.safeString(e,"qty"),o=this.parseNumber(a),u=this.parseNumber(s),c=this.parseNumber(N.stringMul(a,s)),d=void 0,h=void 0;if("isBuyerMaker"in e)d=e.isBuyerMaker?"sell":"buy";else{var l=this.safeValue(e,"isMaker");void 0!==l&&(h=l?"maker":"taker"),d=this.safeValue(e,"isBuyer")?"buy":"sell"}var f=void 0,p=this.safeNumber(e,"commission");if(void 0!==p){var v=this.safeString(e,"commissionAsset");f={cost:p,currency:this.safeCurrencyCode(v)}}var m=void 0;return void 0===m&&void 0!==t&&(m=t.symbol),{id:r,info:e,timestamp:i,datetime:this.iso8601(i),symbol:m,type:undefined,order:n,side:d,takerOrMaker:h,price:o,amount:u,cost:c,fee:f}}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"orderId"),i=this.safeString(e,"clientOrderId"),n=this.safeInteger(e,"time");void 0===n&&(n=this.safeInteger(e,"transactTime"));var a=this.safeString(e,"symbol"),s=this.safeSymbol(a,t),o=this.safeStringLower(e,"type"),u=this.safeStringLower(e,"side"),c=this.safeNumber(e,"price"),d=this.safeNumber(e,"avgPrice"),h=void 0,l=this.safeNumber(e,"cummulativeQuoteQty"),f=void 0,p=void 0;void 0===o?(o=this.safeStringLower(e,"orderType"),void 0!==t&&t.inverse&&(l=this.safeNumber(e,"executedQty"),h=void 0),0===l&&(f=0)):(h=this.safeNumber(e,"origQty"),"market"===o&&(c=void 0,"buy"===u&&(h=void 0)),void 0!==(f=this.safeNumber(e,"executedQty"))&&void 0!==h&&(p=h-f)),0===d&&(d=void 0);var v=this.parseOrderStatus(this.safeString(e,"status")),m=this.safeString(e,"timeInForce"),g=this.safeNumber(e,"stopPrice"),y={info:e,id:r,clientOrderId:i,timestamp:n,datetime:this.iso8601(n),lastTradeTimestamp:void 0,symbol:s,type:o,timeInForce:m,side:u,price:c,stopPrice:g,average:d,cost:l,amount:h,filled:f,remaining:p,status:v,trades:void 0,fee:void 0,fees:void 0},b=this.safeValue(e,"fees",[]),x=b.length;if(x>0){y.fees=[];for(var k=0;k<b.length;k++){var w=this.safeNumber(b[k],"fee");if(void 0!==w){var _=this.safeString(b[k],"feeToken"),S=this.safeCurrencyCode(_);y.fees.push({cost:w,currency:S})}}}return y}},{key:"parseOrderStatus",value:function(e){return this.safeString({NEW:"open",CANCELED:"canceled",FILLED:"closed",PARTIALLY_FILLED:"open",PENDING_CANCEL:"canceled"},e,e)}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.urls.api[t]+"/"+this.version+"/"+this.implodeParams(e,i),o=this.omit(i,this.extractParams(e)),u="contract"===t&&("insurance"===e||"fundingRate"===e);if("public"===t||"quote"===t||u)Object.keys(i).length&&(s+="?"+this.urlencode(i));else{var c=this.milliseconds();this.checkRequiredCredentials();var d=this.extend({timestamp:c},o),h=this.urlencode(d),l=this.hmac(this.encode(h),this.encode(this.secret),"sha256");d.signature=l,n={"X-BH-APIKEY":this.apiKey},"POST"===r?(a=this.urlencode(d),n=this.extend({"Content-Type":"application/x-www-form-urlencoded"},n)):s+="?"+this.urlencode(d)}return{url:s,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,u){if(void 0!==s&&"code"in s){var c=this.safeString(s,"code");if("0"!==c){var d=this.id+" "+a;throw this.throwExactlyMatchedException(this.exceptions.exact,c,d),new p(d)}}}}]),r}(h)},function(e,t,r){"use strict";var i=r(7),n=r(8),a=r(1),s=r(2),o=r(6),u=r(3),c=r(4),d=r(5),h=r(11),l=r(10),f=l.BadRequest,p=l.AuthenticationError,v=l.NetworkError,m=l.ArgumentsRequired,g=l.OrderNotFound,y=l.InsufficientFunds,b=r(18).TICK_SIZE,x=r(12);e.exports=function(e){c(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(u(r.prototype),"describe",this).call(this),{id:"hollaex",name:"HollaEx",countries:["KR"],rateLimit:333,version:"v2",has:{CORS:!1,fetchMarkets:!0,fetchCurrencies:!0,fetchTicker:!0,fetchTickers:!0,fetchOrderBook:!0,fetchOrderBooks:!0,fetchTrades:!0,fetchOHLCV:!0,fetchBalance:!0,createOrder:!0,createLimitBuyOrder:!0,createLimitSellOrder:!0,createMarketBuyOrder:!0,createMarketSellOrder:!0,cancelOrder:!0,cancelAllOrders:!0,fetchOpenOrders:!0,fetchClosedOrders:!0,fetchOpenOrder:!0,fetchOrder:!1,fetchDeposits:!0,fetchWithdrawals:!0,fetchTransactions:!1,fetchOrders:!0,fetchMyTrades:!0,withdraw:!0,fetchDepositAddress:!0},timeframes:{"1h":"1h","1d":"1d"},urls:{logo:"https://user-images.githubusercontent.com/1294454/75841031-ca375180-5ddd-11ea-8417-b975674c23cb.jpg",api:"https://api.hollaex.com",www:"https://hollaex.com",doc:"https://apidocs.hollaex.com",referral:"https://pro.hollaex.com/signup?affiliation_code=QSWA6G"},precisionMode:b,requiredCredentials:{apiKey:!0,secret:!0},api:{public:{get:["health","constants","kit","tiers","ticker","tickers","orderbook","orderbooks","trades","chart","charts","udf/config","udf/history","udf/symbols"]},private:{get:["user","user/balance","user/deposits","user/withdrawals","user/withdrawal/fee","user/trades","orders","orders/{order_id}"],post:["user/request-withdrawal","order"],delete:["order/all","order"]}},fees:{trading:{tierBased:!0,percentage:!0}},exceptions:{broad:{"Invalid token":p,"Order not found":g,"Insufficient balance":y},exact:{400:f,403:p,404:f,405:f,410:f,429:f,500:v,503:v}},options:{"api-expires":parseInt(this.timeout/1e3)}})}},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p,v,m,g=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=g.length>0&&void 0!==g[0]?g[0]:{},e.next=3,this.publicGetConstants(t);case 3:for(r=e.sent,n=this.safeValue(r,"pairs",{}),a=Object.keys(n),s=[],o=0;o<a.length;o++)u=a[o],c=n[u],d=this.safeString(c,"name"),h=this.safeString(c,"pair_base"),l=this.safeString(c,"pair_2"),f=this.commonCurrencyCode(h.toUpperCase()),p=this.commonCurrencyCode(l.toUpperCase()),v=f+"/"+p,m=this.safeValue(c,"active"),s.push({id:d,symbol:v,base:f,quote:p,baseId:h,quoteId:l,active:m,precision:{price:this.safeNumber(c,"increment_price"),amount:this.safeNumber(c,"increment_size")},limits:{amount:{min:this.safeNumber(c,"min_size"),max:this.safeNumber(c,"max_size")},price:{min:this.safeNumber(c,"min_price"),max:this.safeNumber(c,"max_price")},cost:{min:void 0,max:void 0}},info:c});return e.abrupt("return",s);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchCurrencies",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p,v,m,g,y=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=y.length>0&&void 0!==y[0]?y[0]:{},e.next=3,this.publicGetConstants(t);case 3:for(r=e.sent,n=this.safeValue(r,"coins",{}),a=Object.keys(n),s={},o=0;o<a.length;o++)u=a[o],c=n[u],d=this.safeString(c,"symbol"),h=this.safeInteger(c,"id"),l=this.safeCurrencyCode(d),f=this.safeString(c,"fullname"),p=this.safeValue(c,"active"),v=this.safeNumber(c,"withdrawal_fee"),m=this.safeNumber(c,"increment_unit"),g=this.safeValue(c,"withdrawal_limits",[]),s[l]={id:d,numericId:h,code:l,info:c,name:f,active:p,fee:v,precision:m,limits:{amount:{min:this.safeNumber(c,"min"),max:this.safeNumber(c,"max")},withdraw:{min:void 0,max:this.safeValue(g,0)}}};return e.abrupt("return",s);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBooks",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h.length>0&&void 0!==h[0]?h[0]:void 0,h.length>1&&void 0!==h[1]?h[1]:void 0,t=h.length>2&&void 0!==h[2]?h[2]:{},e.next=5,this.loadMarkets();case 5:return e.next=7,this.publicGetOrderbooks(t);case 7:for(r=e.sent,n={},a=Object.keys(r),s=0;s<a.length;s++)o=a[s],u=r[o],c=this.safeSymbol(o,void 0,"-"),d=this.parse8601(this.safeString(u,"timestamp")),n[c]=this.parseOrderBook(r[o],d);return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.length>1&&void 0!==c[1]?c[1]:void 0,r=c.length>2&&void 0!==c[2]?c[2]:{},e.next=4,this.loadMarkets();case 4:return n=this.marketId(t),a={symbol:n},e.next=8,this.publicGetOrderbooks(this.extend(a,r));case 8:return s=e.sent,o=this.safeValue(s,n),u=this.parse8601(this.safeString(o,"timestamp")),e.abrupt("return",this.parseOrderBook(o,u));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={symbol:n.id},e.next=7,this.publicGetTicker(this.extend(a,r));case 7:return s=e.sent,e.abrupt("return",this.parseTicker(s,n));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:void 0,r=a.length>1&&void 0!==a[1]?a[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetTickers(this.extend(r));case 6:return n=e.sent,e.abrupt("return",this.parseTickers(n,t));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTickers",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r={},i=Object.keys(e),n=0;n<i.length;n++){var a=i[n],s=e[a],o=this.safeString(s,"symbol",a),u=this.safeMarket(o,void 0,"-"),c=u.symbol;r[c]=this.parseTicker(s,u)}return this.filterByArray(r,"symbol",t)}},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"symbol"),i=this.safeSymbol(r,t,"-"),n=this.parse8601(this.safeString2(e,"time","timestamp")),a=this.safeNumber(e,"close"),s={symbol:i,info:e,timestamp:n,datetime:this.iso8601(n),high:this.safeNumber(e,"high"),low:this.safeNumber(e,"low"),bid:void 0,bidVolume:void 0,ask:void 0,askVolume:void 0,vwap:void 0,open:this.safeNumber(e,"open"),close:a,last:this.safeNumber(e,"last",a),previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeNumber(e,"volume"),quoteVolume:void 0};return s}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={symbol:s.id},e.next=9,this.publicGetTrades(this.extend(o,a));case 9:return u=e.sent,c=this.safeValue(u,s.id,[]),e.abrupt("return",this.parseTrades(c,s,r,n));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"symbol"),i=(t=this.safeMarket(r,t,"-")).symbol,n=this.safeString(e,"timestamp"),a=this.parse8601(n),s=this.safeString(e,"side"),o=this.safeString(e,"price"),u=this.safeString(e,"size"),c=this.parseNumber(o),d=this.parseNumber(u),h=this.parseNumber(x.stringMul(o,u)),l=this.safeNumber(e,"fee"),f=void 0;if(void 0!==l){var p=t.quote,v=void 0!==t?t.quote:p;f={cost:l,currency:v}}return{info:e,id:void 0,timestamp:a,datetime:n,symbol:i,order:void 0,type:void 0,side:s,takerOrMaker:void 0,price:c,amount:d,cost:h,fee:f}}},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=p.length>1&&void 0!==p[1]?p[1]:"1h",n=p.length>2&&void 0!==p[2]?p[2]:void 0,a=p.length>3&&void 0!==p[3]?p[3]:void 0,s=p.length>4&&void 0!==p[4]?p[4]:{},e.next=6,this.loadMarkets();case 6:if(o=this.market(t),u={symbol:o.id,resolution:this.timeframes[r]},c=this.parseTimeframe(r),void 0!==n){e.next=20;break}if(void 0!==a){e.next=14;break}throw new m(this.id+" fetchOHLCV() requires a 'since' or a 'limit' argument");case 14:d=this.seconds(),h=d-c*a,u.to=d,u.from=h;case 18:e.next=21;break;case 20:void 0===a?(u.from=parseInt(n/1e3),u.to=this.seconds()):(l=parseInt(n/1e3),u.from=l,u.to=this.sum(l,c*a));case 21:return e.next=23,this.publicGetChart(this.extend(u,s));case 23:return f=e.sent,e.abrupt("return",this.parseOHLCVs(f,o,r,n,a));case 25:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){return[this.parse8601(this.safeString(e,"time")),this.safeNumber(e,"open"),this.safeNumber(e,"high"),this.safeNumber(e,"low"),this.safeNumber(e,"close"),this.safeNumber(e,"volume")]}},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetUserBalance(t);case 5:for(r=e.sent,n={info:r},a=Object.keys(this.currencies_by_id),s=0;s<a.length;s++)o=a[s],u=this.safeCurrencyCode(o),(c=this.account()).free=this.safeString(r,o+"_available"),c.total=this.safeString(r,o+"_balance"),n[u]=c;return e.abrupt("return",this.parseBalance(n,!1));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOpenOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.loadMarkets();case 4:return n={order_id:t},e.next=7,this.privateGetOrdersOrderId(this.extend(n,r));case 7:return a=e.sent,e.abrupt("return",this.parseOrder(a));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:void 0,a=o.length>3&&void 0!==o[3]?o[3]:{},s={open:!0},e.next=7,this.fetchOrders(t,r,n,this.extend(s,a));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:void 0,a=o.length>3&&void 0!==o[3]?o[3]:{},s={status:"filled"},e.next=7,this.fetchOrders(t,r,n,this.extend(s,a));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return s=void 0,o={},void 0!==t&&(s=this.market(t),o.symbol=s.id),void 0!==r&&(o.start_date=this.iso8601(r)),void 0!==n&&(o.limit=n),e.next=13,this.privateGetOrders(this.extend(o,a));case 13:return u=e.sent,c=this.safeValue(u,"data",[]),e.abrupt("return",this.parseOrders(c,s,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({new:"open",pfilled:"open",filled:"closed",canceled:"canceled"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"symbol"),i=this.safeSymbol(r,t,"-"),n=this.safeString(e,"id"),a=this.parse8601(this.safeString(e,"created_at")),s=this.safeString(e,"type"),o=this.safeString(e,"side"),u=this.safeNumber(e,"price"),c=this.safeNumber(e,"size"),d=this.safeNumber(e,"filled"),h=this.parseOrderStatus(this.safeString(e,"status"));return this.safeOrder({id:n,clientOrderId:void 0,timestamp:a,datetime:this.iso8601(a),lastTradeTimestamp:void 0,status:h,symbol:i,type:s,timeInForce:void 0,postOnly:void 0,side:o,price:u,stopPrice:void 0,amount:c,filled:d,remaining:void 0,cost:void 0,trades:void 0,fee:void 0,info:e,average:void 0})}},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,u,c,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=l.length>4&&void 0!==l[4]?l[4]:void 0,o=l.length>5&&void 0!==l[5]?l[5]:{},e.next=4,this.loadMarkets();case 4:return u=this.market(t),c={symbol:u.id,side:n,size:a,type:r},"market"!==r&&(c.price=s),void 0!==(d=this.safeFloat2(o,"stopPrice","stop"))&&(c.stop=parseFloat(this.priceToPrecision(t,d)),o=this.omit(o,["stopPrice","stop"])),e.next=11,this.privatePostOrder(this.extend(c,o));case 11:return h=e.sent,e.abrupt("return",this.parseOrder(h,u));case 13:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.loadMarkets();case 4:return n={order_id:t},e.next=7,this.privateDeleteOrder(this.extend(n,r));case 7:return a=e.sent,e.abrupt("return",this.parseOrder(a));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cancelAllOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=4,this.loadMarkets();case 4:return n={},a=void 0,void 0!==t&&(a=this.markets(t),n.symbol=a.id),e.next=9,this.privateDeleteOrderAll(this.extend(n,r));case 9:return s=e.sent,e.abrupt("return",this.parseOrders(s,a));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return s={},o=void 0,void 0!==t&&(o=this.market(t),s.symbol=o.id),void 0!==n&&(s.limit=n),void 0!==r&&(s.start_date=this.iso8601(r)),e.next=13,this.privateGetUserTrades(this.extend(s,a));case 13:return u=e.sent,c=this.safeValue(u,"data",[]),e.abrupt("return",this.parseTrades(c,o,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchDepositAddress",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.currency(t),e.next=6,this.privateGetUser(r);case 6:return a=e.sent,s=this.safeValue(a,"crypto_wallet"),o=this.safeString(s,n.id),u=void 0,void 0!==o&&(c=o.split(":"),o=this.safeString(c,0),u=this.safeString(c,1)),this.checkAddress(o),e.abrupt("return",{currency:t,address:o,tag:u,info:a});case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchDeposits",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return s={},o=void 0,void 0!==t&&(o=this.currency(t),s.currency=o.id),void 0!==n&&(s.limit=n),void 0!==r&&(s.start_date=this.iso8601(r)),e.next=13,this.privateGetUserDeposits(this.extend(s,a));case 13:return u=e.sent,c=this.safeValue(u,"data",[]),e.abrupt("return",this.parseTransactions(c,o,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchWithdrawals",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return s={},o=void 0,void 0!==t&&(o=this.currency(t),s.currency=o.id),void 0!==n&&(s.limit=n),void 0!==r&&(s.start_date=this.iso8601(r)),e.next=13,this.privateGetUserWithdrawals(this.extend(s,a));case 13:return u=e.sent,c=this.safeValue(u,"data",[]),e.abrupt("return",this.parseTransactions(c,o,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTransaction",value:function(e){var t=this.safeString(e,"id"),r=this.safeString(e,"transaction_id"),i=this.parse8601(this.safeString(e,"created_at")),n=this.parse8601(this.safeString(e,"updated_at")),a=this.safeString(e,"type"),s=this.safeNumber(e,"amount"),o=this.safeString(e,"address"),u=void 0,c=void 0,d=void 0,h=void 0,l=void 0;if(void 0!==o){var f=o.split(":");u=o=this.safeString(f,0),h=d=this.safeString(f,1)}var p=this.safeString(e,"currency"),v=this.safeCurrencyCode(p),m=this.safeValue(e,"status"),g=this.safeValue(e,"dismissed"),y=this.safeValue(e,"rejected");m=m?"ok":g?"canceled":y?"failed":"pending";var b={currency:v,cost:this.safeNumber(e,"fee")};return{info:e,id:t,txid:r,timestamp:i,datetime:this.iso8601(i),addressFrom:c,address:o,addressTo:u,tagFrom:l,tag:d,tagTo:h,type:a,amount:s,currency:v,status:m,updated:n,fee:b}}},{key:"withdraw",value:function(){var e=n(i.mark((function e(t,r,n){var a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.length>3&&void 0!==h[3]?h[3]:void 0,s=h.length>4&&void 0!==h[4]?h[4]:{},this.checkAddress(n),e.next=5,this.loadMarkets();case 5:return o=this.currency(t),void 0!==a&&(n+=":"+a),u={currency:o.id,amount:r,address:n},void 0===(c=this.safeString(s,"otp_code"))&&void 0===this.twofa||(void 0===c&&(c=this.oath()),u.otp_code=c),e.next=12,this.privatePostUserRequestWithdrawal(this.extend(u,s));case 12:return d=e.sent,e.abrupt("return",{info:d,id:void 0});case 14:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.omit(i,this.extractParams(e));e="/"+this.version+"/"+this.implodeParams(e,i),"GET"===r&&Object.keys(s).length&&(e+="?"+this.urlencode(s));var o=this.urls.api+e;if("private"===t){this.checkRequiredCredentials();var u=this.safeInteger2(this.options,"api-expires","expires",parseInt(this.timeout/1e3)),c=this.sum(this.seconds(),u),d=c.toString(),h=r+e+d;n={"api-key":this.encode(this.apiKey),"api-expires":d},"POST"===r&&(n["Content-type"]="application/json",Object.keys(s).length&&(h+=a=this.json(s)));var l=this.hmac(this.encode(h),this.encode(this.secret));n["api-signature"]=l}return{url:o,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,u){if(void 0!==s&&e>=400&&e<=503){var c=this.id+" "+a,d=this.safeString(s,"message");this.throwBroadlyMatchedException(this.exceptions.broad,d,c);var h=e.toString();this.throwExactlyMatchedException(this.exceptions.exact,h,c)}}}]),r}(h)},function(e,t,r){"use strict";var i=r(7),n=r(8),a=r(1),s=r(2),o=r(6),u=r(3),c=r(4),d=r(5),h=r(127),l=r(10).NotSupported;e.exports=function(e){c(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(u(r.prototype),"describe",this).call(this),{id:"huobijp",name:"Huobi Japan",countries:["JP"],hostname:"api-cloud.huobi.co.jp",pro:!0,has:{fetchDepositAddress:!1},urls:{logo:"https://user-images.githubusercontent.com/1294454/85734211-85755480-b705-11ea-8b35-0b7f1db33a2f.jpg",api:{market:"https://{hostname}",public:"https://{hostname}",private:"https://{hostname}"},www:"https://www.huobi.co.jp",referral:"https://www.huobi.co.jp/register/?invite_code=znnq3",doc:"https://api-doc.huobi.co.jp",fees:"https://www.huobi.co.jp/support/fee"}})}},{key:"fetchDepositAddress",value:function(){var e=n(i.mark((function e(t){var r=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw r.length>1&&void 0!==r[1]?r[1]:{},new l(this.id+" fetchDepositAddress not supported yet");case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(h)},function(e,t,r){"use strict";var i=r(7),n=r(8),a=r(1),s=r(2),o=r(6),u=r(3),c=r(4),d=r(5),h=r(11),l=r(18).PAD_WITH_ZERO,f=r(10),p=f.InvalidOrder,v=f.InsufficientFunds,m=f.ExchangeError,g=f.ExchangeNotAvailable,y=f.DDoSProtection,b=f.BadRequest,x=f.NotSupported,k=f.InvalidAddress,w=f.AuthenticationError,_=r(12);e.exports=function(e){c(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(u(r.prototype),"describe",this).call(this),{id:"idex",name:"IDEX",countries:["US"],rateLimit:1500,version:"v2",certified:!0,pro:!0,requiresWeb3:!0,has:{cancelOrder:!0,createOrder:!0,fetchBalance:!0,fetchMarkets:!0,fetchCurrencies:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchClosedOrders:!0,fetchOrders:!1,fetchOrder:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,fetchTransactions:!1,fetchDeposits:!0,fetchWithdrawals:!0,withdraw:!0},timeframes:{"1m":"1m","5m":"5m","15m":"15m","30m":"30m","1h":"1h","6h":"6h","1d":"1d"},urls:{test:{public:"https://api-sandbox.idex.io",private:"https://api-sandbox.idex.io"},logo:"https://user-images.githubusercontent.com/51840849/94481303-2f222100-01e0-11eb-97dd-bc14c5943a86.jpg",api:{ETH:"https://api-eth.idex.io",BSC:"https://api-bsc.idex.io"},www:"https://idex.io",doc:["https://docs.idex.io/"]},api:{public:{get:["ping","time","exchange","assets","markets","tickers","candles","trades","orderbook","wsToken"]},private:{get:["user","wallets","balances","orders","fills","deposits","withdrawals"],post:["wallets","orders","orders/test","withdrawals"],delete:["orders"]}},options:{defaultTimeInForce:"gtc",defaultSelfTradePrevention:"cn",network:"ETH"},exceptions:{INVALID_ORDER_QUANTITY:p,INSUFFICIENT_FUNDS:v,SERVICE_UNAVAILABLE:g,EXCEEDED_RATE_LIMIT:y,INVALID_PARAMETER:b,WALLET_NOT_ASSOCIATED:k,INVALID_WALLET_SIGNATURE:w},requiredCredentials:{walletAddress:!0,privateKey:!0,apiKey:!0,secret:!0},paddingMode:l,commonCurrencies:{},requireCredentials:{privateKey:!0,apiKey:!0,secret:!0}})}},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p,v,m,g,y,b,x=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=x.length>0&&void 0!==x[0]?x[0]:{},e.next=3,this.publicGetMarkets(t);case 3:for(r=e.sent,n=[],a=0;a<r.length;a++)s=r[a],o=this.safeString(s,"market"),u=this.safeString(s,"baseAsset"),c=this.safeString(s,"quoteAsset"),d=this.safeCurrencyCode(u),h=this.safeCurrencyCode(c),l=d+"/"+h,f=this.safeString(s,"baseAssetPrecision"),p=this.safeString(s,"quoteAssetPrecision"),v=void 0===f?void 0:"1e-"+f,m=void 0===p?void 0:"1e-"+p,g=this.safeString(s,"status"),y="active"===g,b={amount:parseInt(f),price:parseInt(p)},n.push({symbol:l,id:o,base:d,quote:h,baseId:u,quoteId:c,active:y,info:s,precision:b,limits:{amount:{min:this.parseNumber(v),max:void 0},price:{min:this.parseNumber(m),max:void 0},cost:{min:void 0,max:void 0}}});return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={market:n.id},e.next=7,this.publicGetTickers(this.extend(a,r));case 7:return s=e.sent,o=this.safeValue(s,0),e.abrupt("return",this.parseTicker(o,n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:void 0,r=a.length>1&&void 0!==a[1]?a[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetTickers(r);case 6:return n=e.sent,e.abrupt("return",this.parseTickers(n,t));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"market"),i=this.safeSymbol(r,t,"-"),n=this.safeNumber(e,"baseVolume"),a=this.safeNumber(e,"quoteVolume"),s=this.safeInteger(e,"time"),o=this.safeNumber(e,"open"),u=this.safeNumber(e,"high"),c=this.safeNumber(e,"low"),d=this.safeNumber(e,"close"),h=this.safeNumber(e,"ask"),l=this.safeNumber(e,"bid"),f=this.safeNumber(e,"percentChange");void 0!==f&&(f=1+f/100);var p=void 0;return void 0!==d&&void 0!==o&&(p=d-o),{symbol:i,timestamp:s,datetime:this.iso8601(s),high:u,low:c,bid:l,bidVolume:void 0,ask:h,askVolume:void 0,vwap:void 0,open:o,close:d,last:d,previousClose:void 0,change:p,percentage:f,average:void 0,baseVolume:n,quoteVolume:a,info:e}}},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:"1m",n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:void 0,s=d.length>4&&void 0!==d[4]?d[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),u={market:o.id,interval:r},void 0!==n&&(u.start=n),void 0!==a&&(u.limit=a),e.next=12,this.publicGetCandles(this.extend(u,s));case 12:if(c=e.sent,!Array.isArray(c)){e.next=17;break}return e.abrupt("return",this.parseOHLCVs(c,o,r,n,a));case 17:return e.abrupt("return",[]);case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){var t=this.safeInteger(e,"start"),r=this.safeNumber(e,"open"),i=this.safeNumber(e,"high"),n=this.safeNumber(e,"low"),a=this.safeNumber(e,"close"),s=this.safeNumber(e,"volume");return[t,r,i,n,a,s]}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={market:s.id},void 0!==r&&(o.start=r),void 0!==n&&(o.limit=n),e.next=11,this.publicGetTrades(this.extend(o,a));case 11:return u=e.sent,e.abrupt("return",this.parseTrades(u,s,r,n));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"fillId"),i=this.safeString(e,"price"),n=this.safeString(e,"quantity"),a=this.parseNumber(i),s=this.parseNumber(n),o=this.safeNumber(e,"quoteQuantity");void 0===o&&(o=this.parseNumber(_.stringMul(i,n)));var u=this.safeInteger(e,"time"),c=this.safeString(e,"market"),d=this.safeSymbol(c,t,"-"),h=this.safeString(e,"makerSide"),l="buy"===h?"sell":"buy",f=this.safeString(e,"side",l),p=this.safeString(e,"liquidity","taker"),v=this.safeNumber(e,"fee"),m=void 0;if(void 0!==v){var g=this.safeString(e,"feeAsset");m={cost:v,currency:this.safeCurrencyCode(g)}}var y=this.safeString(e,"orderId");return{info:e,timestamp:u,datetime:this.iso8601(u),symbol:d,id:r,order:y,type:"limit",side:f,takerOrMaker:p,price:a,amount:s,cost:o,fee:m}}},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:{},e.next=4,this.loadMarkets();case 4:return a=this.market(t),s={market:a.id,level:2},void 0!==r&&(s.limit=r),e.next=9,this.publicGetOrderbook(this.extend(s,n));case 9:return o=e.sent,u=this.safeInteger(o,"sequence"),e.abrupt("return",{timestamp:void 0,datetime:void 0,nonce:u,bids:this.parseSide(o,"bids"),asks:this.parseSide(o,"asks")});case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseSide",value:function(e,t){for(var r=this.safeValue(e,t,[]),i=[],n=0;n<r.length;n++){var a=r[n],s=this.safeNumber(a,0),o=this.safeNumber(a,1),u=this.safeInteger(a,2);i.push([s,o,u])}var c="bids"===t;return this.sortBy(i,0,c)}},{key:"fetchCurrencies",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:{},e.next=3,this.publicGetAssets(t);case 3:for(r=e.sent,n={},a=0;a<r.length;a++)s=r[a],o=this.safeString(s,"name"),u=this.safeString(s,"symbol"),c=this.safeString(s,"exchangeDecimals"),d=this.safeCurrencyCode(u),h=void 0===c?void 0:"1e-"+c,l=this.parseNumber(h),n[d]={id:u,code:d,info:s,type:void 0,name:o,active:void 0,fee:void 0,precision:parseInt(c),limits:{amount:{min:l,max:void 0},withdraw:{min:l,max:void 0}}};return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.length>0&&void 0!==p[0]?p[0]:{},this.checkRequiredCredentials(),e.next=4,this.loadMarkets();case 4:if(r=this.uuidv1(),n={nonce:r,wallet:this.walletAddress},void 0!==(a=this.extend(n,t)).wallet){e.next=9;break}throw new b(this.id+' wallet is undefined, set this.walletAddress or "address" in params');case 9:return s=void 0,e.prev=10,e.next=13,this.privateGetBalances(a);case 13:s=e.sent,e.next=28;break;case 16:if(e.prev=16,e.t0=e.catch(10),!(e.t0 instanceof k)){e.next=27;break}return o=a.wallet,e.next=22,this.associateWallet(o);case 22:return e.next=24,this.privateGetBalances(a);case 24:s=e.sent,e.next=28;break;case 27:throw e.t0;case 28:for(u={info:s},c=0;c<s.length;c++)d=s[c],h=this.safeString(d,"asset"),l=this.safeCurrencyCode(h),(f=this.account()).total=this.safeString(d,"quantity"),f.free=this.safeString(d,"availableForTrade"),f.used=this.safeString(d,"locked"),u[l]=f;return e.abrupt("return",this.parseBalance(u,!1));case 31:case"end":return e.stop()}}),e,this,[[10,16]])})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:{},this.checkRequiredCredentials(),e.next=7,this.loadMarkets();case 7:if(s=void 0,o={nonce:this.uuidv1(),wallet:this.walletAddress},void 0!==t&&(s=this.market(t),o.market=s.id),void 0!==r&&(o.start=r),void 0!==n&&(o.limit=n),void 0!==(u=this.extend(o,a)).wallet){e.next=15;break}throw new b(this.id+' walletAddress is undefined, set this.walletAddress or "address" in params');case 15:return c=void 0,e.prev=16,e.next=19,this.privateGetFills(u);case 19:c=e.sent,e.next=34;break;case 22:if(e.prev=22,e.t0=e.catch(16),!(e.t0 instanceof k)){e.next=33;break}return d=u.wallet,e.next=28,this.associateWallet(d);case 28:return e.next=30,this.privateGetFills(u);case 30:c=e.sent,e.next=34;break;case 33:throw e.t0;case 34:return e.abrupt("return",this.parseTrades(c,s,r,n));case 35:case"end":return e.stop()}}),e,this,[[16,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>1&&void 0!==s[1]?s[1]:void 0,n=s.length>2&&void 0!==s[2]?s[2]:{},a={orderId:t},e.next=5,this.fetchOrdersHelper(r,void 0,void 0,this.extend(a,n));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:void 0,a=o.length>3&&void 0!==o[3]?o[3]:{},s={closed:!1},e.next=7,this.fetchOrdersHelper(t,r,n,this.extend(s,a));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:void 0,a=o.length>3&&void 0!==o[3]?o[3]:{},s={closed:!0},e.next=7,this.fetchOrdersHelper(t,r,n,this.extend(s,a));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrdersHelper",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:void 0,r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},e.next=6,this.loadMarkets();case 6:return s={nonce:this.uuidv1(),wallet:this.walletAddress},o=void 0,void 0!==t&&(o=this.market(t),s.market=o.id),void 0!==r&&(s.start=r),void 0!==n&&(s.limit=n),e.next=13,this.privateGetOrders(this.extend(s,a));case 13:if(u=e.sent,!Array.isArray(u)){e.next=18;break}return e.abrupt("return",this.parseOrders(u,o,r,n));case 18:return e.abrupt("return",this.parseOrder(u,o));case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({active:"open",partiallyFilled:"open",rejected:"canceled",filled:"closed"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeInteger(e,"time"),i=this.safeValue(e,"fills",[]),n=this.safeString(e,"orderId"),a=this.safeString(e,"clientOrderId"),s=this.safeString(e,"market"),o=this.safeString(e,"side"),u=this.safeSymbol(s,t,"-"),c=this.parseTrades(i,t),d=this.safeString(e,"type"),h=this.safeNumber(e,"originalQuantity"),l=this.safeNumber(e,"executedQuantity"),f=this.safeNumber(e,"avgExecutionPrice"),p=this.safeNumber(e,"price"),v=this.safeString(e,"status"),m=this.parseOrderStatus(v);return this.safeOrder({info:e,id:n,clientOrderId:a,timestamp:r,datetime:this.iso8601(r),lastTradeTimestamp:void 0,symbol:u,type:d,timeInForce:void 0,postOnly:void 0,side:o,price:p,stopPrice:void 0,amount:h,cost:void 0,average:f,filled:l,remaining:void 0,status:m,fee:void 0,trades:c})}},{key:"associateWallet",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h.length>1&&void 0!==h[1]?h[1]:{},r=this.uuidv1(),n=this.remove0xPrefix(t),a=[this.base16ToBinary(r),this.base16ToBinary(n)],s=this.binaryConcatArray(a),o=this.hash(s,"keccak","hex"),u=this.signMessageString(o,this.privateKey),c={parameters:{nonce:r,wallet:t},signature:u},e.next=10,this.privatePostWallets(c);case 10:return d=e.sent,e.abrupt("return",d);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,u,c,d,h,l,f,p,v,m,g,y,k,w,_,S,O,T,C,I,M,A,E,N,P,D,L,B,R,V,G,F,q,j,z,H,U,W,K,X=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=X.length>4&&void 0!==X[4]?X[4]:void 0,o=X.length>5&&void 0!==X[5]?X[5]:{},this.checkRequiredCredentials(),e.next=5,this.loadMarkets();case 5:if(u=this.market(t),c=this.uuidv1(),d=void 0,h={stopLoss:3,stopLossLimit:4,takeProfit:5,takeProfitLimit:6},l=void 0,"stopLossLimit"!==r&&"takeProfitLimit"!==r&&!("stopPrice"in o)){e.next=14;break}if("stopPrice"in o){e.next=13;break}throw new b(this.id+" stopPrice is a required parameter for "+r+"orders");case 13:l=this.priceToPrecision(t,o.stopPrice);case 14:if(f={limit:1,limitMaker:2},p=void 0,v=r.toLowerCase(),m=v.indexOf("limit")>-1,!(r in f)){e.next=23;break}d=f[r],p=this.priceToPrecision(t,s),e.next=33;break;case 23:if(!(r in h)){e.next=28;break}d=h[r],p=this.priceToPrecision(t,s),e.next=33;break;case 28:if("market"!==r){e.next=32;break}d=0,e.next=33;break;case 32:throw new b(this.id+" "+r+" is not a valid order type");case 33:if(g=0,!("quoteOrderQuantity"in o)){e.next=39;break}if("market"===r){e.next=37;break}throw new x(this.id+" quoteOrderQuantity is not supported for "+r+" orders, only supported for market orders");case 37:g=1,a=this.safeNumber(o,"quoteOrderQuantity");case 39:if(y="buy"===n?0:1,k=this.remove0xPrefix(this.walletAddress),w=this.safeString(this.options,"network","ETH"),_="ETH"===w?1:2,S=this.amountToPrecision(t,a),O={gtc:0,ioc:2,fok:3},T=this.safeString(this.options,"defaultTimeInForce","gtc"),C=this.safeString(o,"timeInForce",T),I=void 0,!(C in O)){e.next=52;break}I=O[C],e.next=55;break;case 52:throw M=Object.keys(O),A=M.join(", "),new b(this.id+" "+C+" is not a valid timeInForce, please choose one of "+A);case 55:if(E={dc:0,co:1,cn:2,cb:3},N=this.safeString(this.options,"defaultSelfTradePrevention","cn"),P=this.safeString(o,"selfTradePrevention",N),D=void 0,!(P in E)){e.next=63;break}D=E[P],e.next=66;break;case 63:throw L=Object.keys(E),B=L.join(", "),new b(this.id+" "+P+" is not a valid selfTradePrevention, please choose one of "+B);case 66:return R=[this.numberToBE(_,1),this.base16ToBinary(c),this.base16ToBinary(k),this.stringToBinary(this.encode(u.id)),this.numberToBE(d,1),this.numberToBE(y,1),this.stringToBinary(this.encode(S)),this.numberToBE(g,1)],m&&(V=this.stringToBinary(this.encode(p)),R.push(V)),r in h&&(G=this.stringToBinary(this.encode(l||p)),R.push(G)),void 0!==(F=this.safeString(o,"clientOrderId"))&&R.push(this.stringToBinary(this.encode(F))),q=[this.numberToBE(I,1),this.numberToBE(D,1),this.numberToBE(0,8)],j=this.arrayConcat(R,q),z=this.binaryConcatArray(j),H=this.hash(z,"keccak","hex"),U=this.signMessageString(H,this.privateKey),W={parameters:{nonce:c,market:u.id,side:n,type:r,wallet:this.walletAddress,timeInForce:C,selfTradePrevention:P},signature:U},m&&(W.parameters.price=p),r in h&&(W.parameters.stopPrice=l||p),0===g?W.parameters.quantity=S:W.parameters.quoteOrderQuantity=S,void 0!==F&&(W.parameters.clientOrderId=F),e.next=83,this.privatePostOrders(W);case 83:return K=e.sent,e.abrupt("return",this.parseOrder(K,u));case 85:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"withdraw",value:function(){var e=n(i.mark((function e(t,r,n){var a,s,o,u,c,d,h,l,f,p,v,m=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m.length>3&&void 0!==m[3]?m[3]:void 0,m.length>4&&void 0!==m[4]?m[4]:{},this.checkRequiredCredentials(),e.next=5,this.loadMarkets();case 5:return a=this.uuidv1(),s=this.currencyToPrecision(t,r),o=this.currency(t),u=this.remove0xPrefix(this.walletAddress),c=[this.base16ToBinary(a),this.base16ToBinary(u),this.stringToBinary(this.encode(o.id)),this.stringToBinary(this.encode(s)),this.numberToBE(1,1)],d=this.binaryConcatArray(c),h=this.hash(d,"keccak","hex"),l=this.signMessageString(h,this.privateKey),f={parameters:{nonce:a,wallet:n,asset:o.id,quantity:s},signature:l},e.next=16,this.privatePostWithdrawals(f);case 16:return p=e.sent,v=this.safeString(p,"withdrawalId"),e.abrupt("return",{info:p,id:v});case 19:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d,h,l,f,p,v=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=v.length>1&&void 0!==v[1]?v[1]:void 0,n=v.length>2&&void 0!==v[2]?v[2]:{},this.checkRequiredCredentials(),e.next=5,this.loadMarkets();case 5:return a=void 0,void 0!==r&&(a=this.market(r)),s=this.uuidv1(),o=this.remove0xPrefix(this.walletAddress),u=[this.base16ToBinary(s),this.base16ToBinary(o),this.stringToBinary(this.encode(t))],c=this.binaryConcatArray(u),d=this.hash(c,"keccak","hex"),h=this.signMessageString(d,this.privateKey),l={parameters:{nonce:s,wallet:this.walletAddress,orderId:t},signature:h},e.next=16,this.privateDeleteOrders(this.extend(l,n));case 16:return f=e.sent,p=this.safeValue(f,0),e.abrupt("return",this.parseOrder(p,a));case 19:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,u){var c=this.safeString(s,"code"),d=this.safeString(s,"message");if(c in this.exceptions)throw new(0,this.exceptions[c])(this.id+" "+d);if(void 0!==c)throw new m(this.id+" "+d)}},{key:"fetchDeposits",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:void 0,n=s.length>2&&void 0!==s[2]?s[2]:void 0,a=s.length>3&&void 0!==s[3]?s[3]:{},a=this.extend({method:"privateGetDeposits"},a),e.abrupt("return",this.fetchTransactionsHelper(t,r,n,a));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchWithdrawals",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:void 0,n=s.length>2&&void 0!==s[2]?s[2]:void 0,a=s.length>3&&void 0!==s[3]?s[3]:{},a=this.extend({method:"privateGetWithdrawals"},a),e.abrupt("return",this.fetchTransactionsHelper(t,r,n,a));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTransactionsHelper",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:{},e.next=6,this.loadMarkets();case 6:return s=this.uuidv1(),o={nonce:s,wallet:this.walletAddress},u=void 0,void 0!==t&&(u=this.currency(t),o.asset=u.id),void 0!==r&&(o.start=r),void 0!==n&&(o.limit=n),c=a.method,a=this.omit(a,"method"),e.next=16,this[c](this.extend(o,a));case 16:return d=e.sent,e.abrupt("return",this.parseTransactions(d,u,r,n));case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTransactionStatus",value:function(e){return this.safeString({mined:"ok"},e,e)}},{key:"parseTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0;"depositId"in e?r="deposit":"withdrawalId"in e&&(r="withdrawal");var i=this.safeString2(e,"depositId","withdrawId"),n=this.safeCurrencyCode(this.safeString(e,"asset"),t),a=this.safeNumber(e,"quantity"),s=this.safeString(e,"txId"),o=this.safeInteger(e,"txTime"),u=void 0;"fee"in e&&(u={cost:this.safeNumber(e,"fee"),currency:"ETH"});var c=this.safeString(e,"txStatus"),d=this.parseTransactionStatus(c),h=this.safeInteger(e,"confirmationTime");return{info:e,id:i,txid:s,timestamp:o,datetime:this.iso8601(o),address:void 0,tag:void 0,type:r,amount:a,currency:n,status:d,updated:h,fee:u}}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.safeString(this.options,"network","ETH"),o=this.safeString(this.options,"version","v1"),u=this.urls.api[s]+"/"+o+"/"+e,c=Object.keys(i),d=c.length,h=void 0;if(d>0&&("GET"===r?u=u+"?"+(h=this.urlencode(i)):a=this.json(i)),n={"Content-Type":"application/json"},void 0!==this.apiKey&&(n["IDEX-API-Key"]=this.apiKey),"private"===t){var l=void 0;l="GET"===r?h:a,n["IDEX-HMAC-Signature"]=this.hmac(this.encode(l),this.encode(this.secret),"sha256","hex")}return{url:u,method:r,body:a,headers:n}}}]),r}(h)},function(e,t,r){"use strict";var i=r(7),n=r(8),a=r(1),s=r(2),o=r(6),u=r(3),c=r(4),d=r(5),h=r(11),l=r(12);e.exports=function(e){c(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(u(r.prototype),"describe",this).call(this),{id:"independentreserve",name:"Independent Reserve",countries:["AU","NZ"],rateLimit:1e3,has:{cancelOrder:!0,CORS:!1,createOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTrades:!0},urls:{logo:"https://user-images.githubusercontent.com/51840849/87182090-1e9e9080-c2ec-11ea-8e49-563db9a38f37.jpg",api:{public:"https://api.independentreserve.com/Public",private:"https://api.independentreserve.com/Private"},www:"https://www.independentreserve.com",doc:"https://www.independentreserve.com/API"},api:{public:{get:["GetValidPrimaryCurrencyCodes","GetValidSecondaryCurrencyCodes","GetValidLimitOrderTypes","GetValidMarketOrderTypes","GetValidOrderTypes","GetValidTransactionTypes","GetMarketSummary","GetOrderBook","GetAllOrders","GetTradeHistorySummary","GetRecentTrades","GetFxRates"]},private:{post:["PlaceLimitOrder","PlaceMarketOrder","CancelOrder","GetOpenOrders","GetClosedOrders","GetClosedFilledOrders","GetOrderDetails","GetAccounts","GetTransactions","GetDigitalCurrencyDepositAddress","GetDigitalCurrencyDepositAddresses","SynchDigitalCurrencyDepositAddressWithBlockchain","WithdrawDigitalCurrency","RequestFiatWithdrawal","GetTrades","GetBrokerageFees"]}},fees:{trading:{taker:.005,maker:.005,percentage:!0,tierBased:!1}},commonCurrencies:{PLA:"PlayChip"}})}},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.length>0&&void 0!==p[0]?p[0]:{},e.next=3,this.publicGetGetValidPrimaryCurrencyCodes(t);case 3:return r=e.sent,e.next=6,this.publicGetGetValidSecondaryCurrencyCodes(t);case 6:for(n=e.sent,a=[],s=0;s<r.length;s++)for(o=r[s],u=this.safeCurrencyCode(o),c=0;c<n.length;c++)d=n[c],h=this.safeCurrencyCode(d),l=o+"/"+d,f=u+"/"+h,a.push({id:l,symbol:f,base:u,quote:h,baseId:o,quoteId:d,info:l,active:void 0,precision:this.precision,limits:this.limits});return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privatePostGetAccounts(t);case 5:for(r=e.sent,n={info:r},a=0;a<r.length;a++)s=r[a],o=this.safeString(s,"CurrencyCode"),u=this.safeCurrencyCode(o),(c=this.account()).free=this.safeString(s,"AvailableBalance"),c.total=this.safeString(s,"TotalBalance"),n[u]=c;return e.abrupt("return",this.parseBalance(n,!1));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u.length>1&&void 0!==u[1]?u[1]:void 0,r=u.length>2&&void 0!==u[2]?u[2]:{},e.next=4,this.loadMarkets();case 4:return n=this.market(t),a={primaryCurrencyCode:n.baseId,secondaryCurrencyCode:n.quoteId},e.next=8,this.publicGetGetOrderBook(this.extend(a,r));case 8:return s=e.sent,o=this.parse8601(this.safeString(s,"CreatedTimestampUtc")),e.abrupt("return",this.parseOrderBook(s,o,"BuyOrders","SellOrders","Price","Volume"));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.parse8601(this.safeString(e,"CreatedTimestampUtc")),i=void 0;t&&(i=t.symbol);var n=this.safeNumber(e,"LastPrice");return{symbol:i,timestamp:r,datetime:this.iso8601(r),high:this.safeNumber(e,"DayHighestPrice"),low:this.safeNumber(e,"DayLowestPrice"),bid:this.safeNumber(e,"CurrentHighestBidPrice"),bidVolume:void 0,ask:this.safeNumber(e,"CurrentLowestOfferPrice"),askVolume:void 0,vwap:void 0,open:void 0,close:n,last:n,previousClose:void 0,change:void 0,percentage:void 0,average:this.safeNumber(e,"DayAvgPrice"),baseVolume:this.safeNumber(e,"DayVolumeXbtInSecondaryCurrrency"),quoteVolume:void 0,info:e}}},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={primaryCurrencyCode:n.baseId,secondaryCurrencyCode:n.quoteId},e.next=7,this.publicGetGetMarketSummary(this.extend(a,r));case 7:return s=e.sent,e.abrupt("return",this.parseTicker(s,n));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0,i=this.safeString(e,"PrimaryCurrencyCode"),n=this.safeString(e,"SecondaryCurrencyCode"),a=void 0;void 0!==i&&void 0!==n?r=(a=this.safeCurrencyCode(i))+"/"+this.safeCurrencyCode(n):void 0!==t&&(r=t.symbol,a=t.base,t.quote);var s=this.safeString2(e,"Type","OrderType"),o=void 0;s.indexOf("Bid")>=0?o="buy":s.indexOf("Offer")>=0&&(o="sell"),s.indexOf("Market")>=0?s="market":s.indexOf("Limit")>=0&&(s="limit");var u=this.parse8601(this.safeString(e,"CreatedTimestampUtc")),c=this.safeNumber2(e,"VolumeOrdered","Volume"),d=this.safeNumber(e,"VolumeFilled"),h=this.safeNumber(e,"Outstanding"),l=this.safeNumber(e,"FeePercent"),f=void 0;void 0!==l&&(f=l*d);var p={rate:l,cost:f,currency:a},v=this.safeString(e,"OrderGuid"),m=this.parseOrderStatus(this.safeString(e,"Status")),g=this.safeNumber(e,"Value"),y=this.safeNumber(e,"AvgPrice"),b=this.safeNumber(e,"Price");return this.safeOrder({info:e,id:v,clientOrderId:void 0,timestamp:u,datetime:this.iso8601(u),lastTradeTimestamp:void 0,symbol:r,type:s,timeInForce:void 0,postOnly:void 0,side:o,price:b,stopPrice:void 0,cost:g,average:y,amount:c,filled:d,remaining:h,status:m,fee:p,trades:void 0})}},{key:"parseOrderStatus",value:function(e){return this.safeString({Open:"open",PartiallyFilled:"open",Filled:"closed",PartiallyFilledAndCancelled:"canceled",Cancelled:"canceled",PartiallyFilledAndExpired:"canceled",Expired:"canceled"},e,e)}},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.privatePostGetOrderDetails(this.extend({orderGuid:t},n));case 6:return a=e.sent,s=void 0,void 0!==r&&(s=this.market(r)),e.abrupt("return",this.parseOrder(a,s));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return s=this.ordered({}),o=void 0,void 0!==t&&(o=this.market(t),s.primaryCurrencyCode=o.baseId,s.secondaryCurrencyCode=o.quoteId),void 0===n&&(n=50),s.pageIndex=1,s.pageSize=n,e.next=14,this.privatePostGetOpenOrders(this.extend(s,a));case 14:return u=e.sent,c=this.safeValue(u,"Data",[]),e.abrupt("return",this.parseOrders(c,o,r,n));case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return s=this.ordered({}),o=void 0,void 0!==t&&(o=this.market(t),s.primaryCurrencyCode=o.baseId,s.secondaryCurrencyCode=o.quoteId),void 0===n&&(n=50),s.pageIndex=1,s.pageSize=n,e.next=14,this.privatePostGetClosedOrders(this.extend(s,a));case 14:return u=e.sent,c=this.safeValue(u,"Data",[]),e.abrupt("return",this.parseOrders(c,o,r,n));case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:50,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return s=this.safeInteger(a,"pageIndex",1),void 0===n&&(n=50),o=this.ordered({pageIndex:s,pageSize:n}),e.next=11,this.privatePostGetTrades(this.extend(o,a));case 11:return u=e.sent,c=void 0,void 0!==t&&(c=this.market(t)),e.abrupt("return",this.parseTrades(u.Data,c,r,n));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.parse8601(e.TradeTimestampUtc),i=this.safeString(e,"TradeGuid"),n=this.safeString(e,"OrderGuid"),a=this.safeString2(e,"Price","SecondaryCurrencyTradePrice"),s=this.safeString2(e,"VolumeTraded","PrimaryCurrencyAmount"),o=this.parseNumber(a),u=this.parseNumber(s),c=this.parseNumber(l.stringMul(a,s)),d=this.safeString(e,"PrimaryCurrencyCode"),h=this.safeString(e,"SecondaryCurrencyCode"),f=void 0;void 0!==d&&void 0!==h&&(f=d+"/"+h);var p=this.safeSymbol(f,t,"/"),v=this.safeString(e,"OrderType");return void 0!==v&&(v.indexOf("Bid")>=0?v="buy":v.indexOf("Offer")>=0&&(v="sell")),{id:i,info:e,timestamp:r,datetime:this.iso8601(r),symbol:p,order:n,type:void 0,side:v,takerOrMaker:void 0,price:o,amount:u,cost:c,fee:void 0}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={primaryCurrencyCode:s.baseId,secondaryCurrencyCode:s.quoteId,numberOfRecentTradesToRetrieve:50},e.next=9,this.publicGetGetRecentTrades(this.extend(o,a));case 9:return u=e.sent,e.abrupt("return",this.parseTrades(u.Trades,s,r,n));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,u,c,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=p.length>4&&void 0!==p[4]?p[4]:void 0,o=p.length>5&&void 0!==p[5]?p[5]:{},e.next=4,this.loadMarkets();case 4:return u=this.market(t),c=this.capitalize(r),d="privatePostPlace"+c+"Order",h=c,h+="sell"===n?"Offer":"Bid",l=this.ordered({primaryCurrencyCode:u.baseId,secondaryCurrencyCode:u.quoteId,orderType:h}),"limit"===r&&(l.price=s),l.volume=a,e.next=14,this[d](this.extend(l,o));case 14:return f=e.sent,e.abrupt("return",{info:f,id:f.OrderGuid});case 16:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:{},e.next=4,this.loadMarkets();case 4:return n={orderGuid:t},e.next=7,this.privatePostCancelOrder(this.extend(n,r));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.urls.api[t]+"/"+e;if("public"===t)Object.keys(i).length&&(s+="?"+this.urlencode(i));else{this.checkRequiredCredentials();for(var o=this.nonce(),u=[s,"apiKey="+this.apiKey,"nonce="+o.toString()],c=Object.keys(i),d=0;d<c.length;d++){var h=c[d],l=i[h].toString();u.push(h+"="+l)}var f=u.join(","),p=this.hmac(this.encode(f),this.encode(this.secret)),v=this.ordered({});v.apiKey=this.apiKey,v.nonce=o,v.signature=p.toUpperCase();for(var m=0;m<c.length;m++){var g=c[m];v[g]=i[g]}a=this.json(v),n={"Content-Type":"application/json"}}return{url:s,method:r,body:a,headers:n}}}]),r}(h)},function(e,t,r){"use strict";var i=r(7),n=r(8),a=r(1),s=r(2),o=r(6),u=r(3),c=r(4),d=r(5),h=r(11),l=r(10),f=l.ExchangeError,p=l.ArgumentsRequired,v=l.InsufficientFunds,m=l.InvalidOrder,g=l.OrderNotFound,y=l.AuthenticationError,b=l.BadSymbol,x=r(12);e.exports=function(e){c(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(u(r.prototype),"describe",this).call(this),{id:"indodax",name:"INDODAX",countries:["ID"],has:{cancelOrder:!0,CORS:!1,createMarketOrder:!1,createOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchCurrencies:!1,fetchMarkets:!0,fetchMyTrades:!1,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!1,fetchTicker:!0,fetchTickers:!1,fetchTime:!0,fetchTrades:!0,withdraw:!0},version:"2.0",urls:{logo:"https://user-images.githubusercontent.com/51840849/87070508-9358c880-c221-11ea-8dc5-5391afbbb422.jpg",api:{public:"https://indodax.com/api",private:"https://indodax.com/tapi"},www:"https://www.indodax.com",doc:"https://github.com/btcid/indodax-official-api-docs",referral:"https://indodax.com/ref/testbitcoincoid/1"},api:{public:{get:["server_time","pairs","{pair}/ticker","{pair}/trades","{pair}/depth"]},private:{post:["getInfo","transHistory","trade","tradeHistory","getOrder","openOrders","cancelOrder","orderHistory","withdrawCoin"]}},fees:{trading:{tierBased:!1,percentage:!0,maker:0,taker:.003}},exceptions:{exact:{invalid_pair:b,"Insufficient balance.":v,"invalid order.":g,"Invalid credentials. API not found or session has expired.":y,"Invalid credentials. Bad sign.":y},broad:{"Minimum price":m,"Minimum order":m}},options:{recvWindow:5e3,timeDifference:0,adjustForTimeDifference:!1},commonCurrencies:{STR:"XLM",BCHABC:"BCH",BCHSV:"BSV",DRK:"DASH",NEM:"XEM"}})}},{key:"nonce",value:function(){return this.milliseconds()-this.options.timeDifference}},{key:"fetchTime",value:function(){var e=n(i.mark((function e(){var t,r,n=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},e.next=3,this.publicGetServerTime(t);case 3:return r=e.sent,e.abrupt("return",this.safeInteger(r,"server_time"));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadTimeDifference",value:function(){var e=n(i.mark((function e(){var t,r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},e.next=3,this.fetchTime(t);case 3:return r=e.sent,n=this.milliseconds(),this.options.timeDifference=n-r,e.abrupt("return",this.options.timeDifference);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p,v,m,g,y,b=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=b.length>0&&void 0!==b[0]?b[0]:{},e.next=3,this.publicGetPairs(t);case 3:for(r=e.sent,n=[],a=0;a<r.length;a++)s=r[a],o=this.safeString(s,"ticker_id"),u=this.safeString(s,"traded_currency"),c=this.safeString(s,"base_currency"),d=this.safeCurrencyCode(u),h=this.safeCurrencyCode(c),l=d+"/"+h,f=this.safeNumber(s,"trade_fee_percent"),p=this.safeInteger(s,"is_maintenance"),v=!p,m=this.safeInteger(s,"price_round"),g={amount:8,price:m},y={amount:{min:this.safeNumber(s,"trade_min_traded_currency"),max:void 0},price:{min:this.safeNumber(s,"trade_min_base_currency"),max:void 0},cost:{min:void 0,max:void 0}},n.push({id:o,symbol:l,base:d,quote:h,baseId:u,quoteId:c,taker:f,percentage:!0,precision:g,limits:y,info:s,active:v});return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privatePostGetInfo(t);case 5:for(r=e.sent,n=this.safeValue(r,"return",{}),a=this.safeValue(n,"balance",{}),s=this.safeValue(n,"balance_hold",{}),o={info:r},u=Object.keys(a),c=0;c<u.length;c++)d=u[c],h=this.safeCurrencyCode(d),(l=this.account()).free=this.safeString(a,d),l.used=this.safeString(s,d),o[h]=l;return e.abrupt("return",this.parseBalance(o,!1));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.loadMarkets();case 4:return n={pair:this.marketId(t)},e.next=7,this.publicGetPairDepth(this.extend(n,r));case 7:return a=e.sent,e.abrupt("return",this.parseOrderBook(a,void 0,"buy","sell"));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>1&&void 0!==l[1]?l[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={pair:n.id},e.next=7,this.publicGetPairTicker(this.extend(a,r));case 7:return s=e.sent,o=s.ticker,u=this.safeTimestamp(o,"server_time"),c="vol_"+n.baseId.toLowerCase(),d="vol_"+n.quoteId.toLowerCase(),h=this.safeNumber(o,"last"),e.abrupt("return",{symbol:t,timestamp:u,datetime:this.iso8601(u),high:this.safeNumber(o,"high"),low:this.safeNumber(o,"low"),bid:this.safeNumber(o,"buy"),bidVolume:void 0,ask:this.safeNumber(o,"sell"),askVolume:void 0,vwap:void 0,open:void 0,close:h,last:h,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeNumber(o,c),quoteVolume:this.safeNumber(o,d),info:o});case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeTimestamp(e,"date"),i=this.safeString(e,"tid"),n=void 0;void 0!==t&&(n=t.symbol);var a=void 0,s=this.safeString(e,"type"),o=this.safeString(e,"price"),u=this.safeString(e,"amount"),c=this.parseNumber(o),d=this.parseNumber(u),h=this.parseNumber(x.stringMul(o,u));return{id:i,info:e,timestamp:r,datetime:this.iso8601(r),symbol:n,type:a,side:s,order:void 0,takerOrMaker:void 0,price:c,amount:d,cost:h,fee:void 0}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={pair:s.id},e.next=9,this.publicGetPairTrades(this.extend(o,a));case 9:return u=e.sent,e.abrupt("return",this.parseTrades(u,s,r,n));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({open:"open",filled:"closed",cancelled:"canceled"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0;"type"in e&&(r=e.type);var i=this.parseOrderStatus(this.safeString(e,"status","open")),n=void 0,a=void 0,s=this.safeNumber(e,"price"),o=void 0,u=void 0;if(void 0!==t){n=t.symbol;var c=t.quoteId,d=t.baseId;"idr"===t.quoteId&&"order_rp"in e&&(c="rp"),"idr"===t.baseId&&"remain_rp"in e&&(d="rp"),(a=this.safeNumber(e,"order_"+c))||(o=this.safeNumber(e,"order_"+d),u=this.safeNumber(e,"remain_"+d))}var h=this.safeInteger(e,"submit_time"),l=void 0,f=this.safeString(e,"order_id");return this.safeOrder({info:e,id:f,clientOrderId:void 0,timestamp:h,datetime:this.iso8601(h),lastTradeTimestamp:void 0,symbol:n,type:"limit",timeInForce:void 0,postOnly:void 0,side:r,price:s,stopPrice:void 0,cost:a,average:void 0,amount:o,filled:void 0,remaining:u,status:i,fee:l,trades:void 0})}},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:{},void 0!==r){e.next=4;break}throw new p(this.id+" fetchOrder() requires a symbol");case 4:return e.next=6,this.loadMarkets();case 6:return a=this.market(r),s={pair:a.id,order_id:t},e.next=10,this.privatePostGetOrder(this.extend(s,n));case 10:return o=e.sent,u=o.return,c=this.parseOrder(this.extend({id:t},u.order),a),e.abrupt("return",this.extend({info:o},c));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p,v,m=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=m.length>0&&void 0!==m[0]?m[0]:void 0,r=m.length>1&&void 0!==m[1]?m[1]:void 0,n=m.length>2&&void 0!==m[2]?m[2]:void 0,a=m.length>3&&void 0!==m[3]?m[3]:{},e.next=6,this.loadMarkets();case 6:return s=void 0,o={},void 0!==t&&(s=this.market(t),o.pair=s.id),e.next=11,this.privatePostOpenOrders(this.extend(o,a));case 11:if(u=e.sent,c=u.return.orders){e.next=15;break}return e.abrupt("return",[]);case 15:if(void 0===t){e.next=17;break}return e.abrupt("return",this.parseOrders(c,s,r,n));case 17:for(d=Object.keys(c),h=[],l=0;l<d.length;l++)f=d[l],p=c[f],s=this.markets_by_id[f],v=this.parseOrders(p,s,r,n),h=this.arrayConcat(h,v);return e.abrupt("return",h);case 21:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},void 0!==t){e.next=6;break}throw new p(this.id+" fetchOrders() requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return s={},o=void 0,void 0!==t&&(o=this.market(t),s.pair=o.id),e.next=13,this.privatePostOrderHistory(this.extend(s,a));case 13:return u=e.sent,c=this.parseOrders(u.return.orders,o),c=this.filterBy(c,"status","closed"),e.abrupt("return",this.filterBySymbolSinceLimit(c,t,r,n));case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,u,c,d,h,l,p,v=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=v.length>4&&void 0!==v[4]?v[4]:void 0,o=v.length>5&&void 0!==v[5]?v[5]:{},"limit"===r){e.next=4;break}throw new f(this.id+" allows limit orders only");case 4:return e.next=6,this.loadMarkets();case 6:return u=this.market(t),c={pair:u.id,type:n,price:s},d=u.baseId,"buy"===n?c[u.quoteId]=a*s:c[u.baseId]=a,c[d]=a,e.next=13,this.privatePostTrade(this.extend(c,o));case 13:return h=e.sent,l=this.safeValue(h,"return",{}),p=this.safeString(l,"order_id"),e.abrupt("return",{info:h,id:p});case 17:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:{},void 0!==r){e.next=4;break}throw new p(this.id+" cancelOrder() requires a symbol argument");case 4:if(void 0!==(a=this.safeValue(n,"side"))){e.next=7;break}throw new p(this.id+' cancelOrder() requires an extra "side" param');case 7:return e.next=9,this.loadMarkets();case 9:return s=this.market(r),o={order_id:t,pair:s.id,type:a},e.next=13,this.privatePostCancelOrder(this.extend(o,n));case 13:return e.abrupt("return",e.sent);case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"withdraw",value:function(){var e=n(i.mark((function e(t,r,n){var a,s,o,u,c,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=l.length>3&&void 0!==l[3]?l[3]:void 0,s=l.length>4&&void 0!==l[4]?l[4]:{},this.checkAddress(n),e.next=5,this.loadMarkets();case 5:return o=this.currency(t),u=this.milliseconds(),c={currency:o.id,withdraw_amount:r,withdraw_address:n,request_id:u.toString()},a&&(c.withdraw_memo=a),e.next=11,this.privatePostWithdrawCoin(this.extend(c,s));case 11:return d=e.sent,h=void 0,"txid"in d&&d.txid.length>0&&(h=d.txid),e.abrupt("return",{info:d,id:h});case 15:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.urls.api[t];return"public"===t?s+="/"+this.implodeParams(e,i):(this.checkRequiredCredentials(),a=this.urlencode(this.extend({method:e,timestamp:this.nonce(),recvWindow:this.options.recvWindow},i)),n={"Content-Type":"application/x-www-form-urlencoded",Key:this.apiKey,Sign:this.hmac(this.encode(a),this.encode(this.secret),"sha512")}),{url:s,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,u){if(void 0!==s&&!Array.isArray(s)){var c=this.safeValue(s,"error","");if("success"in s||""!==c){if(1===this.safeInteger(s,"success",0)){if("return"in s)return;throw new f(this.id+": malformed response: "+this.json(s))}var d=this.id+" "+a;throw this.throwExactlyMatchedException(this.exceptions.exact,c,d),this.throwBroadlyMatchedException(this.exceptions.broad,c,d),new f(d)}}}}]),r}(h)},function(e,t,r){"use strict";var i=r(7),n=r(8),a=r(1),s=r(2),o=r(6),u=r(3),c=r(4),d=r(5),h=r(11),l=r(10),f=l.ExchangeError,p=l.AuthenticationError,v=l.ArgumentsRequired,m=r(12);e.exports=function(e){c(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(u(r.prototype),"describe",this).call(this),{id:"itbit",name:"itBit",countries:["US"],rateLimit:2e3,version:"v1",has:{cancelOrder:!0,CORS:!0,createMarketOrder:!1,createOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchMyTrades:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchTicker:!0,fetchTrades:!0,fetchTransactions:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/27822159-66153620-60ad-11e7-89e7-005f6d7f3de0.jpg",api:"https://api.itbit.com",www:"https://www.itbit.com",doc:["https://api.itbit.com/docs","https://www.itbit.com/api"]},api:{public:{get:["markets/{symbol}/ticker","markets/{symbol}/order_book","markets/{symbol}/trades"]},private:{get:["wallets","wallets/{walletId}","wallets/{walletId}/balances/{currencyCode}","wallets/{walletId}/funding_history","wallets/{walletId}/trades","wallets/{walletId}/orders","wallets/{walletId}/orders/{id}"],post:["wallet_transfers","wallets","wallets/{walletId}/cryptocurrency_deposits","wallets/{walletId}/cryptocurrency_withdrawals","wallets/{walletId}/orders","wire_withdrawal"],delete:["wallets/{walletId}/orders/{id}"]}},markets:{"BTC/USD":{id:"XBTUSD",symbol:"BTC/USD",base:"BTC",quote:"USD",baseId:"XBT",quoteId:"USD"},"BTC/SGD":{id:"XBTSGD",symbol:"BTC/SGD",base:"BTC",quote:"SGD",baseId:"XBT",quoteId:"SGD"},"BTC/EUR":{id:"XBTEUR",symbol:"BTC/EUR",base:"BTC",quote:"EUR",baseId:"XBT",quoteId:"EUR"},"ETH/USD":{id:"ETHUSD",symbol:"ETH/USD",base:"ETH",quote:"USD",baseId:"ETH",quoteId:"USD"},"ETH/EUR":{id:"ETHEUR",symbol:"ETH/EUR",base:"ETH",quote:"EUR",baseId:"ETH",quoteId:"EUR"},"ETH/SGD":{id:"ETHSGD",symbol:"ETH/SGD",base:"ETH",quote:"SGD",baseId:"ETH",quoteId:"SGD"},PAXGUSD:{id:"PAXGUSD",symbol:"PAXG/USD",base:"PAXG",quote:"USD",baseId:"PAXG",quoteId:"USD"},BCHUSD:{id:"BCHUSD",symbol:"BCH/USD",base:"BCH",quote:"USD",baseId:"BCH",quoteId:"USD"},LTCUSD:{id:"LTCUSD",symbol:"LTC/USD",base:"LTC",quote:"USD",baseId:"LTC",quoteId:"USD"}},fees:{trading:{maker:-3e-4,taker:.35/100}},commonCurrencies:{XBT:"BTC"}})}},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.loadMarkets();case 4:return n={symbol:this.marketId(t)},e.next=7,this.publicGetMarketsSymbolOrderBook(this.extend(n,r));case 7:return a=e.sent,e.abrupt("return",this.parseOrderBook(a));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>1&&void 0!==l[1]?l[1]:{},e.next=3,this.loadMarkets();case 3:return n={symbol:this.marketId(t)},e.next=6,this.publicGetMarketsSymbolTicker(this.extend(n,r));case 6:if(a=e.sent,s=this.safeString(a,"serverTimeUTC")){e.next=10;break}throw new f(this.id+" fetchTicker returned a bad response: "+this.json(a));case 10:return o=this.parse8601(s),u=this.safeNumber(a,"vwap24h"),c=this.safeNumber(a,"volume24h"),d=void 0,void 0!==c&&void 0!==u&&(d=c*u),h=this.safeNumber(a,"lastPrice"),e.abrupt("return",{symbol:t,timestamp:o,datetime:this.iso8601(o),high:this.safeNumber(a,"high24h"),low:this.safeNumber(a,"low24h"),bid:this.safeNumber(a,"bid"),bidVolume:void 0,ask:this.safeNumber(a,"ask"),askVolume:void 0,vwap:u,open:this.safeNumber(a,"openToday"),close:h,last:h,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:c,quoteVolume:d,info:a});case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString2(e,"executionId","matchNumber"),i=this.parse8601(this.safeString(e,"timestamp")),n=this.safeString(e,"direction"),a=this.safeString(e,"orderId"),s=this.safeNumber(e,"commissionPaid"),o=this.safeString(e,"commissionCurrency"),u=this.safeCurrencyCode(o),c=this.safeNumber(e,"rebatesApplied");void 0!==c&&(c=-c);var d=this.safeString(e,"rebateCurrency"),h=this.safeCurrencyCode(d),l=this.safeString2(e,"price","rate"),f=this.safeString2(e,"currency1Amount","amount"),p=this.parseNumber(l),v=this.parseNumber(f),g=this.parseNumber(m.stringMul(l,f)),y=void 0,b=this.safeString(e,"instrument");if(void 0!==b)if(b in this.markets_by_id)t=this.markets_by_id[b];else{var x=this.safeString(e,"currency1"),k=this.safeString(e,"currency2"),w=this.safeCurrencyCode(x),_=this.safeCurrencyCode(k);y=w+"/"+_}void 0===y&&void 0!==t&&(y=t.symbol);var S={info:e,id:r,timestamp:i,datetime:this.iso8601(i),symbol:y,order:a,type:void 0,side:n,takerOrMaker:void 0,price:p,amount:v,cost:g,fee:void 0};return void 0!==s&&(void 0!==c?u===h?(s=this.sum(s,c),S.fee={cost:s,currency:u}):S.fees=[{cost:s,currency:u},{cost:c,currency:h}]:S.fee={cost:s,currency:u}),"fee"in S||"fees"in S||(S.fee=void 0),S}},{key:"fetchTransactions",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p,m,g,y,b,x=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x.length>0&&void 0!==x[0]?x[0]:void 0,x.length>1&&void 0!==x[1]?x[1]:void 0,t=x.length>2&&void 0!==x[2]?x[2]:void 0,r=x.length>3&&void 0!==x[3]?x[3]:{},e.next=6,this.loadMarkets();case 6:if(void 0!==(n=this.safeString(r,"walletId"))){e.next=9;break}throw new v(this.id+" fetchMyTrades() requires a walletId parameter");case 9:return a={walletId:n},void 0!==t&&(a.perPage=t),e.next=13,this.privateGetWalletsWalletIdFundingHistory(this.extend(a,r));case 13:for(s=e.sent,o=s.fundingHistory,u=[],c=0;c<o.length;c++)d=o[c],h=this.safeString(d,"time"),l=this.parse8601(h),f=this.safeString(d,"currency"),p=this.safeString(d,"destinationAddress"),m=this.safeString(d,"txnHash"),g=this.safeStringLower(d,"transactionType"),y=this.safeString(d,"status"),b=this.parseTransferStatus(y),u.push({id:this.safeString(d,"withdrawalId"),timestamp:l,datetime:this.iso8601(l),currency:this.safeCurrencyCode(f),address:p,tag:void 0,txid:m,type:g,status:b,amount:this.safeNumber(d,"amount"),fee:void 0,info:d});return e.abrupt("return",u);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTransferStatus",value:function(e){return this.safeString({cancelled:"canceled",completed:"ok"},e,"pending")}},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:{},e.next=6,this.loadMarkets();case 6:if(void 0!==(s=this.safeString(a,"walletId"))){e.next=9;break}throw new f(this.id+" fetchMyTrades() requires a walletId parameter");case 9:return o={walletId:s},void 0!==r&&(o.rangeStart=this.ymdhms(r,"T")),void 0!==n&&(o.perPage=n),e.next=14,this.privateGetWalletsWalletIdTrades(this.extend(o,a));case 14:return u=e.sent,c=this.safeValue(u,"tradingHistory",[]),d=void 0,void 0!==t&&(d=this.market(t)),e.abrupt("return",this.parseTrades(c,d,r,n));case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={symbol:s.id},e.next=9,this.publicGetMarketsSymbolTrades(this.extend(o,a));case 9:return u=e.sent,c=this.safeValue(u,"recentTrades",[]),e.abrupt("return",this.parseTrades(c,s,r,n));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.fetchWallets(t);case 5:for(r=e.sent,n=r[0].balances,a={info:r},s=0;s<n.length;s++)o=n[s],u=this.safeString(o,"currency"),c=this.safeCurrencyCode(u),(d=this.account()).free=this.safeString(o,"availableBalance"),d.total=this.safeString(o,"totalBalance"),a[c]=d;return e.abrupt("return",this.parseBalance(a,!1));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchWallets",value:function(){var e=n(i.mark((function e(){var t,r,n=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},e.next=3,this.loadMarkets();case 3:if(this.uid){e.next=5;break}throw new p(this.id+" fetchWallets() requires uid API credential");case 5:return r={userId:this.uid},e.next=8,this.privateGetWallets(this.extend(r,t));case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchWallet",value:function(){var e=n(i.mark((function e(t){var r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:{},e.next=3,this.loadMarkets();case 3:return n={walletId:t},e.next=6,this.privateGetWalletsWalletId(this.extend(n,r));case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:void 0,a=o.length>3&&void 0!==o[3]?o[3]:{},s={status:"open"},e.next=7,this.fetchOrders(t,r,n,this.extend(s,a));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:void 0,a=o.length>3&&void 0!==o[3]?o[3]:{},s={status:"filled"},e.next=7,this.fetchOrders(t,r,n,this.extend(s,a));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:if(s=void 0,void 0!==t&&(s=this.market(t)),"walletId"in a){e.next=11;break}throw new f(this.id+" fetchOrders() requires a walletId parameter");case 11:return o=a.walletId,u={walletId:o},e.next=15,this.privateGetWalletsWalletIdOrders(this.extend(u,a));case 15:return c=e.sent,e.abrupt("return",this.parseOrders(c,s,r,n));case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({submitted:"open",open:"open",filled:"closed",cancelled:"canceled",rejected:"canceled"},e,e)}},{key:"parseOrder",value:function(e){var t=this.safeString(e,"side"),r=this.safeString(e,"type"),i=this.markets_by_id[e.instrument].symbol,n=this.parse8601(e.createdTime),a=this.safeNumber(e,"amount"),s=this.safeNumber(e,"amountFilled"),o=void 0,u=this.safeNumber(e,"price"),c=this.safeNumber(e,"volumeWeightedAveragePrice"),d=this.safeString(e,"clientOrderIdentifier"),h=this.safeString(e,"id"),l=this.safeString(e,"postOnly"),f="True"===l;return this.safeOrder({id:h,clientOrderId:d,info:e,timestamp:n,datetime:this.iso8601(n),lastTradeTimestamp:void 0,status:this.parseOrderStatus(this.safeString(e,"status")),symbol:i,type:r,timeInForce:void 0,postOnly:f,side:t,price:u,stopPrice:void 0,cost:void 0,average:c,amount:a,filled:s,remaining:void 0,fee:o,trades:void 0})}},{key:"nonce",value:function(){return this.milliseconds()}},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=h.length>4&&void 0!==h[4]?h[4]:void 0,o=h.length>5&&void 0!==h[5]?h[5]:{},e.next=4,this.loadMarkets();case 4:if("market"!==r){e.next=6;break}throw new f(this.id+" allows limit orders only");case 6:if("walletId"in o){e.next=9;break}throw new f(this.id+" createOrder() requires a walletId parameter");case 9:return a=a.toString(),s=s.toString(),u=this.market(t),c={side:n,type:r,currency:u.id.replace(u.quote,""),amount:a,display:a,price:s,instrument:u.id},e.next=15,this.privatePostWalletsWalletIdOrders(this.extend(c,o));case 15:return d=e.sent,e.abrupt("return",{info:d,id:d.id});case 17:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.loadMarkets();case 4:if("walletId"in r){e.next=7;break}throw new f(this.id+" fetchOrder() requires a walletId parameter");case 7:return n={id:t},e.next=10,this.privateGetWalletsWalletIdOrdersId(this.extend(n,r));case 10:return a=e.sent,e.abrupt("return",this.parseOrder(a));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:{},"walletId"in r){e.next=5;break}throw new f(this.id+" cancelOrder() requires a walletId parameter");case 5:return n={id:t},e.next=8,this.privateDeleteWalletsWalletIdOrdersId(this.extend(n,r));case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.urls.api+"/"+this.version+"/"+this.implodeParams(e,i),o=this.omit(i,this.extractParams(e));if("GET"===r&&Object.keys(o).length&&(s+="?"+this.urlencode(o)),"POST"===r&&Object.keys(o).length&&(a=this.json(o)),"private"===t){this.checkRequiredCredentials();var u=this.nonce().toString(),c=u,d="POST"===r?a:"",h=[r,s,d,u,c],l=u+this.json(h).replace("\\/","/"),f=this.hash(this.encode(l),"sha256","binary"),p=this.stringToBinary(this.encode(s)),v=this.binaryConcat(p,f),m=this.hmac(v,this.encode(this.secret),"sha512","base64");n={Authorization:this.apiKey+":"+m,"Content-Type":"application/json","X-Auth-Timestamp":c,"X-Auth-Nonce":u}}return{url:s,method:r,body:a,headers:n}}},{key:"request",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:"public",n=c.length>2&&void 0!==c[2]?c[2]:"GET",a=c.length>3&&void 0!==c[3]?c[3]:{},s=c.length>4&&void 0!==c[4]?c[4]:void 0,o=c.length>5&&void 0!==c[5]?c[5]:void 0,e.next=7,this.fetch2(t,r,n,a,s,o);case 7:if(!("code"in(u=e.sent))){e.next=10;break}throw new f(this.id+" "+this.json(u));case 10:return e.abrupt("return",u);case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(h)},function(e,t,r){"use strict";var i=r(7),n=r(8),a=r(1),s=r(2),o=r(6),u=r(3),c=r(4),d=r(5),h=r(11),l=r(10),f=l.BadSymbol,p=l.ExchangeNotAvailable,v=l.ArgumentsRequired,m=l.PermissionDenied,g=l.AuthenticationError,y=l.ExchangeError,b=l.OrderNotFound,x=l.DDoSProtection,k=l.InvalidNonce,w=l.InsufficientFunds,_=l.CancelPending,S=l.InvalidOrder,O=l.InvalidAddress,T=l.RateLimitExceeded,C=r(18),I=C.TRUNCATE,M=C.DECIMAL_PLACES,A=r(12);e.exports=function(e){c(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(u(r.prototype),"describe",this).call(this),{id:"kraken",name:"Kraken",countries:["US"],version:"0",rateLimit:3e3,certified:!0,pro:!0,has:{cancelAllOrders:!0,cancelOrder:!0,CORS:!1,createDepositAddress:!0,createOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchCurrencies:!0,fetchDepositAddress:!0,fetchDeposits:!0,fetchLedger:!0,fetchLedgerEntry:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrderTrades:"emulated",fetchTicker:!0,fetchTickers:!0,fetchTime:!0,fetchTrades:!0,fetchTradingFee:!0,fetchTradingFees:!0,fetchWithdrawals:!0,withdraw:!0},marketsByAltname:{},timeframes:{"1m":1,"5m":5,"15m":15,"30m":30,"1h":60,"4h":240,"1d":1440,"1w":10080,"2w":21600},urls:{logo:"https://user-images.githubusercontent.com/51840849/76173629-fc67fb00-61b1-11ea-84fe-f2de582f58a3.jpg",api:{public:"https://api.kraken.com",private:"https://api.kraken.com",zendesk:"https://kraken.zendesk.com/api/v2/help_center/en-us/articles"},www:"https://www.kraken.com",doc:"https://www.kraken.com/features/api",fees:"https://www.kraken.com/en-us/features/fee-schedule"},fees:{trading:{tierBased:!0,percentage:!0,taker:.0026,maker:.0016,tiers:{taker:[[0,.0026],[5e4,.0024],[1e5,.0022],[25e4,.002],[5e5,.0018],[1e6,.0016],[25e5,.0014],[5e6,.0012],[1e7,1e-4]],maker:[[0,.0016],[5e4,.0014],[1e5,.0012],[25e4,.001],[5e5,8e-4],[1e6,6e-4],[25e5,4e-4],[5e6,2e-4],[1e7,0]]}},funding:{tierBased:!1,percentage:!1,withdraw:{BTC:.001,ETH:.005,XRP:.02,XLM:2e-5,LTC:.02,DOGE:2,ZEC:1e-4,ICN:.02,REP:.01,ETC:.005,MLN:.003,XMR:.05,DASH:.005,GNO:.01,EOS:.5,BCH:.001,XTZ:.05,USD:5,EUR:5,CAD:10,JPY:300},deposit:{BTC:0,ETH:0,XRP:0,XLM:0,LTC:0,DOGE:0,ZEC:0,ICN:0,REP:0,ETC:0,MLN:0,XMR:0,DASH:0,GNO:0,EOS:0,BCH:0,XTZ:.05,USD:5,EUR:0,CAD:5,JPY:0}}},api:{zendesk:{get:["360000292886","201893608"]},public:{get:["Assets","AssetPairs","Depth","OHLC","Spread","Ticker","Time","Trades"]},private:{post:["AddOrder","AddExport","Balance","CancelAll","CancelOrder","ClosedOrders","DepositAddresses","DepositMethods","DepositStatus","ExportStatus","GetWebSocketsToken","Ledgers","OpenOrders","OpenPositions","QueryLedgers","QueryOrders","QueryTrades","RetrieveExport","RemoveExport","TradeBalance","TradesHistory","TradeVolume","Withdraw","WithdrawCancel","WithdrawInfo","WithdrawStatus"]}},commonCurrencies:{XBT:"BTC","XBT.M":"BTC.M",XDG:"DOGE",REPV2:"REP",REP:"REPV1"},options:{cacheDepositMethodsOnFetchDepositAddress:!0,depositMethods:{},delistedMarketsById:{},inactiveCurrencies:["CAD","USD","JPY","GBP"]},exceptions:{"EQuery:Invalid asset pair":f,"EAPI:Invalid key":g,"EFunding:Unknown withdraw key":y,"EFunding:Invalid amount":w,"EService:Unavailable":p,"EDatabase:Internal error":p,"EService:Busy":p,"EQuery:Unknown asset":y,"EAPI:Rate limit exceeded":x,"EOrder:Rate limit exceeded":x,"EGeneral:Internal error":p,"EGeneral:Temporary lockout":x,"EGeneral:Permission denied":m,"EOrder:Unknown order":S,"EOrder:Order minimum not met":S}})}},{key:"costToPrecision",value:function(e,t){return this.decimalToPrecision(t,I,this.markets[e].precision.price,M)}},{key:"feeToPrecision",value:function(e,t){return this.decimalToPrecision(t,I,this.markets[e].precision.amount,M)}},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p,v,m,g,y,b,x,k,w,_,S,O,T,C=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=C.length>0&&void 0!==C[0]?C[0]:{},e.next=3,this.publicGetAssetPairs(t);case 3:for(r=e.sent,n=this.safeValue(r,"result",{}),a=Object.keys(n),s=[],o=0;o<a.length;o++)u=a[o],c=n[u],d=this.safeString(c,"base"),h=this.safeString(c,"quote"),l=this.safeCurrencyCode(d),f=this.safeCurrencyCode(h),p=u.indexOf(".d")>=0,v=this.safeString(c,"altname"),m=p?v:l+"/"+f,g=this.safeValue(c,"fees_maker",[]),y=this.safeValue(g,0,[]),b=this.safeNumber(y,1),x=void 0,void 0!==b&&(x=parseFloat(b)/100),k=this.safeValue(c,"fees",[]),w=this.safeValue(k,0,[]),_=this.safeNumber(w,1),S=void 0,void 0!==_&&(S=parseFloat(_)/100),O={amount:this.safeInteger(c,"lot_decimals"),price:this.safeInteger(c,"pair_decimals")},T=this.safeNumber(c,"ordermin"),s.push({id:u,symbol:m,base:l,quote:f,baseId:d,quoteId:h,darkpool:p,info:c,altname:c.altname,maker:x,taker:S,active:!0,precision:O,limits:{amount:{min:T,max:Math.pow(10,O.amount)},price:{min:Math.pow(10,-O.price),max:void 0},cost:{min:0,max:void 0}}});return s=this.appendInactiveMarkets(s),this.marketsByAltname=this.indexBy(s,"altname"),e.abrupt("return",s);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"safeCurrency",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;if(e.length>3&&(0===e.indexOf("X")||0===e.indexOf("Z"))){if(e.indexOf(".")>0)return o(u(r.prototype),"safeCurrency",this).call(this,e,t);e=e.slice(1)}return o(u(r.prototype),"safeCurrency",this).call(this,e,t)}},{key:"appendInactiveMarkets",value:function(e){for(var t={amount:8,price:8},r={min:0,max:void 0},i={min:Math.pow(10,-t.price),max:void 0},n={darkpool:!1,info:void 0,maker:void 0,taker:void 0,active:!1,precision:t,limits:{amount:{min:Math.pow(10,-t.amount),max:Math.pow(10,t.amount)},price:i,cost:r}},a=[],s=0;s<a.length;s++)e.push(this.extend(n,a[s]));return e}},{key:"fetchCurrencies",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:{},e.next=3,this.publicGetAssets(t);case 3:for(r=e.sent,n=this.safeValue(r,"result"),a=Object.keys(n),s={},o=0;o<a.length;o++)u=a[o],c=n[u],d=this.safeCurrencyCode(this.safeString(c,"altname")),h=this.safeInteger(c,"decimals"),l=!this.inArray(d,this.options.inactiveCurrencies),s[d]={id:u,code:d,info:c,name:d,active:l,fee:void 0,precision:h,limits:{amount:{min:Math.pow(10,-h),max:Math.pow(10,h)},withdraw:{min:void 0,max:Math.pow(10,h)}}};return e.abrupt("return",s);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTradingFees",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:{},e.next=3,this.loadMarkets();case 3:return this.checkRequiredCredentials(),e.next=6,this.privatePostTradeVolume(t);case 6:for(r=e.sent,n=this.safeNumber(r.result,"volume"),a=this.fees.trading.tiers,s=a.taker[1],o=a.maker[1],u=0;u<a.taker.length;u++)n>=a.taker[u][0]&&(s=a.taker[u][1]);for(c=0;c<a.maker.length;c++)n>=a.maker[c][0]&&(o=a.maker[c][1]);return e.abrupt("return",{info:r,maker:o,taker:s});case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseBidAsk",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=this.safeNumber(e,t),n=this.safeNumber(e,r),a=this.safeInteger(e,2);return[i,n,a]}},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>1&&void 0!==l[1]?l[1]:void 0,n=l.length>2&&void 0!==l[2]?l[2]:{},e.next=4,this.loadMarkets();case 4:if(!(a=this.market(t)).darkpool){e.next=7;break}throw new y(this.id+" does not provide an order book for darkpool symbol "+t);case 7:return s={pair:a.id},void 0!==r&&(s.count=r),e.next=11,this.publicGetDepth(this.extend(s,n));case 11:return o=e.sent,u=this.safeValue(o,"result",{}),c=this.safeValue(u,a.id),d=this.safeValue(a,"info",{}),void 0!==(h=this.safeValue(d,"wsname"))&&(c=this.safeValue(u,h,c)),e.abrupt("return",this.parseOrderBook(c));case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.milliseconds(),i=void 0;t&&(i=t.symbol);var n=parseFloat(e.v[1]),a=parseFloat(e.p[1]),s=void 0;void 0!==n&&void 0!==a&&(s=n*a);var o=parseFloat(e.c[0]);return{symbol:i,timestamp:r,datetime:this.iso8601(r),high:parseFloat(e.h[1]),low:parseFloat(e.l[1]),bid:parseFloat(e.b[0]),bidVolume:void 0,ask:parseFloat(e.a[0]),askVolume:void 0,vwap:a,open:this.safeNumber(e,"o"),close:o,last:o,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:n,quoteVolume:s,info:e}}},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p,v,m,g,y=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=y.length>0&&void 0!==y[0]?y[0]:void 0,r=y.length>1&&void 0!==y[1]?y[1]:{},e.next=4,this.loadMarkets();case 4:for(t=void 0===t?this.symbols:t,n=[],a=0;a<t.length;a++)s=t[a],(o=this.markets[s]).active&&!o.darkpool&&n.push(o.id);return u={pair:n.join(",")},e.next=10,this.publicGetTicker(this.extend(u,r));case 10:for(c=e.sent,d=c.result,h=Object.keys(d),l={},f=0;f<h.length;f++)p=h[f],v=this.markets_by_id[p],m=v.symbol,g=d[p],l[m]=this.parseTicker(g,v);return e.abrupt("return",this.filterByArray(l,"symbol",t));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:{},e.next=3,this.loadMarkets();case 3:if(!(t.indexOf(".d")>=0)){e.next=6;break}throw new y(this.id+" does not provide a ticker for darkpool symbol "+t);case 6:return n=this.market(t),a={pair:n.id},e.next=10,this.publicGetTicker(this.extend(a,r));case 10:return s=e.sent,o=s.result[n.id],e.abrupt("return",this.parseTicker(o,n));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){return[this.safeTimestamp(e,0),this.safeNumber(e,1),this.safeNumber(e,2),this.safeNumber(e,3),this.safeNumber(e,4),this.safeNumber(e,6)]}},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>1&&void 0!==l[1]?l[1]:"1m",n=l.length>2&&void 0!==l[2]?l[2]:void 0,a=l.length>3&&void 0!==l[3]?l[3]:void 0,s=l.length>4&&void 0!==l[4]?l[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),u={pair:o.id,interval:this.timeframes[r]},void 0!==n&&(u.since=parseInt((n-1)/1e3)),e.next=11,this.publicGetOHLC(this.extend(u,s));case 11:return c=e.sent,d=this.safeValue(c,"result",{}),h=this.safeValue(d,o.id,[]),e.abrupt("return",this.parseOHLCVs(h,o,r,n,a));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseLedgerEntryType",value:function(e){return this.safeString({trade:"trade",withdrawal:"transaction",deposit:"transaction",transfer:"transfer",margin:"margin"},e,e)}},{key:"parseLedgerEntry",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),i=void 0,n=void 0,a=this.safeString(e,"refid"),s=void 0,o=this.parseLedgerEntryType(this.safeString(e,"type")),u=this.safeCurrencyCode(this.safeString(e,"asset"),t),c=this.safeNumber(e,"amount");c<0?(i="out",c=Math.abs(c)):i="in";var d=this.safeNumber(e,"time"),h=void 0;void 0!==d&&(h=parseInt(1e3*d));var l={cost:this.safeNumber(e,"fee"),currency:u},f=void 0,p=this.safeNumber(e,"balance"),v="ok";return{info:e,id:r,direction:i,account:n,referenceId:a,referenceAccount:s,type:o,currency:u,amount:c,before:f,after:p,status:v,timestamp:h,datetime:this.iso8601(h),fee:l}}},{key:"fetchLedger",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p,v,m=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=m.length>0&&void 0!==m[0]?m[0]:void 0,r=m.length>1&&void 0!==m[1]?m[1]:void 0,n=m.length>2&&void 0!==m[2]?m[2]:void 0,a=m.length>3&&void 0!==m[3]?m[3]:{},e.next=6,this.loadMarkets();case 6:return s={},o=void 0,void 0!==t&&(o=this.currency(t),s.asset=o.id),void 0!==r&&(s.start=parseInt(r/1e3)),e.next=12,this.privatePostLedgers(this.extend(s,a));case 12:for(u=e.sent,c=this.safeValue(u,"result",{}),d=this.safeValue(c,"ledger",{}),h=Object.keys(d),l=[],f=0;f<h.length;f++)p=h[f],(v=d[p]).id=p,l.push(v);return e.abrupt("return",this.parseLedger(l,o,r,n));case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchLedgerEntriesByIds",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l.length>1&&void 0!==l[1]?l[1]:void 0,r=l.length>2&&void 0!==l[2]?l[2]:{},e.next=4,this.loadMarkets();case 4:return t=t.join(","),n=this.extend({id:t},r),e.next=8,this.privatePostQueryLedgers(n);case 8:for(a=e.sent,s=a.result,o=Object.keys(s),u=[],c=0;c<o.length;c++)d=o[c],(h=s[d]).id=d,u.push(h);return e.abrupt("return",this.parseLedger(u));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchLedgerEntry",value:function(){var e=n(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>1&&void 0!==s[1]?s[1]:void 0,n=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.fetchLedgerEntriesByIds([t],r,n);case 4:return a=e.sent,e.abrupt("return",a[0]);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0,i=void 0,n=void 0,a=void 0,s=void 0,o=void 0,u=void 0,c=void 0,d=void 0;if(Array.isArray(e)){r=this.safeTimestamp(e,2),i="s"===e[3]?"sell":"buy",n="l"===e[4]?"limit":"market",a=this.safeString(e,0),s=this.safeString(e,1);var h=e.length;h>6&&(o=this.safeString(e,6))}else if("string"===typeof e)o=e;else if("ordertxid"in e){var l=this.safeString(e,"pair"),f=this.findMarketByAltnameOrId(l);if(void 0!==f?t=f:void 0!==l&&(t=this.getDelistedMarketById(l)),u=this.safeString(e,"ordertxid"),o=this.safeString2(e,"id","postxid"),r=this.safeTimestamp(e,"time"),i=this.safeString(e,"type"),n=this.safeString(e,"ordertype"),a=this.safeString(e,"price"),s=this.safeString(e,"vol"),"fee"in e){var p=void 0;void 0!==t&&(p=t.quote),c={cost:this.safeNumber(e,"fee"),currency:p}}}void 0!==t&&(d=t.symbol);var v=this.parseNumber(a),m=this.parseNumber(s),g=this.parseNumber(A.stringMul(a,s));return{id:o,order:u,info:e,timestamp:r,datetime:this.iso8601(r),symbol:d,type:n,side:i,takerOrMaker:void 0,price:v,amount:m,cost:g,fee:c}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d,h,l,f,p,v=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=v.length>1&&void 0!==v[1]?v[1]:void 0,n=v.length>2&&void 0!==v[2]?v[2]:void 0,a=v.length>3&&void 0!==v[3]?v[3]:{},e.next=5,this.loadMarkets();case 5:if(s=this.market(t),o=s.id,u={pair:o},void 0!==r&&(u.since=1e6*r,u.since=r.toString()+"000000"),void 0===n||1e3===n){e.next=13;break}if(!this.safeValue(this.options,"fetchTradesWarning",!0)){e.next=13;break}throw new y(this.id+" fetchTrades() cannot serve "+n.toString()+" trades without breaking the pagination, see https://github.com/ccxt/ccxt/issues/5698 for more details. Set exchange.options['fetchTradesWarning'] to acknowledge this warning and silence it.");case 13:return e.next=15,this.publicGetTrades(this.extend(u,a));case 15:if(c=e.sent,d=c.result,h=d[o],!((l=h.length)<=0)){e.next=21;break}return e.abrupt("return",[]);case 21:return f=h[l-1],p=this.safeString(d,"last"),f.push(p),e.abrupt("return",this.parseTrades(h,s,r,n));case 25:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privatePostBalance(t);case 5:for(r=e.sent,n=this.safeValue(r,"result",{}),a={info:n},s=Object.keys(n),o=0;o<s.length;o++)u=s[o],c=this.safeCurrencyCode(u),(d=this.account()).total=this.safeString(n,u),a[c]=d;return e.abrupt("return",this.parseBalance(a,!1));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,u,c,d,h,l,f,p,m,g,y,b=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=b.length>4&&void 0!==b[4]?b[4]:void 0,o=b.length>5&&void 0!==b[5]?b[5]:{},e.next=4,this.loadMarkets();case 4:if(u=this.market(t),c={pair:u.id,type:n,ordertype:r,volume:this.amountToPrecision(t,a)},d=this.safeString2(o,"userref","clientOrderId"),o=this.omit(o,["userref","clientOrderId"]),void 0!==d&&(c.userref=d),"limit"!==r){e.next=13;break}c.price=this.priceToPrecision(t,s),e.next=37;break;case 13:if("stop-loss"!==r&&"take-profit"!==r){e.next=22;break}if(void 0!==(h=this.safeNumber2(o,"price","stopPrice",s))){e.next=19;break}throw new v(this.id+" createOrder() requires a price argument or a price/stopPrice parameter for a "+r+" order");case 19:c.price=this.priceToPrecision(t,h);case 20:e.next=37;break;case 22:if("stop-loss-limit"!==r&&"take-profit-limit"!==r){e.next=37;break}if(l=this.safeNumber2(o,"price","stopPrice"),f=this.safeNumber(o,"price2"),m=void 0!==f,!(p=void 0!==l)||!m){e.next=32;break}c.price=this.priceToPrecision(t,l),c.price2=this.priceToPrecision(t,f),e.next=37;break;case 32:if(void 0!==s&&(p||m)){e.next=36;break}throw new v(this.id+" createOrder() requires a price argument and/or price/stopPrice/price2 parameters for a "+r+" order");case 36:p?(c.price=this.priceToPrecision(t,l),c.price2=this.priceToPrecision(t,s)):m&&(c.price=this.priceToPrecision(t,s),c.price2=this.priceToPrecision(t,f));case 37:return o=this.omit(o,["price","stopPrice","price2"]),e.next=40,this.privatePostAddOrder(this.extend(c,o));case 40:return g=e.sent,y=this.safeValue(g,"result"),e.abrupt("return",this.parseOrder(y));case 43:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"findMarketByAltnameOrId",value:function(e){return e in this.marketsByAltname?this.marketsByAltname[e]:e in this.markets_by_id?this.markets_by_id[e]:void 0}},{key:"getDelistedMarketById",value:function(e){if(void 0===e)return e;var t=this.safeValue(this.options.delistedMarketsById,e);if(void 0!==t)return t;var r=3,i=3,n=6;8===e.length?(r=4,i=4,n=8):7===e.length&&(r=4,i=4,n=7);var a=e.slice(0,r),s=e.slice(i,n),o=this.safeCurrencyCode(a),u=this.safeCurrencyCode(s);return t={symbol:o+"/"+u,base:o,quote:u,baseId:a,quoteId:s},this.options.delistedMarketsById[e]=t,t}},{key:"parseOrderStatus",value:function(e){return this.safeString({pending:"open",open:"open",closed:"closed",canceled:"canceled",expired:"expired"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeValue(e,"descr",{}),i=this.safeString(r,"order"),n=void 0,a=void 0,s=void 0,o=void 0,u=void 0;if(void 0!==i){var c=i.split(" ");n=this.safeString(c,0),u=this.safeNumber(c,1),s=this.safeString(c,2),a=this.safeString(c,4),o=this.safeNumber(c,5)}n=this.safeString(r,"type",n),a=this.safeString(r,"ordertype",a),s=this.safeString(r,"pair",s);var d=this.findMarketByAltnameOrId(s),h=void 0;void 0!==d?t=d:void 0!==s&&(t=this.getDelistedMarketById(s));var l=this.safeTimestamp(e,"opentm");u=this.safeNumber(e,"vol",u);var f=this.safeNumber(e,"vol_exec"),p=void 0,v=this.safeNumber(e,"cost");void 0!==(o=this.safeNumber(r,"price",o))&&0!==o||(o=this.safeNumber(r,"price2")),void 0!==o&&0!==o||(o=this.safeNumber(e,"price",o));var m=this.safeNumber(e,"price");if(void 0!==t&&(h=t.symbol,"fee"in e)){var g=e.oflags,y=this.safeNumber(e,"fee");p={cost:y,rate:void 0},g.indexOf("fciq")>=0?p.currency=t.quote:g.indexOf("fcib")>=0&&(p.currency=t.base)}var b=this.parseOrderStatus(this.safeString(e,"status")),x=this.safeString(e,"id");if(void 0===x){var k=this.safeValue(e,"txid");x=this.safeString(k,0)}var w=this.safeString(e,"userref"),_=this.safeValue(e,"trades"),S=void 0;void 0!==_&&(S=this.parseTrades(_,t,void 0,void 0,{order:x}));var O=this.safeNumber(e,"stopprice");return this.safeOrder({id:x,clientOrderId:w,info:e,timestamp:l,datetime:this.iso8601(l),lastTradeTimestamp:void 0,status:b,symbol:h,type:a,timeInForce:void 0,postOnly:void 0,side:n,price:o,stopPrice:O,cost:v,amount:u,filled:f,average:m,remaining:void 0,fee:p,trades:S})}},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d.length>1&&void 0!==d[1]?d[1]:void 0,r=d.length>2&&void 0!==d[2]?d[2]:{},e.next=4,this.loadMarkets();case 4:return n=this.safeValue2(r,"userref","clientOrderId"),a={trades:!0},s=r,void 0!==n?(a.userref=n,s=this.omit(r,["userref","clientOrderId"])):a.txid=t,e.next=10,this.privatePostQueryOrders(this.extend(a,s));case 10:if(o=e.sent,u=this.safeValue(o,"result",[]),t in u){e.next=14;break}throw new b(this.id+" fetchOrder() could not find order id "+t);case 14:return c=this.parseOrder(this.extend({id:t},u[t])),e.abrupt("return",this.extend({info:o},c));case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrderTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d,h,l,f,p,m,g,y,b,x,k,w,_,S,O,T,C,I=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=I.length>1&&void 0!==I[1]?I[1]:void 0,n=I.length>2&&void 0!==I[2]?I[2]:void 0,a=I.length>3&&void 0!==I[3]?I[3]:void 0,s=I.length>4&&void 0!==I[4]?I[4]:{},o=this.safeValue(s,"trades"),u=[],void 0!==o){e.next=10;break}throw new v(this.id+" fetchOrderTrades() requires a unified order structure in the params argument or a 'trades' param (an array of trade id strings)");case 10:for(c=0;c<o.length;c++)"string"===typeof(d=o[c])?u.push(d):u.push(d.id);case 11:return e.next=13,this.loadMarkets();case 13:h=this.safeValue(this.options,"fetchOrderTrades",{}),l=this.safeInteger(h,"batchSize",20),f=parseInt(u/l),f=this.sum(f,1),p=u.length,m=[],g=0;case 20:if(!(g<f)){e.next=36;break}for(y=[],b=0;b<l;b++)(x=this.sum(g*l,b))<p&&y.push(u[x]);return k={txid:y.join(",")},e.next=26,this.privatePostQueryTrades(k);case 26:for(w=e.sent,_=this.safeValue(w,"result"),S=Object.keys(_),O=0;O<S.length;O++)_[S[O]].id=S[O];T=this.parseTrades(_,void 0,n,a),C=this.filterBySymbol(T,r),m=this.arrayConcat(m,C);case 33:g++,e.next=20;break;case 36:return e.abrupt("return",m);case 37:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrdersByIds",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l.length>1&&void 0!==l[1]?l[1]:void 0,r=l.length>2&&void 0!==l[2]?l[2]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.privatePostQueryOrders(this.extend({trades:!0,txid:t.join(",")},r));case 6:for(n=e.sent,a=this.safeValue(n,"result",{}),s=[],o=Object.keys(a),u=0;u<o.length;u++)c=o[u],d=a[c],h=this.parseOrder(this.extend({id:c},d)),s.push(h);return e.abrupt("return",s);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:void 0,r=l.length>1&&void 0!==l[1]?l[1]:void 0,n=l.length>2&&void 0!==l[2]?l[2]:void 0,a=l.length>3&&void 0!==l[3]?l[3]:{},e.next=6,this.loadMarkets();case 6:return s={},void 0!==r&&(s.start=parseInt(r/1e3)),e.next=10,this.privatePostTradesHistory(this.extend(s,a));case 10:for(o=e.sent,u=o.result.trades,c=Object.keys(u),d=0;d<c.length;d++)u[c[d]].id=c[d];return h=void 0,void 0!==t&&(h=this.market(t)),e.abrupt("return",this.parseTrades(u,h,r,n));case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:{},e.next=4,this.loadMarkets();case 4:return n=void 0,e.prev=5,e.next=8,this.privatePostCancelOrder(this.extend({txid:t},r));case 8:n=e.sent,e.next=17;break;case 11:if(e.prev=11,e.t0=e.catch(5),!this.last_http_response){e.next=16;break}if(!(this.last_http_response.indexOf("EOrder:Unknown order")>=0)){e.next=16;break}throw new b(this.id+" cancelOrder() error "+this.last_http_response);case 16:throw e.t0;case 17:return e.abrupt("return",n);case 18:case"end":return e.stop()}}),e,this,[[5,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"cancelAllOrders",value:function(){var e=n(i.mark((function e(){var t,r=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.length>0&&void 0!==r[0]?r[0]:void 0,t=r.length>1&&void 0!==r[1]?r[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.privatePostCancelAll(t);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:{},e.next=6,this.loadMarkets();case 6:return s={},void 0!==r&&(s.start=parseInt(r/1e3)),e.next=10,this.privatePostOpenOrders(this.extend(s,a));case 10:return o=e.sent,u=void 0,void 0!==t&&(u=this.market(t)),c=this.safeValue(o,"result",{}),d=this.safeValue(c,"open",[]),e.abrupt("return",this.parseOrders(d,u,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:{},e.next=6,this.loadMarkets();case 6:return s={},void 0!==r&&(s.start=parseInt(r/1e3)),e.next=10,this.privatePostClosedOrders(this.extend(s,a));case 10:return o=e.sent,u=void 0,void 0!==t&&(u=this.market(t)),c=this.safeValue(o,"result",{}),d=this.safeValue(c,"closed",[]),e.abrupt("return",this.parseOrders(d,u,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchDepositMethods",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.currency(t),a={asset:n.id},e.next=7,this.privatePostDepositMethods(this.extend(a,r));case 7:return s=e.sent,e.abrupt("return",this.safeValue(s,"result"));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTransactionStatus",value:function(e){return this.safeString({Initial:"pending",Pending:"pending",Success:"ok",Settled:"pending",Failure:"failed",Partial:"ok"},e,e)}},{key:"parseTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"refid"),i=this.safeString(e,"txid"),n=this.safeTimestamp(e,"time"),a=this.safeString(e,"asset"),s=this.safeCurrencyCode(a,t),o=this.safeString(e,"info"),u=this.safeNumber(e,"amount"),c=this.parseTransactionStatus(this.safeString(e,"status")),d=this.safeString(e,"type"),h=this.safeNumber(e,"fee");return void 0===h&&"deposit"===d&&(h=0),{info:e,id:r,currency:s,amount:u,address:o,tag:void 0,status:c,type:d,updated:void 0,txid:i,timestamp:n,datetime:this.iso8601(n),fee:{currency:s,cost:h}}}},{key:"parseTransactionsByType",value:function(e,t){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=[],s=0;s<t.length;s++){var o=this.parseTransaction(this.extend({type:e},t[s]));a.push(o)}return this.filterByCurrencySinceLimit(a,r,i,n)}},{key:"fetchDeposits",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=c.length>0&&void 0!==c[0]?c[0]:void 0,r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},void 0!==t){e.next=6;break}throw new v(this.id+" fetchDeposits() requires a currency code argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.currency(t),o={asset:s.id},e.next=12,this.privatePostDepositStatus(this.extend(o,a));case 12:return u=e.sent,e.abrupt("return",this.parseTransactionsByType("deposit",u.result,t,r,n));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTime",value:function(){var e=n(i.mark((function e(){var t,r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},e.next=3,this.publicGetTime(t);case 3:return r=e.sent,n=this.safeValue(r,"result",{}),e.abrupt("return",this.safeTimestamp(n,"unixtime"));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchWithdrawals",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=c.length>0&&void 0!==c[0]?c[0]:void 0,r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},void 0!==t){e.next=6;break}throw new v(this.id+" fetchWithdrawals() requires a currency code argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.currency(t),o={asset:s.id},e.next=12,this.privatePostWithdrawStatus(this.extend(o,a));case 12:return u=e.sent,e.abrupt("return",this.parseTransactionsByType("withdrawal",u.result,t,r,n));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createDepositAddress",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},n={new:"true"},e.next=4,this.fetchDepositAddress(t,this.extend(n,r));case 4:return a=e.sent,s=this.safeString(a,"address"),this.checkAddress(s),e.abrupt("return",{currency:t,address:s,info:a});case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchDepositAddress",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:{},e.next=3,this.loadMarkets();case 3:if(n=this.currency(t),void 0!==(a=this.safeString(r,"method"))){e.next=15;break}if(!this.options.cacheDepositMethodsOnFetchDepositAddress){e.next=14;break}if(t in this.options.depositMethods){e.next=11;break}return e.next=10,this.fetchDepositMethods(t);case 10:this.options.depositMethods[t]=e.sent;case 11:a=this.options.depositMethods[t][0].method,e.next=15;break;case 14:throw new v(this.id+' fetchDepositAddress() requires an extra `method` parameter. Use fetchDepositMethods ("'+t+'") to get a list of available deposit methods or enable the exchange property .options["cacheDepositMethodsOnFetchDepositAddress"] = true');case 15:return s={asset:n.id,method:a},e.next=18,this.privatePostDepositAddresses(this.extend(s,r));case 18:if(o=e.sent,u=o.result,!(u.length<1)){e.next=23;break}throw new O(this.id+" privatePostDepositAddresses() returned no addresses");case 23:return c=this.safeString(u[0],"address"),d=this.safeString2(u[0],"tag","memo"),this.checkAddress(c),e.abrupt("return",{currency:t,address:c,tag:d,info:o});case 27:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"withdraw",value:function(){var e=n(i.mark((function e(t,r,n){var a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.length>3&&void 0!==c[3]?c[3]:void 0,a=c.length>4&&void 0!==c[4]?c[4]:{},this.checkAddress(n),!("key"in a)){e.next=12;break}return e.next=6,this.loadMarkets();case 6:return s=this.currency(t),o={asset:s.id,amount:r},e.next=10,this.privatePostWithdraw(this.extend(o,a));case 10:return u=e.sent,e.abrupt("return",{info:u,id:u.result});case 12:throw new y(this.id+" withdraw() requires a 'key' parameter (withdrawal key name, as set up on your account)");case 13:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"fetchPositions",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>0&&void 0!==s[0]?s[0]:void 0,t=s.length>1&&void 0!==s[1]?s[1]:{},e.next=4,this.loadMarkets();case 4:return r={},e.next=7,this.privatePostOpenPositions(this.extend(r,t));case 7:return n=e.sent,a=this.safeValue(n,"result"),e.abrupt("return",a);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s="/"+this.version+"/"+t+"/"+e;if("public"===t)Object.keys(i).length&&(s+="?"+this.urlencode(i));else if("private"===t){this.checkRequiredCredentials();var o=this.nonce().toString();a=this.urlencode(this.extend({nonce:o},i));var u=this.encode(o+a),c=this.hash(u,"sha256","binary"),d=this.stringToBinary(this.encode(s)),h=this.binaryConcat(d,c),l=this.base64ToBinary(this.secret),f=this.hmac(h,l,"sha512","base64");n={"API-Key":this.apiKey,"API-Sign":f,"Content-Type":"application/x-www-form-urlencoded"}}else s="/"+e;return{url:s=this.urls.api[t]+s,method:r,body:a,headers:n}}},{key:"nonce",value:function(){return this.milliseconds()}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,u){if(520===e)throw new p(this.id+" "+e.toString()+" "+t);if(a.indexOf("Invalid order")>=0)throw new S(this.id+" "+a);if(a.indexOf("Invalid nonce")>=0)throw new k(this.id+" "+a);if(a.indexOf("Insufficient funds")>=0)throw new w(this.id+" "+a);if(a.indexOf("Cancel pending")>=0)throw new _(this.id+" "+a);if(a.indexOf("Invalid arguments:volume")>=0)throw new S(this.id+" "+a);if(a.indexOf("Rate limit exceeded")>=0)throw new T(this.id+" "+a);if(void 0!==s&&("{"===a[0]&&"string"!==typeof s&&"error"in s&&s.error.length)){for(var c=this.id+" "+a,d=0;d<s.error.length;d++){var h=s.error[d];this.throwExactlyMatchedException(this.exceptions,h,c)}throw new y(c)}}}]),r}(h)},function(e,t,r){"use strict";var i=r(21),n=r(7),a=r(8),s=r(1),o=r(2),u=r(6),c=r(3),d=r(4),h=r(5),l=r(11),f=r(10),p=f.ExchangeError,v=f.ArgumentsRequired,m=f.ExchangeNotAvailable,g=f.InsufficientFunds,y=f.OrderNotFound,b=f.InvalidOrder,x=f.AccountSuspended,k=f.InvalidNonce,w=f.NotSupported,_=f.BadRequest,S=f.AuthenticationError,O=f.BadSymbol,T=f.RateLimitExceeded,C=f.PermissionDenied,I=r(12);e.exports=function(e){d(r,e);var t=h(r);function r(){return s(this,r),t.apply(this,arguments)}return o(r,[{key:"describe",value:function(){return this.deepExtend(u(c(r.prototype),"describe",this).call(this),{id:"kucoin",name:"KuCoin",countries:["SC"],rateLimit:334,version:"v2",certified:!1,pro:!0,comment:"Platform 2.0",has:{CORS:!1,cancelAllOrders:!0,cancelOrder:!0,createDepositAddress:!0,createOrder:!0,fetchAccounts:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchCurrencies:!0,fetchDepositAddress:!0,fetchDeposits:!0,fetchFundingFee:!0,fetchLedger:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchStatus:!0,fetchTicker:!0,fetchTickers:!0,fetchTime:!0,fetchTrades:!0,fetchWithdrawals:!0,withdraw:!0,transfer:!0},urls:{logo:"https://user-images.githubusercontent.com/51840849/87295558-132aaf80-c50e-11ea-9801-a2fb0c57c799.jpg",referral:"https://www.kucoin.com/?rcode=E5wkqe",api:{public:"https://openapi-v2.kucoin.com",private:"https://openapi-v2.kucoin.com",futuresPrivate:"https://api-futures.kucoin.com"},test:{public:"https://openapi-sandbox.kucoin.com",private:"https://openapi-sandbox.kucoin.com"},www:"https://www.kucoin.com",doc:["https://docs.kucoin.com"]},requiredCredentials:{apiKey:!0,secret:!0,password:!0},api:{public:{get:["timestamp","status","symbols","markets","market/allTickers","market/orderbook/level{level}_{limit}","market/orderbook/level{level}","market/orderbook/level2","market/orderbook/level2_20","market/orderbook/level2_100","market/orderbook/level3","market/histories","market/candles","market/stats","currencies","currencies/{currency}","prices","mark-price/{symbol}/current","margin/config"],post:["bullet-public"]},private:{get:["accounts","accounts/{accountId}","accounts/{accountId}/ledgers","accounts/{accountId}/holds","accounts/transferable","sub/user","sub-accounts","sub-accounts/{subUserId}","deposit-addresses","deposits","hist-deposits","hist-orders","hist-withdrawals","withdrawals","withdrawals/quotas","orders","order/client-order/{clientOid}","orders/{orderId}","limit/orders","fills","limit/fills","margin/account","margin/borrow","margin/borrow/outstanding","margin/borrow/borrow/repaid","margin/lend/active","margin/lend/done","margin/lend/trade/unsettled","margin/lend/trade/settled","margin/lend/assets","margin/market","margin/trade/last","stop-order/{orderId}","stop-order","stop-order/queryOrderByClientOid"],post:["accounts","accounts/inner-transfer","accounts/sub-transfer","deposit-addresses","withdrawals","orders","orders/multi","margin/borrow","margin/order","margin/repay/all","margin/repay/single","margin/lend","margin/toggle-auto-lend","bullet-private","stop-order"],delete:["withdrawals/{withdrawalId}","orders","orders/client-order/{clientOid}","orders/{orderId}","margin/lend/{orderId}","stop-order/cancelOrderByClientOid","stop-order/{orderId}","stop-order/cancel"]},futuresPrivate:{get:["account-overview","positions"],post:["transfer-out"]}},timeframes:{"1m":"1min","3m":"3min","5m":"5min","15m":"15min","30m":"30min","1h":"1hour","2h":"2hour","4h":"4hour","6h":"6hour","8h":"8hour","12h":"12hour","1d":"1day","1w":"1week"},exceptions:{exact:{"order not exist":y,"order not exist.":y,order_not_exist:y,order_not_exist_or_not_allow_to_cancel:b,"Order size below the minimum requirement.":b,"The withdrawal amount is below the minimum requirement.":p,"Unsuccessful! Exceeded the max. funds out-transfer limit":g,400:_,401:S,403:w,404:w,405:w,429:T,500:m,503:m,101030:C,200004:g,230003:g,260100:g,3e5:b,4e5:O,400001:S,400002:k,400003:S,400004:S,400005:S,400006:S,400007:S,400008:w,400100:_,411100:x,415e3:_,5e5:p},broad:{"Exceeded the access frequency":T,"require more permission":C}},fees:{trading:{tierBased:!1,percentage:!0,taker:.001,maker:.001},funding:{tierBased:!1,percentage:!1,withdraw:{},deposit:{}}},commonCurrencies:{HOT:"HOTNOW",EDGE:"DADI",WAX:"WAXP",TRY:"Trias"},options:{version:"v1",symbolSeparator:"-",fetchMyTradesMethod:"private_get_fills",fetchBalance:"trade",versions:{public:{GET:{status:"v1","market/orderbook/level2":"v2","market/orderbook/level3":"v2","market/orderbook/level2_20":"v1","market/orderbook/level2_100":"v1","market/orderbook/level{level}":"v2","market/orderbook/level{level}_{limit}":"v1"}},private:{POST:{"accounts/inner-transfer":"v2","accounts/sub-transfer":"v2"}},futuresPrivate:{GET:{"account-overview":"v1",positions:"v1"},POST:{"transfer-out":"v2"}}},accountsByType:{trade:"trade",trading:"trade",margin:"margin",main:"main",futures:"contract",contract:"contract",pool:"pool","pool-x":"pool"}}})}},{key:"nonce",value:function(){return this.milliseconds()}},{key:"loadTimeDifference",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:{},e.next=3,this.publicGetTimestamp(t);case 3:return r=e.sent,i=this.milliseconds(),a=this.safeInteger(r,"data"),this.options.timeDifference=parseInt(i-a),e.abrupt("return",this.options.timeDifference);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTime",value:function(){var e=a(n.mark((function e(){var t,r,i=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},e.next=3,this.publicGetTimestamp(t);case 3:return r=e.sent,e.abrupt("return",this.safeInteger(r,"data"));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchStatus",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:{},e.next=3,this.publicGetStatus(t);case 3:return r=e.sent,i=this.safeValue(r,"data",{}),void 0!==(a=this.safeValue(i,"status"))&&(a="open"===a?"ok":"maintenance",this.status=this.extend(this.status,{status:a,updated:this.milliseconds()})),e.abrupt("return",this.status);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMarkets",value:function(){var e=a(n.mark((function e(){var t,r,a,s,o,u,c,d,h,l,f,p,v,m,g,y,b,x,k,w,_,S,O,T=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=T.length>0&&void 0!==T[0]?T[0]:{},e.next=3,this.publicGetSymbols(t);case 3:for(r=e.sent,a=r.data,s=[],o=0;o<a.length;o++)u=a[o],c=this.safeString(u,"symbol"),d=c.split("-"),h=i(d,2),l=h[0],f=h[1],p=this.safeCurrencyCode(l),v=this.safeCurrencyCode(f),m=p+"/"+v,g=this.safeValue(u,"enableTrading"),y=this.safeNumber(u,"baseMaxSize"),b=this.safeString(u,"baseMinSize"),x=this.safeString(u,"quoteMaxSize"),k=this.parseNumber(b),w=this.parseNumber(x),_=this.safeNumber(u,"quoteMinSize"),S={amount:this.precisionFromString(this.safeString(u,"baseIncrement")),price:this.precisionFromString(this.safeString(u,"priceIncrement"))},O={amount:{min:k,max:y},price:{min:this.safeNumber(u,"priceIncrement"),max:this.parseNumber(I.stringDiv(x,b))},cost:{min:_,max:w}},s.push({id:c,symbol:m,baseId:l,quoteId:f,base:p,quote:v,active:g,precision:S,limits:O,info:u});return e.abrupt("return",s);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchCurrencies",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,u,c,d,h,l,f,p,v,m=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=m.length>0&&void 0!==m[0]?m[0]:{},e.next=3,this.publicGetCurrencies(t);case 3:for(r=e.sent,i=this.safeValue(r,"data",[]),a={},s=0;s<i.length;s++)o=i[s],u=this.safeString(o,"currency"),c=this.safeString(o,"fullName"),d=this.safeCurrencyCode(u),h=this.safeInteger(o,"precision"),l=this.safeValue(o,"isWithdrawEnabled",!1),f=this.safeValue(o,"isDepositEnabled",!1),p=this.safeNumber(o,"withdrawalMinFee"),v=l&&f,a[d]={id:u,name:c,code:d,precision:h,info:o,active:v,fee:p,limits:this.limits};return e.abrupt("return",a);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchAccounts",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,u,c,d,h,l=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:{},e.next=3,this.privateGetAccounts(t);case 3:for(r=e.sent,i=this.safeValue(r,"data"),a=[],s=0;s<i.length;s++)o=i[s],u=this.safeString(o,"id"),c=this.safeString(o,"currency"),d=this.safeCurrencyCode(c),h=this.safeString(o,"type"),a.push({id:u,type:h,currency:d,info:o});return e.abrupt("return",a);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchFundingFee",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,u,c=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:{},i=this.currencyId(t),a={currency:i},e.next=5,this.privateGetWithdrawalsQuotas(this.extend(a,r));case 5:return s=e.sent,o=s.data,(u={})[t]=this.safeNumber(o,"withdrawMinFee"),e.abrupt("return",{info:s,withdraw:u,deposit:{}});case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeNumber(e,"changeRate");void 0!==r&&(r*=100);var i=this.safeNumber2(e,"last","lastTradedPrice"),n=this.safeString(e,"symbol"),a=this.safeSymbol(n,t,"-"),s=this.safeNumber(e,"vol"),o=this.safeNumber(e,"volValue"),u=this.vwap(s,o),c=this.safeInteger2(e,"time","datetime");return{symbol:a,timestamp:c,datetime:this.iso8601(c),high:this.safeNumber(e,"high"),low:this.safeNumber(e,"low"),bid:this.safeNumber(e,"buy"),bidVolume:void 0,ask:this.safeNumber(e,"sell"),askVolume:void 0,vwap:u,open:this.safeNumber(e,"open"),close:i,last:i,previousClose:void 0,change:this.safeNumber(e,"changePrice"),percentage:r,average:this.safeNumber(e,"averagePrice"),baseVolume:s,quoteVolume:o,info:e}}},{key:"fetchTickers",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,u,c,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetMarketAllTickers(r);case 6:for(i=e.sent,a=this.safeValue(i,"data",{}),s=this.safeValue(a,"ticker",[]),o={},u=0;u<s.length;u++)c=this.parseTicker(s[u]),void 0!==(d=this.safeString(c,"symbol"))&&(o[d]=c);return e.abrupt("return",this.filterByArray(o,"symbol",t));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return i=this.market(t),a={symbol:i.id},e.next=7,this.publicGetMarketStats(this.extend(a,r));case 7:return s=e.sent,e.abrupt("return",this.parseTicker(s.data,i));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){return[this.safeTimestamp(e,0),this.safeNumber(e,1),this.safeNumber(e,3),this.safeNumber(e,4),this.safeNumber(e,2),this.safeNumber(e,5)]}},{key:"fetchOHLCV",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,u,c,d,h,l,f,p=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=p.length>1&&void 0!==p[1]?p[1]:"15m",i=p.length>2&&void 0!==p[2]?p[2]:void 0,a=p.length>3&&void 0!==p[3]?p[3]:void 0,s=p.length>4&&void 0!==p[4]?p[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),u=o.id,c={symbol:u,type:this.timeframes[r]},d=1e3*this.parseTimeframe(r),h=this.milliseconds(),void 0!==i?(c.startAt=parseInt(Math.floor(i/1e3)),void 0===a&&(a=this.safeInteger(this.options,"fetchOHLCVLimit",1500)),h=this.sum(i,a*d)):void 0!==a&&(i=h-a*d,c.startAt=parseInt(Math.floor(i/1e3))),c.endAt=parseInt(Math.floor(h/1e3)),e.next=15,this.publicGetMarketCandles(this.extend(c,s));case 15:return l=e.sent,f=this.safeValue(l,"data",[]),e.abrupt("return",this.parseOHLCVs(f,o,r,i,a));case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createDepositAddress",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,u,c,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:{},e.next=3,this.loadMarkets();case 3:return i=this.currencyId(t),a={currency:i},e.next=7,this.privatePostDepositAddresses(this.extend(a,r));case 7:return s=e.sent,o=this.safeValue(s,"data",{}),void 0!==(u=this.safeString(o,"address"))&&(u=u.replace("bitcoincash:","")),c=this.safeString(o,"memo"),"NIM"!==t&&this.checkAddress(u),e.abrupt("return",{info:s,currency:t,address:u,tag:c});case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchDepositAddress",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,u,c,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:{},e.next=3,this.loadMarkets();case 3:return i=this.currencyId(t),a={currency:i},e.next=7,this.privateGetDepositAddresses(this.extend(a,r));case 7:return s=e.sent,o=this.safeValue(s,"data",{}),u=this.safeString(o,"address"),c=this.safeString(o,"memo"),"NIM"!==t&&this.checkAddress(u),e.abrupt("return",{info:s,currency:t,address:u,tag:c});case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchL3OrderBook",value:function(){var e=a(n.mark((function e(t){var r,i=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.length>1&&void 0!==i[1]?i[1]:void 0,i.length>2&&void 0!==i[2]?i[2]:{},e.next=4,this.fetchOrderBook(t,r,{level:3});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,u,c,d,h,l,f=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=f.length>1&&void 0!==f[1]?f[1]:void 0,i=f.length>2&&void 0!==f[2]?f[2]:{},e.next=4,this.loadMarkets();case 4:if(a=this.marketId(t),s=this.safeInteger(i,"level",2),o={symbol:a,level:s},u="publicGetMarketOrderbookLevelLevel",2!==s){e.next=16;break}if(void 0===r){e.next=16;break}if(20!==r&&100!==r){e.next=15;break}o.limit=r,u="publicGetMarketOrderbookLevelLevelLimit",e.next=16;break;case 15:throw new p(this.id+" fetchOrderBook limit argument must be undefined, 20 or 100");case 16:return e.next=18,this[u](this.extend(o,i));case 18:return c=e.sent,d=this.safeValue(c,"data",{}),h=this.safeInteger(d,"time"),(l=this.parseOrderBook(d,h,"bids","asks",s-2,s-1)).nonce=this.safeInteger(d,"sequence"),e.abrupt("return",l);case 24:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=a(n.mark((function e(t,r,i,a){var s,o,u,c,d,h,l,f,p,v,m,g=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=g.length>4&&void 0!==g[4]?g[4]:void 0,o=g.length>5&&void 0!==g[5]?g[5]:{},e.next=4,this.loadMarkets();case 4:return u=this.marketId(t),c=this.safeString2(o,"clientOid","clientOrderId",this.uuid()),o=this.omit(o,["clientOid","clientOrderId"]),d={clientOid:c,side:i,symbol:u,type:r},h=this.safeNumber2(o,"cost","funds"),"market"===r?void 0!==h?(o=this.omit(o,["cost","funds"]),d.funds=this.amountToPrecision(t,h)):d.size=this.amountToPrecision(t,a):(d.price=this.priceToPrecision(t,s),d.size=this.amountToPrecision(t,a)),e.next=12,this.privatePostOrders(this.extend(d,o));case 12:return l=e.sent,f=this.safeValue(l,"data",{}),p=this.milliseconds(),v=this.safeString(f,"orderId"),m={id:v,clientOrderId:c,info:f,timestamp:p,datetime:this.iso8601(p),lastTradeTimestamp:void 0,symbol:t,type:r,side:i,price:s,amount:void 0,cost:void 0,average:void 0,filled:void 0,remaining:void 0,status:void 0,fee:void 0,trades:void 0},void 0===h?m.amount=a:m.cost=h,e.abrupt("return",m);case 19:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.length>1&&void 0!==o[1]?o[1]:void 0,r=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return i={},a=this.safeString2(r,"clientOid","clientOrderId"),s="privateDeleteOrdersOrderId",void 0!==a?(i.clientOid=a,s="privateDeleteOrdersClientOrderClientOid"):i.orderId=t,r=this.omit(r,["clientOid","clientOrderId"]),e.next=11,this[s](this.extend(i,r));case 11:return e.abrupt("return",e.sent);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cancelAllOrders",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:{},e.next=4,this.loadMarkets();case 4:return i={},a=void 0,void 0!==t&&(a=this.market(t),i.symbol=a.id),e.next=9,this.privateDeleteOrders(this.extend(i,r));case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrdersByStatus",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,u,c,d,h,l=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>1&&void 0!==l[1]?l[1]:void 0,i=l.length>2&&void 0!==l[2]?l[2]:void 0,a=l.length>3&&void 0!==l[3]?l[3]:void 0,s=l.length>4&&void 0!==l[4]?l[4]:{},e.next=6,this.loadMarkets();case 6:return o={status:t},u=void 0,void 0!==r&&(u=this.market(r),o.symbol=u.id),void 0!==i&&(o.startAt=i),void 0!==a&&(o.pageSize=a),e.next=13,this.privateGetOrders(this.extend(o,s));case 13:return c=e.sent,d=this.safeValue(c,"data",{}),h=this.safeValue(d,"items",[]),e.abrupt("return",this.parseOrders(h,u,i,a));case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:void 0,i=s.length>2&&void 0!==s[2]?s[2]:void 0,a=s.length>3&&void 0!==s[3]?s[3]:{},e.next=6,this.fetchOrdersByStatus("done",t,r,i,a);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:void 0,i=s.length>2&&void 0!==s[2]?s[2]:void 0,a=s.length>3&&void 0!==s[3]?s[3]:{},e.next=6,this.fetchOrdersByStatus("active",t,r,i,a);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,u,c,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:void 0,i=h.length>2&&void 0!==h[2]?h[2]:{},e.next=4,this.loadMarkets();case 4:if(a={},s=this.safeString2(i,"clientOid","clientOrderId"),o="privateGetOrdersOrderId",void 0===s){e.next=12;break}a.clientOid=s,o="privateGetOrdersClientOrderClientOid",e.next=15;break;case 12:if(void 0!==t){e.next=14;break}throw new b(this.id+" fetchOrder() requires an order id");case 14:a.orderId=t;case 15:return i=this.omit(i,["clientOid","clientOrderId"]),e.next=18,this[o](this.extend(a,i));case 18:return u=e.sent,c=void 0,void 0!==r&&(c=this.market(r)),d=this.safeValue(u,"data"),e.abrupt("return",this.parseOrder(d,c));case 23:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"symbol"),i=this.safeSymbol(r,t,"-"),n=this.safeString(e,"id"),a=this.safeString(e,"type"),s=this.safeInteger(e,"createdAt"),o=this.iso8601(s),u=this.safeNumber(e,"price");0===u&&(u=void 0);var c=this.safeString(e,"side"),d=this.safeString(e,"feeCurrency"),h=this.safeCurrencyCode(d),l=this.safeNumber(e,"fee"),f=this.safeNumber(e,"size"),p=this.safeNumber(e,"dealSize"),v=this.safeNumber(e,"dealFunds"),m=this.safeValue(e,"isActive",!1),g=this.safeValue(e,"cancelExist",!1),y=m?"open":"closed";y=g?"canceled":y;var b={currency:h,cost:l},x=this.safeString(e,"clientOid"),k=this.safeString(e,"timeInForce"),w=this.safeNumber(e,"stopPrice"),_=this.safeValue(e,"postOnly");return this.safeOrder({id:n,clientOrderId:x,symbol:i,type:a,timeInForce:k,postOnly:_,side:c,amount:f,price:u,stopPrice:w,cost:v,filled:p,remaining:void 0,timestamp:s,datetime:o,fee:b,status:y,info:e,lastTradeTimestamp:void 0,average:void 0,trades:void 0})}},{key:"fetchMyTrades",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,u,c,d,h,l,f=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:void 0,r=f.length>1&&void 0!==f[1]?f[1]:void 0,i=f.length>2&&void 0!==f[2]?f[2]:void 0,a=f.length>3&&void 0!==f[3]?f[3]:{},e.next=6,this.loadMarkets();case 6:if(s={},o=void 0,void 0!==t&&(o=this.market(t),s.symbol=o.id),void 0!==i&&(s.pageSize=i),u=this.options.fetchMyTradesMethod,c=!1,"private_get_fills"!==u){e.next=16;break}void 0!==r&&(s.startAt=r),e.next=25;break;case 16:if("private_get_limit_fills"!==u){e.next=20;break}c=!0,e.next=25;break;case 20:if("private_get_hist_orders"!==u){e.next=24;break}void 0!==r&&(s.startAt=parseInt(r/1e3)),e.next=25;break;case 24:throw new p(this.id+" invalid fetchClosedOrder method");case 25:return e.next=27,this[u](this.extend(s,a));case 27:return d=e.sent,h=this.safeValue(d,"data",{}),l=void 0,l=c?h:this.safeValue(h,"items",[]),e.abrupt("return",this.parseTrades(l,o,r,i));case 32:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTrades",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,u,c,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,i=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={symbol:s.id},void 0!==r&&(o.startAt=Math.floor(r/1e3)),void 0!==i&&(o.pageSize=i),e.next=11,this.publicGetMarketHistories(this.extend(o,a));case 11:return u=e.sent,c=this.safeValue(u,"data",[]),e.abrupt("return",this.parseTrades(c,s,r,i));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"symbol"),i=this.safeSymbol(r,t,"-"),n=this.safeString2(e,"tradeId","id"),a=this.safeString(e,"orderId"),s=this.safeString(e,"liquidity"),o=this.safeInteger(e,"time");void 0!==o?o=parseInt(o/1e6):(o=this.safeInteger(e,"createdAt"),"dealValue"in e&&void 0!==o&&(o*=1e3));var u=this.safeString2(e,"price","dealPrice"),c=this.safeString2(e,"size","amount"),d=this.parseNumber(u),h=this.parseNumber(c),l=this.safeString(e,"side"),f=void 0,p=this.safeNumber(e,"fee");if(void 0!==p){var v=this.safeString(e,"feeCurrency"),m=this.safeCurrencyCode(v);void 0===m&&void 0!==t&&(m="sell"===l?t.quote:t.base),f={cost:p,currency:m,rate:this.safeNumber(e,"feeRate")}}var g=this.safeString(e,"type");"match"===g&&(g=void 0);var y=this.safeNumber2(e,"funds","dealValue");return void 0===y&&(y=this.parseNumber(I.stringMul(u,c))),{info:e,id:n,order:a,timestamp:o,datetime:this.iso8601(o),symbol:i,type:g,takerOrMaker:s,side:l,price:d,amount:h,cost:y,fee:f}}},{key:"withdraw",value:function(){var e=a(n.mark((function e(t,r,i){var a,s,o,u,c,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.length>3&&void 0!==h[3]?h[3]:void 0,s=h.length>4&&void 0!==h[4]?h[4]:{},e.next=4,this.loadMarkets();case 4:return this.checkAddress(i),o=this.currencyId(t),u={currency:o,address:i,amount:r},void 0!==a&&(u.memo=a),e.next=10,this.privatePostWithdrawals(this.extend(u,s));case 10:return c=e.sent,d=this.safeValue(c,"data",{}),e.abrupt("return",{id:this.safeString(d,"withdrawalId"),info:c});case 13:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"parseTransactionStatus",value:function(e){return this.safeString({SUCCESS:"ok",PROCESSING:"ok",FAILURE:"failed"},e)}},{key:"parseTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"currency"),i=this.safeCurrencyCode(r,t),n=this.safeString(e,"address"),a=this.safeNumber(e,"amount"),s=this.safeString(e,"walletTxId");if(void 0!==s){var o=s.split("@"),u=o.length;u>1&&void 0===n&&o[1].length>1&&(n=o[1]),s=o[0]}var c=void 0===s?"withdrawal":"deposit",d=this.safeString(e,"status"),h=this.parseTransactionStatus(d),l=void 0,f=this.safeNumber(e,"fee");if(void 0!==f){var p=void 0;void 0!==a&&(p=f/a),l={cost:f,rate:p,currency:i}}var v=this.safeString(e,"memo"),m=this.safeInteger2(e,"createdAt","createAt"),g=this.safeString(e,"id"),y=this.safeInteger(e,"updatedAt"),b=!("createdAt"in e);b&&(c="address"in e?"withdrawal":"deposit",void 0!==m&&(m*=1e3),void 0!==y&&(y*=1e3));var x=this.safeString(e,"remark");return{id:g,info:e,timestamp:m,datetime:this.iso8601(m),address:n,addressTo:n,addressFrom:void 0,tag:v,tagTo:v,tagFrom:void 0,currency:i,amount:a,txid:s,type:c,status:h,comment:x,fee:l,updated:y}}},{key:"fetchDeposits",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,u,c,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:void 0,i=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:{},e.next=6,this.loadMarkets();case 6:return s={},o=void 0,void 0!==t&&(o=this.currency(t),s.currency=o.id),void 0!==i&&(s.pageSize=i),u="privateGetDeposits",void 0!==r&&(r<1550448e6?(s.startAt=parseInt(r/1e3),u="privateGetHistDeposits"):s.startAt=r),e.next=14,this[u](this.extend(s,a));case 14:return c=e.sent,d=c.data.items,e.abrupt("return",this.parseTransactions(d,o,r,i,{type:"deposit"}));case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchWithdrawals",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,u,c,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:void 0,i=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:{},e.next=6,this.loadMarkets();case 6:return s={},o=void 0,void 0!==t&&(o=this.currency(t),s.currency=o.id),void 0!==i&&(s.pageSize=i),u="privateGetWithdrawals",void 0!==r&&(r<1550448e6?(s.startAt=parseInt(r/1e3),u="privateGetHistWithdrawals"):s.startAt=r),e.next=14,this[u](this.extend(s,a));case 14:return c=e.sent,d=c.data.items,e.abrupt("return",this.parseTransactions(d,o,r,i,{type:"withdrawal"}));case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,u,c,d,h,l,f,v,m,g,y,b,x,k,w,_,S=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=S.length>0&&void 0!==S[0]?S[0]:{},e.next=3,this.loadMarkets();case 3:if(r=this.safeString2(this.options,"fetchBalance","defaultType","trade"),i=this.safeString(t,"type",r),a=this.safeValue(this.options,"accountsByType"),void 0!==(s=this.safeString(a,i))){e.next=10;break}throw o=Object.keys(a),new p(this.id+" type must be one of "+o.join(", "));case 10:if(t=this.omit(t,"type"),"contract"!==s){e.next=26;break}return e.next=14,this.futuresPrivateGetAccountOverview(t);case 14:return u=e.sent,c=this.safeValue(u,"data"),d=this.safeString(c,"currency"),h=this.safeCurrencyCode(d),(l=this.account()).free=this.safeString(c,"availableBalance"),l.total=this.safeString(c,"accountEquity"),(f={info:u})[h]=l,e.abrupt("return",this.parseBalance(f,!1));case 26:return v={type:s},e.next=29,this.privateGetAccounts(this.extend(v,t));case 29:for(m=e.sent,g=this.safeValue(m,"data",[]),y={info:m},b=0;b<g.length;b++)x=g[b],this.safeString(x,"type")===s&&(k=this.safeString(x,"currency"),w=this.safeCurrencyCode(k),(_=this.account()).total=this.safeString(x,"balance"),_.free=this.safeString(x,"available"),_.used=this.safeString(x,"holds"),y[w]=_);return e.abrupt("return",this.parseBalance(y,!1));case 34:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"transfer",value:function(){var e=a(n.mark((function e(t,r,i,a){var s,o,u,c,d,h,l,f,v,m,g,y,b,x,k,w,_,S,O,T,C,I,M=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=M.length>4&&void 0!==M[4]?M[4]:{},e.next=3,this.loadMarkets();case 3:if(o=this.currency(t),u=this.currencyToPrecision(t,r),c=this.safeValue(this.options,"accountsByType",{}),void 0!==(d=this.safeString(c,i))){e.next=10;break}throw h=Object.keys(c),new p(this.id+" fromAccount must be one of "+h.join(", "));case 10:if(void 0!==(l=this.safeString(c,a))){e.next=14;break}throw f=Object.keys(c),new p(this.id+" toAccount must be one of "+f.join(", "));case 14:if("contract"!==d){e.next=34;break}if("main"===l){e.next=17;break}throw new p(this.id+" only supports transferring from futures account to main account");case 17:return v={currency:o.id,amount:u},"bizNo"in s||(v.bizNo=this.uuid22()),e.next=21,this.futuresPrivatePostTransferOut(this.extend(v,s));case 21:return m=e.sent,g=this.safeValue(m,"data"),y=this.safeInteger(g,"createdAt"),b=this.safeString(g,"applyId"),x=this.safeString(g,"currency"),k=this.safeCurrencyCode(x),w=this.safeNumber(g,"amount"),_=this.safeString(g,"status"),S=void 0,"PROCESSING"===_&&(S="pending"),e.abrupt("return",{info:m,currency:k,timestamp:y,datetime:this.iso8601(y),amount:w,fromAccount:d,toAccount:l,id:b,status:S});case 34:return O={currency:o.id,from:d,to:l,amount:u},"clientOid"in s||(O.clientOid=this.uuid()),e.next=38,this.privatePostAccountsInnerTransfer(this.extend(O,s));case 38:return T=e.sent,C=this.safeValue(T,"data"),I=this.safeString(C,"orderId"),e.abrupt("return",{info:T,id:I,timestamp:void 0,datetime:void 0,currency:t,amount:u,fromAccount:d,toAccount:l,status:void 0});case 42:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"fetchLedger",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,u,c,d,h,l,f=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.length>0&&void 0!==f[0]?f[0]:void 0,r=f.length>1&&void 0!==f[1]?f[1]:void 0,i=f.length>2&&void 0!==f[2]?f[2]:void 0,a=f.length>3&&void 0!==f[3]?f[3]:{},void 0!==t){e.next=6;break}throw new v(this.id+" fetchLedger() requires a code param");case 6:return e.next=8,this.loadMarkets();case 8:return e.next=10,this.loadAccounts();case 10:if(s=this.currency(t),void 0!==(o=this.safeString(a,"accountId"))){e.next=22;break}u=0;case 14:if(!(u<this.accounts.length)){e.next=22;break}if((c=this.accounts[u]).currency!==t||"main"!==c.type){e.next=19;break}return o=c.id,e.abrupt("break",22);case 19:u++,e.next=14;break;case 22:if(void 0!==o){e.next=24;break}throw new p(this.id+" "+t+"main account is not loaded in loadAccounts");case 24:return d={accountId:o},void 0!==r&&(d.startAt=Math.floor(r/1e3)),e.next=28,this.privateGetAccountsAccountIdLedgers(this.extend(d,a));case 28:return h=e.sent,l=h.data.items,e.abrupt("return",this.parseLedger(l,s,r,i));case 31:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseLedgerEntry",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"currency"),i=this.safeCurrencyCode(r,t),n={cost:this.safeNumber(e,"fee"),code:i},a=this.safeNumber(e,"amount"),s=this.safeNumber(e,"balance"),o=this.safeString(e,"direction"),u=void 0;if(void 0!==s&&void 0!==a){var c="out"===o?a:-a;u=this.sum(s,c)}var d=this.safeInteger(e,"createdAt"),h=this.parseLedgerEntryType(this.safeString(e,"bizType")),l=this.safeString(e,"context"),f=void 0,p=void 0;if(this.isJsonEncodedObject(l)){var v=this.parseJson(l);f=this.safeString(v,"orderId"),"trade"===h?p=this.safeString(v,"tradeId"):"transaction"===h&&(p=this.safeString(v,"txId"))}return{id:f,currency:i,account:void 0,referenceAccount:void 0,referenceId:p,status:void 0,amount:a,before:u,after:s,fee:n,direction:o,timestamp:d,datetime:this.iso8601(d),type:h,info:e}}},{key:"parseLedgerEntryType",value:function(e){return this.safeString({Exchange:"trade",Withdrawal:"transaction",Deposit:"transaction",Transfer:"transfer"},e,e)}},{key:"fetchPositions",value:function(){var e=a(n.mark((function e(){var t,r,i=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i.length>0&&void 0!==i[0]?i[0]:void 0,t=i.length>1&&void 0!==i[1]?i[1]:{},e.next=4,this.futuresPrivateGetPositions(t);case 4:return r=e.sent,e.abrupt("return",this.safeValue(r,"data",r));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.safeValue(this.options,"versions",{}),o=this.safeValue(s,t,{}),u=this.safeValue(o,r,{}),c=this.safeString(u,e,this.options.version),d=this.safeString(i,"version",c);i=this.omit(i,"version");var h="/api/"+d+"/"+this.implodeParams(e,i),l=this.omit(i,this.extractParams(e)),f="";n=void 0!==n?n:{},Object.keys(l).length&&("GET"===r||"DELETE"===r?h+="?"+this.urlencode(l):(f=a=this.json(l),n["Content-Type"]="application/json"));var p=this.urls.api[t]+h;if("private"===t||"futuresPrivate"===t){this.checkRequiredCredentials();var v=this.nonce().toString();n=this.extend({"KC-API-KEY-VERSION":"2","KC-API-KEY":this.apiKey,"KC-API-TIMESTAMP":v},n);var m=this.safeString(n,"KC-API-KEY-VERSION");if("2"===m){var g=this.hmac(this.encode(this.password),this.encode(this.secret),"sha256","base64");n["KC-API-PASSPHRASE"]=g}else n["KC-API-PASSPHRASE"]=this.password;var y=v+r+h+f,b=this.hmac(this.encode(y),this.encode(this.secret),"sha256","base64");n["KC-API-SIGN"]=b;var x=this.safeValue(this.options,"partner",{}),k=this.safeString(x,"id"),w=this.safeString(x,"secret");if(void 0!==k&&void 0!==w){var _=v+k+this.apiKey,S=this.hmac(this.encode(_),this.encode(w),"sha256","base64");n["KC-API-PARTNER-SIGN"]=S,n["KC-API-PARTNER"]=k}}return{url:p,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,u){if(s){var c=this.safeString(s,"code"),d=this.safeString(s,"msg","");this.throwExactlyMatchedException(this.exceptions.exact,d,this.id+" "+d),this.throwExactlyMatchedException(this.exceptions.exact,c,this.id+" "+d)}else this.throwBroadlyMatchedException(this.exceptions.broad,a,a)}}]),r}(l)},function(e,t,r){"use strict";var i=r(7),n=r(8),a=r(1),s=r(2),o=r(6),u=r(3),c=r(4),d=r(5),h=r(11),l=r(10),f=l.ArgumentsRequired,p=l.InsufficientFunds,v=l.OrderNotFound,m=r(12);e.exports=function(e){c(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(u(r.prototype),"describe",this).call(this),{id:"kuna",name:"Kuna",countries:["UA"],rateLimit:1e3,version:"v2",has:{CORS:!1,cancelOrder:!0,createOrder:!0,fetchBalance:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:"emulated",fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTickers:!0,fetchTime:!0,fetchTrades:!0,withdraw:!1},timeframes:void 0,urls:{extension:".json",referral:"https://kuna.io?r=kunaid-gvfihe8az7o4",logo:"https://user-images.githubusercontent.com/51840849/87153927-f0578b80-c2c0-11ea-84b6-74612568e9e1.jpg",api:"https://kuna.io",www:"https://kuna.io",doc:"https://kuna.io/documents/api",fees:"https://kuna.io/documents/api"},api:{public:{get:["depth","k_with_pending_trades","k","markets","order_book","order_book/{market}","tickers","tickers/{market}","timestamp","trades","trades/{market}"]},private:{get:["members/me","deposits","deposit","deposit_address","orders","order","trades/my","withdraws","withdraw"],post:["orders","orders/multi","orders/clear","order/delete","withdraw"]}},fees:{trading:{tierBased:!1,percentage:!0,taker:.0025,maker:.0025},funding:{withdraw:{UAH:"1%",BTC:.001,BCH:.001,ETH:.01,WAVES:.01,GOL:0,GBG:0},deposit:{}}},commonCurrencies:{PLA:"Plair"},exceptions:{2002:p,2003:v}})}},{key:"fetchTime",value:function(){var e=n(i.mark((function e(){var t,r,n=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},e.next=3,this.publicGetTimestamp(t);case 3:return r=e.sent,e.abrupt("return",1e3*r);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p,v,m,g,y,b=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=b.length>0&&void 0!==b[0]?b[0]:{},r=["btc","rub","uah","usd","usdt","usdc"],n={UAH:0},a=[],e.next=6,this.publicGetTickers(t);case 6:s=e.sent,o=Object.keys(s),u=0;case 9:if(!(u<o.length)){e.next=30;break}c=o[u],d=0;case 12:if(!(d<r.length)){e.next=27;break}if(h=r[d],l=c.indexOf(h),f=c.slice(l),!(l>0&&f===h)){e.next=24;break}return p=c.replace(h,""),v=this.safeCurrencyCode(p),m=this.safeCurrencyCode(h),g=v+"/"+m,y={amount:6,price:this.safeInteger(n,m,6)},a.push({id:c,symbol:g,base:v,quote:m,baseId:p,quoteId:h,precision:y,limits:{amount:{min:Math.pow(10,-y.amount),max:Math.pow(10,y.amount)},price:{min:Math.pow(10,-y.price),max:Math.pow(10,y.price)},cost:{min:void 0,max:void 0}},active:void 0,info:void 0}),e.abrupt("break",27);case 24:d++,e.next=12;break;case 27:u++,e.next=9;break;case 30:return e.abrupt("return",a);case 31:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:{},e.next=4,this.loadMarkets();case 4:return a=this.market(t),s={market:a.id},void 0!==r&&(s.limit=r),e.next=9,this.publicGetDepth(this.extend(s,n));case 9:return o=e.sent,u=this.safeTimestamp(o,"timestamp"),e.abrupt("return",this.parseOrderBook(o,u));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeTimestamp(e,"at");e=e.ticker;var i=void 0;t&&(i=t.symbol);var n=this.safeNumber(e,"last");return{symbol:i,timestamp:r,datetime:this.iso8601(r),high:this.safeNumber(e,"high"),low:this.safeNumber(e,"low"),bid:this.safeNumber(e,"buy"),bidVolume:void 0,ask:this.safeNumber(e,"sell"),askVolume:void 0,vwap:void 0,open:this.safeNumber(e,"open"),close:n,last:n,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeNumber(e,"vol"),quoteVolume:void 0,info:e}}},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:void 0,r=f.length>1&&void 0!==f[1]?f[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetTickers(r);case 6:for(n=e.sent,a=Object.keys(n),s={},o=0;o<a.length;o++)u=a[o],c=void 0,d=u,u in this.markets_by_id?(c=this.markets_by_id[u],d=c.symbol):(h=u.slice(0,3),l=u.slice(3,6),h=h.toUpperCase(),l=l.toUpperCase(),h=this.safeCurrencyCode(h),l=this.safeCurrencyCode(l),d=h+"/"+l),s[d]=this.parseTicker(n[u],c);return e.abrupt("return",this.filterByArray(s,"symbol",t));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={market:n.id},e.next=7,this.publicGetTickersMarket(this.extend(a,r));case 7:return s=e.sent,e.abrupt("return",this.parseTicker(s,n));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchL3OrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:void 0,n=a.length>2&&void 0!==a[2]?a[2]:{},e.next=4,this.fetchOrderBook(t,r,n);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={market:s.id},e.next=9,this.publicGetTrades(this.extend(o,a));case 9:return u=e.sent,e.abrupt("return",this.parseTrades(u,s,r,n));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.parse8601(this.safeString(e,"created_at")),i=void 0;t&&(i=t.symbol);var n=this.safeString2(e,"side","trend");if(void 0!==n){var a={ask:"sell",bid:"buy"};n=this.safeString(a,n,n)}var s=this.safeString(e,"price"),o=this.safeString(e,"volume"),u=this.parseNumber(s),c=this.parseNumber(o),d=this.safeNumber(e,"funds");void 0===d&&(d=this.parseNumber(m.stringMul(s,o)));var h=this.safeString(e,"order_id"),l=this.safeString(e,"id");return{id:l,info:e,timestamp:r,datetime:this.iso8601(r),symbol:i,type:void 0,side:n,order:h,takerOrMaker:void 0,price:u,amount:c,cost:d,fee:void 0}}},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>1&&void 0!==l[1]?l[1]:"1m",n=l.length>2&&void 0!==l[2]?l[2]:void 0,a=l.length>3&&void 0!==l[3]?l[3]:void 0,s=l.length>4&&void 0!==l[4]?l[4]:{},e.next=6,this.loadMarkets();case 6:return e.next=8,this.fetchTrades(t,n,a,s);case 8:for(o=e.sent,u=this.buildOHLCVC(o,r,n,a),c=[],d=0;d<u.length;d++)h=u[d],c.push([h[0],h[1],h[2],h[3],h[4],h[5]]);return e.abrupt("return",c);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetMembersMe(t);case 5:for(r=e.sent,n=this.safeValue(r,"accounts"),a={info:n},s=0;s<n.length;s++)o=n[s],u=this.safeString(o,"currency"),c=this.safeCurrencyCode(u),(d=this.account()).free=this.safeString(o,"balance"),d.used=this.safeString(o,"locked"),a[c]=d;return e.abrupt("return",this.parseBalance(a,!1));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,u,c,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=l.length>4&&void 0!==l[4]?l[4]:void 0,o=l.length>5&&void 0!==l[5]?l[5]:{},e.next=4,this.loadMarkets();case 4:return u={market:this.marketId(t),side:n,volume:a.toString(),ord_type:r},"limit"===r&&(u.price=s.toString()),e.next=8,this.privatePostOrders(this.extend(u,o));case 8:return c=e.sent,d=this.safeValue(c,"market"),h=this.safeValue(this.markets_by_id,d),e.abrupt("return",this.parseOrder(c,h));case 12:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u.length>1&&void 0!==u[1]?u[1]:void 0,r=u.length>2&&void 0!==u[2]?u[2]:{},e.next=4,this.loadMarkets();case 4:return n={id:t},e.next=7,this.privatePostOrderDelete(this.extend(n,r));case 7:if(a=e.sent,s=this.parseOrder(a),"closed"!==(o=s.status)&&"canceled"!==o){e.next=12;break}throw new v(this.id+" "+this.json(s));case 12:return e.abrupt("return",s);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({done:"closed",wait:"open",cancel:"canceled"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"market"),i=this.safeSymbol(r,t),n=this.parse8601(this.safeString(e,"created_at")),a=this.parseOrderStatus(this.safeString(e,"state")),s=this.safeString(e,"type"),o=this.safeString(e,"side"),u=this.safeString(e,"id");return this.safeOrder({id:u,clientOrderId:void 0,timestamp:n,datetime:this.iso8601(n),lastTradeTimestamp:void 0,status:a,symbol:i,type:s,timeInForce:void 0,postOnly:void 0,side:o,price:this.safeNumber(e,"price"),stopPrice:void 0,amount:this.safeNumber(e,"volume"),filled:this.safeNumber(e,"executed_volume"),remaining:this.safeNumber(e,"remaining_volume"),trades:void 0,fee:void 0,info:e,cost:void 0,average:void 0})}},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.loadMarkets();case 4:return n={id:parseInt(t)},e.next=7,this.privateGetOrder(this.extend(n,r));case 7:return a=e.sent,e.abrupt("return",this.parseOrder(a));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=c.length>0&&void 0!==c[0]?c[0]:void 0,r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},void 0!==t){e.next=6;break}throw new f(this.id+" fetchOpenOrders() requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.market(t),o={market:s.id},e.next=12,this.privateGetOrders(this.extend(o,a));case 12:return u=e.sent,e.abrupt("return",this.parseOrders(u,s,r,n));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=c.length>0&&void 0!==c[0]?c[0]:void 0,r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},void 0!==t){e.next=6;break}throw new f(this.id+" fetchMyTrades() requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.market(t),o={market:s.id},e.next=12,this.privateGetTradesMy(this.extend(o,a));case 12:return u=e.sent,e.abrupt("return",this.parseTrades(u,s,r,n));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"nonce",value:function(){return this.milliseconds()}},{key:"encodeParams",value:function(e){if("orders"in e){for(var t=e.orders,r=this.urlencode(this.keysort(this.omit(e,"orders"))),i=0;i<t.length;i++)for(var n=t[i],a=Object.keys(n),s=0;s<a.length;s++){var o=a[s];r+="&orders%5B%5D%5B"+o+"%5D="+n[o].toString()}return r}return this.urlencode(this.keysort(e))}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s="/api/"+this.version+"/"+this.implodeParams(e,i);"extension"in this.urls&&(s+=this.urls.extension);var o=this.omit(i,this.extractParams(e)),u=this.urls.api+s;if("public"===t)Object.keys(o).length&&(u+="?"+this.urlencode(o));else{this.checkRequiredCredentials();var c=this.nonce().toString(),d=this.encodeParams(this.extend({access_key:this.apiKey,tonce:c},i)),h=r+"|"+s+"|"+d,l=this.hmac(this.encode(h),this.encode(this.secret)),f=d+"&signature="+l;"GET"===r?u+="?"+f:(a=f,n={"Content-Type":"application/x-www-form-urlencoded"})}return{url:u,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,u){if(void 0!==s&&400===e){var c=this.safeValue(s,"error"),d=this.safeString(c,"code"),h=this.id+" "+this.json(s);this.throwExactlyMatchedException(this.exceptions,d,h)}}}]),r}(h)},function(e,t,r){"use strict";var i=r(7),n=r(8),a=r(1),s=r(2),o=r(6),u=r(3),c=r(4),d=r(5),h=r(11),l=r(10),f=l.ExchangeError,p=l.AuthenticationError,v=l.BadSymbol,m=l.InvalidOrder,g=l.InsufficientFunds,y=r(12);e.exports=function(e){c(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(u(r.prototype),"describe",this).call(this),{id:"lakebtc",name:"LakeBTC",countries:["US"],version:"api_v2",rateLimit:1e3,has:{cancelOrder:!0,CORS:!0,createMarketOrder:!1,createOrder:!0,fetchBalance:!0,fetchMarkets:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/28074120-72b7c38a-6660-11e7-92d9-d9027502281d.jpg",api:"https://api.lakebtc.com",www:"https://www.lakebtc.com",doc:["https://www.lakebtc.com/s/api_v2","https://www.lakebtc.com/s/api"]},api:{public:{get:["bcorderbook","bctrades","ticker"]},private:{post:["buyOrder","cancelOrders","getAccountInfo","getExternalAccounts","getOrders","getTrades","openOrders","sellOrder"]}},fees:{trading:{maker:.0015,taker:.002}},exceptions:{broad:{Signature:p,"invalid symbol":v,"Volume doit":m,insufficient_balance:g}}})}},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.length>0&&void 0!==p[0]?p[0]:{},e.next=3,this.publicGetTicker(t);case 3:for(r=e.sent,n=[],a=Object.keys(r),s=0;s<a.length;s++)o=a[s],u=r[o],c=o.slice(0,3),d=o.slice(3,6),h=c.toUpperCase(),l=d.toUpperCase(),f=h+"/"+l,n.push({id:o,symbol:f,base:h,quote:l,baseId:c,quoteId:d,info:u,active:void 0,precision:this.precision,limits:this.limits});return e.abrupt("return",n);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privatePostGetAccountInfo(t);case 5:for(r=e.sent,n=this.safeValue(r,"balance",{}),a={info:r},s=Object.keys(n),o=0;o<s.length;o++)u=s[o],c=this.safeCurrencyCode(u),(d=this.account()).total=this.safeString(n,u),a[c]=d;return e.abrupt("return",this.parseBalance(a,!1));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.loadMarkets();case 4:return n={symbol:this.marketId(t)},e.next=7,this.publicGetBcorderbook(this.extend(n,r));case 7:return a=e.sent,e.abrupt("return",this.parseOrderBook(a));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.milliseconds(),i=void 0;void 0!==t&&(i=t.symbol);var n=this.safeNumber(e,"last");return{symbol:i,timestamp:r,datetime:this.iso8601(r),high:this.safeNumber(e,"high"),low:this.safeNumber(e,"low"),bid:this.safeNumber(e,"bid"),bidVolume:void 0,ask:this.safeNumber(e,"ask"),askVolume:void 0,vwap:void 0,open:void 0,close:n,last:n,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeNumber(e,"volume"),quoteVolume:void 0,info:e}}},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:void 0,r=l.length>1&&void 0!==l[1]?l[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetTicker(r);case 6:for(n=e.sent,a=Object.keys(n),s={},o=0;o<a.length;o++)u=a[o],c=n[u],d=this.safeMarket(u),h=d.symbol,s[h]=this.parseTicker(c,d);return e.abrupt("return",this.filterByArray(s,"symbol",t));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>1&&void 0!==s[1]?s[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),e.next=6,this.publicGetTicker(r);case 6:return a=e.sent,e.abrupt("return",this.parseTicker(a[n.id],n));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeTimestamp(e,"date"),i=this.safeString(e,"tid"),n=this.safeString(e,"price"),a=this.safeString(e,"amount"),s=this.parseNumber(n),o=this.parseNumber(a),u=this.parseNumber(y.stringMul(n,a)),c=void 0;return void 0!==t&&(c=t.symbol),{id:i,info:e,timestamp:r,datetime:this.iso8601(r),symbol:c,order:void 0,type:void 0,side:void 0,takerOrMaker:void 0,price:s,amount:o,cost:u,fee:void 0}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={symbol:s.id},e.next=9,this.publicGetBctrades(this.extend(o,a));case 9:return u=e.sent,e.abrupt("return",this.parseTrades(u,s,r,n));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,u,c,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=l.length>4&&void 0!==l[4]?l[4]:void 0,o=l.length>5&&void 0!==l[5]?l[5]:{},e.next=4,this.loadMarkets();case 4:if("market"!==r){e.next=6;break}throw new f(this.id+" allows limit orders only");case 6:return u="privatePost"+this.capitalize(n)+"Order",c=this.market(t),d={params:[s,a,c.id]},e.next=11,this[u](this.extend(d,o));case 11:return h=e.sent,e.abrupt("return",{info:h,id:this.safeString(h,"id")});case 13:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:{},e.next=4,this.loadMarkets();case 4:return n={params:[t]},e.next=7,this.privatePostCancelOrder(this.extend(n,r));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"nonce",value:function(){return this.microseconds()}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.urls.api+"/"+this.version;if("public"===t)s+="/"+e,Object.keys(i).length&&(s+="?"+this.urlencode(i));else{this.checkRequiredCredentials();var o=this.nonce(),u=o.toString(),c=this.seconds(),d="";if("params"in i){for(var h=i.params,l=[],f=0;f<h.length;f++){var p=h[f];"string"!==typeof h&&(p=p.toString()),l.push(p)}d=l.join(","),a={method:e,params:i.params,id:c}}else a={method:e,params:"",id:c};a=this.json(a);var v=["tonce="+u,"accesskey="+this.apiKey,"requestmethod="+r.toLowerCase(),"id="+c.toString(),"method="+e,"params="+d];v=v.join("&");var m=this.hmac(this.encode(v),this.encode(this.secret),"sha1"),g=this.apiKey+":"+m,y=this.decode(this.stringToBase64(g));n={"Json-Rpc-Tonce":u,Authorization:"Basic "+y,"Content-Type":"application/json"}}return{url:s,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,u){if(void 0!==s){var c=this.id+" "+a,d=this.safeString(s,"error");if(void 0!==d)throw this.throwBroadlyMatchedException(this.exceptions.broad,d,c),new f(c)}}}]),r}(h)},function(e,t,r){"use strict";var i=r(7),n=r(8),a=r(1),s=r(2),o=r(6),u=r(3),c=r(4),d=r(5),h=r(11),l=r(10),f=l.ExchangeError,p=l.ArgumentsRequired,v=l.InvalidNonce,m=l.OrderNotFound,g=l.InvalidOrder,y=l.DDoSProtection,b=l.BadRequest,x=l.AuthenticationError,k=r(12);e.exports=function(e){c(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(u(r.prototype),"describe",this).call(this),{id:"latoken",name:"Latoken",countries:["KY"],version:"v1",rateLimit:2e3,certified:!1,userAgent:this.userAgents.chrome,has:{CORS:!1,publicAPI:!0,privateAPI:!0,cancelOrder:!0,cancelAllOrders:!0,createMarketOrder:!1,createOrder:!0,fetchBalance:!0,fetchCanceledOrders:!0,fetchClosedOrders:!0,fetchCurrencies:!0,fetchMyTrades:!0,fetchOpenOrders:!0,fetchOrder:!1,fetchOrdersByStatus:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTickers:!0,fetchTime:!0,fetchTrades:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/61511972-24c39f00-aa01-11e9-9f7c-471f1d6e5214.jpg",api:"https://api.latoken.com",www:"https://latoken.com",doc:["https://api.latoken.com"]},api:{public:{get:["ExchangeInfo/time","ExchangeInfo/limits","ExchangeInfo/pairs","ExchangeInfo/pairs/{currency}","ExchangeInfo/pair","ExchangeInfo/currencies","ExchangeInfo/currencies/{symbol}","MarketData/tickers","MarketData/ticker/{symbol}","MarketData/orderBook/{symbol}","MarketData/orderBook/{symbol}/{limit}","MarketData/trades/{symbol}","MarketData/trades/{symbol}/{limit}"]},private:{get:["Account/balances","Account/balances/{currency}","Order/status","Order/active","Order/get_order","Order/trades"],post:["Order/new","Order/test-order","Order/cancel","Order/cancel_all"]}},fees:{trading:{feeSide:"get",tierBased:!1,percentage:!0,maker:.001,taker:.001}},commonCurrencies:{MT:"Monarch",TSL:"Treasure SL"},options:{createOrderMethod:"private_post_order_new"},exceptions:{exact:{"Signature or ApiKey is not valid":x,"Request is out of time":v,"Symbol must be specified":b},broad:{"Request limit reached":y,Pair:b,"Price needs to be greater than":g,"Amount needs to be greater than":g,"The Symbol field is required":g,"OrderType is not valid":g,"Side is not valid":g,"Cancelable order whit":m,Order:m}}})}},{key:"nonce",value:function(){return this.milliseconds()}},{key:"fetchTime",value:function(){var e=n(i.mark((function e(){var t,r,n=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},e.next=3,this.publicGetExchangeInfoTime(t);case 3:return r=e.sent,e.abrupt("return",this.safeInteger(r,"unixTimeMiliseconds"));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p,v,m,g,y=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=y.length>0&&void 0!==y[0]?y[0]:{},e.next=3,this.publicGetExchangeInfoPairs(t);case 3:for(r=e.sent,n=[],a=0;a<r.length;a++)s=r[a],o=this.safeString(s,"symbol"),u=this.safeString(s,"baseCurrency"),c=this.safeString(s,"quotedCurrency"),d=this.safeInteger(s,"pairId"),h=this.safeCurrencyCode(u),l=this.safeCurrencyCode(c),f=h+"/"+l,p=this.safeString(s,"pricePrecision"),v=void 0===p?void 0:"1e-"+p,m={price:parseInt(p),amount:this.safeInteger(s,"amountPrecision")},g={amount:{min:this.safeNumber(s,"minQty"),max:void 0},price:{min:this.parseNumber(v),max:void 0},cost:{min:void 0,max:void 0}},n.push({id:o,numericId:d,info:s,symbol:f,base:h,quote:l,baseId:u,quoteId:c,active:void 0,precision:m,limits:g});return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchCurrencies",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:{},e.next=3,this.publicGetExchangeInfoCurrencies(t);case 3:for(r=e.sent,n={},a=0;a<r.length;a++)s=r[a],o=this.safeString(s,"symbol"),u=this.safeInteger(s,"currencyId"),c=this.safeCurrencyCode(o),d=this.safeInteger(s,"precission"),h=this.safeNumber(s,"fee"),l=void 0,n[c]={id:o,numericId:u,code:c,info:s,name:c,active:l,fee:h,precision:d,limits:{amount:{min:void 0,max:void 0},withdraw:{min:void 0,max:void 0}}};return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetAccountBalances(t);case 5:for(r=e.sent,n={info:r},a=0;a<r.length;a++)s=r[a],o=this.safeString(s,"symbol"),u=this.safeCurrencyCode(o),c=this.safeString(s,"frozen"),d=this.safeString(s,"pending"),(h=this.account()).used=k.stringAdd(c,d),h.free=this.safeString(s,"available"),h.total=this.safeString(s,"amount"),n[u]=h;return e.abrupt("return",this.parseBalance(n,!1));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:{},e.next=4,this.loadMarkets();case 4:return a=this.market(t),s={symbol:a.id,limit:10},void 0!==r&&(s.limit=r),e.next=9,this.publicGetMarketDataOrderBookSymbolLimit(this.extend(s,n));case 9:return o=e.sent,e.abrupt("return",this.parseOrderBook(o,void 0,"bids","asks","price","quantity"));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"symbol"),i=this.safeSymbol(r,t),n=this.safeNumber(e,"open"),a=this.safeNumber(e,"close"),s=void 0;void 0!==n&&void 0!==a&&(s=a-n);var o=this.safeNumber(e,"priceChange"),u=this.nonce();return{symbol:i,timestamp:u,datetime:this.iso8601(u),low:this.safeNumber(e,"low"),high:this.safeNumber(e,"high"),bid:void 0,bidVolume:void 0,ask:void 0,askVolume:void 0,vwap:void 0,open:n,close:a,last:a,previousClose:void 0,change:s,percentage:o,average:void 0,baseVolume:void 0,quoteVolume:this.safeNumber(e,"volume"),info:e}}},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={symbol:n.id},e.next=7,this.publicGetMarketDataTickerSymbol(this.extend(a,r));case 7:return s=e.sent,e.abrupt("return",this.parseTicker(s,n));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:void 0,r=c.length>1&&void 0!==c[1]?c[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetMarketDataTickers(r);case 6:for(n=e.sent,a={},s=0;s<n.length;s++)o=this.parseTicker(n[s]),u=o.symbol,a[u]=o;return e.abrupt("return",this.filterByArray(a,"symbol",t));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0,i=this.safeInteger2(e,"timestamp","time");void 0!==i&&i<12309408e5&&(i*=1e3);var n=this.safeString(e,"price"),a=this.safeString(e,"amount"),s=this.parseNumber(n),o=this.parseNumber(a),u=this.parseNumber(k.stringMul(n,a)),c=this.safeString(e,"side"),d=void 0;void 0!==t&&(d=t.symbol);var h=this.safeString(e,"id"),l=this.safeString(e,"orderId"),f=this.safeNumber(e,"commission"),p=void 0;return void 0!==f&&(p={cost:f,currency:void 0}),{info:e,timestamp:i,datetime:this.iso8601(i),symbol:d,id:h,order:l,type:r,takerOrMaker:void 0,side:c,price:s,amount:o,cost:u,fee:p}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={symbol:s.id},void 0!==n&&(o.limit=n),e.next=10,this.publicGetMarketDataTradesSymbol(this.extend(o,a));case 10:return u=e.sent,c=this.safeValue(u,"trades",[]),e.abrupt("return",this.parseTrades(c,s,r,n));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},void 0!==t){e.next=6;break}throw new p(this.id+" fetchMyTrades() requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.market(t),o={symbol:s.id},e.next=12,this.privateGetOrderTrades(this.extend(o,a));case 12:return u=e.sent,c=this.safeValue(u,"trades",[]),e.abrupt("return",this.parseTrades(c,s,r,n));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({active:"open",partiallyFilled:"open",filled:"closed",cancelled:"canceled"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"orderId"),i=this.safeTimestamp(e,"timeCreated"),n=this.safeString(e,"symbol"),a=this.safeSymbol(n,t),s=this.safeString(e,"side"),o=this.safeString(e,"orderType"),u=this.safeNumber(e,"price"),c=this.safeNumber(e,"amount"),d=this.safeNumber(e,"executedAmount"),h=this.parseOrderStatus(this.safeString(e,"orderStatus")),l=this.safeTimestamp(e,"timeFilled"),f=void 0;void 0!==l&&l>0&&(f=l);var p=this.safeString(e,"cliOrdId");return this.safeOrder({id:r,clientOrderId:p,info:e,timestamp:i,datetime:this.iso8601(i),lastTradeTimestamp:f,status:h,symbol:a,type:o,timeInForce:void 0,postOnly:void 0,side:s,price:u,stopPrice:void 0,cost:void 0,amount:c,filled:d,average:void 0,remaining:void 0,fee:void 0,trades:void 0})}},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:void 0,n=s.length>2&&void 0!==s[2]?s[2]:void 0,a=s.length>3&&void 0!==s[3]?s[3]:{},e.abrupt("return",this.fetchOrdersWithMethod("private_get_order_active",t,r,n,a));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:void 0,n=s.length>2&&void 0!==s[2]?s[2]:void 0,a=s.length>3&&void 0!==s[3]?s[3]:{},e.abrupt("return",this.fetchOrdersByStatus("filled",t,r,n,a));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchCanceledOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:void 0,n=s.length>2&&void 0!==s[2]?s[2]:void 0,a=s.length>3&&void 0!==s[3]?s[3]:{},e.abrupt("return",this.fetchOrdersByStatus("cancelled",t,r,n,a));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrdersByStatus",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:void 0,s=u.length>4&&void 0!==u[4]?u[4]:{},o={status:t},e.abrupt("return",this.fetchOrdersWithMethod("private_get_order_status",r,n,a,this.extend(o,s)));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrdersWithMethod",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:void 0,s=d.length>4&&void 0!==d[4]?d[4]:{},void 0!==r){e.next=6;break}throw new p(this.id+" fetchOrdersWithMethod() requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return o=this.market(r),u={symbol:o.id},void 0!==a&&(u.limit=a),e.next=13,this[t](this.extend(u,s));case 13:return c=e.sent,e.abrupt("return",this.parseOrders(c,o,n,a));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.loadMarkets();case 4:return n={orderId:t},e.next=7,this.privateGetOrderGetOrder(this.extend(n,r));case 7:return a=e.sent,e.abrupt("return",this.parseOrder(a));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=h.length>4&&void 0!==h[4]?h[4]:void 0,o=h.length>5&&void 0!==h[5]?h[5]:{},e.next=4,this.loadMarkets();case 4:if("limit"===r){e.next=6;break}throw new f(this.id+" allows limit orders only");case 6:return u={symbol:this.marketId(t),side:n,price:this.priceToPrecision(t,s),amount:this.amountToPrecision(t,a),orderType:r},c=this.safeString(this.options,"createOrderMethod","private_post_order_new"),e.next=10,this[c](this.extend(u,o));case 10:return d=e.sent,e.abrupt("return",this.parseOrder(d));case 12:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.loadMarkets();case 4:return n={orderId:t},e.next=7,this.privatePostOrderCancel(this.extend(n,r));case 7:return a=e.sent,e.abrupt("return",this.parseOrder(a));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cancelAllOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:{},void 0!==t){e.next=4;break}throw new p(this.id+" cancelAllOrders() requires a symbol argument");case 4:return e.next=6,this.loadMarkets();case 6:return n=this.marketId(t),a={symbol:n},e.next=10,this.privatePostOrderCancelAll(this.extend(a,r));case 10:for(s=e.sent,o=[],u=this.safeValue(s,"cancelledOrders",[]),c=0;c<u.length;c++)d=this.parseOrder({symbol:n,orderId:u[c],orderStatus:"canceled"}),o.push(d);return e.abrupt("return",o);case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s="/api/"+this.version+"/"+this.implodeParams(e,i),o=this.omit(i,this.extractParams(e));if("private"===t){var u=this.nonce();o=this.extend({timestamp:u},o)}var c=this.urlencode(o);if(Object.keys(o).length&&(s+="?"+c),"private"===t){this.checkRequiredCredentials();var d=this.hmac(this.encode(s),this.encode(this.secret));n={"X-LA-KEY":this.apiKey,"X-LA-SIGNATURE":d},"POST"===r&&(n["Content-Type"]="application/x-www-form-urlencoded",a=c)}var h=this.urls.api+s;return{url:h,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,u){if(s){var c=this.safeString(s,"message"),d=this.id+" "+a;void 0!==c&&(this.throwExactlyMatchedException(this.exceptions.exact,c,d),this.throwBroadlyMatchedException(this.exceptions.broad,c,d));var h=this.safeValue(s,"error",{}),l=this.safeString(h,"message");if(void 0!==l)throw this.throwExactlyMatchedException(this.exceptions.exact,l,d),this.throwBroadlyMatchedException(this.exceptions.broad,l,d),new f(d)}}}]),r}(h)},function(e,t,r){"use strict";var i=r(7),n=r(8),a=r(1),s=r(2),o=r(6),u=r(3),c=r(4),d=r(5),h=r(11),l=r(10),f=l.ExchangeError,p=l.DDoSProtection,v=l.AuthenticationError,m=l.InvalidOrder,g=l.ArgumentsRequired,y=r(12);e.exports=function(e){c(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(u(r.prototype),"describe",this).call(this),{id:"lbank",name:"LBank",countries:["CN"],version:"v1",has:{cancelOrder:!0,createOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchMarkets:!0,fetchOHLCV:!0,fetchOpenOrders:!1,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,withdraw:!0},timeframes:{"1m":"minute1","5m":"minute5","15m":"minute15","30m":"minute30","1h":"hour1","2h":"hour2","4h":"hour4","6h":"hour6","8h":"hour8","12h":"hour12","1d":"day1","1w":"week1"},urls:{logo:"https://user-images.githubusercontent.com/1294454/38063602-9605e28a-3302-11e8-81be-64b1e53c4cfb.jpg",api:"https://api.lbank.info",www:"https://www.lbank.info",doc:"https://github.com/LBank-exchange/lbank-official-api-docs",fees:"https://lbankinfo.zendesk.com/hc/en-gb/articles/360012072873-Trading-Fees",referral:"https://www.lbex.io/invite?icode=7QCY"},api:{public:{get:["currencyPairs","ticker","depth","trades","kline","accuracy"]},private:{post:["user_info","create_order","cancel_order","orders_info","orders_info_history","withdraw","withdrawCancel","withdraws","withdrawConfigs"]}},fees:{trading:{maker:.001,taker:.001},funding:{withdraw:{BTC:void 0,ZEC:.01,ETH:.01,ETC:.01,VEN:10,BCH:2e-4,SC:50,BTM:20,NAS:1,EOS:1,XWC:5,BTS:1,INK:10,BOT:3,YOYOW:15,TGC:10,NEO:0,CMT:20,SEER:2e3,FIL:void 0,BTG:void 0}}},commonCurrencies:{VET_ERC20:"VEN",PNT:"Penta"},options:{cacheSecretAsPem:!0}})}},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p,v=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=v.length>0&&void 0!==v[0]?v[0]:{},e.next=3,this.publicGetAccuracy(t);case 3:for(r=e.sent,n=[],a=0;a<r.length;a++)s=r[a],o=s.symbol,u=o.split("_"),c=void 0,d=void 0,u.length>2?(c=u[0]+"_"+u[1],d=u[2]):(c=u[0],d=u[1]),h=this.safeCurrencyCode(c),l=this.safeCurrencyCode(d),f=h+"/"+l,p={amount:this.safeInteger(s,"quantityAccuracy"),price:this.safeInteger(s,"priceAccuracy")},n.push({id:o,symbol:f,base:h,quote:l,baseId:c,quoteId:d,active:!0,precision:p,limits:{amount:{min:Math.pow(10,-p.amount),max:void 0},price:{min:Math.pow(10,-p.price),max:Math.pow(10,p.price)},cost:{min:void 0,max:void 0}},info:o});return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0;if(void 0===t){var i=this.safeString(e,"symbol");if(i in this.markets_by_id){var n=this.marketsById[i];r=n.symbol}else{var a=i.split("_"),s=void 0,o=void 0,u=a.length;u>2?(s=a[0]+"_"+a[1],o=a[2]):(s=a[0],o=a[1]);var c=this.safeCurrencyCode(s),d=this.safeCurrencyCode(o);r=c+"/"+d}}var h=this.safeInteger(e,"timestamp"),l=e;e=l.ticker;var f=this.safeNumber(e,"latest"),p=this.safeNumber(e,"change"),v=void 0;if(void 0!==p){var m=this.sum(1,p/100);m>0&&(v=f/this.sum(1,m))}var g=void 0,y=void 0;return void 0!==f&&void 0!==v&&(g=f-v,y=this.sum(f,v)/2),void 0!==t&&(r=t.symbol),{symbol:r,timestamp:h,datetime:this.iso8601(h),high:this.safeNumber(e,"high"),low:this.safeNumber(e,"low"),bid:void 0,bidVolume:void 0,ask:void 0,askVolume:void 0,vwap:void 0,open:void 0,close:f,last:f,previousClose:void 0,change:g,percentage:p,average:y,baseVolume:this.safeNumber(e,"vol"),quoteVolume:this.safeNumber(e,"turnover"),info:l}}},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={symbol:n.id},e.next=7,this.publicGetTicker(this.extend(a,r));case 7:return s=e.sent,e.abrupt("return",this.parseTicker(s,n));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:{},e.next=4,this.loadMarkets();case 4:return n={symbol:"all"},e.next=7,this.publicGetTicker(this.extend(n,r));case 7:for(a=e.sent,s={},o=0;o<a.length;o++)u=this.parseTicker(a[o]),c=u.symbol,s[c]=u;return e.abrupt("return",this.filterByArray(s,"symbol",t));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:60,n=u.length>2&&void 0!==u[2]?u[2]:{},e.next=4,this.loadMarkets();case 4:return a=60,void 0!==r&&(a=Math.min(r,a)),s={symbol:this.marketId(t),size:a},e.next=9,this.publicGetDepth(this.extend(s,n));case 9:return o=e.sent,e.abrupt("return",this.parseOrderBook(o));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0;void 0!==t&&(r=t.symbol);var i=this.safeInteger(e,"date_ms"),n=this.safeString(e,"price"),a=this.safeString(e,"amount"),s=this.parseNumber(n),o=this.parseNumber(a),u=this.parseNumber(y.stringMul(n,a)),c=this.safeString(e,"tid"),d=void 0,h=this.safeString(e,"type");return h=h.replace("_market",""),{id:c,info:this.safeValue(e,"info",e),timestamp:i,datetime:this.iso8601(i),symbol:r,order:void 0,type:d,side:h,takerOrMaker:void 0,price:s,amount:o,cost:u,fee:void 0}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={symbol:s.id,size:100},void 0!==r&&(o.time=parseInt(r)),void 0!==n&&(o.size=n),e.next=11,this.publicGetTrades(this.extend(o,a));case 11:return u=e.sent,e.abrupt("return",this.parseTrades(u,s,r,n));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){return[this.safeTimestamp(e,0),this.safeNumber(e,1),this.safeNumber(e,2),this.safeNumber(e,3),this.safeNumber(e,4),this.safeNumber(e,5)]}},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:"5m",n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:1e3,s=d.length>4&&void 0!==d[4]?d[4]:{},e.next=6,this.loadMarkets();case 6:if(o=this.market(t),void 0!==n){e.next=9;break}throw new g(this.id+" fetchOHLCV() requires a `since` argument");case 9:if(void 0!==a){e.next=11;break}throw new g(this.id+" fetchOHLCV() requires a `limit` argument");case 11:return u={symbol:o.id,type:this.timeframes[r],size:a,time:parseInt(n/1e3)},e.next=14,this.publicGetKline(this.extend(u,s));case 14:return c=e.sent,e.abrupt("return",this.parseOHLCVs(c,o,r,n,a));case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.length>0&&void 0!==p[0]?p[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privatePostUserInfo(t);case 5:for(r=e.sent,n={info:r},a=this.safeValue(r,"info",{}),s=this.safeValue(a,"free",{}),o=this.safeValue(a,"freeze",{}),u=this.safeValue(a,"asset",{}),c=Object.keys(s),d=0;d<c.length;d++)h=c[d],l=this.safeCurrencyCode(h),(f=this.account()).free=this.safeString(s,h),f.used=this.safeString(o,h),f.total=this.safeString(u,h),n[l]=f;return e.abrupt("return",this.parseBalance(n,!1));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({"-1":"cancelled",0:"open",1:"open",2:"closed",4:"closed"},e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"symbol"),i=this.safeSymbol(r,t,"_"),n=this.safeInteger(e,"create_time"),a=this.safeNumber(e,"price"),s=this.safeNumber(e,"amount",0),o=this.safeNumber(e,"deal_amount",0),u=this.safeNumber(e,"avg_price"),c=this.parseOrderStatus(this.safeString(e,"status")),d=this.safeString(e,"order_id"),h=this.safeString(e,"order_type"),l=this.safeString(e,"type");return this.safeOrder({id:d,clientOrderId:void 0,datetime:this.iso8601(n),timestamp:n,lastTradeTimestamp:void 0,status:c,symbol:i,type:h,timeInForce:void 0,postOnly:void 0,side:l,price:a,stopPrice:void 0,cost:void 0,amount:s,filled:o,remaining:void 0,trades:void 0,fee:void 0,info:this.safeValue(e,"info",e),average:u})}},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=h.length>4&&void 0!==h[4]?h[4]:void 0,o=h.length>5&&void 0!==h[5]?h[5]:{},e.next=4,this.loadMarkets();case 4:return u=this.market(t),c={symbol:u.id,type:n,amount:a},"market"===r?c.type+="_market":c.price=s,e.next=9,this.privatePostCreateOrder(this.extend(c,o));case 9:return d=e.sent,(c=this.omit(c,"type")).order_id=d.order_id,c.type=n,c.order_type=r,c.create_time=this.milliseconds(),c.info=d,e.abrupt("return",this.parseOrder(c,u));case 17:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:{},e.next=4,this.loadMarkets();case 4:return a=this.market(r),s={symbol:a.id,order_id:t},e.next=8,this.privatePostCancelOrder(this.extend(s,n));case 8:return o=e.sent,e.abrupt("return",o);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:{},e.next=4,this.loadMarkets();case 4:return a=this.market(r),s={symbol:a.id,order_id:t},e.next=8,this.privatePostOrdersInfo(this.extend(s,n));case 8:if(o=e.sent,u=this.safeValue(o,"orders",[]),c=this.parseOrders(u,a),1!==c.length){e.next=16;break}return e.abrupt("return",c[0]);case 16:return e.abrupt("return",c);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return void 0===n&&(n=100),s=this.market(t),o={symbol:s.id,current_page:1,page_length:n},e.next=11,this.privatePostOrdersInfoHistory(this.extend(o,a));case 11:return u=e.sent,c=this.safeValue(u,"orders",[]),e.abrupt("return",this.parseOrders(c,void 0,r,n));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.fetchOrders(t,r,n,a);case 6:return s=e.sent,o=this.filterBy(s,"status","closed"),u=this.filterBy(s,"status","cancelled"),c=this.arrayConcat(o,u),e.abrupt("return",this.filterBySymbolSinceLimit(c,t,r,n));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"withdraw",value:function(){var e=n(i.mark((function e(t,r,n){var a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=d.length>3&&void 0!==d[3]?d[3]:void 0,s=d.length>4&&void 0!==d[4]?d[4]:{},this.checkAddress(n),e.next=5,this.loadMarkets();case 5:return o=this.currency(t),u={assetCode:o.id,amount:r,account:n},void 0!==a&&(u.memo=a),c=this.privatePostWithdraw(this.extend(u,s)),e.abrupt("return",{id:this.safeString(c,"id"),info:c});case 10:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"convertSecretToPem",value:function(e){var t=e.length-0,r=parseInt(t/64);r=this.sum(r,1);for(var i="-----BEGIN PRIVATE KEY-----\n",n=0;n<r;n++){var a=64*n,s=this.sum(a,64);i+=this.secret.slice(a,s)+"\n"}return i+"-----END PRIVATE KEY-----"}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.omit(i,this.extractParams(e)),o=this.urls.api+"/"+this.version+"/"+this.implodeParams(e,i);if(o+=".do","public"===t)Object.keys(s).length&&(o+="?"+this.urlencode(s));else{this.checkRequiredCredentials();var u=this.keysort(this.extend({api_key:this.apiKey},i)),c=this.rawencode(u),d=this.hash(this.encode(c)).toUpperCase(),h=this.safeValue(this.options,"cacheSecretAsPem",!0),l=void 0;h?void 0===(l=this.safeValue(this.options,"pem"))&&(l=this.convertSecretToPem(this.secret),this.options.pem=l):l=this.convertSecretToPem(this.secret);var f=this.binaryToBase64(this.rsa(d,this.encode(l),"RS256"));u.sign=f,a=this.urlencode(u),n={"Content-Type":"application/x-www-form-urlencoded"}}return{url:o,method:r,body:a,headers:n}}},{key:"request",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:"public",n=h.length>2&&void 0!==h[2]?h[2]:"GET",a=h.length>3&&void 0!==h[3]?h[3]:{},s=h.length>4&&void 0!==h[4]?h[4]:void 0,o=h.length>5&&void 0!==h[5]?h[5]:void 0,e.next=7,this.fetch2(t,r,n,a,s,o);case 7:if(u=e.sent,"false"!==this.safeString(u,"result")){e.next=14;break}throw c=this.safeString(u,"error_code"),d=this.safeString({1e4:"Internal error",10001:"The required parameters can not be empty",10002:"verification failed",10003:"Illegal parameters",10004:"User requests are too frequent",10005:"Key does not exist",10006:"user does not exist",10007:"Invalid signature",10008:"This currency pair is not supported",10009:"Limit orders can not be missing orders and the number of orders",10010:"Order price or order quantity must be greater than 0",10011:"Market orders can not be missing the amount of the order",10012:"market sell orders can not be missing orders",10013:"is less than the minimum trading position 0.001",10014:"Account number is not enough",10015:"The order type is wrong",10016:"Account balance is not enough",10017:"Abnormal server",10018:"order inquiry can not be more than 50 less than one",10019:"withdrawal orders can not be more than 3 less than one",10020:"less than the minimum amount of the transaction limit of 0.001",10022:"Insufficient key authority"},c,this.json(u)),new(this.safeValue({10002:v,10004:p,10005:v,10006:v,10007:v,10009:m,10010:m,10011:m,10012:m,10013:m,10014:m,10015:m,10016:m,10022:v},c,f))(d);case 14:return e.abrupt("return",u);case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(h)},function(e,t,r){"use strict";var i=r(7),n=r(8),a=r(1),s=r(2),o=r(6),u=r(3),c=r(4),d=r(5),h=r(11),l=r(18).TICK_SIZE,f=r(10),p=f.ExchangeError,v=f.ArgumentsRequired,m=f.InvalidNonce,g=f.OrderNotFound,y=f.InvalidOrder,b=f.InsufficientFunds,x=f.AuthenticationError,k=f.DDoSProtection,w=f.NotSupported,_=f.BadSymbol,S=r(12);e.exports=function(e){c(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(u(r.prototype),"describe",this).call(this),{id:"liquid",name:"Liquid",countries:["JP","CN","TW"],version:"2",rateLimit:1e3,has:{cancelOrder:!0,CORS:!1,createOrder:!0,editOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchCurrencies:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,withdraw:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/45798859-1a872600-bcb4-11e8-8746-69291ce87b04.jpg",api:"https://api.liquid.com",www:"https://www.liquid.com",doc:["https://developers.liquid.com"],fees:"https://help.liquid.com/getting-started-with-liquid/the-platform/fee-structure",referral:"https://www.liquid.com/sign-up/?affiliate=SbzC62lt30976"},api:{public:{get:["currencies","products","products/{id}","products/{id}/price_levels","executions","ir_ladders/{currency}","fees"]},private:{get:["accounts","accounts/balance","accounts/main_asset","accounts/{id}","accounts/{currency}/reserved_balance_details","crypto_accounts","crypto_withdrawals","executions/me","fiat_accounts","fund_infos","loan_bids","loans","orders","orders/{id}","orders/{id}/trades","trades","trades/{id}/loans","trading_accounts","trading_accounts/{id}","transactions","withdrawals"],post:["crypto_withdrawals","fund_infos","fiat_accounts","loan_bids","orders","withdrawals"],put:["crypto_withdrawal/{id}/cancel","loan_bids/{id}/close","loans/{id}","orders/{id}","orders/{id}/cancel","trades/{id}","trades/{id}/adjust_margin","trades/{id}/close","trades/close_all","trading_accounts/{id}","withdrawals/{id}/cancel"]}},fees:{trading:{tierBased:!0,percentage:!0,taker:.003,maker:0,tiers:{perpetual:{maker:[[0,0],[25e3,0],[5e4,-25e-5],[1e5,-25e-5],[1e6,-25e-5],[1e7,-25e-5],[25e6,-25e-5],[5e7,-25e-5],[75e6,-25e-5],[1e8,-25e-5],[2e8,-25e-5],[3e8,-25e-5]],taker:[[0,.0012],[25e3,.00115],[5e4,.0011],[1e5,.00105],[1e6,.001],[1e7,95e-5],[25e6,9e-4],[5e7,85e-5],[75e6,8e-4],[1e8,75e-5],[2e8,7e-4],[3e8,65e-5]]},spot:{taker:[[0,.003],[1e4,.0029],[2e4,.0028],[5e4,.0026],[1e5,.002],[1e6,.0016],[5e6,.0012],[1e7,.001],[25e6,9e-4],[5e7,8e-4],[1e8,7e-4],[2e8,6e-4],[5e8,4e-4],[1e9,3e-4]],maker:[[0,0],[1e4,.002],[2e4,.0019],[5e4,.0018],[1e5,.0016],[1e6,8e-4],[5e6,7e-4],[1e7,5e-4],[25e6,0],[5e7,0],[1e8,0],[2e8,0],[5e8,0],[1e9,0]]}}}},precisionMode:l,exceptions:{"API rate limit exceeded. Please retry after 300s":k,"API Authentication failed":x,"Nonce is too small":m,"Order not found":g,"Can not update partially filled order":y,"Can not update non-live order":g,not_enough_free_balance:b,must_be_positive:y,less_than_order_size:y,price_too_high:y,price_too_small:y,product_disabled:_},commonCurrencies:{WIN:"WCOIN",HOT:"HOT Token",MIOTA:"IOTA"},options:{cancelOrderException:!0}})}},{key:"fetchCurrencies",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:{},e.next=3,this.publicGetCurrencies(t);case 3:for(r=e.sent,n={},a=0;a<r.length;a++)s=r[a],o=this.safeString(s,"currency"),u=this.safeCurrencyCode(o),c=s.depositable&&s.withdrawable,d=this.safeInteger(s,"assets_precision"),n[u]={id:o,code:u,info:s,name:u,active:c,fee:this.safeNumber(s,"withdrawal_fee"),precision:d,limits:{amount:{min:Math.pow(10,-d),max:Math.pow(10,d)},withdraw:{min:this.safeNumber(s,"minimum_withdrawal"),max:void 0}}};return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p,v,m,g,y,b,x,k,w,_,S,O,T,C,I,M=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=M.length>0&&void 0!==M[0]?M[0]:{},e.next=3,this.publicGetProducts(t);case 3:return r=e.sent,e.next=6,this.publicGetProducts({perpetual:"1"});case 6:return n=e.sent,e.next=9,this.fetchCurrencies();case 9:for(a=e.sent,s=this.indexBy(a,"code"),o=[],u=this.arrayConcat(r,n),c=0;c<u.length;c++)d=u[c],h=this.safeString(d,"id"),l=this.safeString(d,"base_currency"),f=this.safeString(d,"quoted_currency"),p=this.safeString(d,"product_type"),v="spot",m=!0,g=!1,"Perpetual"===p&&(m=!1,g=!0,v="swap"),y=this.safeCurrencyCode(l),b=this.safeCurrencyCode(f),x=void 0,x=g?this.safeString(d,"currency_pair_code"):y+"/"+b,k=this.fees.trading.maker,w=this.fees.trading.taker,"swap"===v&&(k=this.safeNumber(d,"maker_fee",this.fees.trading.maker),w=this.safeNumber(d,"taker_fee",this.fees.trading.taker)),_=this.safeValue(d,"disabled",!1),S=!_,O=this.safeValue(s,y),T={amount:1e-8,price:this.safeNumber(d,"tick_size")},C=void 0,void 0!==O&&(C=this.safeNumber(O.info,"minimum_order_quantity")),I={amount:{min:C,max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0}},o.push({id:h,symbol:x,base:y,quote:b,baseId:l,quoteId:f,type:v,spot:m,swap:g,maker:k,taker:w,limits:I,precision:T,active:S,info:d});return e.abrupt("return",o);case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p,v,m,g=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=g.length>0&&void 0!==g[0]?g[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetAccounts(t);case 5:for(r=e.sent,n={info:r},a=this.safeValue(r,"crypto_accounts",[]),s=this.safeValue(r,"fiat_accounts",[]),o=0;o<a.length;o++)u=a[o],c=this.safeString(u,"currency"),d=this.safeCurrencyCode(c),(h=this.account()).total=this.safeString(u,"balance"),h.used=this.safeString(u,"reserved_balance"),n[d]=h;for(l=0;l<s.length;l++)f=s[l],p=this.safeString(f,"currency"),v=this.safeCurrencyCode(p),(m=this.account()).total=this.safeString(f,"balance"),m.used=this.safeString(f,"reserved_balance"),n[v]=m;return e.abrupt("return",this.parseBalance(n,!1));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.loadMarkets();case 4:return n={id:this.marketId(t)},e.next=7,this.publicGetProductsIdPriceLevels(this.extend(n,r));case 7:return a=e.sent,e.abrupt("return",this.parseOrderBook(a,void 0,"buy_price_levels","sell_price_levels"));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.milliseconds(),i=void 0;if("last_traded_price"in e&&e.last_traded_price){var n=e.last_traded_price.length;n>0&&(i=this.safeNumber(e,"last_traded_price"))}var a=void 0;if(void 0===t){var s=this.safeString(e,"id");if(s in this.markets_by_id)t=this.markets_by_id[s];else{var o=this.safeString(e,"base_currency"),u=this.safeString(e,"quoted_currency");a in this.markets?t=this.markets[a]:a=this.safeCurrencyCode(o)+"/"+this.safeCurrencyCode(u)}}void 0!==t&&(a=t.symbol);var c=void 0,d=void 0,h=void 0,l=this.safeNumber(e,"last_price_24h");return void 0!==l&&void 0!==i&&(c=i-l,h=this.sum(i,l)/2,l>0&&(d=c/l*100)),{symbol:a,timestamp:r,datetime:this.iso8601(r),high:this.safeNumber(e,"high_market_ask"),low:this.safeNumber(e,"low_market_bid"),bid:this.safeNumber(e,"market_bid"),bidVolume:void 0,ask:this.safeNumber(e,"market_ask"),askVolume:void 0,vwap:void 0,open:l,close:i,last:i,previousClose:void 0,change:c,percentage:d,average:h,baseVolume:this.safeNumber(e,"volume_24h"),quoteVolume:void 0,info:e}}},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:void 0,r=c.length>1&&void 0!==c[1]?c[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetProducts(r);case 6:for(n=e.sent,a={},s=0;s<n.length;s++)o=this.parseTicker(n[s]),u=o.symbol,a[u]=o;return e.abrupt("return",this.filterByArray(a,"symbol",t));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={id:n.id},e.next=7,this.publicGetProductsId(this.extend(a,r));case 7:return s=e.sent,e.abrupt("return",this.parseTicker(s,n));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeTimestamp(e,"created_at"),i=this.safeString(e,"order_id"),n=this.safeString(e,"taker_side"),a=this.safeString(e,"my_side"),s=void 0!==a?a:n,o=void 0;void 0!==a&&(o=n===a?"taker":"maker");var u=this.safeString(e,"price"),c=this.safeString(e,"quantity"),d=this.parseNumber(u),h=this.parseNumber(c),l=this.parseNumber(S.stringMul(u,c)),f=this.safeString(e,"id"),p=void 0;return void 0!==t&&(p=t.symbol),{info:e,id:f,order:i,timestamp:r,datetime:this.iso8601(r),symbol:p,type:void 0,side:s,takerOrMaker:o,price:d,amount:h,cost:l,fee:void 0}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={product_id:s.id},void 0!==n&&(o.limit=n),void 0!==r&&(o.timestamp=parseInt(r/1e3)),e.next=11,this.publicGetExecutions(this.extend(o,a));case 11:return u=e.sent,c=void 0!==r?u:u.models,e.abrupt("return",this.parseTrades(c,s,r,n));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:void 0,r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},e.next=6,this.loadMarkets();case 6:return s=this.market(t),o={product_id:s.id,with_details:!0},void 0!==n&&(o.limit=n),e.next=11,this.privateGetExecutionsMe(this.extend(o,a));case 11:return u=e.sent,e.abrupt("return",this.parseTrades(u.models,s,r,n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=h.length>4&&void 0!==h[4]?h[4]:void 0,o=h.length>5&&void 0!==h[5]?h[5]:{},e.next=4,this.loadMarkets();case 4:return u=this.safeString2(o,"clientOrderId","client_order_id"),o=this.omit(o,["clientOrderId","client_order_id"]),c={order_type:r,product_id:this.marketId(t),side:n,quantity:this.amountToPrecision(t,a)},void 0!==u&&(c.client_order_id=u),"limit"!==r&&"limit_post_only"!==r&&"market_with_range"!==r&&"stop"!==r||(c.price=this.priceToPrecision(t,s)),e.next=11,this.privatePostOrders(this.extend(c,o));case 11:return d=e.sent,e.abrupt("return",this.parseOrder(d));case 13:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.length>1&&void 0!==o[1]?o[1]:void 0,r=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return n={id:t},e.next=7,this.privatePutOrdersIdCancel(this.extend(n,r));case 7:if(a=e.sent,"closed"!==(s=this.parseOrder(a)).status){e.next=12;break}if(!this.options.cancelOrderException){e.next=12;break}throw new g(this.id+" order closed already: "+this.json(a));case 12:return e.abrupt("return",s);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"editOrder",value:function(){var e=n(i.mark((function e(t,r,n,a,s){var o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=h.length>5&&void 0!==h[5]?h[5]:void 0,u=h.length>6&&void 0!==h[6]?h[6]:{},e.next=4,this.loadMarkets();case 4:if(void 0!==o){e.next=6;break}throw new v(this.id+" editOrder() requires the price argument");case 6:return c={order:{quantity:this.amountToPrecision(r,s),price:this.priceToPrecision(r,o)},id:t},e.next=9,this.privatePutOrdersId(this.extend(c,u));case 9:return d=e.sent,e.abrupt("return",this.parseOrder(d));case 11:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n,a){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({live:"open",filled:"closed",cancelled:"canceled"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),i=this.safeTimestamp(e,"created_at"),n=this.safeString(e,"product_id");t=this.safeValue(this.markets_by_id,n);var a=this.parseOrderStatus(this.safeString(e,"status")),s=this.safeNumber(e,"quantity"),o=this.safeNumber(e,"filled_quantity"),u=this.safeNumber(e,"price"),c=void 0,d=void 0;void 0!==t&&(c=t.symbol,d=t.quote);for(var h=this.safeString(e,"order_type"),l=0,f=0,p=this.safeNumber(e,"average_price"),v=this.parseTrades(this.safeValue(e,"executions",[]),t,void 0,void 0,{order:r,type:h}),m=v.length,g=0;g<m;g++){var y=v[g];y.order=r,y.type=h,f=this.sum(f,y.amount),l=this.sum(l,y.cost)}var b=void 0,x=void 0;m>0&&(x=v[m-1].timestamp,!p&&f>0&&(p=l/f),void 0===b&&(b=l),void 0===o&&(o=f));var k=void 0;void 0!==s&&void 0!==o&&(k=s-o);var w=this.safeString(e,"side"),_=this.safeString(e,"client_order_id");return{id:r,clientOrderId:_,timestamp:i,datetime:this.iso8601(i),lastTradeTimestamp:x,type:h,timeInForce:void 0,postOnly:void 0,status:a,symbol:c,side:w,price:u,stopPrice:void 0,amount:s,filled:o,cost:b,remaining:k,average:p,trades:v,fee:{currency:d,cost:this.safeNumber(e,"order_fee")},info:e}}},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.loadMarkets();case 4:return n={id:t},e.next=7,this.privateGetOrdersId(this.extend(n,r));case 7:return a=e.sent,e.abrupt("return",this.parseOrder(a));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return s=void 0,o={with_details:1},void 0!==t&&(s=this.market(t),o.product_id=s.id),void 0!==n&&(o.limit=n),e.next=12,this.privateGetOrders(this.extend(o,a));case 12:return u=e.sent,c=this.safeValue(u,"models",[]),e.abrupt("return",this.parseOrders(c,s,r,n));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:void 0,a=o.length>3&&void 0!==o[3]?o[3]:{},s={status:"live"},e.next=7,this.fetchOrders(t,r,n,this.extend(s,a));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:void 0,a=o.length>3&&void 0!==o[3]?o[3]:{},s={status:"filled"},e.next=7,this.fetchOrders(t,r,n,this.extend(s,a));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"withdraw",value:function(){var e=n(i.mark((function e(t,r,n){var a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=d.length>3&&void 0!==d[3]?d[3]:void 0,s=d.length>4&&void 0!==d[4]?d[4]:{},this.checkAddress(n),e.next=5,this.loadMarkets();case 5:if(o=this.currency(t),u={currency:o.id,address:n,amount:this.currencyToPrecision(t,r)},void 0===a){e.next=18;break}if("XRP"!==t){e.next=12;break}u.payment_id=a,e.next=18;break;case 12:if("XLM"!==t){e.next=17;break}u.memo_type="text",u.memo_value=a,e.next=18;break;case 17:throw new w(this.id+" withdraw() only supports a tag along the address for XRP or XLM");case 18:return e.next=20,this.privatePostCryptoWithdrawals(this.extend(u,s));case 20:return c=e.sent,e.abrupt("return",this.parseTransaction(c,o));case 22:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"parseTransactionStatus",value:function(e){return this.safeString({pending:"pending",cancelled:"canceled",approved:"ok"},e,e)}},{key:"parseTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),i=this.safeString(e,"address"),n=this.safeString2(e,"payment_id","memo_value"),a=void 0,s=this.safeString(e,"asset"),o=this.safeCurrencyCode(s,t),u=this.safeTimestamp(e,"created_at"),c=this.safeTimestamp(e,"updated_at"),d="withdrawal",h=this.parseTransactionStatus(this.safeString(e,"state")),l=this.safeNumber(e,"amount");return{info:e,id:r,txid:a,timestamp:u,datetime:this.iso8601(u),address:i,tag:n,type:d,amount:l,currency:o,status:h,updated:c,fee:void 0}}},{key:"nonce",value:function(){return this.milliseconds()}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s="/"+this.implodeParams(e,i),o=this.omit(i,this.extractParams(e));if(n={"X-Quoine-API-Version":this.version,"Content-Type":"application/json"},"private"===t){this.checkRequiredCredentials(),"GET"===r?Object.keys(o).length&&(s+="?"+this.urlencode(o)):Object.keys(o).length&&(a=this.json(o));var u=this.nonce(),c={path:s,token_id:this.apiKey,iat:Math.floor(u/1e3)};"client_order_id"in o||(c.nonce=u),n["X-Quoine-Auth"]=this.jwt(c,this.encode(this.secret))}else Object.keys(o).length&&(s+="?"+this.urlencode(o));return{url:s=this.urls.api+s,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,u){if(!(e>=200&&e<300))if(401!==e){if(429===e)throw new k(this.id+" "+a);if(void 0!==s){var c=this.id+" "+a,d=this.safeString(s,"message"),h=this.safeValue(s,"errors");if(void 0!==d)this.throwExactlyMatchedException(this.exceptions,d,c);else{if(void 0===h)throw new p(c);for(var l=Object.keys(h),f=0;f<l.length;f++)for(var v=h[l[f]],m=0;m<v.length;m++){var g=v[m];this.throwExactlyMatchedException(this.exceptions,g,c)}}}}else this.throwExactlyMatchedException(this.exceptions,a,a)}}]),r}(h)},function(e,t,r){"use strict";var i=r(7),n=r(8),a=r(1),s=r(2),o=r(6),u=r(3),c=r(4),d=r(5),h=r(11),l=r(10),f=l.ExchangeError,p=l.ArgumentsRequired,v=r(12);e.exports=function(e){c(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(u(r.prototype),"describe",this).call(this),{id:"luno",name:"luno",countries:["GB","SG","ZA"],rateLimit:1e3,version:"1",has:{cancelOrder:!0,CORS:!1,createOrder:!0,fetchAccounts:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchLedger:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,fetchTradingFee:!0,fetchTradingFees:!0},urls:{referral:"https://www.luno.com/invite/44893A",logo:"https://user-images.githubusercontent.com/1294454/27766607-8c1a69d8-5ede-11e7-930c-540b5eb9be24.jpg",api:{public:"https://api.luno.com/api",private:"https://api.luno.com/api",exchange:"https://api.luno.com/api/exchange"},www:"https://www.luno.com",doc:["https://www.luno.com/en/api","https://npmjs.org/package/bitx","https://github.com/bausmeier/node-bitx"]},api:{exchange:{get:["markets"]},public:{get:["orderbook","orderbook_top","ticker","tickers","trades"]},private:{get:["accounts/{id}/pending","accounts/{id}/transactions","balance","beneficiaries","fee_info","funding_address","listorders","listtrades","orders/{id}","quotes/{id}","withdrawals","withdrawals/{id}","transfers"],post:["accounts","accounts/{id}/name","postorder","marketorder","stoporder","funding_address","withdrawals","send","quotes","oauth2/grant"],put:["accounts/{id}/name","quotes/{id}"],delete:["quotes/{id}","withdrawals/{id}"]}}})}},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p,v,m,g=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=g.length>0&&void 0!==g[0]?g[0]:{},e.next=3,this.exchangeGetMarkets(t);case 3:for(r=e.sent,n=[],a=this.safeValue(r,"markets",[]),s=0;s<a.length;s++)o=a[s],u=this.safeString(o,"market_id"),c=this.safeString(o,"base_currency"),d=this.safeString(o,"counter_currency"),h=this.safeCurrencyCode(c),l=this.safeCurrencyCode(d),f=h+"/"+l,p=this.safeString(o,"trading_status"),v="ACTIVE"===p,m={amount:this.safeInteger(o,"volume_scale"),price:this.safeInteger(o,"price_scale")},n.push({id:u,symbol:f,base:h,quote:l,baseId:c,quoteId:d,active:v,precision:m,limits:{amount:{min:this.safeNumber(o,"min_volume"),max:this.safeNumber(o,"max_volume")},price:{min:this.safeNumber(o,"min_price"),max:this.safeNumber(o,"max_price")},cost:{min:void 0,max:void 0}},info:o});return e.abrupt("return",n);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchAccounts",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:{},e.next=3,this.privateGetBalance(t);case 3:for(r=e.sent,n=this.safeValue(r,"balance",[]),a=[],s=0;s<n.length;s++)o=n[s],u=this.safeString(o,"account_id"),c=this.safeString(o,"asset"),d=this.safeCurrencyCode(c),a.push({id:u,type:void 0,currency:d,info:o});return e.abrupt("return",a);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p,m,g=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=g.length>0&&void 0!==g[0]?g[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetBalance(t);case 5:for(r=e.sent,n=this.safeValue(r,"balance",[]),a={info:r},s=0;s<n.length;s++)o=n[s],u=this.safeString(o,"asset"),c=this.safeCurrencyCode(u),d=this.safeString(o,"reserved"),h=this.safeString(o,"unconfirmed"),l=this.safeString(o,"balance"),f=v.stringAdd(d,h),p=v.stringAdd(l,h),c in a?(a[c].used=v.stringAdd(a[c].used,f),a[c].total=v.stringAdd(a[c].total,p)):((m=this.account()).used=f,m.total=p,a[c]=m);return e.abrupt("return",this.parseBalance(a,!1));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:{},e.next=4,this.loadMarkets();case 4:return a="publicGetOrderbook",void 0!==r&&r<=100&&(a+="Top"),s={pair:this.marketId(t)},e.next=9,this[a](this.extend(s,n));case 9:return o=e.sent,u=this.safeInteger(o,"timestamp"),e.abrupt("return",this.parseOrderBook(o,u,"bids","asks","price","volume"));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({PENDING:"open"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeInteger(e,"creation_timestamp"),i=this.parseOrderStatus(this.safeString(e,"state"));i=i;var n="ASK"===e.type?"sell":"buy",a=this.safeString(e,"pair"),s=this.safeSymbol(a,t),o=this.safeNumber(e,"limit_price"),u=this.safeNumber(e,"limit_volume"),c=this.safeNumber(e,"fee_counter"),d=this.safeNumber(e,"fee_base"),h=this.safeNumber(e,"base"),l=this.safeNumber(e,"counter"),f={currency:void 0};c?(f.cost=c,void 0!==t&&(f.currency=t.quote)):(f.cost=d,void 0!==t&&(f.currency=t.base));var p=this.safeString(e,"order_id");return this.safeOrder({id:p,clientOrderId:void 0,datetime:this.iso8601(r),timestamp:r,lastTradeTimestamp:void 0,status:i,symbol:s,type:void 0,timeInForce:void 0,postOnly:void 0,side:n,price:o,stopPrice:void 0,amount:u,filled:h,cost:l,remaining:void 0,trades:void 0,fee:f,info:e,average:void 0})}},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.loadMarkets();case 4:return n={id:t},e.next=7,this.privateGetOrdersId(this.extend(n,r));case 7:return a=e.sent,e.abrupt("return",this.parseOrder(a));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrdersByState",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:void 0,s=h.length>4&&void 0!==h[4]?h[4]:{},e.next=7,this.loadMarkets();case 7:return o={},u=void 0,void 0!==t&&(o.state=t),void 0!==r&&(u=this.market(r),o.pair=u.id),e.next=13,this.privateGetListorders(this.extend(o,s));case 13:return c=e.sent,d=this.safeValue(c,"orders",[]),e.abrupt("return",this.parseOrders(d,u,n,a));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:void 0,n=s.length>2&&void 0!==s[2]?s[2]:void 0,a=s.length>3&&void 0!==s[3]?s[3]:{},e.next=6,this.fetchOrdersByState(void 0,t,r,n,a);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:void 0,n=s.length>2&&void 0!==s[2]?s[2]:void 0,a=s.length>3&&void 0!==s[3]?s[3]:{},e.next=6,this.fetchOrdersByState("PENDING",t,r,n,a);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:void 0,n=s.length>2&&void 0!==s[2]?s[2]:void 0,a=s.length>3&&void 0!==s[3]?s[3]:{},e.next=6,this.fetchOrdersByState("COMPLETE",t,r,n,a);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeInteger(e,"timestamp"),i=void 0;t&&(i=t.symbol);var n=this.safeNumber(e,"last_trade");return{symbol:i,timestamp:r,datetime:this.iso8601(r),high:void 0,low:void 0,bid:this.safeNumber(e,"bid"),bidVolume:void 0,ask:this.safeNumber(e,"ask"),askVolume:void 0,vwap:void 0,open:void 0,close:n,last:n,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeNumber(e,"rolling_24_hour_volume"),quoteVolume:void 0,info:e}}},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:void 0,r=f.length>1&&void 0!==f[1]?f[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetTickers(r);case 6:for(n=e.sent,a=this.indexBy(n.tickers,"pair"),s=Object.keys(a),o={},u=0;u<s.length;u++)c=s[u],d=this.safeMarket(c),h=d.symbol,l=a[c],o[h]=this.parseTicker(l,d);return e.abrupt("return",this.filterByArray(o,"symbol",t));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={pair:n.id},e.next=7,this.publicGetTicker(this.extend(a,r));case 7:return s=e.sent,e.abrupt("return",this.parseTicker(s,n));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e,t){var r=this.safeString(e,"order_id"),i=void 0,n=void 0;void 0!==r?i="sell"===(n="ASK"===e.type?"sell":"buy")&&e.is_buy?"maker":"buy"!==n||e.is_buy?"taker":"maker":n=e.is_buy?"buy":"sell";var a=this.safeNumber(e,"fee_base"),s=this.safeNumber(e,"fee_counter"),o=void 0,u=void 0;void 0!==a?0!==a&&(o=t.base,u=a):void 0!==s&&0!==s&&(o=t.quote,u=s);var c=this.safeInteger(e,"timestamp");return{info:e,id:void 0,timestamp:c,datetime:this.iso8601(c),symbol:t.symbol,order:r,type:void 0,side:n,takerOrMaker:i,price:this.safeNumber(e,"price"),amount:this.safeNumber(e,"volume"),cost:this.safeNumber(e,"counter"),fee:{cost:u,currency:o}}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={pair:s.id},void 0!==r&&(o.since=r),e.next=10,this.publicGetTrades(this.extend(o,a));case 10:return u=e.sent,c=this.safeValue(u,"trades",[]),e.abrupt("return",this.parseTrades(c,s,r,n));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},void 0!==t){e.next=6;break}throw new p(this.id+" fetchMyTrades() requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.market(t),o={pair:s.id},void 0!==r&&(o.since=r),void 0!==n&&(o.limit=n),e.next=14,this.privateGetListtrades(this.extend(o,a));case 14:return u=e.sent,c=this.safeValue(u,"trades",[]),e.abrupt("return",this.parseTrades(c,s,r,n));case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTradingFees",value:function(){var e=n(i.mark((function e(){var t,r,n=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetFeeInfo(t);case 5:return r=e.sent,e.abrupt("return",{info:r,maker:this.safeNumber(r,"maker_fee"),taker:this.safeNumber(r,"taker_fee")});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=h.length>4&&void 0!==h[4]?h[4]:void 0,o=h.length>5&&void 0!==h[5]?h[5]:{},e.next=4,this.loadMarkets();case 4:return u="privatePost",c={pair:this.marketId(t)},"market"===r?(u+="Marketorder",c.type=n.toUpperCase(),"buy"===n?c.counter_volume=parseFloat(this.amountToPrecision(t,a)):c.base_volume=parseFloat(this.amountToPrecision(t,a))):(u+="Postorder",c.volume=parseFloat(this.amountToPrecision(t,a)),c.price=parseFloat(this.priceToPrecision(t,s)),c.type="buy"===n?"BID":"ASK"),e.next=9,this[u](this.extend(c,o));case 9:return d=e.sent,e.abrupt("return",{info:d,id:d.order_id});case 11:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:{},e.next=4,this.loadMarkets();case 4:return n={order_id:t},e.next=7,this.privatePostStoporder(this.extend(n,r));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchLedgerByEntries",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:-1,n=u.length>2&&void 0!==u[2]?u[2]:1,a=u.length>3&&void 0!==u[3]?u[3]:{},s=void 0,o={min_row:r,max_row:this.sum(r,n)},e.next=8,this.fetchLedger(t,s,n,this.extend(o,a));case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchLedger",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,v,m,g=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=g.length>0&&void 0!==g[0]?g[0]:void 0,r=g.length>1&&void 0!==g[1]?g[1]:void 0,n=g.length>2&&void 0!==g[2]?g[2]:void 0,a=g.length>3&&void 0!==g[3]?g[3]:{},e.next=6,this.loadMarkets();case 6:return e.next=8,this.loadAccounts();case 8:if(s=void 0,o=this.safeString(a,"id"),u=this.safeValue(a,"min_row"),c=this.safeValue(a,"max_row"),void 0!==o){e.next=21;break}if(void 0!==t){e.next=15;break}throw new p(this.id+" fetchLedger() requires a currency code argument if no account id specified in params");case 15:if(s=this.currency(t),d=this.indexBy(this.accounts,"currency"),void 0!==(h=this.safeValue(d,t))){e.next=20;break}throw new f(this.id+" fetchLedger() could not find account id for "+t);case 20:o=h.id;case 21:if(void 0!==u||void 0!==c){e.next=26;break}c=0,u=-1e3,e.next=28;break;case 26:if(void 0!==u&&void 0!==c){e.next=28;break}throw new f(this.id+" fetchLedger() require both params 'max_row' and 'min_row' or neither to be defined");case 28:if(void 0!==n&&c-u>n&&(c<=0?u=c-n:u>0&&(c=u+n)),!(c-u>1e3)){e.next=31;break}throw new f(this.id+" fetchLedger() requires the params 'max_row' - 'min_row' <= 1000");case 31:return l={id:o,min_row:u,max_row:c},e.next=34,this.privateGetAccountsIdTransactions(this.extend(a,l));case 34:return v=e.sent,m=this.safeValue(v,"transactions",[]),e.abrupt("return",this.parseLedger(m,s,r,n));case 37:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseLedgerComment",value:function(e){var t=e.split(" "),r=void 0,i=this.safeString(t,0),n=this.safeString(t,2),a=this.safeString(t,3),s=this.safeString({Withdrawal:"fee",Trading:"fee",Payment:"transaction",Sent:"transaction",Deposit:"transaction",Received:"transaction",Released:"released",Reserved:"reserved",Sold:"trade",Bought:"trade",Failure:"failed"},i,void 0);return void 0===s&&"fee"===n&&(s="fee"),"reserved"===s&&"order"===a&&(r=this.safeString(t,4)),{type:s,referenceId:r}}},{key:"parseLedgerEntry",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"row_index"),i=this.safeString(e,"account_id"),n=this.safeValue(e,"timestamp"),a=this.safeString(e,"currency"),s=this.safeCurrencyCode(a,t),o=this.safeNumber(e,"available_delta"),u=this.safeNumber(e,"balance_delta"),c=this.safeNumber(e,"balance"),d=this.safeString(e,"description"),h=c,l=0,f=this.parseLedgerComment(d),p=f.type,v=f.referenceId,m=void 0,g=void 0;return 0!==u?(h=c-u,g="ok",l=Math.abs(u)):o<0?(g="pending",l=Math.abs(o)):o>0&&(g="canceled",l=Math.abs(o)),u>0||o>0?m="in":(u<0||o<0)&&(m="out"),{id:r,direction:m,account:i,referenceId:v,referenceAccount:void 0,type:p,currency:s,amount:l,timestamp:n,datetime:this.iso8601(n),before:h,after:c,status:g,fee:void 0,info:e}}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.urls.api[t]+"/"+this.version+"/"+this.implodeParams(e,i),o=this.omit(i,this.extractParams(e));if(Object.keys(o).length&&(s+="?"+this.urlencode(o)),"private"===t){this.checkRequiredCredentials();var u=this.stringToBase64(this.apiKey+":"+this.secret);n={Authorization:"Basic "+this.decode(u)}}return{url:s,method:r,body:a,headers:n}}},{key:"request",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:"public",n=c.length>2&&void 0!==c[2]?c[2]:"GET",a=c.length>3&&void 0!==c[3]?c[3]:{},s=c.length>4&&void 0!==c[4]?c[4]:void 0,o=c.length>5&&void 0!==c[5]?c[5]:void 0,e.next=7,this.fetch2(t,r,n,a,s,o);case 7:if(!("error"in(u=e.sent))){e.next=10;break}throw new f(this.id+" "+this.json(u));case 10:return e.abrupt("return",u);case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(h)},function(e,t,r){"use strict";var i=r(21),n=r(7),a=r(8),s=r(1),o=r(2),u=r(6),c=r(3),d=r(4),h=r(5),l=r(11),f=r(12);e.exports=function(e){d(r,e);var t=h(r);function r(){return s(this,r),t.apply(this,arguments)}return o(r,[{key:"describe",value:function(){return this.deepExtend(u(c(r.prototype),"describe",this).call(this),{id:"lykke",name:"Lykke",countries:["CH"],version:"v1",rateLimit:200,has:{CORS:!1,fetchOHLCV:!1,fetchOpenOrders:!0,fetchClosedOrders:!0,fetchOrder:!0,fetchOrders:!0,fetchTrades:!0,fetchMyTrades:!0,createOrder:!0,cancelOrder:!0,cancelAllOrders:!0,fetchBalance:!0,fetchMarkets:!0,fetchOrderBook:!0,fetchTicker:!0},timeframes:{"1m":"Minute","5m":"Min5","15m":"Min15","30m":"Min30","1h":"Hour","4h":"Hour4","6h":"Hour6","12h":"Hour12","1d":"Day","1w":"Week","1M":"Month"},requiredCredentials:{apiKey:!0,secret:!1},urls:{logo:"https://user-images.githubusercontent.com/1294454/34487620-3139a7b0-efe6-11e7-90f5-e520cef74451.jpg",api:{mobile:"https://public-api.lykke.com/api",public:"https://hft-api.lykke.com/api",private:"https://hft-api.lykke.com/api"},test:{mobile:"https://public-api.lykke.com/api",public:"https://hft-service-dev.lykkex.net/api",private:"https://hft-service-dev.lykkex.net/api"},www:"https://www.lykke.com",doc:["https://hft-api.lykke.com/swagger/ui/","https://www.lykke.com/lykke_api"],fees:"https://www.lykke.com/trading-conditions"},api:{mobile:{get:["AssetPairs/rate","AssetPairs/rate/{assetPairId}","AssetPairs/dictionary/{market}","Assets/dictionary","Candles/history/{market}/available","Candles/history/{market}/{assetPair}/{period}/{type}/{from}/{to}","Company/ownershipStructure","Company/registrationsCount","IsAlive","Market","Market/{market}","Market/capitalization/{market}","OrderBook","OrderBook/{assetPairId}","Trades/{AssetPairId}","Trades/Last/{assetPair}/{n}"],post:["AssetPairs/rate/history","AssetPairs/rate/history/{assetPairId}"]},public:{get:["AssetPairs","AssetPairs/{id}","IsAlive","OrderBooks","OrderBooks/{AssetPairId}"]},private:{get:["Orders","Orders/{id}","Wallets","History/trades"],post:["Orders/limit","Orders/market","Orders/{id}/Cancel","Orders/v2/market","Orders/v2/limit","Orders/stoplimit","Orders/bulk"],delete:["Orders","Orders/{id}"]}},fees:{trading:{tierBased:!1,percentage:!0,maker:0,taker:0},funding:{tierBased:!1,percentage:!1,withdraw:{BTC:.001},deposit:{BTC:0}}},commonCurrencies:{XPD:"Lykke XPD"}})}},{key:"parseTrade",value:function(e,t){var r=this.safeString(e,"AssetPairId"),i=this.safeSymbol(r,t),n=this.safeString2(e,"id","Id"),a=this.safeString(e,"OrderId"),s=this.parse8601(this.safeString2(e,"dateTime","DateTime")),o=this.safeString2(e,"price","Price"),u=this.safeString2(e,"volume","Amount"),c=this.safeStringLower(e,"action");void 0===c&&(c="-"===u[0]?"sell":"buy"),u=f.stringAbs(u);var d=this.parseNumber(o),h=this.parseNumber(u),l=this.parseNumber(f.stringMul(o,u)),p={cost:0,currency:t.quote};return{id:n,info:e,timestamp:s,datetime:this.iso8601(s),symbol:i,type:void 0,order:a,side:c,takerOrMaker:void 0,price:d,amount:h,cost:l,fee:p}}},{key:"fetchTrades",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,u,c=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,i=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),void 0===i&&(i=100),o={AssetPairId:s.id,skip:0,take:i},e.next=10,this.mobileGetTradesAssetPairId(this.extend(o,a));case 10:return u=e.sent,e.abrupt("return",this.parseTrades(u,s,r,i));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,u,c=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:void 0,r=c.length>1&&void 0!==c[1]?c[1]:void 0,i=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},e.next=6,this.loadMarkets();case 6:return s={},o=void 0,void 0!==i&&(s.take=i),void 0!==t&&(o=this.market(t),s.assetPairId=o.id),e.next=12,this.privateGetHistoryTrades(this.extend(s,a));case 12:return u=e.sent,e.abrupt("return",this.parseTrades(u,o,r,i));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,u,c,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetWallets(t);case 5:for(r=e.sent,i={info:r},a=0;a<r.length;a++)s=r[a],o=this.safeString(s,"AssetId"),u=this.safeCurrencyCode(o),(c=this.account()).total=this.safeString(s,"Balance"),c.used=this.safeString(s,"Reserved"),i[u]=c;return e.abrupt("return",this.parseBalance(i,!1));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=a(n.mark((function e(t){var r,i,a=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:{},i={id:t},e.next=5,this.privateDeleteOrdersId(this.extend(i,r));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cancelAllOrders",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:{},e.next=4,this.loadMarkets();case 4:return i={},a=void 0,void 0!==t&&(a=this.market(t),i.assetPairId=a.id),e.next=9,this.privateDeleteOrders(this.extend(i,r));case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=a(n.mark((function e(t,r,i,a){var s,o,u,c,d,h,l,f=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=f.length>4&&void 0!==f[4]?f[4]:void 0,o=f.length>5&&void 0!==f[5]?f[5]:{},e.next=4,this.loadMarkets();case 4:return u=this.market(t),c={AssetPairId:u.id,OrderAction:this.capitalize(i),Volume:a,Asset:u.baseId},"limit"===r&&(c.Price=s),d="privatePostOrdersV2"+this.capitalize(r),e.next=10,this[d](this.extend(c,o));case 10:return h=e.sent,l=this.safeString(h,"Id"),s=this.safeNumber(h,"Price"),e.abrupt("return",{id:l,info:h,clientOrderId:void 0,timestamp:void 0,datetime:void 0,lastTradeTimestamp:void 0,symbol:t,type:r,side:i,price:s,amount:a,cost:void 0,average:void 0,filled:void 0,remaining:void 0,status:void 0,fee:void 0,trades:void 0});case 14:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"fetchMarkets",value:function(){var e=a(n.mark((function e(){var t,r,a,s,o,u,c,d,h,l,f,p,v,m,g=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g.length>0&&void 0!==g[0]?g[0]:{},e.next=3,this.publicGetAssetPairs();case 3:for(t=e.sent,r=[],a=0;a<t.length;a++)s=t[a],o=this.safeString(s,"Id"),u=this.safeString(s,"Name"),c=u.split("/"),d=i(c,2),h=d[0],l=d[1],f=this.safeCurrencyCode(h),p=this.safeCurrencyCode(l),v=f+"/"+p,m={price:this.safeInteger(s,"Accuracy"),amount:this.safeInteger(s,"InvertedAccuracy")},r.push({id:o,symbol:v,base:f,quote:p,active:!0,info:s,precision:m,limits:{amount:{min:Math.pow(10,-m.amount),max:Math.pow(10,m.amount)},price:{min:Math.pow(10,-m.price),max:Math.pow(10,m.price)},cost:{min:void 0,max:void 0}},baseId:void 0,quoteId:void 0});return e.abrupt("return",r);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.milliseconds(),i=void 0;t&&(i=t.symbol);var n=this.safeNumber(e,"lastPrice");return{symbol:i,timestamp:r,datetime:this.iso8601(r),high:void 0,low:void 0,bid:this.safeNumber(e,"bid"),bidVolume:void 0,ask:this.safeNumber(e,"ask"),askVolume:void 0,vwap:void 0,open:void 0,close:n,last:n,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:void 0,quoteVolume:this.safeNumber(e,"volume24H"),info:e}}},{key:"fetchTicker",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return i=this.market(t),a={market:i.id},e.next=7,this.mobileGetMarketMarket(this.extend(a,r));case 7:return s=e.sent,e.abrupt("return",this.parseTicker(s,i));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({Open:"open",Pending:"open",InOrderBook:"open",Processing:"open",Matched:"closed",Cancelled:"canceled",Rejected:"rejected",Replaced:"canceled",Placed:"open"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.parseOrderStatus(this.safeString(e,"Status")),i=this.safeString(e,"AssetPairId"),n=this.safeSymbol(i,t),a=this.parse8601(this.safeString(e,"LastMatchTime")),s=void 0;"Registered"in e&&e.Registered?s=this.parse8601(e.Registered):"CreatedAt"in e&&e.CreatedAt&&(s=this.parse8601(e.CreatedAt));var o=this.safeNumber(e,"Price"),u=void 0,c=this.safeNumber(e,"Volume");c<0?(u="sell",c=Math.abs(c)):u="buy";var d=Math.abs(this.safeNumber(e,"RemainingVolume")),h=this.safeString(e,"Id");return this.safeOrder({info:e,id:h,clientOrderId:void 0,timestamp:s,datetime:this.iso8601(s),lastTradeTimestamp:a,symbol:n,type:void 0,timeInForce:void 0,postOnly:void 0,side:u,price:o,stopPrice:void 0,cost:void 0,average:void 0,amount:c,filled:void 0,remaining:d,status:r,fee:void 0,trades:void 0})}},{key:"fetchOrder",value:function(){var e=a(n.mark((function e(t){var r,i,a,s=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.loadMarkets();case 4:return i={id:t},e.next=7,this.privateGetOrdersId(this.extend(i,r));case 7:return a=e.sent,e.abrupt("return",this.parseOrder(a));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrders",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,i=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.loadMarkets();case 6:return e.next=8,this.privateGetOrders(a);case 8:return s=e.sent,o=void 0,void 0!==t&&(o=this.market(t)),e.abrupt("return",this.parseOrders(s,o,r,i));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,i=o.length>2&&void 0!==o[2]?o[2]:void 0,a=o.length>3&&void 0!==o[3]?o[3]:{},s={status:"InOrderBook"},e.next=7,this.fetchOrders(t,r,i,this.extend(s,a));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,i=o.length>2&&void 0!==o[2]?o[2]:void 0,a=o.length>3&&void 0!==o[3]?o[3]:{},s={status:"Matched"},e.next=7,this.fetchOrders(t,r,i,this.extend(s,a));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,u,c,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d.length>1&&void 0!==d[1]?d[1]:void 0,r=d.length>2&&void 0!==d[2]?d[2]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetOrderBooksAssetPairId(this.extend({AssetPairId:this.marketId(t)},r));case 6:for(i=e.sent,a={timestamp:void 0,bids:[],asks:[]},s=void 0,o=0;o<i.length;o++)(u=i[o]).IsBuy?a.bids=this.arrayConcat(a.bids,u.Prices):a.asks=this.arrayConcat(a.asks,u.Prices),c=this.parse8601(u.Timestamp),s=void 0===s?c:Math.max(s,c);return e.abrupt("return",this.parseOrderBook(a,s,"bids","asks","Price","Volume"));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseBidAsk",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=this.safeNumber(e,t),n=this.safeNumber(e,r);return n<0&&(n=-n),[i,n]}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.urls.api[t]+"/"+this.implodeParams(e,i),o=this.omit(i,this.extractParams(e));return"mobile"===t||"public"===t?Object.keys(o).length&&(s+="?"+this.urlencode(o)):"private"===t&&("GET"!==r&&"DELETE"!==r||Object.keys(o).length&&(s+="?"+this.urlencode(o)),this.checkRequiredCredentials(),n={"api-key":this.apiKey,Accept:"application/json","Content-Type":"application/json"},"POST"===r&&Object.keys(i).length&&(a=this.json(i))),{url:s,method:r,body:a,headers:n}}}]),r}(l)},function(e,t,r){"use strict";var i=r(7),n=r(8),a=r(1),s=r(2),o=r(6),u=r(3),c=r(4),d=r(5),h=r(11),l=r(10),f=l.ExchangeError,p=l.ArgumentsRequired,v=l.InvalidOrder,m=r(12);e.exports=function(e){c(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(u(r.prototype),"describe",this).call(this),{id:"mercado",name:"Mercado Bitcoin",countries:["BR"],rateLimit:1e3,version:"v3",has:{cancelOrder:!0,CORS:!0,createMarketOrder:!0,createOrder:!0,fetchBalance:!0,fetchMarkets:!0,fetchMyTrades:"emulated",fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchTicker:!0,fetchTickers:!1,fetchTrades:!0,withdraw:!0},timeframes:{"1m":"1m","5m":"5m","15m":"15m","30m":"30m","1h":"1h","6h":"6h","12h":"12h","1d":"1d","3d":"3d","1w":"1w","2w":"2w"},urls:{logo:"https://user-images.githubusercontent.com/1294454/27837060-e7c58714-60ea-11e7-9192-f05e86adb83f.jpg",api:{public:"https://www.mercadobitcoin.net/api",private:"https://www.mercadobitcoin.net/tapi",v4Public:"https://www.mercadobitcoin.com.br/v4"},www:"https://www.mercadobitcoin.com.br",doc:["https://www.mercadobitcoin.com.br/api-doc","https://www.mercadobitcoin.com.br/trade-api"]},api:{public:{get:["coins","{coin}/orderbook/","{coin}/ticker/","{coin}/trades/","{coin}/trades/{from}/","{coin}/trades/{from}/{to}","{coin}/day-summary/{year}/{month}/{day}/"]},private:{post:["cancel_order","get_account_info","get_order","get_withdrawal","list_system_messages","list_orders","list_orderbook","place_buy_order","place_sell_order","place_market_buy_order","place_market_sell_order","withdraw_coin"]},v4Public:{get:["{coin}/candle/"]}},fees:{trading:{maker:.003,taker:.007}},options:{limits:{BTC:.001,BCH:.001,ETH:.01,LTC:.01,XRP:.1}}})}},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p,v,m=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=m.length>0&&void 0!==m[0]?m[0]:{},e.next=3,this.publicGetCoins(t);case 3:for(r=e.sent,n=[],a=this.safeValue(this.options,"limits",{}),s=0;s<r.length;s++)o=r[s],u=o,c="BRL",d=this.safeCurrencyCode(u),h=this.safeCurrencyCode(c),l=d+"/"+h,f=h+d,p={amount:8,price:5},v="1e-5",n.push({id:f,symbol:l,base:d,quote:h,baseId:u,quoteId:c,active:void 0,info:o,precision:p,limits:{amount:{min:this.safeNumber(a,u),max:void 0},price:{min:this.parseNumber(v),max:void 0},cost:{min:void 0,max:void 0}}});return e.abrupt("return",n);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.length>1&&void 0!==o[1]?o[1]:void 0,r=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return n=this.market(t),a={coin:n.base},e.next=8,this.publicGetCoinOrderbook(this.extend(a,r));case 8:return s=e.sent,e.abrupt("return",this.parseOrderBook(s));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={coin:n.base},e.next=7,this.publicGetCoinTicker(this.extend(a,r));case 7:return s=e.sent,o=this.safeValue(s,"ticker",{}),u=this.safeTimestamp(o,"date"),c=this.safeNumber(o,"last"),e.abrupt("return",{symbol:t,timestamp:u,datetime:this.iso8601(u),high:this.safeNumber(o,"high"),low:this.safeNumber(o,"low"),bid:this.safeNumber(o,"buy"),bidVolume:void 0,ask:this.safeNumber(o,"sell"),askVolume:void 0,vwap:void 0,open:void 0,close:c,last:c,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeNumber(o,"vol"),quoteVolume:void 0,info:o});case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeTimestamp2(e,"date","executed_timestamp"),i=void 0;void 0!==t&&(i=t.symbol);var n=this.safeString2(e,"tid","operation_id"),a=void 0,s=this.safeString(e,"type"),o=this.safeString(e,"price"),u=this.safeString2(e,"amount","quantity"),c=this.parseNumber(o),d=this.parseNumber(u),h=this.parseNumber(m.stringMul(o,u)),l=this.safeNumber(e,"fee_rate"),f=void 0;return void 0!==l&&(f={cost:l,currency:void 0}),{id:n,info:e,timestamp:r,datetime:this.iso8601(r),symbol:i,order:void 0,type:a,side:s,takerOrMaker:void 0,price:c,amount:d,cost:h,fee:f}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o="publicGetCoinTrades",u={coin:s.base},void 0!==r&&(o+="From",u.from=parseInt(r/1e3)),void 0!==this.safeInteger(a,"to")&&(o+="To"),e.next=13,this[o](this.extend(u,a));case 13:return c=e.sent,e.abrupt("return",this.parseTrades(c,s,r,n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privatePostGetAccountInfo(t);case 5:for(r=e.sent,n=this.safeValue(r,"response_data",{}),a=this.safeValue(n,"balance",{}),s={info:r},o=Object.keys(a),u=0;u<o.length;u++)c=o[u],d=this.safeCurrencyCode(c),c in a&&(h=this.safeValue(a,c,{}),(l=this.account()).free=this.safeString(h,"available"),l.total=this.safeString(h,"total"),s[d]=l);return e.abrupt("return",this.parseBalance(s,!1));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=h.length>4&&void 0!==h[4]?h[4]:void 0,o=h.length>5&&void 0!==h[5]?h[5]:{},e.next=4,this.loadMarkets();case 4:if(u={coin_pair:this.marketId(t)},c=this.capitalize(n)+"Order","limit"!==r){e.next=12;break}c="privatePostPlace"+c,u.limit_price=this.priceToPrecision(t,s),u.quantity=this.amountToPrecision(t,a),e.next=20;break;case 12:if(c="privatePostPlaceMarket"+c,"buy"!==n){e.next=19;break}if(void 0!==s){e.next=16;break}throw new v(this.id+" createOrder() requires the price argument with market buy orders to calculate total order cost (amount to spend), where cost = amount * price. Supply a price argument to createOrder() call if you want the cost to be calculated for you from price and amount");case 16:u.cost=this.priceToPrecision(t,a*s),e.next=20;break;case 19:u.quantity=this.amountToPrecision(t,a);case 20:return e.next=22,this[c](this.extend(u,o));case 22:return d=e.sent,e.abrupt("return",{info:d,id:d.response_data.order.order_id.toString()});case 24:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:{},void 0!==r){e.next=4;break}throw new p(this.id+" cancelOrder () requires a symbol argument");case 4:return e.next=6,this.loadMarkets();case 6:return a=this.market(r),s={coin_pair:a.id,order_id:t},e.next=10,this.privatePostCancelOrder(this.extend(s,n));case 10:return o=e.sent,u=this.safeValue(o,"response_data",{}),c=this.safeValue(u,"order",{}),e.abrupt("return",this.parseOrder(c,a));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({2:"open",3:"canceled",4:"closed"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"order_id"),i=this.safeString(e,"order_type"),n=void 0;"order_type"in e&&(n="1"===i?"buy":"sell");var a=this.parseOrderStatus(this.safeString(e,"status")),s=this.safeString(e,"coin_pair");t=this.safeMarket(s,t);var o=this.safeTimestamp(e,"created_timestamp"),u={cost:this.safeNumber(e,"fee"),currency:t.quote},c=this.safeNumber(e,"limit_price"),d=this.safeNumber(e,"executed_price_avg"),h=this.safeNumber(e,"quantity"),l=this.safeNumber(e,"executed_quantity"),f=this.safeTimestamp(e,"updated_timestamp"),p=this.safeValue(e,"operations",[]),v=this.parseTrades(p,t,void 0,void 0,{side:n,order:r});return this.safeOrder({info:e,id:r,clientOrderId:void 0,timestamp:o,datetime:this.iso8601(o),lastTradeTimestamp:f,symbol:t.symbol,type:"limit",timeInForce:void 0,postOnly:void 0,side:n,price:c,stopPrice:void 0,cost:void 0,average:d,amount:h,filled:l,remaining:void 0,status:a,fee:u,trades:v})}},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:{},void 0!==r){e.next=4;break}throw new p(this.id+" fetchOrder () requires a symbol argument");case 4:return e.next=6,this.loadMarkets();case 6:return a=this.market(r),s={coin_pair:a.id,order_id:parseInt(t)},e.next=10,this.privatePostGetOrder(this.extend(s,n));case 10:return o=e.sent,u=this.safeValue(o,"response_data",{}),c=this.safeValue(u,"order"),e.abrupt("return",this.parseOrder(c,a));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"withdraw",value:function(){var e=n(i.mark((function e(t,r,n){var a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=d.length>3&&void 0!==d[3]?d[3]:void 0,s=d.length>4&&void 0!==d[4]?d[4]:{},this.checkAddress(n),e.next=5,this.loadMarkets();case 5:if(o=this.currency(t),u={coin:o.id,quantity:r.toFixed(10),address:n},"BRL"!==t){e.next=13;break}if("account_ref"in s){e.next=11;break}throw new p(this.id+" withdraw() requires account_ref parameter to withdraw "+t);case 11:e.next=24;break;case 13:if("LTC"===t){e.next=24;break}if("tx_fee"in s){e.next=17;break}throw new p(this.id+" withdraw() requires tx_fee parameter to withdraw "+t);case 17:if("XRP"!==t){e.next=24;break}if(void 0!==a){e.next=23;break}if("destination_tag"in s){e.next=21;break}throw new p(this.id+" withdraw() requires a tag argument or destination_tag parameter to withdraw "+t);case 21:e.next=24;break;case 23:u.destination_tag=a;case 24:return e.next=26,this.privatePostWithdrawCoin(this.extend(u,s));case 26:return c=e.sent,e.abrupt("return",{info:c,id:c.response_data.withdrawal.id});case 28:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){return[this.safeTimestamp(e,"timestamp"),this.safeNumber(e,"open"),this.safeNumber(e,"high"),this.safeNumber(e,"low"),this.safeNumber(e,"close"),this.safeNumber(e,"volume")]}},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:"5m",n=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:void 0,s=h.length>4&&void 0!==h[4]?h[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),u={precision:this.timeframes[r],coin:o.id.toLowerCase()},void 0!==a&&void 0!==n?(u.from=parseInt(n/1e3),u.to=this.sum(u.from,a*this.parseTimeframe(r))):void 0!==n?(u.from=parseInt(n/1e3),u.to=this.sum(this.seconds(),1)):void 0!==a&&(u.to=this.seconds(),u.from=u.to-a*this.parseTimeframe(r)),e.next=11,this.v4PublicGetCoinCandle(this.extend(u,s));case 11:return c=e.sent,d=this.safeValue(c,"candles",[]),e.abrupt("return",this.parseOHLCVs(d,o,r,n,a));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:{},void 0!==t){e.next=6;break}throw new p(this.id+" fetchOrders () requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.market(t),o={coin_pair:s.id},e.next=12,this.privatePostListOrders(this.extend(o,a));case 12:return u=e.sent,c=this.safeValue(u,"response_data",{}),d=this.safeValue(c,"orders",[]),e.abrupt("return",this.parseOrders(d,s,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:{},void 0!==t){e.next=6;break}throw new p(this.id+" fetchOpenOrders () requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.market(t),o={coin_pair:s.id,status_list:"[2]"},e.next=12,this.privatePostListOrders(this.extend(o,a));case 12:return u=e.sent,c=this.safeValue(u,"response_data",{}),d=this.safeValue(c,"orders",[]),e.abrupt("return",this.parseOrders(d,s,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.length>0&&void 0!==f[0]?f[0]:void 0,r=f.length>1&&void 0!==f[1]?f[1]:void 0,n=f.length>2&&void 0!==f[2]?f[2]:void 0,a=f.length>3&&void 0!==f[3]?f[3]:{},void 0!==t){e.next=6;break}throw new p(this.id+" fetchMyTrades () requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.market(t),o={coin_pair:s.id,has_fills:!0},e.next=12,this.privatePostListOrders(this.extend(o,a));case 12:return u=e.sent,c=this.safeValue(u,"response_data",{}),d=this.safeValue(c,"orders",[]),h=this.parseOrders(d,s,r,n),l=this.ordersToTrades(h),e.abrupt("return",this.filterBySymbolSinceLimit(l,t,r,n));case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ordersToTrades",value:function(e){for(var t=[],r=0;r<e.length;r++)for(var i=this.safeValue(e[r],"trades",[]),n=0;n<i.length;n++)t.push(i[n]);return t}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.urls.api[t]+"/",o=this.omit(i,this.extractParams(e));if("public"===t||"v4Public"===t)s+=this.implodeParams(e,i),Object.keys(o).length&&(s+="?"+this.urlencode(o));else{this.checkRequiredCredentials(),s+=this.version+"/";var u=this.nonce();a=this.urlencode(this.extend({tapi_method:e,tapi_nonce:u},i));var c="/tapi/"+this.version+"/?"+a;n={"Content-Type":"application/x-www-form-urlencoded","TAPI-ID":this.apiKey,"TAPI-MAC":this.hmac(this.encode(c),this.encode(this.secret),"sha512")}}return{url:s,method:r,body:a,headers:n}}},{key:"request",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:"public",n=c.length>2&&void 0!==c[2]?c[2]:"GET",a=c.length>3&&void 0!==c[3]?c[3]:{},s=c.length>4&&void 0!==c[4]?c[4]:void 0,o=c.length>5&&void 0!==c[5]?c[5]:void 0,e.next=7,this.fetch2(t,r,n,a,s,o);case 7:if(!("error_message"in(u=e.sent))){e.next=10;break}throw new f(this.id+" "+this.json(u));case 10:return e.abrupt("return",u);case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(h)},function(e,t,r){"use strict";var i=r(7),n=r(8),a=r(1),s=r(2),o=r(6),u=r(3),c=r(4),d=r(5),h=r(11),l=r(10).ExchangeError,f=r(12);e.exports=function(e){c(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(u(r.prototype),"describe",this).call(this),{id:"mixcoins",name:"MixCoins",countries:["GB","HK"],rateLimit:1500,version:"v1",userAgent:this.userAgents.chrome,has:{cancelOrder:!0,CORS:!1,createOrder:!0,fetchBalance:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTrades:!0},urls:{logo:"https://user-images.githubusercontent.com/51840849/87460810-1dd06c00-c616-11ea-9276-956f400d6ffa.jpg",api:"https://mixcoins.com/api",www:"https://mixcoins.com",doc:"https://mixcoins.com/help/api/"},api:{public:{get:["ticker/","trades/","depth/"]},private:{post:["cancel","info","orders","order","transactions","trade"]}},markets:{"BTC/USDT":{id:"btc_usdt",symbol:"BTC/USDT",base:"BTC",quote:"USDT",baseId:"btc",quoteId:"usdt",maker:.0015,taker:.0025},"ETH/BTC":{id:"eth_btc",symbol:"ETH/BTC",base:"ETH",quote:"BTC",baseId:"eth",quoteId:"btc",maker:.001,taker:.0015},"BCH/BTC":{id:"bch_btc",symbol:"BCH/BTC",base:"BCH",quote:"BTC",baseId:"bch",quoteId:"btc",maker:.001,taker:.0015},"LSK/BTC":{id:"lsk_btc",symbol:"LSK/BTC",base:"LSK",quote:"BTC",baseId:"lsk",quoteId:"btc",maker:.0015,taker:.0025},"BCH/USDT":{id:"bch_usdt",symbol:"BCH/USDT",base:"BCH",quote:"USDT",baseId:"bch",quoteId:"usdt",maker:.001,taker:.0015},"ETH/USDT":{id:"eth_usdt",symbol:"ETH/USDT",base:"ETH",quote:"USDT",baseId:"eth",quoteId:"usdt",maker:.001,taker:.0015}}})}},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privatePostInfo(t);case 5:for(r=e.sent,n=this.safeValue(r.result,"wallet"),a={info:r},s=Object.keys(n),o=0;o<s.length;o++)u=s[o],c=this.safeCurrencyCode(u),d=this.safeValue(n,u,{}),(h=this.account()).free=this.safeString(d,"avail"),h.used=this.safeString(d,"lock"),a[c]=h;return e.abrupt("return",this.parseBalance(a,!1));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.loadMarkets();case 4:return n={market:this.marketId(t)},e.next=7,this.publicGetDepth(this.extend(n,r));case 7:return a=e.sent,e.abrupt("return",this.parseOrderBook(a.result));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:{},e.next=3,this.loadMarkets();case 3:return n={market:this.marketId(t)},e.next=6,this.publicGetTicker(this.extend(n,r));case 6:return a=e.sent,s=this.safeValue(a,"result"),o=this.milliseconds(),u=this.safeNumber(s,"last"),e.abrupt("return",{symbol:t,timestamp:o,datetime:this.iso8601(o),high:this.safeNumber(s,"high"),low:this.safeNumber(s,"low"),bid:this.safeNumber(s,"buy"),bidVolume:void 0,ask:this.safeNumber(s,"sell"),askVolume:void 0,vwap:void 0,open:void 0,close:u,last:u,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeNumber(s,"vol"),quoteVolume:void 0,info:s});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeTimestamp(e,"date"),i=void 0;void 0!==t&&(i=t.symbol);var n=this.safeString(e,"id"),a=this.safeString(e,"price"),s=this.safeString(e,"amount"),o=this.parseNumber(a),u=this.parseNumber(s),c=this.parseNumber(f.stringMul(a,s));return{id:n,info:e,timestamp:r,datetime:this.iso8601(r),symbol:i,type:void 0,side:void 0,order:void 0,takerOrMaker:void 0,price:o,amount:u,cost:c,fee:void 0}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={market:s.id},e.next=9,this.publicGetTrades(this.extend(o,a));case 9:return u=e.sent,e.abrupt("return",this.parseTrades(u.result,s,r,n));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=d.length>4&&void 0!==d[4]?d[4]:void 0,o=d.length>5&&void 0!==d[5]?d[5]:{},e.next=4,this.loadMarkets();case 4:return u={market:this.marketId(t),op:n,amount:a},"market"===r?(u.order_type=1,u.price=s):u.order_type=0,e.next=8,this.privatePostTrade(this.extend(u,o));case 8:return c=e.sent,e.abrupt("return",{info:c,id:c.result.id.toString()});case 10:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:{},e.next=4,this.loadMarkets();case 4:return n={id:t},e.next=7,this.privatePostCancel(this.extend(n,r));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.urls.api+"/"+this.version+"/"+e;if("public"===t)Object.keys(i).length&&(s+="?"+this.urlencode(i));else{this.checkRequiredCredentials();var o=this.nonce();a=this.urlencode(this.extend({nonce:o},i)),n={"Content-Type":"application/x-www-form-urlencoded",Key:this.apiKey,Sign:this.hmac(this.encode(a),this.secret,"sha512")}}return{url:s,method:r,body:a,headers:n}}},{key:"request",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:"public",n=c.length>2&&void 0!==c[2]?c[2]:"GET",a=c.length>3&&void 0!==c[3]?c[3]:{},s=c.length>4&&void 0!==c[4]?c[4]:void 0,o=c.length>5&&void 0!==c[5]?c[5]:void 0,e.next=7,this.fetch2(t,r,n,a,s,o);case 7:if(!("status"in(u=e.sent))){e.next=11;break}if(200!==u.status){e.next=11;break}return e.abrupt("return",u);case 11:throw new l(this.id+" "+this.json(u));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(h)},function(e,t,r){"use strict";var i=r(7),n=r(8),a=r(1),s=r(2),o=r(6),u=r(3),c=r(4),d=r(5),h=r(11),l=r(10),f=l.ExchangeError,p=l.AuthenticationError,v=l.InsufficientFunds,m=l.BadSymbol,g=l.OrderNotFound,y=r(18).TICK_SIZE,b=r(12);e.exports=function(e){c(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(u(r.prototype),"describe",this).call(this),{id:"ndax",name:"NDAX",countries:["US"],rateLimit:1e3,pro:!0,has:{cancelAllOrders:!0,cancelOrder:!0,createDepositAddress:!0,createOrder:!0,editOrder:!0,fetchAccounts:!0,fetchBalance:!0,fetchCurrencies:!0,fetchDepositAddress:!0,fetchDeposits:!0,fetchLedger:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrderTrades:!0,fetchTicker:!0,fetchTrades:!0},timeframes:{"1m":"60","5m":"300","15m":"900","30m":"1800","1h":"3600","2h":"7200","4h":"14400","6h":"21600","12h":"43200","1d":"86400","1w":"604800","1M":"2419200","4M":"9676800"},urls:{logo:"https://user-images.githubusercontent.com/1294454/108623144-67a3ef00-744e-11eb-8140-75c6b851e945.jpg",test:{public:"https://ndaxmarginstaging.cdnhop.net:8443/AP",private:"https://ndaxmarginstaging.cdnhop.net:8443/AP"},api:{public:"https://api.ndax.io:8443/AP",private:"https://api.ndax.io:8443/AP"},www:"https://ndax.io",doc:["https://apidoc.ndax.io/"],fees:"https://ndax.io/fees",referral:"https://one.ndax.io/bfQiSL"},api:{public:{get:["Activate2FA","Authenticate2FA","AuthenticateUser","GetL2Snapshot","GetLevel1","GetValidate2FARequiredEndpoints","LogOut","GetTickerHistory","GetProduct","GetProducts","GetInstrument","GetInstruments","Ping","trades","GetLastTrades","SubscribeLevel1","SubscribeLevel2","SubscribeTicker","SubscribeTrades","SubscribeBlockTrades","UnsubscribeBlockTrades","UnsubscribeLevel1","UnsubscribeLevel2","UnsubscribeTicker","UnsubscribeTrades","Authenticate"]},private:{get:["GetUserAccountInfos","GetUserAccounts","GetUserAffiliateCount","GetUserAffiliateTag","GetUserConfig","GetAllUnredactedUserConfigsForUser","GetUnredactedUserConfigByKey","GetUserDevices","GetUserReportTickets","GetUserReportWriterResultRecords","GetAccountInfo","GetAccountPositions","GetAllAccountConfigs","GetTreasuryProductsForAccount","GetAccountTrades","GetAccountTransactions","GetOpenTradeReports","GetAllOpenTradeReports","GetTradesHistory","GetOpenOrders","GetOpenQuotes","GetOrderFee","GetOrderHistory","GetOrdersHistory","GetOrderStatus","GetOmsFeeTiers","GetAccountDepositTransactions","GetAccountWithdrawTransactions","GetAllDepositRequestInfoTemplates","GetDepositInfo","GetDepositRequestInfoTemplate","GetDeposits","GetDepositTicket","GetDepositTickets","GetOMSWithdrawFees","GetWithdrawFee","GetWithdraws","GetWithdrawTemplate","GetWithdrawTemplateTypes","GetWithdrawTicket","GetWithdrawTickets"],post:["AddUserAffiliateTag","CancelUserReport","RegisterNewDevice","SubscribeAccountEvents","UpdateUserAffiliateTag","GenerateTradeActivityReport","GenerateTransactionActivityReport","GenerateTreasuryActivityReport","ScheduleTradeActivityReport","ScheduleTransactionActivityReport","ScheduleTreasuryActivityReport","CancelAllOrders","CancelOrder","CancelQuote","CancelReplaceOrder","CreateQuote","ModifyOrder","SendOrder","SubmitBlockTrade","UpdateQuote","CancelWithdraw","CreateDepositTicket","CreateWithdrawTicket","SubmitDepositTicketComment","SubmitWithdrawTicketComment","GetOrderHistoryByOrderId"]}},fees:{trading:{tierBased:!1,percentage:!0,maker:.002,taker:.0025}},requiredCredentials:{apiKey:!0,secret:!0,uid:!0},precisionMode:y,exceptions:{exact:{Not_Enough_Funds:v,"Server Error":f,"Resource Not Found":g},broad:{"Invalid InstrumentId":m}},options:{omsId:1,orderTypes:{Market:1,Limit:2,StopMarket:3,StopLimit:4,TrailingStopMarket:5,TrailingStopLimit:6,BlockTrade:7}}})}},{key:"fetchCurrencies",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p,v,m=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=m.length>0&&void 0!==m[0]?m[0]:{},r=this.safeInteger(this.options,"omsId",1),n={omsId:r},e.next=5,this.publicGetGetProducts(this.extend(n,t));case 5:for(a=e.sent,s={},o=0;o<a.length;o++)u=a[o],c=this.safeString(u,"ProductId"),d=this.safeString(u,"ProductFullName"),h=this.safeString(u,"ProductType"),l=this.safeCurrencyCode(this.safeString(u,"Product")),f=this.safeNumber(u,"TickSize"),p=this.safeValue(u,"IsDisabled"),v=!p,s[l]={id:c,name:d,code:l,type:h,precision:f,info:u,active:v,fee:void 0,limits:this.limits};return e.abrupt("return",s);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p,v,m,g,y,b=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=b.length>0&&void 0!==b[0]?b[0]:{},r=this.safeInteger(this.options,"omsId",1),n={omsId:r},e.next=5,this.publicGetGetInstruments(this.extend(n,t));case 5:for(a=e.sent,s=[],o=0;o<a.length;o++)u=a[o],c=this.safeString(u,"InstrumentId"),d=this.safeString(u,"Product1"),h=this.safeString(u,"Product2"),l=this.safeCurrencyCode(this.safeString(u,"Product1Symbol")),f=this.safeCurrencyCode(this.safeString(u,"Product2Symbol")),p=l+"/"+f,v={amount:this.safeNumber(u,"QuantityIncrement"),price:this.safeNumber(u,"PriceIncrement")},m=this.safeString(u,"SessionStatus"),g=this.safeValue(u,"IsDisable"),y=!(!("Running"===m)||g),s.push({id:c,symbol:p,base:l,quote:f,baseId:d,quoteId:h,info:u,active:y,precision:v,limits:{amount:{min:this.safeNumber(u,"MinimumQuantity"),max:void 0},price:{min:this.safeNumber(u,"MinimumPrice"),max:void 0},cost:{min:void 0,max:void 0}}});return e.abrupt("return",s);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOrderBook",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"bids",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"asks",n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:8,s=void 0,o={bids:[],asks:[],timestamp:void 0,datetime:void 0,nonce:void 0},u=0;u<e.length;u++){var c=e[u];if(void 0===t)t=this.safeInteger(c,2);else{var d=this.safeInteger(c,2);t=Math.max(t,d)}if(void 0===s)s=this.safeInteger(c,0);else{var h=this.safeInteger(c,0);s=Math.max(s,h)}var l=this.parseBidAsk(c,n,a),f=this.safeValue(c,9),p=f?i:r;o[p].push(l)}return o.bids=this.sortBy(o.bids,0,!0),o.asks=this.sortBy(o.asks,0),o.timestamp=t,o.datetime=this.iso8601(t),o.nonce=s,o}},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:{},a=this.safeInteger(this.options,"omsId",1),e.next=5,this.loadMarkets();case 5:return s=this.market(t),r=void 0===r?100:r,o={omsId:a,InstrumentId:s.id,Depth:r},e.next=10,this.publicGetGetL2Snapshot(this.extend(o,n));case 10:return u=e.sent,e.abrupt("return",this.parseOrderBook(u));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeInteger(e,"TimeStamp"),i=this.safeString(e,"InstrumentId"),n=this.safeSymbol(i,t),a=this.safeNumber(e,"LastTradedPx"),s=this.safeNumber(e,"Rolling24HrPxChangePercent"),o=this.safeNumber(e,"Rolling24HrPxChange"),u=this.safeNumber(e,"SessionOpen"),c=void 0;void 0!==a&&void 0!==o&&(c=this.sum(a,u)/2);var d=this.safeNumber(e,"Rolling24HrVolume"),h=this.safeNumber(e,"Rolling24HrNotional"),l=this.vwap(d,h);return{symbol:n,timestamp:r,datetime:this.iso8601(r),high:this.safeNumber(e,"SessionHigh"),low:this.safeNumber(e,"SessionLow"),bid:this.safeNumber(e,"BestBid"),bidVolume:void 0,ask:this.safeNumber(e,"BestOffer"),askVolume:void 0,vwap:l,open:u,close:a,last:a,previousClose:void 0,change:o,percentage:s,average:c,baseVolume:d,quoteVolume:h,info:e}}},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:{},n=this.safeInteger(this.options,"omsId",1),e.next=4,this.loadMarkets();case 4:return a=this.market(t),s={omsId:n,InstrumentId:a.id},e.next=8,this.publicGetGetLevel1(this.extend(s,r));case 8:return o=e.sent,e.abrupt("return",this.parseTicker(o,a));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){return[this.safeInteger(e,0),this.safeNumber(e,3),this.safeNumber(e,1),this.safeNumber(e,2),this.safeNumber(e,4),this.safeNumber(e,5)]}},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=f.length>1&&void 0!==f[1]?f[1]:"1m",n=f.length>2&&void 0!==f[2]?f[2]:void 0,a=f.length>3&&void 0!==f[3]?f[3]:void 0,s=f.length>4&&void 0!==f[4]?f[4]:{},o=this.safeInteger(this.options,"omsId",1),e.next=7,this.loadMarkets();case 7:return u=this.market(t),c={omsId:o,InstrumentId:u.id,Interval:this.timeframes[r]},d=this.parseTimeframe(r),h=this.milliseconds(),void 0===n?void 0!==a&&(c.FromDate=this.ymd(h-d*a*1e3),c.ToDate=this.ymd(h)):(c.FromDate=this.ymd(n),c.ToDate=void 0===a?this.ymd(h):this.ymd(this.sum(n,d*a*1e3))),e.next=14,this.publicGetGetTickerHistory(this.extend(c,s));case 14:return l=e.sent,e.abrupt("return",this.parseOHLCVs(l,u,r,n,a));case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0,i=void 0,n=void 0,a=void 0,s=void 0,o=void 0,u=void 0,c=void 0,d=void 0,h=void 0,l=void 0;if(Array.isArray(e)){r=this.safeString(e,3),i=this.safeString(e,2),a=this.safeInteger(e,6),s=this.safeString(e,0),o=this.safeInteger(e,1);var f=this.safeValue(e,8);u=f?"sell":"buy",c=this.safeString(e,4)}else{a=this.safeInteger2(e,"TradeTimeMS","ReceiveTime"),s=this.safeString(e,"TradeId"),c=this.safeString2(e,"OrderId","OrigOrderId"),o=this.safeString2(e,"InstrumentId","Instrument"),r=this.safeString(e,"Price"),i=this.safeString(e,"Quantity"),n=this.safeNumber2(e,"Value","GrossValueExecuted"),d=this.safeStringLower(e,"MakerTaker"),u=this.safeStringLower(e,"Side"),l=this.safeStringLower(e,"OrderType");var p=this.safeNumber(e,"Fee");if(void 0!==p){var v=this.safeString(e,"FeeProductId"),m=this.safeCurrencyCode(v);h={cost:p,currency:m}}}var g=this.parseNumber(r),y=this.parseNumber(i);void 0===n&&(n=this.parseNumber(b.stringMul(r,i)));var x=this.safeSymbol(o,t);return{info:e,id:s,symbol:x,timestamp:a,datetime:this.iso8601(a),order:c,type:l,side:u,takerOrMaker:d,price:g,amount:y,cost:n,fee:h}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},s=this.safeInteger(this.options,"omsId",1),e.next=6,this.loadMarkets();case 6:return o=this.market(t),u={omsId:s,InstrumentId:o.id},void 0!==n&&(u.Count=n),e.next=11,this.publicGetGetLastTrades(this.extend(u,a));case 11:return c=e.sent,e.abrupt("return",this.parseTrades(c,o,r,n));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchAccounts",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:{},r=this.safeInteger(this.options,"omsId",1),this.checkRequiredCredentials(),n={omsId:r,UserId:this.uid,UserName:"igor@ccxt.trade"},e.next=6,this.privateGetGetUserAccounts(this.extend(n,t));case 6:for(a=e.sent,s=[],o=0;o<a.length;o++)u=this.safeString(a,o),s.push({id:u,type:void 0,currency:void 0,info:u});return e.abrupt("return",s);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.length>0&&void 0!==p[0]?p[0]:{},r=this.safeInteger(this.options,"omsId",1),e.next=4,this.loadMarkets();case 4:return e.next=6,this.loadAccounts();case 6:return n=this.safeInteger2(this.options,"accountId","AccountId",parseInt(this.accounts[0].id)),a=this.safeInteger2(t,"accountId","AccountId",n),t=this.omit(t,["accountId","AccountId"]),s={omsId:r,AccountId:a},e.next=12,this.privateGetGetAccountPositions(this.extend(s,t));case 12:for(o=e.sent,u={info:o},c=0;c<o.length;c++)d=o[c],h=this.safeString(d,"ProductId"),l=this.safeCurrencyCode(h),(f=this.account()).total=this.safeString(d,"Amount"),f.used=this.safeString(d,"Hold"),u[l]=f;return e.abrupt("return",this.parseBalance(u,!1));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseLedgerEntryType",value:function(e){return this.safeString({Trade:"trade",Deposit:"transaction",Withdraw:"transaction",Transfer:"transfer",OrderHold:"trade",WithdrawHold:"transaction",DepositHold:"transaction",MarginHold:"trade",ManualHold:"trade",ManualEntry:"trade",MarginAcquisition:"trade",MarginRelinquish:"trade",MarginQuoteHold:"trade"},e,e)}},{key:"parseLedgerEntry",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"TransactionId"),i=this.safeString(e,"AccountId"),n=this.safeString(e,"ReferenceId"),a=this.safeString(e,"Counterparty"),s=this.parseLedgerEntryType(this.safeString(e,"ReferenceType")),o=this.safeString(e,"ProductId"),u=this.safeCurrencyCode(o,t),c=this.safeNumber(e,"CR"),d=this.safeNumber(e,"DR"),h=void 0,l=void 0;c>0?(h=c,l="in"):d>0&&(h=d,l="out");var f=this.safeInteger(e,"TimeStamp"),p=void 0,v=this.safeNumber(e,"Balance");"out"===l?p=this.sum(v,h):"in"===l&&(p=Math.max(0,v-h));var m="ok";return{info:e,id:r,direction:l,account:i,referenceId:n,referenceAccount:a,type:s,currency:u,amount:h,before:p,after:v,status:m,timestamp:f,datetime:this.iso8601(f),fee:void 0}}},{key:"fetchLedger",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:void 0,r=l.length>1&&void 0!==l[1]?l[1]:void 0,n=l.length>2&&void 0!==l[2]?l[2]:void 0,a=l.length>3&&void 0!==l[3]?l[3]:{},s=this.safeInteger(this.options,"omsId",1),e.next=7,this.loadMarkets();case 7:return e.next=9,this.loadAccounts();case 9:return o=this.safeInteger2(this.options,"accountId","AccountId",parseInt(this.accounts[0].id)),u=this.safeInteger2(a,"accountId","AccountId",o),a=this.omit(a,["accountId","AccountId"]),c={omsId:s,AccountId:u},void 0!==n&&(c.Depth=n),e.next=16,this.privateGetGetAccountTransactions(this.extend(c,a));case 16:return d=e.sent,h=void 0,void 0!==t&&(h=this.currency(t)),e.abrupt("return",this.parseLedger(d,h,r,n));case 20:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({Accepted:"open",Rejected:"rejected",Working:"open",Canceled:"canceled",Expired:"expired",FullyExecuted:"closed"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString2(e,"ReplacementOrderId","OrderId"),i=this.safeInteger(e,"ReceiveTime"),n=this.safeInteger(e,"LastUpdatedTime"),a=this.safeString(e,"Instrument"),s=this.safeSymbol(a,t),o=this.safeStringLower(e,"Side"),u=this.safeStringLower(e,"OrderType"),c=this.safeString2(e,"ReplacementClOrdId","ClientOrderId"),d=this.safeNumber(e,"Price",0);d=d>0?d:void 0;var h=this.safeNumber(e,"OrigQuantity"),l=this.safeNumber(e,"QuantityExecuted"),f=this.safeNumber(e,"GrossValueExecuted"),p=this.safeNumber(e,"AvgPrice",0);p=p>0?p:void 0;var v=this.safeNumber(e,"StopPrice",0);v=v>0?v:void 0;var m=void 0,g=this.parseOrderStatus(this.safeString(e,"OrderState")),y=void 0,b=void 0;return this.safeOrder({id:r,clientOrderId:c,info:e,timestamp:i,datetime:this.iso8601(i),lastTradeTimestamp:n,status:g,symbol:s,type:u,timeInForce:m,postOnly:void 0,side:o,price:d,stopPrice:v,cost:f,amount:h,filled:l,average:p,remaining:void 0,fee:y,trades:b})}},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,u,c,d,h,l,f,p,v,m=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=m.length>4&&void 0!==m[4]?m[4]:void 0,o=m.length>5&&void 0!==m[5]?m[5]:{},u=this.safeInteger(this.options,"omsId",1),e.next=5,this.loadMarkets();case 5:return e.next=7,this.loadAccounts();case 7:return c=this.safeInteger2(this.options,"accountId","AccountId",parseInt(this.accounts[0].id)),d=this.safeInteger2(o,"accountId","AccountId",c),h=this.safeInteger2(o,"ClientOrderId","clientOrderId"),o=this.omit(o,["accountId","AccountId","clientOrderId","ClientOrderId"]),l=this.market(t),f="buy"===n?0:1,p={InstrumentId:parseInt(l.id),omsId:u,AccountId:d,TimeInForce:1,Side:f,Quantity:parseFloat(this.amountToPrecision(t,a)),OrderType:this.safeInteger(this.options.orderTypes,this.capitalize(r))},void 0!==s&&(p.LimitPrice=parseFloat(this.priceToPrecision(t,s))),void 0!==h&&(p.ClientOrderId=h),e.next=18,this.privatePostSendOrder(this.extend(p,o));case 18:return v=e.sent,e.abrupt("return",this.parseOrder(v,l));case 20:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"editOrder",value:function(){var e=n(i.mark((function e(t,r,n,a,s){var o,u,c,d,h,l,f,p,v,m,g=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=g.length>5&&void 0!==g[5]?g[5]:void 0,u=g.length>6&&void 0!==g[6]?g[6]:{},c=this.safeInteger(this.options,"omsId",1),e.next=5,this.loadMarkets();case 5:return e.next=7,this.loadAccounts();case 7:return d=this.safeInteger2(this.options,"accountId","AccountId",parseInt(this.accounts[0].id)),h=this.safeInteger2(u,"accountId","AccountId",d),l=this.safeInteger2(u,"ClientOrderId","clientOrderId"),u=this.omit(u,["accountId","AccountId","clientOrderId","ClientOrderId"]),f=this.market(r),p="buy"===a?0:1,v={OrderIdToReplace:parseInt(t),InstrumentId:parseInt(f.id),omsId:c,AccountId:h,TimeInForce:1,Side:p,Quantity:parseFloat(this.amountToPrecision(r,s)),OrderType:this.safeInteger(this.options.orderTypes,this.capitalize(n))},void 0!==o&&(v.LimitPrice=parseFloat(this.priceToPrecision(r,o))),void 0!==l&&(v.ClientOrderId=l),e.next=18,this.privatePostCancelReplaceOrder(this.extend(v,u));case 18:return m=e.sent,e.abrupt("return",this.parseOrder(m,f));case 20:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n,a){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:void 0,r=l.length>1&&void 0!==l[1]?l[1]:void 0,n=l.length>2&&void 0!==l[2]?l[2]:void 0,a=l.length>3&&void 0!==l[3]?l[3]:{},s=this.safeInteger(this.options,"omsId",1),e.next=7,this.loadMarkets();case 7:return e.next=9,this.loadAccounts();case 9:return o=this.safeInteger2(this.options,"accountId","AccountId",parseInt(this.accounts[0].id)),u=this.safeInteger2(a,"accountId","AccountId",o),a=this.omit(a,["accountId","AccountId"]),c={omsId:s,AccountId:u},d=void 0,void 0!==t&&(d=this.market(t),c.InstrumentId=d.id),void 0!==r&&(c.StartTimeStamp=r),void 0!==n&&(c.Depth=n),e.next=19,this.privateGetGetTradesHistory(this.extend(c,a));case 19:return h=e.sent,e.abrupt("return",this.parseTrades(h,d,r,n));case 21:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"cancelAllOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:{},n=this.safeInteger(this.options,"omsId",1),e.next=5,this.loadMarkets();case 5:return e.next=7,this.loadAccounts();case 7:return a=this.safeInteger2(this.options,"accountId","AccountId",parseInt(this.accounts[0].id)),s=this.safeInteger2(r,"accountId","AccountId",a),r=this.omit(r,["accountId","AccountId"]),o={omsId:n,AccountId:s},void 0!==t&&(u=this.market(t),o.IntrumentId=u.id),e.next=14,this.privatePostCancelAllOrders(this.extend(o,r));case 14:return c=e.sent,e.abrupt("return",c);case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:{},a=this.safeInteger(this.options,"omsId",1),e.next=5,this.loadMarkets();case 5:return e.next=7,this.loadAccounts();case 7:return s=void 0,void 0!==r&&(s=this.market(r)),o={omsId:a},void 0!==(u=this.safeInteger2(n,"clientOrderId","ClOrderId"))?o.ClOrderId=u:o.OrderId=parseInt(t),n=this.omit(n,["clientOrderId","ClOrderId"]),e.next=15,this.privatePostCancelOrder(this.extend(o,n));case 15:return c=e.sent,d=this.parseOrder(c,s),e.abrupt("return",this.extend(d,{id:t,clientOrderId:u}));case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:void 0,r=l.length>1&&void 0!==l[1]?l[1]:void 0,n=l.length>2&&void 0!==l[2]?l[2]:void 0,a=l.length>3&&void 0!==l[3]?l[3]:{},s=this.safeInteger(this.options,"omsId",1),e.next=7,this.loadMarkets();case 7:return e.next=9,this.loadAccounts();case 9:return o=this.safeInteger2(this.options,"accountId","AccountId",parseInt(this.accounts[0].id)),u=this.safeInteger2(a,"accountId","AccountId",o),a=this.omit(a,["accountId","AccountId"]),c=void 0,void 0!==t&&(c=this.market(t)),d={omsId:s,AccountId:u},e.next=17,this.privateGetGetOpenOrders(this.extend(d,a));case 17:return h=e.sent,e.abrupt("return",this.parseOrders(h,c,r,n));case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:void 0,r=l.length>1&&void 0!==l[1]?l[1]:void 0,n=l.length>2&&void 0!==l[2]?l[2]:void 0,a=l.length>3&&void 0!==l[3]?l[3]:{},s=this.safeInteger(this.options,"omsId",1),e.next=7,this.loadMarkets();case 7:return e.next=9,this.loadAccounts();case 9:return o=this.safeInteger2(this.options,"accountId","AccountId",parseInt(this.accounts[0].id)),u=this.safeInteger2(a,"accountId","AccountId",o),a=this.omit(a,["accountId","AccountId"]),c={omsId:s,AccountId:u},d=void 0,void 0!==t&&(d=this.market(t),c.InstrumentId=d.id),void 0!==r&&(c.StartTimeStamp=r),void 0!==n&&(c.Depth=n),e.next=19,this.privateGetGetOrdersHistory(this.extend(c,a));case 19:return h=e.sent,e.abrupt("return",this.parseOrders(h,d,r,n));case 21:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:{},a=this.safeInteger(this.options,"omsId",1),e.next=5,this.loadMarkets();case 5:return e.next=7,this.loadAccounts();case 7:return s=this.safeInteger2(this.options,"accountId","AccountId",parseInt(this.accounts[0].id)),o=this.safeInteger2(n,"accountId","AccountId",s),n=this.omit(n,["accountId","AccountId"]),u=void 0,void 0!==r&&(u=this.market(r)),c={omsId:a,AccountId:o,OrderId:parseInt(t)},e.next=15,this.privateGetGetOrderStatus(this.extend(c,n));case 15:return d=e.sent,e.abrupt("return",this.parseOrder(d,u));case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrderTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=f.length>1&&void 0!==f[1]?f[1]:void 0,n=f.length>2&&void 0!==f[2]?f[2]:void 0,a=f.length>3&&void 0!==f[3]?f[3]:void 0,s=f.length>4&&void 0!==f[4]?f[4]:{},o=this.safeInteger(this.options,"omsId",1),e.next=7,this.loadMarkets();case 7:return e.next=9,this.loadAccounts();case 9:return u=void 0,void 0!==r&&(u=this.market(r)),c={OMSId:parseInt(o),OrderId:t},e.next=14,this.privatePostGetOrderHistoryByOrderId(this.extend(c,s));case 14:return d=e.sent,h=this.groupBy(d,"ChangeReason"),l=this.safeValue(h,"Trade",[]),e.abrupt("return",this.parseTrades(l,u,n,a));case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchDepositAddress",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:{},n=this.safeInteger(this.options,"omsId",1),e.next=4,this.loadMarkets();case 4:return e.next=6,this.loadAccounts();case 6:return a=this.safeInteger2(this.options,"accountId","AccountId",parseInt(this.accounts[0].id)),s=this.safeInteger2(r,"accountId","AccountId",a),r=this.omit(r,["accountId","AccountId"]),o=this.currency(t),u={omsId:n,AccountId:s,ProductId:o.id,GenerateNewKey:!1},e.next=13,this.privateGetGetDepositInfo(this.extend(u,r));case 13:return c=e.sent,e.abrupt("return",this.parseDepositAddress(c,o));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseDepositAddress",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"DepositInfo"),i=JSON.parse(r),n=i.length,a=this.safeString(i,n-1),s=a.split("?memo="),o=this.safeString(s,0),u=this.safeString(s,1),c=void 0;return void 0!==t&&(c=t.code),this.checkAddress(o),{currency:c,address:o,tag:u,info:e}}},{key:"createDepositAddress",value:function(){var e=n(i.mark((function e(t){var r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:{},n={GenerateNewKey:!0},e.next=4,this.fetchDepositAddress(t,this.extend(n,r));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchDeposits",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:void 0,r=l.length>1&&void 0!==l[1]?l[1]:void 0,n=l.length>2&&void 0!==l[2]?l[2]:void 0,a=l.length>3&&void 0!==l[3]?l[3]:{},s=this.safeInteger(this.options,"omsId",1),e.next=7,this.loadMarkets();case 7:return e.next=9,this.loadAccounts();case 9:return o=this.safeInteger2(this.options,"accountId","AccountId",parseInt(this.accounts[0].id)),u=this.safeInteger2(a,"accountId","AccountId",o),a=this.omit(a,["accountId","AccountId"]),c=void 0,void 0!==t&&(c=this.currency(t)),d={omsId:s,AccountId:u},e.next=17,this.privateGetGetDeposits(this.extend(d,a));case 17:return h=e.sent,e.abrupt("return",this.parseTransactions(h,c,r,n));case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchWithdrawals",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:void 0,r=l.length>1&&void 0!==l[1]?l[1]:void 0,n=l.length>2&&void 0!==l[2]?l[2]:void 0,a=l.length>3&&void 0!==l[3]?l[3]:{},s=this.safeInteger(this.options,"omsId",1),e.next=7,this.loadMarkets();case 7:return e.next=9,this.loadAccounts();case 9:return o=this.safeInteger2(this.options,"accountId","AccountId",parseInt(this.accounts[0].id)),u=this.safeInteger2(a,"accountId","AccountId",o),a=this.omit(a,["accountId","AccountId"]),c=void 0,void 0!==t&&(c=this.currency(t)),d={omsId:s,AccountId:u},e.next=17,this.privateGetGetWithdraws(this.extend(d,a));case 17:return h=e.sent,e.abrupt("return",this.parseTransactions(h,c,r,n));case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTransactionStatusByType",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r={deposit:{New:"pending",AdminProcessing:"pending",Accepted:"pending",Rejected:"rejected",SystemProcessing:"pending",FullyProcessed:"ok",Failed:"failed",Pending:"pending",Confirmed:"pending",AmlProcessing:"pending",AmlAccepted:"pending",AmlRejected:"rejected",AmlFailed:"failed",LimitsAccepted:"pending",LimitsRejected:"rejected"},withdrawal:{New:"pending",AdminProcessing:"pending",Accepted:"pending",Rejected:"rejected",SystemProcessing:"pending",FullyProcessed:"ok",Failed:"failed",Pending:"pending",Pending2Fa:"pending",AutoAccepted:"pending",Delayed:"pending",UserCanceled:"canceled",AdminCanceled:"canceled",AmlProcessing:"pending",AmlAccepted:"pending",AmlRejected:"rejected",AmlFailed:"failed",LimitsAccepted:"pending",LimitsRejected:"rejected",Submitted:"pending",Confirmed:"pending",ManuallyConfirmed:"pending",Confirmed2Fa:"pending"}},i=this.safeValue(r,t,{});return this.safeString(i,e,e)}},{key:"parseTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"DepositId"),i=void 0,n=this.safeString(e,"ProductId"),a=this.safeCurrencyCode(n,t),s=void 0,o=void 0;"DepositId"in e?o="deposit":"WithdrawId"in e&&(o="withdrawal");var u=this.safeString(e,"TemplateForm"),c=void 0,d=this.safeInteger(e,"LastUpdateTimeStamp");if(void 0!==u){var h=JSON.parse(u);c=this.safeString(h,"ExternalAddress"),i=this.safeString(h,"TxId"),s=this.safeInteger(h,"TimeSubmitted"),d=this.safeInteger(h,"LastUpdated",d)}var l=c,f=this.parseTransactionStatusByType(this.safeString(e,"TicketStatus"),o),p=this.safeNumber(e,"Amount"),v=this.safeNumber(e,"FeeAmount"),m=void 0;return void 0!==v&&(m={currency:a,cost:v}),{info:e,id:r,txid:i,timestamp:s,datetime:this.iso8601(s),address:c,addressTo:l,addressFrom:void 0,tag:void 0,tagTo:void 0,tagFrom:void 0,type:o,amount:p,currency:a,status:f,updated:d,fee:m}}},{key:"nonce",value:function(){return this.milliseconds()}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.urls.api[t]+"/"+this.implodeParams(e,i),o=this.omit(i,this.extractParams(e));if("public"===t)Object.keys(o).length&&(s+="?"+this.urlencode(o));else if("private"===t){this.checkRequiredCredentials();var u=this.nonce().toString(),c=u+this.uid+this.apiKey,d=this.hmac(this.encode(c),this.encode(this.secret));n={Nonce:u,APIKey:this.apiKey,Signature:d,UserId:this.uid},"POST"===r?(n["Content-Type"]="application/json",a=this.json(o)):Object.keys(o).length&&(s+="?"+this.urlencode(o))}return{url:s,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,u){if(404===e)throw new p(this.id+" "+a);if(void 0!==s){var c=this.safeString(s,"errormsg");if(void 0!==c&&""!==c){var d=this.id+" "+a;throw this.throwExactlyMatchedException(this.exceptions.exact,c,d),this.throwBroadlyMatchedException(this.exceptions.broad,a,d),new f(d)}}}}]),r}(h)},function(e,t,r){"use strict";var i=r(7),n=r(8),a=r(1),s=r(2),o=r(6),u=r(3),c=r(4),d=r(5),h=r(11),l=r(10),f=l.AuthenticationError,p=l.ExchangeError,v=l.PermissionDenied,m=l.BadRequest,g=l.CancelPending,y=l.OrderNotFound,b=l.InsufficientFunds,x=l.RateLimitExceeded,k=l.InvalidOrder,w=l.AccountSuspended,_=l.BadSymbol,S=l.OnMaintenance,O=r(18).TRUNCATE,T=r(12);e.exports=function(e){c(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(u(r.prototype),"describe",this).call(this),{id:"novadax",name:"NovaDAX",countries:["BR"],rateLimit:50,version:"v1",has:{CORS:!1,cancelOrder:!0,createOrder:!0,fetchAccounts:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchDeposits:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrders:!0,fetchOrderTrades:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTickers:!0,fetchTime:!0,fetchTrades:!0,fetchTransactions:!0,fetchWithdrawals:!0,withdraw:!0},timeframes:{"1m":"ONE_MIN","5m":"FIVE_MIN","15m":"FIFTEEN_MIN","30m":"HALF_HOU","1h":"ONE_HOU","1d":"ONE_DAY","1w":"ONE_WEE","1M":"ONE_MON"},urls:{logo:"https://user-images.githubusercontent.com/1294454/92337550-2b085500-f0b3-11ea-98e7-5794fb07dd3b.jpg",api:{public:"https://api.novadax.com",private:"https://api.novadax.com"},www:"https://www.novadax.com.br",doc:["https://doc.novadax.com/pt-BR/"],fees:"https://www.novadax.com.br/fees-and-limits",referral:"https://www.novadax.com.br/?s=ccxt"},api:{public:{get:["common/symbol","common/symbols","common/timestamp","market/tickers","market/ticker","market/depth","market/trades","market/kline/history"]},private:{get:["orders/get","orders/list","orders/fill","orders/fills","account/getBalance","account/subs","account/subs/balance","account/subs/transfer/record","wallet/query/deposit-withdraw"],post:["orders/create","orders/cancel","account/withdraw/coin","account/subs/transfer"]}},fees:{trading:{tierBased:!1,percentage:!0,taker:.005,maker:.003}},requiredCredentials:{apiKey:!0,secret:!0},exceptions:{exact:{A99999:p,A10001:m,A10002:p,A10003:f,A10004:x,A10005:v,A10006:w,A10007:m,A10011:_,A10012:_,A10013:S,A30001:y,A30002:k,A30003:k,A30004:k,A30005:k,A30006:k,A30007:b,A30008:k,A30009:k,A30010:g,A30011:k,A30012:k},broad:{}},options:{fetchOHLCV:{volume:"amount"}}})}},{key:"fetchTime",value:function(){var e=n(i.mark((function e(){var t,r,n=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},e.next=3,this.publicGetCommonTimestamp(t);case 3:return r=e.sent,e.abrupt("return",this.safeInteger(r,"data"));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p,v,m,g,y=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=y.length>0&&void 0!==y[0]?y[0]:{},e.next=3,this.publicGetCommonSymbols(t);case 3:for(r=e.sent,n=[],a=this.safeValue(r,"data",[]),s=0;s<a.length;s++)o=a[s],u=this.safeString(o,"baseCurrency"),c=this.safeString(o,"quoteCurrency"),d=this.safeString(o,"symbol"),h=this.safeCurrencyCode(u),l=this.safeCurrencyCode(c),f=h+"/"+l,p={amount:this.safeInteger(o,"amountPrecision"),price:this.safeInteger(o,"pricePrecision"),cost:this.safeInteger(o,"valuePrecision")},v={amount:{min:this.safeNumber(o,"minOrderAmount"),max:void 0},price:{min:void 0,max:void 0},cost:{min:this.safeNumber(o,"minOrderValue"),max:void 0}},m=this.safeString(o,"status"),g="ONLINE"===m,n.push({id:d,symbol:f,base:h,quote:l,baseId:u,quoteId:c,precision:p,limits:v,info:o,active:g});return e.abrupt("return",n);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeInteger(e,"timestamp"),i=this.safeString(e,"symbol"),n=this.safeSymbol(i,t,"_"),a=this.safeNumber(e,"open24h"),s=this.safeNumber(e,"lastPrice"),o=void 0,u=void 0,c=void 0;void 0!==s&&void 0!==a&&(o=(u=s-a)/a*100,c=this.sum(s,a)/2);var d=this.safeNumber(e,"baseVolume24h"),h=this.safeNumber(e,"quoteVolume24h"),l=this.vwap(d,h);return{symbol:n,timestamp:r,datetime:this.iso8601(r),high:this.safeNumber(e,"high24h"),low:this.safeNumber(e,"low24h"),bid:this.safeNumber(e,"bid"),bidVolume:void 0,ask:this.safeNumber(e,"ask"),askVolume:void 0,vwap:l,open:a,close:s,last:s,previousClose:void 0,change:u,percentage:o,average:c,baseVolume:d,quoteVolume:h,info:e}}},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={symbol:n.id},e.next=7,this.publicGetMarketTicker(this.extend(a,r));case 7:return s=e.sent,o=this.safeValue(s,"data",{}),e.abrupt("return",this.parseTicker(o,n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetMarketTickers(r);case 6:for(n=e.sent,a=this.safeValue(n,"data",[]),s={},o=0;o<a.length;o++)u=this.parseTicker(a[o]),c=u.symbol,s[c]=u;return e.abrupt("return",this.filterByArray(s,"symbol",t));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:{},e.next=4,this.loadMarkets();case 4:return a={symbol:this.marketId(t)},void 0!==r&&(a.limit=r),e.next=8,this.publicGetMarketDepth(this.extend(a,n));case 8:return s=e.sent,o=this.safeValue(s,"data",{}),u=this.safeInteger(o,"timestamp"),e.abrupt("return",this.parseOrderBook(o,u,"bids","asks"));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),i=this.safeString(e,"orderId"),n=this.safeInteger(e,"timestamp"),a=this.safeStringLower(e,"side"),s=this.safeString(e,"price"),o=this.safeString(e,"amount"),u=this.parseNumber(s),c=this.parseNumber(o),d=this.safeNumber(e,"volume");void 0===d&&(d=this.parseNumber(T.stringMul(s,o)));var h=this.safeString(e,"symbol"),l=this.safeSymbol(h,t,"_"),f=this.safeStringLower(e,"role"),p=this.safeString(e,"fee"),v=void 0;if(void 0!==p){var m=p.split(" "),g=this.safeString(m,1),y=this.safeCurrencyCode(g);v={cost:this.safeNumber(m,0),currency:y}}return{id:r,order:i,timestamp:n,datetime:this.iso8601(n),symbol:l,type:void 0,side:a,price:u,amount:c,cost:d,takerOrMaker:f,fee:v,info:e}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={symbol:s.id},void 0!==n&&(o.limit=n),e.next=10,this.publicGetMarketTrades(this.extend(o,a));case 10:return u=e.sent,c=this.safeValue(u,"data",[]),e.abrupt("return",this.parseTrades(c,s,r,n));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=p.length>1&&void 0!==p[1]?p[1]:"1m",n=p.length>2&&void 0!==p[2]?p[2]:void 0,a=p.length>3&&void 0!==p[3]?p[3]:void 0,s=p.length>4&&void 0!==p[4]?p[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),u={symbol:o.id,unit:this.timeframes[r]},c=this.parseTimeframe(r),d=this.seconds(),void 0===a&&(a=3e3),void 0===n?(u.from=d-a*c,u.to=d):(h=parseInt(n/1e3),u.from=h,u.to=this.sum(h,a*c)),e.next=14,this.publicGetMarketKlineHistory(this.extend(u,s));case 14:return l=e.sent,f=this.safeValue(l,"data",[]),e.abrupt("return",this.parseOHLCVs(f,o,r,n,a));case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){var t=this.safeValue(this.options,"fetchOHLCV",{}),r=this.safeString(t,"volume","amount");return[this.safeTimestamp(e,"score"),this.safeNumber(e,"openPrice"),this.safeNumber(e,"highPrice"),this.safeNumber(e,"lowPrice"),this.safeNumber(e,"closePrice"),this.safeNumber(e,r)]}},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetAccountGetBalance(t);case 5:for(r=e.sent,n=this.safeValue(r,"data",[]),a={info:r},s=0;s<n.length;s++)o=n[s],u=this.safeString(o,"currency"),c=this.safeCurrencyCode(u),(d=this.account()).total=this.safeString(o,"available"),d.free=this.safeString(o,"balance"),d.used=this.safeString(o,"hold"),a[c]=d;return e.abrupt("return",this.parseBalance(a,!1));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,u,c,d,h,l,f,p,v,m=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=m.length>4&&void 0!==m[4]?m[4]:void 0,o=m.length>5&&void 0!==m[5]?m[5]:{},e.next=4,this.loadMarkets();case 4:if(u=this.market(t),c=r.toUpperCase(),d=n.toUpperCase(),h={symbol:u.id,type:c,side:d},"LIMIT"!==c){e.next=13;break}h.price=this.priceToPrecision(t,s),h.amount=this.amountToPrecision(t,a),e.next=33;break;case 13:if("MARKET"!==c){e.next=33;break}if("SELL"!==d){e.next=18;break}h.amount=this.amountToPrecision(t,a),e.next=33;break;case 18:if("BUY"!==d){e.next=33;break}if(l=this.safeNumber(o,"value"),!this.safeValue(this.options,"createMarketBuyOrderRequiresPrice",!0)){e.next=30;break}if(void 0===s){e.next=26;break}void 0===l&&(l=a*s),e.next=28;break;case 26:if(void 0!==l){e.next=28;break}throw new k(this.id+" createOrder() requires the price argument with market buy orders to calculate total order cost (amount to spend), where cost = amount * price. Supply a price argument to createOrder() call if you want the cost to be calculated for you from price and amount, or, alternatively, add .options['createMarketBuyOrderRequiresPrice'] = false and supply the total cost value in the 'amount' argument or in the 'value' extra parameter (the exchange-specific behaviour)");case 28:e.next=31;break;case 30:l=void 0===l?a:l;case 31:f=u.precision.price,h.value=this.decimalToPrecision(l,O,f,this.precisionMode);case 33:return e.next=35,this.privatePostOrdersCreate(this.extend(h,o));case 35:return p=e.sent,v=this.safeValue(p,"data",{}),e.abrupt("return",this.parseOrder(v,u));case 38:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.length>1&&void 0!==o[1]?o[1]:void 0,r=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return n={id:t},e.next=7,this.privatePostOrdersCancel(this.extend(n,r));case 7:return a=e.sent,s=this.safeValue(a,"data",{}),e.abrupt("return",this.parseOrder(s));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.length>1&&void 0!==o[1]?o[1]:void 0,r=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return n={id:t},e.next=7,this.privateGetOrdersGet(this.extend(n,r));case 7:return a=e.sent,s=this.safeValue(a,"data",{}),e.abrupt("return",this.parseOrder(s));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return s={},o=void 0,void 0!==t&&(o=this.market(t),s.symbol=o.id),void 0!==n&&(s.limit=n),void 0!==r&&(s.fromTimestamp=r),e.next=13,this.privateGetOrdersList(this.extend(s,a));case 13:return u=e.sent,c=this.safeValue(u,"data",[]),e.abrupt("return",this.parseOrders(c,o,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:void 0,a=o.length>3&&void 0!==o[3]?o[3]:{},s={status:"SUBMITTED,PROCESSING,PARTIAL_FILLED,CANCELING"},e.next=7,this.fetchOrders(t,r,n,this.extend(s,a));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:void 0,a=o.length>3&&void 0!==o[3]?o[3]:{},s={status:"FILLED,CANCELED,REJECTED"},e.next=7,this.fetchOrders(t,r,n,this.extend(s,a));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:void 0,s=h.length>4&&void 0!==h[4]?h[4]:{},e.next=6,this.loadMarkets();case 6:return o={id:t},e.next=9,this.privateGetOrdersFill(this.extend(o,s));case 9:return u=e.sent,c=void 0,void 0!==r&&(c=this.market(r)),d=this.safeValue(u,"data",[]),e.abrupt("return",this.parseTrades(d,c,n,a));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({SUBMITTED:"open",PROCESSING:"open",PARTIAL_FILLED:"open",CANCELING:"open",FILLED:"closed",CANCELED:"canceled",REJECTED:"rejected"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),i=this.safeNumber(e,"amount"),n=this.safeNumber(e,"price"),a=this.safeNumber(e,"filledValue"),s=this.safeStringLower(e,"type"),o=this.safeStringLower(e,"side"),u=this.parseOrderStatus(this.safeString(e,"status")),c=this.safeInteger(e,"timestamp"),d=this.safeNumber(e,"averagePrice"),h=this.safeNumber(e,"filledAmount"),l=void 0,f=this.safeNumber(e,"filledFee");void 0!==f&&(l={cost:f,currency:void 0});var p=this.safeString(e,"symbol"),v=this.safeSymbol(p,t,"_");return this.safeOrder({id:r,clientOrderId:void 0,info:e,timestamp:c,datetime:this.iso8601(c),lastTradeTimestamp:void 0,symbol:v,type:s,timeInForce:void 0,postOnly:void 0,side:o,price:n,stopPrice:void 0,amount:i,cost:a,average:d,filled:h,remaining:void 0,status:u,fee:l,trades:void 0})}},{key:"withdraw",value:function(){var e=n(i.mark((function e(t,r,n){var a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=d.length>3&&void 0!==d[3]?d[3]:void 0,s=d.length>4&&void 0!==d[4]?d[4]:{},e.next=4,this.loadMarkets();case 4:return o=this.currency(t),u={code:o.id,amount:this.currencyToPrecision(t,r),wallet:n},void 0!==a&&(u.tag=a),e.next=9,this.privatePostAccountWithdrawCoin(this.extend(u,s));case 9:return c=e.sent,e.abrupt("return",this.parseTransaction(c,o));case 11:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"fetchAccounts",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:{},e.next=3,this.privateGetAccountSubs(t);case 3:for(r=e.sent,n=this.safeValue(r,"data",[]),a=[],s=0;s<n.length;s++)o=n[s],u=this.safeString(o,"subId"),c=this.safeString(o,"subAccount"),a.push({id:u,type:c,currency:void 0,info:o});return e.abrupt("return",a);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchDeposits",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:void 0,a=o.length>3&&void 0!==o[3]?o[3]:{},s={type:"coin_in"},e.next=7,this.fetchTransactions(t,r,n,this.extend(s,a));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchWithdrawals",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:void 0,a=o.length>3&&void 0!==o[3]?o[3]:{},s={type:"coin_out"},e.next=7,this.fetchTransactions(t,r,n,this.extend(s,a));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTransactions",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return s={},o=void 0,void 0!==t&&(o=this.currency(t),s.currency=o.id),void 0!==n&&(s.size=n),e.next=12,this.privateGetWalletQueryDepositWithdraw(this.extend(s,a));case 12:return u=e.sent,c=this.safeValue(u,"data",[]),e.abrupt("return",this.parseTransactions(c,o,r,n));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTransactionStatus",value:function(e){var t=e.split(" ");e=this.safeString(t,1,e);return this.safeString({Pending:"pending",confirming:"pending",SUCCESS:"ok",FAIL:"failed"},e,e)}},{key:"parseTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString2(e,"id","data"),i=this.safeString(e,"type");"COIN_IN"===i?i="deposit":"COIN_OUT"===i&&(i="withdraw");var n=this.safeNumber(e,"amount"),a=this.safeString(e,"address"),s=this.safeString(e,"addressTag"),o=this.safeString(e,"txHash"),u=this.safeInteger(e,"createdAt"),c=this.safeInteger(e,"updatedAt"),d=this.safeString(e,"currency"),h=this.safeCurrencyCode(d,t),l=this.parseTransactionStatus(this.safeString(e,"state"));return{info:e,id:r,currency:h,amount:n,address:a,addressTo:a,addressFrom:void 0,tag:s,tagTo:s,tagFrom:void 0,status:l,type:i,updated:c,txid:o,timestamp:u,datetime:this.iso8601(u),fee:void 0}}},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return s={},o=void 0,void 0!==t&&(o=this.market(t),s.symbol=o.id),void 0!==n&&(s.limit=n),void 0!==r&&(s.fromTimestamp=r),e.next=13,this.privateGetOrdersFills(this.extend(s,a));case 13:return u=e.sent,c=this.safeValue(u,"data",[]),e.abrupt("return",this.parseTrades(c,o,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s="/"+this.version+"/"+this.implodeParams(e,i),o=this.urls.api[t]+s,u=this.omit(i,this.extractParams(e));if("public"===t)Object.keys(u).length&&(o+="?"+this.urlencode(u));else if("private"===t){this.checkRequiredCredentials();var c=this.milliseconds().toString();n={"X-Nova-Access-Key":this.apiKey,"X-Nova-Timestamp":c};var d=void 0;"POST"===r?(a=this.json(u),d=this.hash(a,"md5"),n["Content-Type"]="application/json"):(Object.keys(u).length&&(o+="?"+this.urlencode(u)),d=this.urlencode(this.keysort(u)));var h=r+"\n"+s+"\n"+d+"\n"+c;n["X-Nova-Signature"]=this.hmac(this.encode(h),this.encode(this.secret))}return{url:o,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,u){if(void 0!==s){var c=this.safeString(s,"code");if("A10000"!==c){var d=this.safeString(s,"message"),h=this.id+" "+a;throw this.throwExactlyMatchedException(this.exceptions.exact,c,h),this.throwBroadlyMatchedException(this.exceptions.broad,d,h),new p(h)}}}}]),r}(h)},function(e,t,r){"use strict";var i=r(7),n=r(21),a=r(8),s=r(1),o=r(2),u=r(6),c=r(3),d=r(4),h=r(5),l=r(11),f=r(10),p=f.ExchangeError,v=f.AuthenticationError,m=f.ArgumentsRequired,g=f.BadRequest,y=f.InvalidOrder,b=f.InsufficientFunds,x=f.OrderNotFound,k=f.PermissionDenied;e.exports=function(e){d(r,e);var t=h(r);function r(){return s(this,r),t.apply(this,arguments)}return o(r,[{key:"describe",value:function(){return this.deepExtend(u(c(r.prototype),"describe",this).call(this),{id:"oceanex",name:"OceanEx",countries:["US"],version:"v1",rateLimit:3e3,urls:{logo:"https://user-images.githubusercontent.com/1294454/58385970-794e2d80-8001-11e9-889c-0567cd79b78e.jpg",api:"https://api.oceanex.pro",www:"https://www.oceanex.pro.com",doc:"https://api.oceanex.pro/doc/v1",referral:"https://oceanex.pro/signup?referral=VE24QX"},has:{fetchMarkets:!0,fetchCurrencies:!1,fetchTicker:!0,fetchTickers:!0,fetchOrderBook:!0,fetchOrderBooks:!0,fetchTrades:!0,fetchTradingLimits:!1,fetchTradingFees:!1,fetchAllTradingFees:!0,fetchFundingFees:!1,fetchTime:!0,fetchOrder:!0,fetchOrders:!0,fetchOpenOrders:!0,fetchClosedOrders:!0,fetchBalance:!0,createMarketOrder:!0,createOrder:!0,cancelOrder:!0,cancelOrders:!0,cancelAllOrders:!0},timeframes:{"1m":"1m","5m":"5m","15m":"15m","30m":"30m","1h":"1h","4h":"4h","12h":"12h","1d":"1d","1w":"1w"},api:{public:{get:["markets","tickers/{pair}","tickers_multi","order_book","order_book/multi","fees/trading","trades","timestamp"]},private:{get:["key","members/me","orders","orders/filter"],post:["orders","orders/multi","order/delete","order/delete/multi","orders/clear"]}},fees:{trading:{tierBased:!1,percentage:!0,maker:.001,taker:.001}},commonCurrencies:{PLA:"Plair"},exceptions:{codes:{"-1":g,"-2":g,1001:g,1004:m,1006:v,1008:v,1010:v,1011:k,2001:v,2002:y,2004:x,9003:k},exact:{"market does not have a valid value":g,"side does not have a valid value":g,"Account::AccountError: Cannot lock funds":b,"The account does not exist":v}}})}},{key:"fetchMarkets",value:function(){var e=a(i.mark((function e(){var t,r,a,s,o,u,c,d,h,l,f,p,v,m,g,y,b=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=b.length>0&&void 0!==b[0]?b[0]:{},r={show_details:!0},e.next=4,this.publicGetMarkets(this.extend(r,t));case 4:for(a=e.sent,s=[],o=this.safeValue(a,"data"),u=0;u<o.length;u++)c=o[u],d=this.safeValue(c,"id"),h=this.safeValue(c,"name"),l=h.split("/"),f=n(l,2),p=f[0],v=f[1],m=this.safeCurrencyCode(p),g=this.safeCurrencyCode(v),p=p.toLowerCase(),v=v.toLowerCase(),y=m+"/"+g,s.push({id:d,symbol:y,base:m,quote:g,baseId:p,quoteId:v,active:!0,info:c,precision:{amount:this.safeInteger(c,"amount_precision"),price:this.safeInteger(c,"price_precision"),base:this.safeInteger(c,"ask_precision"),quote:this.safeInteger(c,"bid_precision")},limits:{amount:{min:void 0,max:void 0},price:{min:void 0,max:void 0},cost:{min:this.safeNumber(c,"minimum_trading_amount"),max:void 0}}});return e.abrupt("return",s);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=a(i.mark((function e(t){var r,n,a,s,o,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={pair:n.id},e.next=7,this.publicGetTickersPair(this.extend(a,r));case 7:return s=e.sent,o=this.safeValue(s,"data",{}),e.abrupt("return",this.parseTicker(o,n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTickers",value:function(){var e=a(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.length>0&&void 0!==p[0]?p[0]:void 0,r=p.length>1&&void 0!==p[1]?p[1]:{},e.next=4,this.loadMarkets();case 4:return void 0===t&&(t=this.symbols),n=this.marketIds(t),a={markets:n},e.next=9,this.publicGetTickersMulti(this.extend(a,r));case 9:for(s=e.sent,o=this.safeValue(s,"data"),u={},c=0;c<o.length;c++)d=o[c],h=this.safeString(d,"market"),l=this.safeMarket(h),f=l.symbol,u[f]=this.parseTicker(d,l);return e.abrupt("return",this.filterByArray(u,"symbol",t));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeValue(e,"ticker",{}),i=this.safeTimestamp(e,"at");return{symbol:t.symbol,timestamp:i,datetime:this.iso8601(i),high:this.safeNumber(r,"high"),low:this.safeNumber(r,"low"),bid:this.safeNumber(r,"buy"),bidVolume:void 0,ask:this.safeNumber(r,"sell"),askVolume:void 0,vwap:void 0,open:void 0,close:this.safeNumber(r,"last"),last:this.safeNumber(r,"last"),previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeNumber(r,"volume"),quoteVolume:void 0,info:r}}},{key:"fetchOrderBook",value:function(){var e=a(i.mark((function e(t){var r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:{},e.next=4,this.loadMarkets();case 4:return a=this.market(t),s={market:a.id},void 0!==r&&(s.limit=r),e.next=9,this.publicGetOrderBook(this.extend(s,n));case 9:return o=e.sent,u=this.safeValue(o,"data",{}),c=this.safeTimestamp(u,"timestamp"),e.abrupt("return",this.parseOrderBook(u,c));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrderBooks",value:function(){var e=a(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p,v=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=v.length>0&&void 0!==v[0]?v[0]:void 0,r=v.length>1&&void 0!==v[1]?v[1]:void 0,n=v.length>2&&void 0!==v[2]?v[2]:{},e.next=5,this.loadMarkets();case 5:return void 0===t&&(t=this.symbols),a=this.marketIds(t),s={markets:a},void 0!==r&&(s.limit=r),e.next=11,this.publicGetOrderBookMulti(this.extend(s,n));case 11:for(o=e.sent,u=this.safeValue(o,"data",[]),c={},d=0;d<u.length;d++)h=u[d],l=this.safeString(h,"market"),f=this.safeSymbol(l),p=this.safeTimestamp(h,"timestamp"),c[f]=this.parseOrderBook(h,p);return e.abrupt("return",c);case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTrades",value:function(){var e=a(i.mark((function e(t){var r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={market:s.id},void 0!==n&&(o.limit=n),e.next=10,this.publicGetTrades(this.extend(o,a));case 10:return u=e.sent,c=this.safeValue(u,"data"),e.abrupt("return",this.parseTrades(c,s,r,n));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeValue(e,"side");"bid"===r?r="buy":"ask"===r&&(r="sell");var i=this.safeValue(e,"market"),n=this.safeSymbol(i,t),a=this.safeTimestamp(e,"created_on");return void 0===a&&(a=this.parse8601(this.safeString(e,"created_at"))),{info:e,timestamp:a,datetime:this.iso8601(a),symbol:n,id:this.safeString(e,"id"),order:void 0,type:"limit",takerOrMaker:void 0,side:r,price:this.safeNumber(e,"price"),amount:this.safeNumber(e,"volume"),cost:void 0,fee:void 0}}},{key:"fetchTime",value:function(){var e=a(i.mark((function e(){var t,r,n=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},e.next=3,this.publicGetTimestamp(t);case 3:return r=e.sent,e.abrupt("return",this.safeTimestamp(r,"data"));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchAllTradingFees",value:function(){var e=a(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:{},e.next=3,this.publicGetFeesTrading(t);case 3:for(r=e.sent,n=this.safeValue(r,"data"),a={},s=0;s<n.length;s++)o=n[s],u=this.safeValue(o,"ask_fee",{}),c=this.safeValue(o,"bid_fee",{}),d=this.safeString(o,"market"),h=this.safeSymbol(d),a[h]={info:o,symbol:h,maker:this.safeNumber(u,"value"),taker:this.safeNumber(c,"value")};return e.abrupt("return",a);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchKey",value:function(){var e=a(i.mark((function e(){var t,r,n=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},e.next=3,this.privateGetKey(t);case 3:return r=e.sent,e.abrupt("return",this.safeValue(r,"data"));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=a(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetMembersMe(t);case 5:for(r=e.sent,n=this.safeValue(r,"data"),a=this.safeValue(n,"accounts"),s={info:r},o=0;o<a.length;o++)u=a[o],c=this.safeValue(u,"currency"),d=this.safeCurrencyCode(c),(h=this.account()).free=this.safeString(u,"balance"),h.used=this.safeString(u,"locked"),s[d]=h;return e.abrupt("return",this.parseBalance(s,!1));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=a(i.mark((function e(t,r,n,a){var s,o,u,c,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=l.length>4&&void 0!==l[4]?l[4]:void 0,o=l.length>5&&void 0!==l[5]?l[5]:{},e.next=4,this.loadMarkets();case 4:return u=this.market(t),c={market:u.id,side:n,ord_type:r,volume:this.amountToPrecision(t,a)},"limit"===r&&(c.price=this.priceToPrecision(t,s)),e.next=9,this.privatePostOrders(this.extend(c,o));case 9:return d=e.sent,h=this.safeValue(d,"data"),e.abrupt("return",this.parseOrder(h,u));case 12:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=a(i.mark((function e(t){var r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:{},a=t,Array.isArray(t)||(a=[t]),e.next=6,this.loadMarkets();case 6:return s=void 0,void 0!==r&&(s=this.market(r)),o={ids:a},e.next=11,this.privateGetOrders(this.extend(o,n));case 11:if(u=e.sent,c=this.safeValue(u,"data"),d=c.length,void 0!==c){e.next=16;break}throw new x(this.id+" could not found matching order");case 16:if(!Array.isArray(t)){e.next=18;break}return e.abrupt("return",this.parseOrders(c,s));case 18:if(0!==d){e.next=20;break}throw new x(this.id+" could not found matching order");case 20:return e.abrupt("return",this.parseOrder(c[0],s));case 21:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=a(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:void 0,a=o.length>3&&void 0!==o[3]?o[3]:{},s={states:["wait"]},e.next=7,this.fetchOrders(t,r,n,this.extend(s,a));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=a(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:void 0,a=o.length>3&&void 0!==o[3]?o[3]:{},s={states:["done","cancel"]},e.next=7,this.fetchOrders(t,r,n,this.extend(s,a));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrders",value:function(){var e=a(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p,v,g,y=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=y.length>0&&void 0!==y[0]?y[0]:void 0,r=y.length>1&&void 0!==y[1]?y[1]:void 0,n=y.length>2&&void 0!==y[2]?y[2]:void 0,a=y.length>3&&void 0!==y[3]?y[3]:{},void 0!==t){e.next=6;break}throw new m(this.id+" fetchOrders() requires a `symbol` argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.market(t),o=this.safeValue(a,"states",["wait","done","cancel"]),u=this.omit(a,"states"),c={market:s.id,states:o,need_price:"True"},void 0!==n&&(c.limit=n),e.next=15,this.privateGetOrdersFilter(this.extend(c,u));case 15:for(d=e.sent,h=this.safeValue(d,"data",[]),l=[],f=0;f<h.length;f++)p=this.safeValue(h[f],"orders",[]),v=this.parseOrderStatus(this.safeValue(h[f],"state")),g=this.parseOrders(p,s,r,n,{status:v}),l=this.arrayConcat(l,g);return e.abrupt("return",l);case 20:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.parseOrderStatus(this.safeValue(e,"state")),i=this.safeString2(e,"market","market_id"),n=this.safeSymbol(i,t),a=this.safeTimestamp(e,"created_on");return void 0===a&&(a=this.parse8601(this.safeString(e,"created_at"))),this.safeOrder({info:e,id:this.safeString(e,"id"),clientOrderId:void 0,timestamp:a,datetime:this.iso8601(a),lastTradeTimestamp:void 0,symbol:n,type:this.safeValue(e,"ord_type"),timeInForce:void 0,postOnly:void 0,side:this.safeValue(e,"side"),price:this.safeNumber(e,"price"),stopPrice:void 0,average:this.safeNumber(e,"avg_price"),amount:this.safeNumber(e,"volume"),remaining:this.safeNumber(e,"remaining_volume"),filled:this.safeNumber(e,"executed_volume"),status:r,cost:void 0,trades:void 0,fee:void 0})}},{key:"parseOrderStatus",value:function(e){return this.safeString({wait:"open",done:"closed",cancel:"canceled"},e,e)}},{key:"createOrders",value:function(){var e=a(i.mark((function e(t,r){var n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>2&&void 0!==c[2]?c[2]:{},e.next=3,this.loadMarkets();case 3:return a=this.market(t),s={market:a.id,orders:r},e.next=7,this.privatePostOrdersMulti(this.extend(s,n));case 7:return o=e.sent,u=o.data,e.abrupt("return",this.parseOrders(u));case 10:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=a(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.privatePostOrderDelete(this.extend({id:t},r));case 6:return n=e.sent,a=this.safeValue(n,"data"),e.abrupt("return",this.parseOrder(a));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cancelOrders",value:function(){var e=a(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.privatePostOrderDeleteMulti(this.extend({ids:t},r));case 6:return n=e.sent,a=this.safeValue(n,"data"),e.abrupt("return",this.parseOrders(a));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cancelAllOrders",value:function(){var e=a(i.mark((function e(){var t,r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>0&&void 0!==a[0]?a[0]:void 0,t=a.length>1&&void 0!==a[1]?a[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.privatePostOrdersClear(t);case 6:return r=e.sent,n=this.safeValue(r,"data"),e.abrupt("return",this.parseOrders(n));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,a=this.urls.api+"/"+this.version+"/"+this.implodeParams(e,i),s=this.omit(i,this.extractParams(e));if("public"===t)if("tickers_multi"===e||"order_book/multi"===e){for(var o="?",u=this.safeValue(i,"markets"),c=0;c<u.length;c++)o+="markets[]="+u[c]+"&";var d=this.safeValue(i,"limit");void 0!==d&&(o+="limit="+d),a+=o}else Object.keys(s).length&&(a+="?"+this.urlencode(s));else if("private"===t){this.checkRequiredCredentials();var h={uid:this.apiKey,data:s},l=this.jwt(h,this.encode(this.secret),"RS256");a+="?user_jwt="+l}return{url:a,method:r,body:n,headers:{"Content-Type":"application/json"}}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,u){if(void 0!==s){var c=this.safeString(s,"code"),d=this.safeString(s,"message");if(void 0!==c&&"0"!==c){var h=this.id+" "+a;throw this.throwExactlyMatchedException(this.exceptions.codes,c,h),this.throwExactlyMatchedException(this.exceptions.exact,d,h),new p(h)}}}}]),r}(l)},function(e,t,r){"use strict";var i=r(1),n=r(2),a=r(6),s=r(3),o=r(4),u=r(5),c=r(166);e.exports=function(e){o(r,e);var t=u(r);function r(){return i(this,r),t.apply(this,arguments)}return n(r,[{key:"describe",value:function(){return this.deepExtend(a(s(r.prototype),"describe",this).call(this),{id:"okcoin",name:"OKCoin",countries:["CN","US"],hostname:"okcoin.com",pro:!0,urls:{logo:"https://user-images.githubusercontent.com/51840849/87295551-102fbf00-c50e-11ea-90a9-462eebba5829.jpg",www:"https://www.okcoin.com",doc:"https://www.okcoin.com/docs/en/",fees:"https://www.okcoin.com/coin-fees",referral:"https://www.okcoin.com/account/register?flag=activity&channelId=600001513"},fees:{trading:{taker:.002,maker:.001}},options:{fetchMarkets:["spot"]}})}}]),r}(c)},function(e,t,r){"use strict";var i=r(7),n=r(8),a=r(1),s=r(2),o=r(6),u=r(3),c=r(4),d=r(5),h=r(11),l=r(10).ExchangeError,f=r(12);e.exports=function(e){c(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(u(r.prototype),"describe",this).call(this),{id:"paymium",name:"Paymium",countries:["FR","EU"],rateLimit:2e3,version:"v1",has:{CORS:!0,fetchBalance:!0,fetchTicker:!0,fetchTrades:!0,fetchOrderBook:!0,createOrder:!0,cancelOrder:!0},urls:{logo:"https://user-images.githubusercontent.com/51840849/87153930-f0f02200-c2c0-11ea-9c0a-40337375ae89.jpg",api:"https://paymium.com/api",www:"https://www.paymium.com",fees:"https://www.paymium.com/page/help/fees",doc:["https://github.com/Paymium/api-documentation","https://www.paymium.com/page/developers"],referral:"https://www.paymium.com/page/sign-up?referral=eDAzPoRQFMvaAB8sf-qj"},api:{public:{get:["countries","data/{currency}/ticker","data/{currency}/trades","data/{currency}/depth","bitcoin_charts/{id}/trades","bitcoin_charts/{id}/depth"]},private:{get:["user","user/addresses","user/addresses/{address}","user/orders","user/orders/{uuid}","user/price_alerts","merchant/get_payment/{uuid}"],post:["user/addresses","user/orders","user/withdrawals","user/email_transfers","user/payment_requests","user/price_alerts","merchant/create_payment"],delete:["user/orders/{uuid}","user/orders/{uuid}/cancel","user/price_alerts/{id}"]}},markets:{"BTC/EUR":{id:"eur",symbol:"BTC/EUR",base:"BTC",quote:"EUR",baseId:"btc",quoteId:"eur"}},fees:{trading:{maker:.002,taker:.002}}})}},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetUser(t);case 5:for(r=e.sent,n={info:r},a=Object.keys(this.currencies),s=0;s<a.length;s++)o=a[s],u=this.currencyId(o),(c="balance_"+u)in r&&(d=this.account(),h="locked_"+u,d.free=this.safeString(r,c),d.used=this.safeString(r,h),n[o]=d);return e.abrupt("return",this.parseBalance(n,!1));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.loadMarkets();case 4:return n={currency:this.marketId(t)},e.next=7,this.publicGetDataCurrencyDepth(this.extend(n,r));case 7:return a=e.sent,e.abrupt("return",this.parseOrderBook(a,void 0,"bids","asks","price","amount"));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:{},e.next=3,this.loadMarkets();case 3:return n={currency:this.marketId(t)},e.next=6,this.publicGetDataCurrencyTicker(this.extend(n,r));case 6:return a=e.sent,s=this.safeTimestamp(a,"at"),o=this.safeNumber(a,"vwap"),u=this.safeNumber(a,"volume"),c=void 0,void 0!==u&&void 0!==o&&(c=u*o),d=this.safeNumber(a,"price"),e.abrupt("return",{symbol:t,timestamp:s,datetime:this.iso8601(s),high:this.safeNumber(a,"high"),low:this.safeNumber(a,"low"),bid:this.safeNumber(a,"bid"),bidVolume:void 0,ask:this.safeNumber(a,"ask"),askVolume:void 0,vwap:o,open:this.safeNumber(a,"open"),close:d,last:d,previousClose:void 0,change:void 0,percentage:this.safeNumber(a,"variation"),average:void 0,baseVolume:u,quoteVolume:c,info:a});case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e,t){var r=this.safeTimestamp(e,"created_at_int"),i=this.safeString(e,"uuid"),n=void 0;void 0!==t&&(n=t.symbol);var a=this.safeString(e,"side"),s=this.safeString(e,"price"),o="traded_"+t.base.toLowerCase(),u=this.safeString(e,o),c=this.parseNumber(s),d=this.parseNumber(u),h=this.parseNumber(f.stringMul(s,u));return{info:e,id:i,order:void 0,timestamp:r,datetime:this.iso8601(r),symbol:n,type:void 0,side:a,takerOrMaker:void 0,price:c,amount:d,cost:h,fee:void 0}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={currency:s.id},e.next=9,this.publicGetDataCurrencyTrades(this.extend(o,a));case 9:return u=e.sent,e.abrupt("return",this.parseTrades(u,s,r,n));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=d.length>4&&void 0!==d[4]?d[4]:void 0,o=d.length>5&&void 0!==d[5]?d[5]:{},e.next=4,this.loadMarkets();case 4:return u={type:this.capitalize(r)+"Order",currency:this.marketId(t),direction:n,amount:a},"market"!==r&&(u.price=s),e.next=8,this.privatePostUserOrders(this.extend(u,o));case 8:return c=e.sent,e.abrupt("return",{info:c,id:c.uuid});case 10:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:{},n={uuid:t},e.next=5,this.privateDeleteUserOrdersUuidCancel(this.extend(n,r));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.urls.api+"/"+this.version+"/"+this.implodeParams(e,i),o=this.omit(i,this.extractParams(e));if("public"===t)Object.keys(o).length&&(s+="?"+this.urlencode(o));else{this.checkRequiredCredentials();var u=this.nonce().toString(),c=u+s;if(n={"Api-Key":this.apiKey,"Api-Nonce":u},"POST"===r)Object.keys(o).length&&(c+=a=this.json(o),n["Content-Type"]="application/json");else if(Object.keys(o).length){var d=this.urlencode(o);c+=d,s+="?"+d}n["Api-Signature"]=this.hmac(this.encode(c),this.encode(this.secret))}return{url:s,method:r,body:a,headers:n}}},{key:"request",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:"public",n=c.length>2&&void 0!==c[2]?c[2]:"GET",a=c.length>3&&void 0!==c[3]?c[3]:{},s=c.length>4&&void 0!==c[4]?c[4]:void 0,o=c.length>5&&void 0!==c[5]?c[5]:void 0,e.next=7,this.fetch2(t,r,n,a,s,o);case 7:if(!("errors"in(u=e.sent))){e.next=10;break}throw new l(this.id+" "+this.json(u));case 10:return e.abrupt("return",u);case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(h)},function(e,t,r){"use strict";var i=r(7),n=r(8),a=r(1),s=r(2),o=r(6),u=r(3),c=r(4),d=r(5),h=r(11),l=r(10),f=l.ExchangeError,p=l.BadSymbol,v=l.AuthenticationError,m=l.InsufficientFunds,g=l.InvalidOrder,y=l.ArgumentsRequired,b=l.OrderNotFound,x=l.BadRequest,k=l.PermissionDenied,w=l.AccountSuspended,_=l.CancelPending,S=l.DDoSProtection,O=l.DuplicateOrderId,T=l.NotSupported,C=r(18),I=C.TICK_SIZE,M=C.ROUND,A=C.DECIMAL_PLACES;e.exports=function(e){c(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(u(r.prototype),"describe",this).call(this),{id:"phemex",name:"Phemex",countries:["CN"],rateLimit:100,version:"v1",certified:!1,pro:!0,hostname:"api.phemex.com",has:{cancelAllOrders:!0,cancelOrder:!0,createOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchCurrencies:!0,fetchDepositAddress:!0,fetchDeposits:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchTicker:!0,fetchTrades:!0,fetchWithdrawals:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/85225056-221eb600-b3d7-11ea-930d-564d2690e3f6.jpg",test:{v1:"https://testnet-api.phemex.com/v1",public:"https://testnet-api.phemex.com/exchange/public",private:"https://testnet-api.phemex.com"},api:{v1:"https://{hostname}/v1",public:"https://{hostname}/exchange/public",private:"https://{hostname}"},www:"https://phemex.com",doc:"https://github.com/phemex/phemex-api-docs",fees:"https://phemex.com/fees-conditions",referral:"https://phemex.com/register?referralCode=EDNVJ"},timeframes:{"1m":"60","3m":"180","5m":"300","15m":"900","30m":"1800","1h":"3600","2h":"7200","3h":"10800","4h":"14400","6h":"21600","12h":"43200","1d":"86400","1w":"604800","1M":"2592000"},api:{public:{get:["cfg/v2/products","products","nomics/trades","md/kline"]},v1:{get:["md/orderbook","md/trade","md/ticker/24hr","md/ticker/24hr/all","md/spot/ticker/24hr","md/spot/ticker/24hr/all","exchange/public/products"]},private:{get:["spot/orders/active","spot/orders","spot/wallets","exchange/spot/order","exchange/spot/order/trades","accounts/accountPositions","accounts/positions","orders/activeList","exchange/order/list","exchange/order","exchange/order/trade","phemex-user/users/children","phemex-user/wallets/v2/depositAddress","exchange/margins/transfer","exchange/wallets/confirm/withdraw","exchange/wallets/withdrawList","exchange/wallets/depositList","exchange/wallets/v2/depositAddress"],post:["spot/orders","orders","positions/assign","exchange/wallets/transferOut","exchange/wallets/transferIn","exchange/margins","exchange/wallets/createWithdraw","exchange/wallets/cancelWithdraw","exchange/wallets/createWithdrawAddress"],put:["spot/orders","orders/replace","positions/leverage","positions/riskLimit"],delete:["spot/orders","orders/cancel","orders","orders/all"]}},precisionMode:I,fees:{trading:{tierBased:!1,percentage:!0,taker:.001,maker:.001}},requiredCredentials:{apiKey:!0,secret:!0},exceptions:{exact:{412:x,6001:x,19999:x,10001:O,10002:b,10003:_,10004:_,10005:_,11001:m,11002:g,11003:m,11004:g,11005:m,11006:f,11007:f,11008:f,11009:f,11010:m,11011:g,11012:g,11013:g,11014:g,11015:g,11016:x,11017:f,11018:f,11019:f,11020:f,11021:f,11022:w,11023:f,11024:f,11025:x,11026:f,11027:p,11028:p,11029:f,11030:f,11031:S,11032:S,11033:O,11034:g,11035:g,11036:g,11037:g,11038:g,11039:g,11040:g,11041:g,11042:g,11043:g,11044:g,11045:g,11046:g,11047:g,11048:g,11049:g,11050:g,11051:g,11052:g,11053:g,11054:g,11055:g,11056:g,11057:g,11058:g,11059:g,11060:g,11061:_,11062:g,11063:g,11064:g,11065:g,11066:g,11067:g,11068:g,11069:f,11070:p,11071:g,11072:g,11073:g,11074:g,11075:g,11076:g,11077:g,11078:g,11079:g,11080:g,11081:g,11082:m,11083:g,11084:g,11085:O,11086:g,11087:g,11088:g,11089:g,11090:g,11091:g,11092:g,11093:g,11094:g,11095:g,11096:g,11097:x,11098:x,11099:f,11100:m,11101:m,11102:x,11103:x,11104:x,11105:m,11106:m,11107:f,11108:g,11109:g,11110:g,11111:g,11112:g,11113:x,11114:g,11115:g,30018:x,39996:k},broad:{"Failed to find api-key":v,"Missing required parameter":x,"API Signature verification failed":v}},options:{"x-phemex-request-expiry":60,createOrderByQuoteRequiresPrice:!0}})}},{key:"parseSafeNumber",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;if(void 0===e)return e;var t=(e=e.replace(",","")).split(" ");return this.safeNumber(t,0)}},{key:"parseSwapMarket",value:function(e){var t=this.safeString(e,"symbol"),r=this.safeString2(e,"baseCurrency","contractUnderlyingAssets"),i=this.safeString(e,"quoteCurrency"),n=this.safeCurrencyCode(r),a=this.safeCurrencyCode(i),s=n+"/"+a,o=this.safeStringLower(e,"type"),u=void 0,c=void 0,d=!1;this.safeString(e,"settlementCurrency")!==i&&(d=!0);var h=!d,l={amount:this.safeNumber(e,"lotSize"),price:this.safeNumber(e,"tickSize")},f=this.safeInteger(e,"priceScale"),p=this.safeInteger(e,"ratioScale"),v=this.safeInteger(e,"valueScale"),m=this.safeNumber(e,"minPriceEp"),g=this.safeNumber(e,"maxPriceEp"),y=this.safeNumber(e,"makerFeeRateEr"),b=this.safeNumber(e,"takerFeeRateEr");void 0!==y&&(c=this.fromEn(y,p,1e-8)),void 0!==b&&(u=this.fromEn(b,p,1e-8));var x={amount:{min:l.amount,max:void 0},price:{min:this.fromEn(m,f,l.price),max:this.fromEn(g,f,l.price)},cost:{min:void 0,max:this.parseSafeNumber(this.safeString(e,"maxOrderQty"))}};return{id:t,symbol:s,base:n,quote:a,baseId:r,quoteId:i,info:e,type:o,spot:!1,swap:!0,linear:h,inverse:d,active:"Listed"===this.safeString(e,"status"),taker:u,maker:c,priceScale:f,valueScale:v,ratioScale:p,precision:l,limits:x}}},{key:"parseSpotMarket",value:function(e){var t=this.safeStringLower(e,"type"),r=this.safeString(e,"symbol"),i=this.safeString(e,"quoteCurrency"),n=this.safeString(e,"baseCurrency"),a=this.safeNumber(e,"defaultTakerFee"),s=this.safeNumber(e,"defaultMakerFee"),o={amount:this.parseSafeNumber(this.safeString(e,"baseTickSize")),price:this.parseSafeNumber(this.safeString(e,"quoteTickSize"))},u={amount:{min:o.amount,max:this.parseSafeNumber(this.safeString(e,"maxBaseOrderSize"))},price:{min:o.price,max:void 0},cost:{min:this.parseSafeNumber(this.safeString(e,"minOrderValue")),max:this.parseSafeNumber(this.safeString(e,"maxOrderValue"))}},c=this.safeCurrencyCode(n),d=this.safeCurrencyCode(i);return{id:r,symbol:c+"/"+d,base:c,quote:d,baseId:n,quoteId:i,info:e,type:t,spot:!0,swap:!1,linear:undefined,inverse:undefined,active:"Listed"===this.safeString(e,"status"),taker:a,maker:s,precision:o,priceScale:8,valueScale:8,ratioScale:8,limits:u}}},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p,v,m,g=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=g.length>0&&void 0!==g[0]?g[0]:{},e.next=3,this.publicGetCfgV2Products(t);case 3:return r=e.sent,e.next=6,this.v1GetExchangePublicProducts(t);case 6:for(n=e.sent,a=this.safeValue(n,"data",[]),s=this.safeValue(r,"data",{}),o=this.safeValue(s,"products",[]),u=this.safeValue(s,"riskLimits",[]),c=this.indexBy(u,"symbol"),d=this.indexBy(a,"symbol"),h=[],l=0;l<o.length;l++)f=o[l],"perpetual"===this.safeStringLower(f,"type")?(p=this.safeString(f,"symbol"),v=this.safeValue(c,p,{}),f=this.extend(f,v),m=this.safeValue(d,p,{}),f=this.extend(f,m),f=this.parseSwapMarket(f)):f=this.parseSpotMarket(f),h.push(f);return e.abrupt("return",h);case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchCurrencies",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p,v,m,g,y=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=y.length>0&&void 0!==y[0]?y[0]:{},e.next=3,this.publicGetCfgV2Products(t);case 3:for(r=e.sent,n=this.safeValue(r,"data",{}),a=this.safeValue(n,"currencies",[]),s={},o=0;o<a.length;o++)u=a[o],c=this.safeString(u,"currency"),d=this.safeString(u,"name"),h=this.safeCurrencyCode(c),l=this.safeInteger(u,"valueScale"),f=this.safeNumber(u,"minValueEv"),p=this.safeNumber(u,"maxValueEv"),v=void 0,m=void 0,g=void 0,void 0!==l&&(g=Math.pow(10,-l),g=parseFloat(this.decimalToPrecision(g,M,1e-8,this.precisionMode)),void 0!==f&&(v=parseFloat(this.decimalToPrecision(f*g,M,1e-8,this.precisionMode))),void 0!==p&&(m=parseFloat(this.decimalToPrecision(p*g,M,1e-8,this.precisionMode)))),s[h]={id:c,info:u,code:h,name:d,active:void 0,fee:void 0,precision:g,limits:{amount:{min:v,max:m},withdraw:{min:void 0,max:void 0}},valueScale:l};return e.abrupt("return",s);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseBidAsk",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;if(void 0===i)throw new y(this.id+" parseBidAsk() requires a market argument");var n=this.safeNumber(e,r);return i.spot&&(n=this.fromEv(n,i)),[this.fromEp(this.safeNumber(e,t),i),n]}},{key:"parseOrderBook",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"bids",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"asks",n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:void 0,o={timestamp:t,datetime:this.iso8601(t),nonce:void 0},u=[r,i],c=0;c<u.length;c++){for(var d=u[c],h=[],l=this.safeValue(e,d),f=0;f<l.length;f++)h.push(this.parseBidAsk(l[f],n,a,s));o[d]=h}return o[r]=this.sortBy(o[r],0,!0),o[i]=this.sortBy(o[i],0),o}},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h.length>1&&void 0!==h[1]?h[1]:void 0,r=h.length>2&&void 0!==h[2]?h[2]:{},e.next=4,this.loadMarkets();case 4:return n=this.market(t),a={symbol:n.id},e.next=8,this.v1GetMdOrderbook(this.extend(a,r));case 8:return s=e.sent,o=this.safeValue(s,"result",{}),u=this.safeValue(o,"book",{}),c=this.safeIntegerProduct(o,"timestamp",1e-6),(d=this.parseOrderBook(u,c,"bids","asks",0,1,n)).nonce=this.safeInteger(o,"sequence"),e.abrupt("return",d);case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"toEn",value:function(e,t,r){return parseInt(this.decimalToPrecision(e*Math.pow(10,t),M,r,A))}},{key:"toEv",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return void 0===e||void 0===t?e:this.toEn(e,t.valueScale,0)}},{key:"toEp",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return void 0===e||void 0===t?e:this.toEn(e,t.priceScale,0)}},{key:"fromEn",value:function(e,t,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;return void 0===e?e:(i=void 0===i?this.precisionMode:i,parseFloat(this.decimalToPrecision(e*Math.pow(10,-t),M,r,i)))}},{key:"fromEp",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return void 0===e||void 0===t?e:this.fromEn(e,t.priceScale,t.precision.price)}},{key:"fromEv",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return void 0===e||void 0===t?e:t.spot?this.fromEn(e,t.valueScale,t.precision.amount):this.fromEn(e,t.valueScale,1/Math.pow(10,t.valueScale))}},{key:"fromEr",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return void 0===e||void 0===t?e:this.fromEn(e,t.ratioScale,1e-8)}},{key:"parseOHLCV",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0;return r=void 0!==t&&t.spot?this.fromEv(this.safeNumber(e,7),t):this.safeInteger(e,7),[this.safeTimestamp(e,0),this.fromEp(this.safeNumber(e,3),t),this.fromEp(this.safeNumber(e,4),t),this.fromEp(this.safeNumber(e,5),t),this.fromEp(this.safeNumber(e,6),t),r]}},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=p.length>1&&void 0!==p[1]?p[1]:"1m",n=p.length>2&&void 0!==p[2]?p[2]:void 0,a=p.length>3&&void 0!==p[3]?p[3]:void 0,s=p.length>4&&void 0!==p[4]?p[4]:{},o={resolution:this.timeframes[r]},u=this.parseTimeframe(r),c=this.seconds(),void 0===n){e.next=14;break}void 0===a&&(a=2e3),n=parseInt(n/1e3),o.from=n,o.to=Math.min(c,this.sum(n,u*a)),e.next=21;break;case 14:if(void 0===a){e.next=20;break}a=Math.min(a,2e3),o.from=c-u*this.sum(a,1),o.to=c,e.next=21;break;case 20:throw new y(this.id+" fetchOHLCV() requires a since argument, or a limit argument, or both");case 21:return e.next=23,this.loadMarkets();case 23:return d=this.market(t),o.symbol=d.id,e.next=27,this.publicGetMdKline(this.extend(o,s));case 27:return h=e.sent,l=this.safeValue(h,"data",{}),f=this.safeValue(l,"rows",[]),e.abrupt("return",this.parseOHLCVs(f,d,r,n,a));case 31:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"symbol"),i=this.safeSymbol(r,t),n=this.safeIntegerProduct(e,"timestamp",1e-6),a=this.fromEp(this.safeNumber(e,"lastEp"),t),s=this.fromEp(this.safeNumber(e,"turnoverEv"),t),o=this.safeNumber(e,"volume");void 0===o&&(o=this.fromEv(this.safeNumber(e,"volumeEv")));var u=void 0;void 0!==t&&t.spot&&(u=this.vwap(o,s));var c=void 0,d=void 0,h=void 0,l=this.fromEp(this.safeNumber(e,"openEp"),t);void 0!==l&&void 0!==a&&(c=a-l,l>0&&(d=c/l*100),h=this.sum(l,a)/2);var f={symbol:i,timestamp:n,datetime:this.iso8601(n),high:this.fromEp(this.safeNumber(e,"highEp"),t),low:this.fromEp(this.safeNumber(e,"lowEp"),t),bid:this.fromEp(this.safeNumber(e,"bidEp"),t),bidVolume:void 0,ask:this.fromEp(this.safeNumber(e,"askEp"),t),askVolume:void 0,vwap:u,open:l,close:a,last:a,previousClose:void 0,change:c,percentage:d,average:h,baseVolume:o,quoteVolume:s,info:e};return f}},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={symbol:n.id},s=n.spot?"v1GetMdSpotTicker24hr":"v1GetMdTicker24hr",e.next=8,this[s](this.extend(a,r));case 8:return o=e.sent,u=this.safeValue(o,"result",{}),e.abrupt("return",this.parseTicker(u,n));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={symbol:s.id},e.next=9,this.v1GetMdTrade(this.extend(o,a));case 9:return u=e.sent,c=this.safeValue(u,"result",{}),d=this.safeValue(c,"trades",[]),e.abrupt("return",this.parseTrades(d,s,r,n));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0,i=void 0,n=void 0,a=void 0,s=void 0,o=void 0,u=void 0,c=void 0,d=this.safeString(e,"symbol"),h=(t=this.safeMarket(d,t)).symbol,l=void 0,f=void 0;if(Array.isArray(e)){var p=e.length;n=this.safeIntegerProduct(e,0,1e-6),p>4&&(a=this.safeString(e,p-4)),s=this.safeStringLower(e,p-3),r=this.fromEp(this.safeNumber(e,p-2),t),i=this.fromEv(this.safeNumber(e,p-1),t),t.spot&&void 0!==r&&void 0!==i&&(o=r*i)}else{n=this.safeIntegerProduct(e,"transactTimeNs",1e-6),a=this.safeString2(e,"execId","execID"),l=this.safeString(e,"orderID"),s=this.safeStringLower(e,"side"),u=this.parseOrderType(this.safeString(e,"ordType"));var v=this.safeString(e,"execStatus");"MakerFill"===v&&(f="maker"),r=this.fromEp(this.safeNumber(e,"execPriceEp"),t),i=this.fromEv(this.safeNumber(e,"execBaseQtyEv"),t),i=this.safeNumber(e,"execQty",i),o=this.fromEv(this.safeNumber2(e,"execQuoteQtyEv","execValueEv"),t);var m=this.fromEv(this.safeNumber(e,"execFeeEv"),t);if(void 0!==m){var g=void 0,y=this.safeNumber(e,"feeRateEr");y<0?(y=Math.abs(y),g=-(g=this.fromEr(y,t))):g=this.fromEr(y,t);var b=void 0;if(t.spot)b="buy"===s?t.base:t.quote;else{var x=this.safeValue(t,"info");if(void 0!==x){var k=this.safeString(x,"settlementCurrency");b=this.safeCurrencyCode(k)}}c={cost:m,rate:g,currency:b}}}return{info:e,id:a,symbol:h,timestamp:n,datetime:this.iso8601(n),order:l,type:u,side:s,takerOrMaker:f,price:r,amount:i,cost:o,fee:c}}},{key:"parseSpotBalance",value:function(e){for(var t={info:e},r=this.safeValue(e,"data",[]),i=0;i<r.length;i++){var n=r[i],a=this.safeString(n,"currency"),s=this.safeCurrencyCode(a),o=this.safeValue(this.currencies,s,{}),u=this.safeInteger(o,"valueScale",8),c=this.account(),d=this.safeNumber(n,"balanceEv"),h=this.safeNumber(n,"lockedTradingBalanceEv"),l=this.safeNumber(n,"lockedWithdrawEv"),f=this.fromEn(d,u,u,A),p=this.fromEn(h,u,u,A),v=this.fromEn(l,u,u,A),m=this.sum(p,v);c.total=f,c.used=m,t[s]=c}return this.parseBalance(t)}},{key:"parseSwapBalance",value:function(e){var t={info:e},r=this.safeValue(e,"data",{}),i=this.safeValue(r,"account",{}),n=this.safeString(i,"currency"),a=this.safeCurrencyCode(n),s=this.currency(a),o=this.account(),u=this.safeNumber(i,"accountBalanceEv"),c=this.safeNumber(i,"totalUsedBalanceEv"),d=this.safeInteger(s,"valueScale",8);return o.total=this.fromEn(u,d,d,A),o.used=this.fromEn(c,d,d,A),t[a]=o,this.parseBalance(t)}},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:{},e.next=3,this.loadMarkets();case 3:if(r=this.safeString2(this.options,"defaultType","fetchBalance","spot"),n=this.safeString(t,"type",r),a="privateGetSpotWallets",s={},"swap"!==n){e.next=19;break}if(void 0===(o=this.safeString(t,"code"))){e.next=15;break}u=this.currency(o),s.currency=u.id,t=this.omit(t,"code"),e.next=18;break;case 15:if(void 0!==this.safeString(t,"currency")){e.next=18;break}throw new y(this.id+" fetchBalance() requires a code parameter or a currency parameter for "+n+" type");case 18:a="privateGetAccountsAccountPositions";case 19:return t=this.omit(t,"type"),e.next=22,this[a](this.extend(s,t));case 22:return c=e.sent,d="swap"===n?this.parseSwapBalance(c):this.parseSpotBalance(c),e.abrupt("return",d);case 25:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({Created:"open",Untriggered:"open",Deactivated:"closed",Triggered:"open",Rejected:"rejected",New:"open",PartiallyFilled:"open",Filled:"closed",Canceled:"canceled"},e,e)}},{key:"parseOrderType",value:function(e){return this.safeString({Limit:"limit",Market:"market"},e,e)}},{key:"parseTimeInForce",value:function(e){return this.safeString({GoodTillCancel:"GTC",PostOnly:"PO",ImmediateOrCancel:"IOC",FillOrKill:"FOK"},e,e)}},{key:"parseSpotOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"orderID"),i=this.safeString(e,"clOrdID");void 0!==i&&i.length<1&&(i=void 0);var n=this.safeString(e,"symbol"),a=this.safeSymbol(n,t),s=this.fromEp(this.safeNumber(e,"priceEp"),t);0===s&&(s=void 0);var o=this.fromEv(this.safeNumber(e,"baseQtyEv"),t),u=this.fromEv(this.safeNumber(e,"leavesBaseQtyEv"),t),c=this.fromEv(this.safeNumber(e,"cumBaseQtyEv"),t),d=this.fromEv(this.safeNumber(e,"quoteQtyEv"),t),h=this.fromEp(this.safeNumber(e,"avgPriceEp"),t),l=this.parseOrderStatus(this.safeString(e,"ordStatus")),f=this.safeStringLower(e,"side"),p=this.parseOrderType(this.safeString(e,"ordType")),v=this.safeIntegerProduct2(e,"actionTimeNs","createTimeNs",1e-6),m=void 0,g=this.fromEv(this.safeNumber(e,"cumFeeEv"),t);void 0!==g&&(m={cost:g,currency:void 0}),void 0===c&&void 0!==o&&void 0!==u&&(c=Math.min(0,o-u));var y=this.parseTimeInForce(this.safeString(e,"timeInForce")),b=this.fromEp(this.safeNumber(e,"stopPxEp",t)),x="PO"===y;return{info:e,id:r,clientOrderId:i,timestamp:v,datetime:this.iso8601(v),lastTradeTimestamp:void 0,symbol:a,type:p,timeInForce:y,postOnly:x,side:f,price:s,stopPrice:b,amount:o,cost:d,average:h,filled:c,remaining:u,status:l,fee:m,trades:void 0}}},{key:"parseSwapOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"orderID"),i=this.safeString(e,"clOrdID");void 0!==i&&i.length<1&&(i=void 0);var n=this.safeString(e,"symbol"),a=this.safeSymbol(n,t),s=this.parseOrderStatus(this.safeString(e,"ordStatus")),o=this.safeStringLower(e,"side"),u=this.parseOrderType(this.safeString(e,"orderType")),c=this.fromEp(this.safeNumber(e,"priceEp"),t),d=this.safeNumber(e,"orderQty"),h=this.safeNumber(e,"cumQty"),l=this.safeNumber(e,"leavesQty"),f=this.safeIntegerProduct(e,"actionTimeNs",1e-6),p=this.safeNumber(e,"cumValue"),v=this.safeIntegerProduct(e,"transactTimeNs",1e-6);0===v&&(v=void 0);var m=this.parseTimeInForce(this.safeString(e,"timeInForce")),g=this.safeNumber(e,"stopPx"),y="PO"===m;return{info:e,id:r,clientOrderId:i,datetime:this.iso8601(f),timestamp:f,lastTradeTimestamp:v,symbol:a,type:u,timeInForce:m,postOnly:y,side:o,price:c,stopPrice:g,amount:d,filled:h,remaining:l,cost:p,average:void 0,status:s,fee:void 0,trades:void 0}}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return"closedPnl"in e?this.parseSwapOrder(e,t):this.parseSpotOrder(e,t)}},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,u,c,d,h,l,f,p,v,m=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=m.length>4&&void 0!==m[4]?m[4]:void 0,o=m.length>5&&void 0!==m[5]?m[5]:{},e.next=4,this.loadMarkets();case 4:if(u=this.market(t),n=this.capitalize(n),r=this.capitalize(r),c={symbol:u.id,side:n,ordType:r},!u.spot){e.next=29;break}if(d=this.safeValue(o,"qtyType","ByBase"),"Market"!==r&&"Stop"!==r&&"MarketIfTouched"!==r||void 0!==s&&(d="ByQuote"),c.qtyType=d,"ByQuote"!==d){e.next=26;break}if(h=this.safeNumber(o,"cost"),o=this.omit(o,"cost"),!this.options.createOrderByQuoteRequiresPrice){e.next=22;break}if(void 0===s){e.next=20;break}h=a*s,e.next=22;break;case 20:if(void 0!==h){e.next=22;break}throw new y(this.id+" createOrder() "+d+" requires a price argument or a cost parameter");case 22:h=void 0===h?a:h,c.quoteQtyEv=this.toEp(h,u),e.next=27;break;case 26:c.baseQtyEv=this.toEv(a,u);case 27:e.next=30;break;case 29:u.swap&&(c.orderQty=parseInt(a));case 30:return"Limit"===r&&(c.priceEp=this.toEp(s,u)),void 0!==(l=this.safeNumber2(o,"stopPx","stopPrice"))&&(c.stopPxEp=this.toEp(l,u)),o=this.omit(o,["stopPx","stopPrice"]),f=u.spot?"privatePostSpotOrders":"privatePostOrders",e.next=37,this[f](this.extend(c,o));case 37:return p=e.sent,v=this.safeValue(p,"data",{}),e.abrupt("return",this.parseOrder(v,u));case 40:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:{},void 0!==r){e.next=4;break}throw new y(this.id+" cancelOrder() requires a symbol argument");case 4:return e.next=6,this.loadMarkets();case 6:return a=this.market(r),s={symbol:a.id},o=this.safeString2(n,"clientOrderId","clOrdID"),n=this.omit(n,["clientOrderId","clOrdID"]),void 0!==o?s.clOrdID=o:s.orderID=t,u=a.spot?"privateDeleteSpotOrders":"privateDeleteOrdersCancel",e.next=14,this[u](this.extend(s,n));case 14:return c=e.sent,d=this.safeValue(c,"data",{}),e.abrupt("return",this.parseOrder(d,a));case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cancelAllOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:{},e.next=4,this.loadMarkets();case 4:if(n={},a=void 0,void 0===t){e.next=11;break}if((a=this.market(t)).swap){e.next=10;break}throw new T(this.id+" cancelAllOrders() supports swap market type orders only");case 10:n.symbol=a.id;case 11:return e.next=13,this.privateDeleteOrdersAll(this.extend(n,r));case 13:return e.abrupt("return",e.sent);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=l.length>1&&void 0!==l[1]?l[1]:void 0,n=l.length>2&&void 0!==l[2]?l[2]:{},void 0!==r){e.next=4;break}throw new y(this.id+" fetchOrder() requires a symbol argument");case 4:return e.next=6,this.loadMarkets();case 6:return a=this.market(r),s=a.spot?"privateGetSpotOrdersActive":"privateGetExchangeOrder",o={symbol:a.id},u=this.safeString2(n,"clientOrderId","clOrdID"),n=this.omit(n,["clientOrderId","clOrdID"]),void 0!==u?o.clOrdID=u:o.orderID=t,e.next=14,this[s](this.extend(o,n));case 14:if(c=e.sent,d=this.safeValue(c,"data",{}),h=d,!Array.isArray(d)){e.next=26;break}if(!(d.length<1)){e.next=25;break}if(void 0===u){e.next=24;break}throw new b(this.id+" fetchOrder "+r+" order with clientOrderId "+u+" not found");case 24:throw new b(this.id+" fetchOrder "+r+" order with id "+t+" not found");case 25:h=this.safeValue(d,0,{});case 26:return e.abrupt("return",this.parseOrder(h,a));case 27:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=l.length>0&&void 0!==l[0]?l[0]:void 0,r=l.length>1&&void 0!==l[1]?l[1]:void 0,n=l.length>2&&void 0!==l[2]?l[2]:void 0,a=l.length>3&&void 0!==l[3]?l[3]:{},void 0!==t){e.next=6;break}throw new y(this.id+" fetchOrders() requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.market(t),o=s.spot?"privateGetSpotOrders":"privateGetExchangeOrderList",u={symbol:s.id},void 0!==r&&(u.start=r),void 0!==n&&(u.limit=n),e.next=15,this[o](this.extend(u,a));case 15:return c=e.sent,d=this.safeValue(c,"data",{}),h=this.safeValue(d,"rows",[]),e.abrupt("return",this.parseOrders(h,s,r,n));case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=l.length>0&&void 0!==l[0]?l[0]:void 0,r=l.length>1&&void 0!==l[1]?l[1]:void 0,n=l.length>2&&void 0!==l[2]?l[2]:void 0,a=l.length>3&&void 0!==l[3]?l[3]:{},void 0!==t){e.next=6;break}throw new y(this.id+" fetchOpenOrders() requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.market(t),o=s.spot?"privateGetSpotOrders":"privateGetOrdersActiveList",u={symbol:s.id},e.prev=11,e.next=14,this[o](this.extend(u,a));case 14:if(c=e.sent,d=this.safeValue(c,"data",{}),!Array.isArray(d)){e.next=20;break}return e.abrupt("return",this.parseOrders(d,s,r,n));case 20:return h=this.safeValue(d,"rows",[]),e.abrupt("return",this.parseOrders(h,s,r,n));case 22:e.next=27;break;case 24:return e.prev=24,e.t0=e.catch(11),e.abrupt("return",[]);case 27:case"end":return e.stop()}}),e,this,[[11,24]])})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=l.length>0&&void 0!==l[0]?l[0]:void 0,r=l.length>1&&void 0!==l[1]?l[1]:void 0,n=l.length>2&&void 0!==l[2]?l[2]:void 0,a=l.length>3&&void 0!==l[3]?l[3]:{},void 0!==t){e.next=6;break}throw new y(this.id+" fetchClosedOrders() requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.market(t),o=s.spot?"privateGetExchangeSpotOrder":"privateGetExchangeOrderList",u={symbol:s.id},void 0!==r&&(u.start=r),void 0!==n&&(u.limit=n),e.next=15,this[o](this.extend(u,a));case 15:if(c=e.sent,d=this.safeValue(c,"data",{}),!Array.isArray(d)){e.next=21;break}return e.abrupt("return",this.parseOrders(d,s,r,n));case 21:return h=this.safeValue(d,"rows",[]),e.abrupt("return",this.parseOrders(h,s,r,n));case 23:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=l.length>0&&void 0!==l[0]?l[0]:void 0,r=l.length>1&&void 0!==l[1]?l[1]:void 0,n=l.length>2&&void 0!==l[2]?l[2]:void 0,a=l.length>3&&void 0!==l[3]?l[3]:{},void 0!==t){e.next=6;break}throw new y(this.id+" fetchClosedOrders() requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.market(t),o=s.spot?"privateGetExchangeSpotOrderTrades":"privateGetExchangeOrderTrade",u={symbol:s.id},void 0!==r&&(u.start=r),s.swap&&void 0!==n&&(u.limit=n),e.next=15,this[o](this.extend(u,a));case 15:return c=e.sent,d=this.safeValue(c,"data",{}),h=this.safeValue(d,"rows",[]),e.abrupt("return",this.parseTrades(h,s,r,n));case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchDepositAddress",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.currency(t),a={currency:n.id},e.next=7,this.privateGetPhemexUserWalletsV2DepositAddress(this.extend(a,r));case 7:return s=e.sent,o=this.safeValue(s,"data",{}),u=this.safeString(o,"address"),c=this.safeString(o,"tag"),this.checkAddress(u),e.abrupt("return",{currency:t,address:u,tag:c,info:s});case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchDeposits",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:void 0,r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},e.next=6,this.loadMarkets();case 6:return s=void 0,void 0!==t&&(s=this.currency(t)),e.next=10,this.privateGetExchangeWalletsDepositList(a);case 10:return o=e.sent,u=this.safeValue(o,"data",{}),e.abrupt("return",this.parseTransactions(u,s,r,n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchWithdrawals",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:void 0,r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},e.next=6,this.loadMarkets();case 6:return s=void 0,void 0!==t&&(s=this.currency(t)),e.next=10,this.privateGetExchangeWalletsWithdrawList(a);case 10:return o=e.sent,u=this.safeValue(o,"data",{}),e.abrupt("return",this.parseTransactions(u,s,r,n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTransactionStatus",value:function(e){return this.safeString({Success:"ok",Succeed:"ok"},e,e)}},{key:"parseTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),i=this.safeString(e,"address"),n=void 0,a=this.safeString(e,"txHash"),s=this.safeString(e,"currency"),o=(t=this.safeCurrency(s,t)).code,u=this.safeInteger2(e,"createdAt","submitedAt"),c=this.safeStringLower(e,"type"),d=this.fromEn(this.safeNumber(e,"feeEv"),t.valueScale,t.precision),h=void 0;void 0!==d&&(c="withdrawal",h={cost:d,currency:o});var l=this.parseTransactionStatus(this.safeString(e,"status")),f=this.fromEn(this.safeNumber(e,"amountEv"),t.valueScale,t.precision);return{info:e,id:r,txid:a,timestamp:u,datetime:this.iso8601(u),address:i,addressTo:i,addressFrom:void 0,tag:n,tagTo:n,tagFrom:void 0,type:c,amount:f,currency:o,status:l,updated:void 0,fee:h}}},{key:"fetchPositions",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.length>0&&void 0!==c[0]?c[0]:void 0,t=c.length>1&&void 0!==c[1]?c[1]:{},e.next=4,this.loadMarkets();case 4:if(r=this.safeString(t,"code"),n={},void 0!==r){e.next=12;break}if(void 0!==this.safeString(t,"currency")){e.next=10;break}throw new y(this.id+" fetchPositions() requires a currency parameter or a code parameter");case 10:e.next=15;break;case 12:a=this.currency(r),t=this.omit(t,"code"),n.currency=a.id;case 15:return e.next=17,this.privateGetAccountsAccountPositions(this.extend(n,t));case 17:return s=e.sent,o=this.safeValue(s,"data",{}),u=this.safeValue(o,"positions",[]),e.abrupt("return",u);case 21:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.omit(i,this.extractParams(e)),o="/"+this.implodeParams(e,i),u=o,c="";if("GET"!==r&&"DELETE"!==r&&"PUT"!==r||Object.keys(s).length&&(u+="?"+(c=this.urlencodeWithArrayRepeat(s))),"private"===t){this.checkRequiredCredentials();var d=this.seconds(),h=this.safeInteger(this.options,"x-phemex-request-expiry",60),l=this.sum(d,h),f=l.toString();n={"x-phemex-access-token":this.apiKey,"x-phemex-request-expiry":f};var p="";"POST"===r&&(a=p=this.json(i),n["Content-Type"]="application/json");var v=o+c+f+p;n["x-phemex-request-signature"]=this.hmac(this.encode(v),this.encode(this.secret))}return{url:u=this.implodeParams(this.urls.api[t],{hostname:this.hostname})+u,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,u){if(void 0!==s){var c=this.safeValue(s,"error",s),d=this.safeString(c,"code"),h=this.safeString(c,"msg");if(void 0!==d&&"0"!==d){var l=this.id+" "+a;throw this.throwExactlyMatchedException(this.exceptions.exact,d,l),this.throwBroadlyMatchedException(this.exceptions.broad,h,l),new f(l)}}}}]),r}(h)},function(e,t,r){"use strict";var i=r(21),n=r(7),a=r(8),s=r(1),o=r(2),u=r(6),c=r(3),d=r(4),h=r(5),l=r(11),f=r(10),p=f.ExchangeError,v=f.ExchangeNotAvailable,m=f.RequestTimeout,g=f.AuthenticationError,y=f.PermissionDenied,b=f.DDoSProtection,x=f.InsufficientFunds,k=f.OrderNotFound,w=f.InvalidOrder,_=f.AccountSuspended,S=f.CancelPending,O=f.InvalidNonce,T=f.OnMaintenance,C=f.BadSymbol,I=r(12);e.exports=function(e){d(r,e);var t=h(r);function r(){return s(this,r),t.apply(this,arguments)}return o(r,[{key:"describe",value:function(){return this.deepExtend(u(c(r.prototype),"describe",this).call(this),{id:"poloniex",name:"Poloniex",countries:["US"],rateLimit:1e3,certified:!1,pro:!0,has:{cancelOrder:!0,CORS:!1,createDepositAddress:!0,createMarketOrder:!1,createOrder:!0,editOrder:!0,fetchBalance:!0,fetchCurrencies:!0,fetchDepositAddress:!0,fetchDeposits:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrder:!0,fetchOpenOrders:!0,fetchOrderBook:!0,fetchOrderBooks:!0,fetchOrderTrades:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,fetchTradingFee:!0,fetchTradingFees:!0,fetchTransactions:!0,fetchWithdrawals:!0,cancelAllOrders:!0,withdraw:!0},timeframes:{"5m":300,"15m":900,"30m":1800,"2h":7200,"4h":14400,"1d":86400},urls:{logo:"https://user-images.githubusercontent.com/1294454/27766817-e9456312-5ee6-11e7-9b3c-b628ca5626a5.jpg",api:{public:"https://poloniex.com/public",private:"https://poloniex.com/tradingApi"},www:"https://www.poloniex.com",doc:"https://docs.poloniex.com",fees:"https://poloniex.com/fees",referral:"https://poloniex.com/signup?c=UBFZJRPJ"},api:{public:{get:["return24hVolume","returnChartData","returnCurrencies","returnLoanOrders","returnOrderBook","returnTicker","returnTradeHistory"]},private:{post:["buy","cancelLoanOffer","cancelOrder","cancelAllOrders","closeMarginPosition","createLoanOffer","generateNewAddress","getMarginPosition","marginBuy","marginSell","moveOrder","returnActiveLoans","returnAvailableAccountBalances","returnBalances","returnCompleteBalances","returnDepositAddresses","returnDepositsWithdrawals","returnFeeInfo","returnLendingHistory","returnMarginAccountSummary","returnOpenLoanOffers","returnOpenOrders","returnOrderTrades","returnOrderStatus","returnTradableBalances","returnTradeHistory","sell","toggleAutoRenew","transferBalance","withdraw"]}},fees:{trading:{feeSide:"get",maker:9e-4,taker:9e-4},funding:{}},limits:{amount:{min:1e-6,max:1e9},price:{min:1e-8,max:1e9},cost:{min:0,max:1e9}},precision:{amount:8,price:8},commonCurrencies:{AIR:"AirCoin",APH:"AphroditeCoin",BCC:"BTCtalkcoin",BDG:"Badgercoin",BTM:"Bitmark",CON:"Coino",GOLD:"GoldEagles",GPUC:"GPU",HOT:"Hotcoin",ITC:"Information Coin",KEY:"KEYCoin",PLX:"ParallaxCoin",REPV2:"REP",STR:"XLM",SOC:"SOCC",XAP:"API Coin",USDTTRON:"USDT",USDTETH:"USDT"},options:{limits:{cost:{min:{BTC:1e-4,ETH:1e-4,XMR:1e-4,USDT:1}}}},exceptions:{exact:{"You may only place orders that reduce your position.":w,"Invalid order number, or you are not the person who placed the order.":k,"Permission denied":y,"Connection timed out. Please try again.":m,"Internal error. Please try again.":v,"Currently in maintenance mode.":T,"Order not found, or you are not the person who placed it.":k,"Invalid API key/secret pair.":g,"Please do not make more than 8 API calls per second.":b,"Rate must be greater than zero.":w,"Invalid currency pair.":C,"Invalid currencyPair parameter.":C},broad:{"Total must be at least":w,"This account is frozen.":_,"Not enough":x,"Nonce must be greater":O,"You have already called cancelOrder or moveOrder on this order.":S,"Amount must be at least":w,"is either completed or does not exist":w,"Error pulling ":p}}})}},{key:"parseOHLCV",value:function(e){return[this.safeTimestamp(e,"date"),this.safeNumber(e,"open"),this.safeNumber(e,"high"),this.safeNumber(e,"low"),this.safeNumber(e,"close"),this.safeNumber(e,"quoteVolume")]}},{key:"fetchOHLCV",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,u,c,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:"5m",i=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:void 0,s=h.length>4&&void 0!==h[4]?h[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),u={currencyPair:o.id,period:this.timeframes[r]},void 0===i?(u.end=this.seconds(),u.start=void 0===a?u.end-this.parseTimeframe("1w"):u.end-a*this.parseTimeframe(r)):(u.start=parseInt(i/1e3),void 0!==a&&(c=this.sum(u.start,a*this.parseTimeframe(r)),u.end=c)),e.next=11,this.publicGetReturnChartData(this.extend(u,s));case 11:return d=e.sent,e.abrupt("return",this.parseOHLCVs(d,o,r,i,a));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"loadMarkets",value:function(){var e=a(n.mark((function e(){var t,i,a,s=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]&&s[0],i=s.length>1&&void 0!==s[1]?s[1]:{},e.next=4,u(c(r.prototype),"loadMarkets",this).call(this,t,i);case 4:return a=e.sent,(void 0===this.safeValue(this.options,"currenciesByNumericId")||t)&&(this.options.currenciesByNumericId=this.indexBy(this.currencies,"numericId")),e.abrupt("return",a);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMarkets",value:function(){var e=a(n.mark((function e(){var t,r,a,s,o,u,c,d,h,l,f,p,v,m,g,y,b,x,k=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=k.length>0&&void 0!==k[0]?k[0]:{},e.next=3,this.publicGetReturnTicker(t);case 3:for(r=e.sent,a=Object.keys(r),s=[],o=0;o<a.length;o++)u=a[o],c=r[u],d=u.split("_"),h=i(d,2),l=h[0],f=h[1],p=this.safeCurrencyCode(f),v=this.safeCurrencyCode(l),m=p+"/"+v,g=this.extend(this.limits,{cost:{min:this.safeValue(this.options.limits.cost.min,v)}}),y=this.safeString(c,"isFrozen"),b="1"!==y,x=this.safeInteger(c,"id"),s.push({id:u,numericId:x,symbol:m,baseId:f,quoteId:l,base:p,quote:v,active:b,limits:g,info:c});return e.abrupt("return",s);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,u,c,d,h,l=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:{},e.next=3,this.loadMarkets();case 3:return r={account:"all"},e.next=6,this.privatePostReturnCompleteBalances(this.extend(r,t));case 6:for(i=e.sent,a={info:i},s=Object.keys(i),o=0;o<s.length;o++)u=s[o],c=this.safeValue(i,u,{}),d=this.safeCurrencyCode(u),(h=this.account()).free=this.safeString(c,"available"),h.used=this.safeString(c,"onOrders"),a[d]=h;return e.abrupt("return",this.parseBalance(a,!1));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTradingFees",value:function(){var e=a(n.mark((function e(){var t,r,i=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privatePostReturnFeeInfo(t);case 5:return r=e.sent,e.abrupt("return",{info:r,maker:this.safeNumber(r,"makerFee"),taker:this.safeNumber(r,"takerFee"),withdraw:{},deposit:{}});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,i=u.length>2&&void 0!==u[2]?u[2]:{},e.next=4,this.loadMarkets();case 4:return a={currencyPair:this.marketId(t)},void 0!==r&&(a.depth=r),e.next=8,this.publicGetReturnOrderBook(this.extend(a,i));case 8:return s=e.sent,(o=this.parseOrderBook(s)).nonce=this.safeInteger(s,"seq"),e.abrupt("return",o);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrderBooks",value:function(){var e=a(n.mark((function e(){var t,r,a,s,o,u,c,d,h,l,f,p,v,m,g,y,b=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b.length>0&&void 0!==b[0]?b[0]:void 0,t=b.length>1&&void 0!==b[1]?b[1]:void 0,r=b.length>2&&void 0!==b[2]?b[2]:{},e.next=5,this.loadMarkets();case 5:return a={currencyPair:"all"},void 0!==t&&(a.depth=t),e.next=9,this.publicGetReturnOrderBook(this.extend(a,r));case 9:for(s=e.sent,o=Object.keys(s),u={},c=0;c<o.length;c++)d=o[c],h=void 0,d in this.markets_by_id?h=this.markets_by_id[d].symbol:(l=d.split("_"),f=i(l,2),p=f[0],v=f[1],m=this.safeCurrencyCode(v),g=this.safeCurrencyCode(p),h=m+"/"+g),(y=this.parseOrderBook(s[d])).nonce=this.safeInteger(s[d],"seq"),u[h]=y;return e.abrupt("return",u);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.milliseconds(),i=void 0;t&&(i=t.symbol);var n=void 0,a=void 0,s=void 0,o=this.safeNumber(e,"last"),u=this.safeNumber(e,"percentChange");return-1!==u&&(a=o-(n=o/this.sum(1,u)),s=this.sum(o,n)/2),{symbol:i,timestamp:r,datetime:this.iso8601(r),high:this.safeNumber(e,"high24hr"),low:this.safeNumber(e,"low24hr"),bid:this.safeNumber(e,"highestBid"),bidVolume:void 0,ask:this.safeNumber(e,"lowestAsk"),askVolume:void 0,vwap:void 0,open:n,close:o,last:o,previousClose:void 0,change:a,percentage:100*u,average:s,baseVolume:this.safeNumber(e,"quoteVolume"),quoteVolume:this.safeNumber(e,"baseVolume"),info:e}}},{key:"fetchTickers",value:function(){var e=a(n.mark((function e(){var t,r,a,s,o,u,c,d,h,l,f,p,v,m,g,y,b=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=b.length>0&&void 0!==b[0]?b[0]:void 0,r=b.length>1&&void 0!==b[1]?b[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetReturnTicker(r);case 6:for(a=e.sent,s=Object.keys(a),o={},u=0;u<s.length;u++)c=s[u],d=void 0,h=void 0,c in this.markets_by_id?(h=this.markets_by_id[c],d=h.symbol):(l=c.split("_"),f=i(l,2),p=f[0],v=f[1],m=this.safeCurrencyCode(v),g=this.safeCurrencyCode(p),h={symbol:d=m+"/"+g}),y=a[c],o[d]=this.parseTicker(y,h);return e.abrupt("return",this.filterByArray(o,"symbol",t));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchCurrencies",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,u,c,d,h,l,f,p=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.length>0&&void 0!==p[0]?p[0]:{},e.next=3,this.publicGetReturnCurrencies(t);case 3:for(r=e.sent,i=Object.keys(r),a={},s=0;s<i.length;s++)o=i[s],u=r[o],c=8,d=this.safeCurrencyCode(o),h=0===u.delisted&&!u.disabled,l=this.safeInteger(u,"id"),f=this.safeNumber(u,"txFee"),a[d]={id:o,numericId:l,code:d,info:u,name:u.name,active:h,fee:f,precision:c,limits:{amount:{min:Math.pow(10,-c),max:Math.pow(10,c)},withdraw:{min:f,max:Math.pow(10,c)}}};return e.abrupt("return",a);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return i=this.market(t),e.next=6,this.publicGetReturnTicker(r);case 6:return a=e.sent,s=a[i.id],e.abrupt("return",this.parseTicker(s,i));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString2(e,"globalTradeID","tradeID"),n=this.safeString(e,"orderNumber"),a=this.parse8601(this.safeString(e,"date")),s=void 0;if(!t&&"currencyPair"in e){var o=this.safeString(e,"currencyPair");if(o in this.markets_by_id)t=this.markets_by_id[o];else{var u=o.split("_"),c=i(u,2),d=c[0],h=c[1],l=this.safeCurrencyCode(h),f=this.safeCurrencyCode(d);s=l+"/"+f}}void 0===s&&void 0!==t&&(s=t.symbol);var p=this.safeString(e,"type"),v=void 0,m=this.safeString(e,"rate"),g=this.safeString(e,"amount"),y=this.parseNumber(m),b=this.parseNumber(g),x=this.safeNumber(e,"total");void 0===x&&(x=this.parseNumber(I.stringMul(m,g)));var k=this.safeString(e,"feeDisplay");if(void 0!==k){var w=k.split(" "),_=this.safeNumber(w,0);if(void 0!==_){var S=this.safeString(w,1),O=this.safeCurrencyCode(S),T=this.safeString(w,2);if(void 0!==T){var C=(T=T.replace("(","")).split("%");T=this.safeString(C,0),T=parseFloat(T)/100}v={cost:_,currency:O,rate:T}}}var M=void 0,A=this.safeNumber(e,"takerAdjustment");return void 0!==A&&(M="taker"),{id:r,info:e,timestamp:a,datetime:this.iso8601(a),symbol:s,order:n,type:"limit",side:p,takerOrMaker:M,price:y,amount:b,cost:x,fee:v}}},{key:"fetchTrades",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,u,c=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,i=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={currencyPair:s.id},void 0!==r&&(o.start=parseInt(r/1e3),o.end=this.seconds()),e.next=10,this.publicGetReturnTradeHistory(this.extend(o,a));case 10:return u=e.sent,e.abrupt("return",this.parseTrades(u,s,r,i));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=a(n.mark((function e(){var t,r,a,s,o,u,c,d,h,l,f,p,v,m,g,y,b,x,k,w,_,S,O,T,C,I=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=I.length>0&&void 0!==I[0]?I[0]:void 0,r=I.length>1&&void 0!==I[1]?I[1]:void 0,a=I.length>2&&void 0!==I[2]?I[2]:void 0,s=I.length>3&&void 0!==I[3]?I[3]:{},e.next=6,this.loadMarkets();case 6:return o=void 0,void 0!==t&&(o=this.market(t)),u=o?o.id:"all",c={currencyPair:u},void 0!==r&&(c.start=parseInt(r/1e3),c.end=this.sum(this.seconds(),1)),void 0!==a&&(c.limit=parseInt(a)),e.next=14,this.privatePostReturnTradeHistory(this.extend(c,s));case 14:if(d=e.sent,h=[],void 0!==o)h=this.parseTrades(d,o);else if(d)for(l=Object.keys(d),f=0;f<l.length;f++)if(p=l[f],v=void 0,p in this.markets_by_id)for(v=this.markets_by_id[p],m=this.parseTrades(d[p],v),g=0;g<m.length;g++)h.push(m[g]);else for(y=p.split("_"),b=i(y,2),x=b[0],k=b[1],w=this.safeCurrencyCode(k),_=this.safeCurrencyCode(x),S=w+"/"+_,O=d[p],T=0;T<O.length;T++)C={symbol:S,base:w,quote:_},h.push(this.parseTrade(O[T],C));return e.abrupt("return",this.filterBySinceLimit(h,r,a));case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({Open:"open","Partially filled":"open"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeInteger(e,"timestamp");void 0===r&&(r=this.parse8601(this.safeString(e,"date")));var n=void 0,a=this.safeString(e,"currencyPair");if(void 0!==a)if(a in this.markets_by_id)t=this.markets_by_id[a];else{var s=a.split("_"),o=i(s,2),u=o[0],c=o[1],d=this.safeCurrencyCode(c),h=this.safeCurrencyCode(u);n=d+"/"+h}void 0===n&&void 0!==t&&(n=t.symbol);var l=void 0,f=this.safeValue(e,"resultingTrades");Array.isArray(f)||(f=this.safeValue(f,this.safeString(t,"id",a))),void 0!==f&&(l=this.parseTrades(f,t));var p=this.safeNumber2(e,"price","rate"),v=this.safeNumber(e,"amount"),m=this.safeNumber(e,"startingAmount"),g=void 0,y=0;void 0!==m?void 0!==v&&(g=m-v,void 0!==p&&(y=g*p)):m=v;var b=this.parseOrderStatus(this.safeString(e,"status")),x=void 0,k=void 0;if(void 0===g&&void 0!==l){g=0,y=0;var w=l.length;if(w>0){k=l[0].timestamp;for(var _=0;_<w;_++){var S=l[_],O=S.amount,T=S.price;g=this.sum(g,O),y=this.sum(y,T*O),k=Math.max(k,S.timestamp)}}void 0!==m&&(v=Math.max(m-g,0),g>=m&&(b="closed"))}void 0!==g&&void 0!==y&&g>0&&(x=y/g);var C=this.safeString(e,"type"),I=this.safeString(e,"side",C);C===I&&(C=void 0);var M=this.safeString(e,"orderNumber"),A=void 0,E=this.safeNumber(e,"fee");if(void 0!==E){var N=void 0;void 0!==t&&(N="buy"===I?t.base:t.quote),A={cost:E,currency:N}}var P=this.safeString(e,"clientOrderId");return{info:e,id:M,clientOrderId:P,timestamp:r,datetime:this.iso8601(r),lastTradeTimestamp:k,status:b,symbol:n,type:C,timeInForce:void 0,postOnly:void 0,side:I,price:p,stopPrice:void 0,cost:y,average:x,amount:m,filled:g,remaining:v,trades:l,fee:A}}},{key:"parseOpenOrders",value:function(e,t,r){for(var i=0;i<e.length;i++){var n=e[i],a=this.extend(n,{status:"open",type:"limit",side:n.type,price:n.rate});r.push(this.parseOrder(a,t))}return r}},{key:"fetchOpenOrders",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,u,c,d,h,l,f,p,v,m,g=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=g.length>0&&void 0!==g[0]?g[0]:void 0,r=g.length>1&&void 0!==g[1]?g[1]:void 0,i=g.length>2&&void 0!==g[2]?g[2]:void 0,a=g.length>3&&void 0!==g[3]?g[3]:{},e.next=6,this.loadMarkets();case 6:return s=void 0,void 0!==t&&(s=this.market(t)),o=s?s.id:"all",u={currencyPair:o},e.next=12,this.privatePostReturnOpenOrders(this.extend(u,a));case 12:if(c=e.sent,d={status:"open"},void 0!==s){e.next=21;break}for(h=Object.keys(c),l=[],f=0;f<h.length;f++)p=h[f],v=c[p],m=this.markets_by_id[p],l=this.arrayConcat(l,this.parseOrders(v,m,void 0,void 0,d));return e.abrupt("return",this.filterBySinceLimit(l,r,i));case 21:return e.abrupt("return",this.parseOrders(c,s,r,i,d));case 22:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=a(n.mark((function e(t,r,i,a){var s,o,u,c,d,h,l,f,v=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=v.length>4&&void 0!==v[4]?v[4]:void 0,o=v.length>5&&void 0!==v[5]?v[5]:{},"market"!==r){e.next=4;break}throw new p(this.id+" createOrder() does not accept market orders");case 4:return e.next=6,this.loadMarkets();case 6:return u="privatePost"+this.capitalize(i),c=this.market(t),a=this.amountToPrecision(t,a),d={currencyPair:c.id,rate:this.priceToPrecision(t,s),amount:a},void 0!==(h=this.safeString(o,"clientOrderId"))&&(d.clientOrderId=h,o=this.omit(o,"clientOrderId")),l=this.milliseconds(),e.next=15,this[u](this.extend(d,o));case 15:return f=e.sent,e.abrupt("return",this.parseOrder(this.extend({timestamp:l,status:"open",type:r,side:i,price:s,amount:a},f),c));case 17:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"editOrder",value:function(){var e=a(n.mark((function e(t,r,i,a,s){var o,u,c,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=h.length>5&&void 0!==h[5]?h[5]:void 0,u=h.length>6&&void 0!==h[6]?h[6]:{},e.next=4,this.loadMarkets();case 4:return o=parseFloat(o),c={orderNumber:t,rate:this.priceToPrecision(r,o)},void 0!==s&&(c.amount=this.amountToPrecision(r,s)),e.next=9,this.privatePostMoveOrder(this.extend(c,u));case 9:return d=e.sent,e.abrupt("return",this.parseOrder(d));case 11:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n,a){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=a(n.mark((function e(t){var r,i,a,s=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.loadMarkets();case 4:return i={},void 0===(a=this.safeValue(r,"clientOrderId"))?i.orderNumber=t:i.clientOrderId=a,r=this.omit(r,"clientOrderId"),e.next=10,this.privatePostCancelOrder(this.extend(i,r));case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cancelAllOrders",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:{},i={},a=void 0,void 0!==t&&(a=this.market(t),i.currencyPair=a.id),e.next=7,this.privatePostCancelAllOrders(this.extend(i,r));case 7:return s=e.sent,e.abrupt("return",s);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOpenOrder",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.length>1&&void 0!==o[1]?o[1]:void 0,r=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return t=t.toString(),i={orderNumber:t},e.next=8,this.privatePostReturnOrderStatus(this.extend(i,r));case 8:if(a=e.sent,void 0!==(s=this.safeValue(a.result,t))){e.next=12;break}throw new k(this.id+" order id "+t+" not found");case 12:return e.abrupt("return",this.parseOrder(s));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrderStatus",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:void 0,i=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.fetchOpenOrders(r,void 0,void 0,i);case 6:return a=e.sent,s=this.indexBy(a,"id"),e.abrupt("return",t in s?"open":"closed");case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrderTrades",value:function(){var e=a(n.mark((function e(t){var r,i,a,s=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,s.length>2&&void 0!==s[2]?s[2]:void 0,s.length>3&&void 0!==s[3]?s[3]:void 0,r=s.length>4&&void 0!==s[4]?s[4]:{},e.next=6,this.loadMarkets();case 6:return i={orderNumber:t},e.next=9,this.privatePostReturnOrderTrades(this.extend(i,r));case 9:return a=e.sent,e.abrupt("return",this.parseTrades(a));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createDepositAddress",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,u,c,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:{},e.next=3,this.loadMarkets();case 3:return i=void 0,a=void 0,t in this.currencies?(a=this.currency(t),i=a.id):i=t,s={currency:i},e.next=9,this.privatePostGenerateNewAddress(this.extend(s,r));case 9:return o=e.sent,u=void 0,c=void 0,1===o.success&&(u=this.safeString(o,"response")),this.checkAddress(u),void 0!==a&&void 0!==(d=this.safeString(a.info,"depositAddress"))&&(c=u,u=d),e.abrupt("return",{currency:t,address:u,tag:c,info:o});case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchDepositAddress",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,u,c,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privatePostReturnDepositAddresses(r);case 5:return i=e.sent,a=void 0,s=void 0,t in this.currencies?(s=this.currency(t),a=s.id):a=t,o=this.safeString(i,a),u=void 0,this.checkAddress(o),void 0!==s&&void 0!==(c=this.safeString(s.info,"depositAddress"))&&(u=o,o=c),e.abrupt("return",{currency:t,address:o,tag:u,info:i});case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"withdraw",value:function(){var e=a(n.mark((function e(t,r,i){var a,s,o,u,c,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=d.length>3&&void 0!==d[3]?d[3]:void 0,s=d.length>4&&void 0!==d[4]?d[4]:{},this.checkAddress(i),e.next=5,this.loadMarkets();case 5:return o=this.currency(t),u={currency:o.id,amount:r,address:i},void 0!==a&&(u.paymentId=a),e.next=10,this.privatePostWithdraw(this.extend(u,s));case 10:return c=e.sent,e.abrupt("return",{info:c,id:this.safeString(c,"withdrawalNumber")});case 12:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"fetchTransactionsHelper",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,u,c,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d.length>0&&void 0!==d[0]?d[0]:void 0,t=d.length>1&&void 0!==d[1]?d[1]:void 0,r=d.length>2&&void 0!==d[2]?d[2]:void 0,i=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return a=31104e3,s=this.seconds(),o=void 0!==t?parseInt(t/1e3):s-10*a,u={start:o,end:s},void 0!==r&&(u.limit=r),e.next=13,this.privatePostReturnDepositsWithdrawals(this.extend(u,i));case 13:return c=e.sent,e.abrupt("return",c);case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTransactions",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,u,c,d,h,l,f=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:void 0,r=f.length>1&&void 0!==f[1]?f[1]:void 0,i=f.length>2&&void 0!==f[2]?f[2]:void 0,a=f.length>3&&void 0!==f[3]?f[3]:{},e.next=6,this.loadMarkets();case 6:return e.next=8,this.fetchTransactionsHelper(t,r,i,a);case 8:return s=e.sent,o=void 0,void 0!==t&&(o=this.currency(t)),u=this.safeValue(s,"withdrawals",[]),c=this.safeValue(s,"deposits",[]),d=this.parseTransactions(u,o,r,i),h=this.parseTransactions(c,o,r,i),l=this.arrayConcat(h,d),e.abrupt("return",this.filterByCurrencySinceLimit(this.sortBy(l,"timestamp"),t,r,i));case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchWithdrawals",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,u,c,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,i=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.fetchTransactionsHelper(t,r,i,a);case 6:return s=e.sent,o=void 0,void 0!==t&&(o=this.currency(t)),u=this.safeValue(s,"withdrawals",[]),c=this.parseTransactions(u,o,r,i),e.abrupt("return",this.filterByCurrencySinceLimit(c,t,r,i));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchDeposits",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,u,c,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,i=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.fetchTransactionsHelper(t,r,i,a);case 6:return s=e.sent,o=void 0,void 0!==t&&(o=this.currency(t)),u=this.safeValue(s,"deposits",[]),c=this.parseTransactions(u,o,r,i),e.abrupt("return",this.filterByCurrencySinceLimit(c,t,r,i));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTransactionStatus",value:function(e){return this.safeString({COMPLETE:"ok"},e,e)}},{key:"parseTransaction",value:function(e){var t=this.safeTimestamp(e,"timestamp"),r=this.safeString(e,"currency"),i=this.safeCurrencyCode(r),n=this.safeString(e,"status","pending"),a=this.safeString(e,"txid");if(void 0!==n){var s=n.split(": "),o=s.length;n=s[0],o>1&&void 0===a&&(a=s[1]),n=this.parseTransactionStatus(n)}var u="withdrawalNumber"in e?"withdrawal":"deposit",c=this.safeString(e,"type",u),d=this.safeString2(e,"withdrawalNumber","depositNumber"),h=this.safeNumber(e,"amount"),l=this.safeString(e,"address"),f=this.safeString(e,"paymentID"),p=this.safeNumber(e,"fee",0);return"withdrawal"===c&&(h-=p),{info:e,id:d,currency:i,amount:h,address:l,tag:f,status:n,type:c,updated:void 0,txid:a,timestamp:t,datetime:this.iso8601(t),fee:{currency:i,cost:p}}}},{key:"fetchPosition",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return i=this.market(t),a={currencyPair:i.id},e.next=7,this.privatePostGetMarginPosition(this.extend(a,r));case 7:return s=e.sent,e.abrupt("return",s);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"nonce",value:function(){return this.milliseconds()}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.urls.api[t],o=this.extend({command:e},i);return"public"===t?s+="?"+this.urlencode(o):(this.checkRequiredCredentials(),o.nonce=this.nonce(),a=this.urlencode(o),n={"Content-Type":"application/x-www-form-urlencoded",Key:this.apiKey,Sign:this.hmac(this.encode(a),this.encode(this.secret),"sha512")}),{url:s,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,u){if(void 0!==s&&"error"in s){var c=s.error,d=this.id+" "+a;throw this.throwExactlyMatchedException(this.exceptions.exact,c,d),this.throwBroadlyMatchedException(this.exceptions.broad,c,d),new p(d)}}}]),r}(l)},function(e,t,r){"use strict";var i=r(7),n=r(8),a=r(1),s=r(2),o=r(6),u=r(3),c=r(4),d=r(5),h=r(11),l=r(10),f=l.ExchangeError,p=l.ExchangeNotAvailable,v=l.BadResponse,m=l.BadRequest,g=l.InvalidOrder,y=l.InsufficientFunds,b=l.AuthenticationError,x=l.ArgumentsRequired,k=l.InvalidAddress,w=l.RateLimitExceeded,_=l.DDoSProtection,S=l.BadSymbol,O=r(18),T=O.TRUNCATE,C=O.TICK_SIZE,I=r(12);e.exports=function(e){c(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(u(r.prototype),"describe",this).call(this),{id:"probit",name:"ProBit",countries:["SC","KR"],rateLimit:250,has:{CORS:!0,fetchTime:!0,fetchMarkets:!0,fetchCurrencies:!0,fetchTickers:!0,fetchTicker:!0,fetchOHLCV:!0,fetchOrderBook:!0,fetchTrades:!0,fetchBalance:!0,createOrder:!0,createMarketOrder:!0,cancelOrder:!0,fetchOrder:!0,fetchOpenOrders:!0,fetchClosedOrders:!0,fetchMyTrades:!0,fetchDepositAddress:!0,withdraw:!0,signIn:!0},timeframes:{"1m":"1m","3m":"3m","5m":"5m","10m":"10m","15m":"15m","30m":"30m","1h":"1h","4h":"4h","6h":"6h","12h":"12h","1d":"1D","1w":"1W","1M":"1M"},version:"v1",urls:{logo:"https://user-images.githubusercontent.com/51840849/79268032-c4379480-7ea2-11ea-80b3-dd96bb29fd0d.jpg",api:{accounts:"https://accounts.probit.com",public:"https://api.probit.com/api/exchange",private:"https://api.probit.com/api/exchange"},www:"https://www.probit.com",doc:["https://docs-en.probit.com","https://docs-ko.probit.com"],fees:"https://support.probit.com/hc/en-us/articles/360020968611-Trading-Fees",referral:"https://www.probit.com/r/34608773"},api:{public:{get:["market","currency","currency_with_platform","time","ticker","order_book","trade","candle"]},private:{post:["new_order","cancel_order","withdrawal"],get:["balance","order","open_order","order_history","trade_history","deposit_address"]},accounts:{post:["token"]}},fees:{trading:{tierBased:!1,percentage:!0,maker:.002,taker:.002}},exceptions:{exact:{UNAUTHORIZED:b,INVALID_ARGUMENT:m,TRADING_UNAVAILABLE:p,NOT_ENOUGH_BALANCE:y,NOT_ALLOWED_COMBINATION:m,INVALID_ORDER:g,RATE_LIMIT_EXCEEDED:w,MARKET_UNAVAILABLE:p,INVALID_MARKET:S,MARKET_CLOSED:S,INVALID_CURRENCY:m,TOO_MANY_OPEN_ORDERS:_,DUPLICATE_ADDRESS:k}},requiredCredentials:{apiKey:!0,secret:!0},precisionMode:C,options:{createMarketBuyOrderRequiresPrice:!0,timeInForce:{limit:"gtc",market:"ioc"}},commonCurrencies:{AUTO:"Cube",BTCBEAR:"BEAR",BTCBULL:"BULL",CBC:"CryptoBharatCoin",EPS:"Epanus",HBC:"Hybrid Bank Cash",UNI:"UNICORN Token"}})}},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p,v,m,g,y,b,x,k=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=k.length>0&&void 0!==k[0]?k[0]:{},e.next=3,this.publicGetMarket(t);case 3:for(r=e.sent,n=this.safeValue(r,"data",[]),a=[],s=0;s<n.length;s++)o=n[s],u=this.safeString(o,"id"),c=this.safeString(o,"base_currency_id"),d=this.safeString(o,"quote_currency_id"),h=this.safeCurrencyCode(c),l=this.safeCurrencyCode(d),f=h+"/"+l,p=this.safeValue(o,"closed",!1),v=!p,m=this.safeInteger(o,"quantity_precision"),g=this.safeInteger(o,"cost_precision"),y={amount:1/Math.pow(10,m),price:this.safeNumber(o,"price_increment"),cost:1/Math.pow(10,g)},b=this.safeNumber(o,"taker_fee_rate"),x=this.safeNumber(o,"maker_fee_rate"),a.push({id:u,info:o,symbol:f,base:h,quote:l,baseId:c,quoteId:d,active:v,precision:y,taker:b/100,maker:x/100,limits:{amount:{min:this.safeNumber(o,"min_quantity"),max:this.safeNumber(o,"max_quantity")},price:{min:this.safeNumber(o,"min_price"),max:this.safeNumber(o,"max_price")},cost:{min:this.safeNumber(o,"min_cost"),max:this.safeNumber(o,"max_cost")}}});return e.abrupt("return",a);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchCurrencies",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p,v,m,g,y,b,x,k,w,_,S,O,T,C,I=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=I.length>0&&void 0!==I[0]?I[0]:{},e.next=3,this.publicGetCurrencyWithPlatform(t);case 3:for(r=e.sent,n=this.safeValue(r,"data"),a={},s=0;s<n.length;s++){for(o=n[s],u=this.safeString(o,"id"),c=this.safeCurrencyCode(u),d=this.safeValue(o,"display_name"),h=this.safeString(d,"en-us"),l=this.safeValue(o,"platform",[]),f=this.sortBy(l,"priority"),p=this.safeValue(f,0,{}),v=this.safeInteger(p,"precision"),m=this.safeValue(p,"deposit_suspended"),g=this.safeValue(p,"withdrawal_suspended"),y=!(m&&g),b=this.safeValue(p,"withdrawal_fee",{}),x=[],k=0;k<b.length;k++)w=b[k],_=this.safeNumber(w,"amount"),S=this.safeInteger(w,"priority"),void 0!==_&&void 0!==S&&x.push(w);O=this.sortBy(x,"priority"),T=this.safeValue(O,0,{}),C=this.safeNumber(T,"amount"),a[c]={id:u,code:c,info:o,name:h,active:y,fee:C,precision:v,limits:{amount:{min:Math.pow(10,-v),max:Math.pow(10,v)},deposit:{min:this.safeNumber(p,"min_deposit_amount"),max:void 0},withdraw:{min:this.safeNumber(p,"min_withdrawal_amount"),max:void 0}}}}return e.abrupt("return",a);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetBalance(t);case 5:for(r=e.sent,n=this.safeValue(r,"data"),a={info:n},s=0;s<n.length;s++)o=n[s],u=this.safeString(o,"currency_id"),c=this.safeCurrencyCode(u),(d=this.account()).total=this.safeString(o,"total"),d.free=this.safeString(o,"available"),a[c]=d;return e.abrupt("return",this.parseBalance(a,!1));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.length>1&&void 0!==c[1]?c[1]:void 0,r=c.length>2&&void 0!==c[2]?c[2]:{},e.next=4,this.loadMarkets();case 4:return n=this.market(t),a={market_id:n.id},e.next=8,this.publicGetOrderBook(this.extend(a,r));case 8:return s=e.sent,o=this.safeValue(s,"data",[]),u=this.groupBy(o,"side"),e.abrupt("return",this.parseOrderBook(u,void 0,"buy","sell","price","quantity"));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:{},e.next=4,this.loadMarkets();case 4:return n={},void 0!==t&&(a=this.marketIds(t),n.market_ids=a.join(",")),e.next=8,this.publicGetTicker(this.extend(n,r));case 8:return s=e.sent,o=this.safeValue(s,"data",[]),e.abrupt("return",this.parseTickers(o,t));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={market_ids:n.id},e.next=7,this.publicGetTicker(this.extend(a,r));case 7:if(s=e.sent,o=this.safeValue(s,"data",[]),void 0!==(u=this.safeValue(o,0))){e.next=12;break}throw new v(this.id+" fetchTicker() returned an empty response");case 12:return e.abrupt("return",this.parseTicker(u,n));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.parse8601(this.safeString(e,"time")),i=this.safeString(e,"market_id"),n=this.safeSymbol(i,t,"-"),a=this.safeNumber(e,"last"),s=this.safeNumber(e,"change"),o=void 0,u=void 0;void 0!==s&&void 0!==a&&(o=s/(u=a-s)*100);var c=this.safeNumber(e,"base_volume"),d=this.safeNumber(e,"quote_volume"),h=this.vwap(c,d);return{symbol:n,timestamp:r,datetime:this.iso8601(r),high:this.safeNumber(e,"high"),low:this.safeNumber(e,"low"),bid:void 0,bidVolume:void 0,ask:void 0,askVolume:void 0,vwap:h,open:u,close:a,last:a,previousClose:void 0,change:s,percentage:o,average:void 0,baseVolume:c,quoteVolume:d,info:e}}},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return s=void 0,o={limit:100,start_time:this.iso8601(0),end_time:this.iso8601(this.milliseconds())},void 0!==t&&(s=this.market(t),o.market_id=s.id),void 0!==r&&(o.start_time=this.iso8601(r)),void 0!==n&&(o.limit=n),e.next=13,this.privateGetTradeHistory(this.extend(o,a));case 13:return u=e.sent,c=this.safeValue(u,"data",[]),e.abrupt("return",this.parseTrades(c,s,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={market_id:s.id,limit:100,start_time:"1970-01-01T00:00:00.000Z",end_time:this.iso8601(this.milliseconds())},void 0!==r&&(o.start_time=this.iso8601(r)),void 0!==n&&(o.limit=n),e.next=11,this.publicGetTrade(this.extend(o,a));case 11:return u=e.sent,c=this.safeValue(u,"data",[]),e.abrupt("return",this.parseTrades(c,s,r,n));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.parse8601(this.safeString(e,"time")),i=this.safeString(e,"id"),n=void 0;if(void 0!==i){var a=i.split(":");n=this.safeString(a,0)}n=this.safeString(e,"market_id",n);var s=this.safeSymbol(n,t,"-"),o=this.safeString(e,"side"),u=this.safeString(e,"price"),c=this.safeString(e,"quantity"),d=this.parseNumber(u),h=this.parseNumber(c),l=this.parseNumber(I.stringMul(u,c)),f=this.safeString(e,"order_id"),p=this.safeNumber(e,"fee_amount"),v=void 0;if(void 0!==p){var m=this.safeString(e,"fee_currency_id"),g=this.safeCurrencyCode(m);v={cost:p,currency:g}}return{id:i,info:e,timestamp:r,datetime:this.iso8601(r),symbol:s,order:f,type:void 0,side:o,takerOrMaker:void 0,price:d,amount:h,cost:l,fee:v}}},{key:"fetchTime",value:function(){var e=n(i.mark((function e(){var t,r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},e.next=3,this.publicGetTime(t);case 3:return r=e.sent,n=this.parse8601(this.safeString(r,"data")),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"normalizeOHLCVTimestamp",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=this.parseTimeframe(t);if("1M"===t){var n=this.iso8601(e),a=n.split("-"),s=this.safeString(a,0),o=this.safeInteger(a,1);return r&&(o=this.sum(o,1)),s+"-"+(o=o<10?"0"+o.toString():o.toString())+"-01T00:00:00.000Z"}if("1w"===t){var u=259200,c=(e=parseInt(e/1e3))-u,d=this.integerDivide(c,i),h=this.sum(u,d*i);return r&&(h=this.sum(h,i)),this.iso8601(1e3*h)}return e=parseInt(e/1e3),e=i*parseInt(e/i),r&&(e=this.sum(e,i)),this.iso8601(1e3*e)}},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d,h,l,f,p,v,m,g,y,b=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=b.length>1&&void 0!==b[1]?b[1]:"1m",n=b.length>2&&void 0!==b[2]?b[2]:void 0,a=b.length>3&&void 0!==b[3]?b[3]:void 0,s=b.length>4&&void 0!==b[4]?b[4]:{},e.next=6,this.loadMarkets();case 6:if(o=this.market(t),u=this.timeframes[r],a=void 0===a?100:a,c=this.sum(a,1),c=Math.min(1e3,c),d={market_ids:o.id,interval:u,sort:"asc",limit:c},h=this.milliseconds(),l=this.parseTimeframe(r),f=n,p=h,void 0!==n){e.next=24;break}if(void 0!==a){e.next=21;break}throw new x(this.id+" fetchOHLCV() requires either a since argument or a limit argument");case 21:f=h-a*l*1e3;case 22:e.next=25;break;case 24:p=void 0===a?h:this.sum(n,this.sum(a,1)*l*1e3);case 25:return v=this.normalizeOHLCVTimestamp(f,r),m=this.normalizeOHLCVTimestamp(p,r,!0),d.start_time=v,d.end_time=m,e.next=31,this.publicGetCandle(this.extend(d,s));case 31:return g=e.sent,y=this.safeValue(g,"data",[]),e.abrupt("return",this.parseOHLCVs(y,o,r,n,a));case 34:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){return[this.parse8601(this.safeString(e,"start_time")),this.safeNumber(e,"open"),this.safeNumber(e,"high"),this.safeNumber(e,"low"),this.safeNumber(e,"close"),this.safeNumber(e,"base_volume")]}},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return r=this.parse8601(r),s={},o=void 0,void 0!==t&&(o=this.market(t),s.market_id=o.id),e.next=12,this.privateGetOpenOrder(this.extend(s,a));case 12:return u=e.sent,c=this.safeValue(u,"data"),e.abrupt("return",this.parseOrders(c,o,r,n));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return s={start_time:this.iso8601(0),end_time:this.iso8601(this.milliseconds()),limit:100},o=void 0,void 0!==t&&(o=this.market(t),s.market_id=o.id),r&&(s.start_time=this.iso8601(r)),n&&(s.limit=n),e.next=13,this.privateGetOrderHistory(this.extend(s,a));case 13:return u=e.sent,c=this.safeValue(u,"data"),e.abrupt("return",this.parseOrders(c,o,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=l.length>1&&void 0!==l[1]?l[1]:void 0,n=l.length>2&&void 0!==l[2]?l[2]:{},void 0!==r){e.next=4;break}throw new x(this.id+" fetchOrder() requires a symbol argument");case 4:return e.next=6,this.loadMarkets();case 6:return a=this.market(r),s={market_id:a.id},void 0!==(o=this.safeString2(n,"clientOrderId","client_order_id"))?s.client_order_id=o:s.order_id=t,u=this.omit(n,["clientOrderId","client_order_id"]),e.next=13,this.privateGetOrder(this.extend(s,u));case 13:return c=e.sent,d=this.safeValue(c,"data",[]),h=this.safeValue(d,0),e.abrupt("return",this.parseOrder(h,a));case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({open:"open",cancelled:"canceled",filled:"closed"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.parseOrderStatus(this.safeString(e,"status")),i=this.safeString(e,"id"),n=this.safeString(e,"type"),a=this.safeString(e,"side"),s=this.safeString(e,"market_id"),o=this.safeSymbol(s,t,"-"),u=this.parse8601(this.safeString(e,"time")),c=this.safeNumber(e,"limit_price"),d=this.safeNumber(e,"filled_quantity"),h=this.safeNumber(e,"open_quantity"),l=this.safeNumber(e,"cancelled_quantity");void 0!==l&&(h=this.sum(h,l));var f=this.safeNumber(e,"quantity",this.sum(d,h)),p=this.safeNumber2(e,"filled_cost","cost");"market"===n&&(c=void 0);var v=this.safeString(e,"client_order_id");""===v&&(v=void 0);var m=this.safeStringUpper(e,"time_in_force");return this.safeOrder({id:i,info:e,clientOrderId:v,timestamp:u,datetime:this.iso8601(u),lastTradeTimestamp:void 0,symbol:o,type:n,timeInForce:m,side:a,status:r,price:c,stopPrice:void 0,amount:f,filled:d,remaining:h,average:void 0,cost:p,fee:void 0,trades:void 0})}},{key:"costToPrecision",value:function(e,t){return this.decimalToPrecision(t,T,this.markets[e].precision.cost,this.precisionMode)}},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,u,c,d,h,l,f,p,v,m,y,b,x,k=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=k.length>4&&void 0!==k[4]?k[4]:void 0,o=k.length>5&&void 0!==k[5]?k[5]:{},e.next=4,this.loadMarkets();case 4:if(u=this.market(t),c=this.safeValue(this.options,"timeInForce"),d=this.safeValue(c,r),h=this.safeString2(o,"timeInForce","time_in_force",d),l={market_id:u.id,type:r,side:n,time_in_force:h},void 0!==(f=this.safeString2(o,"clientOrderId","client_order_id"))&&(l.client_order_id=f),p=void 0,"limit"!==r){e.next=17;break}l.limit_price=this.priceToPrecision(t,s),l.quantity=this.amountToPrecision(t,a),e.next=36;break;case 17:if("market"!==r){e.next=36;break}if("buy"!==n){e.next=35;break}if(v=this.safeNumber(o,"cost"),!this.safeValue(this.options,"createMarketBuyOrderRequiresPrice",!0)){e.next=30;break}if(void 0===s){e.next=26;break}void 0===v&&(v=a*s),e.next=28;break;case 26:if(void 0!==v){e.next=28;break}throw new g(this.id+" createOrder() requires the price argument for market buy orders to calculate total order cost (amount to spend), where cost = amount * price. Supply a price argument to createOrder() call if you want the cost to be calculated for you from price and amount, or, alternatively, add .options['createMarketBuyOrderRequiresPrice'] = false and supply the total cost value in the 'amount' argument or in the 'cost' extra parameter (the exchange-specific behaviour)");case 28:e.next=31;break;case 30:v=void 0===v?a:v;case 31:p=this.costToPrecision(t,v),l.cost=p,e.next=36;break;case 35:l.quantity=this.amountToPrecision(t,a);case 36:return m=this.omit(o,["timeInForce","time_in_force","clientOrderId","client_order_id"]),e.next=39,this.privatePostNewOrder(this.extend(l,m));case 39:return y=e.sent,b=this.safeValue(y,"data"),x=this.parseOrder(b,u),"market"===r&&"buy"===n&&(x.amount=void 0,x.cost=parseFloat(p),x.remaining=void 0),e.abrupt("return",x);case 44:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:{},void 0!==r){e.next=4;break}throw new x(this.id+" cancelOrder() requires a symbol argument");case 4:return e.next=6,this.loadMarkets();case 6:return a=this.market(r),s={market_id:a.id,order_id:t},e.next=10,this.privatePostCancelOrder(this.extend(s,n));case 10:return o=e.sent,u=this.safeValue(o,"data"),e.abrupt("return",this.parseOrder(u));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseDepositAddress",value:function(e){var t=this.safeString(e,"address"),r=this.safeString(e,"destination_tag"),i=this.safeString(e,"currency_id"),n=this.safeCurrencyCode(i);return this.checkAddress(t),{currency:n,address:t,tag:r,info:e}}},{key:"fetchDepositAddress",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.currency(t),a={currency_id:n.id},e.next=7,this.privateGetDepositAddress(this.extend(a,r));case 7:if(s=e.sent,o=this.safeValue(s,"data",[]),void 0!==(u=this.safeValue(o,0))){e.next=12;break}throw new k(this.id+" fetchDepositAddress returned an empty response");case 12:return e.abrupt("return",this.parseDepositAddress(u,n));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchDepositAddresses",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:{},e.next=4,this.loadMarkets();case 4:if(n={},t){for(a=[],s=0;s<t.length;s++)o=this.currency(t[s]),a.push(o.id);n.currency_id=t.join(",")}return e.next=8,this.privateGetDepositAddress(this.extend(n,r));case 8:return u=e.sent,c=this.safeValue(u,"data",[]),e.abrupt("return",this.parseDepositAddresses(c));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"withdraw",value:function(){var e=n(i.mark((function e(t,r,n){var a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.length>3&&void 0!==h[3]?h[3]:void 0,s=h.length>4&&void 0!==h[4]?h[4]:{},this.checkAddress(n),e.next=5,this.loadMarkets();case 5:return o=this.currency(t),void 0===a&&(a=""),u={currency_id:o.id,address:n,destination_tag:a,amount:this.currencyToPrecision(t,r)},e.next=10,this.privatePostWithdrawal(this.extend(u,s));case 10:return c=e.sent,d=this.safeValue(c,"data"),e.abrupt("return",this.parseTransaction(d,o));case 13:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"parseTransaction",value:function(e){var t=this.safeString(e,"id"),r=this.safeNumber(e,"amount"),i=this.safeString(e,"address"),n=this.safeString(e,"destination_tag"),a=this.safeString(e,"hash"),s=this.parse8601(this.safeString(e,"time")),o=this.safeString(e,"type"),u=this.safeString(e,"currency_id"),c=this.safeCurrencyCode(u),d=this.parseTransactionStatus(this.safeString(e,"status")),h=this.safeNumber(e,"fee"),l=void 0;return void 0!==h&&0!==h&&(l={currency:c,cost:h}),{id:t,currency:c,amount:r,addressFrom:void 0,address:i,addressTo:i,tagFrom:void 0,tag:n,tagTo:n,status:d,type:o,txid:a,timestamp:s,datetime:this.iso8601(s),fee:l,info:e}}},{key:"parseTransactionStatus",value:function(e){return this.safeString({requested:"pending",pending:"pending",confirming:"pending",confirmed:"pending",applying:"pending",done:"ok",cancelled:"canceled",cancelling:"canceled"},e,e)}},{key:"nonce",value:function(){return this.milliseconds()}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.urls.api[t]+"/",o=this.omit(i,this.extractParams(e));if("accounts"===t){this.checkRequiredCredentials(),s+=this.implodeParams(e,i);var u=this.apiKey+":"+this.secret,c=this.stringToBase64(u);n={Authorization:"Basic "+this.decode(c),"Content-Type":"application/json"},Object.keys(o).length&&(a=this.json(o))}else if(s+=this.version+"/","public"===t)s+=this.implodeParams(e,i),Object.keys(o).length&&(s+="?"+this.urlencode(o));else if("private"===t){var d=this.milliseconds();this.checkRequiredCredentials();var h=this.safeInteger(this.options,"expires");if(void 0===h||h<d)throw new b(this.id+" access token expired, call signIn() method");var l=this.safeString(this.options,"accessToken");n={Authorization:"Bearer "+l},s+=this.implodeParams(e,i),"GET"===r?Object.keys(o).length&&(s+="?"+this.urlencode(o)):Object.keys(o).length&&(a=this.json(o),n["Content-Type"]="application/json")}return{url:s,method:r,body:a,headers:n}}},{key:"signIn",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:{},this.checkRequiredCredentials(),r={grant_type:"client_credentials"},e.next=5,this.accountsPostToken(this.extend(r,t));case 5:return n=e.sent,a=this.safeInteger(n,"expires_in"),s=this.safeString(n,"access_token"),this.options.accessToken=s,this.options.expires=this.sum(this.milliseconds(),1e3*a),e.abrupt("return",n);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,u){if(void 0!==s&&"errorCode"in s){var c=this.safeString(s,"errorCode"),d=this.safeString(s,"message");if(void 0!==c){var h=this.id+" "+a;throw this.throwExactlyMatchedException(this.exceptions.exact,d,h),this.throwBroadlyMatchedException(this.exceptions.exact,c,h),new f(h)}}}}]),r}(h)},function(e,t,r){"use strict";var i=r(7),n=r(8),a=r(1),s=r(2),o=r(6),u=r(3),c=r(4),d=r(5),h=r(11),l=r(10),f=l.ExchangeError,p=l.InvalidOrder,v=l.InsufficientFunds,m=l.AuthenticationError,g=l.BadSymbol,y=r(12);e.exports=function(e){c(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(u(r.prototype),"describe",this).call(this),{id:"qtrade",name:"qTrade",countries:["US"],rateLimit:1e3,version:"v1",urls:{logo:"https://user-images.githubusercontent.com/51840849/80491487-74a99c00-896b-11ea-821e-d307e832f13e.jpg",api:"https://api.qtrade.io",www:"https://qtrade.io",doc:"https://qtrade-exchange.github.io/qtrade-docs",referral:"https://qtrade.io/?ref=BKOQWVFGRH2C"},has:{CORS:!1,fetchTrades:!0,fetchTicker:!0,fetchTickers:!0,fetchMarkets:!0,fetchCurrencies:!0,fetchBalance:!0,fetchOrderBook:!0,fetchOrder:!0,fetchOrders:!0,fetchMyTrades:!0,fetchClosedOrders:!0,fetchOpenOrders:!0,fetchOHLCV:!0,createOrder:!0,cancelOrder:!0,createMarketOrder:!1,withdraw:!0,fetchDepositAddress:!0,fetchTransactions:!1,fetchDeposits:!0,fetchWithdrawals:!0,fetchDeposit:!0,fetchWithdrawal:!0},timeframes:{"5m":"fivemin","15m":"fifteenmin","30m":"thirtymin","1h":"onehour","2h":"twohour","4h":"fourhour","1d":"oneday"},api:{public:{get:["ticker/{market_string}","tickers","currency/{code}","currencies","common","market/{market_string}","markets","market/{market_string}/trades","orderbook/{market_string}","market/{market_string}/ohlcv/{interval}"]},private:{get:["me","balances","balances_all","market/{market_string}","orders","order/{order_id}","trades","withdraw/{withdraw_id}","withdraws","deposit/{deposit_id}","deposits","transfers"],post:["cancel_order","withdraw","deposit_address/{currency}","sell_limit","buy_limit"]}},fees:{trading:{tierBased:!0,percentage:!0,taker:.0025,maker:0},funding:{withdraw:{}}},exceptions:{exact:{invalid_auth:m,insuff_funds:v,market_not_found:g}}})}},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p,v,m,g,y,b,x=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=x.length>0&&void 0!==x[0]?x[0]:{},e.next=3,this.publicGetMarkets(t);case 3:for(r=e.sent,n=this.safeValue(r,"data",{}),a=this.safeValue(n,"markets",[]),s=[],o=0;o<a.length;o++)u=a[o],c=this.safeString(u,"market_string"),d=this.safeInteger(u,"id"),h=this.safeString(u,"market_currency"),l=this.safeString(u,"base_currency"),f=this.safeCurrencyCode(h),p=this.safeCurrencyCode(l),v=f+"/"+p,m={amount:this.safeInteger(u,"market_precision"),price:this.safeInteger(u,"base_precision")},g=this.safeValue(u,"can_view",!1),y=this.safeValue(u,"can_trade",!1),b=y&&g,s.push({symbol:v,id:c,numericId:d,baseId:h,quoteId:l,base:f,quote:p,active:b,precision:m,taker:this.safeNumber(u,"taker_fee"),maker:this.safeNumber(u,"maker_fee"),limits:{amount:{min:this.safeNumber(u,"minimum_buy_value"),max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0}},info:u});return e.abrupt("return",s);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchCurrencies",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p,v,m,g,y=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=y.length>0&&void 0!==y[0]?y[0]:{},e.next=3,this.publicGetCurrencies(t);case 3:for(r=e.sent,n=this.safeValue(r,"data",{}),a=this.safeValue(n,"currencies",[]),s={},o=0;o<a.length;o++)u=a[o],c=this.safeString(u,"code"),d=this.safeCurrencyCode(c),h=this.safeString(u,"long_name"),l=this.safeString(u,"type"),f=this.safeValue(u,"can_withdraw",!0),p=this.safeValue(u,"deposit_disabled",!1),v=this.safeValue(u,"config",{}),m=this.safeString(u,"status"),g=f&&"ok"===m&&!p,s[d]={id:c,code:d,info:u,type:l,name:h,fee:this.safeNumber(v,"withdraw_fee"),precision:this.safeInteger(u,"precision"),active:g,limits:{amount:{min:this.safeNumber(u,"minimum_order"),max:void 0},withdraw:{min:void 0,max:void 0}}};return e.abrupt("return",s);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){return[this.parse8601(this.safeString(e,"time")),this.safeNumber(e,"open"),this.safeNumber(e,"high"),this.safeNumber(e,"low"),this.safeNumber(e,"close"),this.safeNumber(e,"market_volume")]}},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>1&&void 0!==l[1]?l[1]:"5m",n=l.length>2&&void 0!==l[2]?l[2]:void 0,a=l.length>3&&void 0!==l[3]?l[3]:void 0,s=l.length>4&&void 0!==l[4]?l[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),u={market_string:o.id,interval:this.timeframes[r]},e.next=10,this.publicGetMarketMarketStringOhlcvInterval(this.extend(u,s));case 10:return c=e.sent,d=this.safeValue(c,"data",{}),h=this.safeValue(d,"slices",[]),e.abrupt("return",this.parseOHLCVs(h,o,r,n,a));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d,h,l,f,p,v,m,g,y,b,x,k,w=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w.length>1&&void 0!==w[1]?w[1]:void 0,r=w.length>2&&void 0!==w[2]?w[2]:{},e.next=4,this.loadMarkets();case 4:return n=this.marketId(t),a={market_string:n},e.next=8,this.publicGetOrderbookMarketString(this.extend(a,r));case 8:for(s=e.sent,o=this.safeValue(s,"data",{}),u={},c={buy:"bids",sell:"asks"},d=Object.keys(c),h=0;h<d.length;h++){for(l=d[h],f=c[l],p=this.safeValue(o,l,{}),v=Object.keys(p),m=[],g=0;g<v.length;g++)y=v[g],b=this.safeNumber(v,g),x=this.safeNumber(p,y),m.push([b,x]);u[f]=m}return k=this.safeIntegerProduct(o,"last_change",.001),e.abrupt("return",this.parseOrderBook(u,k));case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id_hr"),i=this.safeSymbol(r,t,"_"),n=this.safeIntegerProduct(e,"last_change",.001),a=this.safeNumber(e,"day_open"),s=this.safeNumber(e,"last"),o=this.safeNumber(e,"day_change"),u=void 0,c=void 0,d=this.safeNumber(e,"day_avg_price");void 0!==o&&(u=100*o,void 0!==a&&(c=o*a)),void 0===d&&void 0!==s&&void 0!==a&&(d=this.sum(s,a)/2);var h=this.safeNumber(e,"day_volume_market"),l=this.safeNumber(e,"day_volume_base"),f=this.vwap(h,l);return{symbol:i,timestamp:n,datetime:this.iso8601(n),high:this.safeNumber(e,"day_high"),low:this.safeNumber(e,"day_low"),bid:this.safeNumber(e,"bid"),bidVolume:void 0,ask:this.safeNumber(e,"ask"),askVolume:void 0,vwap:f,open:a,close:s,last:s,previousClose:void 0,change:c,percentage:u,average:d,baseVolume:h,quoteVolume:l,info:e}}},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetTickers(r);case 6:for(n=e.sent,a=this.safeValue(n,"data",{}),s=this.safeValue(a,"markets",[]),o={},u=0;u<s.length;u++)c=this.parseTicker(s[u]),d=c.symbol,o[d]=c;return e.abrupt("return",this.filterByArray(o,"symbol",t));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={market_string:n.id},e.next=7,this.publicGetTickerMarketString(this.extend(a,r));case 7:return s=e.sent,o=this.safeValue(s,"data",{}),e.abrupt("return",this.parseTicker(o,n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={market_string:s.id},e.next=9,this.publicGetMarketMarketStringTrades(this.extend(o,a));case 9:return u=e.sent,c=this.safeValue(u,"data",{}),d=this.safeValue(c,"trades",[]),e.abrupt("return",this.parseTrades(d,s,r,n));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:void 0,r=l.length>1&&void 0!==l[1]?l[1]:void 0,n=l.length>2&&void 0!==l[2]?l[2]:void 0,a=l.length>3&&void 0!==l[3]?l[3]:{},e.next=6,this.loadMarkets();case 6:return s={desc:!0},o=void 0,void 0!==(u=this.safeValue(a,"market_id"))?s.market_id=u:void 0!==t&&(o=this.market(t),s.market_string=o.id),e.next=12,this.privateGetTrades(this.extend(s,a));case 12:return c=e.sent,d=this.safeValue(c,"data",{}),h=this.safeValue(d,"trades",[]),e.abrupt("return",this.parseTrades(h,o,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),i=this.safeIntegerProduct(e,"created_at_ts",.001);void 0===i&&(i=this.parse8601(this.safeString(e,"created_at")));var n=this.safeString(e,"side"),a=this.safeString(e,"market_string"),s=this.safeSymbol(a,t,"_"),o=this.safeNumber2(e,"base_volume","base_amount"),u=this.safeString(e,"price"),c=this.safeString2(e,"market_amount","amount"),d=this.parseNumber(u),h=this.parseNumber(c);void 0===o&&(o=this.parseNumber(y.stringMul(u,c)));var l=void 0,f=this.safeNumber(e,"base_fee");if(void 0!==f){var p=void 0===t?void 0:t.quote;l={currency:p,cost:f}}var v=this.safeValue(e,"taker",!0),m=v?"taker":"maker",g=this.safeString(e,"order_id"),b={id:r,info:e,timestamp:i,datetime:this.iso8601(i),symbol:s,order:g,type:void 0,side:n,takerOrMaker:m,price:d,amount:h,cost:o,fee:l};return b}},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p,v,m,g=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=g.length>0&&void 0!==g[0]?g[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetBalancesAll(t);case 5:for(r=e.sent,n=this.safeValue(r,"data",{}),a=this.safeValue(n,"balances",[]),s={info:r},o=0;o<a.length;o++)u=a[o],c=this.safeString(u,"currency"),d=this.safeCurrencyCode(c),(h=d in s?s[d]:this.account()).free=this.safeString(u,"balance"),h.used="0",s[d]=h;for(a=this.safeValue(n,"order_balances",[]),l=0;l<a.length;l++)f=a[l],p=this.safeString(f,"currency"),v=this.safeCurrencyCode(p),(m=v in s?s[v]:this.account()).used=this.safeString(f,"balance"),s[v]=m;return e.abrupt("return",this.parseBalance(s,!1));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,u,c,d,h,l,f,v=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=v.length>4&&void 0!==v[4]?v[4]:void 0,o=v.length>5&&void 0!==v[5]?v[5]:{},"limit"===r){e.next=4;break}throw new p(this.id+" createOrder() allows limit orders only");case 4:return e.next=6,this.loadMarkets();case 6:return u=this.market(t),c={amount:this.amountToPrecision(t,a),market_id:u.numericId,price:this.priceToPrecision(t,s)},d="sell"===n?"privatePostSellLimit":"privatePostBuyLimit",e.next=11,this[d](this.extend(c,o));case 11:return h=e.sent,l=this.safeValue(h,"data",{}),f=this.safeValue(l,"order",{}),e.abrupt("return",this.parseOrder(f,u));case 15:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),i=this.parse8601(this.safeString(e,"created_at")),n=this.safeString(e,"order_type"),a=void 0,s=void 0;if(void 0!==n){var o=n.split("_");s=this.safeString(o,0),a=this.safeString(o,1)}var u=this.safeNumber(e,"price"),c=this.safeNumber(e,"market_amount"),d=this.safeNumber(e,"market_amount_remaining"),h=this.safeValue(e,"open",!1),l=this.safeString(e,"close_reason"),f=void 0;f=h?"open":"canceled"===l?"canceled":"closed";var p=this.safeString(e,"market_string"),v=(t=this.safeMarket(p,t,"_")).symbol,m=this.safeValue(e,"trades",[]),g=this.parseTrades(m,t,void 0,void 0,{order:r,side:s,type:a});return this.safeOrder({info:e,id:r,clientOrderId:void 0,timestamp:i,datetime:this.iso8601(i),lastTradeTimestamp:void 0,symbol:v,type:a,timeInForce:void 0,postOnly:void 0,side:s,price:u,stopPrice:void 0,average:void 0,amount:c,remaining:d,filled:void 0,status:f,fee:void 0,fees:void 0,cost:void 0,trades:g})}},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:{},n={id:parseInt(t)},e.next=5,this.privatePostCancelOrder(this.extend(n,r));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u.length>1&&void 0!==u[1]?u[1]:void 0,r=u.length>2&&void 0!==u[2]?u[2]:{},e.next=4,this.loadMarkets();case 4:return n={order_id:t},e.next=7,this.privateGetOrderOrderId(this.extend(n,r));case 7:return a=e.sent,s=this.safeValue(a,"data",{}),o=this.safeValue(s,"order",{}),e.abrupt("return",this.parseOrder(o));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:void 0,r=l.length>1&&void 0!==l[1]?l[1]:void 0,n=l.length>2&&void 0!==l[2]?l[2]:void 0,a=l.length>3&&void 0!==l[3]?l[3]:{},e.next=6,this.loadMarkets();case 6:return s={},o=void 0,void 0!==(u=this.safeValue(a,"market_id"))?s.market_id=u:void 0!==t&&(o=this.market(t),s.market_string=o.id),e.next=12,this.privateGetOrders(this.extend(s,a));case 12:return c=e.sent,d=this.safeValue(c,"data",{}),h=this.safeValue(d,"orders",[]),e.abrupt("return",this.parseOrders(h,o,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:void 0,a=o.length>3&&void 0!==o[3]?o[3]:{},s={open:!0},e.next=7,this.fetchOrders(t,r,n,this.extend(s,a));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:void 0,a=o.length>3&&void 0!==o[3]?o[3]:{},s={open:!1},e.next=7,this.fetchOrders(t,r,n,this.extend(s,a));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseDepositAddress",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0===t?void 0:t.code,i=this.safeString(e,"address"),n=void 0;if(void 0!==i){var a=i.split(":");i=this.safeString(a,0),n=this.safeString(a,1)}return this.checkAddress(i),{currency:r,address:i,tag:n,info:e}}},{key:"fetchDepositAddress",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.currency(t),a={currency:n.id},e.next=7,this.privatePostDepositAddressCurrency(this.extend(a,r));case 7:return s=e.sent,o=this.safeValue(s,"data",{}),e.abrupt("return",this.parseDepositAddress(o,n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchDeposit",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u.length>1&&void 0!==u[1]?u[1]:void 0,r=u.length>2&&void 0!==u[2]?u[2]:{},e.next=4,this.loadMarkets();case 4:return n={deposit_id:t},e.next=7,this.privateGetDepositDepositId(this.extend(n,r));case 7:return a=e.sent,s=this.safeValue(a,"data",{}),o=this.safeValue(s,"deposit",{}),e.abrupt("return",this.parseTransaction(o));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchDeposits",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return s=void 0,void 0!==t&&(s=this.currency(t)),e.next=10,this.privateGetDeposits(a);case 10:return o=e.sent,u=this.safeValue(o,"data",{}),c=this.safeValue(u,"deposits",[]),e.abrupt("return",this.parseTransactions(c,s,r,n));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchWithdrawal",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u.length>1&&void 0!==u[1]?u[1]:void 0,r=u.length>2&&void 0!==u[2]?u[2]:{},e.next=4,this.loadMarkets();case 4:return n={withdraw_id:t},e.next=7,this.privateGetWithdrawWithdrawId(this.extend(n,r));case 7:return a=e.sent,s=this.safeValue(a,"data",{}),o=this.safeValue(s,"withdraw",{}),e.abrupt("return",this.parseTransaction(o));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchWithdrawals",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return s=void 0,void 0!==t&&(s=this.currency(t)),e.next=10,this.privateGetWithdraws(a);case 10:return o=e.sent,u=this.safeValue(o,"data",{}),c=this.safeValue(u,"withdraws",[]),e.abrupt("return",this.parseTransactions(c,s,r,n));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTransaction",value:function(e){var t=this.parse8601(this.safeString(e,"created_at")),r=this.safeString(e,"id"),i=this.safeValue(e,"network_data",{}),n=this.safeValue(i,"unsigned_tx",{}),a=this.safeString(n,"from"),s=this.safeString(i,"txid"),o=this.safeString(e,"address"),u=void 0;if(void 0!==o){var c=o.split(":"),d=c.length;d>1&&(o=this.safeString(c,0),u=this.safeString(c,1))}var h=o,l=void 0,f=u,p=this.safeValue(e,"cancel_requested"),v=void 0===p?"deposit":"withdrawal",m=this.safeNumber(e,"amount"),g=this.safeString(e,"currency"),y=this.safeCurrencyCode(g),b=this.parseTransactionStatus(this.safeString(e,"status")),x=this.safeString(e,"code");p?b="canceled":void 0===b&&(b=this.parseTransactionStatus(x));var k=void 0;return{info:e,id:r,txid:s,timestamp:t,datetime:this.iso8601(t),addressFrom:a,addressTo:h,address:o,tagFrom:l,tagTo:f,tag:u,type:v,amount:m,currency:y,status:b,updated:void 0,fee:k}}},{key:"parseTransactionStatus",value:function(e){return this.safeString({initiated:"pending",needs_create:"pending",credited:"ok",confirmed:"ok"},e,e)}},{key:"withdraw",value:function(){var e=n(i.mark((function e(t,r,n){var a,s,o,u,c,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=l.length>3&&void 0!==l[3]?l[3]:void 0,s=l.length>4&&void 0!==l[4]?l[4]:{},e.next=4,this.loadMarkets();case 4:return o=this.currency(t),u={address:n,amount:r,currency:o.id},void 0!==a&&(u.address+=":"+a),e.next=9,this.privatePostWithdraw(this.extend(u,s));case 9:return c=e.sent,d=this.safeValue(c,"data",{}),h=this.parseTransaction(d),e.abrupt("return",this.extend(h,{currency:t,address:n,addressTo:n,tag:a,tagTo:a,amount:r}));case 13:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"nonce",value:function(){return this.milliseconds()}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s="/"+this.version+"/";"private"===t&&(s+="user/"),s+=this.implodeParams(e,i);var o=this.omit(i,this.extractParams(e));if("POST"===r?a=this.json(o):Object.keys(o).length&&(s+="?"+this.urlencode(o)),"private"===t){var u=this.milliseconds().toString(),c="POST"===r?a:"",d=[r,s,u,c,this.secret].join("\n"),h=this.hash(this.encode(d),"sha256","base64"),l=this.apiKey;"string"!==typeof l&&(l=l.toString());var f="HMAC-SHA256 "+l+":"+h;n={Authorization:f,"HMAC-Timestamp":u},"POST"===r&&(n["Content-Type"]="application/json")}return{url:s=this.urls.api+s,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,u){if(void 0!==s){var c=this.safeValue(s,"errors",[]);if(!(c.length<1)){for(var d=this.id+" "+a,h=0;h<c.length;h++){var l=c[h],p=this.safeString(l,"code");this.throwExactlyMatchedException(this.exceptions.exact,p,d)}throw new f(d)}}}}]),r}(h)},function(e,t,r){"use strict";var i=r(21),n=r(7),a=r(8),s=r(1),o=r(2),u=r(6),c=r(3),d=r(4),h=r(5),l=r(11),f=r(18).ROUND,p=r(10),v=p.ExchangeError,m=p.ArgumentsRequired,g=p.AuthenticationError,y=p.InsufficientFunds,b=p.InvalidOrder,x=p.OrderNotFound;e.exports=function(e){d(r,e);var t=h(r);function r(){return s(this,r),t.apply(this,arguments)}return o(r,[{key:"describe",value:function(){return this.deepExtend(u(c(r.prototype),"describe",this).call(this),{id:"rightbtc",name:"RightBTC",countries:["AE"],has:{cancelOrder:!0,createOrder:!0,privateAPI:!1,fetchBalance:!0,fetchClosedOrders:!1,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:"emulated",fetchOrderBook:!0,fetchOrders:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0},timeframes:{"1m":"min1","5m":"min5","15m":"min15","30m":"min30","1h":"hr1","1d":"day1","1w":"week"},urls:{logo:"https://user-images.githubusercontent.com/51840849/87182092-1f372700-c2ec-11ea-8f9e-01b4d3ff8941.jpg",api:"https://www.rightbtc.com/api",www:"https://www.rightbtc.com",doc:["https://docs.rightbtc.com/api/"]},api:{public:{get:["trading_pairs","ticker/{trading_pair}","tickers","depth/{trading_pair}","depth/{trading_pair}/{count}","trades/{trading_pair}","trades/{trading_pair}/{count}","candlestick/latest/{trading_pair}","candlestick/{timeSymbol}/{trading_pair}","candlestick/{timeSymbol}/{trading_pair}/{count}"]},trader:{get:["balance/{symbol}","balances","deposits/{asset}/{page}","withdrawals/{asset}/{page}","orderpage/{trading_pair}/{cursor}","orders/{trading_pair}/{ids}","history/{trading_pair}/{ids}","historys/{trading_pair}/{page}","trading_pairs"],post:["order"],delete:["order/{trading_pair}/{ids}"]}},fees:{trading:{maker:.001,taker:.002},funding:{withdraw:{ETP:.01,BTC:5e-4,ETH:.005,ETC:.01,STORJ:3,LTC:.01,ZEC:.001,BCC:.001,XRB:0,NXS:.1}}},commonCurrencies:{XRB:"NANO"},exceptions:{ERR_USERTOKEN_NOT_FOUND:g,ERR_ASSET_NOT_EXISTS:v,ERR_ASSET_NOT_AVAILABLE:v,ERR_BALANCE_NOT_ENOUGH:y,ERR_CREATE_ORDER:b,ERR_CANDLESTICK_DATA:v}})}},{key:"fetchMarkets",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,u,c,d,h,l,f,p,v=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=v.length>0&&void 0!==v[0]?v[0]:{},e.next=3,this.publicGetTradingPairs(t);case 3:for(r=e.sent,i=Object.keys(r),a=[],s=0;s<i.length;s++)o=i[s],u=r[o],c=this.safeString(u,"bid_asset_symbol"),d=this.safeString(u,"ask_asset_symbol"),h=this.safeCurrencyCode(c),l=this.safeCurrencyCode(d),f=h+"/"+l,p={amount:this.safeInteger(u,"bid_asset_decimals"),price:this.safeInteger(u,"ask_asset_decimals")},a.push({id:o,symbol:f,base:h,quote:l,baseId:c,quoteId:d,active:!0,precision:p,limits:{amount:{min:Math.pow(10,-p.amount),max:Math.pow(10,p.price)},price:{min:Math.pow(10,-p.price),max:Math.pow(10,p.price)},cost:{min:void 0,max:void 0}},info:u});return e.abrupt("return",a);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"divideSafeNumber",value:function(e,t,r){var i=this.safeNumber(e,t);return void 0!==i?i/r:i}},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=t.symbol,i=this.safeInteger(e,"date"),n=this.divideSafeNumber(e,"last",1e8),a=this.divideSafeNumber(e,"high",1e8),s=this.divideSafeNumber(e,"low",1e8),o=this.divideSafeNumber(e,"buy",1e8),u=this.divideSafeNumber(e,"sell",1e8),c=this.divideSafeNumber(e,"vol24h",1e8);return{symbol:r,timestamp:i,datetime:this.iso8601(i),high:a,low:s,bid:o,bidVolume:void 0,ask:u,askVolume:void 0,vwap:void 0,open:void 0,close:n,last:n,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:c,quoteVolume:void 0,info:e}}},{key:"fetchTicker",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:{},e.next=3,this.loadMarkets();case 3:return i=this.market(t),a={trading_pair:i.id},e.next=7,this.publicGetTickerTradingPair(this.extend(a,r));case 7:if(s=e.sent,void 0!==(o=this.safeValue(s,"result"))){e.next=11;break}throw new v(this.id+" fetchTicker returned an empty response for symbol "+t);case 11:return e.abrupt("return",this.parseTicker(o,i));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTickers",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,u,c,d,h,l=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:void 0,r=l.length>1&&void 0!==l[1]?l[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetTickers(r);case 6:i=e.sent,a=i.result,s={},o=0;case 10:if(!(o<a.length)){e.next=21;break}if(u=a[o],(c=u.market)in this.marketsById){e.next=15;break}return e.abrupt("continue",18);case 15:d=this.marketsById[c],h=d.symbol,s[h]=this.parseTicker(u,d);case 18:o++,e.next=10;break;case 21:return e.abrupt("return",this.filterByArray(s,"symbol",t));case 22:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=a(n.mark((function e(t){var r,a,s,o,u,c,d,h,l,f,p,v,m,g,y=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=y.length>1&&void 0!==y[1]?y[1]:void 0,a=y.length>2&&void 0!==y[2]?y[2]:{},e.next=4,this.loadMarkets();case 4:return s={trading_pair:this.marketId(t)},o="publicGetDepthTradingPair",void 0!==r&&(o+="Count",s.count=r),e.next=9,this[o](this.extend(s,a));case 9:for(u=e.sent,c={},d=["bid","ask"],h=0;h<d.length;h++)for(l=d[h],c[l]=[],f=0;f<u.result[l].length;f++)p=i(u.result[l][f],3),v=p[0],m=p[1],g=p[2],c[l].push([v/1e8,m/1e8,g/1e8]);return e.abrupt("return",this.parseOrderBook(c,void 0,"bid","ask"));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeInteger(e,"date");void 0===r&&(r=this.parse8601(this.safeString(e,"created_at")));var i=this.safeString(e,"tid");i=this.safeString(e,"trade_id",i);var n=this.safeString(e,"order_id"),a=this.divideSafeNumber(e,"price",1e8),s=this.safeNumber(e,"amount");void 0!==(s=this.safeNumber(e,"quantity",s))&&(s/=1e8);var o=this.safeString(e,"trading_pair"),u=this.safeSymbol(o,t),c=this.costToPrecision(u,a*s);c=parseFloat(c);var d=this.safeStringLower(e,"side");return"b"===d?d="buy":"s"===d&&(d="sell"),{id:i,info:e,timestamp:r,datetime:this.iso8601(r),symbol:u,order:n,type:"limit",side:d,takerOrMaker:void 0,price:a,amount:s,cost:c,fee:void 0}}},{key:"fetchTrades",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,u,c=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,i=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={trading_pair:s.id},e.next=9,this.publicGetTradesTradingPair(this.extend(o,a));case 9:return u=e.sent,e.abrupt("return",this.parseTrades(u.result,s,r,i));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){return[this.safeInteger(e,0),parseFloat(e[2])/1e8,parseFloat(e[3])/1e8,parseFloat(e[4])/1e8,parseFloat(e[5])/1e8,parseFloat(e[1])/1e8]}},{key:"fetchOHLCV",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,u,c,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:"5m",i=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:void 0,s=h.length>4&&void 0!==h[4]?h[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),u={trading_pair:o.id,timeSymbol:this.timeframes[r]},e.next=10,this.publicGetCandlestickTimeSymbolTradingPair(this.extend(u,s));case 10:return c=e.sent,d=this.safeValue(c,"result",[]),e.abrupt("return",this.parseOHLCVs(d,o,r,i,a));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,u,c,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.traderGetBalances(t);case 5:for(r=e.sent,i={info:r},a=this.safeValue(r,"result",[]),s=0;s<a.length;s++)o=a[s],u=this.safeString(o,"asset"),c=this.safeCurrencyCode(u),(d=this.account()).free=this.divideSafeNumber(o,"balance",1e8),d.used=this.divideSafeNumber(o,"frozen",1e8),i[c]=d;return e.abrupt("return",this.parseBalance(i));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=a(n.mark((function e(t,r,i,a){var s,o,u,c,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=h.length>4&&void 0!==h[4]?h[4]:void 0,o=h.length>5&&void 0!==h[5]?h[5]:{},e.next=4,this.loadMarkets();case 4:return u=this.market(t),c={trading_pair:u.id,quantity:parseInt(this.decimalToPrecision(1e8*a,f,0,this.precisionMode)),limit:parseInt(this.decimalToPrecision(1e8*s,f,0,this.precisionMode)),type:r.toUpperCase(),side:i.toUpperCase()},e.next=8,this.traderPostOrder(this.extend(c,o));case 8:return d=e.sent,e.abrupt("return",this.parseOrder(d));case 10:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=u.length>1&&void 0!==u[1]?u[1]:void 0,i=u.length>2&&void 0!==u[2]?u[2]:{},void 0!==r){e.next=4;break}throw new m(this.id+" cancelOrder() requires a symbol argument");case 4:return e.next=6,this.loadMarkets();case 6:return a=this.market(r),s={trading_pair:a.id,ids:t},e.next=10,this.traderDeleteOrderTradingPairIds(this.extend(s,i));case 10:return o=e.sent,e.abrupt("return",o);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({NEW:"open",TRADE:"closed",CANCEL:"canceled"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),i=this.parseOrderStatus(this.safeString(e,"status")),n=this.safeString(e,"trading_pair"),a=this.safeSymbol(n,t),s=this.safeInteger(e,"created");void 0===s&&(s=this.parse8601(this.safeString(e,"created_at"))),"time"in e?s=e.time:"transactTime"in e&&(s=e.transactTime);var o=this.safeNumber2(e,"limit","price");void 0!==o&&(o/=1e8);var u=this.divideSafeNumber(e,"quantity",1e8),c=this.divideSafeNumber(e,"filled_quantity",1e8),d=this.divideSafeNumber(e,"rest",1e8),h=this.divideSafeNumber(e,"cost",1e8),l="limit",f=this.safeStringLower(e,"side"),p=this.divideSafeNumber(e,"min_fee",1e8),v=void 0;if(void 0!==p){var m=void 0;void 0!==t&&(m=t.quote),v={rate:this.safeNumber(e,"fee"),cost:p,currency:m}}var g=void 0;return this.safeOrder({info:e,id:r,clientOrderId:void 0,timestamp:s,datetime:this.iso8601(s),lastTradeTimestamp:void 0,symbol:a,type:l,timeInForce:void 0,postOnly:void 0,side:f,price:o,stopPrice:void 0,amount:u,cost:h,filled:c,remaining:d,status:i,fee:v,trades:g,average:void 0})}},{key:"fetchOrder",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,u,c,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=d.length>1&&void 0!==d[1]?d[1]:void 0,i=d.length>2&&void 0!==d[2]?d[2]:{},void 0!==r){e.next=4;break}throw new m(this.id+" fetchOrder() requires a symbol argument");case 4:return e.next=6,this.loadMarkets();case 6:return a=this.market(r),s={trading_pair:a.id,ids:t},e.next=10,this.traderGetOrdersTradingPairIds(this.extend(s,i));case 10:if(o=e.sent,u=this.parseOrders(o.result,a),c=this.indexBy(u,"id"),t in c){e.next=15;break}throw new x(this.id+" fetchOrder could not find order "+t.toString()+" in open orders.");case 15:return e.abrupt("return",c[t]);case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,u,c=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=c.length>0&&void 0!==c[0]?c[0]:void 0,r=c.length>1&&void 0!==c[1]?c[1]:void 0,i=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},void 0!==t){e.next=6;break}throw new m(this.id+" fetchOpenOrders() requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.market(t),o={trading_pair:s.id,cursor:0},e.next=12,this.traderGetOrderpageTradingPairCursor(this.extend(o,a));case 12:return u=e.sent,e.abrupt("return",this.parseOrders(u.result.orders,s,r,i));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrders",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,u,c,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,i=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},s=this.safeString(a,"ids"),void 0!==t&&void 0!==s){e.next=7;break}throw new m(this.id+" fetchOrders() requires a 'symbol' argument and an extra 'ids' parameter. The 'ids' should be an array or a string of one or more order ids separated with slashes.");case 7:return Array.isArray(s)&&(s=s.join("/")),e.next=10,this.loadMarkets();case 10:return o=this.market(t),u={trading_pair:o.id,ids:s},e.next=14,this.traderGetHistoryTradingPairIds(this.extend(u,a));case 14:return c=e.sent,e.abrupt("return",this.parseOrders(c.result,void 0,r,i));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,u,c=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=c.length>0&&void 0!==c[0]?c[0]:void 0,r=c.length>1&&void 0!==c[1]?c[1]:void 0,i=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},void 0!==t){e.next=6;break}throw new m(this.id+" fetchMyTrades() requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.market(t),o={trading_pair:s.id,page:0},e.next=12,this.traderGetHistorysTradingPairPage(this.extend(o,a));case 12:return u=e.sent,e.abrupt("return",this.parseTrades(u.result,void 0,r,i));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.omit(i,this.extractParams(e)),o=this.urls.api+"/"+t+"/"+this.implodeParams(e,i);return"public"===t?Object.keys(s).length&&(o+="?"+this.urlencode(s)):(this.checkRequiredCredentials(),n={apikey:this.apiKey,signature:this.secret},"GET"===r?Object.keys(s).length&&(o+="?"+this.urlencode(s)):(a=this.json(s),n["Content-Type"]="application/json")),{url:o,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,u){if(void 0!==s){var c=this.safeValue(s,"status");if(void 0!==c)if("1"!==this.safeString(c,"success")){var d=this.safeString(c,"message"),h=this.id+" "+a;throw this.throwExactlyMatchedException(this.exceptions,d,h),new v(h)}}}}]),r}(l)},function(e,t,r){"use strict";var i=r(7),n=r(8),a=r(1),s=r(2),o=r(6),u=r(3),c=r(4),d=r(5),h=r(11),l=r(10),f=l.AuthenticationError,p=l.ExchangeError,v=l.BadSymbol,m=l.BadRequest,g=l.InvalidOrder,y=l.ArgumentsRequired,b=l.OrderNotFound,x=l.InsufficientFunds,k=l.DDoSProtection,w=r(18).TICK_SIZE,_=r(12);e.exports=function(e){c(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(u(r.prototype),"describe",this).call(this),{id:"ripio",name:"Ripio",countries:["AR","BR"],rateLimit:50,version:"v1",pro:!0,has:{CORS:!1,cancelOrder:!0,createOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchCurrencies:!0,fetchMyTrades:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/94507548-a83d6a80-0218-11eb-9998-28b9cec54165.jpg",api:{public:"https://api.exchange.ripio.com/api",private:"https://api.exchange.ripio.com/api"},www:"https://exchange.ripio.com",doc:["https://exchange.ripio.com/en/api/"],fees:"https://exchange.ripio.com/en/fee"},api:{public:{get:["rate/all/","rate/{pair}/","orderbook/{pair}/","tradehistory/{pair}/","pair/","currency/","orderbook/{pair}/depth/"]},private:{get:["balances/exchange_balances/","order/{pair}/{order_id}/","order/{pair}/","trade/{pair}/"],post:["order/{pair}/","order/{pair}/{order_id}/cancel/"]}},fees:{trading:{tierBased:!0,percentage:!0,taker:0,maker:0}},precisionMode:w,requiredCredentials:{apiKey:!0,secret:!1},exceptions:{exact:{},broad:{"Authentication credentials were not provided":f,"Disabled pair":v,"Invalid order type":g,"Your balance is not enough":x,"Order couldn't be created":p,"not found":b,"Invalid pair":v,"amount must be a number":m,"Total must be at least":g,"Account not found":m,"Wrong password provided":f,"User tokens limit":k,"Something unexpected ocurred":p,account_balance:m}}})}},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p,v,m,g,y,b,x,k=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=k.length>0&&void 0!==k[0]?k[0]:{},e.next=3,this.publicGetPair(t);case 3:for(r=e.sent,n=[],a=this.safeValue(r,"results",[]),s=0;s<a.length;s++)o=a[s],u=this.safeString(o,"base"),c=this.safeString(o,"quote"),d=this.safeString(o,"symbol"),h=this.safeCurrencyCode(u),l=this.safeCurrencyCode(c),f=h+"/"+l,p={amount:this.safeNumber(o,"min_amount"),price:this.safeNumber(o,"price_tick")},v={amount:{min:this.safeNumber(o,"min_amount"),max:void 0},price:{min:void 0,max:void 0},cost:{min:this.safeNumber(o,"min_value"),max:void 0}},m=this.safeValue(o,"enabled",!0),g=this.safeValue(o,"fees",[]),y=this.safeValue(g,0,{}),b=this.safeNumber(y,"maker_fee",0),x=this.safeNumber(y,"taker_fee",0),n.push({id:d,symbol:f,base:h,quote:l,baseId:u,quoteId:c,precision:p,maker:b,taker:x,limits:v,info:o,active:m});return e.abrupt("return",n);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchCurrencies",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:{},e.next=3,this.publicGetCurrency(t);case 3:for(r=e.sent,n=this.safeValue(r,"results",[]),a={},s=0;s<n.length;s++)o=n[s],u=this.safeString(o,"currency"),c=this.safeCurrencyCode(u),d=this.safeString(o,"name"),h=this.safeValue(o,"enabled",!0),l=this.safeInteger(o,"decimal_places"),a[c]={id:u,code:c,name:d,info:o,active:h,fee:void 0,precision:l,limits:{amount:{min:void 0,max:void 0},withdraw:{min:void 0,max:void 0}}};return e.abrupt("return",a);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.parse8601(this.safeString(e,"created_at")),i=this.safeString(e,"pair"),n=this.safeSymbol(i,t),a=this.safeNumber(e,"last_price"),s=this.safeNumber(e,"avg");return{symbol:n,timestamp:r,datetime:this.iso8601(r),high:this.safeNumber(e,"high"),low:this.safeNumber(e,"low"),bid:this.safeNumber(e,"bid"),bidVolume:this.safeNumber(e,"bid_volume"),ask:this.safeNumber(e,"ask"),askVolume:this.safeNumber(e,"ask_volume"),vwap:void 0,open:void 0,close:a,last:a,previousClose:void 0,change:void 0,percentage:void 0,average:s,baseVolume:void 0,quoteVolume:void 0,info:e}}},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={pair:n.id},e.next=7,this.publicGetRatePair(this.extend(a,r));case 7:return s=e.sent,e.abrupt("return",this.parseTicker(s,n));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:void 0,r=c.length>1&&void 0!==c[1]?c[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetRateAll(r);case 6:for(n=e.sent,a={},s=0;s<n.length;s++)o=this.parseTicker(n[s]),u=o.symbol,a[u]=o;return e.abrupt("return",this.filterByArray(a,"symbol",t));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.length>1&&void 0!==o[1]?o[1]:void 0,r=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return n={pair:this.marketId(t)},e.next=7,this.publicGetOrderbookPair(this.extend(n,r));case 7:return a=e.sent,(s=this.parseOrderBook(a,void 0,"buy","sell","price","amount")).nonce=this.safeInteger(a,"updated_id"),e.abrupt("return",s);case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),i=this.safeInteger(e,"timestamp");i=this.safeTimestamp(e,"created_at",i);var n=this.safeString(e,"side"),a=this.safeString(e,"taker_side"),s=a===n?"taker":"maker";void 0!==n&&(n=n.toLowerCase());var o=this.safeString2(e,"price","match_price"),u=this.safeString2(e,"amount","exchanged"),c=this.parseNumber(o),d=this.parseNumber(u),h=this.parseNumber(_.stringMul(o,u)),l=this.safeString(e,"pair");t=this.safeMarket(l,t);var f=this.safeNumber(e,s+"_fee"),p=this.safeString(e,s),v=void 0;return void 0!==f&&(v={cost:f,currency:"buy"===n?t.base:t.quote}),{id:r,order:p,timestamp:i,datetime:this.iso8601(i),symbol:t.symbol,type:void 0,side:n,price:c,amount:d,cost:h,takerOrMaker:s,fee:v,info:e}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={pair:s.id},e.next=9,this.publicGetTradehistoryPair(this.extend(o,a));case 9:return u=e.sent,e.abrupt("return",this.parseTrades(u,s,r,n));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetBalancesExchangeBalances(t);case 5:for(r=e.sent,n={info:r},a=0;a<r.length;a++)s=r[a],o=this.safeString(s,"symbol"),u=this.safeCurrencyCode(o),(c=this.account()).free=this.safeString(s,"available"),c.used=this.safeString(s,"locked"),n[u]=c;return e.abrupt("return",this.parseBalance(n,!1));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,u,c,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=f.length>4&&void 0!==f[4]?f[4]:void 0,o=f.length>5&&void 0!==f[5]?f[5]:{},e.next=4,this.loadMarkets();case 4:return u=this.market(t),c=r.toUpperCase(),d=n.toUpperCase(),h={pair:u.id,order_type:c,side:d,amount:this.amountToPrecision(t,a)},"LIMIT"===c&&(h.limit_price=this.priceToPrecision(t,s)),e.next=11,this.privatePostOrderPair(this.extend(h,o));case 11:return l=e.sent,e.abrupt("return",this.parseOrder(l,u));case 13:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:{},void 0!==r){e.next=4;break}throw new y(this.id+" cancelOrder() requires a symbol argument");case 4:return e.next=6,this.loadMarkets();case 6:return a=this.market(r),s={pair:a.id,order_id:t},e.next=10,this.privatePostOrderPairOrderIdCancel(this.extend(s,n));case 10:return o=e.sent,e.abrupt("return",this.parseOrder(o,a));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:{},void 0!==r){e.next=4;break}throw new y(this.id+" fetchOrder() requires a symbol argument");case 4:return e.next=6,this.loadMarkets();case 6:return a=this.market(r),s={pair:a.id,order_id:t},e.next=10,this.privateGetOrderPairOrderId(this.extend(s,n));case 10:return o=e.sent,e.abrupt("return",this.parseOrder(o,a));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:{},void 0!==t){e.next=6;break}throw new y(this.id+" fetchOrders() requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.market(t),o={pair:s.id},void 0!==n&&(o.offset=n),e.next=13,this.privateGetOrderPair(this.extend(o,a));case 13:return u=e.sent,c=this.safeValue(u,"results",{}),d=this.safeValue(c,"data",[]),e.abrupt("return",this.parseOrders(d,s,r,n));case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:void 0,a=o.length>3&&void 0!==o[3]?o[3]:{},s={status:"OPEN,PART"},e.next=7,this.fetchOrders(t,r,n,this.extend(s,a));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:void 0,a=o.length>3&&void 0!==o[3]?o[3]:{},s={status:"CLOS,CANC,COMP"},e.next=7,this.fetchOrders(t,r,n,this.extend(s,a));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({OPEN:"open",PART:"open",CLOS:"canceled",CANC:"canceled",COMP:"closed"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"order_id"),i=this.safeNumber(e,"amount"),n=this.safeNumber(e,"notional"),a=this.safeStringLower(e,"order_type"),s="market"===a?"fill_price":"limit_price",o=this.safeNumber(e,s),u=this.safeStringLower(e,"side"),c=this.parseOrderStatus(this.safeString(e,"status")),d=this.safeTimestamp(e,"created_at"),h=this.safeValue(e,"fill_price"),l=this.safeNumber(e,"filled"),f=void 0,p=this.safeValue(e,"fills"),v=void 0,m=void 0;if(void 0!==p){var g=p.length;if(g>0){l=0,n=0,v=this.parseTrades(p,t,void 0,void 0,{order:r,side:u});for(var y=0;y<v.length;y++){var b=v[y];l=this.sum(b.amount,l),n=this.sum(b.cost,n),m=b.timestamp}void 0===h&&l>0&&(h=n/l)}}void 0!==l&&(void 0===n&&void 0!==o&&(n=o*l),void 0!==i&&(f=Math.max(0,i-l)));var x=this.safeString(e,"pair"),k=this.safeSymbol(x,t,"_"),w=this.safeNumber(e,"stop_price");return{id:r,clientOrderId:void 0,info:e,timestamp:d,datetime:this.iso8601(d),lastTradeTimestamp:m,symbol:k,type:a,timeInForce:void 0,postOnly:void 0,side:u,price:o,stopPrice:w,amount:i,cost:n,average:h,filled:l,remaining:f,status:c,fee:void 0,trades:v}}},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:{},void 0!==t){e.next=6;break}throw new y(this.id+" fetchMyTrades() requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.market(t),o={pair:s.id},void 0!==n&&(o.limit=n),e.next=13,this.privateGetTradePair(this.extend(o,a));case 13:return u=e.sent,c=this.safeValue(u,"results",{}),d=this.safeValue(c,"data",[]),e.abrupt("return",this.parseTrades(d,s,r,n));case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s="/"+this.version+"/"+this.implodeParams(e,i),o=this.urls.api[t]+s,u=this.omit(i,this.extractParams(e));return"public"===t?Object.keys(u).length&&(o+="?"+this.urlencode(u)):"private"===t&&(this.checkRequiredCredentials(),"POST"===r?a=this.json(u):Object.keys(u).length&&(o+="?"+this.urlencode(u)),n={"Content-Type":"application/json",Authorization:"Bearer "+this.apiKey}),{url:o,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,u){if(void 0!==s){var c=this.safeString(s,"detail");if(void 0!==c){var d=this.id+" "+a;this.throwBroadlyMatchedException(this.exceptions.broad,c,d)}var h=this.safeValue(s,"errors");if(void 0!==h){for(var l=this.id+" "+a,f=Object.keys(h),v=0;v<f.length;v++){var m=f[v],g=this.safeValue(h,m,[]),y=this.safeString(g,0);this.throwBroadlyMatchedException(this.exceptions.broad,y,l)}throw new p(l)}}}}]),r}(h)},function(e,t,r){"use strict";var i=r(7),n=r(8),a=r(1),s=r(2),o=r(6),u=r(3),c=r(4),d=r(5),h=r(11),l=r(10).ArgumentsRequired,f=r(12);e.exports=function(e){c(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(u(r.prototype),"describe",this).call(this),{id:"southxchange",name:"SouthXchange",countries:["AR"],rateLimit:1e3,has:{cancelOrder:!0,CORS:!0,createDepositAddress:!0,createOrder:!0,fetchBalance:!0,fetchDeposits:!0,fetchLedger:!0,fetchMarkets:!0,fetchOpenOrders:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,fetchTransactions:!0,fetchWithdrawals:!0,withdraw:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/27838912-4f94ec8a-60f6-11e7-9e5d-bbf9bd50a559.jpg",api:"https://www.southxchange.com/api",www:"https://www.southxchange.com",doc:"https://www.southxchange.com/Home/Api"},api:{public:{get:["markets","price/{symbol}","prices","book/{symbol}","trades/{symbol}"]},private:{post:["cancelMarketOrders","cancelOrder","getOrder","generatenewaddress","listOrders","listBalances","listTransactions","placeOrder","withdraw"]}},fees:{trading:{tierBased:!1,percentage:!0,maker:.001,taker:.003}},commonCurrencies:{BHD:"Bithold",GHOST:"GHOSTPRISM",MTC:"Marinecoin",SMT:"SmartNode"}})}},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:{},e.next=3,this.publicGetMarkets(t);case 3:for(r=e.sent,n=[],a=0;a<r.length;a++)s=r[a],o=s[0],u=s[1],c=this.safeCurrencyCode(o),d=this.safeCurrencyCode(u),h=c+"/"+d,l=o+"/"+u,n.push({id:l,symbol:h,base:c,quote:d,baseId:o,quoteId:u,active:void 0,info:s,precision:this.precision,limits:this.limits});return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privatePostListBalances(t);case 5:for(r=e.sent,n={info:r},a=0;a<r.length;a++)s=r[a],o=this.safeString(s,"Currency"),u=this.safeCurrencyCode(o),c=this.safeString(s,"Deposited"),d=this.safeString(s,"Unconfirmed"),(h=this.account()).free=this.safeString(s,"Available"),h.total=f.stringAdd(c,d),n[u]=h;return e.abrupt("return",this.parseBalance(n,!1));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.loadMarkets();case 4:return n={symbol:this.marketId(t)},e.next=7,this.publicGetBookSymbol(this.extend(n,r));case 7:return a=e.sent,e.abrupt("return",this.parseOrderBook(a,void 0,"BuyOrders","SellOrders","Price","Amount"));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.milliseconds(),i=void 0;t&&(i=t.symbol);var n=this.safeNumber(e,"Last");return{symbol:i,timestamp:r,datetime:this.iso8601(r),high:void 0,low:void 0,bid:this.safeNumber(e,"Bid"),bidVolume:void 0,ask:this.safeNumber(e,"Ask"),askVolume:void 0,vwap:void 0,open:void 0,close:n,last:n,previousClose:void 0,change:void 0,percentage:this.safeNumber(e,"Variation24Hr"),average:void 0,baseVolume:this.safeNumber(e,"Volume24Hr"),quoteVolume:void 0,info:e}}},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:void 0,r=f.length>1&&void 0!==f[1]?f[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetPrices(r);case 6:for(n=e.sent,a=this.indexBy(n,"Market"),s=Object.keys(a),o={},u=0;u<s.length;u++)c=s[u],d=this.safeMarket(c),h=d.symbol,l=a[c],o[h]=this.parseTicker(l,d);return e.abrupt("return",this.filterByArray(o,"symbol",t));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={symbol:n.id},e.next=7,this.publicGetPriceSymbol(this.extend(a,r));case 7:return s=e.sent,e.abrupt("return",this.parseTicker(s,n));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e,t){var r=this.safeTimestamp(e,"At"),i=this.safeString(e,"Price"),n=this.safeString(e,"Amount"),a=this.parseNumber(i),s=this.parseNumber(n),o=this.parseNumber(f.stringMul(i,n)),u=this.safeString(e,"Type"),c=void 0;return void 0!==t&&(c=t.symbol),{info:e,timestamp:r,datetime:this.iso8601(r),symbol:c,id:void 0,order:void 0,type:void 0,side:u,price:a,takerOrMaker:void 0,amount:s,cost:o,fee:void 0}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={symbol:s.id},e.next=9,this.publicGetTradesSymbol(this.extend(o,a));case 9:return u=e.sent,e.abrupt("return",this.parseTrades(u,s,r,n));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrder",value:function(e){var t="open",r=this.safeString(e,"ListingCurrency"),i=this.safeString(e,"ReferenceCurrency"),n=this.safeCurrencyCode(r),a=this.safeCurrencyCode(i),s=n+"/"+a,o=void 0,u=this.safeNumber(e,"LimitPrice"),c=this.safeNumber(e,"OriginalAmount"),d=this.safeNumber(e,"Amount"),h="limit",l=this.safeStringLower(e,"Type"),f=this.safeString(e,"Code");return this.safeOrder({info:e,id:f,clientOrderId:void 0,timestamp:o,datetime:this.iso8601(o),lastTradeTimestamp:void 0,symbol:s,type:h,timeInForce:void 0,postOnly:void 0,side:l,price:u,stopPrice:void 0,amount:c,cost:void 0,filled:void 0,remaining:d,status:t,fee:void 0,average:void 0,trades:void 0})}},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.loadMarkets();case 6:return s=void 0,void 0!==t&&(s=this.market(t)),e.next=10,this.privatePostListOrders(a);case 10:return o=e.sent,e.abrupt("return",this.parseOrders(o,s,r,n));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,u,c,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=l.length>4&&void 0!==l[4]?l[4]:void 0,o=l.length>5&&void 0!==l[5]?l[5]:{},e.next=4,this.loadMarkets();case 4:return u=this.market(t),c={listingCurrency:u.base,referenceCurrency:u.quote,type:n,amount:a},"limit"===r&&(c.limitPrice=s),e.next=9,this.privatePostPlaceOrder(this.extend(c,o));case 9:return d=e.sent,h=JSON.parse(d),e.abrupt("return",{info:d,id:h});case 12:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:{},e.next=4,this.loadMarkets();case 4:return n={orderCode:t},e.next=7,this.privatePostCancelOrder(this.extend(n,r));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createDepositAddress",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.currency(t),a={currency:n.id},e.next=7,this.privatePostGeneratenewaddress(this.extend(a,r));case 7:return s=e.sent,'"'===(o=s)[0]&&'"'===(o=JSON.parse(o))[0]&&(o=JSON.parse(o)),u=o.split("|"),c=u.length,o=u[0],this.checkAddress(o),d=void 0,c>1&&(d=u[1]),e.abrupt("return",{currency:t,address:o,tag:d,info:s});case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"withdraw",value:function(){var e=n(i.mark((function e(t,r,n){var a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=d.length>3&&void 0!==d[3]?d[3]:void 0,s=d.length>4&&void 0!==d[4]?d[4]:{},this.checkAddress(n),e.next=5,this.loadMarkets();case 5:return o=this.currency(t),u={currency:o.id,address:n,amount:r},void 0!==a&&(u.address=n+"|"+a),e.next=10,this.privatePostWithdraw(this.extend(u,s));case 10:return c=e.sent,e.abrupt("return",{info:c,id:void 0});case 12:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"parseLedgerEntryType",value:function(e){return this.safeString({trade:"trade",tradefee:"fee",withdraw:"transaction",deposit:"transaction"},e,e)}},{key:"parseLedgerEntry",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"MovementId"),i=void 0,n=void 0,a=this.safeString2(e,"TradeId","OrderCode");a=this.safeString(e,"Hash",a);var s=this.safeString(e,"Address"),o=this.safeString(e,"Type"),u=this.parseLedgerEntryType(o),c=this.safeCurrencyCode(this.safeString(e,"CurrencyCode"),t),d=this.safeNumber(e,"Amount"),h=this.safeNumber(e,"TotalBalance"),l=void 0;void 0!==d&&(void 0!==h&&(l=h-d),"withdrawal"===o?i="out":"deposit"===o?i="in":"trade"!==o&&"tradefee"!==o||(i=d<0?"out":"in",d=Math.abs(d)));var f=this.parse8601(this.safeString(e,"Date")),p=void 0,v=this.safeString(e,"Status");return{info:e,id:r,direction:i,account:n,referenceId:a,referenceAccount:s,type:u,currency:c,amount:d,before:l,after:h,status:v,timestamp:f,datetime:this.iso8601(f),fee:p}}},{key:"fetchLedger",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},void 0!==t){e.next=6;break}throw new l(this.id+" fetchLedger() requires a code argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.currency(t),n=void 0===n?50:n,o={Currency:s.id,PageSize:n,SortField:"Date"},void 0===this.safeInteger(a,"PageIndex")&&(o.Descending=!0),e.next=15,this.privatePostListTransactions(this.extend(o,a));case 15:return u=e.sent,c=this.safeValue(u,"Result",[]),e.abrupt("return",this.parseLedger(c,s,r,n));case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTransactionStatus",value:function(e){return this.safeString({pending:"pending",processed:"pending",confirmed:"ok"},e,e)}},{key:"parseTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"MovementId"),i=this.safeNumber(e,"Amount"),n=this.safeString(e,"Address"),a=n,s=void 0,o=void 0,u=o,c=void 0,d=this.safeString(e,"Hash"),h=this.safeString(e,"Type"),l=this.parse8601(this.safeString(e,"Date")),f=this.parseTransactionStatus(this.safeString(e,"Status")),p=this.safeString(e,"CurrencyCode"),v=this.safeCurrencyCode(p,t);return{info:e,id:r,currency:v,amount:i,address:n,addressTo:a,addressFrom:s,tag:o,tagTo:u,tagFrom:c,status:f,type:h,updated:void 0,txid:d,timestamp:l,datetime:this.iso8601(l),fee:void 0}}},{key:"fetchTransactions",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},void 0!==t){e.next=6;break}throw new l(this.id+" fetchTransactions() requires a code argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.currency(t),n=void 0===n?50:n,o={Currency:s.id,TransactionType:"depositswithdrawals",PageSize:n,SortField:"Date"},void 0===this.safeInteger(a,"PageIndex")&&(o.Descending=!0),e.next=15,this.privatePostListTransactions(this.extend(o,a));case 15:return u=e.sent,c=this.safeValue(u,"Result",[]),e.abrupt("return",this.parseTransactions(c,s,r,n));case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchDeposits",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:void 0,a=o.length>3&&void 0!==o[3]?o[3]:{},s={TransactionType:"deposits"},e.next=7,this.fetchTransactions(t,r,n,this.extend(s,a));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchWithdrawals",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:void 0,a=o.length>3&&void 0!==o[3]?o[3]:{},s={TransactionType:"withdrawals"},e.next=7,this.fetchTransactions(t,r,n,this.extend(s,a));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.urls.api+"/"+this.implodeParams(e,i),o=this.omit(i,this.extractParams(e));if("private"===t){this.checkRequiredCredentials();var u=this.nonce();o=this.extend({key:this.apiKey,nonce:u},o),a=this.json(o),n={"Content-Type":"application/json",Hash:this.hmac(this.encode(a),this.encode(this.secret),"sha512")}}return{url:s,method:r,body:a,headers:n}}}]),r}(h)},function(e,t,r){"use strict";var i=r(7),n=r(8),a=r(1),s=r(2),o=r(6),u=r(3),c=r(4),d=r(5),h=r(11),l=r(10),f=l.ArgumentsRequired,p=l.AuthenticationError,v=l.ExchangeError,m=l.InsufficientFunds,g=l.OrderNotFound,y=l.PermissionDenied,b=l.BadRequest,x=l.DDoSProtection,k=r(12);e.exports=function(e){c(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(u(r.prototype),"describe",this).call(this),{id:"stex",name:"STEX",countries:["EE"],rateLimit:500,certified:!1,has:{cancelAllOrders:!0,cancelOrder:!0,CORS:!1,createDepositAddress:!0,createMarketOrder:!1,createOrder:!0,fetchBalance:!0,fetchCurrencies:!0,fetchDepositAddress:!0,fetchDeposits:!0,fetchFundingFees:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrderTrades:!0,fetchTicker:!0,fetchTickers:!0,fetchTime:!0,fetchTrades:!0,fetchWithdrawals:!0,withdraw:!0},version:"v3",urls:{logo:"https://user-images.githubusercontent.com/1294454/69680782-03fd0b80-10bd-11ea-909e-7f603500e9cc.jpg",api:"https://api3.stex.com",www:"https://www.stex.com",doc:["https://help.stex.com/en/collections/1593608-api-v3-documentation"],fees:"https://app.stex.com/en/pairs-specification",referral:"https://app.stex.com?ref=36416021"},requiredCredentials:{apiKey:!1,secret:!1,token:!0},timeframes:{"1m":"1","5m":"5","30m":"30","1h":"60","4h":"240","12h":"720","1d":"1D"},api:{public:{get:["currencies","currencies/{currencyId}","markets","pairs-groups","currency_pairs/list/{code}","currency_pairs/group/{currencyPairGroupId}","currency_pairs/{currencyPairId}","ticker","ticker/{currencyPairId}","trades/{currencyPairId}","orderbook/{currencyPairId}","chart/{currencyPairId}/{candlesType}","deposit-statuses","deposit-statuses/{statusId}","withdrawal-statuses","withdrawal-statuses/{statusId}","ping","mobile-versions"]},trading:{get:["fees/{currencyPairId}","orders","orders/{currencyPairId}","order/{orderId}"],post:["orders/{currencyPairId}"],delete:["orders","orders/{currencyPairId}","order/{orderId}"]},reports:{get:["orders","orders/{orderId}","trades/{currencyPairId}","background/{listMode}","background/{id}","background/download/{id}"],post:["background/create"],delete:["background/{id}"]},profile:{get:["info","wallets","wallets/{walletId}","wallets/address/{walletId}","deposits","deposits/{id}","withdrawals","withdrawals/{id}","notifications","favorite/currency_pairs","token-scopes"],post:["wallets/burn/{walletId}","wallets/{currencyId}","wallets/address/{walletId}","withdraw","referral/program","referral/insert/{code}","referral/bonus_transfer/{currencyId}"],put:["profile/favorite/currency_pairs/set"],delete:["profile/withdraw/{withdrawalId}"]},verification:{get:["verification/countries","verification/stex"],post:["verification/stex"]},settings:{get:["notifications/{event}","notifications"],put:["notifications","notifications/set"]}},fees:{trading:{tierBased:!1,percentage:!0,taker:.002,maker:.002}},commonCurrencies:{BC:"Bitcoin Confidential",BITS:"Bitcoinus",BITSW:"BITS",BHD:"Bithold",BTH:"Bithereum",MPH:"Chasyr Token",SBTC:"SBTCT"},options:{parseOrderToPrecision:!1},exceptions:{exact:{"Wrong parameters":b,"Unauthenticated.":p,"Server Error":v,"This feature is only enabled for users verifies by Cryptonomica":y,"Too Many Attempts.":x},broad:{"Not enough":m}}})}},{key:"fetchCurrencies",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.length>0&&void 0!==p[0]?p[0]:{},e.next=3,this.publicGetCurrencies(t);case 3:for(r=e.sent,n={},a=this.safeValue(r,"data",[]),s=0;s<a.length;s++)o=a[s],u=this.safeString(o,"id"),c=this.safeInteger(o,"id"),d=this.safeCurrencyCode(this.safeString(o,"code")),h=this.safeInteger(o,"precision"),l=this.safeNumber(o,"withdrawal_fee_const"),f=this.safeValue(o,"active",!0),n[d]={id:u,numericId:c,code:d,info:o,type:void 0,name:this.safeString(o,"name"),active:f,fee:l,precision:h,limits:{amount:{min:Math.pow(10,-h),max:void 0},deposit:{min:this.safeNumber(o,"minimum_deposit_amount"),max:void 0},withdraw:{min:this.safeNumber(o,"minimum_withdrawal_amount"),max:void 0}}};return e.abrupt("return",n);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p,v,m,g,y,b,x,k,w,_,S,O,T=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=T.length>0&&void 0!==T[0]?T[0]:{},r={code:"ALL"},e.next=4,this.publicGetCurrencyPairsListCode(this.extend(r,t));case 4:for(n=e.sent,a=[],s=this.safeValue(n,"data",[]),o=0;o<s.length;o++)u=s[o],c=this.safeString(u,"id"),d=this.safeInteger(u,"id"),h=this.safeString(u,"currency_id"),l=this.safeString(u,"market_currency_id"),f=this.safeInteger(u,"currency_id"),p=this.safeInteger(u,"market_currency_id"),v=this.safeCurrencyCode(this.safeString(u,"currency_code")),m=this.safeCurrencyCode(this.safeString(u,"market_code")),g=v+"/"+m,y={amount:this.safeInteger(u,"currency_precision"),price:this.safeInteger(u,"market_precision")},b=this.safeValue(u,"active"),x=this.safeNumber(u,"min_buy_price"),k=this.safeNumber(u,"min_sell_price"),w=Math.max(x,k),_=this.safeNumber(u,"buy_fee_percent")/100,S=this.safeNumber(u,"sell_fee_percent")/100,O=Math.max(_,S),a.push({id:c,numericId:d,symbol:g,base:v,quote:m,baseId:h,quoteId:l,baseNumericId:f,quoteNumericId:p,info:u,active:b,maker:O,taker:O,precision:y,limits:{amount:{min:this.safeNumber(u,"min_order_amount"),max:void 0},price:{min:w,max:void 0},cost:{min:void 0,max:void 0}}});return e.abrupt("return",a);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={currencyPairId:n.id},e.next=7,this.publicGetTickerCurrencyPairId(this.extend(a,r));case 7:return s=e.sent,o=this.safeValue(s,"data",{}),e.abrupt("return",this.parseTicker(o,n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTime",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:{},e.next=3,this.publicGetPing(t);case 3:return r=e.sent,n=this.safeValue(r,"data",{}),a=this.safeValue(n,"server_datetime",{}),e.abrupt("return",this.parse8601(this.safeString(a,"date")));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:{},e.next=4,this.loadMarkets();case 4:return a=this.market(t),s={currencyPairId:a.id},void 0!==r&&(s.limit_bids=r,s.limit_asks=r),e.next=9,this.publicGetOrderbookCurrencyPairId(this.extend(s,n));case 9:return o=e.sent,u=this.safeValue(o,"data",{}),e.abrupt("return",this.parseOrderBook(u,void 0,"bid","ask","price","amount"));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeInteger(e,"timestamp"),i=this.safeString2(e,"id","symbol"),n=this.safeSymbol(i,t,"_"),a=this.safeNumber(e,"last"),s=this.safeNumber(e,"open"),o=void 0,u=void 0;return void 0!==a&&void 0!==s&&s>0&&(o=a-s,u=100/s*a-100),{symbol:n,timestamp:r,datetime:this.iso8601(r),high:this.safeNumber(e,"high"),low:this.safeNumber(e,"low"),bid:this.safeNumber(e,"bid"),bidVolume:void 0,ask:this.safeNumber(e,"ask"),askVolume:void 0,vwap:void 0,open:s,close:a,last:a,previousClose:void 0,change:o,percentage:u,average:void 0,baseVolume:this.safeNumber(e,"volumeQuote"),quoteVolume:this.safeNumber(e,"volume"),info:e}}},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetTicker(r);case 6:return n=e.sent,a=this.safeValue(n,"data",[]),e.abrupt("return",this.parseTickers(a,t));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){return[this.safeInteger(e,"time"),this.safeNumber(e,"open"),this.safeNumber(e,"high"),this.safeNumber(e,"low"),this.safeNumber(e,"close"),this.safeNumber(e,"volume")]}},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=f.length>1&&void 0!==f[1]?f[1]:"1d",n=f.length>2&&void 0!==f[2]?f[2]:void 0,a=f.length>3&&void 0!==f[3]?f[3]:void 0,s=f.length>4&&void 0!==f[4]?f[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),u={currencyPairId:o.id,candlesType:this.timeframes[r]},void 0===a?a=100:u.limit=a,c=this.parseTimeframe(r),d=a*c,void 0===n?(u.timeEnd=this.seconds(),u.timeStart=u.timeEnd-d):(u.timeStart=parseInt(n/1e3),u.timeEnd=this.sum(u.timeStart,d)),e.next=14,this.publicGetChartCurrencyPairIdCandlesType(this.extend(u,s));case 14:return h=e.sent,l=this.safeValue(h,"data",[]),e.abrupt("return",this.parseOHLCVs(l,o,r,n,a));case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),i=this.safeTimestamp(e,"timestamp"),n=this.safeString(e,"price"),a=this.safeString(e,"amount"),s=this.parseNumber(n),o=this.parseNumber(a),u=this.parseNumber(k.stringMul(n,a)),c=void 0;void 0===c&&void 0!==t&&(c=t.symbol);var d=this.safeStringLower2(e,"type","trade_type");return{info:e,timestamp:i,datetime:this.iso8601(i),symbol:c,id:r,order:void 0,type:void 0,takerOrMaker:void 0,side:d,price:s,amount:o,cost:u,fee:void 0}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={currencyPairId:s.id},void 0!==n&&(o.limit=n),void 0!==r&&(o.sort="ASC",o.from=parseInt(r/1e3)),e.next=11,this.publicGetTradesCurrencyPairId(this.extend(o,a));case 11:return u=e.sent,c=this.safeValue(u,"data",[]),e.abrupt("return",this.parseTrades(c,s,r,n));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.profileGetWallets(t);case 5:for(r=e.sent,n={info:r},a=this.safeValue(r,"data",[]),s=0;s<a.length;s++)o=a[s],u=this.safeCurrencyCode(this.safeString(o,"currency_id")),(c=this.account()).free=this.safeString(o,"balance"),c.used=this.safeString(o,"frozen_balance"),n[u]=c;return e.abrupt("return",this.parseBalance(n,!1));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({PROCESSING:"open",PENDING:"open",PARTIAL:"open",FINISHED:"closed",CANCELLED:"canceled"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),i=this.parseOrderStatus(this.safeString(e,"status")),n=this.safeString2(e,"currency_pair_id","currency_pair_name"),a=this.safeSymbol(n,t,"_"),s=this.safeTimestamp(e,"timestamp"),o=this.safeNumber(e,"price"),u=this.safeNumber(e,"initial_amount"),c=this.safeNumber(e,"processed_amount"),d=void 0,h=void 0;void 0!==c&&(void 0!==u&&(d=u-c,this.options.parseOrderToPrecision&&(d=parseFloat(this.amountToPrecision(a,d))),d=Math.max(d,0)),void 0!==o&&void 0===h&&(h=o*c));var l=this.safeString(e,"original_type");"BUY"!==l&&"SELL"!==l||(l=void 0);var f=this.safeStringLower(e,"type"),p=this.safeValue(e,"trades"),v=void 0;void 0!==p&&(v=this.parseTrades(p,t,void 0,void 0,{symbol:a,order:r}));var m=this.safeNumber(e,"trigger_price"),g={info:e,id:r,clientOrderId:void 0,timestamp:s,datetime:this.iso8601(s),lastTradeTimestamp:void 0,symbol:a,type:l,timeInForce:void 0,postOnly:void 0,side:f,price:o,stopPrice:m,amount:u,cost:h,average:void 0,filled:c,remaining:d,status:i,trades:v},y=this.safeValue(e,"fees");if(void 0===y)g.fee=void 0;else{var b=y.length;if(b>0){g.fees=[];for(var x=0;x<y.length;x++){var k=this.safeNumber(y[x],"amount");if(void 0!==k){var w=this.safeString(y[x],"currency_id"),_=this.safeCurrencyCode(w);g.fees.push({cost:k,currency:_})}}}else g.fee=void 0}return g}},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,u,c,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=l.length>4&&void 0!==l[4]?l[4]:void 0,o=l.length>5&&void 0!==l[5]?l[5]:{},"market"!==r){e.next=4;break}throw new v(this.id+" createOrder allows limit orders only");case 4:return e.next=6,this.loadMarkets();case 6:return u=this.market(t),"limit"===r&&(r=n),c={currencyPairId:u.id,type:r.toUpperCase(),amount:parseFloat(this.amountToPrecision(t,a)),price:parseFloat(this.priceToPrecision(t,s))},e.next=11,this.tradingPostOrdersCurrencyPairId(this.extend(c,o));case 11:return d=e.sent,h=this.safeValue(d,"data",{}),e.abrupt("return",this.parseOrder(h,u));case 14:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:{},e.next=4,this.loadMarkets();case 4:return a={orderId:t},e.next=7,this.tradingGetOrderOrderId(this.extend(a,n));case 7:return s=e.sent,o=this.safeValue(s,"data",{}),u=void 0,void 0!==r&&(u=this.market(r)),e.abrupt("return",this.parseOrder(o,u));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchClosedOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:{},e.next=4,this.loadMarkets();case 4:return a={orderId:t},e.next=7,this.reportsGetOrdersOrderId(this.extend(a,n));case 7:return s=e.sent,o=this.safeValue(s,"data",{}),u=void 0,void 0!==r&&(u=this.market(r)),e.abrupt("return",this.parseOrder(o,u));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrderTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>1&&void 0!==s[1]?s[1]:void 0,s.length>2&&void 0!==s[2]?s[2]:void 0,s.length>3&&void 0!==s[3]?s[3]:void 0,n=s.length>4&&void 0!==s[4]?s[4]:{},e.next=6,this.fetchClosedOrder(t,r,n);case 6:return a=e.sent,e.abrupt("return",a.trades);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:{},e.next=6,this.loadMarkets();case 6:return s=void 0,o="tradingGetOrders",u={},void 0!==t&&(o="tradingGetOrdersCurrencyPairId",s=this.market(t),u.currencyPairId=s.id),void 0!==n&&(u.limit=n),e.next=13,this[o](this.extend(u,a));case 13:return c=e.sent,d=this.safeValue(c,"data",[]),e.abrupt("return",this.parseOrders(d,s,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h.length>1&&void 0!==h[1]?h[1]:void 0,r=h.length>2&&void 0!==h[2]?h[2]:{},e.next=4,this.loadMarkets();case 4:return n={orderId:t},e.next=7,this.tradingDeleteOrderOrderId(this.extend(n,r));case 7:if(a=e.sent,s=this.safeValue(a,"data",{}),o=this.safeValue(s,"put_into_processing_queue",[]),u=this.safeValue(s,"not_put_into_processing_queue",[]),c=o.length,d=u.length,!(c<1)){e.next=21;break}if(!(d<1)){e.next=18;break}throw new g(this.id+" cancelOrder received an empty response: "+this.json(a));case 18:return e.abrupt("return",this.parseOrder(u[0]));case 19:e.next=26;break;case 21:if(!(d<1)){e.next=25;break}return e.abrupt("return",this.parseOrder(o[0]));case 25:throw new g(this.id+" cancelOrder received an empty response: "+this.json(a));case 26:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cancelAllOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:{},e.next=4,this.loadMarkets();case 4:return n={},a="tradingDeleteOrders",void 0!==t&&(s=this.market(t),n.currencyPairId=s.id,a="tradingDeleteOrdersCurrencyPairId"),e.next=9,this[a](this.extend(n,r));case 9:return o=e.sent,e.abrupt("return",o);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},void 0!==t){e.next=6;break}throw new f(this.id+" fetchMyTrades() requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.market(t),o={currencyPairId:s.id},void 0!==r&&(o.timeStart=this.iso8601(r)),void 0!==n&&(o.limit=n),e.next=14,this.reportsGetTradesCurrencyPairId(this.extend(o,a));case 14:return u=e.sent,c=this.safeValue(u,"data",[]),e.abrupt("return",this.parseTrades(c,s,r,n));case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createDepositAddress",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.currency(t),a={currencyId:n.id},e.next=7,this.profilePostWalletsCurrencyId(this.extend(a,r));case 7:return s=e.sent,o=this.safeValue(s,"data",{}),u=this.safeValue(o,"deposit_address",{}),c=this.safeString(u,"address"),d=this.safeString(u,"additional_address_parameter"),this.checkAddress(c),e.abrupt("return",{currency:t,address:c,tag:d,info:s});case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchDepositAddress",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d,h,l,f,p,m,g=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=g.length>1&&void 0!==g[1]?g[1]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.fetchBalance();case 5:if(n=e.sent,a=this.safeValue(n.info,"data",[]),s=this.indexBy(a,"currency_id"),o=this.currency(t),void 0!==(u=this.safeValue(s,o.id))){e.next=12;break}throw new v(this.id+" fetchDepositAddress() could not find the wallet id for currency code "+t+", try to call createDepositAddress() first");case 12:if(void 0!==(c=this.safeInteger(u,"id"))){e.next=15;break}throw new v(this.id+" fetchDepositAddress() could not find the wallet id for currency code "+t+", try to call createDepositAddress() first");case 15:return d={walletId:c},e.next=18,this.profileGetWalletsWalletId(this.extend(d,r));case 18:return h=e.sent,l=this.safeValue(h,"data",[]),f=this.safeValue(l,"deposit_address",{}),p=this.safeString(f,"address"),m=this.safeString(f,"additional_address_parameter"),this.checkAddress(p),e.abrupt("return",{currency:t,address:p,tag:m,info:h});case 25:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.urls.api+"/"+t+"/"+this.implodeParams(e,i),o=this.omit(i,this.extractParams(e));return"public"===t?Object.keys(o).length&&(s+="?"+this.urlencode(o)):(this.checkRequiredCredentials(),n={Authorization:"Bearer "+this.token},"GET"===r||"DELETE"===r?Object.keys(o).length&&(s+="?"+this.urlencode(o)):(a=this.json(o),Object.keys(o).length&&(n["Content-Type"]="application/json"))),{url:s,method:r,body:a,headers:n}}},{key:"parseTransactionStatus",value:function(e){return this.safeString({processing:"pending","checking by system":"pending",hodl:"pending","amount too low":"failed","not confirmed":"pending","cancelled by User":"canceled",approved:"pending",finished:"ok","withdrawal error":"failed","deposit error":"failed","cancelled by admin":"canceled",awaiting:"pending"},e,e)}},{key:"parseTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),i=this.safeValue(e,"withdrawal_address",{}),n=this.safeString(i,"address"),a=this.safeString(i,"additional_address_parameter"),s=this.safeString(e,"currency_id"),o=void 0;s in this.currencies_by_id?t=this.currencies_by_id[s]:o=this.commonCurrencyCode(this.safeString(e,"currency_code")),void 0===o&&void 0!==t&&(o=t.code);var u="deposit_status_id"in e?"deposit":"withdrawal",c=this.safeNumber(e,"amount"),d=this.parseTransactionStatus(this.safeStringLower(e,"status")),h=this.safeTimestamp2(e,"timestamp","created_ts"),l=this.safeTimestamp(e,"updated_ts"),f=this.safeString(e,"txid"),p=void 0,v=this.safeNumber(e,"fee");if(void 0!==v){var m=this.safeString(e,"fee_currency_id","deposit_fee_currency_id"),g=this.safeCurrencyCode(m);p={cost:v,currency:g}}return{info:e,id:r,txid:f,timestamp:h,datetime:this.iso8601(h),addressFrom:void 0,address:n,addressTo:n,tagFrom:void 0,tag:a,tagTo:a,type:u,amount:c,currency:o,status:d,updated:l,fee:p}}},{key:"fetchDeposits",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return s=void 0,o={},void 0!==t&&(s=this.currency(t),o.currencyId=s.id),void 0!==n&&(o.limit=n),void 0!==r&&(o.timeStart=r),e.next=13,this.profileGetDeposits(this.extend(o,a));case 13:return u=e.sent,c=this.safeValue(u,"data",[]),e.abrupt("return",this.parseTransactions(c,t,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchWithdrawals",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return s=void 0,o={},void 0!==t&&(s=this.currency(t),o.currencyId=s.id),void 0!==n&&(o.limit=n),void 0!==r&&(o.timeStart=r),e.next=13,this.profileGetWithdrawals(this.extend(o,a));case 13:return u=e.sent,c=this.safeValue(u,"data",[]),e.abrupt("return",this.parseTransactions(c,t,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"withdraw",value:function(){var e=n(i.mark((function e(t,r,n){var a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.length>3&&void 0!==h[3]?h[3]:void 0,s=h.length>4&&void 0!==h[4]?h[4]:{},this.checkAddress(n),e.next=5,this.loadMarkets();case 5:return o=this.currency(t),u={currency_id:o.id,amount:parseFloat(this.currencyToPrecision(t,r)),address:n},void 0!==a&&(u.additional_address_parameter=a),e.next=10,this.profilePostWithdraw(this.extend(u,s));case 10:return c=e.sent,d=this.safeValue(c,"data",{}),e.abrupt("return",this.parseTransaction(d,o));case 13:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"fetchFundingFees",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d.length>0&&void 0!==d[0]?d[0]:void 0,t=d.length>1&&void 0!==d[1]?d[1]:{},e.next=4,this.publicGetCurrencies(t);case 4:for(r=e.sent,n=this.safeValue(r,"data",[]),a={},s={},o=0;o<n.length;o++)u=this.safeString(n[o],"id"),c=this.safeCurrencyCode(u),a[c]=this.safeNumber(n[o],"withdrawal_fee_const"),s[c]=this.safeNumber(n[o],"deposit_fee_const");return e.abrupt("return",{withdraw:a,deposit:s,info:r});case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,u){if(void 0!==s&&!this.safeValue(s,"success",!1)){var c=this.safeString(s,"message"),d=this.id+" "+a;throw this.throwExactlyMatchedException(this.exceptions.exact,c,d),this.throwBroadlyMatchedException(this.exceptions.broad,c,d),new v(d)}}}]),r}(h)},function(e,t,r){"use strict";var i=r(1),n=r(2),a=r(6),s=r(3),o=r(4),u=r(5),c=r(128);e.exports=function(e){o(r,e);var t=u(r);function r(){return i(this,r),t.apply(this,arguments)}return n(r,[{key:"describe",value:function(){return this.deepExtend(a(s(r.prototype),"describe",this).call(this),{id:"surbitcoin",name:"SurBitcoin",countries:["VE"],has:{CORS:!1},urls:{logo:"https://user-images.githubusercontent.com/1294454/27991511-f0a50194-6481-11e7-99b5-8f02932424cc.jpg",api:{public:"https://api.blinktrade.com/api",private:"https://api.blinktrade.com/tapi"},www:"https://surbitcoin.com",doc:"https://blinktrade.com/docs"},options:{brokerId:"1"}})}}]),r}(c)},function(e,t,r){"use strict";var i=r(7),n=r(8),a=r(1),s=r(2),o=r(6),u=r(3),c=r(4),d=r(5),h=r(11),l=r(10),f=l.ExchangeError,p=l.ArgumentsRequired,v=l.BadRequest,m=l.OrderNotFound,g=l.InvalidAddress,y=r(12);e.exports=function(e){c(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(u(r.prototype),"describe",this).call(this),{id:"therock",name:"TheRockTrading",countries:["MT"],rateLimit:1e3,version:"v1",has:{cancelOrder:!0,CORS:!1,createOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchDeposits:!0,fetchLedger:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,fetchTransactions:"emulated",fetchWithdrawals:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/27766869-75057fa2-5ee9-11e7-9a6f-13e641fa4707.jpg",api:"https://api.therocktrading.com",www:"https://therocktrading.com",doc:["https://api.therocktrading.com/doc/v1/index.html","https://api.therocktrading.com/doc/"]},api:{public:{get:["funds","funds/{id}/orderbook","funds/{id}/ticker","funds/{id}/trades","funds/tickers"]},private:{get:["balances","balances/{id}","discounts","discounts/{id}","funds","funds/{id}","funds/{id}/trades","funds/{fund_id}/orders","funds/{fund_id}/orders/{id}","funds/{fund_id}/position_balances","funds/{fund_id}/positions","funds/{fund_id}/positions/{id}","transactions","transactions/{id}","withdraw_limits/{id}","withdraw_limits"],post:["atms/withdraw","funds/{fund_id}/orders"],delete:["funds/{fund_id}/orders/{id}","funds/{fund_id}/orders/remove_all"]}},fees:{trading:{maker:.002,taker:.002},funding:{tierBased:!1,percentage:!1,withdraw:{BTC:5e-4,BCH:5e-4,PPC:.02,ETH:.001,ZEC:.001,LTC:.002,EUR:2.5},deposit:{BTC:0,BCH:0,PPC:0,ETH:0,ZEC:0,LTC:0,EUR:0}}},exceptions:{exact:{"Request already running":v,"cannot specify multiple address types":v,"Currency is not included in the list":v,"Record not found":m},broad:{"before must be greater than after param":v,"must be shorter than 60 days":v,"must be a multiple of (period param) in minutes":v,"Address allocation limit reached for currency":g,"is not a valid value for param currency":v," is invalid":g}}})}},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,p,v,m,g,y,b=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=b.length>0&&void 0!==b[0]?b[0]:{},e.next=3,this.publicGetFunds(t);case 3:if(r=e.sent,n=this.safeValue(r,"funds"),a=[],void 0!==n){e.next=10;break}throw new f(this.id+" fetchMarkets got an unexpected response");case 10:for(s=0;s<n.length;s++)o=n[s],u=this.safeString(o,"id"),c=this.safeString(o,"trade_currency"),d=this.safeString(o,"base_currency"),h=this.safeCurrencyCode(c),l=this.safeCurrencyCode(d),p=h+"/"+l,v=this.safeNumber(o,"buy_fee"),m=this.safeNumber(o,"sell_fee"),g=Math.max(v,m),y=g/=100,a.push({id:u,symbol:p,base:h,quote:l,baseId:c,quoteId:d,info:o,active:!0,maker:y,taker:g,precision:{amount:this.safeInteger(o,"trade_currency_decimals"),price:this.safeInteger(o,"base_currency_decimals")},limits:{amount:{min:this.safeNumber(o,"minimum_quantity_offer"),max:void 0},price:{min:this.safeNumber(o,"minimum_price_offer"),max:void 0},cost:{min:void 0,max:void 0}}});case 11:return e.abrupt("return",a);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetBalances(t);case 5:for(r=e.sent,n=this.safeValue(r,"balances",[]),a={info:r},s=0;s<n.length;s++)o=n[s],u=this.safeString(o,"currency"),c=this.safeCurrencyCode(u),(d=this.account()).free=this.safeString(o,"trading_balance"),d.total=this.safeString(o,"balance"),a[c]=d;return e.abrupt("return",this.parseBalance(a,!1));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.length>1&&void 0!==o[1]?o[1]:void 0,r=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return n={id:this.marketId(t)},e.next=7,this.publicGetFundsIdOrderbook(this.extend(n,r));case 7:return a=e.sent,s=this.parse8601(this.safeString(a,"date")),e.abrupt("return",this.parseOrderBook(a,s,"bids","asks","price","amount"));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.parse8601(e.date),i=void 0;void 0!==t&&(i=t.symbol);var n=this.safeNumber(e,"last");return{symbol:i,timestamp:r,datetime:this.iso8601(r),high:this.safeNumber(e,"high"),low:this.safeNumber(e,"low"),bid:this.safeNumber(e,"bid"),bidVolume:void 0,ask:this.safeNumber(e,"ask"),askVolume:void 0,vwap:void 0,open:this.safeNumber(e,"open"),close:n,last:n,previousClose:this.safeNumber(e,"close"),change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeNumber(e,"volume_traded"),quoteVolume:this.safeNumber(e,"volume"),info:e}}},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:void 0,r=f.length>1&&void 0!==f[1]?f[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetFundsTickers(r);case 6:for(n=e.sent,a=this.indexBy(n.tickers,"fund_id"),s=Object.keys(a),o={},u=0;u<s.length;u++)c=s[u],d=this.safeMarket(c),h=d.symbol,l=a[c],o[h]=this.parseTicker(l,d);return e.abrupt("return",this.filterByArray(o,"symbol",t));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>1&&void 0!==s[1]?s[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),e.next=6,this.publicGetFundsIdTicker(this.extend({id:n.id},r));case 6:return a=e.sent,e.abrupt("return",this.parseTicker(a,n));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"fund_id"),i=this.safeSymbol(r,t),n=this.parse8601(this.safeString(e,"date")),a=this.safeString(e,"id"),s=this.safeString(e,"order_id"),o=this.safeString(e,"side"),u=this.safeString(e,"price"),c=this.safeString(e,"amount"),d=this.parseNumber(u),h=this.parseNumber(c),l=this.parseNumber(y.stringMul(u,c)),f=void 0,p=void 0,v=this.safeValue(e,"transactions",[]),m=this.groupBy(v,"type"),g=this.safeValue(m,"paid_commission",[]),b=0;b<g.length;b++)void 0===p&&(p=0),p=this.sum(p,this.safeNumber(g[b],"price"));return void 0!==p&&(f={cost:p,currency:t.quote}),{info:e,id:a,order:s,timestamp:n,datetime:this.iso8601(n),symbol:i,type:void 0,side:o,takerOrMaker:void 0,price:d,amount:h,cost:l,fee:f}}},{key:"parseLedgerEntryDirection",value:function(e){return this.safeString({affiliate_earnings:"in",atm_payment:"in",bought_currency_from_fund:"out",bought_shares:"out",paid_commission:"out",paypal_payment:"in",pos_payment:"in",released_currency_to_fund:"out",rollover_commission:"out",sold_currency_to_fund:"in",sold_shares:"in",transfer_received:"in",transfer_sent:"out",withdraw:"out"},e,e)}},{key:"parseLedgerEntryType",value:function(e){return this.safeString({affiliate_earnings:"referral",atm_payment:"transaction",bought_currency_from_fund:"trade",bought_shares:"trade",paid_commission:"fee",paypal_payment:"transaction",pos_payment:"transaction",released_currency_to_fund:"trade",rollover_commission:"fee",sold_currency_to_fund:"trade",sold_shares:"trade",transfer_received:"transfer",transfer_sent:"transfer",withdraw:"transaction"},e,e)}},{key:"parseLedgerEntry",value:function(e){var t=this.safeString(e,"id"),r=void 0,i=this.safeString(e,"type"),n=this.parseLedgerEntryDirection(i);"trade"!==(i=this.parseLedgerEntryType(i))&&"fee"!==i||(r=this.safeString(e,"trade_id"));var a=this.safeString(e,"currency"),s=this.safeCurrencyCode(a),o=this.safeNumber(e,"price"),u=this.parse8601(this.safeString(e,"date")),c="ok";return{info:e,id:t,direction:n,account:void 0,referenceId:r,referenceAccount:void 0,type:i,currency:s,amount:o,before:void 0,after:void 0,status:c,timestamp:u,datetime:this.iso8601(u),fee:void 0}}},{key:"fetchLedger",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return s={},o=void 0,void 0!==t&&(o=this.currency(t),s.currency=o.id),void 0!==r&&(s.after=this.iso8601(r)),e.next=12,this.privateGetTransactions(this.extend(s,a));case 12:return u=e.sent,c=this.safeValue(u,"transactions",[]),e.abrupt("return",this.parseLedger(c,o,r,n));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTransactionType",value:function(e){return this.safeString({withdraw:"withdrawal",atm_payment:"deposit"},e,e)}},{key:"parseTransaction",value:function(e){var t=this.safeString(e,"id"),r=this.parseTransactionType(this.safeString(e,"type")),i=this.safeValue(e,"transfer_detail",{}),n=this.safeString(i,"method"),a=void 0,s=void 0;void 0!==n&&"wire_transfer"!==n&&(a=this.safeString(i,"id"),s=this.safeString(i,"recipient"));var o=this.safeString(e,"currency"),u=this.safeCurrencyCode(o),c=this.safeNumber(e,"price"),d=this.parse8601(this.safeString(e,"date")),h="ok";return{info:e,id:t,currency:u,amount:c,addressFrom:void 0,addressTo:s,address:s,tagFrom:void 0,tagTo:void 0,tag:void 0,status:h,type:r,updated:void 0,txid:a,timestamp:d,datetime:this.iso8601(d),fee:void 0}}},{key:"fetchWithdrawals",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:void 0,a=o.length>3&&void 0!==o[3]?o[3]:{},s={type:"withdraw"},e.next=7,this.fetchTransactions(t,r,n,this.extend(s,a));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchDeposits",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:void 0,a=o.length>3&&void 0!==o[3]?o[3]:{},s={type:"atm_payment"},e.next=7,this.fetchTransactions(t,r,n,this.extend(s,a));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTransactions",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:void 0,r=l.length>1&&void 0!==l[1]?l[1]:void 0,n=l.length>2&&void 0!==l[2]?l[2]:void 0,a=l.length>3&&void 0!==l[3]?l[3]:{},e.next=6,this.loadMarkets();case 6:return s={},o=void 0,void 0!==t&&(o=this.currency(t),s.currency=o.id),void 0!==r&&(s.after=this.iso8601(r)),a=this.extend(s,a),e.next=13,this.privateGetTransactions(a);case 13:return u=e.sent,c=this.safeValue(u,"transactions",[]),d=["withdraw","atm_payment"],h=this.filterByArray(c,"type",d,!1),e.abrupt("return",this.parseTransactions(h,o,r,n));case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({active:"open",executed:"closed",deleted:"canceled"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),i=this.safeString(e,"fund_id"),n=this.safeSymbol(i,t),a=this.parseOrderStatus(this.safeString(e,"status")),s=this.parse8601(this.safeString(e,"date")),o=this.safeString(e,"type"),u=this.safeString(e,"side"),c=this.safeNumber(e,"amount"),d=this.safeNumber(e,"amount_unfilled"),h=void 0;void 0!==c&&void 0!==d&&(h=c-d);var l=this.safeNumber(e,"price"),f=this.safeValue(e,"trades"),p=void 0,v=void 0,m=void 0;if(void 0!==f){var g=f.length;if(g>0){f=this.parseTrades(f,t,void 0,void 0,{orderId:r}),p=0,h=0;for(var y=0;y<g;y++){var b=f[y];p=this.sum(p,b.cost),h=this.sum(h,b.amount)}h>0&&(v=p/h),m=f[g-1].timestamp}else p=0}var x=this.safeNumber(e,"conditional_price");return{id:r,clientOrderId:void 0,info:e,timestamp:s,datetime:this.iso8601(s),lastTradeTimestamp:m,status:a,symbol:n,type:o,timeInForce:void 0,postOnly:void 0,side:u,price:l,stopPrice:x,cost:p,amount:c,filled:h,average:v,remaining:d,fee:void 0,trades:f}}},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:void 0,a=o.length>3&&void 0!==o[3]?o[3]:{},s={status:"active"},e.next=7,this.fetchOrders(t,r,n,this.extend(s,a));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:void 0,a=o.length>3&&void 0!==o[3]?o[3]:{},s={status:"executed"},e.next=7,this.fetchOrders(t,r,n,this.extend(s,a));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},void 0!==t){e.next=6;break}throw new p(this.id+" fetchOrders() requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.market(t),o={fund_id:s.id},void 0!==r&&(o.after=this.iso8601(r)),e.next=13,this.privateGetFundsFundIdOrders(this.extend(o,a));case 13:return u=e.sent,c=this.safeValue(u,"orders",[]),e.abrupt("return",this.parseOrders(c,s,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:{},void 0!==r){e.next=4;break}throw new p(this.id+" fetchOrder() requires a symbol argument");case 4:return e.next=6,this.loadMarkets();case 6:return a=this.market(r),s={id:t,fund_id:a.id},e.next=10,this.privatePostFundsFundIdOrdersId(this.extend(s,n));case 10:return o=e.sent,e.abrupt("return",this.parseOrder(o));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=d.length>4&&void 0!==d[4]?d[4]:void 0,o=d.length>5&&void 0!==d[5]?d[5]:{},e.next=4,this.loadMarkets();case 4:return"market"===r&&(s=0),u={fund_id:this.marketId(t),side:n,amount:a,price:s},e.next=8,this.privatePostFundsFundIdOrders(this.extend(u,o));case 8:return c=e.sent,e.abrupt("return",this.parseOrder(c));case 10:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return a={id:t,fund_id:this.marketId(r)},e.next=7,this.privateDeleteFundsFundIdOrdersId(this.extend(a,n));case 7:return s=e.sent,e.abrupt("return",this.parseOrder(s));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=c.length>0&&void 0!==c[0]?c[0]:void 0,r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},void 0!==t){e.next=6;break}throw new p(this.id+" fetchMyTrades() requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.market(t),o={id:s.id},void 0!==n&&(o.per_page=n),void 0!==r&&(o.after=this.iso8601(r)),e.next=14,this.privateGetFundsIdTrades(this.extend(o,a));case 14:return u=e.sent,e.abrupt("return",this.parseTrades(u.trades,s,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={id:s.id},void 0!==n&&(o.per_page=n),void 0!==r&&(o.after=this.iso8601(r)),e.next=11,this.publicGetFundsIdTrades(this.extend(o,a));case 11:return u=e.sent,e.abrupt("return",this.parseTrades(u.trades,s,r,n));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.urls.api+"/"+this.version+"/"+this.implodeParams(e,i),o=this.omit(i,this.extractParams(e));if(n=void 0===n?{}:n,"private"===t){if(this.checkRequiredCredentials(),Object.keys(o).length)if("POST"===r)a=this.json(o),n["Content-Type"]="application/json";else{var u=this.rawencode(o);u.length&&(s+="?"+u)}var c=this.nonce().toString(),d=c+s;n["X-TRT-KEY"]=this.apiKey,n["X-TRT-NONCE"]=c,n["X-TRT-SIGN"]=this.hmac(this.encode(d),this.encode(this.secret),"sha512")}else"public"===t&&Object.keys(o).length&&(s+="?"+this.rawencode(o));return{url:s,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,u){if(void 0!==s){var c=this.safeValue(s,"errors",[]),d=c.length;if(d>0){for(var h=this.id+" "+a,l=0;l<d;l++){var p=c[l],v=this.safeString(p,"message");this.throwExactlyMatchedException(this.exceptions.exact,v,h),this.throwBroadlyMatchedException(this.exceptions.broad,v,h)}throw new f(h)}}}}]),r}(h)},function(e,t,r){"use strict";var i=r(21),n=r(7),a=r(8),s=r(1),o=r(2),u=r(6),c=r(3),d=r(4),h=r(5),l=r(11),f=r(10),p=f.ExchangeError,v=f.InsufficientFunds,m=f.OrderNotFound,g=f.ArgumentsRequired,y=r(12);e.exports=function(e){d(r,e);var t=h(r);function r(){return s(this,r),t.apply(this,arguments)}return o(r,[{key:"describe",value:function(){return this.deepExtend(u(c(r.prototype),"describe",this).call(this),{id:"tidebit",name:"TideBit",countries:["HK"],rateLimit:1e3,version:"v2",has:{cancelOrder:!0,CORS:!1,createOrder:!0,fetchBalance:!0,fetchDepositAddress:!0,fetchMarkets:!0,fetchOHLCV:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,withdraw:!0},timeframes:{"1m":"1","5m":"5","15m":"15","30m":"30","1h":"60","2h":"120","4h":"240","12h":"720","1d":"1440","3d":"4320","1w":"10080"},urls:{logo:"https://user-images.githubusercontent.com/51840849/87460811-1e690280-c616-11ea-8652-69f187305add.jpg",api:"https://www.tidebit.com",www:"https://www.tidebit.com",doc:["https://www.tidebit.com/documents/api/guide","https://www.tidebit.com/swagger/#/default"],referral:"http://bit.ly/2IX0LrM"},api:{public:{get:["markets","tickers","tickers/{market}","timestamp","trades","trades/{market}","order_book","order","k_with_pending_trades","k","depth"],post:[]},private:{get:["addresses/{address}","deposits/history","deposits/get_deposit","deposits/deposit_address","historys/orders","historys/vouchers","historys/accounts","historys/snapshots","linkage/get_status","members/me","order","orders","partners/orders/{id}/trades","referral_commissions/get_undeposited","referral_commissions/get_graph_data","trades/my","withdraws/bind_account_list","withdraws/get_withdraw_account","withdraws/fetch_bind_info"],post:["deposits/deposit_cash","favorite_markets/update","order/delete","orders","orders/multi","orders/clear","referral_commissions/deposit","withdraws/apply","withdraws/bind_bank","withdraws/bind_address"]}},fees:{trading:{tierBased:!1,percentage:!0,maker:.003,taker:.003},funding:{tierBased:!1,percentage:!0,withdraw:{}}},exceptions:{2002:v,2003:m}})}},{key:"fetchDepositAddress",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,u,c=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:{},e.next=3,this.loadMarkets();case 3:return i=this.currency(t),a={currency:i.id},e.next=7,this.privateGetDepositAddress(this.extend(a,r));case 7:if(!("success"in(s=e.sent))){e.next=13;break}if(!s.success){e.next=13;break}return o=this.safeString(s,"address"),u=this.safeString(s,"addressTag"),e.abrupt("return",{currency:t,address:this.checkAddress(o),tag:u,info:s});case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchMarkets",value:function(){var e=a(n.mark((function e(){var t,r,a,s,o,u,c,d,h,l,f,p,v,m=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=m.length>0&&void 0!==m[0]?m[0]:{},e.next=3,this.publicGetMarkets(t);case 3:for(r=e.sent,a=[],s=0;s<r.length;s++)o=r[s],u=this.safeString(o,"id"),c=this.safeString(o,"name"),d=c.split("/"),h=i(d,2),l=h[0],f=h[1],p=this.safeCurrencyCode(l),v=this.safeCurrencyCode(f),a.push({id:u,symbol:c,base:p,quote:v,baseId:l,quoteId:f,info:o,active:void 0,precision:this.precision,limits:this.limits});return e.abrupt("return",a);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,u,c,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetMembersMe(t);case 5:for(r=e.sent,i=this.safeValue(r,"accounts"),a={info:i},s=0;s<i.length;s++)o=i[s],u=this.safeString(o,"currency"),c=this.safeCurrencyCode(u),(d=this.account()).free=this.safeString(o,"balance"),d.used=this.safeString(o,"locked"),a[c]=d;return e.abrupt("return",this.parseBalance(a,!1));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,u,c=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,i=c.length>2&&void 0!==c[2]?c[2]:{},e.next=4,this.loadMarkets();case 4:return a=this.market(t),s={market:a.id},void 0!==r&&(s.limit=r),s.market=a.id,e.next=10,this.publicGetDepth(this.extend(s,i));case 10:return o=e.sent,u=this.safeTimestamp(o,"timestamp"),e.abrupt("return",this.parseOrderBook(o,u));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeTimestamp(e,"at");e=this.safeValue(e,"ticker",{});var i=void 0;void 0!==t&&(i=t.symbol);var n=this.safeNumber(e,"last");return{symbol:i,timestamp:r,datetime:this.iso8601(r),high:this.safeNumber(e,"high"),low:this.safeNumber(e,"low"),bid:this.safeNumber(e,"buy"),ask:this.safeNumber(e,"sell"),bidVolume:void 0,askVolume:void 0,vwap:void 0,open:void 0,close:n,last:n,change:void 0,percentage:void 0,previousClose:void 0,average:void 0,baseVolume:this.safeNumber(e,"vol"),quoteVolume:void 0,info:e}}},{key:"fetchTickers",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,u,c,d,h,l=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:void 0,r=l.length>1&&void 0!==l[1]?l[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetTickers(r);case 6:for(i=e.sent,a=Object.keys(i),s={},o=0;o<a.length;o++)u=a[o],c=this.safeMarket(u),d=c.symbol,h=i[u],s[d]=this.parseTicker(h,c);return e.abrupt("return",this.filterByArray(s,"symbol",t));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return i=this.market(t),a={market:i.id},e.next=7,this.publicGetTickersMarket(this.extend(a,r));case 7:return s=e.sent,e.abrupt("return",this.parseTicker(s,i));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.parse8601(this.safeString(e,"created_at")),i=this.safeString(e,"id"),n=this.safeString(e,"price"),a=this.safeString(e,"volume"),s=this.parseNumber(n),o=this.parseNumber(a),u=this.safeNumber(e,"funds");void 0===u&&(u=this.parseNumber(y.stringMul(n,a)));var c=void 0;return void 0!==t&&(c=t.symbol),{id:i,info:e,timestamp:r,datetime:this.iso8601(r),symbol:c,type:void 0,side:void 0,order:void 0,takerOrMaker:void 0,price:s,amount:o,cost:u,fee:void 0}}},{key:"fetchTrades",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,u,c=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,i=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={market:s.id},e.next=9,this.publicGetTrades(this.extend(o,a));case 9:return u=e.sent,e.abrupt("return",this.parseTrades(u,s,r,i));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){return[this.safeTimestamp(e,0),this.safeNumber(e,1),this.safeNumber(e,2),this.safeNumber(e,3),this.safeNumber(e,4),this.safeNumber(e,5)]}},{key:"fetchOHLCV",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,u,c,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:"1m",i=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:void 0,s=d.length>4&&void 0!==d[4]?d[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),void 0===a&&(a=30),(u={market:o.id,period:this.timeframes[r],limit:a}).timestamp=void 0!==i?parseInt(i/1e3):18e5,e.next=12,this.publicGetK(this.extend(u,s));case 12:if("null"!==(c=e.sent)){e.next=15;break}return e.abrupt("return",[]);case 15:return e.abrupt("return",this.parseOHLCVs(c,o,r,i,a));case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({done:"closed",wait:"open",cancel:"canceled"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"market"),i=this.safeSymbol(r,t),n=this.parse8601(this.safeString(e,"created_at")),a=this.parseOrderStatus(this.safeString(e,"state")),s=this.safeString(e,"id"),o=this.safeString(e,"ord_type"),u=this.safeString(e,"side"),c=this.safeNumber(e,"price"),d=this.safeNumber(e,"volume"),h=this.safeNumber(e,"executed_volume"),l=this.safeNumber(e,"remaining_volume"),f=this.safeNumber(e,"avg_price");return this.safeOrder({id:s,clientOrderId:void 0,timestamp:n,datetime:this.iso8601(n),lastTradeTimestamp:void 0,status:a,symbol:i,type:o,timeInForce:void 0,postOnly:void 0,side:u,price:c,stopPrice:void 0,amount:d,filled:h,remaining:l,cost:void 0,trades:void 0,fee:void 0,info:e,average:f})}},{key:"createOrder",value:function(){var e=a(n.mark((function e(t,r,i,a){var s,o,u,c,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=d.length>4&&void 0!==d[4]?d[4]:void 0,o=d.length>5&&void 0!==d[5]?d[5]:{},e.next=4,this.loadMarkets();case 4:return u={market:this.marketId(t),side:i,volume:a.toString(),ord_type:r},"limit"===r&&(u.price=s.toString()),e.next=8,this.privatePostOrders(this.extend(u,o));case 8:return c=e.sent,e.abrupt("return",this.parseOrder(c));case 10:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u.length>1&&void 0!==u[1]?u[1]:void 0,r=u.length>2&&void 0!==u[2]?u[2]:{},e.next=4,this.loadMarkets();case 4:return i={id:t},e.next=7,this.privatePostOrderDelete(this.extend(i,r));case 7:if(a=e.sent,s=this.parseOrder(a),"closed"!==(o=this.safeString(s,"status"))&&"canceled"!==o){e.next=12;break}throw new m(this.id+" "+this.json(s));case 12:return e.abrupt("return",s);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"withdraw",value:function(){var e=a(n.mark((function e(t,r,i){var a,s,o,u,c,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.length>3&&void 0!==h[3]?h[3]:void 0,s=h.length>4&&void 0!==h[4]?h[4]:{},this.checkAddress(i),e.next=5,this.loadMarkets();case 5:if(o=this.currency(t),void 0!==(u=this.safeString(s,"id"))){e.next=9;break}throw new g(this.id+" withdraw() requires an extra `id` param (withdraw account id according to withdraws/bind_account_list endpoint");case 9:return c={id:u,currency_type:"coin",currency:o.id,body:r},void 0!==a&&(c.memo=a),e.next=13,this.privatePostWithdrawsApply(this.extend(c,s));case 13:return d=e.sent,e.abrupt("return",{info:d,id:void 0});case 15:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"nonce",value:function(){return this.milliseconds()}},{key:"encodeParams",value:function(e){return this.urlencode(this.keysort(e))}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s="/api/"+this.version+"/"+this.implodeParams(e,i)+".json",o=this.omit(i,this.extractParams(e)),u=this.urls.api+s;if("public"===t)Object.keys(o).length&&(u+="?"+this.urlencode(o));else{this.checkRequiredCredentials();var c=this.nonce().toString(),d=this.keysort(this.extend({access_key:this.apiKey,tonce:c},i)),h=this.urlencode(d),l=r+"|"+s+"|"+h,f=this.hmac(this.encode(l),this.encode(this.secret)),p=h+"&signature="+f;"GET"===r?u+="?"+p:(a=p,n={"Content-Type":"application/x-www-form-urlencoded"})}return{url:u,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,u){if(400===e||void 0===s){var c=this.id+" "+a;if(void 0===s)throw new p(c);var d=this.safeValue(s,"error",{}),h=this.safeString(d,"code");this.throwExactlyMatchedException(this.exceptions,h,c)}}}]),r}(l)},function(e,t,r){"use strict";var i=r(21),n=r(7),a=r(8),s=r(1),o=r(2),u=r(6),c=r(3),d=r(4),h=r(5),l=r(11),f=r(10),p=f.ExchangeError,v=f.ArgumentsRequired,m=f.ExchangeNotAvailable,g=f.InsufficientFunds,y=f.OrderNotFound,b=f.DDoSProtection,x=f.InvalidOrder,k=f.AuthenticationError,w=r(12);e.exports=function(e){d(r,e);var t=h(r);function r(){return s(this,r),t.apply(this,arguments)}return o(r,[{key:"describe",value:function(){return this.deepExtend(u(c(r.prototype),"describe",this).call(this),{id:"tidex",name:"Tidex",countries:["UK"],rateLimit:2e3,version:"3",userAgent:this.userAgents.chrome,has:{cancelOrder:!0,CORS:!1,createMarketOrder:!1,createOrder:!0,fetchBalance:!0,fetchCurrencies:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrderBooks:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,withdraw:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/30781780-03149dc4-a12e-11e7-82bb-313b269d24d4.jpg",api:{web:"https://gate.tidex.com/api",public:"https://api.tidex.com/api/3",private:"https://api.tidex.com/tapi"},www:"https://tidex.com",doc:"https://tidex.com/exchange/public-api",referral:"https://tidex.com/exchange/?ref=57f5638d9cd7",fees:["https://tidex.com/exchange/assets-spec","https://tidex.com/exchange/pairs-spec"]},api:{web:{get:["currency","pairs","tickers","orders","ordershistory","trade-data","trade-data/{id}"]},public:{get:["info","ticker/{pair}","depth/{pair}","trades/{pair}"]},private:{post:["getInfoExt","getInfo","Trade","ActiveOrders","OrderInfo","CancelOrder","TradeHistory","CoinDepositAddress","WithdrawCoin","CreateCoupon","RedeemCoupon"]}},fees:{trading:{feeSide:"get",tierBased:!1,percentage:!0,taker:.001,maker:.001}},commonCurrencies:{DSH:"DASH",EMGO:"MGO",MGO:"WMGO"},exceptions:{exact:{803:x,804:x,805:x,806:x,807:x,831:g,832:g,833:y},broad:{"Invalid pair name":p,"invalid api key":k,"invalid sign":k,"api key dont have trade permission":k,"invalid parameter":x,"invalid order":x,"Requests too often":b,"not available":m,"data unavailable":m,"external service unavailable":m}},options:{fetchTickersMaxLength:2048},orders:{}})}},{key:"fetchCurrencies",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,u,c,d,h,l,f,p,v,m,g,y=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=y.length>0&&void 0!==y[0]?y[0]:{},e.next=3,this.webGetCurrency(t);case 3:for(r=e.sent,i={},a=0;a<r.length;a++)s=r[a],o=this.safeString(s,"symbol"),u=this.safeInteger(s,"amountPoint"),c=this.safeCurrencyCode(o),d=this.safeValue(s,"visible"),h=!0===d,l=this.safeValue(s,"withdrawEnable"),f=this.safeValue(s,"depositEnable"),v=!0===f,(p=!0===l)&&v||(h=!1),m=this.safeString(s,"name"),g=this.safeNumber(s,"withdrawFee"),i[c]={id:o,code:c,name:m,active:h,precision:u,funding:{withdraw:{active:p,fee:g},deposit:{active:v,fee:0}},limits:{amount:{min:void 0,max:Math.pow(10,u)},withdraw:{min:this.safeNumber(s,"withdrawMinAmount"),max:void 0},deposit:{min:this.safeNumber(s,"depositMinAmount"),max:void 0}},info:s};return e.abrupt("return",i);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMarkets",value:function(){var e=a(n.mark((function e(){var t,r,a,s,o,u,c,d,h,l,f,p,v,m,g,y,b,x,k,_,S,O=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=O.length>0&&void 0!==O[0]?O[0]:{},e.next=3,this.publicGetInfo(t);case 3:for(r=e.sent,a=r.pairs,s=Object.keys(a),o=[],u=0;u<s.length;u++)c=s[u],d=a[c],h=c.split("_"),l=i(h,2),f=l[0],p=l[1],v=this.safeCurrencyCode(f),m=this.safeCurrencyCode(p),g=v+"/"+m,y={amount:this.safeInteger(d,"decimal_places"),price:this.safeInteger(d,"decimal_places")},b={amount:{min:this.safeNumber(d,"min_amount"),max:this.safeNumber(d,"max_amount")},price:{min:this.safeNumber(d,"min_price"),max:this.safeNumber(d,"max_price")},cost:{min:this.safeNumber(d,"min_total")}},x=this.safeInteger(d,"hidden"),k=0===x,_=this.safeString(d,"fee"),_=w.stringDiv(_,"100"),S=this.parseNumber(_),o.push({id:c,symbol:g,base:v,quote:m,baseId:f,quoteId:p,active:k,taker:S,precision:y,limits:b,info:d});return e.abrupt("return",o);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,u,c,d,h,l,f=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privatePostGetInfoExt(t);case 5:for(r=e.sent,i=this.safeValue(r,"return"),a={info:i},s=this.safeValue(i,"funds",{}),o=Object.keys(s),u=0;u<o.length;u++)c=o[u],d=this.safeCurrencyCode(c),h=this.safeValue(s,c,{}),(l=this.account()).free=this.safeString(h,"value"),l.used=this.safeString(h,"inOrders"),a[d]=l;return e.abrupt("return",this.parseBalance(a,!1));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,u,c=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,i=c.length>2&&void 0!==c[2]?c[2]:{},e.next=4,this.loadMarkets();case 4:return a=this.market(t),s={pair:a.id},void 0!==r&&(s.limit=r),e.next=9,this.publicGetDepthPair(this.extend(s,i));case 9:if(o=e.sent,a.id in o){e.next=13;break}throw new p(this.id+" "+a.symbol+" order book is empty or not available");case 13:return u=o[a.id],e.abrupt("return",this.parseOrderBook(u));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrderBooks",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,u,c,d,h,l,f=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:void 0,r=f.length>1&&void 0!==f[1]?f[1]:void 0,i=f.length>2&&void 0!==f[2]?f[2]:{},e.next=5,this.loadMarkets();case 5:if(a=void 0,void 0!==t){e.next=13;break}if(!((a=this.ids.join("-")).length>2048)){e.next=11;break}throw s=this.ids.length,new p(this.id+" has "+s.toString()+" symbols exceeding max URL length, you are required to specify a list of symbols in the first argument to fetchOrderBooks");case 11:e.next=15;break;case 13:a=(a=this.marketIds(t)).join("-");case 15:return o={pair:a},void 0!==r&&(o.limit=r),e.next=19,this.publicGetDepthPair(this.extend(o,i));case 19:for(u=e.sent,c={},a=Object.keys(u),d=0;d<a.length;d++)h=a[d],l=this.safeSymbol(h),c[l]=this.parseOrderBook(u[h]);return e.abrupt("return",c);case 24:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeTimestamp(e,"updated"),i=void 0;void 0!==t&&(i=t.symbol,t.active||(r=void 0));var n=this.safeNumber(e,"last");return{symbol:i,timestamp:r,datetime:this.iso8601(r),high:this.safeNumber(e,"high"),low:this.safeNumber(e,"low"),bid:this.safeNumber(e,"buy"),bidVolume:void 0,ask:this.safeNumber(e,"sell"),askVolume:void 0,vwap:void 0,open:void 0,close:n,last:n,previousClose:void 0,change:void 0,percentage:void 0,average:this.safeNumber(e,"avg"),baseVolume:this.safeNumber(e,"vol_cur"),quoteVolume:this.safeNumber(e,"vol"),info:e}}},{key:"fetchTickers",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,u,c,d,h,l,f,p,m=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=m.length>0&&void 0!==m[0]?m[0]:void 0,r=m.length>1&&void 0!==m[1]?m[1]:{},e.next=4,this.loadMarkets();case 4:if(i=this.ids,void 0!==t){e.next=13;break}if(a=i.length,!((i=i.join("-")).length>this.options.fetchTickersMaxLength)){e.next=11;break}throw s=this.safeInteger(this.options,"fetchTickersMaxLength",2048),new v(this.id+" has "+a.toString()+" markets exceeding max URL length for this endpoint ("+s.toString()+" characters), please, specify a list of symbols of interest in the first argument to fetchTickers");case 11:e.next=15;break;case 13:i=(i=this.marketIds(t)).join("-");case 15:return o={pair:i},e.next=18,this.publicGetTickerPair(this.extend(o,r));case 18:for(u=e.sent,c={},d=Object.keys(u),h=0;h<d.length;h++)l=d[h],f=this.safeMarket(l),p=f.symbol,c[p]=this.parseTicker(u[l],f);return e.abrupt("return",this.filterByArray(c,"symbol",t));case 23:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=a(n.mark((function e(t){var r,i,a=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:{},e.next=3,this.fetchTickers([t],r);case 3:return i=e.sent,e.abrupt("return",i[t]);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeTimestamp(e,"timestamp"),i=this.safeString(e,"type");"ask"===i?i="sell":"bid"===i&&(i="buy");var n=this.safeString2(e,"rate","price"),a=this.safeString2(e,"trade_id","tid"),s=this.safeString(e,"order_id"),o=this.safeString(e,"pair"),u=this.safeSymbol(o,t),c=this.safeString(e,"amount"),d=this.parseNumber(n),h=this.parseNumber(c),l=this.parseNumber(w.stringMul(n,c)),f="limit",p=void 0,v=void 0,m=this.safeNumber(e,"commission");if(void 0!==m){var g=this.safeString(e,"commissionCurrency"),y=this.safeCurrencyCode(g);v={cost:m,currency:y}}var b=this.safeValue(e,"is_your_order");return void 0!==b&&(p="taker",b&&(p="maker"),void 0===v&&(v=this.calculateFee(u,f,i,h,d,p))),{id:a,order:s,timestamp:r,datetime:this.iso8601(r),symbol:u,type:f,side:i,takerOrMaker:p,price:d,amount:h,cost:l,fee:v,info:e}}},{key:"fetchTrades",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,u,c=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,i=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={pair:s.id},void 0!==i&&(o.limit=i),e.next=10,this.publicGetTradesPair(this.extend(o,a));case 10:if(u=e.sent,!Array.isArray(u)){e.next=15;break}if(0!==u.length){e.next=15;break}return e.abrupt("return",[]);case 15:return e.abrupt("return",this.parseTrades(u[s.id],s,r,i));case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=a(n.mark((function e(t,r,i,a){var s,o,u,c,d,h,l,f,v,m,g,y=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=y.length>4&&void 0!==y[4]?y[4]:void 0,o=y.length>5&&void 0!==y[5]?y[5]:{},"market"!==r){e.next=4;break}throw new p(this.id+" allows limit orders only");case 4:return e.next=6,this.loadMarkets();case 6:return u=this.market(t),c={pair:u.id,type:i,amount:this.amountToPrecision(t,a),rate:this.priceToPrecision(t,s)},s=parseFloat(s),a=parseFloat(a),e.next=12,this.privatePostTrade(this.extend(c,o));case 12:return d=e.sent,h=void 0,l="open",f=0,v=a,void 0!==(m=this.safeValue(d,"return"))&&("0"===(h=this.safeString(m,"order_id"))&&(h=this.safeString(m,"init_order_id"),l="closed"),f=this.safeNumber(m,"received",f),v=this.safeNumber(m,"remains",a)),g=this.milliseconds(),e.abrupt("return",this.safeOrder({id:h,timestamp:g,datetime:this.iso8601(g),lastTradeTimestamp:void 0,status:l,symbol:t,type:r,side:i,price:s,cost:void 0,amount:a,remaining:v,filled:f,fee:void 0,info:d,clientOrderId:void 0,average:void 0,trades:void 0}));case 21:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=a(n.mark((function e(t){var r,i,a=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:{},e.next=4,this.loadMarkets();case 4:return i={order_id:parseInt(t)},e.next=7,this.privatePostCancelOrder(this.extend(i,r));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({0:"open",1:"closed",2:"canceled",3:"canceled"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),i=this.parseOrderStatus(this.safeString(e,"status")),n=this.safeTimestamp(e,"timestamp_created"),a=this.safeString(e,"pair"),s=this.safeSymbol(a,t),o=void 0,u=void 0,c=this.safeNumber(e,"rate");"start_amount"in e?(u=this.safeNumber(e,"start_amount"),o=this.safeNumber(e,"amount")):o=this.safeNumber(e,"amount");var d=void 0;return this.safeOrder({info:e,id:r,clientOrderId:void 0,symbol:s,timestamp:n,datetime:this.iso8601(n),lastTradeTimestamp:void 0,type:"limit",timeInForce:void 0,postOnly:void 0,side:this.safeString(e,"type"),price:c,stopPrice:void 0,cost:void 0,amount:u,remaining:o,filled:void 0,status:i,fee:d,average:void 0,trades:void 0})}},{key:"fetchOrder",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u.length>1&&void 0!==u[1]?u[1]:void 0,r=u.length>2&&void 0!==u[2]?u[2]:{},e.next=4,this.loadMarkets();case 4:return i={order_id:parseInt(t)},e.next=7,this.privatePostOrderInfo(this.extend(i,r));case 7:return a=e.sent,t=t.toString(),s=this.safeValue(a,"return",{}),o=this.safeValue(s,t),e.abrupt("return",this.parseOrder(this.extend({id:t},o)));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,u,c,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,i=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return s={},o=void 0,void 0!==t&&(o=this.market(t),s.pair=o.id),e.next=11,this.privatePostActiveOrders(this.extend(s,a));case 11:return u=e.sent,c=this.safeValue(u,"return",[]),e.abrupt("return",this.parseOrders(c,o,r,i));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,u,c,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,i=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return s=void 0,o={},void 0!==t&&(s=this.market(t),o.pair=s.id),void 0!==i&&(o.count=parseInt(i)),void 0!==r&&(o.since=parseInt(r/1e3)),e.next=13,this.privatePostTradeHistory(this.extend(o,a));case 13:return u=e.sent,c=this.safeValue(u,"return",[]),e.abrupt("return",this.parseTrades(c,s,r,i));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"withdraw",value:function(){var e=a(n.mark((function e(t,r,i){var a,s,o,u,c,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=d.length>3&&void 0!==d[3]?d[3]:void 0,s=d.length>4&&void 0!==d[4]?d[4]:{},this.checkAddress(i),e.next=5,this.loadMarkets();case 5:if(o=this.currency(t),u={coinName:o.id,amount:parseFloat(r),address:i},void 0===a){e.next=9;break}throw new p(this.id+" withdraw() does not support the tag argument yet due to a lack of docs on withdrawing with tag/memo on behalf of the exchange.");case 9:return e.next=11,this.privatePostWithdrawCoin(this.extend(u,s));case 11:return c=e.sent,e.abrupt("return",{info:c,id:c.return.tId});case 13:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.urls.api[t],o=this.omit(i,this.extractParams(e));if("private"===t){this.checkRequiredCredentials();var u=this.nonce();a=this.urlencode(this.extend({nonce:u,method:e},o));var c=this.hmac(this.encode(a),this.encode(this.secret),"sha512");n={"Content-Type":"application/x-www-form-urlencoded",Key:this.apiKey,Sign:c}}else"public"===t?(s+="/"+this.implodeParams(e,i),Object.keys(o).length&&(s+="?"+this.urlencode(o))):(s+="/"+this.implodeParams(e,i),"GET"===r?Object.keys(o).length&&(s+="?"+this.urlencode(o)):Object.keys(o).length&&(a=this.json(o),n={"Content-Type":"application/json"}));return{url:s,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,u){if(void 0!==s&&"success"in s){var c=this.safeValue(s,"success",!1);if("string"===typeof c&&(c="true"===c||"1"===c),!c){var d=this.safeString(s,"code"),h=this.safeString(s,"error"),l=this.id+" "+a;throw this.throwExactlyMatchedException(this.exceptions.exact,d,l),this.throwExactlyMatchedException(this.exceptions.exact,h,l),this.throwBroadlyMatchedException(this.exceptions.broad,h,l),new p(l)}}}}]),r}(l)},function(e,t,r){"use strict";var i=r(7),n=r(8),a=r(1),s=r(2),o=r(6),u=r(3),c=r(4),d=r(5),h=r(11),l=r(10),f=l.ExchangeError,p=l.PermissionDenied,v=l.ExchangeNotAvailable,m=l.InsufficientFunds,g=l.OrderNotFound,y=l.InvalidOrder,b=l.RateLimitExceeded,x=l.NotSupported,k=l.BadRequest,w=l.AuthenticationError,_=r(12);e.exports=function(e){c(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(u(r.prototype),"describe",this).call(this),{id:"timex",name:"TimeX",countries:["AU"],version:"v1",rateLimit:1500,has:{cancelOrder:!0,cancelOrders:!0,CORS:!1,createOrder:!0,editOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchCurrencies:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,fetchTradingFee:!0},timeframes:{"1m":"I1","5m":"I5","15m":"I15","30m":"I30","1h":"H1","2h":"H2","4h":"H4","6h":"H6","12h":"H12","1d":"D1","1w":"W1"},urls:{logo:"https://user-images.githubusercontent.com/1294454/70423869-6839ab00-1a7f-11ea-8f94-13ae72c31115.jpg",api:"https://plasma-relay-backend.timex.io",www:"https://timex.io",doc:"https://docs.timex.io",referral:"https://timex.io/?refcode=1x27vNkTbP1uwkCck"},api:{custody:{get:["credentials","credentials/h/{hash}","credentials/k/{key}","credentials/me/address","deposit-addresses","deposit-addresses/h/{hash}"]},history:{get:["orders","orders/details","orders/export/csv","trades","trades/export/csv"]},currencies:{get:["a/{address}","i/{id}","s/{symbol}"],post:["perform","prepare","remove/perform","s/{symbol}/remove/prepare","s/{symbol}/update/perform","s/{symbol}/update/prepare"]},markets:{get:["i/{id}","s/{symbol}"],post:["perform","prepare","remove/perform","s/{symbol}/remove/prepare","s/{symbol}/update/perform","s/{symbol}/update/prepare"]},public:{get:["candles","currencies","markets","orderbook","orderbook/raw","orderbook/v2","tickers","trades"]},statistics:{get:["address"]},trading:{get:["balances","fees","orders"],post:["orders","orders/json"],put:["orders","orders/json"],delete:["orders","orders/json"]},tradingview:{get:["config","history","symbol_info","time"]}},exceptions:{exact:{0:f,1:x,4e3:k,4001:k,4002:m,4003:w,4004:w,4005:k,4006:k,4007:k,4300:p,4100:w,4400:g,5001:y,5002:f,400:k,401:w,403:p,404:g,429:b,500:f,503:v},broad:{Insufficient:m}},options:{fetchTickers:{period:"1d"},fetchTrades:{sort:"timestamp,asc"},fetchMyTrades:{sort:"timestamp,asc"},fetchOpenOrders:{sort:"createdAt,asc"},fetchClosedOrders:{sort:"createdAt,asc"},defaultSort:"timestamp,asc",defaultSortOrders:"createdAt,asc"}})}},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:{},e.next=3,this.publicGetMarkets(t);case 3:for(r=e.sent,n=[],a=0;a<r.length;a++)n.push(this.parseMarket(r[a]));return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchCurrencies",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:{},e.next=3,this.publicGetCurrencies(t);case 3:for(r=e.sent,n=[],a=0;a<r.length;a++)s=r[a],n.push(this.parseCurrency(s));return e.abrupt("return",this.indexBy(n,"code"));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=4,this.loadMarkets();case 4:return n=this.safeString(this.options.fetchTickers,"period","1d"),a={period:this.timeframes[n]},e.next=8,this.publicGetTickers(this.extend(a,r));case 8:return s=e.sent,e.abrupt("return",this.parseTickers(s,t));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a=this.safeString(this.options.fetchTickers,"period","1d"),s={market:n.id,period:this.timeframes[a]},e.next=8,this.publicGetTickers(this.extend(s,r));case 8:return o=e.sent,u=this.safeValue(o,0),e.abrupt("return",this.parseTicker(u,n));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:{},e.next=4,this.loadMarkets();case 4:return a=this.market(t),s={market:a.id},void 0!==r&&(s.limit=r),e.next=9,this.publicGetOrderbookV2(this.extend(s,n));case 9:return o=e.sent,u=this.parse8601(this.safeString(o,"timestamp")),e.abrupt("return",this.parseOrderBook(o,u,"bid","ask","price","baseTokenAmount"));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=f.length>1&&void 0!==f[1]?f[1]:void 0,n=f.length>2&&void 0!==f[2]?f[2]:void 0,a=f.length>3&&void 0!==f[3]?f[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o=this.safeValue(this.options,"fetchTrades",{}),u=this.safeValue(o,"sort","timestamp,asc"),c=this.safeString(a,"sort",u),d=this.omit(a,"sort"),h={market:s.id,sort:c},void 0!==r&&(h.from=this.iso8601(r)),void 0!==n&&(h.size=n),e.next=15,this.publicGetTrades(this.extend(h,d));case 15:return l=e.sent,e.abrupt("return",this.parseTrades(l,s,r,n));case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>1&&void 0!==l[1]?l[1]:"1m",n=l.length>2&&void 0!==l[2]?l[2]:void 0,a=l.length>3&&void 0!==l[3]?l[3]:void 0,s=l.length>4&&void 0!==l[4]?l[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),u={market:o.id,period:this.timeframes[r]},c=this.parseTimeframe(r),void 0!==n?(u.from=this.iso8601(n),void 0!==a&&(u.till=this.iso8601(this.sum(n,this.sum(a,1)*c*1e3)))):void 0!==a?(d=this.milliseconds(),u.till=this.iso8601(d),u.from=this.iso8601(d-a*c*1e3-1)):u.till=this.iso8601(this.milliseconds()),e.next=12,this.publicGetCandles(this.extend(u,s));case 12:return h=e.sent,e.abrupt("return",this.parseOHLCVs(h,o,r,n,a));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.tradingGetBalances(t);case 5:for(r=e.sent,n={info:r},a=0;a<r.length;a++)s=r[a],o=this.safeString(s,"currency"),u=this.safeCurrencyCode(o),(c=this.account()).total=this.safeString(s,"totalBalance"),c.used=this.safeString(s,"lockedBalance"),n[u]=c;return e.abrupt("return",this.parseBalance(n,!1));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,u,c,d,h,l,f,p,v,m,g,b,x=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=x.length>4&&void 0!==x[4]?x[4]:void 0,o=x.length>5&&void 0!==x[5]?x[5]:{},e.next=4,this.loadMarkets();case 4:if(u=this.market(t),c=n.toUpperCase(),d=r.toUpperCase(),h={symbol:u.id,quantity:this.amountToPrecision(t,a),side:c,orderTypes:d},l=o,"LIMIT"!==d){e.next=26;break}if(h.price=this.priceToPrecision(t,s),f=this.safeInteger(this.options,"expireIn"),p=this.safeValue(o,"expireTime"),v=this.safeValue(o,"expireIn",f),void 0===p){e.next=18;break}h.expireTime=p,e.next=23;break;case 18:if(void 0===v){e.next=22;break}h.expireIn=v,e.next=23;break;case 22:throw new y(this.id+" createOrder() method requires a expireTime or expireIn param for a "+r+" order, you can also set the expireIn exchange-wide option");case 23:l=this.omit(o,["expireTime","expireIn"]),e.next=27;break;case 26:h.price=0;case 27:return e.next=29,this.tradingPostOrders(this.extend(h,l));case 29:return m=e.sent,g=this.safeValue(m,"orders",[]),b=this.safeValue(g,0,{}),e.abrupt("return",this.parseOrder(b,u));case 33:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"editOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,u,c,d,h,l,f,p,v,m,g=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=g.length>4&&void 0!==g[4]?g[4]:void 0,o=g.length>5&&void 0!==g[5]?g[5]:void 0,u=g.length>6&&void 0!==g[6]?g[6]:{},e.next=5,this.loadMarkets();case 5:return c=this.market(r),d={id:t},void 0!==s&&(d.quantity=this.amountToPrecision(r,s)),void 0!==o&&(d.price=this.priceToPrecision(r,o)),e.next=11,this.tradingPutOrders(this.extend(d,u));case 11:if(!("unchangedOrders"in(h=e.sent))){e.next=16;break}return l=this.safeValue(h,"unchangedOrders",[]),f=this.safeString(l,0),e.abrupt("return",{id:f,info:h});case 16:return p=this.safeValue(h,"changedOrders",[]),v=this.safeValue(p,0,{}),m=this.safeValue(v,"newOrder",{}),e.abrupt("return",this.parseOrder(m,c));case 20:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:void 0,n=a.length>2&&void 0!==a[2]?a[2]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.cancelOrders([t],r,n);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cancelOrders",value:function(){var e=n(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.loadMarkets();case 4:return n={id:t},e.next=7,this.tradingDeleteOrders(this.extend(n,r));case 7:return a=e.sent,e.abrupt("return",a);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.length>1&&void 0!==o[1]?o[1]:void 0,o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return r={orderHash:t},e.next=7,this.historyGetOrdersDetails(r);case 7:return n=e.sent,a=this.safeValue(n,"order",{}),s=this.safeValue(n,"trades",[]),e.abrupt("return",this.parseOrder(this.extend(a,{trades:s})));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.length>0&&void 0!==p[0]?p[0]:void 0,r=p.length>1&&void 0!==p[1]?p[1]:void 0,n=p.length>2&&void 0!==p[2]?p[2]:void 0,a=p.length>3&&void 0!==p[3]?p[3]:{},e.next=6,this.loadMarkets();case 6:return s=this.safeValue(this.options,"fetchOpenOrders",{}),o=this.safeValue(s,"sort","createdAt,asc"),u=this.safeString(a,"sort",o),c=this.omit(a,"sort"),d={sort:u},h=void 0,void 0!==t&&(h=this.market(t),d.symbol=h.id),void 0!==n&&(d.size=n),e.next=16,this.tradingGetOrders(this.extend(d,c));case 16:return l=e.sent,f=this.safeValue(l,"orders",[]),e.abrupt("return",this.parseOrders(f,h,r,n));case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.length>0&&void 0!==p[0]?p[0]:void 0,r=p.length>1&&void 0!==p[1]?p[1]:void 0,n=p.length>2&&void 0!==p[2]?p[2]:void 0,a=p.length>3&&void 0!==p[3]?p[3]:{},e.next=6,this.loadMarkets();case 6:return s=this.safeValue(this.options,"fetchClosedOrders",{}),o=this.safeValue(s,"sort","createdAt,asc"),u=this.safeString(a,"sort",o),c=this.omit(a,"sort"),d={sort:u,side:"BUY"},h=void 0,void 0!==t&&(h=this.market(t),d.symbol=h.id),void 0!==r&&(d.from=this.iso8601(r)),void 0!==n&&(d.size=n),e.next=17,this.historyGetOrders(this.extend(d,c));case 17:return l=e.sent,f=this.safeValue(l,"orders",[]),e.abrupt("return",this.parseOrders(f,h,r,n));case 20:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.length>0&&void 0!==p[0]?p[0]:void 0,r=p.length>1&&void 0!==p[1]?p[1]:void 0,n=p.length>2&&void 0!==p[2]?p[2]:void 0,a=p.length>3&&void 0!==p[3]?p[3]:{},e.next=6,this.loadMarkets();case 6:return s=this.safeValue(this.options,"fetchMyTrades",{}),o=this.safeValue(s,"sort","timestamp,asc"),u=this.safeString(a,"sort",o),c=this.omit(a,"sort"),d={sort:u},h=void 0,void 0!==t&&(h=this.market(t),d.symbol=h.id),void 0!==r&&(d.from=this.iso8601(r)),void 0!==n&&(d.size=n),e.next=17,this.historyGetTrades(this.extend(d,c));case 17:return l=e.sent,f=this.safeValue(l,"trades",[]),e.abrupt("return",this.parseTrades(f,h,r,n));case 20:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTradingFee",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={markets:n.id},e.next=7,this.tradingGetFees(this.extend(a,r));case 7:return s=e.sent,o=this.safeValue(s,0,{}),e.abrupt("return",{info:s,maker:this.safeNumber(o,"fee"),taker:void 0});case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseMarket",value:function(e){var t=!this.safeValue(e,"locked"),r=this.safeString(e,"symbol"),i=this.safeString(e,"baseCurrency"),n=this.safeString(e,"quoteCurrency"),a=this.safeCurrencyCode(i),s=this.safeCurrencyCode(n),o=a+"/"+s,u={amount:this.precisionFromString(this.safeString(e,"quantityIncrement")),price:this.precisionFromString(this.safeString(e,"tickSize"))},c=this.safeNumber(e,"quantityIncrement"),d=this.safeNumber(e,"baseMinSize"),h=Math.max(c,d),l=this.safeNumber(e,"tickSize"),f=this.safeNumber(e,"quoteMinSize");return{id:r,symbol:o,base:a,quote:s,baseId:i,quoteId:n,type:"spot",active:t,precision:u,limits:{amount:{min:h,max:void 0},price:{min:l,max:void 0},cost:{min:Math.max(f,h*l),max:void 0}},taker:this.safeNumber(e,"takerFee"),maker:this.safeNumber(e,"makerFee"),info:e}}},{key:"parseCurrency",value:function(e){var t=this.safeString(e,"symbol"),r=this.safeCurrencyCode(t),i=this.safeString(e,"name"),n=this.safeInteger(e,"decimals"),a=this.safeValue(e,"active"),s=this.safeString(e,"withdrawalFee"),o=this.safeInteger(e,"tradeDecimals"),u=void 0;if(void 0!==s&&void 0!==o){var c=s.length-o;if(c>0){var d=s.slice(0,c),h=s.slice(-c);u=parseFloat(d+"."+h)}else{for(var l=".",f=0;f<-c;f++)l+="0";u=parseFloat(l+s)}}return{id:r,code:r,info:e,type:void 0,name:i,active:a,fee:u,precision:n,limits:{withdraw:{min:u,max:void 0},amount:{min:void 0,max:void 0}}}}},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"market"),i=this.safeSymbol(r,t,"/"),n=this.parse8601(this.safeString(e,"timestamp")),a=this.safeNumber(e,"last"),s=this.safeNumber(e,"open"),o=void 0,u=void 0;void 0!==a&&void 0!==s&&(o=a-s,u=this.sum(a,s)/2);var c=void 0;return void 0!==o&&s&&(c=o/s*100),{symbol:i,info:e,timestamp:n,datetime:this.iso8601(n),high:this.safeNumber(e,"high"),low:this.safeNumber(e,"low"),bid:this.safeNumber(e,"bid"),bidVolume:void 0,ask:this.safeNumber(e,"ask"),askVolume:void 0,vwap:void 0,open:s,close:a,last:a,previousClose:void 0,change:o,percentage:c,average:u,baseVolume:this.safeNumber(e,"volume"),quoteVolume:this.safeNumber(e,"volumeQuote")}}},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"symbol"),i=this.safeSymbol(r,t),n=this.parse8601(this.safeString(e,"timestamp")),a=this.safeString(e,"price"),s=this.safeString(e,"quantity"),o=this.parseNumber(a),u=this.parseNumber(s),c=this.parseNumber(_.stringMul(a,s)),d=this.safeString(e,"id"),h=this.safeStringLower2(e,"direction","side"),l=this.safeStringLower(e,"makerOrTaker"),f=void 0;void 0!==l&&(f=this.safeString(e,l+"OrderId"));var p=void 0,v=this.safeNumber(e,"fee"),m=this.safeCurrencyCode(this.safeString(e,"feeToken"));return void 0!==v&&(p={cost:v,currency:m}),{info:e,id:d,timestamp:n,datetime:this.iso8601(n),symbol:i,order:f,type:void 0,side:h,price:o,amount:u,cost:c,takerOrMaker:l,fee:p}}},{key:"parseOHLCV",value:function(e){return[this.parse8601(this.safeString(e,"timestamp")),this.safeNumber(e,"open"),this.safeNumber(e,"high"),this.safeNumber(e,"low"),this.safeNumber(e,"close"),this.safeNumber(e,"volume")]}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),i=this.safeStringLower(e,"type"),n=this.safeStringLower(e,"side"),a=this.safeString(e,"symbol"),s=this.safeSymbol(a,t),o=this.parse8601(this.safeString(e,"createdAt")),u=this.safeNumber(e,"price"),c=this.safeNumber(e,"quantity"),d=this.safeNumber(e,"filledQuantity"),h=this.safeNumber(e,"cancelledQuantity"),l=void 0;void 0!==c&&void 0!==d&&(l=d>=c?"closed":void 0!==h&&h>0?"canceled":"open");var f=this.safeValue(e,"trades",[]),p=this.parseTrades(f,t,void 0,void 0,{order:r,type:i}),v=this.safeString(e,"clientOrderId");return this.safeOrder({info:e,id:r,clientOrderId:v,timestamp:o,datetime:this.iso8601(o),lastTradeTimestamp:void 0,symbol:s,type:i,timeInForce:void 0,postOnly:void 0,side:n,price:u,stopPrice:void 0,amount:c,cost:void 0,average:void 0,filled:d,remaining:void 0,status:l,fee:void 0,trades:p})}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.urls.api+"/"+t+"/"+e;if(Object.keys(i).length&&(s+="?"+this.urlencodeWithArrayRepeat(i)),"public"!==t){this.checkRequiredCredentials();var o=this.stringToBase64(this.apiKey+":"+this.secret),u="Basic "+this.decode(o);n={authorization:u}}return{url:s,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,u){if(void 0!==s&&e>=400){var c=this.id+" "+a,d=this.safeValue(s,"error");void 0===d&&(d=s);var h=this.safeString2(d,"code","status"),l=this.safeString2(d,"message","debugMessage");throw this.throwBroadlyMatchedException(this.exceptions.broad,l,c),this.throwExactlyMatchedException(this.exceptions.exact,h,c),this.throwExactlyMatchedException(this.exceptions.exact,l,c),new f(c)}}}]),r}(h)},function(e,t,r){"use strict";var i=r(21),n=r(7),a=r(8),s=r(1),o=r(2),u=r(6),c=r(3),d=r(4),h=r(5),l=r(11),f=r(10),p=f.ExchangeError,v=f.BadRequest,m=f.AuthenticationError,g=f.InvalidOrder,y=f.InsufficientFunds,b=f.OrderNotFound,x=f.PermissionDenied,k=f.AddressPending,w=r(12);e.exports=function(e){d(r,e);var t=h(r);function r(){return s(this,r),t.apply(this,arguments)}return o(r,[{key:"describe",value:function(){return this.deepExtend(u(c(r.prototype),"describe",this).call(this),{id:"upbit",name:"Upbit",countries:["KR"],version:"v1",rateLimit:1e3,pro:!0,has:{cancelOrder:!0,CORS:!0,createDepositAddress:!0,createMarketOrder:!0,createOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchDepositAddress:!0,fetchDeposits:!0,fetchMarkets:!0,fetchMyTrades:!1,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrderBooks:!0,fetchOrders:!1,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,fetchTransactions:!1,fetchWithdrawals:!0,withdraw:!0},timeframes:{"1m":"minutes","3m":"minutes","5m":"minutes","15m":"minutes","30m":"minutes","1h":"minutes","4h":"minutes","1d":"days","1w":"weeks","1M":"months"},hostname:"api.upbit.com",urls:{logo:"https://user-images.githubusercontent.com/1294454/49245610-eeaabe00-f423-11e8-9cba-4b0aed794799.jpg",api:{public:"https://{hostname}",private:"https://{hostname}"},www:"https://upbit.com",doc:"https://docs.upbit.com/docs/%EC%9A%94%EC%B2%AD-%EC%88%98-%EC%A0%9C%ED%95%9C",fees:"https://upbit.com/service_center/guide"},api:{public:{get:["market/all","candles/{timeframe}","candles/{timeframe}/{unit}","candles/minutes/{unit}","candles/minutes/1","candles/minutes/3","candles/minutes/5","candles/minutes/15","candles/minutes/30","candles/minutes/60","candles/minutes/240","candles/days","candles/weeks","candles/months","trades/ticks","ticker","orderbook"]},private:{get:["accounts","orders/chance","order","orders","withdraws","withdraw","withdraws/chance","deposits","deposit","deposits/coin_addresses","deposits/coin_address"],post:["orders","withdraws/coin","withdraws/krw","deposits/generate_coin_address"],delete:["order"]}},fees:{trading:{tierBased:!1,percentage:!0,maker:.0025,taker:.0025},funding:{tierBased:!1,percentage:!1,withdraw:{},deposit:{}}},exceptions:{exact:{"This key has expired.":m,"Missing request parameter error. Check the required parameters!":v,"side is missing, side does not have a valid value":g},broad:{thirdparty_agreement_required:x,out_of_scope:x,order_not_found:b,insufficient_funds:y,invalid_access_key:m,jwt_verification:m,create_ask_error:p,create_bid_error:p,volume_too_large:g,invalid_funds:g}},options:{createMarketBuyOrderRequiresPrice:!0,fetchTickersMaxLength:4096,fetchOrderBooksMaxLength:4096,tradingFeesByQuoteCurrency:{KRW:5e-4}},commonCurrencies:{TON:"Tokamak Network"}})}},{key:"fetchCurrency",value:function(){var e=a(n.mark((function e(t){var r,i,a=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:{},e.next=3,this.loadMarkets();case 3:return i=this.currency(t),e.next=6,this.fetchCurrencyById(i.id,r);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchCurrencyById",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,u,c,d,h,l,f,p,v,m,g,y,b,x,k=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=k.length>1&&void 0!==k[1]?k[1]:{},i={currency:t},e.next=4,this.privateGetWithdrawsChance(this.extend(i,r));case 4:return a=e.sent,s=this.safeValue(a,"member_level",{}),o=this.safeValue(a,"currency",{}),u=this.safeValue(a,"withdraw_limit",{}),c=this.safeValue(u,"can_withdraw"),d=this.safeString(o,"wallet_state"),h=this.safeValue(s,"wallet_locked"),l=this.safeValue(s,"locked"),f=!0,void 0===c||c?("working"!==d||void 0!==h&&h||void 0!==l&&l)&&(f=!1):f=!1,p=this.safeNumber(u,"onetime"),v=this.safeNumber(u,"daily",p),m=this.safeNumber(u,"remaining_daily",v),g=void 0,g=m>0?m:v,y=void 0,b=this.safeString(o,"code"),x=this.safeCurrencyCode(b),e.abrupt("return",{info:a,id:b,code:x,name:x,active:f,fee:this.safeNumber(o,"withdraw_fee"),precision:y,limits:{withdraw:{min:this.safeNumber(u,"minimum"),max:g}}});case 23:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchMarket",value:function(){var e=a(n.mark((function e(t){var r,i,a=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:{},e.next=3,this.loadMarkets();case 3:return i=this.market(t),e.next=6,this.fetchMarketById(i.id,r);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchMarketById",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,u,c,d,h,l,f,p,v,m,g,y,b,x,k=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=k.length>1&&void 0!==k[1]?k[1]:{},i={market:t},e.next=4,this.privateGetOrdersChance(this.extend(i,r));case 4:return a=e.sent,s=this.safeValue(a,"market"),o=this.safeValue(s,"bid"),u=this.safeValue(s,"ask"),c=this.safeString(s,"id"),d=this.safeString(u,"currency"),h=this.safeString(o,"currency"),l=this.safeCurrencyCode(d),f=this.safeCurrencyCode(h),p=l+"/"+f,v={amount:8,price:8},m=this.safeString(s,"state"),g="active"===m,y=this.safeNumber(a,"bid_fee"),b=this.safeNumber(a,"ask_fee"),x=Math.max(y,b),e.abrupt("return",{info:a,id:c,symbol:p,base:l,quote:f,baseId:d,quoteId:h,active:g,precision:v,maker:x,taker:x,limits:{amount:{min:this.safeNumber(u,"min_total"),max:void 0},price:{min:Math.pow(10,-v.price),max:void 0},cost:{min:this.safeNumber(o,"min_total"),max:this.safeNumber(s,"max_total")}}});case 21:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchMarkets",value:function(){var e=a(n.mark((function e(){var t,r,a,s,o,u,c,d,h,l,f,p,v,m,g,y,b,x=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=x.length>0&&void 0!==x[0]?x[0]:{},e.next=3,this.publicGetMarketAll(t);case 3:for(r=e.sent,a=[],s=0;s<r.length;s++)o=r[s],u=this.safeString(o,"market"),c=u.split("-"),d=i(c,2),h=d[0],l=d[1],f=this.safeCurrencyCode(l),p=this.safeCurrencyCode(h),v=f+"/"+p,m={amount:8,price:8},g=!0,y=this.safeNumber(this.options.tradingFeesByQuoteCurrency,p,this.fees.trading.maker),b=this.safeNumber(this.options.tradingFeesByQuoteCurrency,p,this.fees.trading.taker),a.push({id:u,symbol:v,base:f,quote:p,baseId:l,quoteId:h,active:g,info:o,precision:m,maker:y,taker:b,limits:{amount:{min:Math.pow(10,-m.amount),max:void 0},price:{min:Math.pow(10,-m.price),max:void 0},cost:{min:void 0,max:void 0}}});return e.abrupt("return",a);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,u,c,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetAccounts(t);case 5:for(r=e.sent,i={info:r},a=0;a<r.length;a++)s=r[a],o=this.safeString(s,"currency"),u=this.safeCurrencyCode(o),(c=this.account()).free=this.safeString(s,"balance"),c.used=this.safeString(s,"locked"),i[u]=c;return e.abrupt("return",this.parseBalance(i,!1));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBooks",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,u,c,d,h,l,f,v=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=v.length>0&&void 0!==v[0]?v[0]:void 0,v.length>1&&void 0!==v[1]?v[1]:void 0,r=v.length>2&&void 0!==v[2]?v[2]:{},e.next=5,this.loadMarkets();case 5:if(i=void 0,void 0!==t){e.next=13;break}if(!((i=this.ids.join(",")).length>this.options.fetchOrderBooksMaxLength)){e.next=11;break}throw a=this.ids.length,new p(this.id+" has "+a.toString()+" symbols ("+i.length.toString()+" characters) exceeding max URL length ("+this.options.fetchOrderBooksMaxLength.toString()+" characters), you are required to specify a list of symbols in the first argument to fetchOrderBooks");case 11:e.next=15;break;case 13:i=(i=this.marketIds(t)).join(",");case 15:return s={markets:i},e.next=18,this.publicGetOrderbook(this.extend(s,r));case 18:for(o=e.sent,u={},c=0;c<o.length;c++)d=o[c],h=this.safeString(d,"market"),l=this.safeSymbol(h,void 0,"-"),f=this.safeInteger(d,"timestamp"),u[l]={bids:this.sortBy(this.parseBidsAsks(d.orderbook_units,"bid_price","bid_size"),0,!0),asks:this.sortBy(this.parseBidsAsks(d.orderbook_units,"ask_price","ask_size"),0),timestamp:f,datetime:this.iso8601(f),nonce:void 0};return e.abrupt("return",u);case 22:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=a(n.mark((function e(t){var r,i,a,s=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>1&&void 0!==s[1]?s[1]:void 0,i=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.fetchOrderBooks([t],r,i);case 4:return a=e.sent,e.abrupt("return",this.safeValue(a,t));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeInteger(e,"trade_timestamp"),i=this.safeString2(e,"market","code"),n=this.safeSymbol(i,t,"-"),a=this.safeNumber(e,"prev_closing_price"),s=this.safeNumber(e,"trade_price"),o=this.safeNumber(e,"signed_change_price"),u=this.safeNumber(e,"signed_change_rate");return{symbol:n,timestamp:r,datetime:this.iso8601(r),high:this.safeNumber(e,"high_price"),low:this.safeNumber(e,"low_price"),bid:void 0,bidVolume:void 0,ask:void 0,askVolume:void 0,vwap:void 0,open:this.safeNumber(e,"opening_price"),close:s,last:s,previousClose:a,change:o,percentage:u,average:void 0,baseVolume:this.safeNumber(e,"acc_trade_volume_24h"),quoteVolume:this.safeNumber(e,"acc_trade_price_24h"),info:e}}},{key:"fetchTickers",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,u,c,d,h,l=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:void 0,r=l.length>1&&void 0!==l[1]?l[1]:{},e.next=4,this.loadMarkets();case 4:if(i=void 0,void 0!==t){e.next=12;break}if(!((i=this.ids.join(",")).length>this.options.fetchTickersMaxLength)){e.next=10;break}throw a=this.ids.length,new p(this.id+" has "+a.toString()+" symbols exceeding max URL length, you are required to specify a list of symbols in the first argument to fetchTickers");case 10:e.next=14;break;case 12:i=(i=this.marketIds(t)).join(",");case 14:return s={markets:i},e.next=17,this.publicGetTicker(this.extend(s,r));case 17:for(o=e.sent,u={},c=0;c<o.length;c++)d=this.parseTicker(o[c]),h=d.symbol,u[h]=d;return e.abrupt("return",this.filterByArray(u,"symbol",t));case 21:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=a(n.mark((function e(t){var r,i,a=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:{},e.next=3,this.fetchTickers([t],r);case 3:return i=e.sent,e.abrupt("return",this.safeValue(i,t));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString2(e,"sequential_id","uuid"),n=void 0,a=this.safeInteger(e,"timestamp");void 0===a&&(a=this.parse8601(this.safeString(e,"created_at")));var s=void 0,o=this.safeStringLower2(e,"ask_bid","side");"ask"===o?s="sell":"bid"===o&&(s="buy");var u=this.safeNumber(e,"funds"),c=this.safeString2(e,"trade_price","price"),d=this.safeString2(e,"trade_volume","volume"),h=this.parseNumber(c),l=this.parseNumber(d);void 0===u&&(u=this.parseNumber(w.stringMul(c,d)));var f=this.safeString2(e,"market","code"),p=void 0,v=void 0,m=void 0;if(void 0!==(t=this.safeMarket(f,t)))m=t.symbol,v=t.quote;else{var g=f.split("-"),y=i(g,2),b=y[0],x=y[1],k=this.safeCurrencyCode(b),_=this.safeCurrencyCode(x);m=k+"/"+_,v=_}var S=this.safeString(e,o+"_fee");return void 0!==S&&(p={currency:v,cost:S}),{id:r,info:e,order:n,timestamp:a,datetime:this.iso8601(a),symbol:m,type:void 0,side:s,takerOrMaker:void 0,price:h,amount:l,cost:u,fee:p}}},{key:"fetchTrades",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,u,c=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,i=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),void 0===i&&(i=200),o={market:s.id,count:i},e.next=10,this.publicGetTradesTicks(this.extend(o,a));case 10:return u=e.sent,e.abrupt("return",this.parseTrades(u,s,r,i));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){return[this.parse8601(this.safeString(e,"candle_date_time_utc")),this.safeNumber(e,"opening_price"),this.safeNumber(e,"high_price"),this.safeNumber(e,"low_price"),this.safeNumber(e,"trade_price"),this.safeNumber(e,"candle_acc_trade_volume")]}},{key:"fetchOHLCV",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,u,c,d,h,l,f,p=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=p.length>1&&void 0!==p[1]?p[1]:"1m",i=p.length>2&&void 0!==p[2]?p[2]:void 0,a=p.length>3&&void 0!==p[3]?p[3]:void 0,s=p.length>4&&void 0!==p[4]?p[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),u=this.parseTimeframe(r),c=this.timeframes[r],void 0===a&&(a=200),d={market:o.id,timeframe:c,count:a},h="publicGetCandlesTimeframe","minutes"===c&&(l=Math.round(u/60),d.unit=l,h+="Unit"),void 0!==i&&(d.to=this.iso8601(this.sum(i,u*a*1e3))),e.next=16,this[h](this.extend(d,s));case 16:return f=e.sent,e.abrupt("return",this.parseOHLCVs(f,o,r,i,a));case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=a(n.mark((function e(t,r,i,a){var s,o,u,c,d,h,l=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=l.length>4&&void 0!==l[4]?l[4]:void 0,o=l.length>5&&void 0!==l[5]?l[5]:{},"market"!==r){e.next=10;break}if("buy"!==i){e.next=10;break}if(!this.options.createMarketBuyOrderRequiresPrice){e.next=10;break}if(void 0!==s){e.next=9;break}throw new g(this.id+" createOrder() requires the price argument with market buy orders to calculate total order cost (amount to spend), where cost = amount * price. Supply a price argument to createOrder() call if you want the cost to be calculated for you from price and amount, or, alternatively, add .options['createMarketBuyOrderRequiresPrice'] = false to supply the cost in the amount argument (the exchange-specific behaviour)");case 9:a*=s;case 10:if(u=void 0,"buy"!==i){e.next=15;break}u="bid",e.next=20;break;case 15:if("sell"!==i){e.next=19;break}u="ask",e.next=20;break;case 19:throw new g(this.id+" createOrder allows buy or sell side only!");case 20:return e.next=22,this.loadMarkets();case 22:return c=this.market(t),d={market:c.id,side:u},"limit"===r?(d.volume=this.amountToPrecision(t,a),d.price=this.priceToPrecision(t,s),d.ord_type=r):"market"===r&&("buy"===i?(d.ord_type="price",d.price=this.priceToPrecision(t,a)):"sell"===i&&(d.ord_type=r,d.volume=this.amountToPrecision(t,a))),e.next=27,this.privatePostOrders(this.extend(d,o));case 27:return h=e.sent,e.abrupt("return",this.parseOrder(h));case 29:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=a(n.mark((function e(t){var r,i,a,s=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.loadMarkets();case 4:return i={uuid:t},e.next=7,this.privateDeleteOrder(this.extend(i,r));case 7:return a=e.sent,e.abrupt("return",this.parseOrder(a));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchDeposits",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,u,c=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:void 0,r=c.length>1&&void 0!==c[1]?c[1]:void 0,i=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},e.next=6,this.loadMarkets();case 6:return s={},o=void 0,void 0!==t&&(o=this.currency(t),s.currency=o.id),void 0!==i&&(s.limit=i),e.next=12,this.privateGetDeposits(this.extend(s,a));case 12:return u=e.sent,e.abrupt("return",this.parseTransactions(u,o,r,i));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchWithdrawals",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,u,c=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:void 0,r=c.length>1&&void 0!==c[1]?c[1]:void 0,i=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},e.next=6,this.loadMarkets();case 6:return s={},o=void 0,void 0!==t&&(o=this.currency(t),s.currency=o.id),void 0!==i&&(s.limit=i),e.next=12,this.privateGetWithdraws(this.extend(s,a));case 12:return u=e.sent,e.abrupt("return",this.parseTransactions(u,o,r,i));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTransactionStatus",value:function(e){return this.safeString({ACCEPTED:"ok",submitting:"pending",submitted:"pending",almost_accepted:"pending",rejected:"failed",accepted:"pending",processing:"pending",done:"ok",canceled:"canceled"},e,e)}},{key:"parseTransaction",value:function(e){var t=this.safeString(e,"uuid"),r=this.safeNumber(e,"amount"),i=void 0,n=void 0,a=this.safeString(e,"txid"),s=this.parse8601(this.safeString(e,"done_at")),o=this.parse8601(this.safeString(e,"created_at",s)),u=this.safeString(e,"type");"withdraw"===u&&(u="withdrawal");var c=this.safeString(e,"currency"),d=this.safeCurrencyCode(c),h=this.parseTransactionStatus(this.safeString(e,"state")),l=this.safeNumber(e,"fee");return{info:e,id:t,currency:d,amount:r,address:i,tag:n,status:h,type:u,updated:s,txid:a,timestamp:o,datetime:this.iso8601(o),fee:{currency:d,cost:l}}}},{key:"parseOrderStatus",value:function(e){return this.safeString({wait:"open",done:"closed",cancel:"canceled"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"uuid"),i=this.safeString(e,"side");i="bid"===i?"buy":"sell";var n=this.safeString(e,"ord_type"),a=this.parse8601(this.safeString(e,"created_at")),s=this.parseOrderStatus(this.safeString(e,"state")),o=void 0,u=this.safeNumber(e,"price"),c=this.safeNumber(e,"volume"),d=this.safeNumber(e,"remaining_volume"),h=this.safeNumber(e,"executed_volume"),l=void 0;"price"===n&&(n="market",l=u,u=void 0);var f=void 0,p=void 0,v=this.safeNumber(e,"paid_fee"),m=this.safeString(e,"market");t=this.safeMarket(m,t);var g=this.safeValue(e,"trades",[]),y=(g=this.parseTrades(g,t,void 0,void 0,{order:r,type:n})).length;if(y>0){o=g[y-1].timestamp;var b=!1;void 0===v&&(b=!0,v=0),l=0;for(var x=0;x<y;x++){var k=g[x];if(l=this.sum(l,k.cost),b){var w=this.safeValue(g[x],"fee",{}),_=this.safeNumber(w,"cost");void 0!==_&&(v=this.sum(v,_))}}f=l/h}void 0!==v&&(p={currency:t.quote,cost:v});var S={info:e,id:r,clientOrderId:void 0,timestamp:a,datetime:this.iso8601(a),lastTradeTimestamp:o,symbol:t.symbol,type:n,timeInForce:void 0,postOnly:void 0,side:i,price:u,stopPrice:void 0,cost:l,average:f,amount:c,filled:h,remaining:d,status:s,fee:p,trades:g};return S}},{key:"fetchOrdersByState",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,u,c,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,i=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:void 0,s=d.length>4&&void 0!==d[4]?d[4]:{},e.next=6,this.loadMarkets();case 6:return o={state:t},u=void 0,void 0!==r&&(u=this.market(r),o.market=u.id),e.next=11,this.privateGetOrders(this.extend(o,s));case 11:return c=e.sent,e.abrupt("return",this.parseOrders(c,u,i,a));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:void 0,i=s.length>2&&void 0!==s[2]?s[2]:void 0,a=s.length>3&&void 0!==s[3]?s[3]:{},e.next=6,this.fetchOrdersByState("wait",t,r,i,a);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:void 0,i=s.length>2&&void 0!==s[2]?s[2]:void 0,a=s.length>3&&void 0!==s[3]?s[3]:{},e.next=6,this.fetchOrdersByState("done",t,r,i,a);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchCanceledOrders",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:void 0,i=s.length>2&&void 0!==s[2]?s[2]:void 0,a=s.length>3&&void 0!==s[3]?s[3]:{},e.next=6,this.fetchOrdersByState("cancel",t,r,i,a);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=a(n.mark((function e(t){var r,i,a,s=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.loadMarkets();case 4:return i={uuid:t},e.next=7,this.privateGetOrder(this.extend(i,r));case 7:return a=e.sent,e.abrupt("return",this.parseOrder(a));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchDepositAddresses",value:function(){var e=a(n.mark((function e(){var t,r,i=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i.length>0&&void 0!==i[0]?i[0]:void 0,t=i.length>1&&void 0!==i[1]?i[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.privateGetDepositsCoinAddresses(t);case 6:return r=e.sent,e.abrupt("return",this.parseDepositAddresses(r));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseDepositAddress",value:function(e){var t=this.safeString(e,"deposit_address"),r=this.safeString(e,"secondary_address"),i=this.safeString(e,"currency"),n=this.safeCurrencyCode(i);return this.checkAddress(t),{currency:n,address:t,tag:r,info:e}}},{key:"fetchDepositAddress",value:function(){var e=a(n.mark((function e(t){var r,i,a,s=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>1&&void 0!==s[1]?s[1]:{},e.next=3,this.loadMarkets();case 3:return i=this.currency(t),e.next=6,this.privateGetDepositsCoinAddress(this.extend({currency:i.id},r));case 6:return a=e.sent,e.abrupt("return",this.parseDepositAddress(a));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createDepositAddress",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return i=this.currency(t),a={currency:i.id},e.next=7,this.privatePostDepositsGenerateCoinAddress(this.extend(a,r));case 7:if(s=e.sent,void 0===this.safeString(s,"message")){e.next=11;break}throw new k(this.id+" is generating "+t+" deposit address, call fetchDepositAddress or createDepositAddress one more time later to retrieve the generated address");case 11:return e.abrupt("return",this.parseDepositAddress(s));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"withdraw",value:function(){var e=a(n.mark((function e(t,r,i){var a,s,o,u,c,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.length>3&&void 0!==h[3]?h[3]:void 0,s=h.length>4&&void 0!==h[4]?h[4]:{},this.checkAddress(i),e.next=5,this.loadMarkets();case 5:return o=this.currency(t),u={amount:r},c="privatePostWithdraws","KRW"!==t?(c+="Coin",u.currency=o.id,u.address=i,void 0!==a&&(u.secondary_address=a)):c+="Krw",e.next=11,this[c](this.extend(u,s));case 11:return d=e.sent,e.abrupt("return",this.parseTransaction(d));case 13:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"nonce",value:function(){return this.milliseconds()}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.implodeParams(this.urls.api[t],{hostname:this.hostname});s+="/"+this.version+"/"+this.implodeParams(e,i);var o=this.omit(i,this.extractParams(e));if("POST"!==r&&Object.keys(o).length&&(s+="?"+this.urlencode(o)),"private"===t){this.checkRequiredCredentials();var u=this.nonce(),c={access_key:this.apiKey,nonce:u};if(Object.keys(o).length){var d=this.urlencode(o),h=this.hash(this.encode(d),"sha512");c.query_hash=h,c.query_hash_alg="SHA512"}var l=this.jwt(c,this.encode(this.secret));n={Authorization:"Bearer "+l},"GET"!==r&&"DELETE"!==r&&(a=this.json(i),n["Content-Type"]="application/json")}return{url:s,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,u){if(void 0!==s){var c=this.safeValue(s,"error");if(void 0!==c){var d=this.safeString(c,"message"),h=this.safeString(c,"name"),l=this.id+" "+a;throw this.throwExactlyMatchedException(this.exceptions.exact,d,l),this.throwExactlyMatchedException(this.exceptions.exact,h,l),this.throwBroadlyMatchedException(this.exceptions.broad,d,l),this.throwBroadlyMatchedException(this.exceptions.broad,h,l),new p(l)}}}}]),r}(l)},function(e,t,r){"use strict";var i=r(1),n=r(2),a=r(6),s=r(3),o=r(4),u=r(5),c=r(128);e.exports=function(e){o(r,e);var t=u(r);function r(){return i(this,r),t.apply(this,arguments)}return n(r,[{key:"describe",value:function(){return this.deepExtend(a(s(r.prototype),"describe",this).call(this),{id:"vbtc",name:"VBTC",countries:["VN"],has:{CORS:!1},urls:{logo:"https://user-images.githubusercontent.com/1294454/27991481-1f53d1d8-6481-11e7-884e-21d17e7939db.jpg",api:{public:"https://api.blinktrade.com/api",private:"https://api.blinktrade.com/tapi"},www:"https://vbtc.exchange",doc:"https://blinktrade.com/docs"},options:{brokerId:"3"}})}}]),r}(c)},function(e,t,r){"use strict";var i=r(7),n=r(8),a=r(1),s=r(2),o=r(6),u=r(3),c=r(4),d=r(5),h=r(11),l=r(10),f=l.ExchangeError,p=l.OrderNotFound,v=l.InvalidOrder,m=l.BadRequest,g=l.AuthenticationError,y=l.RateLimitExceeded,b=l.RequestTimeout,x=l.BadSymbol,k=l.AddressPending,w=l.PermissionDenied,_=l.InsufficientFunds,S=r(18).ROUND,O=r(12);e.exports=function(e){c(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(u(r.prototype),"describe",this).call(this),{id:"vcc",name:"VCC Exchange",countries:["VN"],rateLimit:1e3,version:"v3",has:{cancelAllOrders:!0,cancelOrder:!0,createOrder:!0,editOrder:!1,fetchBalance:!0,fetchClosedOrders:!0,fetchCurrencies:!0,fetchDepositAddress:!0,fetchDeposits:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!1,fetchTicker:"emulated",fetchTickers:!0,fetchTrades:!0,fetchTradingFees:!1,fetchTransactions:!0,fetchWithdrawals:!0},timeframes:{"1m":"60000","5m":"300000","15m":"900000","30m":"1800000","1h":"3600000","2h":"7200000","4h":"14400000","6h":"21600000","12h":"43200000","1d":"86400000","1w":"604800000"},urls:{logo:"https://user-images.githubusercontent.com/1294454/100545356-8427f500-326c-11eb-9539-7d338242d61b.jpg",api:{public:"https://api.vcc.exchange",private:"https://api.vcc.exchange"},www:"https://vcc.exchange",doc:["https://vcc.exchange/api"],fees:"https://support.vcc.exchange/hc/en-us/articles/360016401754",referral:"https://vcc.exchange?ref=l4xhrH"},api:{public:{get:["summary","exchange_info","assets","ticker","trades/{market_pair}","orderbook/{market_pair}","chart/bars","tick_sizes"]},private:{get:["user","balance","orders/{order_id}","orders/open","orders","orders/trades","deposit-address","transactions"],post:["orders"],put:["orders/{order_id}/cancel","orders/cancel-by-type","orders/cancel-all"]}},fees:{trading:{tierBased:!1,percentage:!0,maker:.002,taker:.002}},exceptions:{exact:{},broad:{"limit may not be greater than":m,"Insufficient balance":_,Unauthenticated:g,"signature is invalid":g,Timeout:b,"Too many requests":y,"quantity field is required":v,"price field is required":v,error_security_level:w,"pair is invalid":x,"type is invalid":v,"Data not found":p}}})}},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p,v,m,g,y,b,x,k,w=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=w.length>0&&void 0!==w[0]?w[0]:{},e.next=3,this.publicGetExchangeInfo(t);case 3:for(r=e.sent,n=this.safeValue(r,"data"),a=this.safeValue(n,"symbols"),s=[],o=0;o<a.length;o++)u=this.safeValue(a,o),c=this.safeString(u,"symbol"),d=c.replace("/","_"),h=this.safeString(u,"coin"),l=this.safeString(u,"currency"),f=this.safeCurrencyCode(h),p=this.safeCurrencyCode(l),v=this.safeValue(u,"active"),m=this.safeValue(u,"precision",{}),g=this.safeValue(u,"limits",{}),y=this.safeValue(g,"amount",{}),b=this.safeValue(g,"price",{}),x=this.safeValue(g,"cost",{}),k={info:u,id:d,symbol:c,base:f,quote:p,baseId:h,quoteId:l,active:v,precision:{price:this.safeInteger(m,"price"),amount:this.safeInteger(m,"amount"),cost:this.safeInteger(m,"cost")},limits:{amount:{min:this.safeNumber(y,"min"),max:void 0},price:{min:this.safeNumber(b,"min"),max:void 0},cost:{min:this.safeNumber(x,"min"),max:void 0}}},s.push(k);return e.abrupt("return",s);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchCurrencies",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.length>0&&void 0!==p[0]?p[0]:{},e.next=3,this.publicGetAssets(t);case 3:for(r=e.sent,n={},a=this.safeValue(r,"data"),s=Object.keys(a),o=0;o<s.length;o++)u=this.safeStringLower(s,o),c=this.safeValue(a,s[o]),d=this.safeCurrencyCode(u),h=this.safeValue(c,"can_deposit"),l=this.safeValue(c,"can_withdraw"),f=h&&l,n[d]={id:u,code:d,name:this.safeString(c,"name"),active:f,fee:this.safeNumber(c,"withdrawal_fee"),precision:this.safeInteger(c,"decimal"),limits:{withdraw:{min:this.safeNumber(c,"min_withdraw"),max:this.safeNumber(c,"max_withdraw")}}};return e.abrupt("return",n);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTradingFee",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a=this.extend({symbol:n.id},this.omit(r,"symbol")),e.next=7,this.privateGetTradingFeeSymbol(a);case 7:return s=e.sent,e.abrupt("return",{info:s,maker:this.safeNumber(s,"provideLiquidityRate"),taker:this.safeNumber(s,"takeLiquidityRate")});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetBalance(t);case 5:for(r=e.sent,n=this.safeValue(r,"data"),a={info:r},s=Object.keys(n),o=0;o<s.length;o++)u=s[o],c=this.safeCurrencyCode(u),d=this.safeValue(n,u),(h=this.account()).free=this.safeString(d,"available_balance"),h.total=this.safeString(d,"balance"),a[c]=h;return e.abrupt("return",this.parseBalance(a,!1));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){return[this.safeInteger(e,"time"),this.safeNumber(e,"open"),this.safeNumber(e,"high"),this.safeNumber(e,"low"),this.safeNumber(e,"close"),this.safeNumber(e,"volume")]}},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=f.length>1&&void 0!==f[1]?f[1]:"1m",n=f.length>2&&void 0!==f[2]?f[2]:void 0,a=f.length>3&&void 0!==f[3]?f[3]:void 0,s=f.length>4&&void 0!==f[4]?f[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),u={coin:o.baseId,currency:o.quoteId,resolution:this.timeframes[r]},a=void 0===a?100:a,a=Math.min(100,a),c=this.parseTimeframe(r),void 0===n?(d=this.seconds(),u.to=d,u.from=d-a*c):(h=parseInt(n/1e3),u.from=h,u.to=this.sum(h,a*c)),e.next=14,this.publicGetChartBars(this.extend(u,s));case 14:return l=e.sent,e.abrupt("return",this.parseOHLCVs(l,o,r,n,a));case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:{},e.next=4,this.loadMarkets();case 4:if(a=this.market(t),s={market_pair:a.id,level:2},void 0===r){e.next=10;break}if(0===r||5===r||10===r||20===r||50===r||100===r||500===r){e.next=9;break}throw new m(this.id+" fetchOrderBook limit must be 0, 5, 10, 20, 50, 100, 500 if specified");case 9:s.depth=r;case 10:return e.next=12,this.publicGetOrderbookMarketPair(this.extend(s,n));case 12:return o=e.sent,u=this.safeValue(o,"data"),c=this.safeValue(u,"timestamp"),e.abrupt("return",this.parseOrderBook(u,c,"bids","asks",0,1));case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.milliseconds(),i=this.safeNumber(e,"base_volume"),n=this.safeNumber(e,"quote_volume"),a=this.safeNumber(e,"open_price"),s=this.safeNumber(e,"last_price"),o=void 0,u=void 0,c=void 0;void 0!==s&&void 0!==a&&(o=s-a,c=this.sum(s,a)/2,a>0&&(u=o/a*100));var d=this.vwap(i,n),h=void 0===t?void 0:t.symbol;return{symbol:h,timestamp:r,datetime:this.iso8601(r),high:this.safeNumber(e,"max_price"),low:this.safeNumber(e,"min_price"),bid:this.safeNumber(e,"bid"),bidVolume:void 0,ask:this.safeNumber(e,"ask"),askVolume:void 0,vwap:d,open:a,close:s,last:s,previousClose:void 0,change:o,percentage:u,average:c,baseVolume:i,quoteVolume:n,info:e}}},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),e.next=6,this.publicGetTicker(r);case 6:return a=e.sent,s=this.safeValue(a,"data"),o=this.safeValue(s,n.id),e.abrupt("return",this.parseTicker(o,n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:void 0,r=l.length>1&&void 0!==l[1]?l[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetTicker(r);case 6:for(n=e.sent,a={},s=this.safeValue(n,"data"),o=Object.keys(s),u=0;u<o.length;u++)c=o[u],d=this.safeMarket(c,void 0,"_"),h=d.symbol,a[h]=this.parseTicker(s[c],d);return e.abrupt("return",this.filterByArray(a,"symbol",t));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeInteger2(e,"trade_timestamp","created_at"),i=this.safeStringUpper(e,"coin"),n=this.safeStringUpper(e,"currency"),a=void 0;void 0!==i&&void 0!==n&&(a=i+"_"+n);var s=(t=this.safeMarket(a,t,"_")).symbol,o=this.safeString(e,"price"),u=this.safeString2(e,"base_volume","quantity"),c=this.parseNumber(o),d=this.parseNumber(u),h=this.safeNumber2(e,"quote_volume","amount");void 0===h&&(h=this.parseNumber(O.stringMul(o,u)));var l=this.safeString2(e,"type","trade_type"),f=this.safeString2(e,"trade_id","id"),p=this.safeNumber(e,"fee"),v=void 0;return void 0!==p&&(v={cost:p,currency:t.quote}),{info:e,id:f,order:void 0,timestamp:r,datetime:this.iso8601(r),symbol:s,type:void 0,side:l,takerOrMaker:void 0,price:c,amount:d,cost:h,fee:v}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={market_pair:s.id},void 0!==n&&(o.count=Math.min(1e3,n)),e.next=10,this.publicGetTradesMarketPair(this.extend(o,a));case 10:return u=e.sent,c=this.safeValue(u,"data"),e.abrupt("return",this.parseTrades(c,s,r,n));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTransactions",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return s={},o=void 0,void 0!==t&&(o=this.currency(t),s.currency=o.id),void 0!==n&&(s.limit=Math.min(1e3,n)),void 0!==r&&(s.start=r),e.next=13,this.privateGetTransactions(this.extend(s,a));case 13:return u=e.sent,c=this.safeValue(u,"data",{}),c=this.safeValue(c,"data",[]),e.abrupt("return",this.parseTransactions(c,o,r,n));case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchDeposits",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:void 0,a=o.length>3&&void 0!==o[3]?o[3]:{},s={type:"deposit"},e.next=7,this.fetchTransactions(t,r,n,this.extend(s,a));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchWithdrawals",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:void 0,a=o.length>3&&void 0!==o[3]?o[3]:{},s={type:"withdraw"},e.next=7,this.fetchTransactions(t,r,n,this.extend(s,a));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),i=this.safeInteger(e,"created_at"),n=this.safeInteger(e,"updated_at"),a=this.safeString(e,"currency"),s=this.safeCurrencyCode(a,t),o=this.parseTransactionStatus(this.safeString(e,"status")),u=this.safeNumber(e,"amount");void 0!==u&&(u=Math.abs(u));var c=this.safeString(e,"blockchain_address"),d=this.safeString(e,"transaction_id"),h=this.safeString(e,"destination_tag"),l=void 0,f=this.safeNumber(e,"fee");void 0!==f&&(l={cost:f,currency:s});var p=u>0?"deposit":"withdrawal";return{info:e,id:r,txid:d,timestamp:i,datetime:this.iso8601(i),address:c,addressTo:c,addressFrom:void 0,tag:h,tagTo:h,tagFrom:void 0,type:p,amount:u,currency:s,status:o,updated:n,fee:l}}},{key:"parseTransactionStatus",value:function(e){return this.safeString({pending:"pending",error:"failed",success:"ok",cancel:"canceled"},e,e)}},{key:"parseTransactionType",value:function(e){return this.safeString({deposit:"deposit",withdraw:"withdrawal"},e,e)}},{key:"costToPrecision",value:function(e,t){return this.decimalToPrecision(t,S,this.markets[e].precision.cost,this.precisionMode,this.paddingMode)}},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,u,c,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=f.length>4&&void 0!==f[4]?f[4]:void 0,o=f.length>5&&void 0!==f[5]?f[5]:{},e.next=4,this.loadMarkets();case 4:if(u=this.market(t),c={coin:u.baseId,currency:u.quoteId,trade_type:n,type:r},"ceiling_market"!==r){e.next=19;break}if(void 0===(d=this.safeValue(o,"ceiling"))){e.next=12;break}c.ceiling=this.costToPrecision(t,d),e.next=17;break;case 12:if(void 0===s){e.next=16;break}c.ceiling=this.costToPrecision(t,a*s),e.next=17;break;case 16:throw new v(this.id+" createOrder() requires a price argument or a ceiling parameter for "+r+" orders");case 17:e.next=20;break;case 19:c.quantity=this.amountToPrecision(t,a);case 20:return"limit"===r&&(c.price=this.priceToPrecision(t,s)),void 0!==this.safeValue2(o,"stop_price","stopPrice")&&(c.is_stop=1,c.stop_condition="buy"===n?"le":"ge",c.stop_price=this.priceToPrecision(t,s)),o=this.omit(o,["stop_price","stopPrice"]),e.next=26,this.privatePostOrders(this.extend(c,o));case 26:return h=e.sent,l=this.safeValue(h,"data"),e.abrupt("return",this.parseOrder(l,u));case 29:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.loadMarkets();case 4:return n={order_id:t},e.next=7,this.privatePutOrdersOrderIdCancel(this.extend(n,r));case 7:return a=e.sent,e.abrupt("return",this.parseOrder(a));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cancelAllOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u.length>0&&void 0!==u[0]?u[0]:void 0,t=u.length>1&&void 0!==u[1]?u[1]:{},r=this.safeString(t,"type"),n=void 0===r?"privatePutOrdersCancelAll":"privatePutOrdersCancelByType",a={},void 0!==r&&(a.type=r),e.next=8,this.loadMarkets();case 8:return e.next=10,this[n](this.extend(a,t));case 10:return s=e.sent,o=this.safeValue(s,"data",{}),o=this.safeValue(s,"data",[]),e.abrupt("return",this.parseOrders(o));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({pending:"open",stopping:"open",executing:"open",executed:"closed",canceled:"canceled"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeValue(e,"created_at"),i=this.safeValue(e,"updated_at"),n=this.safeStringUpper(e,"coin"),a=this.safeStringUpper(e,"currency"),s=n+"_"+a,o=(t=this.safeMarket(s,t,"_")).symbol,u=this.safeNumber(e,"quantity"),c=this.safeNumber(e,"executed_quantity"),d=this.parseOrderStatus(this.safeString(e,"status")),h=this.safeNumber(e,"ceiling"),l=this.safeString(e,"id"),f=this.safeNumber(e,"price"),p=this.safeNumber(e,"executed_price"),v=this.safeNumber(e,"remaining"),m=this.safeString(e,"type"),g=this.safeString(e,"trade_type"),y={currency:t.quote,cost:this.safeNumber(e,"fee"),rate:this.safeNumber(e,"fee_rate")},b=void 0;i!==r&&(b=i);var x=this.safeNumber(e,"stopPrice");return this.safeOrder({id:l,clientOrderId:l,timestamp:r,datetime:this.iso8601(r),lastTradeTimestamp:b,status:d,symbol:o,type:m,timeInForce:void 0,postOnly:void 0,side:g,price:f,stopPrice:x,average:p,amount:u,cost:h,filled:c,remaining:v,fee:y,trades:void 0,info:e})}},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.length>1&&void 0!==o[1]?o[1]:void 0,r=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return n={order_id:t},e.next=7,this.privateGetOrdersOrderId(this.extend(n,r));case 7:return a=e.sent,s=this.safeValue(a,"data"),e.abrupt("return",this.parseOrder(s));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrdersWithMethod",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:void 0,s=h.length>4&&void 0!==h[4]?h[4]:{},e.next=6,this.loadMarkets();case 6:return o={},u=void 0,void 0!==r&&(u=this.market(r),o.coin=u.baseId,o.currency=u.quoteId),void 0!==n&&(o.start_date=n),void 0!==a&&(o.limit=Math.min(1e3,a)),e.next=13,this[t](this.extend(o,s));case 13:return c=e.sent,d=this.safeValue(c,"data",{}),d=this.safeValue(d,"data",[]),e.abrupt("return",this.parseOrders(d,u,n,a));case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:void 0,n=s.length>2&&void 0!==s[2]?s[2]:void 0,a=s.length>3&&void 0!==s[3]?s[3]:{},e.next=6,this.fetchOrdersWithMethod("privateGetOrdersOpen",t,r,n,a);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:void 0,n=s.length>2&&void 0!==s[2]?s[2]:void 0,a=s.length>3&&void 0!==s[3]?s[3]:{},e.next=6,this.fetchOrdersWithMethod("privateGetOrders",t,r,n,a);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return s={},o=void 0,void 0!==t&&(o=this.market(t),s.coin=o.baseId,s.currency=o.quoteId),void 0!==r&&(s.start_date=r),void 0!==n&&(s.limit=Math.min(1e3,n)),e.next=13,this.privateGetOrdersTrades(this.extend(s,a));case 13:return u=e.sent,c=this.safeValue(u,"data",{}),c=this.safeValue(c,"data",[]),e.abrupt("return",this.parseTrades(c,o,r,n));case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchDepositAddress",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.currency(t),a={currency:n.id},e.next=7,this.privateGetDepositAddress(this.extend(a,r));case 7:if(s=e.sent,o=this.safeValue(s,"data"),"REQUESTED"!==this.safeString(o,"status")){e.next=12;break}throw new k(this.id+" is generating "+t+" deposit address, call fetchDepositAddress one more time later to retrieve the generated address");case 12:return u=this.safeString(o,"blockchain_address"),this.checkAddress(u),c=this.safeString(o,"blockchain_tag"),d=this.safeString(o,"currency"),e.abrupt("return",{currency:this.safeCurrencyCode(d),address:u,tag:c,info:o});case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.version+"/"+this.implodeParams(e,i),o=this.omit(i,this.extractParams(e));if(Object.keys(o).length&&(s+="?"+this.urlencode(o)),"private"===t){this.checkRequiredCredentials();var u=this.milliseconds().toString();"GET"!==r&&(a=this.json(o));var c=r+" "+s,d=this.hmac(this.encode(c),this.encode(this.secret),"sha256");n={Authorization:"Bearer "+this.apiKey,"Content-Type":"application/json",timestamp:u,signature:d}}return{url:s=this.urls.api[t]+"/"+s,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,u){if(void 0!==s){var c=this.safeString(s,"message");if(void 0!==c){var d=this.id+" "+a;throw this.throwExactlyMatchedException(this.exceptions.exact,c,d),this.throwBroadlyMatchedException(this.exceptions.broad,a,d),new f(d)}}}}]),r}(h)},function(e,t,r){"use strict";var i=r(21),n=r(7),a=r(8),s=r(1),o=r(2),u=r(6),c=r(3),d=r(4),h=r(5),l=r(11),f=r(10),p=f.ArgumentsRequired,v=f.AuthenticationError,m=f.InsufficientFunds,g=f.InvalidOrder,y=f.AccountSuspended,b=f.ExchangeError,x=f.DuplicateOrderId,k=f.OrderNotFound,w=f.BadSymbol,_=f.ExchangeNotAvailable,S=f.BadRequest,O=r(12);e.exports=function(e){d(r,e);var t=h(r);function r(){return s(this,r),t.apply(this,arguments)}return o(r,[{key:"describe",value:function(){return this.deepExtend(u(c(r.prototype),"describe",this).call(this),{id:"wavesexchange",name:"Waves.Exchange",countries:["CH"],rateLimit:500,certified:!0,pro:!1,has:{cancelOrder:!0,createMarketOrder:!1,createOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchDepositAddress:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrderBook:!0,fetchOrders:!0,fetchTicker:!0,fetchTrades:!0,withdraw:!0},timeframes:{"1m":"1m","5m":"5m","15m":"15m","30m":"30m","1h":"1h","2h":"2h","3h":"3h","4h":"4h","6h":"6h","12h":"12h","1d":"1d","1w":"1w","1M":"1M"},urls:{logo:"https://user-images.githubusercontent.com/1294454/84547058-5fb27d80-ad0b-11ea-8711-78ac8b3c7f31.jpg",api:{matcher:"http://matcher.waves.exchange",node:"https://nodes.waves.exchange",public:"https://api.wavesplatform.com/v0",private:"https://api.waves.exchange/v1",forward:"https://waves.exchange/api/v1/forward/matcher",market:"https://marketdata.wavesplatform.com/api/v1"},doc:"https://docs.waves.exchange",www:"https://waves.exchange"},api:{matcher:{get:["matcher","matcher/settings","matcher/settings/rates","matcher/balance/reserved/{publicKey}","matcher/debug/allSnashotOffsets","matcher/debug/currentOffset","matcher/debug/lastOffset","matcher/debug/oldestSnapshotOffset","matcher/orderbook","matcher/orderbook/{amountAsset}/{priceAsset}","matcher/orderbook/{baseId}/{quoteId}/publicKey/{publicKey}","matcher/orderbook/{baseId}/{quoteId}/{orderId}","matcher/orderbook/{baseId}/{quoteId}/info","matcher/orderbook/{baseId}/{quoteId}/status","matcher/orderbook/{baseId}/{quoteId}/tradeableBalance/{address}","matcher/orderbook/{publicKey}","matcher/orderbook/{publicKey}/{orderId}","matcher/orders/{address}","matcher/orders/{address}/{orderId}","matcher/transactions/{orderId}"],post:["matcher/orderbook","matcher/orderbook/market","matcher/orderbook/cancel","matcher/orderbook/{baseId}/{quoteId}/cancel","matcher/debug/saveSnapshots","matcher/orders/{address}/cancel","matcher/orders/cancel/{orderId}"],delete:["matcher/orderbook/{baseId}/{quoteId}","matcher/settings/rates/{assetId}"],put:["matcher/settings/rates/{assetId}"]},node:{get:["addresses","addresses/balance/{address}","addresses/balance/{address}/{confirmations}","addresses/balance/details/{address}","addresses/data/{address}","addresses/data/{address}/{key}","addresses/effectiveBalance/{address}","addresses/effectiveBalance/{address}/{confirmations}","addresses/publicKey/{publicKey}","addresses/scriptInfo/{address}","addresses/scriptInfo/{address}/meta","addresses/seed/{address}","addresses/seq/{from}/{to}","addresses/validate/{address}","alias/by-address/{address}","alias/by-alias/{alias}","assets/{assetId}/distribution/{height}/{limit}","assets/balance/{address}","assets/balance/{address}/{assetId}","assets/details/{assetId}","assets/nft/{address}/limit/{limit}","blockchain/rewards","blockchain/rewards/height","blocks/address/{address}/{from}/{to}/","blocks/at/{height}","blocks/delay/{signature}/{blockNum}","blocks/first","blocks/headers/last","blocks/headers/seq/{from}/{to}","blocks/height","blocks/height/{signature}","blocks/last","blocks/seq/{from}/{to}","blocks/signature/{signature}","consensus/algo","consensus/basetarget","consensus/basetarget/{blockId}","consensus/{generatingbalance}/address","consensus/generationsignature","consensus/generationsignature/{blockId}","debug/balances/history/{address}","debug/blocks/{howMany}","debug/configInfo","debug/historyInfo","debug/info","debug/minerInfo","debug/portfolios/{address}","debug/state","debug/stateChanges/address/{address}","debug/stateChanges/info/{id}","debug/stateWaves/{height}","leasing/active/{address}","node/state","node/version","peers/all","peers/blacklisted","peers/connected","peers/suspended","transactions/address/{address}/limit/{limit}","transactions/info/{id}","transactions/status","transactions/unconfirmed","transactions/unconfirmed/info/{id}","transactions/unconfirmed/size","utils/seed","utils/seed/{length}","utils/time","wallet/seed"],post:["addresses","addresses/data/{address}","addresses/sign/{address}","addresses/signText/{address}","addresses/verify/{address}","addresses/verifyText/{address}","debug/blacklist","debug/print","debug/rollback","debug/validate","node/stop","peers/clearblacklist","peers/connect","transactions/broadcast","transactions/calculateFee","tranasctions/sign","transactions/sign/{signerAddress}","tranasctions/status","utils/hash/fast","utils/hash/secure","utils/script/compileCode","utils/script/compileWithImports","utils/script/decompile","utils/script/estimate","utils/sign/{privateKey}","utils/transactionsSerialize"],delete:["addresses/{address}","debug/rollback-to/{signature}"]},public:{get:["pairs","candles/{baseId}/{quoteId}","transactions/exchange"]},private:{get:["deposit/addresses/{code}","deposit/currencies","withdraw/currencies","withdraw/addresses/{currency}/{address}"],post:["oauth2/token"]},forward:{get:["matcher/orders/{address}","matcher/orders/{address}/{orderId}"],post:["matcher/orders/{wavesAddress}/cancel"]},market:{get:["tickers"]}},options:{allowedCandles:1440,accessToken:void 0,matcherPublicKey:void 0,quotes:void 0,createOrderDefaultExpiry:24192e5,wavesAddress:void 0,withdrawFeeUSDN:7420,withdrawFeeWAVES:1e5,wavesPrecision:8},requiresEddsa:!0,exceptions:{3147270:m,112:m,4:b,13:_,14:_,3145733:y,3148040:x,3148801:v,9440512:v,9440771:w,9441026:g,9441282:g,9441286:g,9441295:g,9441540:g,9441542:g,106954752:v,106954769:v,106957828:v,106960131:v,106981137:v,9437193:k,1048577:S,1051904:v}})}},{key:"getQuotes",value:function(){var e=a(n.mark((function e(){var t,r,i,a;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this.safeValue(this.options,"quotes"))){e.next=5;break}return e.abrupt("return",t);case 5:return e.next=7,this.matcherGetMatcherSettings();case 7:for(r=e.sent,t={},i=this.safeValue(r,"priceAssets"),a=0;a<i.length;a++)t[i[a]]=!0;return this.options.quotes=t,e.abrupt("return",t);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMarkets",value:function(){var e=a(n.mark((function e(){var t,r,a,s,o,u,c,d,h,l,f,p,v,m,g=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g.length>0&&void 0!==g[0]?g[0]:{},e.next=3,this.marketGetTickers();case 3:for(t=e.sent,r=[],a=0;a<t.length;a++)s=t[a],o=this.safeString(s,"amountAssetID"),u=this.safeString(s,"priceAssetID"),c=o+"/"+u,d=this.safeString(s,"symbol"),h=d.split("/"),l=i(h,2),f=l[0],p=l[1],v=this.safeCurrencyCode(f)+"/"+this.safeCurrencyCode(p),m={amount:this.safeInteger(s,"amountAssetDecimals"),price:this.safeInteger(s,"priceAssetDecimals")},r.push({symbol:v,id:c,base:f,quote:p,baseId:o,quoteId:u,info:s,precision:m});return e.abrupt("return",r);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,u,c,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:void 0,i=h.length>2&&void 0!==h[2]?h[2]:{},e.next=4,this.loadMarkets();case 4:return a=this.market(t),s=this.extend({amountAsset:a.baseId,priceAsset:a.quoteId},i),e.next=8,this.matcherGetMatcherOrderbookAmountAssetPriceAsset(s);case 8:return o=e.sent,u=this.safeInteger(o,"timestamp"),c=this.parseOrderBookSide(this.safeValue(o,"bids"),a,r),d=this.parseOrderBookSide(this.safeValue(o,"asks"),a,r),e.abrupt("return",{bids:c,asks:d,timestamp:u,datetime:this.iso8601(u),nonce:void 0});case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrderBookSide",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,i=t.precision,n=this.safeInteger(this.options,"wavesPrecision",8),a=Math.pow(10,i.amount),s=i.amount-i.price,o=Math.pow(10,n-s),u=[],c=0;c<e.length;c++){var d=e[c],h=this.safeInteger(d,"price",0)/o,l=this.safeInteger(d,"amount",0)/a;if(void 0!==r&&c>r)break;u.push([h,l])}return u}},{key:"checkRequiredKeys",value:function(){if(void 0===this.apiKey)throw new v(this.id+" requires apiKey credential");if(void 0===this.secret)throw new v(this.id+" requires secret credential");var e=void 0,t=void 0;try{e=this.base58ToBinary(this.apiKey)}catch(n){throw new v(this.id+" apiKey must be a base58 encoded public key")}try{t=this.base58ToBinary(this.secret)}catch(n){throw new v(this.id+" secret must be a base58 encoded private key")}var r=this.binaryToBase16(e),i=this.binaryToBase16(t);if(64!==r.length)throw new v(this.id+" apiKey must be a base58 encoded public key");if(64!==i.length)throw new v(this.id+" secret must be a base58 encoded private key")}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.omit(i,this.extractParams(e)),o="matcher/orders/{wavesAddress}/cancel"===e;e=this.implodeParams(e,i);var u=this.urls.api[t]+"/"+e,c=this.urlencode(s);if("private"===t||"forward"===t){n={Accept:"application/json"};var d=this.safeString(this.options,"accessToken");d&&(n.Authorization="Bearer "+d),n["content-type"]="POST"===r?"application/json":"application/x-www-form-urlencoded",o&&(a=this.json([s.orderId]),c=""),c.length>0&&(u+="?"+c)}else"matcher"===t?"POST"===r?(n={"content-type":"application/json"},a=this.json(s)):n=s:"POST"===r?(n={"content-type":"application/json"},a=this.json(s)):(n={"content-type":"application/x-www-form-urlencoded"},c.length>0&&(u+="?"+c));return{url:u,method:r,body:a,headers:n}}},{key:"getAccessToken",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,u,c,d;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.safeString(this.options,"accessToken")){e.next=17;break}return"ffffff01",604800,t=(t=this.sum(this.seconds(),604800)).toString(),i="W:"+(r="waves.exchange")+":"+t,a=this.binaryToBase16(this.stringToBinary(this.encode(i))),s="ffffff01"+a,o=this.binaryToBase16(this.base58ToBinary(this.secret)),u=this.eddsa(s,o,"ed25519"),c={grant_type:"password",scope:"general",username:this.apiKey,password:t+":"+u,client_id:r},e.next=14,this.privatePostOauth2Token(c);case 14:return d=e.sent,this.options.accessToken=this.safeString(d,"access_token"),e.abrupt("return",this.options.accessToken);case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0,i=this.safeString(e,"amountAsset"),n=this.safeString(e,"priceAsset"),a=void 0;if(void 0!==i&&void 0!==n){var s=i+"/"+n;if(s in this.markets_by_id)t=this.markets_by_id[s];else{var o=this.safeCurrencyCode(i),u=this.safeCurrencyCode(n);a=o+"/"+u}}void 0===a&&void 0!==t&&(a=t.symbol);var c=this.safeValue(e,"data",{}),d=this.safeNumber(c,"lastPrice"),h=this.safeNumber(c,"low"),l=this.safeNumber(c,"high"),f=this.safeNumber(c,"weightedAveragePrice"),p=this.safeNumber(c,"volume"),v=this.safeNumber(c,"quoteVolume"),m=this.safeNumber(c,"firstPrice"),g=void 0,y=void 0,b=void 0;return void 0!==d&&void 0!==m&&(g=d-m,y=this.sum(d,m)/2,m>0&&(b=g/m*100)),{symbol:a,timestamp:r,datetime:this.iso8601(r),high:l,low:h,bid:void 0,bidVolume:void 0,ask:void 0,askVolume:void 0,vwap:f,open:m,close:d,last:d,previousClose:void 0,change:g,percentage:b,average:y,baseVolume:p,quoteVolume:v,info:e}}},{key:"fetchTicker",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,u,c=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:{},e.next=3,this.loadMarkets();case 3:return i=this.market(t),a={pairs:i.id},e.next=7,this.publicGetPairs(this.extend(a,r));case 7:return s=e.sent,o=this.safeValue(s,"data",[]),u=this.safeValue(o,0,{}),e.abrupt("return",this.parseTicker(u,i));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOHLCV",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,u,c,d,h,l,f,p,v,m,g,y,b,x,k=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=k.length>1&&void 0!==k[1]?k[1]:"1m",i=k.length>2&&void 0!==k[2]?k[2]:void 0,a=k.length>3&&void 0!==k[3]?k[3]:void 0,s=k.length>4&&void 0!==k[4]?k[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),u={baseId:o.baseId,quoteId:o.quoteId,interval:this.timeframes[r]},void 0!==i?u.timeStart=i.toString():(c=this.safeInteger(this.options,"allowedCandles",1440),d=1e3*this.parseTimeframe(r),h=Math.floor(this.milliseconds()/d)*d,l=h-(c-1)*d,u.timeStart=l.toString()),e.next=11,this.publicGetCandlesBaseIdQuoteId(this.extend(u,s));case 11:for(f=e.sent,p=this.safeValue(f,"data",[]),v=this.parseOHLCVs(p,o,r,i,a),m=void 0,g=v.length,y=0;y<v.length;y++)x=v[b=g-y-1],void 0===x[1]&&(x[1]=m,x[2]=m,x[3]=m,x[4]=m,v[b]=x),m=x[4];return e.abrupt("return",v);case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){var t=this.safeValue(e,"data",{});return[this.parse8601(this.safeString(t,"time")),this.safeNumber(t,"open"),this.safeNumber(t,"high"),this.safeNumber(t,"low"),this.safeNumber(t,"close"),this.safeNumber(t,"volume",0)]}},{key:"fetchDepositAddress",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,u,c,d,h,l,f,p,v=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=v.length>1&&void 0!==v[1]?v[1]:{},e.next=3,this.getAccessToken();case 3:return e.next=5,this.privateGetDepositCurrencies();case 5:for(i=e.sent,a={},s=this.safeValue(i,"items",[]),o=0;o<s.length;o++)u=s[o],c=this.safeString(u,"id"),a[c]=!0;if(t in a){e.next=12;break}throw d=Object.keys(a),new b(this.id+" fetch "+t+" deposit address not supported. Currency code must be one of "+d.toString());case 12:return h=this.extend({code:t},r),e.next=15,this.privateGetDepositAddressesCode(h);case 15:return l=e.sent,f=this.safeValue(l,"deposit_addresses"),p=this.safeString(f,0),e.abrupt("return",{address:p,code:t,tag:void 0,info:l});case 19:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getMatcherPublicKey",value:function(){var e=a(n.mark((function e(){var t,r;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this.safeString(this.options,"matcherPublicKey"))){e.next=5;break}return e.abrupt("return",t);case 5:return e.next=7,this.matcherGetMatcher();case 7:return r=e.sent,this.options.matcherPublicKey=r.slice(1,r.length-1),e.abrupt("return",this.options.matcherPublicKey);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAssetBytes",value:function(e){return"WAVES"===e?this.numberToBE(0,1):this.binaryConcat(this.numberToBE(1,1),this.base58ToBinary(e))}},{key:"getAssetId",value:function(e){return"WAVES"===e?"":e}},{key:"priceToPrecision",value:function(e,t){var r=this.markets[e],i=this.safeInteger(this.options,"wavesPrecision",8),n=r.precision.amount-r.precision.price;return parseInt(parseFloat(this.toWei(t,i-n)))}},{key:"amountToPrecision",value:function(e,t){return parseInt(parseFloat(this.toWei(t,this.markets[e].precision.amount)))}},{key:"currencyToPrecision",value:function(e,t){return parseInt(parseFloat(this.toWei(t,this.currencies[e].precision)))}},{key:"currencyFromPrecision",value:function(e,t){return this.fromWei(t,this.currencies[e].precision)}},{key:"priceFromPrecision",value:function(e,t){var r=this.markets[e],i=this.safeInteger(this.options,"wavesPrecision",8),n=r.precision.amount-r.precision.price;return this.fromWei(t,i-n)}},{key:"getDefaultExpiry",value:function(){var e=this.safeInteger(this.options,"createOrderDefaultExpiry");return e||(this.options.createOrderDefaultExpiry=24192e5,this.options.createOrderDefaultExpiry)}},{key:"createOrder",value:function(){var e=a(n.mark((function e(t,r,i,a){var s,o,u,c,d,h,l,f,p,v,g,y,b,x,k,w,_,S,O,T,C,I,M,A,E,N,P,D,L,B,R,V,G,F,q,j,z=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=z.length>4&&void 0!==z[4]?z[4]:void 0,o=z.length>5&&void 0!==z[5]?z[5]:{},this.checkRequiredDependencies(),this.checkRequiredKeys(),e.next=6,this.loadMarkets();case 6:return u=this.market(t),e.next=9,this.getMatcherPublicKey();case 9:return c=e.sent,d=this.getAssetId(u.baseId),h=this.getAssetId(u.quoteId),a=this.amountToPrecision(t,a),s=this.priceToPrecision(t,s),l="buy"===i?0:1,f=this.milliseconds(),p=this.sum(f,this.getDefaultExpiry()),e.next=19,this.matcherGetMatcherSettings();case 19:if(v=e.sent,g=this.safeValue(v,"orderFee"),y=this.safeValue(g,"dynamic"),b=this.safeInteger(y,"baseFee"),x=this.currencyFromPrecision("WAVES",b),k=this.safeValue(y,"rates"),w=Object.keys(k),_=void 0,S=void 0,!("feeAssetId"in o)){e.next=32;break}_=o.feeAssetId,e.next=56;break;case 32:if(!("feeAssetId"in this.options)){e.next=36;break}_=this.options.feeAssetId,e.next=56;break;case 36:return e.next=38,this.fetchBalance();case 38:if(!((O=e.sent).WAVES.free>x)){e.next=44;break}_="WAVES",S=b,e.next=56;break;case 44:T=0;case 45:if(!(T<w.length)){e.next=56;break}if(C=w[T],I=this.safeCurrencyCode(C),M=this.safeValue(this.safeValue(O,I,{}),"free"),A=k[C]*x,!(void 0!==M&&M>A)){e.next=53;break}return _=C,e.abrupt("break",56);case 53:T++,e.next=45;break;case 56:if(void 0!==_){e.next=58;break}throw m(this.id+" not enough funds to cover the fee, specify feeAssetId in params or options, or buy some WAVES");case 58:return void 0===S&&(E=this.safeInteger(this.options,"wavesPrecision",8),N=this.safeNumber(k,_),P=this.safeCurrencyCode(_),D=this.currency(P),L=Math.pow(10,E-D.precision),S=Math.ceil(N*b/L)),B=[this.numberToBE(3,1),this.base58ToBinary(this.apiKey),this.base58ToBinary(c),this.getAssetBytes(u.baseId),this.getAssetBytes(u.quoteId),this.numberToBE(l,1),this.numberToBE(s,8),this.numberToBE(a,8),this.numberToBE(f,8),this.numberToBE(p,8),this.numberToBE(S,8),this.getAssetBytes(_)],R=this.binaryConcatArray(B),V=this.eddsa(this.binaryToBase16(R),this.binaryToBase16(this.base58ToBinary(this.secret)),"ed25519"),G={amountAsset:d,priceAsset:h},F={senderPublicKey:this.apiKey,matcherPublicKey:c,assetPair:G,orderType:i,price:s,amount:a,timestamp:f,expiration:p,matcherFee:S,signature:V,version:3},"WAVES"!==_&&(F.matcherFeeAssetId=_),e.next=67,this.matcherPostMatcherOrderbook(F);case 67:return q=e.sent,j=this.safeValue(q,"message"),e.abrupt("return",this.parseOrder(j,u));case 70:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,u,c,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,d.length>2&&void 0!==d[2]?d[2]:{},this.checkRequiredDependencies(),this.checkRequiredKeys(),e.next=6,this.getAccessToken();case 6:return e.next=8,this.getWavesAddress();case 8:return i=e.sent,e.next=11,this.forwardPostMatcherOrdersWavesAddressCancel({wavesAddress:i,orderId:t});case 11:return a=e.sent,s=this.safeValue(a,"message"),o=this.safeValue(s,0),u=this.safeValue(o,0),c=this.safeString(u,"orderId"),e.abrupt("return",{info:a,id:c,clientOrderId:void 0,timestamp:void 0,datetime:void 0,lastTradeTimestamp:void 0,symbol:r,type:void 0,side:void 0,price:void 0,amount:void 0,cost:void 0,average:void 0,filled:void 0,remaining:void 0,status:void 0,fee:void 0,trades:void 0});case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrders",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,u,c,d,h,l,f,v=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=v.length>0&&void 0!==v[0]?v[0]:void 0,r=v.length>1&&void 0!==v[1]?v[1]:void 0,i=v.length>2&&void 0!==v[2]?v[2]:void 0,a=v.length>3&&void 0!==v[3]?v[3]:{},this.checkRequiredDependencies(),this.checkRequiredKeys(),void 0!==t){e.next=8;break}throw new p(this.id+" fetchOrders() requires symbol argument");case 8:return e.next=10,this.loadMarkets();case 10:return s=this.market(t),o=this.milliseconds(),u=[this.base58ToBinary(this.apiKey),this.numberToBE(o,8)],c=this.binaryConcatArray(u),d=this.binaryToBase16(this.base58ToBinary(this.secret)),h=this.eddsa(this.binaryToBase16(c),d,"ed25519"),l={Accept:"application/json",Timestamp:o.toString(),Signature:h,publicKey:this.apiKey,baseId:s.baseId,quoteId:s.quoteId},e.next=19,this.matcherGetMatcherOrderbookBaseIdQuoteIdPublicKeyPublicKey(this.extend(l,a));case 19:return f=e.sent,e.abrupt("return",this.parseOrders(f,s,r,i));case 21:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,u,c=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:void 0,r=c.length>1&&void 0!==c[1]?c[1]:void 0,i=c.length>2&&void 0!==c[2]?c[2]:void 0,c.length>3&&void 0!==c[3]?c[3]:{},e.next=6,this.loadMarkets();case 6:return e.next=8,this.getAccessToken();case 8:return a=void 0,void 0!==t&&(a=this.market(t)),e.next=12,this.getWavesAddress();case 12:return s=e.sent,o={address:s,activeOnly:!0},e.next=16,this.forwardGetMatcherOrdersAddress(o);case 16:return u=e.sent,e.abrupt("return",this.parseOrders(u,a,r,i));case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,u,c=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:void 0,r=c.length>1&&void 0!==c[1]?c[1]:void 0,i=c.length>2&&void 0!==c[2]?c[2]:void 0,c.length>3&&void 0!==c[3]?c[3]:{},e.next=6,this.loadMarkets();case 6:return e.next=8,this.getAccessToken();case 8:return a=void 0,void 0!==t&&(a=this.market(t)),e.next=12,this.getWavesAddress();case 12:return s=e.sent,o={address:s,closedOnly:!0},e.next=16,this.forwardGetMatcherOrdersAddress(o);case 16:return u=e.sent,e.abrupt("return",this.parseOrders(u,a,r,i));case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({Cancelled:"canceled",Accepted:"open",Filled:"closed",PartiallyFilled:"open"},e,e)}},{key:"getSymbolFromAssetPair",value:function(e){var t=this.safeString(e,"amountAsset","WAVES"),r=this.safeString(e,"priceAsset","WAVES");return this.safeCurrencyCode(t)+"/"+this.safeCurrencyCode(r)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeInteger(e,"timestamp"),i=this.safeString2(e,"type","orderType"),n="limit";"type"in e&&(n=this.safeString(e,"orderType",n));var a=this.safeString(e,"id"),s=this.safeString(e,"filled"),o=this.safeString(e,"price"),u=this.safeString(e,"amount"),c=this.safeValue(e,"assetPair"),d=void 0;void 0!==c?d=this.getSymbolFromAssetPair(c):void 0!==t&&(d=t.symbol);var h=this.safeCurrencyCode(this.safeString(c,"amountAsset","WAVES"));o=this.priceFromPrecision(d,o),u=this.currencyFromPrecision(h,u);var l=void 0;void 0!==o&&void 0!==u&&(l=o*u);var f=void 0;void 0!==(s=this.currencyFromPrecision(h,s))&&void 0!==u&&(f=u-s);var p=this.priceFromPrecision(d,this.safeString(e,"avgWeighedPrice")),v=this.parseOrderStatus(this.safeString(e,"status")),m=void 0;if("type"in e){var g=this.safeCurrencyCode(this.safeString(e,"feeAsset"));m={currency:g,fee:this.currencyFromPrecision(g,this.safeInteger(e,"filledFee"))}}else{var y=this.safeCurrencyCode(this.safeString(e,"matcherFeeAssetId","WAVES"));m={currency:y,fee:this.currencyFromPrecision(y,this.safeInteger(e,"matcherFee"))}}return{info:e,id:a,clientOrderId:void 0,timestamp:r,datetime:this.iso8601(r),lastTradeTimestamp:void 0,symbol:d,type:n,timeInForce:void 0,postOnly:void 0,side:i,price:o,stopPrice:void 0,amount:u,cost:l,average:p,filled:s,remaining:f,status:v,fee:m,trades:void 0}}},{key:"getWavesAddress",value:function(){var e=a(n.mark((function e(){var t,r,i;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==(t=this.safeString(this.options,"wavesAddress"))){e.next=10;break}return r={publicKey:this.apiKey},e.next=5,this.nodeGetAddressesPublicKeyPublicKey(r);case 5:return i=e.sent,this.options.wavesAddress=this.safeString(i,"address"),e.abrupt("return",this.options.wavesAddress);case 10:return e.abrupt("return",t);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,u,c,d,h,l,f,p,v,m,g,y,b,x,k,w,_,S,O,T,C,I,M,A,E=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return E.length>0&&void 0!==E[0]?E[0]:{},this.checkRequiredDependencies(),this.checkRequiredKeys(),e.next=5,this.loadMarkets();case 5:return e.next=7,this.getWavesAddress();case 7:return t=e.sent,r={address:t},e.next=11,this.nodeGetAssetsBalanceAddress(r);case 11:for(i=e.sent,a=this.safeValue(i,"balances"),s={},o=0;o<a.length;o++)u=a[o],c=this.safeValue(u,"issueTransaction"),d=this.safeInteger(c,"decimals"),h=this.safeString(u,"assetId"),l=this.safeNumber(u,"balance"),f=void 0,h in this.currencies_by_id&&(f=this.safeCurrencyCode(h),s[f]=this.account(),s[f].total=this.fromWei(l,d));return p=this.milliseconds(),v=[this.base58ToBinary(this.apiKey),this.numberToBE(p,8)],m=this.binaryConcatArray(v),g=this.binaryToBase16(this.base58ToBinary(this.secret)),y=this.eddsa(this.binaryToBase16(m),g,"ed25519"),b={publicKey:this.apiKey,signature:y,timestamp:p.toString()},e.next=23,this.matcherGetMatcherBalanceReservedPublicKey(b);case 23:for(x=e.sent,k=Object.keys(x),w=0;w<k.length;w++)_=k[w],(S=this.safeCurrencyCode(_))in s||(s[S]=this.account()),O=this.safeNumber(x,_),s[S].used=this.currencyFromPrecision(S,O);return T={address:t},e.next=29,this.nodeGetAddressesBalanceAddress(T);case 29:for(C=e.sent,s.WAVES=this.safeValue(s,"WAVES",{}),s.WAVES.total=this.currencyFromPrecision("WAVES",this.safeNumber(C,"balance")),I=Object.keys(s),M=0;M<I.length;M++)A=I[M],void 0===this.safeValue(s[A],"used")&&(s[A].used=0);return e.abrupt("return",this.parseBalance(s));case 35:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,u,c,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,i=d.length>2&&void 0!==d[2]?d[2]:void 0,d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return a=this.market(t),e.next=9,this.getWavesAddress();case 9:return s=e.sent,o={sender:s,amountAsset:a.baseId,priceAsset:a.quoteId},e.next=13,this.publicGetTransactionsExchange(o);case 13:return u=e.sent,c=this.safeValue(u,"data"),e.abrupt("return",this.parseTrades(c,a,r,i));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTrades",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,u,c=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,i=c.length>2&&void 0!==c[2]?c[2]:void 0,c.length>3&&void 0!==c[3]?c[3]:{},e.next=5,this.loadMarkets();case 5:return a=this.market(t),s={amountAsset:a.baseId,priceAsset:a.quoteId},void 0!==i&&(s.limit=i),void 0!==r&&(s.timeStart=r),e.next=11,this.publicGetTransactionsExchange(s);case 11:return o=e.sent,u=this.safeValue(o,"data"),e.abrupt("return",this.parseTrades(u,a,r,i));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeValue(e,"data"),i=this.safeString(r,"timestamp"),n=this.parse8601(i),a=this.safeString(r,"id"),s=this.safeString(r,"price"),o=this.safeString(r,"amount"),u=this.parseNumber(s),c=this.parseNumber(o),d=this.parseNumber(O.stringMul(s,o)),h=this.safeValue(r,"order1"),l=this.safeValue(r,"order2"),f=void 0;f=this.safeString(h,"senderPublicKey")===this.apiKey?h:l;var p=void 0,v=this.safeValue(f,"assetPair");void 0!==v?p=this.getSymbolFromAssetPair(v):void 0!==t&&(p=t.symbol);var m=this.safeString(f,"orderType"),g=this.safeString(f,"id"),y={cost:this.safeNumber(r,"fee"),currency:this.safeCurrencyCode(this.safeString(f,"matcherFeeAssetId","WAVES"))};return{info:e,timestamp:n,datetime:i,symbol:p,id:a,order:g,type:void 0,side:m,takerOrMaker:void 0,price:u,amount:c,cost:d,fee:y}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,u){var c=this.safeString(s,"error"),d=this.safeValue(s,"success",!0),h=this.safeValue(this.exceptions,c);if(void 0!==h){var l=this.safeString(s,"message");throw new h(this.id+" "+l)}if("Validation Error"===this.safeString(s,"message"))throw new S(this.id+" "+a);if(!d)throw new b(this.id+" "+a)}},{key:"withdraw",value:function(){var e=a(n.mark((function e(t,r,i){var a,s,o,u,c,d,h,l,f,p,v,m,g,y,x,k,w,_,O,T,C,I,M,A,E,N,P,D,L,B,R,V,G,F,q=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(q.length>3&&void 0!==q[3]?q[3]:void 0,q.length>4&&void 0!==q[4]?q[4]:{},"WAVES"===t){e.next=12;break}return e.next=5,this.privateGetWithdrawCurrencies();case 5:for(a=e.sent,s={},o=this.safeValue(a,"items",[]),u=0;u<o.length;u++)c=o[u],d=this.safeString(c,"id"),s[d]=!0;if(t in s){e.next=12;break}throw h=Object.keys(s),new b(this.id+" fetch "+t+" withdrawals are not supported. Currency code must be one of "+h.toString());case 12:return e.next=14,this.loadMarkets();case 14:for(l=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],f={},p=0;p<l.length;p++)v=l[p],f[v]=!0;m=!0,g=this.remove0xPrefix(i),y=g.toLowerCase(),x=0;case 21:if(!(x<y.length)){e.next=29;break}if(y[x]in f){e.next=26;break}return m=!1,e.abrupt("break",29);case 26:x++,e.next=21;break;case 29:return e.next=31,this.getAccessToken();case 31:if(k=void 0,"WAVES"!==t||m){e.next=36;break}k=i,e.next=47;break;case 36:return w={address:i,currency:t},e.next=39,this.privateGetWithdrawAddressesCurrencyAddress(w);case 39:if(_=e.sent,O=this.safeValue(_,"currency"),T=this.safeValue(O,"allowed_amount"),C=this.safeNumber(T,"min"),!(r<=C)){e.next=45;break}throw new S(this.id+" "+t+" withdraw failed, amount "+r.toString()+" must be greater than the minimum allowed amount of "+C.toString());case 45:I=this.safeValue(_,"proxy_addresses",[]),k=this.safeString(I,0);case 47:return M=this.safeInteger(this.options,"withdrawFeeWAVES",1e5),A="WAVES",E=4,N=2,P=this.currencyToPrecision(t,r),D=this.currency(t),L=this.milliseconds(),B=[this.numberToBE(4,1),this.numberToBE(2,1),this.base58ToBinary(this.apiKey),this.getAssetBytes(D.id),this.getAssetBytes(A),this.numberToBE(L,8),this.numberToBE(P,8),this.numberToBE(M,8),this.base58ToBinary(k),this.numberToBE(0,2)],R=this.binaryConcatArray(B),V=this.binaryToBase16(this.base58ToBinary(this.secret)),G=this.eddsa(this.binaryToBase16(R),V,"ed25519"),F={senderPublicKey:this.apiKey,amount:P,fee:M,type:E,version:N,attachment:"",feeAssetId:this.getAssetId(A),proofs:[G],assetId:this.getAssetId(D.id),recipient:k,timestamp:L,signature:G},e.next=61,this.nodePostTransactionsBroadcast(F);case 61:return e.abrupt("return",e.sent);case 62:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()}]),r}(l)},function(e,t,r){"use strict";var i=r(7),n=r(8),a=r(1),s=r(2),o=r(6),u=r(3),c=r(4),d=r(5),h=r(11),l=r(10),f=l.ExchangeNotAvailable,p=l.ExchangeError,v=l.DDoSProtection,m=l.BadSymbol,g=r(12);e.exports=function(e){c(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(u(r.prototype),"describe",this).call(this),{id:"whitebit",name:"WhiteBit",version:"v2",countries:["EE"],rateLimit:500,has:{cancelOrder:!1,CORS:!1,createDepositAddress:!1,createLimitOrder:!1,createMarketOrder:!1,createOrder:!1,deposit:!1,editOrder:!1,fetchBalance:!1,fetchBidsAsks:!1,fetchCurrencies:!0,fetchMarkets:!0,fetchOHLCV:!0,fetchOrderBook:!0,fetchStatus:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,fetchTradingFees:!0,privateAPI:!1,publicAPI:!0},timeframes:{"1m":"1m","3m":"3m","5m":"5m","15m":"15m","30m":"30m","1h":"1h","2h":"2h","4h":"4h","6h":"6h","8h":"8h","12h":"12h","1d":"1d","3d":"3d","1w":"1w","1M":"1M"},urls:{logo:"https://user-images.githubusercontent.com/1294454/66732963-8eb7dd00-ee66-11e9-849b-10d9282bb9e0.jpg",api:{web:"https://whitebit.com/",publicV2:"https://whitebit.com/api/v2/public",publicV1:"https://whitebit.com/api/v1/public"},www:"https://www.whitebit.com",doc:"https://documenter.getpostman.com/view/7473075/Szzj8dgv?version=latest",fees:"https://whitebit.com/fee-schedule",referral:"https://whitebit.com/referral/d9bdf40e-28f2-4b52-b2f9-cd1415d82963"},api:{web:{get:["v1/healthcheck"]},publicV1:{get:["markets","tickers","ticker","symbols","depth/result","history","kline"]},publicV2:{get:["markets","ticker","assets","fee","depth/{market}","trades/{market}"]}},fees:{trading:{tierBased:!1,percentage:!0,taker:.001,maker:.001}},options:{fetchTradesMethod:"fetchTradesV1"},exceptions:{exact:{503:f},broad:{"Market is not available":m}}})}},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p,v,m=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=m.length>0&&void 0!==m[0]?m[0]:{},e.next=3,this.publicV2GetMarkets(t);case 3:for(r=e.sent,n=this.safeValue(r,"result"),a=[],s=0;s<n.length;s++)o=n[s],u=this.safeString(o,"name"),c=this.safeString(o,"stock"),d=this.safeString(o,"money"),h=this.safeCurrencyCode(c),l=this.safeCurrencyCode(d),f=h+"/"+l,p=this.safeValue(o,"tradesEnabled"),v={id:u,symbol:f,base:h,quote:l,baseId:c,quoteId:d,info:o,active:p,precision:{amount:this.safeInteger(o,"stockPrec"),price:this.safeInteger(o,"moneyPrec")},limits:{amount:{min:this.safeNumber(o,"minAmount"),max:void 0},price:{min:void 0,max:void 0},cost:{min:this.safeNumber(o,"minTotal"),max:void 0}}},a.push(v);return e.abrupt("return",a);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchCurrencies",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.length>0&&void 0!==p[0]?p[0]:{},e.next=3,this.publicV2GetAssets(t);case 3:for(r=e.sent,n=this.safeValue(r,"result"),a=Object.keys(n),s={},o=0;o<a.length;o++)u=a[o],c=n[u],d=this.safeValue(c,"canDeposit",!0),h=this.safeValue(c,"canWithdraw",!0),l=d&&h,f=this.safeCurrencyCode(u),s[f]={id:u,code:f,info:c,name:void 0,active:l,fee:void 0,precision:void 0,limits:{amount:{min:void 0,max:void 0},withdraw:{min:this.safeNumber(c,"minWithdrawal"),max:this.safeNumber(c,"maxWithdrawal")}}};return e.abrupt("return",s);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTradingFees",value:function(){var e=n(i.mark((function e(){var t,r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},e.next=3,this.publicV2GetFee(t);case 3:return r=e.sent,n=this.safeValue(r,"result"),e.abrupt("return",{maker:this.safeNumber(n,"makerFee"),taker:this.safeNumber(n,"takerFee")});case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={market:n.id},e.next=7,this.publicV1GetTicker(this.extend(a,r));case 7:return s=e.sent,o=this.safeValue(s,"result",{}),e.abrupt("return",this.parseTicker(o,n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeTimestamp(e,"at",this.milliseconds());e=this.safeValue(e,"ticker",e);var i=void 0;void 0!==t&&(i=t.symbol);var n=this.safeNumber(e,"last"),a=this.safeNumber(e,"change"),s=void 0;return void 0!==a&&(s=this.numberToString(.01*a)),{symbol:i,timestamp:r,datetime:this.iso8601(r),high:this.safeNumber(e,"high"),low:this.safeNumber(e,"low"),bid:this.safeNumber(e,"bid"),bidVolume:void 0,ask:this.safeNumber(e,"ask"),askVolume:void 0,vwap:void 0,open:this.safeNumber(e,"open"),close:n,last:n,previousClose:void 0,change:s,percentage:a,average:void 0,baseVolume:this.safeNumber(e,"volume"),quoteVolume:this.safeNumber(e,"deal"),info:e}}},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:void 0,r=f.length>1&&void 0!==f[1]?f[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicV1GetTickers(r);case 6:for(n=e.sent,a=this.safeValue(n,"result"),s=Object.keys(a),o={},u=0;u<s.length;u++)c=s[u],d=this.safeMarket(c),h=this.parseTicker(a[c],d),l=h.symbol,o[l]=h;return e.abrupt("return",this.filterByArray(o,"symbol",t));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:{},e.next=4,this.loadMarkets();case 4:return a=this.market(t),s={market:a.id},void 0!==r&&(s.limit=r),e.next=9,this.publicV2GetDepthMarket(this.extend(s,n));case 9:return o=e.sent,u=this.safeValue(o,"result",{}),c=this.parse8601(this.safeString(u,"lastUpdateTimestamp")),e.abrupt("return",this.parseOrderBook(u,c));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTradesV1",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={market:s.id,lastId:1},void 0!==n&&(o.limit=n),e.next=10,this.publicV1GetHistory(this.extend(o,a));case 10:return u=e.sent,c=this.safeValue(u,"result",[]),e.abrupt("return",this.parseTrades(c,s,r,n));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTradesV2",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={market:s.id},void 0!==n&&(o.limit=n),e.next=10,this.publicV2GetTradesMarket(this.extend(o,a));case 10:return u=e.sent,c=this.safeValue(u,"result",[]),e.abrupt("return",this.parseTrades(c,s,r,n));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:void 0,a=o.length>3&&void 0!==o[3]?o[3]:{},s=this.safeString(this.options,"fetchTradesMethod","fetchTradesV2"),e.next=6,this[s](t,r,n,a);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeValue(e,"time");r="string"===typeof r?this.parse8601(r):parseInt(1e3*r);var i=this.safeString(e,"price"),n=this.safeString2(e,"amount","volume"),a=this.parseNumber(g.stringMul(i,n)),s=this.parseNumber(i),o=this.parseNumber(n),u=this.safeString2(e,"id","tradeId"),c=this.safeString(e,"type");if(void 0===c){var d=this.safeValue(e,"isBuyerMaker");c=d?"buy":"sell"}var h=void 0;return void 0!==t&&(h=t.symbol),{info:e,timestamp:r,datetime:this.iso8601(r),symbol:h,id:u,order:void 0,type:void 0,takerOrMaker:void 0,side:c,price:s,amount:o,cost:a,fee:void 0}}},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d,h,l,f,p,v=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=v.length>1&&void 0!==v[1]?v[1]:"1m",n=v.length>2&&void 0!==v[2]?v[2]:void 0,a=v.length>3&&void 0!==v[3]?v[3]:void 0,s=v.length>4&&void 0!==v[4]?v[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),u={market:o.id,interval:this.timeframes[r]},void 0!==n&&(c=1440,void 0===a&&(a=c),a=Math.min(a,c),d=parseInt(n/1e3),h=this.parseTimeframe(r),l=this.sum(d,h*a),u.start=d,u.end=l),void 0!==a&&(u.limit=a),e.next=12,this.publicV1GetKline(this.extend(u,s));case 12:return f=e.sent,p=this.safeValue(f,"result",[]),e.abrupt("return",this.parseOHLCVs(p,o,r,n,a));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){return[this.safeTimestamp(e,0),this.safeNumber(e,1),this.safeNumber(e,3),this.safeNumber(e,4),this.safeNumber(e,2),this.safeNumber(e,5)]}},{key:"fetchStatus",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:{},e.next=3,this.webGetV1Healthcheck(t);case 3:return r=e.sent,n=this.safeInteger(r,"status"),a="ok",503===n&&(a="maintenance"),this.status=this.extend(this.status,{status:a,updated:this.milliseconds()}),e.abrupt("return",this.status);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"publicV1",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.omit(i,this.extractParams(e)),o=this.urls.api[t]+"/"+this.implodeParams(e,i);return Object.keys(s).length&&(o+="?"+this.urlencode(s)),{url:o,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,u){if(418===e||429===e)throw new v(this.id+" "+e.toString()+" "+t+" "+a);if(404===e)throw new p(this.id+" "+e.toString()+" endpoint not found");if(void 0!==s&&!this.safeValue(s,"success")){var c=this.id+" "+a,d=this.safeString(s,"status");throw"string"===typeof d&&this.throwExactlyMatchedException(this.exceptions.exact,d,c),this.throwBroadlyMatchedException(this.exceptions.broad,a,c),new p(c)}}}]),r}(h)},function(e,t,r){"use strict";var i=r(7),n=r(8),a=r(1),s=r(2),o=r(6),u=r(3),c=r(4),d=r(5),h=r(11),l=r(10),f=l.ExchangeError,p=l.NotSupported,v=l.AuthenticationError;e.exports=function(e){c(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(u(r.prototype),"describe",this).call(this),{id:"xbtce",name:"xBTCe",countries:["RU"],rateLimit:2e3,version:"v1",has:{cancelOrder:!0,CORS:!1,createMarketOrder:!1,createOrder:!0,fetchBalance:!0,fetchMarkets:!0,fetchOHLCV:!1,fetchOrderBook:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0},urls:{referral:"https://xbtce.com/?agent=XX97BTCXXXG687021000B",logo:"https://user-images.githubusercontent.com/1294454/28059414-e235970c-662c-11e7-8c3a-08e31f78684b.jpg",api:"https://cryptottlivewebapi.xbtce.net:8443/api",www:"https://www.xbtce.com",doc:["https://www.xbtce.com/tradeapi","https://support.xbtce.info/Knowledgebase/Article/View/52/25/xbtce-exchange-api"]},requiredCredentials:{apiKey:!0,secret:!0,uid:!0},api:{public:{get:["currency","currency/{filter}","level2","level2/{filter}","quotehistory/{symbol}/{periodicity}/bars/ask","quotehistory/{symbol}/{periodicity}/bars/bid","quotehistory/{symbol}/level2","quotehistory/{symbol}/ticks","symbol","symbol/{filter}","tick","tick/{filter}","ticker","ticker/{filter}","tradesession"]},private:{get:["tradeserverinfo","tradesession","currency","currency/{filter}","level2","level2/{filter}","symbol","symbol/{filter}","tick","tick/{filter}","account","asset","asset/{id}","position","position/{id}","trade","trade/{id}","quotehistory/{symbol}/{periodicity}/bars/ask","quotehistory/{symbol}/{periodicity}/bars/ask/info","quotehistory/{symbol}/{periodicity}/bars/bid","quotehistory/{symbol}/{periodicity}/bars/bid/info","quotehistory/{symbol}/level2","quotehistory/{symbol}/level2/info","quotehistory/{symbol}/periodicities","quotehistory/{symbol}/ticks","quotehistory/{symbol}/ticks/info","quotehistory/cache/{symbol}/{periodicity}/bars/ask","quotehistory/cache/{symbol}/{periodicity}/bars/bid","quotehistory/cache/{symbol}/level2","quotehistory/cache/{symbol}/ticks","quotehistory/symbols","quotehistory/version"],post:["trade","tradehistory"],put:["trade"],delete:["trade"]}},commonCurrencies:{DSH:"DASH"}})}},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:{},e.next=3,this.privateGetSymbol(t);case 3:for(r=e.sent,n=[],a=0;a<r.length;a++)s=r[a],o=this.safeString(s,"Symbol"),u=this.safeString(s,"MarginCurrency"),c=this.safeString(s,"ProfitCurrency"),d=this.safeCurrencyCode(u),h=this.safeCurrencyCode(c),l=d+"/"+h,l=s.IsTradeAllowed?l:o,n.push({id:o,symbol:l,base:d,quote:h,baseId:u,quoteId:c,info:s,active:void 0,precision:this.precision,limits:this.limits});return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetAsset(t);case 5:for(r=e.sent,n={info:r},a=0;a<r.length;a++)s=r[a],o=this.safeString(s,"Currency"),u=this.safeCurrencyCode(o),(c=this.account()).free=this.safeString(s,"FreeAmount"),c.used=this.safeString(s,"LockedAmount"),c.total=this.safeString(s,"Amount"),n[u]=c;return e.abrupt("return",this.parseBalance(n,!1));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.length>1&&void 0!==c[1]?c[1]:void 0,r=c.length>2&&void 0!==c[2]?c[2]:{},e.next=4,this.loadMarkets();case 4:return n=this.market(t),a={filter:n.id},e.next=8,this.privateGetLevel2Filter(this.extend(a,r));case 8:return s=e.sent,o=s[0],u=this.safeInteger(o,"Timestamp"),e.abrupt("return",this.parseOrderBook(o,u,"Bids","Asks","Price","Volume"));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=0,i=void 0;"LastBuyTimestamp"in e&&r<e.LastBuyTimestamp&&(r=e.LastBuyTimestamp,i=e.LastBuyPrice),"LastSellTimestamp"in e&&r<e.LastSellTimestamp&&(r=e.LastSellTimestamp,i=e.LastSellPrice),r||(r=this.milliseconds());var n=void 0;return t&&(n=t.symbol),{symbol:n,timestamp:r,datetime:this.iso8601(r),high:e.DailyBestBuyPrice,low:e.DailyBestSellPrice,bid:e.BestBid,bidVolume:void 0,ask:e.BestAsk,askVolume:void 0,vwap:void 0,open:void 0,close:i,last:i,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:e.DailyTradedTotalVolume,quoteVolume:void 0,info:e}}},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p,v,m,g=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=g.length>0&&void 0!==g[0]?g[0]:void 0,r=g.length>1&&void 0!==g[1]?g[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetTicker(r);case 6:for(n=e.sent,a=this.indexBy(n,"Symbol"),s=Object.keys(a),o={},u=0;u<s.length;u++)c=s[u],d=void 0,h=void 0,c in this.markets_by_id?(d=this.markets_by_id[c],h=d.symbol):(l=c.slice(0,3),f=c.slice(3,6),p=this.safeCurrencyCode(l),v=this.safeCurrencyCode(f),h=p+"/"+v),m=a[c],o[h]=this.parseTicker(m,d);return e.abrupt("return",this.filterByArray(o,"symbol",t));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={filter:n.id},e.next=7,this.publicGetTickerFilter(this.extend(a,r));case 7:if(s=e.sent,!(s.length<1)){e.next=11;break}throw new f(this.id+" fetchTicker returned empty response, xBTCe public API error");case 11:return o=this.indexBy(s,"Symbol"),u=o[n.id],e.abrupt("return",this.parseTicker(u,n));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.length>1&&void 0!==n[1]?n[1]:void 0,n.length>2&&void 0!==n[2]?n[2]:void 0,r=n.length>3&&void 0!==n[3]?n[3]:{},e.next=5,this.loadMarkets();case 5:return e.next=7,this.privateGetTrade(r);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){return[this.safeInteger(e,"Timestamp"),this.safeNumber(e,"Open"),this.safeNumber(e,"High"),this.safeNumber(e,"Low"),this.safeNumber(e,"Close"),this.safeNumber(e,"Volume")]}},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw r.length>1&&void 0!==r[1]?r[1]:"1m",r.length>2&&void 0!==r[2]?r[2]:void 0,r.length>3&&void 0!==r[3]?r[3]:void 0,r.length>4&&void 0!==r[4]?r[4]:{},new p(this.id+" fetchOHLCV is disabled by the exchange");case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=d.length>4&&void 0!==d[4]?d[4]:void 0,o=d.length>5&&void 0!==d[5]?d[5]:{},e.next=4,this.loadMarkets();case 4:if("market"!==r){e.next=6;break}throw new f(this.id+" allows limit orders only");case 6:return u={pair:this.marketId(t),type:n,amount:a,rate:s},e.next=9,this.privatePostTrade(this.extend(u,o));case 9:return c=e.sent,e.abrupt("return",{info:c,id:c.Id.toString()});case 11:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:{},n={Type:"Cancel",Id:t},e.next=5,this.privateDeleteTrade(this.extend(n,r));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"nonce",value:function(){return this.milliseconds()}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0;if(!this.apiKey)throw new v(this.id+" requires apiKey for all requests, their public API is always busy");if(!this.uid)throw new v(this.id+" requires uid property for authentication and trading, their public API is always busy");var s=this.urls.api+"/"+this.version;"public"===t&&(s+="/"+t),s+="/"+this.implodeParams(e,i);var o=this.omit(i,this.extractParams(e));if("public"===t)Object.keys(o).length&&(s+="?"+this.urlencode(o));else{this.checkRequiredCredentials(),n={"Accept-Encoding":"gzip, deflate"};var u=this.nonce().toString();"POST"===r&&(Object.keys(o).length?(n["Content-Type"]="application/json",a=this.json(o)):s+="?"+this.urlencode(o));var c=u+this.uid+this.apiKey+r+s;a&&(c+=a);var d=this.hmac(this.encode(c),this.encode(this.secret),"sha256","base64"),h=this.uid+":"+this.apiKey+":"+u+":"+d;n.Authorization="HMAC "+h}return{url:s,method:r,body:a,headers:n}}}]),r}(h)},function(e,t,r){"use strict";var i=r(7),n=r(8),a=r(1),s=r(2),o=r(6),u=r(3),c=r(4),d=r(5),h=r(11),l=r(10),f=l.ExchangeError,p=l.ArgumentsRequired,v=l.BadRequest,m=l.InsufficientFunds,g=l.InvalidAddress,y=l.BadSymbol,b=l.InvalidOrder,x=r(12);e.exports=function(e){c(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(u(r.prototype),"describe",this).call(this),{id:"xena",name:"Xena Exchange",countries:["VC","UK"],rateLimit:100,certified:!0,has:{CORS:!1,cancelAllOrders:!0,cancelOrder:!0,createDepositAddress:!0,createOrder:!0,editOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchCurrencies:!0,fetchDepositAddress:!0,fetchDeposits:!0,fetchLedger:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTickers:!0,fetchTime:!0,fetchTrades:!0,fetchWithdrawals:!0,withdraw:!0},urls:{logo:"https://user-images.githubusercontent.com/51840849/87489843-bb469280-c64c-11ea-91aa-69c6326506af.jpg",test:{public:"https://trading.demo.xena.io/api",private:"https://api.demo.xena.io"},api:{public:"https://trading.xena.exchange/api",private:"https://api.xena.exchange"},www:"https://xena.exchange",doc:"https://support.xena.exchange/support/solutions/44000808700",fees:"https://trading.xena.exchange/en/platform-specification/fee-schedule"},timeframes:{"1m":"1m","5m":"5m","15m":"15m","30m":"30m","1h":"1h","4h":"4h","12h":"12h","1d":"1d","1w":"1w"},api:{public:{get:["common/currencies","common/instruments","common/features","common/commissions","common/news","market-data/candles/{marketId}/{timeframe}","market-data/market-watch","market-data/dom/{symbol}","market-data/candles/{symbol}/{timeframe}","market-data/trades/{symbol}","market-data/server-time","market-data/v2/candles/{symbol}/{timeframe}","market-data/v2/trades/{symbol}","market-data/v2/dom/{symbol}/","market-data/v2/server-time"]},private:{get:["trading/accounts/{accountId}/order","trading/accounts/{accountId}/active-orders","trading/accounts/{accountId}/last-order-statuses","trading/accounts/{accountId}/positions","trading/accounts/{accountId}/positions-history","trading/accounts/{accountId}/margin-requirements","trading/accounts","trading/accounts/{accountId}/balance","trading/accounts/{accountId}/trade-history","transfers/accounts","transfers/accounts/{accountId}","transfers/accounts/{accountId}/deposit-address/{currency}","transfers/accounts/{accountId}/deposits","transfers/accounts/{accountId}/trusted-addresses","transfers/accounts/{accountId}/withdrawals","transfers/accounts/{accountId}/balance-history"],post:["trading/order/new","trading/order/heartbeat","trading/order/cancel","trading/order/mass-cancel","trading/order/replace","trading/position/maintenance","transfers/accounts/{accountId}/withdrawals","transfers/accounts/{accountId}/deposit-address/{currency}"]}},fees:{trading:{maker:5e-4,taker:.001,tierBased:!0,percentage:!0},funding:{tierBased:!1,percentage:!1,withdraw:{},deposit:{}}},exceptions:{exact:{"Validation failed":v,"Unknown derivative symbol":y,"Unknown account":v,"Wrong TransactTime":v,"ClOrdId is empty":v},broad:{"Invalid aggregation ratio or depth":v,address:g,"Money not enough":m,"parse error":v,"Not enough":m}},options:{defaultType:"margin",accountId:void 0}})}},{key:"fetchTime",value:function(){var e=n(i.mark((function e(){var t,r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},e.next=3,this.publicGetMarketDataV2ServerTime(t);case 3:return r=e.sent,n=this.safeInteger(r,"transactTime"),e.abrupt("return",parseInt(n/1e6));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p,v,m,g,y,b,x,k,w,_,S,O=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=O.length>0&&void 0!==O[0]?O[0]:{},e.next=3,this.publicGetCommonInstruments(t);case 3:for(r=e.sent,n=[],a=0;a<r.length;a++)s=r[a],o=this.safeStringLower(s,"type"),u=this.safeString(s,"symbol"),c=this.safeString(s,"id"),d=this.safeString(s,"marginType"),h=this.safeString(s,"baseCurrency"),l=this.safeString(s,"quoteCurrency"),f=this.safeCurrencyCode(h),p=this.safeCurrencyCode(l),v=u,"margin"===o&&("XenaFuture"===d?o="future":"XenaListedPerpetual"===d&&(o="swap",v=f+"/"+p)),m="future"===o,g="swap"===o,y=this.safeInteger2(s,"tickSize","pricePrecision"),b={price:y,amount:0},x=this.safeNumber(s,"maxOrderQty"),k=this.safeNumber(s,"minOrderQuantity"),w={amount:{min:void 0,max:void 0},price:{min:void 0,max:void 0},cost:{min:k,max:x}},_=this.safeValue(s,"enabled",!1),S=this.safeValue(s,"inverse",!1),n.push({id:u,symbol:v,base:f,quote:p,baseId:h,quoteId:l,numericId:c,active:_,type:o,spot:!1,future:m,swap:g,inverse:S,precision:b,limits:w,info:s});return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchCurrencies",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f,p,v=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=v.length>0&&void 0!==v[0]?v[0]:{},e.next=3,this.publicGetCommonCurrencies(t);case 3:for(r=e.sent,n=Object.keys(r),a={},s=0;s<n.length;s++)o=n[s],u=r[o],c=this.safeCurrencyCode(o),d=this.safeString(u,"title"),h=this.safeInteger(u,"precision"),l=this.safeValue(u,"enabled"),f=!0===l,p=this.safeValue(u,"withdraw",{}),a[c]={id:o,code:c,info:u,name:d,active:f,fee:this.safeNumber(p,"commission"),precision:h,limits:{amount:{min:void 0,max:void 0},withdraw:{min:this.safeNumber(p,"minAmount"),max:void 0}}};return e.abrupt("return",a);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.milliseconds(),i=this.safeString(e,"symbol"),n=this.safeSymbol(i,t),a=this.safeNumber(e,"lastPx"),s=this.safeNumber(e,"firstPx"),o=void 0,u=void 0,c=void 0;void 0!==a&&void 0!==s&&(u=a-s,c=this.sum(a,s)/2,s>0&&(o=u/s*100));var d=this.safeNumber(e,"buyVolume"),h=this.safeNumber(e,"sellVolume"),l=this.sum(d,h);return{symbol:n,timestamp:r,datetime:this.iso8601(r),high:this.safeNumber(e,"highPx"),low:this.safeNumber(e,"lowPx"),bid:this.safeNumber(e,"bid"),bidVolume:void 0,ask:this.safeNumber(e,"ask"),askVolume:void 0,vwap:void 0,open:s,close:a,last:a,previousClose:void 0,change:u,percentage:o,average:c,baseVolume:l,quoteVolume:void 0,info:e}}},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.fetchTickers(void 0,r);case 5:if(n=e.sent,!(t in n)){e.next=8;break}return e.abrupt("return",n[t]);case 8:throw new y(this.id+" fetchTicker could not find a ticker with symbol "+t);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:void 0,r=c.length>1&&void 0!==c[1]?c[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetMarketDataMarketWatch(r);case 6:for(n=e.sent,a={},s=0;s<n.length;s++)o=this.parseTicker(n[s]),u=o.symbol,a[u]=o;return e.abrupt("return",this.filterByArray(a,"symbol",t));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:{},e.next=4,this.loadMarkets();case 4:return a={symbol:this.marketId(t)},void 0!==r&&(a.depth=r),e.next=8,this.publicGetMarketDataV2DomSymbol(this.extend(a,n));case 8:return s=e.sent,o=this.safeValue(s,"mdEntry",[]),u=this.groupBy(o,"mdEntryType"),c=this.safeInteger(s,"lastUpdateTime"),d=parseInt(c/1e6),e.abrupt("return",this.parseOrderBook(u,d,"0","1","mdEntryPx","mdEntrySize"));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchAccounts",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:{},e.next=3,this.privateGetTradingAccounts(t);case 3:for(r=e.sent,n=this.safeValue(r,"accounts"),a=[],s=0;s<n.length;s++)o=n[s],u=this.safeString(o,"id"),c=this.safeString(o,"currency"),d=this.safeCurrencyCode(c),h=this.safeStringLower(o,"kind"),a.push({id:u,type:h,currency:d,info:o});return e.abrupt("return",a);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"findAccountByType",value:function(){var e=n(i.mark((function e(t){var r,n;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadMarkets();case 2:return e.next=4,this.loadAccounts();case 4:if(r=this.groupBy(this.accounts,"type"),void 0!==(n=this.safeValue(r,t))){e.next=8;break}throw new f(this.id+" findAccountByType() could not find an accountId with type '"+t+"', specify the 'accountId' parameter instead");case 8:if(!(n.length>1)){e.next=11;break}throw new f(this.id+" findAccountByType() found more than one accountId with type '"+t+"', specify the 'accountId' parameter instead");case 11:return e.abrupt("return",n[0]);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getAccountId",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadMarkets();case 2:return e.next=4,this.loadAccounts();case 4:if(r=this.safeString(this.options,"accountId"),void 0===(n=this.safeString(t,"accountId",r))){e.next=8;break}return e.abrupt("return",n);case 8:if(a=this.safeString(this.options,"defaultType","margin"),s=this.safeString(t,"type",a),t=this.omit(t,"type"),void 0!==s){e.next=13;break}throw new p(this.id+" requires an 'accountId' parameter or a 'type' parameter ('spot' or 'margin')");case 13:return e.next=15,this.findAccountByType(s);case 15:return o=e.sent,e.abrupt("return",o.id);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.loadAccounts();case 5:return e.next=7,this.getAccountId(t);case 7:return r=e.sent,n={accountId:r},e.next=11,this.privateGetTradingAccountsAccountIdBalance(this.extend(n,t));case 11:for(a=e.sent,s={info:a},o=this.safeValue(a,"balances",[]),u=0;u<o.length;u++)c=o[u],d=this.safeString(c,"currency"),h=this.safeCurrencyCode(d),(l=this.account()).free=this.safeString(c,"available"),l.used=this.safeString(c,"onHold"),s[h]=l;return e.abrupt("return",this.parseBalance(s,!1));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"tradeId"),i=this.safeInteger(e,"transactTime");void 0!==i&&(i=parseInt(i/1e6));var n=this.safeStringLower2(e,"side","aggressorSide");"1"===n?n="buy":"2"===n&&(n="sell");var a=this.safeString(e,"orderId"),s=this.safeString(e,"symbol"),o=this.safeSymbol(s,t),u=this.safeString2(e,"lastPx","mdEntryPx"),c=this.safeString2(e,"lastQty","mdEntrySize"),d=this.parseNumber(u),h=this.parseNumber(c),l=this.parseNumber(x.stringMul(u,c)),f=void 0,p=this.safeNumber(e,"commission");if(void 0!==p){var v=this.safeString(e,"commCurrency"),m=this.safeCurrencyCode(v),g=this.safeNumber(e,"commRate");f={cost:p,rate:g,currency:m}}return{id:r,info:e,timestamp:i,datetime:this.iso8601(i),symbol:o,type:void 0,order:a,side:n,takerOrMaker:void 0,price:d,amount:h,cost:l,fee:f}}},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return e.next=8,this.loadAccounts();case 8:return e.next=10,this.getAccountId(a);case 10:return s=e.sent,o={accountId:s},u=void 0,void 0!==t&&(u=this.market(t),o.symbol=u.id),void 0!==r&&(o.from=1e6*r),void 0!==n&&(o.limit=n),e.next=18,this.privateGetTradingAccountsAccountIdTradeHistory(this.extend(o,a));case 18:return c=e.sent,e.abrupt("return",this.parseTrades(c,u,r,n));case 20:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){var t=this.safeInteger(e,"transactTime"),r=parseInt(t/1e6),i=this.safeNumber(e,"buyVolume"),n=this.safeNumber(e,"sellVolume"),a=this.sum(i,n);return[r,this.safeNumber(e,"firstPx"),this.safeNumber(e,"highPx"),this.safeNumber(e,"lowPx"),this.safeNumber(e,"lastPx"),a]}},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=p.length>1&&void 0!==p[1]?p[1]:"1m",n=p.length>2&&void 0!==p[2]?p[2]:void 0,a=p.length>3&&void 0!==p[3]?p[3]:void 0,s=p.length>4&&void 0!==p[4]?p[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),u={symbol:o.id,timeframe:this.timeframes[r]},c=this.parseTimeframe(r),d=1e3*c,void 0!==n?(u.from=1e6*n,void 0!==a&&(u.to=1e6*this.sum(n,a*d))):(h=this.milliseconds(),void 0!==a&&(u.from=1e6*(h-a*d))),e.next=13,this.publicGetMarketDataV2CandlesSymbolTimeframe(this.extend(u,s));case 13:return l=e.sent,f=this.safeValue(l,"mdEntry",[]),e.abrupt("return",this.parseOHLCVs(f,o,r,n,a));case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={symbol:s.id},void 0!==r&&(o.from=this.iso8601(r)),void 0!==n&&(o.limit=n),e.next=11,this.publicGetMarketDataV2TradesSymbol(this.extend(o,a));case 11:return u=e.sent,c=this.safeValue(u,"mdEntry",[]),e.abrupt("return",this.parseTrades(c,s,r,n));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({A:"open",0:"open",1:"open",2:"closed",6:"canceled",4:"canceled",E:"open",8:"rejected"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"orderId"),i=this.safeString(e,"clOrdId"),n=this.safeInteger(e,"transactTime"),a=parseInt(n/1e6),s=this.parseOrderStatus(this.safeString(e,"ordStatus")),o=this.safeString(e,"symbol"),u=this.safeSymbol(o,t),c=this.safeNumber(e,"price"),d=this.safeNumber(e,"orderQty"),h=this.safeNumber(e,"cumQty"),l=this.safeNumber(e,"leavesQty"),f=this.safeStringLower(e,"side");"1"===f?f="buy":"1"===f&&(f="sell");var p=this.safeStringLower(e,"ordType");return"1"===p?p="market":"2"===p?p="limit":"3"===p?p="stop":"4"===p&&(p="stop-limit"),this.safeOrder({id:r,clientOrderId:i,info:e,timestamp:a,datetime:this.iso8601(a),lastTradeTimestamp:void 0,symbol:u,type:p,timeInForce:void 0,postOnly:void 0,side:f,price:c,stopPrice:void 0,amount:d,cost:void 0,average:void 0,filled:h,remaining:l,status:s,fee:void 0,trades:void 0})}},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,u,c,d,h,l,f,p,v,m,g,y=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=y.length>4&&void 0!==y[4]?y[4]:void 0,o=y.length>5&&void 0!==y[5]?y[5]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.loadAccounts();case 6:return e.next=8,this.getAccountId(o);case 8:if(u=e.sent,c={market:"1",limit:"2",stop:"3","stop-limit":"4"},void 0!==(d=this.safeString(c,r))){e.next=13;break}throw new b(this.id+" createOrder does not support order type "+r+", supported order types are market, limit, stop, stop-limit");case 13:if(h={buy:"1",sell:"2"},void 0!==(l=this.safeString(h,n))){e.next=17;break}throw new b(this.id+" createOrder does not support order side "+n+", supported order sides are buy, sell");case 17:if(f=this.market(t),p={account:parseInt(u),symbol:f.id,ordType:d,side:l,orderQty:this.amountToPrecision(t,a),transactTime:1e6*this.milliseconds()},"limit"!==r&&"stop-limit"!==r){e.next=23;break}if(void 0!==s){e.next=22;break}throw new b(this.id+" createOrder() requires a price argument for order type "+r);case 22:p.price=this.priceToPrecision(t,s);case 23:if("stop"!==r&&"stop-limit"!==r){e.next=29;break}if(void 0!==(v=this.safeNumber(o,"stopPx"))){e.next=27;break}throw new b(this.id+" createOrder() requires a stopPx param for order type "+r);case 27:p.stopPx=this.priceToPrecision(t,v),o=this.omit(o,"stopPx");case 29:return void 0!==(m=this.safeString2(o,"clientOrderId","clOrdId",this.uuid()))&&(p.clOrdId=m,o=this.omit(o,["clientOrderId","clOrdId"])),e.next=33,this.privatePostTradingOrderNew(this.extend(p,o));case 33:return g=e.sent,e.abrupt("return",this.parseOrder(g,f));case 35:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"editOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,u,c,d,h,l,f,v,m,g=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=g.length>4&&void 0!==g[4]?g[4]:void 0,o=g.length>5&&void 0!==g[5]?g[5]:void 0,u=g.length>6&&void 0!==g[6]?g[6]:{},void 0!==r){e.next=5;break}throw new p(this.id+" cancelOrder() requires a symbol argument");case 5:return e.next=7,this.loadMarkets();case 7:return e.next=9,this.loadAccounts();case 9:return e.next=11,this.getAccountId(u);case 11:return c=e.sent,d=this.market(r),h={account:parseInt(c),clOrdId:this.uuid(),symbol:d.id,transactTime:1e6*this.milliseconds()},void 0!==(l=this.safeString2(u,"clientOrderId","origClOrdId"))?(h.origClOrdId=l,u=this.omit(u,["clientOrderId","origClOrdId"])):h.orderId=t,void 0!==s&&(h.orderQty=this.amountToPrecision(r,s)),void 0!==o&&(h.price=this.priceToPrecision(r,o)),void 0!==(f=this.safeNumber(u,"stopPx"))&&(h.stopPx=this.priceToPrecision(r,f),u=this.omit(u,"stopPx")),void 0!==(v=this.safeNumber(u,"capPrice"))&&(h.capPrice=this.priceToPrecision(r,v),u=this.omit(u,"capPrice")),e.next=24,this.privatePostTradingOrderReplace(this.extend(h,u));case 24:return m=e.sent,e.abrupt("return",this.parseOrder(m,d));case 26:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:{},void 0!==r){e.next=4;break}throw new p(this.id+" cancelOrder() requires a symbol argument");case 4:return e.next=6,this.loadMarkets();case 6:return e.next=8,this.loadAccounts();case 8:return e.next=10,this.getAccountId(n);case 10:return a=e.sent,s=this.safeString2(n,"clientOrderId","origClOrdId"),n=this.omit(n,["clientOrderId","origClOrdId"]),o=this.market(r),u={account:parseInt(a),symbol:o.id,clOrdId:this.uuid(),transactTime:1e6*this.milliseconds()},void 0!==s?u.origClOrdId=s:u.orderId=t,e.next=18,this.privatePostTradingOrderCancel(this.extend(u,n));case 18:return c=e.sent,e.abrupt("return",this.parseOrder(c,o));case 20:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cancelAllOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.loadAccounts();case 6:return e.next=8,this.getAccountId(r);case 8:return n=e.sent,a={account:parseInt(n),clOrdId:this.uuid()},void 0!==t?(s=this.market(t),a.symbol=s.id,a.massCancelRequestType="1"):a.massCancelRequestType="7",e.next=13,this.privatePostTradingOrderMassCancel(this.extend(a,r));case 13:return o=e.sent,e.abrupt("return",o);case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return e.next=8,this.loadAccounts();case 8:return e.next=10,this.getAccountId(a);case 10:return s=e.sent,o={accountId:s},u=void 0,void 0!==t&&(u=this.market(t),o.symbol=u.id),e.next=16,this.privateGetTradingAccountsAccountIdActiveOrders(this.extend(o,a));case 16:return c=e.sent,e.abrupt("return",this.parseOrders(c,u,r,n));case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return e.next=8,this.loadAccounts();case 8:return e.next=10,this.getAccountId(a);case 10:return s=e.sent,o={accountId:s},u=void 0,void 0!==t&&(u=this.market(t),o.symbol=u.id),void 0!==r&&(o.from=1e6*this.iso8601(r)),void 0!==n&&(o.limit=n),e.next=18,this.privateGetTradingAccountsAccountIdLastOrderStatuses(this.extend(o,a));case 18:return c=e.sent,e.abrupt("return",this.parseOrders(c,u,r,n));case 20:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createDepositAddress",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.loadAccounts();case 5:return e.next=7,this.getAccountId(r);case 7:return n=e.sent,a=this.currency(t),s={accountId:n,currency:a.id},e.next=12,this.privatePostTransfersAccountsAccountIdDepositAddressCurrency(this.extend(s,r));case 12:return o=e.sent,u=this.safeValue(o,"address"),c=void 0,this.checkAddress(u),e.abrupt("return",{currency:t,address:u,tag:c,info:o});case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchDepositAddress",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.loadAccounts();case 5:return e.next=7,this.getAccountId(r);case 7:return n=e.sent,a=this.currency(t),s={accountId:n,currency:a.id},e.next=12,this.privateGetTransfersAccountsAccountIdDepositAddressCurrency(this.extend(s,r));case 12:return o=e.sent,u=this.safeValue(o,"address"),c=void 0,this.checkAddress(u),e.abrupt("return",{currency:t,address:u,tag:c,info:o});case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTransactionsByType",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,u,c,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=f.length>1&&void 0!==f[1]?f[1]:void 0,n=f.length>2&&void 0!==f[2]?f[2]:void 0,a=f.length>3&&void 0!==f[3]?f[3]:void 0,s=f.length>4&&void 0!==f[4]?f[4]:{},void 0!==r){e.next=6;break}throw new p(this.id+" fetchTransactions() requires a currency `code` argument");case 6:return e.next=8,this.loadMarkets();case 8:return e.next=10,this.loadAccounts();case 10:return e.next=12,this.getAccountId(s);case 12:return o=e.sent,u=this.currency(r),c={currency:u.id,accountId:o},void 0!==n&&(c.since=parseInt(n/1e3)),d="privateGetTransfersAccountsAccountId"+this.capitalize(t),e.next=19,this[d](this.extend(c,s));case 19:return h=e.sent,l=this.safeValue(h,t,[]),e.abrupt("return",this.parseTransactions(l,u,n,a));case 22:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchWithdrawals",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:void 0,n=s.length>2&&void 0!==s[2]?s[2]:void 0,a=s.length>3&&void 0!==s[3]?s[3]:{},e.next=6,this.fetchTransactionsByType("withdrawals",t,r,n,a);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchDeposits",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:void 0,n=s.length>2&&void 0!==s[2]?s[2]:void 0,a=s.length>3&&void 0!==s[3]?s[3]:{},e.next=6,this.fetchTransactionsByType("deposits",t,r,n,a);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"withdrawalRequestId"),i=void 0===r?"deposit":"withdrawal",n=this.safeInteger(e,"lastUpdated");void 0!==n&&(n=parseInt(n/1e6));var a=void 0,s=this.safeString(e,"txId"),o=this.safeString(e,"currency"),u=this.safeCurrencyCode(o,t),c=this.safeString(e,"address"),d=void 0,h=c,l=this.safeNumber(e,"amount"),f=this.parseTransactionStatus(this.safeString(e,"status")),p=void 0;return{info:e,id:r,txid:s,timestamp:a,datetime:this.iso8601(a),addressFrom:d,addressTo:h,address:c,tagFrom:void 0,tagTo:void 0,tag:void 0,type:i,amount:l,currency:u,status:f,updated:n,fee:p}}},{key:"parseTransactionStatus",value:function(e){return this.safeString({1:"pending",2:"ok",3:"failed",4:"failed",5:"pending",100:"pending",101:"pending",102:"pending",103:"pending"},e,e)}},{key:"withdraw",value:function(){var e=n(i.mark((function e(t,r,n){var a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h.length>3&&void 0!==h[3]?h[3]:void 0,a=h.length>4&&void 0!==h[4]?h[4]:{},this.checkAddress(n),e.next=5,this.loadMarkets();case 5:return e.next=7,this.loadAccounts();case 7:return e.next=9,this.getAccountId(a);case 9:return s=e.sent,o=this.currency(t),u=(u=(u=this.uuid()).split("-")).join(""),c={currency:o.id,accountId:s,amount:this.currencyToPrecision(t,r),address:n,id:u},e.next=17,this.privatePostTransfersAccountsAccountIdWithdrawals(this.extend(c,a));case 17:return d=e.sent,e.abrupt("return",this.parseTransaction(d,o));case 19:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"parseLedgerEntryType",value:function(e){return this.safeString({deposit:"transaction",withdrawal:"transaction","internal deposit":"transfer","internal withdrawal":"transfer",rebate:"rebate",reward:"reward"},e,e)}},{key:"parseLedgerEntry",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),i=void 0,n=this.safeString(e,"accountId"),a=void 0,s=void 0,o=this.parseLedgerEntryType(this.safeString(e,"kind")),u=this.safeCurrencyCode(this.safeString(e,"currency"),t),c=this.safeNumber(e,"amount");c<0?(i="out",c=Math.abs(c)):i="in";var d=this.safeInteger(e,"ts");void 0!==d&&(d=parseInt(d/1e6));var h={cost:this.safeNumber(e,"commission"),currency:u},l=void 0,f=this.safeNumber(e,"balance"),p="ok";return{info:e,id:r,direction:i,account:n,referenceId:a,referenceAccount:s,type:o,currency:u,amount:c,before:l,after:f,status:p,timestamp:d,datetime:this.iso8601(d),fee:h}}},{key:"fetchLedger",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return e.next=8,this.loadAccounts();case 8:return e.next=10,this.getAccountId(a);case 10:return s=e.sent,o={accountId:s},u=void 0,void 0!==t&&(u=this.currency(t),o.symbol=u.id),void 0!==r&&(o.from=1e6*r),void 0!==n&&(o.limit=n),e.next=18,this.privateGetTransfersAccountsAccountIdBalanceHistory(this.extend(o,a));case 18:return c=e.sent,e.abrupt("return",this.parseLedger(c,u,r,n));case 20:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"nonce",value:function(){return this.milliseconds()}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.urls.api[t]+"/"+this.implodeParams(e,i),o=this.omit(i,this.extractParams(e));if("public"===t)Object.keys(o).length&&(s+="?"+this.urlencode(o));else if("private"===t){this.checkRequiredCredentials();var u=this.nonce();u=u.toString();var c="AUTH"+(u+="000000"),d=this.secret.slice(14,78),h=this.ecdsa(c,d,"p256","sha256"),l=h.r+h.s;n={"X-AUTH-API-KEY":this.apiKey,"X-AUTH-API-PAYLOAD":c,"X-AUTH-API-SIGNATURE":l,"X-AUTH-API-NONCE":u},"GET"===r?Object.keys(o).length&&(s+="?"+this.urlencode(o)):"POST"===r&&(a=this.json(o),n["Content-Type"]="application/json")}return{url:s,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,u){if(void 0!==s&&e>=400){var c=this.id+" "+this.json(s),d=this.safeString(s,"error"),h=this.exceptions.exact;if(d in h)throw new h[d](c);var l=this.exceptions.broad,p=this.findBroadlyMatchedKey(l,a);if(void 0!==p)throw new l[p](c);throw new f(c)}}}]),r}(h)},function(e,t,r){"use strict";var i=r(21),n=r(7),a=r(8),s=r(1),o=r(2),u=r(6),c=r(3),d=r(4),h=r(5),l=r(11),f=r(10),p=f.ExchangeError,v=f.ArgumentsRequired,m=f.ExchangeNotAvailable,g=f.InvalidNonce,y=f.InsufficientFunds,b=f.OrderNotFound,x=f.DDoSProtection,k=f.InvalidOrder,w=f.AuthenticationError,_=f.RateLimitExceeded,S=r(12);e.exports=function(e){d(r,e);var t=h(r);function r(){return s(this,r),t.apply(this,arguments)}return o(r,[{key:"describe",value:function(){return this.deepExtend(u(c(r.prototype),"describe",this).call(this),{id:"yobit",name:"YoBit",countries:["RU"],rateLimit:3e3,version:"3",has:{cancelOrder:!0,CORS:!1,createDepositAddress:!0,createMarketOrder:!1,createOrder:!0,fetchBalance:!0,fetchDepositAddress:!0,fetchDeposits:!1,fetchMarkets:!0,fetchMyTrades:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrderBooks:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,fetchTransactions:!1,fetchWithdrawals:!1,withdraw:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/27766910-cdcbfdae-5eea-11e7-9859-03fea873272d.jpg",api:{public:"https://yobit.net/api",private:"https://yobit.net/tapi"},www:"https://www.yobit.net",doc:"https://www.yobit.net/en/api/",fees:"https://www.yobit.net/en/fees/"},api:{public:{get:["depth/{pair}","info","ticker/{pair}","trades/{pair}"]},private:{post:["ActiveOrders","CancelOrder","GetDepositAddress","getInfo","OrderInfo","Trade","TradeHistory","WithdrawCoinsToAddress"]}},fees:{trading:{maker:.002,taker:.002},funding:{withdraw:{}}},commonCurrencies:{AIR:"AirCoin",ANI:"ANICoin",ANT:"AntsCoin",ATMCHA:"ATM",ASN:"Ascension",AST:"Astral",ATM:"Autumncoin",BCC:"BCH",BCS:"BitcoinStake",BITS:"Bitstar",BLN:"Bulleon",BOT:"BOTcoin",BON:"BONES",BPC:"BitcoinPremium",BTS:"Bitshares2",CAT:"BitClave",CBC:"CryptoBossCoin",CMT:"CometCoin",COIN:"Coin.com",COV:"Coven Coin",COVX:"COV",CPC:"Capricoin",CREDIT:"Creditbit",CS:"CryptoSpots",DCT:"Discount",DFT:"DraftCoin",DGD:"DarkGoldCoin",DIRT:"DIRTY",DROP:"FaucetCoin",DSH:"DASH",EKO:"EkoCoin",ENTER:"ENTRC",EPC:"ExperienceCoin",ESC:"EdwardSnowden",EUROPE:"EUROP",EXT:"LifeExtension",FUNK:"FUNKCoin",GCC:"GlobalCryptocurrency",GEN:"Genstake",GENE:"Genesiscoin",GOLD:"GoldMint",GOT:"Giotto Coin",HTML5:"HTML",HYPERX:"HYPER",ICN:"iCoin",INSANE:"INSN",JNT:"JointCoin",JPC:"JupiterCoin",JWL:"Jewels",KNC:"KingN Coin",LBTCX:"LiteBitcoin",LIZI:"LiZi",LOC:"LocoCoin",LOCX:"LOC",LUNYR:"LUN",LUN:"LunarCoin",MASK:"Yobit MASK",MDT:"Midnight",MIS:"MIScoin",NAV:"NavajoCoin",NBT:"NiceBytes",OMG:"OMGame",ONX:"Onix",PAC:"$PAC",PLAY:"PlayCoin",PIVX:"Darknet",PRS:"PRE",PUTIN:"PutinCoin",STK:"StakeCoin",SUB:"Subscriptio",PAY:"EPAY",PLC:"Platin Coin",RCN:"RCoin",REP:"Republicoin",RUR:"RUB",SBTC:"Super Bitcoin",TTC:"TittieCoin",UNI:"Universe",UST:"Uservice",VOL:"VolumeCoin",XIN:"XINCoin",XRA:"Ratecoin"},options:{fetchOrdersRequiresSymbol:!0,fetchTickersMaxLength:512},exceptions:{exact:{803:k,804:k,805:k,806:k,807:k,831:y,832:y,833:b},broad:{"Invalid pair name":p,"invalid api key":w,"invalid sign":w,"api key dont have trade permission":w,"invalid parameter":k,"invalid order":k,"The given order has already been cancelled":k,"Requests too often":x,"not available":m,"data unavailable":m,"external service unavailable":m,"Total transaction amount":k,"The given order has already been closed and cannot be cancelled":k,"Insufficient funds":y,"invalid key":w,"invalid nonce":g,"Total order amount is less than minimal amount":k,"Rate Limited":_}},orders:{}})}},{key:"fetchBalance",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,u,c,d,h,l,f=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privatePostGetInfo(t);case 5:for(r=e.sent,i=this.safeValue(r,"return",{}),a={info:r},s=this.safeValue(i,"funds",{}),o=this.safeValue(i,"funds_incl_orders",{}),u=Object.keys(this.extend(s,o)),c=0;c<u.length;c++)d=u[c],h=this.safeCurrencyCode(d),(l=this.account()).free=this.safeString(s,d),l.total=this.safeString(o,d),a[h]=l;return e.abrupt("return",this.parseBalance(a,!1));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMarkets",value:function(){var e=a(n.mark((function e(){var t,r,a,s,o,u,c,d,h,l,f,p,v,m,g,y,b,x,k,w,_,O,T,C,I,M=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=M.length>0&&void 0!==M[0]?M[0]:{},e.next=3,this.publicGetInfo(t);case 3:for(r=e.sent,a=this.safeValue(r,"pairs"),s=Object.keys(a),o=[],u=0;u<s.length;u++)c=s[u],d=a[c],h=c.split("_"),l=i(h,2),f=l[0],p=l[1],v=f.toUpperCase(),m=p.toUpperCase(),v=this.safeCurrencyCode(v),m=this.safeCurrencyCode(m),g=v+"/"+m,y={amount:this.safeInteger(d,"decimal_places"),price:this.safeInteger(d,"decimal_places")},b={min:this.safeNumber(d,"min_amount"),max:this.safeNumber(d,"max_amount")},x={min:this.safeNumber(d,"min_price"),max:this.safeNumber(d,"max_price")},k={min:this.safeNumber(d,"min_total")},w={amount:b,price:x,cost:k},_=this.safeInteger(d,"hidden"),O=0===_,T=this.safeString(d,"fee"),T=S.stringDiv(T,"100"),C=this.parseNumber(T),I=this.parseNumber(T),o.push({id:c,symbol:g,base:v,quote:m,baseId:f,quoteId:p,active:O,taker:C,maker:I,precision:y,limits:w,info:d});return e.abrupt("return",o);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,u,c=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,i=c.length>2&&void 0!==c[2]?c[2]:{},e.next=4,this.loadMarkets();case 4:return a=this.market(t),s={pair:a.id},void 0!==r&&(s.limit=r),e.next=9,this.publicGetDepthPair(this.extend(s,i));case 9:if(o=e.sent,a.id in o){e.next=13;break}throw new p(this.id+" "+a.symbol+" order book is empty or not available");case 13:return u=o[a.id],e.abrupt("return",this.parseOrderBook(u));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrderBooks",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,u,c,d,h,l,f=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:void 0,r=f.length>1&&void 0!==f[1]?f[1]:void 0,i=f.length>2&&void 0!==f[2]?f[2]:{},e.next=5,this.loadMarkets();case 5:if(a=void 0,void 0!==t){e.next=13;break}if(!((a=this.ids.join("-")).length>2048)){e.next=11;break}throw s=this.ids.length,new p(this.id+" has "+s.toString()+" symbols exceeding max URL length, you are required to specify a list of symbols in the first argument to fetchOrderBooks");case 11:e.next=15;break;case 13:a=(a=this.marketIds(t)).join("-");case 15:return o={pair:a},void 0!==r&&(o.limit=r),e.next=19,this.publicGetDepthPair(this.extend(o,i));case 19:for(u=e.sent,c={},a=Object.keys(u),d=0;d<a.length;d++)h=a[d],l=this.safeSymbol(h),c[l]=this.parseOrderBook(u[h]);return e.abrupt("return",c);case 24:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeTimestamp(e,"updated"),i=void 0;void 0!==t&&(i=t.symbol);var n=this.safeNumber(e,"last");return{symbol:i,timestamp:r,datetime:this.iso8601(r),high:this.safeNumber(e,"high"),low:this.safeNumber(e,"low"),bid:this.safeNumber(e,"buy"),bidVolume:void 0,ask:this.safeNumber(e,"sell"),askVolume:void 0,vwap:void 0,open:void 0,close:n,last:n,previousClose:void 0,change:void 0,percentage:void 0,average:this.safeNumber(e,"avg"),baseVolume:this.safeNumber(e,"vol_cur"),quoteVolume:this.safeNumber(e,"vol"),info:e}}},{key:"fetchTickers",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,u,c,d,h,l,f,p,m,g=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=g.length>0&&void 0!==g[0]?g[0]:void 0,r=g.length>1&&void 0!==g[1]?g[1]:{},e.next=4,this.loadMarkets();case 4:if(i=this.ids,void 0!==t){e.next=13;break}if(a=i.length,i=i.join("-"),s=this.safeInteger(this.options,"fetchTickersMaxLength",2048),!(i.length>this.options.fetchTickersMaxLength)){e.next=11;break}throw new v(this.id+" has "+a.toString()+" markets exceeding max URL length for this endpoint ("+s.toString()+" characters), please, specify a list of symbols of interest in the first argument to fetchTickers");case 11:e.next=15;break;case 13:i=(i=this.marketIds(t)).join("-");case 15:return o={pair:i},e.next=18,this.publicGetTickerPair(this.extend(o,r));case 18:for(u=e.sent,c={},d=Object.keys(u),h=0;h<d.length;h++)l=d[h],f=u[l],p=this.safeMarket(l),m=p.symbol,c[m]=this.parseTicker(f,p);return e.abrupt("return",this.filterByArray(c,"symbol",t));case 23:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=a(n.mark((function e(t){var r,i,a=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:{},e.next=3,this.fetchTickers([t],r);case 3:return i=e.sent,e.abrupt("return",i[t]);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeTimestamp(e,"timestamp"),i=this.safeString(e,"type");"ask"===i?i="sell":"bid"===i&&(i="buy");var n=this.safeString2(e,"rate","price"),a=this.safeString2(e,"trade_id","tid"),s=this.safeString(e,"order_id"),o=this.safeString(e,"pair"),u=this.safeSymbol(o,t),c=this.safeString(e,"amount"),d=this.parseNumber(S.stringMul(n,c)),h=this.parseNumber(n),l=this.parseNumber(c),f="limit",p=void 0,v=this.safeNumber(e,"commission");if(void 0!==v){var m=this.safeString(e,"commissionCurrency"),g=this.safeCurrencyCode(m);p={cost:v,currency:g}}var y=this.safeValue(e,"is_your_order");return void 0!==y&&void 0===p&&(p=this.calculateFee(u,f,i,l,h,"taker")),{id:a,order:s,timestamp:r,datetime:this.iso8601(r),symbol:u,type:f,side:i,takerOrMaker:void 0,price:h,amount:l,cost:d,fee:p,info:e}}},{key:"fetchTrades",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,u,c=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,i=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={pair:s.id},void 0!==i&&(o.limit=i),e.next=10,this.publicGetTradesPair(this.extend(o,a));case 10:if(u=e.sent,!Array.isArray(u)){e.next=15;break}if(0!==u.length){e.next=15;break}return e.abrupt("return",[]);case 15:return e.abrupt("return",this.parseTrades(u[s.id],s,r,i));case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=a(n.mark((function e(t,r,i,a){var s,o,u,c,d,h,l,f,v,m,g=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=g.length>4&&void 0!==g[4]?g[4]:void 0,o=g.length>5&&void 0!==g[5]?g[5]:{},"market"!==r){e.next=4;break}throw new p(this.id+" allows limit orders only");case 4:return e.next=6,this.loadMarkets();case 6:return u=this.market(t),c={pair:u.id,type:i,amount:this.amountToPrecision(t,a),rate:this.priceToPrecision(t,s)},s=parseFloat(s),a=parseFloat(a),e.next=12,this.privatePostTrade(this.extend(c,o));case 12:return d=e.sent,h=void 0,l="open",f=0,v=a,"return"in d&&("0"===(h=this.safeString(d.return,"order_id"))&&(h=this.safeString(d.return,"init_order_id"),l="closed"),f=this.safeNumber(d.return,"received",0),v=this.safeNumber(d.return,"remains",a)),m=this.milliseconds(),e.abrupt("return",{id:h,timestamp:m,datetime:this.iso8601(m),lastTradeTimestamp:void 0,status:l,symbol:t,type:r,side:i,price:s,cost:s*f,amount:a,remaining:v,filled:f,fee:void 0,info:d,clientOrderId:void 0,average:void 0,trades:void 0});case 20:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=a(n.mark((function e(t){var r,i,a=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:{},e.next=4,this.loadMarkets();case 4:return i={order_id:parseInt(t)},e.next=7,this.privatePostCancelOrder(this.extend(i,r));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({0:"open",1:"closed",2:"canceled",3:"open"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),i=this.parseOrderStatus(this.safeString(e,"status")),n=this.safeTimestamp(e,"timestamp_created"),a=this.safeString(e,"pair"),s=this.safeSymbol(a,t),o=this.safeNumber(e,"amount"),u=this.safeNumber(e,"start_amount"),c=this.safeNumber(e,"rate"),d=void 0,h="limit",l=this.safeString(e,"type");return this.safeOrder({info:e,id:r,clientOrderId:void 0,symbol:s,timestamp:n,datetime:this.iso8601(n),lastTradeTimestamp:void 0,type:h,timeInForce:void 0,postOnly:void 0,side:l,price:c,stopPrice:void 0,cost:void 0,amount:u,remaining:o,filled:void 0,status:i,fee:d,average:void 0,trades:void 0})}},{key:"fetchOrder",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.length>1&&void 0!==o[1]?o[1]:void 0,r=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return i={order_id:parseInt(t)},e.next=7,this.privatePostOrderInfo(this.extend(i,r));case 7:return a=e.sent,t=t.toString(),s=this.safeValue(a,"return",{}),e.abrupt("return",this.parseOrder(this.extend({id:t},s[t])));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,u,c,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:void 0,i=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:{},void 0!==t){e.next=6;break}throw new v(this.id+" fetchOpenOrders() requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return s={},o=void 0,void 0!==t&&(u=this.market(t),s.pair=u.id),e.next=13,this.privatePostActiveOrders(this.extend(s,a));case 13:return c=e.sent,d=this.safeValue(c,"return",[]),e.abrupt("return",this.parseOrders(d,o,r,i));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,u,c,d,h,l,f,p,m=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=m.length>0&&void 0!==m[0]?m[0]:void 0,r=m.length>1&&void 0!==m[1]?m[1]:void 0,i=m.length>2&&void 0!==m[2]?m[2]:void 0,a=m.length>3&&void 0!==m[3]?m[3]:{},void 0!==t){e.next=6;break}throw new v(this.id+" fetchMyTrades() requires a `symbol` argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.market(t),o={pair:s.id},void 0!==i&&(o.count=parseInt(i)),void 0!==r&&(o.since=parseInt(r/1e3)),e.next=14,this.privatePostTradeHistory(this.extend(o,a));case 14:for(u=e.sent,c=this.safeValue(u,"return",{}),d=Object.keys(c),h=[],l=0;l<d.length;l++)f=d[l],p=this.parseTrade(this.extend(c[f],{trade_id:f}),s),h.push(p);return e.abrupt("return",this.filterBySymbolSinceLimit(h,t,r,i));case 20:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createDepositAddress",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},i={need_new:1},e.next=4,this.fetchDepositAddress(t,this.extend(i,r));case 4:return a=e.sent,s=this.safeString(a,"address"),this.checkAddress(s),e.abrupt("return",{currency:t,address:s,tag:void 0,info:a.info});case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchDepositAddress",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:{},e.next=3,this.loadMarkets();case 3:return i=this.currency(t),a={coinName:i.id,need_new:0},e.next=7,this.privatePostGetDepositAddress(this.extend(a,r));case 7:return s=e.sent,o=this.safeString(s.return,"address"),this.checkAddress(o),e.abrupt("return",{currency:t,address:o,tag:void 0,info:s});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"withdraw",value:function(){var e=a(n.mark((function e(t,r,i){var a,s,o,u,c,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=d.length>3&&void 0!==d[3]?d[3]:void 0,s=d.length>4&&void 0!==d[4]?d[4]:{},this.checkAddress(i),e.next=5,this.loadMarkets();case 5:if(o=this.currency(t),u={coinName:o.id,amount:r,address:i},void 0===a){e.next=9;break}throw new p(this.id+" withdraw() does not support the tag argument yet due to a lack of docs on withdrawing with tag/memo on behalf of the exchange.");case 9:return e.next=11,this.privatePostWithdrawCoinsToAddress(this.extend(u,s));case 11:return c=e.sent,e.abrupt("return",{info:c,id:void 0});case 13:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.urls.api[t],o=this.omit(i,this.extractParams(e));if("private"===t){this.checkRequiredCredentials();var u=this.nonce();a=this.urlencode(this.extend({nonce:u,method:e},o));var c=this.hmac(this.encode(a),this.encode(this.secret),"sha512");n={"Content-Type":"application/x-www-form-urlencoded",Key:this.apiKey,Sign:c}}else"public"===t?(s+="/"+this.version+"/"+this.implodeParams(e,i),Object.keys(o).length&&(s+="?"+this.urlencode(o))):(s+="/"+this.implodeParams(e,i),"GET"===r?Object.keys(o).length&&(s+="?"+this.urlencode(o)):Object.keys(o).length&&(a=this.json(o),n={"Content-Type":"application/json"}));return{url:s,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,u){if(void 0!==s&&"success"in s){var c=this.safeValue(s,"success",!1);if("string"===typeof c&&(c="true"===c||"1"===c),!c){var d=this.safeString(s,"code"),h=this.safeString(s,"error"),l=this.id+" "+a;throw this.throwExactlyMatchedException(this.exceptions.exact,d,l),this.throwExactlyMatchedException(this.exceptions.exact,h,l),this.throwBroadlyMatchedException(this.exceptions.broad,h,l),new p(l)}}}}]),r}(l)},function(e,t,r){"use strict";var i=r(7),n=r(21),a=r(8),s=r(1),o=r(2),u=r(6),c=r(3),d=r(4),h=r(5),l=r(11),f=r(10),p=f.ExchangeError,v=f.BadRequest,m=r(12);e.exports=function(e){d(r,e);var t=h(r);function r(){return s(this,r),t.apply(this,arguments)}return o(r,[{key:"describe",value:function(){return this.deepExtend(u(c(r.prototype),"describe",this).call(this),{id:"zaif",name:"Zaif",countries:["JP"],rateLimit:2e3,version:"1",has:{cancelOrder:!0,CORS:!1,createMarketOrder:!1,createOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchMarkets:!0,fetchOrderBook:!0,fetchOpenOrders:!0,fetchTicker:!0,fetchTrades:!0,withdraw:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/27766927-39ca2ada-5eeb-11e7-972f-1b4199518ca6.jpg",api:"https://api.zaif.jp",www:"https://zaif.jp",doc:["https://techbureau-api-document.readthedocs.io/ja/latest/index.html","https://corp.zaif.jp/api-docs","https://corp.zaif.jp/api-docs/api_links","https://www.npmjs.com/package/zaif.jp","https://github.com/you21979/node-zaif"],fees:"https://zaif.jp/fee?lang=en"},fees:{trading:{percentage:!0,taker:.001,maker:0}},api:{public:{get:["depth/{pair}","currencies/{pair}","currencies/all","currency_pairs/{pair}","currency_pairs/all","last_price/{pair}","ticker/{pair}","trades/{pair}"]},private:{post:["active_orders","cancel_order","deposit_history","get_id_info","get_info","get_info2","get_personal_info","trade","trade_history","withdraw","withdraw_history"]},ecapi:{post:["createInvoice","getInvoice","getInvoiceIdsByOrderNumber","cancelInvoice"]},tlapi:{post:["get_positions","position_history","active_positions","create_position","change_position","cancel_position"]},fapi:{get:["groups/{group_id}","last_price/{group_id}/{pair}","ticker/{group_id}/{pair}","trades/{group_id}/{pair}","depth/{group_id}/{pair}"]}},options:{fees:{"BTC/JPY":{maker:0,taker:0},"BCH/JPY":{maker:0,taker:.003},"BCH/BTC":{maker:0,taker:.003},"PEPECASH/JPY":{maker:0,taker:1e-4},"PEPECASH/BT":{maker:0,taker:1e-4}}},exceptions:{exact:{"unsupported currency_pair":v},broad:{}}})}},{key:"fetchMarkets",value:function(){var e=a(i.mark((function e(){var t,r,a,s,o,u,c,d,h,l,f,p,v,m,g,y,b,x,k=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=k.length>0&&void 0!==k[0]?k[0]:{},e.next=3,this.publicGetCurrencyPairsAll(t);case 3:for(r=e.sent,a=[],s=0;s<r.length;s++)o=r[s],u=this.safeString(o,"currency_pair"),c=this.safeString(o,"name"),d=c.split("/"),h=n(d,2),l=h[0],f=h[1],p=this.safeCurrencyCode(l),v=this.safeCurrencyCode(f),m=p+"/"+v,g={amount:-Math.log10(this.safeNumber(o,"item_unit_step")),price:this.safeInteger(o,"aux_unit_point")},y=this.safeValue(this.options.fees,m,this.fees.trading),b=y.taker,x=y.maker,a.push({id:u,symbol:m,base:p,quote:v,baseId:l,quoteId:f,active:!0,precision:g,taker:b,maker:x,limits:{amount:{min:this.safeNumber(o,"item_unit_min"),max:void 0},price:{min:this.safeNumber(o,"aux_unit_min"),max:void 0},cost:{min:void 0,max:void 0}},info:o});return e.abrupt("return",a);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=a(i.mark((function e(){var t,r,n,a,s,o,u,c,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privatePostGetInfo(t);case 5:for(r=e.sent,n=this.safeValue(r,"return",{}),a={info:r},s=this.safeValue(n,"funds",{}),o=Object.keys(s),u=0;u<o.length;u++)c=o[u],d=this.safeCurrencyCode(c),h=this.safeValue(s,c),l={free:h,used:0,total:h},"deposit"in n&&c in n.deposit&&(l.total=this.safeNumber(n.deposit,c),l.used=l.total-l.free),a[d]=l;return e.abrupt("return",this.parseBalance(a));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=a(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.loadMarkets();case 4:return n={pair:this.marketId(t)},e.next=7,this.publicGetDepthPair(this.extend(n,r));case 7:return a=e.sent,e.abrupt("return",this.parseOrderBook(a));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=a(i.mark((function e(t){var r,n,a,s,o,u,c,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:{},e.next=3,this.loadMarkets();case 3:return n={pair:this.marketId(t)},e.next=6,this.publicGetTickerPair(this.extend(n,r));case 6:return a=e.sent,s=this.milliseconds(),o=this.safeNumber(a,"vwap"),u=this.safeNumber(a,"volume"),c=void 0,void 0!==u&&void 0!==o&&(c=u*o),d=this.safeNumber(a,"last"),e.abrupt("return",{symbol:t,timestamp:s,datetime:this.iso8601(s),high:this.safeNumber(a,"high"),low:this.safeNumber(a,"low"),bid:this.safeNumber(a,"bid"),bidVolume:void 0,ask:this.safeNumber(a,"ask"),askVolume:void 0,vwap:o,open:void 0,close:d,last:d,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:u,quoteVolume:c,info:a});case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"trade_type");r="bid"===r?"buy":"sell";var i=this.safeTimestamp(e,"date"),n=this.safeString2(e,"id","tid"),a=this.safeString(e,"price"),s=this.safeString(e,"amount"),o=this.parseNumber(a),u=this.parseNumber(s),c=this.parseNumber(m.stringMul(a,s)),d=this.safeString(e,"currency_pair"),h=this.safeSymbol(d,t,"_");return{id:n,info:e,timestamp:i,datetime:this.iso8601(i),symbol:h,type:void 0,side:r,order:void 0,takerOrMaker:void 0,price:o,amount:u,cost:c,fee:void 0}}},{key:"fetchTrades",value:function(){var e=a(i.mark((function e(t){var r,n,a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={pair:s.id},e.next=9,this.publicGetTradesPair(this.extend(o,a));case 9:return u=e.sent,1===u.length&&(c=u[0],Object.keys(c).length||(u=[])),e.abrupt("return",this.parseTrades(u,s,r,n));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=a(i.mark((function e(t,r,n,a){var s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=d.length>4&&void 0!==d[4]?d[4]:void 0,o=d.length>5&&void 0!==d[5]?d[5]:{},e.next=4,this.loadMarkets();case 4:if("limit"===r){e.next=6;break}throw new p(this.id+" allows limit orders only");case 6:return u={currency_pair:this.marketId(t),action:"buy"===n?"bid":"ask",amount:a,price:s},e.next=9,this.privatePostTrade(this.extend(u,o));case 9:return c=e.sent,e.abrupt("return",{info:c,id:c.return.order_id.toString()});case 11:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=a(i.mark((function e(t){var r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:{},n={order_id:t},e.next=5,this.privatePostCancelOrder(this.extend(n,r));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"action");r="bid"===r?"buy":"sell";var i=this.safeTimestamp(e,"timestamp"),n=this.safeString(e,"currency_pair"),a=this.safeSymbol(n,t,"_"),s=this.safeNumber(e,"price"),o=this.safeNumber(e,"amount"),u=this.safeString(e,"id");return this.safeOrder({id:u,clientOrderId:void 0,timestamp:i,datetime:this.iso8601(i),lastTradeTimestamp:void 0,status:"open",symbol:a,type:"limit",timeInForce:void 0,postOnly:void 0,side:r,price:s,stopPrice:void 0,cost:void 0,amount:o,filled:void 0,remaining:void 0,trades:void 0,fee:void 0,info:e,average:void 0})}},{key:"fetchOpenOrders",value:function(){var e=a(i.mark((function e(){var t,r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:void 0,r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},e.next=6,this.loadMarkets();case 6:return s=void 0,o={},void 0!==t&&(s=this.market(t),o.currency_pair=s.id),e.next=11,this.privatePostActiveOrders(this.extend(o,a));case 11:return u=e.sent,e.abrupt("return",this.parseOrders(u.return,s,r,n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=a(i.mark((function e(){var t,r,n,a,s,o,u,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:void 0,r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},e.next=6,this.loadMarkets();case 6:return s=void 0,o={},void 0!==t&&(s=this.market(t),o.currency_pair=s.id),e.next=11,this.privatePostTradeHistory(this.extend(o,a));case 11:return u=e.sent,e.abrupt("return",this.parseOrders(u.return,s,r,n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"withdraw",value:function(){var e=a(i.mark((function e(t,r,n){var a,s,o,u,c,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=d.length>3&&void 0!==d[3]?d[3]:void 0,s=d.length>4&&void 0!==d[4]?d[4]:{},this.checkAddress(n),e.next=5,this.loadMarkets();case 5:if(o=this.currency(t),"JPY"!==t){e.next=8;break}throw new p(this.id+" withdraw() does not allow "+t+" withdrawals");case 8:return u={currency:o.id,amount:r,address:n},void 0!==a&&(u.message=a),e.next=12,this.privatePostWithdraw(this.extend(u,s));case 12:return c=e.sent,e.abrupt("return",{info:c,id:c.return.txid,fee:c.return.fee});case 14:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"nonce",value:function(){var e=parseFloat(this.milliseconds()/1e3);return e.toFixed(8)}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.urls.api+"/";if("public"===t)s+="api/"+this.version+"/"+this.implodeParams(e,i);else if("fapi"===t)s+="fapi/"+this.version+"/"+this.implodeParams(e,i);else{this.checkRequiredCredentials(),s+="ecapi"===t?"ecapi":"tlapi"===t?"tlapi":"tapi";var o=this.nonce();a=this.urlencode(this.extend({method:e,nonce:o},i)),n={"Content-Type":"application/x-www-form-urlencoded",Key:this.apiKey,Sign:this.hmac(this.encode(a),this.encode(this.secret),"sha512")}}return{url:s,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,u){if(void 0!==s){var c=this.id+" "+a,d=this.safeString(s,"error");if(void 0!==d)throw this.throwExactlyMatchedException(this.exceptions.exact,d,c),this.throwBroadlyMatchedException(this.exceptions.broad,d,c),new p(c);if(!this.safeValue(s,"success",!0))throw new p(c)}}}]),r}(l)},function(e,t,r){"use strict";r(83);var i=r(0),n=60103;if(t.Fragment=60107,"function"===typeof Symbol&&Symbol.for){var a=Symbol.for;n=a("react.element"),t.Fragment=a("react.fragment")}var s=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o=Object.prototype.hasOwnProperty,u={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,r){var i,a={},c=null,d=null;for(i in void 0!==r&&(c=""+r),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)o.call(t,i)&&!u.hasOwnProperty(i)&&(a[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps)void 0===a[i]&&(a[i]=t[i]);return{$$typeof:n,type:e,key:c,ref:d,props:a,_owner:s.current}}t.jsx=c,t.jsxs=c},function(e,t,r){"use strict";var i="function"===typeof Symbol&&Symbol.for,n=i?Symbol.for("react.element"):60103,a=i?Symbol.for("react.portal"):60106,s=i?Symbol.for("react.fragment"):60107,o=i?Symbol.for("react.strict_mode"):60108,u=i?Symbol.for("react.profiler"):60114,c=i?Symbol.for("react.provider"):60109,d=i?Symbol.for("react.context"):60110,h=i?Symbol.for("react.async_mode"):60111,l=i?Symbol.for("react.concurrent_mode"):60111,f=i?Symbol.for("react.forward_ref"):60112,p=i?Symbol.for("react.suspense"):60113,v=i?Symbol.for("react.suspense_list"):60120,m=i?Symbol.for("react.memo"):60115,g=i?Symbol.for("react.lazy"):60116,y=i?Symbol.for("react.block"):60121,b=i?Symbol.for("react.fundamental"):60117,x=i?Symbol.for("react.responder"):60118,k=i?Symbol.for("react.scope"):60119;function w(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case h:case l:case s:case u:case o:case p:return e;default:switch(e=e&&e.$$typeof){case d:case f:case g:case m:case c:return e;default:return t}}case a:return t}}}function _(e){return w(e)===l}t.AsyncMode=h,t.ConcurrentMode=l,t.ContextConsumer=d,t.ContextProvider=c,t.Element=n,t.ForwardRef=f,t.Fragment=s,t.Lazy=g,t.Memo=m,t.Portal=a,t.Profiler=u,t.StrictMode=o,t.Suspense=p,t.isAsyncMode=function(e){return _(e)||w(e)===h},t.isConcurrentMode=_,t.isContextConsumer=function(e){return w(e)===d},t.isContextProvider=function(e){return w(e)===c},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===n},t.isForwardRef=function(e){return w(e)===f},t.isFragment=function(e){return w(e)===s},t.isLazy=function(e){return w(e)===g},t.isMemo=function(e){return w(e)===m},t.isPortal=function(e){return w(e)===a},t.isProfiler=function(e){return w(e)===u},t.isStrictMode=function(e){return w(e)===o},t.isSuspense=function(e){return w(e)===p},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===s||e===l||e===u||e===o||e===p||e===v||"object"===typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===m||e.$$typeof===c||e.$$typeof===d||e.$$typeof===f||e.$$typeof===b||e.$$typeof===x||e.$$typeof===k||e.$$typeof===y)},t.typeOf=w},function(e,t,r){var i=r(392),n=r(95);e.exports=function e(t,r,a,s,o){return t===r||(null==t||null==r||!n(t)&&!n(r)?t!==t&&r!==r:i(t,r,a,s,e,o))}},function(e,t,r){var i=r(393),n=r(173),a=r(427),s=r(431),o=r(453),u=r(131),c=r(174),d=r(175),h="[object Arguments]",l="[object Array]",f="[object Object]",p=Object.prototype.hasOwnProperty;e.exports=function(e,t,r,v,m,g){var y=u(e),b=u(t),x=y?l:o(e),k=b?l:o(t),w=(x=x==h?f:x)==f,_=(k=k==h?f:k)==f,S=x==k;if(S&&c(e)){if(!c(t))return!1;y=!0,w=!1}if(S&&!w)return g||(g=new i),y||d(e)?n(e,t,r,v,m,g):a(e,t,x,r,v,m,g);if(!(1&r)){var O=w&&p.call(e,"__wrapped__"),T=_&&p.call(t,"__wrapped__");if(O||T){var C=O?e.value():e,I=T?t.value():t;return g||(g=new i),m(C,I,r,v,g)}}return!!S&&(g||(g=new i),s(e,t,r,v,m,g))}},function(e,t,r){var i=r(90),n=r(399),a=r(400),s=r(401),o=r(402),u=r(403);function c(e){var t=this.__data__=new i(e);this.size=t.size}c.prototype.clear=n,c.prototype.delete=a,c.prototype.get=s,c.prototype.has=o,c.prototype.set=u,e.exports=c},function(e,t){e.exports=function(){this.__data__=[],this.size=0}},function(e,t,r){var i=r(91),n=Array.prototype.splice;e.exports=function(e){var t=this.__data__,r=i(t,e);return!(r<0)&&(r==t.length-1?t.pop():n.call(t,r,1),--this.size,!0)}},function(e,t,r){var i=r(91);e.exports=function(e){var t=this.__data__,r=i(t,e);return r<0?void 0:t[r][1]}},function(e,t,r){var i=r(91);e.exports=function(e){return i(this.__data__,e)>-1}},function(e,t,r){var i=r(91);e.exports=function(e,t){var r=this.__data__,n=i(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}},function(e,t,r){var i=r(90);e.exports=function(){this.__data__=new i,this.size=0}},function(e,t){e.exports=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}},function(e,t){e.exports=function(e){return this.__data__.get(e)}},function(e,t){e.exports=function(e){return this.__data__.has(e)}},function(e,t,r){var i=r(90),n=r(129),a=r(172);e.exports=function(e,t){var r=this.__data__;if(r instanceof i){var s=r.__data__;if(!n||s.length<199)return s.push([e,t]),this.size=++r.size,this;r=this.__data__=new a(s)}return r.set(e,t),this.size=r.size,this}},function(e,t,r){var i=r(168),n=r(407),a=r(170),s=r(171),o=/^\[object .+?Constructor\]$/,u=Function.prototype,c=Object.prototype,d=u.toString,h=c.hasOwnProperty,l=RegExp("^"+d.call(h).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!a(e)||n(e))&&(i(e)?l:o).test(s(e))}},function(e,t,r){var i=r(130),n=Object.prototype,a=n.hasOwnProperty,s=n.toString,o=i?i.toStringTag:void 0;e.exports=function(e){var t=a.call(e,o),r=e[o];try{e[o]=void 0;var i=!0}catch(u){}var n=s.call(e);return i&&(t?e[o]=r:delete e[o]),n}},function(e,t){var r=Object.prototype.toString;e.exports=function(e){return r.call(e)}},function(e,t,r){var i=r(408),n=function(){var e=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();e.exports=function(e){return!!n&&n in e}},function(e,t,r){var i=r(53)["__core-js_shared__"];e.exports=i},function(e,t){e.exports=function(e,t){return null==e?void 0:e[t]}},function(e,t,r){var i=r(411),n=r(90),a=r(129);e.exports=function(){this.size=0,this.__data__={hash:new i,map:new(a||n),string:new i}}},function(e,t,r){var i=r(412),n=r(413),a=r(414),s=r(415),o=r(416);function u(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}u.prototype.clear=i,u.prototype.delete=n,u.prototype.get=a,u.prototype.has=s,u.prototype.set=o,e.exports=u},function(e,t,r){var i=r(93);e.exports=function(){this.__data__=i?i(null):{},this.size=0}},function(e,t){e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},function(e,t,r){var i=r(93),n=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(i){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return n.call(t,e)?t[e]:void 0}},function(e,t,r){var i=r(93),n=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return i?void 0!==t[e]:n.call(t,e)}},function(e,t,r){var i=r(93);e.exports=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=i&&void 0===t?"__lodash_hash_undefined__":t,this}},function(e,t,r){var i=r(94);e.exports=function(e){var t=i(this,e).delete(e);return this.size-=t?1:0,t}},function(e,t){e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},function(e,t,r){var i=r(94);e.exports=function(e){return i(this,e).get(e)}},function(e,t,r){var i=r(94);e.exports=function(e){return i(this,e).has(e)}},function(e,t,r){var i=r(94);e.exports=function(e,t){var r=i(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}},function(e,t,r){var i=r(172),n=r(423),a=r(424);function s(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new i;++t<r;)this.add(e[t])}s.prototype.add=s.prototype.push=n,s.prototype.has=a,e.exports=s},function(e,t){e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},function(e,t){e.exports=function(e){return this.__data__.has(e)}},function(e,t){e.exports=function(e,t){for(var r=-1,i=null==e?0:e.length;++r<i;)if(t(e[r],r,e))return!0;return!1}},function(e,t){e.exports=function(e,t){return e.has(t)}},function(e,t,r){var i=r(130),n=r(428),a=r(167),s=r(173),o=r(429),u=r(430),c=i?i.prototype:void 0,d=c?c.valueOf:void 0;e.exports=function(e,t,r,i,c,h,l){switch(r){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!h(new n(e),new n(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return a(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var f=o;case"[object Set]":var p=1&i;if(f||(f=u),e.size!=t.size&&!p)return!1;var v=l.get(e);if(v)return v==t;i|=2,l.set(e,t);var m=s(f(e),f(t),i,c,h,l);return l.delete(e),m;case"[object Symbol]":if(d)return d.call(e)==d.call(t)}return!1}},function(e,t,r){var i=r(53).Uint8Array;e.exports=i},function(e,t){e.exports=function(e){var t=-1,r=Array(e.size);return e.forEach((function(e,i){r[++t]=[i,e]})),r}},function(e,t){e.exports=function(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r}},function(e,t,r){var i=r(432),n=Object.prototype.hasOwnProperty;e.exports=function(e,t,r,a,s,o){var u=1&r,c=i(e),d=c.length;if(d!=i(t).length&&!u)return!1;for(var h=d;h--;){var l=c[h];if(!(u?l in t:n.call(t,l)))return!1}var f=o.get(e),p=o.get(t);if(f&&p)return f==t&&p==e;var v=!0;o.set(e,t),o.set(t,e);for(var m=u;++h<d;){var g=e[l=c[h]],y=t[l];if(a)var b=u?a(y,g,l,t,e,o):a(g,y,l,e,t,o);if(!(void 0===b?g===y||s(g,y,r,a,o):b)){v=!1;break}m||(m="constructor"==l)}if(v&&!m){var x=e.constructor,k=t.constructor;x==k||!("constructor"in e)||!("constructor"in t)||"function"==typeof x&&x instanceof x&&"function"==typeof k&&k instanceof k||(v=!1)}return o.delete(e),o.delete(t),v}},function(e,t,r){var i=r(433),n=r(435),a=r(438);e.exports=function(e){return i(e,a,n)}},function(e,t,r){var i=r(434),n=r(131);e.exports=function(e,t,r){var a=t(e);return n(e)?a:i(a,r(e))}},function(e,t){e.exports=function(e,t){for(var r=-1,i=t.length,n=e.length;++r<i;)e[n+r]=t[r];return e}},function(e,t,r){var i=r(436),n=r(437),a=Object.prototype.propertyIsEnumerable,s=Object.getOwnPropertySymbols,o=s?function(e){return null==e?[]:(e=Object(e),i(s(e),(function(t){return a.call(e,t)})))}:n;e.exports=o},function(e,t){e.exports=function(e,t){for(var r=-1,i=null==e?0:e.length,n=0,a=[];++r<i;){var s=e[r];t(s,r,e)&&(a[n++]=s)}return a}},function(e,t){e.exports=function(){return[]}},function(e,t,r){var i=r(439),n=r(448),a=r(452);e.exports=function(e){return a(e)?i(e):n(e)}},function(e,t,r){var i=r(440),n=r(441),a=r(131),s=r(174),o=r(444),u=r(175),c=Object.prototype.hasOwnProperty;e.exports=function(e,t){var r=a(e),d=!r&&n(e),h=!r&&!d&&s(e),l=!r&&!d&&!h&&u(e),f=r||d||h||l,p=f?i(e.length,String):[],v=p.length;for(var m in e)!t&&!c.call(e,m)||f&&("length"==m||h&&("offset"==m||"parent"==m)||l&&("buffer"==m||"byteLength"==m||"byteOffset"==m)||o(m,v))||p.push(m);return p}},function(e,t){e.exports=function(e,t){for(var r=-1,i=Array(e);++r<e;)i[r]=t(r);return i}},function(e,t,r){var i=r(442),n=r(95),a=Object.prototype,s=a.hasOwnProperty,o=a.propertyIsEnumerable,u=i(function(){return arguments}())?i:function(e){return n(e)&&s.call(e,"callee")&&!o.call(e,"callee")};e.exports=u},function(e,t,r){var i=r(92),n=r(95);e.exports=function(e){return n(e)&&"[object Arguments]"==i(e)}},function(e,t){e.exports=function(){return!1}},function(e,t){var r=/^(?:0|[1-9]\d*)$/;e.exports=function(e,t){var i=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==i||"symbol"!=i&&r.test(e))&&e>-1&&e%1==0&&e<t}},function(e,t,r){var i=r(92),n=r(176),a=r(95),s={};s["[object Float32Array]"]=s["[object Float64Array]"]=s["[object Int8Array]"]=s["[object Int16Array]"]=s["[object Int32Array]"]=s["[object Uint8Array]"]=s["[object Uint8ClampedArray]"]=s["[object Uint16Array]"]=s["[object Uint32Array]"]=!0,s["[object Arguments]"]=s["[object Array]"]=s["[object ArrayBuffer]"]=s["[object Boolean]"]=s["[object DataView]"]=s["[object Date]"]=s["[object Error]"]=s["[object Function]"]=s["[object Map]"]=s["[object Number]"]=s["[object Object]"]=s["[object RegExp]"]=s["[object Set]"]=s["[object String]"]=s["[object WeakMap]"]=!1,e.exports=function(e){return a(e)&&n(e.length)&&!!s[i(e)]}},function(e,t){e.exports=function(e){return function(t){return e(t)}}},function(e,t,r){(function(e){var i=r(169),n=t&&!t.nodeType&&t,a=n&&"object"==typeof e&&e&&!e.nodeType&&e,s=a&&a.exports===n&&i.process,o=function(){try{var e=a&&a.require&&a.require("util").types;return e||s&&s.binding&&s.binding("util")}catch(t){}}();e.exports=o}).call(this,r(87)(e))},function(e,t,r){var i=r(449),n=r(450),a=Object.prototype.hasOwnProperty;e.exports=function(e){if(!i(e))return n(e);var t=[];for(var r in Object(e))a.call(e,r)&&"constructor"!=r&&t.push(r);return t}},function(e,t){var r=Object.prototype;e.exports=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||r)}},function(e,t,r){var i=r(451)(Object.keys,Object);e.exports=i},function(e,t){e.exports=function(e,t){return function(r){return e(t(r))}}},function(e,t,r){var i=r(168),n=r(176);e.exports=function(e){return null!=e&&n(e.length)&&!i(e)}},function(e,t,r){var i=r(454),n=r(129),a=r(455),s=r(456),o=r(457),u=r(92),c=r(171),d="[object Map]",h="[object Promise]",l="[object Set]",f="[object WeakMap]",p="[object DataView]",v=c(i),m=c(n),g=c(a),y=c(s),b=c(o),x=u;(i&&x(new i(new ArrayBuffer(1)))!=p||n&&x(new n)!=d||a&&x(a.resolve())!=h||s&&x(new s)!=l||o&&x(new o)!=f)&&(x=function(e){var t=u(e),r="[object Object]"==t?e.constructor:void 0,i=r?c(r):"";if(i)switch(i){case v:return p;case m:return d;case g:return h;case y:return l;case b:return f}return t}),e.exports=x},function(e,t,r){var i=r(68)(r(53),"DataView");e.exports=i},function(e,t,r){var i=r(68)(r(53),"Promise");e.exports=i},function(e,t,r){var i=r(68)(r(53),"Set");e.exports=i},function(e,t,r){var i=r(68)(r(53),"WeakMap");e.exports=i},,function(e,t,r){"use strict";r(64),r.p,r.p,r.p},function(e,t,r){"use strict";r(64),r.p,r.p},function(e,t,r){"use strict";r(64),r.p,r(177)},,,,,function(e,t,r){"use strict";r.d(t,"b",(function(){return g})),r.d(t,"a",(function(){return y}));var i=r(13),n=r(0),a=r(9),s=r(14),o=r.n(s),u=r(113),c=function(){var e=(0,n.useContext(g).getPrefixCls)("empty-img-default");return n.createElement("svg",{className:e,width:"184",height:"152",viewBox:"0 0 184 152",xmlns:"http://www.w3.org/2000/svg"},n.createElement("g",{fill:"none",fillRule:"evenodd"},n.createElement("g",{transform:"translate(24 31.67)"},n.createElement("ellipse",{className:"".concat(e,"-ellipse"),cx:"67.797",cy:"106.89",rx:"67.797",ry:"12.668"}),n.createElement("path",{className:"".concat(e,"-path-1"),d:"M122.034 69.674L98.109 40.229c-1.148-1.386-2.826-2.225-4.593-2.225h-51.44c-1.766 0-3.444.839-4.592 2.225L13.56 69.674v15.383h108.475V69.674z"}),n.createElement("path",{className:"".concat(e,"-path-2"),d:"M101.537 86.214L80.63 61.102c-1.001-1.207-2.507-1.867-4.048-1.867H31.724c-1.54 0-3.047.66-4.048 1.867L6.769 86.214v13.792h94.768V86.214z",transform:"translate(13.56)"}),n.createElement("path",{className:"".concat(e,"-path-3"),d:"M33.83 0h67.933a4 4 0 0 1 4 4v93.344a4 4 0 0 1-4 4H33.83a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4z"}),n.createElement("path",{className:"".concat(e,"-path-4"),d:"M42.678 9.953h50.237a2 2 0 0 1 2 2V36.91a2 2 0 0 1-2 2H42.678a2 2 0 0 1-2-2V11.953a2 2 0 0 1 2-2zM42.94 49.767h49.713a2.262 2.262 0 1 1 0 4.524H42.94a2.262 2.262 0 0 1 0-4.524zM42.94 61.53h49.713a2.262 2.262 0 1 1 0 4.525H42.94a2.262 2.262 0 0 1 0-4.525zM121.813 105.032c-.775 3.071-3.497 5.36-6.735 5.36H20.515c-3.238 0-5.96-2.29-6.734-5.36a7.309 7.309 0 0 1-.222-1.79V69.675h26.318c2.907 0 5.25 2.448 5.25 5.42v.04c0 2.971 2.37 5.37 5.277 5.37h34.785c2.907 0 5.277-2.421 5.277-5.393V75.1c0-2.972 2.343-5.426 5.25-5.426h26.318v33.569c0 .617-.077 1.216-.221 1.789z"})),n.createElement("path",{className:"".concat(e,"-path-5"),d:"M149.121 33.292l-6.83 2.65a1 1 0 0 1-1.317-1.23l1.937-6.207c-2.589-2.944-4.109-6.534-4.109-10.408C138.802 8.102 148.92 0 161.402 0 173.881 0 184 8.102 184 18.097c0 9.995-10.118 18.097-22.599 18.097-4.528 0-8.744-1.066-12.28-2.902z"}),n.createElement("g",{className:"".concat(e,"-g"),transform:"translate(149.65 15.383)"},n.createElement("ellipse",{cx:"20.654",cy:"3.167",rx:"2.849",ry:"2.815"}),n.createElement("path",{d:"M5.698 5.63H0L2.898.704zM9.259.704h4.985V5.63H9.259z"}))))},d=function(){var e=(0,n.useContext(g).getPrefixCls)("empty-img-simple");return n.createElement("svg",{className:e,width:"64",height:"41",viewBox:"0 0 64 41",xmlns:"http://www.w3.org/2000/svg"},n.createElement("g",{transform:"translate(0 1)",fill:"none",fillRule:"evenodd"},n.createElement("ellipse",{className:"".concat(e,"-ellipse"),cx:"32",cy:"33",rx:"32",ry:"7"}),n.createElement("g",{className:"".concat(e,"-g"),fillRule:"nonzero"},n.createElement("path",{d:"M55 12.76L44.854 1.258C44.367.474 43.656 0 42.907 0H21.093c-.749 0-1.46.474-1.947 1.257L9 12.761V22h46v-9.24z"}),n.createElement("path",{d:"M41.613 15.931c0-1.605.994-2.93 2.227-2.931H55v18.137C55 33.26 53.68 35 52.05 35h-40.1C10.32 35 9 33.259 9 31.137V13h11.16c1.233 0 2.227 1.323 2.227 2.928v.022c0 1.605 1.005 2.901 2.237 2.901h14.752c1.232 0 2.237-1.308 2.237-2.913v-.007z",className:"".concat(e,"-path")}))))},h=function(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var n=0;for(i=Object.getOwnPropertySymbols(e);n<i.length;n++)t.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(e,i[n])&&(r[i[n]]=e[i[n]])}return r},l=n.createElement(c,null),f=n.createElement(d,null),p=function(e){var t=e.className,r=e.prefixCls,s=e.image,c=void 0===s?l:s,d=e.description,p=e.children,v=e.imageStyle,m=h(e,["className","prefixCls","image","description","children","imageStyle"]),y=n.useContext(g),b=y.getPrefixCls,x=y.direction;return n.createElement(u.a,{componentName:"Empty"},(function(e){var s,u=b("empty",r),h="undefined"!==typeof d?d:e.description,l="string"===typeof h?h:"empty",g=null;return g="string"===typeof c?n.createElement("img",{alt:l,src:c}):c,n.createElement("div",Object(i.a)({className:o()(u,(s={},Object(a.a)(s,"".concat(u,"-normal"),c===f),Object(a.a)(s,"".concat(u,"-rtl"),"rtl"===x),s),t)},m),n.createElement("div",{className:"".concat(u,"-image"),style:v},g),h&&n.createElement("div",{className:"".concat(u,"-description")},h),p&&n.createElement("div",{className:"".concat(u,"-footer")},p))}))};p.PRESENTED_IMAGE_DEFAULT=l,p.PRESENTED_IMAGE_SIMPLE=f;var v=p,m=function(e){return n.createElement(y,null,(function(t){var r=(0,t.getPrefixCls)("empty");switch(e){case"Table":case"List":return n.createElement(v,{image:v.PRESENTED_IMAGE_SIMPLE});case"Select":case"TreeSelect":case"Cascader":case"Transfer":case"Mentions":return n.createElement(v,{image:v.PRESENTED_IMAGE_SIMPLE,className:"".concat(r,"-small")});default:return n.createElement(v,null)}}))},g=n.createContext({getPrefixCls:function(e,t){return t||(e?"ant-".concat(e):"ant")},renderEmpty:m}),y=g.Consumer}]]);
//# sourceMappingURL=2.f4d40479.chunk.js.map